import{r as n,j as b}from"./index-D_zi-PEm.js";import{T as g,a as f}from"./index-BJmlre6f.js";const m={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function r({className:l,value:t,...o}){const e=n.useMemo(()=>m[(t==null?void 0:t[0])+(t==null?void 0:t[1])]??m.default,[t]);return b.jsx("div",{className:`mahjong-tile-v2 ${e} ${(t==null?void 0:t[2])==="#"?"opacity-50":""}`,...o})}const c=l=>{const t=[...l.matchAll(/(\d[mpsz])(a?)([-=]?)(\s*)/g)],o=[];let e=0,s=g;for(let p=0;p<t.length;p++){const _=t[p];o.push({tile:_[1],x:_[3]==="="?e-g:e,y:_[3]==="="?f:0,isRotate:_[3]==="-"||_[3]==="="}),_[3]==="-"?e+=g:_[3]||(e+=f),_[3]==="="&&(s=f*2),e+=(_[4].length||0)*.2*f}return[o,e,s]};function d({value:l}){const[t,o,e]=n.useMemo(()=>c(l),[l]);return b.jsx("div",{className:"relative overflow-visible",style:{width:`${o}em`,height:`${e}em`},children:t.map(({tile:s,x:p,y:_,isRotate:i})=>b.jsx(r,{value:s,style:{position:"absolute",left:`${(i?p+g:p).toFixed(1)}em`,bottom:`${_.toFixed(1)}em`,transform:i?"rotate(-90deg)":"none"}}))})}export{r as M,d as a};
