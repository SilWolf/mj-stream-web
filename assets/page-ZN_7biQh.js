import{r as a,x as p,j as e,M as h}from"./index-XMqLaEd9.js";import{S as d}from"./SCENES-Qn-CLsnW.js";const w=()=>{const s=[window.innerWidth,window.innerHeight],[c,t]=a.useState(s);return a.useEffect(()=>{const i=()=>{t([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[]),c};function b(){const s=a.useRef(null),[c]=w(),{data:t,update:i}=p("obs/1"),n=a.useMemo(()=>d.find(({id:r})=>r===(t==null?void 0:t.activeSceneId))??d[0],[t==null?void 0:t.activeSceneId]),x=a.useCallback(r=>{const l=r.currentTarget.getAttribute("data-id");if(!l)return;const o=d.find(({id:u})=>u===l);o&&i({activeSceneId:o.id})},[i]),m=a.useCallback(r=>()=>{i({activeSceneProps:r((t==null?void 0:t.activeSceneProps)??{})})},[t==null?void 0:t.activeSceneProps,i]);return a.useEffect(()=>{if(!s.current)return;const r=Math.min(.375,Math.max(0,(c-48)/720*.375));s.current.style.transform=`scale(${r})`},[s.current,c]),t?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"py-8 container px-6 max-w-(--breakpoint-md) mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-red-600",children:[e.jsx("i",{className:"bi bi-record-circle"})," 目前場景：",(n==null?void 0:n.name)??"(沒有)"]}),e.jsx("div",{className:"overflow-hidden w-full aspect-video ring-3 ring-error mt-2",children:e.jsx("iframe",{className:" w-[1920px] h-[1080px] origin-top-left scale-[.375]",src:"/obs/scene/master",frameBorder:0})}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"/obs/scene/master",target:"_blank",children:["打開連結 ",e.jsx("i",{className:"bi bi-box-arrow-up-right"})]})}),n.actions&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[e.jsxs("p",{className:"font-bold",children:[e.jsx("i",{className:"bi bi-hand-index-thumb"})," 場景動作："]}),n.actions.map(r=>e.jsx(h,{size:"xlarge",onClick:m(r.perform),children:r.label},r.key))]})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold mb-2",children:"切換場景（雙點擊以防誤觸）"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(r=>e.jsx("button",{"data-id":r.id,"data-active":r.id===n.id,className:"bg-green-300 border-green-400 rounded-lg text-green-800 text-lg py-4 px-6 data-[active=true]:ring-3 data-[active=true]:ring-red-500",onDoubleClick:x,children:r.name},r.id))})]})]})}):e.jsx(e.Fragment,{})}export{b as default};
