import{r,j as e,c as E,d as C,A as d,z}from"./index-BMGwXdKL.js";import{c as h}from"./index-BcKRuG_D.js";import{u as q}from"./index-BzaGo0KI.js";import{u as M}from"./index-BHEvSQpW.js";import"./sanity.helper-DUp38FlF.js";const A=({team:t,player:s,fadeIn:i,fadeOut:p,delay:m})=>{const a=z(t.color);return e.jsxs("div",{className:h("relative aspect-18/25 rounded-[1em] overflow-hidden",{"mi-team-player-in":i,"mi-team-player-out":p}),style:{background:`linear-gradient(180deg, ${t.color}, ${a})`,animationDelay:m+"s"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:`url(${t.squareLogoImage+"?w=500&h=500&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.2}}),e.jsx("img",{className:"relative z-10 block mx-auto w-full",src:s.portraitImage+"?h=500&w=360&auto=format&fit=crop&crop=top",alt:s.name}),e.jsx("div",{className:"absolute z-20 bottom-0 left-0 right-0 text-center py-[0.25em]",style:{background:"linear-gradient(to top, #00000090 80%, transparent"},children:e.jsxs("div",{children:[e.jsx("p",{className:"text-[1.5em] leading-[1em] font-semibold",children:s.nickname}),e.jsx("p",{className:"text-[0.8em]",children:s.name})]})})]},s.name)},W=({slide:t,status:s,subslide:i})=>{var p,m,a,f,j,o,g,u,v,y,N,k,b,w,x,S,l,n,I,R,T;return t.type==="teams"?e.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:s>=0&&s<1?1:0},children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex-2 grid grid-cols-4 items-center",children:t.teamAndPlayers.map(({team:c,player:P},_)=>e.jsxs("div",{className:h("relative h-full overflow-hidden",{"mi-teams-in":s===0,"mi-teams-out":s>0}),style:{animationDelay:s===0?_*.25+"s":"0s"},children:[e.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${c.color})`,opacity:.5}},c._id),e.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${c.squareLogoImage+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),e.jsxs("div",{className:h("absolute inset-0",{"mi-teams-team-out":s>=0&&i>0}),children:[e.jsx("img",{src:c.squareLogoImage+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),e.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:c.name}),e.jsx("h3",{className:"text-[1em] font-semibold text-center",children:c.secondaryName})]}),e.jsxs("div",{className:h("absolute inset-0 opacity-0",{"mi-teams-player-in":s>=0&&i>=1,"mi-teams-player-out":s>0}),style:{animationDelay:s===0?_*.25+"s":"0s"},children:[e.jsx("img",{src:P.portraitImage+"?w=360&h=500&auto=format",className:"aspect-18/25 w-full",alt:""}),e.jsxs("div",{className:"font-semibold text-center",children:[e.jsx("p",{className:"text-[1em]",children:P.nickname}),e.jsx("p",{className:"text-[.8em]",children:P.name})]})]})]},c._id))})]}):t.type==="team"?e.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:s>=0&&s<1?1:0},children:[e.jsx("div",{className:h("absolute inset-0 -z-10",{"mi-team-colorBackground-in":s===0,"mi-team-colorBackground-out":s>0}),style:{background:`linear-gradient(to bottom, transparent 60%, ${t.team.color})`,opacity:.5}}),e.jsx("div",{className:h("absolute inset-0 -z-10",{"mi-team-logoBackground-in":s===0,"mi-team-logoBackground-out":s>0}),style:{background:`url(${t.team.squareLogoImage+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.125}}),e.jsxs("div",{className:h("text-right mb-[.5em]",{"mi-team-team-in":s===0,"mi-team-team-out":s>0}),children:[e.jsxs("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:[e.jsxs("div",{className:"text-left space-y-[.5em]",children:[e.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[e.jsx("p",{children:"隊伍積分"}),e.jsx("p",{children:e.jsx("span",{className:"font-numeric",children:E((p=t.team.statistics)==null?void 0:p.point)})})]}),e.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[e.jsx("p",{children:"隊伍排名"}),e.jsx("p",{children:e.jsx("span",{className:"font-numeric",children:C((m=t.team.statistics)==null?void 0:m.ranking)})})]})]}),e.jsx("img",{src:t.team.squareLogoImage+"?w=512&h=512&auto=format",alt:t.team.name,className:"aspect-square",style:{width:256,height:256}})]}),e.jsxs("h3",{className:"inline-block font-semibold text-right text-[1.5em]",children:[t.team.name," ",t.team.secondaryName]})]}),e.jsxs("div",{className:"flex-2 relative",children:[e.jsx("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:s===0&&i>=0&&i<1?1:0},children:t.players.map((c,P)=>e.jsx(A,{team:t.team,player:c,fadeIn:s===0&&i<=0,fadeOut:s===0&&i>0,delay:(i<=0,0+P*.25)},c._id))}),e.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:s>=0&&s<1&&i>=1&&i<2?1:0},children:[e.jsx(A,{team:t.team,player:t.focusPlayer,fadeIn:s===0&&i===1,fadeOut:s>0,delay:0}),e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:h({"mi-team-activePlayerStat-in":s===0&&i===1,"mi-team-activePlayerStat-out":s>0}),children:[e.jsxs("div",{className:"flex justify-between mb-[1em]",children:[e.jsxs("p",{className:"text-[2em] flex items-center",children:[e.jsx("span",{children:"個人總分"}),e.jsx("span",{className:"font-numeric",children:E((a=t.focusPlayer.statistics)==null?void 0:a.point)}),e.jsxs("span",{className:"ml-4 font-numeric text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[((f=t.focusPlayer.statistics)==null?void 0:f.pointRanking)??"-","名"]})]}),e.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",e.jsx("span",{className:"font-numeric",children:((j=t.focusPlayer.statistics)==null?void 0:j.matchCount)??"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-numeric",children:d((o=t.focusPlayer.statistics)==null?void 0:o.nonFourthP)}),e.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((g=t.focusPlayer.statistics)==null?void 0:g.nonFourthPRanking)??"-","名"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"連對率"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-numeric",children:d((u=t.focusPlayer.statistics)==null?void 0:u.firstAndSecondP)}),e.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((v=t.focusPlayer.statistics)==null?void 0:v.firstAndSecondPRanking)??"-","名"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"立直率"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-numeric",children:d((y=t.focusPlayer.statistics)==null?void 0:y.riichiP)}),e.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((N=t.focusPlayer.statistics)==null?void 0:N.riichiPRanking)??"-","名"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"和了率"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-numeric",children:d((k=t.focusPlayer.statistics)==null?void 0:k.ronP)}),e.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((b=t.focusPlayer.statistics)==null?void 0:b.ronPRanking)??"-","名"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"銃和率"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-numeric",children:d((w=t.focusPlayer.statistics)==null?void 0:w.chuckP)}),e.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((x=t.focusPlayer.statistics)==null?void 0:x.chuckPRanking)??"-","名"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"副露率"}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"font-numeric",children:d((S=t.focusPlayer.statistics)==null?void 0:S.revealP)}),e.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((l=t.focusPlayer.statistics)==null?void 0:l.revealPRanking)??"-","名"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.8em]",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[.9em]",children:"和了平均打點"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-numeric",children:d((n=t.focusPlayer.statistics)==null?void 0:n.ronPureScoreAvg)}),e.jsxs("p",{className:"font-numeric text-[.75em] min-w-[2.5em] text-cyan-400 -mt-4",children:[((I=t.focusPlayer.statistics)==null?void 0:I.ronPureScoreAvgRanking)??"-","名"]})]})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[.9em]",children:"銃和平均打點"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-numeric",children:d((R=t.focusPlayer.statistics)==null?void 0:R.chuckPureScoreAvg)}),e.jsxs("p",{className:"font-numeric text-[.75em] min-w-[2.5em] text-cyan-400 -mt-4",children:[((T=t.focusPlayer.statistics)==null?void 0:T.chuckPureScoreAvgRanking)??"-","名"]})]})]})]})]})})]})]})]}):e.jsx(e.Fragment,{})},F=({params:{matchId:t},forwardFlag:s,resetFlag:i,disableClick:p})=>{const{rtMatch:m}=M(t),{data:a}=q(m==null?void 0:m.databaseId),f=r.useMemo(()=>a?[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teamAndPlayers:[{team:a.playerEastTeam,player:a.playerEast},{team:a.playerSouthTeam,player:a.playerSouth},{team:a.playerWestTeam,player:a.playerWest},{team:a.playerNorthTeam,player:a.playerNorth}],subslide:1},{_id:"team_playerEast",type:"team",team:a.playerEastTeam,players:a.playerEastTeam.players,focusPlayer:a.playerEast,subslide:2},{_id:"team_playerSouth",type:"team",team:a.playerSouthTeam,players:a.playerSouthTeam.players,focusPlayer:a.playerSouth,subslide:2},{_id:"team_playerWest",type:"team",team:a.playerWestTeam,players:a.playerWestTeam.players,focusPlayer:a.playerWest,subslide:2},{_id:"team_playerNorth",type:"team",team:a.playerNorthTeam,players:a.playerNorthTeam.players,focusPlayer:a.playerNorth,subslide:2}]:[{type:"empty",_id:"empty",subslide:0}],[a]),[j,o]=r.useState(0),[g,u]=r.useState(0),[v,y]=r.useState(!1),[N,k]=r.useState(s??0),[b,w]=r.useState(i??0),x=r.useCallback(()=>{if(v)return;const l=f[j];if(!l){o(1);return}l.type==="empty"?o(n=>n+1):g>=l.subslide-1?(o(n=>n+.5),y(!0),setTimeout(()=>{o(n=>Math.ceil(n)),u(0),y(!1)},1200)):(u(n=>n+.5),y(!0),setTimeout(()=>{u(n=>Math.ceil(n)),y(!1)},1200))},[v,j,f,g]),S=r.useCallback(()=>{p||x()},[p,x]);return r.useEffect(()=>{typeof s<"u"&&s!==N&&(x(),k(s))},[s,x,N]),r.useEffect(()=>{typeof i<"u"&&i!==b&&(o(0),u(0),w(i))},[s,x,N,b,i]),a?e.jsxs("div",{className:"match-introduction absolute inset-0 text-white text-[36px] -z-50 overflow-hidden",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:S,children:[e.jsx("div",{className:"absolute py-16 px-24 inset-0",children:e.jsxs("div",{className:"flex gap-x-[0.25em] mi-title-in",children:[e.jsx("div",{children:e.jsx("img",{src:a.tournament.logoUrl+"?w=280&h=280&auto=format",alt:a.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:a.tournament.name}),e.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:a.name})]})]})}),f.map((l,n)=>e.jsx(W,{slide:l,status:j-n,subslide:g},l._id))]}):e.jsx(e.Fragment,{})};export{F as default};
