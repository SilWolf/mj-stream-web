import{r as c,j as e,c as I,A as x}from"./index-D_zi-PEm.js";import{c as f}from"./index-tXkCXCo7.js";import{u as T}from"./index-BEtMhV3C.js";import{u as A}from"./index-DAMtnkVo.js";import"./sanity.helper-CiwwXhvR.js";const E={"match-introduction":"_match-introduction_ub6jd_250"},C=({player:s,fadeIn:t,fadeOut:l,delay:r})=>e.jsx("div",{className:f("absolute -inset-[1em] h-full rounded-[1em] overflow-visible",{"mi-team-player-in":t,"mi-team-player-out":l}),style:{animationDelay:r+"s"},children:e.jsx("img",{className:"absolute inset-0 z-10 block mx-auto w-full",src:s.fullBodyImage+"?h=1200&auto=format&fit=clip",alt:s.name})},s.name),M=({slide:s,status:t,subslide:l})=>{var r,a,p,h,m,y,d,v,u,j,b,g,P,o,S,n,i,k,_;return s.type==="players"?e.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:t>=0&&t<1?1:0},children:[e.jsxs("div",{className:f("flex-1 flex flex-col justify-center pl-16",{"mi-title-in":t===0,"mi-title-out":t>0}),children:[e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"font-bold text-[1.5em] leading-[100%]",children:s.match.startAt.substring(0,10)})}),e.jsxs("div",{className:"flex gap-x-10",children:[e.jsx("div",{className:"font-bold text-[2.5em]",children:"今日出戰選手"}),e.jsx("div",{className:"font-bold text-[2.5em]",children:"Today's Players"})]})]}),e.jsx("div",{className:"flex-2 grid grid-cols-4 items-center font-kurewa",children:s.teamAndPlayers.map(({team:w,player:N},R)=>e.jsxs("div",{className:f("relative h-full overflow-hidden",{"mi-teams-in":t===0,"mi-teams-out":t>0}),style:{animationDelay:t===0?R*.25+"s":"0s"},children:[e.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${w.color})`,opacity:.5}},w._id),e.jsxs("div",{className:f("absolute bottom-0 left-0 right-0",{"mi-teams-team-out":t>=0&&l>0}),children:[e.jsx("h3",{className:"text-[2em] font-semibold text-center mb-8",style:{color:w.color},children:N.name}),e.jsx("img",{src:N.portraitImage+"?w=720&h=1000&auto=format&fit=crop&crop=top",className:"aspect-[18/25] w-full",alt:""})]}),e.jsxs("div",{className:f("absolute inset-0 opacity-0",{"mi-teams-player-in":t>=0&&l>=1,"mi-teams-player-out":t>0}),style:{animationDelay:t===0?R*.25+"s":"0s"},children:[e.jsx("img",{src:N.portraitImage+"?w=720&h=1000&auto=format",className:"aspect-18/25 w-full",alt:""}),e.jsxs("div",{className:"font-semibold text-center",children:[e.jsx("p",{className:"text-[1em]",children:N.nickname}),e.jsx("p",{className:"text-[.8em]",children:N.name})]})]})]},N._id))})]}):s.type==="player"?e.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:t>=0&&t<1?1:0},children:[e.jsxs("div",{className:f("flex-1 text-right mb-[.5em]",{"mi-team-team-in":t===0,"mi-team-team-out":t>0}),children:[e.jsx("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:e.jsxs("div",{className:"text-left space-y-[.5em]",children:[e.jsx("div",{className:"flex justify-start gap-x-[1em]"}),e.jsx("div",{className:"flex justify-start gap-x-[1em]"})]})}),e.jsx("h3",{className:"inline-block font-semibold text-right text-[1.5em]"})]}),e.jsx("div",{className:"flex-8 relative",children:e.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-stretch gap-16",style:{opacity:t>=0&&t<1?1:0},children:[e.jsx("div",{className:"relative col-span-1",children:e.jsx(C,{player:s.focusPlayer,fadeIn:t===0,fadeOut:t>0,delay:0})}),e.jsx("div",{className:"col-span-3 text-[#78012c] -mt-12",children:e.jsxs("div",{className:f({"mi-team-activePlayerStat-in":t===0,"mi-team-activePlayerStat-out":t>0}),children:[e.jsx("div",{className:"text-[5em] font-bold mb-2 font-kurewa",style:{color:s.team.color},children:s.focusPlayer.name}),e.jsxs("div",{className:"flex justify-between mb-[1em] text-[#78012c]",children:[e.jsxs("p",{className:"text-[2em] gap-x-8 flex items-center",children:[e.jsx("span",{children:"總分"}),e.jsx("span",{className:"font-numeric",children:I((r=s.focusPlayer.statistics)==null?void 0:r.point)}),e.jsxs("span",{className:"ml-4 font-numeric text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["( 第 ",((a=s.focusPlayer.statistics)==null?void 0:a.pointRanking)??"-"," ","名 )"]})]}),e.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",e.jsxs("span",{className:"font-numeric",children:[((p=s.focusPlayer.statistics)==null?void 0:p.matchCount)??"0"," / 16"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] gap-y-[.35em] text-[1.5em]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),e.jsxs("p",{className:"flex items-center text-[.8em]",children:[e.jsx("span",{className:"font-numeric",children:x((h=s.focusPlayer.statistics)==null?void 0:h.nonFourthP)}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["("," ",((m=s.focusPlayer.statistics)==null?void 0:m.nonFourthPRanking)??"-"," ","位 )"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[.9em]",children:"連對率"}),e.jsxs("p",{className:"flex items-center text-[.8em]",children:[e.jsxs("span",{className:"font-numeric",children:[" ",x((y=s.focusPlayer.statistics)==null?void 0:y.firstAndSecondP)]}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["("," ",((d=s.focusPlayer.statistics)==null?void 0:d.firstAndSecondPRanking)??"-"," ","位 )"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[.9em]",children:"立直率"}),e.jsxs("p",{className:"flex items-center text-[.8em]",children:[e.jsxs("span",{className:"font-numeric",children:[" ",x((v=s.focusPlayer.statistics)==null?void 0:v.riichiP)]}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["( ",((u=s.focusPlayer.statistics)==null?void 0:u.riichiPRanking)??"-"," ","位 )"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[.9em]",children:"和了率"}),e.jsxs("p",{className:"flex items-center text-[.8em]",children:[e.jsx("span",{className:"font-numeric",children:x((j=s.focusPlayer.statistics)==null?void 0:j.ronP)}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["( ",((b=s.focusPlayer.statistics)==null?void 0:b.ronPRanking)??"-"," 位 )"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[.9em]",children:"銃和率"}),e.jsxs("p",{className:"flex items-center text-[.8em]",children:[e.jsxs("span",{className:"font-numeric",children:[" ",x((g=s.focusPlayer.statistics)==null?void 0:g.chuckP)]}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["( ",((P=s.focusPlayer.statistics)==null?void 0:P.chuckPRanking)??"-"," ","位 )"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-[.9em]",children:"副露率"}),e.jsxs("p",{className:"flex items-center text-[.8em]",children:[e.jsxs("span",{className:"font-numeric",children:[" ",x((o=s.focusPlayer.statistics)==null?void 0:o.revealP)]}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-right text-[#ec276e]",children:["( ",((S=s.focusPlayer.statistics)==null?void 0:S.revealPRanking)??"-",""," 位 )"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.4em]",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[.75em]",children:"和了平均打點"}),e.jsxs("div",{className:"text-right text-[.8em]",children:[e.jsx("span",{className:"font-numeric",children:x((n=s.focusPlayer.statistics)==null?void 0:n.ronPureScoreAvg)}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-[#ec276e] -mt-4",children:["("," ",((i=s.focusPlayer.statistics)==null?void 0:i.ronPureScoreAvgRanking)??"-"," ","位 )"]})]})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[.75em]",children:"銃和平均打點"}),e.jsxs("div",{className:"text-right text-[.8em]",children:[e.jsx("span",{className:"font-numeric",children:x((k=s.focusPlayer.statistics)==null?void 0:k.chuckPureScoreAvg)}),e.jsxs("span",{className:"font-numeric ml-6 text-[.75em] min-w-[2.5em] text-[#ec276e] -mt-4",children:["("," ",((_=s.focusPlayer.statistics)==null?void 0:_.chuckPureScoreAvgRanking)??"-"," ","位 )"]})]})]})]})]})})]})})]}):e.jsx(e.Fragment,{})},$=({params:{matchId:s},forwardFlag:t,resetFlag:l})=>{const{rtMatch:r}=A(s),{data:a}=T(r==null?void 0:r.databaseId),p=c.useMemo(()=>a?[{type:"players",_id:"players",match:a,teamAndPlayers:[{team:a.playerEastTeam,player:a.playerEast},{team:a.playerSouthTeam,player:a.playerSouth},{team:a.playerWestTeam,player:a.playerWest},{team:a.playerNorthTeam,player:a.playerNorth}],subslide:1},{_id:"player_playerEast",type:"player",team:a.playerEastTeam,focusPlayer:a.playerEast,subslide:1},{_id:"player_playerSouth",type:"player",team:a.playerSouthTeam,focusPlayer:a.playerSouth,subslide:1},{_id:"player_playerWest",type:"player",team:a.playerWestTeam,focusPlayer:a.playerWest,subslide:1},{_id:"player_playerNorth",type:"player",team:a.playerNorthTeam,focusPlayer:a.playerNorth,subslide:1}]:[{type:"empty",_id:"empty",subslide:0}],[a]),[h,m]=c.useState(0),[y,d]=c.useState(0),[v,u]=c.useState(!1),[j,b]=c.useState(t??0),[g,P]=c.useState(l??0),o=c.useCallback(()=>{if(v)return;const n=p[h];if(!n){m(0);return}n.type==="empty"?m(i=>i+1):y>=n.subslide-1?(m(i=>i+.5),u(!0),setTimeout(()=>{m(i=>Math.ceil(i)),d(0),u(!1)},1200)):(d(i=>i+.5),u(!0),setTimeout(()=>{d(i=>Math.ceil(i)),u(!1)},1200))},[v,h,p,y]),S=c.useCallback(()=>{o()},[o]);return c.useEffect(()=>{typeof t<"u"&&t!==j&&(o(),b(t))},[t,o,j]),c.useEffect(()=>{typeof l<"u"&&l!==g&&(m(0),d(0),P(l))},[t,o,j,g,l]),a?e.jsxs("div",{className:`absolute inset-0 text-[#ec276e] text-[36px] -z-50 overflow-hidden ${E["match-introduction"]}`,style:{background:"linear-gradient(to bottom, rgb(255, 217, 227), rgb(255, 192, 203))"},onClick:S,children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("video",{src:"/videos/ptt-bg3.mp4",className:"absolute inset-0",autoPlay:!0,loop:!0,muted:!0})}),e.jsx("div",{className:"absolute pt-6 pb-16 pl-16 pr-24 inset-0 flex items-start justify-end"}),p.map((n,i)=>e.jsx(M,{slide:n,status:h-i,subslide:y},n._id))]}):e.jsx(e.Fragment,{})};export{$ as default};
