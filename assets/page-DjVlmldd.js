import{r as i,x as p,j as e,M as h}from"./index-BMGwXdKL.js";import{S as d}from"./SCENES-BzaZrDZ2.js";const w=()=>{const n=[window.innerWidth,window.innerHeight],[c,t]=i.useState(n);return i.useEffect(()=>{const a=()=>{t([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),c};function g(){const n=i.useRef(null),[c]=w(),{data:t,update:a}=p("obs/1"),s=i.useMemo(()=>d.find(({id:r})=>r===(t==null?void 0:t.activeSceneId))??d[0],[t==null?void 0:t.activeSceneId]),m=i.useCallback(r=>{const l=r.currentTarget.getAttribute("data-id");if(!l)return;const o=d.find(({id:u})=>u===l);o&&a({activeSceneId:o.id})},[a]),x=i.useCallback(r=>()=>{a({activeSceneProps:r((t==null?void 0:t.activeSceneProps)??{})})},[t==null?void 0:t.activeSceneProps,a]);return i.useEffect(()=>{if(!n.current)return;const r=Math.min(.375,Math.max(0,(c-48)/720*.375));n.current.style.transform=`scale(${r})`},[n.current,c]),t?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"py-8 container px-6 max-w-(--breakpoint-md) mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-red-600",children:[e.jsx("i",{className:"bi bi-record-circle"})," 目前場景：",(s==null?void 0:s.name)??"(沒有)"]}),e.jsx("div",{className:"overflow-hidden w-full aspect-video ring-3 ring-error mt-2",children:e.jsx("iframe",{className:" w-[1920px] h-[1080px] origin-top-left scale-[.375]",src:"/mj-stream-web/#/obs/scene/master",frameBorder:0})}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"/mj-stream-web/#/obs/scene/master",target:"_blank",children:["打開連結 ",e.jsx("i",{className:"bi bi-box-arrow-up-right"})]})}),s.actions&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[e.jsxs("p",{className:"font-bold",children:[e.jsx("i",{className:"bi bi-hand-index-thumb"})," 場景動作："]}),s.actions.map(r=>e.jsx(h,{size:"xlarge",onClick:x(r.perform),children:r.label},r.key))]})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold mb-2",children:"切換場景（雙點擊以防誤觸）"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(r=>e.jsx("button",{"data-id":r.id,"data-active":r.id===s.id,className:"bg-green-300 border-green-400 rounded-lg text-green-800 text-lg py-4 px-6 data-[active=true]:ring-3 data-[active=true]:ring-red-500",onDoubleClick:m,children:r.name},r.id))})]})]})}):e.jsx(e.Fragment,{})}export{g as default};
