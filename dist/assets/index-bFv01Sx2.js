var kS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var D=(t,e,r)=>(kS(t,e,"read from private field"),r?r.call(t):e.get(t)),de=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},ae=(t,e,r,n)=>(kS(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var av=(t,e,r,n)=>({set _(i){ae(t,e,i,r)},get _(){return D(t,e,n)}}),Oe=(t,e,r)=>(kS(t,e,"access private method"),r);function NJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kJ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var HV={exports:{}},sw={},KV={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy=Symbol.for("react.element"),OJ=Symbol.for("react.portal"),RJ=Symbol.for("react.fragment"),jJ=Symbol.for("react.strict_mode"),$J=Symbol.for("react.profiler"),DJ=Symbol.for("react.provider"),MJ=Symbol.for("react.context"),FJ=Symbol.for("react.forward_ref"),LJ=Symbol.for("react.suspense"),BJ=Symbol.for("react.memo"),UJ=Symbol.for("react.lazy"),h$=Symbol.iterator;function VJ(t){return t===null||typeof t!="object"?null:(t=h$&&t[h$]||t["@@iterator"],typeof t=="function"?t:null)}var QV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YV=Object.assign,XV={};function Dd(t,e,r){this.props=t,this.context=e,this.refs=XV,this.updater=r||QV}Dd.prototype.isReactComponent={};Dd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JV(){}JV.prototype=Dd.prototype;function cN(t,e,r){this.props=t,this.context=e,this.refs=XV,this.updater=r||QV}var uN=cN.prototype=new JV;uN.constructor=cN;YV(uN,Dd.prototype);uN.isPureReactComponent=!0;var p$=Array.isArray,ZV=Object.prototype.hasOwnProperty,fN={current:null},e6={key:!0,ref:!0,__self:!0,__source:!0};function t6(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)ZV.call(e,n)&&!e6.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Xy,type:t,key:o,ref:s,props:i,_owner:fN.current}}function WJ(t,e){return{$$typeof:Xy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dN(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xy}function zJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var m$=/\/+/g;function OS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zJ(""+t.key):e.toString(36)}function m0(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Xy:case OJ:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+OS(s,0):n,p$(i)?(r="",t!=null&&(r=t.replace(m$,"$&/")+"/"),m0(i,e,r,"",function(c){return c})):i!=null&&(dN(i)&&(i=WJ(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(m$,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",p$(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+OS(o,a);s+=m0(o,e,r,l,i)}else if(l=VJ(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+OS(o,a++),s+=m0(o,e,r,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function lv(t,e,r){if(t==null)return t;var n=[],i=0;return m0(t,n,"","",function(o){return e.call(r,o,i++)}),n}function GJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},y0={transition:null},qJ={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:y0,ReactCurrentOwner:fN};ze.Children={map:lv,forEach:function(t,e,r){lv(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return lv(t,function(){e++}),e},toArray:function(t){return lv(t,function(e){return e})||[]},only:function(t){if(!dN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Dd;ze.Fragment=RJ;ze.Profiler=$J;ze.PureComponent=cN;ze.StrictMode=jJ;ze.Suspense=LJ;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qJ;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=YV({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=fN.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ZV.call(e,l)&&!e6.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Xy,type:t.type,key:i,ref:o,props:n,_owner:s}};ze.createContext=function(t){return t={$$typeof:MJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DJ,_context:t},t.Consumer=t};ze.createElement=t6;ze.createFactory=function(t){var e=t6.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:FJ,render:t}};ze.isValidElement=dN;ze.lazy=function(t){return{$$typeof:UJ,_payload:{_status:-1,_result:t},_init:GJ}};ze.memo=function(t,e){return{$$typeof:BJ,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=y0.transition;y0.transition={};try{t()}finally{y0.transition=e}};ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.useCallback=function(t,e){return Tn.current.useCallback(t,e)};ze.useContext=function(t){return Tn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Tn.current.useEffect(t,e)};ze.useId=function(){return Tn.current.useId()};ze.useImperativeHandle=function(t,e,r){return Tn.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Tn.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return Tn.current.useReducer(t,e,r)};ze.useRef=function(t){return Tn.current.useRef(t)};ze.useState=function(t){return Tn.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return Tn.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return Tn.current.useTransition()};ze.version="18.2.0";KV.exports=ze;var E=KV.exports;const k=ot(E),HJ=NJ({__proto__:null,default:k},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KJ=E,QJ=Symbol.for("react.element"),YJ=Symbol.for("react.fragment"),XJ=Object.prototype.hasOwnProperty,JJ=KJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZJ={key:!0,ref:!0,__self:!0,__source:!0};function r6(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)XJ.call(e,n)&&!ZJ.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:QJ,type:t,key:o,ref:s,props:i,_owner:JJ.current}}sw.Fragment=YJ;sw.jsx=r6;sw.jsxs=r6;HV.exports=sw;var f=HV.exports,uC={},n6={exports:{}},li={},i6={exports:{}},o6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var z=R.length;R.push(F);e:for(;0<z;){var le=z-1>>>1,re=R[le];if(0<i(re,F))R[le]=F,R[z]=re,z=le;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var F=R[0],z=R.pop();if(z!==F){R[0]=z;e:for(var le=0,re=R.length,be=re>>>1;le<be;){var at=2*(le+1)-1,rt=R[at],Wt=at+1,pt=R[Wt];if(0>i(rt,z))Wt<re&&0>i(pt,rt)?(R[le]=pt,R[Wt]=z,le=Wt):(R[le]=rt,R[at]=z,le=at);else if(Wt<re&&0>i(pt,z))R[le]=pt,R[Wt]=z,le=Wt;else break e}}return F}function i(R,F){var z=R.sortIndex-F.sortIndex;return z!==0?z:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var F=r(c);F!==null;){if(F.callback===null)n(c);else if(F.startTime<=R)n(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=r(c)}}function S(R){if(y=!1,x(R),!m)if(r(l)!==null)m=!0,U(_);else{var F=r(c);F!==null&&V(S,F.startTime-R)}}function _(R,F){m=!1,y&&(y=!1,b(C),C=-1),p=!0;var z=h;try{for(x(F),d=r(l);d!==null&&(!(d.expirationTime>F)||R&&!I());){var le=d.callback;if(typeof le=="function"){d.callback=null,h=d.priorityLevel;var re=le(d.expirationTime<=F);F=t.unstable_now(),typeof re=="function"?d.callback=re:d===r(l)&&n(l),x(F)}else n(l);d=r(l)}if(d!==null)var be=!0;else{var at=r(c);at!==null&&V(S,at.startTime-F),be=!1}return be}finally{d=null,h=z,p=!1}}var w=!1,A=null,C=-1,T=5,P=-1;function I(){return!(t.unstable_now()-P<T)}function O(){if(A!==null){var R=t.unstable_now();P=R;var F=!0;try{F=A(!0,R)}finally{F?N():(w=!1,A=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,L=j.port2;j.port1.onmessage=O,N=function(){L.postMessage(null)}}else N=function(){g(O,0)};function U(R){A=R,w||(w=!0,N())}function V(R,F){C=g(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,U(_))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var z=h;h=F;try{return R()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=h;h=R;try{return F()}finally{h=z}},t.unstable_scheduleCallback=function(R,F,z){var le=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?le+z:le):z=le,R){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=z+re,R={id:u++,callback:F,priorityLevel:R,startTime:z,expirationTime:re,sortIndex:-1},z>le?(R.sortIndex=z,e(c,R),r(l)===null&&R===r(c)&&(y?(b(C),C=-1):y=!0,V(S,z-le))):(R.sortIndex=re,e(l,R),m||p||(m=!0,U(_))),R},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(R){var F=h;return function(){var z=h;h=F;try{return R.apply(this,arguments)}finally{h=z}}}})(o6);i6.exports=o6;var eZ=i6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6=E,oi=eZ;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a6=new Set,em={};function $c(t,e){Rf(t,e),Rf(t+"Capture",e)}function Rf(t,e){for(em[t]=e,t=0;t<e.length;t++)a6.add(e[t])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fC=Object.prototype.hasOwnProperty,tZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y$={},g$={};function rZ(t){return fC.call(g$,t)?!0:fC.call(y$,t)?!1:tZ.test(t)?g$[t]=!0:(y$[t]=!0,!1)}function nZ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iZ(t,e,r,n){if(e===null||typeof e>"u"||nZ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yr[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yr[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yr[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yr[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yr[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yr[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yr[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yr[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yr[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var hN=/[\-:]([a-z])/g;function pN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hN,pN);Yr[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hN,pN);Yr[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hN,pN);Yr[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yr[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yr[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function mN(t,e,r,n){var i=Yr.hasOwnProperty(e)?Yr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iZ(e,r,i,n)&&(r=null),n||i===null?rZ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Rs=s6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cv=Symbol.for("react.element"),Su=Symbol.for("react.portal"),Eu=Symbol.for("react.fragment"),yN=Symbol.for("react.strict_mode"),dC=Symbol.for("react.profiler"),l6=Symbol.for("react.provider"),c6=Symbol.for("react.context"),gN=Symbol.for("react.forward_ref"),hC=Symbol.for("react.suspense"),pC=Symbol.for("react.suspense_list"),vN=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),u6=Symbol.for("react.offscreen"),v$=Symbol.iterator;function yh(t){return t===null||typeof t!="object"?null:(t=v$&&t[v$]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,RS;function Yh(t){if(RS===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);RS=e&&e[1]||""}return`
`+RS+t}var jS=!1;function $S(t,e){if(!t||jS)return"";jS=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{jS=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Yh(t):""}function oZ(t){switch(t.tag){case 5:return Yh(t.type);case 16:return Yh("Lazy");case 13:return Yh("Suspense");case 19:return Yh("SuspenseList");case 0:case 2:case 15:return t=$S(t.type,!1),t;case 11:return t=$S(t.type.render,!1),t;case 1:return t=$S(t.type,!0),t;default:return""}}function mC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Eu:return"Fragment";case Su:return"Portal";case dC:return"Profiler";case yN:return"StrictMode";case hC:return"Suspense";case pC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c6:return(t.displayName||"Context")+".Consumer";case l6:return(t._context.displayName||"Context")+".Provider";case gN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vN:return e=t.displayName||null,e!==null?e:mC(t.type)||"Memo";case Qs:e=t._payload,t=t._init;try{return mC(t(e))}catch{}}return null}function sZ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mC(e);case 8:return e===yN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aZ(t){var e=f6(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uv(t){t._valueTracker||(t._valueTracker=aZ(t))}function d6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=f6(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function sb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yC(t,e){var r=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function b$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ba(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h6(t,e){e=e.checked,e!=null&&mN(t,"checked",e,!1)}function gC(t,e){h6(t,e);var r=Ba(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vC(t,e.type,r):e.hasOwnProperty("defaultValue")&&vC(t,e.type,Ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vC(t,e,r){(e!=="number"||sb(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xh=Array.isArray;function qu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ba(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Q(92));if(Xh(r)){if(1<r.length)throw Error(Q(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ba(r)}}function p6(t,e){var r=Ba(e.value),n=Ba(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function w$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fv,y6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fv=fv||document.createElement("div"),fv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tm(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var gp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lZ=["Webkit","ms","Moz","O"];Object.keys(gp).forEach(function(t){lZ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gp[e]=gp[t]})});function g6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||gp.hasOwnProperty(t)&&gp[t]?(""+e).trim():e+"px"}function v6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=g6(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var cZ=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _C(t,e){if(e){if(cZ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function wC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SC=null;function bN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var EC=null,Hu=null,Ku=null;function S$(t){if(t=eg(t)){if(typeof EC!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=fw(e),EC(t.stateNode,t.type,e))}}function b6(t){Hu?Ku?Ku.push(t):Ku=[t]:Hu=t}function x6(){if(Hu){var t=Hu,e=Ku;if(Ku=Hu=null,S$(t),e)for(t=0;t<e.length;t++)S$(e[t])}}function _6(t,e){return t(e)}function w6(){}var DS=!1;function S6(t,e,r){if(DS)return t(e,r);DS=!0;try{return _6(t,e,r)}finally{DS=!1,(Hu!==null||Ku!==null)&&(w6(),x6())}}function rm(t,e){var r=t.stateNode;if(r===null)return null;var n=fw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Q(231,e,typeof r));return r}var AC=!1;if(ws)try{var gh={};Object.defineProperty(gh,"passive",{get:function(){AC=!0}}),window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{AC=!1}function uZ(t,e,r,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var vp=!1,ab=null,lb=!1,CC=null,fZ={onError:function(t){vp=!0,ab=t}};function dZ(t,e,r,n,i,o,s,a,l){vp=!1,ab=null,uZ.apply(fZ,arguments)}function hZ(t,e,r,n,i,o,s,a,l){if(dZ.apply(this,arguments),vp){if(vp){var c=ab;vp=!1,ab=null}else throw Error(Q(198));lb||(lb=!0,CC=c)}}function Dc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function E6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function E$(t){if(Dc(t)!==t)throw Error(Q(188))}function pZ(t){var e=t.alternate;if(!e){if(e=Dc(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return E$(i),t;if(o===n)return E$(i),e;o=o.sibling}throw Error(Q(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?t:e}function A6(t){return t=pZ(t),t!==null?C6(t):null}function C6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C6(t);if(e!==null)return e;t=t.sibling}return null}var P6=oi.unstable_scheduleCallback,A$=oi.unstable_cancelCallback,mZ=oi.unstable_shouldYield,yZ=oi.unstable_requestPaint,Xt=oi.unstable_now,gZ=oi.unstable_getCurrentPriorityLevel,xN=oi.unstable_ImmediatePriority,T6=oi.unstable_UserBlockingPriority,cb=oi.unstable_NormalPriority,vZ=oi.unstable_LowPriority,I6=oi.unstable_IdlePriority,aw=null,Fo=null;function bZ(t){if(Fo&&typeof Fo.onCommitFiberRoot=="function")try{Fo.onCommitFiberRoot(aw,t,void 0,(t.current.flags&128)===128)}catch{}}var so=Math.clz32?Math.clz32:wZ,xZ=Math.log,_Z=Math.LN2;function wZ(t){return t>>>=0,t===0?32:31-(xZ(t)/_Z|0)|0}var dv=64,hv=4194304;function Jh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ub(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Jh(a):(o&=s,o!==0&&(n=Jh(o)))}else s=r&~i,s!==0?n=Jh(s):o!==0&&(n=Jh(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-so(e),i=1<<r,n|=t[r],e&=~i;return n}function SZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EZ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-so(o),a=1<<s,l=i[s];l===-1?(!(a&r)||a&n)&&(i[s]=SZ(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function PC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N6(){var t=dv;return dv<<=1,!(dv&4194240)&&(dv=64),t}function MS(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Jy(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-so(e),t[e]=r}function AZ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-so(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function _N(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-so(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var lt=0;function k6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O6,wN,R6,j6,$6,TC=!1,pv=[],Sa=null,Ea=null,Aa=null,nm=new Map,im=new Map,ta=[],CZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C$(t,e){switch(t){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":nm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":im.delete(e.pointerId)}}function vh(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=eg(e),e!==null&&wN(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function PZ(t,e,r,n,i){switch(e){case"focusin":return Sa=vh(Sa,t,e,r,n,i),!0;case"dragenter":return Ea=vh(Ea,t,e,r,n,i),!0;case"mouseover":return Aa=vh(Aa,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return nm.set(o,vh(nm.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,im.set(o,vh(im.get(o)||null,t,e,r,n,i)),!0}return!1}function D6(t){var e=Rl(t.target);if(e!==null){var r=Dc(e);if(r!==null){if(e=r.tag,e===13){if(e=E6(r),e!==null){t.blockedOn=e,$6(t.priority,function(){R6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function g0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=IC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);SC=n,r.target.dispatchEvent(n),SC=null}else return e=eg(r),e!==null&&wN(e),t.blockedOn=r,!1;e.shift()}return!0}function P$(t,e,r){g0(t)&&r.delete(e)}function TZ(){TC=!1,Sa!==null&&g0(Sa)&&(Sa=null),Ea!==null&&g0(Ea)&&(Ea=null),Aa!==null&&g0(Aa)&&(Aa=null),nm.forEach(P$),im.forEach(P$)}function bh(t,e){t.blockedOn===e&&(t.blockedOn=null,TC||(TC=!0,oi.unstable_scheduleCallback(oi.unstable_NormalPriority,TZ)))}function om(t){function e(i){return bh(i,t)}if(0<pv.length){bh(pv[0],t);for(var r=1;r<pv.length;r++){var n=pv[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Sa!==null&&bh(Sa,t),Ea!==null&&bh(Ea,t),Aa!==null&&bh(Aa,t),nm.forEach(e),im.forEach(e),r=0;r<ta.length;r++)n=ta[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ta.length&&(r=ta[0],r.blockedOn===null);)D6(r),r.blockedOn===null&&ta.shift()}var Qu=Rs.ReactCurrentBatchConfig,fb=!0;function IZ(t,e,r,n){var i=lt,o=Qu.transition;Qu.transition=null;try{lt=1,SN(t,e,r,n)}finally{lt=i,Qu.transition=o}}function NZ(t,e,r,n){var i=lt,o=Qu.transition;Qu.transition=null;try{lt=4,SN(t,e,r,n)}finally{lt=i,Qu.transition=o}}function SN(t,e,r,n){if(fb){var i=IC(t,e,r,n);if(i===null)HS(t,e,n,db,r),C$(t,n);else if(PZ(i,t,e,r,n))n.stopPropagation();else if(C$(t,n),e&4&&-1<CZ.indexOf(t)){for(;i!==null;){var o=eg(i);if(o!==null&&O6(o),o=IC(t,e,r,n),o===null&&HS(t,e,n,db,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else HS(t,e,n,null,r)}}var db=null;function IC(t,e,r,n){if(db=null,t=bN(n),t=Rl(t),t!==null)if(e=Dc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=E6(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return db=t,null}function M6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gZ()){case xN:return 1;case T6:return 4;case cb:case vZ:return 16;case I6:return 536870912;default:return 16}default:return 16}}var fa=null,EN=null,v0=null;function F6(){if(v0)return v0;var t,e=EN,r=e.length,n,i="value"in fa?fa.value:fa.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return v0=i.slice(t,1<n?1-n:void 0)}function b0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mv(){return!0}function T$(){return!1}function ci(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mv:T$,this.isPropagationStopped=T$,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mv)},persist:function(){},isPersistent:mv}),e}var Md={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AN=ci(Md),Zy=Ut({},Md,{view:0,detail:0}),kZ=ci(Zy),FS,LS,xh,lw=Ut({},Zy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xh&&(xh&&t.type==="mousemove"?(FS=t.screenX-xh.screenX,LS=t.screenY-xh.screenY):LS=FS=0,xh=t),FS)},movementY:function(t){return"movementY"in t?t.movementY:LS}}),I$=ci(lw),OZ=Ut({},lw,{dataTransfer:0}),RZ=ci(OZ),jZ=Ut({},Zy,{relatedTarget:0}),BS=ci(jZ),$Z=Ut({},Md,{animationName:0,elapsedTime:0,pseudoElement:0}),DZ=ci($Z),MZ=Ut({},Md,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FZ=ci(MZ),LZ=Ut({},Md,{data:0}),N$=ci(LZ),BZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VZ[t])?!!e[t]:!1}function CN(){return WZ}var zZ=Ut({},Zy,{key:function(t){if(t.key){var e=BZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=b0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CN,charCode:function(t){return t.type==="keypress"?b0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?b0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GZ=ci(zZ),qZ=Ut({},lw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k$=ci(qZ),HZ=Ut({},Zy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CN}),KZ=ci(HZ),QZ=Ut({},Md,{propertyName:0,elapsedTime:0,pseudoElement:0}),YZ=ci(QZ),XZ=Ut({},lw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JZ=ci(XZ),ZZ=[9,13,27,32],PN=ws&&"CompositionEvent"in window,bp=null;ws&&"documentMode"in document&&(bp=document.documentMode);var eee=ws&&"TextEvent"in window&&!bp,L6=ws&&(!PN||bp&&8<bp&&11>=bp),O$=" ",R$=!1;function B6(t,e){switch(t){case"keyup":return ZZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Au=!1;function tee(t,e){switch(t){case"compositionend":return U6(e);case"keypress":return e.which!==32?null:(R$=!0,O$);case"textInput":return t=e.data,t===O$&&R$?null:t;default:return null}}function ree(t,e){if(Au)return t==="compositionend"||!PN&&B6(t,e)?(t=F6(),v0=EN=fa=null,Au=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L6&&e.locale!=="ko"?null:e.data;default:return null}}var nee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nee[t.type]:e==="textarea"}function V6(t,e,r,n){b6(n),e=hb(e,"onChange"),0<e.length&&(r=new AN("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var xp=null,sm=null;function iee(t){Z6(t,0)}function cw(t){var e=Tu(t);if(d6(e))return t}function oee(t,e){if(t==="change")return e}var W6=!1;if(ws){var US;if(ws){var VS="oninput"in document;if(!VS){var $$=document.createElement("div");$$.setAttribute("oninput","return;"),VS=typeof $$.oninput=="function"}US=VS}else US=!1;W6=US&&(!document.documentMode||9<document.documentMode)}function D$(){xp&&(xp.detachEvent("onpropertychange",z6),sm=xp=null)}function z6(t){if(t.propertyName==="value"&&cw(sm)){var e=[];V6(e,sm,t,bN(t)),S6(iee,e)}}function see(t,e,r){t==="focusin"?(D$(),xp=e,sm=r,xp.attachEvent("onpropertychange",z6)):t==="focusout"&&D$()}function aee(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cw(sm)}function lee(t,e){if(t==="click")return cw(e)}function cee(t,e){if(t==="input"||t==="change")return cw(e)}function uee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uo=typeof Object.is=="function"?Object.is:uee;function am(t,e){if(uo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!fC.call(e,i)||!uo(t[i],e[i]))return!1}return!0}function M$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function F$(t,e){var r=M$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=M$(r)}}function G6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q6(){for(var t=window,e=sb();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=sb(t.document)}return e}function TN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fee(t){var e=q6(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&G6(r.ownerDocument.documentElement,r)){if(n!==null&&TN(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=F$(r,o);var s=F$(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dee=ws&&"documentMode"in document&&11>=document.documentMode,Cu=null,NC=null,_p=null,kC=!1;function L$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;kC||Cu==null||Cu!==sb(n)||(n=Cu,"selectionStart"in n&&TN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_p&&am(_p,n)||(_p=n,n=hb(NC,"onSelect"),0<n.length&&(e=new AN("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Cu)))}function yv(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Pu={animationend:yv("Animation","AnimationEnd"),animationiteration:yv("Animation","AnimationIteration"),animationstart:yv("Animation","AnimationStart"),transitionend:yv("Transition","TransitionEnd")},WS={},H6={};ws&&(H6=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function uw(t){if(WS[t])return WS[t];if(!Pu[t])return t;var e=Pu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in H6)return WS[t]=e[r];return t}var K6=uw("animationend"),Q6=uw("animationiteration"),Y6=uw("animationstart"),X6=uw("transitionend"),J6=new Map,B$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(t,e){J6.set(t,e),$c(e,[t])}for(var zS=0;zS<B$.length;zS++){var GS=B$[zS],hee=GS.toLowerCase(),pee=GS[0].toUpperCase()+GS.slice(1);Za(hee,"on"+pee)}Za(K6,"onAnimationEnd");Za(Q6,"onAnimationIteration");Za(Y6,"onAnimationStart");Za("dblclick","onDoubleClick");Za("focusin","onFocus");Za("focusout","onBlur");Za(X6,"onTransitionEnd");Rf("onMouseEnter",["mouseout","mouseover"]);Rf("onMouseLeave",["mouseout","mouseover"]);Rf("onPointerEnter",["pointerout","pointerover"]);Rf("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mee=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zh));function U$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,hZ(n,e,void 0,t),t.currentTarget=null}function Z6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;U$(i,a,c),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;U$(i,a,c),o=l}}}if(lb)throw t=CC,lb=!1,CC=null,t}function Ct(t,e){var r=e[DC];r===void 0&&(r=e[DC]=new Set);var n=t+"__bubble";r.has(n)||(e5(e,t,2,!1),r.add(n))}function qS(t,e,r){var n=0;e&&(n|=4),e5(r,t,n,e)}var gv="_reactListening"+Math.random().toString(36).slice(2);function lm(t){if(!t[gv]){t[gv]=!0,a6.forEach(function(r){r!=="selectionchange"&&(mee.has(r)||qS(r,!1,t),qS(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gv]||(e[gv]=!0,qS("selectionchange",!1,e))}}function e5(t,e,r,n){switch(M6(e)){case 1:var i=IZ;break;case 4:i=NZ;break;default:i=SN}r=i.bind(null,e,r,t),i=void 0,!AC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function HS(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Rl(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}S6(function(){var c=o,u=bN(r),d=[];e:{var h=J6.get(t);if(h!==void 0){var p=AN,m=t;switch(t){case"keypress":if(b0(r)===0)break e;case"keydown":case"keyup":p=GZ;break;case"focusin":m="focus",p=BS;break;case"focusout":m="blur",p=BS;break;case"beforeblur":case"afterblur":p=BS;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=I$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=RZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=KZ;break;case K6:case Q6:case Y6:p=DZ;break;case X6:p=YZ;break;case"scroll":p=kZ;break;case"wheel":p=JZ;break;case"copy":case"cut":case"paste":p=FZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=k$}var y=(e&4)!==0,g=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var v=c,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,b!==null&&(S=rm(v,b),S!=null&&y.push(cm(v,S,x)))),g)break;v=v.return}0<y.length&&(h=new p(h,m,null,r,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==SC&&(m=r.relatedTarget||r.fromElement)&&(Rl(m)||m[Ss]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Rl(m):null,m!==null&&(g=Dc(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=I$,S="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=k$,S="onPointerLeave",b="onPointerEnter",v="pointer"),g=p==null?h:Tu(p),x=m==null?h:Tu(m),h=new y(S,v+"leave",p,r,u),h.target=g,h.relatedTarget=x,S=null,Rl(u)===c&&(y=new y(b,v+"enter",m,r,u),y.target=x,y.relatedTarget=g,S=y),g=S,p&&m)t:{for(y=p,b=m,v=0,x=y;x;x=Kc(x))v++;for(x=0,S=b;S;S=Kc(S))x++;for(;0<v-x;)y=Kc(y),v--;for(;0<x-v;)b=Kc(b),x--;for(;v--;){if(y===b||b!==null&&y===b.alternate)break t;y=Kc(y),b=Kc(b)}y=null}else y=null;p!==null&&V$(d,h,p,y,!1),m!==null&&g!==null&&V$(d,g,m,y,!0)}}e:{if(h=c?Tu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=oee;else if(j$(h))if(W6)_=cee;else{_=aee;var w=see}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=lee);if(_&&(_=_(t,c))){V6(d,_,r,u);break e}w&&w(t,h,c),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&vC(h,"number",h.value)}switch(w=c?Tu(c):window,t){case"focusin":(j$(w)||w.contentEditable==="true")&&(Cu=w,NC=c,_p=null);break;case"focusout":_p=NC=Cu=null;break;case"mousedown":kC=!0;break;case"contextmenu":case"mouseup":case"dragend":kC=!1,L$(d,r,u);break;case"selectionchange":if(dee)break;case"keydown":case"keyup":L$(d,r,u)}var A;if(PN)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Au?B6(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(L6&&r.locale!=="ko"&&(Au||C!=="onCompositionStart"?C==="onCompositionEnd"&&Au&&(A=F6()):(fa=u,EN="value"in fa?fa.value:fa.textContent,Au=!0)),w=hb(c,C),0<w.length&&(C=new N$(C,t,null,r,u),d.push({event:C,listeners:w}),A?C.data=A:(A=U6(r),A!==null&&(C.data=A)))),(A=eee?tee(t,r):ree(t,r))&&(c=hb(c,"onBeforeInput"),0<c.length&&(u=new N$("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=A))}Z6(d,e)})}function cm(t,e,r){return{instance:t,listener:e,currentTarget:r}}function hb(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=rm(t,r),o!=null&&n.unshift(cm(t,o,i)),o=rm(t,e),o!=null&&n.push(cm(t,o,i))),t=t.return}return n}function Kc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function V$(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=rm(r,o),l!=null&&s.unshift(cm(r,l,a))):i||(l=rm(r,o),l!=null&&s.push(cm(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var yee=/\r\n?/g,gee=/\u0000|\uFFFD/g;function W$(t){return(typeof t=="string"?t:""+t).replace(yee,`
`).replace(gee,"")}function vv(t,e,r){if(e=W$(e),W$(t)!==e&&r)throw Error(Q(425))}function pb(){}var OC=null,RC=null;function jC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $C=typeof setTimeout=="function"?setTimeout:void 0,vee=typeof clearTimeout=="function"?clearTimeout:void 0,z$=typeof Promise=="function"?Promise:void 0,bee=typeof queueMicrotask=="function"?queueMicrotask:typeof z$<"u"?function(t){return z$.resolve(null).then(t).catch(xee)}:$C;function xee(t){setTimeout(function(){throw t})}function KS(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),om(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);om(e)}function Ca(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function G$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fd=Math.random().toString(36).slice(2),Ao="__reactFiber$"+Fd,um="__reactProps$"+Fd,Ss="__reactContainer$"+Fd,DC="__reactEvents$"+Fd,_ee="__reactListeners$"+Fd,wee="__reactHandles$"+Fd;function Rl(t){var e=t[Ao];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ss]||r[Ao]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=G$(t);t!==null;){if(r=t[Ao])return r;t=G$(t)}return e}t=r,r=t.parentNode}return null}function eg(t){return t=t[Ao]||t[Ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function fw(t){return t[um]||null}var MC=[],Iu=-1;function el(t){return{current:t}}function kt(t){0>Iu||(t.current=MC[Iu],MC[Iu]=null,Iu--)}function Et(t,e){Iu++,MC[Iu]=t.current,t.current=e}var Ua={},hn=el(Ua),Ln=el(!1),vc=Ua;function jf(t,e){var r=t.type.contextTypes;if(!r)return Ua;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Bn(t){return t=t.childContextTypes,t!=null}function mb(){kt(Ln),kt(hn)}function q$(t,e,r){if(hn.current!==Ua)throw Error(Q(168));Et(hn,e),Et(Ln,r)}function t5(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Q(108,sZ(t)||"Unknown",i));return Ut({},r,n)}function yb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ua,vc=hn.current,Et(hn,t),Et(Ln,Ln.current),!0}function H$(t,e,r){var n=t.stateNode;if(!n)throw Error(Q(169));r?(t=t5(t,e,vc),n.__reactInternalMemoizedMergedChildContext=t,kt(Ln),kt(hn),Et(hn,t)):kt(Ln),Et(Ln,r)}var ss=null,dw=!1,QS=!1;function r5(t){ss===null?ss=[t]:ss.push(t)}function See(t){dw=!0,r5(t)}function tl(){if(!QS&&ss!==null){QS=!0;var t=0,e=lt;try{var r=ss;for(lt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ss=null,dw=!1}catch(i){throw ss!==null&&(ss=ss.slice(t+1)),P6(xN,tl),i}finally{lt=e,QS=!1}}return null}var Nu=[],ku=0,gb=null,vb=0,_i=[],wi=0,bc=null,ls=1,cs="";function ml(t,e){Nu[ku++]=vb,Nu[ku++]=gb,gb=t,vb=e}function n5(t,e,r){_i[wi++]=ls,_i[wi++]=cs,_i[wi++]=bc,bc=t;var n=ls;t=cs;var i=32-so(n)-1;n&=~(1<<i),r+=1;var o=32-so(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,ls=1<<32-so(e)+i|r<<i|n,cs=o+t}else ls=1<<o|r<<i|n,cs=t}function IN(t){t.return!==null&&(ml(t,1),n5(t,1,0))}function NN(t){for(;t===gb;)gb=Nu[--ku],Nu[ku]=null,vb=Nu[--ku],Nu[ku]=null;for(;t===bc;)bc=_i[--wi],_i[wi]=null,cs=_i[--wi],_i[wi]=null,ls=_i[--wi],_i[wi]=null}var ri=null,Jn=null,Ot=!1,Qi=null;function i5(t,e){var r=Ci(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function K$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ri=t,Jn=Ca(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ri=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=bc!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ci(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ri=t,Jn=null,!0):!1;default:return!1}}function FC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function LC(t){if(Ot){var e=Jn;if(e){var r=e;if(!K$(t,e)){if(FC(t))throw Error(Q(418));e=Ca(r.nextSibling);var n=ri;e&&K$(t,e)?i5(n,r):(t.flags=t.flags&-4097|2,Ot=!1,ri=t)}}else{if(FC(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ot=!1,ri=t}}}function Q$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ri=t}function bv(t){if(t!==ri)return!1;if(!Ot)return Q$(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jC(t.type,t.memoizedProps)),e&&(e=Jn)){if(FC(t))throw o5(),Error(Q(418));for(;e;)i5(t,e),e=Ca(e.nextSibling)}if(Q$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Jn=Ca(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=ri?Ca(t.stateNode.nextSibling):null;return!0}function o5(){for(var t=Jn;t;)t=Ca(t.nextSibling)}function $f(){Jn=ri=null,Ot=!1}function kN(t){Qi===null?Qi=[t]:Qi.push(t)}var Eee=Rs.ReactCurrentBatchConfig;function zi(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var bb=el(null),xb=null,Ou=null,ON=null;function RN(){ON=Ou=xb=null}function jN(t){var e=bb.current;kt(bb),t._currentValue=e}function BC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yu(t,e){xb=t,ON=Ou=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dn=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(ON!==t)if(t={context:t,memoizedValue:e,next:null},Ou===null){if(xb===null)throw Error(Q(308));Ou=t,xb.dependencies={lanes:0,firstContext:t}}else Ou=Ou.next=t;return e}var jl=null;function $N(t){jl===null?jl=[t]:jl.push(t)}function s5(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,$N(e)):(r.next=i.next,i.next=r),e.interleaved=r,Es(t,n)}function Es(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ys=!1;function DN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Es(t,r)}return i=n.interleaved,i===null?(e.next=e,$N(n)):(e.next=i.next,i.next=e),n.interleaved=e,Es(t,r)}function x0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,_N(t,r)}}function Y$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function _b(t,e,r,n){var i=t.updateQueue;Ys=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=Ut({},d,h);break e;case 2:Ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);_c|=s,t.lanes=s,t.memoizedState=d}}function X$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var l5=new s6.Component().refs;function UC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ut({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hw={isMounted:function(t){return(t=t._reactInternals)?Dc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Ia(t),o=ys(n,i);o.payload=e,r!=null&&(o.callback=r),e=Pa(t,o,i),e!==null&&(ao(e,t,i,n),x0(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Ia(t),o=ys(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Pa(t,o,i),e!==null&&(ao(e,t,i,n),x0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cn(),n=Ia(t),i=ys(r,n);i.tag=2,e!=null&&(i.callback=e),e=Pa(t,i,n),e!==null&&(ao(e,t,n,r),x0(e,t,n))}};function J$(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!am(r,n)||!am(i,o):!0}function c5(t,e,r){var n=!1,i=Ua,o=e.contextType;return typeof o=="object"&&o!==null?o=$i(o):(i=Bn(e)?vc:hn.current,n=e.contextTypes,o=(n=n!=null)?jf(t,i):Ua),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Z$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&hw.enqueueReplaceState(e,e.state,null)}function VC(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=l5,DN(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=$i(o):(o=Bn(e)?vc:hn.current,i.context=jf(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(UC(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hw.enqueueReplaceState(i,i.state,null),_b(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _h(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===l5&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,t))}return t}function xv(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e2(t){var e=t._init;return e(t._payload)}function u5(t){function e(b,v){if(t){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=Na(b,v),b.index=0,b.sibling=null,b}function o(b,v,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function s(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,x,S){return v===null||v.tag!==6?(v=rE(x,b.mode,S),v.return=b,v):(v=i(v,x),v.return=b,v)}function l(b,v,x,S){var _=x.type;return _===Eu?u(b,v,x.props.children,S,x.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qs&&e2(_)===v.type)?(S=i(v,x.props),S.ref=_h(b,v,x),S.return=b,S):(S=C0(x.type,x.key,x.props,null,b.mode,S),S.ref=_h(b,v,x),S.return=b,S)}function c(b,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=nE(x,b.mode,S),v.return=b,v):(v=i(v,x.children||[]),v.return=b,v)}function u(b,v,x,S,_){return v===null||v.tag!==7?(v=ec(x,b.mode,S,_),v.return=b,v):(v=i(v,x),v.return=b,v)}function d(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=rE(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cv:return x=C0(v.type,v.key,v.props,null,b.mode,x),x.ref=_h(b,null,v),x.return=b,x;case Su:return v=nE(v,b.mode,x),v.return=b,v;case Qs:var S=v._init;return d(b,S(v._payload),x)}if(Xh(v)||yh(v))return v=ec(v,b.mode,x,null),v.return=b,v;xv(b,v)}return null}function h(b,v,x,S){var _=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cv:return x.key===_?l(b,v,x,S):null;case Su:return x.key===_?c(b,v,x,S):null;case Qs:return _=x._init,h(b,v,_(x._payload),S)}if(Xh(x)||yh(x))return _!==null?null:u(b,v,x,S,null);xv(b,x)}return null}function p(b,v,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(x)||null,a(v,b,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cv:return b=b.get(S.key===null?x:S.key)||null,l(v,b,S,_);case Su:return b=b.get(S.key===null?x:S.key)||null,c(v,b,S,_);case Qs:var w=S._init;return p(b,v,x,w(S._payload),_)}if(Xh(S)||yh(S))return b=b.get(x)||null,u(v,b,S,_,null);xv(v,S)}return null}function m(b,v,x,S){for(var _=null,w=null,A=v,C=v=0,T=null;A!==null&&C<x.length;C++){A.index>C?(T=A,A=null):T=A.sibling;var P=h(b,A,x[C],S);if(P===null){A===null&&(A=T);break}t&&A&&P.alternate===null&&e(b,A),v=o(P,v,C),w===null?_=P:w.sibling=P,w=P,A=T}if(C===x.length)return r(b,A),Ot&&ml(b,C),_;if(A===null){for(;C<x.length;C++)A=d(b,x[C],S),A!==null&&(v=o(A,v,C),w===null?_=A:w.sibling=A,w=A);return Ot&&ml(b,C),_}for(A=n(b,A);C<x.length;C++)T=p(A,b,C,x[C],S),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?C:T.key),v=o(T,v,C),w===null?_=T:w.sibling=T,w=T);return t&&A.forEach(function(I){return e(b,I)}),Ot&&ml(b,C),_}function y(b,v,x,S){var _=yh(x);if(typeof _!="function")throw Error(Q(150));if(x=_.call(x),x==null)throw Error(Q(151));for(var w=_=null,A=v,C=v=0,T=null,P=x.next();A!==null&&!P.done;C++,P=x.next()){A.index>C?(T=A,A=null):T=A.sibling;var I=h(b,A,P.value,S);if(I===null){A===null&&(A=T);break}t&&A&&I.alternate===null&&e(b,A),v=o(I,v,C),w===null?_=I:w.sibling=I,w=I,A=T}if(P.done)return r(b,A),Ot&&ml(b,C),_;if(A===null){for(;!P.done;C++,P=x.next())P=d(b,P.value,S),P!==null&&(v=o(P,v,C),w===null?_=P:w.sibling=P,w=P);return Ot&&ml(b,C),_}for(A=n(b,A);!P.done;C++,P=x.next())P=p(A,b,C,P.value,S),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?C:P.key),v=o(P,v,C),w===null?_=P:w.sibling=P,w=P);return t&&A.forEach(function(O){return e(b,O)}),Ot&&ml(b,C),_}function g(b,v,x,S){if(typeof x=="object"&&x!==null&&x.type===Eu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case cv:e:{for(var _=x.key,w=v;w!==null;){if(w.key===_){if(_=x.type,_===Eu){if(w.tag===7){r(b,w.sibling),v=i(w,x.props.children),v.return=b,b=v;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qs&&e2(_)===w.type){r(b,w.sibling),v=i(w,x.props),v.ref=_h(b,w,x),v.return=b,b=v;break e}r(b,w);break}else e(b,w);w=w.sibling}x.type===Eu?(v=ec(x.props.children,b.mode,S,x.key),v.return=b,b=v):(S=C0(x.type,x.key,x.props,null,b.mode,S),S.ref=_h(b,v,x),S.return=b,b=S)}return s(b);case Su:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(b,v.sibling),v=i(v,x.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=nE(x,b.mode,S),v.return=b,b=v}return s(b);case Qs:return w=x._init,g(b,v,w(x._payload),S)}if(Xh(x))return m(b,v,x,S);if(yh(x))return y(b,v,x,S);xv(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(b,v.sibling),v=i(v,x),v.return=b,b=v):(r(b,v),v=rE(x,b.mode,S),v.return=b,b=v),s(b)):r(b,v)}return g}var Df=u5(!0),f5=u5(!1),tg={},Lo=el(tg),fm=el(tg),dm=el(tg);function $l(t){if(t===tg)throw Error(Q(174));return t}function MN(t,e){switch(Et(dm,e),Et(fm,t),Et(Lo,tg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xC(e,t)}kt(Lo),Et(Lo,e)}function Mf(){kt(Lo),kt(fm),kt(dm)}function d5(t){$l(dm.current);var e=$l(Lo.current),r=xC(e,t.type);e!==r&&(Et(fm,t),Et(Lo,r))}function FN(t){fm.current===t&&(kt(Lo),kt(fm))}var Mt=el(0);function wb(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var YS=[];function LN(){for(var t=0;t<YS.length;t++)YS[t]._workInProgressVersionPrimary=null;YS.length=0}var _0=Rs.ReactCurrentDispatcher,XS=Rs.ReactCurrentBatchConfig,xc=0,Bt=null,lr=null,Ir=null,Sb=!1,wp=!1,hm=0,Aee=0;function tn(){throw Error(Q(321))}function BN(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!uo(t[r],e[r]))return!1;return!0}function UN(t,e,r,n,i,o){if(xc=o,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_0.current=t===null||t.memoizedState===null?Iee:Nee,t=r(n,i),wp){o=0;do{if(wp=!1,hm=0,25<=o)throw Error(Q(301));o+=1,Ir=lr=null,e.updateQueue=null,_0.current=kee,t=r(n,i)}while(wp)}if(_0.current=Eb,e=lr!==null&&lr.next!==null,xc=0,Ir=lr=Bt=null,Sb=!1,e)throw Error(Q(300));return t}function VN(){var t=hm!==0;return hm=0,t}function bo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?Bt.memoizedState=Ir=t:Ir=Ir.next=t,Ir}function Di(){if(lr===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=lr.next;var e=Ir===null?Bt.memoizedState:Ir.next;if(e!==null)Ir=e,lr=t;else{if(t===null)throw Error(Q(310));lr=t,t={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},Ir===null?Bt.memoizedState=Ir=t:Ir=Ir.next=t}return Ir}function pm(t,e){return typeof e=="function"?e(t):e}function JS(t){var e=Di(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=lr,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((xc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=n):l=l.next=d,Bt.lanes|=u,_c|=u}c=c.next}while(c!==null&&c!==o);l===null?s=n:l.next=a,uo(n,e.memoizedState)||(Dn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Bt.lanes|=o,_c|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ZS(t){var e=Di(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);uo(o,e.memoizedState)||(Dn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function h5(){}function p5(t,e){var r=Bt,n=Di(),i=e(),o=!uo(n.memoizedState,i);if(o&&(n.memoizedState=i,Dn=!0),n=n.queue,WN(g5.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Ir!==null&&Ir.memoizedState.tag&1){if(r.flags|=2048,mm(9,y5.bind(null,r,n,i,e),void 0,null),Nr===null)throw Error(Q(349));xc&30||m5(r,e,i)}return i}function m5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function y5(t,e,r,n){e.value=r,e.getSnapshot=n,v5(e)&&b5(t)}function g5(t,e,r){return r(function(){v5(e)&&b5(t)})}function v5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!uo(t,r)}catch{return!0}}function b5(t){var e=Es(t,1);e!==null&&ao(e,t,1,-1)}function t2(t){var e=bo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pm,lastRenderedState:t},e.queue=t,t=t.dispatch=Tee.bind(null,Bt,t),[e.memoizedState,t]}function mm(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function x5(){return Di().memoizedState}function w0(t,e,r,n){var i=bo();Bt.flags|=t,i.memoizedState=mm(1|e,r,void 0,n===void 0?null:n)}function pw(t,e,r,n){var i=Di();n=n===void 0?null:n;var o=void 0;if(lr!==null){var s=lr.memoizedState;if(o=s.destroy,n!==null&&BN(n,s.deps)){i.memoizedState=mm(e,r,o,n);return}}Bt.flags|=t,i.memoizedState=mm(1|e,r,o,n)}function r2(t,e){return w0(8390656,8,t,e)}function WN(t,e){return pw(2048,8,t,e)}function _5(t,e){return pw(4,2,t,e)}function w5(t,e){return pw(4,4,t,e)}function S5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E5(t,e,r){return r=r!=null?r.concat([t]):null,pw(4,4,S5.bind(null,e,t),r)}function zN(){}function A5(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&BN(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function C5(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&BN(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function P5(t,e,r){return xc&21?(uo(r,e)||(r=N6(),Bt.lanes|=r,_c|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=r)}function Cee(t,e){var r=lt;lt=r!==0&&4>r?r:4,t(!0);var n=XS.transition;XS.transition={};try{t(!1),e()}finally{lt=r,XS.transition=n}}function T5(){return Di().memoizedState}function Pee(t,e,r){var n=Ia(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},I5(t))N5(e,r);else if(r=s5(t,e,r,n),r!==null){var i=Cn();ao(r,t,n,i),k5(r,e,n)}}function Tee(t,e,r){var n=Ia(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(I5(t))N5(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,uo(a,s)){var l=e.interleaved;l===null?(i.next=i,$N(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=s5(t,e,i,n),r!==null&&(i=Cn(),ao(r,t,n,i),k5(r,e,n))}}function I5(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function N5(t,e){wp=Sb=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function k5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,_N(t,r)}}var Eb={readContext:$i,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Iee={readContext:$i,useCallback:function(t,e){return bo().memoizedState=[t,e===void 0?null:e],t},useContext:$i,useEffect:r2,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,w0(4194308,4,S5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return w0(4194308,4,t,e)},useInsertionEffect:function(t,e){return w0(4,2,t,e)},useMemo:function(t,e){var r=bo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=bo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Pee.bind(null,Bt,t),[n.memoizedState,t]},useRef:function(t){var e=bo();return t={current:t},e.memoizedState=t},useState:t2,useDebugValue:zN,useDeferredValue:function(t){return bo().memoizedState=t},useTransition:function(){var t=t2(!1),e=t[0];return t=Cee.bind(null,t[1]),bo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Bt,i=bo();if(Ot){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=e(),Nr===null)throw Error(Q(349));xc&30||m5(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,r2(g5.bind(null,n,o,t),[t]),n.flags|=2048,mm(9,y5.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=bo(),e=Nr.identifierPrefix;if(Ot){var r=cs,n=ls;r=(n&~(1<<32-so(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=hm++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Aee++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Nee={readContext:$i,useCallback:A5,useContext:$i,useEffect:WN,useImperativeHandle:E5,useInsertionEffect:_5,useLayoutEffect:w5,useMemo:C5,useReducer:JS,useRef:x5,useState:function(){return JS(pm)},useDebugValue:zN,useDeferredValue:function(t){var e=Di();return P5(e,lr.memoizedState,t)},useTransition:function(){var t=JS(pm)[0],e=Di().memoizedState;return[t,e]},useMutableSource:h5,useSyncExternalStore:p5,useId:T5,unstable_isNewReconciler:!1},kee={readContext:$i,useCallback:A5,useContext:$i,useEffect:WN,useImperativeHandle:E5,useInsertionEffect:_5,useLayoutEffect:w5,useMemo:C5,useReducer:ZS,useRef:x5,useState:function(){return ZS(pm)},useDebugValue:zN,useDeferredValue:function(t){var e=Di();return lr===null?e.memoizedState=t:P5(e,lr.memoizedState,t)},useTransition:function(){var t=ZS(pm)[0],e=Di().memoizedState;return[t,e]},useMutableSource:h5,useSyncExternalStore:p5,useId:T5,unstable_isNewReconciler:!1};function Ff(t,e){try{var r="",n=e;do r+=oZ(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function eE(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function WC(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Oee=typeof WeakMap=="function"?WeakMap:Map;function O5(t,e,r){r=ys(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Cb||(Cb=!0,ZC=n),WC(t,e)},r}function R5(t,e,r){r=ys(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){WC(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){WC(t,e),typeof n!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function n2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Oee;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=qee.bind(null,t,e,r),e.then(t,t))}function i2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function o2(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ys(-1,1),e.tag=2,Pa(r,e,1))),r.lanes|=1),t)}var Ree=Rs.ReactCurrentOwner,Dn=!1;function xn(t,e,r,n){e.child=t===null?f5(e,null,r,n):Df(e,t.child,r,n)}function s2(t,e,r,n,i){r=r.render;var o=e.ref;return Yu(e,i),n=UN(t,e,r,n,o,i),r=VN(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,As(t,e,i)):(Ot&&r&&IN(e),e.flags|=1,xn(t,e,n,i),e.child)}function a2(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!JN(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,j5(t,e,o,n,i)):(t=C0(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:am,r(s,n)&&t.ref===e.ref)return As(t,e,i)}return e.flags|=1,t=Na(o,n),t.ref=e.ref,t.return=e,e.child=t}function j5(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(am(o,n)&&t.ref===e.ref)if(Dn=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Dn=!0);else return e.lanes=t.lanes,As(t,e,i)}return zC(t,e,r,n,i)}function $5(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ju,Kn),Kn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(ju,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Et(ju,Kn),Kn|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Et(ju,Kn),Kn|=n;return xn(t,e,i,r),e.child}function D5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zC(t,e,r,n,i){var o=Bn(r)?vc:hn.current;return o=jf(e,o),Yu(e,i),r=UN(t,e,r,n,o,i),n=VN(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,As(t,e,i)):(Ot&&n&&IN(e),e.flags|=1,xn(t,e,r,i),e.child)}function l2(t,e,r,n,i){if(Bn(r)){var o=!0;yb(e)}else o=!1;if(Yu(e,i),e.stateNode===null)S0(t,e),c5(e,r,n),VC(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=$i(c):(c=Bn(r)?vc:hn.current,c=jf(e,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&Z$(e,s,n,c),Ys=!1;var h=e.memoizedState;s.state=h,_b(e,n,s,i),l=e.memoizedState,a!==n||h!==l||Ln.current||Ys?(typeof u=="function"&&(UC(e,r,u,n),l=e.memoizedState),(a=Ys||J$(e,r,a,n,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,a5(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:zi(e.type,a),s.props=c,d=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=$i(l):(l=Bn(r)?vc:hn.current,l=jf(e,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Z$(e,s,n,l),Ys=!1,h=e.memoizedState,s.state=h,_b(e,n,s,i);var m=e.memoizedState;a!==d||h!==m||Ln.current||Ys?(typeof p=="function"&&(UC(e,r,p,n),m=e.memoizedState),(c=Ys||J$(e,r,c,n,h,m,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return GC(t,e,r,n,o,i)}function GC(t,e,r,n,i,o){D5(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&H$(e,r,!1),As(t,e,o);n=e.stateNode,Ree.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Df(e,t.child,null,o),e.child=Df(e,null,a,o)):xn(t,e,a,o),e.memoizedState=n.state,i&&H$(e,r,!0),e.child}function M5(t){var e=t.stateNode;e.pendingContext?q$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q$(t,e.context,!1),MN(t,e.containerInfo)}function c2(t,e,r,n,i){return $f(),kN(i),e.flags|=256,xn(t,e,r,n),e.child}var qC={dehydrated:null,treeContext:null,retryLane:0};function HC(t){return{baseLanes:t,cachePool:null,transitions:null}}function F5(t,e,r){var n=e.pendingProps,i=Mt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Et(Mt,i&1),t===null)return LC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=gw(s,n,0,null),t=ec(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=HC(r),e.memoizedState=qC,t):GN(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return jee(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Na(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Na(a,o):(o=ec(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?HC(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=qC,n}return o=t.child,t=o.sibling,n=Na(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function GN(t,e){return e=gw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _v(t,e,r,n){return n!==null&&kN(n),Df(e,t.child,null,r),t=GN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jee(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=eE(Error(Q(422))),_v(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=gw({mode:"visible",children:n.children},i,0,null),o=ec(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Df(e,t.child,null,s),e.child.memoizedState=HC(s),e.memoizedState=qC,o);if(!(e.mode&1))return _v(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Q(419)),n=eE(o,n,void 0),_v(t,e,s,n)}if(a=(s&t.childLanes)!==0,Dn||a){if(n=Nr,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Es(t,i),ao(n,t,i,-1))}return XN(),n=eE(Error(Q(421))),_v(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hee.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Jn=Ca(i.nextSibling),ri=e,Ot=!0,Qi=null,t!==null&&(_i[wi++]=ls,_i[wi++]=cs,_i[wi++]=bc,ls=t.id,cs=t.overflow,bc=e),e=GN(e,n.children),e.flags|=4096,e)}function u2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),BC(t.return,e,r)}function tE(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function L5(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(xn(t,e,n.children,r),n=Mt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u2(t,r,e);else if(t.tag===19)u2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Et(Mt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&wb(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),tE(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wb(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}tE(e,!0,r,null,o);break;case"together":tE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function S0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),_c|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,r=Na(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Na(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function $ee(t,e,r){switch(e.tag){case 3:M5(e),$f();break;case 5:d5(e);break;case 1:Bn(e.type)&&yb(e);break;case 4:MN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Et(bb,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Et(Mt,Mt.current&1),e.flags|=128,null):r&e.child.childLanes?F5(t,e,r):(Et(Mt,Mt.current&1),t=As(t,e,r),t!==null?t.sibling:null);Et(Mt,Mt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return L5(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(Mt,Mt.current),n)break;return null;case 22:case 23:return e.lanes=0,$5(t,e,r)}return As(t,e,r)}var B5,KC,U5,V5;B5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};KC=function(){};U5=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,$l(Lo.current);var o=null;switch(r){case"input":i=yC(t,i),n=yC(t,n),o=[];break;case"select":i=Ut({},i,{value:void 0}),n=Ut({},n,{value:void 0}),o=[];break;case"textarea":i=bC(t,i),n=bC(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=pb)}_C(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(em.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(em.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};V5=function(t,e,r,n){r!==n&&(e.flags|=4)};function wh(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Dee(t,e,r){var n=e.pendingProps;switch(NN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Bn(e.type)&&mb(),rn(e),null;case 3:return n=e.stateNode,Mf(),kt(Ln),kt(hn),LN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qi!==null&&(rP(Qi),Qi=null))),KC(t,e),rn(e),null;case 5:FN(e);var i=$l(dm.current);if(r=e.type,t!==null&&e.stateNode!=null)U5(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Q(166));return rn(e),null}if(t=$l(Lo.current),bv(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Ao]=e,n[um]=o,t=(e.mode&1)!==0,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(i=0;i<Zh.length;i++)Ct(Zh[i],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":b$(n,o),Ct("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ct("invalid",n);break;case"textarea":_$(n,o),Ct("invalid",n)}_C(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&vv(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&vv(n.textContent,a,t),i=["children",""+a]):em.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ct("scroll",n)}switch(r){case"input":uv(n),x$(n,o,!0);break;case"textarea":uv(n),w$(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=pb)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m6(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Ao]=e,t[um]=n,B5(t,e,!1,!1),e.stateNode=t;e:{switch(s=wC(r,n),r){case"dialog":Ct("cancel",t),Ct("close",t),i=n;break;case"iframe":case"object":case"embed":Ct("load",t),i=n;break;case"video":case"audio":for(i=0;i<Zh.length;i++)Ct(Zh[i],t);i=n;break;case"source":Ct("error",t),i=n;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=n;break;case"details":Ct("toggle",t),i=n;break;case"input":b$(t,n),i=yC(t,n),Ct("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ut({},n,{value:void 0}),Ct("invalid",t);break;case"textarea":_$(t,n),i=bC(t,n),Ct("invalid",t);break;default:i=n}_C(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?v6(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&y6(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&tm(t,l):typeof l=="number"&&tm(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(em.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ct("scroll",t):l!=null&&mN(t,o,l,s))}switch(r){case"input":uv(t),x$(t,n,!1);break;case"textarea":uv(t),w$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ba(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?qu(t,!!n.multiple,o,!1):n.defaultValue!=null&&qu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)V5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Q(166));if(r=$l(dm.current),$l(Lo.current),bv(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ao]=e,(o=n.nodeValue!==r)&&(t=ri,t!==null))switch(t.tag){case 3:vv(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vv(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ao]=e,e.stateNode=n}return rn(e),null;case 13:if(kt(Mt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Jn!==null&&e.mode&1&&!(e.flags&128))o5(),$f(),e.flags|=98560,o=!1;else if(o=bv(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[Ao]=e}else $f(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),o=!1}else Qi!==null&&(rP(Qi),Qi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Mt.current&1?dr===0&&(dr=3):XN())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return Mf(),KC(t,e),t===null&&lm(e.stateNode.containerInfo),rn(e),null;case 10:return jN(e.type._context),rn(e),null;case 17:return Bn(e.type)&&mb(),rn(e),null;case 19:if(kt(Mt),o=e.memoizedState,o===null)return rn(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)wh(o,!1);else{if(dr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=wb(t),s!==null){for(e.flags|=128,wh(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Et(Mt,Mt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xt()>Lf&&(e.flags|=128,n=!0,wh(o,!1),e.lanes=4194304)}else{if(!n)if(t=wb(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),wh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ot)return rn(e),null}else 2*Xt()-o.renderingStartTime>Lf&&r!==1073741824&&(e.flags|=128,n=!0,wh(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,r=Mt.current,Et(Mt,n?r&1|2:r&1),e):(rn(e),null);case 22:case 23:return YN(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Kn&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Mee(t,e){switch(NN(e),e.tag){case 1:return Bn(e.type)&&mb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mf(),kt(Ln),kt(hn),LN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return FN(e),null;case 13:if(kt(Mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));$f()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(Mt),null;case 4:return Mf(),null;case 10:return jN(e.type._context),null;case 22:case 23:return YN(),null;case 24:return null;default:return null}}var wv=!1,ln=!1,Fee=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ru(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Gt(t,e,n)}else r.current=null}function QC(t,e,r){try{r()}catch(n){Gt(t,e,n)}}var f2=!1;function Lee(t,e){if(OC=fb,t=q6(),TN(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(a=s+i),d!==o||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===r&&++c===i&&(a=s),h===o&&++u===n&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(RC={focusedElem:t,selectionRange:r},fb=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,g=m.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:zi(e.type,y),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(S){Gt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return m=f2,f2=!1,m}function Sp(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&QC(e,r,o)}i=i.next}while(i!==n)}}function mw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function YC(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function W5(t){var e=t.alternate;e!==null&&(t.alternate=null,W5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ao],delete e[um],delete e[DC],delete e[_ee],delete e[wee])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z5(t){return t.tag===5||t.tag===3||t.tag===4}function d2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function XC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=pb));else if(n!==4&&(t=t.child,t!==null))for(XC(t,e,r),t=t.sibling;t!==null;)XC(t,e,r),t=t.sibling}function JC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(JC(t,e,r),t=t.sibling;t!==null;)JC(t,e,r),t=t.sibling}var Lr=null,qi=!1;function Ls(t,e,r){for(r=r.child;r!==null;)G5(t,e,r),r=r.sibling}function G5(t,e,r){if(Fo&&typeof Fo.onCommitFiberUnmount=="function")try{Fo.onCommitFiberUnmount(aw,r)}catch{}switch(r.tag){case 5:ln||Ru(r,e);case 6:var n=Lr,i=qi;Lr=null,Ls(t,e,r),Lr=n,qi=i,Lr!==null&&(qi?(t=Lr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Lr.removeChild(r.stateNode));break;case 18:Lr!==null&&(qi?(t=Lr,r=r.stateNode,t.nodeType===8?KS(t.parentNode,r):t.nodeType===1&&KS(t,r),om(t)):KS(Lr,r.stateNode));break;case 4:n=Lr,i=qi,Lr=r.stateNode.containerInfo,qi=!0,Ls(t,e,r),Lr=n,qi=i;break;case 0:case 11:case 14:case 15:if(!ln&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&QC(r,e,s),i=i.next}while(i!==n)}Ls(t,e,r);break;case 1:if(!ln&&(Ru(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Gt(r,e,a)}Ls(t,e,r);break;case 21:Ls(t,e,r);break;case 22:r.mode&1?(ln=(n=ln)||r.memoizedState!==null,Ls(t,e,r),ln=n):Ls(t,e,r);break;default:Ls(t,e,r)}}function h2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Fee),e.forEach(function(n){var i=Kee.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ui(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Lr=a.stateNode,qi=!1;break e;case 3:Lr=a.stateNode.containerInfo,qi=!0;break e;case 4:Lr=a.stateNode.containerInfo,qi=!0;break e}a=a.return}if(Lr===null)throw Error(Q(160));G5(o,s,i),Lr=null,qi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q5(e,t),e=e.sibling}function q5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ui(e,t),go(t),n&4){try{Sp(3,t,t.return),mw(3,t)}catch(y){Gt(t,t.return,y)}try{Sp(5,t,t.return)}catch(y){Gt(t,t.return,y)}}break;case 1:Ui(e,t),go(t),n&512&&r!==null&&Ru(r,r.return);break;case 5:if(Ui(e,t),go(t),n&512&&r!==null&&Ru(r,r.return),t.flags&32){var i=t.stateNode;try{tm(i,"")}catch(y){Gt(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&h6(i,o),wC(a,s);var c=wC(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?v6(i,d):u==="dangerouslySetInnerHTML"?y6(i,d):u==="children"?tm(i,d):mN(i,u,d,c)}switch(a){case"input":gC(i,o);break;case"textarea":p6(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?qu(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?qu(i,!!o.multiple,o.defaultValue,!0):qu(i,!!o.multiple,o.multiple?[]:"",!1))}i[um]=o}catch(y){Gt(t,t.return,y)}}break;case 6:if(Ui(e,t),go(t),n&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){Gt(t,t.return,y)}}break;case 3:if(Ui(e,t),go(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{om(e.containerInfo)}catch(y){Gt(t,t.return,y)}break;case 4:Ui(e,t),go(t);break;case 13:Ui(e,t),go(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(KN=Xt())),n&4&&h2(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(ln=(c=ln)||u,Ui(e,t),ln=c):Ui(e,t),go(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ce=t,u=t.child;u!==null;){for(d=ce=u;ce!==null;){switch(h=ce,p=h.child,h.tag){case 0:case 11:case 14:case 15:Sp(4,h,h.return);break;case 1:Ru(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Gt(n,r,y)}}break;case 5:Ru(h,h.return);break;case 22:if(h.memoizedState!==null){m2(d);continue}}p!==null?(p.return=h,ce=p):m2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=g6("display",s))}catch(y){Gt(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Gt(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ui(e,t),go(t),n&4&&h2(t);break;case 21:break;default:Ui(e,t),go(t)}}function go(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(z5(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(tm(i,""),n.flags&=-33);var o=d2(t);JC(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=d2(t);XC(t,a,s);break;default:throw Error(Q(161))}}catch(l){Gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Bee(t,e,r){ce=t,H5(t)}function H5(t,e,r){for(var n=(t.mode&1)!==0;ce!==null;){var i=ce,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||wv;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ln;a=wv;var c=ln;if(wv=s,(ln=l)&&!c)for(ce=i;ce!==null;)s=ce,l=s.child,s.tag===22&&s.memoizedState!==null?y2(i):l!==null?(l.return=s,ce=l):y2(i);for(;o!==null;)ce=o,H5(o),o=o.sibling;ce=i,wv=a,ln=c}p2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ce=o):p2(t)}}function p2(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||mw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ln)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:zi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&X$(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}X$(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&om(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}ln||e.flags&512&&YC(e)}catch(h){Gt(e,e.return,h)}}if(e===t){ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,ce=r;break}ce=e.return}}function m2(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ce=r;break}ce=e.return}}function y2(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mw(4,e)}catch(l){Gt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Gt(e,i,l)}}var o=e.return;try{YC(e)}catch(l){Gt(e,o,l)}break;case 5:var s=e.return;try{YC(e)}catch(l){Gt(e,s,l)}}}catch(l){Gt(e,e.return,l)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var Uee=Math.ceil,Ab=Rs.ReactCurrentDispatcher,qN=Rs.ReactCurrentOwner,Ni=Rs.ReactCurrentBatchConfig,Je=0,Nr=null,nr=null,Hr=0,Kn=0,ju=el(0),dr=0,ym=null,_c=0,yw=0,HN=0,Ep=null,jn=null,KN=0,Lf=1/0,os=null,Cb=!1,ZC=null,Ta=null,Sv=!1,da=null,Pb=0,Ap=0,eP=null,E0=-1,A0=0;function Cn(){return Je&6?Xt():E0!==-1?E0:E0=Xt()}function Ia(t){return t.mode&1?Je&2&&Hr!==0?Hr&-Hr:Eee.transition!==null?(A0===0&&(A0=N6()),A0):(t=lt,t!==0||(t=window.event,t=t===void 0?16:M6(t.type)),t):1}function ao(t,e,r,n){if(50<Ap)throw Ap=0,eP=null,Error(Q(185));Jy(t,r,n),(!(Je&2)||t!==Nr)&&(t===Nr&&(!(Je&2)&&(yw|=r),dr===4&&ra(t,Hr)),Un(t,n),r===1&&Je===0&&!(e.mode&1)&&(Lf=Xt()+500,dw&&tl()))}function Un(t,e){var r=t.callbackNode;EZ(t,e);var n=ub(t,t===Nr?Hr:0);if(n===0)r!==null&&A$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&A$(r),e===1)t.tag===0?See(g2.bind(null,t)):r5(g2.bind(null,t)),bee(function(){!(Je&6)&&tl()}),r=null;else{switch(k6(n)){case 1:r=xN;break;case 4:r=T6;break;case 16:r=cb;break;case 536870912:r=I6;break;default:r=cb}r=tW(r,K5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function K5(t,e){if(E0=-1,A0=0,Je&6)throw Error(Q(327));var r=t.callbackNode;if(Xu()&&t.callbackNode!==r)return null;var n=ub(t,t===Nr?Hr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Tb(t,n);else{e=n;var i=Je;Je|=2;var o=Y5();(Nr!==t||Hr!==e)&&(os=null,Lf=Xt()+500,Zl(t,e));do try{zee();break}catch(a){Q5(t,a)}while(!0);RN(),Ab.current=o,Je=i,nr!==null?e=0:(Nr=null,Hr=0,e=dr)}if(e!==0){if(e===2&&(i=PC(t),i!==0&&(n=i,e=tP(t,i))),e===1)throw r=ym,Zl(t,0),ra(t,n),Un(t,Xt()),r;if(e===6)ra(t,n);else{if(i=t.current.alternate,!(n&30)&&!Vee(i)&&(e=Tb(t,n),e===2&&(o=PC(t),o!==0&&(n=o,e=tP(t,o))),e===1))throw r=ym,Zl(t,0),ra(t,n),Un(t,Xt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Q(345));case 2:yl(t,jn,os);break;case 3:if(ra(t,n),(n&130023424)===n&&(e=KN+500-Xt(),10<e)){if(ub(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Cn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$C(yl.bind(null,t,jn,os),e);break}yl(t,jn,os);break;case 4:if(ra(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-so(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Uee(n/1960))-n,10<n){t.timeoutHandle=$C(yl.bind(null,t,jn,os),n);break}yl(t,jn,os);break;case 5:yl(t,jn,os);break;default:throw Error(Q(329))}}}return Un(t,Xt()),t.callbackNode===r?K5.bind(null,t):null}function tP(t,e){var r=Ep;return t.current.memoizedState.isDehydrated&&(Zl(t,e).flags|=256),t=Tb(t,e),t!==2&&(e=jn,jn=r,e!==null&&rP(e)),t}function rP(t){jn===null?jn=t:jn.push.apply(jn,t)}function Vee(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!uo(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ra(t,e){for(e&=~HN,e&=~yw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-so(e),n=1<<r;t[r]=-1,e&=~n}}function g2(t){if(Je&6)throw Error(Q(327));Xu();var e=ub(t,0);if(!(e&1))return Un(t,Xt()),null;var r=Tb(t,e);if(t.tag!==0&&r===2){var n=PC(t);n!==0&&(e=n,r=tP(t,n))}if(r===1)throw r=ym,Zl(t,0),ra(t,e),Un(t,Xt()),r;if(r===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yl(t,jn,os),Un(t,Xt()),null}function QN(t,e){var r=Je;Je|=1;try{return t(e)}finally{Je=r,Je===0&&(Lf=Xt()+500,dw&&tl())}}function wc(t){da!==null&&da.tag===0&&!(Je&6)&&Xu();var e=Je;Je|=1;var r=Ni.transition,n=lt;try{if(Ni.transition=null,lt=1,t)return t()}finally{lt=n,Ni.transition=r,Je=e,!(Je&6)&&tl()}}function YN(){Kn=ju.current,kt(ju)}function Zl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,vee(r)),nr!==null)for(r=nr.return;r!==null;){var n=r;switch(NN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mb();break;case 3:Mf(),kt(Ln),kt(hn),LN();break;case 5:FN(n);break;case 4:Mf();break;case 13:kt(Mt);break;case 19:kt(Mt);break;case 10:jN(n.type._context);break;case 22:case 23:YN()}r=r.return}if(Nr=t,nr=t=Na(t.current,null),Hr=Kn=e,dr=0,ym=null,HN=yw=_c=0,jn=Ep=null,jl!==null){for(e=0;e<jl.length;e++)if(r=jl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}jl=null}return t}function Q5(t,e){do{var r=nr;try{if(RN(),_0.current=Eb,Sb){for(var n=Bt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Sb=!1}if(xc=0,Ir=lr=Bt=null,wp=!1,hm=0,qN.current=null,r===null||r.return===null){dr=1,ym=e,nr=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=Hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=i2(s);if(p!==null){p.flags&=-257,o2(p,s,a,o,e),p.mode&1&&n2(o,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){n2(o,c,e),XN();break e}l=Error(Q(426))}}else if(Ot&&a.mode&1){var g=i2(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),o2(g,s,a,o,e),kN(Ff(l,a));break e}}o=l=Ff(l,a),dr!==4&&(dr=2),Ep===null?Ep=[o]:Ep.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=O5(o,l,e);Y$(o,b);break e;case 1:a=l;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ta===null||!Ta.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=R5(o,a,e);Y$(o,S);break e}}o=o.return}while(o!==null)}J5(r)}catch(_){e=_,nr===r&&r!==null&&(nr=r=r.return);continue}break}while(!0)}function Y5(){var t=Ab.current;return Ab.current=Eb,t===null?Eb:t}function XN(){(dr===0||dr===3||dr===2)&&(dr=4),Nr===null||!(_c&268435455)&&!(yw&268435455)||ra(Nr,Hr)}function Tb(t,e){var r=Je;Je|=2;var n=Y5();(Nr!==t||Hr!==e)&&(os=null,Zl(t,e));do try{Wee();break}catch(i){Q5(t,i)}while(!0);if(RN(),Je=r,Ab.current=n,nr!==null)throw Error(Q(261));return Nr=null,Hr=0,dr}function Wee(){for(;nr!==null;)X5(nr)}function zee(){for(;nr!==null&&!mZ();)X5(nr)}function X5(t){var e=eW(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?J5(t):nr=e,qN.current=null}function J5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Mee(r,e),r!==null){r.flags&=32767,nr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dr=6,nr=null;return}}else if(r=Dee(r,e,Kn),r!==null){nr=r;return}if(e=e.sibling,e!==null){nr=e;return}nr=e=t}while(e!==null);dr===0&&(dr=5)}function yl(t,e,r){var n=lt,i=Ni.transition;try{Ni.transition=null,lt=1,Gee(t,e,r,n)}finally{Ni.transition=i,lt=n}return null}function Gee(t,e,r,n){do Xu();while(da!==null);if(Je&6)throw Error(Q(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(AZ(t,o),t===Nr&&(nr=Nr=null,Hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sv||(Sv=!0,tW(cb,function(){return Xu(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ni.transition,Ni.transition=null;var s=lt;lt=1;var a=Je;Je|=4,qN.current=null,Lee(t,r),q5(r,t),fee(RC),fb=!!OC,RC=OC=null,t.current=r,Bee(r),yZ(),Je=a,lt=s,Ni.transition=o}else t.current=r;if(Sv&&(Sv=!1,da=t,Pb=i),o=t.pendingLanes,o===0&&(Ta=null),bZ(r.stateNode),Un(t,Xt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Cb)throw Cb=!1,t=ZC,ZC=null,t;return Pb&1&&t.tag!==0&&Xu(),o=t.pendingLanes,o&1?t===eP?Ap++:(Ap=0,eP=t):Ap=0,tl(),null}function Xu(){if(da!==null){var t=k6(Pb),e=Ni.transition,r=lt;try{if(Ni.transition=null,lt=16>t?16:t,da===null)var n=!1;else{if(t=da,da=null,Pb=0,Je&6)throw Error(Q(331));var i=Je;for(Je|=4,ce=t.current;ce!==null;){var o=ce,s=o.child;if(ce.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ce=c;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:Sp(8,u,o)}var d=u.child;if(d!==null)d.return=u,ce=d;else for(;ce!==null;){u=ce;var h=u.sibling,p=u.return;if(W5(u),u===c){ce=null;break}if(h!==null){h.return=p,ce=h;break}ce=p}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}ce=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ce=s;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Sp(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ce=b;break e}ce=o.return}}var v=t.current;for(ce=v;ce!==null;){s=ce;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ce=x;else e:for(s=v;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mw(9,a)}}catch(_){Gt(a,a.return,_)}if(a===s){ce=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ce=S;break e}ce=a.return}}if(Je=i,tl(),Fo&&typeof Fo.onPostCommitFiberRoot=="function")try{Fo.onPostCommitFiberRoot(aw,t)}catch{}n=!0}return n}finally{lt=r,Ni.transition=e}}return!1}function v2(t,e,r){e=Ff(r,e),e=O5(t,e,1),t=Pa(t,e,1),e=Cn(),t!==null&&(Jy(t,1,e),Un(t,e))}function Gt(t,e,r){if(t.tag===3)v2(t,t,r);else for(;e!==null;){if(e.tag===3){v2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ta===null||!Ta.has(n))){t=Ff(r,t),t=R5(e,t,1),e=Pa(e,t,1),t=Cn(),e!==null&&(Jy(e,1,t),Un(e,t));break}}e=e.return}}function qee(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&r,Nr===t&&(Hr&r)===r&&(dr===4||dr===3&&(Hr&130023424)===Hr&&500>Xt()-KN?Zl(t,0):HN|=r),Un(t,e)}function Z5(t,e){e===0&&(t.mode&1?(e=hv,hv<<=1,!(hv&130023424)&&(hv=4194304)):e=1);var r=Cn();t=Es(t,e),t!==null&&(Jy(t,e,r),Un(t,r))}function Hee(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Z5(t,r)}function Kee(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(e),Z5(t,r)}var eW;eW=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)Dn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Dn=!1,$ee(t,e,r);Dn=!!(t.flags&131072)}else Dn=!1,Ot&&e.flags&1048576&&n5(e,vb,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;S0(t,e),t=e.pendingProps;var i=jf(e,hn.current);Yu(e,r),i=UN(null,e,n,t,i,r);var o=VN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bn(n)?(o=!0,yb(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,DN(e),i.updater=hw,e.stateNode=i,i._reactInternals=e,VC(e,n,t,r),e=GC(null,e,n,!0,o,r)):(e.tag=0,Ot&&o&&IN(e),xn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(S0(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Yee(n),t=zi(n,t),i){case 0:e=zC(null,e,n,t,r);break e;case 1:e=l2(null,e,n,t,r);break e;case 11:e=s2(null,e,n,t,r);break e;case 14:e=a2(null,e,n,zi(n.type,t),r);break e}throw Error(Q(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:zi(n,i),zC(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:zi(n,i),l2(t,e,n,i,r);case 3:e:{if(M5(e),t===null)throw Error(Q(387));n=e.pendingProps,o=e.memoizedState,i=o.element,a5(t,e),_b(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ff(Error(Q(423)),e),e=c2(t,e,n,r,i);break e}else if(n!==i){i=Ff(Error(Q(424)),e),e=c2(t,e,n,r,i);break e}else for(Jn=Ca(e.stateNode.containerInfo.firstChild),ri=e,Ot=!0,Qi=null,r=f5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($f(),n===i){e=As(t,e,r);break e}xn(t,e,n,r)}e=e.child}return e;case 5:return d5(e),t===null&&LC(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,jC(n,i)?s=null:o!==null&&jC(n,o)&&(e.flags|=32),D5(t,e),xn(t,e,s,r),e.child;case 6:return t===null&&LC(e),null;case 13:return F5(t,e,r);case 4:return MN(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Df(e,null,n,r):xn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:zi(n,i),s2(t,e,n,i,r);case 7:return xn(t,e,e.pendingProps,r),e.child;case 8:return xn(t,e,e.pendingProps.children,r),e.child;case 12:return xn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Et(bb,n._currentValue),n._currentValue=s,o!==null)if(uo(o.value,s)){if(o.children===i.children&&!Ln.current){e=As(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=ys(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),BC(o.return,r,e),a.lanes|=r;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Q(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),BC(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}xn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Yu(e,r),i=$i(i),n=n(i),e.flags|=1,xn(t,e,n,r),e.child;case 14:return n=e.type,i=zi(n,e.pendingProps),i=zi(n.type,i),a2(t,e,n,i,r);case 15:return j5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:zi(n,i),S0(t,e),e.tag=1,Bn(n)?(t=!0,yb(e)):t=!1,Yu(e,r),c5(e,n,i),VC(e,n,i,r),GC(null,e,n,!0,t,r);case 19:return L5(t,e,r);case 22:return $5(t,e,r)}throw Error(Q(156,e.tag))};function tW(t,e){return P6(t,e)}function Qee(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(t,e,r,n){return new Qee(t,e,r,n)}function JN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yee(t){if(typeof t=="function")return JN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gN)return 11;if(t===vN)return 14}return 2}function Na(t,e){var r=t.alternate;return r===null?(r=Ci(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function C0(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")JN(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Eu:return ec(r.children,i,o,e);case yN:s=8,i|=8;break;case dC:return t=Ci(12,r,e,i|2),t.elementType=dC,t.lanes=o,t;case hC:return t=Ci(13,r,e,i),t.elementType=hC,t.lanes=o,t;case pC:return t=Ci(19,r,e,i),t.elementType=pC,t.lanes=o,t;case u6:return gw(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l6:s=10;break e;case c6:s=9;break e;case gN:s=11;break e;case vN:s=14;break e;case Qs:s=16,n=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Ci(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function ec(t,e,r,n){return t=Ci(7,t,n,e),t.lanes=r,t}function gw(t,e,r,n){return t=Ci(22,t,n,e),t.elementType=u6,t.lanes=r,t.stateNode={isHidden:!1},t}function rE(t,e,r){return t=Ci(6,t,null,e),t.lanes=r,t}function nE(t,e,r){return e=Ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xee(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=MS(0),this.expirationTimes=MS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=MS(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ZN(t,e,r,n,i,o,s,a,l){return t=new Xee(t,e,r,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ci(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DN(o),t}function Jee(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Su,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function rW(t){if(!t)return Ua;t=t._reactInternals;e:{if(Dc(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var r=t.type;if(Bn(r))return t5(t,r,e)}return e}function nW(t,e,r,n,i,o,s,a,l){return t=ZN(r,n,!0,t,i,o,s,a,l),t.context=rW(null),r=t.current,n=Cn(),i=Ia(r),o=ys(n,i),o.callback=e??null,Pa(r,o,i),t.current.lanes=i,Jy(t,i,n),Un(t,n),t}function vw(t,e,r,n){var i=e.current,o=Cn(),s=Ia(i);return r=rW(r),e.context===null?e.context=r:e.pendingContext=r,e=ys(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Pa(i,e,s),t!==null&&(ao(t,i,s,o),x0(t,i,s)),s}function Ib(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ek(t,e){b2(t,e),(t=t.alternate)&&b2(t,e)}function Zee(){return null}var iW=typeof reportError=="function"?reportError:function(t){console.error(t)};function tk(t){this._internalRoot=t}bw.prototype.render=tk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));vw(t,e,null,null)};bw.prototype.unmount=tk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wc(function(){vw(null,t,null,null)}),e[Ss]=null}};function bw(t){this._internalRoot=t}bw.prototype.unstable_scheduleHydration=function(t){if(t){var e=j6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ta.length&&e!==0&&e<ta[r].priority;r++);ta.splice(r,0,t),r===0&&D6(t)}};function rk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function x2(){}function ete(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=Ib(s);o.call(c)}}var s=nW(e,n,t,0,null,!1,!1,"",x2);return t._reactRootContainer=s,t[Ss]=s.current,lm(t.nodeType===8?t.parentNode:t),wc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ib(l);a.call(c)}}var l=ZN(t,0,!1,null,null,!1,!1,"",x2);return t._reactRootContainer=l,t[Ss]=l.current,lm(t.nodeType===8?t.parentNode:t),wc(function(){vw(e,l,r,n)}),l}function _w(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Ib(s);a.call(l)}}vw(e,s,t,i)}else s=ete(r,e,t,i,n);return Ib(s)}O6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jh(e.pendingLanes);r!==0&&(_N(e,r|1),Un(e,Xt()),!(Je&6)&&(Lf=Xt()+500,tl()))}break;case 13:wc(function(){var n=Es(t,1);if(n!==null){var i=Cn();ao(n,t,1,i)}}),ek(t,1)}};wN=function(t){if(t.tag===13){var e=Es(t,134217728);if(e!==null){var r=Cn();ao(e,t,134217728,r)}ek(t,134217728)}};R6=function(t){if(t.tag===13){var e=Ia(t),r=Es(t,e);if(r!==null){var n=Cn();ao(r,t,e,n)}ek(t,e)}};j6=function(){return lt};$6=function(t,e){var r=lt;try{return lt=t,e()}finally{lt=r}};EC=function(t,e,r){switch(e){case"input":if(gC(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=fw(n);if(!i)throw Error(Q(90));d6(n),gC(n,i)}}}break;case"textarea":p6(t,r);break;case"select":e=r.value,e!=null&&qu(t,!!r.multiple,e,!1)}};_6=QN;w6=wc;var tte={usingClientEntryPoint:!1,Events:[eg,Tu,fw,b6,x6,QN]},Sh={findFiberByHostInstance:Rl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rte={bundleType:Sh.bundleType,version:Sh.version,rendererPackageName:Sh.rendererPackageName,rendererConfig:Sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=A6(t),t===null?null:t.stateNode},findFiberByHostInstance:Sh.findFiberByHostInstance||Zee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ev.isDisabled&&Ev.supportsFiber)try{aw=Ev.inject(rte),Fo=Ev}catch{}}li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tte;li.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(e))throw Error(Q(200));return Jee(t,e,null,r)};li.createRoot=function(t,e){if(!rk(t))throw Error(Q(299));var r=!1,n="",i=iW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ZN(t,1,!1,null,null,r,!1,n,i),t[Ss]=e.current,lm(t.nodeType===8?t.parentNode:t),new tk(e)};li.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=A6(e),t=t===null?null:t.stateNode,t};li.flushSync=function(t){return wc(t)};li.hydrate=function(t,e,r){if(!xw(e))throw Error(Q(200));return _w(null,t,e,!0,r)};li.hydrateRoot=function(t,e,r){if(!rk(t))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=iW;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=nW(e,null,t,1,r??null,i,!1,o,s),t[Ss]=e.current,lm(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new bw(e)};li.render=function(t,e,r){if(!xw(e))throw Error(Q(200));return _w(null,t,e,!1,r)};li.unmountComponentAtNode=function(t){if(!xw(t))throw Error(Q(40));return t._reactRootContainer?(wc(function(){_w(null,null,t,!1,function(){t._reactRootContainer=null,t[Ss]=null})}),!0):!1};li.unstable_batchedUpdates=QN;li.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!xw(r))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return _w(t,e,r,!1,n)};li.version="18.2.0-next-9e3b772b8-20220608";function oW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oW)}catch(t){console.error(t)}}oW(),n6.exports=li;var rg=n6.exports;const nte=ot(rg);var _2=rg;uC.createRoot=_2.createRoot,uC.hydrateRoot=_2.hydrateRoot;var sW={exports:{}},aW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=E;function ite(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ote=typeof Object.is=="function"?Object.is:ite,ste=Bf.useState,ate=Bf.useEffect,lte=Bf.useLayoutEffect,cte=Bf.useDebugValue;function ute(t,e){var r=e(),n=ste({inst:{value:r,getSnapshot:e}}),i=n[0].inst,o=n[1];return lte(function(){i.value=r,i.getSnapshot=e,iE(i)&&o({inst:i})},[t,r,e]),ate(function(){return iE(i)&&o({inst:i}),t(function(){iE(i)&&o({inst:i})})},[t]),cte(r),r}function iE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ote(t,r)}catch{return!0}}function fte(t,e){return e()}var dte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fte:ute;aW.useSyncExternalStore=Bf.useSyncExternalStore!==void 0?Bf.useSyncExternalStore:dte;sW.exports=aW;var nk=sW.exports;const{useEffect:hte,useLayoutEffect:pte,useRef:mte,useInsertionEffect:yte}=HJ,gte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vte=gte?pte:hte,bte=yte||vte,lW=t=>{const e=mte([t,(...r)=>e[0](...r)]).current;return bte(()=>{e[0]=t}),e[1]},xte=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",_te=(t,e="")=>t[0]==="~"?t.slice(1):e+t,wte="popstate",ik="pushState",ok="replaceState",Ste="hashchange",w2=[wte,ik,ok,Ste],Ete=t=>{for(const e of w2)addEventListener(e,t);return()=>{for(const e of w2)removeEventListener(e,t)}},Ate=(t,e)=>nk.useSyncExternalStore(Ete,t,e),S2=()=>location.pathname,Cte=({ssrPath:t}={})=>Ate(S2,t?()=>t:S2),Pte=(t,{replace:e=!1}={})=>history[e?ok:ik](null,"",t),Tte=(t={})=>[xte(t.base,Cte(t)),lW((e,r)=>Pte(_te(e,t.base),r))];if(typeof history<"u")for(const t of[ik,ok]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}function Ite(t=kte){let e={};const r=n=>e[n]||(e[n]=t(n));return(n,i)=>{const{regexp:o,keys:s}=r(n||""),a=o.exec(i);return a?[!0,s.reduce((c,u,d)=>(c[u.name]=a[d+1],c),{})]:[!1,null]}}const E2=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),Nte=(t,e,r)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&r&&(n="(?:\\/"+n+")"),n+(e?"?":"")},kte=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let r=null,n=0,i=[],o="";for(;(r=e.exec(t))!==null;){const[s,a,l]=r,c=l==="+"||l==="*",u=l==="?"||l==="*",d=u&&t[r.index-1]==="/"?1:0,h=t.substring(n,r.index-d);i.push({name:a}),n=e.lastIndex,o+=E2(h)+Nte(c,u,d)}return o+=E2(t.substring(n)),{keys:i,regexp:new RegExp("^"+o+"(?:\\/)?$","i")}},Ote={hook:Tte,matcher:Ite(),base:""},Rte=E.createContext(Ote),ww=()=>E.useContext(Rte),Sw=t=>t.hook(t),jte=()=>Sw(ww()),$te=t=>{const e=ww(),[r]=Sw(e);return e.matcher(t,r)},cW=E.createContext({params:{}}),Dte=()=>E.useContext(cW).params,A2=(t,e)=>E.createElement(cW.Provider,{value:{params:t},children:e}),st=({path:t,match:e,component:r,children:n})=>{const i=$te(t),[o,s]=e||i;return o?r?A2(s,E.createElement(r,{params:s})):A2(s,typeof n=="function"?n(s):n):null};E.forwardRef((t,e)=>{const r=ww(),[,n]=Sw(r),{to:i,href:o=i,children:s,onClick:a}=t,l=lW(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(a&&a(d),d.defaultPrevented||(d.preventDefault(),n(i||o,t)))}),c={href:o[0]==="~"?o.slice(1):r.base+o,onClick:l,to:null,ref:e},u=E.isValidElement(s)?s:E.createElement("a",t);return E.cloneElement(u,c)});const nP=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===E.Fragment?nP(e.props.children):nP(e))):[t],Mte=({children:t,location:e})=>{const r=ww(),n=r.matcher,[i]=Sw(r);for(const o of nP(t)){let s=0;if(E.isValidElement(o)&&(s=o.props.path?n(o.props.path,e||i):[!0,{}])[0])return E.cloneElement(o,{match:s})}return null},Fte="modulepreload",Lte=function(t){return"/"+t},C2={},uW=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link");i=Promise.all(r.map(s=>{if(s=Lte(s),s in C2)return;C2[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let d=o.length-1;d>=0;d--){const h=o[d];if(h.href===s&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Fte,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Bte=t=>{t&&t instanceof Function&&uW(()=>import("./web-vitals-BptxjviT.js"),__vite__mapDeps([])).then(({getCLS:e,getFID:r,getFCP:n,getLCP:i,getTTFB:o})=>{e(t),r(t),n(t),i(t),o(t)})};var P2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fW={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(t,e){if(!t)throw Ld(e)},Ld=function(t){return new Error("Firebase Database ("+fW.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Ute=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],s=t[r++],a=t[r++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},sk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,s||(h=64)),n.push(r[u],r[d],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ute(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new Vte;const h=o<<2|a>>4;if(n.push(h),c!==64){const p=a<<4&240|c>>2;if(n.push(p),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vte extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hW=function(t){const e=dW(t);return sk.encodeByteArray(e,!0)},Nb=function(t){return hW(t).replace(/\./g,"")},iP=function(t){try{return sk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wte(t){return pW(void 0,t)}function pW(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!zte(r)||(t[r]=pW(t[r],e[r]));return t}function zte(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gte(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qte=()=>Gte().__FIREBASE_DEFAULTS__,Hte=()=>{if(typeof process>"u"||typeof P2>"u")return;const t=P2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Kte=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iP(t[1]);return e&&JSON.parse(e)},ak=()=>{try{return qte()||Hte()||Kte()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qte=t=>{var e,r;return(r=(e=ak())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},lk=t=>{const e=Qte(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},mW=()=>{var t;return(t=ak())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nb(JSON.stringify(r)),Nb(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gm())}function Yte(){var t;const e=(t=ak())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xte(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gW(){return fW.NODE_ADMIN===!0}function Jte(){return!Yte()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vW(){try{return typeof indexedDB=="object"}catch{return!1}}function Zte(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ere="FirebaseError";class Mc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=ere,Object.setPrototypeOf(this,Mc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bW.prototype.create)}}class bW{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?tre(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Mc(i,a,n)}}function tre(t,e){return t.replace(rre,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const rre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t){return JSON.parse(t)}function ur(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW=function(t){let e={},r={},n={},i="";try{const o=t.split(".");e=vm(iP(o[0])||""),r=vm(iP(o[1])||""),i=o[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:i}},nre=function(t){const e=xW(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},ire=function(t){const e=xW(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Uf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function T2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kb(t,e,r){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}function oP(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],s=e[i];if(I2(o)&&I2(s)){if(!oP(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function I2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ore(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let d=0;d<16;d++)n[d]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let d=16;d<80;d++){const h=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^o&(s^a),u=1518500249):(c=o^s^a,u=1859775393):d<60?(c=o&s|a&(o|s),u=2400959708):(c=o^s^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+n[d]&4294967295;l=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<r;){if(s===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<r;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<r;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[n]=this.chain_[i]>>o&255,++n;return e}}function ig(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i>=55296&&i<=56319){const o=i-55296;n++,X(n<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(n)-56320;i=65536+(o<<10)+s}i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):i<65536?(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Ew=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){return t&&t._delegate?t._delegate:t}class Sc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lre=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new ng;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ure(e))try{this.getOrInitializeService({instanceIdentifier:gl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=gl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gl){return this.instances.has(e)}getOptions(e=gl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cre(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=gl){return this.component?this.component.multipleInstances?e:gl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cre(t){return t===gl?void 0:t}function ure(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new lre(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const dre={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},hre=Ye.INFO,pre={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},mre=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=pre[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uk{constructor(e){this.name=e,this._logLevel=hre,this._logHandler=mre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const yre=(t,e)=>e.some(r=>t instanceof r);let N2,k2;function gre(){return N2||(N2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vre(){return k2||(k2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _W=new WeakMap,sP=new WeakMap,wW=new WeakMap,oE=new WeakMap,fk=new WeakMap;function bre(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(ka(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&_W.set(r,t)}).catch(()=>{}),fk.set(e,t),e}function xre(t){if(sP.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sP.set(t,e)}let aP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wW.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ka(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _re(t){aP=t(aP)}function wre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(sE(this),e,...r);return wW.set(n,e.sort?e.sort():[e]),ka(n)}:vre().includes(t)?function(...e){return t.apply(sE(this),e),ka(_W.get(this))}:function(...e){return ka(t.apply(sE(this),e))}}function Sre(t){return typeof t=="function"?wre(t):(t instanceof IDBTransaction&&xre(t),yre(t,gre())?new Proxy(t,aP):t)}function ka(t){if(t instanceof IDBRequest)return bre(t);if(oE.has(t))return oE.get(t);const e=Sre(t);return e!==t&&(oE.set(t,e),fk.set(e,t)),e}const sE=t=>fk.get(t);function Ere(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=ka(s);return n&&s.addEventListener("upgradeneeded",l=>{n(ka(s.result),l.oldVersion,l.newVersion,ka(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Are=["get","getKey","getAll","getAllKeys","count"],Cre=["put","add","delete","clear"],aE=new Map;function O2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(aE.get(e))return aE.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Cre.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Are.includes(r)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),i&&l.done]))[0]};return aE.set(e,o),o}_re(t=>({...t,get:(e,r,n)=>O2(e,r)||t.get(e,r,n),has:(e,r)=>!!O2(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Tre(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Tre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lP="@firebase/app",R2="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new uk("@firebase/app"),Ire="@firebase/app-compat",Nre="@firebase/analytics-compat",kre="@firebase/analytics",Ore="@firebase/app-check-compat",Rre="@firebase/app-check",jre="@firebase/auth",$re="@firebase/auth-compat",Dre="@firebase/database",Mre="@firebase/database-compat",Fre="@firebase/functions",Lre="@firebase/functions-compat",Bre="@firebase/installations",Ure="@firebase/installations-compat",Vre="@firebase/messaging",Wre="@firebase/messaging-compat",zre="@firebase/performance",Gre="@firebase/performance-compat",qre="@firebase/remote-config",Hre="@firebase/remote-config-compat",Kre="@firebase/storage",Qre="@firebase/storage-compat",Yre="@firebase/firestore",Xre="@firebase/firestore-compat",Jre="firebase",Zre="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="[DEFAULT]",ene={[lP]:"fire-core",[Ire]:"fire-core-compat",[kre]:"fire-analytics",[Nre]:"fire-analytics-compat",[Rre]:"fire-app-check",[Ore]:"fire-app-check-compat",[jre]:"fire-auth",[$re]:"fire-auth-compat",[Dre]:"fire-rtdb",[Mre]:"fire-rtdb-compat",[Fre]:"fire-fn",[Lre]:"fire-fn-compat",[Bre]:"fire-iid",[Ure]:"fire-iid-compat",[Vre]:"fire-fcm",[Wre]:"fire-fcm-compat",[zre]:"fire-perf",[Gre]:"fire-perf-compat",[qre]:"fire-rc",[Hre]:"fire-rc-compat",[Kre]:"fire-gcs",[Qre]:"fire-gcs-compat",[Yre]:"fire-fst",[Xre]:"fire-fst-compat","fire-js":"fire-js",[Jre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map,uP=new Map;function tne(t,e){try{t.container.addComponent(e)}catch(r){Ec.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Vf(t){const e=t.name;if(uP.has(e))return Ec.debug(`There were multiple attempts to register component ${e}.`),!1;uP.set(e,t);for(const r of Ob.values())tne(r,t);return!0}function dk(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rne={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Oa=new bW("app","Firebase",rne);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nne{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=Zre;function SW(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:cP,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Oa.create("bad-app-name",{appName:String(i)});if(r||(r=mW()),!r)throw Oa.create("no-options");const o=Ob.get(i);if(o){if(oP(r,o.options)&&oP(n,o.config))return o;throw Oa.create("duplicate-app",{appName:i})}const s=new fre(i);for(const l of uP.values())s.addComponent(l);const a=new nne(r,n,s);return Ob.set(i,a),a}function pk(t=cP){const e=Ob.get(t);if(!e&&t===cP&&mW())return SW();if(!e)throw Oa.create("no-app",{appName:t});return e}function Bo(t,e,r){var n;let i=(n=ene[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ec.warn(a.join(" "));return}Vf(new Sc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ine="firebase-heartbeat-database",one=1,bm="firebase-heartbeat-store";let lE=null;function EW(){return lE||(lE=Ere(ine,one,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bm)}catch(r){console.warn(r)}}}}).catch(t=>{throw Oa.create("idb-open",{originalErrorMessage:t.message})})),lE}async function sne(t){try{return await(await EW()).transaction(bm).objectStore(bm).get(AW(t))}catch(e){if(e instanceof Mc)Ec.warn(e.message);else{const r=Oa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ec.warn(r.message)}}}async function j2(t,e){try{const n=(await EW()).transaction(bm,"readwrite");await n.objectStore(bm).put(e,AW(t)),await n.done}catch(r){if(r instanceof Mc)Ec.warn(r.message);else{const n=Oa.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ec.warn(n.message)}}}function AW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ane=1024,lne=30*24*60*60*1e3;class cne{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new fne(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$2();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=lne}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=$2(),{heartbeatsToSend:n,unsentEntries:i}=une(this._heartbeatsCache.heartbeats),o=Nb(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function $2(){return new Date().toISOString().substring(0,10)}function une(t,e=ane){const r=[];let n=t.slice();for(const i of t){const o=r.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),D2(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),D2(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class fne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vW()?Zte().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await sne(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return j2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return j2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function D2(t){return Nb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dne(t){Vf(new Sc("platform-logger",e=>new Pre(e),"PRIVATE")),Vf(new Sc("heartbeat",e=>new cne(e),"PRIVATE")),Bo(lP,R2,t),Bo(lP,R2,"esm2017"),Bo("fire-js","")}dne("");var M2={};const F2="@firebase/database",L2="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CW="";function hne(t){CW=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ur(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:vm(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Xo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pne(e)}}catch{}return new mne},Dl=PW("localStorage"),fP=PW("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new uk("@firebase/database"),yne=function(){let t=1;return function(){return t++}}(),TW=function(t){const e=are(t),r=new sre;r.update(e);const n=r.digest();return sk.encodeByteArray(n)},og=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=og.apply(null,n):typeof n=="object"?e+=ur(n):e+=n,e+=" "}return e};let tc=null,B2=!0;const gne=function(t,e){X(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ju.logLevel=Ye.VERBOSE,tc=Ju.log.bind(Ju),e&&fP.set("logging_enabled",!0)):typeof t=="function"?tc=t:(tc=null,fP.remove("logging_enabled"))},Ur=function(...t){if(B2===!0&&(B2=!1,tc===null&&fP.get("logging_enabled")===!0&&gne(!0)),tc){const e=og.apply(null,t);tc(e)}},sg=function(t){return function(...e){Ur(t,...e)}},dP=function(...t){const e="FIREBASE INTERNAL ERROR: "+og(...t);Ju.error(e)},Cs=function(...t){const e=`FIREBASE FATAL ERROR: ${og(...t)}`;throw Ju.error(e),new Error(e)},Pn=function(...t){const e="FIREBASE WARNING: "+og(...t);Ju.warn(e)},vne=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},bne=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Ac="[MIN_NAME]",Va="[MAX_NAME]",Fc=function(t,e){if(t===e)return 0;if(t===Ac||e===Va)return-1;if(e===Ac||t===Va)return 1;{const r=U2(t),n=U2(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},xne=function(t,e){return t===e?0:t<e?-1:1},Eh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ur(e))},yk=function(t){if(typeof t!="object"||t===null)return ur(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=ur(e[n]),r+=":",r+=yk(t[e[n]]);return r+="}",r},IW=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let i=0;i<r;i+=e)i+e>r?n.push(t.substring(i,r)):n.push(t.substring(i,i+e));return n};function Jr(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const NW=function(t){X(!mk(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let i,o,s,a,l;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=a+n,s=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(o=0,s=Math.round(t/Math.pow(2,1-n-r))));const c=[];for(l=r;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},_ne=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wne=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sne(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const Ene=new RegExp("^-?(0*)\\d{1,10}$"),Ane=-2147483648,Cne=2147483647,U2=function(t){if(Ene.test(t)){const e=Number(t);if(e>=Ane&&e<=Cne)return e}return null},Bd=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Pn("Exception was thrown by user callback.",r),e},Math.floor(0))}},Pne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cp=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ine{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(e)}}class Zu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Zu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="5",kW="v",OW="s",RW="r",jW="f",$W=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DW="ls",MW="p",hP="ac",FW="websocket",LW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,r,n,i,o=!1,s="",a=!1,l=!1){this.secure=r,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function Nne(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function UW(t,e,r){X(typeof e=="string","typeof type must == string"),X(typeof r=="object","typeof params must == object");let n;if(e===FW)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===LW)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Nne(t)&&(r.ns=t.namespace);const i=[];return Jr(r,(o,s)=>{i.push(o+"="+s)}),n+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kne{constructor(){this.counters_={}}incrementCounter(e,r=1){Xo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return Wte(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE={},uE={};function vk(t){const e=t.toString();return cE[e]||(cE[e]=new kne),cE[e]}function One(t,e){const r=t.toString();return uE[r]||(uE[r]=e()),uE[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&Bd(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="start",jne="close",$ne="pLPCommand",Dne="pRTLPCB",VW="id",WW="pw",zW="ser",Mne="cb",Fne="seg",Lne="ts",Bne="d",Une="dframe",GW=1870,qW=30,Vne=GW-qW,Wne=25e3,zne=3e4;class $u{constructor(e,r,n,i,o,s,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sg(e),this.stats_=vk(r),this.urlFn=l=>(this.appCheckToken&&(l[hP]=this.appCheckToken),UW(r,LW,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Rne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zne)),bne(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bk((...o)=>{const[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===V2)this.id=a,this.password=l;else if(s===jne)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[V2]="t",n[zW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Mne]=this.scriptTagHolder.uniqueCallbackIdentifier),n[kW]=gk,this.transportSessionId&&(n[OW]=this.transportSessionId),this.lastSessionId&&(n[DW]=this.lastSessionId),this.applicationId&&(n[MW]=this.applicationId),this.appCheckToken&&(n[hP]=this.appCheckToken),typeof location<"u"&&location.hostname&&$W.test(location.hostname)&&(n[RW]=jW);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$u.forceAllow_=!0}static forceDisallow(){$u.forceDisallow_=!0}static isAvailable(){return $u.forceAllow_?!0:!$u.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_ne()&&!wne()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=ur(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=hW(r),i=IW(n,Vne);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[Une]="t",n[VW]=e,n[WW]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=ur(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class bk{constructor(e,r,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=yne(),window[$ne+this.uniqueCallbackIdentifier]=e,window[Dne+this.uniqueCallbackIdentifier]=r,this.myIFrame=bk.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ur("frame writing exception"),a.stack&&Ur(a.stack),Ur(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ur("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[VW]=this.myID,e[WW]=this.myPW,e[zW]=this.currentSerial;let r=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+qW+n.length<=GW;){const s=this.pendingSegs.shift();n=n+"&"+Fne+i+"="+s.seg+"&"+Lne+i+"="+s.ts+"&"+Bne+i+"="+s.d,i++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},i=setTimeout(n,Math.floor(Wne)),o=()=>{clearTimeout(i),n()};this.addTag(e,o)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Ur("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gne=16384,qne=45e3;let Rb=null;typeof MozWebSocket<"u"?Rb=MozWebSocket:typeof WebSocket<"u"&&(Rb=WebSocket);class Ji{constructor(e,r,n,i,o,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sg(this.connId),this.stats_=vk(r),this.connURL=Ji.connectionURL_(r,s,a,i,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,i,o){const s={};return s[kW]=gk,typeof location<"u"&&location.hostname&&$W.test(location.hostname)&&(s[RW]=jW),r&&(s[OW]=r),n&&(s[DW]=n),i&&(s[hP]=i),o&&(s[MW]=o),UW(e,FW,s)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dl.set("previous_websocket_failure",!0);try{let n;gW(),this.mySock=new Rb(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ji.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Rb!==null&&!Ji.forceDisallow_}static previouslyFailed(){return Dl.isInMemoryStorage||Dl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Dl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=vm(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=ur(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=IW(r,Gne);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qne))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ji.responsesRequiredToBeHealthy=2;Ji.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[$u,Ji]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=Ji&&Ji.isAvailable();let n=r&&!Ji.previouslyFailed();if(e.webSocketOnly&&(r||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Ji];else{const i=this.transports_=[];for(const o of xm.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);xm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xm.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hne=6e4,Kne=5e3,Qne=10*1024,Yne=100*1024,fE="t",W2="d",Xne="s",z2="r",Jne="e",G2="o",q2="a",H2="n",K2="p",Zne="h";class eie{constructor(e,r,n,i,o,s,a,l,c,u){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sg("c:"+this.id+":"),this.transportManager_=new xm(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yne?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Qne?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fE in e){const r=e[fE];r===q2?this.upgradeIfSecondaryHealthy_():r===z2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===G2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=Eh("t",e),n=Eh("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:K2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:q2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:H2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=Eh("t",e),n=Eh("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=Eh(fE,e);if(W2 in e){const n=e[W2];if(r===Zne){const i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(r===H2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===Xne?this.onConnectionShutdown_(n):r===z2?this.onReset_(n):r===Jne?dP("Server Error: "+n):r===G2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dP("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),gk!==n&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Cp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Hne))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Kne))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:K2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{put(e,r,n,i){}merge(e,r,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const i=this.getInitialEvent(e);i&&r.apply(n,i)}off(e,r,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===r&&(!n||n===i[o].context)){i.splice(o,1);return}}validateEventType_(e){X(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends KW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yW()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jb}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=32,Y2=768;let ut=class{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}};function et(){return new ut("")}function je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Wa(t){return t.pieces_.length-t.pieceNum_}function St(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ut(t.pieces_,e)}function xk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tie(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function _m(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function QW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new ut(e,0)}function Ht(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof ut)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&r.push(n[i])}return new ut(r,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function Sn(t,e){const r=je(t),n=je(e);if(r===null)return e;if(r===n)return Sn(St(t),St(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rie(t,e){const r=_m(t,0),n=_m(e,0);for(let i=0;i<r.length&&i<n.length;i++){const o=Fc(r[i],n[i]);if(o!==0)return o}return r.length===n.length?0:r.length<n.length?-1:1}function _k(t,e){if(Wa(t)!==Wa(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function Pi(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(Wa(t)>Wa(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class nie{constructor(e,r){this.errorPrefix_=r,this.parts_=_m(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Ew(this.parts_[n]);YW(this)}}function iie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ew(e),YW(t)}function oie(t){const e=t.parts_.pop();t.byteLength_-=Ew(e),t.parts_.length>0&&(t.byteLength_-=1)}function YW(t){if(t.byteLength_>Y2)throw new Error(t.errorPrefix_+"has a key path longer than "+Y2+" bytes ("+t.byteLength_+").");if(t.parts_.length>Q2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Q2+") or object contains a cycle "+vl(t))}function vl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk extends KW{constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new wk}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=1e3,sie=60*5*1e3,X2=30*1e3,aie=1.3,lie=3e4,cie="server_kill",J2=3;class gs extends HW{constructor(e,r,n,i,o,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=gs.nextPersistentConnectionId_++,this.log_=sg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ah,this.maxReconnectDelay_=sie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!gW())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wk.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&jb.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const i=++this.requestNumber_,o={r:i,a:e,b:r};this.log_(ur(o)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const r=new ng,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(e,r,n,i){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:r,query:e,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+n+" for "+i);const o={p:n},s="q";e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,a=>{const l=a.d,c=a.s;gs.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Xo(e,"w")){const n=Uf(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ire(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=X2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=nre(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,i=>{const o=i.s,s=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,r)}sendUnlisten_(e,r,n,i){this.log_("Unlisten on "+e+" for "+r);const o={p:e},s="n";i&&(o.q=n,o.t=i),this.sendRequest(s,o)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,i){const o={p:r,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{i&&setTimeout(()=>{i(s.s,s.d)},Math.floor(0))})}put(e,r,n,i){this.putInternal("p",e,r,n,i)}merge(e,r,n,i){this.putInternal("m",e,r,n,i)}putInternal(e,r,n,i,o){this.initConnection_();const s={p:r,d:n};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const o=n.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ur(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):dP("Unrecognized action received from server: "+ur(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ah,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ah,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lie&&(this.reconnectDelay_=Ah),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*aie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+gs.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(d){X(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Ur("getToken() completed but was canceled"):(Ur("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new eie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,p=>{Pn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(cie)},o))}catch(d){this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&Pn(d),l())}}}interrupt(e){Ur("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ur("Resuming connection for reason: "+e),delete this.interruptReasons_[e],T2(this.interruptReasons_)&&(this.reconnectDelay_=Ah,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(o=>yk(o)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,r){const n=new ut(e).toString();let i;if(this.listens.has(n)){const o=this.listens.get(n);i=o.get(r),o.delete(r),o.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,r){Ur("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=J2&&(this.reconnectDelay_=X2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Ur("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=J2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+CW.replace(/\./g,"-")]=1,yW()?e["framework.cordova"]=1:Xte()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=jb.getInstance().currentlyOnline();return T2(this.interruptReasons_)&&e}}gs.nextPersistentConnectionId_=0;gs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new De(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new De(Ac,e),i=new De(Ac,r);return this.compare(n,i)!==0}minPost(){return De.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Av;class XW extends Aw{static get __EMPTY_NODE(){return Av}static set __EMPTY_NODE(e){Av=e}compare(e,r){return Fc(e.name,r.name)}isDefinedOn(e){throw Ld("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return De.MIN}maxPost(){return new De(Va,Av)}makePost(e,r){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new De(e,Av)}toString(){return".key"}}const rc=new XW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cv=class{constructor(e,r,n,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=r?n(e.key,r):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Qn=class ep{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??ep.RED,this.left=i??Io.EMPTY_NODE,this.right=o??Io.EMPTY_NODE}copy(e,r,n,i,o){return new ep(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i=i.copy(null,r,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Io.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,i;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return Io.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ep.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ep.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Qn.RED=!0;Qn.BLACK=!1;class uie{copy(e,r,n,i,o){return this}insert(e,r,n){return new Qn(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Io=class P0{constructor(e,r=P0.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new P0(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Qn.BLACK,null,null))}remove(e){return new P0(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qn.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,i=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Cv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new Cv(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new Cv(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new Cv(this.root_,null,this.comparator_,!0,e)}};Io.EMPTY_NODE=new uie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fie(t,e){return Fc(t.name,e.name)}function Sk(t,e){return Fc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pP;function die(t){pP=t}const JW=function(t){return typeof t=="number"?"number:"+NW(t):"string:"+t},ZW=function(t){if(t.isLeafNode()){const e=t.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Xo(e,".sv"),"Priority must be a string or number.")}else X(t===pP||t.isEmpty(),"priority of unexpected type.");X(t===pP||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2;class Er{constructor(e,r=Er.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ZW(this.priorityNode_)}static set __childrenNodeConstructor(e){Z2=e}static get __childrenNodeConstructor(){return Z2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Er(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Er.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:je(e)===".priority"?this.priorityNode_:Er.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Er.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=je(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(X(n!==".priority"||Wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Er.__childrenNodeConstructor.EMPTY_NODE.updateChild(St(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+JW(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=NW(this.value_):e+=this.value_,this.lazyHash_=TW(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Er.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Er.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,i=Er.VALUE_TYPE_ORDER.indexOf(r),o=Er.VALUE_TYPE_ORDER.indexOf(n);return X(i>=0,"Unknown leaf type: "+r),X(o>=0,"Unknown leaf type: "+n),i===o?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Er.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e8,t8;function hie(t){e8=t}function pie(t){t8=t}class mie extends Aw{compare(e,r){const n=e.node.getPriority(),i=r.node.getPriority(),o=n.compareTo(i);return o===0?Fc(e.name,r.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return De.MIN}maxPost(){return new De(Va,new Er("[PRIORITY-POST]",t8))}makePost(e,r){const n=e8(e);return new De(r,new Er("[PRIORITY-POST]",n))}toString(){return".priority"}}const Lt=new mie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yie=Math.log(2);class gie{constructor(e){const r=o=>parseInt(Math.log(o)/yie,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $b=function(t,e,r,n){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=r?r(d):d,new Qn(h,d.node,Qn.BLACK,null,null);{const p=parseInt(u/2,10)+l,m=i(l,p),y=i(p+1,c);return d=t[p],h=r?r(d):d,new Qn(h,d.node,Qn.BLACK,m,y)}},o=function(l){let c=null,u=null,d=t.length;const h=function(m,y){const g=d-m,b=d;d-=m;const v=i(g+1,b),x=t[g],S=r?r(x):x;p(new Qn(S,x.node,y,null,v))},p=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<l.count;++m){const y=l.nextBitIsOne(),g=Math.pow(2,l.count-(m+1));y?h(g,Qn.BLACK):(h(g,Qn.BLACK),h(g,Qn.RED))}return u},s=new gie(t.length),a=o(s);return new Io(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dE;const Qc={};class us{constructor(e,r){this.indexes_=e,this.indexSet_=r}static get Default(){return X(Qc&&Lt,"ChildrenNode.ts has not been loaded"),dE=dE||new us({".priority":Qc},{".priority":Lt}),dE}get(e){const r=Uf(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Io?r:null}hasIndex(e){return Xo(this.indexSet_,e.toString())}addIndex(e,r){X(e!==rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const o=r.getIterator(De.Wrap);let s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),n.push(s),s=o.getNext();let a;i?a=$b(n,e.getCompare()):a=Qc;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new us(u,c)}addToIndexes(e,r){const n=kb(this.indexes_,(i,o)=>{const s=Uf(this.indexSet_,o);if(X(s,"Missing index implementation for "+o),i===Qc)if(s.isDefinedOn(e.node)){const a=[],l=r.getIterator(De.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),$b(a,s.getCompare())}else return Qc;else{const a=r.get(e.name);let l=i;return a&&(l=l.remove(new De(e.name,a))),l.insert(e,e.node)}});return new us(n,this.indexSet_)}removeFromIndexes(e,r){const n=kb(this.indexes_,i=>{if(i===Qc)return i;{const o=r.get(e.name);return o?i.remove(new De(e.name,o)):i}});return new us(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch;class _e{constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ZW(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ch||(Ch=new _e(new Io(Sk),null,us.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ch}updatePriority(e){return this.children_.isEmpty()?this:new _e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Ch:r}}getChild(e){const r=je(e);return r===null?this:this.getImmediateChild(r).getChild(St(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(X(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new De(e,r);let i,o;r.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,r),o=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?Ch:this.priorityNode_;return new _e(i,s,o)}}updateChild(e,r){const n=je(e);if(n===null)return r;{X(je(e)!==".priority"||Wa(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(St(e),r);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,i=0,o=!0;if(this.forEachChild(Lt,(s,a)=>{r[s]=a.val(e),n++,o&&_e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*n){const s=[];for(const a in r)s[a]=r[a];return s}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+JW(this.getPriority().val())+":"),this.forEachChild(Lt,(r,n)=>{const i=n.hash();i!==""&&(e+=":"+r+":"+i)}),this.lazyHash_=e===""?"":TW(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const i=this.resolveIndex_(n);if(i){const o=i.getPredecessorKey(new De(e,r));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new De(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new De(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>r(i.name,i.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,De.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,De.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ag?-1:0}withIndex(e){if(e===rc||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new _e(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===rc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(Lt),i=r.getIterator(Lt);let o=n.getNext(),s=i.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=n.getNext(),s=i.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===rc?null:this.indexMap_.get(e.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vie extends _e{constructor(){super(new Io(Sk),_e.EMPTY_NODE,us.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}}const ag=new vie;Object.defineProperties(De,{MIN:{value:new De(Ac,_e.EMPTY_NODE)},MAX:{value:new De(Va,ag)}});XW.__EMPTY_NODE=_e.EMPTY_NODE;Er.__childrenNodeConstructor=_e;die(ag);pie(ag);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=!0;function cr(t,e=null){if(t===null)return _e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Er(r,cr(e))}if(!(t instanceof Array)&&bie){const r=[];let n=!1;if(Jr(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=cr(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new De(s,l)))}}),r.length===0)return _e.EMPTY_NODE;const o=$b(r,fie,s=>s.name,Sk);if(n){const s=$b(r,Lt.getCompare());return new _e(o,cr(e),new us({".priority":s},{".priority":Lt}))}else return new _e(o,cr(e),us.Default)}else{let r=_e.EMPTY_NODE;return Jr(t,(n,i)=>{if(Xo(t,n)&&n.substring(0,1)!=="."){const o=cr(i);(o.isLeafNode()||!o.isEmpty())&&(r=r.updateImmediateChild(n,o))}}),r.updatePriority(cr(e))}}hie(cr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends Aw{constructor(e){super(),this.indexPath_=e,X(!$e(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),i=this.extractChild(r.node),o=n.compareTo(i);return o===0?Fc(e.name,r.name):o}makePost(e,r){const n=cr(e),i=_e.EMPTY_NODE.updateChild(this.indexPath_,n);return new De(r,i)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,ag);return new De(Va,e)}toString(){return _m(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xie extends Aw{compare(e,r){const n=e.node.compareTo(r.node);return n===0?Fc(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,r){const n=cr(e);return new De(r,n)}toString(){return".value"}}const r8=new xie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){return{type:"value",snapshotNode:t}}function Wf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function wm(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Sm(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function _ie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.index_=e}updateChild(e,r,n,i,o,s){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(r)?s.trackChildChange(wm(r,a)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Wf(r,n)):s.trackChildChange(Sm(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Lt,(i,o)=>{r.hasChild(i)||n.trackChildChange(wm(i,o))}),r.isLeafNode()||r.forEachChild(Lt,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||n.trackChildChange(Sm(i,o,s))}else n.trackChildChange(Wf(i,o))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?_e.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this.indexedFilter_=new Ak(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Em.getStartPost_(e),this.endPost_=Em.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,i,o,s){return this.matches(new De(r,n))||(n=_e.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,i,o,s)}updateFullNode(e,r,n){r.isLeafNode()&&(r=_e.EMPTY_NODE);let i=r.withIndex(this.index_);i=i.updatePriority(_e.EMPTY_NODE);const o=this;return r.forEachChild(Lt,(s,a)=>{o.matches(new De(s,a))||(i=i.updateImmediateChild(s,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Em(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,i,o,s){return this.rangedFilter_.matches(new De(r,n))||(n=_e.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,i,o,s):this.fullLimitUpdateChild_(e,r,n,o,s)}updateFullNode(e,r,n){let i;if(r.isLeafNode()||r.isEmpty())i=_e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){i=_e.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=r.withIndex(this.index_),i=i.updatePriority(_e.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();const a=e;X(a.numChildren()===this.limit_,"");const l=new De(r,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(r)){const d=a.getImmediateChild(r);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===r||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:s(h,l);if(u&&!n.isEmpty()&&p>=0)return o!=null&&o.trackChildChange(Sm(r,n,d)),a.updateImmediateChild(r,n);{o!=null&&o.trackChildChange(wm(r,d));const y=a.updateImmediateChild(r,_e.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o!=null&&o.trackChildChange(Wf(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return n.isEmpty()?e:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(wm(c.name,c.node)),o.trackChildChange(Wf(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(c.name,_e.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ac}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Va}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lt}copy(){const e=new Ck;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Sie(t){return t.loadsAllData()?new Ak(t.getIndex()):t.hasLimit()?new wie(t):new Em(t)}function Eie(t,e){const r=t.copy();return r.limitSet_=!0,r.limit_=e,r.viewFrom_="r",r}function Aie(t,e,r){const n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,r!=null?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function Cie(t,e,r){const n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,r!==void 0?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function Pie(t,e){const r=t.copy();return r.index_=e,r}function eD(t){const e={};if(t.isDefault())return e;let r;if(t.index_===Lt?r="$priority":t.index_===r8?r="$value":t.index_===rc?r="$key":(X(t.index_ instanceof Ek,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=ur(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=ur(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+ur(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=ur(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+ur(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function tD(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==Lt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends HW{constructor(e,r,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=sg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,r,n,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Db.getListenId_(e,n),a={};this.listens_[s]=a;const l=eD(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,n),Uf(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,r){const n=Db.getListenId_(e,r);delete this.listens_[n]}get(e){const r=eD(e._queryParams),n=e._path.toString(),i=new ng;return this.restRequest_(n+".json",r,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(n,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(r.auth=i.accessToken),o&&o.token&&(r.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ore(r);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=vm(a.responseText)}catch{Pn("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Pn("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return{value:null,children:new Map}}function i8(t,e,r){if($e(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=je(e);t.children.has(n)||t.children.set(n,Mb());const i=t.children.get(n);e=St(e),i8(i,e,r)}}function mP(t,e,r){t.value!==null?r(e,t.value):Iie(t,(n,i)=>{const o=new ut(e.toString()+"/"+n);mP(i,o,r)})}function Iie(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&Jr(this.last_,(n,i)=>{r[n]=r[n]-i}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=10*1e3,kie=30*1e3,Oie=5*60*1e3;class Rie{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Nie(e);const n=rD+(kie-rD)*Math.random();Cp(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;Jr(e,(i,o)=>{o>0&&Xo(this.statsToReport_,i)&&(r[i]=o,n=!0)}),n&&this.server_.reportStats(r),Cp(this.reportStats_.bind(this),Math.floor(Math.random()*2*Oie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var to;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(to||(to={}));function Pk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ik(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=to.ACK_USER_WRITE,this.source=Pk()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ut(e));return new Fb(et(),r,this.revert)}}else return X(je(this.path)===e,"operationForChild called for unrelated child."),new Fb(St(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,r){this.source=e,this.path=r,this.type=to.LISTEN_COMPLETE}operationForChild(e){return $e(this.path)?new Am(this.source,et()):new Am(this.source,St(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=to.OVERWRITE}operationForChild(e){return $e(this.path)?new Cc(this.source,et(),this.snap.getImmediateChild(e)):new Cc(this.source,St(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=to.MERGE}operationForChild(e){if($e(this.path)){const r=this.children.subtree(new ut(e));return r.isEmpty()?null:r.value?new Cc(this.source,et(),r.value):new zf(this.source,et(),r)}else return X(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zf(this.source,St(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const r=je(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $ie(t,e,r,n){const i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(_ie(s.childName,s.snapshotNode))}),Ph(t,i,"child_removed",e,n,r),Ph(t,i,"child_added",e,n,r),Ph(t,i,"child_moved",o,n,r),Ph(t,i,"child_changed",e,n,r),Ph(t,i,"value",e,n,r),i}function Ph(t,e,r,n,i,o){const s=n.filter(a=>a.type===r);s.sort((a,l)=>Mie(t,a,l)),s.forEach(a=>{const l=Die(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Die(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Mie(t,e,r){if(e.childName==null||r.childName==null)throw Ld("Should only compare child_ events.");const n=new De(e.childName,e.snapshotNode),i=new De(r.childName,r.snapshotNode);return t.index_.compare(n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){return{eventCache:t,serverCache:e}}function Pp(t,e,r,n){return Cw(new za(e,r,n),t.serverCache)}function o8(t,e,r,n){return Cw(t.eventCache,new za(e,r,n))}function Lb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Pc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hE;const Fie=()=>(hE||(hE=new Io(xne)),hE);class _t{constructor(e,r=Fie()){this.value=e,this.children=r}static fromObject(e){let r=new _t(null);return Jr(e,(n,i)=>{r=r.set(new ut(n),i)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:et(),value:this.value};if($e(e))return null;{const n=je(e),i=this.children.get(n);if(i!==null){const o=i.findRootMostMatchingPathAndValue(St(e),r);return o!=null?{path:Ht(new ut(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const r=je(e),n=this.children.get(r);return n!==null?n.subtree(St(e)):new _t(null)}}set(e,r){if($e(e))return new _t(r,this.children);{const n=je(e),o=(this.children.get(n)||new _t(null)).set(St(e),r),s=this.children.insert(n,o);return new _t(this.value,s)}}remove(e){if($e(e))return this.children.isEmpty()?new _t(null):new _t(null,this.children);{const r=je(e),n=this.children.get(r);if(n){const i=n.remove(St(e));let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),this.value===null&&o.isEmpty()?new _t(null):new _t(this.value,o)}else return this}}get(e){if($e(e))return this.value;{const r=je(e),n=this.children.get(r);return n?n.get(St(e)):null}}setTree(e,r){if($e(e))return r;{const n=je(e),o=(this.children.get(n)||new _t(null)).setTree(St(e),r);let s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),new _t(this.value,s)}}fold(e){return this.fold_(et(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((i,o)=>{n[i]=o.fold_(Ht(e,i),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,et(),r)}findOnPath_(e,r,n){const i=this.value?n(r,this.value):!1;if(i)return i;if($e(e))return null;{const o=je(e),s=this.children.get(o);return s?s.findOnPath_(St(e),Ht(r,o),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,et(),r)}foreachOnPath_(e,r,n){if($e(e))return this;{this.value&&n(r,this.value);const i=je(e),o=this.children.get(i);return o?o.foreachOnPath_(St(e),Ht(r,i),n):new _t(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,r){this.children.inorderTraversal((n,i)=>{i.foreach_(Ht(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.writeTree_=e}static empty(){return new lo(new _t(null))}}function Tp(t,e,r){if($e(e))return new lo(new _t(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let o=n.value;const s=Sn(i,e);return o=o.updateChild(s,r),new lo(t.writeTree_.set(i,o))}else{const i=new _t(r),o=t.writeTree_.setTree(e,i);return new lo(o)}}}function yP(t,e,r){let n=t;return Jr(r,(i,o)=>{n=Tp(n,Ht(e,i),o)}),n}function nD(t,e){if($e(e))return lo.empty();{const r=t.writeTree_.setTree(e,new _t(null));return new lo(r)}}function gP(t,e){return Lc(t,e)!=null}function Lc(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(Sn(r.path,e)):null}function iD(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Lt,(n,i)=>{e.push(new De(n,i))}):t.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new De(n,i.value))}),e}function Ra(t,e){if($e(e))return t;{const r=Lc(t,e);return r!=null?new lo(new _t(r)):new lo(t.writeTree_.subtree(e))}}function vP(t){return t.writeTree_.isEmpty()}function Gf(t,e){return s8(et(),t.writeTree_,e)}function s8(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(X(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):r=s8(Ht(t,i),o,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Ht(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){return u8(e,t)}function Lie(t,e,r,n,i){X(n>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:i}),i&&(t.visibleWrites=Tp(t.visibleWrites,e,r)),t.lastWriteId=n}function Bie(t,e,r,n){X(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=yP(t.visibleWrites,e,r),t.lastWriteId=n}function Uie(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function Vie(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);X(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let i=n.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=r&&Wie(a,n.path)?i=!1:Pi(n.path,a.path)&&(o=!0)),s--}if(i){if(o)return zie(t),!0;if(n.snap)t.visibleWrites=nD(t.visibleWrites,n.path);else{const a=n.children;Jr(a,l=>{t.visibleWrites=nD(t.visibleWrites,Ht(n.path,l))})}return!0}else return!1}function Wie(t,e){if(t.snap)return Pi(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&Pi(Ht(t.path,r),e))return!0;return!1}function zie(t){t.visibleWrites=a8(t.allWrites,Gie,et()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Gie(t){return t.visible}function a8(t,e,r){let n=lo.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Pi(r,s)?(a=Sn(r,s),n=Tp(n,a,o.snap)):Pi(s,r)&&(a=Sn(s,r),n=Tp(n,et(),o.snap.getChild(a)));else if(o.children){if(Pi(r,s))a=Sn(r,s),n=yP(n,a,o.children);else if(Pi(s,r))if(a=Sn(s,r),$e(a))n=yP(n,et(),o.children);else{const l=Uf(o.children,je(a));if(l){const c=l.getChild(St(a));n=Tp(n,et(),c)}}}else throw Ld("WriteRecord should have .snap or .children")}}return n}function l8(t,e,r,n,i){if(!n&&!i){const o=Lc(t.visibleWrites,e);if(o!=null)return o;{const s=Ra(t.visibleWrites,e);if(vP(s))return r;if(r==null&&!gP(s,et()))return null;{const a=r||_e.EMPTY_NODE;return Gf(s,a)}}}else{const o=Ra(t.visibleWrites,e);if(!i&&vP(o))return r;if(!i&&r==null&&!gP(o,et()))return null;{const s=function(c){return(c.visible||i)&&(!n||!~n.indexOf(c.writeId))&&(Pi(c.path,e)||Pi(e,c.path))},a=a8(t.allWrites,s,e),l=r||_e.EMPTY_NODE;return Gf(a,l)}}}function qie(t,e,r){let n=_e.EMPTY_NODE;const i=Lc(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Lt,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(r){const o=Ra(t.visibleWrites,e);return r.forEachChild(Lt,(s,a)=>{const l=Gf(Ra(o,new ut(s)),a);n=n.updateImmediateChild(s,l)}),iD(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{const o=Ra(t.visibleWrites,e);return iD(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function Hie(t,e,r,n,i){X(n||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ht(e,r);if(gP(t.visibleWrites,o))return null;{const s=Ra(t.visibleWrites,o);return vP(s)?i.getChild(r):Gf(s,i.getChild(r))}}function Kie(t,e,r,n){const i=Ht(e,r),o=Lc(t.visibleWrites,i);if(o!=null)return o;if(n.isCompleteForChild(r)){const s=Ra(t.visibleWrites,i);return Gf(s,n.getNode().getImmediateChild(r))}else return null}function Qie(t,e){return Lc(t.visibleWrites,e)}function Yie(t,e,r,n,i,o,s){let a;const l=Ra(t.visibleWrites,e),c=Lc(l,et());if(c!=null)a=c;else if(r!=null)a=Gf(l,r);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let p=h.getNext();for(;p&&u.length<i;)d(p,n)!==0&&u.push(p),p=h.getNext();return u}else return[]}function Xie(){return{visibleWrites:lo.empty(),allWrites:[],lastWriteId:-1}}function Bb(t,e,r,n){return l8(t.writeTree,t.treePath,e,r,n)}function Nk(t,e){return qie(t.writeTree,t.treePath,e)}function oD(t,e,r,n){return Hie(t.writeTree,t.treePath,e,r,n)}function Ub(t,e){return Qie(t.writeTree,Ht(t.treePath,e))}function Jie(t,e,r,n,i,o){return Yie(t.writeTree,t.treePath,e,r,n,i,o)}function kk(t,e,r){return Kie(t.writeTree,t.treePath,e,r)}function c8(t,e){return u8(Ht(t.treePath,e),t.writeTree)}function u8(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zie{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;X(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),X(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const o=i.type;if(r==="child_added"&&o==="child_removed")this.changeMap.set(n,Sm(n,e.snapshotNode,i.snapshotNode));else if(r==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&o==="child_changed")this.changeMap.set(n,wm(n,i.oldSnap));else if(r==="child_changed"&&o==="child_added")this.changeMap.set(n,Wf(n,e.snapshotNode));else if(r==="child_changed"&&o==="child_changed")this.changeMap.set(n,Sm(n,e.snapshotNode,i.oldSnap));else throw Ld("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eoe{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const f8=new eoe;class Ok{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new za(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kk(this.writes_,e,n)}}getChildAfterChild(e,r,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pc(this.viewCache_),o=Jie(this.writes_,i,r,1,n,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(t){return{filter:t}}function roe(t,e){X(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function noe(t,e,r,n,i){const o=new Zie;let s,a;if(r.type===to.OVERWRITE){const c=r;c.source.fromUser?s=bP(t,e,c.path,c.snap,n,i,o):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),s=Vb(t,e,c.path,c.snap,n,i,a,o))}else if(r.type===to.MERGE){const c=r;c.source.fromUser?s=ooe(t,e,c.path,c.children,n,i,o):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=xP(t,e,c.path,c.children,n,i,a,o))}else if(r.type===to.ACK_USER_WRITE){const c=r;c.revert?s=loe(t,e,c.path,n,i,o):s=soe(t,e,c.path,c.affectedTree,n,i,o)}else if(r.type===to.LISTEN_COMPLETE)s=aoe(t,e,r.path,n,o);else throw Ld("Unknown operation type: "+r.type);const l=o.getChanges();return ioe(e,s,l),{viewCache:s,changes:l}}function ioe(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=Lb(t);(r.length>0||!t.eventCache.isFullyInitialized()||i&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&r.push(n8(Lb(e)))}}function d8(t,e,r,n,i,o){const s=e.eventCache;if(Ub(n,r)!=null)return e;{let a,l;if($e(r))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Pc(e),u=c instanceof _e?c:_e.EMPTY_NODE,d=Nk(n,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const c=Bb(n,Pc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=je(r);if(c===".priority"){X(Wa(r)===1,"Can't have a priority with additional path components");const u=s.getNode();l=e.serverCache.getNode();const d=oD(n,r,u,l);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{const u=St(r);let d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const h=oD(n,r,s.getNode(),l);h!=null?d=s.getNode().getImmediateChild(c).updateChild(u,h):d=s.getNode().getImmediateChild(c)}else d=kk(n,c,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),c,d,u,i,o):a=s.getNode()}}return Pp(e,a,s.isFullyInitialized()||$e(r),t.filter.filtersNodes())}}function Vb(t,e,r,n,i,o,s,a){const l=e.serverCache;let c;const u=s?t.filter:t.filter.getIndexedFilter();if($e(r))c=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(r,n);c=u.updateFullNode(l.getNode(),p,null)}else{const p=je(r);if(!l.isCompleteForPath(r)&&Wa(r)>1)return e;const m=St(r),g=l.getNode().getImmediateChild(p).updateChild(m,n);p===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),p,g,m,f8,null)}const d=o8(e,c,l.isFullyInitialized()||$e(r),u.filtersNodes()),h=new Ok(i,d,o);return d8(t,d,r,i,h,a)}function bP(t,e,r,n,i,o,s){const a=e.eventCache;let l,c;const u=new Ok(i,e,o);if($e(r))c=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=Pp(e,c,!0,t.filter.filtersNodes());else{const d=je(r);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),n),l=Pp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=St(r),p=a.getNode().getImmediateChild(d);let m;if($e(h))m=n;else{const y=u.getCompleteChild(d);y!=null?xk(h)===".priority"&&y.getChild(QW(h)).isEmpty()?m=y:m=y.updateChild(h,n):m=_e.EMPTY_NODE}if(p.equals(m))l=e;else{const y=t.filter.updateChild(a.getNode(),d,m,h,u,s);l=Pp(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function sD(t,e){return t.eventCache.isCompleteForChild(e)}function ooe(t,e,r,n,i,o,s){let a=e;return n.foreach((l,c)=>{const u=Ht(r,l);sD(e,je(u))&&(a=bP(t,a,u,c,i,o,s))}),n.foreach((l,c)=>{const u=Ht(r,l);sD(e,je(u))||(a=bP(t,a,u,c,i,o,s))}),a}function aD(t,e,r){return r.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function xP(t,e,r,n,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(r)?c=n:c=new _t(null).setTree(r,n);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),m=aD(t,p,h);l=Vb(t,l,new ut(d),m,i,o,s,a)}}),c.children.inorderTraversal((d,h)=>{const p=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){const m=e.serverCache.getNode().getImmediateChild(d),y=aD(t,m,h);l=Vb(t,l,new ut(d),y,i,o,s,a)}}),l}function soe(t,e,r,n,i,o,s){if(Ub(i,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if($e(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return Vb(t,e,r,l.getNode().getChild(r),i,o,a,s);if($e(r)){let c=new _t(null);return l.getNode().forEachChild(rc,(u,d)=>{c=c.set(new ut(u),d)}),xP(t,e,r,c,i,o,a,s)}else return e}else{let c=new _t(null);return n.foreach((u,d)=>{const h=Ht(r,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),xP(t,e,r,c,i,o,a,s)}}function aoe(t,e,r,n,i){const o=e.serverCache,s=o8(e,o.getNode(),o.isFullyInitialized()||$e(r),o.isFiltered());return d8(t,s,r,n,f8,i)}function loe(t,e,r,n,i,o){let s;if(Ub(n,r)!=null)return e;{const a=new Ok(n,e,i),l=e.eventCache.getNode();let c;if($e(r)||je(r)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Bb(n,Pc(e));else{const d=e.serverCache.getNode();X(d instanceof _e,"serverChildren would be complete if leaf node"),u=Nk(n,d)}u=u,c=t.filter.updateFullNode(l,u,o)}else{const u=je(r);let d=kk(n,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,St(r),a,o):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,_e.EMPTY_NODE,St(r),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Bb(n,Pc(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Ub(n,et())!=null,Pp(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Ak(n.getIndex()),o=Sie(n);this.processor_=toe(o);const s=r.serverCache,a=r.eventCache,l=i.updateFullNode(_e.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(_e.EMPTY_NODE,a.getNode(),null),u=new za(l,s.isFullyInitialized(),i.filtersNodes()),d=new za(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cw(d,u),this.eventGenerator_=new jie(this.query_)}get query(){return this.query_}}function uoe(t){return t.viewCache_.serverCache.getNode()}function foe(t){return Lb(t.viewCache_)}function doe(t,e){const r=Pc(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!$e(e)&&!r.getImmediateChild(je(e)).isEmpty())?r.getChild(e):null}function lD(t){return t.eventRegistrations_.length===0}function hoe(t,e){t.eventRegistrations_.push(e)}function cD(t,e,r){const n=[];if(r){X(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(r,i);s&&n.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return n}function uD(t,e,r,n){e.type===to.MERGE&&e.source.queryId!==null&&(X(Pc(t.viewCache_),"We should always have a full cache before handling merges"),X(Lb(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=noe(t.processor_,i,e,r,n);return roe(t.processor_,o.viewCache),X(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,h8(t,o.changes,o.viewCache.eventCache.getNode(),null)}function poe(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Lt,(o,s)=>{n.push(Wf(o,s))}),r.isFullyInitialized()&&n.push(n8(r.getNode())),h8(t,n,r.getNode(),e)}function h8(t,e,r,n){const i=n?[n]:t.eventRegistrations_;return $ie(t.eventGenerator_,e,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wb;class p8{constructor(){this.views=new Map}}function moe(t){X(!Wb,"__referenceConstructor has already been defined"),Wb=t}function yoe(){return X(Wb,"Reference.ts has not been loaded"),Wb}function goe(t){return t.views.size===0}function Rk(t,e,r,n){const i=e.source.queryId;if(i!==null){const o=t.views.get(i);return X(o!=null,"SyncTree gave us an op for an invalid query."),uD(o,e,r,n)}else{let o=[];for(const s of t.views.values())o=o.concat(uD(s,e,r,n));return o}}function m8(t,e,r,n,i){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Bb(r,i?n:null),l=!1;a?l=!0:n instanceof _e?(a=Nk(r,n),l=!1):(a=_e.EMPTY_NODE,l=!1);const c=Cw(new za(a,l,!1),new za(n,i,!1));return new coe(e,c)}return s}function voe(t,e,r,n,i,o){const s=m8(t,e,n,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),hoe(s,r),poe(s,r)}function boe(t,e,r,n){const i=e._queryIdentifier,o=[];let s=[];const a=Ga(t);if(i==="default")for(const[l,c]of t.views.entries())s=s.concat(cD(c,r,n)),lD(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(cD(l,r,n)),lD(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Ga(t)&&o.push(new(yoe())(e._repo,e._path)),{removed:o,events:s}}function y8(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function ja(t,e){let r=null;for(const n of t.views.values())r=r||doe(n,e);return r}function g8(t,e){if(e._queryParams.loadsAllData())return Tw(t);{const n=e._queryIdentifier;return t.views.get(n)}}function v8(t,e){return g8(t,e)!=null}function Ga(t){return Tw(t)!=null}function Tw(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zb;function xoe(t){X(!zb,"__referenceConstructor has already been defined"),zb=t}function _oe(){return X(zb,"Reference.ts has not been loaded"),zb}let woe=1;class fD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _t(null),this.pendingWriteTree_=Xie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function b8(t,e,r,n,i){return Lie(t.pendingWriteTree_,e,r,n,i),i?Ud(t,new Cc(Pk(),e,r)):[]}function Soe(t,e,r,n){Bie(t.pendingWriteTree_,e,r,n);const i=_t.fromObject(r);return Ud(t,new zf(Pk(),e,i))}function ha(t,e,r=!1){const n=Uie(t.pendingWriteTree_,e);if(Vie(t.pendingWriteTree_,e)){let o=new _t(null);return n.snap!=null?o=o.set(et(),!0):Jr(n.children,s=>{o=o.set(new ut(s),!0)}),Ud(t,new Fb(n.path,o,r))}else return[]}function lg(t,e,r){return Ud(t,new Cc(Tk(),e,r))}function Eoe(t,e,r){const n=_t.fromObject(r);return Ud(t,new zf(Tk(),e,n))}function Aoe(t,e){return Ud(t,new Am(Tk(),e))}function Coe(t,e,r){const n=$k(t,r);if(n){const i=Dk(n),o=i.path,s=i.queryId,a=Sn(o,e),l=new Am(Ik(s),a);return Mk(t,o,l)}else return[]}function Gb(t,e,r,n,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&(e._queryIdentifier==="default"||v8(s,e))){const l=boe(s,e,r,n);goe(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(h,p)=>Ga(p));if(u&&!d){const h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){const p=Ioe(h);for(let m=0;m<p.length;++m){const y=p[m],g=y.query,b=S8(t,y);t.listenProvider_.startListening(Ip(g),Cm(t,g),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!n&&(u?t.listenProvider_.stopListening(Ip(e),null):c.forEach(h=>{const p=t.queryToTagMap.get(Iw(h));t.listenProvider_.stopListening(Ip(h),p)}))}Noe(t,c)}return a}function x8(t,e,r,n){const i=$k(t,n);if(i!=null){const o=Dk(i),s=o.path,a=o.queryId,l=Sn(s,e),c=new Cc(Ik(a),l,r);return Mk(t,s,c)}else return[]}function Poe(t,e,r,n){const i=$k(t,n);if(i){const o=Dk(i),s=o.path,a=o.queryId,l=Sn(s,e),c=_t.fromObject(r),u=new zf(Ik(a),l,c);return Mk(t,s,u)}else return[]}function _P(t,e,r,n=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,p)=>{const m=Sn(h,i);o=o||ja(p,m),s=s||Ga(p)});let a=t.syncPointTree_.get(i);a?(s=s||Ga(a),o=o||ja(a,et())):(a=new p8,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=_e.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const y=ja(m,et());y&&(o=o.updateImmediateChild(p,y))}));const c=v8(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Iw(e);X(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=koe();t.queryToTagMap.set(h,p),t.tagToQueryMap.set(p,h)}const u=Pw(t.pendingWriteTree_,i);let d=voe(a,e,r,u,o,l);if(!c&&!s&&!n){const h=g8(a,e);d=d.concat(Ooe(t,e,h))}return d}function jk(t,e,r){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=Sn(s,e),c=ja(a,l);if(c)return c});return l8(i,e,o,r,!0)}function Toe(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(c,u)=>{const d=Sn(c,r);n=n||ja(u,d)});let i=t.syncPointTree_.get(r);i?n=n||ja(i,et()):(i=new p8,t.syncPointTree_=t.syncPointTree_.set(r,i));const o=n!=null,s=o?new za(n,!0,!1):null,a=Pw(t.pendingWriteTree_,e._path),l=m8(i,e,a,o?s.getNode():_e.EMPTY_NODE,o);return foe(l)}function Ud(t,e){return _8(e,t.syncPointTree_,null,Pw(t.pendingWriteTree_,et()))}function _8(t,e,r,n){if($e(t.path))return w8(t,e,r,n);{const i=e.get(et());r==null&&i!=null&&(r=ja(i,et()));let o=[];const s=je(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=r?r.getImmediateChild(s):null,u=c8(n,s);o=o.concat(_8(a,l,c,u))}return i&&(o=o.concat(Rk(i,t,n,r))),o}}function w8(t,e,r,n){const i=e.get(et());r==null&&i!=null&&(r=ja(i,et()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=r?r.getImmediateChild(s):null,c=c8(n,s),u=t.operationForChild(s);u&&(o=o.concat(w8(u,a,l,c)))}),i&&(o=o.concat(Rk(i,t,n,r))),o}function S8(t,e){const r=e.query,n=Cm(t,r);return{hashFn:()=>(uoe(e)||_e.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return n?Coe(t,r._path,n):Aoe(t,r._path);{const o=Sne(i,r);return Gb(t,r,null,o)}}}}function Cm(t,e){const r=Iw(e);return t.queryToTagMap.get(r)}function Iw(t){return t._path.toString()+"$"+t._queryIdentifier}function $k(t,e){return t.tagToQueryMap.get(e)}function Dk(t){const e=t.indexOf("$");return X(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}}function Mk(t,e,r){const n=t.syncPointTree_.get(e);X(n,"Missing sync point for query tag that we're tracking");const i=Pw(t.pendingWriteTree_,e);return Rk(n,r,i,null)}function Ioe(t){return t.fold((e,r,n)=>{if(r&&Ga(r))return[Tw(r)];{let i=[];return r&&(i=y8(r)),Jr(n,(o,s)=>{i=i.concat(s)}),i}})}function Ip(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(_oe())(t._repo,t._path):t}function Noe(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const i=Iw(n),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function koe(){return woe++}function Ooe(t,e,r){const n=e._path,i=Cm(t,e),o=S8(t,r),s=t.listenProvider_.startListening(Ip(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(n);if(i)X(!Ga(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!$e(c)&&u&&Ga(u))return[Tw(u).query];{let h=[];return u&&(h=h.concat(y8(u).map(p=>p.query))),Jr(d,(p,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Ip(u),Cm(t,u))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new Fk(r)}node(){return this.node_}}class Lk{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Ht(this.path_,e);return new Lk(this.syncTree_,r)}node(){return jk(this.syncTree_,this.path_)}}const Roe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},dD=function(t,e,r){if(!t||typeof t!="object")return t;if(X(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return joe(t[".sv"],e,r);if(typeof t[".sv"]=="object")return $oe(t[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},joe=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:X(!1,"Unexpected server value: "+t)}},$oe=function(t,e,r){t.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&X(!1,"Unexpected increment value: "+n);const i=e.node();if(X(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const s=i.getValue();return typeof s!="number"?n:s+n},E8=function(t,e,r,n){return Bk(e,new Lk(r,t),n)},A8=function(t,e,r){return Bk(t,new Fk(e),r)};function Bk(t,e,r){const n=t.getPriority().val(),i=dD(n,e.getImmediateChild(".priority"),r);let o;if(t.isLeafNode()){const s=t,a=dD(s.getValue(),e,r);return a!==s.getValue()||i!==s.getPriority().val()?new Er(a,cr(i)):t}else{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Er(i))),s.forEachChild(Lt,(a,l)=>{const c=Bk(l,e.getImmediateChild(a),r);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function Vk(t,e){let r=e instanceof ut?e:new ut(e),n=t,i=je(r);for(;i!==null;){const o=Uf(n.node.children,i)||{children:{},childCount:0};n=new Uk(i,n,o),r=St(r),i=je(r)}return n}function Vd(t){return t.node.value}function C8(t,e){t.node.value=e,wP(t)}function P8(t){return t.node.childCount>0}function Doe(t){return Vd(t)===void 0&&!P8(t)}function Nw(t,e){Jr(t.node.children,(r,n)=>{e(new Uk(r,t,n))})}function T8(t,e,r,n){r&&!n&&e(t),Nw(t,i=>{T8(i,e,!0,n)}),r&&n&&e(t)}function Moe(t,e,r){let n=r?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function cg(t){return new ut(t.parent===null?t.name:cg(t.parent)+"/"+t.name)}function wP(t){t.parent!==null&&Foe(t.parent,t.name,t)}function Foe(t,e,r){const n=Doe(r),i=Xo(t.node.children,e);n&&i?(delete t.node.children[e],t.node.childCount--,wP(t)):!n&&!i&&(t.node.children[e]=r.node,t.node.childCount++,wP(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe=/[\[\].#$\/\u0000-\u001F\u007F]/,Boe=/[\[\].#$\u0000-\u001F\u007F]/,pE=10*1024*1024,kw=function(t){return typeof t=="string"&&t.length!==0&&!Loe.test(t)},I8=function(t){return typeof t=="string"&&t.length!==0&&!Boe.test(t)},Uoe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),I8(t)},SP=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!mk(t)||t&&typeof t=="object"&&Xo(t,".sv")},ug=function(t,e,r,n){n&&e===void 0||Ow(ig(t,"value"),e,r)},Ow=function(t,e,r){const n=r instanceof ut?new nie(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+vl(n));if(typeof e=="function")throw new Error(t+"contains a function "+vl(n)+" with contents = "+e.toString());if(mk(e))throw new Error(t+"contains "+e.toString()+" "+vl(n));if(typeof e=="string"&&e.length>pE/3&&Ew(e)>pE)throw new Error(t+"contains a string greater than "+pE+" utf8 bytes "+vl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Jr(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!kw(s)))throw new Error(t+" contains an invalid key ("+s+") "+vl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);iie(n,s),Ow(t,a,n),oie(n)}),i&&o)throw new Error(t+' contains ".value" child '+vl(n)+" in addition to actual children.")}},Voe=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const o=_m(n);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!kw(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(rie);let i=null;for(r=0;r<e.length;r++){if(n=e[r],i!==null&&Pi(i,n))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},Woe=function(t,e,r,n){if(n&&e===void 0)return;const i=ig(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Jr(e,(s,a)=>{const l=new ut(s);if(Ow(i,a,Ht(r,l)),xk(l)===".priority"&&!SP(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),Voe(i,o)},zoe=function(t,e,r,n){if(!(n&&r===void 0)&&!kw(r))throw new Error(ig(t,e)+'was an invalid key = "'+r+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Wk=function(t,e,r,n){if(!(n&&r===void 0)&&!I8(r))throw new Error(ig(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Goe=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Wk(t,e,r,n)},N8=function(t,e){if(je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},qoe=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!Uoe(r))throw new Error(ig(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rw(t,e){let r=null;for(let n=0;n<e.length;n++){const i=e[n],o=i.getPath();r!==null&&!_k(o,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:o}),r.events.push(i)}r&&t.eventLists_.push(r)}function k8(t,e,r){Rw(t,r),O8(t,n=>_k(n,e))}function Mi(t,e,r){Rw(t,r),O8(t,n=>Pi(n,e)||Pi(e,n))}function O8(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const i=t.eventLists_[n];if(i){const o=i.path;e(o)?(Koe(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function Koe(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();tc&&Ur("event: "+r.toString()),Bd(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qoe="repo_interrupt",Yoe=25;class Xoe{constructor(e,r,n,i){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hoe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Mb(),this.transactionQueueTree_=new Uk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Joe(t,e,r){if(t.stats_=vk(t.repoInfo_),t.forceRestClient_||Pne())t.server_=new Db(t.repoInfo_,(n,i,o,s)=>{hD(t,n,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>pD(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ur(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new gs(t.repoInfo_,e,(n,i,o,s)=>{hD(t,n,i,o,s)},n=>{pD(t,n)},n=>{Zoe(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=One(t.repoInfo_,()=>new Rie(t.stats_,t.server_)),t.infoData_=new Tie,t.infoSyncTree_=new fD({startListening:(n,i,o,s)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=lg(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),zk(t,"connected",!1),t.serverSyncTree_=new fD({startListening:(n,i,o,s)=>(t.server_.listen(n,o,i,(a,l)=>{const c=s(a,l);Mi(t.eventQueue_,n._path,c)}),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function R8(t){const r=t.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function jw(t){return Roe({timestamp:R8(t)})}function hD(t,e,r,n,i){t.dataUpdateCount++;const o=new ut(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let s=[];if(i)if(n){const l=kb(r,c=>cr(c));s=Poe(t.serverSyncTree_,o,l,i)}else{const l=cr(r);s=x8(t.serverSyncTree_,o,l,i)}else if(n){const l=kb(r,c=>cr(c));s=Eoe(t.serverSyncTree_,o,l)}else{const l=cr(r);s=lg(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=qf(t,o)),Mi(t.eventQueue_,a,s)}function pD(t,e){zk(t,"connected",e),e===!1&&nse(t)}function Zoe(t,e){Jr(e,(r,n)=>{zk(t,r,n)})}function zk(t,e,r){const n=new ut("/.info/"+e),i=cr(r);t.infoData_.updateSnapshot(n,i);const o=lg(t.infoSyncTree_,n,i);Mi(t.eventQueue_,n,o)}function Gk(t){return t.nextWriteId_++}function ese(t,e,r){const n=Toe(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(i=>{const o=cr(i).withIndex(e._queryParams.getIndex());_P(t.serverSyncTree_,e,r,!0);let s;if(e._queryParams.loadsAllData())s=lg(t.serverSyncTree_,e._path,o);else{const a=Cm(t.serverSyncTree_,e);s=x8(t.serverSyncTree_,e._path,o,a)}return Mi(t.eventQueue_,e._path,s),Gb(t.serverSyncTree_,e,r,null,!0),o},i=>(fg(t,"get for query "+ur(e)+" failed: "+i),Promise.reject(new Error(i))))}function tse(t,e,r,n,i){fg(t,"set",{path:e.toString(),value:r,priority:n});const o=jw(t),s=cr(r,n),a=jk(t.serverSyncTree_,e),l=A8(s,a,o),c=Gk(t),u=b8(t.serverSyncTree_,e,l,c,!0);Rw(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(h,p)=>{const m=h==="ok";m||Pn("set at "+e+" failed: "+h);const y=ha(t.serverSyncTree_,c,!m);Mi(t.eventQueue_,e,y),EP(t,i,h,p)});const d=Hk(t,e);qf(t,d),Mi(t.eventQueue_,d,[])}function rse(t,e,r,n){fg(t,"update",{path:e.toString(),value:r});let i=!0;const o=jw(t),s={};if(Jr(r,(a,l)=>{i=!1,s[a]=E8(Ht(e,a),cr(l),t.serverSyncTree_,o)}),i)Ur("update() called with empty data.  Don't do anything."),EP(t,n,"ok",void 0);else{const a=Gk(t),l=Soe(t.serverSyncTree_,e,s,a);Rw(t.eventQueue_,l),t.server_.merge(e.toString(),r,(c,u)=>{const d=c==="ok";d||Pn("update at "+e+" failed: "+c);const h=ha(t.serverSyncTree_,a,!d),p=h.length>0?qf(t,e):e;Mi(t.eventQueue_,p,h),EP(t,n,c,u)}),Jr(r,c=>{const u=Hk(t,Ht(e,c));qf(t,u)}),Mi(t.eventQueue_,e,[])}}function nse(t){fg(t,"onDisconnectEvents");const e=jw(t),r=Mb();mP(t.onDisconnect_,et(),(i,o)=>{const s=E8(i,o,t.serverSyncTree_,e);i8(r,i,s)});let n=[];mP(r,et(),(i,o)=>{n=n.concat(lg(t.serverSyncTree_,i,o));const s=Hk(t,i);qf(t,s)}),t.onDisconnect_=Mb(),Mi(t.eventQueue_,et(),n)}function ise(t,e,r){let n;je(e._path)===".info"?n=_P(t.infoSyncTree_,e,r):n=_P(t.serverSyncTree_,e,r),k8(t.eventQueue_,e._path,n)}function mD(t,e,r){let n;je(e._path)===".info"?n=Gb(t.infoSyncTree_,e,r):n=Gb(t.serverSyncTree_,e,r),k8(t.eventQueue_,e._path,n)}function ose(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Qoe)}function fg(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ur(r,...e)}function EP(t,e,r,n){e&&Bd(()=>{if(r==="ok")e(null);else{const i=(r||"error").toUpperCase();let o=i;n&&(o+=": "+n);const s=new Error(o);s.code=i,e(s)}})}function j8(t,e,r){return jk(t.serverSyncTree_,e,r)||_e.EMPTY_NODE}function qk(t,e=t.transactionQueueTree_){if(e||$w(t,e),Vd(e)){const r=D8(t,e);X(r.length>0,"Sending zero length transaction queue"),r.every(i=>i.status===0)&&sse(t,cg(e),r)}else P8(e)&&Nw(e,r=>{qk(t,r)})}function sse(t,e,r){const n=r.map(c=>c.currentWriteId),i=j8(t,e,n);let o=i;const s=i.hash();for(let c=0;c<r.length;c++){const u=r[c];X(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Sn(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{fg(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<r.length;h++)r[h].status=2,u=u.concat(ha(t.serverSyncTree_,r[h].currentWriteId)),r[h].onComplete&&d.push(()=>r[h].onComplete(null,!0,r[h].currentOutputSnapshotResolved)),r[h].unwatcher();$w(t,Vk(t.transactionQueueTree_,e)),qk(t,t.transactionQueueTree_),Mi(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Bd(d[h])}else{if(c==="datastale")for(let d=0;d<r.length;d++)r[d].status===3?r[d].status=4:r[d].status=0;else{Pn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<r.length;d++)r[d].status=4,r[d].abortReason=c}qf(t,e)}},s)}function qf(t,e){const r=$8(t,e),n=cg(r),i=D8(t,r);return ase(t,i,n),n}function ase(t,e,r){if(e.length===0)return;const n=[];let i=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Sn(r,l.path);let u=!1,d;if(X(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(ha(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Yoe)u=!0,d="maxretry",i=i.concat(ha(t.serverSyncTree_,l.currentWriteId,!0));else{const h=j8(t,l.path,s);l.currentInputSnapshot=h;const p=e[a].update(h.val());if(p!==void 0){Ow("transaction failed: Data returned ",p,l.path);let m=cr(p);typeof p=="object"&&p!=null&&Xo(p,".priority")||(m=m.updatePriority(h.getPriority()));const g=l.currentWriteId,b=jw(t),v=A8(m,h,b);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=v,l.currentWriteId=Gk(t),s.splice(s.indexOf(g),1),i=i.concat(b8(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(ha(t.serverSyncTree_,g,!0))}else u=!0,d="nodata",i=i.concat(ha(t.serverSyncTree_,l.currentWriteId,!0))}Mi(t.eventQueue_,r,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(d),!1,null))))}$w(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Bd(n[a]);qk(t,t.transactionQueueTree_)}function $8(t,e){let r,n=t.transactionQueueTree_;for(r=je(e);r!==null&&Vd(n)===void 0;)n=Vk(n,r),e=St(e),r=je(e);return n}function D8(t,e){const r=[];return M8(t,e,r),r.sort((n,i)=>n.order-i.order),r}function M8(t,e,r){const n=Vd(e);if(n)for(let i=0;i<n.length;i++)r.push(n[i]);Nw(e,i=>{M8(t,i,r)})}function $w(t,e){const r=Vd(e);if(r){let n=0;for(let i=0;i<r.length;i++)r[i].status!==2&&(r[n]=r[i],n++);r.length=n,C8(e,r.length>0?r:void 0)}Nw(e,n=>{$w(t,n)})}function Hk(t,e){const r=cg($8(t,e)),n=Vk(t.transactionQueueTree_,e);return Moe(n,i=>{mE(t,i)}),mE(t,n),T8(n,i=>{mE(t,i)}),r}function mE(t,e){const r=Vd(e);if(r){const n=[];let i=[],o=-1;for(let s=0;s<r.length;s++)r[s].status===3||(r[s].status===1?(X(o===s-1,"All SENT items should be at beginning of queue."),o=s,r[s].status=3,r[s].abortReason="set"):(X(r[s].status===0,"Unexpected transaction status in abort"),r[s].unwatcher(),i=i.concat(ha(t.serverSyncTree_,r[s].currentWriteId,!0)),r[s].onComplete&&n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?C8(e,void 0):r.length=o+1,Mi(t.eventQueue_,cg(e),i);for(let s=0;s<n.length;s++)Bd(n[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lse(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let i=r[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function cse(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Pn(`Invalid query segment '${r}' in query '${t}'`)}return e}const yD=function(t,e){const r=use(t),n=r.namespace;r.domain==="firebase.com"&&Cs(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Cs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||vne();const i=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new BW(r.host,r.secure,n,i,e,"",n!==r.subdomain),path:new ut(r.pathString)}},use=function(t){let e="",r="",n="",i="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=lse(t.substring(u,d)));const h=cse(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")r="localhost";else if(p.split(".").length<=2)r=p;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),r=e.substring(m+1),o=n}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fse=function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=gD.charAt(r%64),r=Math.floor(r/64);X(r===0,"Cannot push at time == 0");let s=o.join("");if(n){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=gD.charAt(e[i]);return X(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,r,n,i){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ur(this.snapshot.exportVal())}}class L8{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,r,n,i){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=i}get key(){return $e(this._path)?null:xk(this._path)}get ref(){return new Jo(this._repo,this._path)}get _queryIdentifier(){const e=tD(this._queryParams),r=yk(e);return r==="{}"?"default":r}get _queryObject(){return tD(this._queryParams)}isEqual(e){if(e=Xr(e),!(e instanceof Bc))return!1;const r=this._repo===e._repo,n=_k(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return r&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+tie(this._path)}}function dse(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Kk(t){let e=null,r=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===rc){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ac)throw new Error(n);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Va)throw new Error(n);if(typeof r!="string")throw new Error(i)}}else if(t.getIndex()===Lt){if(e!=null&&!SP(e)||r!=null&&!SP(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(X(t.getIndex()instanceof Ek||t.getIndex()===r8,"unknown index type."),e!=null&&typeof e=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function U8(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Jo extends Bc{constructor(e,r){super(e,r,new Ck,!1)}get parent(){const e=QW(this._path);return e===null?null:new Jo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hf{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new ut(e),n=Kf(this.ref,e);return new Hf(this._node.getChild(r),n,Lt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,i)=>e(new Hf(i,Kf(this.ref,n),Lt)))}hasChild(e){const r=new ut(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tp(t,e){return t=Xr(t),t._checkNotDeleted("ref"),e!==void 0?Kf(t._root,e):t._root}function Kf(t,e){return t=Xr(t),je(t._path)===null?Goe("child","path",e,!1):Wk("child","path",e,!1),new Jo(t._repo,Ht(t._path,e))}function V8(t,e){t=Xr(t),N8("push",t._path),ug("push",e,t._path,!0);const r=R8(t._repo),n=fse(r),i=Kf(t,n),o=Kf(t,n);let s;return e!=null?s=Qk(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Qk(t,e){t=Xr(t),N8("set",t._path),ug("set",e,t._path,!1);const r=new ng;return tse(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}function W8(t,e){Woe("update",e,t._path,!1);const r=new ng;return rse(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function z8(t){t=Xr(t);const e=new B8(()=>{}),r=new Dw(e);return ese(t._repo,t,r).then(n=>new Hf(n,new Jo(t._repo,t._path),t._queryParams.getIndex()))}class Dw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new F8("value",this,new Hf(e.snapshotNode,new Jo(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new L8(this,e,r):null}matches(e){return e instanceof Dw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Yk{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new L8(this,e,r):null}createEvent(e,r){X(e.childName!=null,"Child events should have a childName.");const n=Kf(new Jo(r._repo,r._path),e.childName),i=r._queryParams.getIndex();return new F8(e.type,this,new Hf(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Yk?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function hse(t,e,r,n,i){let o;if(typeof n=="object"&&(o=void 0,i=n),typeof n=="function"&&(o=n),i&&i.onlyOnce){const l=r,c=(u,d)=>{mD(t._repo,t,a),l(u,d)};c.userCallback=r.userCallback,c.context=r.context,r=c}const s=new B8(r,o||void 0),a=e==="value"?new Dw(s):new Yk(e,s);return ise(t._repo,t,a),()=>mD(t._repo,t,a)}function pse(t,e,r,n){return hse(t,"value",e,r,n)}class dg{}class mse extends dg{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){ug("endAt",this._value,e._path,!0);const r=Cie(e._queryParams,this._value,this._key);if(U8(r),Kk(r),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Bc(e._repo,e._path,r,e._orderByCalled)}}class yse extends dg{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){ug("startAt",this._value,e._path,!0);const r=Aie(e._queryParams,this._value,this._key);if(U8(r),Kk(r),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Bc(e._repo,e._path,r,e._orderByCalled)}}class gse extends dg{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Bc(e._repo,e._path,Eie(e._queryParams,this._limit),e._orderByCalled)}}function vse(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gse(t)}class bse extends dg{constructor(e){super(),this._path=e}_apply(e){dse(e,"orderByChild");const r=new ut(this._path);if($e(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Ek(r),i=Pie(e._queryParams,n);return Kk(i),new Bc(e._repo,e._path,i,!0)}}function xse(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Wk("orderByChild","path",t,!1),new bse(t)}class _se extends dg{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){if(ug("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mse(this._value,this._key)._apply(new yse(this._value,this._key)._apply(e))}}function wse(t,e){return zoe("equalTo","key",e,!0),new _se(t,e)}function Sse(t,...e){let r=Xr(t);for(const n of e)r=n._apply(r);return r}moe(Jo);xoe(Jo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ese="FIREBASE_DATABASE_EMULATOR_HOST",AP={};let Ase=!1;function Cse(t,e,r,n){t.repoInfo_=new BW(`${e}:${r}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function Pse(t,e,r,n,i){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||Cs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ur("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=yD(o,i),a=s.repoInfo,l,c;typeof process<"u"&&M2&&(c=M2[Ese]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=yD(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const u=i&&l?new Zu(Zu.OWNER):new Ine(t.name,t.options,e);qoe("Invalid Firebase Database URL",s),$e(s.path)||Cs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Ise(a,t,u,new Tne(t.name,r));return new Nse(d,t)}function Tse(t,e){const r=AP[e];(!r||r[t.key]!==t)&&Cs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ose(t),delete r[t.key]}function Ise(t,e,r,n){let i=AP[e.name];i||(i={},AP[e.name]=i);let o=i[t.toURLString()];return o&&Cs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xoe(t,Ase,r,n),i[t.toURLString()]=o,o}class Nse{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Joe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jo(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Tse(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Cs("Cannot call "+e+" on a deleted database.")}}function kse(t=pk(),e){const r=dk(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=lk("database");n&&G8(r,...n)}return r}function G8(t,e,r,n={}){t=Xr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Cs("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&Cs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Zu(Zu.OWNER);else if(n.mockUserToken){const s=typeof n.mockUserToken=="string"?n.mockUserToken:ck(n.mockUserToken,t.app.options.projectId);o=new Zu(s)}Cse(i,e,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ose(t){hne(hk),Vf(new Sc("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Pse(n,i,o,r)},"PUBLIC").setMultipleInstances(!0)),Bo(F2,L2,t),Bo(F2,L2,"esm2017")}gs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};gs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Ose();var vD=Object.prototype.toString,q8=function(e){var r=vD.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&vD.call(e.callee)==="[object Function]"),n},yE,bD;function Rse(){if(bD)return yE;bD=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=q8,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var p=h.constructor;return p&&p.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),d=function(h){if(typeof window>"u"||!u)return l(h);try{return l(h)}catch{return!1}};t=function(p){var m=p!==null&&typeof p=="object",y=r.call(p)==="[object Function]",g=n(p),b=m&&r.call(p)==="[object String]",v=[];if(!m&&!y&&!g)throw new TypeError("Object.keys called on a non-object");var x=s&&y;if(b&&p.length>0&&!e.call(p,0))for(var S=0;S<p.length;++S)v.push(String(S));if(g&&p.length>0)for(var _=0;_<p.length;++_)v.push(String(_));else for(var w in p)!(x&&w==="prototype")&&e.call(p,w)&&v.push(String(w));if(o)for(var A=d(p),C=0;C<a.length;++C)!(A&&a[C]==="constructor")&&e.call(p,a[C])&&v.push(a[C]);return v}}return yE=t,yE}var jse=Array.prototype.slice,$se=q8,xD=Object.keys,T0=xD?function(e){return xD(e)}:Rse(),_D=Object.keys;T0.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return $se(n)?_D(jse.call(n)):_D(n)})}else Object.keys=T0;return Object.keys||T0};var Mw=T0,Fw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0},wD=typeof Symbol<"u"&&Symbol,Dse=Fw,rl=function(){return typeof wD!="function"||typeof Symbol!="function"||typeof wD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Dse()},Mse="Function.prototype.bind called on incompatible ",gE=Array.prototype.slice,Fse=Object.prototype.toString,Lse="[object Function]",Bse=function(e){var r=this;if(typeof r!="function"||Fse.call(r)!==Lse)throw new TypeError(Mse+r);for(var n=gE.call(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,n.concat(gE.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,n.concat(gE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Use=Bse,Xk=Function.prototype.bind||Use,Vse=Xk,Jk=Vse.call(Function.call,Object.prototype.hasOwnProperty),Ke,Qf=SyntaxError,H8=Function,ef=TypeError,vE=function(t){try{return H8('"use strict"; return ('+t+").constructor;")()}catch{}},nc=Object.getOwnPropertyDescriptor;if(nc)try{nc({},"")}catch{nc=null}var bE=function(){throw new ef},Wse=nc?function(){try{return arguments.callee,bE}catch{try{return nc(arguments,"callee").get}catch{return bE}}}():bE,Yc=rl(),Xs=Object.getPrototypeOf||function(t){return t.__proto__},uu={},zse=typeof Uint8Array>"u"?Ke:Xs(Uint8Array),tf={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Yc?Xs([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":uu,"%AsyncGenerator%":uu,"%AsyncGeneratorFunction%":uu,"%AsyncIteratorPrototype%":uu,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":H8,"%GeneratorFunction%":uu,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yc?Xs(Xs([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Yc?Ke:Xs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Yc?Ke:Xs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yc?Xs(""[Symbol.iterator]()):Ke,"%Symbol%":Yc?Symbol:Ke,"%SyntaxError%":Qf,"%ThrowTypeError%":Wse,"%TypedArray%":zse,"%TypeError%":ef,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet},Gse=function t(e){var r;if(e==="%AsyncFunction%")r=vE("async function () {}");else if(e==="%GeneratorFunction%")r=vE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=vE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Xs(i.prototype))}return tf[e]=r,r},SD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hg=Xk,qb=Jk,qse=hg.call(Function.call,Array.prototype.concat),Hse=hg.call(Function.apply,Array.prototype.splice),ED=hg.call(Function.call,String.prototype.replace),Hb=hg.call(Function.call,String.prototype.slice),Kse=hg.call(Function.call,RegExp.prototype.exec),Qse=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Yse=/\\(\\)?/g,Xse=function(e){var r=Hb(e,0,1),n=Hb(e,-1);if(r==="%"&&n!=="%")throw new Qf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Qf("invalid intrinsic syntax, expected opening `%`");var i=[];return ED(e,Qse,function(o,s,a,l){i[i.length]=a?ED(l,Yse,"$1"):s||o}),i},Jse=function(e,r){var n=e,i;if(qb(SD,n)&&(i=SD[n],n="%"+i[0]+"%"),qb(tf,n)){var o=tf[n];if(o===uu&&(o=Gse(n)),typeof o>"u"&&!r)throw new ef("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Qf("intrinsic "+e+" does not exist!")},js=function(e,r){if(typeof e!="string"||e.length===0)throw new ef("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ef('"allowMissing" argument must be a boolean');if(Kse(/^%?[^%]*%?$/,e)===null)throw new Qf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xse(e),i=n.length>0?n[0]:"",o=Jse("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Hse(n,qse([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=Hb(h,0,1),m=Hb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Qf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",qb(tf,s))a=tf[s];else if(a!=null){if(!(h in a)){if(!r)throw new ef("base intrinsic for "+e+" exists, but the property is not available.");return}if(nc&&u+1>=n.length){var y=nc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=qb(a,h),a=a[h];d&&!l&&(tf[s]=a)}}return a},Zse=js,CP=Zse("%Object.defineProperty%",!0),PP=function(){if(CP)try{return CP({},"a",{value:1}),!0}catch{return!1}return!1};PP.hasArrayLengthDefineBug=function(){if(!PP())return null;try{return CP([],"length",{value:1}).length!==1}catch{return!0}};var pg=PP,eae=Mw,tae=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",rae=Object.prototype.toString,nae=Array.prototype.concat,K8=Object.defineProperty,iae=function(t){return typeof t=="function"&&rae.call(t)==="[object Function]"},oae=pg(),Q8=K8&&oae,sae=function(t,e,r,n){e in t&&(!iae(n)||!n())||(Q8?K8(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},Y8=function(t,e){var r=arguments.length>2?arguments[2]:{},n=eae(e);tae&&(n=nae.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)sae(t,n[i],e[n[i]],r[n[i]])};Y8.supportsDescriptors=!!Q8;var Lw=Y8,X8={exports:{}};(function(t){var e=Xk,r=js,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,d.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(X8);var mg=X8.exports,J8=js,Z8=mg,aae=Z8(J8("String.prototype.indexOf")),po=function(e,r){var n=J8(e,!!r);return typeof n=="function"&&aae(e,".prototype.")>-1?Z8(n):n},lae=Mw,e9=Fw(),t9=po,AD=Object,cae=t9("Array.prototype.push"),CD=t9("Object.prototype.propertyIsEnumerable"),uae=e9?Object.getOwnPropertySymbols:null,r9=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=AD(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=AD(arguments[i]),s=lae(o),a=e9&&(Object.getOwnPropertySymbols||uae);if(a)for(var l=a(o),c=0;c<l.length;++c){var u=l[c];CD(o,u)&&cae(s,u)}for(var d=0;d<s.length;++d){var h=s[d];if(CD(o,h)){var p=o[h];n[h]=p}}}return n},xE=r9,fae=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return t!==o},dae=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},n9=function(){return!Object.assign||fae()||dae()?xE:Object.assign},hae=Lw,pae=n9,mae=function(){var e=pae();return hae(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},yae=Lw,gae=mg,vae=r9,i9=n9,bae=mae,xae=gae.apply(i9()),o9=function(e,r){return xae(Object,arguments)};yae(o9,{getPolyfill:i9,implementation:vae,shim:bae});var _ae=o9,PD={foo:{}},wae=Object,Bw=function(){return{__proto__:PD}.foo===PD.foo&&!({__proto__:null}instanceof wae)},Sae="Function.prototype.bind called on incompatible ",Eae=Object.prototype.toString,Aae=Math.max,Cae="[object Function]",TD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Pae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Tae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Iae=function(e){var r=this;if(typeof r!="function"||Eae.apply(r)!==Cae)throw new TypeError(Sae+r);for(var n=Pae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,TD(n,arguments));return Object(u)===u?u:this}return r.apply(e,TD(n,arguments))},s=Aae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Tae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Nae=Iae,s9=Function.prototype.bind||Nae,kae="Function.prototype.bind called on incompatible ",Oae=Object.prototype.toString,Rae=Math.max,jae="[object Function]",ID=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},$ae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Dae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Mae=function(e){var r=this;if(typeof r!="function"||Oae.apply(r)!==jae)throw new TypeError(kae+r);for(var n=$ae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,ID(n,arguments));return Object(u)===u?u:this}return r.apply(e,ID(n,arguments))},s=Rae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Dae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Fae=Mae,Lae=Function.prototype.bind||Fae,Bae=Function.prototype.call,Uae=Object.prototype.hasOwnProperty,Vae=Lae,Uw=Vae.call(Bae,Uae),Fe,Yf=SyntaxError,a9=Function,rf=TypeError,_E=function(t){try{return a9('"use strict"; return ('+t+").constructor;")()}catch{}},ic=Object.getOwnPropertyDescriptor;if(ic)try{ic({},"")}catch{ic=null}var wE=function(){throw new rf},Wae=ic?function(){try{return arguments.callee,wE}catch{try{return ic(arguments,"callee").get}catch{return wE}}}():wE,Xc=rl(),zae=Bw(),xr=Object.getPrototypeOf||(zae?function(t){return t.__proto__}:null),fu={},Gae=typeof Uint8Array>"u"||!xr?Fe:xr(Uint8Array),oc={"%AggregateError%":typeof AggregateError>"u"?Fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Fe:ArrayBuffer,"%ArrayIteratorPrototype%":Xc&&xr?xr([][Symbol.iterator]()):Fe,"%AsyncFromSyncIteratorPrototype%":Fe,"%AsyncFunction%":fu,"%AsyncGenerator%":fu,"%AsyncGeneratorFunction%":fu,"%AsyncIteratorPrototype%":fu,"%Atomics%":typeof Atomics>"u"?Fe:Atomics,"%BigInt%":typeof BigInt>"u"?Fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Fe:FinalizationRegistry,"%Function%":a9,"%GeneratorFunction%":fu,"%Int8Array%":typeof Int8Array>"u"?Fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xc&&xr?xr(xr([][Symbol.iterator]())):Fe,"%JSON%":typeof JSON=="object"?JSON:Fe,"%Map%":typeof Map>"u"?Fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xc||!xr?Fe:xr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Fe:Promise,"%Proxy%":typeof Proxy>"u"?Fe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xc||!xr?Fe:xr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xc&&xr?xr(""[Symbol.iterator]()):Fe,"%Symbol%":Xc?Symbol:Fe,"%SyntaxError%":Yf,"%ThrowTypeError%":Wae,"%TypedArray%":Gae,"%TypeError%":rf,"%Uint8Array%":typeof Uint8Array>"u"?Fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Fe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Fe:WeakSet};if(xr)try{null.error}catch(t){var qae=xr(xr(t));oc["%Error.prototype%"]=qae}var Hae=function t(e){var r;if(e==="%AsyncFunction%")r=_E("async function () {}");else if(e==="%GeneratorFunction%")r=_E("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=_E("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&xr&&(r=xr(i.prototype))}return oc[e]=r,r},ND={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},yg=s9,Kb=Uw,Kae=yg.call(Function.call,Array.prototype.concat),Qae=yg.call(Function.apply,Array.prototype.splice),kD=yg.call(Function.call,String.prototype.replace),Qb=yg.call(Function.call,String.prototype.slice),Yae=yg.call(Function.call,RegExp.prototype.exec),Xae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Jae=/\\(\\)?/g,Zae=function(e){var r=Qb(e,0,1),n=Qb(e,-1);if(r==="%"&&n!=="%")throw new Yf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Yf("invalid intrinsic syntax, expected opening `%`");var i=[];return kD(e,Xae,function(o,s,a,l){i[i.length]=a?kD(l,Jae,"$1"):s||o}),i},ele=function(e,r){var n=e,i;if(Kb(ND,n)&&(i=ND[n],n="%"+i[0]+"%"),Kb(oc,n)){var o=oc[n];if(o===fu&&(o=Hae(n)),typeof o>"u"&&!r)throw new rf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Yf("intrinsic "+e+" does not exist!")},Vw=function(e,r){if(typeof e!="string"||e.length===0)throw new rf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new rf('"allowMissing" argument must be a boolean');if(Yae(/^%?[^%]*%?$/,e)===null)throw new Yf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Zae(e),i=n.length>0?n[0]:"",o=ele("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Qae(n,Kae([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=Qb(h,0,1),m=Qb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Yf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Kb(oc,s))a=oc[s];else if(a!=null){if(!(h in a)){if(!r)throw new rf("base intrinsic for "+e+" exists, but the property is not available.");return}if(ic&&u+1>=n.length){var y=ic(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Kb(a,h),a=a[h];d&&!l&&(oc[s]=a)}}return a},l9={exports:{}},tle="Function.prototype.bind called on incompatible ",rle=Object.prototype.toString,nle=Math.max,ile="[object Function]",OD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},ole=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},sle=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},ale=function(e){var r=this;if(typeof r!="function"||rle.apply(r)!==ile)throw new TypeError(tle+r);for(var n=ole(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,OD(n,arguments));return Object(u)===u?u:this}return r.apply(e,OD(n,arguments))},s=nle(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+sle(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},lle=ale,cle=Function.prototype.bind||lle,Le,Xf=SyntaxError,c9=Function,nf=TypeError,SE=function(t){try{return c9('"use strict"; return ('+t+").constructor;")()}catch{}},sc=Object.getOwnPropertyDescriptor;if(sc)try{sc({},"")}catch{sc=null}var EE=function(){throw new nf},ule=sc?function(){try{return arguments.callee,EE}catch{try{return sc(arguments,"callee").get}catch{return EE}}}():EE,Jc=rl(),fle=Bw(),_r=Object.getPrototypeOf||(fle?function(t){return t.__proto__}:null),du={},dle=typeof Uint8Array>"u"||!_r?Le:_r(Uint8Array),ac={"%AggregateError%":typeof AggregateError>"u"?Le:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Le:ArrayBuffer,"%ArrayIteratorPrototype%":Jc&&_r?_r([][Symbol.iterator]()):Le,"%AsyncFromSyncIteratorPrototype%":Le,"%AsyncFunction%":du,"%AsyncGenerator%":du,"%AsyncGeneratorFunction%":du,"%AsyncIteratorPrototype%":du,"%Atomics%":typeof Atomics>"u"?Le:Atomics,"%BigInt%":typeof BigInt>"u"?Le:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Le:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Le:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Le:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Le:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Le:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Le:FinalizationRegistry,"%Function%":c9,"%GeneratorFunction%":du,"%Int8Array%":typeof Int8Array>"u"?Le:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Le:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Le:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jc&&_r?_r(_r([][Symbol.iterator]())):Le,"%JSON%":typeof JSON=="object"?JSON:Le,"%Map%":typeof Map>"u"?Le:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jc||!_r?Le:_r(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Le:Promise,"%Proxy%":typeof Proxy>"u"?Le:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Le:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Le:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jc||!_r?Le:_r(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Le:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jc&&_r?_r(""[Symbol.iterator]()):Le,"%Symbol%":Jc?Symbol:Le,"%SyntaxError%":Xf,"%ThrowTypeError%":ule,"%TypedArray%":dle,"%TypeError%":nf,"%Uint8Array%":typeof Uint8Array>"u"?Le:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Le:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Le:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Le:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Le:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Le:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Le:WeakSet};if(_r)try{null.error}catch(t){var hle=_r(_r(t));ac["%Error.prototype%"]=hle}var ple=function t(e){var r;if(e==="%AsyncFunction%")r=SE("async function () {}");else if(e==="%GeneratorFunction%")r=SE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=SE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_r&&(r=_r(i.prototype))}return ac[e]=r,r},RD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gg=cle,Yb=Uw,mle=gg.call(Function.call,Array.prototype.concat),yle=gg.call(Function.apply,Array.prototype.splice),jD=gg.call(Function.call,String.prototype.replace),Xb=gg.call(Function.call,String.prototype.slice),gle=gg.call(Function.call,RegExp.prototype.exec),vle=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ble=/\\(\\)?/g,xle=function(e){var r=Xb(e,0,1),n=Xb(e,-1);if(r==="%"&&n!=="%")throw new Xf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Xf("invalid intrinsic syntax, expected opening `%`");var i=[];return jD(e,vle,function(o,s,a,l){i[i.length]=a?jD(l,ble,"$1"):s||o}),i},_le=function(e,r){var n=e,i;if(Yb(RD,n)&&(i=RD[n],n="%"+i[0]+"%"),Yb(ac,n)){var o=ac[n];if(o===du&&(o=ple(n)),typeof o>"u"&&!r)throw new nf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Xf("intrinsic "+e+" does not exist!")},wle=function(e,r){if(typeof e!="string"||e.length===0)throw new nf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new nf('"allowMissing" argument must be a boolean');if(gle(/^%?[^%]*%?$/,e)===null)throw new Xf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=xle(e),i=n.length>0?n[0]:"",o=_le("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],yle(n,mle([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=Xb(h,0,1),m=Xb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Xf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Yb(ac,s))a=ac[s];else if(a!=null){if(!(h in a)){if(!r)throw new nf("base intrinsic for "+e+" exists, but the property is not available.");return}if(sc&&u+1>=n.length){var y=sc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Yb(a,h),a=a[h];d&&!l&&(ac[s]=a)}}return a},Sle="Function.prototype.bind called on incompatible ",Ele=Object.prototype.toString,Ale=Math.max,Cle="[object Function]",$D=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Ple=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Tle=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Ile=function(e){var r=this;if(typeof r!="function"||Ele.apply(r)!==Cle)throw new TypeError(Sle+r);for(var n=Ple(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,$D(n,arguments));return Object(u)===u?u:this}return r.apply(e,$D(n,arguments))},s=Ale(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Tle(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Nle=Ile,kle=Function.prototype.bind||Nle,Be,Jf=SyntaxError,u9=Function,of=TypeError,AE=function(t){try{return u9('"use strict"; return ('+t+").constructor;")()}catch{}},lc=Object.getOwnPropertyDescriptor;if(lc)try{lc({},"")}catch{lc=null}var CE=function(){throw new of},Ole=lc?function(){try{return arguments.callee,CE}catch{try{return lc(arguments,"callee").get}catch{return CE}}}():CE,Zc=rl(),Rle=Bw(),wr=Object.getPrototypeOf||(Rle?function(t){return t.__proto__}:null),hu={},jle=typeof Uint8Array>"u"||!wr?Be:wr(Uint8Array),cc={"%AggregateError%":typeof AggregateError>"u"?Be:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Be:ArrayBuffer,"%ArrayIteratorPrototype%":Zc&&wr?wr([][Symbol.iterator]()):Be,"%AsyncFromSyncIteratorPrototype%":Be,"%AsyncFunction%":hu,"%AsyncGenerator%":hu,"%AsyncGeneratorFunction%":hu,"%AsyncIteratorPrototype%":hu,"%Atomics%":typeof Atomics>"u"?Be:Atomics,"%BigInt%":typeof BigInt>"u"?Be:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Be:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Be:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Be:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Be:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Be:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Be:FinalizationRegistry,"%Function%":u9,"%GeneratorFunction%":hu,"%Int8Array%":typeof Int8Array>"u"?Be:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Be:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Be:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Zc&&wr?wr(wr([][Symbol.iterator]())):Be,"%JSON%":typeof JSON=="object"?JSON:Be,"%Map%":typeof Map>"u"?Be:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Zc||!wr?Be:wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Be:Promise,"%Proxy%":typeof Proxy>"u"?Be:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Be:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Be:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Zc||!wr?Be:wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Be:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Zc&&wr?wr(""[Symbol.iterator]()):Be,"%Symbol%":Zc?Symbol:Be,"%SyntaxError%":Jf,"%ThrowTypeError%":Ole,"%TypedArray%":jle,"%TypeError%":of,"%Uint8Array%":typeof Uint8Array>"u"?Be:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Be:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Be:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Be:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Be:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Be:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Be:WeakSet};if(wr)try{null.error}catch(t){var $le=wr(wr(t));cc["%Error.prototype%"]=$le}var Dle=function t(e){var r;if(e==="%AsyncFunction%")r=AE("async function () {}");else if(e==="%GeneratorFunction%")r=AE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=AE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&wr&&(r=wr(i.prototype))}return cc[e]=r,r},DD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vg=kle,Jb=Uw,Mle=vg.call(Function.call,Array.prototype.concat),Fle=vg.call(Function.apply,Array.prototype.splice),MD=vg.call(Function.call,String.prototype.replace),Zb=vg.call(Function.call,String.prototype.slice),Lle=vg.call(Function.call,RegExp.prototype.exec),Ble=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ule=/\\(\\)?/g,Vle=function(e){var r=Zb(e,0,1),n=Zb(e,-1);if(r==="%"&&n!=="%")throw new Jf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Jf("invalid intrinsic syntax, expected opening `%`");var i=[];return MD(e,Ble,function(o,s,a,l){i[i.length]=a?MD(l,Ule,"$1"):s||o}),i},Wle=function(e,r){var n=e,i;if(Jb(DD,n)&&(i=DD[n],n="%"+i[0]+"%"),Jb(cc,n)){var o=cc[n];if(o===hu&&(o=Dle(n)),typeof o>"u"&&!r)throw new of("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Jf("intrinsic "+e+" does not exist!")},zle=function(e,r){if(typeof e!="string"||e.length===0)throw new of("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new of('"allowMissing" argument must be a boolean');if(Lle(/^%?[^%]*%?$/,e)===null)throw new Jf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Vle(e),i=n.length>0?n[0]:"",o=Wle("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Fle(n,Mle([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=Zb(h,0,1),m=Zb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Jf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Jb(cc,s))a=cc[s];else if(a!=null){if(!(h in a)){if(!r)throw new of("base intrinsic for "+e+" exists, but the property is not available.");return}if(lc&&u+1>=n.length){var y=lc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Jb(a,h),a=a[h];d&&!l&&(cc[s]=a)}}return a},Gle=js,I0=Gle("%Object.getOwnPropertyDescriptor%",!0);if(I0)try{I0([],"length")}catch{I0=null}var Ww=I0,qle=pg(),Zk=zle,Np=qle&&Zk("%Object.defineProperty%",!0);if(Np)try{Np({},"a",{value:1})}catch{Np=!1}var Hle=Zk("%SyntaxError%"),eu=Zk("%TypeError%"),FD=Ww,eO=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new eu("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new eu("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new eu("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new eu("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new eu("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new eu("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!FD&&FD(e,r);if(Np)Np(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(a||!i&&!o&&!s)e[r]=n;else throw new Hle("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},f9=wle,LD=eO,Kle=pg(),BD=Ww,UD=f9("%TypeError%"),Qle=f9("%Math.floor%"),d9=function(e,r){if(typeof e!="function")throw new UD("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Qle(r)!==r)throw new UD("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&BD){var s=BD(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(Kle?LD(e,"length",r,!0,!0):LD(e,"length",r)),e};(function(t){var e=s9,r=Vw,n=d9,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(l9);var Yle=l9.exports,h9=Vw,p9=Yle,Xle=p9(h9("String.prototype.indexOf")),Jle=function(e,r){var n=h9(e,!!r);return typeof n=="function"&&Xle(e,".prototype.")>-1?p9(n):n},Zle=Mw,ece=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",tce=Object.prototype.toString,rce=Array.prototype.concat,VD=eO,nce=function(t){return typeof t=="function"&&tce.call(t)==="[object Function]"},m9=pg(),ice=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!nce(n)||!n())return}m9?VD(t,e,r,!0):VD(t,e,r)},y9=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Zle(e);ece&&(n=rce.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)ice(t,n[i],e[n[i]],r[n[i]])};y9.supportsDescriptors=!!m9;var tO=y9,Pm=function(){return typeof(function(){}).name=="string"},kp=Object.getOwnPropertyDescriptor;if(kp)try{kp([],"length")}catch{kp=null}Pm.functionsHaveConfigurableNames=function(){if(!Pm()||!kp)return!1;var e=kp(function(){},"name");return!!e&&!!e.configurable};var oce=Function.prototype.bind;Pm.boundFunctionsHaveNames=function(){return Pm()&&typeof oce=="function"&&(function(){}).bind().name!==""};var sce=Pm,WD=eO,ace=pg(),lce=sce.functionsHaveConfigurableNames(),cce=TypeError,uce=function(e,r){if(typeof e!="function")throw new cce("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||lce)&&(ace?WD(e,"name",r,!0,!0):WD(e,"name",r)),e},fce=uce,dce=Object,hce=TypeError,g9=fce(function(){if(this!=null&&this!==dce(this))throw new hce("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),pce=g9,mce=tO.supportsDescriptors,yce=Object.getOwnPropertyDescriptor,v9=function(){if(mce&&/a/mig.flags==="gim"){var e=yce(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return pce},gce=tO.supportsDescriptors,vce=v9,bce=Object.getOwnPropertyDescriptor,xce=Object.defineProperty,_ce=TypeError,zD=Object.getPrototypeOf,wce=/a/,Sce=function(){if(!gce||!zD)throw new _ce("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=vce(),r=zD(wce),n=bce(r,"flags");return(!n||n.get!==e)&&xce(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},Ece=tO,Ace=mg,Cce=g9,b9=v9,Pce=Sce,x9=Ace(b9());Ece(x9,{getPolyfill:b9,implementation:Cce,shim:Pce});var Tce=x9,N0={exports:{}},Ice=Fw,nl=function(){return Ice()&&!!Symbol.toStringTag},Nce=nl(),kce=po,TP=kce("Object.prototype.toString"),zw=function(e){return Nce&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:TP(e)==="[object Arguments]"},_9=function(e){return zw(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&TP(e)!=="[object Array]"&&TP(e.callee)==="[object Function]"},Oce=function(){return zw(arguments)}();zw.isLegacyArguments=_9;var w9=Oce?zw:_9;const Rce={},jce=Object.freeze(Object.defineProperty({__proto__:null,default:Rce},Symbol.toStringTag,{value:"Module"})),$ce=kJ(jce);var rO=typeof Map=="function"&&Map.prototype,PE=Object.getOwnPropertyDescriptor&&rO?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ex=rO&&PE&&typeof PE.get=="function"?PE.get:null,Dce=rO&&Map.prototype.forEach,nO=typeof Set=="function"&&Set.prototype,TE=Object.getOwnPropertyDescriptor&&nO?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,tx=nO&&TE&&typeof TE.get=="function"?TE.get:null,Mce=nO&&Set.prototype.forEach,Fce=typeof WeakMap=="function"&&WeakMap.prototype,Op=Fce?WeakMap.prototype.has:null,Lce=typeof WeakSet=="function"&&WeakSet.prototype,Rp=Lce?WeakSet.prototype.has:null,Bce=typeof WeakRef=="function"&&WeakRef.prototype,GD=Bce?WeakRef.prototype.deref:null,Uce=Boolean.prototype.valueOf,Vce=Object.prototype.toString,Wce=Function.prototype.toString,zce=String.prototype.match,iO=String.prototype.slice,pa=String.prototype.replace,Gce=String.prototype.toUpperCase,qD=String.prototype.toLowerCase,S9=RegExp.prototype.test,HD=Array.prototype.concat,Eo=Array.prototype.join,qce=Array.prototype.slice,KD=Math.floor,IP=typeof BigInt=="function"?BigInt.prototype.valueOf:null,IE=Object.getOwnPropertySymbols,NP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Zf||!0)?Symbol.toStringTag:null,E9=Object.prototype.propertyIsEnumerable,QD=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function YD(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||S9.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-KD(-t):KD(t);if(n!==t){var i=String(n),o=iO.call(e,i.length+1);return pa.call(i,r,"$&_")+"."+pa.call(pa.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return pa.call(e,r,"$&_")}var kP=$ce,XD=kP.custom,JD=C9(XD)?XD:null,Hce=function t(e,r,n,i){var o=r||{};if(Js(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Js(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Js(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Js(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Js(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return T9(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?YD(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?YD(e,c):c}var u=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return OP(e)?"[Array]":"[Object]";var d=fue(o,n);if(typeof i>"u")i=[];else if(P9(i,e)>=0)return"[Circular]";function h(N,j,L){if(j&&(i=qce.call(i),i.push(j)),L){var U={depth:o.depth};return Js(o,"quoteStyle")&&(U.quoteStyle=o.quoteStyle),t(N,U,n+1,i)}return t(N,o,n+1,i)}if(typeof e=="function"&&!ZD(e)){var p=rue(e),m=Pv(e,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Eo.call(m,", ")+" }":"")}if(C9(e)){var y=Zf?pa.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):NP.call(e);return typeof e=="object"&&!Zf?Th(y):y}if(lue(e)){for(var g="<"+qD.call(String(e.nodeName)),b=e.attributes||[],v=0;v<b.length;v++)g+=" "+b[v].name+"="+A9(Kce(b[v].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+qD.call(String(e.nodeName))+">",g}if(OP(e)){if(e.length===0)return"[]";var x=Pv(e,h);return d&&!uue(x)?"["+RP(x,d)+"]":"[ "+Eo.call(x,", ")+" ]"}if(Yce(e)){var S=Pv(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!E9.call(e,"cause")?"{ ["+String(e)+"] "+Eo.call(HD.call("[cause]: "+h(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Eo.call(S,", ")+" }"}if(typeof e=="object"&&s){if(JD&&typeof e[JD]=="function"&&kP)return kP(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(nue(e)){var _=[];return Dce.call(e,function(N,j){_.push(h(j,e,!0)+" => "+h(N,e))}),eM("Map",ex.call(e),_,d)}if(sue(e)){var w=[];return Mce.call(e,function(N){w.push(h(N,e))}),eM("Set",tx.call(e),w,d)}if(iue(e))return NE("WeakMap");if(aue(e))return NE("WeakSet");if(oue(e))return NE("WeakRef");if(Jce(e))return Th(h(Number(e)));if(eue(e))return Th(h(IP.call(e)));if(Zce(e))return Th(Uce.call(e));if(Xce(e))return Th(h(String(e)));if(!Qce(e)&&!ZD(e)){var A=Pv(e,h),C=QD?QD(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",P=!C&&pn&&Object(e)===e&&pn in e?iO.call(il(e),8,-1):T?"Object":"",I=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",O=I+(P||T?"["+Eo.call(HD.call([],P||[],T||[]),": ")+"] ":"");return A.length===0?O+"{}":d?O+"{"+RP(A,d)+"}":O+"{ "+Eo.call(A,", ")+" }"}return String(e)};function A9(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Kce(t){return pa.call(String(t),/"/g,"&quot;")}function OP(t){return il(t)==="[object Array]"&&(!pn||!(typeof t=="object"&&pn in t))}function Qce(t){return il(t)==="[object Date]"&&(!pn||!(typeof t=="object"&&pn in t))}function ZD(t){return il(t)==="[object RegExp]"&&(!pn||!(typeof t=="object"&&pn in t))}function Yce(t){return il(t)==="[object Error]"&&(!pn||!(typeof t=="object"&&pn in t))}function Xce(t){return il(t)==="[object String]"&&(!pn||!(typeof t=="object"&&pn in t))}function Jce(t){return il(t)==="[object Number]"&&(!pn||!(typeof t=="object"&&pn in t))}function Zce(t){return il(t)==="[object Boolean]"&&(!pn||!(typeof t=="object"&&pn in t))}function C9(t){if(Zf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!NP)return!1;try{return NP.call(t),!0}catch{}return!1}function eue(t){if(!t||typeof t!="object"||!IP)return!1;try{return IP.call(t),!0}catch{}return!1}var tue=Object.prototype.hasOwnProperty||function(t){return t in this};function Js(t,e){return tue.call(t,e)}function il(t){return Vce.call(t)}function rue(t){if(t.name)return t.name;var e=zce.call(Wce.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function P9(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function nue(t){if(!ex||!t||typeof t!="object")return!1;try{ex.call(t);try{tx.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function iue(t){if(!Op||!t||typeof t!="object")return!1;try{Op.call(t,Op);try{Rp.call(t,Rp)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function oue(t){if(!GD||!t||typeof t!="object")return!1;try{return GD.call(t),!0}catch{}return!1}function sue(t){if(!tx||!t||typeof t!="object")return!1;try{tx.call(t);try{ex.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function aue(t){if(!Rp||!t||typeof t!="object")return!1;try{Rp.call(t,Rp);try{Op.call(t,Op)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function lue(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function T9(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return T9(iO.call(t,0,e.maxStringLength),e)+n}var i=pa.call(pa.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,cue);return A9(i,"single",e)}function cue(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Gce.call(e.toString(16))}function Th(t){return"Object("+t+")"}function NE(t){return t+" { ? }"}function eM(t,e,r,n){var i=n?RP(r,n):Eo.call(r,", ");return t+" ("+e+") {"+i+"}"}function uue(t){for(var e=0;e<t.length;e++)if(P9(t[e],`
`)>=0)return!1;return!0}function fue(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Eo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Eo.call(Array(e+1),r)}}function RP(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Eo.call(t,","+r)+`
`+e.prev}function Pv(t,e){var r=OP(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Js(t,i)?e(t[i],t):""}var o=typeof IE=="function"?IE(t):[],s;if(Zf){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)Js(t,l)&&(r&&String(Number(l))===l&&l<t.length||Zf&&s["$"+l]instanceof Symbol||(S9.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof IE=="function")for(var c=0;c<o.length;c++)E9.call(t,o[c])&&n.push("["+e(o[c])+"]: "+e(t[o[c]],t));return n}var oO=js,Wd=po,due=Hce,hue=oO("%TypeError%"),Tv=oO("%WeakMap%",!0),Iv=oO("%Map%",!0),pue=Wd("WeakMap.prototype.get",!0),mue=Wd("WeakMap.prototype.set",!0),yue=Wd("WeakMap.prototype.has",!0),gue=Wd("Map.prototype.get",!0),vue=Wd("Map.prototype.set",!0),bue=Wd("Map.prototype.has",!0),sO=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},xue=function(t,e){var r=sO(t,e);return r&&r.value},_ue=function(t,e,r){var n=sO(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},wue=function(t,e){return!!sO(t,e)},I9=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new hue("Side channel does not contain "+due(o))},get:function(o){if(Tv&&o&&(typeof o=="object"||typeof o=="function")){if(e)return pue(e,o)}else if(Iv){if(r)return gue(r,o)}else if(n)return xue(n,o)},has:function(o){if(Tv&&o&&(typeof o=="object"||typeof o=="function")){if(e)return yue(e,o)}else if(Iv){if(r)return bue(r,o)}else if(n)return wue(n,o);return!1},set:function(o,s){Tv&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Tv),mue(e,o,s)):Iv?(r||(r=new Iv),vue(r,o,s)):(n||(n={key:{},next:null}),_ue(n,o,s))}};return i},Sue=js,Eue=Jk,Ih=I9(),rs=Sue("%TypeError%"),aO={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new rs("`O` is not an object");if(typeof e!="string")throw new rs("`slot` must be a string");if(Ih.assert(t),!aO.has(t,e))throw new rs("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new rs("`O` is not an object");if(typeof e!="string")throw new rs("`slot` must be a string");var r=Ih.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new rs("`O` is not an object");if(typeof e!="string")throw new rs("`slot` must be a string");var r=Ih.get(t);return!!r&&Eue(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new rs("`O` is not an object");if(typeof e!="string")throw new rs("`slot` must be a string");var n=Ih.get(t);n||(n={},Ih.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(aO);var Aue=aO,Nh=Aue,Cue=SyntaxError,tM=typeof StopIteration=="object"?StopIteration:null,Pue=function(e){if(!tM)throw new Cue("this environment lacks StopIteration");Nh.set(e,"[[Done]]",!1);var r={next:function(){var i=Nh.get(this,"[[Iterator]]"),o=Nh.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(Nh.set(i,"[[Done]]",!0),s!==tM)throw s;return{done:!0,value:void 0}}}};return Nh.set(r,"[[Iterator]]",e),r},Tue={}.toString,N9=Array.isArray||function(t){return Tue.call(t)=="[object Array]"},Iue=String.prototype.valueOf,Nue=function(e){try{return Iue.call(e),!0}catch{return!1}},kue=Object.prototype.toString,Oue="[object String]",Rue=nl(),k9=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:Rue?Nue(e):kue.call(e)===Oue},lO=typeof Map=="function"&&Map.prototype?Map:null,jue=typeof Set=="function"&&Set.prototype?Set:null,rx;lO||(rx=function(e){return!1});var O9=lO?Map.prototype.has:null,rM=jue?Set.prototype.has:null;!rx&&!O9&&(rx=function(e){return!1});var R9=rx||function(e){if(!e||typeof e!="object")return!1;try{if(O9.call(e),rM)try{rM.call(e)}catch{return!0}return e instanceof lO}catch{}return!1},$ue=typeof Map=="function"&&Map.prototype?Map:null,cO=typeof Set=="function"&&Set.prototype?Set:null,nx;cO||(nx=function(e){return!1});var nM=$ue?Map.prototype.has:null,j9=cO?Set.prototype.has:null;!nx&&!j9&&(nx=function(e){return!1});var $9=nx||function(e){if(!e||typeof e!="object")return!1;try{if(j9.call(e),nM)try{nM.call(e)}catch{return!0}return e instanceof cO}catch{}return!1},iM=w9,oM=Pue;if(rl()||Fw()){var kE=Symbol.iterator;N0.exports=function(e){if(e!=null&&typeof e[kE]<"u")return e[kE]();if(iM(e))return Array.prototype[kE].call(e)}}else{var Due=N9,Mue=k9,sM=js,Fue=sM("%Map%",!0),Lue=sM("%Set%",!0),Vi=po,aM=Vi("Array.prototype.push"),lM=Vi("String.prototype.charCodeAt"),Bue=Vi("String.prototype.slice"),Uue=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=lM(e,r);if(i<55296||i>56319)return r+1;var o=lM(e,r+1);return o<56320||o>57343?r+1:r+2},OE=function(e){var r=0;return{next:function(){var i=r>=e.length,o;return i||(o=e[r],r+=1),{done:i,value:o}}}},cM=function(e,r){if(Due(e)||iM(e))return OE(e);if(Mue(e)){var n=0;return{next:function(){var o=Uue(e,n),s=Bue(e,n,o);return n=o,{done:o>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!Fue&&!Lue)N0.exports=function(e){if(e!=null)return cM(e,!0)};else{var Vue=R9,Wue=$9,uM=Vi("Map.prototype.forEach",!0),fM=Vi("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var dM=Vi("Map.prototype.iterator",!0),hM=Vi("Set.prototype.iterator",!0);var pM=Vi("Map.prototype.@@iterator",!0)||Vi("Map.prototype._es6-shim iterator_",!0),mM=Vi("Set.prototype.@@iterator",!0)||Vi("Set.prototype._es6-shim iterator_",!0),zue=function(e){if(Vue(e)){if(dM)return oM(dM(e));if(pM)return pM(e);if(uM){var r=[];return uM(e,function(i,o){aM(r,[o,i])}),OE(r)}}if(Wue(e)){if(hM)return oM(hM(e));if(mM)return mM(e);if(fM){var n=[];return fM(e,function(i){aM(n,i)}),OE(n)}}};N0.exports=function(e){return zue(e)||cM(e)}}}var Gue=N0.exports,yM=function(t){return t!==t},D9=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||yM(e)&&yM(r))},que=D9,M9=function(){return typeof Object.is=="function"?Object.is:que},Hue=M9,Kue=Lw,Que=function(){var e=Hue();return Kue(Object,{is:e},{is:function(){return Object.is!==e}}),e},Yue=Lw,Xue=mg,Jue=D9,F9=M9,Zue=Que,L9=Xue(F9(),Object);Yue(L9,{getPolyfill:F9,implementation:Jue,shim:Zue});var efe=L9,B9={exports:{}},tfe="Function.prototype.bind called on incompatible ",RE=Array.prototype.slice,rfe=Object.prototype.toString,nfe="[object Function]",ife=function(e){var r=this;if(typeof r!="function"||rfe.call(r)!==nfe)throw new TypeError(tfe+r);for(var n=RE.call(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,n.concat(RE.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,n.concat(RE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},ofe=ife,U9=Function.prototype.bind||ofe,Qe,ed=SyntaxError,V9=Function,sf=TypeError,jE=function(t){try{return V9('"use strict"; return ('+t+").constructor;")()}catch{}},uc=Object.getOwnPropertyDescriptor;if(uc)try{uc({},"")}catch{uc=null}var $E=function(){throw new sf},sfe=uc?function(){try{return arguments.callee,$E}catch{try{return uc(arguments,"callee").get}catch{return $E}}}():$E,tu=rl(),Zs=Object.getPrototypeOf||function(t){return t.__proto__},pu={},afe=typeof Uint8Array>"u"?Qe:Zs(Uint8Array),af={"%AggregateError%":typeof AggregateError>"u"?Qe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Qe:ArrayBuffer,"%ArrayIteratorPrototype%":tu?Zs([][Symbol.iterator]()):Qe,"%AsyncFromSyncIteratorPrototype%":Qe,"%AsyncFunction%":pu,"%AsyncGenerator%":pu,"%AsyncGeneratorFunction%":pu,"%AsyncIteratorPrototype%":pu,"%Atomics%":typeof Atomics>"u"?Qe:Atomics,"%BigInt%":typeof BigInt>"u"?Qe:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Qe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Qe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Qe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Qe:FinalizationRegistry,"%Function%":V9,"%GeneratorFunction%":pu,"%Int8Array%":typeof Int8Array>"u"?Qe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Qe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Qe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tu?Zs(Zs([][Symbol.iterator]())):Qe,"%JSON%":typeof JSON=="object"?JSON:Qe,"%Map%":typeof Map>"u"?Qe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!tu?Qe:Zs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Qe:Promise,"%Proxy%":typeof Proxy>"u"?Qe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Qe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Qe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!tu?Qe:Zs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Qe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":tu?Zs(""[Symbol.iterator]()):Qe,"%Symbol%":tu?Symbol:Qe,"%SyntaxError%":ed,"%ThrowTypeError%":sfe,"%TypedArray%":afe,"%TypeError%":sf,"%Uint8Array%":typeof Uint8Array>"u"?Qe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Qe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Qe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Qe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Qe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Qe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Qe:WeakSet},lfe=function t(e){var r;if(e==="%AsyncFunction%")r=jE("async function () {}");else if(e==="%GeneratorFunction%")r=jE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=jE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Zs(i.prototype))}return af[e]=r,r},gM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bg=U9,ix=Jk,cfe=bg.call(Function.call,Array.prototype.concat),ufe=bg.call(Function.apply,Array.prototype.splice),vM=bg.call(Function.call,String.prototype.replace),ox=bg.call(Function.call,String.prototype.slice),ffe=bg.call(Function.call,RegExp.prototype.exec),dfe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,hfe=/\\(\\)?/g,pfe=function(e){var r=ox(e,0,1),n=ox(e,-1);if(r==="%"&&n!=="%")throw new ed("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ed("invalid intrinsic syntax, expected opening `%`");var i=[];return vM(e,dfe,function(o,s,a,l){i[i.length]=a?vM(l,hfe,"$1"):s||o}),i},mfe=function(e,r){var n=e,i;if(ix(gM,n)&&(i=gM[n],n="%"+i[0]+"%"),ix(af,n)){var o=af[n];if(o===pu&&(o=lfe(n)),typeof o>"u"&&!r)throw new sf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ed("intrinsic "+e+" does not exist!")},W9=function(e,r){if(typeof e!="string"||e.length===0)throw new sf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new sf('"allowMissing" argument must be a boolean');if(ffe(/^%?[^%]*%?$/,e)===null)throw new ed("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=pfe(e),i=n.length>0?n[0]:"",o=mfe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],ufe(n,cfe([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=ox(h,0,1),m=ox(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new ed("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",ix(af,s))a=af[s];else if(a!=null){if(!(h in a)){if(!r)throw new sf("base intrinsic for "+e+" exists, but the property is not available.");return}if(uc&&u+1>=n.length){var y=uc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=ix(a,h),a=a[h];d&&!l&&(af[s]=a)}}return a};(function(t){var e=U9,r=W9,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,d.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(B9);var z9=B9.exports,G9=W9,q9=z9,yfe=q9(G9("String.prototype.indexOf")),gfe=function(e,r){var n=G9(e,!!r);return typeof n=="function"&&yfe(e,".prototype.")>-1?q9(n):n},H9=Function.prototype.toString,Du=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,jP,k0;if(typeof Du=="function"&&typeof Object.defineProperty=="function")try{jP=Object.defineProperty({},"length",{get:function(){throw k0}}),k0={},Du(function(){throw 42},null,jP)}catch(t){t!==k0&&(Du=null)}else Du=null;var vfe=/^\s*class\b/,$P=function(e){try{var r=H9.call(e);return vfe.test(r)}catch{return!1}},DE=function(e){try{return $P(e)?!1:(H9.call(e),!0)}catch{return!1}},O0=Object.prototype.toString,bfe="[object Object]",xfe="[object Function]",_fe="[object GeneratorFunction]",wfe="[object HTMLAllCollection]",Sfe="[object HTML document.all class]",Efe="[object HTMLCollection]",Afe=typeof Symbol=="function"&&!!Symbol.toStringTag,Cfe=!(0 in[,]),DP=function(){return!1};if(typeof document=="object"){var Pfe=document.all;O0.call(Pfe)===O0.call(document.all)&&(DP=function(e){if((Cfe||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=O0.call(e);return(r===wfe||r===Sfe||r===Efe||r===bfe)&&e("")==null}catch{}return!1})}var Tfe=Du?function(e){if(DP(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Du(e,null,jP)}catch(r){if(r!==k0)return!1}return!$P(e)&&DE(e)}:function(e){if(DP(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Afe)return DE(e);if($P(e))return!1;var r=O0.call(e);return r!==xfe&&r!==_fe&&!/^\[object HTML/.test(r)?!1:DE(e)},Ife=Tfe,Nfe=Object.prototype.toString,K9=Object.prototype.hasOwnProperty,kfe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)K9.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Ofe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Rfe=function(e,r,n){for(var i in e)K9.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},jfe=function(e,r,n){if(!Ife(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Nfe.call(e)==="[object Array]"?kfe(e,r,i):typeof e=="string"?Ofe(e,r,i):Rfe(e,r,i)},Q9=jfe,ME=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],$fe=typeof globalThis>"u"?Ol:globalThis,Y9=function(){for(var e=[],r=0;r<ME.length;r++)typeof $fe[ME[r]]=="function"&&(e[e.length]=ME[r]);return e},X9=Q9,Dfe=Y9,uO=po,Mfe=uO("Object.prototype.toString"),J9=nl(),R0=Ww,Ffe=typeof globalThis>"u"?Ol:globalThis,Z9=Dfe(),Lfe=uO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Bfe=uO("String.prototype.slice"),ez={},FE=Object.getPrototypeOf;J9&&R0&&FE&&X9(Z9,function(t){var e=new Ffe[t];if(Symbol.toStringTag in e){var r=FE(e),n=R0(r,Symbol.toStringTag);if(!n){var i=FE(r);n=R0(i,Symbol.toStringTag)}ez[t]=n.get}});var Ufe=function(e){var r=!1;return X9(ez,function(n,i){if(!r)try{r=n.call(e)===i}catch{}}),r},tz=function(e){if(!e||typeof e!="object")return!1;if(!J9||!(Symbol.toStringTag in e)){var r=Bfe(Mfe(e),8,-1);return Lfe(Z9,r)>-1}return R0?Ufe(e):!1},Vfe=z9,Wfe=gfe,rz=Vw,zfe=tz,bM=rz("ArrayBuffer",!0),xM=rz("Float32Array",!0),j0=Wfe("ArrayBuffer.prototype.byteLength",!0),_M=bM&&!j0&&new bM().slice,wM=_M&&Vfe(_M),Gfe=j0||wM?function(e){if(!e||typeof e!="object")return!1;try{return j0?j0(e):wM(e,0),!0}catch{return!1}}:xM?function(e){try{return new xM(e).buffer===e&&!zfe(e)}catch(r){return typeof e=="object"&&r.name==="RangeError"}}:function(e){return!1},qfe=Date.prototype.getDay,Hfe=function(e){try{return qfe.call(e),!0}catch{return!1}},Kfe=Object.prototype.toString,Qfe="[object Date]",Yfe=nl(),Xfe=function(e){return typeof e!="object"||e===null?!1:Yfe?Hfe(e):Kfe.call(e)===Qfe},MP=po,nz=nl(),iz,oz,FP,LP;if(nz){iz=MP("Object.prototype.hasOwnProperty"),oz=MP("RegExp.prototype.exec"),FP={};var LE=function(){throw FP};LP={toString:LE,valueOf:LE},typeof Symbol.toPrimitive=="symbol"&&(LP[Symbol.toPrimitive]=LE)}var Jfe=MP("Object.prototype.toString"),Zfe=Object.getOwnPropertyDescriptor,ede="[object RegExp]",tde=nz?function(e){if(!e||typeof e!="object")return!1;var r=Zfe(e,"lastIndex"),n=r&&iz(r,"value");if(!n)return!1;try{oz(e,LP)}catch(i){return i===FP}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Jfe(e)===ede},rde=po,SM=rde("SharedArrayBuffer.prototype.byteLength",!0),nde=SM?function(e){if(!e||typeof e!="object")return!1;try{return SM(e),!0}catch{return!1}}:function(e){return!1},ide=Number.prototype.toString,ode=function(e){try{return ide.call(e),!0}catch{return!1}},sde=Object.prototype.toString,ade="[object Number]",lde=nl(),cde=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:lde?ode(e):sde.call(e)===ade},sz=po,ude=sz("Boolean.prototype.toString"),fde=sz("Object.prototype.toString"),dde=function(e){try{return ude(e),!0}catch{return!1}},hde="[object Boolean]",pde=nl(),mde=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:pde&&Symbol.toStringTag in e?dde(e):fde(e)===hde},BP={exports:{}},yde=Object.prototype.toString,gde=rl();if(gde){var vde=Symbol.prototype.toString,bde=/^Symbol\(.*\)$/,xde=function(e){return typeof e.valueOf()!="symbol"?!1:bde.test(vde.call(e))};BP.exports=function(e){if(typeof e=="symbol")return!0;if(yde.call(e)!=="[object Symbol]")return!1;try{return xde(e)}catch{return!1}}}else BP.exports=function(e){return!1};var _de=BP.exports,UP={exports:{}},EM=typeof BigInt<"u"&&BigInt,wde=function(){return typeof EM=="function"&&typeof BigInt=="function"&&typeof EM(42)=="bigint"&&typeof BigInt(42)=="bigint"},Sde=wde();if(Sde){var Ede=BigInt.prototype.valueOf,Ade=function(e){try{return Ede.call(e),!0}catch{}return!1};UP.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:Ade(e)}}else UP.exports=function(e){return!1};var Cde=UP.exports,Pde=k9,Tde=cde,Ide=mde,Nde=_de,kde=Cde,Ode=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(Pde(e))return"String";if(Tde(e))return"Number";if(Ide(e))return"Boolean";if(Nde(e))return"Symbol";if(kde(e))return"BigInt"},sx=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,AM=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,ax;sx||(ax=function(e){return!1});var VP=sx?sx.prototype.has:null,BE=AM?AM.prototype.has:null;!ax&&!VP&&(ax=function(e){return!1});var Rde=ax||function(e){if(!e||typeof e!="object")return!1;try{if(VP.call(e,VP),BE)try{BE.call(e,BE)}catch{return!0}return e instanceof sx}catch{}return!1},WP={exports:{}},jde=js,az=po,$de=jde("%WeakSet%",!0),UE=az("WeakSet.prototype.has",!0);if(UE){var VE=az("WeakMap.prototype.has",!0);WP.exports=function(e){if(!e||typeof e!="object")return!1;try{if(UE(e,UE),VE)try{VE(e,VE)}catch{return!0}return e instanceof $de}catch{}return!1}}else WP.exports=function(e){return!1};var Dde=WP.exports,Mde=R9,Fde=$9,Lde=Rde,Bde=Dde,Ude=function(e){if(e&&typeof e=="object"){if(Mde(e))return"Map";if(Fde(e))return"Set";if(Lde(e))return"WeakMap";if(Bde(e))return"WeakSet"}return!1},lz={exports:{}},Vde="Function.prototype.bind called on incompatible ",Wde=Object.prototype.toString,zde=Math.max,Gde="[object Function]",CM=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},qde=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Hde=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Kde=function(e){var r=this;if(typeof r!="function"||Wde.apply(r)!==Gde)throw new TypeError(Vde+r);for(var n=qde(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,CM(n,arguments));return Object(u)===u?u:this}return r.apply(e,CM(n,arguments))},s=zde(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Hde(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Qde=Kde,cz=Function.prototype.bind||Qde,Ue,td=SyntaxError,uz=Function,lf=TypeError,WE=function(t){try{return uz('"use strict"; return ('+t+").constructor;")()}catch{}},fc=Object.getOwnPropertyDescriptor;if(fc)try{fc({},"")}catch{fc=null}var zE=function(){throw new lf},Yde=fc?function(){try{return arguments.callee,zE}catch{try{return fc(arguments,"callee").get}catch{return zE}}}():zE,ru=rl(),Xde=Bw(),Sr=Object.getPrototypeOf||(Xde?function(t){return t.__proto__}:null),mu={},Jde=typeof Uint8Array>"u"||!Sr?Ue:Sr(Uint8Array),dc={"%AggregateError%":typeof AggregateError>"u"?Ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ue:ArrayBuffer,"%ArrayIteratorPrototype%":ru&&Sr?Sr([][Symbol.iterator]()):Ue,"%AsyncFromSyncIteratorPrototype%":Ue,"%AsyncFunction%":mu,"%AsyncGenerator%":mu,"%AsyncGeneratorFunction%":mu,"%AsyncIteratorPrototype%":mu,"%Atomics%":typeof Atomics>"u"?Ue:Atomics,"%BigInt%":typeof BigInt>"u"?Ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ue:FinalizationRegistry,"%Function%":uz,"%GeneratorFunction%":mu,"%Int8Array%":typeof Int8Array>"u"?Ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ru&&Sr?Sr(Sr([][Symbol.iterator]())):Ue,"%JSON%":typeof JSON=="object"?JSON:Ue,"%Map%":typeof Map>"u"?Ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ru||!Sr?Ue:Sr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ue:Promise,"%Proxy%":typeof Proxy>"u"?Ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ru||!Sr?Ue:Sr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ru&&Sr?Sr(""[Symbol.iterator]()):Ue,"%Symbol%":ru?Symbol:Ue,"%SyntaxError%":td,"%ThrowTypeError%":Yde,"%TypedArray%":Jde,"%TypeError%":lf,"%Uint8Array%":typeof Uint8Array>"u"?Ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ue:WeakSet};if(Sr)try{null.error}catch(t){var Zde=Sr(Sr(t));dc["%Error.prototype%"]=Zde}var ehe=function t(e){var r;if(e==="%AsyncFunction%")r=WE("async function () {}");else if(e==="%GeneratorFunction%")r=WE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=WE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Sr&&(r=Sr(i.prototype))}return dc[e]=r,r},PM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xg=cz,lx=Uw,the=xg.call(Function.call,Array.prototype.concat),rhe=xg.call(Function.apply,Array.prototype.splice),TM=xg.call(Function.call,String.prototype.replace),cx=xg.call(Function.call,String.prototype.slice),nhe=xg.call(Function.call,RegExp.prototype.exec),ihe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ohe=/\\(\\)?/g,she=function(e){var r=cx(e,0,1),n=cx(e,-1);if(r==="%"&&n!=="%")throw new td("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new td("invalid intrinsic syntax, expected opening `%`");var i=[];return TM(e,ihe,function(o,s,a,l){i[i.length]=a?TM(l,ohe,"$1"):s||o}),i},ahe=function(e,r){var n=e,i;if(lx(PM,n)&&(i=PM[n],n="%"+i[0]+"%"),lx(dc,n)){var o=dc[n];if(o===mu&&(o=ehe(n)),typeof o>"u"&&!r)throw new lf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new td("intrinsic "+e+" does not exist!")},fz=function(e,r){if(typeof e!="string"||e.length===0)throw new lf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new lf('"allowMissing" argument must be a boolean');if(nhe(/^%?[^%]*%?$/,e)===null)throw new td("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=she(e),i=n.length>0?n[0]:"",o=ahe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],rhe(n,the([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=cx(h,0,1),m=cx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new td("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",lx(dc,s))a=dc[s];else if(a!=null){if(!(h in a)){if(!r)throw new lf("base intrinsic for "+e+" exists, but the property is not available.");return}if(fc&&u+1>=n.length){var y=fc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=lx(a,h),a=a[h];d&&!l&&(dc[s]=a)}}return a};(function(t){var e=cz,r=fz,n=d9,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(lz);var dz=lz.exports,hz=fz,pz=dz,lhe=pz(hz("String.prototype.indexOf")),che=function(e,r){var n=hz(e,!!r);return typeof n=="function"&&lhe(e,".prototype.")>-1?pz(n):n},ux=Q9,uhe=Y9,IM=dz,fO=che,$0=Ww,fhe=fO("Object.prototype.toString"),mz=nl(),NM=typeof globalThis>"u"?Ol:globalThis,zP=uhe(),dO=fO("String.prototype.slice"),GE=Object.getPrototypeOf,dhe=fO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},fx={__proto__:null};mz&&$0&&GE?ux(zP,function(t){var e=new NM[t];if(Symbol.toStringTag in e){var r=GE(e),n=$0(r,Symbol.toStringTag);if(!n){var i=GE(r);n=$0(i,Symbol.toStringTag)}fx["$"+t]=IM(n.get)}}):ux(zP,function(t){var e=new NM[t],r=e.slice||e.set;r&&(fx["$"+t]=IM(r))});var hhe=function(e){var r=!1;return ux(fx,function(n,i){if(!r)try{"$"+n(e)===i&&(r=dO(i,1))}catch{}}),r},phe=function(e){var r=!1;return ux(fx,function(n,i){if(!r)try{n(e),r=dO(i,1)}catch{}}),r},mhe=function(e){if(!e||typeof e!="object")return!1;if(!mz){var r=dO(fhe(e),8,-1);return dhe(zP,r)>-1?r:r!=="Object"?!1:phe(e)}return $0?hhe(e):null},qE,kM;function yhe(){if(kM)return qE;kM=1;var t=mg,e=po,r=js,n=tz,i=r("ArrayBuffer",!0),o=r("Float32Array",!0),s=e("ArrayBuffer.prototype.byteLength",!0),a=i&&!s&&new i().slice,l=a&&t(a);return qE=s||l?function(u){if(!u||typeof u!="object")return!1;try{return s?s(u):l(u,0),!0}catch{return!1}}:o?function(u){try{return new o(u).buffer===u&&!n(u)}catch{return!1}}:function(u){return!1},qE}var ghe=po,OM=ghe("ArrayBuffer.prototype.byteLength",!0),vhe=yhe(),bhe=function(e){return vhe(e)?OM?OM(e):e.byteLength:NaN},yz=_ae,Zo=Jle,RM=Tce,xhe=Vw,rd=Gue,_he=I9,jM=efe,$M=w9,DM=N9,MM=Gfe,FM=Xfe,LM=tde,BM=nde,UM=Mw,VM=Ode,WM=Ude,zM=mhe,GM=bhe,qM=Zo("SharedArrayBuffer.prototype.byteLength",!0),HM=Zo("Date.prototype.getTime"),HE=Object.getPrototypeOf,KM=Zo("Object.prototype.toString"),dx=xhe("%Set%",!0),GP=Zo("Map.prototype.has",!0),hx=Zo("Map.prototype.get",!0),QM=Zo("Map.prototype.size",!0),px=Zo("Set.prototype.add",!0),gz=Zo("Set.prototype.delete",!0),mx=Zo("Set.prototype.has",!0),D0=Zo("Set.prototype.size",!0);function YM(t,e,r,n){for(var i=rd(t),o;(o=i.next())&&!o.done;)if(co(e,o.value,r,n))return gz(t,o.value),!0;return!1}function vz(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function whe(t,e,r,n,i,o){var s=vz(r);if(s!=null)return s;var a=hx(e,s),l=yz({},i,{strict:!1});return typeof a>"u"&&!GP(e,s)||!co(n,a,l,o)?!1:!GP(t,s)&&co(n,a,l,o)}function She(t,e,r){var n=vz(r);return n??(mx(e,n)&&!mx(t,n))}function XM(t,e,r,n,i,o){for(var s=rd(t),a,l;(a=s.next())&&!a.done;)if(l=a.value,co(r,l,i,o)&&co(n,hx(e,l),i,o))return gz(t,l),!0;return!1}function co(t,e,r,n){var i=r||{};if(i.strict?jM(t,e):t===e)return!0;var o=VM(t),s=VM(e);if(o!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?jM(t,e):t==e;var a=n.has(t),l=n.has(e),c;if(a&&l){if(n.get(t)===n.get(e))return!0}else c={};return a||n.set(t,c),l||n.set(e,c),Che(t,e,i,n)}function JM(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Ehe(t,e,r,n){if(D0(t)!==D0(e))return!1;for(var i=rd(t),o=rd(e),s,a,l;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new dx),px(l,s.value);else if(!mx(e,s.value)){if(r.strict||!She(t,e,s.value))return!1;l||(l=new dx),px(l,s.value)}if(l){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!YM(l,a.value,r.strict,n))return!1}else if(!r.strict&&!mx(t,a.value)&&!YM(l,a.value,r.strict,n))return!1;return D0(l)===0}return!0}function Ahe(t,e,r,n){if(QM(t)!==QM(e))return!1;for(var i=rd(t),o=rd(e),s,a,l,c,u,d;(s=i.next())&&!s.done;)if(c=s.value[0],u=s.value[1],c&&typeof c=="object")l||(l=new dx),px(l,c);else if(d=hx(e,c),typeof d>"u"&&!GP(e,c)||!co(u,d,r,n)){if(r.strict||!whe(t,e,c,u,r,n))return!1;l||(l=new dx),px(l,c)}if(l){for(;(a=o.next())&&!a.done;)if(c=a.value[0],d=a.value[1],c&&typeof c=="object"){if(!XM(l,t,c,d,r,n))return!1}else if(!r.strict&&(!t.has(c)||!co(hx(t,c),d,r,n))&&!XM(l,t,c,d,yz({},r,{strict:!1}),n))return!1;return D0(l)===0}return!0}function Che(t,e,r,n){var i,o;if(typeof t!=typeof e||t==null||e==null||KM(t)!==KM(e)||$M(t)!==$M(e))return!1;var s=DM(t),a=DM(e);if(s!==a)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var u=LM(t),d=LM(e);if(u!==d||(u||d)&&(t.source!==e.source||RM(t)!==RM(e)))return!1;var h=FM(t),p=FM(e);if(h!==p||(h||p)&&HM(t)!==HM(e)||r.strict&&HE&&HE(t)!==HE(e))return!1;var m=zM(t),y=zM(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var g=JM(t),b=JM(e);if(g!==b)return!1;if(g||b){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=MM(t),x=MM(e);if(v!==x)return!1;if(v||x)return GM(t)!==GM(e)?!1:typeof Uint8Array=="function"&&co(new Uint8Array(t),new Uint8Array(e),r,n);var S=BM(t),_=BM(e);if(S!==_)return!1;if(S||_)return qM(t)!==qM(e)?!1:typeof Uint8Array=="function"&&co(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var w=UM(t),A=UM(e);if(w.length!==A.length)return!1;for(w.sort(),A.sort(),i=w.length-1;i>=0;i--)if(w[i]!=A[i])return!1;for(i=w.length-1;i>=0;i--)if(o=w[i],!co(t[o],e[o],r,n))return!1;var C=WM(t),T=WM(e);return C!==T?!1:C==="Set"||T==="Set"?Ehe(t,e,r,n):C==="Map"?Ahe(t,e,r,n):!0}var Phe=function(e,r,n){return co(e,r,n,_he())};const The=ot(Phe),Ihe=(t,e)=>The(t,e);var Nhe="firebase",khe="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bo(Nhe,khe,"app");const Ohe={apiKey:"AIzaSyCa4jaiAOgH5H8B6hSo4DU49WnkpGPeavA",authDomain:"hkmjbs-streaming.firebaseapp.com",databaseURL:"https://hkmjbs-streaming-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hkmjbs-streaming",storageBucket:"hkmjbs-streaming.appspot.com",messagingSenderId:"537815456325",appId:"1:537815456325:web:c387796326f9db2726a12c"},hO=SW(Ohe),yu=kse(hO);window.location.hostname==="localhost"&&G8(yu,"localhost",9e3);const bz={database:yu,get:t=>{const e=tp(yu,t);return z8(e).then(r=>{if(r.exists())return r.val()}).catch(r=>{throw console.error(r),r})},set:(t,e)=>{const r=tp(yu,t);return Qk(r,e).catch(n=>{throw console.error(n),n})},update:(t,e)=>{const r=tp(yu,t);return W8(r,e).catch(n=>{throw console.error(n),n})},push:(t,e)=>{const r=tp(yu,t);return V8(r,e).catch(n=>{throw console.error(n),n})}},pO=E.createContext(bz);function Rhe({children:t}){return f.jsx(pO.Provider,{value:bz,children:t})}const xz=()=>E.useContext(pO),Zr=(t,e)=>{const{database:r}=E.useContext(pO),n=E.useMemo(()=>tp(r,t),[r,t]),[i,o]=E.useState(),[s,a]=E.useState(e),l=E.useCallback(h=>Qk(n,h),[n]),c=E.useCallback(h=>W8(n,h),[n]),u=E.useCallback(h=>V8(n,h),[n]);return E.useEffect(()=>{Ihe(e,s)||a(e)},[s,e]),E.useEffect(()=>{const h=[];s!=null&&s.order&&s.order.byChild&&h.push(xse(s.order.byChild)),s!=null&&s.filter&&(typeof s.filter.equalTo<"u"&&h.push(wse(s.filter.equalTo)),typeof s.filter.limitToLast<"u"&&h.push(vse(s.filter.limitToLast)));const p=h.length>0?Sse(n,...h):n;s!=null&&s.onlyOnce?z8(p).then(m=>{m.exists()&&o(m.val())}):pse(p,m=>{o(m.val())},s??{})},[s,n]),{data:E.useMemo(()=>i,[i]),set:l,update:c,push:u}};var _g=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nd=typeof window>"u"||"Deno"in window;function bi(){}function jhe(t,e){return typeof t=="function"?t(e):t}function qP(t){return typeof t=="number"&&t>=0&&t!==1/0}function _z(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ZM(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(n){if(e.queryHash!==mO(s,e.options))return!1}else if(!Im(e.queryKey,s))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||o&&!o(e))}function eF(t,e){const{exact:r,status:n,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Tm(e.options.mutationKey)!==Tm(o))return!1}else if(!Im(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function mO(t,e){return((e==null?void 0:e.queryKeyHashFn)||Tm)(t)}function Tm(t){return JSON.stringify(t,(e,r)=>KP(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Im(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Im(t[r],e[r])):!1}function wz(t,e){if(t===e)return t;const r=tF(t)&&tF(e);if(r||KP(t)&&KP(e)){const n=r?t:Object.keys(t),i=n.length,o=r?e:Object.keys(e),s=o.length,a=r?[]:{};let l=0;for(let c=0;c<s;c++){const u=r?c:o[c];!r&&t[u]===void 0&&e[u]===void 0&&n.includes(u)?(a[u]=void 0,l++):(a[u]=wz(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return i===s&&l===i?t:a}return e}function HP(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function tF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function KP(t){if(!rF(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!rF(r)||!r.hasOwnProperty("isPrototypeOf"))}function rF(t){return Object.prototype.toString.call(t)==="[object Object]"}function $he(t){return new Promise(e=>{setTimeout(e,t)})}function QP(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?wz(t,e):e}function Dhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Mhe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Gl,ia,vf,FV,Fhe=(FV=class extends _g{constructor(){super();de(this,Gl,void 0);de(this,ia,void 0);de(this,vf,void 0);ae(this,vf,e=>{if(!nd&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){D(this,ia)||this.setEventListener(D(this,vf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,ia))==null||e.call(this),ae(this,ia,void 0))}setEventListener(e){var r;ae(this,vf,e),(r=D(this,ia))==null||r.call(this),ae(this,ia,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,Gl)!==e&&(ae(this,Gl,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof D(this,Gl)=="boolean"?D(this,Gl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gl=new WeakMap,ia=new WeakMap,vf=new WeakMap,FV),yx=new Fhe,bf,oa,xf,LV,Lhe=(LV=class extends _g{constructor(){super();de(this,bf,!0);de(this,oa,void 0);de(this,xf,void 0);ae(this,xf,e=>{if(!nd&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,oa)||this.setEventListener(D(this,xf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,oa))==null||e.call(this),ae(this,oa,void 0))}setEventListener(e){var r;ae(this,xf,e),(r=D(this,oa))==null||r.call(this),ae(this,oa,e(this.setOnline.bind(this)))}setOnline(e){D(this,bf)!==e&&(ae(this,bf,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,bf)}},bf=new WeakMap,oa=new WeakMap,xf=new WeakMap,LV),gx=new Lhe;function Bhe(t){return Math.min(1e3*2**t,3e4)}function Gw(t){return(t??"online")==="online"?gx.isOnline():!0}var Sz=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function KE(t){return t instanceof Sz}function Ez(t){let e=!1,r=0,n=!1,i,o,s;const a=new Promise((g,b)=>{o=g,s=b}),l=g=>{var b;n||(p(new Sz(g)),(b=t.abort)==null||b.call(t))},c=()=>{e=!0},u=()=>{e=!1},d=()=>!yx.isFocused()||t.networkMode!=="always"&&!gx.isOnline(),h=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),i==null||i(),o(g))},p=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),i==null||i(),s(g))},m=()=>new Promise(g=>{var b;i=v=>{const x=n||!d();return x&&g(v),x},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),y=()=>{if(n)return;let g;try{g=t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var w;if(n)return;const v=t.retry??(nd?0:3),x=t.retryDelay??Bhe,S=typeof x=="function"?x(r,b):x,_=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(e||!_){p(b);return}r++,(w=t.onFail)==null||w.call(t,r,b),$he(S).then(()=>{if(d())return m()}).then(()=>{e?p(b):y()})})};return Gw(t.networkMode)?y():m().then(y),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:u}}function Uhe(){let t=[],e=0,r=h=>{h()},n=h=>{h()},i=h=>setTimeout(h,0);const o=h=>{i=h},s=h=>{let p;e++;try{p=h()}finally{e--,e||c()}return p},a=h=>{e?t.push(h):i(()=>{r(h)})},l=h=>(...p)=>{a(()=>{h(...p)})},c=()=>{const h=t;t=[],h.length&&i(()=>{n(()=>{h.forEach(p=>{r(p)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:o}}var Vr=Uhe(),ql,BV,Az=(BV=class{constructor(){de(this,ql,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qP(this.gcTime)&&ae(this,ql,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(nd?1/0:5*60*1e3))}clearGcTimeout(){D(this,ql)&&(clearTimeout(D(this,ql)),ae(this,ql,void 0))}},ql=new WeakMap,BV),_f,wf,yi,sa,gi,vr,Ly,Hl,Sf,M0,Gi,is,UV,Vhe=(UV=class extends Az{constructor(r){super();de(this,Sf);de(this,Gi);de(this,_f,void 0);de(this,wf,void 0);de(this,yi,void 0);de(this,sa,void 0);de(this,gi,void 0);de(this,vr,void 0);de(this,Ly,void 0);de(this,Hl,void 0);ae(this,Hl,!1),ae(this,Ly,r.defaultOptions),Oe(this,Sf,M0).call(this,r.options),ae(this,vr,[]),ae(this,yi,r.cache),this.queryKey=r.queryKey,this.queryHash=r.queryHash,ae(this,_f,r.state||Whe(this.options)),this.state=D(this,_f),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!D(this,vr).length&&this.state.fetchStatus==="idle"&&D(this,yi).remove(this)}setData(r,n){const i=QP(this.state.data,r,this.options);return Oe(this,Gi,is).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(r,n){Oe(this,Gi,is).call(this,{type:"setState",state:r,setStateOptions:n})}cancel(r){var i;const n=D(this,sa);return(i=D(this,gi))==null||i.cancel(r),n?n.then(bi).catch(bi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,_f))}isActive(){return D(this,vr).some(r=>r.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||D(this,vr).some(r=>r.getCurrentResult().isStale)}isStaleByTime(r=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!_z(this.state.dataUpdatedAt,r)}onFocus(){var n;const r=D(this,vr).find(i=>i.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,gi))==null||n.continue()}onOnline(){var n;const r=D(this,vr).find(i=>i.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,gi))==null||n.continue()}addObserver(r){D(this,vr).includes(r)||(D(this,vr).push(r),this.clearGcTimeout(),D(this,yi).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){D(this,vr).includes(r)&&(ae(this,vr,D(this,vr).filter(n=>n!==r)),D(this,vr).length||(D(this,gi)&&(D(this,Hl)?D(this,gi).cancel({revert:!0}):D(this,gi).cancelRetry()),this.scheduleGc()),D(this,yi).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return D(this,vr).length}invalidate(){this.state.isInvalidated||Oe(this,Gi,is).call(this,{type:"invalidate"})}fetch(r,n){var u,d,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,sa))return(u=D(this,gi))==null||u.continueRetry(),D(this,sa)}if(r&&Oe(this,Sf,M0).call(this,r),!this.options.queryFn){const m=D(this,vr).find(y=>y.options.queryFn);m&&Oe(this,Sf,M0).call(this,m.options)}const i=new AbortController,o={queryKey:this.queryKey,meta:this.meta},s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(ae(this,Hl,!0),i.signal)})};s(o);const a=()=>this.options.queryFn?(ae(this,Hl,!1),this.options.persister?this.options.persister(this.options.queryFn,o,this):this.options.queryFn(o)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),(d=this.options.behavior)==null||d.onFetch(l,this),ae(this,wf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Oe(this,Gi,is).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var y,g,b,v;KE(m)&&m.silent||Oe(this,Gi,is).call(this,{type:"error",error:m}),KE(m)||((g=(y=D(this,yi).config).onError)==null||g.call(y,m,this),(v=(b=D(this,yi).config).onSettled)==null||v.call(b,this.state.data,m,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return ae(this,gi,Ez({fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var y,g,b,v;if(typeof m>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(m),(g=(y=D(this,yi).config).onSuccess)==null||g.call(y,m,this),(v=(b=D(this,yi).config).onSettled)==null||v.call(b,m,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(m,y)=>{Oe(this,Gi,is).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Oe(this,Gi,is).call(this,{type:"pause"})},onContinue:()=>{Oe(this,Gi,is).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),ae(this,sa,D(this,gi).promise),D(this,sa)}},_f=new WeakMap,wf=new WeakMap,yi=new WeakMap,sa=new WeakMap,gi=new WeakMap,vr=new WeakMap,Ly=new WeakMap,Hl=new WeakMap,Sf=new WeakSet,M0=function(r){this.options={...D(this,Ly),...r},this.updateGcTime(this.options.gcTime)},Gi=new WeakSet,is=function(r){const n=i=>{switch(r.type){case"failed":return{...i,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:r.meta??null,fetchStatus:Gw(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...i,data:r.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=r.error;return KE(o)&&o.revert&&D(this,wf)?{...D(this,wf),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...r.state}}};this.state=n(this.state),Vr.batch(()=>{D(this,vr).forEach(i=>{i.onQueryUpdate()}),D(this,yi).notify({query:this,type:"updated",action:r})})},UV);function Whe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var xo,VV,zhe=(VV=class extends _g{constructor(e={}){super();de(this,xo,void 0);this.config=e,ae(this,xo,new Map)}build(e,r,n){const i=r.queryKey,o=r.queryHash??mO(i,r);let s=this.get(o);return s||(s=new Vhe({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){D(this,xo).has(e.queryHash)||(D(this,xo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=D(this,xo).get(e.queryHash);r&&(e.destroy(),r===e&&D(this,xo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,xo).get(e)}getAll(){return[...D(this,xo).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ZM(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>ZM(e,n)):r}notify(e){Vr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},xo=new WeakMap,VV),_o,By,Hn,Ef,wo,zs,WV,Ghe=(WV=class extends Az{constructor(r){super();de(this,wo);de(this,_o,void 0);de(this,By,void 0);de(this,Hn,void 0);de(this,Ef,void 0);this.mutationId=r.mutationId,ae(this,By,r.defaultOptions),ae(this,Hn,r.mutationCache),ae(this,_o,[]),this.state=r.state||qhe(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options={...D(this,By),...r},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){D(this,_o).includes(r)||(D(this,_o).push(r),this.clearGcTimeout(),D(this,Hn).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){ae(this,_o,D(this,_o).filter(n=>n!==r)),this.scheduleGc(),D(this,Hn).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){D(this,_o).length||(this.state.status==="pending"?this.scheduleGc():D(this,Hn).remove(this))}continue(){var r;return((r=D(this,Ef))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var o,s,a,l,c,u,d,h,p,m,y,g,b,v,x,S,_,w,A,C;const n=()=>(ae(this,Ef,Ez({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{Oe(this,wo,zs).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{Oe(this,wo,zs).call(this,{type:"pause"})},onContinue:()=>{Oe(this,wo,zs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),D(this,Ef).promise),i=this.state.status==="pending";try{if(!i){Oe(this,wo,zs).call(this,{type:"pending",variables:r}),await((s=(o=D(this,Hn).config).onMutate)==null?void 0:s.call(o,r,this));const P=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,r));P!==this.state.context&&Oe(this,wo,zs).call(this,{type:"pending",context:P,variables:r})}const T=await n();return await((u=(c=D(this,Hn).config).onSuccess)==null?void 0:u.call(c,T,r,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,T,r,this.state.context)),await((m=(p=D(this,Hn).config).onSettled)==null?void 0:m.call(p,T,null,this.state.variables,this.state.context,this)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,T,null,r,this.state.context)),Oe(this,wo,zs).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(b=D(this,Hn).config).onError)==null?void 0:v.call(b,T,r,this.state.context,this)),await((S=(x=this.options).onError)==null?void 0:S.call(x,T,r,this.state.context)),await((w=(_=D(this,Hn).config).onSettled)==null?void 0:w.call(_,void 0,T,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,void 0,T,r,this.state.context)),T}finally{Oe(this,wo,zs).call(this,{type:"error",error:T})}}}},_o=new WeakMap,By=new WeakMap,Hn=new WeakMap,Ef=new WeakMap,wo=new WeakSet,zs=function(r){const n=i=>{switch(r.type){case"failed":return{...i,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Gw(this.options.networkMode),status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...i,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:r.error,failureCount:i.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Vr.batch(()=>{D(this,_o).forEach(i=>{i.onMutationUpdate(r)}),D(this,Hn).notify({mutation:this,type:"updated",action:r})})},WV);function qhe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vi,Uy,Kl,zV,Hhe=(zV=class extends _g{constructor(e={}){super();de(this,vi,void 0);de(this,Uy,void 0);de(this,Kl,void 0);this.config=e,ae(this,vi,[]),ae(this,Uy,0)}build(e,r,n){const i=new Ghe({mutationCache:this,mutationId:++av(this,Uy)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){D(this,vi).push(e),this.notify({type:"added",mutation:e})}remove(e){ae(this,vi,D(this,vi).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){Vr.batch(()=>{D(this,vi).forEach(e=>{this.remove(e)})})}getAll(){return D(this,vi)}find(e){const r={exact:!0,...e};return D(this,vi).find(n=>eF(r,n))}findAll(e={}){return D(this,vi).filter(r=>eF(e,r))}notify(e){Vr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return ae(this,Kl,(D(this,Kl)??Promise.resolve()).then(()=>{const e=D(this,vi).filter(r=>r.state.isPaused);return Vr.batch(()=>e.reduce((r,n)=>r.then(()=>n.continue().catch(bi)),Promise.resolve()))}).then(()=>{ae(this,Kl,void 0)})),D(this,Kl)}},vi=new WeakMap,Uy=new WeakMap,Kl=new WeakMap,zV);function Khe(t){return{onFetch:(e,r)=>{const n=async()=>{var m,y,g,b,v;const i=e.options,o=(g=(y=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,s=((b=e.state.data)==null?void 0:b.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let c=!1;const u=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},d=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),h=async(x,S,_)=>{if(c)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const w={queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};u(w);const A=await d(w),{maxPages:C}=e.options,T=_?Mhe:Dhe;return{pages:T(x.pages,A,C),pageParams:T(x.pageParams,S,C)}};let p;if(o&&s.length){const x=o==="backward",S=x?Qhe:nF,_={pages:s,pageParams:a},w=S(i,_);p=await h(_,w,x)}else{p=await h(l,a[0]??i.initialPageParam);const x=t??s.length;for(let S=1;S<x;S++){const _=nF(i,p);p=await h(p,_)}}return p};e.options.persister?e.fetchFn=()=>{var i,o;return(o=(i=e.options).persister)==null?void 0:o.call(i,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=n}}}function nF(t,{pages:e,pageParams:r}){const n=e.length-1;return t.getNextPageParam(e[n],e,r[n],r)}function Qhe(t,{pages:e,pageParams:r}){var n;return(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r)}var ar,aa,la,Af,Cf,ca,Pf,Tf,GV,Yhe=(GV=class{constructor(t={}){de(this,ar,void 0);de(this,aa,void 0);de(this,la,void 0);de(this,Af,void 0);de(this,Cf,void 0);de(this,ca,void 0);de(this,Pf,void 0);de(this,Tf,void 0);ae(this,ar,t.queryCache||new zhe),ae(this,aa,t.mutationCache||new Hhe),ae(this,la,t.defaultOptions||{}),ae(this,Af,new Map),ae(this,Cf,new Map),ae(this,ca,0)}mount(){av(this,ca)._++,D(this,ca)===1&&(ae(this,Pf,yx.subscribe(()=>{yx.isFocused()&&(this.resumePausedMutations(),D(this,ar).onFocus())})),ae(this,Tf,gx.subscribe(()=>{gx.isOnline()&&(this.resumePausedMutations(),D(this,ar).onOnline())})))}unmount(){var t,e;av(this,ca)._--,D(this,ca)===0&&((t=D(this,Pf))==null||t.call(this),ae(this,Pf,void 0),(e=D(this,Tf))==null||e.call(this),ae(this,Tf,void 0))}isFetching(t){return D(this,ar).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,aa).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=D(this,ar).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=D(this,ar).find({queryKey:t}),i=n==null?void 0:n.state.data,o=jhe(e,i);if(typeof o>"u")return;const s=this.defaultQueryOptions({queryKey:t});return D(this,ar).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Vr.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var e;return(e=D(this,ar).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=D(this,ar);Vr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=D(this,ar),n={type:"active",...t};return Vr.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Vr.batch(()=>D(this,ar).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(bi).catch(bi)}invalidateQueries(t={},e={}){return Vr.batch(()=>{if(D(this,ar).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Vr.batch(()=>D(this,ar).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(bi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(bi)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=D(this,ar).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(bi).catch(bi)}fetchInfiniteQuery(t){return t.behavior=Khe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(bi).catch(bi)}resumePausedMutations(){return D(this,aa).resumePausedMutations()}getQueryCache(){return D(this,ar)}getMutationCache(){return D(this,aa)}getDefaultOptions(){return D(this,la)}setDefaultOptions(t){ae(this,la,t)}setQueryDefaults(t,e){D(this,Af).set(Tm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Af).values()];let r={};return e.forEach(n=>{Im(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){D(this,Cf).set(Tm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,Cf).values()];let r={};return e.forEach(n=>{Im(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...D(this,la).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mO(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,la).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,ar).clear(),D(this,aa).clear()}},ar=new WeakMap,aa=new WeakMap,la=new WeakMap,Af=new WeakMap,Cf=new WeakMap,ca=new WeakMap,Pf=new WeakMap,Tf=new WeakMap,GV),On,Pt,Vy,bn,Ql,If,So,Wy,Nf,kf,Yl,Xl,ua,Of,Jl,rp,zy,YP,Gy,XP,qy,JP,Hy,ZP,Ky,eT,Qy,tT,Yy,rT,ow,Cz,qV,Xhe=(qV=class extends _g{constructor(e,r){super();de(this,Jl);de(this,zy);de(this,Gy);de(this,qy);de(this,Hy);de(this,Ky);de(this,Qy);de(this,Yy);de(this,ow);de(this,On,void 0);de(this,Pt,void 0);de(this,Vy,void 0);de(this,bn,void 0);de(this,Ql,void 0);de(this,If,void 0);de(this,So,void 0);de(this,Wy,void 0);de(this,Nf,void 0);de(this,kf,void 0);de(this,Yl,void 0);de(this,Xl,void 0);de(this,ua,void 0);de(this,Of,new Set);this.options=r,ae(this,On,e),ae(this,So,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Pt).addObserver(this),iF(D(this,Pt),this.options)?Oe(this,Jl,rp).call(this):this.updateResult(),Oe(this,Hy,ZP).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nT(D(this,Pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nT(D(this,Pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,Ky,eT).call(this),Oe(this,Qy,tT).call(this),D(this,Pt).removeObserver(this)}setOptions(e,r){const n=this.options,i=D(this,Pt);if(this.options=D(this,On).defaultQueryOptions(e),HP(n,this.options)||D(this,On).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Pt),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),Oe(this,Yy,rT).call(this);const o=this.hasListeners();o&&oF(D(this,Pt),i,this.options,n)&&Oe(this,Jl,rp).call(this),this.updateResult(r),o&&(D(this,Pt)!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Oe(this,zy,YP).call(this);const s=Oe(this,Gy,XP).call(this);o&&(D(this,Pt)!==i||this.options.enabled!==n.enabled||s!==D(this,ua))&&Oe(this,qy,JP).call(this,s)}getOptimisticResult(e){const r=D(this,On).getQueryCache().build(D(this,On),e),n=this.createResult(r,e);return Zhe(this,n)&&(ae(this,bn,n),ae(this,If,this.options),ae(this,Ql,D(this,Pt).state)),n}getCurrentResult(){return D(this,bn)}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(D(this,Of).add(n),e[n])})}),r}getCurrentQuery(){return D(this,Pt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=D(this,On).defaultQueryOptions(e),n=D(this,On).getQueryCache().build(D(this,On),r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Oe(this,Jl,rp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,bn)))}createResult(e,r){var w;const n=D(this,Pt),i=this.options,o=D(this,bn),s=D(this,Ql),a=D(this,If),c=e!==n?e.state:D(this,Vy),{state:u}=e;let{error:d,errorUpdatedAt:h,fetchStatus:p,status:m}=u,y=!1,g;if(r._optimisticResults){const A=this.hasListeners(),C=!A&&iF(e,r),T=A&&oF(e,n,r,i);(C||T)&&(p=Gw(e.options.networkMode)?"fetching":"paused",u.dataUpdatedAt||(m="pending")),r._optimisticResults==="isRestoring"&&(p="idle")}if(r.select&&typeof u.data<"u")if(o&&u.data===(s==null?void 0:s.data)&&r.select===D(this,Wy))g=D(this,Nf);else try{ae(this,Wy,r.select),g=r.select(u.data),g=QP(o==null?void 0:o.data,g,r),ae(this,Nf,g),ae(this,So,null)}catch(A){ae(this,So,A)}else g=u.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&m==="pending"){let A;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))A=o.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((w=D(this,kf))==null?void 0:w.state.data,D(this,kf)):r.placeholderData,r.select&&typeof A<"u")try{A=r.select(A),ae(this,So,null)}catch(C){ae(this,So,C)}typeof A<"u"&&(m="success",g=QP(o==null?void 0:o.data,A,r),y=!0)}D(this,So)&&(d=D(this,So),g=D(this,Nf),h=Date.now(),m="error");const b=p==="fetching",v=m==="pending",x=m==="error",S=v&&b;return{status:m,fetchStatus:p,isPending:v,isSuccess:m==="success",isError:x,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:u.dataUpdatedAt,error:d,errorUpdatedAt:h,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:x&&u.dataUpdatedAt===0,isPaused:p==="paused",isPlaceholderData:y,isRefetchError:x&&u.dataUpdatedAt!==0,isStale:yO(e,r),refetch:this.refetch}}updateResult(e){const r=D(this,bn),n=this.createResult(D(this,Pt),this.options);if(ae(this,Ql,D(this,Pt).state),ae(this,If,this.options),D(this,Ql).data!==void 0&&ae(this,kf,D(this,Pt)),HP(n,r))return;ae(this,bn,n);const i={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!D(this,Of).size)return!0;const l=new Set(a??D(this,Of));return this.options.throwOnError&&l.add("error"),Object.keys(D(this,bn)).some(c=>{const u=c;return D(this,bn)[u]!==r[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),Oe(this,ow,Cz).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,Hy,ZP).call(this)}},On=new WeakMap,Pt=new WeakMap,Vy=new WeakMap,bn=new WeakMap,Ql=new WeakMap,If=new WeakMap,So=new WeakMap,Wy=new WeakMap,Nf=new WeakMap,kf=new WeakMap,Yl=new WeakMap,Xl=new WeakMap,ua=new WeakMap,Of=new WeakMap,Jl=new WeakSet,rp=function(e){Oe(this,Yy,rT).call(this);let r=D(this,Pt).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(bi)),r},zy=new WeakSet,YP=function(){if(Oe(this,Ky,eT).call(this),nd||D(this,bn).isStale||!qP(this.options.staleTime))return;const r=_z(D(this,bn).dataUpdatedAt,this.options.staleTime)+1;ae(this,Yl,setTimeout(()=>{D(this,bn).isStale||this.updateResult()},r))},Gy=new WeakSet,XP=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Pt)):this.options.refetchInterval)??!1},qy=new WeakSet,JP=function(e){Oe(this,Qy,tT).call(this),ae(this,ua,e),!(nd||this.options.enabled===!1||!qP(D(this,ua))||D(this,ua)===0)&&ae(this,Xl,setInterval(()=>{(this.options.refetchIntervalInBackground||yx.isFocused())&&Oe(this,Jl,rp).call(this)},D(this,ua)))},Hy=new WeakSet,ZP=function(){Oe(this,zy,YP).call(this),Oe(this,qy,JP).call(this,Oe(this,Gy,XP).call(this))},Ky=new WeakSet,eT=function(){D(this,Yl)&&(clearTimeout(D(this,Yl)),ae(this,Yl,void 0))},Qy=new WeakSet,tT=function(){D(this,Xl)&&(clearInterval(D(this,Xl)),ae(this,Xl,void 0))},Yy=new WeakSet,rT=function(){const e=D(this,On).getQueryCache().build(D(this,On),this.options);if(e===D(this,Pt))return;const r=D(this,Pt);ae(this,Pt,e),ae(this,Vy,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},ow=new WeakSet,Cz=function(e){Vr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(D(this,bn))}),D(this,On).getQueryCache().notify({query:D(this,Pt),type:"observerResultsUpdated"})})},qV);function Jhe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function iF(t,e){return Jhe(t,e)||t.state.dataUpdatedAt>0&&nT(t,e,e.refetchOnMount)}function nT(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&yO(t,e)}return!1}function oF(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&yO(t,r)}function yO(t,e){return t.isStaleByTime(e.staleTime)}function Zhe(t,e){return!HP(t.getCurrentResult(),e)}var Pz=E.createContext(void 0),epe=t=>{const e=E.useContext(Pz);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},tpe=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.createElement(Pz.Provider,{value:t},e)),Tz=E.createContext(!1),rpe=()=>E.useContext(Tz);Tz.Provider;function npe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ipe=E.createContext(npe()),ope=()=>E.useContext(ipe);function spe(t,e){return typeof t=="function"?t(...e):!!t}var ape=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},lpe=t=>{E.useEffect(()=>{t.clearReset()},[t])},cpe=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&spe(r,[t.error,n]),upe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},fpe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,dpe=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function hpe(t,e,r){const n=epe(r),i=rpe(),o=ope(),s=n.defaultQueryOptions(t);s._optimisticResults=i?"isRestoring":"optimistic",upe(s),ape(s,o),lpe(o);const[a]=E.useState(()=>new e(n,s)),l=a.getOptimisticResult(s);if(E.useSyncExternalStore(E.useCallback(c=>{const u=i?()=>{}:a.subscribe(Vr.batchCalls(c));return a.updateResult(),u},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),E.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),fpe(s,l))throw dpe(s,a,o);if(cpe({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:n.getQueryCache().get(s.queryHash)}))throw l.error;return s.notifyOnChangeProps?l:a.trackResult(l)}function qa(t,e){return hpe(t,Xhe,e)}function Iz(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=Iz(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ppe(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=Iz(t))&&(n&&(n+=" "),n+=e);return n}const sF=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,aF=ppe,Nz=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return aF(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(c=>{const u=r==null?void 0:r[c],d=o==null?void 0:o[c];if(u===null)return null;const h=sF(u)||sF(d);return i[c][h]}),a=r&&Object.entries(r).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(m=>{let[y,g]=m;return Array.isArray(g)?g.includes({...o,...a}[y]):{...o,...a}[y]===g})?[...c,d,h]:c},[]);return aF(t,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},mpe=Nz(["font-semibold"],{variants:{variant:{contained:["border","rounded"],text:[],icon:["hover:enabled:bg-opacity-50 leading-4"]},color:{primary:[],secondary:[],success:[],danger:[],inverted:[]},size:{small:["text-sm"],medium:["text-base"],large:["text-md"],xlarge:["text-2xl"]},disabled:{true:["cursor-not-allowed opacity-30"]},loading:{true:["cursor-wait opacity-30"]}},compoundVariants:[{variant:"contained",size:"small",className:"py-1 px-2"},{variant:"contained",size:"medium",className:"py-2 px-4"},{variant:"contained",size:"large",className:"py-2 px-4"},{variant:"contained",size:"xlarge",className:"py-4 px-4"},{color:"primary",variant:"contained",className:"bg-teal-800 text-white border-transparent hover:enabled:bg-teal-700"},{color:"secondary",variant:"contained",className:"bg-white text-gray-800 border-gray-400 hover:enabled:bg-gray-100"},{color:"success",variant:"contained",className:"bg-green-100 text-green-500 border-green-400 hover:enabled:bg-green-200"},{color:"danger",variant:"contained",className:"bg-red-100 text-red-500 border-red-400 hover:enabled:bg-red-200"},{color:"primary",variant:"text",className:"text-teal-800 hover:enabled:text-teal-700"},{color:"secondary",variant:"text",className:"text-gray-800 hover:enabled:text-gray-700"},{color:"success",variant:"text",className:"text-green-800 hover:enabled:text-green-700"},{color:"danger",variant:"text",className:"text-red-800 hover:enabled:text-red-700"},{color:"inverted",variant:"text",className:"text-gray-100 hover:enabled:text-gray-0"},{color:"primary",variant:"icon",className:"text-teal-800 hover:enabled:text-teal-700 hover:enabled:bg-teal-100"},{color:"secondary",variant:"icon",className:"text-gray-800 hover:enabled:text-gray-700 hover:enabled:bg-gray-100"},{color:"success",variant:"icon",className:"text-green-800 hover:enabled:text-green-700 hover:enabled:bg-green-100"},{color:"danger",variant:"icon",className:"text-red-800 hover:enabled:text-red-700 hover:enabled:bg-red-100"},{color:"primary",size:"medium",className:"uppercase"}],defaultVariants:{color:"primary",size:"medium",variant:"contained"}});function Re({color:t,size:e,variant:r,className:n,type:i="button",loading:o,...s}){const a=E.useMemo(()=>mpe({color:t,size:e,variant:r,disabled:s.disabled,loading:o,className:n}),[t,e,r,s.disabled,o,n]);return f.jsx("button",{type:i,className:a,disabled:s.disabled||o,...s})}const ype=typeof navigator>"u"?!1:navigator.product==="ReactNative",kz={timeout:ype?6e4:12e4},gpe=function(e){const r={...kz,...typeof e=="string"?{url:e}:e},{searchParams:n}=new URL(r.url,"http://localhost");if(r.timeout=Oz(r.timeout),r.query){for(const[s,a]of Object.entries(r.query))if(a!==void 0)if(Array.isArray(a))for(const l of a)n.append(s,l);else n.append(s,a)}const[i]=r.url.split("?"),o=n.toString();return o&&(r.url="".concat(i,"?").concat(o)),r.method=r.body&&!r.method?"POST":(r.method||"GET").toUpperCase(),r};function Oz(t){if(t===!1||t===0)return!1;if(t.connect||t.socket)return t;const e=Number(t);return isNaN(e)?Oz(kz.timeout):{connect:e,socket:e}}const vpe=/^https?:\/\//i,bpe=function(e){if(!vpe.test(e.url))throw new Error('"'.concat(e.url,'" is not a valid URL'))};var QE=function(t){return t.replace(/^\s+|\s+$/g,"")},xpe=function(t){return Object.prototype.toString.call(t)==="[object Array]"},_pe=function(t){if(!t)return{};for(var e={},r=QE(t).split(`
`),n=0;n<r.length;n++){var i=r[n],o=i.indexOf(":"),s=QE(i.slice(0,o)).toLowerCase(),a=QE(i.slice(o+1));typeof e[s]>"u"?e[s]=a:xpe(e[s])?e[s].push(a):e[s]=[e[s],a]}return e};const wpe=ot(_pe),Spe=t=>function(r,n){const i=r==="onError";let o=n;for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];for(let c=0;c<t[r].length;c++){const u=t[r][c];if(o=u(o,...a),i&&!o)break}return o};function Epe(){const t=Object.create(null);let e=0;function r(i){const o=e++;return t[o]=i,function(){delete t[o]}}function n(i){for(const o in t)t[o](i)}return{publish:n,subscribe:r}}const Ape=["request","response","progress","error","abort"],lF=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function Rz(t,e){const r=[],n=lF.reduce((o,s)=>(o[s]=o[s]||[],o),{processOptions:[gpe],validateOptions:[bpe]});function i(o){const s=(m,y,g)=>{let b=m,v=y;if(!b)try{v=l("onResponse",y,g)}catch(x){v=null,b=x}b=b&&l("onError",b,g),b?a.error.publish(b):v&&a.response.publish(v)},a=Ape.reduce((m,y)=>(m[y]=Epe(),m),{}),l=Spe(n),c=l("processOptions",o);l("validateOptions",c);const u={options:c,channels:a,applyMiddleware:l};let d;const h=a.request.subscribe(m=>{d=e(m,(y,g)=>s(y,g,m))});a.abort.subscribe(()=>{h(),d&&d.abort()});const p=l("onReturn",a,u);return p===a&&a.request.publish(u),p}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return lF.forEach(a=>{s[a]&&n[a].push(s[a])}),r.push(s),i},i.clone=()=>Rz(r,e),t.forEach(i.use),i}var jz=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},fi=(t,e,r)=>(jz(t,e,"read from private field"),r?r.call(t):e.get(t)),dl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Bs=(t,e,r,n)=>(jz(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),F0,L0,gu,B0,Gs,U0,V0;class $z{constructor(){this.readyState=0,this.responseType="",dl(this,F0,void 0),dl(this,L0,void 0),dl(this,gu,void 0),dl(this,B0,{}),dl(this,Gs,void 0),dl(this,U0,{}),dl(this,V0,void 0)}open(e,r,n){Bs(this,F0,e),Bs(this,L0,r),Bs(this,gu,""),this.readyState=1,this.onreadystatechange(),Bs(this,Gs,void 0)}abort(){fi(this,Gs)&&fi(this,Gs).abort()}getAllResponseHeaders(){return fi(this,gu)}setRequestHeader(e,r){fi(this,B0)[e]=r}setInit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Bs(this,U0,e),Bs(this,V0,r)}send(e){const r=this.responseType!=="arraybuffer",n={...fi(this,U0),method:fi(this,F0),headers:fi(this,B0),body:e};typeof AbortController=="function"&&fi(this,V0)&&(Bs(this,Gs,new AbortController),typeof EventTarget<"u"&&fi(this,Gs).signal instanceof EventTarget&&(n.signal=fi(this,Gs).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(fi(this,L0),n).then(i=>(i.headers.forEach((o,s)=>{Bs(this,gu,fi(this,gu)+"".concat(s,": ").concat(o,`\r
`))}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,r?i.text():i.arrayBuffer())).then(i=>{typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,this.onreadystatechange()}).catch(i=>{var o;if(i.name==="AbortError"){this.onabort();return}(o=this.onerror)==null||o.call(this,i)})}}F0=new WeakMap;L0=new WeakMap;gu=new WeakMap;B0=new WeakMap;Gs=new WeakMap;U0=new WeakMap;V0=new WeakMap;const iT=typeof XMLHttpRequest=="function"?"xhr":"fetch",Cpe=iT==="xhr"?XMLHttpRequest:$z,Ppe=(t,e)=>{var r;const n=t.options,i=t.applyMiddleware("finalizeOptions",n),o={},s=t.applyMiddleware("interceptRequest",void 0,{adapter:iT,context:t});if(s){const S=setTimeout(e,0,null,s);return{abort:()=>clearTimeout(S)}}let a=new Cpe;a instanceof $z&&typeof i.fetch=="object"&&a.setInit(i.fetch,(r=i.useAbortSignal)!=null?r:!0);const l=i.headers,c=i.timeout;let u=!1,d=!1,h=!1;if(a.onerror=S=>{b(new Error("Request error while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.ontimeout=S=>{b(new Error("Request timeout while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.onabort=()=>{g(!0),u=!0},a.onreadystatechange=()=>{y(),!(u||a.readyState!==4)&&a.status!==0&&x()},a.open(i.method,i.url,!0),a.withCredentials=!!i.withCredentials,l&&a.setRequestHeader)for(const S in l)l.hasOwnProperty(S)&&a.setRequestHeader(S,l[S]);return i.rawBody&&(a.responseType="arraybuffer"),t.applyMiddleware("onRequest",{options:i,adapter:iT,request:a,context:t}),a.send(i.body||null),c&&(o.connect=setTimeout(()=>m("ETIMEDOUT"),c.connect)),{abort:p};function p(){u=!0,a&&a.abort()}function m(S){h=!0,a.abort();const _=new Error(S==="ESOCKETTIMEDOUT"?"Socket timed out on request to ".concat(i.url):"Connection timed out on request to ".concat(i.url));_.code=S,t.channels.error.publish(_)}function y(){c&&(g(),o.socket=setTimeout(()=>m("ESOCKETTIMEDOUT"),c.socket))}function g(S){(S||u||a.readyState>=2&&o.connect)&&clearTimeout(o.connect),o.socket&&clearTimeout(o.socket)}function b(S){if(d)return;g(!0),d=!0,a=null;const _=S||new Error("Network error while attempting to reach ".concat(i.url));_.isNetworkError=!0,_.request=i,e(_)}function v(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:i.url,method:i.method,headers:wpe(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function x(){if(!(u||d||h)){if(a.status===0){b(new Error("Unknown XHR error"));return}g(),d=!0,e(null,v())}}},Tpe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ppe;return Rz(t,e)};var cF={exports:{}},YE,uF;function Ipe(){if(uF)return YE;uF=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,o=n*365.25;YE=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return s(u);if(h==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=r?Math.round(u/r)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=n?c(u,d,n,"day"):d>=r?c(u,d,r,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,h,p){var m=d>=h*1.5;return Math.round(u/h)+" "+p+(m?"s":"")}return YE}function Npe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Ipe(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,h=null,p,m;function y(...g){if(!y.enabled)return;const b=y,v=Number(new Date),x=v-(d||v);b.diff=x,b.prev=d,b.curr=v,d=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let S=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,A)=>{if(w==="%%")return"%";S++;const C=r.formatters[A];if(typeof C=="function"){const T=g[S];w=C.call(b,T),g.splice(S,1),S--}return w}),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(u)),m),set:g=>{h=g}}),typeof r.init=="function"&&r.init(y),y}function n(u,d){const h=r(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){const u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(u))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var kpe=Npe;(function(t,e){var r={};e.formatArgs=i,e.save=o,e.load=s,e.useColors=n,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,h=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(h=d))}),c.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=r.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=kpe(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(cF,cF.exports);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function fF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ope(t){var e,r;return fF(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(fF(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}const Rpe=typeof Buffer>"u"?()=>!1:t=>Buffer.isBuffer(t),jpe=["boolean","string","number"];function $pe(){return{processOptions:t=>{const e=t.body;return!e||!(!(typeof e.pipe=="function")&&!Rpe(e)&&(jpe.indexOf(typeof e)!==-1||Array.isArray(e)||Ope(e)))?t:Object.assign({},t,{body:JSON.stringify(t.body),headers:Object.assign({},t.headers,{"Content-Type":"application/json"})})}}}function Dpe(t){return{onResponse:r=>{const n=r.headers["content-type"]||"",i=t&&t.force||n.indexOf("application/json")!==-1;return!r.body||!n||!i?r:Object.assign({},r,{body:e(r.body)})},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function e(r){try{return JSON.parse(r)}catch(n){throw n.message="Failed to parsed response body as JSON: ".concat(n.message),n}}}let np={};typeof globalThis<"u"?np=globalThis:typeof window<"u"?np=window:typeof global<"u"?np=global:typeof self<"u"&&(np=self);var Mpe=np;function Fpe(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).implementation||Mpe.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new e(i=>(r.error.subscribe(o=>i.error(o)),r.progress.subscribe(o=>i.next(Object.assign({type:"progress"},o))),r.response.subscribe(o=>{i.next(Object.assign({type:"response"},o)),i.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function Lpe(){return{onRequest:t=>{if(t.adapter!=="xhr")return;const e=t.request,r=t.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"));function n(i){return o=>{const s=o.lengthComputable?o.loaded/o.total*100:-1;r.channels.progress.publish({stage:i,percent:s,total:o.total,loaded:o.loaded,lengthComputable:o.lengthComputable})}}}}}class Bpe{constructor(e){this.__CANCEL__=!0,this.message=e}toString(){return"Cancel".concat(this.message?": ".concat(this.message):"")}}const dF=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r=null;this.promise=new Promise(n=>{r=n}),e(n=>{this.reason||(this.reason=new Bpe(n),r(this.reason))})}};dF.source=()=>{let t;return{token:new dF(r=>{t=r}),cancel:t}};var Dz=(t,e,r)=>r.method!=="GET"&&r.method!=="HEAD"?!1:t.isNetworkError||!1;const Upe=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";var Vpe=t=>{const e=t.maxRetries||5,r=t.retryDelay||Wpe,n=t.shouldRetry;return{onError:(i,o)=>{const s=o.options,a=s.maxRetries||e,l=s.shouldRetry||n,c=s.attemptNumber||0;if(Upe(s.body)||!l(i,c,s)||c>=a)return i;const u=Object.assign({},o,{options:Object.assign({},s,{attemptNumber:c+1})});return setTimeout(()=>o.channels.request.publish(u),r(c)),null}}};function Wpe(t){return 100*Math.pow(2,t)+Math.random()*100}const gO=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vpe({shouldRetry:Dz,...t})};gO.shouldRetry=Dz;var oT=function(t,e){return oT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},oT(t,e)};function vO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vx=function(){return vx=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vx.apply(this,arguments)};function hF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sT(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function aT(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Uo(t){return typeof t=="function"}function Mz(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var XE=Mz(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function pF(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var bO=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=hF(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(Uo(u))try{u()}catch(y){o=y instanceof XE?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=hF(d),p=h.next();!p.done;p=h.next()){var m=p.value;try{mF(m)}catch(y){o=o??[],y instanceof XE?o=aT(aT([],sT(o)),sT(y.errors)):o.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new XE(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)mF(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&pF(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&pF(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();bO.EMPTY;function Fz(t){return t instanceof bO||t&&"closed"in t&&Uo(t.remove)&&Uo(t.add)&&Uo(t.unsubscribe)}function mF(t){Uo(t)?t():t.unsubscribe()}var Lz={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Bz={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,aT([t,e],sT(r)))},clearTimeout:function(t){var e=Bz.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function zpe(t){Bz.setTimeout(function(){throw t})}function yF(){}function Gpe(t){t()}var xO=function(t){vO(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Fz(r)&&r.add(n)):n.destination=Qpe,n}return e.create=function(r,n,i){return new lT(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(bO),qpe=Function.prototype.bind;function JE(t,e){return qpe.call(t,e)}var Hpe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Nv(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Nv(n)}else Nv(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Nv(r)}},t}(),lT=function(t){vO(e,t);function e(r,n,i){var o=t.call(this)||this,s;if(Uo(r)||!r)s={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;o&&Lz.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},s={next:r.next&&JE(r.next,a),error:r.error&&JE(r.error,a),complete:r.complete&&JE(r.complete,a)}):s=r}return o.destination=new Hpe(s),o}return e}(xO);function Nv(t){zpe(t)}function Kpe(t){throw t}var Qpe={closed:!0,next:yF,error:Kpe,complete:yF},Ype=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Xpe(t){return t}function Jpe(t){return t.length===0?Xpe:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Nm=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=eme(e)?e:new lT(e,r,n);return Gpe(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=gF(r),new r(function(i,o){var s=new lT({next:function(a){try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Ype]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Jpe(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=gF(e),new e(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function gF(t){var e;return(e=t??Lz.Promise)!==null&&e!==void 0?e:Promise}function Zpe(t){return t&&Uo(t.next)&&Uo(t.error)&&Uo(t.complete)}function eme(t){return t&&t instanceof xO||Zpe(t)&&Fz(t)}function tme(t){return Uo(t==null?void 0:t.lift)}function Uz(t){return function(e){if(tme(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Vz(t,e,r,n,i){return new rme(t,e,r,n,i)}var rme=function(t){vO(e,t);function e(r,n,i,o,s,a){var l=t.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(u){r.error(u)}}:t.prototype._next,l._error=o?function(c){try{o(c)}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(xO),nme=Mz(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Ar(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=!1,s;t.subscribe({next:function(a){s=a,o=!0},error:i,complete:function(){o?n(s):r?n(e.defaultValue):i(new nme)}})})}function Tc(t,e){return Uz(function(r,n){var i=0;r.subscribe(Vz(n,function(o){n.next(t.call(e,o,i++))}))})}function wg(t,e){return Uz(function(r,n){var i=0;r.subscribe(Vz(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}const ZE=5;class ime extends Error{constructor(e){const r=Wz(e);super(r.message),this.statusCode=400,Object.assign(this,r)}}class ome extends Error{constructor(e){const r=Wz(e);super(r.message),this.statusCode=500,Object.assign(this,r)}}function Wz(t){const e=t.body,r={response:t,statusCode:t.statusCode,responseBody:lme(e,t),message:"",details:void 0};if(e.error&&e.message)return r.message="".concat(e.error," - ").concat(e.message),r;if(sme(e)){const n=e.error.items||[],i=n.slice(0,ZE).map(s=>{var a;return(a=s.error)==null?void 0:a.description}).filter(Boolean);let o=i.length?`:
- `.concat(i.join(`
- `)):"";return n.length>ZE&&(o+=`
...and `.concat(n.length-ZE," more")),r.message="".concat(e.error.description).concat(o),r.details=e.error,r}return e.error&&e.error.description?(r.message=e.error.description,r.details=e.error,r):(r.message=e.error||e.message||ame(t),r)}function sme(t){return vF(t)&&vF(t.error)&&t.error.type==="mutationError"&&typeof t.error.description=="string"}function vF(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function ame(t){const e=t.statusMessage?" ".concat(t.statusMessage):"";return"".concat(t.method,"-request to ").concat(t.url," resulted in HTTP ").concat(t.statusCode).concat(e)}function lme(t,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(t,null,2):t}const cme={onResponse:t=>{if(t.statusCode>=500)throw new ome(t);if(t.statusCode>=400)throw new ime(t);return t}},ume={onResponse:t=>{const e=t.headers["x-sanity-warning"];return(Array.isArray(e)?e:[e]).filter(Boolean).forEach(n=>console.warn(n)),t}};function bF(t,e){let{maxRetries:r=5,retryDelay:n}=e;const i=Tpe([r>0?gO({retryDelay:n,maxRetries:r,shouldRetry:fme}):{},...t,ume,$pe(),Dpe(),Lpe(),cme,Fpe({implementation:Nm})]);function o(s){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:i)({maxRedirects:0,...s})}return o.defaultRequester=i,o}function fme(t,e,r){const n=r.method==="GET"||r.method==="HEAD",o=(r.uri||r.url).startsWith("/data/query"),s=t.response&&(t.response.statusCode===429||t.response.statusCode===502||t.response.statusCode===503);return(n||o)&&s?!0:gO.shouldRetry(t,e,r)}function zz(t){if(typeof t=="string"||Array.isArray(t))return{id:t};if(typeof t=="object"&&t!==null&&"query"in t&&typeof t.query=="string")return"params"in t&&typeof t.params=="object"&&t.params!==null?{query:t.query,params:t.params}:{query:t.query};const e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

`.concat(e))}const xF=["image","file"],_F=["before","after","replace"],Gz=t=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},dme=t=>{if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},hme=t=>{if(xF.indexOf(t)===-1)throw new Error("Invalid asset type: ".concat(t,". Must be one of ").concat(xF.join(", ")))},jp=(t,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error("".concat(t,"() takes an object of properties"))},qz=(t,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error("".concat(t,'(): "').concat(e,'" is not a valid document ID'))},bx=(t,e)=>{if(!e._id)throw new Error("".concat(t,'() requires that the document contains an ID ("_id" property)'));qz(t,e._id)},pme=(t,e,r)=>{const n="insert(at, selector, items)";if(_F.indexOf(t)===-1){const i=_F.map(o=>'"'.concat(o,'"')).join(", ");throw new Error("".concat(n,' takes an "at"-argument which is one of: ').concat(i))}if(typeof e!="string")throw new Error("".concat(n,' takes a "selector"-argument which must be a string'));if(!Array.isArray(r))throw new Error("".concat(n,' takes an "items"-argument which must be an array'))},Hz=t=>{if(!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset||""},Kz=t=>{if(typeof t!="string"||!/^[a-z0-9._-]{1,75}$/i.test(t))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return t};var Qz=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},cf=(t,e,r)=>(Qz(t,e,"read from private field"),r?r.call(t):e.get(t)),Yz=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Xz=(t,e,r,n)=>(Qz(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),vu,bu;class Jz{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.selection=e,this.operations=r}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return jp("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,r,n){return pme(e,r,n),this._assign("insert",{[e]:r,items:n})}append(e,r){return this.insert("after","".concat(e,"[-1]"),r)}prepend(e,r){return this.insert("before","".concat(e,"[0]"),r)}splice(e,r,n,i){const o=typeof n>"u"||n===-1,s=r<0?r-1:r,a=o?-1:Math.max(0,r+n),l=s<0&&a>=0?"":a,c="".concat(e,"[").concat(s,":").concat(l,"]");return this.insert("replace",c,i||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...zz(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return jp(e,r),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},n&&this.operations[e]||{},r)}),this}_set(e,r){return this._assign(e,r,!1)}}const mme=class Zz extends Jz{constructor(e,r,n){super(e,r),Yz(this,vu,void 0),Xz(this,vu,n)}clone(){return new Zz(this.selection,{...this.operations},cf(this,vu))}commit(e){if(!cf(this,vu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return cf(this,vu).mutate({patch:this.serialize()},n)}};vu=new WeakMap;let $p=mme;const yme=class eG extends Jz{constructor(e,r,n){super(e,r),Yz(this,bu,void 0),Xz(this,bu,n)}clone(){return new eG(this.selection,{...this.operations},cf(this,bu))}commit(e){if(!cf(this,bu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return cf(this,bu).mutate({patch:this.serialize()},n)}};bu=new WeakMap;let Dp=yme;var tG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ma=(t,e,r)=>(tG(t,e,"read from private field"),r?r.call(t):e.get(t)),rG=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},nG=(t,e,r,n)=>(tG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),bl,xl;const iG={returnDocuments:!1};class oG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;this.operations=e,this.trxId=r}create(e){return jp("create",e),this._add({create:e})}createIfNotExists(e){const r="createIfNotExists";return jp(r,e),bx(r,e),this._add({[r]:e})}createOrReplace(e){const r="createOrReplace";return jp(r,e),bx(r,e),this._add({[r]:e})}delete(e){return qz("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}const gme=class sG extends oG{constructor(e,r,n){super(e,n),rG(this,bl,void 0),nG(this,bl,r)}clone(){return new sG([...this.operations],ma(this,bl),this.trxId)}commit(e){if(!ma(this,bl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ma(this,bl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},iG,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof Dp)return this._add({patch:e.serialize()});if(n){const o=r(new Dp(e,{},ma(this,bl)));if(!(o instanceof Dp))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};bl=new WeakMap;let aG=gme;const vme=class lG extends oG{constructor(e,r,n){super(e,n),rG(this,xl,void 0),nG(this,xl,r)}clone(){return new lG([...this.operations],ma(this,xl),this.trxId)}commit(e){if(!ma(this,xl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ma(this,xl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},iG,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof $p)return this._add({patch:e.serialize()});if(n){const o=r(new $p(e,{},ma(this,xl)));if(!(o instanceof $p))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};xl=new WeakMap;let cG=vme;const bme="https://www.sanity.io/help/";function _O(t){return bme+t}function xme(t){let e=!1,r;return function(){return e||(r=t(...arguments),e=!0),r}}const qw=t=>xme(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return console.warn(t.join(" "),...r)}),_me=qw(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),wme=qw(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),Sme=qw(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(_O("js-client-browser-token")," for more information and how to hide this warning.")]),Eme=qw(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(_O("js-client-api-version"))]),Ame="apicdn.sanity.io",xx={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0},Cme=["localhost","127.0.0.1","0.0.0.0"],Pme=t=>Cme.indexOf(t)!==-1,Tme=function(e){if(e==="1"||e==="X")return;const r=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&r instanceof Date&&r.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")},uG=function(e){switch(e){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},fG=(t,e)=>{const r=Object.assign({},e,t);r.apiVersion||Eme();const n=Object.assign({},xx,r),i=n.useProjectHostname;if(typeof Promise>"u"){const d=_O("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(d))}if(i&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&uG(n.perspective),"encodeSourceMapAtPath"in n||"encodeSourceMap"in n||"studioUrl"in n||"logger"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.");if("stega"in n&&n.stega!==void 0&&n.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'createClient' to 'false'.");const o=typeof window<"u"&&window.location&&window.location.hostname,s=o&&Pme(window.location.hostname);o&&s&&n.token&&n.ignoreBrowserTokenWarning!==!0?Sme():typeof n.useCdn>"u"&&_me(),i&&dme(n.projectId),n.dataset&&Gz(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?Kz(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion="".concat(n.apiVersion).replace(/^v/,""),n.isDefaultApi=n.apiHost===xx.apiHost,n.useCdn=n.useCdn!==!1&&!n.withCredentials,Tme(n.apiVersion);const a=n.apiHost.split("://",2),l=a[0],c=a[1],u=n.isDefaultApi?Ame:c;return n.useProjectHostname?(n.url="".concat(l,"://").concat(n.projectId,".").concat(c,"/v").concat(n.apiVersion),n.cdnUrl="".concat(l,"://").concat(n.projectId,".").concat(u,"/v").concat(n.apiVersion)):(n.url="".concat(n.apiHost,"/v").concat(n.apiVersion),n.cdnUrl=n.url),n},Ime="X-Sanity-Project-ID";function Nme(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r={},n=e.token||t.token;n&&(r.Authorization="Bearer ".concat(n)),!e.useGlobalApi&&!t.useProjectHostname&&t.projectId&&(r[Ime]=t.projectId);const i=!!(typeof e.withCredentials>"u"?t.token||t.withCredentials:e.withCredentials),o=typeof e.timeout>"u"?t.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},r,e.headers||{}),timeout:typeof o>"u"?5*60*1e3:o,proxy:e.proxy||t.proxy,json:!0,withCredentials:i,fetch:typeof e.fetch=="object"&&typeof t.fetch=="object"?{...t.fetch,...e.fetch}:e.fetch||t.fetch})}const dG=t=>{let{query:e,params:r={},options:n={}}=t;const i=new URLSearchParams,{tag:o,...s}=n;o&&i.append("tag",o),i.append("query",e);for(const[a,l]of Object.entries(r))i.append("$".concat(a),JSON.stringify(l));for(const[a,l]of Object.entries(s))l&&i.append(a,"".concat(l));return"?".concat(i)},kme=(t,e)=>t===!1?void 0:typeof t>"u"?e:t,Ome=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{dryRun:t.dryRun,returnIds:!0,returnDocuments:kme(t.returnDocuments,!0),visibility:t.visibility||"sync",autoGenerateArrayKeys:t.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:t.skipCrossDatasetReferenceValidation}},wO=t=>t.type==="response",Rme=t=>t.body,jme=(t,e)=>t.reduce((r,n)=>(r[e(n)]=n,r),Object.create(null)),$me=11264;function hG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if("stega"in i&&i.stega!==void 0&&i.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'fetch' to 'false'.");const o=i.filterResponse===!1?u=>u:u=>u.result,{cache:s,next:a,...l}={useAbortSignal:typeof i.signal<"u",...i},c=typeof s<"u"||typeof a<"u"?{...l,fetch:{cache:s,next:a}}:l;return Sg(t,e,"query",{query:r,params:n},c).pipe(Tc(o))}function pG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:zd(t,"doc",r),json:!0,tag:n.tag};return Eg(t,e,i).pipe(wg(wO),Tc(o=>o.body.documents&&o.body.documents[0]))}function mG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:zd(t,"doc",r.join(",")),json:!0,tag:n.tag};return Eg(t,e,i).pipe(wg(wO),Tc(o=>{const s=jme(o.body.documents||[],a=>a._id);return r.map(a=>s[a]||null)}))}function yG(t,e,r,n){return bx("createIfNotExists",r),Hw(t,e,r,"createIfNotExists",n)}function gG(t,e,r,n){return bx("createOrReplace",r),Hw(t,e,r,"createOrReplace",n)}function vG(t,e,r,n){return Sg(t,e,"mutate",{mutations:[{delete:zz(r)}]},n)}function bG(t,e,r,n){let i;r instanceof Dp||r instanceof $p?i={patch:r.serialize()}:r instanceof aG||r instanceof cG?i=r.serialize():i=r;const o=Array.isArray(i)?i:[i],s=n&&n.transactionId||void 0;return Sg(t,e,"mutate",{mutations:o,transactionId:s},n)}function Sg(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=r==="mutate",s=r==="query",a=o?"":dG(n),l=!o&&a.length<$me,c=l?a:"",u=i.returnFirst,{timeout:d,token:h,tag:p,headers:m}=i,y=zd(t,r,c),g={method:l?"GET":"POST",uri:y,json:!0,body:l?void 0:n,query:o&&Ome(i),timeout:d,headers:m,token:h,tag:p,perspective:i.perspective,resultSourceMap:i.resultSourceMap,canUseCdn:s,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal,useCdn:i.useCdn};return Eg(t,e,g).pipe(wg(wO),Tc(Rme),Tc(b=>{if(!o)return b;const v=b.results||[];if(i.returnDocuments)return u?v[0]&&v[0].document:v.map(_=>_.document);const x=u?"documentId":"documentIds",S=u?v[0]&&v[0].id:v.map(_=>_.id);return{transactionId:b.transactionId,results:v,[x]:S}}))}function Hw(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o={[n]:r},s=Object.assign({returnFirst:!0,returnDocuments:!0},i);return Sg(t,e,"mutate",{mutations:[o]},s)}function Eg(t,e,r){var n,i;const o=r.url||r.uri,s=t.config(),a=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&o.indexOf("/data/")===0:r.canUseCdn;let l=((n=r.useCdn)!=null?n:s.useCdn)&&a;const c=r.tag&&s.requestTagPrefix?[s.requestTagPrefix,r.tag].join("."):r.tag||s.requestTagPrefix;if(c&&r.tag!==null&&(r.query={tag:Kz(c),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&o.indexOf("/data/query/")===0){const h=(i=r.resultSourceMap)!=null?i:s.resultSourceMap;h!==void 0&&h!==!1&&(r.query={resultSourceMap:h,...r.query});const p=r.perspective||s.perspective;typeof p=="string"&&p!=="raw"&&(uG(p),r.query={perspective:p,...r.query},p==="previewDrafts"&&l&&(l=!1,wme()))}const u=Nme(s,Object.assign({},r,{url:SO(t,o,l)})),d=new Nm(h=>e(u,s.requester).subscribe(h));return r.signal?d.pipe(Dme(r.signal)):d}function fo(t,e,r){return Eg(t,e,r).pipe(wg(i=>i.type==="response"),Tc(i=>i.body))}function zd(t,e,r){const n=t.config(),i=Hz(n),o="/".concat(e,"/").concat(i),s=r?"".concat(o,"/").concat(r):o;return"/data".concat(s).replace(/\/($|\?)/,"$1")}function SO(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{url:n,cdnUrl:i}=t.config(),o=r?i:n;return"".concat(o,"/").concat(e.replace(/^\//,""))}function Dme(t){return e=>new Nm(r=>{const n=()=>r.error(Fme(t));if(t&&t.aborted){n();return}const i=e.subscribe(r);return t.addEventListener("abort",n),()=>{t.removeEventListener("abort",n),i.unsubscribe()}})}const Mme=!!globalThis.DOMException;function Fme(t){var e,r;if(Mme)return new DOMException((e=t==null?void 0:t.reason)!=null?e:"The operation was aborted.","AbortError");const n=new Error((r=t==null?void 0:t.reason)!=null?r:"The operation was aborted.");return n.name="AbortError",n}var xG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},_x=(t,e,r)=>(xG(t,e,"read from private field"),r?r.call(t):e.get(t)),wx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Sx=(t,e,r,n)=>(xG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),W0,z0,G0,q0;class Lme{constructor(e,r){wx(this,W0,void 0),wx(this,z0,void 0),Sx(this,W0,e),Sx(this,z0,r)}upload(e,r,n){return _G(_x(this,W0),_x(this,z0),e,r,n)}}W0=new WeakMap;z0=new WeakMap;class Bme{constructor(e,r){wx(this,G0,void 0),wx(this,q0,void 0),Sx(this,G0,e),Sx(this,q0,r)}upload(e,r,n){const i=_G(_x(this,G0),_x(this,q0),e,r,n);return Ar(i.pipe(wg(o=>o.type==="response"),Tc(o=>o.body.document)))}}G0=new WeakMap;q0=new WeakMap;function _G(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};hme(r);let o=i.extract||void 0;o&&!o.length&&(o=["none"]);const s=Hz(t.config()),a=r==="image"?"images":"files",l=Ume(i,n),{tag:c,label:u,title:d,description:h,creditLine:p,filename:m,source:y}=l,g={label:u,title:d,description:h,filename:m,meta:o,creditLine:p};return y&&(g.sourceId=y.id,g.sourceName=y.name,g.sourceUrl=y.url),Eg(t,e,{tag:c,method:"POST",timeout:l.timeout||0,uri:"/assets/".concat(a,"/").concat(s),headers:l.contentType?{"Content-Type":l.contentType}:{},query:g,body:n})}function Ume(t,e){return typeof File>"u"||!(e instanceof File)?t:Object.assign({filename:t.preserveFilename===!1?void 0:e.name,contentType:e.type},t)}var Vme=(t,e)=>Object.keys(e).concat(Object.keys(t)).reduce((r,n)=>(r[n]=typeof t[n]>"u"?e[n]:t[n],r),{});const Wme=(t,e)=>e.reduce((r,n)=>(typeof t[n]>"u"||(r[n]=t[n]),r),{}),zme=14800,Gme=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],qme={includeResult:!0};function wG(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{url:n,token:i,withCredentials:o,requestTagPrefix:s}=this.config(),a=r.tag&&s?[s,r.tag].join("."):r.tag,l={...Vme(r,qme),tag:a},c=Wme(l,Gme),u=dG({query:t,params:e,options:{tag:a,...c}}),d="".concat(n).concat(zd(this,"listen",u));if(d.length>zme)return new Nm(y=>y.error(new Error("Query too large for listener")));const h=l.events?l.events:["mutation"],p=h.indexOf("reconnect")!==-1,m={};return(i||o)&&(m.withCredentials=!0),i&&(m.headers={Authorization:"Bearer ".concat(i)}),new Nm(y=>{let g;T().then(O=>{g=O}).catch(O=>{y.error(O),I()});let b,v=!1;function x(){v||(C(),!v&&g.readyState===g.CLOSED&&(A(),clearTimeout(b),b=setTimeout(P,100)))}function S(O){y.error(Hme(O))}function _(O){const N=SG(O);return N instanceof Error?y.error(N):y.next(N)}function w(){v=!0,A(),y.complete()}function A(){g&&(g.removeEventListener("error",x),g.removeEventListener("channelError",S),g.removeEventListener("disconnect",w),h.forEach(O=>g.removeEventListener(O,_)),g.close())}function C(){p&&y.next({type:"reconnect"})}async function T(){const{default:O}=await uW(()=>import("./browser-B8XLODQY.js").then(j=>j.b),__vite__mapDeps([])),N=new O(d,m);return N.addEventListener("error",x),N.addEventListener("channelError",S),N.addEventListener("disconnect",w),h.forEach(j=>N.addEventListener(j,_)),N}function P(){T().then(O=>{g=O}).catch(O=>{y.error(O),I()})}function I(){v=!0,A()}return I})}function SG(t){try{const e=t.data&&JSON.parse(t.data)||{};return Object.assign({type:t.type},e)}catch(e){return e}}function Hme(t){if(t instanceof Error)return t;const e=SG(t);return e instanceof Error?e:new Error(Kme(e))}function Kme(t){return t.error?t.error.description?t.error.description:typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2):t.message||"Unknown listener error"}var EG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},sn=(t,e,r)=>(EG(t,e,"read from private field"),r?r.call(t):e.get(t)),Ex=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ax=(t,e,r,n)=>(EG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_l,wl,Sl,El;class Qme{constructor(e,r){Ex(this,_l,void 0),Ex(this,wl,void 0),Ax(this,_l,e),Ax(this,wl,r)}create(e,r){return uf(sn(this,_l),sn(this,wl),"PUT",e,r)}edit(e,r){return uf(sn(this,_l),sn(this,wl),"PATCH",e,r)}delete(e){return uf(sn(this,_l),sn(this,wl),"DELETE",e)}list(){return fo(sn(this,_l),sn(this,wl),{uri:"/datasets",tag:null})}}_l=new WeakMap;wl=new WeakMap;class Yme{constructor(e,r){Ex(this,Sl,void 0),Ex(this,El,void 0),Ax(this,Sl,e),Ax(this,El,r)}create(e,r){return Ar(uf(sn(this,Sl),sn(this,El),"PUT",e,r))}edit(e,r){return Ar(uf(sn(this,Sl),sn(this,El),"PATCH",e,r))}delete(e){return Ar(uf(sn(this,Sl),sn(this,El),"DELETE",e))}list(){return Ar(fo(sn(this,Sl),sn(this,El),{uri:"/datasets",tag:null}))}}Sl=new WeakMap;El=new WeakMap;function uf(t,e,r,n,i){return Gz(n),fo(t,e,{method:r,uri:"/datasets/".concat(n),body:i,tag:null})}var AG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ya=(t,e,r)=>(AG(t,e,"read from private field"),r?r.call(t):e.get(t)),Cx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Px=(t,e,r,n)=>(AG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ip,op,sp,ap;class Xme{constructor(e,r){Cx(this,ip,void 0),Cx(this,op,void 0),Px(this,ip,e),Px(this,op,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return fo(ya(this,ip),ya(this,op),{uri:r})}getById(e){return fo(ya(this,ip),ya(this,op),{uri:"/projects/".concat(e)})}}ip=new WeakMap;op=new WeakMap;class Jme{constructor(e,r){Cx(this,sp,void 0),Cx(this,ap,void 0),Px(this,sp,e),Px(this,ap,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return Ar(fo(ya(this,sp),ya(this,ap),{uri:r}))}getById(e){return Ar(fo(ya(this,sp),ya(this,ap),{uri:"/projects/".concat(e)}))}}sp=new WeakMap;ap=new WeakMap;var CG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Tx=(t,e,r)=>(CG(t,e,"read from private field"),r?r.call(t):e.get(t)),Ix=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Nx=(t,e,r,n)=>(CG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),H0,K0,Q0,Y0;class Zme{constructor(e,r){Ix(this,H0,void 0),Ix(this,K0,void 0),Nx(this,H0,e),Nx(this,K0,r)}getById(e){return fo(Tx(this,H0),Tx(this,K0),{uri:"/users/".concat(e)})}}H0=new WeakMap;K0=new WeakMap;class eye{constructor(e,r){Ix(this,Q0,void 0),Ix(this,Y0,void 0),Nx(this,Q0,e),Nx(this,Y0,r)}getById(e){return Ar(fo(Tx(this,Q0),Tx(this,Y0),{uri:"/users/".concat(e)}))}}Q0=new WeakMap;Y0=new WeakMap;var PG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ne=(t,e,r)=>(PG(t,e,"read from private field"),r?r.call(t):e.get(t)),kx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ox=(t,e,r,n)=>(PG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Al,gr,Cl,or;const tye=class cT{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xx;kx(this,Al,void 0),kx(this,gr,void 0),this.listen=wG,this.config(r),Ox(this,gr,e),this.assets=new Lme(this,Ne(this,gr)),this.datasets=new Qme(this,Ne(this,gr)),this.projects=new Xme(this,Ne(this,gr)),this.users=new Zme(this,Ne(this,gr))}clone(){return new cT(Ne(this,gr),this.config())}config(e){if(e===void 0)return{...Ne(this,Al)};if(Ne(this,Al)&&Ne(this,Al).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return Ox(this,Al,fG(e,Ne(this,Al)||{})),this}withConfig(e){return new cT(Ne(this,gr),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return hG(this,Ne(this,gr),e,r,n)}getDocument(e,r){return pG(this,Ne(this,gr),e,r)}getDocuments(e,r){return mG(this,Ne(this,gr),e,r)}create(e,r){return Hw(this,Ne(this,gr),e,"create",r)}createIfNotExists(e,r){return yG(this,Ne(this,gr),e,r)}createOrReplace(e,r){return gG(this,Ne(this,gr),e,r)}delete(e,r){return vG(this,Ne(this,gr),e,r)}mutate(e,r){return bG(this,Ne(this,gr),e,r)}patch(e,r){return new $p(e,r,this)}transaction(e){return new cG(e,this)}request(e){return fo(this,Ne(this,gr),e)}getUrl(e,r){return SO(this,e,r)}getDataUrl(e,r){return zd(this,e,r)}};Al=new WeakMap;gr=new WeakMap;let rye=tye;const nye=class uT{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xx;kx(this,Cl,void 0),kx(this,or,void 0),this.listen=wG,this.config(r),Ox(this,or,e),this.assets=new Bme(this,Ne(this,or)),this.datasets=new Yme(this,Ne(this,or)),this.projects=new Jme(this,Ne(this,or)),this.users=new eye(this,Ne(this,or)),this.observable=new rye(e,r)}clone(){return new uT(Ne(this,or),this.config())}config(e){if(e===void 0)return{...Ne(this,Cl)};if(Ne(this,Cl)&&Ne(this,Cl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),Ox(this,Cl,fG(e,Ne(this,Cl)||{})),this}withConfig(e){return new uT(Ne(this,or),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Ar(hG(this,Ne(this,or),e,r,n))}getDocument(e,r){return Ar(pG(this,Ne(this,or),e,r))}getDocuments(e,r){return Ar(mG(this,Ne(this,or),e,r))}create(e,r){return Ar(Hw(this,Ne(this,or),e,"create",r))}createIfNotExists(e,r){return Ar(yG(this,Ne(this,or),e,r))}createOrReplace(e,r){return Ar(gG(this,Ne(this,or),e,r))}delete(e,r){return Ar(vG(this,Ne(this,or),e,r))}mutate(e,r){return Ar(bG(this,Ne(this,or),e,r))}patch(e,r){return new Dp(e,r,this)}transaction(e){return new aG(e,this)}request(e){return Ar(fo(this,Ne(this,or),e))}dataRequest(e,r,n){return Ar(Sg(this,Ne(this,or),e,r,n))}getUrl(e,r){return SO(this,e,r)}getDataUrl(e,r){return zd(this,e,r)}};Cl=new WeakMap;or=new WeakMap;let iye=nye;function oye(t,e){return{requester:bF(t,{}).defaultRequester,createClient:o=>new e(bF(t,{maxRetries:o.maxRetries,retryDelay:o.retryDelay}),o)}}var sye=[];const aye=oye(sye,iye),lye=aye.createClient;var cye={VITE_GOOGLE_DRIVE_API_KEY:"AIzaSyC7KJIuaklIdqAKSEyoxr-_aJuEiZCWaiQ",VITE_IMGUR_CLIENT_ID:"6c65de36fe2a506",VITE_IMGUR_API_KEY:"87d72ff33afd8692c44b8bc013ad38293056c54b",VITE_IMGUR_ALBUM_ID:"o2qeHx9",VITE_HOMEPAGE_HOST:"https://hkleague2024.hkmahjong.org",VITE_CMS_HOST:"https://hkmjbs.sanity.studio",VITE_TOURNAMENT_ID:"b6908027-9179-485a-8bce-822c42114371",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const EO='_id, name, nickname, designation, "portraitImage": portraitImage.asset->url',No='_id, "slug": slug.current, name, secondaryName, thirdName, "squareLogoImage": squareLogoImage.asset->url, "color": color.hex, description',ga=`team->{${No}}, player->{${EO}}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url`,Gd=lye({projectId:"0a9a4r26",dataset:"production",useCdn:!0,apiVersion:"2023-05-03",token:cye.VITE_DATABASE_API_KEY}),uye=async(t,e)=>{const r=await Gd.fetch(`*[_type == "teamPlayer" && team._ref in [${t.map(i=>`"${i}"`).join(",")}]] | { "teamId": team._ref, player->{${EO}, "statistics": statistics[_key=="${e}"][0] } }`),n={};for(let i=0;i<r.length;i++){const o=r[i];n[o.teamId]||(n[o.teamId]=[]),n[o.teamId].push(ko(null,o))}return n},fye=()=>Gd.fetch(`*[_type == "match" && !(_id in path("drafts.**")) && (status == "initialized" || status == "streaming")] | order(startAt asc)[0...10]{ _id, name, playerEast->{${ga}}, playerSouth->{${ga}}, playerWest->{${ga}}, playerNorth->{${ga}}, playerEastTeam->{${No}}, playerSouthTeam->{${No}}, playerWestTeam->{${No}}, playerNorthTeam->{${No}}, startAt, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax}}`).then(t=>t.map(e=>{const{playerEast:r,playerEastTeam:n,playerSouth:i,playerSouthTeam:o,playerWest:s,playerWestTeam:a,playerNorth:l,playerNorthTeam:c,...u}=e,d={...u,nameAlt:u.name.startsWith("常規賽 #23Pre")?`常規賽 ${u.startAt.substring(0,10)} 第${u.name[u.name.length-1]}回戰`:u.name,playerEast:ko(n,r),playerSouth:ko(o,i),playerWest:ko(a,s),playerNorth:ko(c,l),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(r&&n&&i&&o&&s&&a&&l&&c){const h={[r.team._id]:"playerEast",[i.team._id]:"playerSouth",[s.team._id]:"playerWest",[l.team._id]:"playerNorth"};d._order=[h[n._id],h[o._id],h[a._id],h[c._id]]}return d})),AO=async(t,e)=>{const r=await Gd.fetch(`*[_type == "match" && _id == "${t}"]{ _id, name, playerEast->{${ga}}, playerSouth->{${ga}}, playerWest->{${ga}}, playerNorth->{${ga}}, playerEastTeam->{${No}}, playerSouthTeam->{${No}}, playerWestTeam->{${No}}, playerNorthTeam->{${No}}, startAt, youtubeUrl, bilibiliUrl, result, rounds, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax, teams[]{ "_id": team._ref, matchCount, ranking, point }}}`).then(n=>{const{playerEast:i,playerEastTeam:o,playerSouth:s,playerSouthTeam:a,playerWest:l,playerWestTeam:c,playerNorth:u,playerNorthTeam:d,...h}=n[0],p={...h,nameAlt:h.name.startsWith("常規賽 #23Pre")?`常規賽 ${h.startAt.substring(0,10)} 第${h.name[h.name.length-1]}回戰`:h.name,playerEast:ko(o,i),playerSouth:ko(a,s),playerWest:ko(c,l),playerNorth:ko(d,u),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(i&&o&&s&&a&&l&&c&&u&&d){const m={[i.team._id]:"playerEast",[s.team._id]:"playerSouth",[l.team._id]:"playerWest",[u.team._id]:"playerNorth"};p._order=[m[o._id],m[a._id],m[c._id],m[d._id]]}return p});if(e){const n=[r.playerEast.playerId,r.playerSouth.playerId,r.playerWest.playerId,r.playerNorth.playerId].filter(i=>i!=="");if(n.length>0){const i=await dye(n,r.tournament._id);r.playerEast.playerStatistic=i[r.playerEast.playerId],r.playerSouth.playerStatistic=i[r.playerSouth.playerId],r.playerWest.playerStatistic=i[r.playerWest.playerId],r.playerNorth.playerStatistic=i[r.playerNorth.playerId]}r.playerEast.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerEast.teamId)||null,r.playerSouth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerSouth.teamId)||null,r.playerWest.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerWest.teamId)||null,r.playerNorth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerNorth.teamId)||null}return r},dye=async(t,e)=>Gd.fetch(`*[_type=="player" && _id in [${t.map(r=>`"${r}"`).join(",")}]]{ _id, "statistics": statistics[_key=="${e}"][0] }`).then(r=>r.reduce((n,i)=>{if(!i.statistics||i.statistics.matchCount<=0)return n;const o={point:i.statistics.point,matchCount:i.statistics.matchCount,nonFourthP:i.statistics.nonFourthP,firstAndSecondP:i.statistics.firstAndSecondP,ronP:i.statistics.ronP,riichiP:i.statistics.riichiP,chuckP:i.statistics.chuckP,revealP:i.statistics.revealP,ronPureScoreAvg:i.statistics.ronPureScoreAvg,chuckPureScoreAvg:i.statistics.chuckPureScoreAvg,pointRanking:i.statistics.pointRanking,nonFourthPRanking:i.statistics.nonFourthPRanking,firstAndSecondPRanking:i.statistics.firstAndSecondPRanking,ronPRanking:i.statistics.ronPRanking,riichiPRanking:i.statistics.riichiPRanking,chuckPRanking:i.statistics.chuckPRanking,revealPRanking:i.statistics.revealPRanking,ronPureScoreAvgRanking:i.statistics.ronPureScoreAvgRanking,chuckPureScoreAvgRanking:i.statistics.chuckPureScoreAvgRanking};return n[i._id]=o,n},{})),lp=t=>{const e=`${t.playerPortraitImageUrl}?w=360&h=500`,r=`${t.teamLogoImageUrl}?w=500&h=500`,n=`${t.teamLogoImageUrl}?w=1000&h=1000`,i=t.playerDesignation,o=t.playerName,s=t.color;return{name:o,nickname:t.playerNickname,color:s,title:i,teamPicUrl:r,largeTeamPicUrl:n,proPicUrl:e}},ko=(t,e)=>{const r={playerId:"",playerName:"",playerNickname:"",playerDesignation:"",playerPortraitImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png",playerFullname:"",playerStatistic:null,teamId:"",teamName:"",teamSecondaryName:"",teamThirdName:"",teamFullname:"",teamStatistic:null,color:"#000000",teamLogoImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png"};if(e){if(e.player){r.playerId=e.player._id,r.playerName=e.player.name,e.player.nickname&&(r.playerNickname=e.player.nickname),e.player.designation&&(r.playerDesignation=e.player.designation),e.player.portraitImage&&(r.playerPortraitImageUrl=e.player.portraitImage);const n=e.player.statistics;r.playerStatistic=n&&n.matchCount>0?{point:n.point,pointRanking:n.pointRanking,matchCount:n.matchCount,nonFourthP:n.nonFourthP,nonFourthPRanking:n.nonFourthPRanking,firstAndSecondP:n.firstAndSecondP,firstAndSecondPRanking:n.firstAndSecondPRanking,riichiP:n.riichiP,riichiPRanking:n.riichiPRanking,ronP:n.ronP,ronPRanking:n.ronPRanking,chuckP:n.chuckP,chuckPRanking:n.chuckPRanking,revealP:n.revealP,revealPRanking:n.revealPRanking,ronPureScoreAvg:n.ronPureScoreAvg,ronPureScoreAvgRanking:n.ronPureScoreAvgRanking,chuckPureScoreAvg:n.chuckPureScoreAvg,chuckPureScoreAvgRanking:n.chuckPureScoreAvgRanking}:null}e.team&&(r.teamId=e.team._id,r.teamName=e.team.name,r.teamSecondaryName=e.team.secondaryName,r.teamThirdName=e.team.thirdName,r.color=e.team.color,e.team.squareLogoImage&&(r.teamLogoImageUrl=e.team.squareLogoImage)),r.playerFullname=r.playerName+(r.playerNickname?` (${r.playerNickname})`:""),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "),r.playerDesignation=r.teamFullname,e.overridedDesignation&&(r.playerDesignation=e.overridedDesignation),e.overridedName&&(r.playerName=e.overridedName),e.overridedNickname&&(r.playerNickname=e.overridedNickname),e.overridedColor&&(r.color=e.overridedColor),e.overridedPortraitImage&&(r.playerPortraitImageUrl=e.overridedPortraitImage)}else t&&(r.teamId=t._id,r.teamName=t.name,r.teamSecondaryName=t.secondaryName,r.teamThirdName=t.thirdName,r.color=t.color,t.squareLogoImage&&(r.teamLogoImageUrl=t.squareLogoImage),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "));return r},CO=async t=>await Gd.fetch(`*[_type == "matchTournament" && _id == "${t}"][0]{..., "logoUrl": logo.asset->url, teams[]{..., team->{${No}}}}`),hye=async t=>await Gd.fetch(`*[_type=="teamPlayer" && !(_id in path("drafts.**")) && defined(player->statistics[_key=="${t}"])]{"teamId": team._ref, player->{${EO}, "statistics": statistics[_key=="${t}"][0]}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url}`);CO("b6908027-9179-485a-8bce-822c42114371");const wF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function pye(){const t=E.useCallback(()=>{window.navigator.clipboard.writeText(wF)},[]);return f.jsx("div",{className:"flex items-center justify-center gap-x-8",children:f.jsxs("div",{children:[f.jsx("p",{children:"1. 打開OBS"}),f.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),f.jsxs("p",{children:["- 網址 = ",f.jsx("strong",{children:"上述網址"}),f.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",f.jsx("br",{})," - 自訂CSS ="," ",f.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[f.jsx("pre",{children:wF}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx("button",{type:"button",onClick:t,children:f.jsx("i",{className:"bi bi-copy"})})})]}),f.jsx("br",{}),"其餘默認即可。"]}),f.jsx("p",{children:"4. 確定"})]})})}let mye=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const fs=(t=12)=>mye(t),yye=()=>{const t=new Date;return`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`},fT=t=>`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${t}`,PO=t=>{let e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);e=Math.round(e*1.25),r=Math.round(r*1.25),n=Math.round(n*1.25),e=e<255?e:255,r=r<255?r:255,n=n<255?n:255,e=Math.round(e),r=Math.round(r),n=Math.round(n);const i=e.toString(16).length===1?`0${e.toString(16)}`:e.toString(16),o=r.toString(16).length===1?`0${r.toString(16)}`:r.toString(16),s=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16);return`#${i}${o}${s}`},gye=t=>{switch(t){case"12":return"三倍滿 (12翻)";case"13":return"累計役滿 (13翻)"}return"(未知)"},vye=t=>{switch(t){case"13":return"單倍役滿";case"26":return"雙倍役滿";case"39":return"三倍役滿";case"130":return"無上限"}return"(未知)"},ro=t=>typeof t>"u"||t===null?"-":t>=0?`+${t.toFixed(1)}`:`▲${Math.abs(t).toFixed(1)}`,id=t=>typeof t>"u"||t===null?"-":t===1||t==="1"?"1st":t===2||t==="2"?"2nd":t===3||t==="3"?"3rd":`${t}th`,Us=t=>typeof t>"u"||t===null?"-":t.toFixed(2),kv=t=>t===0?t.toLocaleString("en-US"):t>0?`${Math.floor(t).toLocaleString("en-US")}`:Math.floor(t).toLocaleString("en-US"),Vs=({teamPlayer:t})=>{const e=`${t.playerPortraitImageUrl}?w=64&h=64&fit=crop&crop=top`,r=`${t.teamLogoImageUrl}?w=64&h=64`,n=t.playerDesignation,i=t.playerName,o=t.color;return f.jsxs("div",{className:"flex justify-start items-center gap-x-1 border-l-4 pl-2",style:{borderColor:o},children:[f.jsx("div",{className:"w-8 h-8",children:r&&f.jsx("img",{src:r,alt:n})}),f.jsx("div",{className:"w-8 h-8",children:e&&f.jsx("img",{src:e,alt:i})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm text-neutral-600",children:n}),f.jsx("p",{className:"font-bold",children:i})]})]})};function bye(){const{data:t,refetch:e}=qa({queryKey:["matches"],queryFn:fye}),{data:r,set:n}=Zr("obs/1");E.useCallback(o=>{const s=o.currentTarget.getAttribute("data-id");s&&confirm(`請確定上一局對局已經結束才開始新的直播！！
確定要開始直播新的對局嗎？`)&&n({matchId:s})},[n]);const i=E.useMemo(()=>t==null?void 0:t.find(o=>o._id===(r==null?void 0:r.matchId)),[t,r==null?void 0:r.matchId]);return f.jsx("div",{className:"container mx-auto",children:f.jsxs("div",{className:"h-screen flex flex-col py-16 gap-y-12",children:[f.jsx("div",{className:"shrink-0",children:f.jsxs("h1",{className:"text-4xl font-bold text-center",children:[f.jsx("img",{src:"/images/master-logo.jpeg",className:"inline-block w-16",alt:"HKMSCA"})," ",f.jsx("span",{children:"日麻比賽直播系統 (牌藝攻防)"})]})}),f.jsxs("div",{className:"shrink-0 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-x-4",children:[f.jsx("div",{children:f.jsxs("div",{className:"px-8 py-4 bg-green-300 border-2 border-green-600 text-center space-y-4",children:[f.jsx("p",{className:"text-3xl font-bold text-green-900",children:"OBS設定"}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:f.jsx("a",{href:`${location.origin}/obs/1/weekly-summary`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"一週結算"})}),f.jsxs("div",{className:"bg-white rounded p-4 space-y-4",children:[!i&&f.jsx("p",{className:"text-center",children:"請在下方表格直播一場新的賽事"}),i&&f.jsx("p",{className:"text-center font-bold text-red-500",children:"LIVE 直播中"}),i&&f.jsx("div",{children:f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx(Vs,{teamPlayer:i.playerEast}),f.jsx(Vs,{teamPlayer:i.playerSouth}),f.jsx(Vs,{teamPlayer:i.playerWest}),f.jsx(Vs,{teamPlayer:i.playerNorth})]})}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("p",{children:"開始前倒數"}),f.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=0`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"即將開始"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=5`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"5分鐘"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=10`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"10分鐘"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=15`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"15分鐘"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=20`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"20分鐘"})]})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx("a",{href:`${location.origin}/obs/1/introduction`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"賽前介紹"}),f.jsx("a",{href:`${location.origin}/obs/1`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"直播頁面"}),f.jsx("a",{href:`${location.origin}/obs/1/summary`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"賽後結果"})]})]}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:f.jsx("a",{href:`${location.origin}/obs/1/end`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"今日賽事已完結"})}),f.jsx("div",{className:"text-left",children:f.jsx(pye,{})})]})}),f.jsx("div",{children:f.jsxs("div",{className:"px-8 py-4 bg-blue-300 border-2 border-blue-600 text-center space-y-4",children:[f.jsx("p",{className:"text-3xl font-bold text-blue-900",children:"主播"}),f.jsxs("p",{className:"text-2xl",children:["固定的紀錄頁面：",f.jsxs("a",{href:`${location.origin}/obs/1/stat`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/stat"]})]}),f.jsxs("p",{className:"text-2xl",children:["固定的Overlay頁面：",f.jsxs("a",{href:`${location.origin}/obs/1/stat`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/overlay"]})]}),f.jsx("div",{className:"pt-16",children:f.jsx("img",{className:"mx-auto block w-64 h-64",src:fT(`${location.origin}/obs/1/stat`),alt:""})})]})}),f.jsx("div",{children:f.jsxs("div",{className:"px-8 py-4 bg-yellow-300 border-2 border-yellow-600 text-center space-y-4",children:[f.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:"控制台"}),f.jsxs("p",{className:"text-2xl",children:["固定的控制台頁面：",f.jsxs("a",{href:`${location.origin}/obs/1/control`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/control"]})]}),f.jsx("div",{className:"pt-16",children:f.jsx("img",{className:"mx-auto block w-64 h-64",src:fT(`${location.origin}/obs/1/control`),alt:""})})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-right mb-2",children:f.jsxs(Re,{color:"secondary",onClick:()=>e(),children:[f.jsx("i",{className:"bi bi-arrow-repeat"})," 刷新"]})}),f.jsxs("table",{className:"data-table w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"對局"}),f.jsx("th",{children:"東"}),f.jsx("th",{children:"南"}),f.jsx("th",{children:"西"}),f.jsx("th",{children:"北"}),f.jsx("th",{className:"text-right",children:"操作"})]})}),f.jsx("tbody",{children:t==null?void 0:t.map(o=>f.jsxs("tr",{children:[f.jsxs("th",{children:[f.jsx("p",{children:o.name}),f.jsx("p",{className:"font-normal text-sm text-neutral-600",children:o.tournament.name})]}),f.jsx("td",{children:f.jsx(Vs,{teamPlayer:o.playerEast})}),f.jsx("td",{children:f.jsx(Vs,{teamPlayer:o.playerSouth})}),f.jsx("td",{children:f.jsx(Vs,{teamPlayer:o.playerWest})}),f.jsx("td",{children:f.jsx(Vs,{teamPlayer:o.playerNorth})}),f.jsxs("td",{className:"space-x-2 text-right",children:[f.jsxs("div",{className:"space-x-2",children:[f.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/square`,target:"_blank",children:[f.jsx("i",{className:"bi bi-card-image"})," 出Post圖"]}),f.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/thumbnail`,target:"_blank",children:[f.jsx("i",{className:"bi bi-youtube"})," YT Thumbnail"]}),f.jsxs("a",{href:`/match/${o._id}/nameplates`,target:"_blank",children:[f.jsx("i",{className:"bi bi-person-badge"})," 名牌"]})]}),f.jsxs("div",{className:"space-x-2",children:[f.jsxs("a",{href:`/match/${o._id}/forecast?startAt=${o.name.endsWith("2")?"21":"19"}:30`,target:"_blank",children:[f.jsx("i",{className:"bi bi-bell"})," 倒數"]}),f.jsxs("a",{href:`/match/${o._id}/introduction`,target:"_blank",children:[f.jsx("i",{className:"bi bi-person-vcard"})," 介紹"]}),f.jsxs("a",{href:`/match/${o._id}/summary`,target:"_blank",children:[f.jsx("i",{className:"bi bi-trophy"})," 結果"]}),o._id===(r==null?void 0:r.matchId)?f.jsxs("span",{className:"bg-red-600 px-2 py-1 rounded text-white",children:[f.jsx("i",{className:"bi bi-record-circle"})," LIVE 直播中"]}):f.jsxs("a",{href:`/match/${o._id}/control`,target:"_blank",className:"text-red-600",children:[f.jsx("i",{className:"bi bi-record-circle"})," 直播"]})]})]})]},o._id))})]})]}),f.jsx("div",{children:f.jsx("div",{className:"text-center space-x-4",children:f.jsx("a",{href:"https://hkmjbs.sanity.studio/",target:"_blank",children:f.jsxs(Re,{color:"secondary",children:["資料庫 ",f.jsx("i",{className:"bi bi-box-arrow-up-right"})]})})})}),f.jsx("div",{className:"flex gap-x-4"})]})]})})}const xye=t=>{const e={};for(let r=0;r<t.length;r+=1)e[r.toString()]=t[r];return e},SF=t=>{if(t.length!==0)return t[t.length-1]},es=t=>{const{data:e,update:r}=Zr(`/matches/${t}`),{data:n,update:i,push:o}=Zr("matchRounds",{order:{byChild:"matchId"},filter:{equalTo:t}}),s=E.useMemo(()=>SF(Object.values(n??{}))??void 0,[n]),a=E.useMemo(()=>Object.values((s==null?void 0:s.doras)??{}),[s]),l=E.useCallback((b,v)=>{const x=n==null?void 0:n[b];x&&i({[b]:{...x,...v}})},[n,i]),c=E.useCallback(b=>{const v=SF(Object.keys(n??{}));v&&i({[v]:{...s,...b}})},[s,n,i]),u=E.useCallback(b=>{c({doras:xye(b)})},[c]),d=E.useCallback(b=>{r({name:b})},[r]),h=E.useCallback(b=>{r({players:b})},[r]),p=E.useCallback(b=>{r({activeResultDetail:b})},[r]),m=E.useCallback(b=>{r({showPoints:b})},[r]),y=E.useCallback(b=>{r({hideHeader:b})},[r]),g=E.useCallback(b=>{i({[b]:{...n==null?void 0:n[b],hasBroadcasted:!0}})},[n,i]);return{match:e,matchRounds:n,matchCurrentRound:s,matchCurrentRoundDoras:a,setMatchName:d,setMatchPlayers:h,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchActiveResultDetail:p,setMatchRoundHasBroadcastedToTrue:g,setCurrentRoundDoras:u,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:o}};var Ve=(t=>(t[t.Unknown=0]="Unknown",t[t.Exhausted=-1]="Exhausted",t[t.Ron=1]="Ron",t[t.SelfDrawn=2]="SelfDrawn",t[t.Hotfix=-2]="Hotfix",t))(Ve||{}),bt=(t=>(t[t.Unknown=0]="Unknown",t[t.NextRound=1]="NextRound",t[t.Extended=2]="Extended",t[t.NextRoundAndExtended=3]="NextRoundAndExtended",t[t.Hotfix=-2]="Hotfix",t[t.End=-1]="End",t))(bt||{}),yt=(t=>(t[t.Win=1]="Win",t[t.Lose=-1]="Lose",t[t.None=0]="None",t))(yt||{}),Mn=(t=>(t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North",t))(Mn||{});const eA=[Mn.East,Mn.South,Mn.West,Mn.North],EF=["0","1","2","3"],_ye=t=>parseInt(t,10),Uc=(t,e)=>eA[(4+_ye(t)-(e-1)%eA.length)%eA.length],Zn=(t,e)=>Uc(t,e)===Mn.East,TG=(t,e)=>Uc(t,e)===Mn.South,IG=(t,e)=>Uc(t,e)===Mn.West,NG=(t,e)=>Uc(t,e)===Mn.North,kG=t=>t>=1&&t<=4,OG=t=>t>=5&&t<=8,RG=t=>t>=9&&t<=12,jG=t=>t>=13&&t<=16,nu={"1h20f":{ne:200,e:400,ner:1e3,er:1500},"1h25f":{ne:200,e:400,ner:1e3,er:1500},"1h30f":{ne:300,e:500,ner:1e3,er:1500},"1h40f":{ne:400,e:700,ner:1300,er:2e3},"1h50f":{ne:400,e:800,ner:1600,er:2400},"1h60f":{ne:500,e:1e3,ner:2e3,er:2900},"1h70f":{ne:600,e:1200,ner:2300,er:3400},"1h80f":{ne:700,e:1300,ner:2600,er:3900},"1h90f":{ne:800,e:1500,ner:2900,er:4400},"1h100f":{ne:800,e:1600,ner:3200,er:4800},"1h110f":{ne:900,e:1800,ner:3600,er:5300},"2h20f":{ne:400,e:700,ner:1500,er:2100},"2h25f":{ne:400,e:800,ner:1600,er:2400},"2h30f":{ne:500,e:1e3,ner:2e3,er:2900},"2h40f":{ne:700,e:1300,ner:2600,er:3900},"2h50f":{ne:800,e:1600,ner:3200,er:4800},"2h60f":{ne:1e3,e:2e3,ner:3900,er:5800},"2h70f":{ne:1200,e:2300,ner:4500,er:6800},"2h80f":{ne:1300,e:2600,ner:5200,er:7700},"2h90f":{ne:1500,e:2900,ner:5800,er:8700},"2h100f":{ne:1600,e:3200,ner:6400,er:9600},"2h110f":{ne:1800,e:3600,ner:7100,er:10600},"3h20f":{ne:700,e:1300,ner:2600,er:3900},"3h25f":{ne:800,e:1600,ner:3200,er:4800},"3h30f":{ne:1e3,e:2e3,ner:3900,er:5800},"3h40f":{ne:1300,e:2600,ner:5200,er:7700},"3h50f":{ne:1600,e:3200,ner:6400,er:9600},"3h60f":{ne:2e3,e:3900,ner:7700,er:11600},"4h20f":{ne:1300,e:2600,ner:5200,er:7700},"4h25f":{ne:1600,e:3200,ner:6400,er:9600},"4h30f":{ne:2e3,e:3900,ner:7700,er:11600},"5h":{ne:2e3,e:4e3,ner:8e3,er:12e3},"6h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"7h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"8h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"9h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"10h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"11h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"12h":{ne:6e3,e:12e3,ner:24e3,er:36e3}},wye=(t,e,r)=>{let n;const i=parseInt(t,10);if(Number.isNaN(i))throw new Error(`han "${t}" is NaN`);const o=parseInt(e,10);if(Number.isNaN(o))throw new Error(`fu "${e}" is NaN`);return i>=13?n=nu["12h"]:i>=5?n=nu[`${i}h`]:i>=4&&o>=(r!=null&&r.roundUp?30:40)||i>=3&&o>=(r!=null&&r.roundUp?60:70)?n=nu["5h"]:n=nu[`${i}h${o}f`],n||nu["1h30f"]},Sye=(t=1)=>({ne:8e3*t,e:16e3*t,ner:32e3*t,er:48e3*t}),AF=(t,e,r,n,i,o)=>{const s=r>0?Sye(Math.min(FG((o==null?void 0:o.yakumanMax)??"130"),r)):wye(t,e,o);return n?i?{win:s.er,target:s.er}:{win:s.e*3,all:s.e}:i?{win:s.ner,target:s.ner}:{win:s.e+2*s.ne,east:s.e,others:s.ne}},Eye=t=>t.all||t.east?Ve.SelfDrawn:t.target?Ve.Ron:Ve.Unknown,CF=t=>EF[(t-1)%EF.length],Aye=t=>({0:{beforeScore:t[0].afterScore,afterScore:t[0].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[0].isYellowCarded||!1,isRedCarded:t[0].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[0].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:t[1].afterScore,afterScore:t[1].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[1].isYellowCarded||!1,isRedCarded:t[1].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[1].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:t[2].afterScore,afterScore:t[2].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[2].isYellowCarded||!1,isRedCarded:t[2].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[2].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:t[3].afterScore,afterScore:t[3].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[3].isYellowCarded||!1,isRedCarded:t[3].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[3].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}}),PF=t=>Aye({0:t[0],1:t[1],2:t[2],3:t[3]}),Cye=()=>`${yye()}-${fs(6)}`,Rx=(t,e,r)=>`${t}-${e}.${r}`,Pye={1:"東 1 局",2:"東 2 局",3:"東 3 局",4:"東 4 局",5:"南 1 局",6:"南 2 局",7:"南 3 局",8:"南 4 局",9:"西 1 局",10:"西 2 局",11:"西 3 局",12:"西 4 局",13:"北 1 局",14:"北 2 局",15:"北 3 局",16:"北 4 局"},Tye=(t,e,r=8)=>{try{const n=Pye[Math.min(t,r)];if(!n)throw new Error(`Unable to parse round=${t} in MJMatchCounterSpan`);return e&&e!==0?`${n}${e}本場`:n}catch(n){return console.error(n),`${t}.${e??0}`}},$G=t=>{switch(t){case"0":return"3";case"1":return"0";case"2":return"1";case"3":return"2"}},DG=t=>{switch(t){case"0":return"1";case"1":return"2";case"2":return"3";case"3":return"0"}},MG=t=>{switch(t){case"0":return"2";case"1":return"3";case"2":return"0";case"3":return"1"}},FG=t=>{switch(t){case"13":return 1;case"26":return 2;case"39":return 3;case"130":return 10}},Iye={[Ve.Ron]:"ron",[Ve.SelfDrawn]:"tsumo",[Ve.Exhausted]:"exhausted",[Ve.Hotfix]:"hotfix",[Ve.Unknown]:"unknown"},Nye={[Mn.East]:"east",[Mn.South]:"south",[Mn.West]:"west",[Mn.North]:"north"},kye={[yt.None]:"none",[yt.Win]:"win",[yt.Lose]:"lose"},Ov=(t,e)=>{var r,n,i,o,s,a,l,c,u;return{position:Nye[Uc(e,t.roundCount)],type:kye[t.playerResults[e].type],status:t.playerResults[e].isRiichi||(r=t.playerResults[e].detail)!=null&&r.isRiichied?"isRiichied":t.playerResults[e].isRevealed||(n=t.playerResults[e].detail)!=null&&n.isRevealed?"isRevealed":"none",isWaited:!!t.playerResults[e].waitingTiles&&t.playerResults[e].waitingTiles.length>0,beforeScore:t.playerResults[e].beforeScore,afterScore:t.playerResults[e].afterScore,dora:(i=t.playerResults[e].detail)==null?void 0:i.dora,redDora:(o=t.playerResults[e].detail)==null?void 0:o.redDora,innerDora:(s=t.playerResults[e].detail)==null?void 0:s.innerDora,han:(a=t.playerResults[e].detail)==null?void 0:a.han,fu:(l=t.playerResults[e].detail)==null?void 0:l.fu,yaku:(u=(c=t.playerResults[e].detail)==null?void 0:c.yakus)==null?void 0:u.map(({label:d})=>d).join(" "),pureScore:0}},LG=t=>{const e=t.at(-1),r=[{index:0,score:e.playerResults[0].afterScore},{index:1,score:e.playerResults[1].afterScore},{index:2,score:e.playerResults[2].afterScore},{index:3,score:e.playerResults[3].afterScore}].sort((a,l)=>a.score===l.score?a.index<l.index?-1:1:l.score-a.score),n=[r.findIndex(a=>a.index===0),r.findIndex(a=>a.index===1),r.findIndex(a=>a.index===2),r.findIndex(a=>a.index===3)],i=[50,10,-10,-30];if(new Set([r[0].score,r[1].score,r[2].score,r[3].score]).size!==4){let a=0;for(;a<3;){let l=a;for(;l<3&&r[a].score===r[l+1].score;)l+=1;if(a!==l){const c=i.reduce((p,m,y)=>p+(y>=a&&y<=l?m:0),0),u=l-a+1,d=Math.round(c*(u===3&&c%3!==0?.4:1/u)),h=Math.round(c*(u===3&&c%3!==0?.3:1/u));i[a]=d;for(let p=a+1;p<=l;p++)i[p]=h}a=l+1}}return{result:{playerEast:{score:e.playerResults[0].afterScore,ranking:(n[0]+1).toString(),point:(e.playerResults[0].afterScore-3e4)/1e3+i[n[0]],penalty:e.playerResults[0].isRedCarded?-30:0,penaltyReason:e.playerResults[0].isRedCarded?"紅牌":""},playerSouth:{score:e.playerResults[1].afterScore,ranking:(n[1]+1).toString(),point:(e.playerResults[1].afterScore-3e4)/1e3+i[n[1]],penalty:e.playerResults[1].isRedCarded?-30:0,penaltyReason:e.playerResults[1].isRedCarded?"紅牌":""},playerWest:{score:e.playerResults[2].afterScore,ranking:(n[2]+1).toString(),point:(e.playerResults[2].afterScore-3e4)/1e3+i[n[2]],penalty:e.playerResults[2].isRedCarded?-30:0,penaltyReason:e.playerResults[2].isRedCarded?"紅牌":""},playerNorth:{score:e.playerResults[3].afterScore,ranking:(n[3]+1).toString(),point:(e.playerResults[3].afterScore-3e4)/1e3+i[n[3]],penalty:e.playerResults[3].isRedCarded?-30:0,penaltyReason:e.playerResults[3].isRedCarded?"紅牌":""}},rounds:t.map(a=>({_key:fs(),type:Iye[a.resultType],code:`${a.roundCount}.${a.extendedRoundCount}`,playerEast:Ov(a,"0"),playerSouth:Ov(a,"1"),playerWest:Ov(a,"2"),playerNorth:Ov(a,"3")}))}};function Ft({signed:t,className:e,positiveClassName:r,negativeClassName:n,value:i,animated:o,hideZero:s,title:a}){const[l,c]=E.useState(i),u=E.useRef(null),d=E.useCallback(m=>m===0?s?"":m.toLocaleString("en-US"):m>0?`${t?"+":""}${Math.floor(m).toLocaleString("en-US")}`:Math.floor(m).toLocaleString("en-US"),[s,t]),h=E.useMemo(()=>d(l),[d,l]),p=E.useMemo(()=>i>0?`${e??""} ${r??""}`:i<0?`${e??""} ${n??""}`:e,[e,n,r,i]);return E.useEffect(()=>{if(l!==i)if(o){for(let g=16;g<1e3;g+=16)setTimeout(()=>{u.current&&(u.current.innerText=Math.floor(l-(l-i)*(g/1e3)).toLocaleString("en-US"))},g);setTimeout(()=>{c(i)},1016)}else c(i)},[o,l,i]),E.useEffect(()=>{u.current&&(u.current.innerText=h)},[h]),f.jsx("span",{title:a,ref:u,className:p})}const TF={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function Oo({className:t,children:e,...r}){const n=E.useMemo(()=>TF[e==null?void 0:e.toString()]??TF.default,[e]);return f.jsx("div",{className:`mahjong-tile ${n} ${t}`,...r})}function Ha({player:t,playerIndex:e,score:r,scoreChanges:n=[],point:i,ranking:o,isEast:s,isRiichi:a,isYellowCarded:l,isRedCarded:c,waitingTiles:u,onClickWaitingTiles:d,showPointAndRanking:h,className:p,...m}){const[y,g]=E.useState(r),[b,v]=E.useState(null),x=E.useMemo(()=>PO(t.color??"#000000"),[t.color]),S=E.useMemo(()=>!!b,[b]);return E.useEffect(()=>{r!==y&&(v(n),setTimeout(()=>{g(r)},2550),setTimeout(()=>{v(null)},3e3))},[r,n,y]),f.jsxs("div",{className:"relative min-w-[5.35em] mx-auto [&_.hide-if-changing]:transition-opacity [&_.hide-if-changing]:data-[score-changing='1']:opacity-0 overflow-visible","data-score-changing":S?"1":"0",children:[f.jsxs("div",{className:"absolute top-[0.05em] bottom-[0.15em] -left-[0.1em] -right-[0.1em] rounded-[0.1em] overflow-hidden -z-50",children:[l&&f.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[yellowPenaltyAni_8s_ease-in-out_1]"}),c&&f.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[redPenaltyAni_8s_ease-in-out_1]"})]}),l&&f.jsx("div",{className:"absolute -top-[0.4em] left-0 h-[0.5em] w-[0.37em] bg-[#ffe100] rounded-[0.05em]"}),c&&f.jsx("div",{className:"absolute -top-[0.4em] left-[0.45em] h-[0.5em] w-[0.37em] bg-[#ff1900] rounded-[0.05em]"}),f.jsxs("div",{className:"flex items-end gap-x-[0.1em]",children:[f.jsxs("div",{className:"shrink-0 w-[1.75em] h-full relative -bottom-[0.085em] -left-[0.085em]",children:[f.jsx("div",{className:"absolute w-full h-full bg-[#d1b571] overflow-hidden rounded-[0.1em]",style:{opacity:a?1:0},children:f.jsx("div",{className:"origin-bottom w-[200%] h-[100%] bg-[#d1291d] animate-[riichi_8s_ease-in-out_infinite]"})}),f.jsx("div",{className:"relative z-10 w-full aspect-[90/125] p-[0.085em]",children:f.jsxs("div",{className:"w-full h-full bg-white rounded-[0.08em] overflow-hidden",style:{background:`linear-gradient(180deg, ${t.color}, ${x})`},children:[t.teamPicUrl&&f.jsx("div",{className:"absolute inset-[0.085em] overflow-hidden",children:f.jsx("img",{className:"absolute max-w-[none] h-[2.2em] w-[2.2em] opacity-30 animate-[scrollFromRightToLeft_12s_linear_infinite]",src:t.teamPicUrl,alt:t.name})}),t.proPicUrl&&f.jsx("img",{className:"relative z-10 w-full h-full rounded-[0.08em]",src:t.proPicUrl,alt:t.name}),t.nickname&&f.jsx("div",{className:"absolute bottom-[0.085em] left-[0.085em] right-[0.085em] rounded-b-[0.08em] bg-[linear-gradient(to_top,#00000060,#00000050_70%,transparent)] text-white z-20",children:f.jsx("p",{className:"text-center text-[0.25em] font-semibold pb-[0.25em] pt-[0.5em]",children:t.nickname})})]})})]}),f.jsxs("div",{className:"flex-1 flex flex-col gap-y-[0.125em] items-start justify-end",children:[f.jsxs("div",{className:"bg-black bg-opacity-60 rounded text-[0.5em] flex gap-x-[0.2em] p-[0.1em] pl-[0.2em] pr-[0.2em] opacity-0 transition-opacity data-[has-waiting-tiles='1']:opacity-100 hide-if-changing cursor-pointer","data-has-waiting-tiles":u&&u.length>0||d?"1":"0",onClick:d,"data-player-index":e,children:[f.jsx("div",{className:"flex-1 leading-none min-h-[1.19em] flex flex-wrap gap-[0.15em]",children:u==null?void 0:u.map(_=>f.jsx(Oo,{className:"inline-block align-bottom w-[0.85em] animate-[fadeInFromLeft_1s_ease-in-out]",children:_},_))}),f.jsx("div",{className:"bg-[#FFFFFF] w-[4px]"}),f.jsxs("div",{className:"text-[#FFFFFF] text-[0.4em] leading-[1.3em] flex items-center",children:["待",f.jsx("br",{}),"牌"]})]}),f.jsxs("div",{className:`relative w-full text-left bg-white px-[0.1em] pb-[0.05em] pt-[0.08em] ${p}`,...m,style:{background:`linear-gradient(260deg, transparent, transparent 22px, ${x} 23px, ${t.color} 100%`,textShadow:"#00000048 2px 2px 3px, #00000048 -2px -2px 3px, #00000048 -2px 2px 3px, #00000048 2px -2px 3px, #00000048 0 0 6px"},children:[f.jsxs("div",{className:"flex flex-col justify-center gap-y-[0.075em] mt-[0.04em]",children:[f.jsx("div",{className:"text-[0.1875em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",children:t.title||"　"}),f.jsx("div",{className:"text-[0.3125em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",style:{transformOrigin:"left",transform:(t.name||"").length>=17?"scaleX(0.9)":"scaleX(1)"},children:t.name})]}),b&&f.jsx("div",{className:"absolute bottom-[2.75em] pr-[0.125em] left-0 text-[0.5625em] leading-none animate-[drop_3s_ease-in-out] font-numeric",children:b.map(_=>f.jsx("div",{children:f.jsx(Ft,{signed:!0,value:_,positiveClassName:"text-[#09eb09]",negativeClassName:"text-[#eb0000]"})}))}),f.jsxs("div",{className:"relative mt-[0.12em] mb-[0.03em]",children:[f.jsx("p",{className:"relative text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:h?0:1,bottom:h?"1em":0},children:f.jsx(Ft,{animated:!0,value:y})}),f.jsxs("p",{className:"absolute left-0 right-[0.25em] text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:h?1:0,bottom:h?0:"-1em"},children:[ro(i),f.jsx("span",{className:"text-[0.8em]",children:"pt"}),f.jsx("span",{className:"absolute right-0 bottom-0 text-[0.75em]",children:id(o)})]})]})]})]})]}),f.jsx("div",{className:`mt-[0.2em] h-[0.075em] rounded-full ${s&&"bg-red-500"}`})]})}function ds({roundCount:t,extendedRoundCount:e,max:r=16,...n}){const i=E.useMemo(()=>Tye(t,e??0,r),[t,r,e]);return f.jsx("span",{...n,children:i})}ds.defaultProps={extendedRoundCount:0};const Rv=({player:t})=>f.jsxs("div",{className:"border-b-4 pb-1",style:{borderColor:t.color},children:[f.jsx("p",{className:"text-sm text-neutral-600",children:t.title}),f.jsx("p",{className:"font-bold",children:t.name})]});function jv({value:t}){return f.jsx(Ft,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const $v=({matchRound:t,playerIndex:e})=>f.jsxs("span",{children:[t.playerResults[e].isRiichi&&f.jsx("span",{className:"text-xs",children:"立"}),t.resultType===Ve.Ron&&t.playerResults[e].type===yt.Lose&&f.jsx("span",{className:"text-xs",children:"統"}),t.resultType===Ve.Ron&&t.playerResults[e].type===yt.Win&&f.jsx("span",{className:"text-xs",children:"和"}),t.resultType===Ve.SelfDrawn&&t.playerResults[e].type===yt.Win&&f.jsx("span",{className:"text-xs",children:"摸"}),t.resultType===Ve.Exhausted&&t.playerResults[e].type===yt.Win&&f.jsx("span",{className:"text-xs",children:"聽"})]});function Ag({players:t,matchRounds:e,...r}){const n=E.useMemo(()=>Object.entries(e??{}),[e]);return f.jsxs("table",{...r,children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[f.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),f.jsx("th",{className:"w-1/4",children:f.jsx(Rv,{player:t[0]})}),f.jsx("th",{className:"w-1/4",children:f.jsx(Rv,{player:t[1]})}),f.jsx("th",{className:"w-1/4",children:f.jsx(Rv,{player:t[2]})}),f.jsx("th",{className:"w-1/4",children:f.jsx(Rv,{player:t[3]})})]})}),f.jsxs("tbody",{children:[n[0]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center"}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:n[0][1].playerResults[0].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:n[0][1].playerResults[1].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:n[0][1].playerResults[2].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:n[0][1].playerResults[3].beforeScore})})]}),n.map(([i,o])=>o.resultType===Ve.Hotfix?f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),f.jsx("td",{className:"text-center",children:o.playerResults[0].afterScore}),f.jsx("td",{className:"text-center",children:o.playerResults[1].afterScore}),f.jsx("td",{className:"text-center",children:o.playerResults[2].afterScore}),f.jsx("td",{className:"text-center",children:o.playerResults[3].afterScore})]},i):f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap",children:f.jsx(ds,{roundCount:o.roundCount,extendedRoundCount:o.extendedRoundCount,max:8,className:"px-4"})}),f.jsxs("td",{className:"text-center",children:[f.jsx(jv,{value:o.playerResults[0].afterScore-o.playerResults[0].beforeScore})," ",f.jsx($v,{matchRound:o,playerIndex:"0"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(jv,{value:o.playerResults[1].afterScore-o.playerResults[1].beforeScore})," ",f.jsx($v,{matchRound:o,playerIndex:"1"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(jv,{value:o.playerResults[2].afterScore-o.playerResults[2].beforeScore})," ",f.jsx($v,{matchRound:o,playerIndex:"2"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(jv,{value:o.playerResults[3].afterScore-o.playerResults[3].beforeScore})," ",f.jsx($v,{matchRound:o,playerIndex:"3"})]})]},i)),n[n.length-1]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16"}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:n[n.length-1][1].playerResults[0].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:n[n.length-1][1].playerResults[1].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:n[n.length-1][1].playerResults[2].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:n[n.length-1][1].playerResults[3].afterScore})})]})]})]})}function Oye({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n,matchCurrentRoundDoras:i}=es(t);return!e||!n?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[f.jsxs("div",{className:"shrink-0 rounded-[1rem] bg-black bg-opacity-50 p-2 flex items-stretch gap-x-4",children:[f.jsx("div",{className:"text-[2.5rem] leading-none border-[.25rem] rounded-[.75rem] pb-[0.3em] pt-[0.2em] px-4 border-current flex items-center justify-center",children:f.jsx(ds,{roundCount:n.roundCount,max:8})}),f.jsxs("div",{className:"flex flex-col justify-around",children:[f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-4"})}),f.jsx("div",{children:n.extendedRoundCount??0})]}),f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-4"})}),f.jsx("div",{children:n.cumulatedThousands??0})]})]}),f.jsx("div",{className:"flex items-center gap-x-2",children:i.map((o,s)=>f.jsx(Oo,{className:"w-9 cursor-pointer","data-index":s,children:o},o))})]}),f.jsx("div",{className:"flex-1"})]}),f.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(o=>f.jsx("div",{className:"flex gap-x-2 items-center",children:f.jsx("div",{className:"flex-1 text-[2.5rem]",children:f.jsx(Ha,{player:e.players[o],score:n.playerResults[o].beforeScore,scoreChanges:n.playerResults[o].prevScoreChanges,isEast:Zn(o,n.roundCount),isRiichi:n.playerResults[o].isRiichi,isYellowCarded:n.playerResults[o].isYellowCarded,isRedCarded:n.playerResults[o].isRedCarded})})}))}),f.jsx(Ag,{players:e.players,matchRounds:r,className:"w-full table-auto"})]})})}const IF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function Rye({matchId:t}){const e=E.useMemo(()=>`${window.location.origin}/match/${t}/control`,[t]),r=E.useCallback(()=>{window.navigator.clipboard.writeText(IF)},[]);return f.jsxs("div",{className:"flex items-center justify-center gap-x-8",children:[f.jsxs("div",{children:[f.jsx("p",{children:"1. 打開OBS"}),f.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),f.jsxs("p",{children:["- 網址 = 此頁的網址 ",f.jsx("strong",{children:window.location.href}),f.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",f.jsx("br",{})," - 自訂CSS ="," ",f.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[f.jsx("pre",{children:IF}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx("button",{type:"button",onClick:r,children:f.jsx("i",{className:"bi bi-copy"})})})]})]})]}),f.jsxs("div",{children:[f.jsx("p",{children:'3. 在管理後台點擊右上角的 "開始OBS" '}),f.jsx("p",{children:"4. 確定"})]}),f.jsx("div",{className:"shrink-0",children:f.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-center underline",children:[f.jsx("img",{className:"block w-32 h-32",src:fT(e),alt:""}),f.jsx("p",{children:"管理後台"})]})})]})}function jye({han:t,fu:e,yakumanCount:r,...n}){const i=E.useMemo(()=>{if(r&&r>0)return r===1?"役滿":r===2?"兩倍役滿":r===3?"三倍役滿":r===4?"四倍役滿":`${r}倍役滿`;if(t>=11)return"三倍滿";if(t>=8)return"倍滿";if(t>=6)return"跳滿";if(t>=5)return"滿貫";if(t>=4&&typeof e<"u"&&e>=40)return"滿貫";if(t>=3&&typeof e<"u"&&e>=70)return"滿貫";if(typeof e<"u")return},[r,t,e]);return i?f.jsx("div",{...n,children:i}):f.jsxs("div",{...n,children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:t}),f.jsx("span",{children:"飜"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:e}),f.jsx("span",{children:"符"})]})]})}const $ye=({active:t,color:e="#000000",largeTeamPicUrl:r})=>f.jsxs(f.Fragment,{children:[f.jsx("img",{src:"/images/r.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/e.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/a.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/c.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/h.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/score-thousand.png",className:"w-0 h-0 opacity-0"}),t&&f.jsxs("div",{className:"reach-animation",children:[f.jsx("div",{className:"reach-background",style:{background:`linear-gradient(to bottom, transparent, ${e}80 40%, ${e}80 60%, transparent)`}}),f.jsx("div",{className:"reach-animation-logo",style:{backgroundImage:`url("${r}")`}}),f.jsx("div",{className:"reach-animation-bar",style:{backgroundImage:'url("/images/score-thousand.png")'}}),f.jsxs("div",{className:"reach-animation-text",children:[f.jsx("div",{className:"reach-animation-text-character c1",style:{backgroundImage:'url("/images/r.png")'}}),f.jsx("div",{className:"reach-animation-text-character c2",style:{backgroundImage:'url("/images/e.png")'}}),f.jsx("div",{className:"reach-animation-text-character c3",style:{backgroundImage:'url("/images/a.png")'}}),f.jsx("div",{className:"reach-animation-text-character c4",style:{backgroundImage:'url("/images/c.png")'}}),f.jsx("div",{className:"reach-animation-text-character c5",style:{backgroundImage:'url("/images/h.png")'}})]})]})]});function BG({params:{matchId:t}}){const{match:e,matchCurrentRound:r,matchCurrentRoundDoras:n}=es(t),i=E.useMemo(()=>{if(!e||!r)return[];const d=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],h=Object.entries(r.playerResults).map(([p,m])=>({playerIndex:p,score:m.afterScore})).sort((p,m)=>m.score-p.score).map((p,m)=>({playerIndex:p.playerIndex,...d[m],point:(p.score-3e4)/1e3+d[m].point})).reduce((p,m)=>(p[m.playerIndex]={point:m.point,ranking:m.ranking},p),{});return["0","1","2","3"].map(p=>({...e.players[p],color:e.players[p].color,currentStatus:{...r.playerResults[p],isEast:Zn(p,r.roundCount),...h[p]}}))},[e,r]),[o,s]=E.useState(null),[a,l]=E.useState(),[c,u]=E.useState({0:!1,1:!1,2:!1,3:!1});return E.useEffect(()=>{["0","1","2","3"].forEach(d=>{typeof(r==null?void 0:r.playerResults[d].isRiichi)<"u"&&r.playerResults[d].isRiichi!==c[d]&&(r.playerResults[d].isRiichi===!0&&(s(d),setTimeout(()=>{s(null)},2800)),u(h=>({...h,[d]:r.playerResults[d].isRiichi})))})},[r==null?void 0:r.playerResults,c]),E.useEffect(()=>{a!==(r==null?void 0:r.code)&&(l(r==null?void 0:r.code),u({0:!1,1:!1,2:!1,3:!1}))},[r==null?void 0:r.code,a]),!e||!r?f.jsx("div",{className:"text-current",children:"對局讀取失敗。"}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relativew-screen h-screen mx-auto py-8 overflow-hidden text-[4.8rem] transition-opacity",style:{background:"linear-gradient(transparent, transparent 73%, rgba(0, 0, 0, 0.4))",opacity:o!==null?0:1},children:[f.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[f.jsxs("div",{className:"relative text-[0.6em] p-2 pl-10 pr-[1em] flex items-center gap-x-8",style:{transition:"width 0.3s, left 1.5s, opacity 1.5s",left:e.hideHeader?"-100%":"0",opacity:e.hideHeader?"0":"1",background:"linear-gradient(280deg, transparent, transparent 0.5em, #00000080 0.5em, #00000080 100%)"},children:[f.jsxs("div",{className:"",children:[f.jsx("div",{className:"text-[0.5em]",children:e.name}),f.jsxs("div",{className:"flex gap-x-8 items-center",children:[f.jsx("div",{className:"min-w-[3.5em]",children:f.jsx(ds,{roundCount:r.roundCount,max:8})}),f.jsxs("div",{className:"flex flex-col justify-around gap-2",children:[f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-[0.25em] mt-[0.1em]"})}),f.jsx("div",{className:"text-[0.45em] leading-none",children:r.extendedRoundCount??0})]}),f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-[0.25em] mt-[0.1em]"})}),f.jsx("div",{className:"text-[0.45em] leading-none",children:r.cumulatedThousands??0})]})]})]})]}),f.jsx("div",{className:"flex items-center gap-x-2",children:n.map(d=>f.jsx(Oo,{className:"w-[1.4em] animate-[fadeInFromLeft_0.5s_ease-in-out]",children:d},d))})]}),f.jsx("div",{className:"flex-1"})]}),f.jsx("div",{className:"flex items-center justify-center mt-20",children:f.jsx("div",{className:"body-hidden mx-20 text-[16px]",children:f.jsx(Rye,{matchId:t})})}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 items-end gap-x-8 text-white animate-[fadeInFromBottom_1s_ease-in-out]",style:{opacity:e.activeResultDetail?0:1,bottom:e.activeResultDetail?"-150px":0,transition:"opacity 0.5s, bottom 0.5s"},children:i.map(d=>f.jsxs("div",{className:"w-[5.35em]",children:[f.jsx(Ha,{player:d,score:d.currentStatus.afterScore,scoreChanges:d.currentStatus.scoreChanges,isEast:d.currentStatus.isEast,isRiichi:d.currentStatus.isRiichi&&r.resultType===Ve.Unknown,waitingTiles:r.resultType===Ve.Unknown?d.currentStatus.waitingTiles:[],isYellowCarded:d.currentStatus.isYellowCarded,isRedCarded:d.currentStatus.isRedCarded,ranking:d.currentStatus.ranking,point:d.currentStatus.point,showPointAndRanking:!!e.showPoints}),f.jsx("img",{src:d.largeTeamPicUrl,className:"w-0 h-0"})]},d.name))}),e.activeResultDetail&&f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 gap-x-8 text-white transition-opacity animate-[fadeInFromBottom_1s_ease-in-out]",children:[f.jsx("div",{className:"w-[5.35em]",children:f.jsx(Ha,{player:e.players[e.activeResultDetail.winnerPlayerIndex],score:r.playerResults[e.activeResultDetail.winnerPlayerIndex].afterScore})}),f.jsxs("div",{className:"col-span-3 bg-black bg-opacity-50 py-6 px-8 text-[0.5em] flex items-stretch gap-x-4",children:[f.jsx("div",{className:`flex-1 flex flex-wrap gap-x-[0.75em] ${e.activeResultDetail.yakumanCount>0?"self-center justify-center":""}`,children:e.activeResultDetail.yakus.map(({label:d})=>f.jsx("span",{children:d},d))}),f.jsx("div",{className:"shrink-0 w-px bg-neutral-200"}),f.jsx("div",{className:"shrink-0 min-w-[3em] self-center text-green-400 text-[1.4em] text-center",children:f.jsx(jye,{han:e.activeResultDetail.han,fu:e.activeResultDetail.fu,yakumanCount:e.activeResultDetail.yakumanCount})})]})]})]}),f.jsx("div",{className:"fixed inset-0 pointer-events-none",children:f.jsx($ye,{active:o!==null,color:o&&i[o].color,largeTeamPicUrl:o&&i[o].largeTeamPicUrl})})]})}function Yn({open:t,title:e,children:r,onClose:n,hideCloseButton:i}){const o=E.useRef(null);E.useEffect(()=>{if(o!=null&&o.current&&t){o.current.showModal();const{current:a}=o;return()=>{a.close()}}},[t]);const s=E.useCallback(()=>{n==null||n()},[n]);return f.jsx("dialog",{ref:o,onClose:s,children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex mb-4",children:[f.jsx("div",{className:"flex-1 items-center font-bold text-lg",children:e}),!i&&f.jsx("div",{className:"shrink-0",children:f.jsx("button",{type:"button",className:"absolute top-4 right-4",onClick:s,children:f.jsx("i",{className:"bi bi-x"})})})]}),r]})})}const TO=()=>f.jsx("div",{className:"inline-block w-4 h-4 border-2 border-neutral-800 border-l-transparent rounded-full animate-spin"});function Dye({title:t,children:e,okButtonText:r="確認",cancelButtonText:n="取消",onClickOk:i,onClickCancel:o,...s}){const[a,l]=E.useState(!1),c=E.useCallback(()=>{i&&(l(!0),i().finally(()=>{l(!1)}))},[i]);return f.jsxs(Yn,{title:t,...s,children:[f.jsx("div",{className:"mb-4",children:e}),f.jsxs("div",{className:"flex gap-x-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Re,{type:"button",color:"secondary",className:"w-full",onClick:o,disabled:a,children:n})}),f.jsx("div",{className:"flex-1",children:f.jsx(Re,{type:"button",color:"danger",className:"w-full",onClick:c,disabled:a,children:a?f.jsx(TO,{}):r})})]})]})}const Mye={isShowConfirmDialog:!1,setIsShowConfirmDialog:()=>{},confirmDialogOptions:{title:"警告"},setConfirmDialogOptions:()=>{}},UG=E.createContext(Mye);function Fye({children:t}){const[e,r]=E.useState(!1),[n,i]=E.useState({title:"警告"}),o=E.useMemo(()=>({isShowConfirmDialog:e,setIsShowConfirmDialog:r,confirmDialogOptions:n,setConfirmDialogOptions:i}),[n,e]),s=E.useCallback(()=>{r(!1)},[]);return f.jsxs(UG.Provider,{value:o,children:[t,f.jsx(Dye,{open:e,okButtonText:n.okButtonText,cancelButtonText:n.cancelButtonText,onClickOk:n.onClickOk,onClickCancel:n.onClickCancel,onClose:s,...n,hideCloseButton:!0,children:n.content})]})}const Lye=()=>{const t=E.useContext(UG);return{showConfirmDialog:E.useCallback(r=>{const n=async()=>(r.onClickOk??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)}),i=async()=>(r.onClickCancel??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)});t.setConfirmDialogOptions({...r,onClickOk:n,onClickCancel:i}),t.setIsShowConfirmDialog(!0)},[t])}};function VG(){var t=E.useRef(!1),e=E.useCallback(function(){return t.current},[]);return E.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e}function Kw(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={loading:!1});var n=E.useRef(0),i=VG(),o=E.useState(r),s=o[0],a=o[1],l=E.useCallback(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=++n.current;return s.loading||a(function(h){return vx(vx({},h),{loading:!0})}),t.apply(void 0,c).then(function(h){return i()&&d===n.current&&a({value:h,loading:!1}),h},function(h){return i()&&d===n.current&&a({error:h,loading:!1}),h})},e);return[s,l]}function Bye(t,e){e===void 0&&(e=[]);var r=Kw(t,e,{loading:!0}),n=r[0],i=r[1];return E.useEffect(function(){i()},[i]),n}var tA=function(){};function rA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function nA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Uye=typeof window<"u",Vye=function(t,e){return typeof e=="boolean"?e:!t},Co=function(t){return E.useReducer(Vye,t)},Wye=function(t,e){return function(r,n){var i=r.getData("text/uri-list");if(i){(t.onUri||tA)(i,n);return}if(r.files&&r.files.length){(t.onFiles||tA)(Array.from(r.files),n);return}r.items&&r.items.length&&r.items[0].getAsString(function(o){e&&(t.onText||tA)(o,n)})}},zye=function(t,e){return{onDragOver:function(r){r.preventDefault()},onDragEnter:function(r){r.preventDefault(),e(!0)},onDragLeave:function(){e(!1)},onDrop:function(r){r.preventDefault(),r.persist(),e(!1),t(r.dataTransfer,r)},onPaste:function(r){r.persist(),t(r.clipboardData,r)}}},Gye=function(t){t===void 0&&(t={});var e=t.onFiles,r=t.onText,n=t.onUri,i=VG(),o=E.useState(!1),s=o[0],a=o[1],l=E.useMemo(function(){return Wye(t,i())},[e,r,n]),c=E.useMemo(function(){return zye(l,a)},[l,a]);return[c,{over:s}]},qye=function(t,e){var r=E.useRef(function(){});E.useEffect(function(){r.current=t}),E.useEffect(function(){if(e!==null){var n=setInterval(function(){return r.current()},e||0);return function(){return clearInterval(n)}}},[e])},NF=function(t,e){return new URLSearchParams(t).get(e)},Hye=function(t){var e=window.location,r=E.useState(function(){return NF(e.search,t)}),n=r[0],i=r[1];return E.useEffect(function(){var o=function(){i(NF(e.search,t))};return rA(window,"popstate",o),rA(window,"pushstate",o),rA(window,"replacestate",o),function(){nA(window,"popstate",o),nA(window,"pushstate",o),nA(window,"replacestate",o)}},[]),n},Kye=function(){return null};const kF=Uye?Hye:Kye,Qye=[["1m","2m","3m","4m","5m","6m","7m","8m","9m","0m"],["1p","2p","3p","4p","5p","6p","7p","8p","9p","0p"],["1s","2s","3s","4s","5s","6s","7s","8s","9s","0s"],["1z","2z","3z","4z","5z","6z","7z"]],OF={m:0,p:1,s:2,z:3},Yye=(t,e)=>{const[r,n]=[t[0],t[1]],[i,o]=[e[0],e[1]];return n!==o?OF[n]-OF[o]:parseInt(r,10)-parseInt(i,10)};function RF({onSubmit:t,onRemove:e,canRemove:r,hideRedTiles:n,multiple:i,defaultValue:o}){const[s,a]=E.useState([]),l=E.useCallback(d=>{var p;const h=(p=d.currentTarget)==null?void 0:p.getAttribute("data-key");h&&a(i?m=>{const y=m.indexOf(h);if(y===-1)return[...m,h].sort(Yye);const g=[...m];return g.splice(y,1),g}:[h])},[i]),c=E.useCallback(()=>{s&&t&&(t==null||t(s),a([]))},[t,s]),u=E.useCallback(()=>{r&&(e==null||e(),a([]))},[r,e]);return E.useEffect(()=>{a(o??[])},[o]),f.jsxs("div",{children:[f.jsx("div",{className:`mb-4 grid ${n?"grid-cols-9":"grid-cols-10"} gap-1 lg:gap-x-2 lg:gap-y-4 items-center text-center`,children:Qye.map(d=>d.map(h=>(!h.startsWith("0")||!n)&&f.jsx("button",{type:"button",onClick:l,"data-key":h,className:`${s.indexOf(h)!==-1?"bg-blue-400":"bg-black bg-opacity-20"} rounded p-1 lg:p-2`,children:f.jsx(Oo,{children:h})})))}),f.jsxs("div",{className:"flex gap-x-4",children:[r&&f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",type:"button",color:"secondary",onClick:u,children:"移除"})}),f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",type:"button",color:"primary",onClick:c,disabled:s.length===0,children:"確定"})})]})]})}const Dv=({teamPlayer:t})=>f.jsx(Ha,{player:lp(t),score:25e3}),Xye=({matchDTO:t})=>{const e=xz(),r=E.useCallback(async()=>{if(!confirm("確定資料都正確了嗎？要開始對局了嗎？"))return;const n={code:t._id,name:t.name,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:{startingScore:t.tournament.startingScore,isManganRoundUp:t.tournament.startingScore?"1":"0",yakuMax:t.tournament.yakuMax,yakumanMax:t.tournament.yakumanMax},players:{0:lp(t.playerEast),1:lp(t.playerSouth),2:lp(t.playerWest),3:lp(t.playerNorth)},activeResultDetail:null};await e.set(`matches/${t._id}`,n);const i=parseInt(t.tournament.startingScore),o={matchId:t._id,code:Rx(t._id,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await e.push("matchRounds",o),await e.set("obs/1",{matchId:t._id})},[t._id,t.name,t.playerEast,t.playerNorth,t.playerSouth,t.playerWest,t.tournament.startingScore,t.tournament.yakuMax,t.tournament.yakumanMax,e]);return f.jsx("div",{className:"container mx-auto max-w-screen-md py-16",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-red-500 p-4 text-white space-y-2",children:[f.jsx("div",{className:"text-center text-6xl",children:f.jsx("i",{className:"bi bi-exclamation-triangle"})}),f.jsxs("p",{className:"text-center text-xl",children:["這是開始直播前的最後機會，請檢查以下內容是否完全正確。",f.jsx("br",{}),"一旦對局開始，要修改內容就很麻煩。",f.jsx("br",{}),f.jsx("br",{}),"如果要修改，請在資料庫修改後，刷新此頁面。"]})]}),f.jsxs("h4",{className:"text-3xl",children:[f.jsx("span",{className:"text-neutral-600",children:"對局名稱:"})," ",f.jsx("span",{className:"font-bold",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-10 gap-x-2",children:[f.jsxs("div",{className:"col-span-4 col-start-4",children:[f.jsx("div",{className:"text-[48px]",children:f.jsx(Dv,{teamPlayer:t.playerWest})}),f.jsx("p",{className:"text-center text-4xl",children:"西"})]}),f.jsxs("div",{className:"col-span-4 col-start-1 flex items-center gap-x-2",children:[f.jsx("div",{className:"flex-1 text-[48px]",children:f.jsx(Dv,{teamPlayer:t.playerNorth})}),f.jsx("div",{className:"shrink-0 text-4xl",children:"北"})]}),f.jsx("div",{className:"col-span-2"}),f.jsxs("div",{className:"col-span-4 flex items-center gap-x-2",children:[f.jsx("div",{className:"shrink-0 text-4xl",children:"南"}),f.jsx("div",{className:"flex-1 text-[48px]",children:f.jsx(Dv,{teamPlayer:t.playerSouth})})]}),f.jsxs("div",{className:"col-span-4 col-start-4",children:[f.jsx("p",{className:"text-center text-4xl",children:"東"}),f.jsx("div",{className:"text-[48px]",children:f.jsx(Dv,{teamPlayer:t.playerEast})})]})]}),f.jsxs("div",{className:"text-2xl",children:[f.jsx("span",{className:"text-neutral-600",children:"聯賽:"})," ",f.jsx("span",{className:"font-bold",children:t.tournament.name})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"起始點數"}),f.jsx("p",{className:"text-4xl",children:t.tournament.startingScore})]}),f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"切上滿貫"}),f.jsx("p",{className:"text-4xl",children:t.tournament.isManganRoundUp?"有":"沒有"})]}),f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"翻數上限"}),f.jsx("p",{className:"text-4xl",children:gye(t.tournament.yakuMax)})]}),f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"役滿上限"}),f.jsx("p",{className:"text-4xl",children:vye(t.tournament.yakumanMax)})]})]}),f.jsx("div",{className:"pt-8",children:f.jsx(Re,{className:"w-full",size:"xlarge",variant:"contained",color:"success",onClick:r,children:"確認以上內容無誤，開始對局"})})]})})},Jye=({players:t,currentRound:e,onAction:r})=>{const n=E.useCallback(i=>{const o=i.currentTarget.getAttribute("data-player-index"),s=i.currentTarget.getAttribute("data-action");r(o,s)},[r]);return f.jsx("div",{className:"space-y-2",children:["0","1","2","3"].map(i=>{var o,s;return f.jsx("table",{className:"w-full border border-black ring-2 ring-transparent data-[east='1']:ring-red-500 bg-white","data-east":Zn(i,e.roundCount)?"1":"0",children:f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 text-white w-32 relative",style:{background:t[i].color},children:[f.jsx("button",{className:"absolute text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ffe100",width:"2rem",height:"2.5rem",top:"0rem",left:"-2.5rem",opacity:e.playerResults[i].isYellowCarded?1:.35},"data-player-index":i,"data-action":"yellow-card",onClick:n,children:"黃牌"}),f.jsx("button",{className:"absolute text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ff1900",width:"2rem",height:"2.5rem",top:"2.7rem",left:"-2.5rem",opacity:e.playerResults[i].isRedCarded?1:.35},"data-player-index":i,"data-action":"red-card",onClick:n,children:"紅牌"}),f.jsxs("div",{className:"flex gap-x-1 items-center w-32",children:[f.jsx("img",{className:"shrink-0 w-8 h-8 inline-block",src:t[i].teamPicUrl,alt:t[i].title}),f.jsx("img",{className:"shrink-0 w-[1.44rem] h-8 inline-block",src:t[i].proPicUrl,alt:t[i].name}),f.jsxs("div",{className:"flex-1 align-middle overflow-hidden",children:[f.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].title}),f.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].nickname||t[i].name})]})]})]}),f.jsx("td",{className:"px-2 border-b border-black",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":i,"data-action":"waitingTile",onClick:n,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(o=e.playerResults[i].waitingTiles)==null?void 0:o.map(a=>f.jsx(Oo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:a},a))})]})}),f.jsxs("td",{className:"whitespace-nowrap w-0 space-y-1 pr-1",rowSpan:2,children:[f.jsxs("div",{className:"space-x-1",children:[f.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"reveal",onClick:n,"data-active":e.playerResults[i].isRevealed?"1":"0",disabled:e.playerResults[i].isRiichi,children:"副露"}),f.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-before",onClick:n,children:["和",t[$G(i)].nickname||"上家"]})]}),f.jsxs("div",{className:"space-x-1",children:[f.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"riichi",onClick:n,"data-active":e.playerResults[i].isRiichi?"1":"0",disabled:e.playerResults[i].isRevealed,children:"立直"}),f.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-opposite",onClick:n,children:["和",t[MG(i)].nickname||"對家"]})]}),f.jsxs("div",{className:"space-x-1",children:[f.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-self",onClick:n,children:"自摸"}),f.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-after",onClick:n,children:["和",t[DG(i)].nickname||"下家"]})]})]})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl",style:{background:t[i].color},children:e.playerResults[i].afterScore}),f.jsx("td",{className:"px-2",children:f.jsxs("button",{className:"py-2 text-left text-xl","data-player-index":i,"data-action":"yaku",onClick:n,children:[f.jsx("span",{className:"mr-2 text-xl",children:"役"}),f.jsx("div",{className:"inline-block space-x-1",children:(s=e.playerResults[i].detail.yakus)==null?void 0:s.map(({label:a})=>f.jsx("span",{children:a},a))})]})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[i].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-minus",onClick:n,children:"-"}),"寶",e.playerResults[i].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-plus",onClick:n,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[i].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-minus",onClick:n,children:"-"}),"赤",e.playerResults[i].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-plus",onClick:n,children:"+"})]})]})})]})]})},i)})})},Zye=[["0","3","1","2"],["3","2","0","1"],["2","1","3","0"],["1","0","2","3"]],ege=({players:t,currentRound:e,onAction:r})=>{var l,c,u,d;const[n,i]=E.useState(0),o=E.useMemo(()=>Zye[n],[n]),s=E.useCallback(h=>{const p=h.currentTarget.getAttribute("data-player-index"),m=h.currentTarget.getAttribute("data-action");r(p,m)},[r]),a=E.useCallback(()=>{i(h=>(h+1)%4)},[]);return f.jsxs("div",{children:[f.jsx("div",{className:"text-center mb-4",children:f.jsxs(Re,{size:"small",onClick:a,children:["逆時針旋轉 ",f.jsx("i",{className:"bi bi-arrow-counterclockwise"})]})}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[0]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[0]].teamPicUrl,alt:t[o[0]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[0]].proPicUrl,alt:t[o[0]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[0]].title}),f.jsx("p",{children:t[o[0]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[0]].color},children:e.playerResults[o[0]].afterScore})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[0],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(l=e.playerResults[o[0]].waitingTiles)==null?void 0:l.map(h=>f.jsx(Oo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[0]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[0]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[0]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[0]].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[0]].isRevealed?"1":"0",disabled:e.playerResults[o[0]].isRiichi,children:"副露"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-before",onClick:s,children:"和上家←"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[0]].isRiichi?"1":"0",disabled:e.playerResults[o[0]].isRevealed,children:"立直"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-after",onClick:s,children:"和下家↑"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-opposite",onClick:s,children:"和對家↖"})]})})})]})}),f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[1]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[1]].teamPicUrl,alt:t[o[1]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[1]].proPicUrl,alt:t[o[1]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[1]].title}),f.jsx("p",{children:t[o[1]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[1]].color},children:e.playerResults[o[1]].afterScore})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[1],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(c=e.playerResults[o[1]].waitingTiles)==null?void 0:c.map(h=>f.jsx(Oo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[1]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[1]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[1]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[1]].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-after",onClick:s,children:"→和下家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[1]].isRevealed?"1":"0",disabled:e.playerResults[o[1]].isRiichi,children:"副露"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-opposite",onClick:s,children:"↗和對家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-before",onClick:s,children:"↑和上家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[1]].isRiichi?"1":"0",disabled:e.playerResults[o[1]].isRevealed,children:"立直"})]})})})]})}),f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[2]].isRiichi?"1":"0",disabled:e.playerResults[o[2]].isRevealed,children:"立直"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-before",onClick:s,children:"和上家↓"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-opposite",onClick:s,children:"和對家↙"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[2]].isRevealed?"1":"0",disabled:e.playerResults[o[2]].isRiichi,children:"副露"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-after",onClick:s,children:"和下家←"})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[2]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[2]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[2]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[2]].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[2],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(u=e.playerResults[o[2]].waitingTiles)==null?void 0:u.map(h=>f.jsx(Oo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[2]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[2]].teamPicUrl,alt:t[o[2]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[2]].proPicUrl,alt:t[o[2]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[2]].title}),f.jsx("p",{children:t[o[2]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[2]].color},children:e.playerResults[o[2]].afterScore})]})]})}),f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-opposite",onClick:s,children:"↘和對家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-after",onClick:s,children:"↓和下家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[3]].isRiichi?"1":"0",disabled:e.playerResults[o[3]].isRevealed,children:"立直"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-before",onClick:s,children:"→和上家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[3]].isRevealed?"1":"0",disabled:e.playerResults[o[3]].isRiichi,children:"副露"})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[3]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[3]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[3]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[3]].detail.redDora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[3],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(d=e.playerResults[o[3]].waitingTiles)==null?void 0:d.map(h=>f.jsx(Oo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[3]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[3]].teamPicUrl,alt:t[o[3]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[3]].proPicUrl,alt:t[o[3]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[3]].title}),f.jsx("p",{children:t[o[3]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[3]].color},children:e.playerResults[o[3]].afterScore})]})]})})]})]})},tge=({tabs:t,onChangeValue:e,defaultValue:r})=>{const[n,i]=E.useState(r),o=E.useCallback(s=>{const a=s.currentTarget.getAttribute("data-value");i(a),e==null||e(a)},[e]);return f.jsx("div",{className:"border-b border-neutral-400",children:t.map(s=>f.jsx("button",{className:"py-2 px-4 border-b-2 border-transparent hover:bg-neutral-200 rounded-t data-[active='1']:border-teal-600 data-[active='1']:text-teal-800 data-[active='1']:bg-teal-100","data-value":s.value,"data-active":n===s.value?"1":"0",onClick:o,children:s.label},s.value))})};function WG({onChange:t,onChangeChecked:e,className:r,...n}){const i=E.useCallback(o=>{t==null||t(o),e==null||e(o.currentTarget.checked)},[t,e]);return f.jsx("input",{className:"mt-[0.3rem] mr-2 h-3.5 w-8 appearance-none rounded-[0.4375rem] bg-neutral-300 dark:bg-neutral-600 before:pointer-events-none before:absolute before:h-3.5 before:w-3.5 before:rounded-full before:bg-transparent before:content-[''] after:absolute after:z-[2] after:-mt-[0.1875rem] after:h-5 after:w-5 after:rounded-full after:border-none after:bg-neutral-100 dark:after:bg-neutral-400 after:shadow-[0_0px_3px_0_rgb(0_0_0_/_7%),_0_2px_2px_0_rgb(0_0_0_/_4%)] after:transition-[background-color_0.2s,transform_0.2s] after:content-[''] checked:bg-blue-600 dark:checked:bg-blue-600 checked:after:absolute checked:after:z-[2] checked:after:-mt-[3px] checked:after:ml-[1.0625rem] checked:after:h-5 checked:after:w-5 checked:after:rounded-full checked:after:border-none checked:after:bg-blue-600 dark:checked:after:bg-blue-600 checked:after:shadow-[0_3px_1px_-2px_rgba(0,0,0,0.2),_0_2px_2px_0_rgba(0,0,0,0.14),_0_1px_5px_0_rgba(0,0,0,0.12)] checked:after:transition-[background-color_0.2s,transform_0.2s] checked:after:content-[''] hover:cursor-pointer focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[3px_-1px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-5 focus:after:w-5 focus:after:rounded-full focus:after:content-[''] checked:focus:border-blue-600 checked:focus:bg-blue-600 checked:focus:before:ml-[1.0625rem] checked:focus:before:scale-100 checked:focus:before:shadow-[3px_-1px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s]",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:i,...n})}function jx({han:t,fu:e,yakumanCount:r,yakumanCountMax:n=10,raw:i,isManganRoundUp:o,...s}){const a=E.useMemo(()=>{if(r&&r>0){const l=Math.min(n,r);return l===1?"役滿":l===2?"兩倍役滿":l===3?"三倍役滿":l===4?"四倍役滿":`${l}倍役滿`}return i?typeof e<"u"&&t<=4?`${t}飜${e}符`:`${t}飜`:t>=11?"三倍滿":t>=8?"倍滿":t>=6?"跳滿":t>=5||t>=4&&typeof e<"u"&&(e>=40||o&&e>=30)||t>=3&&typeof e<"u"&&(e>=70||o&&e>=60)?"滿貫":typeof e<"u"?`${t}飜${e}符`:`${t}飜`},[r,i,t,e,o,n]);return f.jsx("div",{...s,children:a})}const Mv=({options:t,value:e,onChange:r,disabled:n})=>{const[i,o]=E.useState(0),s=E.useMemo(()=>t[i],[i,t]),a=E.useCallback(()=>{const c=Math.max(0,i-1);o(c),r==null||r(t[c].value)},[i,r,t]),l=E.useCallback(()=>{const c=Math.min(t.length-1,i+1);o(c),r==null||r(t[c].value)},[i,r,t]);return E.useEffect(()=>{if(typeof e<"u"&&e!==s.value){const c=t.findIndex(u=>u.value===e);c!==-1&&o(c)}},[s.value,t,e]),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:a,disabled:n||i===0,children:f.jsx("i",{className:"bi bi-dash-circle"})})}),f.jsx("div",{className:"flex-1 text-center text-2xl",children:s.label}),f.jsx("div",{className:"shrink-0",children:f.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:l,disabled:n||i===t.length-1,children:f.jsx("i",{className:"bi bi-plus-circle"})})})]})},Mu=[{id:"riichi",label:"立直",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e["double-riichi"],group:"riichi"},{id:"double-riichi",label:"雙立直",han:2,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e.riichi,group:"riichi"},{id:"ippatsu",label:"一發",han:1,hanIfOpened:0,disableFn:({raw:t})=>!(t.riichi||t["double-riichi"])||!!t.chankan,group:"riichi"},{id:"menzenchin-tsumohou",label:"門前清自摸和",han:1,hanIfOpened:0,hidden:!0,group:"menzenchin-tsumohou"},{id:"tanyao",label:"斷么九",han:1,hanIfOpened:1,disableFn:({raw:t})=>!!t.chantaiyao||!!t["junchan-taiyao"]||!!t["yakuhai-east"]||!!t["yakuhai-south"]||!!t["yakuhai-west"]||!!t["yakuhai-north"]||!!t["yakuhai-haku"]||!!t["yakuhai-hatsu"]||!!t["yakuhai-chun"]||!!t.honroutou||!!t.honitsu||!!t.ittsu,group:"common"},{id:"pinfu",label:"平和",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.chiitoitsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"]||!!e.toitoi,group:"common"},{id:"yakuhai-east",label:"東",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!Zn(e,t)&&!kG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-east",label:"雙東",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-south",label:"南",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!TG(e,t)&&!OG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-south",label:"雙南",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-west",label:"西",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!IG(e,t)&&!RG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-west",label:"雙西",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-north",label:"北",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!NG(e,t)&&!jG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-north",label:"雙北",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-haku",label:"白",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-hatsu",label:"發",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-chun",label:"中",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"shousangen",label:"小三元",han:2,hanIfOpened:2,disableFn:({raw:t})=>[t["yakuhai-haku"],t["yakuhai-hatsu"],t["yakuhai-chun"]].filter(e=>!!e).length!==2,group:"yakuhai"},{id:"haitei-raoyue",label:"海底撈月",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e["rinshan-kaihou"],hiddenIfDisabled:!0,group:"luck"},{id:"houtei-raoyui",label:"河底撈魚",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"rinshan-kaihou",label:"嶺上開花",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e.pinfu||!!e.chiitoitsu||!!e.ryanpeikou||!!e["haitei-raoyue"],hiddenIfDisabled:!0,group:"luck"},{id:"chankan",label:"搶槓",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"chiitoitsu",label:"七對子",han:2,hanIfOpened:0,overrideFu:25,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.ryanpeikou||!!e.pinfu||!!e["sanshku-doujun"]||!!e.ittsu||!!e.chantaiyao||!!e["junchan-taiyao"]||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["rinshan-kaihou"],group:"peikou"},{id:"iipeikou",label:"一盃口",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.ryanpeikou||!!e.chiitoitsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu,group:"peikou"},{id:"ryanpeikou",label:"二盃口",han:3,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.chiitoitsu||!!e["rinshan-kaihou"]||!!e["sanshku-doujun"]||!!e.ittsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"],group:"peikou"},{id:"sanshku-doujun",label:"三色同順",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.ittsu||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chinitsu||!!t.honitsu||!!t.toitoi,group:"row"},{id:"ittsu",label:"一氣通貫",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.tanyao||!!t["sanshku-doujun"]||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.toitoi,group:"row"},{id:"honitsu",label:"混一色",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.chinitsu||!!t.tanyao||!!t["junchan-taiyao"]||!!t["sanshku-doujun"]||!!t["sanshku-doukou"],group:"itsu"},{id:"chinitsu",label:"清一色",han:6,hanIfOpened:5,disableFn:({raw:t})=>!!t.honitsu||!!t.honroutou||!!t.chantaiyao||!!t["sanshku-doukou"],group:"itsu"},{id:"chantaiyao",label:"混全帶么九",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t.tanyao||!!t["junchan-taiyao"]||!!t.honroutou||!!t.chiitoitsu||!!t.chinitsu||!!t.ittsu||!!t.toitoi,group:"taiyao"},{id:"junchan-taiyao",label:"純全帶么九",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t.honroutou||!!t.chiitoitsu||!!t.ittsu||!!t.honitsu||!!t.toitoi,group:"taiyao"},{id:"honroutou",label:"混老頭",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou,group:"taiyao"},{id:"toitoi",label:"對對和",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sanshku-doukou",label:"三色同刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou||!!t.honitsu,group:"column"},{id:"sanankou",label:"三暗刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sankantsu",label:"三槓子",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"kokushi-musou",label:"國士無雙",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou-jsuan-men"],group:"kokushi-musou"},{id:"kokushi-musou-jsuan-men",label:"國士無雙十三面",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou"],group:"kokushi-musou"},{id:"daisangen",label:"大三元",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"shousuushii",label:"小四喜",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"daisuushii",label:"大四喜",han:26,hanIfOpened:26,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.shousuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"chinroutou",label:"清老頭",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"ryuuiisou",label:"綠一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tsuuiisou,group:"ryuuiisou"},{id:"tsuuiisou",label:"字一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"combo"},{id:"suuankou",label:"四暗刻",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e["suuankou-dannki"],group:"combo"},{id:"suuankou-dannki",label:"四暗刻單騎",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e.suuankou,group:"combo"},{id:"suukantsu",label:"四槓子",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tenhou||!!t.chiihou||!!t.ronhou,group:"combo"},{id:"chuuren-poutou",label:"九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["pure-chuuren-poutou"],group:"chuuren-poutou"},{id:"pure-chuuren-poutou",label:"純正九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["chuuren-poutou"],group:"chuuren-poutou"},{id:"tenhou",label:"天和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!Zn(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"chiihou",label:"地和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!Zn(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"ronhou",label:"人和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!Zn(r,e)||n==="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"}],jF=Mu.filter(({yakumanCount:t,hidden:e})=>!t&&!e),rge=jF.map(t=>t.group).filter((t,e)=>jF.findIndex(({group:r})=>t===r)===e),$F=Mu.filter(({yakumanCount:t,hidden:e})=>typeof t<"u"&&t>0&&!e),nge=$F.map(t=>t.group).filter((t,e)=>$F.findIndex(({group:r})=>t===r)===e),DF=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12",value:"12"},{label:"13",value:"13"},{label:"14",value:"14"},{label:"15",value:"15"},{label:"16",value:"16"},{label:"17",value:"17"},{label:"18",value:"18"}],ige=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],oge=[{label:"30符",value:"30"},{label:"40符",value:"40"},{label:"50符",value:"50"},{label:"60符",value:"60"},{label:"70符",value:"70"},{label:"80符",value:"80"},{label:"90符",value:"90"},{label:"100符",value:"100"},{label:"110符",value:"110"},{label:"20符",value:"20"},{label:"25符",value:"25"}],MF=({yaku:t,active:e,isRevealed:r,disabled:n,onClick:i,hiddenIfDisabled:o})=>n&&o?f.jsx(f.Fragment,{}):f.jsx("button",{"data-id":t.id,"data-han":r?t.hanIfOpened:t.han,"data-active":e?"1":"0",disabled:n,className:"text-xl text-center px-3 border border-neutral-300 text-neutral-800 cursor-pointer hover:opacity-80 data-[han='0']:cursor-not-allowed disabled:opacity-20 disabled:hover:opacity-20 data-[active='1']:enabled:border-teal-800 data-[active='1']:enabled:text-white data-[active='1']:enabled:bg-teal-800 disabled:cursor-not-allowed",onClick:i,children:t.label},t.id),zG=({round:t,activePlayerIndex:e,targetPlayerIndex:r,onChange:n,value:i})=>{const[o,s]=E.useState({}),[a,l]=Co(!1),[c,u]=Co(!1),[d,h]=E.useState("0"),[p,m]=E.useState("0"),[y,g]=E.useState("0"),[b,v]=E.useState("30"),x=E.useCallback(A=>{const C=A.currentTarget.getAttribute("data-id");!C||!Mu.find(({id:P})=>P===C)||s(P=>({...P,[C]:!P[C]}))},[]),S=E.useCallback(()=>{s({}),l(!1),h("0"),m("0"),g("0"),v("30")},[l]),_=E.useMemo(()=>({activePlayerIndex:e,targetPlayerIndex:r,round:t,isRevealed:a,raw:o}),[e,a,t,r,o]),w=E.useMemo(()=>{let A=parseInt(b),C=!1;const T=[],P={...o};r==="-1"&&!a&&(P["menzenchin-tsumohou"]=!0),P["yakuhai-east"]&&kG(t)&&Zn(e,t)?(P["yakuhai-east"]=!1,P["yakuhai-double-east"]=!0):P["yakuhai-south"]&&OG(t)&&TG(e,t)?(P["yakuhai-south"]=!1,P["yakuhai-double-south"]=!0):P["yakuhai-west"]&&RG(t)&&IG(e,t)?(P["yakuhai-west"]=!1,P["yakuhai-double-west"]=!0):P["yakuhai-north"]&&jG(t)&&NG(e,t)&&(P["yakuhai-north"]=!1,P["yakuhai-double-north"]=!0),P["yakuhai-haku"]&&P["yakuhai-hatsu"]&&P["yakuhai-chun"]&&(P.daisangen=!0);const I=Mu.filter(({id:N,disableFn:j})=>!!P[N]&&!(j!=null&&j(_))),O=I.filter(({yakumanCount:N})=>typeof N<"u"&&N>0);if(O.length>0)for(const N of O)N.yakumanCount&&N.yakumanCount>0&&T.push({id:N.id,label:N.label,han:0,yakumanCount:N.yakumanCount});else if(I.length>0){for(const N of I){const j=a?N.hanIfOpened:N.han;j!==0&&T.push({id:N.id,label:N.label,han:j,yakumanCount:0})}T.findIndex(({id:N})=>N==="chiitoitsu")!==-1?(C=!0,A=25):T.findIndex(({id:N})=>N==="pinfu")!==-1&&(C=!0,A=r==="-1"?20:30),d!=="0"&&T.push({id:`dora-${d}`,label:`寶牌${d}`,han:parseInt(d),yakumanCount:0}),p!=="0"&&T.push({id:`dora-${p}`,label:`赤寶牌${p}`,han:parseInt(p),yakumanCount:0}),y!=="0"&&T.push({id:`dora-${y}`,label:`裡寶牌${y}`,han:parseInt(y),yakumanCount:0})}return{han:T.reduce((N,{han:j})=>N+j,0),fu:A,yakumanCount:T.reduce((N,{yakumanCount:j})=>N+j,0),yakus:T,isFuOverrided:C,raw:o,dora:parseInt(d),redDora:parseInt(p),innerDora:parseInt(y),isRevealed:a,isRiichied:!!o.riichi}},[b,o,r,a,t,d,p,y,_]);return E.useEffect(()=>{n&&n(w)},[w,n]),E.useEffect(()=>{i&&(s(i.raw??{}),h(i.dora.toString()),m(i.redDora.toString()),g("0"),l(i.isRevealed))},[l,i]),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between mb-2",children:[f.jsxs("div",{children:[f.jsx(WG,{checked:a,onChangeChecked:l})," ","有副露？"]}),f.jsxs("div",{className:"space-x-4",children:[f.jsx("button",{className:"text-sm text-teal-700 underline",onClick:u,children:c?"一般役":"役滿役"}),f.jsx("button",{className:"text-sm text-teal-700 underline",onClick:S,children:"重置"})]})]}),!c&&f.jsxs("div",{children:[f.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:rge.map(A=>f.jsx("div",{className:"flex flex-wrap gap-2",children:Mu.filter(({group:C})=>C===A).map(C=>{var T;return f.jsx(MF,{yaku:C,isRevealed:a,active:o[C.id],disabled:(T=C.disableFn)==null?void 0:T.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))}),f.jsx("table",{className:"w-full mt-2",children:f.jsx("tbody",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-20 bg-yellow-400 px-1 border-yellow-100 border-t border-b",children:"寶牌"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-yellow-200 data-[active='1']:text-red-600","data-active":d!=="0"?"1":"0",children:f.jsx(Mv,{value:d,onChange:h,options:DF})}),f.jsx("td",{className:"w-2"}),f.jsx("th",{className:"w-20 bg-red-400 px-1 border-neutral-100 border-t border-b",children:"赤寶牌"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-red-200 data-[active='1']:text-red-600","data-active":p!=="0"?"1":"0",children:f.jsx(Mv,{value:p,onChange:m,options:ige})}),f.jsx("td",{className:"w-2"}),f.jsx("th",{className:"w-20 bg-blue-400 px-1 border-neutral-100 border-t border-b",children:"裡寶牌"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-blue-200 data-[active='1']:text-red-600","data-active":y!=="0"?"1":"0",children:f.jsx(Mv,{value:y,onChange:g,options:DF})}),f.jsx("td",{className:"w-2"}),f.jsx("th",{className:"w-20 bg-neutral-400 px-1 border-neutral-100 border-t border-b",children:"符數"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-neutral-200",children:f.jsx(Mv,{value:w.isFuOverrided?w.fu.toString():b,onChange:v,options:oge,disabled:w.isFuOverrided})})]})})})]}),c&&f.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:nge.map(A=>f.jsx("div",{className:"flex flex-wrap gap-2",children:Mu.filter(({group:C})=>C===A).map(C=>{var T;return f.jsx(MF,{yaku:C,isRevealed:a,active:o[C.id],disabled:(T=C.disableFn)==null?void 0:T.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))})]})},sge=({result:t,matchSetting:e})=>{var r;return f.jsx("div",{children:f.jsx("table",{className:"w-full mt-2 bg-teal-100",children:f.jsx("tbody",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-16 bg-teal-400 py-2 px-1",children:"結算"}),f.jsx("td",{className:"flex flex-wrap gap-2 p-2 align-middle",children:(r=t.yakus)==null?void 0:r.map(({label:n})=>f.jsx("span",{children:n},n))}),f.jsxs("td",{className:"w-32 bg-teal-400 text-center",children:[f.jsx(jx,{han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",yakumanCountMax:FG(e.yakumanMax)}),f.jsx(jx,{className:"text-xs text-neutral-600",han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",raw:!0})]})]})})})})},age=({onSubmit:t,defaultValue:e,open:r,onClose:n,...i})=>{const[o,s]=E.useState(),a=E.useCallback(()=>{o&&t(o)},[t,o]);return E.useEffect(()=>{s(e)},[e]),f.jsxs(Yn,{open:r,onClose:n,children:[f.jsx(zG,{...i,onChange:s,value:e}),f.jsx("div",{className:"mt-4",children:f.jsx(Re,{className:"w-full",onClick:a,children:"儲存"})})]})};function as({className:t,onChange:e,onChangeValue:r,...n}){const i=E.useMemo(()=>`block w-full rounded-md border-0 px-1 py-[9px] text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 ${t}`,[t]),o=E.useCallback(s=>{e==null||e(s),r==null||r(s.currentTarget.value)},[e,r]);return f.jsx("select",{className:i,onChange:o,...n})}function lge({score:t,...e}){const r=E.useMemo(()=>t?t.target?t.target:t.all?`${t.all} ALL`:`${t.others},${t.east}`:"(錯誤)",[t]);return f.jsx("div",{...e,children:r})}function wn({children:t,label:e,action:r,...n}){return f.jsx("div",{...n,children:f.jsxs("label",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("p",{className:"text-sm text-gray-800 font-bold",children:e}),f.jsx("div",{children:r})]}),f.jsx("div",{children:t})]})})}function GG({match:t,currentMatchRound:e,initialActivePlayerIndex:r="0",initialTargetPlayerIndex:n="-1",submitNode:i=f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:o}){const[s,a]=E.useState({han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}),l=E.useMemo(()=>Object.keys(t.players).map(I=>({index:I.toString(),name:`${t.players[I].name} (${t.players[I].nickname})`,position:Uc(I,e.roundCount)})),[t.players,e.roundCount]),[c,u]=E.useState(r??"0"),d=E.useMemo(()=>typeof c<"u"?l==null?void 0:l.find(({index:P})=>P===c):void 0,[c,l]),[h,p]=E.useState(n),m=E.useMemo(()=>{const P=AF(s.han,s.fu,s.yakumanCount,(d==null?void 0:d.position)===Mn.East,h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});return e.extendedRoundCount>0&&(P.win+=e.extendedRoundCount*300,P.target&&(P.target+=e.extendedRoundCount*300),P.all&&(P.all+=e.extendedRoundCount*100),P.east&&(P.east+=e.extendedRoundCount*100),P.others&&(P.others+=e.extendedRoundCount*100)),e.cumulatedThousands>0&&(P.win+=e.cumulatedThousands*1e3),P},[s.han,s.fu,s.yakumanCount,d==null?void 0:d.position,h,t.setting.isManganRoundUp,t.setting.yakumanMax,e.extendedRoundCount,e.cumulatedThousands]),y=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:P})=>P==="daisangen")!==-1,[s.isRevealed,s.yakus]),[g,b]=E.useState("-1"),v=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:P})=>P==="daisuushii")!==-1,[s.isRevealed,s.yakus]),[x,S]=E.useState("-1"),_=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:P})=>P==="suukantsu")!==-1,[s.isRevealed,s.yakus]),[w,A]=E.useState("-1"),C=E.useMemo(()=>{const P=Object.keys(e.playerResults),I={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].scoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].scoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].scoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].scoreChanges??[]}};if(c===h)return I;for(let N=0;N<P.length;N+=1){const j=P[N];j===c?(I[j].afterScore+=m.win,I[j].type=yt.Win,I[j].scoreChanges=[m.win]):m.target&&j===h?(I[j].afterScore-=m.target,I[j].type=yt.Lose,I[j].scoreChanges=[-m.target]):m.all?(I[j].afterScore-=m.all,I[j].type=yt.Lose,I[j].scoreChanges=[-m.all]):m.east&&m.others&&(Zn(j,e.roundCount)?(I[j].afterScore-=m.east,I[j].type=yt.Lose,I[j].scoreChanges=[-m.east]):(I[j].afterScore-=m.others,I[j].type=yt.Lose,I[j].scoreChanges=[-m.others]))}[{bool:y,triggeredPlayerIndex:g,yakuId:"daisangen"},{bool:v,triggeredPlayerIndex:x,yakuId:"daisuushii"},{bool:_,triggeredPlayerIndex:w,yakuId:"suukantsu"}].forEach(({bool:N,triggeredPlayerIndex:j,yakuId:L})=>{var U;if(N&&j!=="-1"&&j!==c&&j!==h){const V=(U=s.yakus)==null?void 0:U.find(({id:R})=>L===R);if(V){const R=AF(1,30,V.yakumanCount,Zn(c,e.roundCount),h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});if(R.target){const F=Math.round(R.target/2);I[h].afterScore+=F,I[h].scoreChanges[0]+=F,I[h].scoreChanges[0]===0&&I[h].scoreChanges.splice(0,1),I[j].afterScore-=F,typeof I[j].scoreChanges[0]>"u"?I[j].scoreChanges.push(-F):I[j].scoreChanges[0]-=F}else if(R.all)for(let F=0;F<P.length;F+=1){const z=R.all;P[F]!==c&&P[F]!==j&&(I[P[F]].afterScore+=z,I[P[F]].scoreChanges[0]+=z,I[P[F]].scoreChanges[0]===0&&I[P[F]].scoreChanges.splice(0,1),I[j].afterScore-=z,typeof I[j].scoreChanges[0]>"u"?I[j].scoreChanges.push(-z):I[j].scoreChanges[0]-=z)}else if(R.east&&R.others){for(let F=0;F<P.length;F+=1)if(P[F]!==c&&P[F]!==j){const z=Zn(P[F],e.roundCount)?R.east:R.others;I[P[F]].afterScore+=z,I[P[F]].scoreChanges[0]+=z,I[P[F]].scoreChanges[0]===0&&I[P[F]].scoreChanges.splice(0,1),I[j].afterScore-=z,typeof I[j].scoreChanges[0]>"u"?I[j].scoreChanges.push(-z):I[j].scoreChanges[0]-=z}}}}},[]);let O=0;for(let N=0;N<P.length;N+=1){const j=P[N];j!==c&&I[j].isRiichi&&(I[j].afterScore-=1e3,I[j].scoreChanges.unshift(-1e3),O+=1e3)}return c&&O>0&&(I[c].afterScore+=O,I[c].scoreChanges.unshift(O)),I[c].detail=s,I},[c,m.all,m.east,m.others,m.target,m.win,e.playerResults,e.roundCount,y,v,_,t.setting.isManganRoundUp,t.setting.yakumanMax,h,s,g,x,w]),T=E.useCallback(()=>{if(!o||!s)return;const P={...e,resultType:Eye(m),playerResults:C,nextRoundCumulatedThousands:0,resultDetail:{winnerPlayerIndex:c,...s,yakus:s.yakus??[]}};o(P)},[c,m,e,o,C,s]);return E.useEffect(()=>{u(r),p(n),a(e.playerResults[r].detail)},[e.playerResults,r,n]),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex gap-x-4 items-center",children:[f.jsx("div",{className:"flex-1",children:f.jsx(as,{value:c,onChangeValue:u,children:l.map(({index:P,name:I})=>f.jsx("option",{value:P,children:I},P))})}),f.jsx("div",{className:"text-xs text-gray-500",children:"和了"}),f.jsx("div",{className:"flex-1",children:f.jsxs(as,{value:h,onChangeValue:p,children:[f.jsx("option",{value:"-1",children:"自摸"}),l.map(({index:P,name:I})=>f.jsx("option",{value:P,children:I},P))]})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-bold",children:"役種"}),f.jsxs("div",{children:[f.jsx(zG,{round:e.roundCount,activePlayerIndex:c,targetPlayerIndex:h,onChange:a,value:e.playerResults[c].detail}),f.jsx(sge,{result:s,matchSetting:t.setting}),f.jsx("div",{className:"text-3xl font-bold text-center bg-teal-400 py-2",children:f.jsx(lge,{score:m})})]})]}),(y||v||_)&&f.jsxs("div",{className:"space-y-2 bg-yellow-200 p-4",children:[f.jsx("h5",{className:"font-bold",children:"包牌"}),f.jsxs("p",{children:["當某家打出的牌被鳴牌後，導致役滿確定時（大三元、大四喜、四槓子），便會觸發「包牌」。",f.jsx("br",{}),"- 如自摸，包牌者需支付該役種全部點數",f.jsx("br",{}),"- 如他家放銃，包牌者需支付該役種一半點數"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y&&f.jsx(wn,{label:"大三元包牌者",children:f.jsxs(as,{value:g,onChangeValue:b,children:[f.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:P,name:I})=>f.jsx("option",{value:P,children:I},P))]})}),v&&f.jsx(wn,{label:"大四喜包牌者",children:f.jsxs(as,{value:x,onChangeValue:S,children:[f.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:P,name:I})=>f.jsx("option",{value:P,children:I},P))]})}),_&&f.jsx(wn,{label:"四槓子包牌者",children:f.jsxs(as,{value:w,onChangeValue:A,children:[f.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:P,name:I})=>f.jsx("option",{value:P,children:I},P))]})})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-bold",children:"分數變動"}),f.jsxs("table",{className:"data-table w-full text-lg",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"玩家"}),f.jsx("th",{children:"目前分數"}),f.jsx("th",{children:"變動"}),f.jsx("th",{children:"最新分數"})]})}),f.jsx("tbody",{children:Object.keys(t.players).map(P=>f.jsxs("tr",{children:[f.jsx("th",{className:"text-white py-1",style:{background:t.players[P].color},children:t.players[P].name}),f.jsx("td",{className:"px-2 text-center w-32",children:C[P].beforeScore}),f.jsx("td",{className:"text-center w-32",children:f.jsx(Ft,{signed:!0,value:C[P].afterScore-C[P].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),f.jsx("td",{className:"text-center w-32",children:C[P].afterScore})]},P))})]})]}),f.jsx("div",{className:"space-y-2",children:f.jsx(Re,{onClick:T,className:"w-full",disabled:!(s!=null&&s.yakus)||s.yakus.length<=0,children:i})})]})}function qG({match:t,currentMatchRound:e,submitNode:r=f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:n}){const[i,o]=E.useState({0:!1,1:!1,2:!1,3:!1}),s=E.useCallback(c=>{var h,p;const u=(h=c.currentTarget)==null?void 0:h.checked,d=(p=c.currentTarget)==null?void 0:p.getAttribute("data-player-index");typeof u>"u"||!d||o(m=>({...m,[d]:u}))},[]),a=E.useMemo(()=>{const c=Object.keys(e.playerResults),u={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].prevScoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].prevScoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].prevScoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].prevScoreChanges??[]}};let d=0,h=0;const p=Object.values(i).filter(m=>!!m).length;p===1?(d=3e3,h=1e3):p===2?(d=1500,h=1500):p===3&&(d=1e3,h=3e3);for(let m=0;m<c.length;m+=1){const y=c[m];d&&h&&(i[y]?(u[y].afterScore+=d,u[y].type=yt.Win,u[y].scoreChanges=[d]):(u[y].afterScore-=h,u[y].type=yt.Lose,u[y].scoreChanges=[-h])),u[y].isRiichi&&(u[y].afterScore-=1e3,u[y].scoreChanges.unshift(-1e3))}return u},[e.playerResults,i]),l=E.useCallback(()=>{if(!n)return;const c={...e,resultType:Ve.Exhausted,playerResults:a,nextRoundCumulatedThousands:e.cumulatedThousands+Object.values(a).filter(({isRiichi:u})=>!!u).length};n(c)},[e,n,a]);return E.useEffect(()=>{var c,u,d,h;o({0:!!e.playerResults[0].waitingTiles&&((c=e.playerResults[0].waitingTiles)==null?void 0:c.length)>0,1:!!e.playerResults[1].waitingTiles&&((u=e.playerResults[1].waitingTiles)==null?void 0:u.length)>0,2:!!e.playerResults[2].waitingTiles&&((d=e.playerResults[2].waitingTiles)==null?void 0:d.length)>0,3:!!e.playerResults[3].waitingTiles&&((h=e.playerResults[3].waitingTiles)==null?void 0:h.length)>0})},[e.playerResults]),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-bold",children:"分數變動"}),f.jsxs("table",{className:"data-table w-full text-lg",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"玩家"}),f.jsx("th",{className:"!bg-yellow-200",children:"聽牌？"}),f.jsx("th",{className:"w-32",children:"目前分數"}),f.jsx("th",{className:"w-32",children:"變動"}),f.jsx("th",{className:"w-32",children:"最新分數"})]})}),f.jsx("tbody",{children:Object.keys(t.players).map(c=>f.jsxs("tr",{children:[f.jsx("th",{className:"text-white py-1",style:{background:t.players[c].color},children:t.players[c].name}),f.jsx("td",{className:"text-center !bg-yellow-200",children:f.jsx(WG,{checked:i[c],onChange:s,"data-player-index":c})}),f.jsx("td",{className:"text-center",children:a[c].beforeScore}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{signed:!0,value:a[c].afterScore-a[c].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),f.jsx("td",{className:"text-center",children:a[c].afterScore})]},c))})]})]}),f.jsx("div",{className:"space-y-2",children:f.jsx(Re,{onClick:l,className:"w-full",children:r})})]})}var Cg=t=>t.type==="checkbox",Fu=t=>t instanceof Date,_n=t=>t==null;const HG=t=>typeof t=="object";var mr=t=>!_n(t)&&!Array.isArray(t)&&HG(t)&&!Fu(t),KG=t=>mr(t)&&t.target?Cg(t.target)?t.target.checked:t.target.value:t,cge=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,QG=(t,e)=>t.has(cge(e)),uge=t=>{const e=t.constructor&&t.constructor.prototype;return mr(e)&&e.hasOwnProperty("isPrototypeOf")},IO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function kn(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(IO&&(t instanceof Blob||t instanceof FileList))&&(r||mr(t)))if(e=r?[]:{},!r&&!uge(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=kn(t[n]));else return t;return e}var Pg=t=>Array.isArray(t)?t.filter(Boolean):[],qt=t=>t===void 0,se=(t,e,r)=>{if(!e||!mr(t))return r;const n=Pg(e.split(/[,[\].]+?/)).reduce((i,o)=>_n(i)?i:i[o],t);return qt(n)||n===t?qt(t[e])?r:t[e]:n},Yi=t=>typeof t=="boolean";const $x={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ns={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},fge=k.createContext(null),NO=()=>k.useContext(fge);var YG=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const s=o;return e._proxyFormState[s]!==Zi.all&&(e._proxyFormState[s]=!n||Zi.all),r&&(r[s]=!0),t[s]}});return i},xi=t=>mr(t)&&!Object.keys(t).length,XG=(t,e,r,n)=>{r(t);const{name:i,...o}=t;return xi(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(s=>e[s]===(!n||Zi.all))},X0=t=>Array.isArray(t)?t:[t],JG=(t,e,r)=>!t||!e||t===e||X0(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function kO(t){const e=k.useRef(t);e.current=t,k.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function dge(t){const e=NO(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=k.useState(r._formState),l=k.useRef(!0),c=k.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=k.useRef(i);return u.current=i,kO({disabled:n,next:d=>l.current&&JG(u.current,d.name,o)&&XG(d,c.current,r._updateFormState)&&a({...r._formState,...d}),subject:r._subjects.state}),k.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),YG(s,r,c.current,!1)}var Ro=t=>typeof t=="string",ZG=(t,e,r,n,i)=>Ro(t)?(n&&e.watch.add(t),se(r,t,i)):Array.isArray(t)?t.map(o=>(n&&e.watch.add(o),se(r,o))):(n&&(e.watchAll=!0),r);function Ka(t){const e=NO(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=k.useRef(n);a.current=n,kO({disabled:o,subject:r._subjects.values,next:u=>{JG(a.current,u.name,s)&&c(kn(ZG(a.current,r._names,u.values||r._formValues,!1,i)))}});const[l,c]=k.useState(r._getWatch(n,i));return k.useEffect(()=>r._removeUnmounted()),l}var OO=t=>/^\w*$/.test(t),eq=t=>Pg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),xt=(t,e,r)=>{let n=-1;const i=OO(e)?[e]:eq(e),o=i.length,s=o-1;for(;++n<o;){const a=i[n];let l=r;if(n!==s){const c=t[a];l=mr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}t[a]=l,t=t[a]}return t};function hge(t){const e=NO(),{name:r,disabled:n,control:i=e.control,shouldUnregister:o}=t,s=QG(i._names.array,r),a=Ka({control:i,name:r,defaultValue:se(i._formValues,r,se(i._defaultValues,r,t.defaultValue)),exact:!0}),l=dge({control:i,name:r}),c=k.useRef(i.register(r,{...t.rules,value:a,...Yi(t.disabled)?{disabled:t.disabled}:{}}));return k.useEffect(()=>{const u=i._options.shouldUnregister||o,d=(h,p)=>{const m=se(i._fields,h);m&&(m._f.mount=p)};if(d(r,!0),u){const h=kn(se(i._options.defaultValues,r));xt(i._defaultValues,r,h),qt(se(i._formValues,r))&&xt(i._formValues,r,h)}return()=>{(s?u&&!i._state.action:u)?i.unregister(r):d(r,!1)}},[r,i,s,o]),k.useEffect(()=>{se(i._fields,r)&&i._updateDisabledField({disabled:n,fields:i._fields,name:r,value:se(i._fields,r)._f.value})},[n,r,i]),{field:{name:r,value:a,...Yi(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:k.useCallback(u=>c.current.onChange({target:{value:KG(u),name:r},type:$x.CHANGE}),[r]),onBlur:k.useCallback(()=>c.current.onBlur({target:{value:se(i._formValues,r),name:r},type:$x.BLUR}),[r,i]),ref:u=>{const d=se(i._fields,r);d&&u&&(d._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:h=>u.setCustomValidity(h),reportValidity:()=>u.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!se(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!se(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!se(l.touchedFields,r)},error:{enumerable:!0,get:()=>se(l.errors,r)}})}}const $n=t=>t.render(hge(t));var pge=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},FF=t=>({isOnSubmit:!t||t===Zi.onSubmit,isOnBlur:t===Zi.onBlur,isOnChange:t===Zi.onChange,isOnAll:t===Zi.all,isOnTouch:t===Zi.onTouched}),LF=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Mp=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const o=se(t,i);if(o){const{_f:s,...a}=o;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],i)&&!n)break;if(s.ref&&e(s.ref,s.name)&&!n)break;Mp(a,e)}else mr(a)&&Mp(a,e)}}};var mge=(t,e,r)=>{const n=Pg(se(t,r));return xt(n,"root",e[r]),xt(t,r,n),t},RO=t=>t.type==="file",va=t=>typeof t=="function",Dx=t=>{if(!IO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},J0=t=>Ro(t),jO=t=>t.type==="radio",Mx=t=>t instanceof RegExp;const BF={value:!1,isValid:!1},UF={value:!0,isValid:!0};var tq=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!qt(t[0].attributes.value)?qt(t[0].value)||t[0].value===""?UF:{value:t[0].value,isValid:!0}:UF:BF}return BF};const VF={isValid:!1,value:null};var rq=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,VF):VF;function WF(t,e,r="validate"){if(J0(t)||Array.isArray(t)&&t.every(J0)||Yi(t)&&!t)return{type:r,message:J0(t)?t:"",ref:e}}var iu=t=>mr(t)&&!Mx(t)?t:{value:t,message:""},zF=async(t,e,r,n,i)=>{const{ref:o,refs:s,required:a,maxLength:l,minLength:c,min:u,max:d,pattern:h,validate:p,name:m,valueAsNumber:y,mount:g,disabled:b}=t._f,v=se(e,m);if(!g||b)return{};const x=s?s[0]:o,S=O=>{n&&x.reportValidity&&(x.setCustomValidity(Yi(O)?"":O||""),x.reportValidity())},_={},w=jO(o),A=Cg(o),C=w||A,T=(y||RO(o))&&qt(o.value)&&qt(v)||Dx(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,P=pge.bind(null,m,r,_),I=(O,N,j,L=ns.maxLength,U=ns.minLength)=>{const V=O?N:j;_[m]={type:O?L:U,message:V,ref:o,...P(O?L:U,V)}};if(i?!Array.isArray(v)||!v.length:a&&(!C&&(T||_n(v))||Yi(v)&&!v||A&&!tq(s).isValid||w&&!rq(s).isValid)){const{value:O,message:N}=J0(a)?{value:!!a,message:a}:iu(a);if(O&&(_[m]={type:ns.required,message:N,ref:x,...P(ns.required,N)},!r))return S(N),_}if(!T&&(!_n(u)||!_n(d))){let O,N;const j=iu(d),L=iu(u);if(!_n(v)&&!isNaN(v)){const U=o.valueAsNumber||v&&+v;_n(j.value)||(O=U>j.value),_n(L.value)||(N=U<L.value)}else{const U=o.valueAsDate||new Date(v),V=z=>new Date(new Date().toDateString()+" "+z),R=o.type=="time",F=o.type=="week";Ro(j.value)&&v&&(O=R?V(v)>V(j.value):F?v>j.value:U>new Date(j.value)),Ro(L.value)&&v&&(N=R?V(v)<V(L.value):F?v<L.value:U<new Date(L.value))}if((O||N)&&(I(!!O,j.message,L.message,ns.max,ns.min),!r))return S(_[m].message),_}if((l||c)&&!T&&(Ro(v)||i&&Array.isArray(v))){const O=iu(l),N=iu(c),j=!_n(O.value)&&v.length>+O.value,L=!_n(N.value)&&v.length<+N.value;if((j||L)&&(I(j,O.message,N.message),!r))return S(_[m].message),_}if(h&&!T&&Ro(v)){const{value:O,message:N}=iu(h);if(Mx(O)&&!v.match(O)&&(_[m]={type:ns.pattern,message:N,ref:o,...P(ns.pattern,N)},!r))return S(N),_}if(p){if(va(p)){const O=await p(v,e),N=WF(O,x);if(N&&(_[m]={...N,...P(ns.validate,N.message)},!r))return S(N.message),_}else if(mr(p)){let O={};for(const N in p){if(!xi(O)&&!r)break;const j=WF(await p[N](v,e),x,N);j&&(O={...j,...P(N,j.message)},S(j.message),r&&(_[m]=O))}if(!xi(O)&&(_[m]={ref:x,...O},!r))return _}}return S(!0),_};function yge(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=qt(t)?n++:t[e[n++]];return t}function gge(t){for(const e in t)if(t.hasOwnProperty(e)&&!qt(t[e]))return!1;return!0}function Mr(t,e){const r=Array.isArray(e)?e:OO(e)?[e]:eq(e),n=r.length===1?t:yge(t,r),i=r.length-1,o=r[i];return n&&delete n[o],i!==0&&(mr(n)&&xi(n)||Array.isArray(n)&&gge(n))&&Mr(t,r.slice(0,-1)),t}var iA=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}},Fx=t=>_n(t)||!HG(t);function Ml(t,e){if(Fx(t)||Fx(e))return t===e;if(Fu(t)&&Fu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const s=e[i];if(Fu(o)&&Fu(s)||mr(o)&&mr(s)||Array.isArray(o)&&Array.isArray(s)?!Ml(o,s):o!==s)return!1}}return!0}var nq=t=>t.type==="select-multiple",vge=t=>jO(t)||Cg(t),oA=t=>Dx(t)&&t.isConnected,iq=t=>{for(const e in t)if(va(t[e]))return!0;return!1};function Lx(t,e={}){const r=Array.isArray(t);if(mr(t)||r)for(const n in t)Array.isArray(t[n])||mr(t[n])&&!iq(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Lx(t[n],e[n])):_n(t[n])||(e[n]=!0);return e}function oq(t,e,r){const n=Array.isArray(t);if(mr(t)||n)for(const i in t)Array.isArray(t[i])||mr(t[i])&&!iq(t[i])?qt(e)||Fx(r[i])?r[i]=Array.isArray(t[i])?Lx(t[i],[]):{...Lx(t[i])}:oq(t[i],_n(e)?{}:e[i],r[i]):r[i]=!Ml(t[i],e[i]);return r}var sA=(t,e)=>oq(t,e,Lx(e)),sq=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>qt(t)?t:e?t===""?NaN:t&&+t:r&&Ro(t)?new Date(t):n?n(t):t;function aA(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return RO(e)?e.files:jO(e)?rq(t.refs).value:nq(e)?[...e.selectedOptions].map(({value:r})=>r):Cg(e)?tq(t.refs).value:sq(qt(e.value)?t.ref.value:e.value,t)}var bge=(t,e,r,n)=>{const i={};for(const o of t){const s=se(e,o);s&&xt(i,o,s._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},kh=t=>qt(t)?t:Mx(t)?t.source:mr(t)?Mx(t.value)?t.value.source:t.value:t,xge=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function GF(t,e,r){const n=se(t,r);if(n||OO(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),s=se(e,o),a=se(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var _ge=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,wge=(t,e)=>!Pg(se(t,e)).length&&Mr(t,e);const Sge={mode:Zi.onSubmit,reValidateMode:Zi.onChange,shouldFocusError:!0};function Ege(t={},e){let r={...Sge,...t},n={submitCount:0,isDirty:!1,isLoading:va(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},o=mr(r.defaultValues)||mr(r.values)?kn(r.defaultValues||r.values)||{}:{},s=r.shouldUnregister?{}:kn(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:iA(),array:iA(),state:iA()},p=FF(r.mode),m=FF(r.reValidateMode),y=r.criteriaMode===Zi.all,g=$=>B=>{clearTimeout(u),u=setTimeout($,B)},b=async $=>{if(d.isValid||$){const B=r.resolver?xi((await T()).errors):await I(i,!0);B!==n.isValid&&h.state.next({isValid:B})}},v=$=>d.isValidating&&h.state.next({isValidating:$}),x=($,B=[],W,Z,J=!0,Y=!0)=>{if(Z&&W){if(a.action=!0,Y&&Array.isArray(se(i,$))){const me=W(se(i,$),Z.argA,Z.argB);J&&xt(i,$,me)}if(Y&&Array.isArray(se(n.errors,$))){const me=W(se(n.errors,$),Z.argA,Z.argB);J&&xt(n.errors,$,me),wge(n.errors,$)}if(d.touchedFields&&Y&&Array.isArray(se(n.touchedFields,$))){const me=W(se(n.touchedFields,$),Z.argA,Z.argB);J&&xt(n.touchedFields,$,me)}d.dirtyFields&&(n.dirtyFields=sA(o,s)),h.state.next({name:$,isDirty:N($,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else xt(s,$,B)},S=($,B)=>{xt(n.errors,$,B),h.state.next({errors:n.errors})},_=$=>{n.errors=$,h.state.next({errors:n.errors,isValid:!1})},w=($,B,W,Z)=>{const J=se(i,$);if(J){const Y=se(s,$,qt(W)?se(o,$):W);qt(Y)||Z&&Z.defaultChecked||B?xt(s,$,B?Y:aA(J._f)):U($,Y),a.mount&&b()}},A=($,B,W,Z,J)=>{let Y=!1,me=!1;const nt={name:$},er=!!(se(i,$)&&se(i,$)._f.disabled);if(!W||Z){d.isDirty&&(me=n.isDirty,n.isDirty=nt.isDirty=N(),Y=me!==nt.isDirty);const Dt=er||Ml(se(o,$),B);me=!!(!er&&se(n.dirtyFields,$)),Dt||er?Mr(n.dirtyFields,$):xt(n.dirtyFields,$,!0),nt.dirtyFields=n.dirtyFields,Y=Y||d.dirtyFields&&me!==!Dt}if(W){const Dt=se(n.touchedFields,$);Dt||(xt(n.touchedFields,$,W),nt.touchedFields=n.touchedFields,Y=Y||d.touchedFields&&Dt!==W)}return Y&&J&&h.state.next(nt),Y?nt:{}},C=($,B,W,Z)=>{const J=se(n.errors,$),Y=d.isValid&&Yi(B)&&n.isValid!==B;if(t.delayError&&W?(c=g(()=>S($,W)),c(t.delayError)):(clearTimeout(u),c=null,W?xt(n.errors,$,W):Mr(n.errors,$)),(W?!Ml(J,W):J)||!xi(Z)||Y){const me={...Z,...Y&&Yi(B)?{isValid:B}:{},errors:n.errors,name:$};n={...n,...me},h.state.next(me)}v(!1)},T=async $=>r.resolver(s,r.context,bge($||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation)),P=async $=>{const{errors:B}=await T($);if($)for(const W of $){const Z=se(B,W);Z?xt(n.errors,W,Z):Mr(n.errors,W)}else n.errors=B;return B},I=async($,B,W={valid:!0})=>{for(const Z in $){const J=$[Z];if(J){const{_f:Y,...me}=J;if(Y){const nt=l.array.has(Y.name),er=await zF(J,s,y,r.shouldUseNativeValidation&&!B,nt);if(er[Y.name]&&(W.valid=!1,B))break;!B&&(se(er,Y.name)?nt?mge(n.errors,er,Y.name):xt(n.errors,Y.name,er[Y.name]):Mr(n.errors,Y.name))}me&&await I(me,B,W)}}return W.valid},O=()=>{for(const $ of l.unMount){const B=se(i,$);B&&(B._f.refs?B._f.refs.every(W=>!oA(W)):!oA(B._f.ref))&&pt($)}l.unMount=new Set},N=($,B)=>($&&B&&xt(s,$,B),!Ml(re(),o)),j=($,B,W)=>ZG($,l,{...a.mount?s:qt(B)?o:Ro($)?{[$]:B}:B},W,B),L=$=>Pg(se(a.mount?s:o,$,t.shouldUnregister?se(o,$,[]):[])),U=($,B,W={})=>{const Z=se(i,$);let J=B;if(Z){const Y=Z._f;Y&&(!Y.disabled&&xt(s,$,sq(B,Y)),J=Dx(Y.ref)&&_n(B)?"":B,nq(Y.ref)?[...Y.ref.options].forEach(me=>me.selected=J.includes(me.value)):Y.refs?Cg(Y.ref)?Y.refs.length>1?Y.refs.forEach(me=>(!me.defaultChecked||!me.disabled)&&(me.checked=Array.isArray(J)?!!J.find(nt=>nt===me.value):J===me.value)):Y.refs[0]&&(Y.refs[0].checked=!!J):Y.refs.forEach(me=>me.checked=me.value===J):RO(Y.ref)?Y.ref.value="":(Y.ref.value=J,Y.ref.type||h.values.next({name:$,values:{...s}})))}(W.shouldDirty||W.shouldTouch)&&A($,J,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&le($)},V=($,B,W)=>{for(const Z in B){const J=B[Z],Y=`${$}.${Z}`,me=se(i,Y);(l.array.has($)||!Fx(J)||me&&!me._f)&&!Fu(J)?V(Y,J,W):U(Y,J,W)}},R=($,B,W={})=>{const Z=se(i,$),J=l.array.has($),Y=kn(B);xt(s,$,Y),J?(h.array.next({name:$,values:{...s}}),(d.isDirty||d.dirtyFields)&&W.shouldDirty&&h.state.next({name:$,dirtyFields:sA(o,s),isDirty:N($,Y)})):Z&&!Z._f&&!_n(Y)?V($,Y,W):U($,Y,W),LF($,l)&&h.state.next({...n}),h.values.next({name:$,values:{...s}}),!a.mount&&e()},F=async $=>{const B=$.target;let W=B.name,Z=!0;const J=se(i,W),Y=()=>B.type?aA(J._f):KG($),me=nt=>{Z=Number.isNaN(nt)||nt===se(s,W,nt)};if(J){let nt,er;const Dt=Y(),yo=$.type===$x.BLUR||$.type===$x.FOCUS_OUT,IS=!xge(J._f)&&!r.resolver&&!se(n.errors,W)&&!J._f.deps||_ge(yo,se(n.touchedFields,W),n.isSubmitted,m,p),ph=LF(W,l,yo);xt(s,W,Dt),yo?(J._f.onBlur&&J._f.onBlur($),c&&c(0)):J._f.onChange&&J._f.onChange($);const mh=A(W,Dt,yo,!1),iv=!xi(mh)||ph;if(!yo&&h.values.next({name:W,type:$.type,values:{...s}}),IS)return d.isValid&&b(),iv&&h.state.next({name:W,...ph?{}:mh});if(!yo&&ph&&h.state.next({...n}),v(!0),r.resolver){const{errors:ov}=await T([W]);if(me(Dt),Z){const NS=GF(n.errors,i,W),sv=GF(ov,i,NS.name||W);nt=sv.error,W=sv.name,er=xi(ov)}}else nt=(await zF(J,s,y,r.shouldUseNativeValidation))[W],me(Dt),Z&&(nt?er=!1:d.isValid&&(er=await I(i,!0)));Z&&(J._f.deps&&le(J._f.deps),C(W,er,nt,mh))}},z=($,B)=>{if(se(n.errors,B)&&$.focus)return $.focus(),1},le=async($,B={})=>{let W,Z;const J=X0($);if(v(!0),r.resolver){const Y=await P(qt($)?$:J);W=xi(Y),Z=$?!J.some(me=>se(Y,me)):W}else $?(Z=(await Promise.all(J.map(async Y=>{const me=se(i,Y);return await I(me&&me._f?{[Y]:me}:me)}))).every(Boolean),!(!Z&&!n.isValid)&&b()):Z=W=await I(i);return h.state.next({...!Ro($)||d.isValid&&W!==n.isValid?{}:{name:$},...r.resolver||!$?{isValid:W}:{},errors:n.errors,isValidating:!1}),B.shouldFocus&&!Z&&Mp(i,z,$?J:l.mount),Z},re=$=>{const B={...o,...a.mount?s:{}};return qt($)?B:Ro($)?se(B,$):$.map(W=>se(B,W))},be=($,B)=>({invalid:!!se((B||n).errors,$),isDirty:!!se((B||n).dirtyFields,$),isTouched:!!se((B||n).touchedFields,$),error:se((B||n).errors,$)}),at=$=>{$&&X0($).forEach(B=>Mr(n.errors,B)),h.state.next({errors:$?n.errors:{}})},rt=($,B,W)=>{const Z=(se(i,$,{_f:{}})._f||{}).ref;xt(n.errors,$,{...B,ref:Z}),h.state.next({name:$,errors:n.errors,isValid:!1}),W&&W.shouldFocus&&Z&&Z.focus&&Z.focus()},Wt=($,B)=>va($)?h.values.subscribe({next:W=>$(j(void 0,B),W)}):j($,B,!0),pt=($,B={})=>{for(const W of $?X0($):l.mount)l.mount.delete(W),l.array.delete(W),B.keepValue||(Mr(i,W),Mr(s,W)),!B.keepError&&Mr(n.errors,W),!B.keepDirty&&Mr(n.dirtyFields,W),!B.keepTouched&&Mr(n.touchedFields,W),!r.shouldUnregister&&!B.keepDefaultValue&&Mr(o,W);h.values.next({values:{...s}}),h.state.next({...n,...B.keepDirty?{isDirty:N()}:{}}),!B.keepIsValid&&b()},Zt=({disabled:$,name:B,field:W,fields:Z,value:J})=>{if(Yi($)){const Y=$?void 0:qt(J)?aA(W?W._f:se(Z,B)._f):J;xt(s,B,Y),A(B,Y,!1,!1,!0)}},te=($,B={})=>{let W=se(i,$);const Z=Yi(B.disabled);return xt(i,$,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:$}},name:$,mount:!0,...B}}),l.mount.add($),W?Zt({field:W,disabled:B.disabled,name:$,value:B.value}):w($,!0,B.value),{...Z?{disabled:B.disabled}:{},...r.progressive?{required:!!B.required,min:kh(B.min),max:kh(B.max),minLength:kh(B.minLength),maxLength:kh(B.maxLength),pattern:kh(B.pattern)}:{},name:$,onChange:F,onBlur:F,ref:J=>{if(J){te($,B),W=se(i,$);const Y=qt(J.value)&&J.querySelectorAll&&J.querySelectorAll("input,select,textarea")[0]||J,me=vge(Y),nt=W._f.refs||[];if(me?nt.find(er=>er===Y):Y===W._f.ref)return;xt(i,$,{_f:{...W._f,...me?{refs:[...nt.filter(oA),Y,...Array.isArray(se(o,$))?[{}]:[]],ref:{type:Y.type,name:$}}:{ref:Y}}}),w($,!1,void 0,Y)}else W=se(i,$,{}),W._f&&(W._f.mount=!1),(r.shouldUnregister||B.shouldUnregister)&&!(QG(l.array,$)&&a.action)&&l.unMount.add($)}}},xe=()=>r.shouldFocusError&&Mp(i,z,l.mount),Ee=$=>{Yi($)&&(h.state.next({disabled:$}),Mp(i,(B,W)=>{let Z=$;const J=se(i,W);J&&Yi(J._f.disabled)&&(Z||(Z=J._f.disabled)),B.disabled=Z},0,!1))},q=($,B)=>async W=>{W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let Z=kn(s);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:J,values:Y}=await T();n.errors=J,Z=Y}else await I(i);Mr(n.errors,"root"),xi(n.errors)?(h.state.next({errors:{}}),await $(Z,W)):(B&&await B({...n.errors},W),xe(),setTimeout(xe)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xi(n.errors),submitCount:n.submitCount+1,errors:n.errors})},Ze=($,B={})=>{se(i,$)&&(qt(B.defaultValue)?R($,kn(se(o,$))):(R($,B.defaultValue),xt(o,$,kn(B.defaultValue))),B.keepTouched||Mr(n.touchedFields,$),B.keepDirty||(Mr(n.dirtyFields,$),n.isDirty=B.defaultValue?N($,kn(se(o,$))):N()),B.keepError||(Mr(n.errors,$),d.isValid&&b()),h.state.next({...n}))},ke=($,B={})=>{const W=$?kn($):o,Z=kn(W),J=$&&!xi($)?Z:o;if(B.keepDefaultValues||(o=W),!B.keepValues){if(B.keepDirtyValues)for(const Y of l.mount)se(n.dirtyFields,Y)?xt(J,Y,se(s,Y)):R(Y,se(J,Y));else{if(IO&&qt($))for(const Y of l.mount){const me=se(i,Y);if(me&&me._f){const nt=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(Dx(nt)){const er=nt.closest("form");if(er){er.reset();break}}}}i={}}s=t.shouldUnregister?B.keepDefaultValues?kn(o):{}:kn(J),h.array.next({values:{...J}}),h.values.next({values:{...J}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!B.keepIsValid,a.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Ml($,o)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:B.keepDirtyValues?n.dirtyFields:B.keepDefaultValues&&$?sA(o,$):{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},vt=($,B)=>ke(va($)?$(s):$,B);return{control:{register:te,unregister:pt,getFieldState:be,handleSubmit:q,setError:rt,_executeSchema:T,_getWatch:j,_getDirty:N,_updateValid:b,_removeUnmounted:O,_updateFieldArray:x,_updateDisabledField:Zt,_getFieldArray:L,_reset:ke,_resetDefaultValues:()=>va(r.defaultValues)&&r.defaultValues().then($=>{vt($,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:$=>{n={...n,...$}},_disableForm:Ee,_subjects:h,_proxyFormState:d,_setErrors:_,get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state($){a=$},get _defaultValues(){return o},get _names(){return l},set _names($){l=$},get _formState(){return n},set _formState($){n=$},get _options(){return r},set _options($){r={...r,...$}}},trigger:le,register:te,handleSubmit:q,watch:Wt,setValue:R,getValues:re,reset:vt,resetField:Ze,clearErrors:at,unregister:pt,setError:rt,setFocus:($,B={})=>{const W=se(i,$),Z=W&&W._f;if(Z){const J=Z.refs?Z.refs[0]:Z.ref;J.focus&&(J.focus(),B.shouldSelect&&J.select())}},getFieldState:be}}function qd(t={}){const e=k.useRef(),r=k.useRef(),[n,i]=k.useState({isDirty:!1,isValidating:!1,isLoading:va(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:va(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Ege(t,()=>i(s=>({...s}))),formState:n});const o=e.current.control;return o._options=t,kO({subject:o._subjects.state,next:s=>{XG(s,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),k.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),k.useEffect(()=>{if(o._proxyFormState.isDirty){const s=o._getDirty();s!==n.isDirty&&o._subjects.state.next({isDirty:s})}},[o,n.isDirty]),k.useEffect(()=>{t.values&&!Ml(t.values,r.current)?(o._reset(t.values,o._options.resetOptions),r.current=t.values,i(s=>({...s}))):o._resetDefaultValues()},[t.values,o]),k.useEffect(()=>{t.errors&&o._setErrors(t.errors)},[t.errors,o]),k.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=YG(n,o),e.current}function aq({player:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return f.jsxs("div",{className:"relative flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{backgroundColor:t.color??"#115e59"},...n,children:[t.teamPicUrl&&f.jsx("div",{className:"absolute inset-0 opacity-10 bg-center bg-no-repeat bg-cover",style:{backgroundImage:`url(${t.teamPicUrl})`}}),f.jsx("div",{className:"relative z-10 shrink-0",children:f.jsx("div",{className:"w-14 h-14 bg-center bg-contain bg-no-repeat rounded",style:{backgroundImage:`url(${t.proPicUrl||"/images/portrait-placeholder.jpeg"})`}})}),f.jsxs("div",{className:"flex-1 relative z-10 ",children:[f.jsx("div",{children:t.title??"(無頭銜)"}),f.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})]}),e&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{variant:"icon",color:"inverted",type:"button",onClick:i,children:f.jsx("i",{className:"bi bi-pencil"})})})]})}const Age=Nz(["block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"]);function ba({className:t,...e}){const r=E.useMemo(()=>Age({className:t}),[t]);return f.jsx("input",{className:r,...e})}function Cge({match:t,currentMatchRound:e,onSubmit:r}){const{reset:n,handleSubmit:i,control:o}=qd({defaultValues:{player_0:0,player_1:0,player_2:0,player_3:0,cumulatedThousands:0,roundCount:0,extendedRoundCount:0}}),s=E.useMemo(()=>Object.keys(t.players).map(c=>({...t.players[c],index:c.toString(),position:Uc(c,e.roundCount)})),[t.players,e.roundCount]),a=E.useMemo(()=>i(l=>{if(!r)return;const c={...e,resultType:Ve.Hotfix,playerResults:{0:{...e.playerResults[0],afterScore:parseInt(l.player_0,10)},1:{...e.playerResults[1],afterScore:parseInt(l.player_1,10)},2:{...e.playerResults[2],afterScore:parseInt(l.player_2,10)},3:{...e.playerResults[3],afterScore:parseInt(l.player_3,10)}},cumulatedThousands:parseInt(l.cumulatedThousands,10),roundCount:parseInt(l.roundCount,10),extendedRoundCount:parseInt(l.extendedRoundCount,10)};r(c)}),[e,i,r]);return E.useEffect(()=>{n({player_0:e.playerResults[0].beforeScore,player_1:e.playerResults[1].beforeScore,player_2:e.playerResults[2].beforeScore,player_3:e.playerResults[3].beforeScore,cumulatedThousands:e.cumulatedThousands,roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount})},[e.cumulatedThousands,e.extendedRoundCount,e.playerResults,e.roundCount,n]),f.jsxs("div",{className:"space-y-8",children:[f.jsx("div",{className:"space-y-2",children:f.jsxs("table",{className:"data-table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-1/2",children:"玩家"}),f.jsx("th",{className:"w-1/4",children:"現在分數"}),f.jsx("th",{className:"w-1/4",children:"新的分數"})]})}),f.jsxs("tbody",{children:[s.map(l=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx(aq,{player:l})}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.playerResults[l.index].beforeScore}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx($n,{name:`player_${l.index}`,control:o,rules:{required:!0},render:({field:c})=>f.jsx(ba,{className:"text-center",type:"number",...c})})})]},l.index)),f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"供托"}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.cumulatedThousands}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx($n,{name:"cumulatedThousands",control:o,rules:{required:!0},render:({field:l})=>f.jsx(ba,{className:"text-center",type:"number",...l})})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"局數(東1局=1, 東2局=2, ...)"}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.roundCount}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx($n,{name:"roundCount",control:o,rules:{required:!0},render:({field:l})=>f.jsx(ba,{className:"text-center",type:"number",...l})})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"本場數"}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.extendedRoundCount}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx($n,{name:"extendedRoundCount",control:o,rules:{required:!0},render:({field:l})=>f.jsx(ba,{className:"text-center",type:"number",...l})})})]})]})]})}),f.jsx("div",{className:"space-y-2",children:f.jsx(Re,{onClick:a,className:"w-full",children:"提交並更新直播畫面"})})]})}const Pge=({match:t,matchRound:e,onSubmit:r})=>{const{control:n,register:i,reset:o}=qd(),s=Ka({name:"_playerResults",control:n}),a=Ka({name:"_resultType",control:n}),l=E.useMemo(()=>!e||!s?null:{...e,playerResults:{0:{...e.playerResults[0],isRiichi:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed",detail:{...e.playerResults[0].detail,isRiichied:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed"}},1:{...e.playerResults[1],isRiichi:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed",detail:{...e.playerResults[1].detail,isRiichied:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed"}},2:{...e.playerResults[2],isRiichi:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed",detail:{...e.playerResults[2].detail,isRiichied:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed"}},3:{...e.playerResults[3],isRiichi:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed",detail:{...e.playerResults[3].detail,isRiichied:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed"}}}},[e,s]),c=E.useMemo(()=>{var h,p;return l?{match:t,currentMatchRound:l,initialActivePlayerIndex:l.resultType===Ve.Ron||l.resultType===Ve.SelfDrawn?((h=Object.entries(l.playerResults).find(([,m])=>m.type===yt.Win))==null?void 0:h[0])??"0":"0",initialTargetPlayerIndex:l.resultType===Ve.Ron?((p=Object.entries(l.playerResults).find(([,m])=>m.type===yt.Lose))==null?void 0:p[0])??"-1":"-1"}:null},[t,l]),u=E.useMemo(()=>l?{match:t,currentMatchRound:l}:null,[t,l]),d=E.useCallback(h=>{r==null||r(h)},[r]);return E.useEffect(()=>{e&&o({_resultType:e.resultType===Ve.Ron||e.resultType===Ve.SelfDrawn?"ron":"exhausted",_playerResults:{0:{status:e.playerResults[0].isRevealed?"isRevealed":e.playerResults[0].isRiichi?"isRiichied":"none"},1:{status:e.playerResults[1].isRevealed?"isRevealed":e.playerResults[1].isRiichi?"isRiichied":"none"},2:{status:e.playerResults[2].isRevealed?"isRevealed":e.playerResults[2].isRiichi?"isRiichied":"none"},3:{status:e.playerResults[3].isRevealed?"isRevealed":e.playerResults[3].isRiichi?"isRiichied":"none"}}})},[e,e==null?void 0:e.playerResults,e==null?void 0:e.resultType,o]),f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-xl font-bold",children:"各玩家終局狀態"}),f.jsxs("table",{className:"w-full data-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{}),f.jsx("th",{children:"立直/副露？"})]})}),f.jsx("tbody",{children:["0","1","2","3"].map(h=>f.jsxs("tr",{children:[f.jsx("td",{children:t.players[h].nickname}),f.jsx("td",{children:f.jsxs("select",{...i(`_playerResults.${h}.status`),children:[f.jsx("option",{value:"none",children:"-"}),f.jsx("option",{value:"isRiichied",children:"立直"}),f.jsx("option",{value:"isRevealed",children:"副露"})]})})]},h))})]}),f.jsx("hr",{}),f.jsxs("h2",{className:"text-xl font-bold",children:[f.jsx("span",{children:"對局結果："}),f.jsxs("select",{...i("_resultType"),children:[f.jsx("option",{value:"ron",children:"和了"}),f.jsx("option",{value:"exhausted",children:"流局"})]})]}),a==="ron"&&!!c&&f.jsx(GG,{...c,submitNode:"提交修改",onSubmit:d}),a==="exhausted"&&!!u&&f.jsx(qG,{...u,submitNode:"提交修改",onSubmit:d})]})};function km(t){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},km(t)}function Tge(t,e){if(km(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(km(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ige(t){var e=Tge(t,"string");return km(e)==="symbol"?e:String(e)}function Nge(t,e,r){return e=Ige(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(r),!0).forEach(function(n){Nge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var KF=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),lA=function(){return Math.random().toString(36).substring(7).split("").join(".")},QF={INIT:"@@redux/INIT"+lA(),REPLACE:"@@redux/REPLACE"+lA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lA()}};function kge(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function lq(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Nn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Nn(1));return r(lq)(t,e)}if(typeof t!="function")throw new Error(Nn(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Nn(3));return o}function d(y){if(typeof y!="function")throw new Error(Nn(4));if(l)throw new Error(Nn(5));var g=!0;return c(),a.push(y),function(){if(g){if(l)throw new Error(Nn(6));g=!1,c();var v=a.indexOf(y);a.splice(v,1),s=null}}}function h(y){if(!kge(y))throw new Error(Nn(7));if(typeof y.type>"u")throw new Error(Nn(8));if(l)throw new Error(Nn(9));try{l=!0,o=i(o,y)}finally{l=!1}for(var g=s=a,b=0;b<g.length;b++){var v=g[b];v()}return y}function p(y){if(typeof y!="function")throw new Error(Nn(10));i=y,h({type:QF.REPLACE})}function m(){var y,g=d;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Nn(11));function x(){v.next&&v.next(u())}x();var S=g(x);return{unsubscribe:S}}},y[KF]=function(){return this},y}return h({type:QF.INIT}),n={dispatch:h,subscribe:d,getState:u,replaceReducer:p},n[KF]=m,n}function YF(t,e){return function(){return e(t.apply(this,arguments))}}function XF(t,e){if(typeof t=="function")return YF(t,e);if(typeof t!="object"||t===null)throw new Error(Nn(16));var r={};for(var n in t){var i=t[n];typeof i=="function"&&(r[n]=YF(i,e))}return r}function cq(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function Oge(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error(Nn(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=cq.apply(void 0,a)(i.dispatch),HF(HF({},i),{},{dispatch:o})}}}var Rge={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw=E,jge=nk;function $ge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dge=typeof Object.is=="function"?Object.is:$ge,Mge=jge.useSyncExternalStore,Fge=Qw.useRef,Lge=Qw.useEffect,Bge=Qw.useMemo,Uge=Qw.useDebugValue;Rge.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var o=Fge(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Bge(function(){function l(p){if(!c){if(c=!0,u=p,p=n(p),i!==void 0&&s.hasValue){var m=s.value;if(i(m,p))return d=m}return d=p}if(m=d,Dge(u,p))return m;var y=n(p);return i!==void 0&&i(m,y)?m:(u=p,d=y)}var c=!1,u,d,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var a=Mge(t,o[0],o[1]);return Lge(function(){s.hasValue=!0,s.value=a},[a]),Uge(a),a};function Vge(t){t()}let uq=Vge;const Wge=t=>uq=t,zge=()=>uq,JF=Symbol.for("react-redux-context"),ZF=typeof globalThis<"u"?globalThis:{};function Gge(){var t;if(!E.createContext)return{};const e=(t=ZF[JF])!=null?t:ZF[JF]=new Map;let r=e.get(E.createContext);return r||(r=E.createContext(null),e.set(E.createContext,r)),r}const fq=Gge(),qge=()=>{throw new Error("uSES not initialized!")};function ff(){return ff=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ff.apply(this,arguments)}function dq(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var hq={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jr=typeof Symbol=="function"&&Symbol.for,$O=jr?Symbol.for("react.element"):60103,DO=jr?Symbol.for("react.portal"):60106,Yw=jr?Symbol.for("react.fragment"):60107,Xw=jr?Symbol.for("react.strict_mode"):60108,Jw=jr?Symbol.for("react.profiler"):60114,Zw=jr?Symbol.for("react.provider"):60109,e1=jr?Symbol.for("react.context"):60110,MO=jr?Symbol.for("react.async_mode"):60111,t1=jr?Symbol.for("react.concurrent_mode"):60111,r1=jr?Symbol.for("react.forward_ref"):60112,n1=jr?Symbol.for("react.suspense"):60113,Hge=jr?Symbol.for("react.suspense_list"):60120,i1=jr?Symbol.for("react.memo"):60115,o1=jr?Symbol.for("react.lazy"):60116,Kge=jr?Symbol.for("react.block"):60121,Qge=jr?Symbol.for("react.fundamental"):60117,Yge=jr?Symbol.for("react.responder"):60118,Xge=jr?Symbol.for("react.scope"):60119;function ui(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case $O:switch(t=t.type,t){case MO:case t1:case Yw:case Jw:case Xw:case n1:return t;default:switch(t=t&&t.$$typeof,t){case e1:case r1:case o1:case i1:case Zw:return t;default:return e}}case DO:return e}}}function pq(t){return ui(t)===t1}dt.AsyncMode=MO;dt.ConcurrentMode=t1;dt.ContextConsumer=e1;dt.ContextProvider=Zw;dt.Element=$O;dt.ForwardRef=r1;dt.Fragment=Yw;dt.Lazy=o1;dt.Memo=i1;dt.Portal=DO;dt.Profiler=Jw;dt.StrictMode=Xw;dt.Suspense=n1;dt.isAsyncMode=function(t){return pq(t)||ui(t)===MO};dt.isConcurrentMode=pq;dt.isContextConsumer=function(t){return ui(t)===e1};dt.isContextProvider=function(t){return ui(t)===Zw};dt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===$O};dt.isForwardRef=function(t){return ui(t)===r1};dt.isFragment=function(t){return ui(t)===Yw};dt.isLazy=function(t){return ui(t)===o1};dt.isMemo=function(t){return ui(t)===i1};dt.isPortal=function(t){return ui(t)===DO};dt.isProfiler=function(t){return ui(t)===Jw};dt.isStrictMode=function(t){return ui(t)===Xw};dt.isSuspense=function(t){return ui(t)===n1};dt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Yw||t===t1||t===Jw||t===Xw||t===n1||t===Hge||typeof t=="object"&&t!==null&&(t.$$typeof===o1||t.$$typeof===i1||t.$$typeof===Zw||t.$$typeof===e1||t.$$typeof===r1||t.$$typeof===Qge||t.$$typeof===Yge||t.$$typeof===Xge||t.$$typeof===Kge)};dt.typeOf=ui;hq.exports=dt;var Bx=hq.exports,FO=Bx,Jge={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Zge={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},eve={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},mq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LO={};LO[FO.ForwardRef]=eve;LO[FO.Memo]=mq;function eL(t){return FO.isMemo(t)?mq:LO[t.$$typeof]||Jge}var tve=Object.defineProperty,rve=Object.getOwnPropertyNames,tL=Object.getOwnPropertySymbols,nve=Object.getOwnPropertyDescriptor,ive=Object.getPrototypeOf,rL=Object.prototype;function yq(t,e,r){if(typeof e!="string"){if(rL){var n=ive(e);n&&n!==rL&&yq(t,n,r)}var i=rve(e);tL&&(i=i.concat(tL(e)));for(var o=eL(t),s=eL(e),a=0;a<i.length;++a){var l=i[a];if(!Zge[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var c=nve(e,l);try{tve(t,l,c)}catch{}}}}return t}var ove=yq;const nL=ot(ove);var gq={exports:{}},ht={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BO=Symbol.for("react.element"),UO=Symbol.for("react.portal"),s1=Symbol.for("react.fragment"),a1=Symbol.for("react.strict_mode"),l1=Symbol.for("react.profiler"),c1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),sve=Symbol.for("react.server_context"),f1=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),h1=Symbol.for("react.suspense_list"),p1=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),ave=Symbol.for("react.offscreen"),vq;vq=Symbol.for("react.module.reference");function Li(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case BO:switch(t=t.type,t){case s1:case l1:case a1:case d1:case h1:return t;default:switch(t=t&&t.$$typeof,t){case sve:case u1:case f1:case m1:case p1:case c1:return t;default:return e}}case UO:return e}}}ht.ContextConsumer=u1;ht.ContextProvider=c1;ht.Element=BO;ht.ForwardRef=f1;ht.Fragment=s1;ht.Lazy=m1;ht.Memo=p1;ht.Portal=UO;ht.Profiler=l1;ht.StrictMode=a1;ht.Suspense=d1;ht.SuspenseList=h1;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(t){return Li(t)===u1};ht.isContextProvider=function(t){return Li(t)===c1};ht.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===BO};ht.isForwardRef=function(t){return Li(t)===f1};ht.isFragment=function(t){return Li(t)===s1};ht.isLazy=function(t){return Li(t)===m1};ht.isMemo=function(t){return Li(t)===p1};ht.isPortal=function(t){return Li(t)===UO};ht.isProfiler=function(t){return Li(t)===l1};ht.isStrictMode=function(t){return Li(t)===a1};ht.isSuspense=function(t){return Li(t)===d1};ht.isSuspenseList=function(t){return Li(t)===h1};ht.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===s1||t===l1||t===a1||t===d1||t===h1||t===ave||typeof t=="object"&&t!==null&&(t.$$typeof===m1||t.$$typeof===p1||t.$$typeof===c1||t.$$typeof===u1||t.$$typeof===f1||t.$$typeof===vq||t.getModuleId!==void 0)};ht.typeOf=Li;gq.exports=ht;var lve=gq.exports;const cve=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function uve(t,e,r,n,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a=!1,l,c,u,d,h;function p(v,x){return l=v,c=x,u=t(l,c),d=e(n,c),h=r(u,d,c),a=!0,h}function m(){return u=t(l,c),e.dependsOnOwnProps&&(d=e(n,c)),h=r(u,d,c),h}function y(){return t.dependsOnOwnProps&&(u=t(l,c)),e.dependsOnOwnProps&&(d=e(n,c)),h=r(u,d,c),h}function g(){const v=t(l,c),x=!s(v,u);return u=v,x&&(h=r(u,d,c)),h}function b(v,x){const S=!o(x,c),_=!i(v,l,x,c);return l=v,c=x,S&&_?m():S?y():_?g():h}return function(x,S){return a?b(x,S):p(x,S)}}function fve(t,e){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=e,o=dq(e,cve);const s=r(t,o),a=n(t,o),l=i(t,o);return uve(s,a,l,t,o)}function dve(t,e){const r={};for(const n in t){const i=t[n];typeof i=="function"&&(r[n]=(...o)=>e(i(...o)))}return r}function dT(t){return function(r){const n=t(r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function iL(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function bq(t,e){return function(n,{displayName:i}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=t,o.dependsOnOwnProps=iL(t);let c=o(a,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=iL(c),c=o(a,l)),c},o}}function VO(t,e){return(r,n)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${n.wrappedComponentName}.`)}}function hve(t){return t&&typeof t=="object"?dT(e=>dve(t,e)):t?typeof t=="function"?bq(t):VO(t,"mapDispatchToProps"):dT(e=>({dispatch:e}))}function pve(t){return t?typeof t=="function"?bq(t):VO(t,"mapStateToProps"):dT(()=>({}))}function mve(t,e,r){return ff({},r,t,e)}function yve(t){return function(r,{displayName:n,areMergedPropsEqual:i}){let o=!1,s;return function(l,c,u){const d=t(l,c,u);return o?i(d,s)||(s=d):(o=!0,s=d),s}}}function gve(t){return t?typeof t=="function"?yve(t):VO(t,"mergeProps"):()=>mve}function vve(){const t=zge();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const oL={notify(){},get:()=>[]};function xq(t,e){let r,n=oL,i=0,o=!1;function s(y){u();const g=n.subscribe(y);let b=!1;return()=>{b||(b=!0,g(),d())}}function a(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return o}function u(){i++,r||(r=e?e.addNestedSub(l):t.subscribe(l),n=vve())}function d(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=oL)}function h(){o||(o=!0,u())}function p(){o&&(o=!1,d())}const m={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return m}const bve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ux=bve?E.useLayoutEffect:E.useEffect;function sL(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function cA(t,e){if(sL(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!sL(t[r[i]],e[r[i]]))return!1;return!0}const xve=["reactReduxForwardedRef"];let _q=qge;const _ve=t=>{_q=t},wve=[null,null];function Sve(t,e,r){Ux(()=>t(...e),r)}function Eve(t,e,r,n,i,o){t.current=n,r.current=!1,i.current&&(i.current=null,o())}function Ave(t,e,r,n,i,o,s,a,l,c,u){if(!t)return()=>{};let d=!1,h=null;const p=()=>{if(d||!a.current)return;const y=e.getState();let g,b;try{g=n(y,i.current)}catch(v){b=v,h=v}b||(h=null),g===o.current?s.current||c():(o.current=g,l.current=g,s.current=!0,u())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function Cve(t,e){return t===e}function wq(t,e,r,{pure:n,areStatesEqual:i=Cve,areOwnPropsEqual:o=cA,areStatePropsEqual:s=cA,areMergedPropsEqual:a=cA,forwardRef:l=!1,context:c=fq}={}){const u=c,d=pve(t),h=hve(e),p=gve(r),m=!!t;return g=>{const b=g.displayName||g.name||"Component",v=`Connect(${b})`,x={shouldHandleStateChanges:m,displayName:v,wrappedComponentName:b,WrappedComponent:g,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function S(A){const[C,T,P]=E.useMemo(()=>{const{reactReduxForwardedRef:q}=A,Ze=dq(A,xve);return[A.context,q,Ze]},[A]),I=E.useMemo(()=>C&&C.Consumer&&lve.isContextConsumer(E.createElement(C.Consumer,null))?C:u,[C,u]),O=E.useContext(I),N=!!A.store&&!!A.store.getState&&!!A.store.dispatch,j=!!O&&!!O.store,L=N?A.store:O.store,U=j?O.getServerState:L.getState,V=E.useMemo(()=>fve(L.dispatch,x),[L]),[R,F]=E.useMemo(()=>{if(!m)return wve;const q=xq(L,N?void 0:O.subscription),Ze=q.notifyNestedSubs.bind(q);return[q,Ze]},[L,N,O]),z=E.useMemo(()=>N?O:ff({},O,{subscription:R}),[N,O,R]),le=E.useRef(),re=E.useRef(P),be=E.useRef(),at=E.useRef(!1);E.useRef(!1);const rt=E.useRef(!1),Wt=E.useRef();Ux(()=>(rt.current=!0,()=>{rt.current=!1}),[]);const pt=E.useMemo(()=>()=>be.current&&P===re.current?be.current:V(L.getState(),P),[L,P]),Zt=E.useMemo(()=>Ze=>R?Ave(m,L,R,V,re,le,at,rt,be,F,Ze):()=>{},[R]);Sve(Eve,[re,le,at,P,be,F]);let te;try{te=_q(Zt,pt,U?()=>V(U(),P):pt)}catch(q){throw Wt.current&&(q.message+=`
The error may be correlated with this previous error:
${Wt.current.stack}

`),q}Ux(()=>{Wt.current=void 0,be.current=void 0,le.current=te});const xe=E.useMemo(()=>E.createElement(g,ff({},te,{ref:T})),[T,g,te]);return E.useMemo(()=>m?E.createElement(I.Provider,{value:z},xe):xe,[I,xe,z])}const w=E.memo(S);if(w.WrappedComponent=g,w.displayName=S.displayName=v,l){const C=E.forwardRef(function(P,I){return E.createElement(w,ff({},P,{reactReduxForwardedRef:I}))});return C.displayName=v,C.WrappedComponent=g,nL(C,g)}return nL(w,g)}}function Pve({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:o="once"}){const s=E.useMemo(()=>{const c=xq(t);return{store:t,subscription:c,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:o}},[t,n,i,o]),a=E.useMemo(()=>t.getState(),[t]);Ux(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=e||fq;return E.createElement(l.Provider,{value:s},r)}_ve(nk.useSyncExternalStore);Wge(rg.unstable_batchedUpdates);function Tve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Sq(t,e){var r=E.useState(function(){return{inputs:e,result:t()}})[0],n=E.useRef(!0),i=E.useRef(r),o=n.current||!!(e&&i.current.inputs&&Tve(e,i.current.inputs)),s=o?i.current:{inputs:e,result:t()};return E.useEffect(function(){n.current=!1,i.current=s},[s]),s.result}function Ive(t,e){return Sq(function(){return t},e)}var Ge=Sq,he=Ive,Nve="Invariant failed";function Eq(t,e){if(!t)throw new Error(Nve)}var no=function(e){var r=e.top,n=e.right,i=e.bottom,o=e.left,s=n-o,a=i-r,l={top:r,right:n,bottom:i,left:o,width:s,height:a,x:o,y:r,center:{x:(n+o)/2,y:(i+r)/2}};return l},WO=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},aL=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},kve=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},uA={top:0,right:0,bottom:0,left:0},zO=function(e){var r=e.borderBox,n=e.margin,i=n===void 0?uA:n,o=e.border,s=o===void 0?uA:o,a=e.padding,l=a===void 0?uA:a,c=no(WO(r,i)),u=no(aL(r,s)),d=no(aL(u,l));return{marginBox:c,borderBox:no(r),paddingBox:u,contentBox:d,margin:i,border:s,padding:l}},di=function(e){var r=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var i=Number(r);return isNaN(i)&&Eq(!1),i},Ove=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Vx=function(e,r){var n=e.borderBox,i=e.border,o=e.margin,s=e.padding,a=kve(n,r);return zO({borderBox:a,border:i,margin:o,padding:s})},Wx=function(e,r){return r===void 0&&(r=Ove()),Vx(e,r)},Aq=function(e,r){var n={top:di(r.marginTop),right:di(r.marginRight),bottom:di(r.marginBottom),left:di(r.marginLeft)},i={top:di(r.paddingTop),right:di(r.paddingRight),bottom:di(r.paddingBottom),left:di(r.paddingLeft)},o={top:di(r.borderTopWidth),right:di(r.borderRightWidth),bottom:di(r.borderBottomWidth),left:di(r.borderLeftWidth)};return zO({borderBox:e,margin:n,padding:i,border:o})},Cq=function(e){var r=e.getBoundingClientRect(),n=window.getComputedStyle(e);return Aq(r,n)},lL=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Rve(t,e){return!!(t===e||lL(t)&&lL(e))}function jve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Rve(t[r],e[r]))return!1;return!0}function kr(t,e){e===void 0&&(e=jve);var r=null;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r&&r.lastThis===this&&e(i,r.lastArgs))return r.lastResult;var s=t.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var Om=function(e){var r=[],n=null,i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};function zx(){return zx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zx.apply(this,arguments)}function Pq(t,e){}Pq.bind(null,"warn");Pq.bind(null,"error");function $a(){}function $ve(t,e){return{...t,...e}}function Ti(t,e,r){const n=e.map(i=>{const o=$ve(r,i.options);return t.addEventListener(i.eventName,i.fn,o),function(){t.removeEventListener(i.eventName,i.fn,o)}});return function(){n.forEach(o=>{o()})}}const Dve="Invariant failed";class Gx extends Error{}Gx.prototype.toString=function(){return this.message};function ee(t,e){if(!t)throw new Gx(Dve)}class Mve extends k.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=$a,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof Gx&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Ti(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Gx){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Fve=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,qx=t=>t+1,Lve=t=>`
  You have lifted an item in position ${qx(t.source.index)}
`,Tq=(t,e)=>{const r=t.droppableId===e.droppableId,n=qx(t.index),i=qx(e.index);return r?`
      You have moved the item from position ${n}
      to position ${i}
    `:`
    You have moved the item from position ${n}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},Iq=(t,e,r)=>e.droppableId===r.droppableId?`
      The item ${t}
      has been combined with ${r.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,Bve=t=>{const e=t.destination;if(e)return Tq(t.source,e);const r=t.combine;return r?Iq(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},cL=t=>`
  The item has returned to its starting position
  of ${qx(t.index)}
`,Uve=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${cL(t.source)}
    `;const e=t.destination,r=t.combine;return e?`
      You have dropped the item.
      ${Tq(t.source,e)}
    `:r?`
      You have dropped the item.
      ${Iq(t.draggableId,t.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${cL(t.source)}
  `},Vve={dragHandleUsageInstructions:Fve,onDragStart:Lve,onDragUpdate:Bve,onDragEnd:Uve};var Z0=Vve;const Or={x:0,y:0},Gr=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),ei=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Da=(t,e)=>t.x===e.x&&t.y===e.y,Hd=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),Ic=(t,e,r=0)=>t==="x"?{x:e,y:r}:{x:r,y:e},Rm=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),uL=(t,e)=>Math.min(...e.map(r=>Rm(t,r))),Nq=t=>e=>({x:t(e.x),y:t(e.y)});var Wve=(t,e)=>{const r=no({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r};const Tg=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),fL=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],zve={top:0,right:0,bottom:0,left:0},Gve=(t,e)=>e?Tg(t,e.scroll.diff.displacement):t,qve=(t,e,r)=>r&&r.increasedBy?{...t,[e.end]:t[e.end]+r.increasedBy[e.line]}:t,Hve=(t,e)=>e&&e.shouldClipSubject?Wve(e.pageMarginBox,t):no(t);var od=({page:t,withPlaceholder:e,axis:r,frame:n})=>{const i=Gve(t.marginBox,n),o=qve(i,r,e),s=Hve(o,n);return{page:t,withPlaceholder:e,active:s}},GO=(t,e)=>{t.frame||ee(!1);const r=t.frame,n=ei(e,r.scroll.initial),i=Hd(n),o={...r,scroll:{initial:r.scroll.initial,current:e,diff:{value:n,displacement:i},max:r.scroll.max}},s=od({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:o});return{...t,frame:o,subject:s}};const kq=kr(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),Oq=kr(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),y1=kr(t=>Object.values(t)),Kve=kr(t=>Object.values(t));var Kd=kr((t,e)=>Kve(e).filter(n=>t===n.descriptor.droppableId).sort((n,i)=>n.descriptor.index-i.descriptor.index));function qO(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function g1(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var v1=kr((t,e)=>e.filter(r=>r.descriptor.id!==t.descriptor.id)),Qve=({isMovingForward:t,draggable:e,destination:r,insideDestination:n,previousImpact:i})=>{if(!r.isCombineEnabled||!qO(i))return null;function s(p){const m={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...i,at:m}}const a=i.displaced.all,l=a.length?a[0]:null;if(t)return l?s(l):null;const c=v1(e,n);if(!l){if(!c.length)return null;const p=c[c.length-1];return s(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&ee(!1);const d=u-1;if(d<0)return null;const h=c[d];return s(h.descriptor.id)},Qd=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const Rq={point:Or,value:0},jm={invisible:{},visible:{},all:[]},Yve={displaced:jm,displacedBy:Rq,at:null};var Xve=Yve,ki=(t,e)=>r=>t<=r&&r<=e,jq=t=>{const e=ki(t.top,t.bottom),r=ki(t.left,t.right);return n=>{if(e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=e(n.top)||e(n.bottom),s=r(n.left)||r(n.right);if(o&&s)return!0;const l=n.top<t.top&&n.bottom>t.bottom,c=n.left<t.left&&n.right>t.right;return l&&c?!0:l&&s||c&&o}},Jve=t=>{const e=ki(t.top,t.bottom),r=ki(t.left,t.right);return n=>e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right)};const HO={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},$q={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Zve=t=>e=>{const r=ki(e.top,e.bottom),n=ki(e.left,e.right);return i=>t===HO?r(i.top)&&r(i.bottom):n(i.left)&&n(i.right)};const e0e=(t,e)=>{const r=e.frame?e.frame.scroll.diff.displacement:Or;return Tg(t,r)},t0e=(t,e,r)=>e.subject.active?r(e.subject.active)(t):!1,r0e=(t,e,r)=>r(e)(t),KO=({target:t,destination:e,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:i})=>{const o=n?e0e(t,e):t;return t0e(o,e,i)&&r0e(o,r,i)},n0e=t=>KO({...t,isVisibleThroughFrameFn:jq}),Dq=t=>KO({...t,isVisibleThroughFrameFn:Jve}),i0e=t=>KO({...t,isVisibleThroughFrameFn:Zve(t.destination.axis)}),o0e=(t,e,r)=>{if(typeof r=="boolean")return r;if(!e)return!0;const{invisible:n,visible:i}=e;if(n[t])return!1;const o=i[t];return o?o.shouldAnimate:!0};function s0e(t,e){const r=t.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return no(WO(r,n))}function $m({afterDragging:t,destination:e,displacedBy:r,viewport:n,forceShouldAnimate:i,last:o}){return t.reduce(function(a,l){const c=s0e(l,r),u=l.descriptor.id;if(a.all.push(u),!n0e({target:c,destination:e,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=o0e(u,o,i),p={draggableId:u,shouldAnimate:h};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function a0e(t,e){if(!t.length)return 0;const r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function dL({insideDestination:t,inHomeList:e,displacedBy:r,destination:n}){const i=a0e(t,{inHomeList:e});return{displaced:jm,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Hx({draggable:t,insideDestination:e,destination:r,viewport:n,displacedBy:i,last:o,index:s,forceShouldAnimate:a}){const l=Qd(t,r);if(s==null)return dL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const c=e.find(m=>m.descriptor.index===s);if(!c)return dL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const u=v1(t,e),d=e.indexOf(c),h=u.slice(d);return{displaced:$m({afterDragging:h,destination:r,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Qa(t,e){return!!e.effected[t]}var l0e=({isMovingForward:t,destination:e,draggables:r,combine:n,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=n.draggableId,a=r[o].descriptor.index;return Qa(o,i)?t?a:a-1:t?a+1:a},c0e=({isMovingForward:t,isInHomeList:e,insideDestination:r,location:n})=>{if(!r.length)return null;const i=n.index,o=t?i+1:i-1,s=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=e?a:a+1;return o<s||o>l?null:o},u0e=({isMovingForward:t,isInHomeList:e,draggable:r,draggables:n,destination:i,insideDestination:o,previousImpact:s,viewport:a,afterCritical:l})=>{const c=s.at;if(c||ee(!1),c.type==="REORDER"){const d=c0e({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:o});return d==null?null:Hx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:d})}const u=l0e({isMovingForward:t,destination:i,displaced:s.displaced,draggables:n,combine:c.combine,afterCritical:l});return u==null?null:Hx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:u})},f0e=({displaced:t,afterCritical:e,combineWith:r,displacedBy:n})=>{const i=!!(t.visible[r]||t.invisible[r]);return Qa(r,e)?i?Or:Hd(n.point):i?n.point:Or},d0e=({afterCritical:t,impact:e,draggables:r})=>{const n=g1(e);n||ee(!1);const i=n.draggableId,o=r[i].page.borderBox.center,s=f0e({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return Gr(o,s)};const Mq=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,h0e=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,QO=(t,e,r)=>e[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2,hL=({axis:t,moveRelativeTo:e,isMoving:r})=>Ic(t.line,e.marginBox[t.end]+Mq(t,r),QO(t,e.marginBox,r)),pL=({axis:t,moveRelativeTo:e,isMoving:r})=>Ic(t.line,e.marginBox[t.start]-h0e(t,r),QO(t,e.marginBox,r)),p0e=({axis:t,moveInto:e,isMoving:r})=>Ic(t.line,e.contentBox[t.start]+Mq(t,r),QO(t,e.contentBox,r));var m0e=({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i})=>{const o=Kd(n.descriptor.id,r),s=e.page,a=n.axis;if(!o.length)return p0e({axis:a,moveInto:n.page,isMoving:s});const{displaced:l,displacedBy:c}=t,u=l.all[0];if(u){const h=r[u];if(Qa(u,i))return pL({axis:a,moveRelativeTo:h.page,isMoving:s});const p=Vx(h.page,c.point);return pL({axis:a,moveRelativeTo:p,isMoving:s})}const d=o[o.length-1];if(d.descriptor.id===e.descriptor.id)return s.borderBox.center;if(Qa(d.descriptor.id,i)){const h=Vx(d.page,Hd(i.displacedBy.point));return hL({axis:a,moveRelativeTo:h,isMoving:s})}return hL({axis:a,moveRelativeTo:d.page,isMoving:s})},hT=(t,e)=>{const r=t.frame;return r?Gr(e,r.scroll.diff.displacement):e};const y0e=({impact:t,draggable:e,droppable:r,draggables:n,afterCritical:i})=>{const o=e.page.borderBox.center,s=t.at;return!r||!s?o:s.type==="REORDER"?m0e({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i}):d0e({impact:t,draggables:n,afterCritical:i})};var b1=t=>{const e=y0e(t),r=t.droppable;return r?hT(r,e):e},Fq=(t,e)=>{const r=ei(e,t.scroll.initial),n=Hd(r);return{frame:no({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:n}}}};function mL(t,e){return t.map(r=>e[r])}function g0e(t,e){for(let r=0;r<e.length;r++){const n=e[r].visible[t];if(n)return n}return null}var v0e=({impact:t,viewport:e,destination:r,draggables:n,maxScrollChange:i})=>{const o=Fq(e,Gr(e.scroll.current,i)),s=r.frame?GO(r,Gr(r.frame.scroll.current,i)):r,a=t.displaced,l=$m({afterDragging:mL(a.all,n),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),c=$m({afterDragging:mL(a.all,n),destination:s,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),u={},d={},h=[a,l,c];return a.all.forEach(m=>{const y=g0e(m,h);if(y){d[m]=y;return}u[m]=!0}),{...t,displaced:{all:a.all,invisible:u,visible:d}}},b0e=(t,e)=>Gr(t.scroll.diff.displacement,e),YO=({pageBorderBoxCenter:t,draggable:e,viewport:r})=>{const n=b0e(r,t),i=ei(n,e.page.borderBox.center);return Gr(e.client.borderBox.center,i)},Lq=({draggable:t,destination:e,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const s=ei(r,t.page.borderBox.center),l={target:Tg(t.page.borderBox,s),destination:e,withDroppableDisplacement:i,viewport:n};return o?i0e(l):Dq(l)},x0e=({isMovingForward:t,draggable:e,destination:r,draggables:n,previousImpact:i,viewport:o,previousPageBorderBoxCenter:s,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const c=Kd(r.descriptor.id,n),u=Qd(e,r),d=Qve({isMovingForward:t,draggable:e,destination:r,insideDestination:c,previousImpact:i})||u0e({isMovingForward:t,isInHomeList:u,draggable:e,draggables:n,destination:r,insideDestination:c,previousImpact:i,viewport:o,afterCritical:l});if(!d)return null;const h=b1({impact:d,draggable:e,droppable:r,draggables:n,afterCritical:l});if(Lq({draggable:e,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:YO({pageBorderBoxCenter:h,draggable:e,viewport:o}),impact:d,scrollJumpRequest:null};const m=ei(h,s),y=v0e({impact:d,viewport:o,destination:r,draggables:n,maxScrollChange:m});return{clientSelection:a,impact:y,scrollJumpRequest:m}};const yn=t=>{const e=t.subject.active;return e||ee(!1),e};var _0e=({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:n,viewport:i})=>{const o=r.subject.active;if(!o)return null;const s=r.axis,a=ki(o[s.start],o[s.end]),l=y1(n).filter(u=>u!==r).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>jq(i.frame)(yn(u))).filter(u=>{const d=yn(u);return t?o[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<o[s.crossAxisStart]}).filter(u=>{const d=yn(u),h=ki(d[s.start],d[s.end]);return a(d[s.start])||a(d[s.end])||h(o[s.start])||h(o[s.end])}).sort((u,d)=>{const h=yn(u)[s.crossAxisStart],p=yn(d)[s.crossAxisStart];return t?h-p:p-h}).filter((u,d,h)=>yn(u)[s.crossAxisStart]===yn(h[0])[s.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>ki(yn(u)[s.start],yn(u)[s.end])(e[s.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>yn(u)[s.start]-yn(d)[s.start])[0]:l.sort((u,d)=>{const h=uL(e,fL(yn(u))),p=uL(e,fL(yn(d)));return h!==p?h-p:yn(u)[s.start]-yn(d)[s.start]})[0]};const yL=(t,e)=>{const r=t.page.borderBox.center;return Qa(t.descriptor.id,e)?ei(r,e.displacedBy.point):r},w0e=(t,e)=>{const r=t.page.borderBox;return Qa(t.descriptor.id,e)?Tg(r,Hd(e.displacedBy.point)):r};var S0e=({pageBorderBoxCenter:t,viewport:e,destination:r,insideDestination:n,afterCritical:i})=>n.filter(s=>Dq({target:w0e(s,i),destination:r,viewport:e.frame,withDroppableDisplacement:!0})).sort((s,a)=>{const l=Rm(t,hT(r,yL(s,i))),c=Rm(t,hT(r,yL(a,i)));return l<c?-1:c<l?1:s.descriptor.index-a.descriptor.index})[0]||null,Ig=kr(function(e,r){const n=r[e.line];return{value:n,point:Ic(e.line,n)}});const E0e=(t,e,r)=>{const n=t.axis;if(t.descriptor.mode==="virtual")return Ic(n.line,e[n.line]);const i=t.subject.page.contentBox[n.size],l=Kd(t.descriptor.id,r).reduce((c,u)=>c+u.client.marginBox[n.size],0)+e[n.line]-i;return l<=0?null:Ic(n.line,l)},Bq=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),Uq=(t,e,r)=>{const n=t.frame;Qd(e,t)&&ee(!1),t.subject.withPlaceholder&&ee(!1);const i=Ig(t.axis,e.displaceBy).point,o=E0e(t,i,r),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!n){const u=od({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return{...t,subject:u}}const a=o?Gr(n.scroll.max,o):n.scroll.max,l=Bq(n,a),c=od({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},A0e=t=>{const e=t.subject.withPlaceholder;e||ee(!1);const r=t.frame;if(!r){const s=od({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:s}}const n=e.oldFrameMaxScroll;n||ee(!1);const i=Bq(r,n),o=od({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:o,frame:i}};var C0e=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:r,draggable:n,draggables:i,destination:o,viewport:s,afterCritical:a})=>{if(!e){if(r.length)return null;const d={displaced:jm,displacedBy:Rq,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=b1({impact:d,draggable:n,droppable:o,draggables:i,afterCritical:a}),p=Qd(n,o)?o:Uq(o,n,i);return Lq({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=t[o.axis.line]<=e.page.borderBox.center[o.axis.line],c=(()=>{const d=e.descriptor.index;return e.descriptor.id===n.descriptor.id||l?d:d+1})(),u=Ig(o.axis,n.displaceBy);return Hx({draggable:n,insideDestination:r,destination:o,viewport:s,displacedBy:u,last:jm,index:c})},P0e=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:r,isOver:n,draggables:i,droppables:o,viewport:s,afterCritical:a})=>{const l=_0e({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:o,viewport:s});if(!l)return null;const c=Kd(l.descriptor.id,i),u=S0e({pageBorderBoxCenter:e,viewport:s,destination:l,insideDestination:c,afterCritical:a}),d=C0e({previousPageBorderBoxCenter:e,destination:l,draggable:r,draggables:i,moveRelativeTo:u,insideDestination:c,viewport:s,afterCritical:a});if(!d)return null;const h=b1({impact:d,draggable:r,droppable:l,draggables:i,afterCritical:a});return{clientSelection:YO({pageBorderBoxCenter:h,draggable:r,viewport:s}),impact:d,scrollJumpRequest:null}},ni=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const T0e=(t,e)=>{const r=ni(t);return r?e[r]:null};var I0e=({state:t,type:e})=>{const r=T0e(t.impact,t.dimensions.droppables),n=!!r,i=t.dimensions.droppables[t.critical.droppable.id],o=r||i,s=o.axis.direction,a=s==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||s==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!n)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:d,droppables:h}=t.dimensions;return a?x0e({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:o,draggables:d,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):P0e({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:o,draggables:d,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Pl(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Vq(t){const e=ki(t.top,t.bottom),r=ki(t.left,t.right);return function(i){return e(i.y)&&r(i.x)}}function N0e(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function k0e({pageBorderBox:t,draggable:e,candidates:r}){const n=e.page.borderBox.center,i=r.map(o=>{const s=o.axis,a=Ic(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Rm(n,a)}}).sort((o,s)=>s.distance-o.distance);return i[0]?i[0].id:null}function O0e({pageBorderBox:t,draggable:e,droppables:r}){const n=y1(r).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!N0e(t,o))return!1;if(Vq(o)(t.center))return!0;const s=i.axis,a=o.center[s.crossAxisLine],l=t[s.crossAxisStart],c=t[s.crossAxisEnd],u=ki(o[s.crossAxisStart],o[s.crossAxisEnd]),d=u(l),h=u(c);return!d&&!h?!0:d?l<a:c>a});return n.length?n.length===1?n[0].descriptor.id:k0e({pageBorderBox:t,draggable:e,candidates:n}):null}const Wq=(t,e)=>no(Tg(t,e));var R0e=(t,e)=>{const r=t.frame;return r?Wq(e,r.scroll.diff.value):e};function zq({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function j0e({draggable:t,closest:e,inHomeList:r}){return e?r&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var $0e=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:r,insideDestination:n,last:i,viewport:o,afterCritical:s})=>{const a=r.axis,l=Ig(r.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],p=v1(e,n).find(y=>{const g=y.descriptor.id,b=y.page.borderBox.center[a.line],v=Qa(g,s),x=zq({displaced:i,id:g});return v?x?d<=b:u<b-c:x?d<=b+c:u<b})||null,m=j0e({draggable:e,closest:p,inHomeList:Qd(e,r)});return Hx({draggable:e,insideDestination:n,destination:r,viewport:o,last:i,displacedBy:l,index:m})};const D0e=4;var M0e=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:r,destination:n,insideDestination:i,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const s=n.axis,a=Ig(n.axis,t.displaceBy),l=a.value,c=e[s.start],u=e[s.end],h=v1(t,i).find(m=>{const y=m.descriptor.id,g=m.page.borderBox,v=g[s.size]/D0e,x=Qa(y,o),S=zq({displaced:r.displaced,id:y});return x?S?u>g[s.start]+v&&u<g[s.end]-v:c>g[s.start]-l+v&&c<g[s.end]-l-v:S?u>g[s.start]+l+v&&u<g[s.end]+l-v:c>g[s.start]+v&&c<g[s.end]-v});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Gq=({pageOffset:t,draggable:e,draggables:r,droppables:n,previousImpact:i,viewport:o,afterCritical:s})=>{const a=Wq(e.page.borderBox,t),l=O0e({pageBorderBox:a,draggable:e,droppables:n});if(!l)return Xve;const c=n[l],u=Kd(c.descriptor.id,r),d=R0e(c,a);return M0e({pageBorderBoxWithDroppableScroll:d,draggable:e,previousImpact:i,destination:c,insideDestination:u,afterCritical:s})||$0e({pageBorderBoxWithDroppableScroll:d,draggable:e,destination:c,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},XO=(t,e)=>({...t,[e.descriptor.id]:e});const F0e=({previousImpact:t,impact:e,droppables:r})=>{const n=ni(t),i=ni(e);if(!n||n===i)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const s=A0e(o);return XO(r,s)};var L0e=({draggable:t,draggables:e,droppables:r,previousImpact:n,impact:i})=>{const o=F0e({previousImpact:n,impact:i,droppables:r}),s=ni(i);if(!s)return o;const a=r[s];if(Qd(t,a)||a.subject.withPlaceholder)return o;const l=Uq(a,t,e);return XO(o,l)},Fp=({state:t,clientSelection:e,dimensions:r,viewport:n,impact:i,scrollJumpRequest:o})=>{const s=n||t.viewport,a=r||t.dimensions,l=e||t.current.client.selection,c=ei(l,t.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:Gr(t.initial.client.borderBoxCenter,c)},d={selection:Gr(u.selection,s.scroll.current),borderBoxCenter:Gr(u.borderBoxCenter,s.scroll.current),offset:Gr(u.offset,s.scroll.diff.value)},h={client:u,page:d};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:s,current:h};const p=a.draggables[t.critical.draggable.id],m=i||Gq({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),y=L0e({draggable:p,impact:m,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:y},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function B0e(t,e){return t.map(r=>e[r])}var qq=({impact:t,viewport:e,draggables:r,destination:n,forceShouldAnimate:i})=>{const o=t.displaced,s=B0e(o.all,r),a=$m({afterDragging:s,destination:n,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...t,displaced:a}},Hq=({impact:t,draggable:e,droppable:r,draggables:n,viewport:i,afterCritical:o})=>{const s=b1({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:o});return YO({pageBorderBoxCenter:s,draggable:e,viewport:i})},Kq=({state:t,dimensions:e,viewport:r})=>{t.movementMode!=="SNAP"&&ee(!1);const n=t.impact,i=r||t.viewport,o=e||t.dimensions,{draggables:s,droppables:a}=o,l=s[t.critical.draggable.id],c=ni(n);c||ee(!1);const u=a[c],d=qq({impact:n,viewport:i,destination:u,draggables:s}),h=Hq({impact:d,draggable:l,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return Fp({impact:d,clientSelection:h,state:t,dimensions:o,viewport:i})},U0e=t=>({index:t.index,droppableId:t.droppableId}),Qq=({draggable:t,home:e,draggables:r,viewport:n})=>{const i=Ig(e.axis,t.displaceBy),o=Kd(e.descriptor.id,r),s=o.indexOf(t);s===-1&&ee(!1);const a=o.slice(s+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:l};return{impact:{displaced:$m({afterDragging:a,destination:e,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:U0e(t.descriptor)}},afterCritical:c}},V0e=(t,e)=>({draggables:t.draggables,droppables:XO(t.droppables,e)}),W0e=({draggable:t,offset:e,initialWindowScroll:r})=>{const n=Vx(t.client,e),i=Wx(n,r);return{...t,placeholder:{...t.placeholder,client:n},client:n,page:i}},z0e=t=>{const e=t.frame;return e||ee(!1),e},G0e=({additions:t,updatedDroppables:e,viewport:r})=>{const n=r.scroll.diff.value;return t.map(i=>{const o=i.descriptor.droppableId,s=e[o],l=z0e(s).scroll.diff.value,c=Gr(n,l);return W0e({draggable:i,offset:c,initialWindowScroll:r.scroll.initial})})},q0e=({state:t,published:e})=>{const r=e.modified.map(b=>{const v=t.dimensions.droppables[b.droppableId];return GO(v,b.scroll)}),n={...t.dimensions.droppables,...kq(r)},i=Oq(G0e({additions:e.additions,updatedDroppables:n,viewport:t.viewport})),o={...t.dimensions.draggables,...i};e.removals.forEach(b=>{delete o[b]});const s={droppables:n,draggables:o},a=ni(t.impact),l=a?s.droppables[a]:null,c=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],{impact:d,afterCritical:h}=Qq({draggable:c,home:u,draggables:o,viewport:t.viewport}),p=l&&l.isCombineEnabled?t.impact:d,m=Gq({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),y={...t,phase:"DRAGGING",impact:m,onLiftImpact:d,dimensions:s,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const pT=t=>t.movementMode==="SNAP",fA=(t,e,r)=>{const n=V0e(t.dimensions,e);return!pT(t)||r?Fp({state:t,dimensions:n}):Kq({state:t,dimensions:n})};function dA(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const gL={phase:"IDLE",completed:null,shouldFlush:!1};var H0e=(t=gL,e)=>{if(e.type==="FLUSH")return{...gL,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ee(!1);const{critical:r,clientSelection:n,viewport:i,dimensions:o,movementMode:s}=e.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],c={selection:n,borderBoxCenter:a.client.borderBox.center,offset:Or},u={client:c,page:{selection:Gr(c.selection,i.scroll.initial),borderBoxCenter:Gr(c.selection,i.scroll.initial),offset:Gr(c.selection,i.scroll.diff.value)}},d=y1(o.droppables).every(y=>!y.isFixedOnPage),{impact:h,afterCritical:p}=Qq({draggable:a,home:l,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&ee(!1),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ee(!1),q0e({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Pl(t)||ee(!1);const{client:r}=e.payload;return Da(r,t.current.client.selection)?t:Fp({state:t,clientSelection:r,impact:pT(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return dA(t);Pl(t)||ee(!1);const{id:r,newScroll:n}=e.payload,i=t.dimensions.droppables[r];if(!i)return t;const o=GO(i,n);return fA(t,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Pl(t)||ee(!1);const{id:r,isEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||ee(!1),i.isEnabled===n&&ee(!1);const o={...i,isEnabled:n};return fA(t,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Pl(t)||ee(!1);const{id:r,isCombineEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||ee(!1),i.isCombineEnabled===n&&ee(!1);const o={...i,isCombineEnabled:n};return fA(t,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Pl(t)||ee(!1),t.isWindowScrollAllowed||ee(!1);const r=e.payload.newScroll;if(Da(t.viewport.scroll.current,r))return dA(t);const n=Fq(t.viewport,r);return pT(t)?Kq({state:t,viewport:n}):Fp({state:t,viewport:n})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Pl(t))return t;const r=e.payload.maxScroll;if(Da(r,t.viewport.scroll.max))return t;const n={...t.viewport,scroll:{...t.viewport.scroll,max:r}};return{...t,viewport:n}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ee(!1);const r=I0e({state:t,type:e.type});return r?Fp({state:t,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const r=e.payload.reason;return t.phase!=="COLLECTING"&&ee(!1),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(e.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ee(!1),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:r}=e.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return t};const K0e=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),Q0e=t=>({type:"LIFT",payload:t}),Y0e=t=>({type:"INITIAL_PUBLISH",payload:t}),X0e=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),J0e=()=>({type:"COLLECTION_STARTING",payload:null}),Z0e=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),ebe=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),tbe=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),Yq=t=>({type:"MOVE",payload:t}),rbe=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),nbe=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),ibe=()=>({type:"MOVE_UP",payload:null}),obe=()=>({type:"MOVE_DOWN",payload:null}),sbe=()=>({type:"MOVE_RIGHT",payload:null}),abe=()=>({type:"MOVE_LEFT",payload:null}),JO=()=>({type:"FLUSH",payload:null}),lbe=t=>({type:"DROP_ANIMATE",payload:t}),ZO=t=>({type:"DROP_COMPLETE",payload:t}),Xq=t=>({type:"DROP",payload:t}),cbe=t=>({type:"DROP_PENDING",payload:t}),Jq=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ube=t=>({getState:e,dispatch:r})=>n=>i=>{if(i.type!=="LIFT"){n(i);return}const{id:o,clientSelection:s,movementMode:a}=i.payload,l=e();l.phase==="DROP_ANIMATING"&&r(ZO({completed:l.completed})),e().phase!=="IDLE"&&ee(!1),r(JO()),r(K0e({draggableId:o,movementMode:a}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:p}=t.startPublishing(u);r(Y0e({critical:d,dimensions:h,clientSelection:s,movementMode:a,viewport:p}))},fbe=t=>()=>e=>r=>{r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)};const eR={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Dm={opacity:{drop:0,combining:.7},scale:{drop:.75}},Zq={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hl=`${Zq.outOfTheWay}s ${eR.outOfTheWay}`,Lp={fluid:`opacity ${hl}`,snap:`transform ${hl}, opacity ${hl}`,drop:t=>{const e=`${t}s ${eR.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${hl}`,placeholder:`height ${hl}, width ${hl}, margin ${hl}`},vL=t=>Da(t,Or)?void 0:`translate(${t.x}px, ${t.y}px)`,mT={moveTo:vL,drop:(t,e)=>{const r=vL(t);if(r)return e?`${r} scale(${Dm.scale.drop})`:r}},{minDropTime:yT,maxDropTime:eH}=Zq,dbe=eH-yT,bL=1500,hbe=.6;var pbe=({current:t,destination:e,reason:r})=>{const n=Rm(t,e);if(n<=0)return yT;if(n>=bL)return eH;const i=n/bL,o=yT+dbe*i,s=r==="CANCEL"?o*hbe:o;return Number(s.toFixed(2))},mbe=({impact:t,draggable:e,dimensions:r,viewport:n,afterCritical:i})=>{const{draggables:o,droppables:s}=r,a=ni(t),l=a?s[a]:null,c=s[e.descriptor.droppableId],u=Hq({impact:t,draggable:e,draggables:o,afterCritical:i,droppable:l||c,viewport:n});return ei(u,e.client.borderBox.center)},ybe=({draggables:t,reason:e,lastImpact:r,home:n,viewport:i,onLiftImpact:o})=>!r.at||e!=="DROP"?{impact:qq({draggables:t,impact:o,destination:n,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:jm},didDropInsideDroppable:!0};const gbe=({getState:t,dispatch:e})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const i=t(),o=n.payload.reason;if(i.phase==="COLLECTING"){e(cbe({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ee(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ee(!1);const a=i.critical,l=i.dimensions,c=l.draggables[i.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=ybe({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=d?qO(u):null,p=d?g1(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},y={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:h,combine:p},g=mbe({impact:u,draggable:c,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:u};if(!(!Da(i.current.client.offset,g)||!!y.combine)){e(ZO({completed:b}));return}const x=pbe({current:i.current.client.offset,destination:g,reason:o});e(lbe({newHomeClientOffset:g,dropDuration:x,completed:b}))};var vbe=gbe,tH=()=>({x:window.pageXOffset,y:window.pageYOffset});function bbe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function xbe({onWindowScroll:t}){function e(){t(tH())}const r=Om(e),n=bbe(r);let i=$a;function o(){return i!==$a}function s(){o()&&ee(!1),i=Ti(window,[n])}function a(){o()||ee(!1),r.cancel(),i(),i=$a}return{start:s,stop:a,isActive:o}}const _be=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",wbe=t=>{const e=xbe({onWindowScroll:r=>{t.dispatch(rbe({newScroll:r}))}});return r=>n=>{!e.isActive()&&n.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&_be(n)&&e.stop(),r(n)}};var Sbe=wbe,Ebe=t=>{let e=!1,r=!1;const n=setTimeout(()=>{r=!0}),i=o=>{e||r||(e=!0,t(o),clearTimeout(n))};return i.wasCalled=()=>e,i},Abe=()=>{const t=[],e=i=>{const o=t.findIndex(a=>a.timerId===i);o===-1&&ee(!1);const[s]=t.splice(o,1);s.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),s={timerId:o,callback:i};t.push(s)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const Cbe=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,Pbe=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,Tbe=(t,e)=>{if(t===e)return!0;const r=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,n=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return r&&n},Oh=(t,e)=>{e()},Fv=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function hA(t,e,r,n){if(!t){r(n(e));return}const i=Ebe(r);t(e,{announce:i}),i.wasCalled()||r(n(e))}var Ibe=(t,e)=>{const r=Abe();let n=null;const i=(d,h)=>{n&&ee(!1),Oh("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:d,mode:h})})},o=(d,h)=>{n&&ee(!1),Oh("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Fv(d,h))})},s=(d,h)=>{n&&ee(!1);const p=Fv(d,h);n={mode:h,lastCritical:d,lastLocation:p.source,lastCombine:null},r.add(()=>{Oh("onDragStart",()=>hA(t().onDragStart,p,e,Z0.onDragStart))})},a=(d,h)=>{const p=qO(h),m=g1(h);n||ee(!1);const y=!Tbe(d,n.lastCritical);y&&(n.lastCritical=d);const g=!Cbe(n.lastLocation,p);g&&(n.lastLocation=p);const b=!Pbe(n.lastCombine,m);if(b&&(n.lastCombine=m),!y&&!g&&!b)return;const v={...Fv(d,n.mode),combine:m,destination:p};r.add(()=>{Oh("onDragUpdate",()=>hA(t().onDragUpdate,v,e,Z0.onDragUpdate))})},l=()=>{n||ee(!1),r.flush()},c=d=>{n||ee(!1),n=null,Oh("onDragEnd",()=>hA(t().onDragEnd,d,e,Z0.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:s,update:a,flush:l,drop:c,abort:()=>{if(!n)return;const d={...Fv(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},Nbe=(t,e)=>{const r=Ibe(t,e);return n=>i=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),i(o),r.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const a=o.payload.completed.result;r.flush(),i(o),r.drop(a);return}if(i(o),o.type==="FLUSH"){r.abort();return}const s=n.getState();s.phase==="DRAGGING"&&r.update(s.critical,s.impact)}};const kbe=t=>e=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}const n=t.getState();n.phase!=="DROP_ANIMATING"&&ee(!1),t.dispatch(ZO({completed:n.completed}))};var Obe=kbe;const Rbe=t=>{let e=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return i=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),i(o),o.type!=="DROP_ANIMATE")return;const s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(Jq())}};r=requestAnimationFrame(()=>{r=null,e=Ti(window,[s])})}};var jbe=Rbe,$be=t=>()=>e=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)},Dbe=t=>{let e=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!e){if(n.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){e=!1;const i=n.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Mbe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var Fbe=t=>e=>r=>n=>{if(Mbe(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const i=e.getState();i.phase!=="DRAGGING"&&ee(!1),t.start(i);return}r(n),t.scroll(e.getState())};const Lbe=t=>e=>r=>{if(e(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(Xq({reason:n.reason})))};var Bbe=Lbe;const Ube=cq;var Vbe=({dimensionMarshal:t,focusMarshal:e,styleMarshal:r,getResponders:n,announce:i,autoScroller:o})=>lq(H0e,Ube(Oge(fbe(r),$be(t),ube(t),vbe,Obe,jbe,Bbe,Fbe(o),Sbe,Dbe(e),Nbe(n,i))));const pA=()=>({additions:{},removals:{},modified:{}});function Wbe({registry:t,callbacks:e}){let r=pA(),n=null;const i=()=>{n||(e.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:c,modified:u}=r,d=Object.keys(l).map(m=>t.draggable.getById(m).getDimension(Or)).sort((m,y)=>m.descriptor.index-y.descriptor.index),h=Object.keys(u).map(m=>{const g=t.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:g}}),p={additions:d,removals:Object.keys(c),modified:h};r=pA(),e.publish(p)}))};return{add:l=>{const c=l.descriptor.id;r.additions[c]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[c]&&delete r.removals[c],i()},remove:l=>{const c=l.descriptor;r.removals[c.id]=!0,r.modified[c.droppableId]=!0,r.additions[c.id]&&delete r.additions[c.id],i()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=pA())}}}var rH=({scrollHeight:t,scrollWidth:e,height:r,width:n})=>{const i=ei({x:e,y:t},{x:n,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},nH=()=>{const t=document.documentElement;return t||ee(!1),t},iH=()=>{const t=nH();return rH({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},zbe=()=>{const t=tH(),e=iH(),r=t.y,n=t.x,i=nH(),o=i.clientWidth,s=i.clientHeight,a=n+o,l=r+s;return{frame:no({top:r,left:n,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:Or,displacement:Or}}}},Gbe=({critical:t,scrollOptions:e,registry:r})=>{const n=zbe(),i=n.scroll.current,o=t.droppable,s=r.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(i,e)),a=r.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(i));return{dimensions:{draggables:Oq(a),droppables:kq(s)},critical:t,viewport:n}};function xL(t,e,r){return!(r.descriptor.id===e.id||r.descriptor.type!==e.type||t.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var qbe=(t,e)=>{let r=null;const n=Wbe({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||ee(!1),r&&e.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(t.droppable.exists(h)||ee(!1),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},s=(h,p)=>{r&&(t.droppable.exists(h)||ee(!1),e.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&t.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},c=h=>{r||ee(!1);const p=r.critical.draggable;h.type==="ADDITION"&&xL(t,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&xL(t,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:s,startPublishing:h=>{r&&ee(!1);const p=t.draggable.getById(h.draggableId),m=t.droppable.getById(p.descriptor.droppableId),y={draggable:p.descriptor,droppable:m.descriptor},g=t.subscribe(c);return r={critical:y,unsubscribe:g},Gbe({critical:y,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},oH=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",Hbe=t=>{window.scrollBy(t.x,t.y)};const Kbe=kr(t=>y1(t).filter(e=>!(!e.isEnabled||!e.frame))),Qbe=(t,e)=>Kbe(e).find(n=>(n.frame||ee(!1),Vq(n.frame.pageMarginBox)(t)))||null;var Ybe=({center:t,destination:e,droppables:r})=>{if(e){const i=r[e];return i.frame?i:null}return Qbe(t,r)};const Mm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Xbe=(t,e,r=()=>Mm)=>{const n=r(),i=t[e.size]*n.startFromPercentage,o=t[e.size]*n.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},sH=({startOfRange:t,endOfRange:e,current:r})=>{const n=e-t;return n===0?0:(r-t)/n},tR=1,Jbe=(t,e,r=()=>Mm)=>{const n=r();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return n.maxPixelScroll;if(t===e.startScrollingFrom)return tR;const o=1-sH({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),s=n.maxPixelScroll*n.ease(o);return Math.ceil(s)},Zbe=(t,e,r)=>{const n=r(),i=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,s=e,a=o,c=Date.now()-s;if(c>=o)return t;if(c<i)return tR;const u=sH({startOfRange:i,endOfRange:a,current:c}),d=t*n.ease(u);return Math.ceil(d)},_L=({distanceToEdge:t,thresholds:e,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=Jbe(t,e,i);return o===0?0:n?Math.max(Zbe(o,r,i),tR):o},wL=({container:t,distanceToEdges:e,dragStartTime:r,axis:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=Xbe(t,n,o);return e[n.end]<e[n.start]?_L({distanceToEdge:e[n.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*_L({distanceToEdge:e[n.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},exe=({container:t,subject:e,proposedScroll:r})=>{const n=e.height>t.height,i=e.width>t.width;return!i&&!n?r:i&&n?null:{x:i?0:r.x,y:n?0:r.y}};const txe=Nq(t=>t===0?0:t);var aH=({dragStartTime:t,container:e,subject:r,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s={top:n.y-e.top,right:e.right-n.x,bottom:e.bottom-n.y,left:n.x-e.left},a=wL({container:e,distanceToEdges:s,dragStartTime:t,axis:HO,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),l=wL({container:e,distanceToEdges:s,dragStartTime:t,axis:$q,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),c=txe({x:l,y:a});if(Da(c,Or))return null;const u=exe({container:e,subject:r,proposedScroll:c});return u?Da(u,Or)?null:u:null};const rxe=Nq(t=>t===0?0:t>0?1:-1),rR=(()=>{const t=(e,r)=>e<0?e:e>r?e-r:0;return({current:e,max:r,change:n})=>{const i=Gr(e,n),o={x:t(i.x,r.x),y:t(i.y,r.y)};return Da(o,Or)?null:o}})(),lH=({max:t,current:e,change:r})=>{const n={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=rxe(r),o=rR({max:n,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},nR=(t,e)=>lH({current:t.scroll.current,max:t.scroll.max,change:e}),nxe=(t,e)=>{if(!nR(t,e))return null;const r=t.scroll.max,n=t.scroll.current;return rR({current:n,max:r,change:e})},iR=(t,e)=>{const r=t.frame;return r?lH({current:r.scroll.current,max:r.scroll.max,change:e}):!1},ixe=(t,e)=>{const r=t.frame;return!r||!iR(t,e)?null:rR({current:r.scroll.current,max:r.scroll.max,change:e})};var oxe=({viewport:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=aH({dragStartTime:n,container:t.frame,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return s&&nR(t,s)?s:null},sxe=({droppable:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=t.frame;if(!s)return null;const a=aH({dragStartTime:n,container:s.pageMarginBox,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return a&&iR(t,a)?a:null},SL=({state:t,dragStartTime:e,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:i,getAutoScrollerOptions:o})=>{const s=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const d=t.viewport,h=oxe({dragStartTime:e,viewport:d,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const c=Ybe({center:s,destination:ni(t.impact),droppables:t.dimensions.droppables});if(!c)return;const u=sxe({dragStartTime:e,droppable:c,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});u&&i(c.descriptor.id,u)},axe=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r=()=>Mm})=>{const n=Om(t),i=Om(e);let o=null;const s=c=>{o||ee(!1);const{shouldUseTimeDampening:u,dragStartTime:d}=o;SL({state:c,scrollWindow:n,scrollDroppable:i,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:r})};return{start:c=>{o&&ee(!1);const u=Date.now();let d=!1;const h=()=>{d=!0};SL({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:u,shouldUseTimeDampening:d},d&&s(c)},stop:()=>{o&&(n.cancel(),i.cancel(),o=null)},scroll:s}},lxe=({move:t,scrollDroppable:e,scrollWindow:r})=>{const n=(a,l)=>{const c=Gr(a.current.client.selection,l);t({client:c})},i=(a,l)=>{if(!iR(a,l))return l;const c=ixe(a,l);if(!c)return e(a.descriptor.id,l),null;const u=ei(l,c);return e(a.descriptor.id,u),ei(l,u)},o=(a,l,c)=>{if(!a||!nR(l,c))return c;const u=nxe(l,c);if(!u)return r(c),null;const d=ei(c,u);return r(d),ei(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=ni(a.impact);c||ee(!1);const u=i(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,h=o(a.isWindowScrollAllowed,d,u);h&&n(a,h)}},cxe=({scrollDroppable:t,scrollWindow:e,move:r,getAutoScrollerOptions:n})=>{const i=axe({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n}),o=lxe({move:r,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:i.start,stop:i.stop}};const sd="data-rfd",ad=(()=>{const t=`${sd}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),gT=(()=>{const t=`${sd}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),uxe=(()=>{const t=`${sd}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),EL={contextId:`${sd}-scroll-container-context-id`},fxe=t=>e=>`[${e}="${t}"]`,Rh=(t,e)=>t.map(r=>{const n=r.styles[e];return n?`${r.selector} { ${n} }`:""}).join(" "),dxe="pointer-events: none;";var hxe=t=>{const e=fxe(t),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(ad.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:dxe,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${Lp.outOfTheWay};
    `;return{selector:e(gT.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:e(uxe.contextId),styles:{always:"overflow-anchor: none;"}},s=[n,r,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Rh(s,"always"),resting:Rh(s,"resting"),dragging:Rh(s,"dragging"),dropAnimating:Rh(s,"dropAnimating"),userCancel:Rh(s,"userCancel")}};const pxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect;var ii=pxe;const mA=()=>{const t=document.querySelector("head");return t||ee(!1),t},AL=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function mxe(t,e){const r=Ge(()=>hxe(t),[t]),n=E.useRef(null),i=E.useRef(null),o=he(kr(d=>{const h=i.current;h||ee(!1),h.textContent=d}),[]),s=he(d=>{const h=n.current;h||ee(!1),h.textContent=d},[]);ii(()=>{!n.current&&!i.current||ee(!1);const d=AL(e),h=AL(e);return n.current=d,i.current=h,d.setAttribute(`${sd}-always`,t),h.setAttribute(`${sd}-dynamic`,t),mA().appendChild(d),mA().appendChild(h),s(r.always),o(r.resting),()=>{const p=m=>{const y=m.current;y||ee(!1),mA().removeChild(y),m.current=null};p(n),p(i)}},[e,s,o,r.always,r.resting,t]);const a=he(()=>o(r.dragging),[o,r.dragging]),l=he(d=>{if(d==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),c=he(()=>{i.current&&o(r.resting)},[o,r.resting]);return Ge(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function cH(t,e){return Array.from(t.querySelectorAll(e))}var uH=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function x1(t){return t instanceof uH(t).HTMLElement}function yxe(t,e){const r=`[${ad.contextId}="${t}"]`,n=cH(document,r);if(!n.length)return null;const i=n.find(o=>o.getAttribute(ad.draggableId)===e);return!i||!x1(i)?null:i}function gxe(t){const e=E.useRef({}),r=E.useRef(null),n=E.useRef(null),i=E.useRef(!1),o=he(function(h,p){const m={id:h,focus:p};return e.current[h]=m,function(){const g=e.current;g[h]!==m&&delete g[h]}},[]),s=he(function(h){const p=yxe(t,h);p&&p!==document.activeElement&&p.focus()},[t]),a=he(function(h,p){r.current===h&&(r.current=p)},[]),l=he(function(){n.current||i.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&s(h)}))},[s]),c=he(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute(ad.draggableId)===h&&(r.current=h)},[]);return ii(()=>(i.current=!0,function(){i.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),Ge(()=>({register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,c,l,a])}function vxe(){const t={draggables:{},droppables:{}},e=[];function r(d){return e.push(d),function(){const p=e.indexOf(d);p!==-1&&e.splice(p,1)}}function n(d){e.length&&e.forEach(h=>h(d))}function i(d){return t.draggables[d]||null}function o(d){const h=i(d);return h||ee(!1),h}const s={register:d=>{t.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,p=i(h);p&&d.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:o,findById:i,exists:d=>!!i(d),getAllByType:d=>Object.values(t.draggables).filter(h=>h.descriptor.type===d)};function a(d){return t.droppables[d]||null}function l(d){const h=a(d);return h||ee(!1),h}const c={register:d=>{t.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete t.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(t.droppables).filter(h=>h.descriptor.type===d)};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:s,droppable:c,subscribe:r,clean:u}}function bxe(){const t=Ge(vxe,[]);return E.useEffect(()=>function(){k.version.startsWith("16")||k.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var oR=k.createContext(null),Kx=()=>{const t=document.body;return t||ee(!1),t};const xxe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var _xe=xxe;const wxe=t=>`rfd-announcement-${t}`;function Sxe(t){const e=Ge(()=>wxe(t),[t]),r=E.useRef(null);return E.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),zx(o.style,_xe),Kx().appendChild(o),function(){setTimeout(function(){const l=Kx();l.contains(o)&&l.removeChild(o),o===r.current&&(r.current=null)})}},[e]),he(i=>{const o=r.current;if(o){o.textContent=i;return}},[])}let Exe=0;const fH={separator:"::"};function Axe(t,e=fH){return Ge(()=>`${t}${e.separator}${Exe++}`,[e.separator,t])}function Cxe(t,e=fH){const r=k.useId();return Ge(()=>`${t}${e.separator}${r}`,[e.separator,t,r])}var sR="useId"in k?Cxe:Axe;function Pxe({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function Txe({contextId:t,text:e}){const r=sR("hidden-text",{separator:"-"}),n=Ge(()=>Pxe({contextId:t,uniqueId:r}),[r,t]);return E.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=e,o.style.display="none",Kx().appendChild(o),function(){const a=Kx();a.contains(o)&&a.removeChild(o)}},[n,e]),n}var _1=k.createContext(null);function dH(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),e}function Ixe(){let t=null;function e(){return!!t}function r(s){return s===t}function n(s){t&&ee(!1);const a={abandon:s};return t=a,a}function i(){t||ee(!1),t=null}function o(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:r,claim:n,release:i,tryAbandon:o}}function Fm(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Nxe=9,kxe=13,aR=27,hH=32,Oxe=33,Rxe=34,jxe=35,$xe=36,Dxe=37,Mxe=38,Fxe=39,Lxe=40,Bxe={[kxe]:!0,[Nxe]:!0};var pH=t=>{Bxe[t.keyCode]&&t.preventDefault()};const Uxe=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(n=>`on${n}`in document)||t})();var w1=Uxe;const mH=0,CL=5;function Vxe(t,e){return Math.abs(e.x-t.x)>=CL||Math.abs(e.y-t.y)>=CL}const PL={type:"IDLE"};function Wxe({cancel:t,completed:e,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:s,clientY:a}=i;if(o!==mH)return;const l={x:s,y:a},c=r();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&ee(!1);const u=c.point;if(!Vxe(u,l))return;i.preventDefault();const d=c.actions.fluidLift(l);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:i=>{const o=r();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{r().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(r().type==="PENDING"){t();return}if(i.keyCode===aR){i.preventDefault(),t();return}pH(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=r();if(o.type==="IDLE"&&ee(!1),o.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:w1,fn:t}]}function zxe(t){const e=E.useRef(PL),r=E.useRef($a),n=Ge(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==mH||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=t.findClosestDraggableId(d);if(!h)return;const p=t.tryGetLock(h,s,{sourceEvent:d});if(!p)return;d.preventDefault();const m={x:d.clientX,y:d.clientY};r.current(),c(p,m)}}),[t]),i=Ge(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=t.findClosestDraggableId(u);if(!d)return;const h=t.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||t.canGetLock(d)&&u.preventDefault())}}),[t]),o=he(function(){const d={passive:!1,capture:!0};r.current=Ti(window,[i,n],d)},[i,n]),s=he(()=>{e.current.type!=="IDLE"&&(e.current=PL,r.current(),o())},[o]),a=he(()=>{const u=e.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),l=he(function(){const d={capture:!0,passive:!1},h=Wxe({cancel:a,completed:s,getPhase:()=>e.current,setPhase:p=>{e.current=p}});r.current=Ti(window,h,d)},[a,s]),c=he(function(d,h){e.current.type!=="IDLE"&&ee(!1),e.current={type:"PENDING",point:h,actions:d},l()},[l]);ii(function(){return o(),function(){r.current()}},[o])}function Gxe(){}const qxe={[Rxe]:!0,[Oxe]:!0,[$xe]:!0,[jxe]:!0};function Hxe(t,e){function r(){e(),t.cancel()}function n(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===aR){i.preventDefault(),r();return}if(i.keyCode===hH){i.preventDefault(),n();return}if(i.keyCode===Lxe){i.preventDefault(),t.moveDown();return}if(i.keyCode===Mxe){i.preventDefault(),t.moveUp();return}if(i.keyCode===Fxe){i.preventDefault(),t.moveRight();return}if(i.keyCode===Dxe){i.preventDefault(),t.moveLeft();return}if(qxe[i.keyCode]){i.preventDefault();return}pH(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:w1,fn:r}]}function Kxe(t){const e=E.useRef(Gxe),r=Ge(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==hH)return;const s=t.findClosestDraggableId(o);if(!s)return;const a=t.tryGetLock(s,u,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const c=a.snapLift();e.current();function u(){l||ee(!1),l=!1,e.current(),n()}e.current=Ti(window,Hxe(c,u),{capture:!0,passive:!1})}}),[t]),n=he(function(){const o={passive:!1,capture:!0};e.current=Ti(window,[r],o)},[r]);ii(function(){return n(),function(){e.current()}},[n])}const yA={type:"IDLE"},Qxe=120,Yxe=.15;function Xxe({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(e().type!=="DRAGGING"){t();return}r.keyCode===aR&&r.preventDefault(),t()}},{eventName:w1,fn:t}]}function Jxe({cancel:t,completed:e,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:o,clientY:s}=n.touches[0],a={x:o,y:s};n.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){t();return}n.preventDefault(),t()}},{eventName:"touchforcechange",fn:n=>{const i=r();i.type==="IDLE"&&ee(!1);const o=n.touches[0];if(!o||!(o.force>=Yxe))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&t();return}if(a){if(i.hasMoved){n.preventDefault();return}t();return}n.preventDefault()}},{eventName:w1,fn:t}]}function Zxe(t){const e=E.useRef(yA),r=E.useRef($a),n=he(function(){return e.current},[]),i=he(function(p){e.current=p},[]),o=Ge(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const m=t.findClosestDraggableId(p);if(!m)return;const y=t.tryGetLock(m,a,{sourceEvent:p});if(!y)return;const g=p.touches[0],{clientX:b,clientY:v}=g,x={x:b,y:v};r.current(),d(y,x)}}),[t]),s=he(function(){const p={capture:!0,passive:!1};r.current=Ti(window,[o],p)},[o]),a=he(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(yA),r.current(),s())},[s,i]),l=he(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=he(function(){const p={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:n},y=Ti(window,Jxe(m),p),g=Ti(window,Xxe(m),p);r.current=function(){y(),g()}},[l,n,a]),u=he(function(){const p=n();p.type!=="PENDING"&&ee(!1);const m=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[n,i]),d=he(function(p,m){n().type!=="IDLE"&&ee(!1);const y=setTimeout(u,Qxe);i({type:"PENDING",point:m,actions:p,longPressTimerId:y}),c()},[c,n,i,u]);ii(function(){return s(),function(){r.current();const m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(yA))}},[n,s,i]),ii(function(){return Ti(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const e_e=["input","button","textarea","select","option","optgroup","video","audio"];function yH(t,e){if(e==null)return!1;if(e_e.includes(e.tagName.toLowerCase()))return!0;const n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===t?!1:yH(t,e.parentElement)}function t_e(t,e){const r=e.target;return x1(r)?yH(t,r):!1}var r_e=t=>no(t.getBoundingClientRect()).center;function n_e(t){return t instanceof uH(t).Element}const i_e=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||t})();function gH(t,e){return t==null?null:t[i_e](e)?t:gH(t.parentElement,e)}function o_e(t,e){return t.closest?t.closest(e):gH(t,e)}function s_e(t){return`[${ad.contextId}="${t}"]`}function a_e(t,e){const r=e.target;if(!n_e(r))return null;const n=s_e(t),i=o_e(r,n);return!i||!x1(i)?null:i}function l_e(t,e){const r=a_e(t,e);return r?r.getAttribute(ad.draggableId):null}function c_e(t,e){const r=`[${gT.contextId}="${t}"]`,i=cH(document,r).find(o=>o.getAttribute(gT.id)===e);return!i||!x1(i)?null:i}function u_e(t){t.preventDefault()}function Lv({expected:t,phase:e,isLockActive:r,shouldWarn:n}){return!(!r()||t!==e)}function vH({lockAPI:t,store:e,registry:r,draggableId:n}){if(t.isClaimed())return!1;const i=r.draggable.findById(n);return!(!i||!i.options.isEnabled||!oH(e.getState(),n))}function f_e({lockAPI:t,contextId:e,store:r,registry:n,draggableId:i,forceSensorStop:o,sourceEvent:s}){if(!vH({lockAPI:t,store:r,registry:n,draggableId:i}))return null;const l=n.draggable.getById(i),c=c_e(e,l.descriptor.id);if(!c||s&&!l.options.canDragInteractiveElements&&t_e(c,s))return null;const u=t.claim(o||$a);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return t.isActive(u)}function m(_,w){Lv({expected:_,phase:d,isLockActive:p,shouldWarn:!0})&&r.dispatch(w())}const y=m.bind(null,"DRAGGING");function g(_){function w(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(w(),ee(!1)),r.dispatch(Q0e(_.liftActionArgs)),d="DRAGGING";function A(C,T={shouldBlockNextClick:!1}){if(_.cleanup(),T.shouldBlockNextClick){const P=Ti(window,[{eventName:"click",fn:u_e,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}w(),r.dispatch(Xq({reason:C}))}return{isActive:()=>Lv({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>A("DROP",C),cancel:C=>A("CANCEL",C),..._.actions}}function b(_){const w=Om(C=>{y(()=>Yq({client:C}))});return{...g({liftActionArgs:{id:i,clientSelection:_,movementMode:"FLUID"},cleanup:()=>w.cancel(),actions:{move:w}}),move:w}}function v(){const _={moveUp:()=>y(ibe),moveRight:()=>y(sbe),moveDown:()=>y(obe),moveLeft:()=>y(abe)};return g({liftActionArgs:{id:i,clientSelection:r_e(c),movementMode:"SNAP"},cleanup:$a,actions:_})}function x(){Lv({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>Lv({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:v,abort:x}}const d_e=[zxe,Kxe,Zxe];function h_e({contextId:t,store:e,registry:r,customSensors:n,enableDefaultSensors:i}){const o=[...i?d_e:[],...n||[]],s=E.useState(()=>Ixe())[0],a=he(function(g,b){Fm(g)&&!Fm(b)&&s.tryAbandon()},[s]);ii(function(){let g=e.getState();return e.subscribe(()=>{const v=e.getState();a(g,v),g=v})},[s,e,a]),ii(()=>s.tryAbandon,[s.tryAbandon]);const l=he(y=>vH({lockAPI:s,registry:r,store:e,draggableId:y}),[s,r,e]),c=he((y,g,b)=>f_e({lockAPI:s,registry:r,contextId:t,store:e,draggableId:y,forceSensorStop:g||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[t,s,r,e]),u=he(y=>l_e(t,y),[t]),d=he(y=>{const g=r.draggable.findById(y);return g?g.options:null},[r.draggable]),h=he(function(){s.isClaimed()&&(s.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(JO()))},[s,e]),p=he(()=>s.isClaimed(),[s]),m=Ge(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:p}),[l,c,u,d,h,p]);for(let y=0;y<o.length;y++)o[y](m)}const p_e=t=>({onBeforeCapture:e=>{const r=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};k.version.startsWith("16")||k.version.startsWith("17")?r():rg.flushSync(r)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),m_e=t=>({...Mm,...t.autoScrollerOptions,durationDampening:{...Mm.durationDampening,...t.autoScrollerOptions}});function jh(t){return t.current||ee(!1),t.current}function y_e(t){const{contextId:e,setCallbacks:r,sensors:n,nonce:i,dragHandleUsageInstructions:o}=t,s=E.useRef(null),a=dH(t),l=he(()=>p_e(a.current),[a]),c=he(()=>m_e(a.current),[a]),u=Sxe(e),d=Txe({contextId:e,text:o}),h=mxe(e,i),p=he(P=>{jh(s).dispatch(P)},[]),m=Ge(()=>XF({publishWhileDragging:X0e,updateDroppableScroll:Z0e,updateDroppableIsEnabled:ebe,updateDroppableIsCombineEnabled:tbe,collectionStarting:J0e},p),[p]),y=bxe(),g=Ge(()=>qbe(y,m),[y,m]),b=Ge(()=>cxe({scrollWindow:Hbe,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:c,...XF({move:Yq},p)}),[g.scrollDroppable,p,c]),v=gxe(e),x=Ge(()=>Vbe({announce:u,autoScroller:b,dimensionMarshal:g,focusMarshal:v,getResponders:l,styleMarshal:h}),[u,b,g,v,l,h]);s.current=x;const S=he(()=>{const P=jh(s);P.getState().phase!=="IDLE"&&P.dispatch(JO())},[]),_=he(()=>{const P=jh(s).getState();return P.phase==="DROP_ANIMATING"?!0:P.phase==="IDLE"?!1:P.isDragging},[]),w=Ge(()=>({isDragging:_,tryAbort:S}),[_,S]);r(w);const A=he(P=>oH(jh(s).getState(),P),[]),C=he(()=>Pl(jh(s).getState()),[]),T=Ge(()=>({marshal:g,focus:v,contextId:e,canLift:A,isMovementAllowed:C,dragHandleUsageInstructionsId:d,registry:y}),[e,g,d,v,A,C,y]);return h_e({contextId:e,store:x,registry:y,customSensors:n||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),E.useEffect(()=>S,[S]),k.createElement(_1.Provider,{value:T},k.createElement(Pve,{context:oR,store:x},t.children))}let g_e=0;function v_e(){return Ge(()=>`${g_e++}`,[])}function b_e(){return k.useId()}var x_e="useId"in k?b_e:v_e;function __e(t){const e=x_e(),r=t.dragHandleUsageInstructions||Z0.dragHandleUsageInstructions;return k.createElement(Mve,null,n=>k.createElement(y_e,{nonce:t.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const TL={dragging:5e3,dropAnimating:4500},w_e=(t,e)=>e?Lp.drop(e.duration):t?Lp.snap:Lp.fluid,S_e=(t,e)=>{if(t)return e?Dm.opacity.drop:Dm.opacity.combining},E_e=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function A_e(t){const r=t.dimension.client,{offset:n,combineWith:i,dropping:o}=t,s=!!i,a=E_e(t),l=!!o,c=l?mT.drop(n,s):mT.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:w_e(a,o),transform:c,opacity:S_e(s,l),zIndex:l?TL.dropAnimating:TL.dragging,pointerEvents:"none"}}function C_e(t){return{transform:mT.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function P_e(t){return t.type==="DRAGGING"?A_e(t):C_e(t)}function T_e(t,e,r=Or){const n=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=Aq(i,n),s=Wx(o,r),a={client:o,tagName:e.tagName.toLowerCase(),display:n.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:o,page:s}}function I_e(t){const e=sR("draggable"),{descriptor:r,registry:n,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}=t,l=Ge(()=>({canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}),[o,a,s]),c=he(p=>{const m=i();return m||ee(!1),T_e(r,m,p)},[r,i]),u=Ge(()=>({uniqueId:e,descriptor:r,options:l,getDimension:c}),[r,c,l,e]),d=E.useRef(u),h=E.useRef(!0);ii(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),ii(()=>{if(h.current){h.current=!1;return}const p=d.current;d.current=u,n.draggable.update(u,p)},[u,n.draggable])}var lR=k.createContext(null);function Qx(t){const e=E.useContext(t);return e||ee(!1),e}function N_e(t){t.preventDefault()}const k_e=t=>{const e=E.useRef(null),r=he((w=null)=>{e.current=w},[]),n=he(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:s}=Qx(_1),{type:a,droppableId:l}=Qx(lR),c=Ge(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:u,draggableId:d,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:y,mapped:g,dropAnimationFinished:b}=t;if(!y){const w=Ge(()=>({descriptor:c,registry:s,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:h}),[c,s,n,m,p,h]);I_e(w)}const v=Ge(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:N_e}:null,[i,o,d,h]),x=he(w=>{g.type==="DRAGGING"&&g.dropping&&w.propertyName==="transform"&&(k.version.startsWith("16")||k.version.startsWith("17")?b():rg.flushSync(b))},[b,g]),S=Ge(()=>{const w=P_e(g),A=g.type==="DRAGGING"&&g.dropping?x:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:w,onTransitionEnd:A},dragHandleProps:v}},[i,v,d,g,x,r]),_=Ge(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return k.createElement(k.Fragment,null,u(S,g.snapshot,_))};var O_e=k_e,bH=(t,e)=>t===e,xH=t=>{const{combine:e,destination:r}=t;return r?r.droppableId:e?e.droppableId:null};const R_e=t=>t.combine?t.combine.draggableId:null,j_e=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function $_e(){const t=kr((i,o)=>({x:i,y:o})),e=kr((i,o,s=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:s,combineWith:a,combineTargetFor:null})),r=kr((i,o,s,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:i,dimension:s,forceShouldAnimate:u,snapshot:e(o,a,l,c,null)}}));return(i,o)=>{if(Fm(i)){if(i.critical.draggable.id!==o.draggableId)return null;const s=i.current.client.offset,a=i.dimensions.draggables[o.draggableId],l=ni(i.impact),c=j_e(i.impact),u=i.forceShouldAnimate;return r(t(s.x,s.y),i.movementMode,a,o.isClone,l,c,u)}if(i.phase==="DROP_ANIMATING"){const s=i.completed;if(s.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=i.dimensions.draggables[o.draggableId],c=s.result,u=c.mode,d=xH(c),h=R_e(c),m={duration:i.dropDuration,curve:eR.drop,moveTo:i.newHomeClientOffset,opacity:h?Dm.opacity.drop:null,scale:h?Dm.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:l,dropping:m,draggingOver:d,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:e(u,a,d,h,m)}}}return null}}function _H(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const D_e={mapped:{type:"SECONDARY",offset:Or,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:_H(null)}};function M_e(){const t=kr((s,a)=>({x:s,y:a})),e=kr(_H),r=kr((s,a=null,l)=>({mapped:{type:"SECONDARY",offset:s,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),n=s=>s?r(Or,s,!0):null,i=(s,a,l,c)=>{const u=l.displaced.visible[s],d=!!(c.inVirtualList&&c.effected[s]),h=g1(l),p=h&&h.draggableId===s?a:null;if(!u){if(!d)return n(p);if(l.displaced.invisible[s])return null;const g=Hd(c.displacedBy.point),b=t(g.x,g.y);return r(b,p,!0)}if(d)return n(p);const m=l.displacedBy.point,y=t(m.x,m.y);return r(y,p,u.shouldAnimate)};return(s,a)=>{if(Fm(s))return s.critical.draggable.id===a.draggableId?null:i(a.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){const l=s.completed;return l.result.draggableId===a.draggableId?null:i(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const F_e=()=>{const t=$_e(),e=M_e();return(n,i)=>t(n,i)||e(n,i)||D_e},L_e={dropAnimationFinished:Jq},B_e=wq(F_e,L_e,null,{context:oR,areStatePropsEqual:bH})(O_e);var U_e=B_e;function wH(t){return Qx(lR).isUsingCloneFor===t.draggableId&&!t.isClone?null:k.createElement(U_e,t)}function V_e(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return k.createElement(wH,zx({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const SH=t=>e=>t===e,W_e=SH("scroll"),z_e=SH("auto"),IL=(t,e)=>e(t.overflowX)||e(t.overflowY),G_e=t=>{const e=window.getComputedStyle(t),r={overflowX:e.overflowX,overflowY:e.overflowY};return IL(r,W_e)||IL(r,z_e)},q_e=()=>!1,EH=t=>t==null?null:t===document.body?q_e()?t:null:t===document.documentElement?null:G_e(t)?t:EH(t.parentElement);var H_e=EH,vT=t=>({x:t.scrollLeft,y:t.scrollTop});const AH=t=>t?window.getComputedStyle(t).position==="fixed"?!0:AH(t.parentElement):!1;var K_e=t=>{const e=H_e(t),r=AH(t);return{closestScrollable:e,isFixedOnPage:r}},Q_e=({descriptor:t,isEnabled:e,isCombineEnabled:r,isFixedOnPage:n,direction:i,client:o,page:s,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,m=rH({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:Or,displacement:Or}}}})(),c=i==="vertical"?HO:$q,u=od({page:s,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:e,client:o,page:s,frame:l,subject:u}};const Y_e=(t,e)=>{const r=Cq(t);if(!e||t!==e)return r;const n=r.paddingBox.top-e.scrollTop,i=r.paddingBox.left-e.scrollLeft,o=n+e.scrollHeight,s=i+e.scrollWidth,l=WO({top:n,right:s,bottom:o,left:i},r.border);return zO({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var X_e=({ref:t,descriptor:e,env:r,windowScroll:n,direction:i,isDropDisabled:o,isCombineEnabled:s,shouldClipSubject:a})=>{const l=r.closestScrollable,c=Y_e(t,l),u=Wx(c,n),d=(()=>{if(!l)return null;const p=Cq(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:Wx(p,n),scroll:vT(l),scrollSize:m,shouldClipSubject:a}})();return Q_e({descriptor:e,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:c,page:u,closest:d})};const J_e={passive:!1},Z_e={passive:!0};var NL=t=>t.shouldPublishImmediately?J_e:Z_e;const Bv=t=>t&&t.env.closestScrollable||null;function ewe(t){const e=E.useRef(null),r=Qx(_1),n=sR("droppable"),{registry:i,marshal:o}=r,s=dH(t),a=Ge(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=E.useRef(a),c=Ge(()=>kr((S,_)=>{e.current||ee(!1);const w={x:S,y:_};o.updateDroppableScroll(a.id,w)}),[a.id,o]),u=he(()=>{const S=e.current;return!S||!S.env.closestScrollable?Or:vT(S.env.closestScrollable)},[]),d=he(()=>{const S=u();c(S.x,S.y)},[u,c]),h=Ge(()=>Om(d),[d]),p=he(()=>{const S=e.current,_=Bv(S);if(S&&_||ee(!1),S.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),m=he((S,_)=>{e.current&&ee(!1);const w=s.current,A=w.getDroppableRef();A||ee(!1);const C=K_e(A),T={ref:A,descriptor:a,env:C,scrollOptions:_};e.current=T;const P=X_e({ref:A,descriptor:a,env:C,windowScroll:S,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),I=C.closestScrollable;return I&&(I.setAttribute(EL.contextId,r.contextId),I.addEventListener("scroll",p,NL(T.scrollOptions))),P},[r.contextId,a,p,s]),y=he(()=>{const S=e.current,_=Bv(S);return S&&_||ee(!1),vT(_)},[]),g=he(()=>{const S=e.current;S||ee(!1);const _=Bv(S);e.current=null,_&&(h.cancel(),_.removeAttribute(EL.contextId),_.removeEventListener("scroll",p,NL(S.scrollOptions)))},[p,h]),b=he(S=>{const _=e.current;_||ee(!1);const w=Bv(_);w||ee(!1),w.scrollTop+=S.y,w.scrollLeft+=S.x},[]),v=Ge(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:y,dragStopped:g,scroll:b}),[g,m,y,b]),x=Ge(()=>({uniqueId:n,descriptor:a,callbacks:v}),[v,a,n]);ii(()=>(l.current=x.descriptor,i.droppable.register(x),()=>{e.current&&g(),i.droppable.unregister(x)}),[v,a,g,x,o,i.droppable]),ii(()=>{e.current&&o.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,o]),ii(()=>{e.current&&o.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,o])}function gA(){}const kL={width:0,height:0,margin:zve},twe=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>t||r==="close"?kL:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},rwe=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>{const n=twe({isAnimatingOpenOnMount:t,placeholder:e,animate:r});return{display:e.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Lp.placeholder:null}},nwe=t=>{const e=E.useRef(null),r=he(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:n,onTransitionEnd:i,onClose:o,contextId:s}=t,[a,l]=E.useState(t.animate==="open");E.useEffect(()=>a?n!=="open"?(r(),l(!1),gA):e.current?gA:(e.current=setTimeout(()=>{e.current=null,l(!1)}),r):gA,[n,a,r]);const c=he(d=>{d.propertyName==="height"&&(i(),n==="close"&&o())},[n,o,i]),u=rwe({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return k.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":s,onTransitionEnd:c,ref:t.innerRef})};var iwe=k.memo(nwe);class owe extends k.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,r){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const swe=t=>{const e=E.useContext(_1);e||ee(!1);const{contextId:r,isMovementAllowed:n}=e,i=E.useRef(null),o=E.useRef(null),{children:s,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:p,snapshot:m,useClone:y,updateViewportMaxScroll:g,getContainerForClone:b}=t,v=he(()=>i.current,[]),x=he((I=null)=>{i.current=I},[]);he(()=>o.current,[]);const S=he((I=null)=>{o.current=I},[]),_=he(()=>{n()&&g({maxScroll:iH()})},[n,g]);ewe({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:v});const w=Ge(()=>k.createElement(owe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:I,data:O,animate:N})=>k.createElement(iwe,{placeholder:O,onClose:I,innerRef:S,animate:N,contextId:r,onTransitionEnd:_})),[r,_,t.placeholder,t.shouldAnimatePlaceholder,S]),A=Ge(()=>({innerRef:x,placeholder:w,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,w,x]),C=y?y.dragging.draggableId:null,T=Ge(()=>({droppableId:a,type:l,isUsingCloneFor:C}),[a,C,l]);function P(){if(!y)return null;const{dragging:I,render:O}=y,N=k.createElement(wH,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(j,L)=>O(j,L,I));return nte.createPortal(N,b())}return k.createElement(lR.Provider,{value:T},s(A,m),P())};var awe=swe;function lwe(){return document.body||ee(!1),document.body}const OL={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:lwe},CH=t=>{let e={...t},r;for(r in OL)t[r]===void 0&&(e={...e,[r]:OL[r]});return e},vA=(t,e)=>t===e.droppable.type,RL=(t,e)=>e.draggables[t.draggable.id],cwe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},r=kr(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=kr((o,s,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===o){const m=u?{render:u,dragging:r(c.descriptor)}:null,y={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:m}}if(!s)return e;if(!l)return t;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,s)=>{const a=CH(s),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if(Fm(o)){const h=o.critical;if(!vA(c,h))return e;const p=RL(h,o.dimensions),m=ni(o.impact)===l;return n(l,u,m,m,p,d)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!vA(c,h.critical))return e;const p=RL(h.critical,o.dimensions);return n(l,u,xH(h.result)===l,ni(h.impact)===l,p,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!vA(c,h.critical))return e;const p=ni(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),y=h.critical.droppable.id===l;return p?m?t:e:y?t:e}return e}},uwe={updateViewportMaxScroll:nbe},fwe=wq(cwe,uwe,(t,e,r)=>({...CH(r),...t,...e}),{context:oR,areStatePropsEqual:bH})(awe);var dwe=fwe;const hwe=["0","1","2","3"],pwe=({defaultPlayers:t,onSubmit:e})=>{const{register:r,reset:n,control:i,getValues:o,setValue:s}=qd({defaultValues:t}),a=Ka({control:i,name:["0.proPicUrl","0.teamPicUrl","1.proPicUrl","1.teamPicUrl","2.proPicUrl","2.teamPicUrl","3.proPicUrl","3.teamPicUrl"]}),l=Ka({control:i,name:["0.color","1.color","2.color","3.color"]}),c=E.useCallback(p=>{if(!p.destination)return;const m=["0","1","2","3"],[y]=m.splice(p.source.index,1);m.splice(p.destination.index,0,y),n({0:o(m[0]),1:o(m[1]),2:o(m[2]),3:o(m[3])})},[o,n]),u=E.useCallback(p=>{const m=p.currentTarget.getAttribute("data-index"),y=p.currentTarget.getAttribute("data-type"),g=o(`${m}.${y}`),b=prompt("新的圖片網址",g??"");b!==null&&s(`${m}.${y}`,b)},[o,s]),d=E.useCallback(()=>{n()},[n]),h=E.useCallback(()=>{e==null||e(o())},[o,e]);return E.useEffect(()=>{n({0:{...t[0]},1:{...t[1]},2:{...t[2]},3:{...t[3]}})},[t,n]),f.jsxs("div",{children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"w-8"}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"flex font-semibold gap-2 text-center",children:[f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex-[2]",children:"圖片"}),f.jsx("div",{className:"flex-[2]",children:"隊伍"}),f.jsx("div",{className:"flex-[5]",children:"隊伍名稱／稱號"}),f.jsx("div",{className:"flex-[5]",children:"名稱"}),f.jsx("div",{className:"flex-[3]",children:"暱稱"}),f.jsx("div",{className:"flex-[3]",children:"顏色"})]})})]}),f.jsxs("div",{className:"flex",children:[f.jsxs("div",{className:"w-8 flex flex-col justify-around font-semibold",children:[f.jsx("div",{children:"東"}),f.jsx("div",{children:"南"}),f.jsx("div",{children:"西"}),f.jsx("div",{children:"北"})]}),f.jsx("div",{className:"flex-1",children:f.jsx(__e,{onDragEnd:c,children:f.jsx(dwe,{droppableId:"droppable",children:p=>f.jsxs("div",{...p.droppableProps,ref:p.innerRef,children:[hwe.map((m,y)=>f.jsx(V_e,{draggableId:m,index:y,children:g=>f.jsx("div",{ref:g.innerRef,...g.draggableProps,children:f.jsxs("div",{className:"flex gap-2 py-1 items-center",children:[f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:"text-2xl",...g.dragHandleProps,children:f.jsx("i",{className:"bi bi-grip-vertical"})})}),f.jsx("div",{className:"flex-[2] border border-neutral-400",children:f.jsx("img",{className:"aspect-[18/25] w-full cursor-pointer",src:a[2*y],onClick:u,"data-type":"proPicUrl","data-index":y,alt:""})}),f.jsx("div",{className:"flex-[2] border border-neutral-400",children:f.jsx("img",{className:"aspect-square w-full cursor-pointer",src:a[2*y+1],onClick:u,"data-type":"teamPicUrl","data-index":y,alt:""})}),f.jsx("div",{className:"flex-[5]",children:f.jsx("input",{className:"w-full",...r(`${m}.title`)})}),f.jsx("div",{className:"flex-[5]",children:f.jsx("input",{className:"w-full",...r(`${m}.name`)})}),f.jsx("div",{className:"flex-[3]",children:f.jsx("input",{className:"w-full",...r(`${m}.nickname`)})}),f.jsx("div",{className:"flex-[3]",children:f.jsx("input",{className:"w-full text-white",...r(`${m}.color`),style:{background:l[y]}})})]})})},m)),p.placeholder]})})})})]}),f.jsxs("div",{className:"flex mt-8",children:[f.jsx(Re,{className:"flex-1",variant:"text",color:"secondary",onClick:d,children:"重置"}),f.jsx(Re,{className:"flex-1",onClick:h,children:"儲存"})]})]})},bA=[{label:f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(舊版)"]}),value:"listView-old"},{label:f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(新版)"]}),value:"listView-new"},{label:f.jsxs("span",{children:[f.jsx("i",{className:"bi-grid-fill"})," 2x2"]}),value:"gridView"}];function Uv({value:t}){return f.jsx(Ft,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const Vv=({match:t,matchRound:e,playerIndex:r})=>{var n;return f.jsxs("div",{className:"text-xs",children:[f.jsxs("p",{children:[e.playerResults[r].isRiichi&&f.jsx("span",{children:"立"}),e.resultType===Ve.Ron&&e.playerResults[r].type===yt.Lose&&f.jsx("span",{children:"統"}),e.resultType===Ve.Ron&&e.playerResults[r].type===yt.Win&&f.jsx("span",{children:"和"}),e.resultType===Ve.SelfDrawn&&e.playerResults[r].type===yt.Win&&f.jsx("span",{children:"摸"}),e.resultType===Ve.Exhausted&&e.playerResults[r].type===yt.Win&&f.jsx("span",{children:"聽"})]}),(e.resultType===Ve.Ron||e.resultType===Ve.SelfDrawn)&&e.playerResults[r].type===yt.Win&&f.jsxs("div",{className:"bg-black bg-opacity-10 rounded py-1 px-2 mx-auto inline-block",children:[f.jsx("p",{className:"font-bold",children:f.jsx(jx,{className:"text-xs text-neutral-600",han:e.playerResults[r].detail.han,fu:e.playerResults[r].detail.fu,yakumanCount:e.playerResults[r].detail.yakumanCount,isManganRoundUp:t.setting.isManganRoundUp==="1"})}),f.jsx("p",{children:(n=e.playerResults[r].detail.yakus)==null?void 0:n.map(({label:i})=>i).join(" ")})]})]})};function PH({params:{matchId:t}}){const{data:e,set:r}=Zr("obs/1"),{data:n}=qa({queryKey:["matches",t],queryFn:({queryKey:M})=>AO(M[1])}),{match:i,matchRounds:o,matchCurrentRound:s,matchCurrentRoundDoras:a,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:u,setCurrentRoundDoras:d,setMatchName:h,setMatchPlayers:p,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchActiveResultDetail:g,setMatchRoundHasBroadcastedToTrue:b}=es(t),v=E.useMemo(()=>Object.entries(o??{}).map(([M,fe])=>({id:M,...fe}))??[],[o]),x=E.useMemo(()=>v.filter(({resultDetail:M,hasBroadcasted:fe})=>!!M&&!fe),[v]),[S,_]=E.useState(void 0),[w,A]=E.useState(bA[0].value),[C,T]=Co(!1),[P,I]=E.useState({initialActivePlayerIndex:"0",initialTargetPlayerIndex:"-1"}),O=Lye(),[N,j]=Co(!1),[L,U]=Co(!1),V=E.useCallback(()=>{U(!0)},[U]),R=E.useCallback(M=>{p(M),U(!1)},[p,U]),[F,z]=Co(!1),[le,re]=Co(!1),[be,at]=E.useState({id:null,matchRound:null}),rt=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-matchRoundId");if(!fe)return;const Pe=o==null?void 0:o[fe];Pe&&(at({id:fe,matchRound:Pe}),re(!0))},[o,re]),Wt=E.useCallback(M=>{if(!v||!be.id)return;const fe=v.findIndex(({id:zt})=>zt===be.id);if(fe===-1)return;l(be.id,M);let Pe=M;for(let zt=fe+1;zt<v.length;zt++){const{id:IJ,...zn}=v[zt],d$={...zn,playerResults:{0:{...zn.playerResults[0],beforeScore:Pe.playerResults[0].afterScore,afterScore:Pe.playerResults[0].afterScore+(zn.playerResults[0].afterScore-zn.playerResults[0].beforeScore)},1:{...zn.playerResults[1],beforeScore:Pe.playerResults[1].afterScore,afterScore:Pe.playerResults[1].afterScore+(zn.playerResults[1].afterScore-zn.playerResults[1].beforeScore)},2:{...zn.playerResults[2],beforeScore:Pe.playerResults[2].afterScore,afterScore:Pe.playerResults[2].afterScore+(zn.playerResults[2].afterScore-zn.playerResults[2].beforeScore)},3:{...zn.playerResults[3],beforeScore:Pe.playerResults[3].afterScore,afterScore:Pe.playerResults[3].afterScore+(zn.playerResults[3].afterScore-zn.playerResults[3].beforeScore)}}};l(IJ,d$),Pe=d$}re(!1),setTimeout(()=>{alert("「下次小心d喇屌 :)」")},0)},[be.id,v,re,l]),[,pt]=E.useState(null),Zt=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-player-index");if(!fe)return;const Pe=i==null?void 0:i.players[fe];if(!Pe)return;const zt=!(s!=null&&s.playerResults[fe].isRiichi);O.showConfirmDialog({title:zt?"確定要立直嗎？":"取消立直？",content:zt?`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Pe.name}！`:`你是否想取消 ${Pe.name} 的立直？`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[fe]:{...s==null?void 0:s.playerResults[fe],isRiichi:!(s!=null&&s.playerResults[fe].isRiichi)}}})}})},[O,i==null?void 0:i.players,s==null?void 0:s.playerResults,c]),te=E.useCallback(M=>{var Pe;const fe=parseInt((Pe=M.currentTarget)==null?void 0:Pe.getAttribute("data-index"),10);typeof fe<"u"&&!Number.isNaN(fe)&&_(fe)},[]),xe=E.useCallback(M=>{if(typeof S<"u"){const fe=M[0];if(!fe)return;const Pe=[...a];S===-1?Pe.push(fe):Pe[S]=fe,d(Pe),_(void 0)}},[S,a,d]),Ee=E.useCallback(()=>{if(typeof S<"u"){const M=[...a];S>-1&&(M.splice(S,1),d(M),_(void 0))}},[S,a,d]),q=E.useCallback(()=>{_(void 0)},[]),Ze=E.useCallback(M=>{const fe=M==null?void 0:M.currentTarget.getAttribute("data-player-index");fe&&(I({initialActivePlayerIndex:fe}),T())},[T]),ke=E.useCallback(()=>{j(!0)},[j]),vt=E.useCallback(()=>{z(!0)},[z]),$t=E.useCallback((M,fe)=>{if(!i||!s)return;const Pe=i.players[M],zt=s.playerResults[M];switch(fe){case"reveal":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],isRevealed:!s.playerResults[M].isRevealed,detail:{...s.playerResults[M].detail,isRevealed:!s.playerResults[M].isRevealed}}}});case"riichi":return O.showConfirmDialog({title:zt.isRiichi?"取消立直？":"確定要立直嗎？",content:zt.isRiichi?`你是否想取消 ${Pe.name} 的立直？`:`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isRiichi:!(s!=null&&s.playerResults[M].isRiichi),detail:{...s.playerResults[M].detail,isRiichied:!s.playerResults[M].isRiichi,raw:{...s.playerResults[M].detail.raw,riichi:!s.playerResults[M].isRiichi}}}}}),zt.isRiichi||(pt("立直動畫"),setTimeout(()=>{pt(null)},2e3))}});case"ron-self":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!(s!=null&&s.playerResults[M].detail.isRevealed)}}}}}),I({initialActivePlayerIndex:M,initialTargetPlayerIndex:"-1"}),T();return;case"ron-before":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),I({initialActivePlayerIndex:M,initialTargetPlayerIndex:$G(M)}),T();return;case"ron-after":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),I({initialActivePlayerIndex:M,initialTargetPlayerIndex:DG(M)}),T();return;case"ron-opposite":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),I({initialActivePlayerIndex:M,initialTargetPlayerIndex:MG(M)}),T();return;case"dora-normal-plus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,dora:s.playerResults[M].detail.dora+1}}}});case"dora-normal-minus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,dora:Math.max(s.playerResults[M].detail.dora-1,0)}}}});case"dora-red-plus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,redDora:s.playerResults[M].detail.redDora+1}}}});case"dora-red-minus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,redDora:Math.max(s.playerResults[M].detail.redDora-1,0)}}}});case"waitingTile":return J({index:M,tiles:(s==null?void 0:s.playerResults[M].waitingTiles)??[]});case"yaku":return yo({index:M});case"yellow-card":return O.showConfirmDialog({title:zt.isYellowCarded?"取消黃牌？":"確定要給予這名玩家黃牌嗎？",content:zt.isYellowCarded?`你是否想取消 ${Pe.name} 的黃牌？`:`一旦點擊確定，就會播出黃牌動畫，請確定要黃牌的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isYellowCarded:!(s!=null&&s.playerResults[M].isYellowCarded)}}})}});case"red-card":return O.showConfirmDialog({title:zt.isRedCarded?"取消紅牌？":"確定要給予這名玩家紅牌嗎？",content:zt.isRedCarded?`你是否想取消 ${Pe.name} 的紅牌？`:`一旦點擊確定，就會播出紅牌動畫，請確定要紅牌的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isRedCarded:!(s!=null&&s.playerResults[M].isRedCarded)}}})}})}},[O,i,s,T,c]),en=E.useCallback(M=>{try{const fe=CF(M.roundCount),Pe=M.playerResults[fe].type===yt.Win,zt=!Pe&&M.roundCount>=8;zt&&alert("對局結束。"),c({...M,nextRoundType:zt?bt.End:Pe?bt.Extended:bt.NextRound}),T(!1),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3)}catch(fe){console.error(fe)}},[T,c]),Wn=E.useCallback(M=>{try{const fe=CF(M.roundCount),Pe=M.playerResults[fe].type!==yt.Win,zt=Pe&&M.roundCount>=8;zt&&alert("對局結束。"),c({...M,nextRoundType:zt?bt.End:Pe?bt.NextRoundAndExtended:bt.Extended}),j(!1),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3)}catch(fe){console.error(fe)}},[j,c]),$=E.useCallback(M=>{try{c({playerResults:M.playerResults,resultType:Ve.Hotfix});const fe={matchId:t,code:Rx(t,M.roundCount,M.extendedRoundCount),roundCount:M.roundCount,extendedRoundCount:M.extendedRoundCount,cumulatedThousands:M.cumulatedThousands,nextRoundCumulatedThousands:0,resultType:Ve.Unknown,nextRoundType:bt.Unknown,playerResults:PF(M.playerResults),doras:(s==null?void 0:s.doras)??[]};u(fe),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3),z(!1)}catch(fe){console.error(fe)}},[s==null?void 0:s.doras,t,u,z,c]),B=E.useCallback(()=>{if(!s)return;const M=s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,fe=s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0,Pe={matchId:t,code:Rx(t,M,fe),roundCount:M,extendedRoundCount:fe,cumulatedThousands:s.nextRoundCumulatedThousands,nextRoundCumulatedThousands:0,resultType:Ve.Unknown,nextRoundType:bt.Unknown,playerResults:PF(s.playerResults),doras:{}};u(Pe)},[s,t,u]),W=E.useCallback(()=>{r({matchId:t})},[t,r]),[Z,J]=E.useState(null),Y=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-player-index");typeof fe>"u"||!(s!=null&&s.playerResults[fe])||J({index:fe,tiles:(s==null?void 0:s.playerResults[fe].waitingTiles)??[]})},[s==null?void 0:s.playerResults]),me=E.useCallback(()=>{J(null)},[]),nt=E.useCallback(M=>{Z&&(c({playerResults:{...s==null?void 0:s.playerResults,[Z.index]:{...s==null?void 0:s.playerResults[Z.index],waitingTiles:M}}}),J(null))},[Z,s==null?void 0:s.playerResults,c]),er=E.useCallback(()=>{Z&&(c({playerResults:{...s==null?void 0:s.playerResults,[Z.index]:{...s==null?void 0:s.playerResults[Z.index],waitingTiles:[]}}}),J(null))},[Z,s==null?void 0:s.playerResults,c]),[Dt,yo]=E.useState(null),IS=E.useCallback(()=>{yo(null)},[]),ph=E.useCallback(M=>{!s||!Dt||(c({playerResults:{...s.playerResults,[Dt.index]:{...s.playerResults[Dt.index],detail:{...s.playerResults[Dt.index].detail,...M}}}}),yo(null))},[Dt,s,c]),mh=E.useCallback(M=>{if(M.preventDefault(),!i)return;const fe=prompt("對局名稱",i.name);fe&&h(fe)},[i,h]),iv=E.useCallback(M=>{if(!o)return;const fe=M.currentTarget.getAttribute("data-match-round-id");if(!fe)return;const Pe=o[fe].resultDetail;Pe&&(g(Pe),b(fe),pt("播放和牌中…"),setTimeout(()=>{g(null),pt(null)},1e4))},[o,g,b]),ov=E.useCallback(()=>{g(null)},[g]),NS=E.useCallback(()=>{m(!0)},[m]),sv=E.useCallback(()=>{m(!1)},[m]),PJ=E.useCallback(()=>{y(!0)},[y]),TJ=E.useCallback(()=>{y(!1)},[y]);return E.useEffect(()=>{s&&a.length===0&&_(-1)},[s,a.length]),(!i||!s)&&n?f.jsx(Xye,{matchDTO:n}):!i||!s?f.jsx("div",{children:"對局讀取失敗。"}):f.jsxs("div",{children:[f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-24 pb-48",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-row items-center gap-x-4 text-white",children:[f.jsxs("div",{className:"p-2 pl-4 pr-10 flex items-center gap-x-8 transition-[width] text-[4rem]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[f.jsxs("div",{className:"text-[0.5em] relative",children:[f.jsx("div",{className:"text-[0.5em]",children:f.jsxs("button",{type:"button",onClick:mh,children:[i.name," ",f.jsx("i",{className:"bi bi-pencil"})]})}),f.jsxs("div",{className:"flex gap-x-8 items-center",children:[f.jsx("div",{children:f.jsx(ds,{roundCount:s.roundCount,max:8})}),f.jsxs("div",{className:"flex flex-col justify-around",children:[f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2"})}),f.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.extendedRoundCount??0})]}),f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2"})}),f.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.cumulatedThousands??0})]})]})]}),i.hideHeader&&f.jsx("div",{className:"absolute inset-0 opacity-100 bg-red-800 text-center",children:"隱藏中"})]}),f.jsxs("div",{className:"flex items-center gap-x-2",children:[a.map((M,fe)=>f.jsx("button",{"data-index":fe,onClick:te,className:"hover:opacity-80",children:f.jsx(Oo,{className:"w-12 animate-[fadeInFromLeft_0.5s_ease-in-out]",children:M},M)})),f.jsx(Re,{type:"button",color:a.length===0?"danger":"secondary",className:`${a.length===0&&"animate-bounce"}`,"data-index":"-1",onClick:te,children:"+懸賞"})]})]}),f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"shrink-0",children:(e==null?void 0:e.matchId)!==t&&f.jsx(Re,{color:"success",type:"button",className:"animate-pulse",onClick:W,children:"開始OBS"})})]}),f.jsxs("div",{className:"flex justify-between gap-x-8 ",children:[f.jsx("div",{className:"flex-1",children:f.jsx(tge,{tabs:bA,defaultValue:bA[0].value,onChangeValue:A})}),f.jsxs("div",{className:"text-right space-x-4",children:[i.activeResultDetail&&f.jsxs(Re,{color:"secondary",type:"button",onClick:ov,children:["結束播放中的和牌詳情",f.jsx("br",{}),f.jsx("span",{className:"text-xs",children:"(或最多10秒後自動結束)"})]}),s.nextRoundType!==bt.Unknown&&s.nextRoundType!==bt.End&&f.jsxs(Re,{color:"success",type:"button",className:"animate-pulse",onClick:B,children:["進入",f.jsx(ds,{roundCount:s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0})]}),f.jsx(Re,{color:"secondary",type:"button",onClick:ke,children:"流局"})]})]}),w==="listView-old"&&f.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(M=>f.jsxs("div",{className:"flex gap-x-2 items-center",children:[f.jsx("div",{className:"flex-1 text-[2.5rem]",children:f.jsx(Ha,{player:i.players[M],playerIndex:M,score:s.playerResults[M].afterScore,scoreChanges:s.playerResults[M].scoreChanges,isEast:Zn(M,s.roundCount),isRiichi:s.playerResults[M].isRiichi,waitingTiles:s.playerResults[M].waitingTiles,onClickWaitingTiles:Y,isYellowCarded:s.playerResults[M].isYellowCarded,isRedCarded:s.playerResults[M].isRedCarded,showPointAndRanking:i.showPoints})}),f.jsx("div",{children:f.jsx("button",{type:"button",className:`${s.playerResults[M].isRiichi?"bg-orange-600 text-white":"bg-white text-orange-600 opacity-30"} h-16 w-16 border-2 border-orange-600  rounded-full text-lg`,onClick:Zt,"data-player-index":M,children:s.playerResults[M].isRiichi?"已立直":"立直?"})}),f.jsx("div",{className:"pl-6",children:f.jsx(Re,{color:"danger",type:"button",onClick:Ze,"data-player-index":M,children:"和了"})})]}))}),w==="listView-new"&&f.jsx(Jye,{players:i.players,currentRound:s,onAction:$t}),w==="gridView"&&f.jsx(ege,{players:i.players,currentRound:s,onAction:$t}),f.jsx("div",{children:f.jsxs(Re,{size:"small",color:"secondary",onClick:V,children:[f.jsx("i",{className:"bi bi-people"})," 修改玩家"]})})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h4",{className:"text-3xl",children:[f.jsx("i",{className:"bi bi-bar-chart-steps"})," 紀錄"," ",f.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[f.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),f.jsx("th",{children:i.players[0].nickname}),f.jsx("th",{children:i.players[1].nickname}),f.jsx("th",{children:i.players[2].nickname}),f.jsx("th",{children:i.players[3].nickname}),f.jsx("th",{className:"text-right",children:"操作"})]})}),f.jsxs("tbody",{children:[v[0]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center"}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:v[0].playerResults[0].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:v[0].playerResults[1].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:v[0].playerResults[2].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Ft,{value:v[0].playerResults[3].beforeScore})}),f.jsx("td",{})]}),v.map(M=>M.resultType===Ve.Hotfix?f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),f.jsx("td",{className:"text-center",children:M.playerResults[0].afterScore}),f.jsx("td",{className:"text-center",children:M.playerResults[1].afterScore}),f.jsx("td",{className:"text-center",children:M.playerResults[2].afterScore}),f.jsx("td",{className:"text-center",children:M.playerResults[3].afterScore}),f.jsx("td",{})]},M.id):f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap",children:f.jsx(ds,{roundCount:M.roundCount,extendedRoundCount:M.extendedRoundCount,max:8,className:"px-4"})}),f.jsxs("td",{className:"text-center",children:[f.jsx(Uv,{value:M.playerResults[0].afterScore-M.playerResults[0].beforeScore}),f.jsx(Vv,{match:i,matchRound:M,playerIndex:"0"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Uv,{value:M.playerResults[1].afterScore-M.playerResults[1].beforeScore}),f.jsx(Vv,{match:i,matchRound:M,playerIndex:"1"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Uv,{value:M.playerResults[2].afterScore-M.playerResults[2].beforeScore}),f.jsx(Vv,{match:i,matchRound:M,playerIndex:"2"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Uv,{value:M.playerResults[3].afterScore-M.playerResults[3].beforeScore}),f.jsx(Vv,{match:i,matchRound:M,playerIndex:"3"})]}),f.jsxs("td",{className:"text-right space-x-2",children:[(M.resultType===Ve.Ron||M.resultType===Ve.SelfDrawn)&&f.jsxs(Re,{color:M.hasBroadcasted?"secondary":"success",type:"button",variant:"text",className:M.hasBroadcasted?"opacity-50":"",onClick:iv,"data-match-round-id":M.id,children:[f.jsx("i",{className:"bi bi-camera-reels"})," ",M.hasBroadcasted?"已播放過":"播放和牌詳情"]}),M.resultType!==Ve.Unknown&&f.jsxs(Re,{variant:"text",color:"danger","data-matchRoundId":M.id,onClick:rt,children:[f.jsx("i",{className:"bi bi-pencil"})," 修改"]})]})]},M.id)),v[v.length-1]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16",children:f.jsxs(Re,{onClick:vt,size:"small",color:"secondary",children:[f.jsx("i",{className:"bi bi-pencil"})," 手動調整分數"]})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:v[v.length-1].playerResults[0].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:v[v.length-1].playerResults[1].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:v[v.length-1].playerResults[2].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Ft,{value:v[v.length-1].playerResults[3].afterScore})}),f.jsx("td",{})]})]})]})]})]}),f.jsx(Yn,{open:typeof S<"u",title:"選擇懸賞",onClose:q,children:f.jsx(RF,{hideRedTiles:!0,onSubmit:xe,onRemove:Ee,canRemove:typeof S<"u"&&S>0,defaultValue:typeof S<"u"?[a[S]]:void 0})}),f.jsx(Yn,{open:!!Z,title:"選擇待牌",onClose:me,children:f.jsx(RF,{hideRedTiles:!0,onSubmit:nt,onRemove:er,defaultValue:Z==null?void 0:Z.tiles,multiple:!0,canRemove:!0})}),f.jsx(age,{round:s.roundCount,activePlayerIndex:(Dt==null?void 0:Dt.index)??"0",targetPlayerIndex:"-1",open:!!Dt,onClose:IS,onSubmit:ph,defaultValue:s.playerResults[(Dt==null?void 0:Dt.index)??"0"].detail}),f.jsx(Yn,{title:"和了",open:C,onClose:()=>T(!1),children:f.jsx(GG,{match:i,currentMatchRound:s,onSubmit:en,...P})}),f.jsx(Yn,{title:"流局",open:N,onClose:()=>j(!1),children:f.jsx(qG,{match:i,currentMatchRound:s,onSubmit:Wn,...P})}),f.jsx(Yn,{title:"修改玩家",open:L,onClose:()=>U(!1),children:f.jsx(pwe,{defaultPlayers:i.players,onSubmit:R})}),f.jsx(Yn,{title:"手動調整分數",open:F,onClose:()=>z(!1),children:f.jsx(Cge,{match:i,currentMatchRound:s,onSubmit:$,...P})}),f.jsx(Yn,{title:"修改局數",open:le,onClose:()=>re(!1),children:f.jsx(Pge,{match:i,matchRound:be.matchRound,onSubmit:Wt})}),f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 pl-6 pr-6 pb-6 z-50 flex justify-between items-end bg-gradient-to-b from-transparent to-[#00000080]",children:[f.jsx("div",{className:"text-left"}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-right mb-4",children:[s.nextRoundType!==bt.Unknown&&s.nextRoundType!==bt.End&&f.jsxs("button",{className:"text-6xl p-4 text-green-800 bg-green-400 border-4 border-green-600 rounded-lg",onClick:B,children:["進入",f.jsx(ds,{roundCount:s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0})," ",f.jsx("i",{className:"bi bi-play-fill"})]}),s.nextRoundType===bt.End&&f.jsx("a",{href:`/match/${t}/export`,target:"_blank",children:f.jsxs("button",{className:"text-6xl p-4 text-yellow-800 bg-yellow-400 border-4 border-yellow-600 rounded-lg",children:["上傳成績",f.jsx("i",{className:"bi bi-cloud-upload"})]})})]}),f.jsxs("div",{className:"flex gap-x-6 items-end justify-end",children:[!i.hideHeader&&f.jsxs("button",{onClick:PJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[f.jsx("i",{className:"bi bi-eye"})," 標題：顯示中"]}),i.hideHeader&&f.jsxs("button",{onClick:TJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-600 border border-red-500 leading-6 text-white",children:[f.jsx("i",{className:"bi bi-eye-slash"})," 標題：隱藏中"]}),!i.showPoints&&f.jsxs("button",{onClick:NS,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[f.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),i.showPoints&&f.jsxs("button",{onClick:sv,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-green-300 border border-green-300 leading-6 text-green-800",children:[f.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),x.map(M=>f.jsx("button",{onClick:iv,"data-match-round-id":M.id,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-200 border border-red-300 leading-6 text-red-800 animate-bounce",children:f.jsxs("p",{children:[f.jsx("i",{className:"bi bi-trophy"})," ",M.roundCount,".",M.extendedRoundCount," 和牌動畫：待播放"]})}))]})]})]})]})}function ge(){return ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ge.apply(this,arguments)}function $s(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Lu=255,xa=100,cp=t=>{var{r:e,g:r,b:n,a:i}=t,o=Math.max(e,r,n),s=o-Math.min(e,r,n),a=s?o===e?(r-n)/s:o===r?2+(n-e)/s:4+(e-r)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*xa:0,v:o/Lu*xa,a:i}},TH=t=>{var{h:e,s:r,l:n,a:i}=IH(t);return"hsla("+e+", "+r+"%, "+n+"%, "+i+")"},IH=t=>{var{h:e,s:r,v:n,a:i}=t,o=(200-r)*n/xa;return{h:e,s:o>0&&o<200?r*n/xa/(o<=xa?o:200-o)*xa:0,l:o/2,a:i}},NH=t=>{var{r:e,g:r,b:n}=t,i=e<<16|r<<8|n;return"#"+(o=>new Array(7-o.length).join("0")+o)(i.toString(16))},mwe=t=>{var{r:e,g:r,b:n,a:i}=t,o=typeof i=="number"&&(i*255|256).toString(16).slice(1);return""+NH({r:e,g:r,b:n,a:i})+(o||"")},Lm=t=>cp(ywe(t)),ywe=t=>{var e=t.replace("#","");/^#?/.test(t)&&e.length===3&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var r=new RegExp("[A-Za-z0-9]{2}","g"),[n,i,o=0,s]=t.match(r).map(a=>parseInt(a,16));return{r:n,g:i,b:o,a:(s??255)/Lu}},S1=t=>{var{h:e,s:r,v:n,a:i}=t,o=e/60,s=r/xa,a=n/xa,l=Math.floor(o)%6,c=o-Math.floor(o),u=Lu*a*(1-s),d=Lu*a*(1-s*c),h=Lu*a*(1-s*(1-c));a*=Lu;var p={};switch(l){case 0:p.r=a,p.g=h,p.b=u;break;case 1:p.r=d,p.g=a,p.b=u;break;case 2:p.r=u,p.g=a,p.b=h;break;case 3:p.r=u,p.g=d,p.b=a;break;case 4:p.r=h,p.g=u,p.b=a;break;case 5:p.r=a,p.g=u,p.b=d;break}return p.r=Math.round(p.r),p.g=Math.round(p.g),p.b=Math.round(p.b),ge({},p,{a:i})},gwe=t=>{var{r:e,g:r,b:n,a:i}=S1(t);return"rgba("+e+", "+r+", "+n+", "+i+")"},vwe=t=>{var{r:e,g:r,b:n}=t;return{r:e,g:r,b:n}},bwe=t=>{var{h:e,s:r,l:n}=t;return{h:e,s:r,l:n}},bT=t=>NH(S1(t)),xwe=t=>{var{h:e,s:r,v:n}=t;return{h:e,s:r,v:n}},Bu=t=>{var e,r,n,i,o,s,a,l;return typeof t=="string"&&xT(t)?(s=Lm(t),a=t):typeof t!="string"&&(s=t),s&&(n=xwe(s),o=IH(s),i=S1(s),l=mwe(i),a=bT(s),r=bwe(o),e=vwe(i)),{rgb:e,hsl:r,hsv:n,rgba:i,hsla:o,hsva:s,hex:a,hexa:l}},xT=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t);function jL(t){var e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useCallback((r,n)=>e.current&&e.current(r,n),[])}var Bp=t=>"touches"in t,$L=t=>{!Bp(t)&&t.preventDefault&&t.preventDefault()},DL=function(e,r,n){return r===void 0&&(r=0),n===void 0&&(n=1),e>n?n:e<r?r:e},ML=(t,e)=>{var r=t.getBoundingClientRect(),n=Bp(e)?e.touches[0]:e;return{left:DL((n.pageX-(r.left+window.pageXOffset))/r.width),top:DL((n.pageY-(r.top+window.pageYOffset))/r.height),width:r.width,height:r.height,x:n.pageX-(r.left+window.pageXOffset),y:n.pageY-(r.top+window.pageYOffset)}},_we=["prefixCls","className","onMove","onDown"],kH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-interactive",className:n,onMove:i,onDown:o}=t,s=$s(t,_we),a=E.useRef(null),l=E.useRef(!1),[c,u]=E.useState(!1),d=jL(i),h=jL(o),p=v=>l.current&&!Bp(v)?!1:(l.current=Bp(v),!0),m=E.useCallback(v=>{$L(v);var x=Bp(v)?v.touches.length>0:v.buttons>0;x&&a.current?d&&d(ML(a.current,v),v):u(!1)},[d]),y=E.useCallback(()=>u(!1),[]),g=E.useCallback(v=>{var x=v?window.addEventListener:window.removeEventListener;x(l.current?"touchmove":"mousemove",m),x(l.current?"touchend":"mouseup",y)},[]);E.useEffect(()=>(g(c),()=>{c&&g(!1)}),[c,g]);var b=E.useCallback(v=>{$L(v.nativeEvent),p(v.nativeEvent)&&(h&&h(ML(a.current,v.nativeEvent),v.nativeEvent),u(!0))},[h]);return f.jsx("div",ge({},s,{className:[r,n||""].filter(Boolean).join(" "),style:ge({},s.style,{touchAction:"none"}),ref:a,tabIndex:0,onMouseDown:b,onTouchStart:b}))});kH.displayName="Interactive";const OH=kH;var wwe=t=>{var{className:e,color:r,left:n,top:i,prefixCls:o}=t,s={position:"absolute",top:i,left:n},a={"--saturation-pointer-box-shadow":"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",width:6,height:6,transform:"translate(-3px, -3px)",boxShadow:"var(--saturation-pointer-box-shadow)",borderRadius:"50%",backgroundColor:r};return E.useMemo(()=>f.jsx("div",{className:o+"-pointer "+(e||""),style:s,children:f.jsx("div",{className:o+"-fill",style:a})}),[i,n,r,e,o])},Swe=["prefixCls","radius","pointer","className","hue","style","hsva","onChange"],RH=k.forwardRef((t,e)=>{var r,{prefixCls:n="w-color-saturation",radius:i=0,pointer:o,className:s,hue:a=0,style:l,hsva:c,onChange:u}=t,d=$s(t,Swe),h=ge({width:200,height:200,borderRadius:i},l,{position:"relative"}),p=(y,g)=>{u&&c&&u({h:c.h,s:y.left*100,v:(1-y.top)*100,a:c.a})},m=E.useMemo(()=>{if(!c)return null;var y={top:100-c.v+"%",left:c.s+"%",color:TH(c)};return o&&typeof o=="function"?o(ge({prefixCls:n},y)):f.jsx(wwe,ge({prefixCls:n},y))},[c,o,n]);return f.jsx(OH,ge({className:[n,s||""].filter(Boolean).join(" ")},d,{style:ge({position:"absolute",inset:0,cursor:"crosshair",backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsl("+((r=c==null?void 0:c.h)!=null?r:a)+", 100%, 50%))"},h),ref:e,onMove:p,onDown:p,children:m}))});RH.displayName="Saturation";const Ewe=RH;var Awe=["className","prefixCls","left","top","style","fillProps"],Cwe=t=>{var{className:e,prefixCls:r,left:n,top:i,style:o,fillProps:s}=t,a=$s(t,Awe),l=ge({},o,{position:"absolute",left:n,top:i}),c=ge({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},s==null?void 0:s.style,{transform:n?"translate(-9px, -1px)":"translate(-1px, -9px)"});return f.jsx("div",ge({className:r+"-pointer "+(e||""),style:l},a,{children:f.jsx("div",ge({className:r+"-fill"},s,{style:c}))}))},Pwe=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],Twe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==",jH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-alpha",className:n,hsva:i,background:o,bgProps:s={},innerProps:a={},pointerProps:l={},radius:c=0,width:u,height:d=16,direction:h="horizontal",style:p,onChange:m,pointer:y}=t,g=$s(t,Pwe),b=A=>{m&&m(ge({},i,{a:h==="horizontal"?A.left:A.top}),A)},v=TH(Object.assign({},i,{a:1})),x="linear-gradient(to "+(h==="horizontal"?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+v+" 100%)",S={};h==="horizontal"?S.left=i.a*100+"%":S.top=i.a*100+"%";var _=ge({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:c,background:"url("+Twe+") left center",backgroundColor:"var(--alpha-background-color)"},{width:u,height:d},p,{position:"relative"}),w=y&&typeof y=="function"?y(ge({prefixCls:r},l,S)):f.jsx(Cwe,ge({},l,{prefixCls:r},S));return f.jsxs("div",ge({},g,{className:[r,r+"-"+h,n||""].filter(Boolean).join(" "),style:_,ref:e,children:[f.jsx("div",ge({},s,{style:ge({inset:0,position:"absolute",background:o||x,borderRadius:c},s.style)})),f.jsx(OH,ge({},a,{style:ge({},a.style,{inset:0,zIndex:1,position:"absolute"}),onMove:b,onDown:b,children:w}))]}))});jH.displayName="Alpha";const _T=jH;var Iwe=["prefixCls","placement","label","value","className","style","labelStyle","inputStyle","onChange","onBlur"],Nwe=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t),kwe=t=>Number(String(t).replace(/%/g,"")),$H=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input",placement:n="bottom",label:i,value:o,className:s,style:a,labelStyle:l,inputStyle:c,onChange:u,onBlur:d}=t,h=$s(t,Iwe),[p,m]=E.useState(o),y=E.useRef(!1);E.useEffect(()=>{t.value!==p&&(y.current||m(t.value))},[t.value]);function g(_,w){var A=(w||_.target.value).trim().replace(/^#/,"");Nwe(A)&&u&&u(_,A);var C=kwe(A);isNaN(C)||u&&u(_,C),m(A)}function b(_){y.current=!1,m(t.value),d&&d(_)}var v={};n==="bottom"&&(v.flexDirection="column"),n==="top"&&(v.flexDirection="column-reverse"),n==="left"&&(v.flexDirection="row-reverse");var x=ge({"--editable-input-label-color":"rgb(153, 153, 153)","--editable-input-box-shadow":"rgb(204 204 204) 0px 0px 0px 1px inset","--editable-input-color":"#666",position:"relative",alignItems:"center",display:"flex",fontSize:11},v,a),S=ge({width:"100%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,fontSize:11,background:"transparent",boxSizing:"border-box",border:"none",color:"var(--editable-input-color)",boxShadow:"var(--editable-input-box-shadow)"},c);return f.jsxs("div",{className:[r,s||""].filter(Boolean).join(" "),style:x,children:[f.jsx("input",ge({ref:e,value:p,onChange:g,onBlur:b,autoComplete:"off",onFocus:()=>y.current=!0},h,{style:S})),i&&f.jsx("span",{style:ge({color:"var(--editable-input-label-color)",textTransform:"capitalize"},l),children:i})]})});$H.displayName="EditableInput";const up=$H;var Owe=["prefixCls","hsva","placement","rProps","gProps","bProps","aProps","className","style","onChange"],DH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input-rgba",hsva:n,placement:i="bottom",rProps:o={},gProps:s={},bProps:a={},aProps:l={},className:c,style:u,onChange:d}=t,h=$s(t,Owe),p=n?S1(n):{};function m(g){var b=Number(g.target.value);b&&b>255&&(g.target.value="255"),b&&b<0&&(g.target.value="0")}var y=(g,b,v)=>{typeof g=="number"&&(b==="a"&&(g<0&&(g=0),g>100&&(g=100),d&&d(Bu(cp(ge({},p,{a:g/100}))))),g>255&&(g=255,v.target.value="255"),g<0&&(g=0,v.target.value="0"),b==="r"&&d&&d(Bu(cp(ge({},p,{r:g})))),b==="g"&&d&&d(Bu(cp(ge({},p,{g})))),b==="b"&&d&&d(Bu(cp(ge({},p,{b:g})))))};return f.jsxs("div",ge({ref:e,className:[r,c||""].filter(Boolean).join(" ")},h,{style:ge({fontSize:11,display:"flex"},u),children:[f.jsx(up,ge({label:"R",value:p.r||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"r",g)},o,{style:ge({},o.style)})),f.jsx(up,ge({label:"G",value:p.g||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"g",g)},s,{style:ge({marginLeft:5},o.style)})),f.jsx(up,ge({label:"B",value:p.b||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"b",g)},a,{style:ge({marginLeft:5},a.style)})),l&&f.jsx(up,ge({label:"A",value:p.a?parseInt(String(p.a*100),10):0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"a",g)},l,{style:ge({marginLeft:5},l.style)}))]}))});DH.displayName="EditableInputRGBA";const Rwe=DH;var jwe=["prefixCls","className","hue","onChange","direction"],MH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-hue",className:n,hue:i=0,onChange:o,direction:s="horizontal"}=t,a=$s(t,jwe);return f.jsx(_T,ge({ref:e,className:r+" "+(n||"")},a,{direction:s,background:"linear-gradient(to "+(s==="horizontal"?"right":"bottom")+", rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)",hsva:{h:i,s:100,v:100,a:i/360},onChange:(l,c)=>{o&&o({h:s==="horizontal"?360*c.left:360*c.top})}}))});MH.displayName="Hue";const $we=MH;var Dwe=["prefixCls","className","color","colors","style","rectProps","onChange","addonAfter","addonBefore","rectRender"],FH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-swatch",className:n,color:i,colors:o=[],style:s,rectProps:a={},onChange:l,addonAfter:c,addonBefore:u,rectRender:d}=t,h=$s(t,Dwe),p=ge({"--swatch-background-color":"rgb(144, 19, 254)",background:"var(--swatch-background-color)",height:15,width:15,marginRight:5,marginBottom:5,cursor:"pointer",position:"relative",outline:"none",borderRadius:2},a.style),m=(y,g)=>{l&&l(Lm(y),Bu(Lm(y)),g)};return f.jsxs("div",ge({ref:e},h,{className:[r,n||""].filter(Boolean).join(" "),style:ge({display:"flex",flexWrap:"wrap",position:"relative"},s),children:[u&&k.isValidElement(u)&&u,o&&Array.isArray(o)&&o.map((y,g)=>{var b="",v="";typeof y=="string"&&(b=y,v=y),typeof y=="object"&&y.color&&(b=y.title||y.color,v=y.color);var x=i&&i.toLocaleLowerCase()===v.toLocaleLowerCase(),S=d&&d({title:b,color:v,checked:!!x,style:ge({},p,{background:v}),onClick:w=>m(v,w)});if(S)return f.jsx(E.Fragment,{children:S},g);var _=a.children&&k.isValidElement(a.children)?k.cloneElement(a.children,{color:v,checked:x}):null;return f.jsx("div",ge({tabIndex:0,title:b,onClick:w=>m(v,w)},a,{children:_,style:ge({},p,{background:v})}),g)}),c&&k.isValidElement(c)&&c]}))});FH.displayName="Swatch";const Mwe=FH;var Fwe=["prefixCls","className","onChange","width","presetColors","color","editableDisable","disableAlpha","style"],Lwe=["#D0021B","#F5A623","#f8e61b","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],FL=t=>f.jsx("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:4,top:1,bottom:1,left:t.left,borderRadius:1,position:"absolute",backgroundColor:"#fff"}}),LH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-sketch",className:n,onChange:i,width:o=218,presetColors:s=Lwe,color:a,editableDisable:l=!0,disableAlpha:c=!1,style:u}=t,d=$s(t,Fwe),[h,p]=E.useState({h:209,s:36,v:90,a:1});E.useEffect(()=>{typeof a=="string"&&xT(a)&&p(Lm(a)),typeof a=="object"&&p(a)},[a]);var m=w=>{p(w),i&&i(Bu(w))},y=(w,A)=>{typeof w=="string"&&xT(w)&&/(3|6)/.test(String(w.length))&&m(Lm(w))},g=w=>m(ge({},h,{a:w.a})),b=w=>m(ge({},h,w,{a:h.a})),v=ge({"--sketch-background":"rgb(255, 255, 255)","--sketch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px","--sketch-swatch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset","--sketch-alpha-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset, rgb(0 0 0 / 25%) 0px 0px 4px inset","--sketch-swatch-border-top":"1px solid rgb(238, 238, 238)",background:"var(--sketch-background)",borderRadius:4,boxShadow:"var(--sketch-box-shadow)",width:o},u),x={borderRadius:2,background:gwe(h),boxShadow:"var(--sketch-alpha-box-shadow)"},S={borderTop:"var(--sketch-swatch-border-top)",paddingTop:10,paddingLeft:10},_={marginRight:10,marginBottom:10,borderRadius:3,boxShadow:"var(--sketch-swatch-box-shadow)"};return f.jsxs("div",ge({},d,{className:r+" "+(n||""),ref:e,style:v,children:[f.jsxs("div",{style:{padding:"10px 10px 8px"},children:[f.jsx(Ewe,{hsva:h,style:{width:"auto",height:150},onChange:b}),f.jsxs("div",{style:{display:"flex",marginTop:4},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx($we,{width:"auto",height:10,hue:h.h,pointer:FL,innerProps:{style:{marginLeft:1,marginRight:5}},onChange:w=>m(ge({},h,w))}),!c&&f.jsx(_T,{width:"auto",height:10,hsva:h,pointer:FL,style:{marginTop:4},innerProps:{style:{marginLeft:1,marginRight:5}},onChange:g})]}),!c&&f.jsx(_T,{width:24,height:24,hsva:h,radius:2,style:{marginLeft:4},bgProps:{style:{background:"transparent"}},innerProps:{style:x},pointer:()=>f.jsx(E.Fragment,{})})]})]}),l&&f.jsxs("div",{style:{display:"flex",margin:"0 10px 3px 10px"},children:[f.jsx(up,{label:"Hex",value:bT(h).replace(/^#/,"").toLocaleUpperCase(),onChange:(w,A)=>y(A),style:{minWidth:58}}),f.jsx(Rwe,{hsva:h,style:{marginLeft:6},aProps:c?!1:{},onChange:w=>m(w.hsva)})]}),s&&s.length>0&&f.jsx(Mwe,{style:S,colors:s,color:bT(h),onChange:w=>m(w),rectProps:{style:_}})]}))});LH.displayName="Sketch";const Bwe=LH;function BH({value:t,onChange:e,onBlur:r}){const n=E.useCallback(i=>{e==null||e(i.hex)},[e]);return f.jsx(Bwe,{disableAlpha:!0,onChange:n,onBlur:r,color:t})}const Uwe=async()=>new Promise(t=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.addEventListener("change",r=>{var i;const n=(i=r.target.files)==null?void 0:i[0];n&&t(n)}),e.click()}),LL=({children:t,helperText:e,onChangeFile:r=async()=>{},...n})=>{const i=E.useMemo(()=>t||f.jsxs("div",{className:"space-y-2 text-center text-xs",children:[f.jsx("p",{children:f.jsx("i",{className:"bi bi-upload"})}),f.jsx("p",{children:"拖拉檔案上傳 ／ 點擊上傳"}),f.jsx("p",{children:e})]}),[t,e]),[{loading:o},s]=Kw(r),a=E.useCallback(()=>{Uwe().then(s)},[s]),l=E.useMemo(()=>({onFiles:u=>{const d=u.find(h=>!!h);d&&s(d)}}),[s]),[c]=Gye(l);return f.jsxs("div",{className:"relative",children:[f.jsx("div",{...n,className:"bg-neutral-50 border border-neutral-200 border-dashed p-1 cursor-pointer hover:border-neutral-400 text-neutral-400",onClick:a,...c,children:i}),o&&f.jsx("div",{className:"absolute z-10 cursor-not-allowed inset-0 bg-neutral-300 text-white flex gap-x-1 items-center justify-center",children:f.jsx(TO,{})})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH="firebasestorage.googleapis.com",VH="storageBucket",Vwe=2*60*1e3,Wwe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends Mc{constructor(e,r,n=0){super(xA(e),`Firebase Storage: ${r} (${xA(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function xA(t){return"storage/"+t}function cR(){const t="An unknown error occurred, please check the error payload for server response.";return new Yt(Kt.UNKNOWN,t)}function zwe(t){return new Yt(Kt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Gwe(t){return new Yt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qwe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yt(Kt.UNAUTHENTICATED,t)}function Hwe(){return new Yt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Kwe(t){return new Yt(Kt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Qwe(){return new Yt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ywe(){return new Yt(Kt.CANCELED,"User canceled the upload/download.")}function Xwe(t){return new Yt(Kt.INVALID_URL,"Invalid URL '"+t+"'.")}function Jwe(t){return new Yt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Zwe(){return new Yt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VH+"' property when initializing the app?")}function e1e(){return new Yt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function t1e(){return new Yt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function r1e(t){return new Yt(Kt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wT(t){return new Yt(Kt.INVALID_ARGUMENT,t)}function WH(){return new Yt(Kt.APP_DELETED,"The Firebase app was deleted.")}function n1e(t){return new Yt(Kt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Up(t,e){return new Yt(Kt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $h(t){throw new Yt(Kt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ti.makeFromUrl(e,r)}catch{return new ti(e,"")}if(n.path==="")return n;throw Jwe(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),m={bucket:1,path:3},y=r===UH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${g}`,"i"),x=[{regex:a,indices:l,postModify:o},{regex:p,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<x.length;S++){const _=x[S],w=_.regex.exec(e);if(w){const A=w[_.indices.bucket];let C=w[_.indices.path];C||(C=""),n=new ti(A,C),_.postModify(n);break}}if(n==null)throw Xwe(e);return n}}class i1e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1e(t,e,r){let n=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,t(p,l())},g)}function h(){o&&clearTimeout(o)}function p(g,...b){if(c){h();return}if(g){h(),u.call(null,g,...b);return}if(l()||s){h(),u.call(null,g,...b);return}n<64&&(n*=2);let x;a===1?(a=2,x=0):x=(n+Math.random())*1e3,d(x)}let m=!1;function y(g){m||(m=!0,h(),!c&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,y(!0)},r),y}function s1e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1e(t){return t!==void 0}function l1e(t){return typeof t=="object"&&!Array.isArray(t)}function uR(t){return typeof t=="string"||t instanceof String}function BL(t){return fR()&&t instanceof Blob}function fR(){return typeof Blob<"u"}function UL(t,e,r,n){if(n<e)throw wT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw wT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function zH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hc||(hc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1e(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1e{constructor(e,r,n,i,o,s,a,l,c,u,d,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Wv(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===hc.NO_ERROR,l=o.getStatus();if(!a||c1e(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===hc.ABORT;n(!1,new Wv(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Wv(c,o))})},r=(n,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());a1e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=cR();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?WH():Ywe();s(l)}else{const l=Qwe();s(l)}};this.canceled_?r(!1,new Wv(!1,null,!0)):this.backoffId_=o1e(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&s1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function f1e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function d1e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function h1e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p1e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function m1e(t,e,r,n,i,o,s=!0){const a=zH(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return h1e(c,e),f1e(c,r),d1e(c,o),p1e(c,n),new u1e(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function g1e(...t){const e=y1e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(fR())return new Blob(t);throw new Yt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function v1e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1e(t){if(typeof atob>"u")throw r1e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _A{constructor(e,r){this.data=e,this.contentType=r||null}}function x1e(t,e){switch(t){case jo.RAW:return new _A(GH(e));case jo.BASE64:case jo.BASE64URL:return new _A(qH(t,e));case jo.DATA_URL:return new _A(w1e(e),S1e(e))}throw cR()}function GH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=n,s=t.charCodeAt(++r);n=65536|(o&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function _1e(t){let e;try{e=decodeURIComponent(t)}catch{throw Up(jo.DATA_URL,"Malformed data URL.")}return GH(e)}function qH(t,e){switch(t){case jo.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Up(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jo.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Up(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=b1e(e)}catch(i){throw i.message.includes("polyfill")?i:Up(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class HH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Up(jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=E1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function w1e(t){const e=new HH(t);return e.base64?qH(jo.BASE64,e.rest):_1e(e.rest)}function S1e(t){return new HH(t).contentType}function E1e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,r){let n=0,i="";BL(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(BL(this.data_)){const n=this.data_,i=v1e(n,e,r);return i===null?null:new na(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new na(n,!0)}}static getBlob(...e){if(fR()){const r=e.map(n=>n instanceof na?n.data_:n);return new na(g1e.apply(null,r))}else{const r=e.map(s=>uR(s)?x1e(jo.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let o=0;return r.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new na(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t){let e;try{e=JSON.parse(t)}catch{return null}return l1e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function C1e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function QH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1e(t,e){return e}class gn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||P1e}}let zv=null;function T1e(t){return!uR(t)||t.length<2?t:QH(t)}function YH(){if(zv)return zv;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(o,s){return T1e(s)}const r=new gn("name");r.xform=e,t.push(r);function n(o,s){return s!==void 0?Number(s):s}const i=new gn("size");return i.xform=n,t.push(i),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),zv=t,zv}function I1e(t,e){function r(){const n=t.bucket,i=t.fullPath,o=new ti(n,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function N1e(t,e,r){const n={};n.type="file";const i=r.length;for(let o=0;o<i;o++){const s=r[o];n[s.local]=s.xform(n,e[s.server])}return I1e(n,t),n}function XH(t,e,r){const n=KH(e);return n===null?null:N1e(t,n,r)}function k1e(t,e,r,n){const i=KH(e);if(i===null||!uR(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+s(u)+"/o/"+s(d),p=dR(h,r,n),m=zH({alt:"media",token:c});return p+m})[0]}function O1e(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const o=e[i];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class JH{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(t){if(!t)throw cR()}function R1e(t,e){function r(n,i){const o=XH(t,i,e);return ZH(o!==null),o}return r}function j1e(t,e){function r(n,i){const o=XH(t,i,e);return ZH(o!==null),k1e(o,i,t.host,t._protocol)}return r}function e7(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=Hwe():i=qwe():r.getStatus()===402?i=Gwe(t.bucket):r.getStatus()===403?i=Kwe(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function $1e(t){const e=e7(t);function r(n,i){let o=e(n,i);return n.getStatus()===404&&(o=zwe(t.path)),o.serverResponse=i.serverResponse,o}return r}function D1e(t,e,r){const n=e.fullServerUrl(),i=dR(n,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new JH(i,o,j1e(t,r),s);return a.errorHandler=$1e(e),a}function M1e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function F1e(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=M1e(null,e)),n}function L1e(t,e,r,n,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let S=0;S<2;S++)x=x+Math.random().toString().slice(2);return x}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=F1e(e,n,i),u=O1e(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=na.getBlob(d,n,h);if(p===null)throw e1e();const m={name:c.fullPath},y=dR(o,t.host,t._protocol),g="POST",b=t.maxUploadRetryTime,v=new JH(y,g,R1e(t,r),b);return v.urlParams=m,v.headers=s,v.body=p.uploadData(),v.errorHandler=e7(e),v}class B1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw $h("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $h("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $h("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $h("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $h("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class U1e extends B1e{initXhr(){this.xhr_.responseType="text"}}function t7(){return new U1e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,r){this._service=e,r instanceof ti?this._location=r:this._location=ti.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Nc(e,r)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QH(this._location.path)}get storage(){return this._service}get parent(){const e=A1e(this._location.path);if(e===null)return null;const r=new ti(this._location.bucket,e);return new Nc(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw n1e(e)}}function V1e(t,e,r){t._throwIfRoot("uploadBytes");const n=L1e(t.storage,t._location,YH(),new na(e,!0),r);return t.storage.makeRequestWithTokens(n,t7).then(i=>({metadata:i,ref:t}))}function W1e(t){t._throwIfRoot("getDownloadURL");const e=D1e(t.storage,t._location,YH());return t.storage.makeRequestWithTokens(e,t7).then(r=>{if(r===null)throw t1e();return r})}function z1e(t,e){const r=C1e(t._location.path,e),n=new ti(t._location.bucket,r);return new Nc(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1e(t){return/^[A-Za-z]+:\/\//.test(t)}function q1e(t,e){return new Nc(t,e)}function r7(t,e){if(t instanceof hR){const r=t;if(r._bucket==null)throw Zwe();const n=new Nc(r,r._bucket);return e!=null?r7(n,e):n}else return e!==void 0?z1e(t,e):t}function H1e(t,e){if(e&&G1e(e)){if(t instanceof hR)return q1e(t,e);throw wT("To use ref(service, url), the first argument must be a Storage instance.")}else return r7(t,e)}function VL(t,e){const r=e==null?void 0:e[VH];return r==null?null:ti.makeFromBucketSpec(r,t)}function K1e(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:ck(i,t.app.options.projectId))}class hR{constructor(e,r,n,i,o){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=UH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vwe,this._maxUploadRetryTime=Wwe,this._requests=new Set,i!=null?this._bucket=ti.makeFromBucketSpec(i,this._host):this._bucket=VL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=VL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nc(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new i1e(WH());{const s=m1e(e,this._appId,n,i,r,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const WL="@firebase/storage",zL="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7="storage";function Q1e(t,e,r){return t=Xr(t),V1e(t,e,r)}function Y1e(t){return t=Xr(t),W1e(t)}function X1e(t,e){return t=Xr(t),H1e(t,e)}function J1e(t=pk(),e){t=Xr(t);const n=dk(t,n7).getImmediate({identifier:e}),i=lk("storage");return i&&Z1e(n,...i),n}function Z1e(t,e,r,n={}){K1e(t,e,r,n)}function eSe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new hR(r,n,i,e,hk)}function tSe(){Vf(new Sc(n7,eSe,"PUBLIC").setMultipleInstances(!0)),Bo(WL,zL,""),Bo(WL,zL,"esm2017")}tSe();const rSe=J1e(hO),GL=(t,e)=>{const r=e??`images/uploads/ungroup/image_${fs()}`,n=X1e(rSe,r);return Q1e(n,t).then(async i=>({url:await Y1e(i.ref)}))},qL={title:"",name:"新的玩家",color:"#FF0000",proPicUrl:""};function i7({defaultValue:t,onSubmit:e}){const{reset:r,setValue:n,control:i,handleSubmit:o}=qd({defaultValues:qL}),[{loading:s},a]=Kw(e,[e]),l=E.useMemo(()=>o(m=>{a(m)}),[a,o]),c=Ka({control:i}),u=E.useCallback(m=>GL(m).then(({url:y})=>{n("proPicUrl",y)}),[n]),d=E.useCallback(()=>{n("proPicUrl",null)},[n]),h=E.useCallback(m=>GL(m).then(({url:y})=>{n("teamPicUrl",y)}),[n]),p=E.useCallback(()=>{n("teamPicUrl",null)},[n]);return E.useEffect(()=>{r(t??qL)},[t,r]),f.jsxs("form",{onSubmit:l,className:"space-y-6",children:[f.jsxs("div",{className:"flex gap-x-6",children:[f.jsx("div",{className:"shrink-0",children:f.jsx(wn,{label:"顏色",children:f.jsx($n,{name:"color",control:i,render:({field:m})=>f.jsx(BH,{...m}),disabled:s})})}),f.jsxs("div",{className:"flex-1 space-y-6",children:[f.jsx(wn,{label:"稱號",children:f.jsx($n,{name:"title",control:i,render:({field:m})=>f.jsx(ba,{type:"text",...m,placeholder:"例：天鳳鳳位、雀魂x段",disabled:s})})}),f.jsx(wn,{className:"mb-6",label:"名字",children:f.jsx($n,{name:"name",control:i,rules:{required:!0},render:({field:m})=>f.jsx(ba,{...m}),disabled:s})}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-6",children:[f.jsx(wn,{className:"mb-6",label:"玩家圖片",action:c.proPicUrl&&f.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:d,children:"移除"}),children:f.jsx(LL,{helperText:"建議大小 360px * 500px (18:25)",onChangeFile:u,children:c.proPicUrl&&f.jsx("img",{className:"aspect-[18/25]",src:c.proPicUrl})})}),f.jsx(wn,{className:"mb-6",label:"隊伍圖片",action:c.teamPicUrl&&f.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:p,children:"移除"}),children:f.jsx(LL,{helperText:"建議大小 500px * 500px (1:1)",onChangeFile:h,children:c.teamPicUrl&&f.jsx("img",{className:"aspect-square",src:c.teamPicUrl})})})]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"mb-2",children:"預覽"}),f.jsx("div",{className:"text-[4rem] p-4 bg-gray-800 text-white",children:f.jsx(Ha,{player:c,score:25e3,waitingTiles:["5m","6m","7m"],isRiichi:!0,isEast:!0})})]}),f.jsx("div",{children:f.jsx(Re,{type:"submit",loading:s,children:"儲存"})})]})}var nSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe,pR=pR||{},Se=nSe||self;function E1(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ng(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function iSe(t){return Object.prototype.hasOwnProperty.call(t,wA)&&t[wA]||(t[wA]=++oSe)}var wA="closure_uid_"+(1e9*Math.random()>>>0),oSe=0;function sSe(t,e,r){return t.call.apply(t.bind,arguments)}function aSe(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function fn(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?fn=sSe:fn=aSe,fn.apply(null,arguments)}function Gv(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function $r(t,e){function r(){}r.prototype=e.prototype,t.$=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.ac=function(n,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(n,s)}}function ol(){this.s=this.s,this.o=this.o}var lSe=0;ol.prototype.s=!1;ol.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),lSe!=0)&&iSe(this)};ol.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const o7=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function mR(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function HL(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(E1(n)){const i=t.length||0,o=n.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=n[s]}else t.push(n)}}function dn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var cSe=function(){if(!Se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const r=()=>{};Se.addEventListener("test",r,e),Se.removeEventListener("test",r,e)}catch{}return t}();function Bm(t){return/^[\s\xa0]*$/.test(t)}function A1(){var t=Se.navigator;return t&&(t=t.userAgent)?t:""}function Po(t){return A1().indexOf(t)!=-1}function yR(t){return yR[" "](t),t}yR[" "]=function(){};function uSe(t,e){var r=rEe;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}var fSe=Po("Opera"),ld=Po("Trident")||Po("MSIE"),s7=Po("Edge"),ST=s7||ld,a7=Po("Gecko")&&!(A1().toLowerCase().indexOf("webkit")!=-1&&!Po("Edge"))&&!(Po("Trident")||Po("MSIE"))&&!Po("Edge"),dSe=A1().toLowerCase().indexOf("webkit")!=-1&&!Po("Edge");function l7(){var t=Se.document;return t?t.documentMode:void 0}var ET;e:{var SA="",EA=function(){var t=A1();if(a7)return/rv:([^\);]+)(\)|;)/.exec(t);if(s7)return/Edge\/([\d\.]+)/.exec(t);if(ld)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(dSe)return/WebKit\/(\S+)/.exec(t);if(fSe)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(EA&&(SA=EA?EA[1]:""),ld){var AA=l7();if(AA!=null&&AA>parseFloat(SA)){ET=String(AA);break e}}ET=SA}var AT;if(Se.document&&ld){var KL=l7();AT=KL||parseInt(ET,10)||void 0}else AT=void 0;var hSe=AT;function Um(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(a7){e:{try{yR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pSe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Um.$.h.call(this)}}$r(Um,dn);var pSe={2:"touch",3:"pen",4:"mouse"};Um.prototype.h=function(){Um.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var kg="closure_listenable_"+(1e6*Math.random()|0),mSe=0;function ySe(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.la=i,this.key=++mSe,this.fa=this.ia=!1}function C1(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function gR(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function gSe(t,e){for(const r in t)e.call(void 0,t[r],r,t)}function c7(t){const e={};for(const r in t)e[r]=t[r];return e}const QL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function u7(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let o=0;o<QL.length;o++)r=QL[o],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function P1(t){this.src=t,this.g={},this.h=0}P1.prototype.add=function(t,e,r,n,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=PT(t,e,n,i);return-1<s?(e=t[s],r||(e.ia=!1)):(e=new ySe(e,this.src,o,!!n,i),e.ia=r,t.push(e)),e};function CT(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=o7(n,e),o;(o=0<=i)&&Array.prototype.splice.call(n,i,1),o&&(C1(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function PT(t,e,r,n){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!r&&o.la==n)return i}return-1}var vR="closure_lm_"+(1e6*Math.random()|0),CA={};function f7(t,e,r,n,i){if(n&&n.once)return h7(t,e,r,n,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)f7(t,e[o],r,n,i);return null}return r=_R(r),t&&t[kg]?t.O(e,r,Ng(n)?!!n.capture:!!n,i):d7(t,e,r,!1,n,i)}function d7(t,e,r,n,i,o){if(!e)throw Error("Invalid event type");var s=Ng(i)?!!i.capture:!!i,a=xR(t);if(a||(t[vR]=a=new P1(t)),r=a.add(e,r,n,s,o),r.proxy)return r;if(n=vSe(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)cSe||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(m7(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function vSe(){function t(r){return e.call(t.src,t.listener,r)}const e=bSe;return t}function h7(t,e,r,n,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)h7(t,e[o],r,n,i);return null}return r=_R(r),t&&t[kg]?t.P(e,r,Ng(n)?!!n.capture:!!n,i):d7(t,e,r,!0,n,i)}function p7(t,e,r,n,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)p7(t,e[o],r,n,i);else n=Ng(n)?!!n.capture:!!n,r=_R(r),t&&t[kg]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],r=PT(o,r,n,i),-1<r&&(C1(o[r]),Array.prototype.splice.call(o,r,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=xR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=PT(e,r,n,i)),(r=-1<t?e[t]:null)&&bR(r))}function bR(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[kg])CT(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(m7(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=xR(e))?(CT(r,t),r.h==0&&(r.src=null,e[vR]=null)):C1(t)}}}function m7(t){return t in CA?CA[t]:CA[t]="on"+t}function bSe(t,e){if(t.fa)t=!0;else{e=new Um(e,this);var r=t.listener,n=t.la||t.src;t.ia&&bR(t),t=r.call(n,e)}return t}function xR(t){return t=t[vR],t instanceof P1?t:null}var PA="__closure_events_fn_"+(1e9*Math.random()>>>0);function _R(t){return typeof t=="function"?t:(t[PA]||(t[PA]=function(e){return t.handleEvent(e)}),t[PA])}function Rr(){ol.call(this),this.i=new P1(this),this.S=this,this.J=null}$r(Rr,ol);Rr.prototype[kg]=!0;Rr.prototype.removeEventListener=function(t,e,r,n){p7(this,t,e,r,n)};function Kr(t,e){var r,n=t.J;if(n)for(r=[];n;n=n.J)r.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new dn(e,t);else if(e instanceof dn)e.target=e.target||t;else{var i=e;e=new dn(n,t),u7(e,i)}if(i=!0,r)for(var o=r.length-1;0<=o;o--){var s=e.g=r[o];i=qv(s,n,!0,e)&&i}if(s=e.g=t,i=qv(s,n,!0,e)&&i,i=qv(s,n,!1,e)&&i,r)for(o=0;o<r.length;o++)s=e.g=r[o],i=qv(s,n,!1,e)&&i}Rr.prototype.N=function(){if(Rr.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)C1(r[n]);delete t.g[e],t.h--}}this.J=null};Rr.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};Rr.prototype.P=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function qv(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==r){var a=s.listener,l=s.la||s.src;s.ia&&CT(t.i,s),i=a.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var wR=Se.JSON.stringify;class xSe{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function _Se(){var t=SR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class wSe{constructor(){this.h=this.g=null}add(e,r){const n=y7.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var y7=new xSe(()=>new SSe,t=>t.reset());class SSe{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function ESe(t){var e=1;t=t.split(":");const r=[];for(;0<e&&t.length;)r.push(t.shift()),e--;return t.length&&r.push(t.join(":")),r}function ASe(t){Se.setTimeout(()=>{throw t},0)}let Vm,Wm=!1,SR=new wSe,g7=()=>{const t=Se.Promise.resolve(void 0);Vm=()=>{t.then(CSe)}};var CSe=()=>{for(var t;t=_Se();){try{t.h.call(t.g)}catch(r){ASe(r)}var e=y7;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wm=!1};function T1(t,e){Rr.call(this),this.h=t||1,this.g=e||Se,this.j=fn(this.qb,this),this.l=Date.now()}$r(T1,Rr);oe=T1.prototype;oe.ga=!1;oe.T=null;oe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Kr(this,"tick"),this.ga&&(ER(this),this.start()))}};oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ER(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}oe.N=function(){T1.$.N.call(this),ER(this),delete this.g};function AR(t,e,r){if(typeof t=="function")r&&(t=fn(t,r));else if(t&&typeof t.handleEvent=="function")t=fn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Se.setTimeout(t,e||0)}function v7(t){t.g=AR(()=>{t.g=null,t.i&&(t.i=!1,v7(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class PSe extends ol{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:v7(this)}N(){super.N(),this.g&&(Se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zm(t){ol.call(this),this.h=t,this.g={}}$r(zm,ol);var YL=[];function b7(t,e,r,n){Array.isArray(r)||(r&&(YL[0]=r.toString()),r=YL);for(var i=0;i<r.length;i++){var o=f7(e,r[i],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function x7(t){gR(t.g,function(e,r){this.g.hasOwnProperty(r)&&bR(e)},t),t.g={}}zm.prototype.N=function(){zm.$.N.call(this),x7(this)};zm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function I1(){this.g=!0}I1.prototype.Ea=function(){this.g=!1};function TSe(t,e,r,n,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+c+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function ISe(t,e,r,n,i,o,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+o+" "+s})}function Uu(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kSe(t,r)+(n?" "+n:"")})}function NSe(t,e){t.info(function(){return"TIMEOUT: "+e})}I1.prototype.info=function(){};function kSe(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return wR(r)}catch{return e}}var Vc={},XL=null;function N1(){return XL=XL||new Rr}Vc.Ta="serverreachability";function _7(t){dn.call(this,Vc.Ta,t)}$r(_7,dn);function Gm(t){const e=N1();Kr(e,new _7(e))}Vc.STAT_EVENT="statevent";function w7(t,e){dn.call(this,Vc.STAT_EVENT,t),this.stat=e}$r(w7,dn);function En(t){const e=N1();Kr(e,new w7(e,t))}Vc.Ua="timingevent";function S7(t,e){dn.call(this,Vc.Ua,t),this.size=e}$r(S7,dn);function Og(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Se.setTimeout(function(){t()},e)}var k1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},E7={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function CR(){}CR.prototype.h=null;function JL(t){return t.h||(t.h=t.i())}function A7(){}var Rg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function PR(){dn.call(this,"d")}$r(PR,dn);function TR(){dn.call(this,"c")}$r(TR,dn);var TT;function O1(){}$r(O1,CR);O1.prototype.g=function(){return new XMLHttpRequest};O1.prototype.i=function(){return{}};TT=new O1;function jg(t,e,r,n){this.l=t,this.j=e,this.m=r,this.W=n||1,this.U=new zm(this),this.P=OSe,t=ST?125:void 0,this.V=new T1(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new C7}function C7(){this.i=null,this.g="",this.h=!1}var OSe=45e3,P7={},IT={};oe=jg.prototype;oe.setTimeout=function(t){this.P=t};function NT(t,e,r){t.L=1,t.A=j1(Ps(e)),t.u=r,t.S=!0,T7(t,null)}function T7(t,e){t.G=Date.now(),$g(t),t.B=Ps(t.A);var r=t.B,n=t.W;Array.isArray(n)||(n=[String(n)]),D7(r.i,"t",n),t.o=0,r=t.l.J,t.h=new C7,t.g=nK(t.l,r?e:null,!t.u),0<t.O&&(t.M=new PSe(fn(t.Pa,t,t.g),t.O)),b7(t.U,t.g,"readystatechange",t.nb),e=t.I?c7(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Gm(),TSe(t.j,t.v,t.B,t.m,t.W,t.u)}oe.nb=function(t){t=t.target;const e=this.M;e&&$o(t)==3?e.l():this.Pa(t)};oe.Pa=function(t){try{if(t==this.g)e:{const u=$o(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(u!=3||ST||this.g&&(this.h.h||this.g.ja()||r3(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Gm(3):Gm(2)),R1(this);var r=this.g.da();this.ca=r;t:if(I7(this)){var n=r3(this.g);t="";var i=n.length,o=$o(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fl(this),Vp(this);var s="";break t}this.h.i=new Se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==i-1});n.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=r==200,ISe(this.j,this.v,this.B,this.m,this.W,u,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bm(a)){var c=a;break t}}c=null}if(r=c)Uu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kT(this,r);else{this.i=!1,this.s=3,En(12),Fl(this),Vp(this);break e}}this.S?(N7(this,u,s),ST&&this.i&&u==3&&(b7(this.U,this.V,"tick",this.mb),this.V.start())):(Uu(this.j,this.m,s,null),kT(this,s)),u==4&&Fl(this),this.i&&!this.J&&(u==4?Z7(this.l,this):(this.i=!1,$g(this)))}else ZSe(this.g),r==400&&0<s.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),Fl(this),Vp(this)}}}catch{}finally{}};function I7(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function N7(t,e,r){let n=!0,i;for(;!t.J&&t.o<r.length;)if(i=RSe(t,r),i==IT){e==4&&(t.s=4,En(14),n=!1),Uu(t.j,t.m,null,"[Incomplete Response]");break}else if(i==P7){t.s=4,En(15),Uu(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else Uu(t.j,t.m,i,null),kT(t,i);I7(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||r.length!=0||t.h.h||(t.s=1,En(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),jR(e),e.M=!0,En(11))):(Uu(t.j,t.m,r,"[Invalid Chunked Response]"),Fl(t),Vp(t))}oe.mb=function(){if(this.g){var t=$o(this.g),e=this.g.ja();this.o<e.length&&(R1(this),N7(this,t,e),this.i&&t!=4&&$g(this))}};function RSe(t,e){var r=t.o,n=e.indexOf(`
`,r);return n==-1?IT:(r=Number(e.substring(r,n)),isNaN(r)?P7:(n+=1,n+r>e.length?IT:(e=e.slice(n,n+r),t.o=n+r,e)))}oe.cancel=function(){this.J=!0,Fl(this)};function $g(t){t.Y=Date.now()+t.P,k7(t,t.P)}function k7(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Og(fn(t.lb,t),e)}function R1(t){t.C&&(Se.clearTimeout(t.C),t.C=null)}oe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(NSe(this.j,this.B),this.L!=2&&(Gm(),En(17)),Fl(this),this.s=2,Vp(this)):k7(this,this.Y-t)};function Vp(t){t.l.H==0||t.J||Z7(t.l,t)}function Fl(t){R1(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ER(t.V),x7(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function kT(t,e){try{var r=t.l;if(r.H!=0&&(r.g==t||OT(r.i,t))){if(!t.K&&OT(r.i,t)&&r.H==3){try{var n=r.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<t.G)Jx(r),F1(r);else break e;RR(r),En(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=Og(fn(r.ib,r),6e3));if(1>=L7(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Ll(r,11)}else if((t.K||r.g==t)&&Jx(r),!Bm(e))for(i=r.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(r.V=c[0],c=c[1],r.H==2)if(c[0]=="c"){r.K=c[1],r.pa=c[2];const u=c[3];u!=null&&(r.ra=u,r.l.info("VER="+r.ra));const d=c[4];d!=null&&(r.Ga=d,r.l.info("SVER="+r.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const p=t.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=n.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(IR(o,o.h),o.h=null))}if(n.F){const y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(n.Da=y,Nt(n.I,n.F,y))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-t.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var s=t;if(n.wa=rK(n,n.J?n.pa:null,n.Y),s.K){B7(n.i,s);var a=s,l=n.L;l&&a.setTimeout(l),a.C&&(R1(a),$g(a)),n.g=s}else X7(n);0<r.j.length&&L1(r)}else c[0]!="stop"&&c[0]!="close"||Ll(r,7);else r.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ll(r,7):OR(r):c[0]!="noop"&&r.h&&r.h.Aa(c),r.A=0)}}Gm(4)}catch{}}function jSe(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(E1(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function $Se(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(E1(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function O7(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(E1(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=$Se(t),n=jSe(t),i=n.length,o=0;o<i;o++)e.call(void 0,n[o],r&&r[o],t)}var R7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DSe(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var o=t[r].substring(0,n);i=t[r].substring(n+1)}else o=t[r];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function pc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof pc){this.h=t.h,Yx(this,t.j),this.s=t.s,this.g=t.g,Xx(this,t.m),this.l=t.l;var e=t.i,r=new qm;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),ZL(this,r),this.o=t.o}else t&&(e=String(t).match(R7))?(this.h=!1,Yx(this,e[1]||"",!0),this.s=fp(e[2]||""),this.g=fp(e[3]||"",!0),Xx(this,e[4]),this.l=fp(e[5]||"",!0),ZL(this,e[6]||"",!0),this.o=fp(e[7]||"")):(this.h=!1,this.i=new qm(null,this.h))}pc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(dp(e,e3,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(dp(e,e3,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(dp(r,r.charAt(0)=="/"?LSe:FSe,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",dp(r,USe)),t.join("")};function Ps(t){return new pc(t)}function Yx(t,e,r){t.j=r?fp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Xx(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ZL(t,e,r){e instanceof qm?(t.i=e,VSe(t.i,t.h)):(r||(e=dp(e,BSe)),t.i=new qm(e,t.h))}function Nt(t,e,r){t.i.set(e,r)}function j1(t){return Nt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function fp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dp(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,MSe),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function MSe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var e3=/[#\/\?@]/g,FSe=/[#\?:]/g,LSe=/[#\?]/g,BSe=/[#\?@]/g,USe=/#/g;function qm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sl(t){t.g||(t.g=new Map,t.h=0,t.i&&DSe(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}oe=qm.prototype;oe.add=function(t,e){sl(this),this.i=null,t=Yd(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function j7(t,e){sl(t),e=Yd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $7(t,e){return sl(t),e=Yd(t,e),t.g.has(e)}oe.forEach=function(t,e){sl(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};oe.ta=function(){sl(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let o=0;o<i.length;o++)r.push(e[n])}return r};oe.Z=function(t){sl(this);let e=[];if(typeof t=="string")$7(this,t)&&(e=e.concat(this.g.get(Yd(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};oe.set=function(t,e){return sl(this),this.i=null,t=Yd(this,t),$7(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};oe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function D7(t,e,r){j7(t,e),0<r.length&&(t.i=null,t.g.set(Yd(t,e),mR(r)),t.h+=r.length)}oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var i=o;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function Yd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function VSe(t,e){e&&!t.j&&(sl(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(j7(this,n),D7(this,i,r))},t)),t.j=e}var WSe=class{constructor(t,e){this.g=t,this.map=e}};function M7(t){this.l=t||zSe,Se.PerformanceNavigationTiming?(t=Se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Se.g&&Se.g.Ka&&Se.g.Ka()&&Se.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zSe=10;function F7(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function L7(t){return t.h?1:t.g?t.g.size:0}function OT(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function IR(t,e){t.g?t.g.add(e):t.h=e}function B7(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}M7.prototype.cancel=function(){if(this.i=U7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function U7(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.F);return e}return mR(t.i)}var GSe=class{stringify(t){return Se.JSON.stringify(t,void 0)}parse(t){return Se.JSON.parse(t,void 0)}};function qSe(){this.g=new GSe}function HSe(t,e,r){const n=r||"";try{O7(t,function(i,o){let s=i;Ng(i)&&(s=wR(i)),e.push(n+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function KSe(t,e){const r=new I1;if(Se.Image){const n=new Image;n.onload=Gv(Hv,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Gv(Hv,r,n,"TestLoadImage: error",!1,e),n.onabort=Gv(Hv,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Gv(Hv,r,n,"TestLoadImage: timeout",!1,e),Se.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Hv(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function $1(t){this.l=t.ec||null,this.j=t.ob||!1}$r($1,CR);$1.prototype.g=function(){return new D1(this.l,this.j)};$1.prototype.i=function(t){return function(){return t}}({});function D1(t,e){Rr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=NR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$r(D1,Rr);var NR=0;oe=D1.prototype;oe.open=function(t,e){if(this.readyState!=NR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Hm(this)};oe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dg(this)),this.readyState=NR};oe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Hm(this)),this.g&&(this.readyState=3,Hm(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;V7(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function V7(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}oe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Dg(this):Hm(this),this.readyState==3&&V7(this)}};oe.Za=function(t){this.g&&(this.response=this.responseText=t,Dg(this))};oe.Ya=function(t){this.g&&(this.response=t,Dg(this))};oe.ka=function(){this.g&&Dg(this)};function Dg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Hm(t)}oe.setRequestHeader=function(t,e){this.v.append(t,e)};oe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};oe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function Hm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(D1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var QSe=Se.JSON.parse;function Qt(t){Rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=W7,this.L=this.M=!1}$r(Qt,Rr);var W7="",YSe=/^https?$/i,XSe=["POST","PUT"];oe=Qt.prototype;oe.Oa=function(t){this.M=t};oe.ha=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():TT.g(),this.C=this.u?JL(this.u):JL(TT),this.g.onreadystatechange=fn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){t3(this,o);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const o of n.keys())r.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(o=>o.toLowerCase()=="content-type"),i=Se.FormData&&t instanceof Se.FormData,!(0<=o7(XSe,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of r)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{q7(this),0<this.B&&((this.L=JSe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fn(this.ua,this)):this.A=AR(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){t3(this,o)}};function JSe(t){return ld&&typeof t.timeout=="number"&&t.ontimeout!==void 0}oe.ua=function(){typeof pR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))};function t3(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,z7(t),M1(t)}function z7(t){t.F||(t.F=!0,Kr(t,"complete"),Kr(t,"error"))}oe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Kr(this,"complete"),Kr(this,"abort"),M1(this))};oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),M1(this,!0)),Qt.$.N.call(this)};oe.La=function(){this.s||(this.G||this.v||this.l?G7(this):this.kb())};oe.kb=function(){G7(this)};function G7(t){if(t.h&&typeof pR<"u"&&(!t.C[1]||$o(t)!=4||t.da()!=2)){if(t.v&&$o(t)==4)AR(t.La,0,t);else if(Kr(t,"readystatechange"),$o(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=s===0){var i=String(t.I).match(R7)[1]||null;!i&&Se.self&&Se.self.location&&(i=Se.self.location.protocol.slice(0,-1)),n=!YSe.test(i?i.toLowerCase():"")}r=n}if(r)Kr(t,"complete"),Kr(t,"success");else{t.m=6;try{var o=2<$o(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",z7(t)}}finally{M1(t)}}}}function M1(t,e){if(t.g){q7(t);const r=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Kr(t,"ready");try{r.onreadystatechange=n}catch{}}}function q7(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Se.clearTimeout(t.A),t.A=null)}oe.isActive=function(){return!!this.g};function $o(t){return t.g?t.g.readyState:0}oe.da=function(){try{return 2<$o(this)?this.g.status:-1}catch{return-1}};oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};oe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),QSe(e)}};function r3(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case W7:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ZSe(t){const e={};t=(t.g&&2<=$o(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(Bm(t[n]))continue;var r=ESe(t[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const o=e[i]||[];e[i]=o,o.push(r)}gSe(e,function(n){return n.join(", ")})}oe.Ia=function(){return this.m};oe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function H7(t){let e="";return gR(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function kR(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=H7(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):Nt(t,e,r))}function Dh(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function K7(t){this.Ga=0,this.j=[],this.l=new I1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dh("baseRetryDelayMs",5e3,t),this.hb=Dh("retryDelaySeedMs",1e4,t),this.eb=Dh("forwardChannelMaxRetries",2,t),this.xa=Dh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new M7(t&&t.concurrentRequestLimit),this.Ja=new qSe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}oe=K7.prototype;oe.ra=8;oe.H=1;function OR(t){if(Q7(t),t.H==3){var e=t.W++,r=Ps(t.I);if(Nt(r,"SID",t.K),Nt(r,"RID",e),Nt(r,"TYPE","terminate"),Mg(t,r),e=new jg(t,t.l,e),e.L=2,e.A=j1(Ps(r)),r=!1,Se.navigator&&Se.navigator.sendBeacon)try{r=Se.navigator.sendBeacon(e.A.toString(),"")}catch{}!r&&Se.Image&&(new Image().src=e.A,r=!0),r||(e.g=nK(e.l,null),e.g.ha(e.A)),e.G=Date.now(),$g(e)}tK(t)}function F1(t){t.g&&(jR(t),t.g.cancel(),t.g=null)}function Q7(t){F1(t),t.u&&(Se.clearTimeout(t.u),t.u=null),Jx(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Se.clearTimeout(t.m),t.m=null)}function L1(t){if(!F7(t.i)&&!t.m){t.m=!0;var e=t.Na;Vm||g7(),Wm||(Vm(),Wm=!0),SR.add(e,t),t.C=0}}function eEe(t,e){return L7(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Og(fn(t.Na,t,e),eK(t,t.C)),t.C++,!0)}oe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new jg(this,this.l,t);let o=this.s;if(this.U&&(o?(o=c7(o),u7(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Y7(this,i,e),r=Ps(this.I),Nt(r,"RID",t),Nt(r,"CVER",22),this.F&&Nt(r,"X-HTTP-Session-Id",this.F),Mg(this,r),o&&(this.O?e="headers="+encodeURIComponent(String(H7(o)))+"&"+e:this.o&&kR(r,this.o,o)),IR(this.i,i),this.bb&&Nt(r,"TYPE","init"),this.P?(Nt(r,"$req",e),Nt(r,"SID","null"),i.aa=!0,NT(i,r,null)):NT(i,r,e),this.H=2}}else this.H==3&&(t?n3(this,t):this.j.length==0||F7(this.i)||n3(this))};function n3(t,e){var r;e?r=e.m:r=t.W++;const n=Ps(t.I);Nt(n,"SID",t.K),Nt(n,"RID",r),Nt(n,"AID",t.V),Mg(t,n),t.o&&t.s&&kR(n,t.o,t.s),r=new jg(t,t.l,r,t.C+1),t.o===null&&(r.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Y7(t,r,1e3),r.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),IR(t.i,r),NT(r,n,e)}function Mg(t,e){t.na&&gR(t.na,function(r,n){Nt(e,n,r)}),t.h&&O7({},function(r,n){Nt(e,n,r)})}function Y7(t,e,r){r=Math.min(t.j.length,r);var n=t.h?fn(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+r];o==-1?0<r?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<r;l++){let c=i[l].g;const u=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{HSe(u,s,"req"+c+"_")}catch{n&&n(u)}}if(a){n=s.join("&");break e}}}return t=t.j.splice(0,r),e.F=t,n}function X7(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vm||g7(),Wm||(Vm(),Wm=!0),SR.add(e,t),t.A=0}}function RR(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Og(fn(t.Ma,t),eK(t,t.A)),t.A++,!0)}oe.Ma=function(){if(this.u=null,J7(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Og(fn(this.jb,this),t)}};oe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,En(10),F1(this),J7(this))};function jR(t){t.B!=null&&(Se.clearTimeout(t.B),t.B=null)}function J7(t){t.g=new jg(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ps(t.wa);Nt(e,"RID","rpc"),Nt(e,"SID",t.K),Nt(e,"AID",t.V),Nt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Nt(e,"TO",t.qa),Nt(e,"TYPE","xmlhttp"),Mg(t,e),t.o&&t.s&&kR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var r=t.g;t=t.pa,r.L=1,r.A=j1(Ps(e)),r.u=null,r.S=!0,T7(r,t)}oe.ib=function(){this.v!=null&&(this.v=null,F1(this),RR(this),En(19))};function Jx(t){t.v!=null&&(Se.clearTimeout(t.v),t.v=null)}function Z7(t,e){var r=null;if(t.g==e){Jx(t),jR(t),t.g=null;var n=2}else if(OT(t.i,e))r=e.F,B7(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){r=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;n=N1(),Kr(n,new S7(n,r)),L1(t)}else X7(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(n==1&&eEe(t,e)||n==2&&RR(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:Ll(t,5);break;case 4:Ll(t,10);break;case 3:Ll(t,6);break;default:Ll(t,2)}}}function eK(t,e){let r=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(r*=2),r*e}function Ll(t,e){if(t.l.info("Error code "+e),e==2){var r=null;t.h&&(r=null);var n=fn(t.pb,t);r||(r=new pc("//www.google.com/images/cleardot.gif"),Se.location&&Se.location.protocol=="http"||Yx(r,"https"),j1(r)),KSe(r.toString(),n)}else En(2);t.H=0,t.h&&t.h.za(e),tK(t),Q7(t)}oe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),En(2)):(this.l.info("Failed to ping google.com"),En(1))};function tK(t){if(t.H=0,t.ma=[],t.h){const e=U7(t.i);(e.length!=0||t.j.length!=0)&&(HL(t.ma,e),HL(t.ma,t.j),t.i.i.length=0,mR(t.j),t.j.length=0),t.h.ya()}}function rK(t,e,r){var n=r instanceof pc?Ps(r):new pc(r);if(n.g!="")e&&(n.g=e+"."+n.g),Xx(n,n.m);else{var i=Se.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new pc(null);n&&Yx(o,n),e&&(o.g=e),i&&Xx(o,i),r&&(o.l=r),n=o}return r=t.F,e=t.Da,r&&e&&Nt(n,r,e),Nt(n,"VER",t.ra),Mg(t,n),n}function nK(t,e,r){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Qt(new $1({ob:r})):new Qt(t.va),e.Oa(t.J),e}oe.isActive=function(){return!!this.h&&this.h.isActive(this)};function iK(){}oe=iK.prototype;oe.Ba=function(){};oe.Aa=function(){};oe.za=function(){};oe.ya=function(){};oe.isActive=function(){return!0};oe.Va=function(){};function Zx(){if(ld&&!(10<=Number(hSe)))throw Error("Environmental error: no available transport.")}Zx.prototype.g=function(t,e){return new si(t,e)};function si(t,e){Rr.call(this),this.g=new K7(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Bm(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bm(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Xd(this)}$r(si,Rr);si.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,r=this.h||void 0;En(0),t.Y=e,t.na=r||{},t.G=t.aa,t.I=rK(t,null,t.Y),L1(t)};si.prototype.close=function(){OR(this.g)};si.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=wR(t),t=r);e.j.push(new WSe(e.fb++,t)),e.H==3&&L1(e)};si.prototype.N=function(){this.g.h=null,delete this.j,OR(this.g),delete this.g,si.$.N.call(this)};function oK(t){PR.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$r(oK,PR);function sK(){TR.call(this),this.status=1}$r(sK,TR);function Xd(t){this.g=t}$r(Xd,iK);Xd.prototype.Ba=function(){Kr(this.g,"a")};Xd.prototype.Aa=function(t){Kr(this.g,new oK(t))};Xd.prototype.za=function(t){Kr(this.g,new sK)};Xd.prototype.ya=function(){Kr(this.g,"b")};function tEe(){this.blockSize=-1}function ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}$r(ho,tEe);ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function TA(t,e,r){r||(r=0);var n=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)n[i]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;e=t.g[0],r=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^r&(i^o))+n[0]+3614090360&4294967295;e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[3]+3250441966&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[4]+4118548399&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[7]+4249261313&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[8]+1770035416&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[11]+2304563134&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[12]+1804603682&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[15]+1236535329&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(r^i))+n[1]+4129170786&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[0]+3921069994&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[5]+3593408605&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[4]+3889429448&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[9]+568446438&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[8]+1163531501&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[13]+2850285829&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[12]+2368359562&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(r^i^o)+n[5]+4294588738&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[14]+4259657740&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[1]+2763975236&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[10]+3200236656&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[13]+681279174&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[6]+76029189&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[9]+3654602809&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[2]+3299628645&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(i^(r|~o))+n[0]+4096336452&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[5]+4237533241&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[12]+1700485571&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[1]+2240044497&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[8]+1873313359&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[13]+1309151649&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[4]+4149444226&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}ho.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var r=e-this.blockSize,n=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=r;)TA(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(n[i++]=t.charCodeAt(o++),i==this.blockSize){TA(this,n),i=0;break}}else for(;o<e;)if(n[i++]=t[o++],i==this.blockSize){TA(this,n),i=0;break}}this.h=i,this.i+=e};ho.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var r=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=r&255,r/=256;for(this.j(t),t=Array(16),e=r=0;4>e;++e)for(var n=0;32>n;n+=8)t[r++]=this.g[e]>>>n&255;return t};function ft(t,e){this.h=e;for(var r=[],n=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;n&&o==e||(r[i]=o,n=!1)}this.g=r}var rEe={};function $R(t){return-128<=t&&128>t?uSe(t,function(e){return new ft([e|0],0>e?-1:0)}):new ft([t|0],0>t?-1:0)}function Do(t){if(isNaN(t)||!isFinite(t))return df;if(0>t)return Wr(Do(-t));for(var e=[],r=1,n=0;t>=r;n++)e[n]=t/r|0,r*=RT;return new ft(e,0)}function aK(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Wr(aK(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Do(Math.pow(e,8)),n=df,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Do(Math.pow(e,o)),n=n.R(o).add(Do(s))):(n=n.R(r),n=n.add(Do(s)))}return n}var RT=4294967296,df=$R(0),jT=$R(1),i3=$R(16777216);oe=ft.prototype;oe.ea=function(){if(Ei(this))return-Wr(this).ea();for(var t=0,e=1,r=0;r<this.g.length;r++){var n=this.D(r);t+=(0<=n?n:RT+n)*e,e*=RT}return t};oe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(hs(this))return"0";if(Ei(this))return"-"+Wr(this).toString(t);for(var e=Do(Math.pow(t,6)),r=this,n="";;){var i=t_(r,e).g;r=e_(r,i.R(e));var o=((0<r.g.length?r.g[0]:r.h)>>>0).toString(t);if(r=i,hs(r))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};oe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function hs(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ei(t){return t.h==-1}oe.X=function(t){return t=e_(this,t),Ei(t)?-1:hs(t)?0:1};function Wr(t){for(var e=t.g.length,r=[],n=0;n<e;n++)r[n]=~t.g[n];return new ft(r,~t.h).add(jT)}oe.abs=function(){return Ei(this)?Wr(this):this};oe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0,i=0;i<=e;i++){var o=n+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);n=s>>>16,o&=65535,s&=65535,r[i]=s<<16|o}return new ft(r,r[r.length-1]&-2147483648?-1:0)};function e_(t,e){return t.add(Wr(e))}oe.R=function(t){if(hs(this)||hs(t))return df;if(Ei(this))return Ei(t)?Wr(this).R(Wr(t)):Wr(Wr(this).R(t));if(Ei(t))return Wr(this.R(Wr(t)));if(0>this.X(i3)&&0>t.X(i3))return Do(this.ea()*t.ea());for(var e=this.g.length+t.g.length,r=[],n=0;n<2*e;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<t.g.length;i++){var o=this.D(n)>>>16,s=this.D(n)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;r[2*n+2*i]+=s*l,Kv(r,2*n+2*i),r[2*n+2*i+1]+=o*l,Kv(r,2*n+2*i+1),r[2*n+2*i+1]+=s*a,Kv(r,2*n+2*i+1),r[2*n+2*i+2]+=o*a,Kv(r,2*n+2*i+2)}for(n=0;n<e;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=e;n<2*e;n++)r[n]=0;return new ft(r,0)};function Kv(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Mh(t,e){this.g=t,this.h=e}function t_(t,e){if(hs(e))throw Error("division by zero");if(hs(t))return new Mh(df,df);if(Ei(t))return e=t_(Wr(t),e),new Mh(Wr(e.g),Wr(e.h));if(Ei(e))return e=t_(t,Wr(e)),new Mh(Wr(e.g),e.h);if(30<t.g.length){if(Ei(t)||Ei(e))throw Error("slowDivide_ only works with positive integers.");for(var r=jT,n=e;0>=n.X(t);)r=o3(r),n=o3(n);var i=ou(r,1),o=ou(n,1);for(n=ou(n,2),r=ou(r,2);!hs(n);){var s=o.add(n);0>=s.X(t)&&(i=i.add(r),o=s),n=ou(n,1),r=ou(r,1)}return e=e_(t,i.R(e)),new Mh(i,e)}for(i=df;0<=t.X(e);){for(r=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=Do(r),s=o.R(e);Ei(s)||0<s.X(t);)r-=n,o=Do(r),s=o.R(e);hs(o)&&(o=jT),i=i.add(o),t=e_(t,s)}return new Mh(i,t)}oe.gb=function(t){return t_(this,t).h};oe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)&t.D(n);return new ft(r,this.h&t.h)};oe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)|t.D(n);return new ft(r,this.h|t.h)};oe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)^t.D(n);return new ft(r,this.h^t.h)};function o3(t){for(var e=t.g.length+1,r=[],n=0;n<e;n++)r[n]=t.D(n)<<1|t.D(n-1)>>>31;return new ft(r,t.h)}function ou(t,e){var r=e>>5;e%=32;for(var n=t.g.length-r,i=[],o=0;o<n;o++)i[o]=0<e?t.D(o+r)>>>e|t.D(o+r+1)<<32-e:t.D(o+r);return new ft(i,t.h)}Zx.prototype.createWebChannel=Zx.prototype.g;si.prototype.send=si.prototype.u;si.prototype.open=si.prototype.m;si.prototype.close=si.prototype.close;k1.NO_ERROR=0;k1.TIMEOUT=8;k1.HTTP_ERROR=6;E7.COMPLETE="complete";A7.EventType=Rg;Rg.OPEN="a";Rg.CLOSE="b";Rg.ERROR="c";Rg.MESSAGE="d";Rr.prototype.listen=Rr.prototype.O;Qt.prototype.listenOnce=Qt.prototype.P;Qt.prototype.getLastError=Qt.prototype.Sa;Qt.prototype.getLastErrorCode=Qt.prototype.Ia;Qt.prototype.getStatus=Qt.prototype.da;Qt.prototype.getResponseJson=Qt.prototype.Wa;Qt.prototype.getResponseText=Qt.prototype.ja;Qt.prototype.send=Qt.prototype.ha;Qt.prototype.setWithCredentials=Qt.prototype.Oa;ho.prototype.digest=ho.prototype.l;ho.prototype.reset=ho.prototype.reset;ho.prototype.update=ho.prototype.j;ft.prototype.add=ft.prototype.add;ft.prototype.multiply=ft.prototype.R;ft.prototype.modulo=ft.prototype.gb;ft.prototype.compare=ft.prototype.X;ft.prototype.toNumber=ft.prototype.ea;ft.prototype.toString=ft.prototype.toString;ft.prototype.getBits=ft.prototype.D;ft.fromNumber=Do;ft.fromString=aK;var nEe=function(){return new Zx},iEe=function(){return N1()},IA=k1,oEe=E7,sEe=Vc,s3={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qv=A7,aEe=Qt,lEe=ho,hf=ft;const a3="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jd="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new uk("@firebase/firestore");function Fh(){return kc.logLevel}function ie(t,...e){if(kc.logLevel<=Ye.DEBUG){const r=e.map(DR);kc.debug(`Firestore (${Jd}): ${t}`,...r)}}function Ho(t,...e){if(kc.logLevel<=Ye.ERROR){const r=e.map(DR);kc.error(`Firestore (${Jd}): ${t}`,...r)}}function cd(t,...e){if(kc.logLevel<=Ye.WARN){const r=e.map(DR);kc.warn(`Firestore (${Jd}): ${t}`,...r)}}function DR(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Jd}) INTERNAL ASSERTION FAILED: `+t;throw Ho(e),new Error(e)}function At(t,e){t||we()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Mc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(an.UNAUTHENTICATED))}shutdown(){}}class uEe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class fEe{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let o=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vs,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vs)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(At(typeof n.accessToken=="string"),new lK(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string"),new an(e)}}class dEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new dEe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pEe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mEe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(At(typeof r.token=="string"),this.R=r.token,new pEe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=yEe(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function it(t,e){return t<e?-1:t>e?1:0}function ud(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new pr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new pr(0,0))}static max(){return new Ae(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,r,n){r===void 0?r=0:r>e.length&&we(),n===void 0?n=e.length-r:n>e.length-r&&we(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Km.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Km?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),s=r.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Rt extends Km{construct(e,r,n){return new Rt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new pe(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Rt(r)}static emptyPath(){return new Rt([])}}const gEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends Km{construct(e,r,n){return new zr(e,r,n)}static isValidIdentifier(e){return gEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new pe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new pe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new pe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new pe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(r)}static emptyPath(){return new zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Rt.fromString(e))}static fromName(e){return new ve(Rt.fromString(e).popFirst(5))}static empty(){return new ve(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Rt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Rt(e.slice()))}}function vEe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(n===1e9?new pr(r+1,0):new pr(r,n));return new Ya(i,ve.empty(),e)}function bEe(t){return new Ya(t.readTime,t.key,-1)}class Ya{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ya(Ae.min(),ve.empty(),-1)}static max(){return new Ya(Ae.max(),ve.empty(),-1)}}function xEe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ve.comparator(t.documentKey,e.documentKey),r!==0?r:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==_Ee)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new H((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof H?r:H.resolve(r)}catch(r){return H.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):H.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):H.reject(r)}static resolve(e){return new H((r,n)=>{r(e)})}static reject(e){return new H((r,n)=>{n(e)})}static waitFor(e){return new H((r,n)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&r()},l=>n(l))}),s=!0,o===i&&r()})}static or(e){let r=H.resolve(!1);for(const n of e)r=r.next(i=>i?H.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new H((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;r(e[c]).next(u=>{s[c]=u,++a,a===o&&n(s)},u=>i(u))}})}static doWhile(e,r){return new H((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new vs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Wp(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=FR(n.target.error);this.V.reject(new Wp(e,i))}}static open(e,r,n,i){try{return new MR(r,e.transaction(i,n))}catch(o){throw new Wp(r,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new EEe(r)}}class Bl{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Bl.S(gm())===12.2&&Ho("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),kl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vW())return!1;if(Bl.C())return!0;const e=gm(),r=Bl.S(e),n=0<r&&r<10,i=Bl.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const r=e.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(ie("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;r(s)},i.onblocked=()=>{n(new Wp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?n(new pe(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new pe(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Wp(e,s))},i.onupgradeneeded=o=>{ie("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{ie("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=r=>this.B(r)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const o=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.O(e);const a=MR.open(this.db,e,o?"readonly":"readwrite",n),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),H.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&s<3;if(ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class SEe{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return kl(this.k.delete())}}class Wp extends pe{constructor(e,r){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Lg(t){return t.name==="IndexedDbTransactionError"}class EEe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ie("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),kl(n)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),kl(this.store.add(e))}get(e){return kl(this.store.get(e)).next(r=>(r===void 0&&(r=null),ie("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),kl(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),kl(this.store.count())}W(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(n.range);return new H((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(n),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new H((i,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{i(s.target.result)}})}H(e,r){ie("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.J=!1;const i=this.cursor(n);return this.G(i,(o,s,a)=>a.delete())}Y(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.G(i,r)}Z(e){const r=this.cursor({});return new H((n,i)=>{r.onerror=o=>{const s=FR(o.target.error);i(s)},r.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():n()}):n()}})}G(e,r){const n=[];return new H((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new SEe(a),c=r(a.primaryKey,a.value,l);if(c instanceof H){const u=c.catch(d=>(l.done(),H.reject(d)));n.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>H.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function kl(t){return new H((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=FR(n.target.error);r(i)}})}let l3=!1;function FR(t){const e=Bl.S(gm());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l3||(l3=!0,setTimeout(()=>{throw n},0)),n}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.se(n),this.oe=n=>r.writeSequenceNumber(n))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}LR._e=-1;function B1(t){return t==null}function r_(t){return t===0&&1/t==-1/0}function AEe(t){return typeof t=="number"&&Number.isInteger(t)&&!r_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Zd(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function uK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r){this.comparator=e,this.root=r||Br.EMPTY}insert(e,r){return new Vt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yv(this.root,e,this.comparator,!0)}}class Yv{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Br.RED,this.left=i??Br.EMPTY,this.right=o??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new Br(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Br.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1;Br.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,r,n,i,o){return this}insert(e,r,n){return new Br(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new u3(this.data.getIterator())}getIteratorFrom(e){return new u3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Qr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Qr(this.comparator);return r.data=e,r}}class u3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new io([])}unionWith(e){let r=new Qr(zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new io(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ud(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fK("Invalid base64 string: "+o):o}}(e);return new mn(r)}static fromUint8Array(e){const r=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new mn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const CEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xa(t){if(At(!!t),typeof t=="string"){let e=0;const r=CEe.exec(t);if(At(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:rr(t.seconds),nanos:rr(t.nanos)}}function rr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oc(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function UR(t){const e=t.mapValue.fields.__previous_value__;return BR(e)?UR(e):e}function Qm(t){const e=Xa(t.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PEe{constructor(e,r,n,i,o,s,a,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ym{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ym("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ym&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?BR(t)?4:TEe(t)?9007199254740991:10:we()}function Ko(t,e){if(t===e)return!0;const r=Rc(t);if(r!==Rc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qm(t).isEqual(Qm(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Xa(i.timestampValue),a=Xa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Oc(i.bytesValue).isEqual(Oc(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return rr(i.geoPointValue.latitude)===rr(o.geoPointValue.latitude)&&rr(i.geoPointValue.longitude)===rr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return rr(i.integerValue)===rr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=rr(i.doubleValue),a=rr(o.doubleValue);return s===a?r_(s)===r_(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ud(t.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(c3(s)!==c3(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Ko(s[l],a[l])))return!1;return!0}(t,e);default:return we()}}function Xm(t,e){return(t.values||[]).find(r=>Ko(r,e))!==void 0}function fd(t,e){if(t===e)return 0;const r=Rc(t),n=Rc(e);if(r!==n)return it(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=rr(o.integerValue||o.doubleValue),l=rr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return f3(t.timestampValue,e.timestampValue);case 4:return f3(Qm(t),Qm(e));case 5:return it(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Oc(o),l=Oc(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=it(a[c],l[c]);if(u!==0)return u}return it(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=it(rr(o.latitude),rr(s.latitude));return a!==0?a:it(rr(o.longitude),rr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=fd(a[c],l[c]);if(u)return u}return it(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Xv.mapValue&&s===Xv.mapValue)return 0;if(o===Xv.mapValue)return 1;if(s===Xv.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=it(l[d],u[d]);if(h!==0)return h;const p=fd(a[l[d]],c[u[d]]);if(p!==0)return p}return it(l.length,u.length)}(t.mapValue,e.mapValue);default:throw we()}}function f3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const r=Xa(t),n=Xa(e),i=it(r.seconds,n.seconds);return i!==0?i:it(r.nanos,n.nanos)}function dd(t){return $T(t)}function $T(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Xa(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Oc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ve.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=$T(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${$T(r.fields[s])}`;return i+"}"}(t.mapValue):we()}function DT(t){return!!t&&"integerValue"in t}function VR(t){return!!t&&"arrayValue"in t}function d3(t){return!!t&&"nullValue"in t}function h3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eb(t){return!!t&&"mapValue"in t}function zp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zd(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=zp(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=zp(t.arrayValue.values[r]);return e}return Object.assign({},t)}function TEe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!eb(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=zp(r)}setAll(e){let r=zr.emptyPath(),n={},i=[];e.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=a.popLast()}s?n[a.lastSegment()]=zp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());eb(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];eb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Zd(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Ai(zp(this.value))}}function dK(t){const e=[];return Zd(t.fields,(r,n)=>{const i=new zr([r]);if(eb(n)){const o=dK(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new io(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,r,n,i,o,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Ae.min(),Ae.min(),Ae.min(),Ai.empty(),0)}static newFoundDocument(e,r,n,i){return new cn(e,1,r,Ae.min(),n,i,0)}static newNoDocument(e,r){return new cn(e,2,r,Ae.min(),Ae.min(),Ai.empty(),0)}static newUnknownDocument(e,r){return new cn(e,3,r,Ae.min(),Ae.min(),Ai.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,r){this.position=e,this.inclusive=r}}function p3(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?n=ve.comparator(ve.fromName(s.referenceValue),r.key):n=fd(s,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function m3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ko(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,r="asc"){this.field=e,this.dir=r}}function IEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{}class fr extends hK{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new kEe(e,r,n):r==="array-contains"?new jEe(e,n):r==="in"?new $Ee(e,n):r==="not-in"?new DEe(e,n):r==="array-contains-any"?new MEe(e,n):new fr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new OEe(e,n):new REe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(fd(r,this.value)):r!==null&&Rc(this.value)===Rc(r)&&this.matchesComparison(fd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qo extends hK{constructor(e,r){super(),this.filters=e,this.op=r,this.ue=null}static create(e,r){return new Qo(e,r)}matches(e){return pK(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function pK(t){return t.op==="and"}function mK(t){return NEe(t)&&pK(t)}function NEe(t){for(const e of t.filters)if(e instanceof Qo)return!1;return!0}function MT(t){if(t instanceof fr)return t.field.canonicalString()+t.op.toString()+dd(t.value);if(mK(t))return t.filters.map(e=>MT(e)).join(",");{const e=t.filters.map(r=>MT(r)).join(",");return`${t.op}(${e})`}}function yK(t,e){return t instanceof fr?function(n,i){return i instanceof fr&&n.op===i.op&&n.field.isEqual(i.field)&&Ko(n.value,i.value)}(t,e):t instanceof Qo?function(n,i){return i instanceof Qo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&yK(s,i.filters[a]),!0):!1}(t,e):void we()}function gK(t){return t instanceof fr?function(r){return`${r.field.canonicalString()} ${r.op} ${dd(r.value)}`}(t):t instanceof Qo?function(r){return r.op.toString()+" {"+r.getFilters().map(gK).join(" ,")+"}"}(t):"Filter"}class kEe extends fr{constructor(e,r,n){super(e,r,n),this.key=ve.fromName(n.referenceValue)}matches(e){const r=ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class OEe extends fr{constructor(e,r){super(e,"in",r),this.keys=vK("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class REe extends fr{constructor(e,r){super(e,"not-in",r),this.keys=vK("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function vK(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ve.fromName(n.referenceValue))}class jEe extends fr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return VR(r)&&Xm(r.arrayValue,this.value)}}class $Ee extends fr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Xm(this.value.arrayValue,r)}}class DEe extends fr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Xm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Xm(this.value.arrayValue,r)}}class MEe extends fr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!VR(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Xm(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FEe{constructor(e,r=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function y3(t,e=null,r=[],n=[],i=null,o=null,s=null){return new FEe(t,e,r,n,i,o,s)}function WR(t){const e=Ce(t);if(e.ce===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>MT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),B1(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>dd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>dd(n)).join(",")),e.ce=r}return e.ce}function zR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!IEe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!yK(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m3(t.startAt,e.startAt)&&m3(t.endAt,e.endAt)}function FT(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,r=null,n=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function LEe(t,e,r,n,i,o,s,a){return new U1(t,e,r,n,i,o,s,a)}function bK(t){return new U1(t)}function g3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BEe(t){return t.collectionGroup!==null}function Gp(t){const e=Ce(t);if(e.le===null){e.le=[];const r=new Set;for(const o of e.explicitOrderBy)e.le.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Qr(zr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.le.push(new i_(o,n))}),r.has(zr.keyField().canonicalString())||e.le.push(new i_(zr.keyField(),n))}return e.le}function Vo(t){const e=Ce(t);return e.he||(e.he=UEe(e,Gp(t))),e.he}function UEe(t,e){if(t.limitType==="F")return y3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new i_(i.field,o)});const r=t.endAt?new n_(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new n_(t.startAt.position,t.startAt.inclusive):null;return y3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function LT(t,e,r){return new U1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function V1(t,e){return zR(Vo(t),Vo(e))&&t.limitType===e.limitType}function xK(t){return`${WR(Vo(t))}|lt:${t.limitType}`}function xu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>gK(i)).join(", ")}]`),B1(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>dd(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>dd(i)).join(",")),`Target(${n})`}(Vo(t))}; limitType=${t.limitType})`}function W1(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ve.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of Gp(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,a,l){const c=p3(s,a,l);return s.inclusive?c<=0:c<0}(n.startAt,Gp(n),i)||n.endAt&&!function(s,a,l){const c=p3(s,a,l);return s.inclusive?c>=0:c>0}(n.endAt,Gp(n),i))}(t,e)}function VEe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _K(t){return(e,r)=>{let n=!1;for(const i of Gp(t)){const o=WEe(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function WEe(t,e,r){const n=t.field.isKeyField()?ve.comparator(e.key,r.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?fd(l,c):we()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zd(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return uK(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zEe=new Vt(ve.comparator);function Ts(){return zEe}const wK=new Vt(ve.comparator);function hp(...t){let e=wK;for(const r of t)e=e.insert(r.key,r);return e}function SK(t){let e=wK;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ul(){return qp()}function EK(){return qp()}function qp(){return new eh(t=>t.toString(),(t,e)=>t.isEqual(e))}const GEe=new Vt(ve.comparator),qEe=new Qr(ve.comparator);function We(...t){let e=qEe;for(const r of t)e=e.add(r);return e}const HEe=new Qr(it);function KEe(){return HEe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:r_(e)?"-0":e}}function CK(t){return{integerValue:""+t}}function QEe(t,e){return AEe(e)?CK(e):AK(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this._=void 0}}function YEe(t,e,r){return t instanceof o_?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&BR(o)&&(o=UR(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(r,e):t instanceof Jm?TK(t,e):t instanceof Zm?IK(t,e):function(i,o){const s=PK(i,o),a=v3(s)+v3(i.Ie);return DT(s)&&DT(i.Ie)?CK(a):AK(i.serializer,a)}(t,e)}function XEe(t,e,r){return t instanceof Jm?TK(t,e):t instanceof Zm?IK(t,e):r}function PK(t,e){return t instanceof s_?function(n){return DT(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class o_ extends z1{}class Jm extends z1{constructor(e){super(),this.elements=e}}function TK(t,e){const r=NK(e);for(const n of t.elements)r.some(i=>Ko(i,n))||r.push(n);return{arrayValue:{values:r}}}class Zm extends z1{constructor(e){super(),this.elements=e}}function IK(t,e){let r=NK(e);for(const n of t.elements)r=r.filter(i=>!Ko(i,n));return{arrayValue:{values:r}}}class s_ extends z1{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function v3(t){return rr(t.integerValue||t.doubleValue)}function NK(t){return VR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JEe(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Jm&&i instanceof Jm||n instanceof Zm&&i instanceof Zm?ud(n.elements,i.elements,Ko):n instanceof s_&&i instanceof s_?Ko(n.Ie,i.Ie):n instanceof o_&&i instanceof o_}(t.transform,e.transform)}class ZEe{constructor(e,r){this.version=e,this.transformResults=r}}class Wo{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wo}static exists(e){return new Wo(void 0,e)}static updateTime(e){return new Wo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class G1{}function kK(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new GR(t.key,Wo.none()):new Bg(t.key,t.data,Wo.none());{const r=t.data,n=Ai.empty();let i=new Qr(zr.comparator);for(let o of e.fields)if(!i.has(o)){let s=r.field(o);s===null&&o.length>1&&(o=o.popLast(),s=r.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Wc(t.key,n,new io(i.toArray()),Wo.none())}}function eAe(t,e,r){t instanceof Bg?function(i,o,s){const a=i.value.clone(),l=x3(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Wc?function(i,o,s){if(!tb(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=x3(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(OK(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Hp(t,e,r,n){return t instanceof Bg?function(o,s,a,l){if(!tb(o.precondition,s))return a;const c=o.value.clone(),u=_3(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Wc?function(o,s,a,l){if(!tb(o.precondition,s))return a;const c=_3(o.fieldTransforms,l,s),u=s.data;return u.setAll(OK(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(o,s,a){return tb(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function tAe(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=PK(n.transform,i||null);o!=null&&(r===null&&(r=Ai.empty()),r.set(n.field,o))}return r||null}function b3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ud(n,i,(o,s)=>JEe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bg extends G1{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wc extends G1{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OK(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function x3(t,e,r){const n=new Map;At(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,XEe(s,a,r[i]))}return n}function _3(t,e,r){const n=new Map;for(const i of t){const o=i.transform,s=r.data.field(i.field);n.set(i.field,YEe(o,s,e))}return n}class GR extends G1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rAe extends G1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nAe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&eAe(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Hp(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Hp(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=EK();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=r.has(i.key)?null:a;const l=kK(s,a);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ae.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),We())}isEqual(e){return this.batchId===e.batchId&&ud(this.mutations,e.mutations,(r,n)=>b3(r,n))&&ud(this.baseMutations,e.baseMutations,(r,n)=>b3(r,n))}}class qR{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){At(e.mutations.length===n.length);let i=function(){return GEe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new qR(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iAe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oAe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr,He;function sAe(t){switch(t){default:return we();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function RK(t){if(t===void 0)return Ho("GRPC error has no .code"),K.UNKNOWN;switch(t){case tr.OK:return K.OK;case tr.CANCELLED:return K.CANCELLED;case tr.UNKNOWN:return K.UNKNOWN;case tr.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case tr.INTERNAL:return K.INTERNAL;case tr.UNAVAILABLE:return K.UNAVAILABLE;case tr.UNAUTHENTICATED:return K.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case tr.NOT_FOUND:return K.NOT_FOUND;case tr.ALREADY_EXISTS:return K.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return K.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case tr.ABORTED:return K.ABORTED;case tr.OUT_OF_RANGE:return K.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return K.UNIMPLEMENTED;case tr.DATA_LOSS:return K.DATA_LOSS;default:return we()}}(He=tr||(tr={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aAe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lAe=new hf([4294967295,4294967295],0);function w3(t){const e=aAe().encode(t),r=new lEe;return r.update(e),new Uint8Array(r.digest())}function S3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hf([r,n],0),new hf([i,o],0)]}class HR{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new pp(`Invalid padding: ${r}`);if(n<0)throw new pp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new pp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new pp(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ee=hf.fromNumber(this.Te)}de(e,r,n){let i=e.add(r.multiply(hf.fromNumber(n)));return i.compare(lAe)===1&&(i=new hf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const r=w3(e),[n,i]=S3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);if(!this.Ae(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new HR(o,i,r);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const r=w3(e),[n,i]=S3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);this.Re(s)}}Re(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class pp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Ug.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new q1(Ae.min(),i,new Vt(it),Ts(),We())}}class Ug{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ug(n,r,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,r,n,i){this.Ve=e,this.removedTargetIds=r,this.key=n,this.me=i}}class jK{constructor(e,r){this.targetId=e,this.fe=r}}class $K{constructor(e,r,n=mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class E3{constructor(){this.ge=0,this.pe=C3(),this.ye=mn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=We(),r=We(),n=We();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:we()}}),new Ug(this.ye,this.we,e,r,n)}Fe(){this.Se=!1,this.pe=C3()}Me(e,r){this.Se=!0,this.pe=this.pe.insert(e,r)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,At(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class cAe{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ts(),this.Qe=A3(),this.Ke=new Vt(it)}$e(e){for(const r of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me);for(const r of e.removedTargetIds)this.We(r,e.key,e.me)}Ge(e){this.forEachTarget(e,r=>{const n=this.ze(r);switch(e.state){case 0:this.je(r)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(r);break;case 3:this.je(r)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),n.Ce(e.resumeToken));break;default:we()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ke.forEach((n,i)=>{this.je(i)&&r(i)})}Je(e){const r=e.targetId,n=e.fe.count,i=this.Ye(r);if(i){const o=i.target;if(FT(o))if(n===0){const s=new ve(o.path);this.We(r,s,cn.newNoDocument(s,Ae.min()))}else At(n===1);else{const s=this.Ze(r);if(s!==n){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,c)}}}}}Xe(e){const r=e.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let s,a;try{s=Oc(n).toUint8Array()}catch(l){if(l instanceof fK)return cd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new HR(s,i,o)}catch(l){return cd(l instanceof pp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,r,n){return r.fe.count===n-this.rt(e,r.targetId)?0:2}rt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(r,o,null),i++)}),i}it(e){const r=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&FT(a.target)){const l=new ve(a.target.path);this.qe.get(l)!==null||this.st(s,l)||this.We(s,l,cn.newNoDocument(l,e))}o.De&&(r.set(s,o.ve()),o.Fe())}});let n=We();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new q1(e,r,this.Ke,this.qe,n);return this.qe=Ts(),this.Qe=A3(),this.Ke=new Vt(it),i}Ue(e,r){if(!this.je(e))return;const n=this.st(e,r.key)?2:0;this.ze(e).Me(r.key,n),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(e))}We(e,r,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,r)?i.Me(r,1):i.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(e)),n&&(this.qe=this.qe.insert(r,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let r=this.ke.get(e);return r||(r=new E3,this.ke.set(e,r)),r}ot(e){let r=this.Qe.get(e);return r||(r=new Qr(it),this.Qe=this.Qe.insert(e,r)),r}je(e){const r=this.Ye(e)!==null;return r||ie("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){const r=this.ke.get(e);return r&&r.be?null:this.Le._t(e)}He(e){this.ke.set(e,new E3),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}st(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function A3(){return new Vt(ve.comparator)}function C3(){return new Vt(ve.comparator)}const uAe={asc:"ASCENDING",desc:"DESCENDING"},fAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dAe={and:"AND",or:"OR"};class hAe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function BT(t,e){return t.useProto3Json||B1(e)?e:{value:e}}function a_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pAe(t,e){return a_(t,e.toTimestamp())}function zo(t){return At(!!t),Ae.fromTimestamp(function(r){const n=Xa(r);return new pr(n.seconds,n.nanos)}(t))}function KR(t,e){return UT(t,e).canonicalString()}function UT(t,e){const r=function(i){return new Rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function MK(t){const e=Rt.fromString(t);return At(VK(e)),e}function VT(t,e){return KR(t.databaseId,e.path)}function NA(t,e){const r=MK(e);if(r.get(1)!==t.databaseId.projectId)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ve(LK(r))}function FK(t,e){return KR(t.databaseId,e)}function mAe(t){const e=MK(t);return e.length===4?Rt.emptyPath():LK(e)}function WT(t){return new Rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LK(t){return At(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function P3(t,e,r){return{name:VT(t,e),fields:r.value.mapValue.fields}}function yAe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(At(u===void 0||typeof u=="string"),mn.fromBase64String(u||"")):(At(u===void 0||u instanceof Uint8Array),mn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=c.code===void 0?K.UNKNOWN:RK(c.code);return new pe(u,c.message||"")}(s);r=new $K(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=NA(t,n.document.name),o=zo(n.document.updateTime),s=n.document.createTime?zo(n.document.createTime):Ae.min(),a=new Ai({mapValue:{fields:n.document.fields}}),l=cn.newFoundDocument(i,o,s,a),c=n.targetIds||[],u=n.removedTargetIds||[];r=new rb(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=NA(t,n.document),o=n.readTime?zo(n.readTime):Ae.min(),s=cn.newNoDocument(i,o),a=n.removedTargetIds||[];r=new rb([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=NA(t,n.document),o=n.removedTargetIds||[];r=new rb([],o,i,null)}else{if(!("filter"in e))return we();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new oAe(i,o),a=n.targetId;r=new jK(a,s)}}return r}function gAe(t,e){let r;if(e instanceof Bg)r={update:P3(t,e.key,e.value)};else if(e instanceof GR)r={delete:VT(t,e.key)};else if(e instanceof Wc)r={update:P3(t,e.key,e.data),updateMask:CAe(e.fieldMask)};else{if(!(e instanceof rAe))return we();r={verify:VT(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,s){const a=s.transform;if(a instanceof o_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof s_)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw we()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:pAe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we()}(t,e.precondition)),r}function vAe(t,e){return t&&t.length>0?(At(e!==void 0),t.map(r=>function(i,o){let s=i.updateTime?zo(i.updateTime):zo(o);return s.isEqual(Ae.min())&&(s=zo(o)),new ZEe(s,i.transformResults||[])}(r,e))):[]}function bAe(t,e){return{documents:[FK(t,e.path)]}}function xAe(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=FK(t,i);const o=function(c){if(c.length!==0)return UK(Qo.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:_u(h.field),direction:SAe(h.dir)}}(u))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=BT(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:r,parent:i}}function _Ae(t){let e=mAe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){At(n===1);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];r.where&&(o=function(d){const h=BK(d);return h instanceof Qo&&mK(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(d){return d.map(h=>function(m){return new i_(wu(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let a=null;r.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,B1(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new n_(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const h=!d.before,p=d.values||[];return new n_(p,h)}(r.endAt)),LEe(e,i,s,o,a,"F",l,c)}function wAe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function BK(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=wu(r.unaryFilter.field);return fr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=wu(r.unaryFilter.field);return fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wu(r.unaryFilter.field);return fr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wu(r.unaryFilter.field);return fr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(r){return fr.create(wu(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Qo.create(r.compositeFilter.filters.map(n=>BK(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(r.compositeFilter.op))}(t):we()}function SAe(t){return uAe[t]}function EAe(t){return fAe[t]}function AAe(t){return dAe[t]}function _u(t){return{fieldPath:t.canonicalString()}}function wu(t){return zr.fromServerFormat(t.fieldPath)}function UK(t){return t instanceof fr?function(r){if(r.op==="=="){if(h3(r.value))return{unaryFilter:{field:_u(r.field),op:"IS_NAN"}};if(d3(r.value))return{unaryFilter:{field:_u(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(h3(r.value))return{unaryFilter:{field:_u(r.field),op:"IS_NOT_NAN"}};if(d3(r.value))return{unaryFilter:{field:_u(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_u(r.field),op:EAe(r.op),value:r.value}}}(t):t instanceof Qo?function(r){const n=r.getFilters().map(i=>UK(i));return n.length===1?n[0]:{compositeFilter:{op:AAe(r.op),filters:n}}}(t):we()}function CAe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function VK(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,r,n,i,o=Ae.min(),s=Ae.min(),a=mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PAe{constructor(e){this.ct=e}}function TAe(t){const e=_Ae({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?LT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe{constructor(){this._n=new NAe}addToCollectionParentIndex(e,r){return this._n.add(r),H.resolve()}getCollectionParents(e,r){return H.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return H.resolve()}deleteFieldIndex(e,r){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,r){return H.resolve()}getDocumentsMatchingTarget(e,r){return H.resolve(null)}getIndexType(e,r){return H.resolve(0)}getFieldIndexes(e,r){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,r){return H.resolve(Ya.min())}getMinOffsetFromCollectionGroup(e,r){return H.resolve(Ya.min())}updateCollectionGroup(e,r,n){return H.resolve()}updateIndexEntries(e,r){return H.resolve()}}class NAe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Qr(Rt.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Qr(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new hd(0)}static Bn(){return new hd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kAe{constructor(){this.changes=new eh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?H.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OAe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RAe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Hp(n.mutation,i,io.empty(),pr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,We()).next(()=>n))}getLocalViewOfDocuments(e,r,n=We()){const i=Ul();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let s=hp();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Ul();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,We()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{r.set(s,a)})})}computeViews(e,r,n,i){let o=Ts();const s=qp(),a=function(){return qp()}();return r.forEach((l,c)=>{const u=n.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Wc)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),Hp(u.mutation,c,u.mutation.getFieldMask(),pr.now())):s.set(c.key,io.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),r.forEach((c,u)=>{var d;return a.set(c,new OAe(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,r){const n=qp();let i=new Vt((s,a)=>s-a),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||io.empty();u=a.applyToLocalView(c,u),n.set(l,u);const d=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=EK();u.forEach(h=>{if(!o.has(h)){const p=kK(r.get(h),n.get(h));p!==null&&d.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return H.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):BEe(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):H.resolve(Ul());let a=-1,l=o;return s.next(c=>H.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,We())).next(u=>({batchId:a,changes:SK(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ve(r)).next(n=>{let i=hp();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let s=hp();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,l=>{const c=function(d,h){return new U1(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,cn.newInvalidDocument(u)))});let a=hp();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&Hp(u.mutation,c,io.empty(),pr.now()),W1(r,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jAe{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return H.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:zo(i.createTime)}}(r)),H.resolve()}getNamedQuery(e,r){return H.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,function(i){return{name:i.name,query:TAe(i.bundledQuery),readTime:zo(i.readTime)}}(r)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ae{constructor(){this.overlays=new Vt(ve.comparator),this.hr=new Map}getOverlay(e,r){return H.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ul();return H.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.ht(e,r,o)}),H.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.hr.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(n)),H.resolve()}getOverlaysForCollection(e,r,n){const i=Ul(),o=r.length+1,s=new ve(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>n&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Vt((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=o.get(c.largestBatchId);u===null&&(u=Ul(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ul(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return H.resolve(a)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new iAe(r,n));let o=this.hr.get(r);o===void 0&&(o=We(),this.hr.set(r,o)),this.hr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.Pr=new Qr(Pr.Ir),this.Tr=new Qr(Pr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const n=new Pr(e,r);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Ar(new Pr(e,r))}Rr(e,r){e.forEach(n=>this.removeReference(n,r))}Vr(e){const r=new ve(new Rt([])),n=new Pr(r,e),i=new Pr(r,e+1),o=[];return this.Tr.forEachInRange([n,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new ve(new Rt([])),n=new Pr(r,e),i=new Pr(r,e+1);let o=We();return this.Tr.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(e){const r=new Pr(e,0),n=this.Pr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Pr{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return ve.comparator(e.key,r.key)||it(e.pr,r.pr)}static Er(e,r){return it(e.pr,r.pr)||ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DAe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new Qr(Pr.Ir)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new nAe(o,r,n,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Pr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,r){return H.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.br(n),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Pr(r,0),i=new Pr(r,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([n,i],s=>{const a=this.Sr(s.pr);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qr(it);return r.forEach(i=>{const o=new Pr(i,0),s=new Pr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{n=n.add(a.pr)})}),H.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;ve.isDocumentKey(o)||(o=o.child(""));const s=new Pr(new ve(o),0);let a=new Qr(it);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},s),H.resolve(this.Dr(a))}Dr(e){const r=[];return e.forEach(n=>{const i=this.Sr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){At(this.Cr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return H.forEach(r.mutations,i=>{const o=new Pr(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,r){const n=new Pr(r,0),i=this.wr.firstAfterOrEqual(n);return H.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Cr(e,r){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MAe{constructor(e){this.vr=e,this.docs=function(){return new Vt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,s=this.vr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return H.resolve(n?n.document.mutableCopy():cn.newInvalidDocument(r))}getEntries(e,r){let n=Ts();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():cn.newInvalidDocument(i))}),H.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Ts();const s=r.path,a=new ve(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||xEe(bEe(u),n)<=0||(i.has(u.key)||W1(r,u))&&(o=o.insert(u.key,u.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,r,n,i){we()}Fr(e,r){return H.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new FAe(this)}getSize(e){return H.resolve(this.size)}}class FAe extends kAe{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)}),H.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LAe{constructor(e){this.persistence=e,this.Mr=new eh(r=>WR(r),zR),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new QR,this.targetCount=0,this.Br=hd.Nn()}forEachTarget(e,r){return this.Mr.forEach((n,i)=>r(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Or&&(this.Or=r),H.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Br=new hd(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,H.resolve()}updateTargetData(e,r){return this.qn(r),H.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,r){const n=this.Mr.get(r)||null;return H.resolve(n)}addMatchingKeys(e,r,n){return this.Nr.dr(r,n),H.resolve()}removeMatchingKeys(e,r,n){this.Nr.Rr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),H.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Nr.gr(r);return H.resolve(n)}containsKey(e,r){return H.resolve(this.Nr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BAe{constructor(e,r){this.Lr={},this.overlays={},this.kr=new LR(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new LAe(this),this.indexManager=new IAe,this.remoteDocumentCache=function(i){return new MAe(i)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new PAe(r),this.$r=new jAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new $Ae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Lr[e.toKey()];return n||(n=new DAe(r,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,n){ie("MemoryPersistence","Starting transaction:",e);const i=new UAe(this.kr.next());return this.referenceDelegate.Ur(),n(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,r){return H.or(Object.values(this.Lr).map(n=>()=>n.containsKey(e,r)))}}class UAe extends wEe{constructor(e){super(),this.currentSequenceNumber=e}}class YR{constructor(e){this.persistence=e,this.zr=new QR,this.jr=null}static Hr(e){return new YR(e)}get Jr(){if(this.jr)return this.jr;throw we()}addReference(e,r,n){return this.zr.addReference(n,r),this.Jr.delete(n.toString()),H.resolve()}removeReference(e,r,n){return this.zr.removeReference(n,r),this.Jr.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),H.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(i=>this.Jr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Jr,n=>{const i=ve.fromPath(n);return this.Yr(e,i).next(o=>{o||r.removeEntry(i,Ae.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(n=>{n?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return H.or([()=>H.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.qi=n,this.Qi=i}static Ki(e,r){let n=We(),i=We();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new XR(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VAe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WAe{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Jte()?8:Bl.v(gm())>0?6:4}()}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.ji(e,r).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,r,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new VAe;return this.Ji(e,r,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,r,s,a.size)})}).next(()=>o.result)}Yi(e,r,n,i){return n.documentReadCount<this.Wi?(Fh()<=Ye.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",xu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),H.resolve()):(Fh()<=Ye.DEBUG&&ie("QueryEngine","Query:",xu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Fh()<=Ye.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",xu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(r))):H.resolve())}ji(e,r){if(g3(r))return H.resolve(null);let n=Vo(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=LT(r,null,"F"),n=Vo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const s=We(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Zi(r,a);return this.Xi(r,c,s,l.readTime)?this.ji(e,LT(r,null,"F")):this.es(e,c,r,l)}))})))}Hi(e,r,n,i){return g3(r)||i.isEqual(Ae.min())?H.resolve(null):this.zi.getDocuments(e,n).next(o=>{const s=this.Zi(r,o);return this.Xi(r,s,n,i)?H.resolve(null):(Fh()<=Ye.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xu(r)),this.es(e,s,r,vEe(i,-1)).next(a=>a))})}Zi(e,r){let n=new Qr(_K(e));return r.forEach((i,o)=>{W1(e,o)&&(n=n.add(o))}),n}Xi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,r,n){return Fh()<=Ye.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",xu(r)),this.zi.getDocumentsMatchingQuery(e,r,Ya.min(),n)}es(e,r,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zAe{constructor(e,r,n,i){this.persistence=e,this.ts=r,this.serializer=i,this.ns=new Vt(it),this.rs=new eh(o=>WR(o),zR),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RAe(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function GAe(t,e,r,n){return new zAe(t,e,r,n)}async function WK(t,e){const r=Ce(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r._s(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let l=We();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}function qAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let p=H.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(y=>{const g=c.docVersions.get(m);At(g!==null),y.version.compareTo(g)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=We();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function zK(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function HAe(t,e){const r=Ce(t),n=e.snapshotVersion;let i=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=r.os.newChangeBuffer({trackRemovals:!0});i=r.ns;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(r.Qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>r.Qr.addMatchingKeys(o,u.addedDocuments,d)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(mn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(d,p),function(y,g,b){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,u)&&a.push(r.Qr.updateTargetData(o,p))});let l=Ts(),c=We();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(KAe(o,s,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!n.isEqual(Ae.min())){const u=r.Qr.getLastRemoteSnapshotVersion(o).next(d=>r.Qr.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(u)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(r.ns=i,o))}function KAe(t,e,r){let n=We(),i=We();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=Ts();return r.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ae.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:s,ls:i}})}function QAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function YAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Qr.getTargetData(n,e).next(o=>o?(i=o,H.resolve(i)):r.Qr.allocateTargetId(n).next(s=>(i=new _a(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ns.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ns=r.ns.insert(n.targetId,n),r.rs.set(e,n.targetId)),n})}async function zT(t,e,r){const n=Ce(t),i=n.ns.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Lg(s))throw s;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.ns=n.ns.remove(e),n.rs.delete(i.target)}function T3(t,e,r){const n=Ce(t);let i=Ae.min(),o=We();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const d=Ce(l),h=d.rs.get(u);return h!==void 0?H.resolve(d.ns.get(h)):d.Qr.getTargetData(c,u)}(n,s,Vo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>n.ts.getDocumentsMatchingQuery(s,e,r?i:Ae.min(),r?o:We())).next(a=>(XAe(n,VEe(e),a),{documents:a,hs:o})))}function XAe(t,e,r){let n=t.ss.get(e)||Ae.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.ss.set(e,n)}class I3{constructor(){this.activeTargetIds=KEe()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JAe{constructor(){this.no=new I3,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,n){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new I3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZAe{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv=null;function kA(){return Jv===null?Jv=function(){return 268435456+Math.round(2147483648*Math.random())}():Jv++,"0x"+Jv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eCe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tCe{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class rCe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+r.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(r,n,i,o,s){const a=kA(),l=this.bo(r,n.toUriEncodedString());ie("RestConnection",`Sending RPC '${r}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(r,l,c,i).then(u=>(ie("RestConnection",`Received RPC '${r}' ${a}: `,u),u),u=>{throw cd("RestConnection",`RPC '${r}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(r,n,i,o,s,a){return this.So(r,n,i,o,s)}Do(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>r[s]=o),i&&i.headers.forEach((o,s)=>r[s]=o)}bo(r,n){const i=eCe[r];return`${this.fo}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,r,n,i){const o=kA();return new Promise((s,a)=>{const l=new aEe;l.setWithCredentials(!0),l.listenOnce(oEe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case IA.NO_ERROR:const u=l.getResponseJson();ie(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case IA.TIMEOUT:ie(nn,`RPC '${e}' ${o} timed out`),a(new pe(K.DEADLINE_EXCEEDED,"Request time out"));break;case IA.HTTP_ERROR:const d=l.getStatus();if(ie(nn,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(b)>=0?b:K.UNKNOWN}(p.status);a(new pe(m,p.message))}else a(new pe(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new pe(K.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{ie(nn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);ie(nn,`RPC '${e}' ${o} sending request:`,i),l.send(r,"POST",c,n,15)})}Fo(e,r,n){const i=kA(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nEe(),a=iEe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=o.join("");ie(nn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);let h=!1,p=!1;const m=new tCe({lo:g=>{p?ie(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(ie(nn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),ie(nn,`RPC '${e}' stream ${i} sending:`,g),d.send(g))},ho:()=>d.close()}),y=(g,b,v)=>{g.listen(b,x=>{try{v(x)}catch(S){setTimeout(()=>{throw S},0)}})};return y(d,Qv.EventType.OPEN,()=>{p||ie(nn,`RPC '${e}' stream ${i} transport opened.`)}),y(d,Qv.EventType.CLOSE,()=>{p||(p=!0,ie(nn,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),y(d,Qv.EventType.ERROR,g=>{p||(p=!0,cd(nn,`RPC '${e}' stream ${i} transport errored:`,g),m.Vo(new pe(K.UNAVAILABLE,"The operation could not be completed")))}),y(d,Qv.EventType.MESSAGE,g=>{var b;if(!p){const v=g.data[0];At(!!v);const x=v,S=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(S){ie(nn,`RPC '${e}' stream ${i} received error:`,S);const _=S.status;let w=function(T){const P=tr[T];if(P!==void 0)return RK(P)}(_),A=S.message;w===void 0&&(w=K.INTERNAL,A="Unknown error status: "+_+" with message "+S.message),p=!0,m.Vo(new pe(w,A)),d.close()}else ie(nn,`RPC '${e}' stream ${i} received:`,v),m.mo(v)}}),y(a,sEe.STAT_EVENT,g=>{g.stat===s3.PROXY?ie(nn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===s3.NOPROXY&&ie(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}}function OA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){return new hAe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e,r,n=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=r,this.Mo=n,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const r=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,r-n);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e,r,n,i,o,s,a,l){this.oi=e,this.$o=n,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new GK(e,r)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,r){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():r&&r.code===K.RESOURCE_EXHAUSTED?(Ho(r.toString()),Ho("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):r&&r.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(r)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),r=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Wo===r&&this.o_(n,i)},n=>{e(()=>{const i=new pe(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.__(i)})})}o_(e,r){const n=this.s_(this.Wo);this.stream=this.a_(e,r),this.stream.Po(()=>{n(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{n(()=>this.__(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return r=>{this.oi.enqueueAndForget(()=>this.Wo===e?r():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nCe extends qK{constructor(e,r,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}a_(e,r){return this.connection.Fo("Listen",e,r)}onMessage(e){this.jo.reset();const r=yAe(this.serializer,e),n=function(o){if(!("targetChange"in o))return Ae.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ae.min():s.readTime?zo(s.readTime):Ae.min()}(e);return this.listener.u_(r,n)}c_(e){const r={};r.database=WT(this.serializer),r.addTarget=function(o,s){let a;const l=s.target;if(a=FT(l)?{documents:bAe(o,l)}:{query:xAe(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=DK(o,s.resumeToken);const c=BT(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ae.min())>0){a.readTime=a_(o,s.snapshotVersion.toTimestamp());const c=BT(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=wAe(this.serializer,e);n&&(r.labels=n),this.t_(r)}l_(e){const r={};r.database=WT(this.serializer),r.removeTarget=e,this.t_(r)}}class iCe extends qK{constructor(e,r,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,r){return this.connection.Fo("Write",e,r)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const r=vAe(e.writeResults,e.commitTime),n=zo(e.commitTime);return this.listener.T_(n,r)}return At(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=WT(this.serializer),this.t_(e)}I_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>gAe(this.serializer,n))};this.t_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oCe extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,UT(r,n),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(K.UNKNOWN,o.toString())})}vo(e,r,n,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,UT(r,n),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(K.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class sCe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ho(r),this.g_=!1):ie("OnlineStateTracker",r)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aCe{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{n.enqueueAndForget(async()=>{zc(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ce(l);c.v_.add(4),await Vg(c),c.x_.set("Unknown"),c.v_.delete(4),await K1(c)}(this))})}),this.x_=new sCe(n,i)}}async function K1(t){if(zc(t))for(const e of t.F_)await e(!0)}async function Vg(t){for(const e of t.F_)await e(!1)}function HK(t,e){const r=Ce(t);r.C_.has(e.targetId)||(r.C_.set(e.targetId,e),ej(r)?ZR(r):th(r).Jo()&&JR(r,e))}function KK(t,e){const r=Ce(t),n=th(r);r.C_.delete(e),n.Jo()&&QK(r,e),r.C_.size===0&&(n.Jo()?n.Xo():zc(r)&&r.x_.set("Unknown"))}function JR(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}th(t).c_(e)}function QK(t,e){t.O_.Oe(e),th(t).l_(e)}function ZR(t){t.O_=new cAe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),th(t).start(),t.x_.p_()}function ej(t){return zc(t)&&!th(t).Ho()&&t.C_.size>0}function zc(t){return Ce(t).v_.size===0}function YK(t){t.O_=void 0}async function lCe(t){t.C_.forEach((e,r)=>{JR(t,e)})}async function cCe(t,e){YK(t),ej(t)?(t.x_.S_(e),ZR(t)):t.x_.set("Unknown")}async function uCe(t,e,r){if(t.x_.set("Online"),e instanceof $K&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(n){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await l_(t,n)}else if(e instanceof rb?t.O_.$e(e):e instanceof jK?t.O_.Je(e):t.O_.Ge(e),!r.isEqual(Ae.min()))try{const n=await zK(t.localStore);r.compareTo(n)>=0&&await function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.C_.get(c);u&&o.C_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.C_.get(l);if(!u)return;o.C_.set(l,u.withResumeToken(mn.EMPTY_BYTE_STRING,u.snapshotVersion)),QK(o,l);const d=new _a(u.target,l,c,u.sequenceNumber);JR(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ie("RemoteStore","Failed to raise snapshot:",n),await l_(t,n)}}async function l_(t,e,r){if(!Lg(e))throw e;t.v_.add(1),await Vg(t),t.x_.set("Offline"),r||(r=()=>zK(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await r(),t.v_.delete(1),await K1(t)})}function XK(t,e){return e().catch(r=>l_(t,r,e))}async function Q1(t){const e=Ce(t),r=Ja(e);let n=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;fCe(e);)try{const i=await QAe(e.localStore,n);if(i===null){e.D_.length===0&&r.Xo();break}n=i.batchId,dCe(e,i)}catch(i){await l_(e,i)}JK(e)&&ZK(e)}function fCe(t){return zc(t)&&t.D_.length<10}function dCe(t,e){t.D_.push(e);const r=Ja(t);r.Jo()&&r.P_&&r.I_(e.mutations)}function JK(t){return zc(t)&&!Ja(t).Ho()&&t.D_.length>0}function ZK(t){Ja(t).start()}async function hCe(t){Ja(t).d_()}async function pCe(t){const e=Ja(t);for(const r of t.D_)e.I_(r.mutations)}async function mCe(t,e,r){const n=t.D_.shift(),i=qR.from(n,e,r);await XK(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Q1(t)}async function yCe(t,e){e&&Ja(t).P_&&await async function(n,i){if(function(s){return sAe(s)&&s!==K.ABORTED}(i.code)){const o=n.D_.shift();Ja(n).Zo(),await XK(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Q1(n)}}(t,e),JK(t)&&ZK(t)}async function k3(t,e){const r=Ce(t);r.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const n=zc(r);r.v_.add(3),await Vg(r),n&&r.x_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.v_.delete(3),await K1(r)}async function gCe(t,e){const r=Ce(t);e?(r.v_.delete(2),await K1(r)):e||(r.v_.add(2),await Vg(r),r.x_.set("Unknown"))}function th(t){return t.N_||(t.N_=function(r,n,i){const o=Ce(r);return o.R_(),new nCe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:lCe.bind(null,t),To:cCe.bind(null,t),u_:uCe.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),ej(t)?ZR(t):t.x_.set("Unknown")):(await t.N_.stop(),YK(t))})),t.N_}function Ja(t){return t.B_||(t.B_=function(r,n,i){const o=Ce(r);return o.R_(),new iCe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:hCe.bind(null,t),To:yCe.bind(null,t),E_:pCe.bind(null,t),T_:mCe.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await Q1(t)):(await t.B_.stop(),t.D_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const s=Date.now()+n,a=new tj(e,r,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rj(t,e){if(Ho("AsyncQueue",`${e}: ${t}`),Lg(t))return new pe(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ve.comparator(r.key,n.key):(r,n)=>ve.comparator(r.key,n.key),this.keyedMap=hp(),this.sortedSet=new Vt(this.comparator)}static emptySet(e){return new pf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof pf)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new pf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.L_=new Vt(ve.comparator)}track(e){const r=e.doc.key,n=this.L_.get(r);n?e.type!==0&&n.type===3?this.L_=this.L_.insert(r,e):e.type===3&&n.type!==1?this.L_=this.L_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.L_=this.L_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.L_=this.L_.remove(r):e.type===1&&n.type===2?this.L_=this.L_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):we():this.L_=this.L_.insert(r,e)}k_(){const e=[];return this.L_.inorderTraversal((r,n)=>{e.push(n)}),e}}class pd{constructor(e,r,n,i,o,s,a,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,o){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new pd(e,r,pf.emptySet(r),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&V1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vCe{constructor(){this.q_=void 0,this.Q_=[]}}class bCe{constructor(){this.queries=new eh(e=>xK(e),V1),this.onlineState="Unknown",this.K_=new Set}}async function xCe(t,e){const r=Ce(t),n=e.query;let i=!1,o=r.queries.get(n);if(o||(i=!0,o=new vCe),i)try{o.q_=await r.onListen(n)}catch(s){const a=rj(s,`Initialization of query '${xu(e.query)}' failed`);return void e.onError(a)}r.queries.set(n,o),o.Q_.push(e),e.U_(r.onlineState),o.q_&&e.W_(o.q_)&&nj(r)}async function _Ce(t,e){const r=Ce(t),n=e.query;let i=!1;const o=r.queries.get(n);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function wCe(t,e){const r=Ce(t);let n=!1;for(const i of e){const o=i.query,s=r.queries.get(o);if(s){for(const a of s.Q_)a.W_(i)&&(n=!0);s.q_=i}}n&&nj(r)}function SCe(t,e,r){const n=Ce(t),i=n.queries.get(e);if(i)for(const o of i.Q_)o.onError(r);n.queries.delete(e)}function nj(t){t.K_.forEach(e=>{e.next()})}class ECe{constructor(e,r,n){this.query=e,this.G_=r,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new pd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.z_?this.H_(e)&&(this.G_.next(e),r=!0):this.J_(e,this.onlineState)&&(this.Y_(e),r=!0),this.j_=e,r}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let r=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),r=!0),r}J_(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const r=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Y_(e){e=pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e){this.key=e}}class tQ{constructor(e){this.key=e}}class ACe{constructor(e,r){this.query=e,this.oa=r,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=We(),this.mutatedKeys=We(),this.ua=_K(e),this.ca=new pf(this.ua)}get la(){return this.oa}ha(e,r){const n=r?r.Pa:new O3,i=r?r.ca:this.ca;let o=r?r.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),p=W1(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(n.track({type:3,doc:p}),g=!0):this.Ia(h,p)||(n.track({type:2,doc:p}),g=!0,(l&&this.ua(p,l)>0||c&&this.ua(p,c)<0)&&(a=!0)):!h&&p?(n.track({type:0,doc:p}),g=!0):h&&!p&&(n.track({type:1,doc:h}),g=!0,(l||c)&&(a=!0)),g&&(p?(s=s.add(p),o=y?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),n.track({type:1,doc:u})}return{ca:s,Pa:n,Xi:a,mutatedKeys:o}}Ia(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((u,d)=>function(p,m){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return y(p)-y(m)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(n),i=i!=null&&i;const a=r&&!i?this.Ea():[],l=this.aa.size===0&&this.current&&!i?1:0,c=l!==this._a;return this._a=l,s.length!==0||c?{snapshot:new pd(this.query,e.ca,o,s,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new O3,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(r=>this.oa=this.oa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.oa=this.oa.delete(r)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=We(),this.ca.forEach(n=>{this.Aa(n.key)&&(this.aa=this.aa.add(n.key))});const r=[];return e.forEach(n=>{this.aa.has(n)||r.push(new tQ(n))}),this.aa.forEach(n=>{e.has(n)||r.push(new eQ(n))}),r}Ra(e){this.oa=e.hs,this.aa=We();const r=this.ha(e.documents);return this.applyChanges(r,!0)}Va(){return pd.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class CCe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class PCe{constructor(e){this.key=e,this.ma=!1}}class TCe{constructor(e,r,n,i,o,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new eh(a=>xK(a),V1),this.pa=new Map,this.ya=new Set,this.wa=new Vt(ve.comparator),this.Sa=new Map,this.ba=new QR,this.Da={},this.Ca=new Map,this.va=hd.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function ICe(t,e){const r=LCe(t);let n,i;const o=r.ga.get(e);if(o)n=o.targetId,r.sharedClientState.addLocalQueryTarget(n),i=o.view.Va();else{const s=await YAe(r.localStore,Vo(e)),a=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await NCe(r,e,n,a==="current",s.resumeToken),r.isPrimaryClient&&HK(r.remoteStore,s)}return i}async function NCe(t,e,r,n,i){t.Ma=(d,h,p)=>async function(y,g,b,v){let x=g.view.ha(b);x.Xi&&(x=await T3(y.localStore,g.query,!1).then(({documents:A})=>g.view.ha(A,x)));const S=v&&v.targetChanges.get(g.targetId),_=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(x,y.isPrimaryClient,S,_);return j3(y,g.targetId,w.da),w.snapshot}(t,d,h,p);const o=await T3(t.localStore,e,!0),s=new ACe(e,o.hs),a=s.ha(o.documents),l=Ug.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);j3(t,r,c.da);const u=new CCe(e,r,s);return t.ga.set(e,u),t.pa.has(r)?t.pa.get(r).push(e):t.pa.set(r,[e]),c.snapshot}async function kCe(t,e){const r=Ce(t),n=r.ga.get(e),i=r.pa.get(n.targetId);if(i.length>1)return r.pa.set(n.targetId,i.filter(o=>!V1(o,e))),void r.ga.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await zT(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),KK(r.remoteStore,n.targetId),GT(r,n.targetId)}).catch(Fg)):(GT(r,n.targetId),await zT(r.localStore,n.targetId,!0))}async function OCe(t,e,r){const n=BCe(t);try{const i=await function(s,a){const l=Ce(s),c=pr.now(),u=a.reduce((p,m)=>p.add(m.key),We());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ts(),y=We();return l.os.getEntries(p,u).next(g=>{m=g,m.forEach((b,v)=>{v.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(g=>{d=g;const b=[];for(const v of a){const x=tAe(v,d.get(v.key).overlayedDocument);x!=null&&b.push(new Wc(v.key,x,dK(x.value.mapValue),Wo.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,a)}).next(g=>{h=g;const b=g.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,g.batchId,b)})}).then(()=>({batchId:h.batchId,changes:SK(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Da[s.currentUser.toKey()];c||(c=new Vt(it)),c=c.insert(a,l),s.Da[s.currentUser.toKey()]=c}(n,i.batchId,r),await Wg(n,i.changes),await Q1(n.remoteStore)}catch(i){const o=rj(i,"Failed to persist write");r.reject(o)}}async function rQ(t,e){const r=Ce(t);try{const n=await HAe(r.localStore,e);e.targetChanges.forEach((i,o)=>{const s=r.Sa.get(o);s&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?At(s.ma):i.removedDocuments.size>0&&(At(s.ma),s.ma=!1))}),await Wg(r,n,e)}catch(n){await Fg(n)}}function R3(t,e,r){const n=Ce(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Ce(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.Q_)h.U_(a)&&(c=!0)}),c&&nj(l)}(n.eventManager,e),i.length&&n.fa.u_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function RCe(t,e,r){const n=Ce(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Sa.get(e),o=i&&i.key;if(o){let s=new Vt(ve.comparator);s=s.insert(o,cn.newNoDocument(o,Ae.min()));const a=We().add(o),l=new q1(Ae.min(),new Map,new Vt(it),s,a);await rQ(n,l),n.wa=n.wa.remove(o),n.Sa.delete(e),ij(n)}else await zT(n.localStore,e,!1).then(()=>GT(n,e,r)).catch(Fg)}async function jCe(t,e){const r=Ce(t),n=e.batch.batchId;try{const i=await qAe(r.localStore,e);iQ(r,n,null),nQ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Wg(r,i)}catch(i){await Fg(i)}}async function $Ce(t,e,r){const n=Ce(t);try{const i=await function(s,a){const l=Ce(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(At(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);iQ(n,e,r),nQ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Wg(n,i)}catch(i){await Fg(i)}}function nQ(t,e){(t.Ca.get(e)||[]).forEach(r=>{r.resolve()}),t.Ca.delete(e)}function iQ(t,e,r){const n=Ce(t);let i=n.Da[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Da[n.currentUser.toKey()]=i}}function GT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.pa.get(e))t.ga.delete(n),r&&t.fa.xa(n,r);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(n=>{t.ba.containsKey(n)||oQ(t,n)})}function oQ(t,e){t.ya.delete(e.path.canonicalString());const r=t.wa.get(e);r!==null&&(KK(t.remoteStore,r),t.wa=t.wa.remove(e),t.Sa.delete(r),ij(t))}function j3(t,e,r){for(const n of r)n instanceof eQ?(t.ba.addReference(n.key,e),DCe(t,n)):n instanceof tQ?(ie("SyncEngine","Document no longer in limbo: "+n.key),t.ba.removeReference(n.key,e),t.ba.containsKey(n.key)||oQ(t,n.key)):we()}function DCe(t,e){const r=e.key,n=r.path.canonicalString();t.wa.get(r)||t.ya.has(n)||(ie("SyncEngine","New document in limbo: "+r),t.ya.add(n),ij(t))}function ij(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const r=new ve(Rt.fromString(e)),n=t.va.next();t.Sa.set(n,new PCe(r)),t.wa=t.wa.insert(r,n),HK(t.remoteStore,new _a(Vo(bK(r.path)),n,"TargetPurposeLimboResolution",LR._e))}}async function Wg(t,e,r){const n=Ce(t),i=[],o=[],s=[];n.ga.isEmpty()||(n.ga.forEach((a,l)=>{s.push(n.Ma(l,e,r).then(c=>{if((c||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=XR.Ki(l.targetId,c);o.push(u)}}))}),await Promise.all(s),n.fa.u_(i),await async function(l,c){const u=Ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>H.forEach(c,h=>H.forEach(h.qi,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>H.forEach(h.Qi,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Lg(d))throw d;ie("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=u.ns.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);u.ns=u.ns.insert(h,y)}}}(n.localStore,o))}async function MCe(t,e){const r=Ce(t);if(!r.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const n=await WK(r.localStore,e);r.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(l=>{l.reject(new pe(K.CANCELLED,s))})}),o.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Wg(r,n.us)}}function FCe(t,e){const r=Ce(t),n=r.Sa.get(e);if(n&&n.ma)return We().add(n.key);{let i=We();const o=r.pa.get(e);if(!o)return i;for(const s of o){const a=r.ga.get(s);i=i.unionWith(a.view.la)}return i}}function LCe(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rQ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FCe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RCe.bind(null,e),e.fa.u_=wCe.bind(null,e.eventManager),e.fa.xa=SCe.bind(null,e.eventManager),e}function BCe(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jCe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$Ce.bind(null,e),e}class $3{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=H1(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return GAe(this.persistence,new WAe,e.initialUser,this.serializer)}createPersistence(e){return new BAe(YR.Hr,this.serializer)}createSharedClientState(e){return new JAe}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class UCe{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>R3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=MCe.bind(null,this.syncEngine),await gCe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bCe}()}createDatastore(e){const r=H1(e.databaseInfo.databaseId),n=function(o){return new rCe(o)}(e.databaseInfo);return function(o,s,a,l){return new oCe(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,s,a){return new aCe(n,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,r=>R3(this.syncEngine,r,0),function(){return N3.D()?new N3:new ZAe}())}createSyncEngine(e,r){return function(i,o,s,a,l,c,u){const d=new TCe(i,o,s,a,l,c);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e;await async function(n){const i=Ce(n);ie("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Vg(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VCe{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ho("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WCe{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=cK.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async o=>{ie("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ie("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=rj(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function RA(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await WK(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await GCe(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>k3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>k3(e.remoteStore,i)),t._onlineComponents=e}function zCe(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function GCe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await RA(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!zCe(r))throw r;cd("Error using user provided cache. Falling back to memory cache: "+r),await RA(t,new $3)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await RA(t,new $3);return t._offlineComponents}async function sQ(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await D3(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await D3(t,new UCe))),t._onlineComponents}function qCe(t){return sQ(t).then(e=>e.syncEngine)}async function HCe(t){const e=await sQ(t),r=e.eventManager;return r.onListen=ICe.bind(null,e.syncEngine),r.onUnlisten=kCe.bind(null,e.syncEngine),r}function KCe(t,e,r={}){const n=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const u=new VCe({next:h=>{s.enqueueAndForget(()=>_Ce(o,d)),h.fromCache&&l.source==="server"?c.reject(new pe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new ECe(a,u,{includeMetadataChanges:!0,Z_:!0});return xCe(o,d)}(await HCe(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(t,e,r){if(!r)throw new pe(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QCe(t,e,r,n){if(e===!0&&n===!0)throw new pe(K.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function F3(t){if(!ve.isDocumentKey(t))throw new pe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function L3(t){if(ve.isDocumentKey(t))throw new pe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function md(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=oj(t);throw new pe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QCe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aQ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y1{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new pe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B3(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cEe;switch(n.type){case"firstParty":return new hEe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=M3.get(r);n&&(ie("ComponentProvider","Removing Datastore"),M3.delete(r),n.terminate())}(this),Promise.resolve()}}function YCe(t,e,r,n={}){var i;const o=(t=md(t,Y1))._getSettings(),s=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&cd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=an.MOCK_USER;else{a=ck(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new pe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new an(c)}t._authCredentials=new uEe(new lK(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new X1(this.firestore,e,this._query)}}class Oi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oi(this.firestore,e,this._key)}}class Ma extends X1{constructor(e,r,n){super(e,r,bK(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oi(this.firestore,null,new ve(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function XCe(t,e,...r){if(t=Xr(t),lQ("collection","path",e),t instanceof Y1){const n=Rt.fromString(e,...r);return L3(n),new Ma(t,null,n)}{if(!(t instanceof Oi||t instanceof Ma))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Rt.fromString(e,...r));return L3(n),new Ma(t.firestore,null,n)}}function sj(t,e,...r){if(t=Xr(t),arguments.length===1&&(e=cK.newId()),lQ("doc","path",e),t instanceof Y1){const n=Rt.fromString(e,...r);return F3(n),new Oi(t,null,new ve(n))}{if(!(t instanceof Oi||t instanceof Ma))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Rt.fromString(e,...r));return F3(n),new Oi(t.firestore,t instanceof Ma?t.converter:null,new ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JCe{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new GK(this,"async_queue_retry"),this._u=()=>{const r=OA();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.jo.Ko()};const e=OA();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const r=OA();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const r=new vs;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Lg(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const r=this.Xa.then(()=>(this.iu=!0,e().catch(n=>{this.ru=n,this.iu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Ho("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.iu=!1,n))));return this.Xa=r,r}enqueueAfterDelay(e,r,n){this.au(),this.ou.indexOf(e)>-1&&(r=0);const i=tj.createAndSchedule(this,e,r,n,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&we()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const r of this.nu)if(r.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.nu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const r=this.nu.indexOf(e);this.nu.splice(r,1)}}class J1 extends Y1{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new JCe}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uQ(this),this._firestoreClient.terminate()}}function ZCe(t,e){const r=typeof t=="object"?t:pk(),n=typeof t=="string"?t:e||"(default)",i=dk(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=lk("firestore");o&&YCe(i,...o)}return i}function cQ(t){return t._firestoreClient||uQ(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uQ(t){var e,r,n;const i=t._freezeSettings(),o=function(a,l,c,u){return new PEe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aQ(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new WCe(t._authCredentials,t._appCheckCredentials,t._queue,o),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yd(mn.fromBase64String(e))}catch(r){throw new pe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new yd(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new pe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new pe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new pe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ePe=/^__.*__$/;class tPe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Wc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Bg(e,this.data,r,this.fieldTransforms)}}function dQ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class cj{constructor(e,r,n,i,o,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new cj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Au({path:n,Vu:!1});return i.mu(e),i}fu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return c_(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(dQ(this.du)&&ePe.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class rPe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||H1(e)}Su(e,r,n,i=!1){return new cj({du:e,methodName:r,wu:n,path:zr.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nPe(t){const e=t._freezeSettings(),r=H1(t._databaseId);return new rPe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function iPe(t,e,r,n,i,o={}){const s=t.Su(o.merge||o.mergeFields?2:0,e,r,i);yQ("Data must be an object, but it was:",s,n);const a=pQ(n,s);let l,c;if(o.merge)l=new io(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const h=oPe(e,d,r);if(!s.contains(h))throw new pe(K.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);aPe(u,h)||u.push(h)}l=new io(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new tPe(new Ai(a),l,c)}function hQ(t,e){if(mQ(t=Xr(t)))return yQ("Unsupported field value:",e,t),pQ(t,e);if(t instanceof fQ)return function(n,i){if(!dQ(i.du))throw i.pu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(n,i){const o=[];let s=0;for(const a of n){let l=hQ(a,i.gu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=Xr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return QEe(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=pr.fromDate(n);return{timestampValue:a_(i.serializer,o)}}if(n instanceof pr){const o=new pr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:a_(i.serializer,o)}}if(n instanceof lj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yd)return{bytesValue:DK(i.serializer,n._byteString)};if(n instanceof Oi){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:KR(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.pu(`Unsupported field value: ${oj(n)}`)}(t,e)}function pQ(t,e){const r={};return uK(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zd(t,(n,i)=>{const o=hQ(i,e.Ru(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function mQ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof lj||t instanceof yd||t instanceof Oi||t instanceof fQ)}function yQ(t,e,r){if(!mQ(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=oj(r);throw n==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+n)}}function oPe(t,e,r){if((e=Xr(e))instanceof aj)return e._internalPath;if(typeof e=="string")return gQ(t,e);throw c_("Field path arguments must be of type string or ",t,!1,void 0,r)}const sPe=new RegExp("[~\\*/\\[\\]]");function gQ(t,e,r){if(e.search(sPe)>=0)throw c_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new aj(...e.split("."))._internalPath}catch{throw c_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function c_(t,e,r,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new pe(K.INVALID_ARGUMENT,a+t+l)}function aPe(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Oi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lPe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(bQ("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class lPe extends vQ{data(){return super.data()}}function bQ(t,e){return typeof e=="string"?gQ(t,e):e instanceof aj?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cPe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uPe{convertValue(e,r="none"){switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw we()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Zd(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertGeoPoint(e){return new lj(rr(e.latitude),rr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=UR(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Qm(e));default:return null}}convertTimestamp(e){const r=Xa(e);return new pr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Rt.fromString(e);At(VK(n));const i=new Ym(n.get(1),n.get(3)),o=new ve(n.popFirst(5));return i.isEqual(r)||Ho(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fPe(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dPe extends vQ{constructor(e,r,n,i,o,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new nb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(bQ("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class nb extends dPe{data(e={}){return super.data(e)}}class hPe{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Zv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new nb(this._firestore,this._userDataWriter,n.key,n,new Zv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new nb(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new nb(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:pPe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function pPe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class mPe extends uPe{constructor(e){super(),this.firestore=e}convertBytes(e){return new yd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Oi(this.firestore,null,r)}}function yPe(t){t=md(t,X1);const e=md(t.firestore,J1),r=cQ(e),n=new mPe(e);return cPe(t._query),KCe(r,t._query).then(i=>new hPe(e,n,t,i))}function xQ(t,e,r){t=md(t,Oi);const n=md(t.firestore,J1),i=fPe(t.converter,e,r);return _Q(n,[iPe(nPe(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Wo.none())])}function gPe(t){return _Q(md(t.firestore,J1),[new GR(t._key,Wo.none())])}function _Q(t,e){return function(n,i){const o=new vs;return n.asyncQueue.enqueueAndForget(async()=>OCe(await qCe(n),i,o)),o.promise}(cQ(t),e)}(function(e,r=!0){(function(i){Jd=i})(hk),Vf(new Sc("firestore",(n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new J1(new fEe(n.getProvider("auth-internal")),new mEe(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new pe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ym(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:r},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Bo(a3,"4.4.1",e),Bo(a3,"4.4.1","esm2017")})();const Z1=ZCe(hO),vPe=async()=>await yPe(XCe(Z1,"players")).then(e=>e.docs.map(r=>r.data())).catch(console.log),qT=async t=>{const e={...t,id:fs(),createdAt:new Date().getTime(),updatedAt:new Date().getTime()};return await xQ(sj(Z1,"players",e.id),e),e},bPe=async(t,e)=>{const r={...e,updatedAt:new Date().getTime()};return await xQ(sj(Z1,"players",r.id),r),r},xPe=async t=>(await gPe(sj(Z1,"players",t)),!0);function _Pe({onSelect:t,...e}){const[r,n]=E.useState(""),i=E.useCallback(()=>{n(fs())},[]);return f.jsxs(Yn,{title:"選擇玩家",...e,children:[f.jsx(Re,{onClick:i,color:"secondary",children:"刷新列表"}),f.jsx("div",{className:"mt-4",children:f.jsx(wQ,{onClickPlayer:t},r)})]})}const wQ=({onClickPlayer:t,onClickClone:e,onClickDelete:r})=>{const{value:n,loading:i}=Bye(vPe),o=E.useCallback(l=>{if(!t||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const u=n.find(d=>d.id===c);u&&t(c,u)},[t,n]),s=E.useCallback(l=>{if(!e||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const u=n.find(p=>p.id===c);if(!u)return;const{id:d,...h}=u;e(h)},[e,n]),a=E.useCallback(l=>{if(!r)return;const c=l.currentTarget.getAttribute("data-id");c&&r(c)},[r]);return f.jsxs(f.Fragment,{children:[i&&f.jsx("div",{className:"w-32 text-center mx-auto my-8",children:f.jsx(TO,{})}),!i&&(n==null?void 0:n.length)===0&&f.jsx("div",{className:"text-gray-500 text-center py-4",children:f.jsx("span",{children:"沒有已儲存的玩家"})}),f.jsx("div",{className:`grid grid-cols-1 gap-2 ${e||r?"":"md:grid-cols-2"}`,children:!i&&(n==null?void 0:n.map(l=>f.jsxs("div",{className:"text-left flex items-center gap-x-2",children:[f.jsx("div",{className:"flex-1 cursor-pointer",onClick:o,"data-id":l.id,children:f.jsx(aq,{player:l})}),e&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{color:"primary",variant:"text",onClick:s,"data-id":l.id,children:"複製"})}),r&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{color:"danger",variant:"text",onClick:a,"data-id":l.id,children:"刪除"})})]},l.id)))})]})};function wPe(){const[t,e]=E.useState(),[r,n]=E.useState("1"),[i,o]=Co(!1),s=E.useCallback(()=>o(!1),[o]),a=E.useCallback(()=>{e(void 0),o(!0)},[o]),l=E.useCallback((h,p)=>{e(p),o(!0)},[o]),c=E.useCallback(h=>{qT({...h,name:h.name+"(複製)"}).then(()=>{n(fs())})},[]),u=E.useCallback(h=>{confirm("確定要刪除玩家嗎？")&&xPe(h).then(()=>{n(fs())})},[]),d=E.useCallback(h=>h.id?bPe(h.id,h).then(()=>{n(fs()),o(!1)}):qT(h).then(()=>{n(fs()),o(!1)}),[o]);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-4xl",children:"玩家"})}),f.jsx("div",{children:f.jsx(Re,{onClick:a,children:"新增"})})]}),f.jsx(wQ,{onClickPlayer:l,onClickClone:c,onClickDelete:u},r)]}),f.jsx(Yn,{title:"新增／修改玩家",open:i,onClose:s,children:f.jsx("div",{className:"container space-y-6",children:f.jsx(i7,{onSubmit:d,defaultValue:t})})})]})}const SPe={0:"東",1:"南",2:"西",3:"北"};function EPe({playerIndex:t,...e}){return f.jsx("span",{...e,children:SPe[t]})}const APe={0:{title:"",name:"玩家A",color:"#6700cf"},1:{title:"",name:"玩家B",color:"#00b5de"},2:{title:"",name:"玩家C",color:"#e3277b"},3:{title:"",name:"玩家D",color:"#03ada5"}},CPe=`${new Date().toISOString().substring(0,10)} 對局`;function PPe(){const t=xz(),[,e]=jte(),{getValues:r,control:n}=qd({defaultValues:{name:CPe,startingScore:"25000",isManganRoundUp:"1",yakuMax:"12",yakumanMax:"13"}}),i=Ka({name:"startingScore",control:n}),[o,s]=E.useState(APe),[a,l]=E.useState(),[c,u]=Co(!1),d=E.useCallback(w=>{const A=w.currentTarget.getAttribute("data-player-index");if(!A)return;const C=o[A];l({index:A,player:C}),u(!0)},[o,u]),h=E.useCallback(async w=>{a&&(s(A=>({...A,[a.index]:{...A[a.index],...w}})),u(!1))},[a,u]),p=E.useCallback(()=>{u(!1)},[u]),[m,y]=E.useState(),g=E.useCallback(w=>{w.preventDefault(),y("choose")},[]),b=E.useCallback(()=>{y(null)},[]),v=E.useCallback((w,A)=>{m==="choose"&&(l(C=>C?{...C,player:A}:void 0),y(null))},[m]),x=E.useCallback(w=>{const A=w.currentTarget;if(!A)return;const C=A.getAttribute("data-player-index");if(!C)return;const T=C==="0"?"1":C==="1"?"2":"3";s(P=>({...P,[C]:P[T],[T]:P[C]}))},[]),[{loading:S},_]=Kw(async()=>{const{name:w,...A}=r(),C=await Promise.all(Object.values(o).map(N=>N.id||N.name==="玩家A"||N.name==="玩家B"||N.name==="玩家C"||N.name==="玩家D"?Promise.resolve(N):qT(N))),T={code:Cye(),name:w,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:A,players:{0:C[0],1:C[1],2:C[2],3:C[3]},activeResultDetail:null},P=await t.push("matches",T),I=parseInt(A.startingScore),O={matchId:P.key,code:Rx(T.code,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await t.push("matchRounds",O),e(`/match/${O.matchId}/obs`)},[t,r,o,e]);return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"container mx-auto max-w-screen-sm",children:f.jsxs("div",{className:"min-h-screen flex flex-col py-16 gap-y-4",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"space-y-12",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h1",{className:"text-4xl",children:"對局"}),f.jsx(wn,{label:"對局名稱",children:f.jsx($n,{name:"name",control:n,rules:{required:!0},render:({field:w})=>f.jsx("div",{className:"text-xl",children:f.jsx(ba,{...w})})})}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx(wn,{label:"起始點數",children:f.jsx($n,{name:"startingScore",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(as,{...w,children:[f.jsx("option",{value:"25000",children:"25000"}),f.jsx("option",{value:"30000",children:"30000"}),f.jsx("option",{value:"35000",children:"35000"}),f.jsx("option",{value:"50000",children:"50000"}),f.jsx("option",{value:"100000",children:"100000"})]})})}),f.jsx(wn,{label:"滿貫切上",children:f.jsx($n,{name:"isManganRoundUp",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(as,{...w,children:[f.jsx("option",{value:"0",children:"不切上"}),f.jsx("option",{value:"1",children:"切上 (3翻70符 & 4翻40符 = 滿貫)"})]})})}),f.jsx(wn,{label:"累積翻數上限",children:f.jsx($n,{name:"yakuMax",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(as,{...w,children:[f.jsx("option",{value:"12",children:"三倍滿 (12翻)"}),f.jsx("option",{value:"13",children:"累計役滿 (13翻)"})]})})}),f.jsx(wn,{label:"役滿上限",children:f.jsx($n,{name:"yakumanMax",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(as,{...w,children:[f.jsx("option",{value:"13",children:"單役滿"}),f.jsx("option",{value:"26",children:"兩倍役滿"}),f.jsx("option",{value:"39",children:"三倍役滿"}),f.jsx("option",{value:"130",children:"無上限"})]})})})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h1",{className:"text-4xl",children:"玩家"}),f.jsx("div",{children:["0","1","2","3"].map(w=>f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-x-4",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("div",{className:"h-14 w-14 border-4 rounded border-black text-[40px] flex items-center justify-center pb-1",children:f.jsx(EPe,{playerIndex:w})})}),f.jsx("div",{className:"flex-1 text-[48px] cursor-pointer hover:scale-105","data-player-index":w,onClick:d,children:f.jsx(Ha,{player:o[w],score:i})})]},w),w!=="3"&&f.jsx("div",{className:"text-center",children:f.jsx(Re,{variant:"icon",color:"secondary",type:"button","data-player-index":w,onClick:x,children:f.jsx("i",{className:"bi bi-arrow-down-up"})})})]}))})]})]})}),f.jsx("div",{className:"shrink-0 space-y-4",children:f.jsx(Re,{size:"xlarge",className:"w-full",onClick:_,loading:S,type:"submit",children:"開始對局"})})]})}),f.jsx(Yn,{title:f.jsxs("div",{className:"space-x-4",children:[f.jsx("span",{children:"修改玩家"}),f.jsxs("a",{href:"#",className:"text-xs underline font-normal text-teal-600 hover:text-teal-500 align-middle",onClick:g,children:[f.jsx("i",{className:"bi bi-search"}),"搜尋玩家"]})]}),open:c,onClose:p,children:f.jsxs("div",{className:"container space-y-6",children:[!!(a!=null&&a.player.id)&&f.jsxs("div",{className:"py-2 px-3 bg-yellow-200 text-yellow-800 rounded",children:["注意：在這裡的修改不會儲存到玩家列表的資料庫。假如你想保留這些修改，請在"," ",f.jsxs("a",{href:"/players",target:"_blank",className:"text-teal-600 underline",children:["玩家列表 ",f.jsx("i",{className:"bi bi-box-arrow-up-right"})]})," ","中修改。"]}),f.jsx(i7,{onSubmit:h,defaultValue:a==null?void 0:a.player})]})}),f.jsx(_Pe,{open:m==="choose",onSelect:v,onClose:b})]})}function TPe({team:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return f.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})}),e&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{variant:"icon",color:"inverted",type:"button",onClick:i,children:f.jsx("i",{className:"bi bi-pencil"})})})]})}function IPe(){const{data:t,update:e,push:r}=Zr("teams"),n=E.useMemo(()=>Object.entries(t??{}).reverse().map(([b,v])=>({...v,_id:b})),[t]),[i,o]=Co(!1),{register:s,reset:a,handleSubmit:l,control:c}=qd({defaultValues:{_id:void 0,name:"新的隊伍",color:"#000000"}}),u=Ka({control:c}),d=E.useMemo(()=>({name:"隊員名字",title:u.name??"",color:u.color??"#000000"}),[u.color,u.name]),h=E.useRef(null),p=E.useCallback(()=>o(!1),[o]),m=E.useCallback(()=>{a({_id:"",name:"新的隊伍",color:"#000000"}),o(!0)},[a,o]),y=E.useCallback(b=>{a({...b}),o(!0)},[a,o]),g=E.useMemo(()=>l(b=>{b._id?e({[b._id]:b}):r(b),o(!1)}),[l,r,o,e]);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-4xl",children:"隊伍"})}),f.jsx("div",{children:f.jsx(Re,{onClick:m,children:"新增"})})]}),f.jsx("div",{className:"space-y-2",children:n.map(b=>f.jsx(TPe,{team:b,onClickEdit:y},b._id))})]}),f.jsx(Yn,{title:"新增／修改隊伍",open:i,onClose:p,children:f.jsx("div",{className:"container",children:f.jsxs("form",{ref:h,onSubmit:g,children:[f.jsx("input",{type:"hidden",...s("_id")}),f.jsxs("div",{children:[f.jsx(wn,{className:"mb-6",label:"名字",children:f.jsx($n,{name:"name",control:c,rules:{required:!0},render:({field:b})=>f.jsx(ba,{...b})})}),f.jsx(wn,{className:"mb-6",label:"顏色（務必選能看清楚白字的深色）",children:f.jsx($n,{name:"color",control:c,rules:{required:!0},render:({field:b})=>f.jsx(BH,{...b})})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"mb-2",children:"預覽"}),f.jsx("div",{className:"text-[4rem] px-4 pt-6 pb-1 bg-gray-800 text-white relative",children:f.jsx(Ha,{player:d,score:25e3})})]}),f.jsxs("div",{className:"flex gap-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",color:"secondary",type:"button",onClick:p,children:"取消"})}),f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",type:"submit",children:"儲存"})})]})]})})})]})}function NPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(BG,{params:r})}function kPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=es((e==null?void 0:e.matchId)??"");return!r||!i?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:f.jsx(Ag,{players:r.players,matchRounds:n,className:"w-full table-auto"})})})}function OPe(){const{data:t}=Zr("matches"),e=E.useMemo(()=>Object.entries(t??{}).reverse().map(([r,n])=>({...n,_id:r})),[t]);return f.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsx("div",{className:"flex justify-between items-center",children:f.jsx("div",{children:f.jsx("h1",{className:"text-4xl",children:"對局"})})}),f.jsxs("table",{className:"data-table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"對局"}),f.jsx("th",{children:"東家"}),f.jsx("th",{children:"南家"}),f.jsx("th",{children:"西家"}),f.jsx("th",{children:"北家"})]})}),f.jsx("tbody",{children:e.map(r=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx("a",{href:`/match/${r._id}`,target:"_blank",children:r.name})}),f.jsx("td",{children:r.players[0].name}),f.jsx("td",{children:r.players[1].name}),f.jsx("td",{children:r.players[2].name}),f.jsx("td",{children:r.players[3].name})]},r._id))})]})]})}function RPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchCurrentRound:n}=es((e==null?void 0:e.matchId)??"");return!r||!n?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6"})})}function jPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=es((e==null?void 0:e.matchId)??""),[o,s]=E.useState(0);return E.useEffect(()=>{const l=setInterval(()=>{s(c=>1-c)},8e3);return()=>{clearInterval(l)}},[]),!r||!i?f.jsx("div",{children:"對局讀取失敗。"}):f.jsxs("div",{children:[f.jsx("div",{className:o===0?"block":"hidden",children:f.jsx(Ag,{players:r.players,matchRounds:n,className:"w-full table-auto"})}),f.jsx("div",{className:o===1?"block":"hidden"})]})}function $Pe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(PH,{params:r})}const e0=({teamPlayer:t})=>{const e=E.useMemo(()=>PO(t.color),[t.color]);return f.jsxs("div",{className:"relative overflow-hidden",children:[f.jsx("table",{className:"w-full",children:f.jsxs("tbody",{children:[f.jsxs("tr",{style:{background:t.color},children:[f.jsx("td",{className:"w-[8mm] h-[8mm]"}),f.jsx("td",{className:"w-[2mm] border-r border-white"}),f.jsx("td",{}),f.jsx("td",{className:"w-[2mm] border-l border-white"}),f.jsx("td",{className:"w-[8mm] h-[8mm]"})]}),f.jsxs("tr",{style:{background:t.color},children:[f.jsx("td",{className:"h-[2mm] border-b border-white"}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{className:"h-[2mm] border-b border-white"})]}),f.jsxs("tr",{style:{background:`linear-gradient(180deg, ${t.color}, ${e})`},children:[f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{className:"w-[150mm] h-[40mm]"}),f.jsx("td",{}),f.jsx("td",{})]}),f.jsxs("tr",{style:{background:e},children:[f.jsx("td",{className:"h-[2mm] border-t border-white"}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{className:"h-[2mm] border-t border-white"})]}),f.jsxs("tr",{style:{background:e},children:[f.jsx("td",{className:"w-[8mm] h-[8mm]"}),f.jsx("td",{className:"w-[2mm] border-r border-white"}),f.jsx("td",{}),f.jsx("td",{className:"w-[2mm] border-l border-white"}),f.jsx("td",{className:"w-[8mm] h-[8mm]"})]})]})}),f.jsx("div",{className:"absolute left-[0] top-[2.5mm] w-[55mm] h-[55mm] bg-contain opacity-50",style:{backgroundImage:`url(${t.teamLogoImageUrl+"?w=500&h=500"})`}}),f.jsxs("div",{className:"absolute top-[10mm] bottom-[10mm] left-[25mm] right-[12mm] flex flex-col items-center justify-center",children:[f.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold mb-[3mm]",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerName}),f.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerNickname})]})]})},DPe=()=>{const{matchId:t}=Dte(),{data:e}=qa({queryKey:["matches",t],queryFn:({queryKey:r})=>AO(r[1]),enabled:!!t});return e?f.jsxs("div",{className:"pt-16",children:[f.jsxs("div",{className:"w-[170mm] mx-auto mb-8 print:hidden",children:[f.jsx("p",{children:"右鍵「列印」，設定如下："}),f.jsxs("ul",{children:[f.jsxs("li",{children:["紙張大小：",f.jsx("strong",{children:"A4"})]}),f.jsxs("li",{children:["邊界：",f.jsx("strong",{children:"無邊界"})]}),f.jsxs("li",{children:["選項：",f.jsx("strong",{children:"打勾「背景圖片」"})]})]})]}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(e0,{teamPlayer:e==null?void 0:e.playerEast})}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(e0,{teamPlayer:e==null?void 0:e.playerSouth})}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(e0,{teamPlayer:e==null?void 0:e.playerWest})}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(e0,{teamPlayer:e==null?void 0:e.playerNorth})})]}):f.jsx(f.Fragment,{})},SQ=({params:{matchId:t}})=>{const{match:e,matchRounds:r}=es(t),n=E.useMemo(()=>Object.entries(r??{}).filter(([,i])=>!!i.resultDetail).map(([i,o])=>({id:i,...o}))??[],[r]);return!e||!r?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-8",children:[f.jsx("h1",{className:"text-4xl text-center",children:e.name}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h4",{className:"text-3xl",children:[f.jsx("i",{className:"bi bi-bar-chart-steps"})," 分數"," ",f.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),f.jsx(Ag,{players:e.players,matchRounds:r??{},className:"w-full table-auto"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h4",{className:"text-3xl",children:[f.jsx("i",{className:"bi bi-clock-history"})," 和牌記錄"]}),f.jsxs("table",{className:"data-table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"局數"}),f.jsx("th",{children:"玩家"}),f.jsx("th",{children:"分數"}),f.jsx("th",{children:"役種"})]})}),f.jsx("tbody",{children:n.map(i=>f.jsxs("tr",{className:"odd:bg-neutral-200",children:[f.jsx("td",{className:"text-center py-1",children:f.jsx(ds,{roundCount:i.roundCount,extendedRoundCount:i.extendedRoundCount})}),f.jsx("td",{className:"text-center py-1",style:{background:e.players[i.resultDetail.winnerPlayerIndex].color},children:e.players[i.resultDetail.winnerPlayerIndex].name}),f.jsx("td",{className:"text-center py-1 text-xl",children:f.jsx(Ft,{value:i.playerResults[i.resultDetail.winnerPlayerIndex].afterScore-i.playerResults[i.resultDetail.winnerPlayerIndex].beforeScore,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}),f.jsxs("td",{className:"text-center py-1",children:[f.jsx("p",{children:i.resultDetail.yakus.map(({label:o})=>o).join(" ")}),f.jsx("p",{children:f.jsx(jx,{han:i.resultDetail.han,fu:i.resultDetail.fu,yakumanCount:i.resultDetail.yakumanCount,isManganRoundUp:e.setting.isManganRoundUp==="1"})})]})]},i.id))})]})]})]})};function MPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(SQ,{params:r})}function EQ({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n}=es(t),[i,o]=E.useState(!1),[s,a]=E.useState(!1),l=E.useCallback(()=>{if(!e||!r)return;const c={_id:t,...LG(Object.values(r))};a(!0),fetch(`https://hkleague2024.hkmahjong.org/api/match/${c._id}/result`,{method:"PATCH",body:JSON.stringify(c),headers:{Accept:"application/json"}}).then(()=>{o(!0),a(!1),alert("上傳完畢，請在資料庫上查看。")})},[e,t,r]);return!e||!n?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[f.jsxs("div",{children:[f.jsx("h6",{className:"text-center text-sm",children:t}),f.jsx("h3",{className:"text-2xl text-center",children:e.name})]}),f.jsx(Ag,{players:e.players,matchRounds:r,className:"w-full table-auto"}),f.jsxs("div",{className:"text-center",children:[!i&&f.jsx(Re,{disabled:s,onClick:l,children:s?"上傳中…":"上傳成績"}),i&&f.jsx("a",{href:`https://hkmjbs.sanity.studio/structure/general-list-matches-past;${t}`,children:f.jsx(Re,{color:"secondary",children:"在資料庫上查看"})})]})]})})}const FPe=({queryKey:t})=>AO(t[1],t[2]),uj=(t,e)=>qa({queryKey:["matches",t,e],queryFn:FPe,enabled:!!t}),LPe=({initialMinutes:t})=>{const[e,r]=E.useState(0),[n,i]=E.useMemo(()=>[Math.floor(e/60).toString().padStart(2,"0"),(e%60).toString().padStart(2,"0")],[e]);return E.useEffect(()=>{r(t*60)},[t]),qye(()=>{r(o=>o-1)},e>0?1e3:null),e<=0?f.jsx("span",{className:"text-[.5em]",children:"比賽即將開始"}):f.jsxs("span",{children:[n,":",i]})},AQ=({params:{matchId:t}})=>{const{data:e}=uj(t),r=E.useMemo(()=>e?[e[e._order[0]],e[e._order[1]],e[e._order[2]],e[e._order[3]]]:[],[e]),n=kF("startAt"),i=kF("m"),o=E.useMemo(()=>{if(i)return parseInt(i);try{const[s,a]=n.split(":").map(u=>parseInt(u)),l=new Date;l.setHours(s),l.setMinutes(a);const c=new Date;return Math.max(0,(l.getTime()-c.getTime())/6e4)}catch{return 15}},[i,n]);return f.jsxs("div",{className:"fixed inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:[f.jsxs("div",{className:"w-[80vw]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),f.jsx("div",{children:f.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),f.jsxs("div",{className:"flex justify-between items-center mb-[10vh]",children:[f.jsxs("div",{style:{paddingBottom:"25vh"},children:[f.jsx("p",{className:"text-left text-[80px] leading-3",children:"下一場賽事"}),f.jsx("p",{className:"text-left text-[120px] scale-[200%] origin-top-left font-numeric",children:f.jsx(LPe,{initialMinutes:o})})]}),f.jsx("div",{className:"grid grid-cols-2 gap-[2vw]",children:r.map(s=>f.jsx("img",{className:"w-[16vw] aspect-square",src:s.teamLogoImageUrl+"?w=500&h=500"}))})]})]}),f.jsxs("div",{className:"fixed bottom-[5vh] left-[10vw]",children:[f.jsx("div",{children:f.jsx("img",{src:"/images/homepage-qr.png",className:"w-[8vw]",alt:""})}),f.jsxs("p",{className:"text-[32px]",children:["聯賽官網: ",f.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})]})]})]})};function BPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(AQ,{params:r})}function UPe(){return f.jsx("div",{className:"fixed inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:f.jsxs("div",{className:"w-[80vw]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),f.jsx("div",{children:f.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),f.jsxs("div",{className:"flex flex-col justify-center items-center h-[70vh]",children:[f.jsx("p",{className:"text-[100px] text-center",children:"今天賽事已結束，感謝各位收看！"}),f.jsx("div",{className:"text-center mt-[5vh]",children:f.jsx("img",{src:"/images/homepage-qr.png",className:"w-[12vw] mx-auto",alt:""})}),f.jsx("p",{className:"text-[48px] text-center",children:f.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})}),f.jsx("p",{className:"text-[48px] text-center",children:"賽程、賽事重溫、隊伍介紹、新手教程"})]})]})})}var CQ={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,n(a)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(CQ);var VPe=CQ.exports;const Cr=ot(VPe),U3=({teamPlayer:t,team:e,fadeIn:r,fadeOut:n,delay:i})=>{const o=PO(e.color);return f.jsxs("div",{className:Cr("relative aspect-[18/25] rounded-[1em] overflow-hidden",{"mi-team-player-in":r,"mi-team-player-out":n}),style:{background:`linear-gradient(180deg, ${e.color}, ${o})`,animationDelay:i+"s"},children:[f.jsx("div",{className:"absolute inset-0",style:{background:`url(${e.teamLogoImageUrl+"?w=500&h=500&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.2}}),f.jsx("img",{className:"relative z-10 block mx-auto w-full",src:t.playerPortraitImageUrl+"?h=500&w=360&auto=format&fit=crop&crop=top",alt:t.playerName}),f.jsx("div",{className:"absolute z-20 bottom-0 left-0 right-0 text-center py-[0.25em]",style:{background:"linear-gradient(to top, #00000090 80%, transparent"},children:f.jsxs("div",{children:[f.jsx("p",{className:"text-[1.5em] leading-[1em] font-semibold",children:t.playerNickname}),f.jsx("p",{className:"text-[0.8em]",children:t.playerName})]})})]},t.playerName)},WPe=({slide:t,status:e,subslide:r})=>{var n,i,o,s,a,l,c,u,d,h,p,m,y,g,b,v,x,S,_,w,A;return t.type==="teams"?f.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:t.teams.map((C,T)=>f.jsxs("div",{className:Cr("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?T*.25+"s":"0s"},children:[f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${C.color})`,opacity:.5}},C.teamId),f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${C.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),f.jsxs("div",{className:Cr("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[f.jsx("img",{src:C.teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),f.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:C.teamName}),f.jsx("h3",{className:"text-[1em] font-semibold text-center",children:C.teamSecondaryName})]}),f.jsxs("div",{className:Cr("absolute inset-0 opacity-0",{"mi-teams-player-in":e>=0&&r>=1,"mi-teams-player-out":e>0}),style:{animationDelay:e===0?T*.25+"s":"0s"},children:[f.jsx("img",{src:C.playerPortraitImageUrl+"?w=360&h=500&auto=format",className:"aspect-[18/25] w-full",alt:""}),f.jsxs("div",{className:"font-semibold text-center",children:[f.jsx("p",{className:"text-[1em]",children:C.playerNickname}),f.jsx("p",{className:"text-[.8em]",children:C.playerName})]})]})]},C.teamId))})]}):t.type==="team"?f.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:Cr("absolute inset-0 -z-10",{"mi-team-colorBackground-in":e===0,"mi-team-colorBackground-out":e>0}),style:{background:`linear-gradient(to bottom, transparent 60%, ${t.team.color})`,opacity:.5}}),f.jsx("div",{className:Cr("absolute inset-0 -z-10",{"mi-team-logoBackground-in":e===0,"mi-team-logoBackground-out":e>0}),style:{background:`url(${t.team.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.125}}),f.jsxs("div",{className:Cr("text-right mb-[.5em]",{"mi-team-team-in":e===0,"mi-team-team-out":e>0}),children:[f.jsxs("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:[f.jsxs("div",{className:"text-left space-y-[.5em]",children:[f.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[f.jsx("p",{children:"隊伍積分"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:ro((n=t.team.teamStatistic)==null?void 0:n.point)})})]}),f.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[f.jsx("p",{children:"隊伍排名"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:id((i=t.team.teamStatistic)==null?void 0:i.ranking)})})]})]}),f.jsx("img",{src:t.team.teamLogoImageUrl+"?w=512&h=512&auto=format",alt:t.team.teamFullname,className:"aspect-square",style:{width:256,height:256}})]}),f.jsx("h3",{className:"inline-block font-semibold text-right text-[1.5em]",children:t.team.teamFullname})]}),f.jsxs("div",{className:"flex-[2] relative",children:[f.jsx("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e===0&&r>=0&&r<1?1:0},children:t.teamPlayers.map((C,T)=>f.jsx(U3,{team:t.team,teamPlayer:C,fadeIn:e===0&&r<=0,fadeOut:e===0&&r>0,delay:(r<=0?1.7:0)+T*.25},C.playerName))}),f.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e>=0&&e<1&&r>=1&&r<2?1:0},children:[f.jsx(U3,{team:t.team,teamPlayer:t.team,fadeIn:e===0&&r===1,fadeOut:e>0,delay:0}),f.jsx("div",{className:"col-span-3",children:f.jsxs("div",{className:Cr({"mi-team-activePlayerStat-in":e===0&&r===1,"mi-team-activePlayerStat-out":e>0}),children:[f.jsxs("div",{className:"flex justify-between mb-[1em]",children:[f.jsxs("p",{className:"text-[2em] flex items-center",children:[f.jsx("span",{children:"個人總分"}),f.jsx("span",{className:"font-numeric",children:ro((o=t.team.playerStatistic)==null?void 0:o.point)}),f.jsxs("span",{className:"ml-4 font-numeric text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[((s=t.team.playerStatistic)==null?void 0:s.pointRanking)??"-","名"]})]}),f.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",f.jsx("span",{className:"font-numeric",children:((a=t.team.playerStatistic)==null?void 0:a.matchCount)??"-"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"font-numeric",children:Us((l=t.team.playerStatistic)==null?void 0:l.nonFourthP)}),f.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((c=t.team.playerStatistic)==null?void 0:c.nonFourthPRanking)??"-","名"]})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"連對率"}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"font-numeric",children:Us((u=t.team.playerStatistic)==null?void 0:u.firstAndSecondP)}),f.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((d=t.team.playerStatistic)==null?void 0:d.firstAndSecondPRanking)??"-","名"]})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"立直率"}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"font-numeric",children:Us((h=t.team.playerStatistic)==null?void 0:h.riichiP)}),f.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((p=t.team.playerStatistic)==null?void 0:p.riichiPRanking)??"-","名"]})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"和了率"}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"font-numeric",children:Us((m=t.team.playerStatistic)==null?void 0:m.ronP)}),f.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((y=t.team.playerStatistic)==null?void 0:y.ronPRanking)??"-","名"]})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"銃和率"}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"font-numeric",children:Us((g=t.team.playerStatistic)==null?void 0:g.chuckP)}),f.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((b=t.team.playerStatistic)==null?void 0:b.chuckPRanking)??"-","名"]})]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"副露率"}),f.jsxs("p",{className:"flex items-center",children:[f.jsx("span",{className:"font-numeric",children:Us((v=t.team.playerStatistic)==null?void 0:v.revealP)}),f.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((x=t.team.playerStatistic)==null?void 0:x.revealPRanking)??"-","名"]})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.8em]",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("p",{className:"text-[.9em]",children:"和了平均打點"}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"font-numeric",children:Us((S=t.team.playerStatistic)==null?void 0:S.ronPureScoreAvg)}),f.jsxs("p",{className:"font-numeric text-[.75em] min-w-[2.5em] text-cyan-400 -mt-4",children:[((_=t.team.playerStatistic)==null?void 0:_.ronPureScoreAvgRanking)??"-","名"]})]})]}),f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("p",{className:"text-[.9em]",children:"銃和平均打點"}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"font-numeric",children:Us((w=t.team.playerStatistic)==null?void 0:w.chuckPureScoreAvg)}),f.jsxs("p",{className:"font-numeric text-[.75em] min-w-[2.5em] text-cyan-400 -mt-4",children:[((A=t.team.playerStatistic)==null?void 0:A.chuckPureScoreAvgRanking)??"-","名"]})]})]})]})]})})]})]})]}):f.jsx(f.Fragment,{})},PQ=({params:{matchId:t}})=>{const{data:e}=uj(t,!0),r=E.useMemo(()=>e?[e==null?void 0:e.playerEast.teamId,e==null?void 0:e.playerSouth.teamId,e==null?void 0:e.playerWest.teamId,e==null?void 0:e.playerNorth.teamId]:null,[e]),{data:n}=qa({queryKey:["match",t,"groupedPlayers"],queryFn:()=>uye(r,e==null?void 0:e.tournament._id),enabled:!!e&&!!r}),i=E.useMemo(()=>!e||!n?[{type:"empty",_id:"empty",subslide:0}]:[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:[e.playerEast,e.playerSouth,e.playerWest,e.playerNorth],subslide:1},{_id:"team_playerEast",type:"team",team:e.playerEast,teamPlayers:n[e.playerEast.teamId],subslide:2},{_id:"team_playerSouth",type:"team",team:e.playerSouth,teamPlayers:n[e.playerSouth.teamId],subslide:2},{_id:"team_playerWest",type:"team",team:e.playerWest,teamPlayers:n[e.playerWest.teamId],subslide:2},{_id:"team_playerNorth",type:"team",team:e.playerNorth,teamPlayers:n[e.playerNorth.teamId],subslide:2}],[e,n]),[o,s]=E.useState(0),[a,l]=E.useState(0),[c,u]=E.useState(!1),d=E.useCallback(()=>{if(c)return;const h=i[o];if(!h){s(1);return}h.type==="empty"?s(p=>p+1):a>=h.subslide-1?(s(p=>p+.5),u(!0),setTimeout(()=>{s(p=>Math.ceil(p)),l(0),u(!1)},1200)):(l(p=>p+.5),u(!0),setTimeout(()=>{l(p=>Math.ceil(p)),u(!1)},1200))},[c,o,i,a]);return!e||!n?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"match-introduction fixed inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:d,children:[f.jsx("div",{className:"absolute py-16 px-24 inset-0",children:f.jsxs("div",{className:"flex gap-x-[0.25em] mi-title-in",children:[f.jsx("div",{children:f.jsx("img",{src:e.tournament.logoUrl+"?w=280&h=280&auto=format",alt:e.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:e.tournament.name}),f.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:e.nameAlt})]})]})}),i.map((h,p)=>f.jsx(WPe,{slide:h,status:o-p,subslide:a},h._id))]})},t0=({player:t})=>f.jsx("div",{className:"relative w-full h-full border-[.5em]",style:{borderColor:t.color},children:f.jsxs("div",{className:"absolute top-0 left-0 flex gap-x-8 pr-1 rounded-br-lg text-[1.5em] font-semibold text-white",style:{backgroundColor:t.color},children:[f.jsxs("p",{children:[t.name," (",t.nickname,")"]}),f.jsx("p",{children:t.currentStatus.afterScore})]})}),TQ=({params:{matchId:t}})=>{const{match:e,matchCurrentRound:r}=es(t),n=E.useMemo(()=>{if(!e||!r)return[];const i=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],o=Object.entries(r.playerResults).map(([s,a])=>({playerIndex:s,score:a.afterScore})).sort((s,a)=>a.score-s.score).map((s,a)=>({playerIndex:s.playerIndex,...i[a],point:(s.score-3e4)/1e3+i[a].point})).reduce((s,a)=>(s[a.playerIndex]={point:a.point,ranking:a.ranking},s),{});return["0","1","2","3"].map(s=>({...e.players[s],color:e.players[s].color,currentStatus:{...r.playerResults[s],isEast:Zn(s,r.roundCount),...o[s]}}))},[e,r]);return!e||n.length===0?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"fixed inset-0 grid grid-cols-8",children:[f.jsx("div",{className:"col-span-5",children:f.jsx(t0,{player:n[0]})}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-2"}),f.jsx("div",{className:"col-span-5",children:f.jsx(t0,{player:n[1]})}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-5",children:f.jsx(t0,{player:n[2]})}),f.jsx("div",{className:"col-span-3 row-span-2"}),f.jsx("div",{className:"col-span-5",children:f.jsx(t0,{player:n[3]})})]})};function zPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(TQ,{params:r})}function GPe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(EQ,{params:r})}function IQ(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=IQ(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ct(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=IQ(t))&&(n&&(n+=" "),n+=e);return n}var qPe=Array.isArray,Vn=qPe,HPe=typeof Ol=="object"&&Ol&&Ol.Object===Object&&Ol,NQ=HPe,KPe=NQ,QPe=typeof self=="object"&&self&&self.Object===Object&&self,YPe=KPe||QPe||Function("return this")(),ts=YPe,XPe=ts,JPe=XPe.Symbol,zg=JPe,V3=zg,kQ=Object.prototype,ZPe=kQ.hasOwnProperty,eTe=kQ.toString,Lh=V3?V3.toStringTag:void 0;function tTe(t){var e=ZPe.call(t,Lh),r=t[Lh];try{t[Lh]=void 0;var n=!0}catch{}var i=eTe.call(t);return n&&(e?t[Lh]=r:delete t[Lh]),i}var rTe=tTe,nTe=Object.prototype,iTe=nTe.toString;function oTe(t){return iTe.call(t)}var sTe=oTe,W3=zg,aTe=rTe,lTe=sTe,cTe="[object Null]",uTe="[object Undefined]",z3=W3?W3.toStringTag:void 0;function fTe(t){return t==null?t===void 0?uTe:cTe:z3&&z3 in Object(t)?aTe(t):lTe(t)}var Ds=fTe;function dTe(t){return t!=null&&typeof t=="object"}var Ms=dTe,hTe=Ds,pTe=Ms,mTe="[object Symbol]";function yTe(t){return typeof t=="symbol"||pTe(t)&&hTe(t)==mTe}var rh=yTe,gTe=Vn,vTe=rh,bTe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xTe=/^\w*$/;function _Te(t,e){if(gTe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||vTe(t)?!0:xTe.test(t)||!bTe.test(t)||e!=null&&t in Object(e)}var fj=_Te;function wTe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var al=wTe;const nh=ot(al);var STe=Ds,ETe=al,ATe="[object AsyncFunction]",CTe="[object Function]",PTe="[object GeneratorFunction]",TTe="[object Proxy]";function ITe(t){if(!ETe(t))return!1;var e=STe(t);return e==CTe||e==PTe||e==ATe||e==TTe}var dj=ITe;const Me=ot(dj);var NTe=ts,kTe=NTe["__core-js_shared__"],OTe=kTe,jA=OTe,G3=function(){var t=/[^.]+$/.exec(jA&&jA.keys&&jA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function RTe(t){return!!G3&&G3 in t}var jTe=RTe,$Te=Function.prototype,DTe=$Te.toString;function MTe(t){if(t!=null){try{return DTe.call(t)}catch{}try{return t+""}catch{}}return""}var OQ=MTe,FTe=dj,LTe=jTe,BTe=al,UTe=OQ,VTe=/[\\^$.*+?()[\]{}|]/g,WTe=/^\[object .+?Constructor\]$/,zTe=Function.prototype,GTe=Object.prototype,qTe=zTe.toString,HTe=GTe.hasOwnProperty,KTe=RegExp("^"+qTe.call(HTe).replace(VTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QTe(t){if(!BTe(t)||LTe(t))return!1;var e=FTe(t)?KTe:WTe;return e.test(UTe(t))}var YTe=QTe;function XTe(t,e){return t==null?void 0:t[e]}var JTe=XTe,ZTe=YTe,eIe=JTe;function tIe(t,e){var r=eIe(t,e);return ZTe(r)?r:void 0}var Gc=tIe,rIe=Gc,nIe=rIe(Object,"create"),eS=nIe,q3=eS;function iIe(){this.__data__=q3?q3(null):{},this.size=0}var oIe=iIe;function sIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var aIe=sIe,lIe=eS,cIe="__lodash_hash_undefined__",uIe=Object.prototype,fIe=uIe.hasOwnProperty;function dIe(t){var e=this.__data__;if(lIe){var r=e[t];return r===cIe?void 0:r}return fIe.call(e,t)?e[t]:void 0}var hIe=dIe,pIe=eS,mIe=Object.prototype,yIe=mIe.hasOwnProperty;function gIe(t){var e=this.__data__;return pIe?e[t]!==void 0:yIe.call(e,t)}var vIe=gIe,bIe=eS,xIe="__lodash_hash_undefined__";function _Ie(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=bIe&&e===void 0?xIe:e,this}var wIe=_Ie,SIe=oIe,EIe=aIe,AIe=hIe,CIe=vIe,PIe=wIe;function ih(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ih.prototype.clear=SIe;ih.prototype.delete=EIe;ih.prototype.get=AIe;ih.prototype.has=CIe;ih.prototype.set=PIe;var TIe=ih;function IIe(){this.__data__=[],this.size=0}var NIe=IIe;function kIe(t,e){return t===e||t!==t&&e!==e}var hj=kIe,OIe=hj;function RIe(t,e){for(var r=t.length;r--;)if(OIe(t[r][0],e))return r;return-1}var tS=RIe,jIe=tS,$Ie=Array.prototype,DIe=$Ie.splice;function MIe(t){var e=this.__data__,r=jIe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():DIe.call(e,r,1),--this.size,!0}var FIe=MIe,LIe=tS;function BIe(t){var e=this.__data__,r=LIe(e,t);return r<0?void 0:e[r][1]}var UIe=BIe,VIe=tS;function WIe(t){return VIe(this.__data__,t)>-1}var zIe=WIe,GIe=tS;function qIe(t,e){var r=this.__data__,n=GIe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var HIe=qIe,KIe=NIe,QIe=FIe,YIe=UIe,XIe=zIe,JIe=HIe;function oh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}oh.prototype.clear=KIe;oh.prototype.delete=QIe;oh.prototype.get=YIe;oh.prototype.has=XIe;oh.prototype.set=JIe;var rS=oh,ZIe=Gc,eNe=ts,tNe=ZIe(eNe,"Map"),pj=tNe,H3=TIe,rNe=rS,nNe=pj;function iNe(){this.size=0,this.__data__={hash:new H3,map:new(nNe||rNe),string:new H3}}var oNe=iNe;function sNe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var aNe=sNe,lNe=aNe;function cNe(t,e){var r=t.__data__;return lNe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var nS=cNe,uNe=nS;function fNe(t){var e=uNe(this,t).delete(t);return this.size-=e?1:0,e}var dNe=fNe,hNe=nS;function pNe(t){return hNe(this,t).get(t)}var mNe=pNe,yNe=nS;function gNe(t){return yNe(this,t).has(t)}var vNe=gNe,bNe=nS;function xNe(t,e){var r=bNe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var _Ne=xNe,wNe=oNe,SNe=dNe,ENe=mNe,ANe=vNe,CNe=_Ne;function sh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}sh.prototype.clear=wNe;sh.prototype.delete=SNe;sh.prototype.get=ENe;sh.prototype.has=ANe;sh.prototype.set=CNe;var mj=sh,RQ=mj,PNe="Expected a function";function yj(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(PNe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(yj.Cache||RQ),r}yj.Cache=RQ;var TNe=yj,INe=TNe,NNe=500;function kNe(t){var e=INe(t,function(n){return r.size===NNe&&r.clear(),n}),r=e.cache;return e}var ONe=kNe,RNe=ONe,jNe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$Ne=/\\(\\)?/g,DNe=RNe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(jNe,function(r,n,i,o){e.push(i?o.replace($Ne,"$1"):n||r)}),e}),MNe=DNe;function FNe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var gj=FNe,K3=zg,LNe=gj,BNe=Vn,UNe=rh,VNe=1/0,Q3=K3?K3.prototype:void 0,Y3=Q3?Q3.toString:void 0;function jQ(t){if(typeof t=="string")return t;if(BNe(t))return LNe(t,jQ)+"";if(UNe(t))return Y3?Y3.call(t):"";var e=t+"";return e=="0"&&1/t==-VNe?"-0":e}var WNe=jQ,zNe=WNe;function GNe(t){return t==null?"":zNe(t)}var $Q=GNe,qNe=Vn,HNe=fj,KNe=MNe,QNe=$Q;function YNe(t,e){return qNe(t)?t:HNe(t,e)?[t]:KNe(QNe(t))}var DQ=YNe,XNe=rh,JNe=1/0;function ZNe(t){if(typeof t=="string"||XNe(t))return t;var e=t+"";return e=="0"&&1/t==-JNe?"-0":e}var iS=ZNe,eke=DQ,tke=iS;function rke(t,e){e=eke(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[tke(e[r++])];return r&&r==n?t:void 0}var vj=rke,nke=vj;function ike(t,e,r){var n=t==null?void 0:nke(t,e);return n===void 0?r:n}var MQ=ike;const Ri=ot(MQ);function oke(t){return t==null}var ske=oke;const Xe=ot(ske);var ake=Ds,lke=Vn,cke=Ms,uke="[object String]";function fke(t){return typeof t=="string"||!lke(t)&&cke(t)&&ake(t)==uke}var dke=fke;const Gg=ot(dke);var hke=Ds,pke=Ms,mke="[object Number]";function yke(t){return typeof t=="number"||pke(t)&&hke(t)==mke}var FQ=yke;const gke=ot(FQ);var vke=FQ;function bke(t){return vke(t)&&t!=+t}var xke=bke;const qg=ot(xke);var oo=function(e){return e===0?0:e>0?1:-1},Vl=function(e){return Gg(e)&&e.indexOf("%")===e.length-1},ne=function(e){return gke(e)&&!qg(e)},hr=function(e){return ne(e)||Gg(e)},_ke=0,Hg=function(e){var r=++_ke;return"".concat(e||"").concat(r)},gd=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(e)&&!Gg(e))return n;var o;if(Vl(e)){var s=e.indexOf("%");o=r*parseFloat(e.slice(0,s))/100}else o=+e;return qg(o)&&(o=n),i&&o>r&&(o=r),o},qs=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},wke=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Xi=function(e,r){return ne(e)&&ne(r)?function(n){return e+n*(r-e)}:function(){return r}};function u_(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Ri(n,e))===r})}function mf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function HT(t){"@babel/helpers - typeof";return HT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HT(t)}var Ske=["viewBox","children"],Eke=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],X3=["points","pathLength"],$A={svg:Ske,polygon:X3,polyline:X3},bj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],f_=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),!nh(n))return null;var i={};return Object.keys(n).forEach(function(o){bj.includes(o)&&(i[o]=r||function(s){return n[o](n,s)})}),i},Ake=function(e,r,n){return function(i){return e(r,n,i),null}},d_=function(e,r,n){if(!nh(e)||HT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];bj.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=Ake(s,r,n))}),i},Cke=["children"],Pke=["children"];function J3(t,e){if(t==null)return{};var r=Tke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Tke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function KT(t){"@babel/helpers - typeof";return KT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KT(t)}var Z3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},bs=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},eB=null,DA=null,xj=function t(e){if(e===eB&&Array.isArray(DA))return DA;var r=[];return E.Children.forEach(e,function(n){Xe(n)||(Bx.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),DA=r,eB=e,r};function ji(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return bs(i)}):n=[bs(e)],xj(t).forEach(function(i){var o=Ri(i,"type.displayName")||Ri(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function To(t,e){var r=ji(t,e);return r&&r[0]}var tB=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!ne(n)||n<=0||!ne(i)||i<=0)},Ike=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Nke=function(e){return e&&e.type&&Gg(e.type)&&Ike.indexOf(e.type)>=0},kke=function(e){return e&&KT(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},Oke=function(e,r,n,i){var o,s=(o=$A==null?void 0:$A[i])!==null&&o!==void 0?o:[];return!Me(e)&&(i&&s.includes(r)||Eke.includes(r))||n&&bj.includes(r)},qe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!nh(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;Oke((a=i)===null||a===void 0?void 0:a[s],s,r,n)&&(o[s]=i[s])}),o},LQ=function t(e,r){if(e===r)return!0;var n=E.Children.count(e);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return rB(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=e[i],s=r[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!rB(o,s))return!1}return!0},rB=function(e,r){if(Xe(e)&&Xe(r))return!0;if(!Xe(e)&&!Xe(r)){var n=e.props||{},i=n.children,o=J3(n,Cke),s=r.props||{},a=s.children,l=J3(s,Pke);return i&&a?mf(o,l)&&LQ(i,a):!i&&!a?mf(o,l):!1}return!1},nB=function(e,r){var n=[],i={};return xj(e).forEach(function(o,s){if(Nke(o))n.push(o);else if(o){var a=bs(o.type),l=r[a]||{},c=l.handler,u=l.once;if(c&&(!u||!i[a])){var d=c(o,a,s);n.push(d),i[a]=!0}}}),n},Rke=function(e){var r=e&&e.type;return r&&Z3[r]?Z3[r]:null},jke=function(e,r){return xj(r).indexOf(e)},$ke=["children","width","height","viewBox","className","style","title","desc"];function QT(){return QT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QT.apply(this,arguments)}function Dke(t,e){if(t==null)return{};var r=Mke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function YT(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,c=Dke(t,$ke),u=i||{width:r,height:n,x:0,y:0},d=ct("recharts-surface",o);return k.createElement("svg",QT({},qe(c,!0,"svg"),{className:d,width:r,height:n,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),k.createElement("title",null,a),k.createElement("desc",null,l),e)}var Fke=["children","className"];function XT(){return XT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XT.apply(this,arguments)}function Lke(t,e){if(t==null)return{};var r=Bke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Jt=k.forwardRef(function(t,e){var r=t.children,n=t.className,i=Lke(t,Fke),o=ct("recharts-layer",n);return k.createElement("g",XT({className:o},qe(i,!0),{ref:e}),r)}),mc=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function Uke(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var Vke=Uke,Wke=Vke;function zke(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Wke(t,e,r)}var Gke=zke,qke="\\ud800-\\udfff",Hke="\\u0300-\\u036f",Kke="\\ufe20-\\ufe2f",Qke="\\u20d0-\\u20ff",Yke=Hke+Kke+Qke,Xke="\\ufe0e\\ufe0f",Jke="\\u200d",Zke=RegExp("["+Jke+qke+Yke+Xke+"]");function eOe(t){return Zke.test(t)}var BQ=eOe;function tOe(t){return t.split("")}var rOe=tOe,UQ="\\ud800-\\udfff",nOe="\\u0300-\\u036f",iOe="\\ufe20-\\ufe2f",oOe="\\u20d0-\\u20ff",sOe=nOe+iOe+oOe,aOe="\\ufe0e\\ufe0f",lOe="["+UQ+"]",JT="["+sOe+"]",ZT="\\ud83c[\\udffb-\\udfff]",cOe="(?:"+JT+"|"+ZT+")",VQ="[^"+UQ+"]",WQ="(?:\\ud83c[\\udde6-\\uddff]){2}",zQ="[\\ud800-\\udbff][\\udc00-\\udfff]",uOe="\\u200d",GQ=cOe+"?",qQ="["+aOe+"]?",fOe="(?:"+uOe+"(?:"+[VQ,WQ,zQ].join("|")+")"+qQ+GQ+")*",dOe=qQ+GQ+fOe,hOe="(?:"+[VQ+JT+"?",JT,WQ,zQ,lOe].join("|")+")",pOe=RegExp(ZT+"(?="+ZT+")|"+hOe+dOe,"g");function mOe(t){return t.match(pOe)||[]}var yOe=mOe,gOe=rOe,vOe=BQ,bOe=yOe;function xOe(t){return vOe(t)?bOe(t):gOe(t)}var _Oe=xOe,wOe=Gke,SOe=BQ,EOe=_Oe,AOe=$Q;function COe(t){return function(e){e=AOe(e);var r=SOe(e)?EOe(e):void 0,n=r?r[0]:e.charAt(0),i=r?wOe(r,1).join(""):e.slice(1);return n[t]()+i}}var POe=COe,TOe=POe,IOe=TOe("toUpperCase"),NOe=IOe;const oS=ot(NOe);function wt(t){return function(){return t}}const HQ=Math.cos,h_=Math.sin,mo=Math.sqrt,p_=Math.PI,sS=2*p_,eI=Math.PI,tI=2*eI,Tl=1e-6,kOe=tI-Tl;function KQ(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function OOe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return KQ;const r=10**e;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class ROe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?KQ:OOe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,o,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,r,n,i,o){if(e=+e,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=n-e,c=i-r,u=s-e,d=a-r,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Tl)if(!(Math.abs(d*l-c*u)>Tl)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-s,m=i-a,y=l*l+c*c,g=p*p+m*m,b=Math.sqrt(y),v=Math.sqrt(h),x=o*Math.tan((eI-Math.acos((y+h-g)/(2*b*v)))/2),S=x/v,_=x/b;Math.abs(S-1)>Tl&&this._append`L${e+S*u},${r+S*d}`,this._append`A${o},${o},0,0,${+(d*p>u*m)},${this._x1=e+_*l},${this._y1=r+_*c}`}}arc(e,r,n,i,o,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=e+a,u=r+l,d=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Tl||Math.abs(this._y1-u)>Tl)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%tI+tI),h>kOe?this._append`A${n},${n},0,1,${d},${e-a},${r-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=u}`:h>Tl&&this._append`A${n},${n},0,${+(h>=eI)},${d},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function _j(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new ROe(e)}function wj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function QQ(t){this._context=t}QQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function aS(t){return new QQ(t)}function YQ(t){return t[0]}function XQ(t){return t[1]}function JQ(t,e){var r=wt(!0),n=null,i=aS,o=null,s=_j(a);t=typeof t=="function"?t:t===void 0?YQ:wt(t),e=typeof e=="function"?e:e===void 0?XQ:wt(e);function a(l){var c,u=(l=wj(l)).length,d,h=!1,p;for(n==null&&(o=i(p=s())),c=0;c<=u;++c)!(c<u&&r(d=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,c,l),+e(d,c,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:wt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:wt(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:wt(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(o=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=o=null:o=i(n=l),a):n},a}function r0(t,e,r){var n=null,i=wt(!0),o=null,s=aS,a=null,l=_j(c);t=typeof t=="function"?t:t===void 0?YQ:wt(+t),e=typeof e=="function"?e:wt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?XQ:wt(+r);function c(d){var h,p,m,y=(d=wj(d)).length,g,b=!1,v,x=new Array(y),S=new Array(y);for(o==null&&(a=s(v=l())),h=0;h<=y;++h){if(!(h<y&&i(g=d[h],h,d))===b)if(b=!b)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=h-1;m>=p;--m)a.point(x[m],S[m]);a.lineEnd(),a.areaEnd()}b&&(x[h]=+t(g,h,d),S[h]=+e(g,h,d),a.point(n?+n(g,h,d):x[h],r?+r(g,h,d):S[h]))}if(v)return a=null,v+""||null}function u(){return JQ().defined(i).curve(s).context(o)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:wt(+d),n=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:wt(+d),c):t},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:wt(+d),c):n},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:wt(+d),r=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:wt(+d),c):e},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:wt(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(r)},c.lineX1=function(){return u().x(n).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:wt(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}class ZQ{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function jOe(t){return new ZQ(t,!0)}function $Oe(t){return new ZQ(t,!1)}const Sj={draw(t,e){const r=mo(e/p_);t.moveTo(r,0),t.arc(0,0,r,0,sS)}},DOe={draw(t,e){const r=mo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},eY=mo(1/3),MOe=eY*2,FOe={draw(t,e){const r=mo(e/MOe),n=r*eY;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},LOe={draw(t,e){const r=mo(e),n=-r/2;t.rect(n,n,r,r)}},BOe=.8908130915292852,tY=h_(p_/10)/h_(7*p_/10),UOe=h_(sS/10)*tY,VOe=-HQ(sS/10)*tY,WOe={draw(t,e){const r=mo(e*BOe),n=UOe*r,i=VOe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let o=1;o<5;++o){const s=sS*o/5,a=HQ(s),l=h_(s);t.lineTo(l*r,-a*r),t.lineTo(a*n-l*i,l*n+a*i)}t.closePath()}},MA=mo(3),zOe={draw(t,e){const r=-mo(e/(MA*3));t.moveTo(0,r*2),t.lineTo(-MA*r,-r),t.lineTo(MA*r,-r),t.closePath()}},hi=-.5,pi=mo(3)/2,rI=1/mo(12),GOe=(rI/2+1)*3,qOe={draw(t,e){const r=mo(e/GOe),n=r/2,i=r*rI,o=n,s=r*rI+r,a=-o,l=s;t.moveTo(n,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(hi*n-pi*i,pi*n+hi*i),t.lineTo(hi*o-pi*s,pi*o+hi*s),t.lineTo(hi*a-pi*l,pi*a+hi*l),t.lineTo(hi*n+pi*i,hi*i-pi*n),t.lineTo(hi*o+pi*s,hi*s-pi*o),t.lineTo(hi*a+pi*l,hi*l-pi*a),t.closePath()}};function HOe(t,e){let r=null,n=_j(i);t=typeof t=="function"?t:wt(t||Sj),e=typeof e=="function"?e:wt(e===void 0?64:+e);function i(){let o;if(r||(r=o=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:wt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:wt(+o),i):e},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function m_(){}function y_(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function rY(t){this._context=t}rY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KOe(t){return new rY(t)}function nY(t){this._context=t}nY.prototype={areaStart:m_,areaEnd:m_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function QOe(t){return new nY(t)}function iY(t){this._context=t}iY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function YOe(t){return new iY(t)}function oY(t){this._context=t}oY.prototype={areaStart:m_,areaEnd:m_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function XOe(t){return new oY(t)}function iB(t){return t<0?-1:1}function oB(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(iB(o)+iB(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function sB(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function FA(t,e,r){var n=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-n)/3;t._context.bezierCurveTo(n+a,i+a*e,o-a,s-a*r,o,s)}function g_(t){this._context=t}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FA(this,this._t0,sB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,FA(this,sB(this,r=oB(this,t,e)),r);break;default:FA(this,this._t0,r=oB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function sY(t){this._context=new aY(t)}(sY.prototype=Object.create(g_.prototype)).point=function(t,e){g_.prototype.point.call(this,e,t)};function aY(t){this._context=t}aY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}};function JOe(t){return new g_(t)}function ZOe(t){return new sY(t)}function lY(t){this._context=t}lY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=aB(t),i=aB(e),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function aB(t){var e,r=t.length-1,n,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function eRe(t){return new lY(t)}function lS(t,e){this._context=t,this._t=e}lS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function tRe(t){return new lS(t,.5)}function rRe(t){return new lS(t,0)}function nRe(t){return new lS(t,1)}function vd(t,e){if((s=t.length)>1)for(var r=1,n,i,o=t[e[0]],s,a=o.length;r<s;++r)for(i=o,o=t[e[r]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function nI(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function iRe(t,e){return t[e]}function oRe(t){const e=[];return e.key=t,e}function sRe(){var t=wt([]),e=nI,r=vd,n=iRe;function i(o){var s=Array.from(t.apply(this,arguments),oRe),a,l=s.length,c=-1,u;for(const d of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+n(d,s[a].key,c,o)]).data=d;for(a=0,u=wj(e(s));a<l;++a)s[u[a]].index=a;return r(s,u),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:wt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:wt(+o),i):n},i.order=function(o){return arguments.length?(e=o==null?nI:typeof o=="function"?o:wt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(r=o??vd,i):r},i}function aRe(t,e){if((n=t.length)>0){for(var r,n,i=0,o=t[0].length,s;i<o;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}vd(t,e)}}function lRe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,o=n.length;r<o;++r){for(var s=0,a=0;s<i;++s)a+=t[s][r][1]||0;n[r][1]+=n[r][0]=-a/2}vd(t,e)}}function cRe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,o,s;n<o;++n){for(var a=0,l=0,c=0;a<s;++a){for(var u=t[e[a]],d=u[n][1]||0,h=u[n-1][1]||0,p=(d-h)/2,m=0;m<a;++m){var y=t[e[m]],g=y[n][1]||0,b=y[n-1][1]||0;p+=g-b}l+=d,c+=p*d}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,vd(t,e)}}function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}var uRe=["type","size","sizeType"];function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iI.apply(this,arguments)}function lB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(r),!0).forEach(function(n){fRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fRe(t,e,r){return e=dRe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dRe(t){var e=hRe(t,"string");return ey(e)==="symbol"?e:String(e)}function hRe(t,e){if(ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pRe(t,e){if(t==null)return{};var r=mRe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mRe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var cY={symbolCircle:Sj,symbolCross:DOe,symbolDiamond:FOe,symbolSquare:LOe,symbolStar:WOe,symbolTriangle:zOe,symbolWye:qOe},yRe=Math.PI/180,gRe=function(e){var r="symbol".concat(oS(e));return cY[r]||Sj},vRe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*yRe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bRe=function(e,r){cY["symbol".concat(oS(e))]=r},Ej=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=pRe(e,uRe),c=cB(cB({},l),{},{type:n,size:o,sizeType:a}),u=function(){var g=gRe(n),b=HOe().type(g).size(vRe(o,a,n));return b()},d=c.className,h=c.cx,p=c.cy,m=qe(c,!0);return h===+h&&p===+p&&o===+o?k.createElement("path",iI({},m,{className:ct("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};Ej.registerSymbol=bRe;function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oI.apply(this,arguments)}function uB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xRe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(r),!0).forEach(function(n){ty(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uY(n.key),n)}}function wRe(t,e,r){return e&&fB(t.prototype,e),r&&fB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function SRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sI(t,e)}function sI(t,e){return sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sI(t,e)}function ERe(t){var e=PRe();return function(){var n=v_(t),i;if(e){var o=v_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return ARe(this,i)}}function ARe(t,e){if(e&&(bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CRe(t)}function CRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v_(t){return v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v_(t)}function ty(t,e,r){return e=uY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uY(t){var e=TRe(t,"string");return bd(e)==="symbol"?e:String(e)}function TRe(t,e){if(bd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(bd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mi=32,Aj=function(t){SRe(r,t);var e=ERe(r);function r(){return _Re(this,r),e.apply(this,arguments)}return wRe(r,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,s=mi/2,a=mi/6,l=mi/3,c=i.inactive?o:i.color;if(i.type==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:mi,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(mi,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return k.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(mi/8,"h").concat(mi,"v").concat(mi*3/4,"h").concat(-mi,"z"),className:"recharts-legend-icon"});if(k.isValidElement(i.legendIcon)){var u=xRe({},i);return delete u.legendIcon,k.cloneElement(i.legendIcon,u)}return k.createElement(Ej,{fill:c,cx:s,cy:s,size:mi,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,s=o.payload,a=o.iconSize,l=o.layout,c=o.formatter,u=o.inactiveColor,d={x:0,y:0,width:mi,height:mi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,y){var g,b=m.formatter||c,v=ct((g={"recharts-legend-item":!0},ty(g,"legend-item-".concat(y),!0),ty(g,"inactive",m.inactive),g));if(m.type==="none")return null;var x=Me(m.value)?null:m.value;mc(!Me(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=m.inactive?u:m.color;return k.createElement("li",oI({className:v,style:h,key:"legend-item-".concat(y)},d_(i.props,m,y)),k.createElement(YT,{width:a,height:a,viewBox:d,style:p},i.renderIcon(m)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},b?b(x,m,y):x))})}},{key:"render",value:function(){var i=this.props,o=i.payload,s=i.layout,a=i.align;if(!o||!o.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),r}(E.PureComponent);ty(Aj,"displayName","Legend");ty(Aj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var IRe=rS;function NRe(){this.__data__=new IRe,this.size=0}var kRe=NRe;function ORe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var RRe=ORe;function jRe(t){return this.__data__.get(t)}var $Re=jRe;function DRe(t){return this.__data__.has(t)}var MRe=DRe,FRe=rS,LRe=pj,BRe=mj,URe=200;function VRe(t,e){var r=this.__data__;if(r instanceof FRe){var n=r.__data__;if(!LRe||n.length<URe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new BRe(n)}return r.set(t,e),this.size=r.size,this}var WRe=VRe,zRe=rS,GRe=kRe,qRe=RRe,HRe=$Re,KRe=MRe,QRe=WRe;function ah(t){var e=this.__data__=new zRe(t);this.size=e.size}ah.prototype.clear=GRe;ah.prototype.delete=qRe;ah.prototype.get=HRe;ah.prototype.has=KRe;ah.prototype.set=QRe;var fY=ah,YRe="__lodash_hash_undefined__";function XRe(t){return this.__data__.set(t,YRe),this}var JRe=XRe;function ZRe(t){return this.__data__.has(t)}var eje=ZRe,tje=mj,rje=JRe,nje=eje;function b_(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new tje;++e<r;)this.add(t[e])}b_.prototype.add=b_.prototype.push=rje;b_.prototype.has=nje;var dY=b_;function ije(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var hY=ije;function oje(t,e){return t.has(e)}var pY=oje,sje=dY,aje=hY,lje=pY,cje=1,uje=2;function fje(t,e,r,n,i,o){var s=r&cje,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,p=r&uje?new sje:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var m=t[d],y=e[d];if(n)var g=s?n(y,m,d,e,t,o):n(m,y,d,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!aje(e,function(b,v){if(!lje(p,v)&&(m===b||i(m,b,r,n,o)))return p.push(v)})){h=!1;break}}else if(!(m===y||i(m,y,r,n,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var mY=fje,dje=ts,hje=dje.Uint8Array,pje=hje;function mje(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var yje=mje;function gje(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Cj=gje,dB=zg,hB=pje,vje=hj,bje=mY,xje=yje,_je=Cj,wje=1,Sje=2,Eje="[object Boolean]",Aje="[object Date]",Cje="[object Error]",Pje="[object Map]",Tje="[object Number]",Ije="[object RegExp]",Nje="[object Set]",kje="[object String]",Oje="[object Symbol]",Rje="[object ArrayBuffer]",jje="[object DataView]",pB=dB?dB.prototype:void 0,LA=pB?pB.valueOf:void 0;function $je(t,e,r,n,i,o,s){switch(r){case jje:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rje:return!(t.byteLength!=e.byteLength||!o(new hB(t),new hB(e)));case Eje:case Aje:case Tje:return vje(+t,+e);case Cje:return t.name==e.name&&t.message==e.message;case Ije:case kje:return t==e+"";case Pje:var a=xje;case Nje:var l=n&wje;if(a||(a=_je),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=Sje,s.set(t,e);var u=bje(a(t),a(e),n,i,o,s);return s.delete(t),u;case Oje:if(LA)return LA.call(t)==LA.call(e)}return!1}var Dje=$je;function Mje(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var yY=Mje,Fje=yY,Lje=Vn;function Bje(t,e,r){var n=e(t);return Lje(t)?n:Fje(n,r(t))}var Uje=Bje;function Vje(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Wje=Vje;function zje(){return[]}var Gje=zje,qje=Wje,Hje=Gje,Kje=Object.prototype,Qje=Kje.propertyIsEnumerable,mB=Object.getOwnPropertySymbols,Yje=mB?function(t){return t==null?[]:(t=Object(t),qje(mB(t),function(e){return Qje.call(t,e)}))}:Hje,Xje=Yje;function Jje(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Zje=Jje,e$e=Ds,t$e=Ms,r$e="[object Arguments]";function n$e(t){return t$e(t)&&e$e(t)==r$e}var i$e=n$e,yB=i$e,o$e=Ms,gY=Object.prototype,s$e=gY.hasOwnProperty,a$e=gY.propertyIsEnumerable,l$e=yB(function(){return arguments}())?yB:function(t){return o$e(t)&&s$e.call(t,"callee")&&!a$e.call(t,"callee")},Pj=l$e,x_={exports:{}};function c$e(){return!1}var u$e=c$e;x_.exports;(function(t,e){var r=ts,n=u$e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?r.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;t.exports=c})(x_,x_.exports);var vY=x_.exports,f$e=9007199254740991,d$e=/^(?:0|[1-9]\d*)$/;function h$e(t,e){var r=typeof t;return e=e??f$e,!!e&&(r=="number"||r!="symbol"&&d$e.test(t))&&t>-1&&t%1==0&&t<e}var Tj=h$e,p$e=9007199254740991;function m$e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=p$e}var Ij=m$e,y$e=Ds,g$e=Ij,v$e=Ms,b$e="[object Arguments]",x$e="[object Array]",_$e="[object Boolean]",w$e="[object Date]",S$e="[object Error]",E$e="[object Function]",A$e="[object Map]",C$e="[object Number]",P$e="[object Object]",T$e="[object RegExp]",I$e="[object Set]",N$e="[object String]",k$e="[object WeakMap]",O$e="[object ArrayBuffer]",R$e="[object DataView]",j$e="[object Float32Array]",$$e="[object Float64Array]",D$e="[object Int8Array]",M$e="[object Int16Array]",F$e="[object Int32Array]",L$e="[object Uint8Array]",B$e="[object Uint8ClampedArray]",U$e="[object Uint16Array]",V$e="[object Uint32Array]",Tt={};Tt[j$e]=Tt[$$e]=Tt[D$e]=Tt[M$e]=Tt[F$e]=Tt[L$e]=Tt[B$e]=Tt[U$e]=Tt[V$e]=!0;Tt[b$e]=Tt[x$e]=Tt[O$e]=Tt[_$e]=Tt[R$e]=Tt[w$e]=Tt[S$e]=Tt[E$e]=Tt[A$e]=Tt[C$e]=Tt[P$e]=Tt[T$e]=Tt[I$e]=Tt[N$e]=Tt[k$e]=!1;function W$e(t){return v$e(t)&&g$e(t.length)&&!!Tt[y$e(t)]}var z$e=W$e;function G$e(t){return function(e){return t(e)}}var bY=G$e,__={exports:{}};__.exports;(function(t,e){var r=NQ,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,s=o&&r.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(__,__.exports);var q$e=__.exports,H$e=z$e,K$e=bY,gB=q$e,vB=gB&&gB.isTypedArray,Q$e=vB?K$e(vB):H$e,xY=Q$e,Y$e=Zje,X$e=Pj,J$e=Vn,Z$e=vY,e2e=Tj,t2e=xY,r2e=Object.prototype,n2e=r2e.hasOwnProperty;function i2e(t,e){var r=J$e(t),n=!r&&X$e(t),i=!r&&!n&&Z$e(t),o=!r&&!n&&!i&&t2e(t),s=r||n||i||o,a=s?Y$e(t.length,String):[],l=a.length;for(var c in t)(e||n2e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||e2e(c,l)))&&a.push(c);return a}var o2e=i2e,s2e=Object.prototype;function a2e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||s2e;return t===r}var l2e=a2e;function c2e(t,e){return function(r){return t(e(r))}}var _Y=c2e,u2e=_Y,f2e=u2e(Object.keys,Object),d2e=f2e,h2e=l2e,p2e=d2e,m2e=Object.prototype,y2e=m2e.hasOwnProperty;function g2e(t){if(!h2e(t))return p2e(t);var e=[];for(var r in Object(t))y2e.call(t,r)&&r!="constructor"&&e.push(r);return e}var v2e=g2e,b2e=dj,x2e=Ij;function _2e(t){return t!=null&&x2e(t.length)&&!b2e(t)}var Kg=_2e,w2e=o2e,S2e=v2e,E2e=Kg;function A2e(t){return E2e(t)?w2e(t):S2e(t)}var cS=A2e,C2e=Uje,P2e=Xje,T2e=cS;function I2e(t){return C2e(t,T2e,P2e)}var N2e=I2e,bB=N2e,k2e=1,O2e=Object.prototype,R2e=O2e.hasOwnProperty;function j2e(t,e,r,n,i,o){var s=r&k2e,a=bB(t),l=a.length,c=bB(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var h=a[d];if(!(s?h in e:R2e.call(e,h)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=s;++d<l;){h=a[d];var b=t[h],v=e[h];if(n)var x=s?n(v,b,h,e,t,o):n(b,v,h,t,e,o);if(!(x===void 0?b===v||i(b,v,r,n,o):x)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var S=t.constructor,_=e.constructor;S!=_&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return o.delete(t),o.delete(e),y}var $2e=j2e,D2e=Gc,M2e=ts,F2e=D2e(M2e,"DataView"),L2e=F2e,B2e=Gc,U2e=ts,V2e=B2e(U2e,"Promise"),W2e=V2e,z2e=Gc,G2e=ts,q2e=z2e(G2e,"Set"),wY=q2e,H2e=Gc,K2e=ts,Q2e=H2e(K2e,"WeakMap"),Y2e=Q2e,aI=L2e,lI=pj,cI=W2e,uI=wY,fI=Y2e,SY=Ds,lh=OQ,xB="[object Map]",X2e="[object Object]",_B="[object Promise]",wB="[object Set]",SB="[object WeakMap]",EB="[object DataView]",J2e=lh(aI),Z2e=lh(lI),eDe=lh(cI),tDe=lh(uI),rDe=lh(fI),Il=SY;(aI&&Il(new aI(new ArrayBuffer(1)))!=EB||lI&&Il(new lI)!=xB||cI&&Il(cI.resolve())!=_B||uI&&Il(new uI)!=wB||fI&&Il(new fI)!=SB)&&(Il=function(t){var e=SY(t),r=e==X2e?t.constructor:void 0,n=r?lh(r):"";if(n)switch(n){case J2e:return EB;case Z2e:return xB;case eDe:return _B;case tDe:return wB;case rDe:return SB}return e});var nDe=Il,BA=fY,iDe=mY,oDe=Dje,sDe=$2e,AB=nDe,CB=Vn,PB=vY,aDe=xY,lDe=1,TB="[object Arguments]",IB="[object Array]",n0="[object Object]",cDe=Object.prototype,NB=cDe.hasOwnProperty;function uDe(t,e,r,n,i,o){var s=CB(t),a=CB(e),l=s?IB:AB(t),c=a?IB:AB(e);l=l==TB?n0:l,c=c==TB?n0:c;var u=l==n0,d=c==n0,h=l==c;if(h&&PB(t)){if(!PB(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new BA),s||aDe(t)?iDe(t,e,r,n,i,o):oDe(t,e,l,r,n,i,o);if(!(r&lDe)){var p=u&&NB.call(t,"__wrapped__"),m=d&&NB.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,g=m?e.value():e;return o||(o=new BA),i(y,g,r,n,o)}}return h?(o||(o=new BA),sDe(t,e,r,n,i,o)):!1}var fDe=uDe,dDe=fDe,kB=Ms;function EY(t,e,r,n,i){return t===e?!0:t==null||e==null||!kB(t)&&!kB(e)?t!==t&&e!==e:dDe(t,e,r,n,EY,i)}var Nj=EY,hDe=fY,pDe=Nj,mDe=1,yDe=2;function gDe(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=r[i];var l=a[0],c=t[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new hDe;if(n)var h=n(c,u,l,t,e,d);if(!(h===void 0?pDe(u,c,mDe|yDe,n,d):h))return!1}}return!0}var vDe=gDe,bDe=al;function xDe(t){return t===t&&!bDe(t)}var AY=xDe,_De=AY,wDe=cS;function SDe(t){for(var e=wDe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,_De(i)]}return e}var EDe=SDe;function ADe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var CY=ADe,CDe=vDe,PDe=EDe,TDe=CY;function IDe(t){var e=PDe(t);return e.length==1&&e[0][2]?TDe(e[0][0],e[0][1]):function(r){return r===t||CDe(r,t,e)}}var NDe=IDe;function kDe(t,e){return t!=null&&e in Object(t)}var ODe=kDe,RDe=DQ,jDe=Pj,$De=Vn,DDe=Tj,MDe=Ij,FDe=iS;function LDe(t,e,r){e=RDe(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=FDe(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&MDe(i)&&DDe(s,i)&&($De(t)||jDe(t)))}var BDe=LDe,UDe=ODe,VDe=BDe;function WDe(t,e){return t!=null&&VDe(t,e,UDe)}var zDe=WDe,GDe=Nj,qDe=MQ,HDe=zDe,KDe=fj,QDe=AY,YDe=CY,XDe=iS,JDe=1,ZDe=2;function eMe(t,e){return KDe(t)&&QDe(e)?YDe(XDe(t),e):function(r){var n=qDe(r,t);return n===void 0&&n===e?HDe(r,t):GDe(e,n,JDe|ZDe)}}var tMe=eMe;function rMe(t){return t}var ch=rMe;function nMe(t){return function(e){return e==null?void 0:e[t]}}var iMe=nMe,oMe=vj;function sMe(t){return function(e){return oMe(e,t)}}var aMe=sMe,lMe=iMe,cMe=aMe,uMe=fj,fMe=iS;function dMe(t){return uMe(t)?lMe(fMe(t)):cMe(t)}var hMe=dMe,pMe=NDe,mMe=tMe,yMe=ch,gMe=Vn,vMe=hMe;function bMe(t){return typeof t=="function"?t:t==null?yMe:typeof t=="object"?gMe(t)?mMe(t[0],t[1]):pMe(t):vMe(t)}var ll=bMe;function xMe(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var PY=xMe;function _Me(t){return t!==t}var wMe=_Me;function SMe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var EMe=SMe,AMe=PY,CMe=wMe,PMe=EMe;function TMe(t,e,r){return e===e?PMe(t,e,r):AMe(t,CMe,r)}var IMe=TMe,NMe=IMe;function kMe(t,e){var r=t==null?0:t.length;return!!r&&NMe(t,e,0)>-1}var OMe=kMe;function RMe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var jMe=RMe;function $Me(){}var DMe=$Me,UA=wY,MMe=DMe,FMe=Cj,LMe=1/0,BMe=UA&&1/FMe(new UA([,-0]))[1]==LMe?function(t){return new UA(t)}:MMe,UMe=BMe,VMe=dY,WMe=OMe,zMe=jMe,GMe=pY,qMe=UMe,HMe=Cj,KMe=200;function QMe(t,e,r){var n=-1,i=WMe,o=t.length,s=!0,a=[],l=a;if(r)s=!1,i=zMe;else if(o>=KMe){var c=e?null:qMe(t);if(c)return HMe(c);s=!1,i=GMe,l=new VMe}else l=e?[]:a;e:for(;++n<o;){var u=t[n],d=e?e(u):u;if(u=r||u!==0?u:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,r)||(l!==a&&l.push(d),a.push(u))}return a}var YMe=QMe,XMe=ll,JMe=YMe;function ZMe(t,e){return t&&t.length?JMe(t,XMe(e)):[]}var eFe=ZMe;const OB=ot(eFe);function TY(t,e,r){return e===!0?OB(t,r):Me(e)?OB(t,e):t}function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}var tFe=["ref"];function RB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(r),!0).forEach(function(n){uS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NY(n.key),n)}}function nFe(t,e,r){return e&&jB(t.prototype,e),r&&jB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function iFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dI(t,e)}function dI(t,e){return dI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},dI(t,e)}function oFe(t){var e=aFe();return function(){var n=w_(t),i;if(e){var o=w_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return sFe(this,i)}}function sFe(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IY(t)}function IY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w_(t){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w_(t)}function uS(t,e,r){return e=NY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NY(t){var e=lFe(t,"string");return xd(e)==="symbol"?e:String(e)}function lFe(t,e){if(xd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(xd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cFe(t,e){if(t==null)return{};var r=uFe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uFe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function fFe(t){return t.value}function dFe(t,e){if(k.isValidElement(t))return k.cloneElement(t,e);if(typeof t=="function")return k.createElement(t,e);e.ref;var r=cFe(e,tFe);return k.createElement(Aj,r)}var $B=1,ry=function(t){iFe(r,t);var e=oFe(r);function r(){var n;rFe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),uS(IY(n),"lastBoundingBox",{width:-1,height:-1}),n}return nFe(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.lastBoundingBox.width)>$B||Math.abs(o.height-this.lastBoundingBox.height)>$B)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o))}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?pl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,s=o.layout,a=o.align,l=o.verticalAlign,c=o.margin,u=o.chartWidth,d=o.chartHeight,h,p;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();p={top:((d||0)-y.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return pl(pl({},h),p)}},{key:"render",value:function(){var i=this,o=this.props,s=o.content,a=o.width,l=o.height,c=o.wrapperStyle,u=o.payloadUniqBy,d=o.payload,h=pl(pl({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return k.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){i.wrapperNode=m}},dFe(s,pl(pl({},this.props),{},{payload:TY(d,u,fFe)})))}}],[{key:"getWithHeight",value:function(i,o){var s=i.props.layout;return s==="vertical"&&ne(i.props.height)?{height:i.props.height}:s==="horizontal"?{width:i.props.width||o}:null}}]),r}(E.PureComponent);uS(ry,"displayName","Legend");uS(ry,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var DB=zg,hFe=Pj,pFe=Vn,MB=DB?DB.isConcatSpreadable:void 0;function mFe(t){return pFe(t)||hFe(t)||!!(MB&&t&&t[MB])}var yFe=mFe,gFe=yY,vFe=yFe;function kY(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=vFe),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?kY(a,e-1,r,n,i):gFe(i,a):n||(i[i.length]=a)}return i}var OY=kY;function bFe(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++i];if(r(o[l],l,o)===!1)break}return e}}var xFe=bFe,_Fe=xFe,wFe=_Fe(),SFe=wFe,EFe=SFe,AFe=cS;function CFe(t,e){return t&&EFe(t,e,AFe)}var RY=CFe,PFe=Kg;function TFe(t,e){return function(r,n){if(r==null)return r;if(!PFe(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var IFe=TFe,NFe=RY,kFe=IFe,OFe=kFe(NFe),kj=OFe,RFe=kj,jFe=Kg;function $Fe(t,e){var r=-1,n=jFe(t)?Array(t.length):[];return RFe(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var jY=$Fe;function DFe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var MFe=DFe,FB=rh;function FFe(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=FB(t),s=e!==void 0,a=e===null,l=e===e,c=FB(e);if(!a&&!c&&!o&&t>e||o&&s&&l&&!a&&!c||n&&s&&l||!r&&l||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!l)return-1}return 0}var LFe=FFe,BFe=LFe;function UFe(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;++n<s;){var l=BFe(i[n],o[n]);if(l){if(n>=a)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return t.index-e.index}var VFe=UFe,VA=gj,WFe=vj,zFe=ll,GFe=jY,qFe=MFe,HFe=bY,KFe=VFe,QFe=ch,YFe=Vn;function XFe(t,e,r){e.length?e=VA(e,function(o){return YFe(o)?function(s){return WFe(s,o.length===1?o[0]:o)}:o}):e=[QFe];var n=-1;e=VA(e,HFe(zFe));var i=GFe(t,function(o,s,a){var l=VA(e,function(c){return c(o)});return{criteria:l,index:++n,value:o}});return qFe(i,function(o,s){return KFe(o,s,r)})}var JFe=XFe;function ZFe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var eLe=ZFe,tLe=eLe,LB=Math.max;function rLe(t,e,r){return e=LB(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=LB(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),tLe(t,this,a)}}var nLe=rLe;function iLe(t){return function(){return t}}var oLe=iLe,sLe=Gc,aLe=function(){try{var t=sLe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),$Y=aLe,lLe=oLe,BB=$Y,cLe=ch,uLe=BB?function(t,e){return BB(t,"toString",{configurable:!0,enumerable:!1,value:lLe(e),writable:!0})}:cLe,fLe=uLe,dLe=800,hLe=16,pLe=Date.now;function mLe(t){var e=0,r=0;return function(){var n=pLe(),i=hLe-(n-r);if(r=n,i>0){if(++e>=dLe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var yLe=mLe,gLe=fLe,vLe=yLe,bLe=vLe(gLe),xLe=bLe,_Le=ch,wLe=nLe,SLe=xLe;function ELe(t,e){return SLe(wLe(t,e,_Le),t+"")}var ALe=ELe,CLe=hj,PLe=Kg,TLe=Tj,ILe=al;function NLe(t,e,r){if(!ILe(r))return!1;var n=typeof e;return(n=="number"?PLe(r)&&TLe(e,r.length):n=="string"&&e in r)?CLe(r[e],t):!1}var fS=NLe,kLe=OY,OLe=JFe,RLe=ALe,UB=fS,jLe=RLe(function(t,e){if(t==null)return[];var r=e.length;return r>1&&UB(t,e[0],e[1])?e=[]:r>2&&UB(e[0],e[1],e[2])&&(e=[e[0]]),OLe(t,kLe(e,1),[])}),$Le=jLe;const Oj=ot($Le);function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(t)}function DLe(t,e){return BLe(t)||LLe(t,e)||FLe(t,e)||MLe()}function MLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FLe(t,e){if(t){if(typeof t=="string")return VB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VB(t,e)}}function VB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function LLe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function BLe(t){if(Array.isArray(t))return t}function WB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(r),!0).forEach(function(n){ULe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ULe(t,e,r){return e=VLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VLe(t){var e=WLe(t,"string");return ny(e)==="symbol"?e:String(e)}function WLe(t,e){if(ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zLe(t){return Array.isArray(t)&&hr(t[0])&&hr(t[1])?t.join(" ~ "):t}var GLe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,y=e.label,g=e.labelFormatter,b=function(){if(u&&u.length){var T={padding:0,margin:0},P=(h?Oj(u,h):u).map(function(I,O){if(I.type==="none")return null;var N=WA({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},a),j=I.formatter||d||zLe,L=I.value,U=I.name,V=L,R=U;if(j&&V!=null&&R!=null){var F=j(L,U,I,O,u);if(Array.isArray(F)){var z=DLe(F,2);V=z[0],R=z[1]}else V=F}return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:N},hr(R)?k.createElement("span",{className:"recharts-tooltip-item-name"},R):null,hr(R)?k.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,k.createElement("span",{className:"recharts-tooltip-item-value"},V),k.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},v=WA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=WA({margin:0},c),S=!Xe(y),_=S?y:"",w=ct("recharts-default-tooltip",p),A=ct("recharts-tooltip-label",m);return S&&g&&u!==void 0&&u!==null&&(_=g(y,u)),k.createElement("div",{className:w,style:v},k.createElement("p",{className:A,style:x},k.isValidElement(_)?_:"".concat(_)),b())},DY={exports:{}},qLe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",HLe=qLe,KLe=HLe;function MY(){}function FY(){}FY.resetWarningCache=MY;var QLe=function(){function t(n,i,o,s,a,l){if(l!==KLe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:FY,resetWarningCache:MY};return r.PropTypes=r,r};DY.exports=QLe();var YLe=DY.exports;const Te=ot(YLe);var XLe=Object.getOwnPropertyNames,JLe=Object.getOwnPropertySymbols,ZLe=Object.prototype.hasOwnProperty;function zB(t,e){return function(n,i,o){return t(n,i,o)&&e(n,i,o)}}function i0(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var o=i.cache,s=o.get(r),a=o.get(n);if(s&&a)return s===n&&a===r;o.set(r,n),o.set(n,r);var l=t(r,n,i);return o.delete(r),o.delete(n),l}}function GB(t){return XLe(t).concat(JLe(t))}var LY=Object.hasOwn||function(t,e){return ZLe.call(t,e)};function uh(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var BY="_owner",qB=Object.getOwnPropertyDescriptor,HB=Object.keys;function e3e(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function t3e(t,e){return uh(t.getTime(),e.getTime())}function KB(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),c=!1,u=0;(a=l.next())&&!a.done;){var d=s.value,h=d[0],p=d[1],m=a.value,y=m[0],g=m[1];!c&&!n[u]&&(c=r.equals(h,y,o,u,t,e,r)&&r.equals(p,g,h,y,t,e,r))&&(n[u]=!0),u++}if(!c)return!1;o++}return!0}function r3e(t,e,r){var n=HB(t),i=n.length;if(HB(e).length!==i)return!1;for(var o;i-- >0;)if(o=n[i],o===BY&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!LY(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Bh(t,e,r){var n=GB(t),i=n.length;if(GB(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=n[i],o===BY&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!LY(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(s=qB(t,o),a=qB(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function n3e(t,e){return uh(t.valueOf(),e.valueOf())}function i3e(t,e){return t.source===e.source&&t.flags===e.flags}function QB(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,c=0;(s=a.next())&&!s.done;)!l&&!n[c]&&(l=r.equals(o.value,s.value,o.value,s.value,t,e,r))&&(n[c]=!0),c++;if(!l)return!1}return!0}function o3e(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var s3e="[object Arguments]",a3e="[object Boolean]",l3e="[object Date]",c3e="[object Map]",u3e="[object Number]",f3e="[object Object]",d3e="[object RegExp]",h3e="[object Set]",p3e="[object String]",m3e=Array.isArray,YB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,XB=Object.assign,y3e=Object.prototype.toString.call.bind(Object.prototype.toString);function g3e(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,d,h){if(u===d)return!0;if(u==null||d==null||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;var p=u.constructor;if(p!==d.constructor)return!1;if(p===Object)return i(u,d,h);if(m3e(u))return e(u,d,h);if(YB!=null&&YB(u))return l(u,d,h);if(p===Date)return r(u,d,h);if(p===RegExp)return s(u,d,h);if(p===Map)return n(u,d,h);if(p===Set)return a(u,d,h);var m=y3e(u);return m===l3e?r(u,d,h):m===d3e?s(u,d,h):m===c3e?n(u,d,h):m===h3e?a(u,d,h):m===f3e?typeof u.then!="function"&&typeof d.then!="function"&&i(u,d,h):m===s3e?i(u,d,h):m===a3e||m===u3e||m===p3e?o(u,d,h):!1}}function v3e(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Bh:e3e,areDatesEqual:t3e,areMapsEqual:n?zB(KB,Bh):KB,areObjectsEqual:n?Bh:r3e,arePrimitiveWrappersEqual:n3e,areRegExpsEqual:i3e,areSetsEqual:n?zB(QB,Bh):QB,areTypedArraysEqual:n?Bh:o3e};if(r&&(i=XB({},i,r(i))),e){var o=i0(i.areArraysEqual),s=i0(i.areMapsEqual),a=i0(i.areObjectsEqual),l=i0(i.areSetsEqual);i=XB({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function b3e(t){return function(e,r,n,i,o,s,a){return t(e,r,a)}}function x3e(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,o=t.strict;if(n)return function(l,c){var u=n(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,p=u.meta;return r(l,c,{cache:h,equals:i,meta:p,strict:o})};if(e)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return r(l,c,s)}}var _3e=cl();cl({strict:!0});cl({circular:!0});cl({circular:!0,strict:!0});cl({createInternalComparator:function(){return uh}});cl({strict:!0,createInternalComparator:function(){return uh}});cl({circular:!0,createInternalComparator:function(){return uh}});cl({circular:!0,createInternalComparator:function(){return uh},strict:!0});function cl(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=v3e(t),l=g3e(a),c=n?n(l):b3e(l);return x3e({circular:r,comparator:l,createState:i,equals:c,strict:s})}function w3e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function JB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>e?(t(o),r=-1):w3e(i)};requestAnimationFrame(n)}function hI(t){"@babel/helpers - typeof";return hI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hI(t)}function S3e(t){return P3e(t)||C3e(t)||A3e(t)||E3e()}function E3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A3e(t,e){if(t){if(typeof t=="string")return ZB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZB(t,e)}}function ZB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function P3e(t){if(Array.isArray(t))return t}function T3e(){var t={},e=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,a=S3e(s),l=a[0],c=a.slice(1);if(typeof l=="number"){JB(i.bind(null,c),l);return}i(l),JB(i.bind(null,c));return}hI(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function iy(t){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(t)}function e4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _d(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e4(Object(r),!0).forEach(function(n){S_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S_(t,e,r){return e=I3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I3e(t){var e=N3e(t,"string");return iy(e)==="symbol"?e:String(e)}function N3e(t,e){if(iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k3e=["Webkit","Moz","O","ms"],O3e=["-webkit-","-moz-","-o-","-ms-"],R3e=["transform","transformOrigin","transition"],j3e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},$3e=function(e){return e},D3e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},M3e=function(e,r){if(R3e.indexOf(e)===-1)return S_({},e,Number.isNaN(r)?0:r);var n=e==="transition",i=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=r;return k3e.reduce(function(s,a,l){return n&&(o=r.replace(/(transform|transform-origin)/gim,"".concat(O3e[l],"$1"))),_d(_d({},s),{},S_({},a+i,o))},{})},Kp=function(e,r){return Object.keys(r).reduce(function(n,i){return _d(_d({},n),{},S_({},i,e(i,r[i])))},{})},Rj=function(e){return Object.keys(e).reduce(function(r,n){return _d(_d({},r),M3e(n,r[n]))},e)},t4=function(e,r,n){return e.map(function(i){return"".concat(D3e(i)," ").concat(r,"ms ").concat(n)}).join(",")};function F3e(t,e){return U3e(t)||B3e(t,e)||UY(t,e)||L3e()}function L3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function U3e(t){if(Array.isArray(t))return t}function V3e(t){return G3e(t)||z3e(t)||UY(t)||W3e()}function W3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UY(t,e){if(t){if(typeof t=="string")return pI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pI(t,e)}}function z3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G3e(t){if(Array.isArray(t))return pI(t)}function pI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E_=1e-4,VY=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},WY=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},r4=function(e,r){return function(n){var i=VY(e,r);return WY(i,n)}},q3e=function(e,r){return function(n){var i=VY(e,r),o=[].concat(V3e(i.map(function(s,a){return s*a}).slice(1)),[0]);return WY(o,n)}},n4=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],o=r[1],s=r[2],a=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=F3e(c,4);i=u[0],o=u[1],s=u[2],a=u[3]}}}var d=r4(i,s),h=r4(o,a),p=q3e(i,s),m=function(b){return b>1?1:b<0?0:b},y=function(b){for(var v=b>1?1:b,x=v,S=0;S<8;++S){var _=d(x)-v,w=p(x);if(Math.abs(_-v)<E_||w<E_)return h(x);x=m(x-_/w)}return h(x)};return y.isStepper=!1,y},H3e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(u,d,h){var p=-(u-d)*n,m=h*o,y=h+(p-m)*a/1e3,g=h*a/1e3+u;return Math.abs(g-d)<E_&&Math.abs(y)<E_?[d,0]:[g,y]};return l.isStepper=!0,l.dt=a,l},K3e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return n4(i);case"spring":return H3e();default:if(i.split("(")[0]==="cubic-bezier")return n4(i)}return typeof i=="function"?i:null};function oy(t){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oy(t)}function i4(t){return X3e(t)||Y3e(t)||zY(t)||Q3e()}function Q3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X3e(t){if(Array.isArray(t))return yI(t)}function o4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o4(Object(r),!0).forEach(function(n){mI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mI(t,e,r){return e=J3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J3e(t){var e=Z3e(t,"string");return oy(e)==="symbol"?e:String(e)}function Z3e(t,e){if(oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eBe(t,e){return nBe(t)||rBe(t,e)||zY(t,e)||tBe()}function tBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zY(t,e){if(t){if(typeof t=="string")return yI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yI(t,e)}}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rBe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function nBe(t){if(Array.isArray(t))return t}var A_=function(e,r,n){return e+(r-e)*n},gI=function(e){var r=e.from,n=e.to;return r!==n},iBe=function t(e,r,n){var i=Kp(function(o,s){if(gI(s)){var a=e(s.from,s.to,s.velocity),l=eBe(a,2),c=l[0],u=l[1];return Fr(Fr({},s),{},{from:c,velocity:u})}return s},r);return n<1?Kp(function(o,s){return gI(s)?Fr(Fr({},s),{},{velocity:A_(s.velocity,i[o].velocity,n),from:A_(s.from,i[o].from,n)}):s},r):t(e,i,n-1)};const oBe=function(t,e,r,n,i){var o=j3e(t,e),s=o.reduce(function(g,b){return Fr(Fr({},g),{},mI({},b,[t[b],e[b]]))},{}),a=o.reduce(function(g,b){return Fr(Fr({},g),{},mI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return Kp(function(b,v){return v.from},a)},p=function(){return!Object.values(a).filter(gI).length},m=function(b){c||(c=b);var v=b-c,x=v/r.dt;a=iBe(r,a,x),i(Fr(Fr(Fr({},t),e),h())),c=b,p()||(l=requestAnimationFrame(d))},y=function(b){u||(u=b);var v=(b-u)/n,x=Kp(function(_,w){return A_.apply(void 0,i4(w).concat([r(v)]))},s);if(i(Fr(Fr(Fr({},t),e),x)),v<1)l=requestAnimationFrame(d);else{var S=Kp(function(_,w){return A_.apply(void 0,i4(w).concat([r(1)]))},s);i(Fr(Fr(Fr({},t),e),S))}};return d=r.isStepper?m:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}var sBe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function aBe(t,e){if(t==null)return{};var r=lBe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lBe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function zA(t){return dBe(t)||fBe(t)||uBe(t)||cBe()}function cBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uBe(t,e){if(t){if(typeof t=="string")return vI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vI(t,e)}}function fBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dBe(t){if(Array.isArray(t))return vI(t)}function vI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(r),!0).forEach(function(n){mp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mp(t,e,r){return e=GY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GY(n.key),n)}}function pBe(t,e,r){return e&&a4(t.prototype,e),r&&a4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function GY(t){var e=mBe(t,"string");return wd(e)==="symbol"?e:String(e)}function mBe(t,e){if(wd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bI(t,e)}function gBe(t){var e=vBe();return function(){var n=C_(t),i;if(e){var o=C_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return xI(this,i)}}function xI(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _I(t)}function _I(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C_(t){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C_(t)}var Is=function(t){yBe(r,t);var e=gBe(r);function r(n,i){var o;hBe(this,r),o=e.call(this,n,i);var s=o.props,a=s.isActive,l=s.attributeName,c=s.from,u=s.to,d=s.steps,h=s.children,p=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(_I(o)),o.changeStyle=o.changeStyle.bind(_I(o)),!a||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),xI(o);if(d&&d.length)o.state={style:d[0].style};else if(c){if(typeof h=="function")return o.state={style:c},xI(o);o.state={style:l?mp({},l,c):c}}else o.state={style:{}};return o}return pBe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,d=o.from,h=this.state.style;if(a){if(!s){var p={style:l?mp({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(_3e(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||c?d:i.to;if(this.state&&h){var g={style:l?mp({},l,y):y};(l&&[l]!==y||!l&&h!==y)&&this.setState(g)}this.runAnimation(Wi(Wi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=oBe(s,a,K3e(c),l,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([h,u,m,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,d=c.duration,h=d===void 0?0:d,p=function(y,g,b){if(b===0)return y;var v=g.duration,x=g.easing,S=x===void 0?"ease":x,_=g.style,w=g.properties,A=g.onAnimationEnd,C=b>0?s[b-1]:g,T=w||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(zA(y),[o.runJSAnimation.bind(o,{from:C.style,to:_,duration:v,easing:S}),v]);var P=t4(T,v,S),I=Wi(Wi(Wi({},C.style),_),{},{transition:P});return[].concat(zA(y),[I,v,A]).filter($3e)};return this.manager.start([l].concat(zA(s.reduce(p,[u,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=T3e());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=a?mp({},a,l):l,g=t4(Object.keys(y),s,c);m.start([u,o,Wi(Wi({},y),{},{transition:g}),s,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=aBe(i,sBe),c=E.Children.count(o),u=Rj(this.state.style);if(typeof o=="function")return o(u);if(!a||c===0||s<=0)return o;var d=function(p){var m=p.props,y=m.style,g=y===void 0?{}:y,b=m.className,v=E.cloneElement(p,Wi(Wi({},l),{},{style:Wi(Wi({},g),u),className:b}));return v};return c===1?d(E.Children.only(o)):k.createElement("div",null,E.Children.map(o,function(h){return d(h)}))}}]),r}(E.PureComponent);Is.displayName="Animate";Is.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Is.propTypes={from:Te.oneOfType([Te.object,Te.string]),to:Te.oneOfType([Te.object,Te.string]),attributeName:Te.string,duration:Te.number,begin:Te.number,easing:Te.oneOfType([Te.string,Te.func]),steps:Te.arrayOf(Te.shape({duration:Te.number.isRequired,style:Te.object.isRequired,easing:Te.oneOfType([Te.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Te.func]),properties:Te.arrayOf("string"),onAnimationEnd:Te.func})),children:Te.oneOfType([Te.node,Te.func]),isActive:Te.bool,canBegin:Te.bool,onAnimationEnd:Te.func,shouldReAnimate:Te.bool,onAnimationStart:Te.func,onAnimationReStart:Te.func};Number.isFinite===void 0&&(Number.isFinite=function(t){return typeof t=="number"&&isFinite(t)});Te.object,Te.object,Te.object,Te.element;Te.object,Te.object,Te.object,Te.oneOfType([Te.array,Te.element]),Te.any;function sy(t){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(t)}function o0(t,e,r){return e=bBe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bBe(t){var e=xBe(t,"string");return sy(e)==="symbol"?e:String(e)}function xBe(t,e){if(sy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uh="recharts-tooltip-wrapper",_Be={visibility:"hidden"};function wBe(t){var e,r=t.coordinate,n=t.translateX,i=t.translateY;return ct(Uh,(e={},o0(e,"".concat(Uh,"-right"),ne(n)&&r&&ne(r.x)&&n>=r.x),o0(e,"".concat(Uh,"-left"),ne(n)&&r&&ne(r.x)&&n<r.x),o0(e,"".concat(Uh,"-bottom"),ne(i)&&r&&ne(r.y)&&i>=r.y),o0(e,"".concat(Uh,"-top"),ne(i)&&r&&ne(r.y)&&i<r.y),e))}function l4(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&ne(o[n]))return o[n];var u=r[n]-a-i,d=r[n]+i;if(e[n])return s[n]?u:d;if(s[n]){var h=u,p=l[n];return h<p?Math.max(d,l[n]):Math.max(u,l[n])}var m=d+a,y=l[n]+c;return m>y?Math.max(u,l[n]):Math.max(d,l[n])}function SBe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return Rj({transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")})}function EBe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,d;return s.height>0&&s.width>0&&r?(u=l4({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=l4({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=SBe({translateX:u,translateY:d,useTranslate3d:a})):c=_Be,{cssProperties:c,cssClasses:wBe({translateX:u,translateY:d,coordinate:r})}}function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(t)}function c4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(r),!0).forEach(function(n){ob(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ABe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qY(n.key),n)}}function CBe(t,e,r){return e&&u4(t.prototype,e),r&&u4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function PBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wI(t,e)}function TBe(t){var e=NBe();return function(){var n=P_(t),i;if(e){var o=P_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return IBe(this,i)}}function IBe(t,e){if(e&&(Sd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ib(t)}function ib(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P_(t){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P_(t)}function ob(t,e,r){return e=qY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qY(t){var e=kBe(t,"string");return Sd(e)==="symbol"?e:String(e)}function kBe(t,e){if(Sd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f4=1,OBe=function(t){PBe(r,t);var e=TBe(r);function r(){var n;ABe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),ob(ib(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ob(ib(n),"lastBoundingBox",{width:-1,height:-1}),ob(ib(n),"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return CBe(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.lastBoundingBox.width)>f4||Math.abs(i.height-this.lastBoundingBox.height)>f4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,s=o.active,a=o.allowEscapeViewBox,l=o.animationDuration,c=o.animationEasing,u=o.children,d=o.coordinate,h=o.hasPayload,p=o.isAnimationActive,m=o.offset,y=o.position,g=o.reverseDirection,b=o.useTranslate3d,v=o.viewBox,x=o.wrapperStyle,S=EBe({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:b,viewBox:v}),_=S.cssClasses,w=S.cssProperties,A=GA(GA(GA({},p&&s&&Rj({transition:"transform ".concat(l,"ms ").concat(c)})),w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return k.createElement("div",{tabIndex:-1,role:"dialog",className:_,style:A,ref:function(T){i.wrapperNode=T}},u)}}]),r}(E.PureComponent),RBe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},xs={isSsr:RBe(),get:function(e){return xs[e]},set:function(e,r){if(typeof e=="string")xs[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){xs[i]=e[i]})}}};function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function d4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function h4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(r),!0).forEach(function(n){jj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HY(n.key),n)}}function $Be(t,e,r){return e&&p4(t.prototype,e),r&&p4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function DBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SI(t,e)}function SI(t,e){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},SI(t,e)}function MBe(t){var e=BBe();return function(){var n=T_(t),i;if(e){var o=T_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return FBe(this,i)}}function FBe(t,e){if(e&&(Ed(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LBe(t)}function LBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T_(t){return T_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T_(t)}function jj(t,e,r){return e=HY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HY(t){var e=UBe(t,"string");return Ed(e)==="symbol"?e:String(e)}function UBe(t,e){if(Ed(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ed(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VBe(t){return t.dataKey}function WBe(t,e){return k.isValidElement(t)?k.cloneElement(t,e):typeof t=="function"?k.createElement(t,e):k.createElement(GLe,e)}var Vu=function(t){DBe(r,t);var e=MBe(r);function r(){return jBe(this,r),e.apply(this,arguments)}return $Be(r,[{key:"render",value:function(){var i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,y=i.payloadUniqBy,g=i.position,b=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,S=i.wrapperStyle,_=m??[];d&&_.length&&(_=TY(m.filter(function(A){return A.value!=null}),y,VBe));var w=_.length>0;return k.createElement(OBe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:w,offset:p,position:g,reverseDirection:b,useTranslate3d:v,viewBox:x,wrapperStyle:S},WBe(c,h4(h4({},this.props),{},{payload:_})))}}]),r}(E.PureComponent);jj(Vu,"displayName","Tooltip");jj(Vu,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!xs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zBe=ts,GBe=function(){return zBe.Date.now()},qBe=GBe,HBe=/\s/;function KBe(t){for(var e=t.length;e--&&HBe.test(t.charAt(e)););return e}var QBe=KBe,YBe=QBe,XBe=/^\s+/;function JBe(t){return t&&t.slice(0,YBe(t)+1).replace(XBe,"")}var ZBe=JBe,e4e=ZBe,m4=al,t4e=rh,y4=NaN,r4e=/^[-+]0x[0-9a-f]+$/i,n4e=/^0b[01]+$/i,i4e=/^0o[0-7]+$/i,o4e=parseInt;function s4e(t){if(typeof t=="number")return t;if(t4e(t))return y4;if(m4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=m4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=e4e(t);var r=n4e.test(t);return r||i4e.test(t)?o4e(t.slice(2),r?2:8):r4e.test(t)?y4:+t}var KY=s4e,a4e=al,qA=qBe,g4=KY,l4e="Expected a function",c4e=Math.max,u4e=Math.min;function f4e(t,e,r){var n,i,o,s,a,l,c=0,u=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(l4e);e=g4(e)||0,a4e(r)&&(u=!!r.leading,d="maxWait"in r,o=d?c4e(g4(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function p(w){var A=n,C=i;return n=i=void 0,c=w,s=t.apply(C,A),s}function m(w){return c=w,a=setTimeout(b,e),u?p(w):s}function y(w){var A=w-l,C=w-c,T=e-A;return d?u4e(T,o-C):T}function g(w){var A=w-l,C=w-c;return l===void 0||A>=e||A<0||d&&C>=o}function b(){var w=qA();if(g(w))return v(w);a=setTimeout(b,y(w))}function v(w){return a=void 0,h&&n?p(w):(n=i=void 0,s)}function x(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function S(){return a===void 0?s:v(qA())}function _(){var w=qA(),A=g(w);if(n=arguments,i=this,l=w,A){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(b,e),p(l)}return a===void 0&&(a=setTimeout(b,e)),s}return _.cancel=x,_.flush=S,_}var d4e=f4e,h4e=d4e,p4e=al,m4e="Expected a function";function y4e(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(m4e);return p4e(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),h4e(t,e,{leading:n,maxWait:e,trailing:i})}var g4e=y4e;const QY=ot(g4e);function ay(t){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(t)}function v4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function s0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v4(Object(r),!0).forEach(function(n){v4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function v4e(t,e,r){return e=b4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b4e(t){var e=x4e(t,"string");return ay(e)==="symbol"?e:String(e)}function x4e(t,e){if(ay(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ay(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _4e(t,e){return A4e(t)||E4e(t,e)||S4e(t,e)||w4e()}function w4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S4e(t,e){if(t){if(typeof t=="string")return b4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b4(t,e)}}function b4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function E4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function A4e(t){if(Array.isArray(t))return t}var YY=E.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,y=m===void 0?0:m,g=t.id,b=t.className,v=t.onResize,x=t.style,S=x===void 0?{}:x,_=E.useRef(null),w=E.useRef();w.current=v,E.useImperativeHandle(e,function(){return Object.assign(_.current,{get current(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current}})});var A=E.useState({containerWidth:i.width,containerHeight:i.height}),C=_4e(A,2),T=C[0],P=C[1],I=E.useCallback(function(N,j){P(function(L){var U=Math.round(N),V=Math.round(j);return L.containerWidth===U&&L.containerHeight===V?L:{containerWidth:U,containerHeight:V}})},[]);E.useEffect(function(){var N=function(F){var z,le=F[0].contentRect,re=le.width,be=le.height;I(re,be),(z=w.current)===null||z===void 0||z.call(w,re,be)};y>0&&(N=QY(N,y,{trailing:!0,leading:!1}));var j=new ResizeObserver(N),L=_.current.getBoundingClientRect(),U=L.width,V=L.height;return I(U,V),j.observe(_.current),function(){j.disconnect()}},[I,y]);var O=E.useMemo(function(){var N=T.containerWidth,j=T.containerHeight;if(N<0||j<0)return null;mc(Vl(s)||Vl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),mc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var L=Vl(s)?N:s,U=Vl(l)?j:l;r&&r>0&&(L?U=L/r:U&&(L=U*r),h&&U>h&&(U=h)),mc(L>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,U,s,l,u,d,r);var V=!Array.isArray(p)&&Bx.isElement(p)&&bs(p.type).endsWith("Chart");return k.Children.map(p,function(R){return Bx.isElement(R)?E.cloneElement(R,s0({width:L,height:U},V?{style:s0({height:"100%",width:"100%",maxHeight:U,maxWidth:L},R.props.style)}:{})):R})},[r,p,l,h,d,u,T,s]);return k.createElement("div",{id:g?"".concat(g):void 0,className:ct("recharts-responsive-container",b),style:s0(s0({},S),{},{width:s,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:_},O)}),XY=function(e){return null};XY.displayName="Cell";function ly(t){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ly(t)}function x4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function EI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(r),!0).forEach(function(n){C4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C4e(t,e,r){return e=P4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P4e(t){var e=T4e(t,"string");return ly(e)==="symbol"?e:String(e)}function T4e(t,e){if(ly(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ly(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var su={widthCache:{},cacheCount:0},I4e=2e3,N4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_4="recharts_measurement_span";function k4e(t){var e=EI({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Qp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||xs.isSsr)return{width:0,height:0};var n=k4e(r),i=JSON.stringify({text:e,copyStyle:n});if(su.widthCache[i])return su.widthCache[i];try{var o=document.getElementById(_4);o||(o=document.createElement("span"),o.setAttribute("id",_4),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=EI(EI({},N4e),n);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return su.widthCache[i]=l,++su.cacheCount>I4e&&(su.cacheCount=0,su.widthCache={}),l}catch{return{width:0,height:0}}},O4e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function cy(t){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(t)}function I_(t,e){return D4e(t)||$4e(t,e)||j4e(t,e)||R4e()}function R4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j4e(t,e){if(t){if(typeof t=="string")return w4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w4(t,e)}}function w4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function D4e(t){if(Array.isArray(t))return t}function M4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L4e(n.key),n)}}function F4e(t,e,r){return e&&S4(t.prototype,e),r&&S4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function L4e(t){var e=B4e(t,"string");return cy(e)==="symbol"?e:String(e)}function B4e(t,e){if(cy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(cy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,A4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,U4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,V4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,JY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},W4e=Object.keys(JY),Wu="NaN";function z4e(t,e){return t*JY[e]}var a0=function(){function t(e,r){M4e(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!U4e.test(r)&&(this.num=NaN,this.unit=""),W4e.includes(r)&&(this.num=z4e(e,r),this.unit="px")}return F4e(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=V4e.exec(r))!==null&&n!==void 0?n:[],o=I_(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function ZY(t){if(t.includes(Wu))return Wu;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=E4.exec(e))!==null&&r!==void 0?r:[],i=I_(n,4),o=i[1],s=i[2],a=i[3],l=a0.parse(o??""),c=a0.parse(a??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Wu;e=e.replace(E4,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=A4.exec(e))!==null&&d!==void 0?d:[],p=I_(h,4),m=p[1],y=p[2],g=p[3],b=a0.parse(m??""),v=a0.parse(g??""),x=y==="+"?b.add(v):b.subtract(v);if(x.isNaN())return Wu;e=e.replace(A4,x.toString())}return e}var C4=/\(([^()]*)\)/;function G4e(t){for(var e=t;e.includes("(");){var r=C4.exec(e),n=I_(r,2),i=n[1];e=e.replace(C4,ZY(i))}return e}function q4e(t){var e=t.replace(/\s+/g,"");return e=G4e(e),e=ZY(e),e}function H4e(t){try{return q4e(t)}catch{return Wu}}function HA(t){var e=H4e(t.slice(5,-1));return e===Wu?"":e}var K4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Q4e=["dx","dy","angle","className","breakAll"];function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AI.apply(this,arguments)}function P4(t,e){if(t==null)return{};var r=Y4e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Y4e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function T4(t,e){return eUe(t)||Z4e(t,e)||J4e(t,e)||X4e()}function X4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J4e(t,e){if(t){if(typeof t=="string")return I4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I4(t,e)}}function I4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function eUe(t){if(Array.isArray(t))return t}var eX=/[ \f\n\r\t\v\u2028\u2029]+/,tX=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var o=[];Xe(r)||(n?o=r.toString().split(""):o=r.toString().split(eX));var s=o.map(function(l){return{word:l,width:Qp(l,i).width}}),a=n?0:Qp(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},tUe=function(e,r,n,i,o){var s=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=ne(s),d=a,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(U,V){var R=V.word,F=V.width,z=U[U.length-1];if(z&&(i==null||o||z.width+F+n<Number(i)))z.words.push(R),z.width+=F+n;else{var le={words:[R],width:F};U.push(le)}return U},[])},p=h(r),m=function(L){return L.reduce(function(U,V){return U.width>V.width?U:V})};if(!u)return p;for(var y="…",g=function(L){var U=d.slice(0,L),V=tX({breakAll:c,style:l,children:U+y}).wordsWithComputedWidth,R=h(V),F=R.length>s||m(R).width>Number(i);return[F,R]},b=0,v=d.length-1,x=0,S;b<=v&&x<=d.length-1;){var _=Math.floor((b+v)/2),w=_-1,A=g(w),C=T4(A,2),T=C[0],P=C[1],I=g(_),O=T4(I,1),N=O[0];if(!T&&!N&&(b=_+1),T&&N&&(v=_-1),!T&&N){S=P;break}x++}return S||p},N4=function(e){var r=Xe(e)?[]:e.toString().split(eX);return[{words:r}]},rUe=function(e){var r=e.width,n=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((r||n)&&!xs.isSsr){var l,c,u=tX({breakAll:s,children:i,style:o});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return N4(i);return tUe({breakAll:s,children:i,maxLines:a,style:o},l,c,r,n)}return N4(i)},k4="#808080",N_=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,y=m===void 0?"end":m,g=e.fill,b=g===void 0?k4:g,v=P4(e,K4e),x=E.useMemo(function(){return rUe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),S=v.dx,_=v.dy,w=v.angle,A=v.className,C=v.breakAll,T=P4(v,Q4e);if(!hr(n)||!hr(o))return null;var P=n+(ne(S)?S:0),I=o+(ne(_)?_:0),O;switch(y){case"start":O=HA("calc(".concat(c,")"));break;case"middle":O=HA("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:O=HA("calc(".concat(x.length-1," * -").concat(a,")"));break}var N=[];if(d){var j=x[0].width,L=v.width;N.push("scale(".concat((ne(L)?L/j:1)/j,")"))}return w&&N.push("rotate(".concat(w,", ").concat(P,", ").concat(I,")")),N.length&&(T.transform=N.join(" ")),k.createElement("text",AI({},qe(T,!0),{x:P,y:I,className:ct("recharts-text",A),textAnchor:p,fill:b.includes("url")?k4:b}),x.map(function(U,V){var R=U.words.join(C?"":" ");return k.createElement("tspan",{x:P,dy:V===0?O:a,key:R},R)}))};function Fa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nUe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $j(t){let e,r,n;t.length!==2?(e=Fa,r=(a,l)=>Fa(t(a),l),n=(a,l)=>t(a)-l):(e=t===Fa||t===nUe?t:iUe,r=t,n=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;r(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;r(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&n(a[d-1],l)>-n(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function iUe(){return 0}function rX(t){return t===null?NaN:+t}function*oUe(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}const sUe=$j(Fa),Qg=sUe.right;$j(rX).center;class O4 extends Map{constructor(e,r=cUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(R4(this,e))}has(e){return super.has(R4(this,e))}set(e,r){return super.set(aUe(this,e),r)}delete(e){return super.delete(lUe(this,e))}}function R4({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function aUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function lUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function cUe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function uUe(t=Fa){if(t===Fa)return nX;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function nX(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const fUe=Math.sqrt(50),dUe=Math.sqrt(10),hUe=Math.sqrt(2);function k_(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=fUe?10:o>=dUe?5:o>=hUe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=r&&r<2?k_(t,e,r*2):[a,l,c]}function CI(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,o,s]=n?k_(e,t,r):k_(t,e,r);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(n)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function PI(t,e,r){return e=+e,t=+t,r=+r,k_(t,e,r)[2]}function TI(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?PI(e,t,r):PI(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function j4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function $4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function iX(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?nX:uUe(i);n>r;){if(n-r>600){const l=n-r+1,c=e-r+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(e-c*d/l+h)),m=Math.min(n,Math.floor(e+(l-c)*d/l+h));iX(t,e,p,m,i)}const o=t[e];let s=r,a=n;for(Vh(t,r,e),i(t[n],o)>0&&Vh(t,r,n);s<a;){for(Vh(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[r],o)===0?Vh(t,r,a):(++a,Vh(t,a,n)),a<=e&&(r=a+1),e<=a&&(n=a-1)}return t}function Vh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function pUe(t,e,r){if(t=Float64Array.from(oUe(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return $4(t);if(e>=1)return j4(t);var n,i=(n-1)*e,o=Math.floor(i),s=j4(iX(t,o).subarray(0,o+1)),a=$4(t.subarray(o+1));return s+(a-s)*(i-o)}}function mUe(t,e,r=rX){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),s=+r(t[o],o,t),a=+r(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function yUe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}function Bi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Fs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const II=Symbol("implicit");function Dj(){var t=new O4,e=[],r=[],n=II;function i(o){let s=t.get(o);if(s===void 0){if(n!==II)return n;t.set(o,s=e.push(o)-1)}return r[s%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new O4;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Dj(e,r).unknown(n)},Bi.apply(i,arguments),i}function uy(){var t=Dj().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,p=i<n,m=p?i:n,y=p?n:i;o=(y-m)/Math.max(1,h-l+c*2),a&&(o=Math.floor(o)),m+=(y-m-o*(h-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var g=yUe(h).map(function(b){return m+o*b});return r(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return uy(e(),[n,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Bi.apply(d(),arguments)}function oX(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return oX(e())},t}function Yp(){return oX(uy.apply(null,arguments).paddingInner(1))}function Mj(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function sX(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Yg(){}var fy=.7,O_=1/fy,yf="\\s*([+-]?\\d+)\\s*",dy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gUe=/^#([0-9a-f]{3,8})$/,vUe=new RegExp(`^rgb\\(${yf},${yf},${yf}\\)$`),bUe=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),xUe=new RegExp(`^rgba\\(${yf},${yf},${yf},${dy}\\)$`),_Ue=new RegExp(`^rgba\\(${Go},${Go},${Go},${dy}\\)$`),wUe=new RegExp(`^hsl\\(${dy},${Go},${Go}\\)$`),SUe=new RegExp(`^hsla\\(${dy},${Go},${Go},${dy}\\)$`),D4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mj(Yg,hy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:M4,formatHex:M4,formatHex8:EUe,formatHsl:AUe,formatRgb:F4,toString:F4});function M4(){return this.rgb().formatHex()}function EUe(){return this.rgb().formatHex8()}function AUe(){return aX(this).formatHsl()}function F4(){return this.rgb().formatRgb()}function hy(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=gUe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?L4(e):r===3?new Fn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?l0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?l0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vUe.exec(t))?new Fn(e[1],e[2],e[3],1):(e=bUe.exec(t))?new Fn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xUe.exec(t))?l0(e[1],e[2],e[3],e[4]):(e=_Ue.exec(t))?l0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wUe.exec(t))?V4(e[1],e[2]/100,e[3]/100,1):(e=SUe.exec(t))?V4(e[1],e[2]/100,e[3]/100,e[4]):D4.hasOwnProperty(t)?L4(D4[t]):t==="transparent"?new Fn(NaN,NaN,NaN,0):null}function L4(t){return new Fn(t>>16&255,t>>8&255,t&255,1)}function l0(t,e,r,n){return n<=0&&(t=e=r=NaN),new Fn(t,e,r,n)}function CUe(t){return t instanceof Yg||(t=hy(t)),t?(t=t.rgb(),new Fn(t.r,t.g,t.b,t.opacity)):new Fn}function NI(t,e,r,n){return arguments.length===1?CUe(t):new Fn(t,e,r,n??1)}function Fn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Mj(Fn,NI,sX(Yg,{brighter(t){return t=t==null?O_:Math.pow(O_,t),new Fn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fy:Math.pow(fy,t),new Fn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Fn(yc(this.r),yc(this.g),yc(this.b),R_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:B4,formatHex:B4,formatHex8:PUe,formatRgb:U4,toString:U4}));function B4(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}`}function PUe(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}${Wl((isNaN(this.opacity)?1:this.opacity)*255)}`}function U4(){const t=R_(this.opacity);return`${t===1?"rgb(":"rgba("}${yc(this.r)}, ${yc(this.g)}, ${yc(this.b)}${t===1?")":`, ${t})`}`}function R_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function yc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wl(t){return t=yc(t),(t<16?"0":"")+t.toString(16)}function V4(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new eo(t,e,r,n)}function aX(t){if(t instanceof eo)return new eo(t.h,t.s,t.l,t.opacity);if(t instanceof Yg||(t=hy(t)),!t)return new eo;if(t instanceof eo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-e)/a+2:s=(e-r)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new eo(s,a,l,t.opacity)}function TUe(t,e,r,n){return arguments.length===1?aX(t):new eo(t,e,r,n??1)}function eo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Mj(eo,TUe,sX(Yg,{brighter(t){return t=t==null?O_:Math.pow(O_,t),new eo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fy:Math.pow(fy,t),new eo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Fn(KA(t>=240?t-240:t+120,i,n),KA(t,i,n),KA(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new eo(W4(this.h),c0(this.s),c0(this.l),R_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=R_(this.opacity);return`${t===1?"hsl(":"hsla("}${W4(this.h)}, ${c0(this.s)*100}%, ${c0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function W4(t){return t=(t||0)%360,t<0?t+360:t}function c0(t){return Math.max(0,Math.min(1,t||0))}function KA(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Fj=t=>()=>t;function IUe(t,e){return function(r){return t+r*e}}function NUe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function kUe(t){return(t=+t)==1?lX:function(e,r){return r-e?NUe(e,r,t):Fj(isNaN(e)?r:e)}}function lX(t,e){var r=e-t;return r?IUe(t,r):Fj(isNaN(t)?e:t)}const z4=function t(e){var r=kUe(e);function n(i,o){var s=r((i=NI(i)).r,(o=NI(o)).r),a=r(i.g,o.g),l=r(i.b,o.b),c=lX(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return n.gamma=t,n}(1);function OUe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function RUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jUe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=fh(t[s],e[s]);for(;s<r;++s)o[s]=e[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function $Ue(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function j_(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function DUe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=fh(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var kI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QA=new RegExp(kI.source,"g");function MUe(t){return function(){return t}}function FUe(t){return function(e){return t(e)+""}}function LUe(t,e){var r=kI.lastIndex=QA.lastIndex=0,n,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(n=kI.exec(t))&&(i=QA.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:j_(n,i)})),r=QA.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?FUe(l[0].x):MUe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function fh(t,e){var r=typeof e,n;return e==null||r==="boolean"?Fj(e):(r==="number"?j_:r==="string"?(n=hy(e))?(e=n,z4):LUe:e instanceof hy?z4:e instanceof Date?$Ue:RUe(e)?OUe:Array.isArray(e)?jUe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?DUe:j_)(t,e)}function Lj(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function BUe(t,e){e===void 0&&(e=t,t=fh);for(var r=0,n=e.length-1,i=e[0],o=new Array(n<0?0:n);r<n;)o[r]=t(i,i=e[++r]);return function(s){var a=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return o[a](s-a)}}function UUe(t){return function(){return t}}function $_(t){return+t}var G4=[0,1];function An(t){return t}function OI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:UUe(isNaN(e)?NaN:.5)}function VUe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function WUe(t,e,r){var n=t[0],i=t[1],o=e[0],s=e[1];return i<n?(n=OI(i,n),o=r(s,o)):(n=OI(n,i),o=r(o,s)),function(a){return o(n(a))}}function zUe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=OI(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(a){var l=Qg(t,a,1,n)-1;return o[l](i[l](a))}}function Xg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dS(){var t=G4,e=G4,r=fh,n,i,o,s=An,a,l,c;function u(){var h=Math.min(t.length,e.length);return s!==An&&(s=VUe(t[0],t[h-1])),a=h>2?zUe:WUe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(n),e,r)))(n(s(h)))}return d.invert=function(h){return s(i((c||(c=a(e,t.map(n),j_)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,$_),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),r=Lj,u()},d.clamp=function(h){return arguments.length?(s=h?!0:An,u()):s!==An},d.interpolate=function(h){return arguments.length?(r=h,u()):r},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,p){return n=h,i=p,u()}}function Bj(){return dS()(An,An)}function GUe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function D_(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ad(t){return t=D_(Math.abs(t)),t?t[1]:NaN}function qUe(t,e){return function(r,n){for(var i=r.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),o.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function HUe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var KUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function py(t){if(!(e=KUe.exec(t)))throw new Error("invalid format: "+t);var e;return new Uj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}py.prototype=Uj.prototype;function Uj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Uj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QUe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var cX;function YUe(t,e){var r=D_(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(cX=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+D_(t,Math.max(0,e+o-1))[0]}function q4(t,e){var r=D_(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const H4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:GUe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>q4(t*100,e),r:q4,s:YUe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function K4(t){return t}var Q4=Array.prototype.map,Y4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function XUe(t){var e=t.grouping===void 0||t.thousands===void 0?K4:qUe(Q4.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?K4:HUe(Q4.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=py(d);var h=d.fill,p=d.align,m=d.sign,y=d.symbol,g=d.zero,b=d.width,v=d.comma,x=d.precision,S=d.trim,_=d.type;_==="n"?(v=!0,_="g"):H4[_]||(x===void 0&&(x=12),S=!0,_="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var w=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=y==="$"?n:/[%p]/.test(_)?s:"",C=H4[_],T=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function P(I){var O=w,N=A,j,L,U;if(_==="c")N=C(I)+N,I="";else{I=+I;var V=I<0||1/I<0;if(I=isNaN(I)?l:C(Math.abs(I),x),S&&(I=QUe(I)),V&&+I==0&&m!=="+"&&(V=!1),O=(V?m==="("?m:a:m==="-"||m==="("?"":m)+O,N=(_==="s"?Y4[8+cX/3]:"")+N+(V&&m==="("?")":""),T){for(j=-1,L=I.length;++j<L;)if(U=I.charCodeAt(j),48>U||U>57){N=(U===46?i+I.slice(j+1):I.slice(j))+N,I=I.slice(0,j);break}}}v&&!g&&(I=e(I,1/0));var R=O.length+I.length+N.length,F=R<b?new Array(b-R+1).join(h):"";switch(v&&g&&(I=e(F+I,F.length?b-N.length:1/0),F=""),p){case"<":I=O+I+N+F;break;case"=":I=O+F+I+N;break;case"^":I=F.slice(0,R=F.length>>1)+O+I+N+F.slice(R);break;default:I=F+O+I+N;break}return o(I)}return P.toString=function(){return d+""},P}function u(d,h){var p=c((d=py(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Ad(h)/3)))*3,y=Math.pow(10,-m),g=Y4[8+m/3];return function(b){return p(y*b)+g}}return{format:c,formatPrefix:u}}var u0,Vj,uX;JUe({thousands:",",grouping:[3],currency:["$",""]});function JUe(t){return u0=XUe(t),Vj=u0.format,uX=u0.formatPrefix,u0}function ZUe(t){return Math.max(0,-Ad(Math.abs(t)))}function eVe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ad(e)/3)))*3-Ad(Math.abs(t)))}function tVe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ad(e)-Ad(t))+1}function fX(t,e,r,n){var i=TI(t,e,r),o;switch(n=py(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=eVe(i,s))&&(n.precision=o),uX(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=tVe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=ZUe(i))&&(n.precision=o-(n.type==="%")*2);break}}return Vj(n)}function ul(t){var e=t.domain;return t.ticks=function(r){var n=e();return CI(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return fX(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,s=n[i],a=n[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=PI(s,a,r),c===l)return n[i]=s,n[o]=a,e(n);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function M_(){var t=Bj();return t.copy=function(){return Xg(t,M_())},Bi.apply(t,arguments),ul(t)}function dX(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,$_),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return dX(t).unknown(e)},t=arguments.length?Array.from(t,$_):[0,1],ul(r)}function hX(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),t[r]=e.floor(i),t[n]=e.ceil(o),t}function X4(t){return Math.log(t)}function J4(t){return Math.exp(t)}function rVe(t){return-Math.log(-t)}function nVe(t){return-Math.exp(-t)}function iVe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function oVe(t){return t===10?iVe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function sVe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Z4(t){return(e,r)=>-t(-e,r)}function Wj(t){const e=t(X4,J4),r=e.domain;let n=10,i,o;function s(){return i=sVe(n),o=oVe(n),r()[0]<0?(i=Z4(i),o=Z4(o),t(rVe,nVe)):t(X4,J4),e}return e.base=function(a){return arguments.length?(n=+a,s()):n},e.domain=function(a){return arguments.length?(r(a),s()):r()},e.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),p=i(u),m,y;const g=a==null?10:+a;let b=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<n;++m)if(y=h<0?m/o(-h):m*o(h),!(y<c)){if(y>u)break;b.push(y)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(y=h>0?m/o(-h):m*o(h),!(y<c)){if(y>u)break;b.push(y)}b.length*2<g&&(b=CI(c,u,g))}else b=CI(h,p,Math.min(p-h,g)).map(o);return d?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=py(l)).precision==null&&(l.trim=!0),l=Vj(l)),a===1/0)return l;const c=Math.max(1,n*a/e.ticks().length);return u=>{let d=u/o(Math.round(i(u)));return d*n<n-.5&&(d*=n),d<=c?l(u):""}},e.nice=()=>r(hX(r(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function pX(){const t=Wj(dS()).domain([1,10]);return t.copy=()=>Xg(t,pX()).base(t.base()),Bi.apply(t,arguments),t}function eU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function tU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function zj(t){var e=1,r=t(eU(e),tU(e));return r.constant=function(n){return arguments.length?t(eU(e=+n),tU(e)):e},ul(r)}function mX(){var t=zj(dS());return t.copy=function(){return Xg(t,mX()).constant(t.constant())},Bi.apply(t,arguments)}function rU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function aVe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function lVe(t){return t<0?-t*t:t*t}function Gj(t){var e=t(An,An),r=1;function n(){return r===1?t(An,An):r===.5?t(aVe,lVe):t(rU(r),rU(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ul(e)}function qj(){var t=Gj(dS());return t.copy=function(){return Xg(t,qj()).exponent(t.exponent())},Bi.apply(t,arguments),t}function cVe(){return qj.apply(null,arguments).exponent(.5)}function nU(t){return Math.sign(t)*t*t}function uVe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function yX(){var t=Bj(),e=[0,1],r=!1,n;function i(o){var s=uVe(t(o));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(o){return t.invert(nU(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,$_)).map(nU)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return yX(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Bi.apply(i,arguments),ul(i)}function gX(){var t=[],e=[],r=[],n;function i(){var s=0,a=Math.max(1,e.length);for(r=new Array(a-1);++s<a;)r[s-1]=mUe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?n:e[Qg(r,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Fa),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return gX().domain(t).range(e).unknown(n)},Bi.apply(o,arguments)}function vX(){var t=0,e=1,r=1,n=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Qg(n,l,0,r)]:o}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,n[0]]:c>=r?[n[r-1],e]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return vX().domain([t,e]).range(i).unknown(o)},Bi.apply(ul(s),arguments)}function bX(){var t=[.5],e=[0,1],r,n=1;function i(o){return o!=null&&o<=o?e[Qg(t,o,0,n)]:r}return i.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return bX().domain(t).range(e).unknown(r)},Bi.apply(i,arguments)}const YA=new Date,XA=new Date;function yr(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=o=>yr(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),r&&(i.count=(o,s)=>(YA.setTime(+o),XA.setTime(+s),t(YA),t(XA),Math.floor(r(YA,XA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?s=>n(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const F_=yr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);F_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?yr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):F_);F_.range;const ps=1e3,Ii=ps*60,ms=Ii*60,Ns=ms*24,Hj=Ns*7,iU=Ns*30,JA=Ns*365,zl=yr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ps)},(t,e)=>(e-t)/ps,t=>t.getUTCSeconds());zl.range;const Kj=yr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ps)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getMinutes());Kj.range;const Qj=yr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getUTCMinutes());Qj.range;const Yj=yr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ps-t.getMinutes()*Ii)},(t,e)=>{t.setTime(+t+e*ms)},(t,e)=>(e-t)/ms,t=>t.getHours());Yj.range;const Xj=yr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ms)},(t,e)=>(e-t)/ms,t=>t.getUTCHours());Xj.range;const Jg=yr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ii)/Ns,t=>t.getDate()-1);Jg.range;const hS=yr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ns,t=>t.getUTCDate()-1);hS.range;const xX=yr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ns,t=>Math.floor(t/Ns));xX.range;function qc(t){return yr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ii)/Hj)}const pS=qc(0),L_=qc(1),fVe=qc(2),dVe=qc(3),Cd=qc(4),hVe=qc(5),pVe=qc(6);pS.range;L_.range;fVe.range;dVe.range;Cd.range;hVe.range;pVe.range;function Hc(t){return yr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Hj)}const mS=Hc(0),B_=Hc(1),mVe=Hc(2),yVe=Hc(3),Pd=Hc(4),gVe=Hc(5),vVe=Hc(6);mS.range;B_.range;mVe.range;yVe.range;Pd.range;gVe.range;vVe.range;const Jj=yr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Jj.range;const Zj=yr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Zj.range;const ks=yr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ks.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:yr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ks.range;const Os=yr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Os.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:yr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Os.range;function _X(t,e,r,n,i,o){const s=[[zl,1,ps],[zl,5,5*ps],[zl,15,15*ps],[zl,30,30*ps],[o,1,Ii],[o,5,5*Ii],[o,15,15*Ii],[o,30,30*Ii],[i,1,ms],[i,3,3*ms],[i,6,6*ms],[i,12,12*ms],[n,1,Ns],[n,2,2*Ns],[r,1,Hj],[e,1,iU],[e,3,3*iU],[t,1,JA]];function a(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),m=p?p.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,p=$j(([,,g])=>g).right(s,h);if(p===s.length)return t.every(TI(c/JA,u/JA,d));if(p===0)return F_.every(Math.max(TI(c,u,d),1));const[m,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return m.every(y)}return[a,l]}const[bVe,xVe]=_X(Os,Zj,mS,xX,Xj,Qj),[_Ve,wVe]=_X(ks,Jj,pS,Jg,Yj,Kj);function ZA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function eC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wh(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function SVe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=zh(i),u=Gh(i),d=zh(o),h=Gh(o),p=zh(s),m=Gh(s),y=zh(a),g=Gh(a),b=zh(l),v=Gh(l),x={a:V,A:R,b:F,B:z,c:null,d:uU,e:uU,f:qVe,g:r6e,G:i6e,H:WVe,I:zVe,j:GVe,L:wX,m:HVe,M:KVe,p:le,q:re,Q:hU,s:pU,S:QVe,u:YVe,U:XVe,V:JVe,w:ZVe,W:e6e,x:null,X:null,y:t6e,Y:n6e,Z:o6e,"%":dU},S={a:be,A:at,b:rt,B:Wt,c:null,d:fU,e:fU,f:c6e,g:b6e,G:_6e,H:s6e,I:a6e,j:l6e,L:EX,m:u6e,M:f6e,p:pt,q:Zt,Q:hU,s:pU,S:d6e,u:h6e,U:p6e,V:m6e,w:y6e,W:g6e,x:null,X:null,y:v6e,Y:x6e,Z:w6e,"%":dU},_={a:P,A:I,b:O,B:N,c:j,d:lU,e:lU,f:LVe,g:aU,G:sU,H:cU,I:cU,j:$Ve,L:FVe,m:jVe,M:DVe,p:T,q:RVe,Q:UVe,s:VVe,S:MVe,u:TVe,U:IVe,V:NVe,w:PVe,W:kVe,x:L,X:U,y:aU,Y:sU,Z:OVe,"%":BVe};x.x=w(r,x),x.X=w(n,x),x.c=w(e,x),S.x=w(r,S),S.X=w(n,S),S.c=w(e,S);function w(te,xe){return function(Ee){var q=[],Ze=-1,ke=0,vt=te.length,$t,en,Wn;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ze<vt;)te.charCodeAt(Ze)===37&&(q.push(te.slice(ke,Ze)),(en=oU[$t=te.charAt(++Ze)])!=null?$t=te.charAt(++Ze):en=$t==="e"?" ":"0",(Wn=xe[$t])&&($t=Wn(Ee,en)),q.push($t),ke=Ze+1);return q.push(te.slice(ke,Ze)),q.join("")}}function A(te,xe){return function(Ee){var q=Wh(1900,void 0,1),Ze=C(q,te,Ee+="",0),ke,vt;if(Ze!=Ee.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(xe&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(ke=eC(Wh(q.y,0,1)),vt=ke.getUTCDay(),ke=vt>4||vt===0?B_.ceil(ke):B_(ke),ke=hS.offset(ke,(q.V-1)*7),q.y=ke.getUTCFullYear(),q.m=ke.getUTCMonth(),q.d=ke.getUTCDate()+(q.w+6)%7):(ke=ZA(Wh(q.y,0,1)),vt=ke.getDay(),ke=vt>4||vt===0?L_.ceil(ke):L_(ke),ke=Jg.offset(ke,(q.V-1)*7),q.y=ke.getFullYear(),q.m=ke.getMonth(),q.d=ke.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),vt="Z"in q?eC(Wh(q.y,0,1)).getUTCDay():ZA(Wh(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(vt+5)%7:q.w+q.U*7-(vt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,eC(q)):ZA(q)}}function C(te,xe,Ee,q){for(var Ze=0,ke=xe.length,vt=Ee.length,$t,en;Ze<ke;){if(q>=vt)return-1;if($t=xe.charCodeAt(Ze++),$t===37){if($t=xe.charAt(Ze++),en=_[$t in oU?xe.charAt(Ze++):$t],!en||(q=en(te,Ee,q))<0)return-1}else if($t!=Ee.charCodeAt(q++))return-1}return q}function T(te,xe,Ee){var q=c.exec(xe.slice(Ee));return q?(te.p=u.get(q[0].toLowerCase()),Ee+q[0].length):-1}function P(te,xe,Ee){var q=p.exec(xe.slice(Ee));return q?(te.w=m.get(q[0].toLowerCase()),Ee+q[0].length):-1}function I(te,xe,Ee){var q=d.exec(xe.slice(Ee));return q?(te.w=h.get(q[0].toLowerCase()),Ee+q[0].length):-1}function O(te,xe,Ee){var q=b.exec(xe.slice(Ee));return q?(te.m=v.get(q[0].toLowerCase()),Ee+q[0].length):-1}function N(te,xe,Ee){var q=y.exec(xe.slice(Ee));return q?(te.m=g.get(q[0].toLowerCase()),Ee+q[0].length):-1}function j(te,xe,Ee){return C(te,e,xe,Ee)}function L(te,xe,Ee){return C(te,r,xe,Ee)}function U(te,xe,Ee){return C(te,n,xe,Ee)}function V(te){return s[te.getDay()]}function R(te){return o[te.getDay()]}function F(te){return l[te.getMonth()]}function z(te){return a[te.getMonth()]}function le(te){return i[+(te.getHours()>=12)]}function re(te){return 1+~~(te.getMonth()/3)}function be(te){return s[te.getUTCDay()]}function at(te){return o[te.getUTCDay()]}function rt(te){return l[te.getUTCMonth()]}function Wt(te){return a[te.getUTCMonth()]}function pt(te){return i[+(te.getUTCHours()>=12)]}function Zt(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var xe=w(te+="",x);return xe.toString=function(){return te},xe},parse:function(te){var xe=A(te+="",!1);return xe.toString=function(){return te},xe},utcFormat:function(te){var xe=w(te+="",S);return xe.toString=function(){return te},xe},utcParse:function(te){var xe=A(te+="",!0);return xe.toString=function(){return te},xe}}}var oU={"-":"",_:" ",0:"0"},Dr=/^\s*\d+/,EVe=/^%/,AVe=/[\\^$*+?|[\]().{}]/g;function tt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function CVe(t){return t.replace(AVe,"\\$&")}function zh(t){return new RegExp("^(?:"+t.map(CVe).join("|")+")","i")}function Gh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function PVe(t,e,r){var n=Dr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function TVe(t,e,r){var n=Dr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function IVe(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function NVe(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function kVe(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function sU(t,e,r){var n=Dr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function aU(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function OVe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function RVe(t,e,r){var n=Dr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function jVe(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function lU(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function $Ve(t,e,r){var n=Dr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function cU(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function DVe(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function MVe(t,e,r){var n=Dr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function FVe(t,e,r){var n=Dr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function LVe(t,e,r){var n=Dr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function BVe(t,e,r){var n=EVe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function UVe(t,e,r){var n=Dr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function VVe(t,e,r){var n=Dr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function uU(t,e){return tt(t.getDate(),e,2)}function WVe(t,e){return tt(t.getHours(),e,2)}function zVe(t,e){return tt(t.getHours()%12||12,e,2)}function GVe(t,e){return tt(1+Jg.count(ks(t),t),e,3)}function wX(t,e){return tt(t.getMilliseconds(),e,3)}function qVe(t,e){return wX(t,e)+"000"}function HVe(t,e){return tt(t.getMonth()+1,e,2)}function KVe(t,e){return tt(t.getMinutes(),e,2)}function QVe(t,e){return tt(t.getSeconds(),e,2)}function YVe(t){var e=t.getDay();return e===0?7:e}function XVe(t,e){return tt(pS.count(ks(t)-1,t),e,2)}function SX(t){var e=t.getDay();return e>=4||e===0?Cd(t):Cd.ceil(t)}function JVe(t,e){return t=SX(t),tt(Cd.count(ks(t),t)+(ks(t).getDay()===4),e,2)}function ZVe(t){return t.getDay()}function e6e(t,e){return tt(L_.count(ks(t)-1,t),e,2)}function t6e(t,e){return tt(t.getFullYear()%100,e,2)}function r6e(t,e){return t=SX(t),tt(t.getFullYear()%100,e,2)}function n6e(t,e){return tt(t.getFullYear()%1e4,e,4)}function i6e(t,e){var r=t.getDay();return t=r>=4||r===0?Cd(t):Cd.ceil(t),tt(t.getFullYear()%1e4,e,4)}function o6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function fU(t,e){return tt(t.getUTCDate(),e,2)}function s6e(t,e){return tt(t.getUTCHours(),e,2)}function a6e(t,e){return tt(t.getUTCHours()%12||12,e,2)}function l6e(t,e){return tt(1+hS.count(Os(t),t),e,3)}function EX(t,e){return tt(t.getUTCMilliseconds(),e,3)}function c6e(t,e){return EX(t,e)+"000"}function u6e(t,e){return tt(t.getUTCMonth()+1,e,2)}function f6e(t,e){return tt(t.getUTCMinutes(),e,2)}function d6e(t,e){return tt(t.getUTCSeconds(),e,2)}function h6e(t){var e=t.getUTCDay();return e===0?7:e}function p6e(t,e){return tt(mS.count(Os(t)-1,t),e,2)}function AX(t){var e=t.getUTCDay();return e>=4||e===0?Pd(t):Pd.ceil(t)}function m6e(t,e){return t=AX(t),tt(Pd.count(Os(t),t)+(Os(t).getUTCDay()===4),e,2)}function y6e(t){return t.getUTCDay()}function g6e(t,e){return tt(B_.count(Os(t)-1,t),e,2)}function v6e(t,e){return tt(t.getUTCFullYear()%100,e,2)}function b6e(t,e){return t=AX(t),tt(t.getUTCFullYear()%100,e,2)}function x6e(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function _6e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Pd(t):Pd.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function w6e(){return"+0000"}function dU(){return"%"}function hU(t){return+t}function pU(t){return Math.floor(+t/1e3)}var au,CX,PX;S6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function S6e(t){return au=SVe(t),CX=au.format,au.parse,PX=au.utcFormat,au.utcParse,au}function E6e(t){return new Date(t)}function A6e(t){return t instanceof Date?+t:+new Date(+t)}function e$(t,e,r,n,i,o,s,a,l,c){var u=Bj(),d=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),y=c("%I:%M"),g=c("%I %p"),b=c("%a %d"),v=c("%b %d"),x=c("%B"),S=c("%Y");function _(w){return(l(w)<w?p:a(w)<w?m:s(w)<w?y:o(w)<w?g:n(w)<w?i(w)<w?b:v:r(w)<w?x:S)(w)}return u.invert=function(w){return new Date(d(w))},u.domain=function(w){return arguments.length?h(Array.from(w,A6e)):h().map(E6e)},u.ticks=function(w){var A=h();return t(A[0],A[A.length-1],w??10)},u.tickFormat=function(w,A){return A==null?_:c(A)},u.nice=function(w){var A=h();return(!w||typeof w.range!="function")&&(w=e(A[0],A[A.length-1],w??10)),w?h(hX(A,w)):u},u.copy=function(){return Xg(u,e$(t,e,r,n,i,o,s,a,l,c))},u}function C6e(){return Bi.apply(e$(_Ve,wVe,ks,Jj,pS,Jg,Yj,Kj,zl,CX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function P6e(){return Bi.apply(e$(bVe,xVe,Os,Zj,mS,hS,Xj,Qj,zl,PX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yS(){var t=0,e=1,r,n,i,o,s=An,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-r)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,r=o(t=+t),n=o(e=+e),i=r===n?0:1/(n-r),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s};function u(d){return function(h){var p,m;return arguments.length?([p,m]=h,s=d(p,m),c):[s(0),s(1)]}}return c.range=u(fh),c.rangeRound=u(Lj),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,r=d(t),n=d(e),i=r===n?0:1/(n-r),c}}function fl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function TX(){var t=ul(yS()(An));return t.copy=function(){return fl(t,TX())},Fs.apply(t,arguments)}function IX(){var t=Wj(yS()).domain([1,10]);return t.copy=function(){return fl(t,IX()).base(t.base())},Fs.apply(t,arguments)}function NX(){var t=zj(yS());return t.copy=function(){return fl(t,NX()).constant(t.constant())},Fs.apply(t,arguments)}function t$(){var t=Gj(yS());return t.copy=function(){return fl(t,t$()).exponent(t.exponent())},Fs.apply(t,arguments)}function T6e(){return t$.apply(null,arguments).exponent(.5)}function kX(){var t=[],e=An;function r(n){if(n!=null&&!isNaN(n=+n))return e((Qg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fa),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>pUe(t,o/n))},r.copy=function(){return kX(e).domain(t)},Fs.apply(r,arguments)}function gS(){var t=0,e=.5,r=1,n=1,i,o,s,a,l,c=An,u,d=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-o)*(n*y<n*o?a:l),c(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=u(t=+t),o=u(e=+e),s=u(r=+r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(c=y,p):c};function m(y){return function(g){var b,v,x;return arguments.length?([b,v,x]=g,c=BUe(y,[b,v,x]),p):[c(0),c(.5),c(1)]}}return p.range=m(fh),p.rangeRound=m(Lj),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return u=y,i=y(t),o=y(e),s=y(r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p}}function OX(){var t=ul(gS()(An));return t.copy=function(){return fl(t,OX())},Fs.apply(t,arguments)}function RX(){var t=Wj(gS()).domain([.1,1,10]);return t.copy=function(){return fl(t,RX()).base(t.base())},Fs.apply(t,arguments)}function jX(){var t=zj(gS());return t.copy=function(){return fl(t,jX()).constant(t.constant())},Fs.apply(t,arguments)}function r$(){var t=Gj(gS());return t.copy=function(){return fl(t,r$()).exponent(t.exponent())},Fs.apply(t,arguments)}function I6e(){return r$.apply(null,arguments).exponent(.5)}const mU=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uy,scaleDiverging:OX,scaleDivergingLog:RX,scaleDivergingPow:r$,scaleDivergingSqrt:I6e,scaleDivergingSymlog:jX,scaleIdentity:dX,scaleImplicit:II,scaleLinear:M_,scaleLog:pX,scaleOrdinal:Dj,scalePoint:Yp,scalePow:qj,scaleQuantile:gX,scaleQuantize:vX,scaleRadial:yX,scaleSequential:TX,scaleSequentialLog:IX,scaleSequentialPow:t$,scaleSequentialQuantile:kX,scaleSequentialSqrt:T6e,scaleSequentialSymlog:NX,scaleSqrt:cVe,scaleSymlog:mX,scaleThreshold:bX,scaleTime:C6e,scaleUtc:P6e,tickFormat:fX},Symbol.toStringTag,{value:"Module"}));var N6e=rh;function k6e(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(a===void 0?s===s&&!N6e(s):r(s,a)))var a=s,l=o}return l}var $X=k6e;function O6e(t,e){return t>e}var R6e=O6e,j6e=$X,$6e=R6e,D6e=ch;function M6e(t){return t&&t.length?j6e(t,D6e,$6e):void 0}var F6e=M6e;const vS=ot(F6e);function L6e(t,e){return t<e}var B6e=L6e,U6e=$X,V6e=B6e,W6e=ch;function z6e(t){return t&&t.length?U6e(t,W6e,V6e):void 0}var G6e=z6e;const bS=ot(G6e);var q6e=gj,H6e=ll,K6e=jY,Q6e=Vn;function Y6e(t,e){var r=Q6e(t)?q6e:K6e;return r(t,H6e(e))}var X6e=Y6e,J6e=OY,Z6e=X6e;function e5e(t,e){return J6e(Z6e(t,e),1)}var t5e=e5e;const r5e=ot(t5e);var n5e=Nj;function i5e(t,e){return n5e(t,e)}var o5e=i5e;const xS=ot(o5e);var dh=1e9,s5e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},i$,jt=!0,Fi="[DecimalError] ",gc=Fi+"Invalid argument: ",n$=Fi+"Exponent out of range: ",hh=Math.floor,Nl=Math.pow,a5e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xn,Tr=1e7,It=7,DX=9007199254740991,U_=hh(DX/It),ue={};ue.absoluteValue=ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ue.comparedTo=ue.cmp=function(t){var e,r,n,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};ue.decimalPlaces=ue.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*It;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ue.dividedBy=ue.div=function(t){return _s(this,new this.constructor(t))};ue.dividedToIntegerBy=ue.idiv=function(t){var e=this,r=e.constructor;return gt(_s(e,new r(t),0,1),r.precision)};ue.equals=ue.eq=function(t){return!this.cmp(t)};ue.exponent=function(){return ir(this)};ue.greaterThan=ue.gt=function(t){return this.cmp(t)>0};ue.greaterThanOrEqualTo=ue.gte=function(t){return this.cmp(t)>=0};ue.isInteger=ue.isint=function(){return this.e>this.d.length-2};ue.isNegative=ue.isneg=function(){return this.s<0};ue.isPositive=ue.ispos=function(){return this.s>0};ue.isZero=function(){return this.s===0};ue.lessThan=ue.lt=function(t){return this.cmp(t)<0};ue.lessThanOrEqualTo=ue.lte=function(t){return this.cmp(t)<1};ue.logarithm=ue.log=function(t){var e,r=this,n=r.constructor,i=n.precision,o=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Xn))throw Error(Fi+"NaN");if(r.s<1)throw Error(Fi+(r.s?"NaN":"-Infinity"));return r.eq(Xn)?new n(0):(jt=!1,e=_s(my(r,o),my(t,o),o),jt=!0,gt(e,i))};ue.minus=ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LX(e,t):MX(e,(t.s=-t.s,t))};ue.modulo=ue.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Fi+"NaN");return r.s?(jt=!1,e=_s(r,t,0,1).times(t),jt=!0,r.minus(e)):gt(new n(r),i)};ue.naturalExponential=ue.exp=function(){return FX(this)};ue.naturalLogarithm=ue.ln=function(){return my(this)};ue.negated=ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ue.plus=ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MX(e,t):LX(e,(t.s=-t.s,t))};ue.precision=ue.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gc+t);if(e=ir(i)+1,n=i.d.length-1,r=n*It+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};ue.squareRoot=ue.sqrt=function(){var t,e,r,n,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Fi+"NaN")}for(t=ir(a),jt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Mo(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=hh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(o=n,n=o.plus(_s(a,o,s+2)).times(.5),Mo(o.d).slice(0,s)===(e=Mo(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(gt(o,r+1,0),o.times(o).eq(a)){n=o;break}}else if(e!="9999")break;s+=4}return jt=!0,gt(n,r)};ue.times=ue.mul=function(t){var e,r,n,i,o,s,a,l,c,u=this,d=u.constructor,h=u.d,p=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,r=u.e+t.e,l=h.length,c=p.length,l<c&&(o=h,h=p,p=o,s=l,l=c,c=s),o=[],s=l+c,n=s;n--;)o.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)a=o[i]+p[n]*h[i-n-1]+e,o[i--]=a%Tr|0,e=a/Tr|0;o[i]=(o[i]+e)%Tr|0}for(;!o[--s];)o.pop();return e?++r:o.shift(),t.d=o,t.e=r,jt?gt(t,d.precision):t};ue.toDecimalPlaces=ue.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Yo(t,0,dh),e===void 0?e=n.rounding:Yo(e,0,8),gt(r,t+ir(r)+1,e))};ue.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=jc(n,!0):(Yo(t,0,dh),e===void 0?e=i.rounding:Yo(e,0,8),n=gt(new i(n),t+1,e),r=jc(n,!0,t+1)),r};ue.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?jc(i):(Yo(t,0,dh),e===void 0?e=o.rounding:Yo(e,0,8),n=gt(new o(i),t+ir(i)+1,e),r=jc(n.abs(),!1,t+ir(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};ue.toInteger=ue.toint=function(){var t=this,e=t.constructor;return gt(new e(t),ir(t)+1,e.rounding)};ue.toNumber=function(){return+this};ue.toPower=ue.pow=function(t){var e,r,n,i,o,s,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Xn);if(a=new l(a),!a.s){if(t.s<1)throw Error(Fi+"Infinity");return a}if(a.eq(Xn))return a;if(n=l.precision,t.eq(Xn))return gt(a,n);if(e=t.e,r=t.d.length-1,s=e>=r,o=a.s,s){if((r=u<0?-u:u)<=DX){for(i=new l(Xn),e=Math.ceil(n/It+4),jt=!1;r%2&&(i=i.times(a),gU(i.d,e)),r=hh(r/2),r!==0;)a=a.times(a),gU(a.d,e);return jt=!0,t.s<0?new l(Xn).div(i):gt(i,n)}}else if(o<0)throw Error(Fi+"NaN");return o=o<0&&t.d[Math.max(e,r)]&1?-1:1,a.s=1,jt=!1,i=t.times(my(a,n+c)),jt=!0,i=FX(i),i.s=o,i};ue.toPrecision=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?(r=ir(i),n=jc(i,r<=o.toExpNeg||r>=o.toExpPos)):(Yo(t,1,dh),e===void 0?e=o.rounding:Yo(e,0,8),i=gt(new o(i),t,e),r=ir(i),n=jc(i,t<=r||r<=o.toExpNeg,t)),n};ue.toSignificantDigits=ue.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Yo(t,1,dh),e===void 0?e=n.rounding:Yo(e,0,8)),gt(new n(r),t,e)};ue.toString=ue.valueOf=ue.val=ue.toJSON=ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ir(t),r=t.constructor;return jc(t,e<=r.toExpNeg||e>=r.toExpPos)};function MX(t,e){var r,n,i,o,s,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),jt?gt(e,d):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(n=l,o=-o,a=c.length):(n=c,i=s,a=l.length),s=Math.ceil(d/It),a=s>a?s+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=l.length,o=c.length,a-o<0&&(o=a,n=c,c=l,l=n),r=0;o;)r=(l[--o]=l[o]+c[o]+r)/Tr|0,l[o]%=Tr;for(r&&(l.unshift(r),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,jt?gt(e,d):e}function Yo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(gc+t)}function Mo(t){var e,r,n,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)n=t[e]+"",r=It-n.length,r&&(o+=ea(r)),o+=n;s=t[e],n=s+"",r=It-n.length,r&&(o+=ea(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var _s=function(){function t(n,i){var o,s=0,a=n.length;for(n=n.slice();a--;)o=n[a]*i+s,n[a]=o%Tr|0,s=o/Tr|0;return s&&n.unshift(s),n}function e(n,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function r(n,i,o){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*Tr+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,s){var a,l,c,u,d,h,p,m,y,g,b,v,x,S,_,w,A,C,T=n.constructor,P=n.s==i.s?1:-1,I=n.d,O=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(Fi+"Division by zero");for(l=n.e-i.e,A=O.length,_=I.length,p=new T(P),m=p.d=[],c=0;O[c]==(I[c]||0);)++c;if(O[c]>(I[c]||0)&&--l,o==null?v=o=T.precision:s?v=o+(ir(n)-ir(i))+1:v=o,v<0)return new T(0);if(v=v/It+2|0,c=0,A==1)for(u=0,O=O[0],v++;(c<_||u)&&v--;c++)x=u*Tr+(I[c]||0),m[c]=x/O|0,u=x%O|0;else{for(u=Tr/(O[0]+1)|0,u>1&&(O=t(O,u),I=t(I,u),A=O.length,_=I.length),S=A,y=I.slice(0,A),g=y.length;g<A;)y[g++]=0;C=O.slice(),C.unshift(0),w=O[0],O[1]>=Tr/2&&++w;do u=0,a=e(O,y,A,g),a<0?(b=y[0],A!=g&&(b=b*Tr+(y[1]||0)),u=b/w|0,u>1?(u>=Tr&&(u=Tr-1),d=t(O,u),h=d.length,g=y.length,a=e(d,y,h,g),a==1&&(u--,r(d,A<h?C:O,h))):(u==0&&(a=u=1),d=O.slice()),h=d.length,h<g&&d.unshift(0),r(y,d,g),a==-1&&(g=y.length,a=e(O,y,A,g),a<1&&(u++,r(y,A<g?C:O,g))),g=y.length):a===0&&(u++,y=[0]),m[c++]=u,a&&y[0]?y[g++]=I[S]||0:(y=[I[S]],g=1);while((S++<_||y[0]!==void 0)&&v--)}return m[0]||m.shift(),p.e=l,gt(p,s?o+ir(p)+1:o)}}();function FX(t,e){var r,n,i,o,s,a,l=0,c=0,u=t.constructor,d=u.precision;if(ir(t)>16)throw Error(n$+ir(t));if(!t.s)return new u(Xn);for(e==null?(jt=!1,a=d):a=e,s=new u(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(n=Math.log(Nl(2,c))/Math.LN10*2+5|0,a+=n,r=i=o=new u(Xn),u.precision=a;;){if(i=gt(i.times(t),a),r=r.times(++l),s=o.plus(_s(i,r,a)),Mo(s.d).slice(0,a)===Mo(o.d).slice(0,a)){for(;c--;)o=gt(o.times(o),a);return u.precision=d,e==null?(jt=!0,gt(o,d)):o}o=s}}function ir(t){for(var e=t.e*It,r=t.d[0];r>=10;r/=10)e++;return e}function tC(t,e,r){if(e>t.LN10.sd())throw jt=!0,r&&(t.precision=r),Error(Fi+"LN10 precision limit exceeded");return gt(new t(t.LN10),e)}function ea(t){for(var e="";t--;)e+="0";return e}function my(t,e){var r,n,i,o,s,a,l,c,u,d=1,h=10,p=t,m=p.d,y=p.constructor,g=y.precision;if(p.s<1)throw Error(Fi+(p.s?"NaN":"-Infinity"));if(p.eq(Xn))return new y(0);if(e==null?(jt=!1,c=g):c=e,p.eq(10))return e==null&&(jt=!0),tC(y,c);if(c+=h,y.precision=c,r=Mo(m),n=r.charAt(0),o=ir(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Mo(p.d),n=r.charAt(0),d++;o=ir(p),n>1?(p=new y("0."+r),o++):p=new y(n+"."+r.slice(1))}else return l=tC(y,c+2,g).times(o+""),p=my(new y(n+"."+r.slice(1)),c-h).plus(l),y.precision=g,e==null?(jt=!0,gt(p,g)):p;for(a=s=p=_s(p.minus(Xn),p.plus(Xn),c),u=gt(p.times(p),c),i=3;;){if(s=gt(s.times(u),c),l=a.plus(_s(s,new y(i),c)),Mo(l.d).slice(0,c)===Mo(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(tC(y,c+2,g).times(o+""))),a=_s(a,new y(d),c),y.precision=g,e==null?(jt=!0,gt(a,g)):a;a=l,i+=2}}function yU(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=hh(r/It),t.d=[],n=(r+1)%It,r<0&&(n+=It),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=It;n<i;)t.d.push(+e.slice(n,n+=It));e=e.slice(n),n=It-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),jt&&(t.e>U_||t.e<-U_))throw Error(n$+r)}else t.s=0,t.e=0,t.d=[0];return t}function gt(t,e,r){var n,i,o,s,a,l,c,u,d=t.d;for(s=1,o=d[0];o>=10;o/=10)s++;if(n=e-s,n<0)n+=It,i=e,c=d[u=0];else{if(u=Math.ceil((n+1)/It),o=d.length,u>=o)return t;for(c=o=d[u],s=1;o>=10;o/=10)s++;n%=It,i=n-It+s}if(r!==void 0&&(o=Nl(10,s-i-1),a=c/o%10|0,l=e<0||d[u+1]!==void 0||c%o,l=r<4?(a||l)&&(r==0||r==(t.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?i>0?c/Nl(10,s-i):0:d[u-1])%10&1||r==(t.s<0?8:7))),e<1||!d[0])return l?(o=ir(t),d.length=1,e=e-o-1,d[0]=Nl(10,(It-e%It)%It),t.e=hh(-e/It)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(n==0?(d.length=u,o=1,u--):(d.length=u+1,o=Nl(10,It-n),d[u]=i>0?(c/Nl(10,s-i)%Nl(10,i)|0)*o:0),l)for(;;)if(u==0){(d[0]+=o)==Tr&&(d[0]=1,++t.e);break}else{if(d[u]+=o,d[u]!=Tr)break;d[u--]=0,o=1}for(n=d.length;d[--n]===0;)d.pop();if(jt&&(t.e>U_||t.e<-U_))throw Error(n$+ir(t));return t}function LX(t,e){var r,n,i,o,s,a,l,c,u,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),jt?gt(e,p):e;if(l=t.d,d=e.d,n=e.e,c=t.e,l=l.slice(),s=c-n,s){for(u=s<0,u?(r=l,s=-s,a=d.length):(r=d,n=c,a=l.length),i=Math.max(Math.ceil(p/It),a)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}s=0}for(u&&(r=l,l=d,d=r,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=Tr-1;--l[o],l[i]+=Tr}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,jt?gt(e,p):e):new h(0)}function jc(t,e,r){var n,i=ir(t),o=Mo(t.d),s=o.length;return e?(r&&(n=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+ea(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ea(-i-1)+o,r&&(n=r-s)>0&&(o+=ea(n))):i>=s?(o+=ea(i+1-s),r&&(n=r-i-1)>0&&(o=o+"."+ea(n))):((n=i+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(o+="."),o+=ea(n))),t.s<0?"-"+o:o}function gU(t,e){if(t.length>e)return t.length=e,!0}function BX(t){var e,r,n;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(gc+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return yU(s,o.toString())}else if(typeof o!="string")throw Error(gc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,a5e.test(o))yU(s,o);else throw Error(gc+o)}if(i.prototype=ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=BX,i.config=i.set=l5e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function l5e(t){if(!t||typeof t!="object")throw Error(Fi+"Object expected");var e,r,n,i=["precision",1,dh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(hh(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(gc+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(gc+r+": "+n);return this}var i$=BX(s5e);Xn=new i$(1);const mt=i$;function c5e(t){return h5e(t)||d5e(t)||f5e(t)||u5e()}function u5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f5e(t,e){if(t){if(typeof t=="string")return RI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RI(t,e)}}function d5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function h5e(t){if(Array.isArray(t))return RI(t)}function RI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p5e=function(e){return e},UX={"@@functional/placeholder":!0},VX=function(e){return e===UX},vU=function(e){return function r(){return arguments.length===0||arguments.length===1&&VX(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},m5e=function t(e,r){return e===1?r:vU(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==UX}).length;return s>=e?r.apply(void 0,i):t(e-s,vU(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(function(d){return VX(d)?l.shift():d});return r.apply(void 0,c5e(u).concat(l))}))})},_S=function(e){return m5e(e.length,e)},jI=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},y5e=_S(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),g5e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return p5e;var i=r.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},$I=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},WX=function(e){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r&&o.every(function(a,l){return a===r[l]})||(r=o,n=e.apply(void 0,o)),n}};function v5e(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function b5e(t,e,r){for(var n=new mt(t),i=0,o=[];n.lt(e)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var x5e=_S(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),_5e=_S(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),w5e=_S(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const wS={rangeStep:b5e,getDigitCount:v5e,interpolateNumber:x5e,uninterpolateNumber:_5e,uninterpolateTruncation:w5e};function DI(t){return A5e(t)||E5e(t)||zX(t)||S5e()}function S5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function A5e(t){if(Array.isArray(t))return MI(t)}function yy(t,e){return T5e(t)||P5e(t,e)||zX(t,e)||C5e()}function C5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zX(t,e){if(t){if(typeof t=="string")return MI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MI(t,e)}}function MI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P5e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function T5e(t){if(Array.isArray(t))return t}function GX(t){var e=yy(t,2),r=e[0],n=e[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function qX(t,e,r){if(t.lte(0))return new mt(0);var n=wS.getDigitCount(t.toNumber()),i=new mt(10).pow(n),o=t.div(i),s=n!==1?.05:.1,a=new mt(Math.ceil(o.div(s).toNumber())).add(r).mul(s),l=a.mul(i);return e?l:new mt(Math.ceil(l))}function I5e(t,e,r){var n=1,i=new mt(t);if(!i.isint()&&r){var o=Math.abs(t);o<1?(n=new mt(10).pow(wS.getDigitCount(t)-1),i=new mt(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):r||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),a=g5e(y5e(function(l){return i.add(new mt(l-s).mul(n)).toNumber()}),jI);return a(0,e)}function HX(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var o=qX(new mt(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new mt(e).sub(s).div(o).toNumber()),c=a+l+1;return c>r?HX(t,e,r,n,i+1):(c<r&&(l=e>0?l+(r-c):l,a=e>0?a:a+(r-c)),{step:o,tickMin:s.sub(new mt(a).mul(o)),tickMax:s.add(new mt(l).mul(o))})}function N5e(t){var e=yy(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=GX([r,n]),l=yy(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(DI(jI(0,i-1).map(function(){return 1/0}))):[].concat(DI(jI(0,i-1).map(function(){return-1/0})),[u]);return r>n?$I(d):d}if(c===u)return I5e(c,i,o);var h=HX(c,u,s,o),p=h.step,m=h.tickMin,y=h.tickMax,g=wS.rangeStep(m,y.add(new mt(.1).mul(p)),p);return r>n?$I(g):g}function k5e(t,e){var r=yy(t,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=GX([n,i]),a=yy(s,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var u=Math.max(e,2),d=qX(new mt(c).sub(l).div(u-1),o,0),h=[].concat(DI(wS.rangeStep(new mt(l),new mt(c).sub(new mt(.99).mul(d)),d)),[c]);return n>i?$I(h):h}var O5e=WX(N5e),R5e=WX(k5e),j5e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V_.apply(this,arguments)}function $5e(t,e){return L5e(t)||F5e(t,e)||M5e(t,e)||D5e()}function D5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5e(t,e){if(t){if(typeof t=="string")return bU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bU(t,e)}}function bU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function F5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function L5e(t){if(Array.isArray(t))return t}function B5e(t,e){if(t==null)return{};var r=U5e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function U5e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Zg(t){var e=t.offset,r=t.layout,n=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,c=B5e(t,j5e),u=qe(c),d=o.map(function(h){var p=s(h,i),m=p.x,y=p.y,g=p.value,b=p.errorVal;if(!b)return null;var v=[],x,S;if(Array.isArray(b)){var _=$5e(b,2);x=_[0],S=_[1]}else x=S=b;if(r==="vertical"){var w=a.scale,A=y+e,C=A+n,T=A-n,P=w(g-x),I=w(g+S);v.push({x1:I,y1:C,x2:I,y2:T}),v.push({x1:P,y1:A,x2:I,y2:A}),v.push({x1:P,y1:C,x2:P,y2:T})}else if(r==="horizontal"){var O=l.scale,N=m+e,j=N-n,L=N+n,U=O(g-x),V=O(g+S);v.push({x1:j,y1:V,x2:L,y2:V}),v.push({x1:N,y1:U,x2:N,y2:V}),v.push({x1:j,y1:U,x2:L,y2:U})}return k.createElement(Jt,V_({className:"recharts-errorBar",key:"bar-".concat(v.map(function(R){return"".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))},u),v.map(function(R){return k.createElement("line",V_({},R,{key:"line-".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))}))});return k.createElement(Jt,{className:"recharts-errorBars"},d)}Zg.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};Zg.displayName="ErrorBar";function gy(t){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gy(t)}function xU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xU(Object(r),!0).forEach(function(n){V5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V5e(t,e,r){return e=W5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W5e(t){var e=z5e(t,"string");return gy(e)==="symbol"?e:String(e)}function z5e(t,e){if(gy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(gy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KX=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=To(r,ry);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(n||[]).reduce(function(l,c){var u=c.item,d=c.props,h=d.sectors||d.data||[];return l.concat(h.map(function(p){return{type:s.props.iconType||u.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):a=(n||[]).map(function(l){var c=l.item,u=c.props,d=u.dataKey,h=u.name,p=u.legendType,m=u.hide;return{inactive:m,dataKey:d,type:s.props.iconType||p||"square",color:o$(c),value:h||d,payload:c.props}}),rC(rC(rC({},s.props),ry.getWithHeight(s,i)),{},{payload:a,item:s})};function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){gf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gf(t,e,r){return e=G5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G5e(t){var e=q5e(t,"string");return vy(e)==="symbol"?e:String(e)}function q5e(t,e){if(vy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wU(t){return Y5e(t)||Q5e(t)||K5e(t)||H5e()}function H5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K5e(t,e){if(t){if(typeof t=="string")return FI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FI(t,e)}}function Q5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Y5e(t){if(Array.isArray(t))return FI(t)}function FI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ai(t,e,r){return Xe(t)||Xe(e)?r:hr(e)?Ri(t,e,r):Me(e)?e(t):r}function Xp(t,e,r,n){var i=r5e(t,function(a){return ai(a,e)});if(r==="number"){var o=i.filter(function(a){return ne(a)||parseFloat(a)});return o.length?[bS(o),vS(o)]:[1/0,-1/0]}var s=n?i.filter(function(a){return!Xe(a)}):i;return s.map(function(a){return hr(a)||a instanceof Date?a:""})}var X5e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<a;c++){var u=c>0?i[c-1].coordinate:i[a-1].coordinate,d=i[c].coordinate,h=c>=a-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(oo(d-u)!==oo(h-d)){var m=[];if(oo(h-d)===oo(l[1]-l[0])){p=h;var y=d+l[1]-l[0];m[0]=Math.min(y,(y+u)/2),m[1]=Math.max(y,(y+u)/2)}else{p=u;var g=h+l[1]-l[0];m[0]=Math.min(d,(g+d)/2),m[1]=Math.max(d,(g+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){s=i[c].index;break}}else{var v=Math.min(u,h),x=Math.max(u,h);if(e>(v+d)/2&&e<=(x+d)/2){s=i[c].index;break}}}else for(var S=0;S<a;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},o$=function(e){var r=e,n=r.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(n){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},J5e=function(e){var r=e.barSize,n=e.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var o={},s=Object.keys(i),a=0,l=s.length;a<l;a++)for(var c=i[s[a]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var p=c[u[d]],m=p.items,y=p.cateAxisId,g=m.filter(function(x){return bs(x.type).indexOf("Bar")>=0});if(g&&g.length){var b=g[0].props.barSize,v=g[0].props[y];o[v]||(o[v]=[]),o[v].push({item:g[0],stackList:g.slice(1),barSize:Xe(b)?r:b})}}return o},Z5e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var c=gd(r,i,0,!0),u,d=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/l,m=s.reduce(function(S,_){return S+_.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&p>0&&(h=!0,p*=.9,m=l*p);var y=(i-m)/2>>0,g={offset:y-c,size:0};u=s.reduce(function(S,_){var w={item:_.item,position:{offset:g.offset+g.size+c,size:h?p:_.barSize}},A=[].concat(wU(S),[w]);return g=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:g})}),A},d)}else{var b=gd(n,i,0,!0);i-2*b-(l-1)*c<=0&&(c=0);var v=(i-2*b-(l-1)*c)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;u=s.reduce(function(S,_,w){var A=[].concat(wU(S),[{item:_.item,position:{offset:b+(v+c)*w+(v-x)/2,size:x}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:A[A.length-1].position})}),A},d)}return u},eWe=function(e,r,n,i){var o=n.children,s=n.width,a=n.margin,l=s-(a.left||0)-(a.right||0),c=KX({children:o,legendWidth:l});if(c){var u=i||{},d=u.width,h=u.height,p=c.align,m=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&ne(e[p]))return Si(Si({},e),{},gf({},p,e[p]+(d||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&ne(e[m]))return Si(Si({},e),{},gf({},m,e[m]+(h||0)))}return e},tWe=function(e,r,n){return Xe(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},QX=function(e,r,n,i,o){var s=r.props.children,a=ji(s,Zg).filter(function(c){return tWe(i,o,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=ai(u,n,0),h=Array.isArray(d)?[bS(d),vS(d)]:[d,d],p=l.reduce(function(m,y){var g=ai(u,y,0),b=h[0]-Math.abs(Array.isArray(g)?g[0]:g),v=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},rWe=function(e,r,n,i,o){var s=r.map(function(a){return QX(e,a,n,o,i)}).filter(function(a){return!Xe(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},YX=function(e,r,n,i,o){var s=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&QX(e,l,c,i)||Xp(e,c,n,o)});if(n==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},XX=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},SU=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(s=!0),l.coordinate});return o||a.push(r),s||a.push(n),a},Hs=function(e,r,n){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?oo(a[0]-a[1])*2*c:c,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=o?o.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!qg(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:o?o[d]:d,index:h,offset:c}})},nC=new WeakMap,f0=function(e,r){if(typeof r!="function")return e;nC.has(e)||nC.set(e,new WeakMap);var n=nC.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},nWe=function(e,r,n){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:uy(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:M_(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Yp(),realScaleType:"point"}:o==="category"?{scale:uy(),realScaleType:"band"}:{scale:M_(),realScaleType:"linear"};if(Gg(i)){var l="scale".concat(oS(i));return{scale:(mU[l]||Yp)(),realScaleType:mU[l]?l:"point"}}return Me(i)?{scale:i}:{scale:Yp(),realScaleType:"point"}},EU=1e-4,iWe=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),o=Math.min(i[0],i[1])-EU,s=Math.max(i[0],i[1])+EU,a=e(r[0]),l=e(r[n-1]);(a<o||a>s||l<o||l>s)&&e.domain([r[0],r[n-1]])}},oWe=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},sWe=function(e,r){if(!r||r.length!==2||!ne(r[0])||!ne(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[e[0],e[1]];return(!ne(e[0])||e[0]<n)&&(o[0]=n),(!ne(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},aWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0,a=0;a<r;++a){var l=qg(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=o,e[a][n][1]=o+l,o=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+l,s=e[a][n][1])}},lWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0;s<r;++s){var a=qg(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},cWe={sign:aWe,expand:aRe,none:vd,silhouette:lRe,wiggle:cRe,positive:lWe},uWe=function(e,r,n){var i=r.map(function(a){return a.props.dataKey}),o=cWe[n],s=sRe().keys(i).value(function(a,l){return+ai(a,l,0)}).order(nI).offset(o);return s(e)},fWe=function(e,r,n,i,o,s){if(!e)return null;var a=s?r.reverse():r,l={},c=a.reduce(function(d,h){var p=h.props,m=p.stackId,y=p.hide;if(y)return d;var g=h.props[n],b=d[g]||{hasStack:!1,stackGroups:{}};if(hr(m)){var v=b.stackGroups[m]||{numericAxisId:n,cateAxisId:i,items:[]};v.items.push(h),b.hasStack=!0,b.stackGroups[m]=v}else b.stackGroups[Hg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return Si(Si({},d),{},gf({},g,b))},l),u={};return Object.keys(c).reduce(function(d,h){var p=c[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,g){var b=p.stackGroups[g];return Si(Si({},y),{},gf({},g,{numericAxisId:n,cateAxisId:i,items:b.items,stackedData:uWe(e,b.items,o)}))},m)}return Si(Si({},d),{},gf({},h,p))},u)},dWe=function(e,r){var n=r.realScaleType,i=r.type,o=r.tickCount,s=r.originalDomain,a=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=O5e(c,o,a);return e.domain([bS(u),vS(u)]),{niceTicks:u}}if(o&&i==="number"){var d=e.domain(),h=R5e(d,o,a);return{niceTicks:h}}return null},AU=function(e){var r=e.axis,n=e.ticks,i=e.bandSize,o=e.entry,s=e.index,a=e.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Xe(o[r.dataKey])){var l=u_(n,"value",o[r.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=ai(o,Xe(a)?r.dataKey:a);return Xe(c)?null:r.scale(c)},CU=function(e){var r=e.axis,n=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(r.type==="category")return n[a]?n[a].coordinate+i:null;var l=ai(s,r.dataKey,r.domain[a]);return Xe(l)?null:r.scale(l)-o/2+i},hWe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},pWe=function(e,r){var n=e.props.stackId;if(hr(n)){var i=r[n];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},mWe=function(e){return e.reduce(function(r,n){return[bS(n.concat([r[0]]).filter(ne)),vS(n.concat([r[1]]).filter(ne))]},[1/0,-1/0])},JX=function(e,r,n){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(c,u){var d=mWe(u.slice(r,n+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},PU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LI=function(e,r,n){if(Me(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(ne(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(PU.test(e[0])){var o=+PU.exec(e[0])[1];i[0]=r[0]-o}else Me(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(ne(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(TU.test(e[1])){var s=+TU.exec(e[1])[1];i[1]=r[1]+s}else Me(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},W_=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var o=Oj(r,function(d){return d.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],u=o[a-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},IU=function(e,r,n){return!e||!e.length||xS(e,Ri(n,"type.defaultProps.domain"))?r:e},ZX=function(e,r){var n=e.props,i=n.dataKey,o=n.name,s=n.unit,a=n.formatter,l=n.tooltipType,c=n.chartType;return Si(Si({},qe(e)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:o$(e),value:ai(r,i),type:l,payload:r,chartType:c})};function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function NU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(r),!0).forEach(function(n){yWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yWe(t,e,r){return e=gWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gWe(t){var e=vWe(t,"string");return by(e)==="symbol"?e:String(e)}function vWe(t,e){if(by(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(by(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z_=Math.PI/180,bWe=function(e){return e*180/Math.PI},qr=function(e,r,n,i){return{x:e+Math.cos(-z_*i)*n,y:r+Math.sin(-z_*i)*n}},xWe=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-s,2))},_We=function(e,r){var n=e.x,i=e.y,o=r.cx,s=r.cy,a=xWe({x:n,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(n-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:bWe(c),angleInRadian:c}},wWe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),s=Math.min(i,o);return{startAngle:r-s*360,endAngle:n-s*360}},SWe=function(e,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},OU=function(e,r){var n=e.x,i=e.y,o=_We({x:n,y:i},r),s=o.radius,a=o.angle,l=r.innerRadius,c=r.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=wWe(r),d=u.startAngle,h=u.endAngle,p=a,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?kU(kU({},r),{},{radius:s,angle:SWe(p,r)}):null};function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}var EWe=["offset"];function AWe(t){return IWe(t)||TWe(t)||PWe(t)||CWe()}function CWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PWe(t,e){if(t){if(typeof t=="string")return BI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(t,e)}}function TWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IWe(t){if(Array.isArray(t))return BI(t)}function BI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NWe(t,e){if(t==null)return{};var r=kWe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kWe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function RU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(r),!0).forEach(function(n){OWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OWe(t,e,r){return e=RWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RWe(t){var e=jWe(t,"string");return xy(e)==="symbol"?e:String(e)}function jWe(t,e){if(xy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(xy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_y.apply(this,arguments)}var $We=function(e){var r=e.value,n=e.formatter,i=Xe(e.children)?r:e.children;return Me(n)?n(i):i},DWe=function(e,r){var n=oo(r-e),i=Math.min(Math.abs(r-e),360);return n*i},MWe=function(e,r,n){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,y=l.clockWise,g=(d+h)/2,b=DWe(p,m),v=b>=0?1:-1,x,S;i==="insideStart"?(x=p+v*s,S=y):i==="insideEnd"?(x=m-v*s,S=!y):i==="end"&&(x=m+v*s,S=y),S=b<=0?S:!S;var _=qr(c,u,g,x),w=qr(c,u,g,x+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),C=Xe(e.id)?Hg("recharts-radial-line-"):e.id;return k.createElement("text",_y({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",a)}),k.createElement("defs",null,k.createElement("path",{id:C,d:A})),k.createElement("textPath",{xlinkHref:"#".concat(C)},r))},FWe=function(e){var r=e.viewBox,n=e.offset,i=e.position,o=r,s=o.cx,a=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,d=o.endAngle,h=(u+d)/2;if(i==="outside"){var p=qr(s,a,c+n,h),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,b=qr(s,a,g,h),v=b.x,x=b.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},LWe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,o=e.position,s=r,a=s.x,l=s.y,c=s.width,u=s.height,d=u>=0?1:-1,h=d*i,p=d>0?"end":"start",m=d>0?"start":"end",y=c>=0?1:-1,g=y*i,b=y>0?"end":"start",v=y>0?"start":"end";if(o==="top"){var x={x:a+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:p};return sr(sr({},x),n?{height:Math.max(l-n.y,0),width:c}:{})}if(o==="bottom"){var S={x:a+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return sr(sr({},S),n?{height:Math.max(n.y+n.height-(l+u),0),width:c}:{})}if(o==="left"){var _={x:a-g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return sr(sr({},_),n?{width:Math.max(_.x-n.x,0),height:u}:{})}if(o==="right"){var w={x:a+c+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return sr(sr({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:u}:{})}var A=n?{width:c,height:u}:{};return o==="insideLeft"?sr({x:a+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},A):o==="insideRight"?sr({x:a+c-g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},A):o==="insideTop"?sr({x:a+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},A):o==="insideBottom"?sr({x:a+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},A):o==="insideTopLeft"?sr({x:a+g,y:l+h,textAnchor:v,verticalAnchor:m},A):o==="insideTopRight"?sr({x:a+c-g,y:l+h,textAnchor:b,verticalAnchor:m},A):o==="insideBottomLeft"?sr({x:a+g,y:l+u-h,textAnchor:v,verticalAnchor:p},A):o==="insideBottomRight"?sr({x:a+c-g,y:l+u-h,textAnchor:b,verticalAnchor:p},A):nh(o)&&(ne(o.x)||Vl(o.x))&&(ne(o.y)||Vl(o.y))?sr({x:a+gd(o.x,c),y:l+gd(o.y,u),textAnchor:"end",verticalAnchor:"end"},A):sr({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},BWe=function(e){return"cx"in e&&ne(e.cx)};function un(t){var e=t.offset,r=e===void 0?5:e,n=NWe(t,EWe),i=sr({offset:r},n),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!o||Xe(a)&&Xe(l)&&!E.isValidElement(c)&&!Me(c))return null;if(E.isValidElement(c))return E.cloneElement(c,i);var p;if(Me(c)){if(p=E.createElement(c,i),E.isValidElement(p))return p}else p=$We(i);var m=BWe(o),y=qe(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return MWe(i,p,y);var g=m?FWe(i):LWe(i);return k.createElement(N_,_y({className:ct("recharts-label",d)},y,g,{breakAll:h}),p)}un.displayName="Label";var eJ=function(e){var r=e.cx,n=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,p=e.top,m=e.left,y=e.width,g=e.height,b=e.clockWise,v=e.labelViewBox;if(v)return v;if(ne(y)&&ne(g)){if(ne(d)&&ne(h))return{x:d,y:h,width:y,height:g};if(ne(p)&&ne(m))return{x:p,y:m,width:y,height:g}}return ne(d)&&ne(h)?{x:d,y:h,width:0,height:0}:ne(r)&&ne(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:b}:e.viewBox?e.viewBox:{}},UWe=function(e,r){return e?e===!0?k.createElement(un,{key:"label-implicit",viewBox:r}):hr(e)?k.createElement(un,{key:"label-implicit",viewBox:r,value:e}):E.isValidElement(e)?e.type===un?E.cloneElement(e,{key:"label-implicit",viewBox:r}):k.createElement(un,{key:"label-implicit",content:e,viewBox:r}):Me(e)?k.createElement(un,{key:"label-implicit",content:e,viewBox:r}):nh(e)?k.createElement(un,_y({viewBox:r},e,{key:"label-implicit"})):null:null},VWe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=eJ(e),s=ji(i,un).map(function(l,c){return E.cloneElement(l,{viewBox:r||o,key:"label-".concat(c)})});if(!n)return s;var a=UWe(e.label,r||o);return[a].concat(AWe(s))};un.parseViewBox=eJ;un.renderCallByParent=VWe;function WWe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var zWe=WWe;const GWe=ot(zWe);function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}var qWe=["valueAccessor"],HWe=["data","dataKey","clockWise","id","textBreakAll"];function KWe(t){return JWe(t)||XWe(t)||YWe(t)||QWe()}function QWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YWe(t,e){if(t){if(typeof t=="string")return UI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UI(t,e)}}function XWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JWe(t){if(Array.isArray(t))return UI(t)}function UI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G_.apply(this,arguments)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $U(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){ZWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZWe(t,e,r){return e=e8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e8e(t){var e=t8e(t,"string");return wy(e)==="symbol"?e:String(e)}function t8e(t,e){if(wy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DU(t,e){if(t==null)return{};var r=r8e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r8e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var n8e=function(e){return Array.isArray(e.value)?GWe(e.value):e.value};function La(t){var e=t.valueAccessor,r=e===void 0?n8e:e,n=DU(t,qWe),i=n.data,o=n.dataKey,s=n.clockWise,a=n.id,l=n.textBreakAll,c=DU(n,HWe);return!i||!i.length?null:k.createElement(Jt,{className:"recharts-label-list"},i.map(function(u,d){var h=Xe(o)?r(u,d):ai(u&&u.payload,o),p=Xe(a)?{}:{id:"".concat(a,"-").concat(d)};return k.createElement(un,G_({},qe(u,!0),c,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:un.parseViewBox(Xe(s)?u:$U($U({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}La.displayName="LabelList";function i8e(t,e){return t?t===!0?k.createElement(La,{key:"labelList-implicit",data:e}):k.isValidElement(t)||Me(t)?k.createElement(La,{key:"labelList-implicit",data:e,content:t}):nh(t)?k.createElement(La,G_({data:e},t,{key:"labelList-implicit"})):null:null}function o8e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=ji(n,La).map(function(s,a){return E.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!r)return i;var o=i8e(t.label,e);return[o].concat(KWe(i))}La.renderCallByParent=o8e;function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VI.apply(this,arguments)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){s8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s8e(t,e,r){return e=a8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a8e(t){var e=l8e(t,"string");return Sy(e)==="symbol"?e:String(e)}function l8e(t,e){if(Sy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c8e=function(e,r){var n=oo(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},d0=function(e){var r=e.cx,n=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+i,d=Math.asin(l/u)/z_,h=c?o:o+s*d,p=qr(r,n,u,h),m=qr(r,n,i,h),y=c?o-s*d:o,g=qr(r,n,u*Math.cos(d*z_),y);return{center:p,circleTangency:m,lineTangency:g,theta:d}},tJ=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=c8e(s,a),c=s+l,u=qr(r,n,o,s),d=qr(r,n,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=qr(r,n,i,s),m=qr(r,n,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},u8e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=oo(u-c),h=d0({cx:r,cy:n,radius:o,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,y=h.theta,g=d0({cx:r,cy:n,radius:o,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),b=g.circleTangency,v=g.lineTangency,x=g.theta,S=l?Math.abs(c-u):Math.abs(c-u)-y-x;if(S<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):tJ({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var w=d0({cx:r,cy:n,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=w.circleTangency,C=w.lineTangency,T=w.theta,P=d0({cx:r,cy:n,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),I=P.circleTangency,O=P.lineTangency,N=P.theta,j=l?Math.abs(c-u):Math.abs(c-u)-T-N;if(j<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},f8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rJ=function(e){var r=FU(FU({},f8e),e),n=r.cx,i=r.cy,o=r.innerRadius,s=r.outerRadius,a=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,u=r.startAngle,d=r.endAngle,h=r.className;if(s<o||u===d)return null;var p=ct("recharts-sector",h),m=s-o,y=gd(a,m,0,!0),g;return y>0&&Math.abs(u-d)<360?g=u8e({cx:n,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(y,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):g=tJ({cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:d}),k.createElement("path",VI({},qe(r,!0),{className:p,d:g,role:"img"}))};function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WI.apply(this,arguments)}function LU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function BU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(r),!0).forEach(function(n){d8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d8e(t,e,r){return e=h8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h8e(t){var e=p8e(t,"string");return Ey(e)==="symbol"?e:String(e)}function p8e(t,e){if(Ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UU={curveBasisClosed:QOe,curveBasisOpen:YOe,curveBasis:KOe,curveBumpX:jOe,curveBumpY:$Oe,curveLinearClosed:XOe,curveLinear:aS,curveMonotoneX:JOe,curveMonotoneY:ZOe,curveNatural:eRe,curveStep:tRe,curveStepAfter:nRe,curveStepBefore:rRe},h0=function(e){return e.x===+e.x&&e.y===+e.y},qh=function(e){return e.x},Hh=function(e){return e.y},m8e=function(e,r){if(Me(e))return e;var n="curve".concat(oS(e));return(n==="curveMonotone"||n==="curveBump")&&r?UU["".concat(n).concat(r==="vertical"?"Y":"X")]:UU[n]||aS},y8e=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=m8e(n,a),d=c?o.filter(function(y){return h0(y)}):o,h;if(Array.isArray(s)){var p=c?s.filter(function(y){return h0(y)}):s,m=d.map(function(y,g){return BU(BU({},y),{},{base:p[g]})});return a==="vertical"?h=r0().y(Hh).x1(qh).x0(function(y){return y.base.x}):h=r0().x(qh).y1(Hh).y0(function(y){return y.base.y}),h.defined(h0).curve(u),h(m)}return a==="vertical"&&ne(s)?h=r0().y(Hh).x1(qh).x0(s):ne(s)?h=r0().x(qh).y1(Hh).y0(s):h=JQ().x(qh).y(Hh),h.defined(h0).curve(u),h(d)},zI=function(e){var r=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?y8e(e):i;return k.createElement("path",WI({},qe(e),f_(e),{className:ct("recharts-curve",r),d:s,ref:o}))};function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q_.apply(this,arguments)}function g8e(t,e){return _8e(t)||x8e(t,e)||b8e(t,e)||v8e()}function v8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b8e(t,e){if(t){if(typeof t=="string")return VU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VU(t,e)}}function VU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x8e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function _8e(t){if(Array.isArray(t))return t}function WU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(r),!0).forEach(function(n){w8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w8e(t,e,r){return e=S8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S8e(t){var e=E8e(t,"string");return Ay(e)==="symbol"?e:String(e)}function E8e(t,e){if(Ay(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ay(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GU=function(e,r,n,i,o){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,u;if(s>0&&o instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=o[h]>s?s:o[h];u="M".concat(e,",").concat(r+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(r)),u+="L ".concat(e+n-l*d[1],",").concat(r),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(r+a*d[1])),u+="L ".concat(e+n,",").concat(r+i-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+n-l*d[2],",").concat(r+i)),u+="L ".concat(e+l*d[3],",").concat(r+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(r+i-a*d[3])),u+="Z"}else if(s>0&&o===+o&&o>0){var m=Math.min(s,o);u="M ".concat(e,",").concat(r+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(r,`
            L `).concat(e+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n,",").concat(r+a*m,`
            L `).concat(e+n,",").concat(r+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n-l*m,",").concat(r+i,`
            L `).concat(e+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(r+i-a*m," Z")}else u="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return u},A8e=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,o=r.x,s=r.y,a=r.width,l=r.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(o,o+a),u=Math.max(o,o+a),d=Math.min(s,s+l),h=Math.max(s,s+l);return n>=c&&n<=u&&i>=d&&i<=h}return!1},C8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},s$=function(e){var r=zU(zU({},C8e),e),n=E.useRef(),i=E.useState(-1),o=g8e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&a(S)}catch{}},[]);var l=r.x,c=r.y,u=r.width,d=r.height,h=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,v=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var x=ct("recharts-rectangle",p);return v?k.createElement(Is,{canBegin:s>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:y,animationEasing:m,isActive:v},function(S){var _=S.width,w=S.height,A=S.x,C=S.y;return k.createElement(Is,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:b,easing:m},k.createElement("path",q_({},qe(r,!0),{className:x,d:GU(A,C,_,w,h),ref:n})))}):k.createElement("path",q_({},qe(r,!0),{className:x,d:GU(l,c,u,d,h)}))};function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GI.apply(this,arguments)}var a$=function(e){var r=e.cx,n=e.cy,i=e.r,o=e.className,s=ct("recharts-dot",o);return r===+r&&n===+n&&i===+i?k.createElement("circle",GI({},qe(e),f_(e),{className:s,cx:r,cy:n,r:i})):null};function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}var P8e=["x","y","top","left","width","height","className"];function qI(){return qI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qI.apply(this,arguments)}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function T8e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){I8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I8e(t,e,r){return e=N8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N8e(t){var e=k8e(t,"string");return Cy(e)==="symbol"?e:String(e)}function k8e(t,e){if(Cy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O8e(t,e){if(t==null)return{};var r=R8e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R8e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var j8e=function(e,r,n,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},$8e=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,p=h===void 0?0:h,m=e.className,y=O8e(e,P8e),g=T8e({x:n,y:o,top:a,left:c,width:d,height:p},y);return!ne(n)||!ne(o)||!ne(d)||!ne(p)||!ne(a)||!ne(c)?null:k.createElement("path",qI({},qe(g,!0),{className:ct("recharts-cross",m),d:j8e(n,o,d,p,a,c)}))},D8e=_Y,M8e=D8e(Object.getPrototypeOf,Object),F8e=M8e,L8e=Ds,B8e=F8e,U8e=Ms,V8e="[object Object]",W8e=Function.prototype,z8e=Object.prototype,nJ=W8e.toString,G8e=z8e.hasOwnProperty,q8e=nJ.call(Object);function H8e(t){if(!U8e(t)||L8e(t)!=V8e)return!1;var e=B8e(t);if(e===null)return!0;var r=G8e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&nJ.call(r)==q8e}var K8e=H8e;const Q8e=ot(K8e);var Y8e=Ds,X8e=Ms,J8e="[object Boolean]";function Z8e(t){return t===!0||t===!1||X8e(t)&&Y8e(t)==J8e}var e9e=Z8e;const t9e=ot(e9e);function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H_.apply(this,arguments)}function r9e(t,e){return s9e(t)||o9e(t,e)||i9e(t,e)||n9e()}function n9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i9e(t,e){if(t){if(typeof t=="string")return HU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HU(t,e)}}function HU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o9e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function s9e(t){if(Array.isArray(t))return t}function KU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(r),!0).forEach(function(n){a9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a9e(t,e,r){return e=l9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l9e(t){var e=c9e(t,"string");return Py(e)==="symbol"?e:String(e)}function c9e(t,e){if(Py(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YU=function(e,r,n,i,o){var s=n-i,a;return a="M ".concat(e,",").concat(r),a+="L ".concat(e+n,",").concat(r),a+="L ".concat(e+n-s/2,",").concat(r+o),a+="L ".concat(e+n-s/2-i,",").concat(r+o),a+="L ".concat(e,",").concat(r," Z"),a},u9e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},f9e=function(e){var r=QU(QU({},u9e),e),n=E.useRef(),i=E.useState(-1),o=r9e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&a(x)}catch{}},[]);var l=r.x,c=r.y,u=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var v=ct("recharts-trapezoid",p);return b?k.createElement(Is,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:y,animationEasing:m,isActive:b},function(x){var S=x.upperWidth,_=x.lowerWidth,w=x.height,A=x.x,C=x.y;return k.createElement(Is,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:m},k.createElement("path",H_({},qe(r,!0),{className:v,d:YU(A,C,S,_,w),ref:n})))}):k.createElement("g",null,k.createElement("path",H_({},qe(r,!0),{className:v,d:YU(l,c,u,d,h)})))},d9e=["option","shapeType","propTransformer","activeClassName","isActive"];function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function h9e(t,e){if(t==null)return{};var r=p9e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p9e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function XU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function K_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(r),!0).forEach(function(n){m9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m9e(t,e,r){return e=y9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y9e(t){var e=g9e(t,"string");return Ty(e)==="symbol"?e:String(e)}function g9e(t,e){if(Ty(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ty(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v9e(t,e){return K_(K_({},e),t)}function b9e(t,e){return t==="symbols"}function JU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return k.createElement(s$,r);case"trapezoid":return k.createElement(f9e,r);case"sector":return k.createElement(rJ,r);case"symbols":if(b9e(e))return k.createElement(Ej,r);break;default:return null}}function x9e(t){return E.isValidElement(t)?t.props:t}function _9e(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?v9e:n,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=h9e(t,d9e),c;if(E.isValidElement(e))c=E.cloneElement(e,K_(K_({},l),x9e(e)));else if(Me(e))c=e(l);else if(Q8e(e)&&!t9e(e)){var u=i(e,l);c=k.createElement(JU,{shapeType:r,elementProps:u})}else{var d=l;c=k.createElement(JU,{shapeType:r,elementProps:d})}return a?k.createElement(Jt,{className:s},c):c}function SS(t,e){return e!=null&&"trapezoids"in t.props}function ES(t,e){return e!=null&&"sectors"in t.props}function Iy(t,e){return e!=null&&"points"in t.props}function w9e(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,o=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&o}function S9e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function E9e(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function A9e(t,e){var r;return SS(t,e)?r=w9e:ES(t,e)?r=S9e:Iy(t,e)&&(r=E9e),r}function C9e(t,e){var r;return SS(t,e)?r="trapezoids":ES(t,e)?r="sectors":Iy(t,e)&&(r="points"),r}function P9e(t,e){if(SS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ES(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Iy(t,e)?e.payload:{}}function T9e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=C9e(r,e),o=P9e(r,e),s=n.filter(function(l,c){var u=xS(o,l),d=r.props[i].filter(function(m){var y=A9e(r,e);return y(m,e)}),h=r.props[i].indexOf(d[d.length-1]),p=c===h;return u&&p}),a=n.indexOf(s[s.length-1]);return a}var I9e=Math.ceil,N9e=Math.max;function k9e(t,e,r,n){for(var i=-1,o=N9e(I9e((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var O9e=k9e,R9e=KY,ZU=1/0,j9e=17976931348623157e292;function $9e(t){if(!t)return t===0?t:0;if(t=R9e(t),t===ZU||t===-ZU){var e=t<0?-1:1;return e*j9e}return t===t?t:0}var iJ=$9e,D9e=O9e,M9e=fS,iC=iJ;function F9e(t){return function(e,r,n){return n&&typeof n!="number"&&M9e(e,r,n)&&(r=n=void 0),e=iC(e),r===void 0?(r=e,e=0):r=iC(r),n=n===void 0?e<r?1:-1:iC(n),D9e(e,r,n,t)}}var L9e=F9e,B9e=L9e,U9e=B9e(),V9e=U9e;const Q_=ot(V9e);function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function eV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eV(Object(r),!0).forEach(function(n){oJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oJ(t,e,r){return e=W9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W9e(t){var e=z9e(t,"string");return Ny(e)==="symbol"?e:String(e)}function z9e(t,e){if(Ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G9e=["Webkit","Moz","O","ms"],q9e=function(e,r){if(!e)return null;var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=G9e.reduce(function(o,s){return tV(tV({},o),{},oJ({},s+n,r))},{});return i[e]=r,i};function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Td(t)}function Y_(){return Y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Y_.apply(this,arguments)}function rV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(r),!0).forEach(function(n){qn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function H9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sJ(n.key),n)}}function K9e(t,e,r){return e&&nV(t.prototype,e),r&&nV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HI(t,e)}function HI(t,e){return HI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},HI(t,e)}function Y9e(t){var e=J9e();return function(){var n=X_(t),i;if(e){var o=X_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return X9e(this,i)}}function X9e(t,e){if(e&&(Td(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vo(t)}function vo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X_(t){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X_(t)}function qn(t,e,r){return e=sJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sJ(t){var e=Z9e(t,"string");return Td(e)==="symbol"?e:String(e)}function Z9e(t,e){if(Td(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Td(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eze=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=Yp().domain(Q_(0,l)).range([o,o+s-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:u}},iV=function(e){return e.changedTouches&&!!e.changedTouches.length},Id=function(t){Q9e(r,t);var e=Y9e(r);function r(n){var i;return H9e(this,r),i=e.call(this,n),qn(vo(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),qn(vo(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),qn(vo(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,s=o.endIndex,a=o.onDragEnd,l=o.startIndex;a==null||a({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),qn(vo(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),qn(vo(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),qn(vo(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),qn(vo(i),"handleSlideDragStart",function(o){var s=iV(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(vo(i),"startX"),endX:i.handleTravellerDragStart.bind(vo(i),"endX")},i.state={},i}return K9e(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,s=i.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(o,s),p=Math.max(o,s),m=r.getIndexInRange(a,h),y=r.getIndexInRange(a,p);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(i){var o=this.props,s=o.data,a=o.tickFormatter,l=o.dataKey,c=ai(s[i],l,i);return Me(a)?a(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,s=o.slideMoveStartX,a=o.startX,l=o.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,p=c.startIndex,m=c.endIndex,y=c.onChange,g=i.pageX-s;g>0?g=Math.min(g,u+d-h-l,u+d-h-a):g<0&&(g=Math.max(g,u-a,u-l));var b=this.getIndex({startX:a+g,endX:l+g});(b.startIndex!==p||b.endIndex!==m)&&y&&y(b),this.setState({startX:a+g,endX:l+g,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var s=iV(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,s=this.state,a=s.brushMoveStartX,l=s.movingTravellerId,c=s.endX,u=s.startX,d=this.state[l],h=this.props,p=h.x,m=h.width,y=h.travellerWidth,g=h.onChange,b=h.gap,v=h.data,x={startX:this.state.startX,endX:this.state.endX},S=i.pageX-a;S>0?S=Math.min(S,p+m-y-d):S<0&&(S=Math.max(S,p-d)),x[l]=d+S;var _=this.getIndex(x),w=_.startIndex,A=_.endIndex,C=function(){var P=v.length-1;return l==="startX"&&(c>u?w%b===0:A%b===0)||c<u&&A===P||l==="endX"&&(c>u?A%b===0:w%b===0)||c>u&&A===P};this.setState((o={},qn(o,l,d+S),qn(o,"brushMoveStartX",i.pageX),o),function(){g&&C()&&g(_)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,d=this.state[o],h=l.indexOf(d);if(h!==-1){var p=h+i;if(!(p===-1||p>=l.length)){var m=l[p];o==="startX"&&m>=u||o==="endX"&&m<=c||this.setState(qn({},o,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.fill,u=i.stroke;return k.createElement("rect",{stroke:u,fill:c,x:o,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.data,u=i.children,d=i.padding,h=E.Children.only(u);return h?k.cloneElement(h,{x:o,y:s,width:a,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,o){var s=this,a=this.props,l=a.y,c=a.travellerWidth,u=a.height,d=a.traveller,h=a.ariaLabel,p=a.data,m=a.startIndex,y=a.endIndex,g=Math.max(i,this.props.x),b=oC(oC({},qe(this.props)),{},{x:g,y:l,width:c,height:u}),v=h||"Min value: ".concat(p[m].name,", Max value: ").concat(p[y].name);return k.createElement(Jt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,o))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(d,b))}},{key:"renderSlide",value:function(i,o){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(i,o)+u,h=Math.max(Math.abs(o-i)-u,0);return k.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:h,height:l})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,s=i.endIndex,a=i.y,l=i.height,c=i.travellerWidth,u=i.stroke,d=this.state,h=d.startX,p=d.endX,m=5,y={pointerEvents:"none",fill:u};return k.createElement(Jt,{className:"recharts-brush-texts"},k.createElement(N_,Y_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-m,y:a+l/2},y),this.getTextOfTick(o)),k.createElement(N_,Y_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+m,y:a+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,o=i.data,s=i.className,a=i.children,l=i.x,c=i.y,u=i.width,d=i.height,h=i.alwaysShowText,p=this.state,m=p.startX,y=p.endX,g=p.isTextActive,b=p.isSlideMoving,v=p.isTravellerMoving,x=p.isTravellerFocused;if(!o||!o.length||!ne(l)||!ne(c)||!ne(u)||!ne(d)||u<=0||d<=0)return null;var S=ct("recharts-brush",s),_=k.Children.count(a)===1,w=q9e("userSelect","none");return k.createElement(Jt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||b||v||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,s=i.y,a=i.width,l=i.height,c=i.stroke,u=Math.floor(s+l/2)-1;return k.createElement(k.Fragment,null,k.createElement("rect",{x:o,y:s,width:a,height:l,fill:c,stroke:"none"}),k.createElement("line",{x1:o+1,y1:u,x2:o+a-1,y2:u,fill:"none",stroke:"#fff"}),k.createElement("line",{x1:o+1,y1:u+2,x2:o+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var s;return k.isValidElement(i)?s=k.cloneElement(i,o):Me(i)?s=i(o):s=r.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(i,o){var s=i.data,a=i.width,l=i.x,c=i.travellerWidth,u=i.updateId,d=i.startIndex,h=i.endIndex;if(s!==o.prevData||u!==o.prevUpdateId)return oC({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?eze({data:s,width:a,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(o.scale&&(a!==o.prevWidth||l!==o.prevX||c!==o.prevTravellerWidth)){o.scale.range([l,l+a-c]);var p=o.scale.domain().map(function(m){return o.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(i,o){for(var s=i.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);i[c]>o?l=c:a=c}return o>=i[l]?l:a}}]),r}(E.PureComponent);qn(Id,"displayName","Brush");qn(Id,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var tze=kj;function rze(t,e){var r;return tze(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var nze=rze,ize=hY,oze=ll,sze=nze,aze=Vn,lze=fS;function cze(t,e,r){var n=aze(t)?ize:sze;return r&&lze(t,e,r)&&(e=void 0),n(t,oze(e))}var uze=cze;const fze=ot(uze);var qo=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},oV=$Y;function dze(t,e,r){e=="__proto__"&&oV?oV(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var hze=dze,pze=hze,mze=RY,yze=ll;function gze(t,e){var r={};return e=yze(e),mze(t,function(n,i,o){pze(r,i,e(n,i,o))}),r}var vze=gze;const bze=ot(vze);function xze(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var _ze=xze,wze=kj;function Sze(t,e){var r=!0;return wze(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var Eze=Sze,Aze=_ze,Cze=Eze,Pze=ll,Tze=Vn,Ize=fS;function Nze(t,e,r){var n=Tze(t)?Aze:Cze;return r&&Ize(t,e,r)&&(e=void 0),n(t,Pze(e))}var kze=Nze;const aJ=ot(kze);function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}var Oze=["x","y"];function KI(){return KI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KI.apply(this,arguments)}function sV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(r),!0).forEach(function(n){Rze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rze(t,e,r){return e=jze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jze(t){var e=$ze(t,"string");return ky(e)==="symbol"?e:String(e)}function $ze(t,e){if(ky(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ky(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dze(t,e){if(t==null)return{};var r=Mze(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mze(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Fze(t,e){var r=t.x,n=t.y,i=Dze(t,Oze),o="".concat(r),s=parseInt(o,10),a="".concat(n),l=parseInt(a,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Kh(Kh(Kh(Kh(Kh({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function aV(t){return k.createElement(_9e,KI({shapeType:"rectangle",propTransformer:Fze,activeClassName:"recharts-active-bar"},t))}var Lze=["value","background"];function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function Bze(t,e){if(t==null)return{};var r=Uze(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Uze(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J_.apply(this,arguments)}function lV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(r),!0).forEach(function(n){wa(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lJ(n.key),n)}}function Wze(t,e,r){return e&&cV(t.prototype,e),r&&cV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QI(t,e)}function QI(t,e){return QI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},QI(t,e)}function Gze(t){var e=Hze();return function(){var n=Z_(t),i;if(e){var o=Z_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return qze(this,i)}}function qze(t,e){if(e&&(Nd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yp(t)}function yp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z_(t)}function wa(t,e,r){return e=lJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lJ(t){var e=Kze(t,"string");return Nd(e)==="symbol"?e:String(e)}function Kze(t,e){if(Nd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Nd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AS=function(t){zze(r,t);var e=Gze(r);function r(){var n;Vze(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),wa(yp(n),"state",{isAnimationFinished:!1}),wa(yp(n),"id",Hg("recharts-bar-")),wa(yp(n),"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),wa(yp(n),"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return Wze(r,[{key:"renderRectanglesStatically",value:function(i){var o=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=qe(this.props);return i&&i.map(function(h,p){var m=p===c,y=m?u:a,g=br(br(br({},d),h),{},{isActive:m,option:y,index:p,dataKey:l,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return k.createElement(Jt,J_({className:"recharts-bar-rectangle"},d_(o.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value)}),k.createElement(aV,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,s=o.data,a=o.layout,l=o.isAnimationActive,c=o.animationBegin,u=o.animationDuration,d=o.animationEasing,h=o.animationId,p=this.state.prevData;return k.createElement(Is,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=s.map(function(b,v){var x=p&&p[v];if(x){var S=Xi(x.x,b.x),_=Xi(x.y,b.y),w=Xi(x.width,b.width),A=Xi(x.height,b.height);return br(br({},b),{},{x:S(y),y:_(y),width:w(y),height:A(y)})}if(a==="horizontal"){var C=Xi(0,b.height),T=C(y);return br(br({},b),{},{y:b.y+b.height-T,height:T})}var P=Xi(0,b.width),I=P(y);return br(br({},b),{},{width:I})});return k.createElement(Jt,null,i.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,s=i.isAnimationActive,a=this.state.prevData;return s&&o&&o.length&&(!a||!xS(a,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,s=o.data,a=o.dataKey,l=o.activeIndex,c=qe(this.props.background);return s.map(function(u,d){u.value;var h=u.background,p=Bze(u,Lze);if(!h)return null;var m=br(br(br(br(br({},p),{},{fill:"#eee"},h),c),d_(i.props,u,d)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:a,index:d,key:"background-bar-".concat(d),className:"recharts-bar-background-rectangle"});return k.createElement(aV,J_({option:i.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=ji(d,Zg);if(!h)return null;var p=u==="vertical"?a[0].height/2:a[0].width/2,m=function(b,v){var x=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:x,errorVal:ai(b,v)}},y={clipPath:i?"url(#clipPath-".concat(o,")"):null};return k.createElement(Jt,y,h.map(function(g){return k.cloneElement(g,{key:"error-bar-".concat(o,"-").concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,s=i.data,a=i.className,l=i.xAxis,c=i.yAxis,u=i.left,d=i.top,h=i.width,p=i.height,m=i.isAnimationActive,y=i.background,g=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,v=ct("recharts-bar",a),x=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,_=x||S,w=Xe(g)?this.id:g;return k.createElement(Jt,{className:v},x||S?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(w)},k.createElement("rect",{x:x?u:u-h/2,y:S?d:d-p/2,width:x?h:h*2,height:S?p:p*2}))):null,k.createElement(Jt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!m||b)&&La.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}]),r}(E.PureComponent);wa(AS,"displayName","Bar");wa(AS,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!xs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});wa(AS,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,h=t.offset,p=oWe(n,r);if(!p)return null;var m=e.layout,y=r.props,g=y.dataKey,b=y.children,v=y.minPointSize,x=m==="horizontal"?s:o,S=c?x.scale.domain():null,_=hWe({numericAxis:x}),w=ji(b,XY),A=d.map(function(C,T){var P,I,O,N,j,L;if(c?P=sWe(c[u+T],S):(P=ai(C,g),Array.isArray(P)||(P=[_,P])),m==="horizontal"){var U,V=[s.scale(P[0]),s.scale(P[1])],R=V[0],F=V[1];I=CU({axis:o,ticks:a,bandSize:i,offset:p.offset,entry:C,index:T}),O=(U=F??R)!==null&&U!==void 0?U:void 0,N=p.size;var z=R-F;if(j=Number.isNaN(z)?0:z,L={x:I,y:s.y,width:N,height:s.height},Math.abs(v)>0&&Math.abs(j)<Math.abs(v)){var le=oo(j||v)*(Math.abs(v)-Math.abs(j));O-=le,j+=le}}else{var re=[o.scale(P[0]),o.scale(P[1])],be=re[0],at=re[1];if(I=be,O=CU({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:C,index:T}),N=at-be,j=p.size,L={x:o.x,y:O,width:o.width,height:j},Math.abs(v)>0&&Math.abs(N)<Math.abs(v)){var rt=oo(N||v)*(Math.abs(v)-Math.abs(N));N+=rt}}return br(br(br({},C),{},{x:I,y:O,width:N,height:j,value:c?P:P[1],payload:C,background:L},w&&w[T]&&w[T].props),{},{tooltipPayload:[ZX(r,C)],tooltipPosition:{x:I+N/2,y:O+j/2}})});return br({data:A,layout:m},h)});function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function Qze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cJ(n.key),n)}}function Yze(t,e,r){return e&&uV(t.prototype,e),r&&uV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(r),!0).forEach(function(n){CS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CS(t,e,r){return e=cJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cJ(t){var e=Xze(t,"string");return Oy(e)==="symbol"?e:String(e)}function Xze(t,e){if(Oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jze=function(e,r,n,i,o){var s=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(r),d={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},h=!!To(c,AS);return u.reduce(function(p,m){var y=r[m],g=y.orientation,b=y.domain,v=y.padding,x=v===void 0?{}:v,S=y.mirror,_=y.reversed,w="".concat(g).concat(S?"Mirror":""),A,C,T,P,I;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=b[1]-b[0],N=1/0,j=y.categoricalDomain.sort();j.forEach(function(at,rt){rt>0&&(N=Math.min((at||0)-(j[rt-1]||0),N))});var L=N/O,U=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(A=L*U/2),y.padding==="no-gap"){var V=gd(e.barCategoryGap,L*U),R=L*U/2;A=R-V-(R-V)/U*V}}i==="xAxis"?C=[n.left+(x.left||0)+(A||0),n.left+n.width-(x.right||0)-(A||0)]:i==="yAxis"?C=l==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(A||0),n.top+n.height-(x.bottom||0)-(A||0)]:C=y.range,_&&(C=[C[1],C[0]]);var F=nWe(y,o,h),z=F.scale,le=F.realScaleType;z.domain(b).range(C),iWe(z);var re=dWe(z,Hi(Hi({},y),{},{realScaleType:le}));i==="xAxis"?(I=g==="top"&&!S||g==="bottom"&&S,T=n.left,P=d[w]-I*y.height):i==="yAxis"&&(I=g==="left"&&!S||g==="right"&&S,T=d[w]-I*y.width,P=n.top);var be=Hi(Hi(Hi({},y),re),{},{realScaleType:le,x:T,y:P,scale:z,width:i==="xAxis"?n.width:y.width,height:i==="yAxis"?n.height:y.height});return be.bandSize=W_(be,re),!y.hide&&i==="xAxis"?d[w]+=(I?-1:1)*be.height:y.hide||(d[w]+=(I?-1:1)*be.width),Hi(Hi({},p),{},CS({},m,be))},{})},uJ=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return{x:Math.min(n,o),y:Math.min(i,s),width:Math.abs(o-n),height:Math.abs(s-i)}},Zze=function(e){var r=e.x1,n=e.y1,i=e.x2,o=e.y2;return uJ({x:r,y:n},{x:i,y:o})},fJ=function(){function t(e){Qze(this,t),this.scale=e}return Yze(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(r)+a}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}]),t}();CS(fJ,"EPS",1e-4);var l$=function(e){var r=Object.keys(e).reduce(function(n,i){return Hi(Hi({},n),{},CS({},i,fJ.create(e[i])))},{});return Hi(Hi({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return bze(i,function(l,c){return r[c].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return aJ(i,function(o,s){return r[s].isInRange(o)})}})};function eGe(t){return(t%180+180)%180}var tGe=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=eGe(i),s=o*Math.PI/180,a=Math.atan(n/r),l=s>a&&s<Math.PI-a?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)};function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function dV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(r),!0).forEach(function(n){rGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rGe(t,e,r){return e=nGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nGe(t){var e=iGe(t,"string");return Ry(e)==="symbol"?e:String(e)}function iGe(t,e){if(Ry(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ry(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oGe(t,e){return cGe(t)||lGe(t,e)||aGe(t,e)||sGe()}function sGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aGe(t,e){if(t){if(typeof t=="string")return pV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pV(t,e)}}function pV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lGe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function cGe(t){if(Array.isArray(t))return t}function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YI.apply(this,arguments)}var uGe=function(e,r){var n;return k.isValidElement(e)?n=k.cloneElement(e,r):Me(e)?n=e(r):n=k.createElement("line",YI({},r,{className:"recharts-reference-line-line"})),n},fGe=function(e,r,n,i,o){var s=o.viewBox,a=s.x,l=s.y,c=s.width,u=s.height,d=o.position;if(n){var h=o.y,p=o.yAxis.orientation,m=e.y.apply(h,{position:d});if(qo(o,"discard")&&!e.y.isInRange(m))return null;var y=[{x:a+c,y:m},{x:a,y:m}];return p==="left"?y.reverse():y}if(r){var g=o.x,b=o.xAxis.orientation,v=e.x.apply(g,{position:d});if(qo(o,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:l+u},{x:v,y:l}];return b==="top"?x.reverse():x}if(i){var S=o.segment,_=S.map(function(w){return e.apply(w,{position:d})});return qo(o,"discard")&&fze(_,function(w){return!e.isInRange(w)})?null:_}return null};function c$(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxis,o=t.yAxis,s=t.shape,a=t.className,l=t.alwaysShow,c=t.clipPathId;mc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=l$({x:i.scale,y:o.scale}),d=hr(e),h=hr(r),p=n&&n.length===2,m=fGe(u,d,h,p,t);if(!m)return null;var y=oGe(m,2),g=y[0],b=g.x,v=g.y,x=y[1],S=x.x,_=x.y,w=qo(t,"hidden")?"url(#".concat(c,")"):void 0,A=hV(hV({clipPath:w},qe(t,!0)),{},{x1:b,y1:v,x2:S,y2:_});return k.createElement(Jt,{className:ct("recharts-reference-line",a)},uGe(s,A),un.renderCallByParent(t,Zze({x1:b,y1:v,x2:S,y2:_})))}c$.displayName="ReferenceLine";c$.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XI.apply(this,arguments)}function mV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(r),!0).forEach(function(n){dGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dGe(t,e,r){return e=hGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hGe(t){var e=pGe(t,"string");return jy(e)==="symbol"?e:String(e)}function pGe(t,e){if(jy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mGe=function(e){var r=e.x,n=e.y,i=e.xAxis,o=e.yAxis,s=l$({x:i.scale,y:o.scale}),a=s.apply({x:r,y:n},{bandAware:!0});return qo(e,"discard")&&!s.isInRange(a)?null:a};function ev(t){var e=t.x,r=t.y,n=t.r,i=t.alwaysShow,o=t.clipPathId,s=hr(e),a=hr(r);if(mc(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=mGe(t);if(!l)return null;var c=l.x,u=l.y,d=t.shape,h=t.className,p=qo(t,"hidden")?"url(#".concat(o,")"):void 0,m=yV(yV({clipPath:p},qe(t,!0)),{},{cx:c,cy:u});return k.createElement(Jt,{className:ct("recharts-reference-dot",h)},ev.renderDot(d,m),un.renderCallByParent(t,{x:c-n,y:u-n,width:2*n,height:2*n}))}ev.displayName="ReferenceDot";ev.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};ev.renderDot=function(t,e){var r;return k.isValidElement(t)?r=k.cloneElement(t,e):Me(t)?r=t(e):r=k.createElement(a$,XI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r};function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JI.apply(this,arguments)}function gV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(r),!0).forEach(function(n){yGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yGe(t,e,r){return e=gGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gGe(t){var e=vGe(t,"string");return $y(e)==="symbol"?e:String(e)}function vGe(t,e){if($y(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($y(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bGe=function(e,r,n,i,o){var s=o.x1,a=o.x2,l=o.y1,c=o.y2,u=o.xAxis,d=o.yAxis;if(!u||!d)return null;var h=l$({x:u.scale,y:d.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return qo(o,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:uJ(p,m)};function tv(t){var e=t.x1,r=t.x2,n=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;mc(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=hr(e),c=hr(r),u=hr(n),d=hr(i),h=t.shape;if(!l&&!c&&!u&&!d&&!h)return null;var p=bGe(l,c,u,d,t);if(!p&&!h)return null;var m=qo(t,"hidden")?"url(#".concat(a,")"):void 0;return k.createElement(Jt,{className:ct("recharts-reference-area",o)},tv.renderRect(h,vV(vV({clipPath:m},qe(t,!0)),p)),un.renderCallByParent(t,p))}tv.displayName="ReferenceArea";tv.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};tv.renderRect=function(t,e){var r;return k.isValidElement(t)?r=k.cloneElement(t,e):Me(t)?r=t(e):r=k.createElement(s$,JI({},e,{className:"recharts-reference-area-rect"})),r};function dJ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)if(r===void 0||r(t[i])===!0)n.push(t[i]);else return;return n}function xGe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return tGe(n,r)}function _Ge(t,e,r){var n=r==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:n?i:o,end:n?i+s:o+a}:{start:n?i+s:o+a,end:n?i:o}}function ew(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function wGe(t,e){return dJ(t,e+1)}function SGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=e.start,a=e.end,l=0,c=1,u=s,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:dJ(n,c)};var y=l,g,b=function(){return g===void 0&&(g=r(m,y)),g},v=m.coordinate,x=l===0||ew(t,v,b,u,a);x||(l=0,u=s,c+=1),x&&(u=v+t*(b()/2+i),l+=c)},h;c<=o.length;)if(h=d(),h)return h.v;return[]}function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function bV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function on(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(r),!0).forEach(function(n){EGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EGe(t,e,r){return e=AGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AGe(t){var e=CGe(t,"string");return Dy(e)==="symbol"?e:String(e)}function CGe(t,e){if(Dy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Dy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=o.length,a=e.start,l=e.end,c=function(h){var p=o[h],m,y=function(){return m===void 0&&(m=r(p,h)),m};if(h===s-1){var g=t*(p.coordinate+t*y()/2-l);o[h]=p=on(on({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else o[h]=p=on(on({},p),{},{tickCoord:p.coordinate});var b=ew(t,p.tickCoord,y,a,l);b&&(l=p.tickCoord-t*(y()/2+i),o[h]=on(on({},p),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return o}function TGe(t,e,r,n,i,o){var s=(n||[]).slice(),a=s.length,l=e.start,c=e.end;if(o){var u=n[a-1],d=r(u,a-1),h=t*(u.coordinate+t*d/2-c);s[a-1]=u=on(on({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var p=ew(t,u.tickCoord,function(){return d},l,c);p&&(c=u.tickCoord-t*(d/2+i),s[a-1]=on(on({},u),{},{isShow:!0}))}for(var m=o?a-1:a,y=function(v){var x=s[v],S,_=function(){return S===void 0&&(S=r(x,v)),S};if(v===0){var w=t*(x.coordinate-t*_()/2-l);s[v]=x=on(on({},x),{},{tickCoord:w<0?x.coordinate-w*t:x.coordinate})}else s[v]=x=on(on({},x),{},{tickCoord:x.coordinate});var A=ew(t,x.tickCoord,_,l,c);A&&(l=x.tickCoord+t*(_()/2+i),s[v]=on(on({},x),{},{isShow:!0}))},g=0;g<m;g++)y(g);return s}function ZI(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!i||!i.length||!n)return[];if(ne(l)||xs.isSsr)return wGe(i,typeof l=="number"&&ne(l)?l:0);var h=[],p=a==="top"||a==="bottom"?"width":"height",m=u&&p==="width"?Qp(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},y=function(x,S){var _=Me(c)?c(x.value,S):x.value;return p==="width"?xGe(Qp(_,{fontSize:e,letterSpacing:r}),m,d):Qp(_,{fontSize:e,letterSpacing:r})[p]},g=i.length>=2?oo(i[1].coordinate-i[0].coordinate):1,b=_Ge(o,g,p);return l==="equidistantPreserveStart"?SGe(g,b,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?h=TGe(g,b,y,i,s,l==="preserveStartEnd"):h=PGe(g,b,y,i,s),h.filter(function(v){return v.isShow}))}var IGe=["viewBox"],NGe=["viewBox"],kGe=["ticks"];function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zu.apply(this,arguments)}function xV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(r),!0).forEach(function(n){u$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sC(t,e){if(t==null)return{};var r=OGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function OGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function RGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hJ(n.key),n)}}function jGe(t,e,r){return e&&_V(t.prototype,e),r&&_V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Ge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eN(t,e)}function eN(t,e){return eN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},eN(t,e)}function DGe(t){var e=LGe();return function(){var n=tw(t),i;if(e){var o=tw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return MGe(this,i)}}function MGe(t,e){if(e&&(kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FGe(t)}function FGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tw(t){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tw(t)}function u$(t,e,r){return e=hJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hJ(t){var e=BGe(t,"string");return kd(e)==="symbol"?e:String(e)}function BGe(t,e){if(kd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(kd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jp=function(t){$Ge(r,t);var e=DGe(r);function r(n){var i;return RGe(this,r),i=e.call(this,n),i.state={fontSize:"",letterSpacing:""},i}return jGe(r,[{key:"shouldComponentUpdate",value:function(i,o){var s=i.viewBox,a=sC(i,IGe),l=this.props,c=l.viewBox,u=sC(l,NGe);return!mf(s,c)||!mf(a,u)||!mf(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,s=o.x,a=o.y,l=o.width,c=o.height,u=o.orientation,d=o.tickSize,h=o.mirror,p=o.tickMargin,m,y,g,b,v,x,S=h?-1:1,_=i.tickSize||d,w=ne(i.tickCoord)?i.tickCoord:i.coordinate;switch(u){case"top":m=y=i.coordinate,b=a+ +!h*c,g=b-S*_,x=g-S*p,v=w;break;case"left":g=b=i.coordinate,y=s+ +!h*l,m=y-S*_,v=m-S*p,x=w;break;case"right":g=b=i.coordinate,y=s+ +h*l,m=y+S*_,v=m+S*p,x=w;break;default:m=y=i.coordinate,b=a+ +h*c,g=b+S*_,x=g+S*p,v=w;break}return{line:{x1:m,y1:g,x2:y,y2:b},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a;switch(o){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a="end";switch(o){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.orientation,u=i.mirror,d=i.axisLine,h=vn(vn(vn({},qe(this.props)),qe(d)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);h=vn(vn({},h),{},{x1:o,y1:s+p*l,x2:o+a,y2:s+p*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=vn(vn({},h),{},{x1:o+m*a,y1:s,x2:o+m*a,y2:s+l})}return k.createElement("line",zu({},h,{className:ct("recharts-cartesian-axis-line",Ri(d,"className"))}))}},{key:"renderTicks",value:function(i,o,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,p=l.unit,m=ZI(vn(vn({},this.props),{},{ticks:i}),o,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=qe(this.props),v=qe(d),x=vn(vn({},b),{},{fill:"none"},qe(c)),S=m.map(function(_,w){var A=a.getTickLineCoord(_),C=A.line,T=A.tick,P=vn(vn(vn(vn({textAnchor:y,verticalAnchor:g},b),{},{stroke:"none",fill:u},v),T),{},{index:w,payload:_,visibleTicksCount:m.length,tickFormatter:h});return k.createElement(Jt,zu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},d_(a.props,_,w)),c&&k.createElement("line",zu({},x,C,{className:ct("recharts-cartesian-axis-tick-line",Ri(c,"className"))})),d&&r.renderTickItem(d,P,"".concat(Me(h)?h(_.value,w):_.value).concat(p||"")))});return k.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var i=this,o=this.props,s=o.axisLine,a=o.width,l=o.height,c=o.ticksGenerator,u=o.className,d=o.hide;if(d)return null;var h=this.props,p=h.ticks,m=sC(h,kGe),y=p;return Me(c)&&(y=p&&p.length>0?c(this.props):c(m)),a<=0||l<=0||!y||!y.length?null:k.createElement(Jt,{className:ct("recharts-cartesian-axis",u),ref:function(b){i.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),un.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,s){var a;return k.isValidElement(i)?a=k.cloneElement(i,o):Me(i)?a=i(o):a=k.createElement(N_,zu({},o,{className:"recharts-cartesian-axis-tick-value"}),s),a}}]),r}(E.Component);u$(Jp,"displayName","CartesianAxis");u$(Jp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UGe=["x1","y1","x2","y2","key"],VGe=["offset"];function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}function tN(){return tN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tN.apply(this,arguments)}function wV(t,e){if(t==null)return{};var r=WGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function WGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function SV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(r),!0).forEach(function(n){f$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pJ(n.key),n)}}function GGe(t,e,r){return e&&EV(t.prototype,e),r&&EV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rN(t,e)}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rN(t,e)}function HGe(t){var e=YGe();return function(){var n=rw(t),i;if(e){var o=rw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return KGe(this,i)}}function KGe(t,e){if(e&&(Od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QGe(t)}function QGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rw(t){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rw(t)}function f$(t,e,r){return e=pJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pJ(t){var e=XGe(t,"string");return Od(e)==="symbol"?e:String(e)}function XGe(t,e){if(Od(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Od(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PS=function(t){qGe(r,t);var e=HGe(r);function r(){return zGe(this,r),e.apply(this,arguments)}return GGe(r,[{key:"renderHorizontal",value:function(i){var o=this,s=this.props,a=s.x,l=s.width,c=s.horizontal;if(!i||!i.length)return null;var u=i.map(function(d,h){var p=Ws(Ws({},o.props),{},{x1:a,y1:d,x2:a+l,y2:d,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}},{key:"renderVertical",value:function(i){var o=this,s=this.props,a=s.y,l=s.height,c=s.vertical;if(!i||!i.length)return null;var u=i.map(function(d,h){var p=Ws(Ws({},o.props),{},{x1:d,y1:a,x2:d,y2:a+l,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,u=s.width,d=s.height,h=i.map(function(m){return Math.round(m+l-l)}).sort(function(m,y){return m-y});l!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?l+u-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return k.createElement("rect",{key:"react-".concat(y),x:m,y:c,width:b,height:d,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,u=s.width,d=s.height,h=i.map(function(m){return Math.round(m+c-c)}).sort(function(m,y){return m-y});c!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?c+d-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return k.createElement("rect",{key:"react-".concat(y),y:m,x:l,height:b,width:u,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,s=o.fillOpacity,a=o.x,l=o.y,c=o.width,u=o.height;return k.createElement("rect",{x:a,y:l,width:c,height:u,stroke:"none",fill:i,fillOpacity:s,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.horizontal,u=i.vertical,d=i.horizontalCoordinatesGenerator,h=i.verticalCoordinatesGenerator,p=i.xAxis,m=i.yAxis,y=i.offset,g=i.chartWidth,b=i.chartHeight,v=i.syncWithTicks,x=i.horizontalValues,S=i.verticalValues;if(!ne(a)||a<=0||!ne(l)||l<=0||!ne(o)||o!==+o||!ne(s)||s!==+s)return null;var _=this.props,w=_.horizontalPoints,A=_.verticalPoints;if((!w||!w.length)&&Me(d)){var C=x&&x.length;w=d({yAxis:m?Ws(Ws({},m),{},{ticks:C?x:m.ticks}):void 0,width:g,height:b,offset:y},C?!0:v)}if((!A||!A.length)&&Me(h)){var T=S&&S.length;A=h({xAxis:p?Ws(Ws({},p),{},{ticks:T?S:p.ticks}):void 0,width:g,height:b,offset:y},T?!0:v)}return k.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),c&&this.renderHorizontal(w),u&&this.renderVertical(A),c&&this.renderHorizontalStripes(w),u&&this.renderVerticalStripes(A))}}],[{key:"renderLineItem",value:function(i,o){var s;if(k.isValidElement(i))s=k.cloneElement(i,o);else if(Me(i))s=i(o);else{var a=o.x1,l=o.y1,c=o.x2,u=o.y2,d=o.key,h=wV(o,UGe),p=qe(h);p.offset;var m=wV(p,VGe);s=k.createElement("line",tN({},m,{x1:a,y1:l,x2:c,y2:u,fill:"none",key:d}))}return s}}]),r}(E.PureComponent);f$(PS,"displayName","CartesianGrid");f$(PS,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var JGe=["type","layout","connectNulls","ref"];function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(t)}function ZGe(t,e){if(t==null)return{};var r=eqe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function eqe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zp.apply(this,arguments)}function AV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Gn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(r),!0).forEach(function(n){Ki(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lu(t){return iqe(t)||nqe(t)||rqe(t)||tqe()}function tqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rqe(t,e){if(t){if(typeof t=="string")return nN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nN(t,e)}}function nqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iqe(t){if(Array.isArray(t))return nN(t)}function nN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mJ(n.key),n)}}function sqe(t,e,r){return e&&CV(t.prototype,e),r&&CV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iN(t,e)}function iN(t,e){return iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},iN(t,e)}function lqe(t){var e=uqe();return function(){var n=nw(t),i;if(e){var o=nw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return cqe(this,i)}}function cqe(t,e){if(e&&(Rd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ks(t)}function Ks(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nw(t){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nw(t)}function Ki(t,e,r){return e=mJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mJ(t){var e=fqe(t,"string");return Rd(e)==="symbol"?e:String(e)}function fqe(t,e){if(Rd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rn=function(t){aqe(r,t);var e=lqe(r);function r(){var n;oqe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),Ki(Ks(n),"state",{isAnimationFinished:!0,totalLength:0}),Ki(Ks(n),"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Ki(Ks(n),"getStrokeDasharray",function(a,l,c){var u=c.reduce(function(v,x){return v+x});if(!u)return n.generateSimpleStrokeDasharray(l,a);for(var d=Math.floor(a/u),h=a%u,p=l-a,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>h){m=[].concat(lu(c.slice(0,y)),[h-g]);break}var b=m.length%2===0?[0,p]:[p];return[].concat(lu(r.repeat(c,d)),lu(m),b).map(function(v){return"".concat(v,"px")}).join(", ")}),Ki(Ks(n),"id",Hg("recharts-line-")),Ki(Ks(n),"pathRef",function(a){n.mainCurve=a}),Ki(Ks(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ki(Ks(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return sqe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=ji(d,Zg);if(!h)return null;var p=function(g,b){return{x:g.x,y:g.y,value:g.value,errorVal:ai(g.payload,b)}},m={clipPath:i?"url(#clipPath-".concat(o,")"):null};return k.createElement(Jt,m,h.map(function(y){return k.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(i,o,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=qe(this.props),p=qe(c,!0),m=u.map(function(g,b){var v=Gn(Gn(Gn({key:"dot-".concat(b),r:3},h),p),{},{value:g.value,dataKey:d,cx:g.x,cy:g.y,index:b,payload:g.payload});return r.renderDotItem(c,v)}),y={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(s,")"):null};return k.createElement(Jt,Zp({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(i,o,s,a){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=ZGe(l,JGe),p=Gn(Gn(Gn({},qe(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(s,")"):null,points:i},a),{},{type:c,layout:u,connectNulls:d});return k.createElement(zI,Zp({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,u=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=a.animateNewValues,g=a.width,b=a.height,v=this.state,x=v.prevPoints,S=v.totalLength;return k.createElement(Is,{begin:d,duration:h,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(x){var A=x.length/l.length,C=l.map(function(N,j){var L=Math.floor(j*A);if(x[L]){var U=x[L],V=Xi(U.x,N.x),R=Xi(U.y,N.y);return Gn(Gn({},N),{},{x:V(w),y:R(w)})}if(y){var F=Xi(g*2,N.x),z=Xi(b/2,N.y);return Gn(Gn({},N),{},{x:F(w),y:z(w)})}return Gn(Gn({},N),{},{x:N.x,y:N.y})});return s.renderCurveStatically(C,i,o)}var T=Xi(0,S),P=T(w),I;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});I=s.getStrokeDasharray(P,S,O)}else I=s.generateSimpleStrokeDasharray(S,P);return s.renderCurveStatically(l,i,o,{strokeDasharray:I})})}},{key:"renderCurve",value:function(i,o){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&a&&a.length&&(!u&&d>0||!xS(u,a))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(a,i,o)}},{key:"render",value:function(){var i,o=this.props,s=o.hide,a=o.dot,l=o.points,c=o.className,u=o.xAxis,d=o.yAxis,h=o.top,p=o.left,m=o.width,y=o.height,g=o.isAnimationActive,b=o.id;if(s||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,S=ct("recharts-line",c),_=u&&u.allowDataOverflow,w=d&&d.allowDataOverflow,A=_||w,C=Xe(b)?this.id:b,T=(i=qe(a))!==null&&i!==void 0?i:{r:3,strokeWidth:2},P=T.r,I=P===void 0?3:P,O=T.strokeWidth,N=O===void 0?2:O,j=kke(a)?a:{},L=j.clipDot,U=L===void 0?!0:L,V=I*2+N;return k.createElement(Jt,{className:S},_||w?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(C)},k.createElement("rect",{x:_?p:p-m/2,y:w?h:h-y/2,width:_?m:m*2,height:w?y:y*2})),!U&&k.createElement("clipPath",{id:"clipPath-dots-".concat(C)},k.createElement("rect",{x:p-V/2,y:h-V/2,width:m+V,height:y+V}))):null,!x&&this.renderCurve(A,C),this.renderErrorBar(A,C),(x||a)&&this.renderDots(A,U,C),(!g||v)&&La.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var s=i.length%2!==0?[].concat(lu(i),[0]):i,a=[],l=0;l<o;++l)a=[].concat(lu(a),lu(s));return a}},{key:"renderDotItem",value:function(i,o){var s;if(k.isValidElement(i))s=k.cloneElement(i,o);else if(Me(i))s=i(o);else{var a=ct("recharts-line-dot",i?i.className:"");s=k.createElement(a$,Zp({},o,{className:a}))}return s}}]),r}(E.PureComponent);Ki(Rn,"displayName","Line");Ki(Rn,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!xs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ki(Rn,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,d=l.map(function(h,p){var m=ai(h,s);return u==="horizontal"?{x:AU({axis:r,ticks:i,bandSize:a,entry:h,index:p}),y:Xe(m)?null:n.scale(m),value:m,payload:h}:{x:Xe(m)?null:r.scale(m),y:AU({axis:n,ticks:o,bandSize:a,entry:h,index:p}),value:m,payload:h}});return Gn({points:d,layout:u},c)});var rv=function(){return null};rv.displayName="XAxis";rv.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var nv=function(){return null};nv.displayName="YAxis";nv.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var dqe=ll,hqe=Kg,pqe=cS;function mqe(t){return function(e,r,n){var i=Object(e);if(!hqe(e)){var o=dqe(r);e=pqe(e),r=function(a){return o(i[a],a,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:void 0}}var yqe=mqe,gqe=iJ;function vqe(t){var e=gqe(t),r=e%1;return e===e?r?e-r:e:0}var bqe=vqe,xqe=PY,_qe=ll,wqe=bqe,Sqe=Math.max;function Eqe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:wqe(r);return i<0&&(i=Sqe(n+i,0)),xqe(t,_qe(e),i)}var Aqe=Eqe,Cqe=yqe,Pqe=Aqe,Tqe=Cqe(Pqe),Iqe=Tqe;const Nqe=ot(Iqe);function PV(t){return jqe(t)||Rqe(t)||Oqe(t)||kqe()}function kqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oqe(t,e){if(t){if(typeof t=="string")return oN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oN(t,e)}}function Rqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jqe(t){if(Array.isArray(t))return oN(t)}function oN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var sN=function(e,r,n,i,o){var s=ji(e,c$),a=ji(e,ev),l=[].concat(PV(s),PV(a)),c=ji(e,tv),u="".concat(i,"Id"),d=i[0],h=r;if(l.length&&(h=l.reduce(function(y,g){if(g.props[u]===n&&qo(g.props,"extendDomain")&&ne(g.props[d])){var b=g.props[d];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},h)),c.length){var p="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(y,g){if(g.props[u]===n&&qo(g.props,"extendDomain")&&ne(g.props[p])&&ne(g.props[m])){var b=g.props[p],v=g.props[m];return[Math.min(y[0],b,v),Math.max(y[1],b,v)]}return y},h)}return o&&o.length&&(h=o.reduce(function(y,g){return ne(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},h)),h},yJ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,d||l,h),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=r?r+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(c){var u=r?r+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,p,m){var y=r?r+c:c;if(!this._events[y])return!1;var g=this._events[y],b=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,h),!0;case 5:return g.fn.call(g.context,u,d,h,p),!0;case 6:return g.fn.call(g.context,u,d,h,p,m),!0}for(x=1,v=new Array(b-1);x<b;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var S=g.length,_;for(x=0;x<S;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),b){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,u);break;case 3:g[x].fn.call(g[x].context,u,d);break;case 4:g[x].fn.call(g[x].context,u,d,h);break;default:if(!v)for(_=1,v=new Array(b-1);_<b;_++)v[_-1]=arguments[_];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,u,d){return o(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return o(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var p=r?r+c:c;if(!this._events[p])return this;if(!u)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&s(this,p);else{for(var y=0,g=[],b=m.length;y<b;y++)(m[y].fn!==u||h&&!m[y].once||d&&m[y].context!==d)&&g.push(m[y]);g.length?this._events[p]=g.length===1?g[0]:g:s(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(yJ);var $qe=yJ.exports;const Dqe=ot($qe);var aC=new Dqe,lC="recharts.syncMouseEvents";function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function Mqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gJ(n.key),n)}}function Fqe(t,e,r){return e&&TV(t.prototype,e),r&&TV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cC(t,e,r){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gJ(t){var e=Lqe(t,"string");return My(e)==="symbol"?e:String(e)}function Lqe(t,e){if(My(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(My(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bqe=function(){function t(){Mqe(this,t),cC(this,"activeIndex",0),cC(this,"coordinateList",[]),cC(this,"layout","horizontal")}return Fqe(t,[{key:"setDetails",value:function(r){var n=r.coordinateList,i=n===void 0?[]:n,o=r.container,s=o===void 0?null:o,a=r.layout,l=a===void 0?null:a,c=r.offset,u=c===void 0?null:c,d=r.mouseHandlerCallback,h=d===void 0?null:d;this.coordinateList=i??this.coordinateList,this.container=s??this.container,this.layout=l??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=o+l+c,h=s+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}]),t}();function Uqe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&ne(n)&&ne(i))return!0}return!1}function Vqe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function vJ(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,o=t.endAngle,s=qr(e,r,n,i),a=qr(e,r,n,o);return{points:[s,a],cx:e,cy:r,radius:n,startAngle:i,endAngle:o}}function Wqe(t,e,r){var n,i,o,s;if(t==="horizontal")n=e.x,o=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,o=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=qr(a,l,c,d),p=qr(a,l,u,d);n=h.x,i=h.y,o=p.x,s=p.y}else return vJ(e);return[{x:n,y:i},{x:o,y:s}]}function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function IV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function p0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(r),!0).forEach(function(n){zqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zqe(t,e,r){return e=Gqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gqe(t){var e=qqe(t,"string");return Fy(e)==="symbol"?e:String(e)}function qqe(t,e){if(Fy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hqe(t){var e=t.element,r=t.tooltipEventType,n=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,c=t.layout,u=t.chartName;if(!e||!e.props.cursor||!n||!i||u!=="ScatterChart"&&r!=="axis")return null;var d,h=zI;if(u==="ScatterChart")d=i,h=$8e;else if(u==="BarChart")d=Vqe(c,i,s,l),h=s$;else if(c==="radial"){var p=vJ(i),m=p.cx,y=p.cy,g=p.radius,b=p.startAngle,v=p.endAngle;d={cx:m,cy:y,startAngle:b,endAngle:v,innerRadius:g,outerRadius:g},h=rJ}else d={points:Wqe(c,i,s)},h=zI;var x=p0(p0(p0(p0({stroke:"#ccc",pointerEvents:"none"},s),d),qe(e.props.cursor)),{},{payload:o,payloadIndex:a,className:"recharts-tooltip-cursor"});return E.isValidElement(e.props.cursor)?E.cloneElement(e.props.cursor,x):E.createElement(h,x)}var Kqe=["item"],Qqe=["children","className","width","height","style","compact","title","desc"];function jd(t){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function NV(t,e){return Jqe(t)||Xqe(t,e)||bJ(t,e)||Yqe()}function Yqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Jqe(t){if(Array.isArray(t))return t}function Gu(){return Gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gu.apply(this,arguments)}function kV(t,e){if(t==null)return{};var r=Zqe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zqe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function eHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xJ(n.key),n)}}function tHe(t,e,r){return e&&OV(t.prototype,e),r&&OV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aN(t,e)}function aN(t,e){return aN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},aN(t,e)}function nHe(t){var e=oHe();return function(){var n=iw(t),i;if(e){var o=iw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return iHe(this,i)}}function iHe(t,e){if(e&&(jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(t)}function Ie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iw(t){return iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iw(t)}function $d(t){return lHe(t)||aHe(t)||bJ(t)||sHe()}function sHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bJ(t,e){if(t){if(typeof t=="string")return lN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lN(t,e)}}function aHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lHe(t){if(Array.isArray(t))return lN(t)}function lN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(r),!0).forEach(function(n){ye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ye(t,e,r){return e=xJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xJ(t){var e=cHe(t,"string");return jd(e)==="symbol"?e:String(e)}function cHe(t,e){if(jd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uHe={xAxis:["bottom","top"],yAxis:["left","right"]},fHe={width:"100%",height:"100%"},_J={x:0,y:0},dHe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},hHe=function(e,r,n,i){var o=r.find(function(u){return u&&u.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return G(G(G({},i),qr(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,c=i.angle;return G(G(G({},i),qr(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return _J},TS=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,s=(n??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat($d(a),$d(c)):a},[]);return s.length>0?s:e&&e.length&&ne(i)&&ne(o)?e.slice(i,o+1):[]};function wJ(t){return t==="number"?[0,"auto"]:void 0}var SJ=function(e,r,n,i){var o=e.graphicalItems,s=e.tooltipAxis,a=TS(r,e);return n<0||!o||!o.length||n>=a.length?null:o.reduce(function(l,c){var u,d=c.props.hide;if(d)return l;var h=(u=c.props.data)!==null&&u!==void 0?u:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var m=h===void 0?a:h;p=u_(m,s.dataKey,i)}else p=h&&h[n]||a[n];return p?[].concat($d(l),[ZX(c,p)]):l},[])},jV=function(e,r,n,i){var o=i||{x:e.chartX,y:e.chartY},s=dHe(o,n),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=X5e(s,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=SJ(e,r,u,d),p=hHe(n,a,u,o);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},pHe=function(e,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,p=XX(u,o);return n.reduce(function(m,y){var g,b=y.props,v=b.type,x=b.dataKey,S=b.allowDataOverflow,_=b.allowDuplicatedCategory,w=b.scale,A=b.ticks,C=b.includeHidden,T=y.props[s];if(m[T])return m;var P=TS(e.data,{graphicalItems:i.filter(function(re){return re.props[s]===T}),dataStartIndex:l,dataEndIndex:c}),I=P.length,O,N,j;Uqe(y.props.domain,S,v)&&(O=LI(y.props.domain,null,S),p&&(v==="number"||w!=="auto")&&(j=Xp(P,x,"category")));var L=wJ(v);if(!O||O.length===0){var U,V=(U=y.props.domain)!==null&&U!==void 0?U:L;if(x){if(O=Xp(P,x,v),v==="category"&&p){var R=wke(O);_&&R?(N=O,O=Q_(0,I)):_||(O=IU(V,O,y).reduce(function(re,be){return re.indexOf(be)>=0?re:[].concat($d(re),[be])},[]))}else if(v==="category")_?O=O.filter(function(re){return re!==""&&!Xe(re)}):O=IU(V,O,y).reduce(function(re,be){return re.indexOf(be)>=0||be===""||Xe(be)?re:[].concat($d(re),[be])},[]);else if(v==="number"){var F=rWe(P,i.filter(function(re){return re.props[s]===T&&(C||!re.props.hide)}),x,o,u);F&&(O=F)}p&&(v==="number"||w!=="auto")&&(j=Xp(P,x,"category"))}else p?O=Q_(0,I):a&&a[T]&&a[T].hasStack&&v==="number"?O=h==="expand"?[0,1]:JX(a[T].stackGroups,l,c):O=YX(P,i.filter(function(re){return re.props[s]===T&&(C||!re.props.hide)}),v,u,!0);if(v==="number")O=sN(d,O,T,o,A),V&&(O=LI(V,O,S));else if(v==="category"&&V){var z=V,le=O.every(function(re){return z.indexOf(re)>=0});le&&(O=z)}}return G(G({},m),{},ye({},T,G(G({},y.props),{},{axisType:o,domain:O,categoricalDomain:j,duplicateDomain:N,originalDomain:(g=y.props.domain)!==null&&g!==void 0?g:L,isCategorical:p,layout:u})))},{})},mHe=function(e,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.layout,d=e.children,h=TS(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=h.length,m=XX(u,o),y=-1;return n.reduce(function(g,b){var v=b.props[s],x=wJ("number");if(!g[v]){y++;var S;return m?S=Q_(0,p):a&&a[v]&&a[v].hasStack?(S=JX(a[v].stackGroups,l,c),S=sN(d,S,v,o)):(S=LI(x,YX(h,n.filter(function(_){return _.props[s]===v&&!_.props.hide}),"number",u),i.defaultProps.allowDataOverflow),S=sN(d,S,v,o)),G(G({},g),{},ye({},v,G(G({axisType:o},i.defaultProps),{},{hide:!0,orientation:Ri(uHe,"".concat(o,".").concat(y%2),null),domain:S,originalDomain:x,isCategorical:m,layout:u})))}return g},{})},yHe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,s=r.graphicalItems,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.children,d="".concat(i,"Id"),h=ji(u,o),p={};return h&&h.length?p=pHe(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(p=mHe(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),p},gHe=function(e){var r=qs(e),n=Hs(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Oj(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:W_(r,n)}},$V=function(e){var r=e.children,n=e.defaultShowTooltip,i=To(r,Id),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},vHe=function(e){return!e||!e.length?!1:e.some(function(r){var n=bs(r&&r.type);return n&&n.indexOf("Bar")>=0})},DV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},bHe=function(e,r){var n=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,c=n.width,u=n.height,d=n.children,h=n.margin||{},p=To(d,Id),m=To(d,ry),y=Object.keys(l).reduce(function(_,w){var A=l[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},ye({},C,_[C]+A.width)):_},{left:h.left||0,right:h.right||0}),g=Object.keys(s).reduce(function(_,w){var A=s[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},ye({},C,Ri(_,"".concat(C))+A.height)):_},{top:h.top||0,bottom:h.bottom||0}),b=G(G({},g),y),v=b.bottom;p&&(b.bottom+=p.props.height||Id.defaultProps.height),m&&r&&(b=eWe(b,i,n,r));var x=c-b.left-b.right,S=u-b.top-b.bottom;return G(G({brushBottom:v},b),{},{width:Math.max(x,0),height:Math.max(S,0)})},xHe=function(e){var r,n=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(g,b){var v=b.graphicalItems,x=b.stackGroups,S=b.offset,_=b.updateId,w=b.dataStartIndex,A=b.dataEndIndex,C=g.barSize,T=g.layout,P=g.barGap,I=g.barCategoryGap,O=g.maxBarSize,N=DV(T),j=N.numericAxisName,L=N.cateAxisName,U=vHe(v),V=U&&J5e({barSize:C,stackGroups:x}),R=[];return v.forEach(function(F,z){var le=TS(g.data,{graphicalItems:[F],dataStartIndex:w,dataEndIndex:A}),re=F.props,be=re.dataKey,at=re.maxBarSize,rt=F.props["".concat(j,"Id")],Wt=F.props["".concat(L,"Id")],pt={},Zt=c.reduce(function(W,Z){var J,Y=b["".concat(Z.axisType,"Map")],me=F.props["".concat(Z.axisType,"Id")];Y&&Y[me]||Z.axisType==="zAxis"||Eq(!1);var nt=Y[me];return G(G({},W),{},(J={},ye(J,Z.axisType,nt),ye(J,"".concat(Z.axisType,"Ticks"),Hs(nt)),J))},pt),te=Zt[L],xe=Zt["".concat(L,"Ticks")],Ee=x&&x[rt]&&x[rt].hasStack&&pWe(F,x[rt].stackGroups),q=bs(F.type).indexOf("Bar")>=0,Ze=W_(te,xe),ke=[];if(q){var vt,$t,en=Xe(at)?O:at,Wn=(vt=($t=W_(te,xe,!0))!==null&&$t!==void 0?$t:en)!==null&&vt!==void 0?vt:0;ke=Z5e({barGap:P,barCategoryGap:I,bandSize:Wn!==Ze?Wn:Ze,sizeList:V[Wt],maxBarSize:en}),Wn!==Ze&&(ke=ke.map(function(W){return G(G({},W),{},{position:G(G({},W.position),{},{offset:W.position.offset-Wn/2})})}))}var $=F&&F.type&&F.type.getComposedData;if($){var B;R.push({props:G(G({},$(G(G({},Zt),{},{displayedData:le,props:g,dataKey:be,item:F,bandSize:Ze,barPosition:ke,offset:S,stackedData:Ee,layout:T,dataStartIndex:w,dataEndIndex:A}))),{},(B={key:F.key||"item-".concat(z)},ye(B,j,Zt[j]),ye(B,L,Zt[L]),ye(B,"animationId",_),B)),childIndex:jke(F,g.children),item:F})}}),R},m=function(g,b){var v=g.props,x=g.dataStartIndex,S=g.dataEndIndex,_=g.updateId;if(!tB({props:v}))return null;var w=v.children,A=v.layout,C=v.stackOffset,T=v.data,P=v.reverseStackOrder,I=DV(A),O=I.numericAxisName,N=I.cateAxisName,j=ji(w,i),L=fWe(T,j,"".concat(O,"Id"),"".concat(N,"Id"),C,P),U=c.reduce(function(le,re){var be="".concat(re.axisType,"Map");return G(G({},le),{},ye({},be,yHe(v,G(G({},re),{},{graphicalItems:j,stackGroups:re.axisType===O&&L,dataStartIndex:x,dataEndIndex:S}))))},{}),V=bHe(G(G({},U),{},{props:v,graphicalItems:j}),b==null?void 0:b.legendBBox);Object.keys(U).forEach(function(le){U[le]=d(v,U[le],V,le.replace("Map",""),n)});var R=U["".concat(N,"Map")],F=gHe(R),z=p(v,G(G({},U),{},{dataStartIndex:x,dataEndIndex:S,updateId:_,graphicalItems:j,stackGroups:L,offset:V}));return G(G({formattedGraphicalItems:z,graphicalItems:j,offset:V,stackGroups:L},F),U)};return r=function(y){rHe(b,y);var g=nHe(b);function b(v){var x,S,_;return eHe(this,b),_=g.call(this,v),ye(Ie(_),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ye(Ie(_),"accessibilityManager",new Bqe),ye(Ie(_),"handleLegendBBoxUpdate",function(w){if(w){var A=_.state,C=A.dataStartIndex,T=A.dataEndIndex,P=A.updateId;_.setState(G({legendBBox:w},m({props:_.props,dataStartIndex:C,dataEndIndex:T,updateId:P},G(G({},_.state),{},{legendBBox:w}))))}}),ye(Ie(_),"handleReceiveSyncEvent",function(w,A,C){if(_.props.syncId===w){if(C===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),ye(Ie(_),"handleBrushChange",function(w){var A=w.startIndex,C=w.endIndex;if(A!==_.state.dataStartIndex||C!==_.state.dataEndIndex){var T=_.state.updateId;_.setState(function(){return G({dataStartIndex:A,dataEndIndex:C},m({props:_.props,dataStartIndex:A,dataEndIndex:C,updateId:T},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:C})}}),ye(Ie(_),"handleMouseEnter",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var T=_.props.onMouseEnter;Me(T)&&T(C,w)}}),ye(Ie(_),"triggeredAfterMouseMove",function(w){var A=_.getMouseInfo(w),C=A?G(G({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(C),_.triggerSyncEvent(C);var T=_.props.onMouseMove;Me(T)&&T(C,w)}),ye(Ie(_),"handleItemMouseEnter",function(w){_.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),ye(Ie(_),"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),ye(Ie(_),"handleMouseMove",function(w){w.persist(),_.throttleTriggeredAfterMouseMove(w)}),ye(Ie(_),"handleMouseLeave",function(w){var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var C=_.props.onMouseLeave;Me(C)&&C(A,w)}),ye(Ie(_),"handleOuterEvent",function(w){var A=Rke(w),C=Ri(_.props,"".concat(A));if(A&&Me(C)){var T,P;/.*touch.*/i.test(A)?P=_.getMouseInfo(w.changedTouches[0]):P=_.getMouseInfo(w),C((T=P)!==null&&T!==void 0?T:{},w)}}),ye(Ie(_),"handleClick",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var T=_.props.onClick;Me(T)&&T(C,w)}}),ye(Ie(_),"handleMouseDown",function(w){var A=_.props.onMouseDown;if(Me(A)){var C=_.getMouseInfo(w);A(C,w)}}),ye(Ie(_),"handleMouseUp",function(w){var A=_.props.onMouseUp;if(Me(A)){var C=_.getMouseInfo(w);A(C,w)}}),ye(Ie(_),"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),ye(Ie(_),"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseDown(w.changedTouches[0])}),ye(Ie(_),"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseUp(w.changedTouches[0])}),ye(Ie(_),"triggerSyncEvent",function(w){_.props.syncId!==void 0&&aC.emit(lC,_.props.syncId,w,_.eventEmitterSymbol)}),ye(Ie(_),"applySyncEvent",function(w){var A=_.props,C=A.layout,T=A.syncMethod,P=_.state.updateId,I=w.dataStartIndex,O=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)_.setState(G({dataStartIndex:I,dataEndIndex:O},m({props:_.props,dataStartIndex:I,dataEndIndex:O,updateId:P},_.state)));else if(w.activeTooltipIndex!==void 0){var N=w.chartX,j=w.chartY,L=w.activeTooltipIndex,U=_.state,V=U.offset,R=U.tooltipTicks;if(!V)return;if(typeof T=="function")L=T(R,w);else if(T==="value"){L=-1;for(var F=0;F<R.length;F++)if(R[F].value===w.activeLabel){L=F;break}}var z=G(G({},V),{},{x:V.left,y:V.top}),le=Math.min(N,z.x+z.width),re=Math.min(j,z.y+z.height),be=R[L]&&R[L].value,at=SJ(_.state,_.props.data,L),rt=R[L]?{x:C==="horizontal"?R[L].coordinate:le,y:C==="horizontal"?re:R[L].coordinate}:_J;_.setState(G(G({},w),{},{activeLabel:be,activeCoordinate:rt,activePayload:at,activeTooltipIndex:L}))}else _.setState(w)}),ye(Ie(_),"verticalCoordinatesGenerator",function(w,A){var C=w.xAxis,T=w.width,P=w.height,I=w.offset;return SU(ZI(G(G(G({},Jp.defaultProps),C),{},{ticks:Hs(C,!0),viewBox:{x:0,y:0,width:T,height:P}})),I.left,I.left+I.width,A)}),ye(Ie(_),"horizontalCoordinatesGenerator",function(w,A){var C=w.yAxis,T=w.width,P=w.height,I=w.offset;return SU(ZI(G(G(G({},Jp.defaultProps),C),{},{ticks:Hs(C,!0),viewBox:{x:0,y:0,width:T,height:P}})),I.top,I.top+I.height,A)}),ye(Ie(_),"axesTicksGenerator",function(w){return Hs(w,!0)}),ye(Ie(_),"renderCursor",function(w){var A,C=_.state,T=C.isTooltipActive,P=C.activeCoordinate,I=C.activePayload,O=C.offset,N=C.activeTooltipIndex,j=C.tooltipAxisBandSize,L=_.getTooltipEventType(),U=(A=w.props.active)!==null&&A!==void 0?A:T,V=_.props.layout,R=w.key||"_recharts-cursor";return k.createElement(Hqe,{key:R,activeCoordinate:P,activePayload:I,activeTooltipIndex:N,chartName:n,element:w,isActive:U,layout:V,offset:O,tooltipAxisBandSize:j,tooltipEventType:L})}),ye(Ie(_),"renderPolarAxis",function(w,A,C){var T=Ri(w,"type.axisType"),P=Ri(_.state,"".concat(T,"Map")),I=P&&P[w.props["".concat(T,"Id")]];return E.cloneElement(w,G(G({},I),{},{className:T,key:w.key||"".concat(A,"-").concat(C),ticks:Hs(I,!0)}))}),ye(Ie(_),"renderXAxis",function(w,A,C){var T=_.state.xAxisMap,P=T[w.props.xAxisId];return _.renderAxis(P,w,A,C)}),ye(Ie(_),"renderYAxis",function(w,A,C){var T=_.state.yAxisMap,P=T[w.props.yAxisId];return _.renderAxis(P,w,A,C)}),ye(Ie(_),"renderGrid",function(w){var A=_.state,C=A.xAxisMap,T=A.yAxisMap,P=A.offset,I=_.props,O=I.width,N=I.height,j=qs(C),L=Nqe(T,function(R){return aJ(R.domain,Number.isFinite)}),U=L||qs(T),V=w.props||{};return E.cloneElement(w,{key:w.key||"grid",x:ne(V.x)?V.x:P.left,y:ne(V.y)?V.y:P.top,width:ne(V.width)?V.width:P.width,height:ne(V.height)?V.height:P.height,xAxis:j,yAxis:U,offset:P,chartWidth:O,chartHeight:N,verticalCoordinatesGenerator:V.verticalCoordinatesGenerator||_.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:V.horizontalCoordinatesGenerator||_.horizontalCoordinatesGenerator})}),ye(Ie(_),"renderPolarGrid",function(w){var A=w.props,C=A.radialLines,T=A.polarAngles,P=A.polarRadius,I=_.state,O=I.radiusAxisMap,N=I.angleAxisMap,j=qs(O),L=qs(N),U=L.cx,V=L.cy,R=L.innerRadius,F=L.outerRadius;return E.cloneElement(w,{polarAngles:Array.isArray(T)?T:Hs(L,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(P)?P:Hs(j,!0).map(function(z){return z.coordinate}),cx:U,cy:V,innerRadius:R,outerRadius:F,key:w.key||"polar-grid",radialLines:C})}),ye(Ie(_),"renderLegend",function(){var w=_.state.formattedGraphicalItems,A=_.props,C=A.children,T=A.width,P=A.height,I=_.props.margin||{},O=T-(I.left||0)-(I.right||0),N=KX({children:C,formattedGraphicalItems:w,legendWidth:O,legendContent:u});if(!N)return null;var j=N.item,L=kV(N,Kqe);return E.cloneElement(j,G(G({},L),{},{chartWidth:T,chartHeight:P,margin:I,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),ye(Ie(_),"renderTooltip",function(){var w,A=_.props.children,C=To(A,Vu);if(!C)return null;var T=_.state,P=T.isTooltipActive,I=T.activeCoordinate,O=T.activePayload,N=T.activeLabel,j=T.offset,L=(w=C.props.active)!==null&&w!==void 0?w:P;return E.cloneElement(C,{viewBox:G(G({},j),{},{x:j.left,y:j.top}),active:L,label:N,payload:L?O:[],coordinate:I})}),ye(Ie(_),"renderBrush",function(w){var A=_.props,C=A.margin,T=A.data,P=_.state,I=P.offset,O=P.dataStartIndex,N=P.dataEndIndex,j=P.updateId;return E.cloneElement(w,{key:w.key||"_recharts-brush",onChange:f0(_.handleBrushChange,w.props.onChange),data:T,x:ne(w.props.x)?w.props.x:I.left,y:ne(w.props.y)?w.props.y:I.top+I.height+I.brushBottom-(C.bottom||0),width:ne(w.props.width)?w.props.width:I.width,startIndex:O,endIndex:N,updateId:"brush-".concat(j)})}),ye(Ie(_),"renderReferenceElement",function(w,A,C){if(!w)return null;var T=Ie(_),P=T.clipPathId,I=_.state,O=I.xAxisMap,N=I.yAxisMap,j=I.offset,L=w.props,U=L.xAxisId,V=L.yAxisId;return E.cloneElement(w,{key:w.key||"".concat(A,"-").concat(C),xAxis:O[U],yAxis:N[V],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:P})}),ye(Ie(_),"renderActivePoints",function(w){var A=w.item,C=w.activePoint,T=w.basePoint,P=w.childIndex,I=w.isRange,O=[],N=A.props.key,j=A.item.props,L=j.activeDot,U=j.dataKey,V=G(G({index:P,dataKey:U,cx:C.x,cy:C.y,r:4,fill:o$(A.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value,key:"".concat(N,"-activePoint-").concat(P)},qe(L)),f_(L));return O.push(b.renderActiveDot(L,V)),T?O.push(b.renderActiveDot(L,G(G({},V),{},{cx:T.x,cy:T.y,key:"".concat(N,"-basePoint-").concat(P)}))):I&&O.push(null),O}),ye(Ie(_),"renderGraphicChild",function(w,A,C){var T=_.filterFormatItem(w,A,C);if(!T)return null;var P=_.getTooltipEventType(),I=_.state,O=I.isTooltipActive,N=I.tooltipAxis,j=I.activeTooltipIndex,L=I.activeLabel,U=_.props.children,V=To(U,Vu),R=T.props,F=R.points,z=R.isRange,le=R.baseLine,re=T.item.props,be=re.activeDot,at=re.hide,rt=re.activeBar,Wt=re.activeShape,pt=!!(!at&&O&&V&&(be||rt||Wt)),Zt={};P!=="axis"&&V&&V.props.trigger==="click"?Zt={onClick:f0(_.handleItemMouseEnter,w.props.onClick)}:P!=="axis"&&(Zt={onMouseLeave:f0(_.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:f0(_.handleItemMouseEnter,w.props.onMouseEnter)});var te=E.cloneElement(w,G(G({},T.props),Zt));function xe(Z){return typeof N.dataKey=="function"?N.dataKey(Z.payload):null}if(pt)if(j>=0){var Ee,q;if(N.dataKey&&!N.allowDuplicatedCategory){var Ze=typeof N.dataKey=="function"?xe:"payload.".concat(N.dataKey.toString());Ee=u_(F,Ze,L),q=z&&le&&u_(le,Ze,L)}else Ee=F==null?void 0:F[j],q=z&&le&&le[j];if(Wt||rt){var ke=w.props.activeIndex!==void 0?w.props.activeIndex:j;return[E.cloneElement(w,G(G(G({},T.props),Zt),{},{activeIndex:ke})),null,null]}if(!Xe(Ee))return[te].concat($d(_.renderActivePoints({item:T,activePoint:Ee,basePoint:q,childIndex:j,isRange:z})))}else{var vt,$t=(vt=_.getItemByXY(_.state.activeCoordinate))!==null&&vt!==void 0?vt:{graphicalItem:te},en=$t.graphicalItem,Wn=en.item,$=Wn===void 0?w:Wn,B=en.childIndex,W=G(G(G({},T.props),Zt),{},{activeIndex:B});return[E.cloneElement($,W),null,null]}return z?[te,null,null]:[te,null]}),ye(Ie(_),"renderCustomized",function(w,A,C){return E.cloneElement(w,G(G({key:"recharts-customized-".concat(C)},_.props),_.state))}),ye(Ie(_),"renderMap",{CartesianGrid:{handler:_.renderGrid,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:_.renderReferenceElement},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:_.renderXAxis},YAxis:{handler:_.renderYAxis},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:Hg("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=QY(_.triggeredAfterMouseMove,(S=v.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return tHe(b,[{key:"componentDidMount",value:function(){var x,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(x,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=To(this.props.children,Vu);if(x&&typeof x.props.shared=="boolean"){var S=x.props.shared?"axis":"item";return l.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),w=O4e(_),A={chartX:Math.round(x.pageX-w.left),chartY:Math.round(x.pageY-w.top)},C=_.width/S.offsetWidth||1,T=this.inRange(A.chartX,A.chartY,C);if(!T)return null;var P=this.state,I=P.xAxisMap,O=P.yAxisMap,N=this.getTooltipEventType();if(N!=="axis"&&I&&O){var j=qs(I).scale,L=qs(O).scale,U=j&&j.invert?j.invert(A.chartX):null,V=L&&L.invert?L.invert(A.chartY):null;return G(G({},A),{},{xValue:U,yValue:V})}var R=jV(this.state,this.props.data,this.props.layout,T);return R?G(G({},A),R):null}},{key:"inRange",value:function(x,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,A=x/_,C=S/_;if(w==="horizontal"||w==="vertical"){var T=this.state.offset,P=A>=T.left&&A<=T.left+T.width&&C>=T.top&&C<=T.top+T.height;return P?{x:A,y:C}:null}var I=this.state,O=I.angleAxisMap,N=I.radiusAxisMap;if(O&&N){var j=qs(O);return OU({x:A,y:C},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,S=this.getTooltipEventType(),_=To(x,Vu),w={};_&&S==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var A=f_(this.props,this.handleOuterEvent);return G(G({},A),w)}},{key:"addListener",value:function(){aC.on(lC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aC.removeListener(lC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,S,_){for(var w=this.state.formattedGraphicalItems,A=0,C=w.length;A<C;A++){var T=w[A];if(T.item===x||T.props.key===x.key||S===bs(T.item.type)&&_===T.childIndex)return T}return null}},{key:"renderAxis",value:function(x,S,_,w){var A=this.props,C=A.width,T=A.height;return k.createElement(Jp,Gu({},x,{className:ct("recharts-".concat(x.axisType," ").concat(x.axisType),x.className),key:S.key||"".concat(_,"-").concat(w),viewBox:{x:0,y:0,width:C,height:T},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var x=this.clipPathId,S=this.state.offset,_=S.left,w=S.top,A=S.height,C=S.width;return k.createElement("defs",null,k.createElement("clipPath",{id:x},k.createElement("rect",{x:_,y:w,height:A,width:C})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=NV(_,2),A=w[0],C=w[1];return G(G({},S),{},ye({},A,C.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=NV(_,2),A=w[0],C=w[1];return G(G({},S),{},ye({},A,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var S=this.state,_=S.formattedGraphicalItems,w=S.activeItem;if(_&&_.length)for(var A=0,C=_.length;A<C;A++){var T=_[A],P=T.props,I=T.item,O=bs(I.type);if(O==="Bar"){var N=(P.data||[]).find(function(V){return A8e(x,V)});if(N)return{graphicalItem:T,payload:N}}else if(O==="RadialBar"){var j=(P.data||[]).find(function(V){return OU(x,V)});if(j)return{graphicalItem:T,payload:j}}else if(SS(T,w)||ES(T,w)||Iy(T,w)){var L=T9e({graphicalItem:T,activeTooltipItem:w,itemData:I.props.data}),U=I.props.activeIndex===void 0?L:I.props.activeIndex;return{graphicalItem:G(G({},T),{},{childIndex:U}),payload:Iy(T,w)?I.props.data[L]:T.props.data[L]}}}return null}},{key:"render",value:function(){var x=this;if(!tB(this))return null;var S=this.props,_=S.children,w=S.className,A=S.width,C=S.height,T=S.style,P=S.compact,I=S.title,O=S.desc,N=kV(S,Qqe),j=qe(N);if(P)return k.createElement(YT,Gu({},j,{width:A,height:C,title:I,desc:O}),this.renderClipPath(),nB(_,this.renderMap));if(this.props.accessibilityLayer){var L,U;j.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,j.role=(U=this.props.role)!==null&&U!==void 0?U:"img",j.onKeyDown=function(R){x.accessibilityManager.keyboardEvent(R)},j.onFocus=function(){x.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return k.createElement("div",Gu({className:ct("recharts-wrapper",w),style:G({position:"relative",cursor:"default",width:A,height:C},T)},V,{ref:function(F){x.container=F},role:"region"}),k.createElement(YT,Gu({},j,{width:A,height:C,title:I,desc:O,style:fHe}),this.renderClipPath(),nB(_,this.renderMap)),this.renderLegend(),this.renderTooltip())}}]),b}(E.Component),ye(r,"displayName",n),ye(r,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),ye(r,"getDerivedStateFromProps",function(y,g){var b=y.dataKey,v=y.data,x=y.children,S=y.width,_=y.height,w=y.layout,A=y.stackOffset,C=y.margin,T=g.dataStartIndex,P=g.dataEndIndex;if(g.updateId===void 0){var I=$V(y);return G(G(G({},I),{},{updateId:0},m(G(G({props:y},I),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(b!==g.prevDataKey||v!==g.prevData||S!==g.prevWidth||_!==g.prevHeight||w!==g.prevLayout||A!==g.prevStackOffset||!mf(C,g.prevMargin)){var O=$V(y),N={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},j=G(G({},jV(g,v,w)),{},{updateId:g.updateId+1}),L=G(G(G({},O),N),j);return G(G(G({},L),m(G({props:y},L),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(!LQ(x,g.prevChildren)){var U,V,R,F,z=To(x,Id),le=z&&(U=(V=z.props)===null||V===void 0?void 0:V.startIndex)!==null&&U!==void 0?U:T,re=z&&(R=(F=z.props)===null||F===void 0?void 0:F.endIndex)!==null&&R!==void 0?R:P,be=le!==T||re!==P,at=!Xe(v),rt=at&&!be?g.updateId:g.updateId+1;return G(G({updateId:rt},m(G(G({props:y},g),{},{updateId:rt,dataStartIndex:le,dataEndIndex:re}),g)),{},{prevChildren:x,dataStartIndex:le,dataEndIndex:re})}return null}),ye(r,"renderActiveDot",function(y,g){var b;return E.isValidElement(y)?b=E.cloneElement(y,g):Me(y)?b=y(g):b=k.createElement(a$,g),k.createElement(Jt,{className:"recharts-active-dot",key:g.key},b)}),r},EJ=xHe({chartName:"LineChart",GraphicalChild:Rn,axisComponents:[{axisType:"xAxis",AxisComp:rv},{axisType:"yAxis",AxisComp:nv}],formatAxisMap:Jze});function _He({teams:t}){const e=E.useMemo(()=>{const r=t[0].matchCount,n=Array(r+1).fill(void 0).map(()=>({}));for(const i of t){n[0][i.team._id]=0;for(let o=0;o<r;o++)n[o+1][i.team._id]=i.pointHistories[o]??i.pointHistories.at(-1)}return n},[t]);return f.jsx(YY,{width:"100%",height:"100%",children:f.jsxs(EJ,{data:e,children:[f.jsx(PS,{strokeDasharray:"3 3"}),f.jsx(rv,{tick:{fill:"white"},dataKey:"name"}),f.jsx(nv,{tick:{fill:"white"},width:80,allowDecimals:!1,tickCount:5}),t.map(r=>f.jsx(Rn,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:r.team._id},r.team._id)),t.map(r=>f.jsx(Rn,{type:"linear",stroke:r.team.color,strokeWidth:8,isAnimationActive:!1,name:r.team.name,dataKey:r.team._id},r.team._id))]})})}const wHe=(t,e)=>t.reduce((r,n)=>{const i=typeof e=="function"?e(n):n[e];return r[i]?r[i]=[...r[i],n]:r[i]=[n],r},{}),cu="b6908027-9179-485a-8bce-822c42114371",Qh=(t,e,r,n,i,o)=>t.map(s=>({player:ko(e[s.teamId],{...s,team:e[s.teamId]}),value:r(s.player.statistics),tieBreakValue:n(s.player.statistics)})).sort((s,a)=>s.value===a.value?(s.tieBreakValue-a.tieBreakValue)*(o==="asc"?1:-1):(s.value-a.value)*(i==="asc"?1:-1)).slice(0,6),SHe=({value:t})=>typeof t>"u"?f.jsx(f.Fragment,{}):t>0?f.jsxs("span",{className:"text-red-500",children:[f.jsx("i",{className:"bi bi-caret-down-fill"})," ",f.jsx("span",{className:"-m-2",children:t})]}):t<0?f.jsxs("span",{className:"text-green-400",children:[f.jsx("i",{className:"bi bi-caret-up-fill"})," ",f.jsx("span",{className:"-m-2",children:Math.abs(t)})]}):f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-dash"})," ",f.jsx("span",{className:"-m-2",children:"0"})]}),EHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?f.jsxs("div",{className:"absolute inset-0 flex flex-col twr-team-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[f.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6 twr-team-ranking-row",children:[f.jsx("p",{className:"flex-1 text-center",children:"排名"}),f.jsx("p",{className:"flex-[5]",children:"隊伍"}),f.jsx("p",{className:"flex-1 text-center",children:"積分"}),f.jsx("p",{className:"flex-1 text-center",children:"與前名差距"}),f.jsx("p",{className:"flex-1 text-center",children:"半莊數"})]}),t.teams.map((n,i)=>f.jsxs("div",{className:"relative flex-1 flex items-center gap-6 overflow-hidden twr-team-ranking-row",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[f.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-48 opacity-10 -z-10"}),f.jsxs("p",{className:"flex-1 text-center space-x-2",children:[f.jsx("span",{children:id(n.ranking)}),f.jsx(SHe,{value:(n.rankingHistories.at(-1)??0)-(n.rankingHistories.at(-3)??0)})]}),f.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),f.jsx("p",{className:"flex-1 text-center",children:ro(n.point)}),f.jsx("p",{className:"flex-1 text-center",children:i>0?(t.teams[i-1].point-n.point).toFixed(1):"-"}),f.jsxs("p",{className:"flex-1 text-center",children:[n.matchCount,f.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id))]}):t.type==="chart"?f.jsxs("div",{className:"absolute inset-0 flex twr-chart gap-[1em] items-stretch","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-[3] twr-chart-chart",children:f.jsx(_He,{teams:t.teams})}),f.jsx("div",{className:"flex-1 flex flex-col twr-team-ranking","data-active":e===0,children:t.teams.map((n,i)=>f.jsxs("div",{className:"relative flex-1 flex items-center justify-between overflow-hidden twr-team-ranking-row px-2",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[f.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-5 -z-10"}),f.jsx("div",{children:f.jsx("p",{children:n.team.name})}),f.jsx("div",{children:ro(n.point)})]},n._id))})]}):t.type==="players"?f.jsxs("div",{className:"absolute inset-0 flex twr-player-ranking gap-[1em] items-stretch twr-player-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[f.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-player-ranking-row",children:"MVP"}),f.jsx("p",{className:"text-center twr-player-ranking-row",children:"積分最高選手"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestPointPlayers.map(({player:n,value:i,tieBreakValue:o},s)=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center twr-player-ranking-row",style:{background:`linear-gradient(to right, ${n.color}C0, transparent 105%)`,animationDelay:`${s*.05}s`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-25 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em]",children:[f.jsx("div",{className:"w-[2.2em]",children:id(s+1)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:n.playerNickname}),f.jsx("p",{className:"text-[.75em] leading-[1em]",children:n.playerName})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em] font-numeric",children:i.toFixed(1)}),f.jsxs("p",{className:"text-[.75em] leading-[1em] opacity-80",children:["(半莊數: ",o,")"]})]})]})]},n.playerId))})]}),f.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-[1em] twr-player-ranking-row",children:[f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"和了率"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPPlayers.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"平均打點"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPurePointPlayers.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"銃和率"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.lowestChuckPPlayers.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"最高得點"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestScoreMax.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(0)})})]})]},n.playerId))})]})]})]}):t.type==="heatmap"?f.jsx("div",{className:"absolute inset-0 flex gap-[1em] items-stretch twr-heatmap","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:f.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[f.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-heatmap-title",children:"點數熱力圖"}),f.jsxs("p",{className:"text-center mb-8 twr-heatmap-title",children:[f.jsx("span",{className:"bg-green-500 px-1",children:"綠色"}),"代表高分、",f.jsx("span",{className:"bg-red-500 px-1",children:"紅色"}),"代表低分"]}),f.jsxs("div",{className:"grid grid-cols-12 flex-1 text-center text-[.8em]",children:[t.teams.map((n,i)=>f.jsxs("div",{className:"h-20 twr-heatmap-cell",style:{animationDelay:i*.05+"s"},children:[f.jsx("div",{style:{background:`${n.team.color}80`},children:f.jsx("img",{src:n.team.squareLogoImage+"?w=128&h=128",alt:n.team.name,className:"h-24 w-24 my-2 inline-block"})}),f.jsx("p",{className:"py-2",style:{background:n.point>0?`rgba(23, 235, 0, ${n.point/t.highestTeamPoint})`:`rgba(235, 0, 0, ${n.point/t.lowestTeamPoint})`},children:ro(n.point)})]},n.team._id)),[0,1,2,3].map(n=>t.teams.map((i,o)=>{var s,a;return f.jsx("div",{className:"flex items-center justify-center twr-heatmap-cell",style:{background:typeof((s=t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics)==null?void 0:s.point)<"u"?t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point>0?`rgba(23, 235, 0, ${t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point/t.highestPlayerPoint})`:`rgba(235, 0, 0, ${t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point/t.lowestPlayerPoint})`:"tranparent",animationDelay:(o+n+1)*.05+"s"},children:ro((a=t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics)==null?void 0:a.point)},i.team._id)}))]})]})}):f.jsx(f.Fragment,{}),AJ=({params:{week:t}})=>{const[e,r]=E.useMemo(()=>["16/1","18/1"],[]),{data:n}=qa({queryKey:["tournament",cu],queryFn:()=>CO(cu).then(m=>({...m,teams:m.teams.sort((y,g)=>g.point-y.point)})),enabled:!!cu}),{data:i}=qa({queryKey:["tournament",cu,"players"],queryFn:()=>hye(cu),enabled:!!cu}),o=E.useMemo(()=>n?n.teams.reduce((m,{team:y})=>(m[y._id]=y,m),{}):{},[n]),[s,a]=E.useState(0),[l,c]=E.useState(0),[u,d]=E.useState(!1),h=E.useMemo(()=>{var g,b;if(!n||!i)return[{type:"empty",_id:"empty",subslide:0}];const m=i.filter(v=>v.player.statistics.matchCount>0),y=i.sort((v,x)=>{var S,_;return(((S=x.player.statistics)==null?void 0:S.point)??0)-(((_=v.player.statistics)==null?void 0:_.point)??0)});return[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:n.teams,subslide:1},{type:"chart",_id:"chart",teams:n.teams,subslide:1},{type:"players",_id:"players",highestPointPlayers:Qh(m,o,v=>v.point,v=>v.matchCount,"desc","asc"),highestRonPPlayers:Qh(m,o,v=>v.ronCount/v.roundCount,v=>v.roundCount,"desc","desc"),highestRonPurePointPlayers:Qh(m,o,v=>v.ronPureScoreAvg,v=>v.roundCount,"desc","desc"),lowestChuckPPlayers:Qh(m,o,v=>v.chuckCount/v.roundCount,v=>v.roundCount,"asc","desc"),highestScoreMax:Qh(m,o,v=>v.scoreMax,v=>v.roundCount,"desc","desc"),subslide:1},{type:"heatmap",_id:"heatmap",teams:n.teams,teamPlayersGroupedByTeamIds:wHe(y,v=>v.teamId),highestTeamPoint:n.teams[0].point,lowestTeamPoint:n.teams.at(-1).point,highestPlayerPoint:((g=y[0].player.statistics)==null?void 0:g.point)??0,lowestPlayerPoint:((b=y.at(-1).player.statistics)==null?void 0:b.point)??0,subslide:1}]},[i,o,n]),p=E.useCallback(()=>{if(u)return;const m=h[s];if(!m){a(1);return}m.type==="empty"?a(y=>y+1):l>=m.subslide-1?(a(y=>y+.5),d(!0),setTimeout(()=>{a(y=>Math.ceil(y)),c(0),d(!1)},1200)):(c(y=>y+.5),d(!0),setTimeout(()=>{c(y=>Math.ceil(y)),d(!1)},1200))},[u,s,h,l]);return n?f.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:p,children:f.jsxs("div",{className:"absolute inset-0 tournament-weekly-report text-white text-[36px] flex py-[1em] px-[1em] gap-x-[1em]",children:[f.jsxs("div",{className:"twr-title flex flex-col justify-between items-center",children:[f.jsx("div",{children:f.jsx("img",{src:n.logoUrl+"?w=280&h=280&auto=format",alt:n.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),f.jsxs("p",{style:{fontSize:"3em",writingMode:"vertical-rl",textOrientation:"upright"},children:["第",f.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:t}),"週結算"]}),f.jsxs("p",{style:{fontSize:"1.2em",writingMode:"vertical-rl",textOrientation:"upright"},children:[f.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:e}),"~",f.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:r})]})]}),f.jsx("div",{className:"flex-1 relative",children:h.map((m,y)=>f.jsx(EHe,{slide:m,status:s-y,subslide:l},m._id))})]})}):f.jsx(f.Fragment,{})};Math.ceil((new Date().getTime()-17049888e5)/1e3/60/60/24/7).toString();const MV=()=>f.jsx(AJ,{params:{week:"2"}});function AHe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(PQ,{params:r})}function CHe({players:t,rounds:e}){return f.jsx(YY,{width:"100%",height:"100%",children:f.jsxs(EJ,{data:e,children:[f.jsx(PS,{strokeDasharray:"3 3"}),f.jsx(rv,{tick:{fill:"white"},dataKey:"name"}),f.jsx(nv,{tick:{fill:"white"},width:120,allowDecimals:!1,tickCount:5}),f.jsx(Rn,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerEast"}),f.jsx(Rn,{type:"linear",stroke:t.playerEast.color,strokeWidth:8,isAnimationActive:!1,name:t.playerEast.name,dataKey:"playerEast"}),f.jsx(Rn,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerSouth"}),f.jsx(Rn,{type:"linear",stroke:t.playerSouth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerSouth.name,dataKey:"playerSouth"}),f.jsx(Rn,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerWest"}),f.jsx(Rn,{type:"linear",stroke:t.playerWest.color,strokeWidth:8,isAnimationActive:!1,name:t.playerWest.name,dataKey:"playerWest"}),f.jsx(Rn,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerNorth"}),f.jsx(Rn,{type:"linear",stroke:t.playerNorth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerNorth.name,dataKey:"playerNorth"})]})})}const PHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?f.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:["playerEast","playerSouth","playerWest","playerNorth"].map((n,i)=>f.jsxs("div",{className:Cr("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s",filter:t.teams[n].ranking!=="1"?"grayscale(1)":"grayscale(0)"},children:[f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${t.teams[n].color})`,opacity:.5}}),f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),f.jsxs("div",{className:Cr("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[f.jsx("img",{src:t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),f.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:t.teams[n].teamName}),f.jsx("h3",{className:"text-[1em] h-[2em] font-semibold text-center",children:t.teams[n].teamSecondaryName}),f.jsxs("h3",{className:"text-[1.5em] font-semibold text-center flex justify-between px-[.5em]",children:[f.jsx("span",{children:id(t.teams[n].ranking)}),f.jsx("span",{children:ro(t.teams[n].point)})]})]})]},n))})]}):t.type==="players"?f.jsxs("div",{className:"absolute px-24 pb-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex-[3] flex flex-col items-stretch",children:[f.jsxs("div",{className:Cr("flex gap-x-[1em] pl-[1em] mb-[.5em] items-end",{"mi-teams-in":e===0,"mi-teams-out":e>0}),children:[f.jsxs("div",{className:"flex-[5] space-x-[1.5em] text-[1.1em]",children:[f.jsxs("span",{children:[f.jsx("span",{className:"text-[1.5em]",children:t.roundCount})," 總局數"]}),f.jsxs("span",{className:"opacity-80",children:["（"," ",f.jsx("span",{className:"text-[1.5em]",children:t.exhaustedRoundCount})," ","流局數 ）"]})]}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"分數"}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"立直次數"}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"和了次數"}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"放銃次數"})]}),t.teamPlayers.map((n,i)=>f.jsxs("div",{className:Cr("relative overflow-hidden flex-1",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s"},children:[f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to left, transparent, ${n.color})`,opacity:.5}},n.teamName),f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${n.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),f.jsxs("div",{className:Cr("absolute inset-0 flex gap-x-[1em] items-center pl-[1em]",{"mi-teams-team-out":e>=0&&r>0}),children:[f.jsxs("div",{className:"text-left flex-[5]",children:[f.jsx("h3",{className:"text-[1.5em] font-semibold",children:n.playerFullname}),f.jsx("h3",{className:"text-[.8em] font-semibold",children:n.teamFullname})]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:kv(n.result.score)}),f.jsx("p",{children:ro(n.result.point)})]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("span",{className:"text-[1.5em]",children:kv(n.result.riichiCount)}),"回"]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("span",{className:"text-[1.5em]",children:kv(n.result.ronCount)}),"回"]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("span",{className:"text-[1.5em]",children:kv(n.result.chuckCount)}),"回"]})]})]},n.teamName))]})]}):t.type==="chart"?f.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex-[3] flex items-stretch gap-x-[1em]",children:[f.jsx("div",{className:Cr("flex-[3]",{"mi-chart-chart-in":e===0,"mi-chart-chart-out":e>0}),children:f.jsx(CHe,{rounds:t.rounds,players:t.players})}),f.jsx("div",{className:"flex-1 flex flex-col pb-[1em]",children:[0,1,2,3].map(n=>f.jsxs("div",{className:Cr("relative overflow-hidden flex-1 pl-[.5em] flex flex-col justify-center",{"mi-chart-player-in":e===0,"mi-chart-player-out":e>0}),style:{background:`linear-gradient(to left, transparent, ${t.teamPlayers[n].color}C0)`,animationDelay:e===0?n*.25+"s":"0s"},children:[f.jsx("img",{src:t.teamPlayers[n].teamLogoImageUrl+"?w=320&h=320",alt:t.teamPlayers[n].teamId,className:"absolute left-0 opacity-10 -z-10"}),f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].playerNickname}),f.jsx("p",{className:"text-[.75em]",children:t.teamPlayers[n].teamName})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].result.score}),f.jsx("p",{className:"text-[.75em]",children:ro(t.teamPlayers[n].result.point)})]})]})]}))})]})]}):t.type==="ranking"?f.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:Cr("flex-[5] flex flex-col",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),children:[f.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6",children:[f.jsx("p",{className:"flex-1 text-center",children:"排名"}),f.jsx("p",{className:"flex-[5]",children:"隊伍"}),f.jsx("p",{className:"flex-1 text-right",children:"積分"}),f.jsx("p",{className:"flex-1 text-right",children:"與前名差距"}),f.jsx("p",{className:"flex-1 text-right",children:"半莊數"})]}),t.teams.map((n,i)=>{var o,s,a,l;return f.jsxs("div",{className:Cr("relative flex-1 flex items-center gap-6 overflow-hidden",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`,opacity:n.newResult?1:.3},children:[f.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-25 -z-10"}),f.jsxs("div",{className:"absolute left-[.5em]",children:[n.ranking>i+1&&f.jsx("span",{children:f.jsx("i",{className:"bi bi-caret-up-fill text-green-500"})}),n.ranking<i+1&&f.jsx("span",{children:f.jsx("i",{className:"bi bi-caret-down-fill text-red-500"})})]}),f.jsx("p",{className:"flex-1 text-center space-x-1",children:f.jsx("span",{children:id(i+1)})}),f.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),f.jsx("p",{className:Cr("flex-1 text-right",{"text-green-500":n.newResult&&n.newResult.point>n.point,"text-red-500":n.newResult&&n.newResult.point<n.point}),children:ro(((o=n.newResult)==null?void 0:o.point)||n.point)}),f.jsx("p",{className:"flex-1 text-right",children:i>0?((((s=t.teams[i-1].newResult)==null?void 0:s.point)||t.teams[i-1].point)-(((a=n.newResult)==null?void 0:a.point)||n.point)).toFixed(1):"-"}),f.jsxs("p",{className:"flex-1 text-right",children:[((l=n.newResult)==null?void 0:l.matchCount)||n.matchCount,f.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id)})]})]}):f.jsx(f.Fragment,{}),CJ=({params:{matchId:t}})=>{const{match:e,matchRounds:r}=es(t),{data:n}=uj(t),{data:i}=qa({queryKey:["tournament",n==null?void 0:n.tournament._id],queryFn:()=>CO(n==null?void 0:n.tournament._id).then(p=>({...p,teams:p.teams.sort((m,y)=>y.point-m.point)})),enabled:!!(n!=null&&n.tournament._id)}),o=E.useMemo(()=>{var S,_,w,A,C,T,P,I,O,N,j,L,U,V;if(!e||!r||!n||!i)return[{type:"empty",_id:"empty",subslide:0}];const p=LG(Object.values(r)),m=[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:{playerEast:{...n.playerEast,point:p.result.playerEast.point,ranking:p.result.playerEast.ranking},playerSouth:{...n.playerSouth,point:p.result.playerSouth.point,ranking:p.result.playerSouth.ranking},playerWest:{...n.playerWest,point:p.result.playerWest.point,ranking:p.result.playerWest.ranking},playerNorth:{...n.playerNorth,point:p.result.playerNorth.point,ranking:p.result.playerNorth.ranking}},subslide:1}],y={playerEast:{score:((S=p.result.playerEast)==null?void 0:S.score)??25e3,point:((_=p.result.playerEast)==null?void 0:_.point)??0,ranking:((w=p.result.playerEast)==null?void 0:w.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerSouth:{score:((A=p.result.playerSouth)==null?void 0:A.score)??25e3,point:((C=p.result.playerSouth)==null?void 0:C.point)??0,ranking:((T=p.result.playerSouth)==null?void 0:T.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerWest:{score:((P=p.result.playerWest)==null?void 0:P.score)??25e3,point:((I=p.result.playerWest)==null?void 0:I.point)??0,ranking:((O=p.result.playerWest)==null?void 0:O.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerNorth:{score:((N=p.result.playerNorth)==null?void 0:N.score)??25e3,point:((j=p.result.playerNorth)==null?void 0:j.point)??0,ranking:((L=p.result.playerNorth)==null?void 0:L.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]}};for(const R of p.rounds)y.playerEast.scores.push(R.playerEast.afterScore),y.playerSouth.scores.push(R.playerSouth.afterScore),y.playerWest.scores.push(R.playerWest.afterScore),y.playerNorth.scores.push(R.playerNorth.afterScore),R.playerEast.status==="isRiichied"&&(y.playerEast.riichiCount+=1),R.playerSouth.status==="isRiichied"&&(y.playerSouth.riichiCount+=1),R.playerWest.status==="isRiichied"&&(y.playerWest.riichiCount+=1),R.playerNorth.status==="isRiichied"&&(y.playerNorth.riichiCount+=1),(R.type==="ron"||R.type==="tsumo")&&(R.playerEast.type==="win"&&(y.playerEast.ronCount+=1),R.playerSouth.type==="win"&&(y.playerSouth.ronCount+=1),R.playerWest.type==="win"&&(y.playerWest.ronCount+=1),R.playerNorth.type==="win"&&(y.playerNorth.ronCount+=1)),R.type==="ron"&&(R.playerEast.type==="lose"&&(y.playerEast.chuckCount+=1),R.playerSouth.type==="lose"&&(y.playerSouth.chuckCount+=1),R.playerWest.type==="lose"&&(y.playerWest.chuckCount+=1),R.playerNorth.type==="lose"&&(y.playerNorth.chuckCount+=1));const g=[{...n.playerEast,result:y.playerEast},{...n.playerSouth,result:y.playerSouth},{...n.playerWest,result:y.playerWest},{...n.playerNorth,result:y.playerNorth}].sort((R,F)=>F.result.score-R.result.score);m.push({type:"players",_id:"players",teamPlayers:g,roundCount:((U=p.rounds)==null?void 0:U.length)??0,exhaustedRoundCount:((V=p.rounds)==null?void 0:V.filter(R=>R.type==="exhausted").length)??0,subslide:1});const b=p.rounds.findIndex(R=>R.code.startsWith("5."));m.push({type:"chart",_id:"chart",rounds:[{name:"東",playerEast:25e3,playerSouth:25e3,playerWest:25e3,playerNorth:25e3},...p.rounds.map((R,F)=>({name:F===b?"南":"",playerEast:R.playerEast.afterScore,playerSouth:R.playerSouth.afterScore,playerWest:R.playerWest.afterScore,playerNorth:R.playerNorth.afterScore}))],players:{playerEast:{name:n.playerEast.playerNickname,color:n.playerEast.color},playerSouth:{name:n.playerSouth.playerNickname,color:n.playerSouth.color},playerWest:{name:n.playerWest.playerNickname,color:n.playerWest.color},playerNorth:{name:n.playerNorth.playerNickname,color:n.playerNorth.color}},teamPlayers:g,subslide:1});const v=["playerEast","playerSouth","playerWest","playerNorth"],x=[...i.teams].map(R=>{for(const F of v)if(R.team._id===n[F].teamId)return{...R,newResult:{point:R.point+p.result[F].point+p.result[F].penalty,matchCount:R.matchCount+1}};return R});return m.push({_id:"ranking",type:"ranking",teams:x.sort((R,F)=>{var z,le;return(((z=F.newResult)==null?void 0:z.point)||F.point)-(((le=R.newResult)==null?void 0:le.point)||R.point)}),subslide:1}),m},[e,n,r,i]),[s,a]=E.useState(0),[l,c]=E.useState(0),[u,d]=E.useState(!1),h=E.useCallback(()=>{if(u)return;const p=o[s];if(!p){a(1);return}p.type==="empty"?a(m=>m+1):l>=p.subslide-1?(a(m=>m+.5),d(!0),setTimeout(()=>{a(m=>Math.ceil(m)),c(0),d(!1)},1200)):(c(m=>m+.5),d(!0),setTimeout(()=>{c(m=>Math.ceil(m)),d(!1)},1200))},[u,s,o,l]);return!e||!r||!n||!i?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"match-introduction fixed inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:h,children:[f.jsx("div",{className:"absolute py-16 px-24 inset-0",children:f.jsxs("div",{className:"flex items-end gap-x-[0.25em] mi-title-in",children:[f.jsx("div",{children:f.jsx("img",{src:n.tournament.logoUrl+"?w=280&h=280&auto=format",alt:n.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:n.tournament.name}),f.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:n.nameAlt})]}),f.jsx("div",{children:f.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:"對局結果"})})]})}),o.map((p,m)=>f.jsx(PHe,{slide:p,status:s-m,subslide:l},p._id))]})};function THe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(CJ,{params:r})}const IHe=new Yhe({defaultOptions:{queries:{retry:2,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,staleTime:1/0}}});uC.createRoot(document.getElementById("root")).render(f.jsx(k.StrictMode,{children:f.jsx(tpe,{client:IHe,children:f.jsx(Rhe,{children:f.jsx(Fye,{children:f.jsxs(Mte,{children:[f.jsx(st,{path:"/",component:bye}),f.jsx(st,{path:"/create-match",component:PPe}),f.jsx(st,{path:"/match/:matchId",component:Oye}),f.jsx(st,{path:"/match/:matchId/obs",component:BG}),f.jsx(st,{path:"/match/:matchId/overlay",component:TQ}),f.jsx(st,{path:"/match/:matchId/control",component:PH}),f.jsx(st,{path:"/match/:matchId/export",component:EQ}),f.jsx(st,{path:"/match/:matchId/forecast",component:AQ}),f.jsx(st,{path:"/match/:matchId/introduction",component:PQ}),f.jsx(st,{path:"/match/:matchId/summary",component:CJ}),f.jsx(st,{path:"/match/:matchId/nameplates",component:DPe}),f.jsx(st,{path:"/match/:matchId/stat",component:SQ}),f.jsx(st,{path:"/obs/:obsRoomId",component:NPe}),f.jsx(st,{path:"/obs/:obsRoomId/overlay",component:zPe}),f.jsx(st,{path:"/obs/:obsRoomId/control",component:$Pe}),f.jsx(st,{path:"/obs/:obsRoomId/export",component:GPe}),f.jsx(st,{path:"/obs/:obsRoomId/forecast",component:BPe}),f.jsx(st,{path:"/obs/:obsRoomId/introduction",component:AHe}),f.jsx(st,{path:"/obs/:obsRoomId/summary",component:THe}),f.jsx(st,{path:"/obs/:obsRoomId/weekly-summary",component:MV}),f.jsx(st,{path:"/obs/:obsRoomId/end",component:UPe}),f.jsx(st,{path:"/obs/:obsRoomId/score",component:kPe}),f.jsx(st,{path:"/obs/:obsRoomId/chart",component:RPe}),f.jsx(st,{path:"/obs/:obsRoomId/carousel",component:jPe}),f.jsx(st,{path:"/obs/:obsRoomId/stat",component:MPe}),f.jsx(st,{path:"/players",component:wPe}),f.jsx(st,{path:"/teams",component:IPe}),f.jsx(st,{path:"/matches",component:OPe}),f.jsx(st,{path:"/weekly-summary/",component:MV}),f.jsx(st,{path:"/weekly-summary/:week",component:AJ})]})})})})}));Bte();export{Ol as c,ot as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
