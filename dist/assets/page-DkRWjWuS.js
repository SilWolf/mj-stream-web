import{P as S,r as c,j as e,Q as j,d as w,S as o,v as k}from"./index-0LaFy2cp.js";const _={"match-introduction":"_match-introduction_d92b1_239"},I=({team:a,player:s,fadeIn:i,fadeOut:d,delay:t})=>{const n=k(a.color);return e.jsxs("div",{className:j("relative aspect-18/25 rounded-[1em] overflow-hidden",{"mi-team-player-in":i,"mi-team-player-out":d}),style:{background:`linear-gradient(180deg, ${a.color}, ${n})`,animationDelay:t+"s"},children:[e.jsx("div",{className:"absolute inset-0",style:{background:`url(${a.squareLogoImage+"?w=500&h=500&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.2}}),e.jsx("img",{className:"relative z-10 block mx-auto w-full",src:s.portraitImage+"?h=1000&w=720&auto=format&fit=crop&crop=top",alt:s.name}),e.jsx("div",{className:"absolute z-20 bottom-0 left-0 right-0 text-center py-[0.25em]",style:{background:"linear-gradient(to top, #00000090 80%, transparent"},children:e.jsx("div",{children:e.jsx("p",{className:"text-[1.5em]",children:s.name})})})]},s.name)},T=({slide:a,status:s,subslide:i})=>{var d,t,n,h,m,u,x,N,p,f;return a.type==="players"?e.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:s>=0&&s<1?1:0},children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex-2 grid grid-cols-4 items-center",children:a.teamAndPlayers.map(({team:g,player:r},b)=>e.jsxs("div",{className:j("relative h-full overflow-hidden",{"mi-teams-in":s===0,"mi-teams-out":s>0}),style:{animationDelay:s===0?b*.25+"s":"0s"},children:[e.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${g.color})`,opacity:.5}},g._id),e.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${g.squareLogoImage+"?w=720&h=1000&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),e.jsxs("div",{className:j("absolute inset-0",{"mi-teams-team-out":s>=0&&i>0}),children:[e.jsx("img",{src:r.portraitImage+"?w=720&h=1000&auto=format&fit=crop&crop=top",className:"aspect-[18/25] w-full",alt:""}),e.jsx("h3",{className:"text-[1.5em] font-semibold text-center text-[#78012c]",children:r.name})]}),e.jsxs("div",{className:j("absolute inset-0 opacity-0",{"mi-teams-player-in":s>=0&&i>=1,"mi-teams-player-out":s>0}),style:{animationDelay:s===0?b*.25+"s":"0s"},children:[e.jsx("img",{src:r.portraitImage+"?w=720&h=1000&auto=format",className:"aspect-18/25 w-full",alt:""}),e.jsxs("div",{className:"font-semibold text-center",children:[e.jsx("p",{className:"text-[1em]",children:r.nickname}),e.jsx("p",{className:"text-[.8em]",children:r.name})]})]})]},r._id))})]}):a.type==="player"?e.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:s>=0&&s<1?1:0},children:[e.jsxs("div",{className:j("flex-1 text-right mb-[.5em]",{"mi-team-team-in":s===0,"mi-team-team-out":s>0}),children:[e.jsx("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:e.jsxs("div",{className:"text-left space-y-[.5em]",children:[e.jsx("div",{className:"flex justify-start gap-x-[1em]"}),e.jsx("div",{className:"flex justify-start gap-x-[1em]"})]})}),e.jsx("h3",{className:"inline-block font-semibold text-right text-[1.5em]"})]}),e.jsx("div",{className:"flex-5 relative",children:e.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:s>=0&&s<1?1:0},children:[e.jsx(I,{team:a.team,player:a.focusPlayer,fadeIn:s===0,fadeOut:s>0,delay:0}),e.jsx("div",{className:"col-span-3 text-[#78012c]",children:e.jsxs("div",{className:j({"mi-team-activePlayerStat-in":s===0,"mi-team-activePlayerStat-out":s>0}),children:[e.jsxs("div",{className:"flex justify-between mb-[1em] text-[#78012c]",children:[e.jsxs("p",{className:"text-[2em] flex items-center",children:[e.jsx("span",{children:"個人總分"}),e.jsx("span",{className:"font-numeric",children:w((d=a.focusPlayer.statistics)==null?void 0:d.point)})]}),e.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",e.jsx("span",{className:"font-numeric",children:((t=a.focusPlayer.statistics)==null?void 0:t.matchCount)??"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),e.jsx("p",{className:"flex items-center",children:e.jsx("span",{className:"font-numeric",children:o((n=a.focusPlayer.statistics)==null?void 0:n.nonFourthP)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"連對率"}),e.jsx("p",{className:"flex items-center",children:e.jsx("span",{className:"font-numeric",children:o((h=a.focusPlayer.statistics)==null?void 0:h.firstAndSecondP)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"立直率"}),e.jsx("p",{className:"flex items-center",children:e.jsx("span",{className:"font-numeric",children:o((m=a.focusPlayer.statistics)==null?void 0:m.riichiP)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"和了率"}),e.jsx("p",{className:"flex items-center",children:e.jsx("span",{className:"font-numeric",children:o((u=a.focusPlayer.statistics)==null?void 0:u.ronP)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"銃和率"}),e.jsx("p",{className:"flex items-center",children:e.jsx("span",{className:"font-numeric",children:o((x=a.focusPlayer.statistics)==null?void 0:x.chuckP)})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[.9em]",children:"副露率"}),e.jsx("p",{className:"flex items-center",children:e.jsx("span",{className:"font-numeric",children:o((N=a.focusPlayer.statistics)==null?void 0:N.revealP)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.8em]",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[.9em]",children:"和了平均打點"}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-numeric",children:o((p=a.focusPlayer.statistics)==null?void 0:p.ronPureScoreAvg)})})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-[.9em]",children:"銃和平均打點"}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-numeric",children:o((f=a.focusPlayer.statistics)==null?void 0:f.chuckPureScoreAvg)})})]})]})]})})]})})]}):e.jsx(e.Fragment,{})},E=({params:{matchId:a},forwardFlag:s,resetFlag:i,disableClick:d})=>{const{data:t}=S(a),n=c.useMemo(()=>t?[{type:"players",_id:"players",teamAndPlayers:[{team:t.playerEastTeam,player:t.playerEast},{team:t.playerSouthTeam,player:t.playerSouth},{team:t.playerWestTeam,player:t.playerWest},{team:t.playerNorthTeam,player:t.playerNorth}],subslide:1},{_id:"player_playerEast",type:"player",team:t.playerEastTeam,focusPlayer:t.playerEast,subslide:1},{_id:"player_playerSouth",type:"player",team:t.playerSouthTeam,focusPlayer:t.playerSouth,subslide:1},{_id:"player_playerWest",type:"player",team:t.playerWestTeam,focusPlayer:t.playerWest,subslide:1},{_id:"player_playerNorth",type:"player",team:t.playerNorthTeam,focusPlayer:t.playerNorth,subslide:1}]:[{type:"empty",_id:"empty",subslide:0}],[t]),[h,m]=c.useState(0),[u,x]=c.useState(0),[N,p]=c.useState(!1),[f,g]=c.useState(s??0),[r,b]=c.useState(i??0),v=c.useCallback(()=>{if(N)return;const y=n[h];if(!y){m(0);return}y.type==="empty"?m(l=>l+1):u>=y.subslide-1?(m(l=>l+.5),p(!0),setTimeout(()=>{m(l=>Math.ceil(l)),x(0),p(!1)},1200)):(x(l=>l+.5),p(!0),setTimeout(()=>{x(l=>Math.ceil(l)),p(!1)},1200))},[N,h,n,u]),P=c.useCallback(()=>{d||v()},[d,v]);return c.useEffect(()=>{typeof s<"u"&&s!==f&&(v(),g(s))},[s,v,f]),c.useEffect(()=>{typeof i<"u"&&i!==r&&(m(0),x(0),b(i))},[s,v,f,r,i]),t?e.jsxs("div",{className:`absolute inset-0 text-[#ec276e] text-[36px] -z-50 overflow-hidden ${_["match-introduction"]}`,style:{background:"linear-gradient(to bottom, rgb(255, 217, 227), rgb(255, 192, 203))"},onClick:P,children:[e.jsx("div",{className:"absolute py-16 px-24 inset-0",children:e.jsxs("div",{className:"flex gap-x-[0.25em] mi-title-in",children:[e.jsx("div",{children:e.jsx("img",{src:t.tournament.logoUrl+"?w=280&h=280&auto=format",alt:t.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:t.tournament.name}),e.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:t.name})]})]})}),n.map((y,l)=>e.jsx(T,{slide:y,status:h-l,subslide:u},y._id))]}):e.jsx(e.Fragment,{})};export{E as default};
