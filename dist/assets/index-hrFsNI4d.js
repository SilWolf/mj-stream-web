var FS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var D=(t,e,r)=>(FS(t,e,"read from private field"),r?r.call(t):e.get(t)),he=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},le=(t,e,r,n)=>(FS(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var fv=(t,e,r,n)=>({set _(i){le(t,e,i,r)},get _(){return D(t,e,n)}}),Re=(t,e,r)=>(FS(t,e,"access private method"),r);function VJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ct(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function WJ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var e5={exports:{}},dw={},t5={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng=Symbol.for("react.element"),zJ=Symbol.for("react.portal"),GJ=Symbol.for("react.fragment"),qJ=Symbol.for("react.strict_mode"),HJ=Symbol.for("react.profiler"),KJ=Symbol.for("react.provider"),QJ=Symbol.for("react.context"),YJ=Symbol.for("react.forward_ref"),XJ=Symbol.for("react.suspense"),JJ=Symbol.for("react.memo"),ZJ=Symbol.for("react.lazy"),w2=Symbol.iterator;function eZ(t){return t===null||typeof t!="object"?null:(t=w2&&t[w2]||t["@@iterator"],typeof t=="function"?t:null)}var r5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n5=Object.assign,i5={};function Fd(t,e,r){this.props=t,this.context=e,this.refs=i5,this.updater=r||r5}Fd.prototype.isReactComponent={};Fd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function o5(){}o5.prototype=Fd.prototype;function yN(t,e,r){this.props=t,this.context=e,this.refs=i5,this.updater=r||r5}var gN=yN.prototype=new o5;gN.constructor=yN;n5(gN,Fd.prototype);gN.isPureReactComponent=!0;var S2=Array.isArray,s5=Object.prototype.hasOwnProperty,vN={current:null},a5={key:!0,ref:!0,__self:!0,__source:!0};function l5(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)s5.call(e,n)&&!a5.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:ng,type:t,key:o,ref:s,props:i,_owner:vN.current}}function tZ(t,e){return{$$typeof:ng,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bN(t){return typeof t=="object"&&t!==null&&t.$$typeof===ng}function rZ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var E2=/\/+/g;function LS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rZ(""+t.key):e.toString(36)}function b0(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ng:case zJ:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+LS(s,0):n,S2(i)?(r="",t!=null&&(r=t.replace(E2,"$&/")+"/"),b0(i,e,r,"",function(c){return c})):i!=null&&(bN(i)&&(i=tZ(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(E2,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",S2(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+LS(o,a);s+=b0(o,e,r,l,i)}else if(l=eZ(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+LS(o,a++),s+=b0(o,e,r,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function dv(t,e,r){if(t==null)return t;var n=[],i=0;return b0(t,n,"","",function(o){return e.call(r,o,i++)}),n}function nZ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var In={current:null},x0={transition:null},iZ={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:x0,ReactCurrentOwner:vN};qe.Children={map:dv,forEach:function(t,e,r){dv(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return dv(t,function(){e++}),e},toArray:function(t){return dv(t,function(e){return e})||[]},only:function(t){if(!bN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=Fd;qe.Fragment=GJ;qe.Profiler=HJ;qe.PureComponent=yN;qe.StrictMode=qJ;qe.Suspense=XJ;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iZ;qe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=n5({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=vN.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)s5.call(e,l)&&!a5.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:ng,type:t.type,key:i,ref:o,props:n,_owner:s}};qe.createContext=function(t){return t={$$typeof:QJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KJ,_context:t},t.Consumer=t};qe.createElement=l5;qe.createFactory=function(t){var e=l5.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:YJ,render:t}};qe.isValidElement=bN;qe.lazy=function(t){return{$$typeof:ZJ,_payload:{_status:-1,_result:t},_init:nZ}};qe.memo=function(t,e){return{$$typeof:JJ,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=x0.transition;x0.transition={};try{t()}finally{x0.transition=e}};qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qe.useCallback=function(t,e){return In.current.useCallback(t,e)};qe.useContext=function(t){return In.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return In.current.useDeferredValue(t)};qe.useEffect=function(t,e){return In.current.useEffect(t,e)};qe.useId=function(){return In.current.useId()};qe.useImperativeHandle=function(t,e,r){return In.current.useImperativeHandle(t,e,r)};qe.useInsertionEffect=function(t,e){return In.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return In.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return In.current.useMemo(t,e)};qe.useReducer=function(t,e,r){return In.current.useReducer(t,e,r)};qe.useRef=function(t){return In.current.useRef(t)};qe.useState=function(t){return In.current.useState(t)};qe.useSyncExternalStore=function(t,e,r){return In.current.useSyncExternalStore(t,e,r)};qe.useTransition=function(){return In.current.useTransition()};qe.version="18.2.0";t5.exports=qe;var E=t5.exports;const O=ct(E),oZ=VJ({__proto__:null,default:O},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sZ=E,aZ=Symbol.for("react.element"),lZ=Symbol.for("react.fragment"),cZ=Object.prototype.hasOwnProperty,uZ=sZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fZ={key:!0,ref:!0,__self:!0,__source:!0};function c5(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)cZ.call(e,n)&&!fZ.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:aZ,type:t,key:o,ref:s,props:i,_owner:uZ.current}}dw.Fragment=lZ;dw.jsx=c5;dw.jsxs=c5;e5.exports=dw;var u=e5.exports,vC={},u5={exports:{}},ui={},f5={exports:{}},d5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var z=M.length;M.push(B);e:for(;0<z;){var ae=z-1>>>1,te=M[ae];if(0<i(te,B))M[ae]=B,M[z]=te,z=ae;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var B=M[0],z=M.pop();if(z!==B){M[0]=z;e:for(var ae=0,te=M.length,ge=te>>>1;ae<ge;){var Le=2*(ae+1)-1,Qe=M[Le],fe=Le+1,ut=M[fe];if(0>i(Qe,z))fe<te&&0>i(ut,Qe)?(M[ae]=ut,M[fe]=z,ae=fe):(M[ae]=Qe,M[Le]=z,ae=Le);else if(fe<te&&0>i(ut,z))M[ae]=ut,M[fe]=z,ae=fe;else break e}}return B}function i(M,B){var z=M.sortIndex-B.sortIndex;return z!==0?z:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],f=1,d=null,h=3,p=!1,m=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var B=r(c);B!==null;){if(B.callback===null)n(c);else if(B.startTime<=M)n(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=r(c)}}function S(M){if(y=!1,x(M),!m)if(r(l)!==null)m=!0,V(_);else{var B=r(c);B!==null&&F(S,B.startTime-M)}}function _(M,B){m=!1,y&&(y=!1,b(C),C=-1),p=!0;var z=h;try{for(x(B),d=r(l);d!==null&&(!(d.expirationTime>B)||M&&!I());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,h=d.priorityLevel;var te=ae(d.expirationTime<=B);B=t.unstable_now(),typeof te=="function"?d.callback=te:d===r(l)&&n(l),x(B)}else n(l);d=r(l)}if(d!==null)var ge=!0;else{var Le=r(c);Le!==null&&F(S,Le.startTime-B),ge=!1}return ge}finally{d=null,h=z,p=!1}}var w=!1,A=null,C=-1,T=5,P=-1;function I(){return!(t.unstable_now()-P<T)}function k(){if(A!==null){var M=t.unstable_now();P=M;var B=!0;try{B=A(!0,M)}finally{B?N():(w=!1,A=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(k)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,L=j.port2;j.port1.onmessage=k,N=function(){L.postMessage(null)}}else N=function(){g(k,0)};function V(M){A=M,w||(w=!0,N())}function F(M,B){C=g(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,V(_))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var z=h;h=B;try{return M()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=h;h=M;try{return B()}finally{h=z}},t.unstable_scheduleCallback=function(M,B,z){var ae=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ae+z:ae):z=ae,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,M={id:f++,callback:B,priorityLevel:M,startTime:z,expirationTime:te,sortIndex:-1},z>ae?(M.sortIndex=z,e(c,M),r(l)===null&&M===r(c)&&(y?(b(C),C=-1):y=!0,F(S,z-ae))):(M.sortIndex=te,e(l,M),m||p||(m=!0,V(_))),M},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(M){var B=h;return function(){var z=h;h=B;try{return M.apply(this,arguments)}finally{h=z}}}})(d5);f5.exports=d5;var dZ=f5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h5=E,ai=dZ;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p5=new Set,sm={};function Mc(t,e){Df(t,e),Df(t+"Capture",e)}function Df(t,e){for(sm[t]=e,t=0;t<e.length;t++)p5.add(e[t])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bC=Object.prototype.hasOwnProperty,hZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A2={},C2={};function pZ(t){return bC.call(C2,t)?!0:bC.call(A2,t)?!1:hZ.test(t)?C2[t]=!0:(A2[t]=!0,!1)}function mZ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yZ(t,e,r,n){if(e===null||typeof e>"u"||mZ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var xN=/[\-:]([a-z])/g;function _N(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xN,_N);Jr[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xN,_N);Jr[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xN,_N);Jr[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function wN(t,e,r,n){var i=Jr.hasOwnProperty(e)?Jr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yZ(e,r,i,n)&&(r=null),n||i===null?pZ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var $s=h5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hv=Symbol.for("react.element"),Au=Symbol.for("react.portal"),Cu=Symbol.for("react.fragment"),SN=Symbol.for("react.strict_mode"),xC=Symbol.for("react.profiler"),m5=Symbol.for("react.provider"),y5=Symbol.for("react.context"),EN=Symbol.for("react.forward_ref"),_C=Symbol.for("react.suspense"),wC=Symbol.for("react.suspense_list"),AN=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),g5=Symbol.for("react.offscreen"),P2=Symbol.iterator;function xh(t){return t===null||typeof t!="object"?null:(t=P2&&t[P2]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,BS;function rp(t){if(BS===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);BS=e&&e[1]||""}return`
`+BS+t}var US=!1;function VS(t,e){if(!t||US)return"";US=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{US=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?rp(t):""}function gZ(t){switch(t.tag){case 5:return rp(t.type);case 16:return rp("Lazy");case 13:return rp("Suspense");case 19:return rp("SuspenseList");case 0:case 2:case 15:return t=VS(t.type,!1),t;case 11:return t=VS(t.type.render,!1),t;case 1:return t=VS(t.type,!0),t;default:return""}}function SC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cu:return"Fragment";case Au:return"Portal";case xC:return"Profiler";case SN:return"StrictMode";case _C:return"Suspense";case wC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y5:return(t.displayName||"Context")+".Consumer";case m5:return(t._context.displayName||"Context")+".Provider";case EN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case AN:return e=t.displayName||null,e!==null?e:SC(t.type)||"Memo";case Xs:e=t._payload,t=t._init;try{return SC(t(e))}catch{}}return null}function vZ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return SC(e);case 8:return e===SN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Va(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function v5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bZ(t){var e=v5(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pv(t){t._valueTracker||(t._valueTracker=bZ(t))}function b5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=v5(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ub(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function EC(t,e){var r=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function T2(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Va(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x5(t,e){e=e.checked,e!=null&&wN(t,"checked",e,!1)}function AC(t,e){x5(t,e);var r=Va(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?CC(t,e.type,r):e.hasOwnProperty("defaultValue")&&CC(t,e.type,Va(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I2(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function CC(t,e,r){(e!=="number"||ub(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var np=Array.isArray;function Qu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Va(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function PC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N2(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(X(92));if(np(r)){if(1<r.length)throw Error(X(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Va(r)}}function _5(t,e){var r=Va(e.value),n=Va(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function k2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function w5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mv,S5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mv=mv||document.createElement("div"),mv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function am(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Sp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xZ=["Webkit","ms","Moz","O"];Object.keys(Sp).forEach(function(t){xZ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sp[e]=Sp[t]})});function E5(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Sp.hasOwnProperty(t)&&Sp[t]?(""+e).trim():e+"px"}function A5(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=E5(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var _Z=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IC(t,e){if(e){if(_Z[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function NC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kC=null;function CN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var OC=null,Yu=null,Xu=null;function O2(t){if(t=sg(t)){if(typeof OC!="function")throw Error(X(280));var e=t.stateNode;e&&(e=gw(e),OC(t.stateNode,t.type,e))}}function C5(t){Yu?Xu?Xu.push(t):Xu=[t]:Yu=t}function P5(){if(Yu){var t=Yu,e=Xu;if(Xu=Yu=null,O2(t),e)for(t=0;t<e.length;t++)O2(e[t])}}function T5(t,e){return t(e)}function I5(){}var WS=!1;function N5(t,e,r){if(WS)return t(e,r);WS=!0;try{return T5(t,e,r)}finally{WS=!1,(Yu!==null||Xu!==null)&&(I5(),P5())}}function lm(t,e){var r=t.stateNode;if(r===null)return null;var n=gw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(X(231,e,typeof r));return r}var jC=!1;if(Es)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){jC=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{jC=!1}function wZ(t,e,r,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(f){this.onError(f)}}var Ep=!1,fb=null,db=!1,RC=null,SZ={onError:function(t){Ep=!0,fb=t}};function EZ(t,e,r,n,i,o,s,a,l){Ep=!1,fb=null,wZ.apply(SZ,arguments)}function AZ(t,e,r,n,i,o,s,a,l){if(EZ.apply(this,arguments),Ep){if(Ep){var c=fb;Ep=!1,fb=null}else throw Error(X(198));db||(db=!0,RC=c)}}function Fc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function k5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function j2(t){if(Fc(t)!==t)throw Error(X(188))}function CZ(t){var e=t.alternate;if(!e){if(e=Fc(t),e===null)throw Error(X(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return j2(i),t;if(o===n)return j2(i),e;o=o.sibling}throw Error(X(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?t:e}function O5(t){return t=CZ(t),t!==null?j5(t):null}function j5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j5(t);if(e!==null)return e;t=t.sibling}return null}var R5=ai.unstable_scheduleCallback,R2=ai.unstable_cancelCallback,PZ=ai.unstable_shouldYield,TZ=ai.unstable_requestPaint,Xt=ai.unstable_now,IZ=ai.unstable_getCurrentPriorityLevel,PN=ai.unstable_ImmediatePriority,$5=ai.unstable_UserBlockingPriority,hb=ai.unstable_NormalPriority,NZ=ai.unstable_LowPriority,D5=ai.unstable_IdlePriority,hw=null,Lo=null;function kZ(t){if(Lo&&typeof Lo.onCommitFiberRoot=="function")try{Lo.onCommitFiberRoot(hw,t,void 0,(t.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:RZ,OZ=Math.log,jZ=Math.LN2;function RZ(t){return t>>>=0,t===0?32:31-(OZ(t)/jZ|0)|0}var yv=64,gv=4194304;function ip(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pb(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=ip(a):(o&=s,o!==0&&(n=ip(o)))}else s=r&~i,s!==0?n=ip(s):o!==0&&(n=ip(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-co(e),i=1<<r,n|=t[r],e&=~i;return n}function $Z(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DZ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-co(o),a=1<<s,l=i[s];l===-1?(!(a&r)||a&n)&&(i[s]=$Z(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function $C(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M5(){var t=yv;return yv<<=1,!(yv&4194240)&&(yv=64),t}function zS(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ig(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-co(e),t[e]=r}function MZ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-co(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function TN(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-co(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ft=0;function F5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L5,IN,B5,U5,V5,DC=!1,vv=[],Aa=null,Ca=null,Pa=null,cm=new Map,um=new Map,na=[],FZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $2(t,e){switch(t){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ca=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":cm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":um.delete(e.pointerId)}}function wh(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=sg(e),e!==null&&IN(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LZ(t,e,r,n,i){switch(e){case"focusin":return Aa=wh(Aa,t,e,r,n,i),!0;case"dragenter":return Ca=wh(Ca,t,e,r,n,i),!0;case"mouseover":return Pa=wh(Pa,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return cm.set(o,wh(cm.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,um.set(o,wh(um.get(o)||null,t,e,r,n,i)),!0}return!1}function W5(t){var e=$l(t.target);if(e!==null){var r=Fc(e);if(r!==null){if(e=r.tag,e===13){if(e=k5(r),e!==null){t.blockedOn=e,V5(t.priority,function(){B5(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=MC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);kC=n,r.target.dispatchEvent(n),kC=null}else return e=sg(r),e!==null&&IN(e),t.blockedOn=r,!1;e.shift()}return!0}function D2(t,e,r){_0(t)&&r.delete(e)}function BZ(){DC=!1,Aa!==null&&_0(Aa)&&(Aa=null),Ca!==null&&_0(Ca)&&(Ca=null),Pa!==null&&_0(Pa)&&(Pa=null),cm.forEach(D2),um.forEach(D2)}function Sh(t,e){t.blockedOn===e&&(t.blockedOn=null,DC||(DC=!0,ai.unstable_scheduleCallback(ai.unstable_NormalPriority,BZ)))}function fm(t){function e(i){return Sh(i,t)}if(0<vv.length){Sh(vv[0],t);for(var r=1;r<vv.length;r++){var n=vv[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Aa!==null&&Sh(Aa,t),Ca!==null&&Sh(Ca,t),Pa!==null&&Sh(Pa,t),cm.forEach(e),um.forEach(e),r=0;r<na.length;r++)n=na[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<na.length&&(r=na[0],r.blockedOn===null);)W5(r),r.blockedOn===null&&na.shift()}var Ju=$s.ReactCurrentBatchConfig,mb=!0;function UZ(t,e,r,n){var i=ft,o=Ju.transition;Ju.transition=null;try{ft=1,NN(t,e,r,n)}finally{ft=i,Ju.transition=o}}function VZ(t,e,r,n){var i=ft,o=Ju.transition;Ju.transition=null;try{ft=4,NN(t,e,r,n)}finally{ft=i,Ju.transition=o}}function NN(t,e,r,n){if(mb){var i=MC(t,e,r,n);if(i===null)eE(t,e,n,yb,r),$2(t,n);else if(LZ(i,t,e,r,n))n.stopPropagation();else if($2(t,n),e&4&&-1<FZ.indexOf(t)){for(;i!==null;){var o=sg(i);if(o!==null&&L5(o),o=MC(t,e,r,n),o===null&&eE(t,e,n,yb,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else eE(t,e,n,null,r)}}var yb=null;function MC(t,e,r,n){if(yb=null,t=CN(n),t=$l(t),t!==null)if(e=Fc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=k5(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yb=t,null}function z5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IZ()){case PN:return 1;case $5:return 4;case hb:case NZ:return 16;case D5:return 536870912;default:return 16}default:return 16}}var ha=null,kN=null,w0=null;function G5(){if(w0)return w0;var t,e=kN,r=e.length,n,i="value"in ha?ha.value:ha.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return w0=i.slice(t,1<n?1-n:void 0)}function S0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bv(){return!0}function M2(){return!1}function fi(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bv:M2,this.isPropagationStopped=M2,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bv)},persist:function(){},isPersistent:bv}),e}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ON=fi(Ld),og=Vt({},Ld,{view:0,detail:0}),WZ=fi(og),GS,qS,Eh,pw=Vt({},og,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eh&&(Eh&&t.type==="mousemove"?(GS=t.screenX-Eh.screenX,qS=t.screenY-Eh.screenY):qS=GS=0,Eh=t),GS)},movementY:function(t){return"movementY"in t?t.movementY:qS}}),F2=fi(pw),zZ=Vt({},pw,{dataTransfer:0}),GZ=fi(zZ),qZ=Vt({},og,{relatedTarget:0}),HS=fi(qZ),HZ=Vt({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),KZ=fi(HZ),QZ=Vt({},Ld,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YZ=fi(QZ),XZ=Vt({},Ld,{data:0}),L2=fi(XZ),JZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eee[t])?!!e[t]:!1}function jN(){return tee}var ree=Vt({},og,{key:function(t){if(t.key){var e=JZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=S0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jN,charCode:function(t){return t.type==="keypress"?S0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?S0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nee=fi(ree),iee=Vt({},pw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B2=fi(iee),oee=Vt({},og,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jN}),see=fi(oee),aee=Vt({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),lee=fi(aee),cee=Vt({},pw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uee=fi(cee),fee=[9,13,27,32],RN=Es&&"CompositionEvent"in window,Ap=null;Es&&"documentMode"in document&&(Ap=document.documentMode);var dee=Es&&"TextEvent"in window&&!Ap,q5=Es&&(!RN||Ap&&8<Ap&&11>=Ap),U2=" ",V2=!1;function H5(t,e){switch(t){case"keyup":return fee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pu=!1;function hee(t,e){switch(t){case"compositionend":return K5(e);case"keypress":return e.which!==32?null:(V2=!0,U2);case"textInput":return t=e.data,t===U2&&V2?null:t;default:return null}}function pee(t,e){if(Pu)return t==="compositionend"||!RN&&H5(t,e)?(t=G5(),w0=kN=ha=null,Pu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q5&&e.locale!=="ko"?null:e.data;default:return null}}var mee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mee[t.type]:e==="textarea"}function Q5(t,e,r,n){C5(n),e=gb(e,"onChange"),0<e.length&&(r=new ON("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Cp=null,dm=null;function yee(t){s6(t,0)}function mw(t){var e=Nu(t);if(b5(e))return t}function gee(t,e){if(t==="change")return e}var Y5=!1;if(Es){var KS;if(Es){var QS="oninput"in document;if(!QS){var z2=document.createElement("div");z2.setAttribute("oninput","return;"),QS=typeof z2.oninput=="function"}KS=QS}else KS=!1;Y5=KS&&(!document.documentMode||9<document.documentMode)}function G2(){Cp&&(Cp.detachEvent("onpropertychange",X5),dm=Cp=null)}function X5(t){if(t.propertyName==="value"&&mw(dm)){var e=[];Q5(e,dm,t,CN(t)),N5(yee,e)}}function vee(t,e,r){t==="focusin"?(G2(),Cp=e,dm=r,Cp.attachEvent("onpropertychange",X5)):t==="focusout"&&G2()}function bee(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mw(dm)}function xee(t,e){if(t==="click")return mw(e)}function _ee(t,e){if(t==="input"||t==="change")return mw(e)}function wee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var po=typeof Object.is=="function"?Object.is:wee;function hm(t,e){if(po(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!bC.call(e,i)||!po(t[i],e[i]))return!1}return!0}function q2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H2(t,e){var r=q2(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=q2(r)}}function J5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z5(){for(var t=window,e=ub();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ub(t.document)}return e}function $N(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function See(t){var e=Z5(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&J5(r.ownerDocument.documentElement,r)){if(n!==null&&$N(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=H2(r,o);var s=H2(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Eee=Es&&"documentMode"in document&&11>=document.documentMode,Tu=null,FC=null,Pp=null,LC=!1;function K2(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;LC||Tu==null||Tu!==ub(n)||(n=Tu,"selectionStart"in n&&$N(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pp&&hm(Pp,n)||(Pp=n,n=gb(FC,"onSelect"),0<n.length&&(e=new ON("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Tu)))}function xv(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Iu={animationend:xv("Animation","AnimationEnd"),animationiteration:xv("Animation","AnimationIteration"),animationstart:xv("Animation","AnimationStart"),transitionend:xv("Transition","TransitionEnd")},YS={},e6={};Es&&(e6=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function yw(t){if(YS[t])return YS[t];if(!Iu[t])return t;var e=Iu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in e6)return YS[t]=e[r];return t}var t6=yw("animationend"),r6=yw("animationiteration"),n6=yw("animationstart"),i6=yw("transitionend"),o6=new Map,Q2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(t,e){o6.set(t,e),Mc(e,[t])}for(var XS=0;XS<Q2.length;XS++){var JS=Q2[XS],Aee=JS.toLowerCase(),Cee=JS[0].toUpperCase()+JS.slice(1);tl(Aee,"on"+Cee)}tl(t6,"onAnimationEnd");tl(r6,"onAnimationIteration");tl(n6,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(i6,"onTransitionEnd");Df("onMouseEnter",["mouseout","mouseover"]);Df("onMouseLeave",["mouseout","mouseover"]);Df("onPointerEnter",["pointerout","pointerover"]);Df("onPointerLeave",["pointerout","pointerover"]);Mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pee=new Set("cancel close invalid load scroll toggle".split(" ").concat(op));function Y2(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,AZ(n,e,void 0,t),t.currentTarget=null}function s6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Y2(i,a,c),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Y2(i,a,c),o=l}}}if(db)throw t=RC,db=!1,RC=null,t}function Tt(t,e){var r=e[zC];r===void 0&&(r=e[zC]=new Set);var n=t+"__bubble";r.has(n)||(a6(e,t,2,!1),r.add(n))}function ZS(t,e,r){var n=0;e&&(n|=4),a6(r,t,n,e)}var _v="_reactListening"+Math.random().toString(36).slice(2);function pm(t){if(!t[_v]){t[_v]=!0,p5.forEach(function(r){r!=="selectionchange"&&(Pee.has(r)||ZS(r,!1,t),ZS(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_v]||(e[_v]=!0,ZS("selectionchange",!1,e))}}function a6(t,e,r,n){switch(z5(e)){case 1:var i=UZ;break;case 4:i=VZ;break;default:i=NN}r=i.bind(null,e,r,t),i=void 0,!jC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function eE(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=$l(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}N5(function(){var c=o,f=CN(r),d=[];e:{var h=o6.get(t);if(h!==void 0){var p=ON,m=t;switch(t){case"keypress":if(S0(r)===0)break e;case"keydown":case"keyup":p=nee;break;case"focusin":m="focus",p=HS;break;case"focusout":m="blur",p=HS;break;case"beforeblur":case"afterblur":p=HS;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=F2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=see;break;case t6:case r6:case n6:p=KZ;break;case i6:p=lee;break;case"scroll":p=WZ;break;case"wheel":p=uee;break;case"copy":case"cut":case"paste":p=YZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=B2}var y=(e&4)!==0,g=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var v=c,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,b!==null&&(S=lm(v,b),S!=null&&y.push(mm(v,S,x)))),g)break;v=v.return}0<y.length&&(h=new p(h,m,null,r,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==kC&&(m=r.relatedTarget||r.fromElement)&&($l(m)||m[As]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?$l(m):null,m!==null&&(g=Fc(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=F2,S="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=B2,S="onPointerLeave",b="onPointerEnter",v="pointer"),g=p==null?h:Nu(p),x=m==null?h:Nu(m),h=new y(S,v+"leave",p,r,f),h.target=g,h.relatedTarget=x,S=null,$l(f)===c&&(y=new y(b,v+"enter",m,r,f),y.target=x,y.relatedTarget=g,S=y),g=S,p&&m)t:{for(y=p,b=m,v=0,x=y;x;x=Yc(x))v++;for(x=0,S=b;S;S=Yc(S))x++;for(;0<v-x;)y=Yc(y),v--;for(;0<x-v;)b=Yc(b),x--;for(;v--;){if(y===b||b!==null&&y===b.alternate)break t;y=Yc(y),b=Yc(b)}y=null}else y=null;p!==null&&X2(d,h,p,y,!1),m!==null&&g!==null&&X2(d,g,m,y,!0)}}e:{if(h=c?Nu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=gee;else if(W2(h))if(Y5)_=_ee;else{_=bee;var w=vee}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=xee);if(_&&(_=_(t,c))){Q5(d,_,r,f);break e}w&&w(t,h,c),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&CC(h,"number",h.value)}switch(w=c?Nu(c):window,t){case"focusin":(W2(w)||w.contentEditable==="true")&&(Tu=w,FC=c,Pp=null);break;case"focusout":Pp=FC=Tu=null;break;case"mousedown":LC=!0;break;case"contextmenu":case"mouseup":case"dragend":LC=!1,K2(d,r,f);break;case"selectionchange":if(Eee)break;case"keydown":case"keyup":K2(d,r,f)}var A;if(RN)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Pu?H5(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(q5&&r.locale!=="ko"&&(Pu||C!=="onCompositionStart"?C==="onCompositionEnd"&&Pu&&(A=G5()):(ha=f,kN="value"in ha?ha.value:ha.textContent,Pu=!0)),w=gb(c,C),0<w.length&&(C=new L2(C,t,null,r,f),d.push({event:C,listeners:w}),A?C.data=A:(A=K5(r),A!==null&&(C.data=A)))),(A=dee?hee(t,r):pee(t,r))&&(c=gb(c,"onBeforeInput"),0<c.length&&(f=new L2("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:c}),f.data=A))}s6(d,e)})}function mm(t,e,r){return{instance:t,listener:e,currentTarget:r}}function gb(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=lm(t,r),o!=null&&n.unshift(mm(t,o,i)),o=lm(t,e),o!=null&&n.push(mm(t,o,i))),t=t.return}return n}function Yc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function X2(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=lm(r,o),l!=null&&s.unshift(mm(r,l,a))):i||(l=lm(r,o),l!=null&&s.push(mm(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var Tee=/\r\n?/g,Iee=/\u0000|\uFFFD/g;function J2(t){return(typeof t=="string"?t:""+t).replace(Tee,`
`).replace(Iee,"")}function wv(t,e,r){if(e=J2(e),J2(t)!==e&&r)throw Error(X(425))}function vb(){}var BC=null,UC=null;function VC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var WC=typeof setTimeout=="function"?setTimeout:void 0,Nee=typeof clearTimeout=="function"?clearTimeout:void 0,Z2=typeof Promise=="function"?Promise:void 0,kee=typeof queueMicrotask=="function"?queueMicrotask:typeof Z2<"u"?function(t){return Z2.resolve(null).then(t).catch(Oee)}:WC;function Oee(t){setTimeout(function(){throw t})}function tE(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),fm(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);fm(e)}function Ta(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function e$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Bd=Math.random().toString(36).slice(2),Po="__reactFiber$"+Bd,ym="__reactProps$"+Bd,As="__reactContainer$"+Bd,zC="__reactEvents$"+Bd,jee="__reactListeners$"+Bd,Ree="__reactHandles$"+Bd;function $l(t){var e=t[Po];if(e)return e;for(var r=t.parentNode;r;){if(e=r[As]||r[Po]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=e$(t);t!==null;){if(r=t[Po])return r;t=e$(t)}return e}t=r,r=t.parentNode}return null}function sg(t){return t=t[Po]||t[As],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function gw(t){return t[ym]||null}var GC=[],ku=-1;function rl(t){return{current:t}}function jt(t){0>ku||(t.current=GC[ku],GC[ku]=null,ku--)}function Ct(t,e){ku++,GC[ku]=t.current,t.current=e}var Wa={},hn=rl(Wa),Un=rl(!1),xc=Wa;function Mf(t,e){var r=t.type.contextTypes;if(!r)return Wa;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vn(t){return t=t.childContextTypes,t!=null}function bb(){jt(Un),jt(hn)}function t$(t,e,r){if(hn.current!==Wa)throw Error(X(168));Ct(hn,e),Ct(Un,r)}function l6(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(X(108,vZ(t)||"Unknown",i));return Vt({},r,n)}function xb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wa,xc=hn.current,Ct(hn,t),Ct(Un,Un.current),!0}function r$(t,e,r){var n=t.stateNode;if(!n)throw Error(X(169));r?(t=l6(t,e,xc),n.__reactInternalMemoizedMergedChildContext=t,jt(Un),jt(hn),Ct(hn,t)):jt(Un),Ct(Un,r)}var ls=null,vw=!1,rE=!1;function c6(t){ls===null?ls=[t]:ls.push(t)}function $ee(t){vw=!0,c6(t)}function nl(){if(!rE&&ls!==null){rE=!0;var t=0,e=ft;try{var r=ls;for(ft=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ls=null,vw=!1}catch(i){throw ls!==null&&(ls=ls.slice(t+1)),R5(PN,nl),i}finally{ft=e,rE=!1}}return null}var Ou=[],ju=0,_b=null,wb=0,Ei=[],Ai=0,_c=null,us=1,fs="";function gl(t,e){Ou[ju++]=wb,Ou[ju++]=_b,_b=t,wb=e}function u6(t,e,r){Ei[Ai++]=us,Ei[Ai++]=fs,Ei[Ai++]=_c,_c=t;var n=us;t=fs;var i=32-co(n)-1;n&=~(1<<i),r+=1;var o=32-co(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,us=1<<32-co(e)+i|r<<i|n,fs=o+t}else us=1<<o|r<<i|n,fs=t}function DN(t){t.return!==null&&(gl(t,1),u6(t,1,0))}function MN(t){for(;t===_b;)_b=Ou[--ju],Ou[ju]=null,wb=Ou[--ju],Ou[ju]=null;for(;t===_c;)_c=Ei[--Ai],Ei[Ai]=null,fs=Ei[--Ai],Ei[Ai]=null,us=Ei[--Ai],Ei[Ai]=null}var ii=null,ei=null,$t=!1,Ji=null;function f6(t,e){var r=Ii(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function n$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ii=t,ei=Ta(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ii=t,ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=_c!==null?{id:us,overflow:fs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ii(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ii=t,ei=null,!0):!1;default:return!1}}function qC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function HC(t){if($t){var e=ei;if(e){var r=e;if(!n$(t,e)){if(qC(t))throw Error(X(418));e=Ta(r.nextSibling);var n=ii;e&&n$(t,e)?f6(n,r):(t.flags=t.flags&-4097|2,$t=!1,ii=t)}}else{if(qC(t))throw Error(X(418));t.flags=t.flags&-4097|2,$t=!1,ii=t}}}function i$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ii=t}function Sv(t){if(t!==ii)return!1;if(!$t)return i$(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!VC(t.type,t.memoizedProps)),e&&(e=ei)){if(qC(t))throw d6(),Error(X(418));for(;e;)f6(t,e),e=Ta(e.nextSibling)}if(i$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ei=Ta(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ei=null}}else ei=ii?Ta(t.stateNode.nextSibling):null;return!0}function d6(){for(var t=ei;t;)t=Ta(t.nextSibling)}function Ff(){ei=ii=null,$t=!1}function FN(t){Ji===null?Ji=[t]:Ji.push(t)}var Dee=$s.ReactCurrentBatchConfig;function Hi(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Sb=rl(null),Eb=null,Ru=null,LN=null;function BN(){LN=Ru=Eb=null}function UN(t){var e=Sb.current;jt(Sb),t._currentValue=e}function KC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Zu(t,e){Eb=t,LN=Ru=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function Fi(t){var e=t._currentValue;if(LN!==t)if(t={context:t,memoizedValue:e,next:null},Ru===null){if(Eb===null)throw Error(X(308));Ru=t,Eb.dependencies={lanes:0,firstContext:t}}else Ru=Ru.next=t;return e}var Dl=null;function VN(t){Dl===null?Dl=[t]:Dl.push(t)}function h6(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,VN(e)):(r.next=i.next,i.next=r),e.interleaved=r,Cs(t,n)}function Cs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Js=!1;function WN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ia(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,rt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Cs(t,r)}return i=n.interleaved,i===null?(e.next=e,VN(n)):(e.next=i.next,i.next=e),n.interleaved=e,Cs(t,r)}function E0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,TN(t,r)}}function o$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ab(t,e,r,n){var i=t.updateQueue;Js=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,f=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=Vt({},d,h);break e;case 2:Js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=p,l=d):f=f.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Sc|=s,t.lanes=s,t.memoizedState=d}}function s$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(X(191,i));i.call(n)}}}var m6=new h5.Component().refs;function QC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Vt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bw={isMounted:function(t){return(t=t._reactInternals)?Fc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pn(),i=ka(t),o=vs(n,i);o.payload=e,r!=null&&(o.callback=r),e=Ia(t,o,i),e!==null&&(uo(e,t,i,n),E0(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pn(),i=ka(t),o=vs(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Ia(t,o,i),e!==null&&(uo(e,t,i,n),E0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pn(),n=ka(t),i=vs(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ia(t,i,n),e!==null&&(uo(e,t,n,r),E0(e,t,n))}};function a$(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!hm(r,n)||!hm(i,o):!0}function y6(t,e,r){var n=!1,i=Wa,o=e.contextType;return typeof o=="object"&&o!==null?o=Fi(o):(i=Vn(e)?xc:hn.current,n=e.contextTypes,o=(n=n!=null)?Mf(t,i):Wa),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function l$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&bw.enqueueReplaceState(e,e.state,null)}function YC(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=m6,WN(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Fi(o):(o=Vn(e)?xc:hn.current,i.context=Mf(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(QC(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bw.enqueueReplaceState(i,i.state,null),Ab(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ah(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===m6&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,t))}return t}function Ev(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c$(t){var e=t._init;return e(t._payload)}function g6(t){function e(b,v){if(t){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=Oa(b,v),b.index=0,b.sibling=null,b}function o(b,v,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function s(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,x,S){return v===null||v.tag!==6?(v=cE(x,b.mode,S),v.return=b,v):(v=i(v,x),v.return=b,v)}function l(b,v,x,S){var _=x.type;return _===Cu?f(b,v,x.props.children,S,x.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xs&&c$(_)===v.type)?(S=i(v,x.props),S.ref=Ah(b,v,x),S.return=b,S):(S=N0(x.type,x.key,x.props,null,b.mode,S),S.ref=Ah(b,v,x),S.return=b,S)}function c(b,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=uE(x,b.mode,S),v.return=b,v):(v=i(v,x.children||[]),v.return=b,v)}function f(b,v,x,S,_){return v===null||v.tag!==7?(v=rc(x,b.mode,S,_),v.return=b,v):(v=i(v,x),v.return=b,v)}function d(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=cE(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case hv:return x=N0(v.type,v.key,v.props,null,b.mode,x),x.ref=Ah(b,null,v),x.return=b,x;case Au:return v=uE(v,b.mode,x),v.return=b,v;case Xs:var S=v._init;return d(b,S(v._payload),x)}if(np(v)||xh(v))return v=rc(v,b.mode,x,null),v.return=b,v;Ev(b,v)}return null}function h(b,v,x,S){var _=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hv:return x.key===_?l(b,v,x,S):null;case Au:return x.key===_?c(b,v,x,S):null;case Xs:return _=x._init,h(b,v,_(x._payload),S)}if(np(x)||xh(x))return _!==null?null:f(b,v,x,S,null);Ev(b,x)}return null}function p(b,v,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(x)||null,a(v,b,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hv:return b=b.get(S.key===null?x:S.key)||null,l(v,b,S,_);case Au:return b=b.get(S.key===null?x:S.key)||null,c(v,b,S,_);case Xs:var w=S._init;return p(b,v,x,w(S._payload),_)}if(np(S)||xh(S))return b=b.get(x)||null,f(v,b,S,_,null);Ev(v,S)}return null}function m(b,v,x,S){for(var _=null,w=null,A=v,C=v=0,T=null;A!==null&&C<x.length;C++){A.index>C?(T=A,A=null):T=A.sibling;var P=h(b,A,x[C],S);if(P===null){A===null&&(A=T);break}t&&A&&P.alternate===null&&e(b,A),v=o(P,v,C),w===null?_=P:w.sibling=P,w=P,A=T}if(C===x.length)return r(b,A),$t&&gl(b,C),_;if(A===null){for(;C<x.length;C++)A=d(b,x[C],S),A!==null&&(v=o(A,v,C),w===null?_=A:w.sibling=A,w=A);return $t&&gl(b,C),_}for(A=n(b,A);C<x.length;C++)T=p(A,b,C,x[C],S),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?C:T.key),v=o(T,v,C),w===null?_=T:w.sibling=T,w=T);return t&&A.forEach(function(I){return e(b,I)}),$t&&gl(b,C),_}function y(b,v,x,S){var _=xh(x);if(typeof _!="function")throw Error(X(150));if(x=_.call(x),x==null)throw Error(X(151));for(var w=_=null,A=v,C=v=0,T=null,P=x.next();A!==null&&!P.done;C++,P=x.next()){A.index>C?(T=A,A=null):T=A.sibling;var I=h(b,A,P.value,S);if(I===null){A===null&&(A=T);break}t&&A&&I.alternate===null&&e(b,A),v=o(I,v,C),w===null?_=I:w.sibling=I,w=I,A=T}if(P.done)return r(b,A),$t&&gl(b,C),_;if(A===null){for(;!P.done;C++,P=x.next())P=d(b,P.value,S),P!==null&&(v=o(P,v,C),w===null?_=P:w.sibling=P,w=P);return $t&&gl(b,C),_}for(A=n(b,A);!P.done;C++,P=x.next())P=p(A,b,C,P.value,S),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?C:P.key),v=o(P,v,C),w===null?_=P:w.sibling=P,w=P);return t&&A.forEach(function(k){return e(b,k)}),$t&&gl(b,C),_}function g(b,v,x,S){if(typeof x=="object"&&x!==null&&x.type===Cu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case hv:e:{for(var _=x.key,w=v;w!==null;){if(w.key===_){if(_=x.type,_===Cu){if(w.tag===7){r(b,w.sibling),v=i(w,x.props.children),v.return=b,b=v;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xs&&c$(_)===w.type){r(b,w.sibling),v=i(w,x.props),v.ref=Ah(b,w,x),v.return=b,b=v;break e}r(b,w);break}else e(b,w);w=w.sibling}x.type===Cu?(v=rc(x.props.children,b.mode,S,x.key),v.return=b,b=v):(S=N0(x.type,x.key,x.props,null,b.mode,S),S.ref=Ah(b,v,x),S.return=b,b=S)}return s(b);case Au:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(b,v.sibling),v=i(v,x.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=uE(x,b.mode,S),v.return=b,b=v}return s(b);case Xs:return w=x._init,g(b,v,w(x._payload),S)}if(np(x))return m(b,v,x,S);if(xh(x))return y(b,v,x,S);Ev(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(b,v.sibling),v=i(v,x),v.return=b,b=v):(r(b,v),v=cE(x,b.mode,S),v.return=b,b=v),s(b)):r(b,v)}return g}var Lf=g6(!0),v6=g6(!1),ag={},Bo=rl(ag),gm=rl(ag),vm=rl(ag);function Ml(t){if(t===ag)throw Error(X(174));return t}function zN(t,e){switch(Ct(vm,e),Ct(gm,t),Ct(Bo,ag),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:TC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=TC(e,t)}jt(Bo),Ct(Bo,e)}function Bf(){jt(Bo),jt(gm),jt(vm)}function b6(t){Ml(vm.current);var e=Ml(Bo.current),r=TC(e,t.type);e!==r&&(Ct(gm,t),Ct(Bo,r))}function GN(t){gm.current===t&&(jt(Bo),jt(gm))}var Ft=rl(0);function Cb(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nE=[];function qN(){for(var t=0;t<nE.length;t++)nE[t]._workInProgressVersionPrimary=null;nE.length=0}var A0=$s.ReactCurrentDispatcher,iE=$s.ReactCurrentBatchConfig,wc=0,Ut=null,lr=null,Nr=null,Pb=!1,Tp=!1,bm=0,Mee=0;function tn(){throw Error(X(321))}function HN(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!po(t[r],e[r]))return!1;return!0}function KN(t,e,r,n,i,o){if(wc=o,Ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,A0.current=t===null||t.memoizedState===null?Uee:Vee,t=r(n,i),Tp){o=0;do{if(Tp=!1,bm=0,25<=o)throw Error(X(301));o+=1,Nr=lr=null,e.updateQueue=null,A0.current=Wee,t=r(n,i)}while(Tp)}if(A0.current=Tb,e=lr!==null&&lr.next!==null,wc=0,Nr=lr=Ut=null,Pb=!1,e)throw Error(X(300));return t}function QN(){var t=bm!==0;return bm=0,t}function _o(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?Ut.memoizedState=Nr=t:Nr=Nr.next=t,Nr}function Li(){if(lr===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=lr.next;var e=Nr===null?Ut.memoizedState:Nr.next;if(e!==null)Nr=e,lr=t;else{if(t===null)throw Error(X(310));lr=t,t={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},Nr===null?Ut.memoizedState=Nr=t:Nr=Nr.next=t}return Nr}function xm(t,e){return typeof e=="function"?e(t):e}function oE(t){var e=Li(),r=e.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=t;var n=lr,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,c=o;do{var f=c.lane;if((wc&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=n):l=l.next=d,Ut.lanes|=f,Sc|=f}c=c.next}while(c!==null&&c!==o);l===null?s=n:l.next=a,po(n,e.memoizedState)||(Fn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Ut.lanes|=o,Sc|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function sE(t){var e=Li(),r=e.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);po(o,e.memoizedState)||(Fn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function x6(){}function _6(t,e){var r=Ut,n=Li(),i=e(),o=!po(n.memoizedState,i);if(o&&(n.memoizedState=i,Fn=!0),n=n.queue,YN(E6.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Nr!==null&&Nr.memoizedState.tag&1){if(r.flags|=2048,_m(9,S6.bind(null,r,n,i,e),void 0,null),kr===null)throw Error(X(349));wc&30||w6(r,e,i)}return i}function w6(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function S6(t,e,r,n){e.value=r,e.getSnapshot=n,A6(e)&&C6(t)}function E6(t,e,r){return r(function(){A6(e)&&C6(t)})}function A6(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!po(t,r)}catch{return!0}}function C6(t){var e=Cs(t,1);e!==null&&uo(e,t,1,-1)}function u$(t){var e=_o();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xm,lastRenderedState:t},e.queue=t,t=t.dispatch=Bee.bind(null,Ut,t),[e.memoizedState,t]}function _m(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function P6(){return Li().memoizedState}function C0(t,e,r,n){var i=_o();Ut.flags|=t,i.memoizedState=_m(1|e,r,void 0,n===void 0?null:n)}function xw(t,e,r,n){var i=Li();n=n===void 0?null:n;var o=void 0;if(lr!==null){var s=lr.memoizedState;if(o=s.destroy,n!==null&&HN(n,s.deps)){i.memoizedState=_m(e,r,o,n);return}}Ut.flags|=t,i.memoizedState=_m(1|e,r,o,n)}function f$(t,e){return C0(8390656,8,t,e)}function YN(t,e){return xw(2048,8,t,e)}function T6(t,e){return xw(4,2,t,e)}function I6(t,e){return xw(4,4,t,e)}function N6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function k6(t,e,r){return r=r!=null?r.concat([t]):null,xw(4,4,N6.bind(null,e,t),r)}function XN(){}function O6(t,e){var r=Li();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HN(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function j6(t,e){var r=Li();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&HN(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function R6(t,e,r){return wc&21?(po(r,e)||(r=M5(),Ut.lanes|=r,Sc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=r)}function Fee(t,e){var r=ft;ft=r!==0&&4>r?r:4,t(!0);var n=iE.transition;iE.transition={};try{t(!1),e()}finally{ft=r,iE.transition=n}}function $6(){return Li().memoizedState}function Lee(t,e,r){var n=ka(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},D6(t))M6(e,r);else if(r=h6(t,e,r,n),r!==null){var i=Pn();uo(r,t,n,i),F6(r,e,n)}}function Bee(t,e,r){var n=ka(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(D6(t))M6(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,po(a,s)){var l=e.interleaved;l===null?(i.next=i,VN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=h6(t,e,i,n),r!==null&&(i=Pn(),uo(r,t,n,i),F6(r,e,n))}}function D6(t){var e=t.alternate;return t===Ut||e!==null&&e===Ut}function M6(t,e){Tp=Pb=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function F6(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,TN(t,r)}}var Tb={readContext:Fi,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Uee={readContext:Fi,useCallback:function(t,e){return _o().memoizedState=[t,e===void 0?null:e],t},useContext:Fi,useEffect:f$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,C0(4194308,4,N6.bind(null,e,t),r)},useLayoutEffect:function(t,e){return C0(4194308,4,t,e)},useInsertionEffect:function(t,e){return C0(4,2,t,e)},useMemo:function(t,e){var r=_o();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_o();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Lee.bind(null,Ut,t),[n.memoizedState,t]},useRef:function(t){var e=_o();return t={current:t},e.memoizedState=t},useState:u$,useDebugValue:XN,useDeferredValue:function(t){return _o().memoizedState=t},useTransition:function(){var t=u$(!1),e=t[0];return t=Fee.bind(null,t[1]),_o().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ut,i=_o();if($t){if(r===void 0)throw Error(X(407));r=r()}else{if(r=e(),kr===null)throw Error(X(349));wc&30||w6(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,f$(E6.bind(null,n,o,t),[t]),n.flags|=2048,_m(9,S6.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=_o(),e=kr.identifierPrefix;if($t){var r=fs,n=us;r=(n&~(1<<32-co(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=bm++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Mee++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vee={readContext:Fi,useCallback:O6,useContext:Fi,useEffect:YN,useImperativeHandle:k6,useInsertionEffect:T6,useLayoutEffect:I6,useMemo:j6,useReducer:oE,useRef:P6,useState:function(){return oE(xm)},useDebugValue:XN,useDeferredValue:function(t){var e=Li();return R6(e,lr.memoizedState,t)},useTransition:function(){var t=oE(xm)[0],e=Li().memoizedState;return[t,e]},useMutableSource:x6,useSyncExternalStore:_6,useId:$6,unstable_isNewReconciler:!1},Wee={readContext:Fi,useCallback:O6,useContext:Fi,useEffect:YN,useImperativeHandle:k6,useInsertionEffect:T6,useLayoutEffect:I6,useMemo:j6,useReducer:sE,useRef:P6,useState:function(){return sE(xm)},useDebugValue:XN,useDeferredValue:function(t){var e=Li();return lr===null?e.memoizedState=t:R6(e,lr.memoizedState,t)},useTransition:function(){var t=sE(xm)[0],e=Li().memoizedState;return[t,e]},useMutableSource:x6,useSyncExternalStore:_6,useId:$6,unstable_isNewReconciler:!1};function Uf(t,e){try{var r="",n=e;do r+=gZ(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function aE(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function XC(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var zee=typeof WeakMap=="function"?WeakMap:Map;function L6(t,e,r){r=vs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Nb||(Nb=!0,aP=n),XC(t,e)},r}function B6(t,e,r){r=vs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){XC(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){XC(t,e),typeof n!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function d$(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new zee;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=ite.bind(null,t,e,r),e.then(t,t))}function h$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function p$(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vs(-1,1),e.tag=2,Ia(r,e,1))),r.lanes|=1),t)}var Gee=$s.ReactCurrentOwner,Fn=!1;function xn(t,e,r,n){e.child=t===null?v6(e,null,r,n):Lf(e,t.child,r,n)}function m$(t,e,r,n,i){r=r.render;var o=e.ref;return Zu(e,i),n=KN(t,e,r,n,o,i),r=QN(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ps(t,e,i)):($t&&r&&DN(e),e.flags|=1,xn(t,e,n,i),e.child)}function y$(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!ok(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,U6(t,e,o,n,i)):(t=N0(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:hm,r(s,n)&&t.ref===e.ref)return Ps(t,e,i)}return e.flags|=1,t=Oa(o,n),t.ref=e.ref,t.return=e,e.child=t}function U6(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(hm(o,n)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,Ps(t,e,i)}return JC(t,e,r,n,i)}function V6(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Du,Yn),Yn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ct(Du,Yn),Yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ct(Du,Yn),Yn|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ct(Du,Yn),Yn|=n;return xn(t,e,i,r),e.child}function W6(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function JC(t,e,r,n,i){var o=Vn(r)?xc:hn.current;return o=Mf(e,o),Zu(e,i),r=KN(t,e,r,n,o,i),n=QN(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ps(t,e,i)):($t&&n&&DN(e),e.flags|=1,xn(t,e,r,i),e.child)}function g$(t,e,r,n,i){if(Vn(r)){var o=!0;xb(e)}else o=!1;if(Zu(e,i),e.stateNode===null)P0(t,e),y6(e,r,n),YC(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=Fi(c):(c=Vn(r)?xc:hn.current,c=Mf(e,c));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&l$(e,s,n,c),Js=!1;var h=e.memoizedState;s.state=h,Ab(e,n,s,i),l=e.memoizedState,a!==n||h!==l||Un.current||Js?(typeof f=="function"&&(QC(e,r,f,n),l=e.memoizedState),(a=Js||a$(e,r,a,n,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,p6(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hi(e.type,a),s.props=c,d=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Fi(l):(l=Vn(r)?xc:hn.current,l=Mf(e,l));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&l$(e,s,n,l),Js=!1,h=e.memoizedState,s.state=h,Ab(e,n,s,i);var m=e.memoizedState;a!==d||h!==m||Un.current||Js?(typeof p=="function"&&(QC(e,r,p,n),m=e.memoizedState),(c=Js||a$(e,r,c,n,h,m,l)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return ZC(t,e,r,n,o,i)}function ZC(t,e,r,n,i,o){W6(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&r$(e,r,!1),Ps(t,e,o);n=e.stateNode,Gee.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Lf(e,t.child,null,o),e.child=Lf(e,null,a,o)):xn(t,e,a,o),e.memoizedState=n.state,i&&r$(e,r,!0),e.child}function z6(t){var e=t.stateNode;e.pendingContext?t$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&t$(t,e.context,!1),zN(t,e.containerInfo)}function v$(t,e,r,n,i){return Ff(),FN(i),e.flags|=256,xn(t,e,r,n),e.child}var eP={dehydrated:null,treeContext:null,retryLane:0};function tP(t){return{baseLanes:t,cachePool:null,transitions:null}}function G6(t,e,r){var n=e.pendingProps,i=Ft.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ct(Ft,i&1),t===null)return HC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Sw(s,n,0,null),t=rc(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=tP(r),e.memoizedState=eP,t):JN(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qee(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Oa(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Oa(a,o):(o=rc(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?tP(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=eP,n}return o=t.child,t=o.sibling,n=Oa(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function JN(t,e){return e=Sw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Av(t,e,r,n){return n!==null&&FN(n),Lf(e,t.child,null,r),t=JN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qee(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=aE(Error(X(422))),Av(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Sw({mode:"visible",children:n.children},i,0,null),o=rc(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Lf(e,t.child,null,s),e.child.memoizedState=tP(s),e.memoizedState=eP,o);if(!(e.mode&1))return Av(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(X(419)),n=aE(o,n,void 0),Av(t,e,s,n)}if(a=(s&t.childLanes)!==0,Fn||a){if(n=kr,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Cs(t,i),uo(n,t,i,-1))}return ik(),n=aE(Error(X(421))),Av(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ote.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ei=Ta(i.nextSibling),ii=e,$t=!0,Ji=null,t!==null&&(Ei[Ai++]=us,Ei[Ai++]=fs,Ei[Ai++]=_c,us=t.id,fs=t.overflow,_c=e),e=JN(e,n.children),e.flags|=4096,e)}function b$(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),KC(t.return,e,r)}function lE(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function q6(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(xn(t,e,n.children,r),n=Ft.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b$(t,r,e);else if(t.tag===19)b$(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ct(Ft,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Cb(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),lE(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cb(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}lE(e,!0,r,null,o);break;case"together":lE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function P0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ps(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Sc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,r=Oa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Oa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Hee(t,e,r){switch(e.tag){case 3:z6(e),Ff();break;case 5:b6(e);break;case 1:Vn(e.type)&&xb(e);break;case 4:zN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ct(Sb,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ct(Ft,Ft.current&1),e.flags|=128,null):r&e.child.childLanes?G6(t,e,r):(Ct(Ft,Ft.current&1),t=Ps(t,e,r),t!==null?t.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return q6(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(Ft,Ft.current),n)break;return null;case 22:case 23:return e.lanes=0,V6(t,e,r)}return Ps(t,e,r)}var H6,rP,K6,Q6;H6=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};rP=function(){};K6=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ml(Bo.current);var o=null;switch(r){case"input":i=EC(t,i),n=EC(t,n),o=[];break;case"select":i=Vt({},i,{value:void 0}),n=Vt({},n,{value:void 0}),o=[];break;case"textarea":i=PC(t,i),n=PC(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vb)}IC(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sm.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Tt("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Q6=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ch(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Kee(t,e,r){var n=e.pendingProps;switch(MN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Vn(e.type)&&bb(),rn(e),null;case 3:return n=e.stateNode,Bf(),jt(Un),jt(hn),qN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Sv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ji!==null&&(uP(Ji),Ji=null))),rP(t,e),rn(e),null;case 5:GN(e);var i=Ml(vm.current);if(r=e.type,t!==null&&e.stateNode!=null)K6(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(X(166));return rn(e),null}if(t=Ml(Bo.current),Sv(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Po]=e,n[ym]=o,t=(e.mode&1)!==0,r){case"dialog":Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":case"embed":Tt("load",n);break;case"video":case"audio":for(i=0;i<op.length;i++)Tt(op[i],n);break;case"source":Tt("error",n);break;case"img":case"image":case"link":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"input":T2(n,o),Tt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Tt("invalid",n);break;case"textarea":N2(n,o),Tt("invalid",n)}IC(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&wv(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&wv(n.textContent,a,t),i=["children",""+a]):sm.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Tt("scroll",n)}switch(r){case"input":pv(n),I2(n,o,!0);break;case"textarea":pv(n),k2(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=vb)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=w5(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Po]=e,t[ym]=n,H6(t,e,!1,!1),e.stateNode=t;e:{switch(s=NC(r,n),r){case"dialog":Tt("cancel",t),Tt("close",t),i=n;break;case"iframe":case"object":case"embed":Tt("load",t),i=n;break;case"video":case"audio":for(i=0;i<op.length;i++)Tt(op[i],t);i=n;break;case"source":Tt("error",t),i=n;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),i=n;break;case"details":Tt("toggle",t),i=n;break;case"input":T2(t,n),i=EC(t,n),Tt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Vt({},n,{value:void 0}),Tt("invalid",t);break;case"textarea":N2(t,n),i=PC(t,n),Tt("invalid",t);break;default:i=n}IC(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?A5(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&S5(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&am(t,l):typeof l=="number"&&am(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(sm.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Tt("scroll",t):l!=null&&wN(t,o,l,s))}switch(r){case"input":pv(t),I2(t,n,!1);break;case"textarea":pv(t),k2(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Va(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Qu(t,!!n.multiple,o,!1):n.defaultValue!=null&&Qu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)Q6(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(X(166));if(r=Ml(vm.current),Ml(Bo.current),Sv(e)){if(n=e.stateNode,r=e.memoizedProps,n[Po]=e,(o=n.nodeValue!==r)&&(t=ii,t!==null))switch(t.tag){case 3:wv(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wv(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Po]=e,e.stateNode=n}return rn(e),null;case 13:if(jt(Ft),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&ei!==null&&e.mode&1&&!(e.flags&128))d6(),Ff(),e.flags|=98560,o=!1;else if(o=Sv(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[Po]=e}else Ff(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),o=!1}else Ji!==null&&(uP(Ji),Ji=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?dr===0&&(dr=3):ik())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return Bf(),rP(t,e),t===null&&pm(e.stateNode.containerInfo),rn(e),null;case 10:return UN(e.type._context),rn(e),null;case 17:return Vn(e.type)&&bb(),rn(e),null;case 19:if(jt(Ft),o=e.memoizedState,o===null)return rn(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)Ch(o,!1);else{if(dr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Cb(t),s!==null){for(e.flags|=128,Ch(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ct(Ft,Ft.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xt()>Vf&&(e.flags|=128,n=!0,Ch(o,!1),e.lanes=4194304)}else{if(!n)if(t=Cb(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ch(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!$t)return rn(e),null}else 2*Xt()-o.renderingStartTime>Vf&&r!==1073741824&&(e.flags|=128,n=!0,Ch(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,r=Ft.current,Ct(Ft,n?r&1|2:r&1),e):(rn(e),null);case 22:case 23:return nk(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Yn&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function Qee(t,e){switch(MN(e),e.tag){case 1:return Vn(e.type)&&bb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bf(),jt(Un),jt(hn),qN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return GN(e),null;case 13:if(jt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ff()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jt(Ft),null;case 4:return Bf(),null;case 10:return UN(e.type._context),null;case 22:case 23:return nk(),null;case 24:return null;default:return null}}var Cv=!1,ln=!1,Yee=typeof WeakSet=="function"?WeakSet:Set,ce=null;function $u(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Gt(t,e,n)}else r.current=null}function nP(t,e,r){try{r()}catch(n){Gt(t,e,n)}}var x$=!1;function Xee(t,e){if(BC=mb,t=Z5(),$N(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(a=s+i),d!==o||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===r&&++c===i&&(a=s),h===o&&++f===n&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(UC={focusedElem:t,selectionRange:r},mb=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,g=m.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Hi(e.type,y),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(S){Gt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return m=x$,x$=!1,m}function Ip(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&nP(e,r,o)}i=i.next}while(i!==n)}}function _w(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function iP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Y6(t){var e=t.alternate;e!==null&&(t.alternate=null,Y6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Po],delete e[ym],delete e[zC],delete e[jee],delete e[Ree])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X6(t){return t.tag===5||t.tag===3||t.tag===4}function _$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=vb));else if(n!==4&&(t=t.child,t!==null))for(oP(t,e,r),t=t.sibling;t!==null;)oP(t,e,r),t=t.sibling}function sP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(sP(t,e,r),t=t.sibling;t!==null;)sP(t,e,r),t=t.sibling}var Ur=null,Qi=!1;function Us(t,e,r){for(r=r.child;r!==null;)J6(t,e,r),r=r.sibling}function J6(t,e,r){if(Lo&&typeof Lo.onCommitFiberUnmount=="function")try{Lo.onCommitFiberUnmount(hw,r)}catch{}switch(r.tag){case 5:ln||$u(r,e);case 6:var n=Ur,i=Qi;Ur=null,Us(t,e,r),Ur=n,Qi=i,Ur!==null&&(Qi?(t=Ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ur.removeChild(r.stateNode));break;case 18:Ur!==null&&(Qi?(t=Ur,r=r.stateNode,t.nodeType===8?tE(t.parentNode,r):t.nodeType===1&&tE(t,r),fm(t)):tE(Ur,r.stateNode));break;case 4:n=Ur,i=Qi,Ur=r.stateNode.containerInfo,Qi=!0,Us(t,e,r),Ur=n,Qi=i;break;case 0:case 11:case 14:case 15:if(!ln&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&nP(r,e,s),i=i.next}while(i!==n)}Us(t,e,r);break;case 1:if(!ln&&($u(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Gt(r,e,a)}Us(t,e,r);break;case 21:Us(t,e,r);break;case 22:r.mode&1?(ln=(n=ln)||r.memoizedState!==null,Us(t,e,r),ln=n):Us(t,e,r);break;default:Us(t,e,r)}}function w$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Yee),e.forEach(function(n){var i=ste.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ur=a.stateNode,Qi=!1;break e;case 3:Ur=a.stateNode.containerInfo,Qi=!0;break e;case 4:Ur=a.stateNode.containerInfo,Qi=!0;break e}a=a.return}if(Ur===null)throw Error(X(160));J6(o,s,i),Ur=null,Qi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z6(e,t),e=e.sibling}function Z6(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),bo(t),n&4){try{Ip(3,t,t.return),_w(3,t)}catch(y){Gt(t,t.return,y)}try{Ip(5,t,t.return)}catch(y){Gt(t,t.return,y)}}break;case 1:zi(e,t),bo(t),n&512&&r!==null&&$u(r,r.return);break;case 5:if(zi(e,t),bo(t),n&512&&r!==null&&$u(r,r.return),t.flags&32){var i=t.stateNode;try{am(i,"")}catch(y){Gt(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&x5(i,o),NC(a,s);var c=NC(a,o);for(s=0;s<l.length;s+=2){var f=l[s],d=l[s+1];f==="style"?A5(i,d):f==="dangerouslySetInnerHTML"?S5(i,d):f==="children"?am(i,d):wN(i,f,d,c)}switch(a){case"input":AC(i,o);break;case"textarea":_5(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Qu(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Qu(i,!!o.multiple,o.defaultValue,!0):Qu(i,!!o.multiple,o.multiple?[]:"",!1))}i[ym]=o}catch(y){Gt(t,t.return,y)}}break;case 6:if(zi(e,t),bo(t),n&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){Gt(t,t.return,y)}}break;case 3:if(zi(e,t),bo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fm(e.containerInfo)}catch(y){Gt(t,t.return,y)}break;case 4:zi(e,t),bo(t);break;case 13:zi(e,t),bo(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(tk=Xt())),n&4&&w$(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(ln=(c=ln)||f,zi(e,t),ln=c):zi(e,t),bo(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(ce=t,f=t.child;f!==null;){for(d=ce=f;ce!==null;){switch(h=ce,p=h.child,h.tag){case 0:case 11:case 14:case 15:Ip(4,h,h.return);break;case 1:$u(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Gt(n,r,y)}}break;case 5:$u(h,h.return);break;case 22:if(h.memoizedState!==null){E$(d);continue}}p!==null?(p.return=h,ce=p):E$(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=E5("display",s))}catch(y){Gt(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Gt(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zi(e,t),bo(t),n&4&&w$(t);break;case 21:break;default:zi(e,t),bo(t)}}function bo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(X6(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(am(i,""),n.flags&=-33);var o=_$(t);sP(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=_$(t);oP(t,a,s);break;default:throw Error(X(161))}}catch(l){Gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Jee(t,e,r){ce=t,eW(t)}function eW(t,e,r){for(var n=(t.mode&1)!==0;ce!==null;){var i=ce,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Cv;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ln;a=Cv;var c=ln;if(Cv=s,(ln=l)&&!c)for(ce=i;ce!==null;)s=ce,l=s.child,s.tag===22&&s.memoizedState!==null?A$(i):l!==null?(l.return=s,ce=l):A$(i);for(;o!==null;)ce=o,eW(o),o=o.sibling;ce=i,Cv=a,ln=c}S$(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ce=o):S$(t)}}function S$(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||_w(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ln)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Hi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&s$(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}s$(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&fm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}ln||e.flags&512&&iP(e)}catch(h){Gt(e,e.return,h)}}if(e===t){ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,ce=r;break}ce=e.return}}function E$(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ce=r;break}ce=e.return}}function A$(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{_w(4,e)}catch(l){Gt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Gt(e,i,l)}}var o=e.return;try{iP(e)}catch(l){Gt(e,o,l)}break;case 5:var s=e.return;try{iP(e)}catch(l){Gt(e,s,l)}}}catch(l){Gt(e,e.return,l)}if(e===t){ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ce=a;break}ce=e.return}}var Zee=Math.ceil,Ib=$s.ReactCurrentDispatcher,ZN=$s.ReactCurrentOwner,ji=$s.ReactCurrentBatchConfig,rt=0,kr=null,rr=null,Qr=0,Yn=0,Du=rl(0),dr=0,wm=null,Sc=0,ww=0,ek=0,Np=null,Dn=null,tk=0,Vf=1/0,as=null,Nb=!1,aP=null,Na=null,Pv=!1,pa=null,kb=0,kp=0,lP=null,T0=-1,I0=0;function Pn(){return rt&6?Xt():T0!==-1?T0:T0=Xt()}function ka(t){return t.mode&1?rt&2&&Qr!==0?Qr&-Qr:Dee.transition!==null?(I0===0&&(I0=M5()),I0):(t=ft,t!==0||(t=window.event,t=t===void 0?16:z5(t.type)),t):1}function uo(t,e,r,n){if(50<kp)throw kp=0,lP=null,Error(X(185));ig(t,r,n),(!(rt&2)||t!==kr)&&(t===kr&&(!(rt&2)&&(ww|=r),dr===4&&ia(t,Qr)),Wn(t,n),r===1&&rt===0&&!(e.mode&1)&&(Vf=Xt()+500,vw&&nl()))}function Wn(t,e){var r=t.callbackNode;DZ(t,e);var n=pb(t,t===kr?Qr:0);if(n===0)r!==null&&R2(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&R2(r),e===1)t.tag===0?$ee(C$.bind(null,t)):c6(C$.bind(null,t)),kee(function(){!(rt&6)&&nl()}),r=null;else{switch(F5(n)){case 1:r=PN;break;case 4:r=$5;break;case 16:r=hb;break;case 536870912:r=D5;break;default:r=hb}r=lW(r,tW.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function tW(t,e){if(T0=-1,I0=0,rt&6)throw Error(X(327));var r=t.callbackNode;if(ef()&&t.callbackNode!==r)return null;var n=pb(t,t===kr?Qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ob(t,n);else{e=n;var i=rt;rt|=2;var o=nW();(kr!==t||Qr!==e)&&(as=null,Vf=Xt()+500,tc(t,e));do try{rte();break}catch(a){rW(t,a)}while(!0);BN(),Ib.current=o,rt=i,rr!==null?e=0:(kr=null,Qr=0,e=dr)}if(e!==0){if(e===2&&(i=$C(t),i!==0&&(n=i,e=cP(t,i))),e===1)throw r=wm,tc(t,0),ia(t,n),Wn(t,Xt()),r;if(e===6)ia(t,n);else{if(i=t.current.alternate,!(n&30)&&!ete(i)&&(e=Ob(t,n),e===2&&(o=$C(t),o!==0&&(n=o,e=cP(t,o))),e===1))throw r=wm,tc(t,0),ia(t,n),Wn(t,Xt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(X(345));case 2:vl(t,Dn,as);break;case 3:if(ia(t,n),(n&130023424)===n&&(e=tk+500-Xt(),10<e)){if(pb(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=WC(vl.bind(null,t,Dn,as),e);break}vl(t,Dn,as);break;case 4:if(ia(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-co(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Zee(n/1960))-n,10<n){t.timeoutHandle=WC(vl.bind(null,t,Dn,as),n);break}vl(t,Dn,as);break;case 5:vl(t,Dn,as);break;default:throw Error(X(329))}}}return Wn(t,Xt()),t.callbackNode===r?tW.bind(null,t):null}function cP(t,e){var r=Np;return t.current.memoizedState.isDehydrated&&(tc(t,e).flags|=256),t=Ob(t,e),t!==2&&(e=Dn,Dn=r,e!==null&&uP(e)),t}function uP(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function ete(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!po(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ia(t,e){for(e&=~ek,e&=~ww,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-co(e),n=1<<r;t[r]=-1,e&=~n}}function C$(t){if(rt&6)throw Error(X(327));ef();var e=pb(t,0);if(!(e&1))return Wn(t,Xt()),null;var r=Ob(t,e);if(t.tag!==0&&r===2){var n=$C(t);n!==0&&(e=n,r=cP(t,n))}if(r===1)throw r=wm,tc(t,0),ia(t,e),Wn(t,Xt()),r;if(r===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vl(t,Dn,as),Wn(t,Xt()),null}function rk(t,e){var r=rt;rt|=1;try{return t(e)}finally{rt=r,rt===0&&(Vf=Xt()+500,vw&&nl())}}function Ec(t){pa!==null&&pa.tag===0&&!(rt&6)&&ef();var e=rt;rt|=1;var r=ji.transition,n=ft;try{if(ji.transition=null,ft=1,t)return t()}finally{ft=n,ji.transition=r,rt=e,!(rt&6)&&nl()}}function nk(){Yn=Du.current,jt(Du)}function tc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Nee(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(MN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bb();break;case 3:Bf(),jt(Un),jt(hn),qN();break;case 5:GN(n);break;case 4:Bf();break;case 13:jt(Ft);break;case 19:jt(Ft);break;case 10:UN(n.type._context);break;case 22:case 23:nk()}r=r.return}if(kr=t,rr=t=Oa(t.current,null),Qr=Yn=e,dr=0,wm=null,ek=ww=Sc=0,Dn=Np=null,Dl!==null){for(e=0;e<Dl.length;e++)if(r=Dl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Dl=null}return t}function rW(t,e){do{var r=rr;try{if(BN(),A0.current=Tb,Pb){for(var n=Ut.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Pb=!1}if(wc=0,Nr=lr=Ut=null,Tp=!1,bm=0,ZN.current=null,r===null||r.return===null){dr=1,wm=e,rr=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=Qr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=h$(s);if(p!==null){p.flags&=-257,p$(p,s,a,o,e),p.mode&1&&d$(o,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){d$(o,c,e),ik();break e}l=Error(X(426))}}else if($t&&a.mode&1){var g=h$(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),p$(g,s,a,o,e),FN(Uf(l,a));break e}}o=l=Uf(l,a),dr!==4&&(dr=2),Np===null?Np=[o]:Np.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=L6(o,l,e);o$(o,b);break e;case 1:a=l;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Na===null||!Na.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=B6(o,a,e);o$(o,S);break e}}o=o.return}while(o!==null)}oW(r)}catch(_){e=_,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(!0)}function nW(){var t=Ib.current;return Ib.current=Tb,t===null?Tb:t}function ik(){(dr===0||dr===3||dr===2)&&(dr=4),kr===null||!(Sc&268435455)&&!(ww&268435455)||ia(kr,Qr)}function Ob(t,e){var r=rt;rt|=2;var n=nW();(kr!==t||Qr!==e)&&(as=null,tc(t,e));do try{tte();break}catch(i){rW(t,i)}while(!0);if(BN(),rt=r,Ib.current=n,rr!==null)throw Error(X(261));return kr=null,Qr=0,dr}function tte(){for(;rr!==null;)iW(rr)}function rte(){for(;rr!==null&&!PZ();)iW(rr)}function iW(t){var e=aW(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?oW(t):rr=e,ZN.current=null}function oW(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Qee(r,e),r!==null){r.flags&=32767,rr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dr=6,rr=null;return}}else if(r=Kee(r,e,Yn),r!==null){rr=r;return}if(e=e.sibling,e!==null){rr=e;return}rr=e=t}while(e!==null);dr===0&&(dr=5)}function vl(t,e,r){var n=ft,i=ji.transition;try{ji.transition=null,ft=1,nte(t,e,r,n)}finally{ji.transition=i,ft=n}return null}function nte(t,e,r,n){do ef();while(pa!==null);if(rt&6)throw Error(X(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(MZ(t,o),t===kr&&(rr=kr=null,Qr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pv||(Pv=!0,lW(hb,function(){return ef(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ji.transition,ji.transition=null;var s=ft;ft=1;var a=rt;rt|=4,ZN.current=null,Xee(t,r),Z6(r,t),See(UC),mb=!!BC,UC=BC=null,t.current=r,Jee(r),TZ(),rt=a,ft=s,ji.transition=o}else t.current=r;if(Pv&&(Pv=!1,pa=t,kb=i),o=t.pendingLanes,o===0&&(Na=null),kZ(r.stateNode),Wn(t,Xt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Nb)throw Nb=!1,t=aP,aP=null,t;return kb&1&&t.tag!==0&&ef(),o=t.pendingLanes,o&1?t===lP?kp++:(kp=0,lP=t):kp=0,nl(),null}function ef(){if(pa!==null){var t=F5(kb),e=ji.transition,r=ft;try{if(ji.transition=null,ft=16>t?16:t,pa===null)var n=!1;else{if(t=pa,pa=null,kb=0,rt&6)throw Error(X(331));var i=rt;for(rt|=4,ce=t.current;ce!==null;){var o=ce,s=o.child;if(ce.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ce=c;ce!==null;){var f=ce;switch(f.tag){case 0:case 11:case 15:Ip(8,f,o)}var d=f.child;if(d!==null)d.return=f,ce=d;else for(;ce!==null;){f=ce;var h=f.sibling,p=f.return;if(Y6(f),f===c){ce=null;break}if(h!==null){h.return=p,ce=h;break}ce=p}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}ce=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ce=s;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ip(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ce=b;break e}ce=o.return}}var v=t.current;for(ce=v;ce!==null;){s=ce;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ce=x;else e:for(s=v;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_w(9,a)}}catch(_){Gt(a,a.return,_)}if(a===s){ce=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ce=S;break e}ce=a.return}}if(rt=i,nl(),Lo&&typeof Lo.onPostCommitFiberRoot=="function")try{Lo.onPostCommitFiberRoot(hw,t)}catch{}n=!0}return n}finally{ft=r,ji.transition=e}}return!1}function P$(t,e,r){e=Uf(r,e),e=L6(t,e,1),t=Ia(t,e,1),e=Pn(),t!==null&&(ig(t,1,e),Wn(t,e))}function Gt(t,e,r){if(t.tag===3)P$(t,t,r);else for(;e!==null;){if(e.tag===3){P$(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Na===null||!Na.has(n))){t=Uf(r,t),t=B6(e,t,1),e=Ia(e,t,1),t=Pn(),e!==null&&(ig(e,1,t),Wn(e,t));break}}e=e.return}}function ite(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pn(),t.pingedLanes|=t.suspendedLanes&r,kr===t&&(Qr&r)===r&&(dr===4||dr===3&&(Qr&130023424)===Qr&&500>Xt()-tk?tc(t,0):ek|=r),Wn(t,e)}function sW(t,e){e===0&&(t.mode&1?(e=gv,gv<<=1,!(gv&130023424)&&(gv=4194304)):e=1);var r=Pn();t=Cs(t,e),t!==null&&(ig(t,e,r),Wn(t,r))}function ote(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),sW(t,r)}function ste(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(e),sW(t,r)}var aW;aW=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Fn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Fn=!1,Hee(t,e,r);Fn=!!(t.flags&131072)}else Fn=!1,$t&&e.flags&1048576&&u6(e,wb,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;P0(t,e),t=e.pendingProps;var i=Mf(e,hn.current);Zu(e,r),i=KN(null,e,n,t,i,r);var o=QN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vn(n)?(o=!0,xb(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,WN(e),i.updater=bw,e.stateNode=i,i._reactInternals=e,YC(e,n,t,r),e=ZC(null,e,n,!0,o,r)):(e.tag=0,$t&&o&&DN(e),xn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(P0(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=lte(n),t=Hi(n,t),i){case 0:e=JC(null,e,n,t,r);break e;case 1:e=g$(null,e,n,t,r);break e;case 11:e=m$(null,e,n,t,r);break e;case 14:e=y$(null,e,n,Hi(n.type,t),r);break e}throw Error(X(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),JC(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),g$(t,e,n,i,r);case 3:e:{if(z6(e),t===null)throw Error(X(387));n=e.pendingProps,o=e.memoizedState,i=o.element,p6(t,e),Ab(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Uf(Error(X(423)),e),e=v$(t,e,n,r,i);break e}else if(n!==i){i=Uf(Error(X(424)),e),e=v$(t,e,n,r,i);break e}else for(ei=Ta(e.stateNode.containerInfo.firstChild),ii=e,$t=!0,Ji=null,r=v6(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ff(),n===i){e=Ps(t,e,r);break e}xn(t,e,n,r)}e=e.child}return e;case 5:return b6(e),t===null&&HC(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,VC(n,i)?s=null:o!==null&&VC(n,o)&&(e.flags|=32),W6(t,e),xn(t,e,s,r),e.child;case 6:return t===null&&HC(e),null;case 13:return G6(t,e,r);case 4:return zN(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Lf(e,null,n,r):xn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),m$(t,e,n,i,r);case 7:return xn(t,e,e.pendingProps,r),e.child;case 8:return xn(t,e,e.pendingProps.children,r),e.child;case 12:return xn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ct(Sb,n._currentValue),n._currentValue=s,o!==null)if(po(o.value,s)){if(o.children===i.children&&!Un.current){e=Ps(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=vs(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),KC(o.return,r,e),a.lanes|=r;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(X(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),KC(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}xn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Zu(e,r),i=Fi(i),n=n(i),e.flags|=1,xn(t,e,n,r),e.child;case 14:return n=e.type,i=Hi(n,e.pendingProps),i=Hi(n.type,i),y$(t,e,n,i,r);case 15:return U6(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),P0(t,e),e.tag=1,Vn(n)?(t=!0,xb(e)):t=!1,Zu(e,r),y6(e,n,i),YC(e,n,i,r),ZC(null,e,n,!0,t,r);case 19:return q6(t,e,r);case 22:return V6(t,e,r)}throw Error(X(156,e.tag))};function lW(t,e){return R5(t,e)}function ate(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(t,e,r,n){return new ate(t,e,r,n)}function ok(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lte(t){if(typeof t=="function")return ok(t)?1:0;if(t!=null){if(t=t.$$typeof,t===EN)return 11;if(t===AN)return 14}return 2}function Oa(t,e){var r=t.alternate;return r===null?(r=Ii(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function N0(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")ok(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Cu:return rc(r.children,i,o,e);case SN:s=8,i|=8;break;case xC:return t=Ii(12,r,e,i|2),t.elementType=xC,t.lanes=o,t;case _C:return t=Ii(13,r,e,i),t.elementType=_C,t.lanes=o,t;case wC:return t=Ii(19,r,e,i),t.elementType=wC,t.lanes=o,t;case g5:return Sw(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case m5:s=10;break e;case y5:s=9;break e;case EN:s=11;break e;case AN:s=14;break e;case Xs:s=16,n=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Ii(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function rc(t,e,r,n){return t=Ii(7,t,n,e),t.lanes=r,t}function Sw(t,e,r,n){return t=Ii(22,t,n,e),t.elementType=g5,t.lanes=r,t.stateNode={isHidden:!1},t}function cE(t,e,r){return t=Ii(6,t,null,e),t.lanes=r,t}function uE(t,e,r){return e=Ii(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cte(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zS(0),this.expirationTimes=zS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zS(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sk(t,e,r,n,i,o,s,a,l){return t=new cte(t,e,r,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ii(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},WN(o),t}function ute(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Au,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function cW(t){if(!t)return Wa;t=t._reactInternals;e:{if(Fc(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var r=t.type;if(Vn(r))return l6(t,r,e)}return e}function uW(t,e,r,n,i,o,s,a,l){return t=sk(r,n,!0,t,i,o,s,a,l),t.context=cW(null),r=t.current,n=Pn(),i=ka(r),o=vs(n,i),o.callback=e??null,Ia(r,o,i),t.current.lanes=i,ig(t,i,n),Wn(t,n),t}function Ew(t,e,r,n){var i=e.current,o=Pn(),s=ka(i);return r=cW(r),e.context===null?e.context=r:e.pendingContext=r,e=vs(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ia(i,e,s),t!==null&&(uo(t,i,s,o),E0(t,i,s)),s}function jb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T$(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ak(t,e){T$(t,e),(t=t.alternate)&&T$(t,e)}function fte(){return null}var fW=typeof reportError=="function"?reportError:function(t){console.error(t)};function lk(t){this._internalRoot=t}Aw.prototype.render=lk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Ew(t,e,null,null)};Aw.prototype.unmount=lk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ec(function(){Ew(null,t,null,null)}),e[As]=null}};function Aw(t){this._internalRoot=t}Aw.prototype.unstable_scheduleHydration=function(t){if(t){var e=U5();t={blockedOn:null,target:t,priority:e};for(var r=0;r<na.length&&e!==0&&e<na[r].priority;r++);na.splice(r,0,t),r===0&&W5(t)}};function ck(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I$(){}function dte(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=jb(s);o.call(c)}}var s=uW(e,n,t,0,null,!1,!1,"",I$);return t._reactRootContainer=s,t[As]=s.current,pm(t.nodeType===8?t.parentNode:t),Ec(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=jb(l);a.call(c)}}var l=sk(t,0,!1,null,null,!1,!1,"",I$);return t._reactRootContainer=l,t[As]=l.current,pm(t.nodeType===8?t.parentNode:t),Ec(function(){Ew(e,l,r,n)}),l}function Pw(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=jb(s);a.call(l)}}Ew(e,s,t,i)}else s=dte(r,e,t,i,n);return jb(s)}L5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ip(e.pendingLanes);r!==0&&(TN(e,r|1),Wn(e,Xt()),!(rt&6)&&(Vf=Xt()+500,nl()))}break;case 13:Ec(function(){var n=Cs(t,1);if(n!==null){var i=Pn();uo(n,t,1,i)}}),ak(t,1)}};IN=function(t){if(t.tag===13){var e=Cs(t,134217728);if(e!==null){var r=Pn();uo(e,t,134217728,r)}ak(t,134217728)}};B5=function(t){if(t.tag===13){var e=ka(t),r=Cs(t,e);if(r!==null){var n=Pn();uo(r,t,e,n)}ak(t,e)}};U5=function(){return ft};V5=function(t,e){var r=ft;try{return ft=t,e()}finally{ft=r}};OC=function(t,e,r){switch(e){case"input":if(AC(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=gw(n);if(!i)throw Error(X(90));b5(n),AC(n,i)}}}break;case"textarea":_5(t,r);break;case"select":e=r.value,e!=null&&Qu(t,!!r.multiple,e,!1)}};T5=rk;I5=Ec;var hte={usingClientEntryPoint:!1,Events:[sg,Nu,gw,C5,P5,rk]},Ph={findFiberByHostInstance:$l,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pte={bundleType:Ph.bundleType,version:Ph.version,rendererPackageName:Ph.rendererPackageName,rendererConfig:Ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O5(t),t===null?null:t.stateNode},findFiberByHostInstance:Ph.findFiberByHostInstance||fte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tv.isDisabled&&Tv.supportsFiber)try{hw=Tv.inject(pte),Lo=Tv}catch{}}ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hte;ui.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ck(e))throw Error(X(200));return ute(t,e,null,r)};ui.createRoot=function(t,e){if(!ck(t))throw Error(X(299));var r=!1,n="",i=fW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sk(t,1,!1,null,null,r,!1,n,i),t[As]=e.current,pm(t.nodeType===8?t.parentNode:t),new lk(e)};ui.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=O5(e),t=t===null?null:t.stateNode,t};ui.flushSync=function(t){return Ec(t)};ui.hydrate=function(t,e,r){if(!Cw(e))throw Error(X(200));return Pw(null,t,e,!0,r)};ui.hydrateRoot=function(t,e,r){if(!ck(t))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=fW;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=uW(e,null,t,1,r??null,i,!1,o,s),t[As]=e.current,pm(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Aw(e)};ui.render=function(t,e,r){if(!Cw(e))throw Error(X(200));return Pw(null,t,e,!1,r)};ui.unmountComponentAtNode=function(t){if(!Cw(t))throw Error(X(40));return t._reactRootContainer?(Ec(function(){Pw(null,null,t,!1,function(){t._reactRootContainer=null,t[As]=null})}),!0):!1};ui.unstable_batchedUpdates=rk;ui.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Cw(r))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Pw(t,e,r,!1,n)};ui.version="18.2.0-next-9e3b772b8-20220608";function dW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dW)}catch(t){console.error(t)}}dW(),u5.exports=ui;var lg=u5.exports;const mte=ct(lg);var N$=lg;vC.createRoot=N$.createRoot,vC.hydrateRoot=N$.hydrateRoot;var hW={exports:{}},pW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=E;function yte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gte=typeof Object.is=="function"?Object.is:yte,vte=Wf.useState,bte=Wf.useEffect,xte=Wf.useLayoutEffect,_te=Wf.useDebugValue;function wte(t,e){var r=e(),n=vte({inst:{value:r,getSnapshot:e}}),i=n[0].inst,o=n[1];return xte(function(){i.value=r,i.getSnapshot=e,fE(i)&&o({inst:i})},[t,r,e]),bte(function(){return fE(i)&&o({inst:i}),t(function(){fE(i)&&o({inst:i})})},[t]),_te(r),r}function fE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!gte(t,r)}catch{return!0}}function Ste(t,e){return e()}var Ete=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ste:wte;pW.useSyncExternalStore=Wf.useSyncExternalStore!==void 0?Wf.useSyncExternalStore:Ete;hW.exports=pW;var uk=hW.exports;const{useEffect:Ate,useLayoutEffect:Cte,useRef:Pte,useInsertionEffect:Tte}=oZ,Ite=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nte=Ite?Cte:Ate,kte=Tte||Nte,mW=t=>{const e=Pte([t,(...r)=>e[0](...r)]).current;return kte(()=>{e[0]=t}),e[1]},Ote=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",jte=(t,e="")=>t[0]==="~"?t.slice(1):e+t,Rte="popstate",fk="pushState",dk="replaceState",$te="hashchange",k$=[Rte,fk,dk,$te],Dte=t=>{for(const e of k$)addEventListener(e,t);return()=>{for(const e of k$)removeEventListener(e,t)}},Mte=(t,e)=>uk.useSyncExternalStore(Dte,t,e),O$=()=>location.pathname,Fte=({ssrPath:t}={})=>Mte(O$,t?()=>t:O$),Lte=(t,{replace:e=!1}={})=>history[e?dk:fk](null,"",t),Bte=(t={})=>[Ote(t.base,Fte(t)),mW((e,r)=>Lte(jte(e,t.base),r))];if(typeof history<"u")for(const t of[fk,dk]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}function Ute(t=Wte){let e={};const r=n=>e[n]||(e[n]=t(n));return(n,i)=>{const{regexp:o,keys:s}=r(n||""),a=o.exec(i);return a?[!0,s.reduce((c,f,d)=>(c[f.name]=a[d+1],c),{})]:[!1,null]}}const j$=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),Vte=(t,e,r)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&r&&(n="(?:\\/"+n+")"),n+(e?"?":"")},Wte=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let r=null,n=0,i=[],o="";for(;(r=e.exec(t))!==null;){const[s,a,l]=r,c=l==="+"||l==="*",f=l==="?"||l==="*",d=f&&t[r.index-1]==="/"?1:0,h=t.substring(n,r.index-d);i.push({name:a}),n=e.lastIndex,o+=j$(h)+Vte(c,f,d)}return o+=j$(t.substring(n)),{keys:i,regexp:new RegExp("^"+o+"(?:\\/)?$","i")}},zte={hook:Bte,matcher:Ute(),base:""},Gte=E.createContext(zte),Tw=()=>E.useContext(Gte),Iw=t=>t.hook(t),qte=()=>Iw(Tw()),Hte=t=>{const e=Tw(),[r]=Iw(e);return e.matcher(t,r)},yW=E.createContext({params:{}}),Kte=()=>E.useContext(yW).params,R$=(t,e)=>E.createElement(yW.Provider,{value:{params:t},children:e}),Ye=({path:t,match:e,component:r,children:n})=>{const i=Hte(t),[o,s]=e||i;return o?r?R$(s,E.createElement(r,{params:s})):R$(s,typeof n=="function"?n(s):n):null};E.forwardRef((t,e)=>{const r=Tw(),[,n]=Iw(r),{to:i,href:o=i,children:s,onClick:a}=t,l=mW(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(a&&a(d),d.defaultPrevented||(d.preventDefault(),n(i||o,t)))}),c={href:o[0]==="~"?o.slice(1):r.base+o,onClick:l,to:null,ref:e},f=E.isValidElement(s)?s:E.createElement("a",t);return E.cloneElement(f,c)});const fP=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===E.Fragment?fP(e.props.children):fP(e))):[t],Qte=({children:t,location:e})=>{const r=Tw(),n=r.matcher,[i]=Iw(r);for(const o of fP(t)){let s=0;if(E.isValidElement(o)&&(s=o.props.path?n(o.props.path,e||i):[!0,{}])[0])return E.cloneElement(o,{match:s})}return null},Yte="modulepreload",Xte=function(t){return"/"+t},$$={},gW=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link");i=Promise.all(r.map(s=>{if(s=Xte(s),s in $$)return;$$[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let d=o.length-1;d>=0;d--){const h=o[d];if(h.href===s&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":Yte,a||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),a)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Jte=t=>{t&&t instanceof Function&&gW(()=>import("./web-vitals-BptxjviT.js"),__vite__mapDeps([])).then(({getCLS:e,getFID:r,getFCP:n,getLCP:i,getTTFB:o})=>{e(t),r(t),n(t),i(t),o(t)})};var D$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J=function(t,e){if(!t)throw Ud(e)},Ud=function(t){return new Error("Firebase Database ("+vW.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Zte=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],s=t[r++],a=t[r++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},hk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,f=o>>2,d=(o&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,s||(h=64)),n.push(r[f],r[d],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zte(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new ere;const h=o<<2|a>>4;if(n.push(h),c!==64){const p=a<<4&240|c>>2;if(n.push(p),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ere extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xW=function(t){const e=bW(t);return hk.encodeByteArray(e,!0)},Rb=function(t){return xW(t).replace(/\./g,"")},dP=function(t){try{return hk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tre(t){return _W(void 0,t)}function _W(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!rre(r)||(t[r]=_W(t[r],e[r]));return t}function rre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ire=()=>nre().__FIREBASE_DEFAULTS__,ore=()=>{if(typeof process>"u"||typeof D$>"u")return;const t=D$.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dP(t[1]);return e&&JSON.parse(e)},pk=()=>{try{return ire()||ore()||sre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},are=t=>{var e,r;return(r=(e=pk())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},mk=t=>{const e=are(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},wW=()=>{var t;return(t=pk())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rb(JSON.stringify(r)),Rb(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sm())}function lre(){var t;const e=(t=pk())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EW(){return vW.NODE_ADMIN===!0}function ure(){return!lre()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AW(){try{return typeof indexedDB=="object"}catch{return!1}}function fre(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dre="FirebaseError";class Lc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=dre,Object.setPrototypeOf(this,Lc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CW.prototype.create)}}class CW{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?hre(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Lc(i,a,n)}}function hre(t,e){return t.replace(pre,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const pre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t){return JSON.parse(t)}function ur(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=function(t){let e={},r={},n={},i="";try{const o=t.split(".");e=Em(dP(o[0])||""),r=Em(dP(o[1])||""),i=o[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:i}},mre=function(t){const e=PW(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},yre=function(t){const e=PW(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function M$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $b(t,e,r){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}function hP(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],s=e[i];if(F$(o)&&F$(s)){if(!hP(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function F$(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gre(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let d=0;d<16;d++)n[d]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let d=16;d<80;d++){const h=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,f;for(let d=0;d<80;d++){d<40?d<20?(c=a^o&(s^a),f=1518500249):(c=o^s^a,f=1859775393):d<60?(c=o&s|a&(o|s),f=2400959708):(c=o^s^a,f=3395469782);const h=(i<<5|i>>>27)+c+l+f+n[d]&4294967295;l=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<r;){if(s===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<r;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<r;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[n]=this.chain_[i]>>o&255,++n;return e}}function ug(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bre=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i>=55296&&i<=56319){const o=i-55296;n++,J(n<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(n)-56320;i=65536+(o<<10)+s}i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):i<65536?(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Nw=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){return t&&t._delegate?t._delegate:t}class Ac{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xre=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new cg;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wre(e))try{this.getOrInitializeService({instanceIdentifier:bl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bl){return this.instances.has(e)}getOptions(e=bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_re(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=bl){return this.component?this.component.multipleInstances?e:bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _re(t){return t===bl?void 0:t}function wre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new xre(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const Ere={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},Are=et.INFO,Cre={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},Pre=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Cre[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gk{constructor(e){this.name=e,this._logLevel=Are,this._logHandler=Pre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ere[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const Tre=(t,e)=>e.some(r=>t instanceof r);let L$,B$;function Ire(){return L$||(L$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nre(){return B$||(B$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TW=new WeakMap,pP=new WeakMap,IW=new WeakMap,dE=new WeakMap,vk=new WeakMap;function kre(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(ja(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&TW.set(r,t)}).catch(()=>{}),vk.set(e,t),e}function Ore(t){if(pP.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});pP.set(t,e)}let mP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return pP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IW.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ja(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jre(t){mP=t(mP)}function Rre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(hE(this),e,...r);return IW.set(n,e.sort?e.sort():[e]),ja(n)}:Nre().includes(t)?function(...e){return t.apply(hE(this),e),ja(TW.get(this))}:function(...e){return ja(t.apply(hE(this),e))}}function $re(t){return typeof t=="function"?Rre(t):(t instanceof IDBTransaction&&Ore(t),Tre(t,Ire())?new Proxy(t,mP):t)}function ja(t){if(t instanceof IDBRequest)return kre(t);if(dE.has(t))return dE.get(t);const e=$re(t);return e!==t&&(dE.set(t,e),vk.set(e,t)),e}const hE=t=>vk.get(t);function Dre(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=ja(s);return n&&s.addEventListener("upgradeneeded",l=>{n(ja(s.result),l.oldVersion,l.newVersion,ja(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Mre=["get","getKey","getAll","getAllKeys","count"],Fre=["put","add","delete","clear"],pE=new Map;function U$(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pE.get(e))return pE.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Fre.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Mre.includes(r)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),i&&l.done]))[0]};return pE.set(e,o),o}jre(t=>({...t,get:(e,r,n)=>U$(e,r)||t.get(e,r,n),has:(e,r)=>!!U$(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Bre(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Bre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yP="@firebase/app",V$="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new gk("@firebase/app"),Ure="@firebase/app-compat",Vre="@firebase/analytics-compat",Wre="@firebase/analytics",zre="@firebase/app-check-compat",Gre="@firebase/app-check",qre="@firebase/auth",Hre="@firebase/auth-compat",Kre="@firebase/database",Qre="@firebase/database-compat",Yre="@firebase/functions",Xre="@firebase/functions-compat",Jre="@firebase/installations",Zre="@firebase/installations-compat",ene="@firebase/messaging",tne="@firebase/messaging-compat",rne="@firebase/performance",nne="@firebase/performance-compat",ine="@firebase/remote-config",one="@firebase/remote-config-compat",sne="@firebase/storage",ane="@firebase/storage-compat",lne="@firebase/firestore",cne="@firebase/firestore-compat",une="firebase",fne="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="[DEFAULT]",dne={[yP]:"fire-core",[Ure]:"fire-core-compat",[Wre]:"fire-analytics",[Vre]:"fire-analytics-compat",[Gre]:"fire-app-check",[zre]:"fire-app-check-compat",[qre]:"fire-auth",[Hre]:"fire-auth-compat",[Kre]:"fire-rtdb",[Qre]:"fire-rtdb-compat",[Yre]:"fire-fn",[Xre]:"fire-fn-compat",[Jre]:"fire-iid",[Zre]:"fire-iid-compat",[ene]:"fire-fcm",[tne]:"fire-fcm-compat",[rne]:"fire-perf",[nne]:"fire-perf-compat",[ine]:"fire-rc",[one]:"fire-rc-compat",[sne]:"fire-gcs",[ane]:"fire-gcs-compat",[lne]:"fire-fst",[cne]:"fire-fst-compat","fire-js":"fire-js",[une]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Map,vP=new Map;function hne(t,e){try{t.container.addComponent(e)}catch(r){Cc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Gf(t){const e=t.name;if(vP.has(e))return Cc.debug(`There were multiple attempts to register component ${e}.`),!1;vP.set(e,t);for(const r of Db.values())hne(r,t);return!0}function bk(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pne={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ra=new CW("app","Firebase",pne);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ac("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=fne;function NW(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:gP,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Ra.create("bad-app-name",{appName:String(i)});if(r||(r=wW()),!r)throw Ra.create("no-options");const o=Db.get(i);if(o){if(hP(r,o.options)&&hP(n,o.config))return o;throw Ra.create("duplicate-app",{appName:i})}const s=new Sre(i);for(const l of vP.values())s.addComponent(l);const a=new mne(r,n,s);return Db.set(i,a),a}function _k(t=gP){const e=Db.get(t);if(!e&&t===gP&&wW())return NW();if(!e)throw Ra.create("no-app",{appName:t});return e}function Uo(t,e,r){var n;let i=(n=dne[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cc.warn(a.join(" "));return}Gf(new Ac(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yne="firebase-heartbeat-database",gne=1,Am="firebase-heartbeat-store";let mE=null;function kW(){return mE||(mE=Dre(yne,gne,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Am)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ra.create("idb-open",{originalErrorMessage:t.message})})),mE}async function vne(t){try{return await(await kW()).transaction(Am).objectStore(Am).get(OW(t))}catch(e){if(e instanceof Lc)Cc.warn(e.message);else{const r=Ra.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cc.warn(r.message)}}}async function W$(t,e){try{const n=(await kW()).transaction(Am,"readwrite");await n.objectStore(Am).put(e,OW(t)),await n.done}catch(r){if(r instanceof Lc)Cc.warn(r.message);else{const n=Ra.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Cc.warn(n.message)}}}function OW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bne=1024,xne=30*24*60*60*1e3;class _ne{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Sne(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=z$();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=xne}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=z$(),{heartbeatsToSend:n,unsentEntries:i}=wne(this._heartbeatsCache.heartbeats),o=Rb(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function z$(){return new Date().toISOString().substring(0,10)}function wne(t,e=bne){const r=[];let n=t.slice();for(const i of t){const o=r.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),G$(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),G$(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Sne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AW()?fre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vne(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return W$(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return W$(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function G$(t){return Rb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ene(t){Gf(new Ac("platform-logger",e=>new Lre(e),"PRIVATE")),Gf(new Ac("heartbeat",e=>new _ne(e),"PRIVATE")),Uo(yP,V$,t),Uo(yP,V$,"esm2017"),Uo("fire-js","")}Ene("");var q$={};const H$="@firebase/database",K$="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jW="";function Ane(t){jW=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ur(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:Em(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Zo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Cne(e)}}catch{}return new Pne},Fl=RW("localStorage"),bP=RW("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new gk("@firebase/database"),Tne=function(){let t=1;return function(){return t++}}(),$W=function(t){const e=bre(t),r=new vre;r.update(e);const n=r.digest();return hk.encodeByteArray(n)},fg=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=fg.apply(null,n):typeof n=="object"?e+=ur(n):e+=n,e+=" "}return e};let nc=null,Q$=!0;const Ine=function(t,e){J(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(tf.logLevel=et.VERBOSE,nc=tf.log.bind(tf),e&&bP.set("logging_enabled",!0)):typeof t=="function"?nc=t:(nc=null,bP.remove("logging_enabled"))},Wr=function(...t){if(Q$===!0&&(Q$=!1,nc===null&&bP.get("logging_enabled")===!0&&Ine(!0)),nc){const e=fg.apply(null,t);nc(e)}},dg=function(t){return function(...e){Wr(t,...e)}},xP=function(...t){const e="FIREBASE INTERNAL ERROR: "+fg(...t);tf.error(e)},Ts=function(...t){const e=`FIREBASE FATAL ERROR: ${fg(...t)}`;throw tf.error(e),new Error(e)},Tn=function(...t){const e="FIREBASE WARNING: "+fg(...t);tf.warn(e)},Nne=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},kne=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Pc="[MIN_NAME]",za="[MAX_NAME]",Bc=function(t,e){if(t===e)return 0;if(t===Pc||e===za)return-1;if(e===Pc||t===za)return 1;{const r=Y$(t),n=Y$(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},One=function(t,e){return t===e?0:t<e?-1:1},Th=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ur(e))},Sk=function(t){if(typeof t!="object"||t===null)return ur(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=ur(e[n]),r+=":",r+=Sk(t[e[n]]);return r+="}",r},DW=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let i=0;i<r;i+=e)i+e>r?n.push(t.substring(i,r)):n.push(t.substring(i,i+e));return n};function en(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const MW=function(t){J(!wk(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let i,o,s,a,l;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=a+n,s=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(o=0,s=Math.round(t/Math.pow(2,1-n-r))));const c=[];for(l=r;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const f=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(f.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},jne=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Rne=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $ne(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const Dne=new RegExp("^-?(0*)\\d{1,10}$"),Mne=-2147483648,Fne=2147483647,Y$=function(t){if(Dne.test(t)){const e=Number(t);if(e>=Mne&&e<=Fne)return e}return null},Vd=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Tn("Exception was thrown by user callback.",r),e},Math.floor(0))}},Lne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Op=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Wr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}}class rf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}rf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="5",FW="v",LW="s",BW="r",UW="f",VW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WW="ls",zW="p",_P="ac",GW="websocket",qW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e,r,n,i,o=!1,s="",a=!1,l=!1){this.secure=r,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function Vne(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function KW(t,e,r){J(typeof e=="string","typeof type must == string"),J(typeof r=="object","typeof params must == object");let n;if(e===GW)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===qW)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Vne(t)&&(r.ns=t.namespace);const i=[];return en(r,(o,s)=>{i.push(o+"="+s)}),n+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(){this.counters_={}}incrementCounter(e,r=1){Zo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return tre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={},gE={};function Ak(t){const e=t.toString();return yE[e]||(yE[e]=new Wne),yE[e]}function zne(t,e){const r=t.toString();return gE[r]||(gE[r]=e()),gE[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&Vd(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$="start",qne="close",Hne="pLPCommand",Kne="pRTLPCB",QW="id",YW="pw",XW="ser",Qne="cb",Yne="seg",Xne="ts",Jne="d",Zne="dframe",JW=1870,ZW=30,eie=JW-ZW,tie=25e3,rie=3e4;class Mu{constructor(e,r,n,i,o,s,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dg(e),this.stats_=Ak(r),this.urlFn=l=>(this.appCheckToken&&(l[_P]=this.appCheckToken),KW(r,qW,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Gne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rie)),kne(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ck((...o)=>{const[s,a,l,c,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===X$)this.id=a,this.password=l;else if(s===qne)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[X$]="t",n[XW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Qne]=this.scriptTagHolder.uniqueCallbackIdentifier),n[FW]=Ek,this.transportSessionId&&(n[LW]=this.transportSessionId),this.lastSessionId&&(n[WW]=this.lastSessionId),this.applicationId&&(n[zW]=this.applicationId),this.appCheckToken&&(n[_P]=this.appCheckToken),typeof location<"u"&&location.hostname&&VW.test(location.hostname)&&(n[BW]=UW);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mu.forceAllow_=!0}static forceDisallow(){Mu.forceDisallow_=!0}static isAvailable(){return Mu.forceAllow_?!0:!Mu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jne()&&!Rne()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=ur(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=xW(r),i=DW(n,eie);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[Zne]="t",n[QW]=e,n[YW]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=ur(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Ck{constructor(e,r,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Tne(),window[Hne+this.uniqueCallbackIdentifier]=e,window[Kne+this.uniqueCallbackIdentifier]=r,this.myIFrame=Ck.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Wr("frame writing exception"),a.stack&&Wr(a.stack),Wr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Wr("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[QW]=this.myID,e[YW]=this.myPW,e[XW]=this.currentSerial;let r=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ZW+n.length<=JW;){const s=this.pendingSegs.shift();n=n+"&"+Yne+i+"="+s.seg+"&"+Xne+i+"="+s.ts+"&"+Jne+i+"="+s.d,i++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},i=setTimeout(n,Math.floor(tie)),o=()=>{clearTimeout(i),n()};this.addTag(e,o)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Wr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nie=16384,iie=45e3;let Mb=null;typeof MozWebSocket<"u"?Mb=MozWebSocket:typeof WebSocket<"u"&&(Mb=WebSocket);class to{constructor(e,r,n,i,o,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dg(this.connId),this.stats_=Ak(r),this.connURL=to.connectionURL_(r,s,a,i,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,i,o){const s={};return s[FW]=Ek,typeof location<"u"&&location.hostname&&VW.test(location.hostname)&&(s[BW]=UW),r&&(s[LW]=r),n&&(s[WW]=n),i&&(s[_P]=i),o&&(s[zW]=o),KW(e,GW,s)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fl.set("previous_websocket_failure",!0);try{let n;EW(),this.mySock=new Mb(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){to.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Mb!==null&&!to.forceDisallow_}static previouslyFailed(){return Fl.isInMemoryStorage||Fl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=Em(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(J(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=ur(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=DW(r,nie);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iie))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}to.responsesRequiredToBeHealthy=2;to.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Mu,to]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=to&&to.isAvailable();let n=r&&!to.previouslyFailed();if(e.webSocketOnly&&(r||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[to];else{const i=this.transports_=[];for(const o of Cm.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);Cm.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cm.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oie=6e4,sie=5e3,aie=10*1024,lie=100*1024,vE="t",J$="d",cie="s",Z$="r",uie="e",eD="o",tD="a",rD="n",nD="p",fie="h";class die{constructor(e,r,n,i,o,s,a,l,c,f){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dg("c:"+this.id+":"),this.transportManager_=new Cm(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Op(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vE in e){const r=e[vE];r===tD?this.upgradeIfSecondaryHealthy_():r===Z$?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===eD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=Th("t",e),n=Th("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=Th("t",e),n=Th("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=Th(vE,e);if(J$ in e){const n=e[J$];if(r===fie){const i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(r===rD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===cie?this.onConnectionShutdown_(n):r===Z$?this.onReset_(n):r===uie?xP("Server Error: "+n):r===eD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xP("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Ek!==n&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Op(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(oie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Op(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nD,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{put(e,r,n,i){}merge(e,r,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t8=class{constructor(e){this.allowedEvents_=e,this.listeners_={},J(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const i=this.getInitialEvent(e);i&&r.apply(n,i)}off(e,r,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===r&&(!n||n===i[o].context)){i.splice(o,1);return}}validateEventType_(e){J(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb extends t8{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!SW()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fb}getInitialEvent(e){return J(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=32,oD=768;let ht=class{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}};function ot(){return new ht("")}function $e(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ga(t){return t.pieces_.length-t.pieceNum_}function At(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function Pk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function hie(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function Pm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function r8(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new ht(e,0)}function Ht(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof ht)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&r.push(n[i])}return new ht(r,0)}function De(t){return t.pieceNum_>=t.pieces_.length}function Sn(t,e){const r=$e(t),n=$e(e);if(r===null)return e;if(r===n)return Sn(At(t),At(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pie(t,e){const r=Pm(t,0),n=Pm(e,0);for(let i=0;i<r.length&&i<n.length;i++){const o=Bc(r[i],n[i]);if(o!==0)return o}return r.length===n.length?0:r.length<n.length?-1:1}function Tk(t,e){if(Ga(t)!==Ga(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function Ni(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(Ga(t)>Ga(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class mie{constructor(e,r){this.errorPrefix_=r,this.parts_=Pm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Nw(this.parts_[n]);n8(this)}}function yie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Nw(e),n8(t)}function gie(t){const e=t.parts_.pop();t.byteLength_-=Nw(e),t.parts_.length>0&&(t.byteLength_-=1)}function n8(t){if(t.byteLength_>oD)throw new Error(t.errorPrefix_+"has a key path longer than "+oD+" bytes ("+t.byteLength_+").");if(t.parts_.length>iD)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iD+") or object contains a cycle "+xl(t))}function xl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends t8{constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new Ik}getInitialEvent(e){return J(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=1e3,vie=60*5*1e3,sD=30*1e3,bie=1.3,xie=3e4,_ie="server_kill",aD=3;class bs extends e8{constructor(e,r,n,i,o,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=bs.nextPersistentConnectionId_++,this.log_=dg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ih,this.maxReconnectDelay_=vie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!EW())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ik.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Fb.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const i=++this.requestNumber_,o={r:i,a:e,b:r};this.log_(ur(o)),J(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const r=new cg,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(e,r,n,i){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),J(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:r,query:e,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+n+" for "+i);const o={p:n},s="q";e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,a=>{const l=a.d,c=a.s;bs.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Zo(e,"w")){const n=zf(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sD)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=mre(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,i=>{const o=i.s,s=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,r)}sendUnlisten_(e,r,n,i){this.log_("Unlisten on "+e+" for "+r);const o={p:e},s="n";i&&(o.q=n,o.t=i),this.sendRequest(s,o)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,i){const o={p:r,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{i&&setTimeout(()=>{i(s.s,s.d)},Math.floor(0))})}put(e,r,n,i){this.putInternal("p",e,r,n,i)}merge(e,r,n,i){this.putInternal("m",e,r,n,i)}putInternal(e,r,n,i,o){this.initConnection_();const s={p:r,d:n};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const o=n.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ur(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):xP("Unrecognized action received from server: "+ur(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){J(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ih,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ih,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>xie&&(this.reconnectDelay_=Ih),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+bs.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(d){J(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);s?Wr("getToken() completed but was canceled"):(Wr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new die(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,p=>{Tn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(_ie)},o))}catch(d){this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&Tn(d),l())}}}interrupt(e){Wr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],M$(this.interruptReasons_)&&(this.reconnectDelay_=Ih,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(o=>Sk(o)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,r){const n=new ht(e).toString();let i;if(this.listens.has(n)){const o=this.listens.get(n);i=o.get(r),o.delete(r),o.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,r){Wr("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=aD&&(this.reconnectDelay_=sD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Wr("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=aD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+jW.replace(/\./g,"-")]=1,SW()?e["framework.cordova"]=1:cre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Fb.getInstance().currentlyOnline();return M$(this.interruptReasons_)&&e}}bs.nextPersistentConnectionId_=0;bs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new Me(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new Me(Pc,e),i=new Me(Pc,r);return this.compare(n,i)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iv;class i8 extends kw{static get __EMPTY_NODE(){return Iv}static set __EMPTY_NODE(e){Iv=e}compare(e,r){return Bc(e.name,r.name)}isDefinedOn(e){throw Ud("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return Me.MIN}maxPost(){return new Me(za,Iv)}makePost(e,r){return J(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,Iv)}toString(){return".key"}}const ic=new i8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv=class{constructor(e,r,n,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=r?n(e.key,r):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Xn=class sp{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??sp.RED,this.left=i??ko.EMPTY_NODE,this.right=o??ko.EMPTY_NODE}copy(e,r,n,i,o){return new sp(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i=i.copy(null,r,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ko.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,i;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return ko.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,sp.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,sp.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Xn.RED=!0;Xn.BLACK=!1;class wie{copy(e,r,n,i,o){return this}insert(e,r,n){return new Xn(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ko=class k0{constructor(e,r=k0.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new k0(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Xn.BLACK,null,null))}remove(e){return new k0(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xn.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,i=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Nv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new Nv(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new Nv(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new Nv(this.root_,null,this.comparator_,!0,e)}};ko.EMPTY_NODE=new wie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(t,e){return Bc(t.name,e.name)}function Nk(t,e){return Bc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wP;function Eie(t){wP=t}const o8=function(t){return typeof t=="number"?"number:"+MW(t):"string:"+t},s8=function(t){if(t.isLeafNode()){const e=t.val();J(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zo(e,".sv"),"Priority must be a string or number.")}else J(t===wP||t.isEmpty(),"priority of unexpected type.");J(t===wP||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lD;class Ar{constructor(e,r=Ar.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,J(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),s8(this.priorityNode_)}static set __childrenNodeConstructor(e){lD=e}static get __childrenNodeConstructor(){return lD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ar(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ar.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return De(e)?this:$e(e)===".priority"?this.priorityNode_:Ar.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Ar.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=$e(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(J(n!==".priority"||Ga(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Ar.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+o8(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=MW(this.value_):e+=this.value_,this.lazyHash_=$W(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ar.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ar.__childrenNodeConstructor?-1:(J(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,i=Ar.VALUE_TYPE_ORDER.indexOf(r),o=Ar.VALUE_TYPE_ORDER.indexOf(n);return J(i>=0,"Unknown leaf type: "+r),J(o>=0,"Unknown leaf type: "+n),i===o?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Ar.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a8,l8;function Aie(t){a8=t}function Cie(t){l8=t}class Pie extends kw{compare(e,r){const n=e.node.getPriority(),i=r.node.getPriority(),o=n.compareTo(i);return o===0?Bc(e.name,r.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(za,new Ar("[PRIORITY-POST]",l8))}makePost(e,r){const n=a8(e);return new Me(r,new Ar("[PRIORITY-POST]",n))}toString(){return".priority"}}const Bt=new Pie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tie=Math.log(2);class Iie{constructor(e){const r=o=>parseInt(Math.log(o)/Tie,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lb=function(t,e,r,n){t.sort(e);const i=function(l,c){const f=c-l;let d,h;if(f===0)return null;if(f===1)return d=t[l],h=r?r(d):d,new Xn(h,d.node,Xn.BLACK,null,null);{const p=parseInt(f/2,10)+l,m=i(l,p),y=i(p+1,c);return d=t[p],h=r?r(d):d,new Xn(h,d.node,Xn.BLACK,m,y)}},o=function(l){let c=null,f=null,d=t.length;const h=function(m,y){const g=d-m,b=d;d-=m;const v=i(g+1,b),x=t[g],S=r?r(x):x;p(new Xn(S,x.node,y,null,v))},p=function(m){c?(c.left=m,c=m):(f=m,c=m)};for(let m=0;m<l.count;++m){const y=l.nextBitIsOne(),g=Math.pow(2,l.count-(m+1));y?h(g,Xn.BLACK):(h(g,Xn.BLACK),h(g,Xn.RED))}return f},s=new Iie(t.length),a=o(s);return new ko(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bE;const Xc={};class ds{constructor(e,r){this.indexes_=e,this.indexSet_=r}static get Default(){return J(Xc&&Bt,"ChildrenNode.ts has not been loaded"),bE=bE||new ds({".priority":Xc},{".priority":Bt}),bE}get(e){const r=zf(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof ko?r:null}hasIndex(e){return Zo(this.indexSet_,e.toString())}addIndex(e,r){J(e!==ic,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const o=r.getIterator(Me.Wrap);let s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),n.push(s),s=o.getNext();let a;i?a=Lb(n,e.getCompare()):a=Xc;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const f=Object.assign({},this.indexes_);return f[l]=a,new ds(f,c)}addToIndexes(e,r){const n=$b(this.indexes_,(i,o)=>{const s=zf(this.indexSet_,o);if(J(s,"Missing index implementation for "+o),i===Xc)if(s.isDefinedOn(e.node)){const a=[],l=r.getIterator(Me.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Lb(a,s.getCompare())}else return Xc;else{const a=r.get(e.name);let l=i;return a&&(l=l.remove(new Me(e.name,a))),l.insert(e,e.node)}});return new ds(n,this.indexSet_)}removeFromIndexes(e,r){const n=$b(this.indexes_,i=>{if(i===Xc)return i;{const o=r.get(e.name);return o?i.remove(new Me(e.name,o)):i}});return new ds(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;class we{constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&s8(this.priorityNode_),this.children_.isEmpty()&&J(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Nh||(Nh=new we(new ko(Nk),null,ds.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nh}updatePriority(e){return this.children_.isEmpty()?this:new we(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Nh:r}}getChild(e){const r=$e(e);return r===null?this:this.getImmediateChild(r).getChild(At(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(J(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new Me(e,r);let i,o;r.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,r),o=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?Nh:this.priorityNode_;return new we(i,s,o)}}updateChild(e,r){const n=$e(e);if(n===null)return r;{J($e(e)!==".priority"||Ga(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(At(e),r);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,i=0,o=!0;if(this.forEachChild(Bt,(s,a)=>{r[s]=a.val(e),n++,o&&we.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*n){const s=[];for(const a in r)s[a]=r[a];return s}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+o8(this.getPriority().val())+":"),this.forEachChild(Bt,(r,n)=>{const i=n.hash();i!==""&&(e+=":"+r+":"+i)}),this.lazyHash_=e===""?"":$W(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const i=this.resolveIndex_(n);if(i){const o=i.getPredecessorKey(new Me(e,r));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new Me(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new Me(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>r(i.name,i.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Me.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hg?-1:0}withIndex(e){if(e===ic||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new we(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===ic||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(Bt),i=r.getIterator(Bt);let o=n.getNext(),s=i.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=n.getNext(),s=i.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===ic?null:this.indexMap_.get(e.toString())}}we.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Nie extends we{constructor(){super(new ko(Nk),we.EMPTY_NODE,ds.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return we.EMPTY_NODE}isEmpty(){return!1}}const hg=new Nie;Object.defineProperties(Me,{MIN:{value:new Me(Pc,we.EMPTY_NODE)},MAX:{value:new Me(za,hg)}});i8.__EMPTY_NODE=we.EMPTY_NODE;Ar.__childrenNodeConstructor=we;Eie(hg);Cie(hg);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kie=!0;function cr(t,e=null){if(t===null)return we.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),J(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Ar(r,cr(e))}if(!(t instanceof Array)&&kie){const r=[];let n=!1;if(en(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=cr(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new Me(s,l)))}}),r.length===0)return we.EMPTY_NODE;const o=Lb(r,Sie,s=>s.name,Nk);if(n){const s=Lb(r,Bt.getCompare());return new we(o,cr(e),new ds({".priority":s},{".priority":Bt}))}else return new we(o,cr(e),ds.Default)}else{let r=we.EMPTY_NODE;return en(t,(n,i)=>{if(Zo(t,n)&&n.substring(0,1)!=="."){const o=cr(i);(o.isLeafNode()||!o.isEmpty())&&(r=r.updateImmediateChild(n,o))}}),r.updatePriority(cr(e))}}Aie(cr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk extends kw{constructor(e){super(),this.indexPath_=e,J(!De(e)&&$e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),i=this.extractChild(r.node),o=n.compareTo(i);return o===0?Bc(e.name,r.name):o}makePost(e,r){const n=cr(e),i=we.EMPTY_NODE.updateChild(this.indexPath_,n);return new Me(r,i)}maxPost(){const e=we.EMPTY_NODE.updateChild(this.indexPath_,hg);return new Me(za,e)}toString(){return Pm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie extends kw{compare(e,r){const n=e.node.compareTo(r.node);return n===0?Bc(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,r){const n=cr(e);return new Me(r,n)}toString(){return".value"}}const c8=new Oie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t){return{type:"value",snapshotNode:t}}function qf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Tm(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Im(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function jie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.index_=e}updateChild(e,r,n,i,o,s){J(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(r)?s.trackChildChange(Tm(r,a)):J(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(qf(r,n)):s.trackChildChange(Im(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Bt,(i,o)=>{r.hasChild(i)||n.trackChildChange(Tm(i,o))}),r.isLeafNode()||r.forEachChild(Bt,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||n.trackChildChange(Im(i,o,s))}else n.trackChildChange(qf(i,o))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?we.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.indexedFilter_=new Ok(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Nm.getStartPost_(e),this.endPost_=Nm.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,i,o,s){return this.matches(new Me(r,n))||(n=we.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,i,o,s)}updateFullNode(e,r,n){r.isLeafNode()&&(r=we.EMPTY_NODE);let i=r.withIndex(this.index_);i=i.updatePriority(we.EMPTY_NODE);const o=this;return r.forEachChild(Bt,(s,a)=>{o.matches(new Me(s,a))||(i=i.updateImmediateChild(s,we.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Nm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,i,o,s){return this.rangedFilter_.matches(new Me(r,n))||(n=we.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,i,o,s):this.fullLimitUpdateChild_(e,r,n,o,s)}updateFullNode(e,r,n){let i;if(r.isLeafNode()||r.isEmpty())i=we.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){i=we.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=r.withIndex(this.index_),i=i.updatePriority(we.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,we.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();const a=e;J(a.numChildren()===this.limit_,"");const l=new Me(r,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(l);if(a.hasChild(r)){const d=a.getImmediateChild(r);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===r||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:s(h,l);if(f&&!n.isEmpty()&&p>=0)return o!=null&&o.trackChildChange(Im(r,n,d)),a.updateImmediateChild(r,n);{o!=null&&o.trackChildChange(Tm(r,d));const y=a.updateImmediateChild(r,we.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o!=null&&o.trackChildChange(qf(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return n.isEmpty()?e:f&&s(c,l)>=0?(o!=null&&(o.trackChildChange(Tm(c.name,c.node)),o.trackChildChange(qf(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(c.name,we.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return J(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return J(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pc}hasEnd(){return this.endSet_}getIndexEndValue(){return J(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return J(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:za}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return J(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bt}copy(){const e=new jk;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $ie(t){return t.loadsAllData()?new Ok(t.getIndex()):t.hasLimit()?new Rie(t):new Nm(t)}function Die(t,e){const r=t.copy();return r.limitSet_=!0,r.limit_=e,r.viewFrom_="r",r}function Mie(t,e,r){const n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,r!=null?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function Fie(t,e,r){const n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,r!==void 0?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function Lie(t,e){const r=t.copy();return r.index_=e,r}function cD(t){const e={};if(t.isDefault())return e;let r;if(t.index_===Bt?r="$priority":t.index_===c8?r="$value":t.index_===ic?r="$key":(J(t.index_ instanceof kk,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=ur(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=ur(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+ur(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=ur(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+ur(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function uD(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==Bt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends e8{constructor(e,r,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=dg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(J(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,r,n,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Bb.getListenId_(e,n),a={};this.listens_[s]=a;const l=cD(e._queryParams);this.restRequest_(o+".json",l,(c,f)=>{let d=f;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,n),zf(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,r){const n=Bb.getListenId_(e,r);delete this.listens_[n]}get(e){const r=cD(e._queryParams),n=e._path.toString(),i=new cg;return this.restRequest_(n+".json",r,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(n,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(r.auth=i.accessToken),o&&o.token&&(r.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gre(r);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Em(a.responseText)}catch{Tn("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Tn("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bie{constructor(){this.rootNode_=we.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return{value:null,children:new Map}}function f8(t,e,r){if(De(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=$e(e);t.children.has(n)||t.children.set(n,Ub());const i=t.children.get(n);e=At(e),f8(i,e,r)}}function SP(t,e,r){t.value!==null?r(e,t.value):Uie(t,(n,i)=>{const o=new ht(e.toString()+"/"+n);SP(i,o,r)})}function Uie(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&en(this.last_,(n,i)=>{r[n]=r[n]-i}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=10*1e3,Wie=30*1e3,zie=5*60*1e3;class Gie{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Vie(e);const n=fD+(Wie-fD)*Math.random();Op(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;en(e,(i,o)=>{o>0&&Zo(this.statsToReport_,i)&&(r[i]=o,n=!0)}),n&&this.server_.reportStats(r),Op(this.reportStats_.bind(this),Math.floor(Math.random()*2*zie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var io;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(io||(io={}));function Rk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $k(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=io.ACK_USER_WRITE,this.source=Rk()}operationForChild(e){if(De(this.path)){if(this.affectedTree.value!=null)return J(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ht(e));return new Vb(ot(),r,this.revert)}}else return J($e(this.path)===e,"operationForChild called for unrelated child."),new Vb(At(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,r){this.source=e,this.path=r,this.type=io.LISTEN_COMPLETE}operationForChild(e){return De(this.path)?new km(this.source,ot()):new km(this.source,At(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=io.OVERWRITE}operationForChild(e){return De(this.path)?new Tc(this.source,ot(),this.snap.getImmediateChild(e)):new Tc(this.source,At(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=io.MERGE}operationForChild(e){if(De(this.path)){const r=this.children.subtree(new ht(e));return r.isEmpty()?null:r.value?new Tc(this.source,ot(),r.value):new Hf(this.source,ot(),r)}else return J($e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hf(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(De(e))return this.isFullyInitialized()&&!this.filtered_;const r=$e(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Hie(t,e,r,n){const i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(jie(s.childName,s.snapshotNode))}),kh(t,i,"child_removed",e,n,r),kh(t,i,"child_added",e,n,r),kh(t,i,"child_moved",o,n,r),kh(t,i,"child_changed",e,n,r),kh(t,i,"value",e,n,r),i}function kh(t,e,r,n,i,o){const s=n.filter(a=>a.type===r);s.sort((a,l)=>Qie(t,a,l)),s.forEach(a=>{const l=Kie(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Kie(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Qie(t,e,r){if(e.childName==null||r.childName==null)throw Ud("Should only compare child_ events.");const n=new Me(e.childName,e.snapshotNode),i=new Me(r.childName,r.snapshotNode);return t.index_.compare(n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){return{eventCache:t,serverCache:e}}function jp(t,e,r,n){return Ow(new qa(e,r,n),t.serverCache)}function d8(t,e,r,n){return Ow(t.eventCache,new qa(e,r,n))}function Wb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ic(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xE;const Yie=()=>(xE||(xE=new ko(One)),xE);class St{constructor(e,r=Yie()){this.value=e,this.children=r}static fromObject(e){let r=new St(null);return en(e,(n,i)=>{r=r.set(new ht(n),i)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:ot(),value:this.value};if(De(e))return null;{const n=$e(e),i=this.children.get(n);if(i!==null){const o=i.findRootMostMatchingPathAndValue(At(e),r);return o!=null?{path:Ht(new ht(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(De(e))return this;{const r=$e(e),n=this.children.get(r);return n!==null?n.subtree(At(e)):new St(null)}}set(e,r){if(De(e))return new St(r,this.children);{const n=$e(e),o=(this.children.get(n)||new St(null)).set(At(e),r),s=this.children.insert(n,o);return new St(this.value,s)}}remove(e){if(De(e))return this.children.isEmpty()?new St(null):new St(null,this.children);{const r=$e(e),n=this.children.get(r);if(n){const i=n.remove(At(e));let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),this.value===null&&o.isEmpty()?new St(null):new St(this.value,o)}else return this}}get(e){if(De(e))return this.value;{const r=$e(e),n=this.children.get(r);return n?n.get(At(e)):null}}setTree(e,r){if(De(e))return r;{const n=$e(e),o=(this.children.get(n)||new St(null)).setTree(At(e),r);let s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),new St(this.value,s)}}fold(e){return this.fold_(ot(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((i,o)=>{n[i]=o.fold_(Ht(e,i),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,ot(),r)}findOnPath_(e,r,n){const i=this.value?n(r,this.value):!1;if(i)return i;if(De(e))return null;{const o=$e(e),s=this.children.get(o);return s?s.findOnPath_(At(e),Ht(r,o),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,ot(),r)}foreachOnPath_(e,r,n){if(De(e))return this;{this.value&&n(r,this.value);const i=$e(e),o=this.children.get(i);return o?o.foreachOnPath_(At(e),Ht(r,i),n):new St(null)}}foreach(e){this.foreach_(ot(),e)}foreach_(e,r){this.children.inorderTraversal((n,i)=>{i.foreach_(Ht(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.writeTree_=e}static empty(){return new fo(new St(null))}}function Rp(t,e,r){if(De(e))return new fo(new St(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let o=n.value;const s=Sn(i,e);return o=o.updateChild(s,r),new fo(t.writeTree_.set(i,o))}else{const i=new St(r),o=t.writeTree_.setTree(e,i);return new fo(o)}}}function EP(t,e,r){let n=t;return en(r,(i,o)=>{n=Rp(n,Ht(e,i),o)}),n}function dD(t,e){if(De(e))return fo.empty();{const r=t.writeTree_.setTree(e,new St(null));return new fo(r)}}function AP(t,e){return Uc(t,e)!=null}function Uc(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(Sn(r.path,e)):null}function hD(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Bt,(n,i)=>{e.push(new Me(n,i))}):t.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new Me(n,i.value))}),e}function $a(t,e){if(De(e))return t;{const r=Uc(t,e);return r!=null?new fo(new St(r)):new fo(t.writeTree_.subtree(e))}}function CP(t){return t.writeTree_.isEmpty()}function Kf(t,e){return h8(ot(),t.writeTree_,e)}function h8(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(J(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):r=h8(Ht(t,i),o,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Ht(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e){return g8(e,t)}function Xie(t,e,r,n,i){J(n>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:i}),i&&(t.visibleWrites=Rp(t.visibleWrites,e,r)),t.lastWriteId=n}function Jie(t,e,r,n){J(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=EP(t.visibleWrites,e,r),t.lastWriteId=n}function Zie(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function eoe(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);J(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let i=n.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=r&&toe(a,n.path)?i=!1:Ni(n.path,a.path)&&(o=!0)),s--}if(i){if(o)return roe(t),!0;if(n.snap)t.visibleWrites=dD(t.visibleWrites,n.path);else{const a=n.children;en(a,l=>{t.visibleWrites=dD(t.visibleWrites,Ht(n.path,l))})}return!0}else return!1}function toe(t,e){if(t.snap)return Ni(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&Ni(Ht(t.path,r),e))return!0;return!1}function roe(t){t.visibleWrites=p8(t.allWrites,noe,ot()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function noe(t){return t.visible}function p8(t,e,r){let n=fo.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Ni(r,s)?(a=Sn(r,s),n=Rp(n,a,o.snap)):Ni(s,r)&&(a=Sn(s,r),n=Rp(n,ot(),o.snap.getChild(a)));else if(o.children){if(Ni(r,s))a=Sn(r,s),n=EP(n,a,o.children);else if(Ni(s,r))if(a=Sn(s,r),De(a))n=EP(n,ot(),o.children);else{const l=zf(o.children,$e(a));if(l){const c=l.getChild(At(a));n=Rp(n,ot(),c)}}}else throw Ud("WriteRecord should have .snap or .children")}}return n}function m8(t,e,r,n,i){if(!n&&!i){const o=Uc(t.visibleWrites,e);if(o!=null)return o;{const s=$a(t.visibleWrites,e);if(CP(s))return r;if(r==null&&!AP(s,ot()))return null;{const a=r||we.EMPTY_NODE;return Kf(s,a)}}}else{const o=$a(t.visibleWrites,e);if(!i&&CP(o))return r;if(!i&&r==null&&!AP(o,ot()))return null;{const s=function(c){return(c.visible||i)&&(!n||!~n.indexOf(c.writeId))&&(Ni(c.path,e)||Ni(e,c.path))},a=p8(t.allWrites,s,e),l=r||we.EMPTY_NODE;return Kf(a,l)}}}function ioe(t,e,r){let n=we.EMPTY_NODE;const i=Uc(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Bt,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(r){const o=$a(t.visibleWrites,e);return r.forEachChild(Bt,(s,a)=>{const l=Kf($a(o,new ht(s)),a);n=n.updateImmediateChild(s,l)}),hD(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{const o=$a(t.visibleWrites,e);return hD(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function ooe(t,e,r,n,i){J(n||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ht(e,r);if(AP(t.visibleWrites,o))return null;{const s=$a(t.visibleWrites,o);return CP(s)?i.getChild(r):Kf(s,i.getChild(r))}}function soe(t,e,r,n){const i=Ht(e,r),o=Uc(t.visibleWrites,i);if(o!=null)return o;if(n.isCompleteForChild(r)){const s=$a(t.visibleWrites,i);return Kf(s,n.getNode().getImmediateChild(r))}else return null}function aoe(t,e){return Uc(t.visibleWrites,e)}function loe(t,e,r,n,i,o,s){let a;const l=$a(t.visibleWrites,e),c=Uc(l,ot());if(c!=null)a=c;else if(r!=null)a=Kf(l,r);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const f=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let p=h.getNext();for(;p&&f.length<i;)d(p,n)!==0&&f.push(p),p=h.getNext();return f}else return[]}function coe(){return{visibleWrites:fo.empty(),allWrites:[],lastWriteId:-1}}function zb(t,e,r,n){return m8(t.writeTree,t.treePath,e,r,n)}function Mk(t,e){return ioe(t.writeTree,t.treePath,e)}function pD(t,e,r,n){return ooe(t.writeTree,t.treePath,e,r,n)}function Gb(t,e){return aoe(t.writeTree,Ht(t.treePath,e))}function uoe(t,e,r,n,i,o){return loe(t.writeTree,t.treePath,e,r,n,i,o)}function Fk(t,e,r){return soe(t.writeTree,t.treePath,e,r)}function y8(t,e){return g8(Ht(t.treePath,e),t.writeTree)}function g8(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class foe{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;J(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),J(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const o=i.type;if(r==="child_added"&&o==="child_removed")this.changeMap.set(n,Im(n,e.snapshotNode,i.snapshotNode));else if(r==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&o==="child_changed")this.changeMap.set(n,Tm(n,i.oldSnap));else if(r==="child_changed"&&o==="child_added")this.changeMap.set(n,qf(n,e.snapshotNode));else if(r==="child_changed"&&o==="child_changed")this.changeMap.set(n,Im(n,e.snapshotNode,i.oldSnap));else throw Ud("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class doe{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const v8=new doe;class Lk{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new qa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Fk(this.writes_,e,n)}}getChildAfterChild(e,r,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ic(this.viewCache_),o=uoe(this.writes_,i,r,1,n,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hoe(t){return{filter:t}}function poe(t,e){J(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),J(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function moe(t,e,r,n,i){const o=new foe;let s,a;if(r.type===io.OVERWRITE){const c=r;c.source.fromUser?s=PP(t,e,c.path,c.snap,n,i,o):(J(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!De(c.path),s=qb(t,e,c.path,c.snap,n,i,a,o))}else if(r.type===io.MERGE){const c=r;c.source.fromUser?s=goe(t,e,c.path,c.children,n,i,o):(J(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=TP(t,e,c.path,c.children,n,i,a,o))}else if(r.type===io.ACK_USER_WRITE){const c=r;c.revert?s=xoe(t,e,c.path,n,i,o):s=voe(t,e,c.path,c.affectedTree,n,i,o)}else if(r.type===io.LISTEN_COMPLETE)s=boe(t,e,r.path,n,o);else throw Ud("Unknown operation type: "+r.type);const l=o.getChanges();return yoe(e,s,l),{viewCache:s,changes:l}}function yoe(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=Wb(t);(r.length>0||!t.eventCache.isFullyInitialized()||i&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&r.push(u8(Wb(e)))}}function b8(t,e,r,n,i,o){const s=e.eventCache;if(Gb(n,r)!=null)return e;{let a,l;if(De(r))if(J(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ic(e),f=c instanceof we?c:we.EMPTY_NODE,d=Mk(n,f);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const c=zb(n,Ic(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=$e(r);if(c===".priority"){J(Ga(r)===1,"Can't have a priority with additional path components");const f=s.getNode();l=e.serverCache.getNode();const d=pD(n,r,f,l);d!=null?a=t.filter.updatePriority(f,d):a=s.getNode()}else{const f=At(r);let d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const h=pD(n,r,s.getNode(),l);h!=null?d=s.getNode().getImmediateChild(c).updateChild(f,h):d=s.getNode().getImmediateChild(c)}else d=Fk(n,c,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),c,d,f,i,o):a=s.getNode()}}return jp(e,a,s.isFullyInitialized()||De(r),t.filter.filtersNodes())}}function qb(t,e,r,n,i,o,s,a){const l=e.serverCache;let c;const f=s?t.filter:t.filter.getIndexedFilter();if(De(r))c=f.updateFullNode(l.getNode(),n,null);else if(f.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(r,n);c=f.updateFullNode(l.getNode(),p,null)}else{const p=$e(r);if(!l.isCompleteForPath(r)&&Ga(r)>1)return e;const m=At(r),g=l.getNode().getImmediateChild(p).updateChild(m,n);p===".priority"?c=f.updatePriority(l.getNode(),g):c=f.updateChild(l.getNode(),p,g,m,v8,null)}const d=d8(e,c,l.isFullyInitialized()||De(r),f.filtersNodes()),h=new Lk(i,d,o);return b8(t,d,r,i,h,a)}function PP(t,e,r,n,i,o,s){const a=e.eventCache;let l,c;const f=new Lk(i,e,o);if(De(r))c=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=jp(e,c,!0,t.filter.filtersNodes());else{const d=$e(r);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),n),l=jp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=At(r),p=a.getNode().getImmediateChild(d);let m;if(De(h))m=n;else{const y=f.getCompleteChild(d);y!=null?Pk(h)===".priority"&&y.getChild(r8(h)).isEmpty()?m=y:m=y.updateChild(h,n):m=we.EMPTY_NODE}if(p.equals(m))l=e;else{const y=t.filter.updateChild(a.getNode(),d,m,h,f,s);l=jp(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function mD(t,e){return t.eventCache.isCompleteForChild(e)}function goe(t,e,r,n,i,o,s){let a=e;return n.foreach((l,c)=>{const f=Ht(r,l);mD(e,$e(f))&&(a=PP(t,a,f,c,i,o,s))}),n.foreach((l,c)=>{const f=Ht(r,l);mD(e,$e(f))||(a=PP(t,a,f,c,i,o,s))}),a}function yD(t,e,r){return r.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function TP(t,e,r,n,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;De(r)?c=n:c=new St(null).setTree(r,n);const f=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(f.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),m=yD(t,p,h);l=qb(t,l,new ht(d),m,i,o,s,a)}}),c.children.inorderTraversal((d,h)=>{const p=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!f.hasChild(d)&&!p){const m=e.serverCache.getNode().getImmediateChild(d),y=yD(t,m,h);l=qb(t,l,new ht(d),y,i,o,s,a)}}),l}function voe(t,e,r,n,i,o,s){if(Gb(i,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(De(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return qb(t,e,r,l.getNode().getChild(r),i,o,a,s);if(De(r)){let c=new St(null);return l.getNode().forEachChild(ic,(f,d)=>{c=c.set(new ht(f),d)}),TP(t,e,r,c,i,o,a,s)}else return e}else{let c=new St(null);return n.foreach((f,d)=>{const h=Ht(r,f);l.isCompleteForPath(h)&&(c=c.set(f,l.getNode().getChild(h)))}),TP(t,e,r,c,i,o,a,s)}}function boe(t,e,r,n,i){const o=e.serverCache,s=d8(e,o.getNode(),o.isFullyInitialized()||De(r),o.isFiltered());return b8(t,s,r,n,v8,i)}function xoe(t,e,r,n,i,o){let s;if(Gb(n,r)!=null)return e;{const a=new Lk(n,e,i),l=e.eventCache.getNode();let c;if(De(r)||$e(r)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=zb(n,Ic(e));else{const d=e.serverCache.getNode();J(d instanceof we,"serverChildren would be complete if leaf node"),f=Mk(n,d)}f=f,c=t.filter.updateFullNode(l,f,o)}else{const f=$e(r);let d=Fk(n,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),d!=null?c=t.filter.updateChild(l,f,d,At(r),a,o):e.eventCache.getNode().hasChild(f)?c=t.filter.updateChild(l,f,we.EMPTY_NODE,At(r),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=zb(n,Ic(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Gb(n,ot())!=null,jp(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Ok(n.getIndex()),o=$ie(n);this.processor_=hoe(o);const s=r.serverCache,a=r.eventCache,l=i.updateFullNode(we.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(we.EMPTY_NODE,a.getNode(),null),f=new qa(l,s.isFullyInitialized(),i.filtersNodes()),d=new qa(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ow(d,f),this.eventGenerator_=new qie(this.query_)}get query(){return this.query_}}function woe(t){return t.viewCache_.serverCache.getNode()}function Soe(t){return Wb(t.viewCache_)}function Eoe(t,e){const r=Ic(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!De(e)&&!r.getImmediateChild($e(e)).isEmpty())?r.getChild(e):null}function gD(t){return t.eventRegistrations_.length===0}function Aoe(t,e){t.eventRegistrations_.push(e)}function vD(t,e,r){const n=[];if(r){J(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(r,i);s&&n.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return n}function bD(t,e,r,n){e.type===io.MERGE&&e.source.queryId!==null&&(J(Ic(t.viewCache_),"We should always have a full cache before handling merges"),J(Wb(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=moe(t.processor_,i,e,r,n);return poe(t.processor_,o.viewCache),J(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,x8(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Coe(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Bt,(o,s)=>{n.push(qf(o,s))}),r.isFullyInitialized()&&n.push(u8(r.getNode())),x8(t,n,r.getNode(),e)}function x8(t,e,r,n){const i=n?[n]:t.eventRegistrations_;return Hie(t.eventGenerator_,e,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hb;class _8{constructor(){this.views=new Map}}function Poe(t){J(!Hb,"__referenceConstructor has already been defined"),Hb=t}function Toe(){return J(Hb,"Reference.ts has not been loaded"),Hb}function Ioe(t){return t.views.size===0}function Bk(t,e,r,n){const i=e.source.queryId;if(i!==null){const o=t.views.get(i);return J(o!=null,"SyncTree gave us an op for an invalid query."),bD(o,e,r,n)}else{let o=[];for(const s of t.views.values())o=o.concat(bD(s,e,r,n));return o}}function w8(t,e,r,n,i){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=zb(r,i?n:null),l=!1;a?l=!0:n instanceof we?(a=Mk(r,n),l=!1):(a=we.EMPTY_NODE,l=!1);const c=Ow(new qa(a,l,!1),new qa(n,i,!1));return new _oe(e,c)}return s}function Noe(t,e,r,n,i,o){const s=w8(t,e,n,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),Aoe(s,r),Coe(s,r)}function koe(t,e,r,n){const i=e._queryIdentifier,o=[];let s=[];const a=Ha(t);if(i==="default")for(const[l,c]of t.views.entries())s=s.concat(vD(c,r,n)),gD(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(vD(l,r,n)),gD(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Ha(t)&&o.push(new(Toe())(e._repo,e._path)),{removed:o,events:s}}function S8(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function Da(t,e){let r=null;for(const n of t.views.values())r=r||Eoe(n,e);return r}function E8(t,e){if(e._queryParams.loadsAllData())return Rw(t);{const n=e._queryIdentifier;return t.views.get(n)}}function A8(t,e){return E8(t,e)!=null}function Ha(t){return Rw(t)!=null}function Rw(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kb;function Ooe(t){J(!Kb,"__referenceConstructor has already been defined"),Kb=t}function joe(){return J(Kb,"Reference.ts has not been loaded"),Kb}let Roe=1;class xD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new St(null),this.pendingWriteTree_=coe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function C8(t,e,r,n,i){return Xie(t.pendingWriteTree_,e,r,n,i),i?Wd(t,new Tc(Rk(),e,r)):[]}function $oe(t,e,r,n){Jie(t.pendingWriteTree_,e,r,n);const i=St.fromObject(r);return Wd(t,new Hf(Rk(),e,i))}function ma(t,e,r=!1){const n=Zie(t.pendingWriteTree_,e);if(eoe(t.pendingWriteTree_,e)){let o=new St(null);return n.snap!=null?o=o.set(ot(),!0):en(n.children,s=>{o=o.set(new ht(s),!0)}),Wd(t,new Vb(n.path,o,r))}else return[]}function pg(t,e,r){return Wd(t,new Tc($k(),e,r))}function Doe(t,e,r){const n=St.fromObject(r);return Wd(t,new Hf($k(),e,n))}function Moe(t,e){return Wd(t,new km($k(),e))}function Foe(t,e,r){const n=Vk(t,r);if(n){const i=Wk(n),o=i.path,s=i.queryId,a=Sn(o,e),l=new km(Dk(s),a);return zk(t,o,l)}else return[]}function Qb(t,e,r,n,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&(e._queryIdentifier==="default"||A8(s,e))){const l=koe(s,e,r,n);Ioe(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const f=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(h,p)=>Ha(p));if(f&&!d){const h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){const p=Uoe(h);for(let m=0;m<p.length;++m){const y=p[m],g=y.query,b=N8(t,y);t.listenProvider_.startListening($p(g),Om(t,g),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!n&&(f?t.listenProvider_.stopListening($p(e),null):c.forEach(h=>{const p=t.queryToTagMap.get($w(h));t.listenProvider_.stopListening($p(h),p)}))}Voe(t,c)}return a}function P8(t,e,r,n){const i=Vk(t,n);if(i!=null){const o=Wk(i),s=o.path,a=o.queryId,l=Sn(s,e),c=new Tc(Dk(a),l,r);return zk(t,s,c)}else return[]}function Loe(t,e,r,n){const i=Vk(t,n);if(i){const o=Wk(i),s=o.path,a=o.queryId,l=Sn(s,e),c=St.fromObject(r),f=new Hf(Dk(a),l,c);return zk(t,s,f)}else return[]}function IP(t,e,r,n=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,p)=>{const m=Sn(h,i);o=o||Da(p,m),s=s||Ha(p)});let a=t.syncPointTree_.get(i);a?(s=s||Ha(a),o=o||Da(a,ot())):(a=new _8,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=we.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const y=Da(m,ot());y&&(o=o.updateImmediateChild(p,y))}));const c=A8(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=$w(e);J(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=Woe();t.queryToTagMap.set(h,p),t.tagToQueryMap.set(p,h)}const f=jw(t.pendingWriteTree_,i);let d=Noe(a,e,r,f,o,l);if(!c&&!s&&!n){const h=E8(a,e);d=d.concat(zoe(t,e,h))}return d}function Uk(t,e,r){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=Sn(s,e),c=Da(a,l);if(c)return c});return m8(i,e,o,r,!0)}function Boe(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(c,f)=>{const d=Sn(c,r);n=n||Da(f,d)});let i=t.syncPointTree_.get(r);i?n=n||Da(i,ot()):(i=new _8,t.syncPointTree_=t.syncPointTree_.set(r,i));const o=n!=null,s=o?new qa(n,!0,!1):null,a=jw(t.pendingWriteTree_,e._path),l=w8(i,e,a,o?s.getNode():we.EMPTY_NODE,o);return Soe(l)}function Wd(t,e){return T8(e,t.syncPointTree_,null,jw(t.pendingWriteTree_,ot()))}function T8(t,e,r,n){if(De(t.path))return I8(t,e,r,n);{const i=e.get(ot());r==null&&i!=null&&(r=Da(i,ot()));let o=[];const s=$e(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=r?r.getImmediateChild(s):null,f=y8(n,s);o=o.concat(T8(a,l,c,f))}return i&&(o=o.concat(Bk(i,t,n,r))),o}}function I8(t,e,r,n){const i=e.get(ot());r==null&&i!=null&&(r=Da(i,ot()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=r?r.getImmediateChild(s):null,c=y8(n,s),f=t.operationForChild(s);f&&(o=o.concat(I8(f,a,l,c)))}),i&&(o=o.concat(Bk(i,t,n,r))),o}function N8(t,e){const r=e.query,n=Om(t,r);return{hashFn:()=>(woe(e)||we.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return n?Foe(t,r._path,n):Moe(t,r._path);{const o=$ne(i,r);return Qb(t,r,null,o)}}}}function Om(t,e){const r=$w(e);return t.queryToTagMap.get(r)}function $w(t){return t._path.toString()+"$"+t._queryIdentifier}function Vk(t,e){return t.tagToQueryMap.get(e)}function Wk(t){const e=t.indexOf("$");return J(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function zk(t,e,r){const n=t.syncPointTree_.get(e);J(n,"Missing sync point for query tag that we're tracking");const i=jw(t.pendingWriteTree_,e);return Bk(n,r,i,null)}function Uoe(t){return t.fold((e,r,n)=>{if(r&&Ha(r))return[Rw(r)];{let i=[];return r&&(i=S8(r)),en(n,(o,s)=>{i=i.concat(s)}),i}})}function $p(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(joe())(t._repo,t._path):t}function Voe(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const i=$w(n),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function Woe(){return Roe++}function zoe(t,e,r){const n=e._path,i=Om(t,e),o=N8(t,r),s=t.listenProvider_.startListening($p(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(n);if(i)J(!Ha(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,f,d)=>{if(!De(c)&&f&&Ha(f))return[Rw(f).query];{let h=[];return f&&(h=h.concat(S8(f).map(p=>p.query))),en(d,(p,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const f=l[c];t.listenProvider_.stopListening($p(f),Om(t,f))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new Gk(r)}node(){return this.node_}}class qk{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Ht(this.path_,e);return new qk(this.syncTree_,r)}node(){return Uk(this.syncTree_,this.path_)}}const Goe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},_D=function(t,e,r){if(!t||typeof t!="object")return t;if(J(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return qoe(t[".sv"],e,r);if(typeof t[".sv"]=="object")return Hoe(t[".sv"],e);J(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},qoe=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:J(!1,"Unexpected server value: "+t)}},Hoe=function(t,e,r){t.hasOwnProperty("increment")||J(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&J(!1,"Unexpected increment value: "+n);const i=e.node();if(J(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const s=i.getValue();return typeof s!="number"?n:s+n},k8=function(t,e,r,n){return Hk(e,new qk(r,t),n)},O8=function(t,e,r){return Hk(t,new Gk(e),r)};function Hk(t,e,r){const n=t.getPriority().val(),i=_D(n,e.getImmediateChild(".priority"),r);let o;if(t.isLeafNode()){const s=t,a=_D(s.getValue(),e,r);return a!==s.getValue()||i!==s.getPriority().val()?new Ar(a,cr(i)):t}else{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Ar(i))),s.forEachChild(Bt,(a,l)=>{const c=Hk(l,e.getImmediateChild(a),r);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function Qk(t,e){let r=e instanceof ht?e:new ht(e),n=t,i=$e(r);for(;i!==null;){const o=zf(n.node.children,i)||{children:{},childCount:0};n=new Kk(i,n,o),r=At(r),i=$e(r)}return n}function zd(t){return t.node.value}function j8(t,e){t.node.value=e,NP(t)}function R8(t){return t.node.childCount>0}function Koe(t){return zd(t)===void 0&&!R8(t)}function Dw(t,e){en(t.node.children,(r,n)=>{e(new Kk(r,t,n))})}function $8(t,e,r,n){r&&!n&&e(t),Dw(t,i=>{$8(i,e,!0,n)}),r&&n&&e(t)}function Qoe(t,e,r){let n=r?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function mg(t){return new ht(t.parent===null?t.name:mg(t.parent)+"/"+t.name)}function NP(t){t.parent!==null&&Yoe(t.parent,t.name,t)}function Yoe(t,e,r){const n=Koe(r),i=Zo(t.node.children,e);n&&i?(delete t.node.children[e],t.node.childCount--,NP(t)):!n&&!i&&(t.node.children[e]=r.node,t.node.childCount++,NP(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xoe=/[\[\].#$\/\u0000-\u001F\u007F]/,Joe=/[\[\].#$\u0000-\u001F\u007F]/,_E=10*1024*1024,Mw=function(t){return typeof t=="string"&&t.length!==0&&!Xoe.test(t)},D8=function(t){return typeof t=="string"&&t.length!==0&&!Joe.test(t)},Zoe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),D8(t)},kP=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!wk(t)||t&&typeof t=="object"&&Zo(t,".sv")},yg=function(t,e,r,n){n&&e===void 0||Fw(ug(t,"value"),e,r)},Fw=function(t,e,r){const n=r instanceof ht?new mie(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+xl(n));if(typeof e=="function")throw new Error(t+"contains a function "+xl(n)+" with contents = "+e.toString());if(wk(e))throw new Error(t+"contains "+e.toString()+" "+xl(n));if(typeof e=="string"&&e.length>_E/3&&Nw(e)>_E)throw new Error(t+"contains a string greater than "+_E+" utf8 bytes "+xl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(en(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Mw(s)))throw new Error(t+" contains an invalid key ("+s+") "+xl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yie(n,s),Fw(t,a,n),gie(n)}),i&&o)throw new Error(t+' contains ".value" child '+xl(n)+" in addition to actual children.")}},ese=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const o=Pm(n);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!Mw(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(pie);let i=null;for(r=0;r<e.length;r++){if(n=e[r],i!==null&&Ni(i,n))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},tse=function(t,e,r,n){if(n&&e===void 0)return;const i=ug(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];en(e,(s,a)=>{const l=new ht(s);if(Fw(i,a,Ht(r,l)),Pk(l)===".priority"&&!kP(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),ese(i,o)},rse=function(t,e,r,n){if(!(n&&r===void 0)&&!Mw(r))throw new Error(ug(t,e)+'was an invalid key = "'+r+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Yk=function(t,e,r,n){if(!(n&&r===void 0)&&!D8(r))throw new Error(ug(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nse=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Yk(t,e,r,n)},M8=function(t,e){if($e(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ise=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Mw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!Zoe(r))throw new Error(ug(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lw(t,e){let r=null;for(let n=0;n<e.length;n++){const i=e[n],o=i.getPath();r!==null&&!Tk(o,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:o}),r.events.push(i)}r&&t.eventLists_.push(r)}function F8(t,e,r){Lw(t,r),L8(t,n=>Tk(n,e))}function Bi(t,e,r){Lw(t,r),L8(t,n=>Ni(n,e)||Ni(e,n))}function L8(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const i=t.eventLists_[n];if(i){const o=i.path;e(o)?(sse(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function sse(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();nc&&Wr("event: "+r.toString()),Vd(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ase="repo_interrupt",lse=25;class cse{constructor(e,r,n,i){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ose,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ub(),this.transactionQueueTree_=new Kk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function use(t,e,r){if(t.stats_=Ak(t.repoInfo_),t.forceRestClient_||Lne())t.server_=new Bb(t.repoInfo_,(n,i,o,s)=>{wD(t,n,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>SD(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ur(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new bs(t.repoInfo_,e,(n,i,o,s)=>{wD(t,n,i,o,s)},n=>{SD(t,n)},n=>{fse(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=zne(t.repoInfo_,()=>new Gie(t.stats_,t.server_)),t.infoData_=new Bie,t.infoSyncTree_=new xD({startListening:(n,i,o,s)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=pg(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Xk(t,"connected",!1),t.serverSyncTree_=new xD({startListening:(n,i,o,s)=>(t.server_.listen(n,o,i,(a,l)=>{const c=s(a,l);Bi(t.eventQueue_,n._path,c)}),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function B8(t){const r=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Bw(t){return Goe({timestamp:B8(t)})}function wD(t,e,r,n,i){t.dataUpdateCount++;const o=new ht(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let s=[];if(i)if(n){const l=$b(r,c=>cr(c));s=Loe(t.serverSyncTree_,o,l,i)}else{const l=cr(r);s=P8(t.serverSyncTree_,o,l,i)}else if(n){const l=$b(r,c=>cr(c));s=Doe(t.serverSyncTree_,o,l)}else{const l=cr(r);s=pg(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Qf(t,o)),Bi(t.eventQueue_,a,s)}function SD(t,e){Xk(t,"connected",e),e===!1&&mse(t)}function fse(t,e){en(e,(r,n)=>{Xk(t,r,n)})}function Xk(t,e,r){const n=new ht("/.info/"+e),i=cr(r);t.infoData_.updateSnapshot(n,i);const o=pg(t.infoSyncTree_,n,i);Bi(t.eventQueue_,n,o)}function Jk(t){return t.nextWriteId_++}function dse(t,e,r){const n=Boe(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(i=>{const o=cr(i).withIndex(e._queryParams.getIndex());IP(t.serverSyncTree_,e,r,!0);let s;if(e._queryParams.loadsAllData())s=pg(t.serverSyncTree_,e._path,o);else{const a=Om(t.serverSyncTree_,e);s=P8(t.serverSyncTree_,e._path,o,a)}return Bi(t.eventQueue_,e._path,s),Qb(t.serverSyncTree_,e,r,null,!0),o},i=>(gg(t,"get for query "+ur(e)+" failed: "+i),Promise.reject(new Error(i))))}function hse(t,e,r,n,i){gg(t,"set",{path:e.toString(),value:r,priority:n});const o=Bw(t),s=cr(r,n),a=Uk(t.serverSyncTree_,e),l=O8(s,a,o),c=Jk(t),f=C8(t.serverSyncTree_,e,l,c,!0);Lw(t.eventQueue_,f),t.server_.put(e.toString(),s.val(!0),(h,p)=>{const m=h==="ok";m||Tn("set at "+e+" failed: "+h);const y=ma(t.serverSyncTree_,c,!m);Bi(t.eventQueue_,e,y),OP(t,i,h,p)});const d=eO(t,e);Qf(t,d),Bi(t.eventQueue_,d,[])}function pse(t,e,r,n){gg(t,"update",{path:e.toString(),value:r});let i=!0;const o=Bw(t),s={};if(en(r,(a,l)=>{i=!1,s[a]=k8(Ht(e,a),cr(l),t.serverSyncTree_,o)}),i)Wr("update() called with empty data.  Don't do anything."),OP(t,n,"ok",void 0);else{const a=Jk(t),l=$oe(t.serverSyncTree_,e,s,a);Lw(t.eventQueue_,l),t.server_.merge(e.toString(),r,(c,f)=>{const d=c==="ok";d||Tn("update at "+e+" failed: "+c);const h=ma(t.serverSyncTree_,a,!d),p=h.length>0?Qf(t,e):e;Bi(t.eventQueue_,p,h),OP(t,n,c,f)}),en(r,c=>{const f=eO(t,Ht(e,c));Qf(t,f)}),Bi(t.eventQueue_,e,[])}}function mse(t){gg(t,"onDisconnectEvents");const e=Bw(t),r=Ub();SP(t.onDisconnect_,ot(),(i,o)=>{const s=k8(i,o,t.serverSyncTree_,e);f8(r,i,s)});let n=[];SP(r,ot(),(i,o)=>{n=n.concat(pg(t.serverSyncTree_,i,o));const s=eO(t,i);Qf(t,s)}),t.onDisconnect_=Ub(),Bi(t.eventQueue_,ot(),n)}function yse(t,e,r){let n;$e(e._path)===".info"?n=IP(t.infoSyncTree_,e,r):n=IP(t.serverSyncTree_,e,r),F8(t.eventQueue_,e._path,n)}function ED(t,e,r){let n;$e(e._path)===".info"?n=Qb(t.infoSyncTree_,e,r):n=Qb(t.serverSyncTree_,e,r),F8(t.eventQueue_,e._path,n)}function gse(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ase)}function gg(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Wr(r,...e)}function OP(t,e,r,n){e&&Vd(()=>{if(r==="ok")e(null);else{const i=(r||"error").toUpperCase();let o=i;n&&(o+=": "+n);const s=new Error(o);s.code=i,e(s)}})}function U8(t,e,r){return Uk(t.serverSyncTree_,e,r)||we.EMPTY_NODE}function Zk(t,e=t.transactionQueueTree_){if(e||Uw(t,e),zd(e)){const r=W8(t,e);J(r.length>0,"Sending zero length transaction queue"),r.every(i=>i.status===0)&&vse(t,mg(e),r)}else R8(e)&&Dw(e,r=>{Zk(t,r)})}function vse(t,e,r){const n=r.map(c=>c.currentWriteId),i=U8(t,e,n);let o=i;const s=i.hash();for(let c=0;c<r.length;c++){const f=r[c];J(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=Sn(e,f.path);o=o.updateChild(d,f.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{gg(t,"transaction put response",{path:l.toString(),status:c});let f=[];if(c==="ok"){const d=[];for(let h=0;h<r.length;h++)r[h].status=2,f=f.concat(ma(t.serverSyncTree_,r[h].currentWriteId)),r[h].onComplete&&d.push(()=>r[h].onComplete(null,!0,r[h].currentOutputSnapshotResolved)),r[h].unwatcher();Uw(t,Qk(t.transactionQueueTree_,e)),Zk(t,t.transactionQueueTree_),Bi(t.eventQueue_,e,f);for(let h=0;h<d.length;h++)Vd(d[h])}else{if(c==="datastale")for(let d=0;d<r.length;d++)r[d].status===3?r[d].status=4:r[d].status=0;else{Tn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<r.length;d++)r[d].status=4,r[d].abortReason=c}Qf(t,e)}},s)}function Qf(t,e){const r=V8(t,e),n=mg(r),i=W8(t,r);return bse(t,i,n),n}function bse(t,e,r){if(e.length===0)return;const n=[];let i=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Sn(r,l.path);let f=!1,d;if(J(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,d=l.abortReason,i=i.concat(ma(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=lse)f=!0,d="maxretry",i=i.concat(ma(t.serverSyncTree_,l.currentWriteId,!0));else{const h=U8(t,l.path,s);l.currentInputSnapshot=h;const p=e[a].update(h.val());if(p!==void 0){Fw("transaction failed: Data returned ",p,l.path);let m=cr(p);typeof p=="object"&&p!=null&&Zo(p,".priority")||(m=m.updatePriority(h.getPriority()));const g=l.currentWriteId,b=Bw(t),v=O8(m,h,b);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=v,l.currentWriteId=Jk(t),s.splice(s.indexOf(g),1),i=i.concat(C8(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(ma(t.serverSyncTree_,g,!0))}else f=!0,d="nodata",i=i.concat(ma(t.serverSyncTree_,l.currentWriteId,!0))}Bi(t.eventQueue_,r,i),i=[],f&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(d),!1,null))))}Uw(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Vd(n[a]);Zk(t,t.transactionQueueTree_)}function V8(t,e){let r,n=t.transactionQueueTree_;for(r=$e(e);r!==null&&zd(n)===void 0;)n=Qk(n,r),e=At(e),r=$e(e);return n}function W8(t,e){const r=[];return z8(t,e,r),r.sort((n,i)=>n.order-i.order),r}function z8(t,e,r){const n=zd(e);if(n)for(let i=0;i<n.length;i++)r.push(n[i]);Dw(e,i=>{z8(t,i,r)})}function Uw(t,e){const r=zd(e);if(r){let n=0;for(let i=0;i<r.length;i++)r[i].status!==2&&(r[n]=r[i],n++);r.length=n,j8(e,r.length>0?r:void 0)}Dw(e,n=>{Uw(t,n)})}function eO(t,e){const r=mg(V8(t,e)),n=Qk(t.transactionQueueTree_,e);return Qoe(n,i=>{wE(t,i)}),wE(t,n),$8(n,i=>{wE(t,i)}),r}function wE(t,e){const r=zd(e);if(r){const n=[];let i=[],o=-1;for(let s=0;s<r.length;s++)r[s].status===3||(r[s].status===1?(J(o===s-1,"All SENT items should be at beginning of queue."),o=s,r[s].status=3,r[s].abortReason="set"):(J(r[s].status===0,"Unexpected transaction status in abort"),r[s].unwatcher(),i=i.concat(ma(t.serverSyncTree_,r[s].currentWriteId,!0)),r[s].onComplete&&n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?j8(e,void 0):r.length=o+1,Bi(t.eventQueue_,mg(e),i);for(let s=0;s<n.length;s++)Vd(n[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xse(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let i=r[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function _se(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Tn(`Invalid query segment '${r}' in query '${t}'`)}return e}const AD=function(t,e){const r=wse(t),n=r.namespace;r.domain==="firebase.com"&&Ts(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Ts("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||Nne();const i=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new HW(r.host,r.secure,n,i,e,"",n!==r.subdomain),path:new ht(r.pathString)}},wse=function(t){let e="",r="",n="",i="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=xse(t.substring(f,d)));const h=_se(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")r="localhost";else if(p.split(".").length<=2)r=p;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),r=e.substring(m+1),o=n}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sse=function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=CD.charAt(r%64),r=Math.floor(r/64);J(r===0,"Cannot push at time == 0");let s=o.join("");if(n){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=CD.charAt(e[i]);return J(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,r,n,i){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ur(this.snapshot.exportVal())}}class q8{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return J(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,r,n,i){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=i}get key(){return De(this._path)?null:Pk(this._path)}get ref(){return new es(this._repo,this._path)}get _queryIdentifier(){const e=uD(this._queryParams),r=Sk(e);return r==="{}"?"default":r}get _queryObject(){return uD(this._queryParams)}isEqual(e){if(e=Zr(e),!(e instanceof Vc))return!1;const r=this._repo===e._repo,n=Tk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return r&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+hie(this._path)}}function Ese(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function tO(t){let e=null,r=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===ic){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Pc)throw new Error(n);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==za)throw new Error(n);if(typeof r!="string")throw new Error(i)}}else if(t.getIndex()===Bt){if(e!=null&&!kP(e)||r!=null&&!kP(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(J(t.getIndex()instanceof kk||t.getIndex()===c8,"unknown index type."),e!=null&&typeof e=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function K8(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class es extends Vc{constructor(e,r){super(e,r,new jk,!1)}get parent(){const e=r8(this._path);return e===null?null:new es(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Yf{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new ht(e),n=Xf(this.ref,e);return new Yf(this._node.getChild(r),n,Bt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,i)=>e(new Yf(i,Xf(this.ref,n),Bt)))}hasChild(e){const r=new ht(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ap(t,e){return t=Zr(t),t._checkNotDeleted("ref"),e!==void 0?Xf(t._root,e):t._root}function Xf(t,e){return t=Zr(t),$e(t._path)===null?nse("child","path",e,!1):Yk("child","path",e,!1),new es(t._repo,Ht(t._path,e))}function Q8(t,e){t=Zr(t),M8("push",t._path),yg("push",e,t._path,!0);const r=B8(t._repo),n=Sse(r),i=Xf(t,n),o=Xf(t,n);let s;return e!=null?s=rO(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function rO(t,e){t=Zr(t),M8("set",t._path),yg("set",e,t._path,!1);const r=new cg;return hse(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}function Y8(t,e){tse("update",e,t._path,!1);const r=new cg;return pse(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function X8(t){t=Zr(t);const e=new H8(()=>{}),r=new Vw(e);return dse(t._repo,t,r).then(n=>new Yf(n,new es(t._repo,t._path),t._queryParams.getIndex()))}class Vw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new G8("value",this,new Yf(e.snapshotNode,new es(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new q8(this,e,r):null}matches(e){return e instanceof Vw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class nO{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new q8(this,e,r):null}createEvent(e,r){J(e.childName!=null,"Child events should have a childName.");const n=Xf(new es(r._repo,r._path),e.childName),i=r._queryParams.getIndex();return new G8(e.type,this,new Yf(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof nO?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Ase(t,e,r,n,i){let o;if(typeof n=="object"&&(o=void 0,i=n),typeof n=="function"&&(o=n),i&&i.onlyOnce){const l=r,c=(f,d)=>{ED(t._repo,t,a),l(f,d)};c.userCallback=r.userCallback,c.context=r.context,r=c}const s=new H8(r,o||void 0),a=e==="value"?new Vw(s):new nO(e,s);return yse(t._repo,t,a),()=>ED(t._repo,t,a)}function Cse(t,e,r,n){return Ase(t,"value",e,r,n)}class vg{}class Pse extends vg{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){yg("endAt",this._value,e._path,!0);const r=Fie(e._queryParams,this._value,this._key);if(K8(r),tO(r),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vc(e._repo,e._path,r,e._orderByCalled)}}class Tse extends vg{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){yg("startAt",this._value,e._path,!0);const r=Mie(e._queryParams,this._value,this._key);if(K8(r),tO(r),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vc(e._repo,e._path,r,e._orderByCalled)}}class Ise extends vg{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vc(e._repo,e._path,Die(e._queryParams,this._limit),e._orderByCalled)}}function Nse(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ise(t)}class kse extends vg{constructor(e){super(),this._path=e}_apply(e){Ese(e,"orderByChild");const r=new ht(this._path);if(De(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new kk(r),i=Lie(e._queryParams,n);return tO(i),new Vc(e._repo,e._path,i,!0)}}function Ose(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yk("orderByChild","path",t,!1),new kse(t)}class jse extends vg{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){if(yg("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Pse(this._value,this._key)._apply(new Tse(this._value,this._key)._apply(e))}}function Rse(t,e){return rse("equalTo","key",e,!0),new jse(t,e)}function $se(t,...e){let r=Zr(t);for(const n of e)r=n._apply(r);return r}Poe(es);Ooe(es);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dse="FIREBASE_DATABASE_EMULATOR_HOST",jP={};let Mse=!1;function Fse(t,e,r,n){t.repoInfo_=new HW(`${e}:${r}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function Lse(t,e,r,n,i){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||Ts("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wr("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=AD(o,i),a=s.repoInfo,l,c;typeof process<"u"&&q$&&(c=q$[Dse]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=AD(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const f=i&&l?new rf(rf.OWNER):new Une(t.name,t.options,e);ise("Invalid Firebase Database URL",s),De(s.path)||Ts("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Use(a,t,f,new Bne(t.name,r));return new Vse(d,t)}function Bse(t,e){const r=jP[e];(!r||r[t.key]!==t)&&Ts(`Database ${e}(${t.repoInfo_}) has already been deleted.`),gse(t),delete r[t.key]}function Use(t,e,r,n){let i=jP[e.name];i||(i={},jP[e.name]=i);let o=i[t.toURLString()];return o&&Ts("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new cse(t,Mse,r,n),i[t.toURLString()]=o,o}class Vse{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(use(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new es(this._repo,ot())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Bse(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ts("Cannot call "+e+" on a deleted database.")}}function Wse(t=_k(),e){const r=bk(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=mk("database");n&&zse(r,...n)}return r}function zse(t,e,r,n={}){t=Zr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ts("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&Ts('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new rf(rf.OWNER);else if(n.mockUserToken){const s=typeof n.mockUserToken=="string"?n.mockUserToken:yk(n.mockUserToken,t.app.options.projectId);o=new rf(s)}Fse(i,e,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gse(t){Ane(xk),Gf(new Ac("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Lse(n,i,o,r)},"PUBLIC").setMultipleInstances(!0)),Uo(H$,K$,t),Uo(H$,K$,"esm2017")}bs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};bs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Gse();var PD=Object.prototype.toString,J8=function(e){var r=PD.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&PD.call(e.callee)==="[object Function]"),n},SE,TD;function qse(){if(TD)return SE;TD=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=J8,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var p=h.constructor;return p&&p.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),d=function(h){if(typeof window>"u"||!f)return l(h);try{return l(h)}catch{return!1}};t=function(p){var m=p!==null&&typeof p=="object",y=r.call(p)==="[object Function]",g=n(p),b=m&&r.call(p)==="[object String]",v=[];if(!m&&!y&&!g)throw new TypeError("Object.keys called on a non-object");var x=s&&y;if(b&&p.length>0&&!e.call(p,0))for(var S=0;S<p.length;++S)v.push(String(S));if(g&&p.length>0)for(var _=0;_<p.length;++_)v.push(String(_));else for(var w in p)!(x&&w==="prototype")&&e.call(p,w)&&v.push(String(w));if(o)for(var A=d(p),C=0;C<a.length;++C)!(A&&a[C]==="constructor")&&e.call(p,a[C])&&v.push(a[C]);return v}}return SE=t,SE}var Hse=Array.prototype.slice,Kse=J8,ID=Object.keys,O0=ID?function(e){return ID(e)}:qse(),ND=Object.keys;O0.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Kse(n)?ND(Hse.call(n)):ND(n)})}else Object.keys=O0;return Object.keys||O0};var Ww=O0,zw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0},kD=typeof Symbol<"u"&&Symbol,Qse=zw,il=function(){return typeof kD!="function"||typeof Symbol!="function"||typeof kD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Qse()},Yse="Function.prototype.bind called on incompatible ",EE=Array.prototype.slice,Xse=Object.prototype.toString,Jse="[object Function]",Zse=function(e){var r=this;if(typeof r!="function"||Xse.call(r)!==Jse)throw new TypeError(Yse+r);for(var n=EE.call(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,n.concat(EE.call(arguments)));return Object(f)===f?f:this}else return r.apply(e,n.concat(EE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},eae=Zse,iO=Function.prototype.bind||eae,tae=iO,oO=tae.call(Function.call,Object.prototype.hasOwnProperty),Je,Jf=SyntaxError,Z8=Function,nf=TypeError,AE=function(t){try{return Z8('"use strict"; return ('+t+").constructor;")()}catch{}},oc=Object.getOwnPropertyDescriptor;if(oc)try{oc({},"")}catch{oc=null}var CE=function(){throw new nf},rae=oc?function(){try{return arguments.callee,CE}catch{try{return oc(arguments,"callee").get}catch{return CE}}}():CE,Jc=il(),Zs=Object.getPrototypeOf||function(t){return t.__proto__},hu={},nae=typeof Uint8Array>"u"?Je:Zs(Uint8Array),of={"%AggregateError%":typeof AggregateError>"u"?Je:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Je:ArrayBuffer,"%ArrayIteratorPrototype%":Jc?Zs([][Symbol.iterator]()):Je,"%AsyncFromSyncIteratorPrototype%":Je,"%AsyncFunction%":hu,"%AsyncGenerator%":hu,"%AsyncGeneratorFunction%":hu,"%AsyncIteratorPrototype%":hu,"%Atomics%":typeof Atomics>"u"?Je:Atomics,"%BigInt%":typeof BigInt>"u"?Je:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Je:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Je:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Je:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Je:FinalizationRegistry,"%Function%":Z8,"%GeneratorFunction%":hu,"%Int8Array%":typeof Int8Array>"u"?Je:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Je:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Je:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jc?Zs(Zs([][Symbol.iterator]())):Je,"%JSON%":typeof JSON=="object"?JSON:Je,"%Map%":typeof Map>"u"?Je:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jc?Je:Zs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Je:Promise,"%Proxy%":typeof Proxy>"u"?Je:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Je:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Je:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jc?Je:Zs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Je:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jc?Zs(""[Symbol.iterator]()):Je,"%Symbol%":Jc?Symbol:Je,"%SyntaxError%":Jf,"%ThrowTypeError%":rae,"%TypedArray%":nae,"%TypeError%":nf,"%Uint8Array%":typeof Uint8Array>"u"?Je:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Je:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Je:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Je:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Je:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Je:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Je:WeakSet},iae=function t(e){var r;if(e==="%AsyncFunction%")r=AE("async function () {}");else if(e==="%GeneratorFunction%")r=AE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=AE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Zs(i.prototype))}return of[e]=r,r},OD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bg=iO,Yb=oO,oae=bg.call(Function.call,Array.prototype.concat),sae=bg.call(Function.apply,Array.prototype.splice),jD=bg.call(Function.call,String.prototype.replace),Xb=bg.call(Function.call,String.prototype.slice),aae=bg.call(Function.call,RegExp.prototype.exec),lae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cae=/\\(\\)?/g,uae=function(e){var r=Xb(e,0,1),n=Xb(e,-1);if(r==="%"&&n!=="%")throw new Jf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Jf("invalid intrinsic syntax, expected opening `%`");var i=[];return jD(e,lae,function(o,s,a,l){i[i.length]=a?jD(l,cae,"$1"):s||o}),i},fae=function(e,r){var n=e,i;if(Yb(OD,n)&&(i=OD[n],n="%"+i[0]+"%"),Yb(of,n)){var o=of[n];if(o===hu&&(o=iae(n)),typeof o>"u"&&!r)throw new nf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Jf("intrinsic "+e+" does not exist!")},Ds=function(e,r){if(typeof e!="string"||e.length===0)throw new nf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new nf('"allowMissing" argument must be a boolean');if(aae(/^%?[^%]*%?$/,e)===null)throw new Jf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=uae(e),i=n.length>0?n[0]:"",o=fae("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],sae(n,oae([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],p=Xb(h,0,1),m=Xb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Jf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Yb(of,s))a=of[s];else if(a!=null){if(!(h in a)){if(!r)throw new nf("base intrinsic for "+e+" exists, but the property is not available.");return}if(oc&&f+1>=n.length){var y=oc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Yb(a,h),a=a[h];d&&!l&&(of[s]=a)}}return a},dae=Ds,RP=dae("%Object.defineProperty%",!0),$P=function(){if(RP)try{return RP({},"a",{value:1}),!0}catch{return!1}return!1};$P.hasArrayLengthDefineBug=function(){if(!$P())return null;try{return RP([],"length",{value:1}).length!==1}catch{return!0}};var xg=$P,hae=Ww,pae=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",mae=Object.prototype.toString,yae=Array.prototype.concat,e9=Object.defineProperty,gae=function(t){return typeof t=="function"&&mae.call(t)==="[object Function]"},vae=xg(),t9=e9&&vae,bae=function(t,e,r,n){e in t&&(!gae(n)||!n())||(t9?e9(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},r9=function(t,e){var r=arguments.length>2?arguments[2]:{},n=hae(e);pae&&(n=yae.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)bae(t,n[i],e[n[i]],r[n[i]])};r9.supportsDescriptors=!!t9;var Gw=r9,n9={exports:{}};(function(t){var e=iO,r=Ds,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,d.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(n9);var _g=n9.exports,i9=Ds,o9=_g,xae=o9(i9("String.prototype.indexOf")),go=function(e,r){var n=i9(e,!!r);return typeof n=="function"&&xae(e,".prototype.")>-1?o9(n):n},_ae=Ww,s9=zw(),a9=go,RD=Object,wae=a9("Array.prototype.push"),$D=a9("Object.prototype.propertyIsEnumerable"),Sae=s9?Object.getOwnPropertySymbols:null,l9=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=RD(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=RD(arguments[i]),s=_ae(o),a=s9&&(Object.getOwnPropertySymbols||Sae);if(a)for(var l=a(o),c=0;c<l.length;++c){var f=l[c];$D(o,f)&&wae(s,f)}for(var d=0;d<s.length;++d){var h=s[d];if($D(o,h)){var p=o[h];n[h]=p}}}return n},PE=l9,Eae=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return t!==o},Aae=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},c9=function(){return!Object.assign||Eae()||Aae()?PE:Object.assign},Cae=Gw,Pae=c9,Tae=function(){var e=Pae();return Cae(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},Iae=Gw,Nae=_g,kae=l9,u9=c9,Oae=Tae,jae=Nae.apply(u9()),f9=function(e,r){return jae(Object,arguments)};Iae(f9,{getPolyfill:u9,implementation:kae,shim:Oae});var Rae=f9,DD={foo:{}},$ae=Object,qw=function(){return{__proto__:DD}.foo===DD.foo&&!({__proto__:null}instanceof $ae)},Dae="Function.prototype.bind called on incompatible ",Mae=Object.prototype.toString,Fae=Math.max,Lae="[object Function]",MD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Bae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Uae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Vae=function(e){var r=this;if(typeof r!="function"||Mae.apply(r)!==Lae)throw new TypeError(Dae+r);for(var n=Bae(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,MD(n,arguments));return Object(f)===f?f:this}return r.apply(e,MD(n,arguments))},s=Fae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Uae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Wae=Vae,d9=Function.prototype.bind||Wae,zae="Function.prototype.bind called on incompatible ",Gae=Object.prototype.toString,qae=Math.max,Hae="[object Function]",FD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Kae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Qae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Yae=function(e){var r=this;if(typeof r!="function"||Gae.apply(r)!==Hae)throw new TypeError(zae+r);for(var n=Kae(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,FD(n,arguments));return Object(f)===f?f:this}return r.apply(e,FD(n,arguments))},s=qae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Qae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Xae=Yae,Jae=Function.prototype.bind||Xae,Zae=Function.prototype.call,ele=Object.prototype.hasOwnProperty,tle=Jae,Hw=tle.call(Zae,ele),Be,Zf=SyntaxError,h9=Function,sf=TypeError,TE=function(t){try{return h9('"use strict"; return ('+t+").constructor;")()}catch{}},sc=Object.getOwnPropertyDescriptor;if(sc)try{sc({},"")}catch{sc=null}var IE=function(){throw new sf},rle=sc?function(){try{return arguments.callee,IE}catch{try{return sc(arguments,"callee").get}catch{return IE}}}():IE,Zc=il(),nle=qw(),_r=Object.getPrototypeOf||(nle?function(t){return t.__proto__}:null),pu={},ile=typeof Uint8Array>"u"||!_r?Be:_r(Uint8Array),ac={"%AggregateError%":typeof AggregateError>"u"?Be:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Be:ArrayBuffer,"%ArrayIteratorPrototype%":Zc&&_r?_r([][Symbol.iterator]()):Be,"%AsyncFromSyncIteratorPrototype%":Be,"%AsyncFunction%":pu,"%AsyncGenerator%":pu,"%AsyncGeneratorFunction%":pu,"%AsyncIteratorPrototype%":pu,"%Atomics%":typeof Atomics>"u"?Be:Atomics,"%BigInt%":typeof BigInt>"u"?Be:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Be:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Be:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Be:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Be:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Be:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Be:FinalizationRegistry,"%Function%":h9,"%GeneratorFunction%":pu,"%Int8Array%":typeof Int8Array>"u"?Be:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Be:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Be:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Zc&&_r?_r(_r([][Symbol.iterator]())):Be,"%JSON%":typeof JSON=="object"?JSON:Be,"%Map%":typeof Map>"u"?Be:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Zc||!_r?Be:_r(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Be:Promise,"%Proxy%":typeof Proxy>"u"?Be:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Be:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Be:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Zc||!_r?Be:_r(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Be:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Zc&&_r?_r(""[Symbol.iterator]()):Be,"%Symbol%":Zc?Symbol:Be,"%SyntaxError%":Zf,"%ThrowTypeError%":rle,"%TypedArray%":ile,"%TypeError%":sf,"%Uint8Array%":typeof Uint8Array>"u"?Be:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Be:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Be:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Be:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Be:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Be:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Be:WeakSet};if(_r)try{null.error}catch(t){var ole=_r(_r(t));ac["%Error.prototype%"]=ole}var sle=function t(e){var r;if(e==="%AsyncFunction%")r=TE("async function () {}");else if(e==="%GeneratorFunction%")r=TE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=TE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_r&&(r=_r(i.prototype))}return ac[e]=r,r},LD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},wg=d9,Jb=Hw,ale=wg.call(Function.call,Array.prototype.concat),lle=wg.call(Function.apply,Array.prototype.splice),BD=wg.call(Function.call,String.prototype.replace),Zb=wg.call(Function.call,String.prototype.slice),cle=wg.call(Function.call,RegExp.prototype.exec),ule=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fle=/\\(\\)?/g,dle=function(e){var r=Zb(e,0,1),n=Zb(e,-1);if(r==="%"&&n!=="%")throw new Zf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Zf("invalid intrinsic syntax, expected opening `%`");var i=[];return BD(e,ule,function(o,s,a,l){i[i.length]=a?BD(l,fle,"$1"):s||o}),i},hle=function(e,r){var n=e,i;if(Jb(LD,n)&&(i=LD[n],n="%"+i[0]+"%"),Jb(ac,n)){var o=ac[n];if(o===pu&&(o=sle(n)),typeof o>"u"&&!r)throw new sf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Zf("intrinsic "+e+" does not exist!")},Kw=function(e,r){if(typeof e!="string"||e.length===0)throw new sf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new sf('"allowMissing" argument must be a boolean');if(cle(/^%?[^%]*%?$/,e)===null)throw new Zf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=dle(e),i=n.length>0?n[0]:"",o=hle("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],lle(n,ale([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],p=Zb(h,0,1),m=Zb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Zf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Jb(ac,s))a=ac[s];else if(a!=null){if(!(h in a)){if(!r)throw new sf("base intrinsic for "+e+" exists, but the property is not available.");return}if(sc&&f+1>=n.length){var y=sc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Jb(a,h),a=a[h];d&&!l&&(ac[s]=a)}}return a},p9={exports:{}},ple="Function.prototype.bind called on incompatible ",mle=Object.prototype.toString,yle=Math.max,gle="[object Function]",UD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},vle=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},ble=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},xle=function(e){var r=this;if(typeof r!="function"||mle.apply(r)!==gle)throw new TypeError(ple+r);for(var n=vle(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,UD(n,arguments));return Object(f)===f?f:this}return r.apply(e,UD(n,arguments))},s=yle(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+ble(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},_le=xle,wle=Function.prototype.bind||_le,Ue,ed=SyntaxError,m9=Function,af=TypeError,NE=function(t){try{return m9('"use strict"; return ('+t+").constructor;")()}catch{}},lc=Object.getOwnPropertyDescriptor;if(lc)try{lc({},"")}catch{lc=null}var kE=function(){throw new af},Sle=lc?function(){try{return arguments.callee,kE}catch{try{return lc(arguments,"callee").get}catch{return kE}}}():kE,eu=il(),Ele=qw(),wr=Object.getPrototypeOf||(Ele?function(t){return t.__proto__}:null),mu={},Ale=typeof Uint8Array>"u"||!wr?Ue:wr(Uint8Array),cc={"%AggregateError%":typeof AggregateError>"u"?Ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ue:ArrayBuffer,"%ArrayIteratorPrototype%":eu&&wr?wr([][Symbol.iterator]()):Ue,"%AsyncFromSyncIteratorPrototype%":Ue,"%AsyncFunction%":mu,"%AsyncGenerator%":mu,"%AsyncGeneratorFunction%":mu,"%AsyncIteratorPrototype%":mu,"%Atomics%":typeof Atomics>"u"?Ue:Atomics,"%BigInt%":typeof BigInt>"u"?Ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ue:FinalizationRegistry,"%Function%":m9,"%GeneratorFunction%":mu,"%Int8Array%":typeof Int8Array>"u"?Ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":eu&&wr?wr(wr([][Symbol.iterator]())):Ue,"%JSON%":typeof JSON=="object"?JSON:Ue,"%Map%":typeof Map>"u"?Ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!eu||!wr?Ue:wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ue:Promise,"%Proxy%":typeof Proxy>"u"?Ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!eu||!wr?Ue:wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":eu&&wr?wr(""[Symbol.iterator]()):Ue,"%Symbol%":eu?Symbol:Ue,"%SyntaxError%":ed,"%ThrowTypeError%":Sle,"%TypedArray%":Ale,"%TypeError%":af,"%Uint8Array%":typeof Uint8Array>"u"?Ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ue:WeakSet};if(wr)try{null.error}catch(t){var Cle=wr(wr(t));cc["%Error.prototype%"]=Cle}var Ple=function t(e){var r;if(e==="%AsyncFunction%")r=NE("async function () {}");else if(e==="%GeneratorFunction%")r=NE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=NE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&wr&&(r=wr(i.prototype))}return cc[e]=r,r},VD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Sg=wle,ex=Hw,Tle=Sg.call(Function.call,Array.prototype.concat),Ile=Sg.call(Function.apply,Array.prototype.splice),WD=Sg.call(Function.call,String.prototype.replace),tx=Sg.call(Function.call,String.prototype.slice),Nle=Sg.call(Function.call,RegExp.prototype.exec),kle=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ole=/\\(\\)?/g,jle=function(e){var r=tx(e,0,1),n=tx(e,-1);if(r==="%"&&n!=="%")throw new ed("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ed("invalid intrinsic syntax, expected opening `%`");var i=[];return WD(e,kle,function(o,s,a,l){i[i.length]=a?WD(l,Ole,"$1"):s||o}),i},Rle=function(e,r){var n=e,i;if(ex(VD,n)&&(i=VD[n],n="%"+i[0]+"%"),ex(cc,n)){var o=cc[n];if(o===mu&&(o=Ple(n)),typeof o>"u"&&!r)throw new af("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ed("intrinsic "+e+" does not exist!")},$le=function(e,r){if(typeof e!="string"||e.length===0)throw new af("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new af('"allowMissing" argument must be a boolean');if(Nle(/^%?[^%]*%?$/,e)===null)throw new ed("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=jle(e),i=n.length>0?n[0]:"",o=Rle("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Ile(n,Tle([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],p=tx(h,0,1),m=tx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new ed("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",ex(cc,s))a=cc[s];else if(a!=null){if(!(h in a)){if(!r)throw new af("base intrinsic for "+e+" exists, but the property is not available.");return}if(lc&&f+1>=n.length){var y=lc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=ex(a,h),a=a[h];d&&!l&&(cc[s]=a)}}return a},Dle="Function.prototype.bind called on incompatible ",Mle=Object.prototype.toString,Fle=Math.max,Lle="[object Function]",zD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Ble=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Ule=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Vle=function(e){var r=this;if(typeof r!="function"||Mle.apply(r)!==Lle)throw new TypeError(Dle+r);for(var n=Ble(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,zD(n,arguments));return Object(f)===f?f:this}return r.apply(e,zD(n,arguments))},s=Fle(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Ule(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Wle=Vle,zle=Function.prototype.bind||Wle,Ve,td=SyntaxError,y9=Function,lf=TypeError,OE=function(t){try{return y9('"use strict"; return ('+t+").constructor;")()}catch{}},uc=Object.getOwnPropertyDescriptor;if(uc)try{uc({},"")}catch{uc=null}var jE=function(){throw new lf},Gle=uc?function(){try{return arguments.callee,jE}catch{try{return uc(arguments,"callee").get}catch{return jE}}}():jE,tu=il(),qle=qw(),Sr=Object.getPrototypeOf||(qle?function(t){return t.__proto__}:null),yu={},Hle=typeof Uint8Array>"u"||!Sr?Ve:Sr(Uint8Array),fc={"%AggregateError%":typeof AggregateError>"u"?Ve:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ve:ArrayBuffer,"%ArrayIteratorPrototype%":tu&&Sr?Sr([][Symbol.iterator]()):Ve,"%AsyncFromSyncIteratorPrototype%":Ve,"%AsyncFunction%":yu,"%AsyncGenerator%":yu,"%AsyncGeneratorFunction%":yu,"%AsyncIteratorPrototype%":yu,"%Atomics%":typeof Atomics>"u"?Ve:Atomics,"%BigInt%":typeof BigInt>"u"?Ve:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ve:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ve:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ve:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ve:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ve:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ve:FinalizationRegistry,"%Function%":y9,"%GeneratorFunction%":yu,"%Int8Array%":typeof Int8Array>"u"?Ve:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ve:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ve:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tu&&Sr?Sr(Sr([][Symbol.iterator]())):Ve,"%JSON%":typeof JSON=="object"?JSON:Ve,"%Map%":typeof Map>"u"?Ve:Map,"%MapIteratorPrototype%":typeof Map>"u"||!tu||!Sr?Ve:Sr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ve:Promise,"%Proxy%":typeof Proxy>"u"?Ve:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ve:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ve:Set,"%SetIteratorPrototype%":typeof Set>"u"||!tu||!Sr?Ve:Sr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ve:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":tu&&Sr?Sr(""[Symbol.iterator]()):Ve,"%Symbol%":tu?Symbol:Ve,"%SyntaxError%":td,"%ThrowTypeError%":Gle,"%TypedArray%":Hle,"%TypeError%":lf,"%Uint8Array%":typeof Uint8Array>"u"?Ve:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ve:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ve:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ve:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ve:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ve:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ve:WeakSet};if(Sr)try{null.error}catch(t){var Kle=Sr(Sr(t));fc["%Error.prototype%"]=Kle}var Qle=function t(e){var r;if(e==="%AsyncFunction%")r=OE("async function () {}");else if(e==="%GeneratorFunction%")r=OE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=OE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Sr&&(r=Sr(i.prototype))}return fc[e]=r,r},GD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Eg=zle,rx=Hw,Yle=Eg.call(Function.call,Array.prototype.concat),Xle=Eg.call(Function.apply,Array.prototype.splice),qD=Eg.call(Function.call,String.prototype.replace),nx=Eg.call(Function.call,String.prototype.slice),Jle=Eg.call(Function.call,RegExp.prototype.exec),Zle=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ece=/\\(\\)?/g,tce=function(e){var r=nx(e,0,1),n=nx(e,-1);if(r==="%"&&n!=="%")throw new td("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new td("invalid intrinsic syntax, expected opening `%`");var i=[];return qD(e,Zle,function(o,s,a,l){i[i.length]=a?qD(l,ece,"$1"):s||o}),i},rce=function(e,r){var n=e,i;if(rx(GD,n)&&(i=GD[n],n="%"+i[0]+"%"),rx(fc,n)){var o=fc[n];if(o===yu&&(o=Qle(n)),typeof o>"u"&&!r)throw new lf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new td("intrinsic "+e+" does not exist!")},nce=function(e,r){if(typeof e!="string"||e.length===0)throw new lf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new lf('"allowMissing" argument must be a boolean');if(Jle(/^%?[^%]*%?$/,e)===null)throw new td("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=tce(e),i=n.length>0?n[0]:"",o=rce("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Xle(n,Yle([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],p=nx(h,0,1),m=nx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new td("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",rx(fc,s))a=fc[s];else if(a!=null){if(!(h in a)){if(!r)throw new lf("base intrinsic for "+e+" exists, but the property is not available.");return}if(uc&&f+1>=n.length){var y=uc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=rx(a,h),a=a[h];d&&!l&&(fc[s]=a)}}return a},ice=Ds,j0=ice("%Object.getOwnPropertyDescriptor%",!0);if(j0)try{j0([],"length")}catch{j0=null}var Qw=j0,oce=xg(),sO=nce,Dp=oce&&sO("%Object.defineProperty%",!0);if(Dp)try{Dp({},"a",{value:1})}catch{Dp=!1}var sce=sO("%SyntaxError%"),ru=sO("%TypeError%"),HD=Qw,aO=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new ru("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new ru("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ru("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ru("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ru("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ru("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!HD&&HD(e,r);if(Dp)Dp(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(a||!i&&!o&&!s)e[r]=n;else throw new sce("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},g9=$le,KD=aO,ace=xg(),QD=Qw,YD=g9("%TypeError%"),lce=g9("%Math.floor%"),v9=function(e,r){if(typeof e!="function")throw new YD("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||lce(r)!==r)throw new YD("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&QD){var s=QD(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(ace?KD(e,"length",r,!0,!0):KD(e,"length",r)),e};(function(t){var e=d9,r=Kw,n=v9,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var f=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f})(p9);var cce=p9.exports,b9=Kw,x9=cce,uce=x9(b9("String.prototype.indexOf")),fce=function(e,r){var n=b9(e,!!r);return typeof n=="function"&&uce(e,".prototype.")>-1?x9(n):n},dce=Ww,hce=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",pce=Object.prototype.toString,mce=Array.prototype.concat,XD=aO,yce=function(t){return typeof t=="function"&&pce.call(t)==="[object Function]"},_9=xg(),gce=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!yce(n)||!n())return}_9?XD(t,e,r,!0):XD(t,e,r)},w9=function(t,e){var r=arguments.length>2?arguments[2]:{},n=dce(e);hce&&(n=mce.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)gce(t,n[i],e[n[i]],r[n[i]])};w9.supportsDescriptors=!!_9;var lO=w9,jm=function(){return typeof(function(){}).name=="string"},Mp=Object.getOwnPropertyDescriptor;if(Mp)try{Mp([],"length")}catch{Mp=null}jm.functionsHaveConfigurableNames=function(){if(!jm()||!Mp)return!1;var e=Mp(function(){},"name");return!!e&&!!e.configurable};var vce=Function.prototype.bind;jm.boundFunctionsHaveNames=function(){return jm()&&typeof vce=="function"&&(function(){}).bind().name!==""};var bce=jm,JD=aO,xce=xg(),_ce=bce.functionsHaveConfigurableNames(),wce=TypeError,Sce=function(e,r){if(typeof e!="function")throw new wce("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||_ce)&&(xce?JD(e,"name",r,!0,!0):JD(e,"name",r)),e},Ece=Sce,Ace=Object,Cce=TypeError,S9=Ece(function(){if(this!=null&&this!==Ace(this))throw new Cce("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),Pce=S9,Tce=lO.supportsDescriptors,Ice=Object.getOwnPropertyDescriptor,E9=function(){if(Tce&&/a/mig.flags==="gim"){var e=Ice(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return Pce},Nce=lO.supportsDescriptors,kce=E9,Oce=Object.getOwnPropertyDescriptor,jce=Object.defineProperty,Rce=TypeError,ZD=Object.getPrototypeOf,$ce=/a/,Dce=function(){if(!Nce||!ZD)throw new Rce("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=kce(),r=ZD($ce),n=Oce(r,"flags");return(!n||n.get!==e)&&jce(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},Mce=lO,Fce=_g,Lce=S9,A9=E9,Bce=Dce,C9=Fce(A9());Mce(C9,{getPolyfill:A9,implementation:Lce,shim:Bce});var Uce=C9,R0={exports:{}},Vce=zw,ol=function(){return Vce()&&!!Symbol.toStringTag},Wce=ol(),zce=go,DP=zce("Object.prototype.toString"),Yw=function(e){return Wce&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:DP(e)==="[object Arguments]"},P9=function(e){return Yw(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&DP(e)!=="[object Array]"&&DP(e.callee)==="[object Function]"},Gce=function(){return Yw(arguments)}();Yw.isLegacyArguments=P9;var T9=Gce?Yw:P9;const qce={},Hce=Object.freeze(Object.defineProperty({__proto__:null,default:qce},Symbol.toStringTag,{value:"Module"})),Kce=WJ(Hce);var cO=typeof Map=="function"&&Map.prototype,RE=Object.getOwnPropertyDescriptor&&cO?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ix=cO&&RE&&typeof RE.get=="function"?RE.get:null,Qce=cO&&Map.prototype.forEach,uO=typeof Set=="function"&&Set.prototype,$E=Object.getOwnPropertyDescriptor&&uO?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ox=uO&&$E&&typeof $E.get=="function"?$E.get:null,Yce=uO&&Set.prototype.forEach,Xce=typeof WeakMap=="function"&&WeakMap.prototype,Fp=Xce?WeakMap.prototype.has:null,Jce=typeof WeakSet=="function"&&WeakSet.prototype,Lp=Jce?WeakSet.prototype.has:null,Zce=typeof WeakRef=="function"&&WeakRef.prototype,eM=Zce?WeakRef.prototype.deref:null,eue=Boolean.prototype.valueOf,tue=Object.prototype.toString,rue=Function.prototype.toString,nue=String.prototype.match,fO=String.prototype.slice,ya=String.prototype.replace,iue=String.prototype.toUpperCase,tM=String.prototype.toLowerCase,I9=RegExp.prototype.test,rM=Array.prototype.concat,Co=Array.prototype.join,oue=Array.prototype.slice,nM=Math.floor,MP=typeof BigInt=="function"?BigInt.prototype.valueOf:null,DE=Object.getOwnPropertySymbols,FP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,rd=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===rd||!0)?Symbol.toStringTag:null,N9=Object.prototype.propertyIsEnumerable,iM=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function oM(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||I9.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-nM(-t):nM(t);if(n!==t){var i=String(n),o=fO.call(e,i.length+1);return ya.call(i,r,"$&_")+"."+ya.call(ya.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ya.call(e,r,"$&_")}var LP=Kce,sM=LP.custom,aM=O9(sM)?sM:null,sue=function t(e,r,n,i){var o=r||{};if(ea(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ea(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=ea(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ea(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ea(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return R9(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?oM(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?oM(e,c):c}var f=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return BP(e)?"[Array]":"[Object]";var d=Eue(o,n);if(typeof i>"u")i=[];else if(j9(i,e)>=0)return"[Circular]";function h(N,j,L){if(j&&(i=oue.call(i),i.push(j)),L){var V={depth:o.depth};return ea(o,"quoteStyle")&&(V.quoteStyle=o.quoteStyle),t(N,V,n+1,i)}return t(N,o,n+1,i)}if(typeof e=="function"&&!lM(e)){var p=mue(e),m=kv(e,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Co.call(m,", ")+" }":"")}if(O9(e)){var y=rd?ya.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):FP.call(e);return typeof e=="object"&&!rd?Oh(y):y}if(_ue(e)){for(var g="<"+tM.call(String(e.nodeName)),b=e.attributes||[],v=0;v<b.length;v++)g+=" "+b[v].name+"="+k9(aue(b[v].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+tM.call(String(e.nodeName))+">",g}if(BP(e)){if(e.length===0)return"[]";var x=kv(e,h);return d&&!Sue(x)?"["+UP(x,d)+"]":"[ "+Co.call(x,", ")+" ]"}if(cue(e)){var S=kv(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!N9.call(e,"cause")?"{ ["+String(e)+"] "+Co.call(rM.call("[cause]: "+h(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Co.call(S,", ")+" }"}if(typeof e=="object"&&s){if(aM&&typeof e[aM]=="function"&&LP)return LP(e,{depth:f-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(yue(e)){var _=[];return Qce.call(e,function(N,j){_.push(h(j,e,!0)+" => "+h(N,e))}),cM("Map",ix.call(e),_,d)}if(bue(e)){var w=[];return Yce.call(e,function(N){w.push(h(N,e))}),cM("Set",ox.call(e),w,d)}if(gue(e))return ME("WeakMap");if(xue(e))return ME("WeakSet");if(vue(e))return ME("WeakRef");if(fue(e))return Oh(h(Number(e)));if(hue(e))return Oh(h(MP.call(e)));if(due(e))return Oh(eue.call(e));if(uue(e))return Oh(h(String(e)));if(!lue(e)&&!lM(e)){var A=kv(e,h),C=iM?iM(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",P=!C&&pn&&Object(e)===e&&pn in e?fO.call(sl(e),8,-1):T?"Object":"",I=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",k=I+(P||T?"["+Co.call(rM.call([],P||[],T||[]),": ")+"] ":"");return A.length===0?k+"{}":d?k+"{"+UP(A,d)+"}":k+"{ "+Co.call(A,", ")+" }"}return String(e)};function k9(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function aue(t){return ya.call(String(t),/"/g,"&quot;")}function BP(t){return sl(t)==="[object Array]"&&(!pn||!(typeof t=="object"&&pn in t))}function lue(t){return sl(t)==="[object Date]"&&(!pn||!(typeof t=="object"&&pn in t))}function lM(t){return sl(t)==="[object RegExp]"&&(!pn||!(typeof t=="object"&&pn in t))}function cue(t){return sl(t)==="[object Error]"&&(!pn||!(typeof t=="object"&&pn in t))}function uue(t){return sl(t)==="[object String]"&&(!pn||!(typeof t=="object"&&pn in t))}function fue(t){return sl(t)==="[object Number]"&&(!pn||!(typeof t=="object"&&pn in t))}function due(t){return sl(t)==="[object Boolean]"&&(!pn||!(typeof t=="object"&&pn in t))}function O9(t){if(rd)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!FP)return!1;try{return FP.call(t),!0}catch{}return!1}function hue(t){if(!t||typeof t!="object"||!MP)return!1;try{return MP.call(t),!0}catch{}return!1}var pue=Object.prototype.hasOwnProperty||function(t){return t in this};function ea(t,e){return pue.call(t,e)}function sl(t){return tue.call(t)}function mue(t){if(t.name)return t.name;var e=nue.call(rue.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function j9(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function yue(t){if(!ix||!t||typeof t!="object")return!1;try{ix.call(t);try{ox.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function gue(t){if(!Fp||!t||typeof t!="object")return!1;try{Fp.call(t,Fp);try{Lp.call(t,Lp)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function vue(t){if(!eM||!t||typeof t!="object")return!1;try{return eM.call(t),!0}catch{}return!1}function bue(t){if(!ox||!t||typeof t!="object")return!1;try{ox.call(t);try{ix.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function xue(t){if(!Lp||!t||typeof t!="object")return!1;try{Lp.call(t,Lp);try{Fp.call(t,Fp)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function _ue(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function R9(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return R9(fO.call(t,0,e.maxStringLength),e)+n}var i=ya.call(ya.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,wue);return k9(i,"single",e)}function wue(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+iue.call(e.toString(16))}function Oh(t){return"Object("+t+")"}function ME(t){return t+" { ? }"}function cM(t,e,r,n){var i=n?UP(r,n):Co.call(r,", ");return t+" ("+e+") {"+i+"}"}function Sue(t){for(var e=0;e<t.length;e++)if(j9(t[e],`
`)>=0)return!1;return!0}function Eue(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Co.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Co.call(Array(e+1),r)}}function UP(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Co.call(t,","+r)+`
`+e.prev}function kv(t,e){var r=BP(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=ea(t,i)?e(t[i],t):""}var o=typeof DE=="function"?DE(t):[],s;if(rd){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)ea(t,l)&&(r&&String(Number(l))===l&&l<t.length||rd&&s["$"+l]instanceof Symbol||(I9.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof DE=="function")for(var c=0;c<o.length;c++)N9.call(t,o[c])&&n.push("["+e(o[c])+"]: "+e(t[o[c]],t));return n}var dO=Ds,Gd=go,Aue=sue,Cue=dO("%TypeError%"),Ov=dO("%WeakMap%",!0),jv=dO("%Map%",!0),Pue=Gd("WeakMap.prototype.get",!0),Tue=Gd("WeakMap.prototype.set",!0),Iue=Gd("WeakMap.prototype.has",!0),Nue=Gd("Map.prototype.get",!0),kue=Gd("Map.prototype.set",!0),Oue=Gd("Map.prototype.has",!0),hO=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},jue=function(t,e){var r=hO(t,e);return r&&r.value},Rue=function(t,e,r){var n=hO(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},$ue=function(t,e){return!!hO(t,e)},$9=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new Cue("Side channel does not contain "+Aue(o))},get:function(o){if(Ov&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Pue(e,o)}else if(jv){if(r)return Nue(r,o)}else if(n)return jue(n,o)},has:function(o){if(Ov&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Iue(e,o)}else if(jv){if(r)return Oue(r,o)}else if(n)return $ue(n,o);return!1},set:function(o,s){Ov&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Ov),Tue(e,o,s)):jv?(r||(r=new jv),kue(r,o,s)):(n||(n={key:{},next:null}),Rue(n,o,s))}};return i},Due=Ds,Mue=oO,jh=$9(),is=Due("%TypeError%"),pO={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new is("`O` is not an object");if(typeof e!="string")throw new is("`slot` must be a string");if(jh.assert(t),!pO.has(t,e))throw new is("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new is("`O` is not an object");if(typeof e!="string")throw new is("`slot` must be a string");var r=jh.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new is("`O` is not an object");if(typeof e!="string")throw new is("`slot` must be a string");var r=jh.get(t);return!!r&&Mue(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new is("`O` is not an object");if(typeof e!="string")throw new is("`slot` must be a string");var n=jh.get(t);n||(n={},jh.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(pO);var Fue=pO,Rh=Fue,Lue=SyntaxError,uM=typeof StopIteration=="object"?StopIteration:null,Bue=function(e){if(!uM)throw new Lue("this environment lacks StopIteration");Rh.set(e,"[[Done]]",!1);var r={next:function(){var i=Rh.get(this,"[[Iterator]]"),o=Rh.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(Rh.set(i,"[[Done]]",!0),s!==uM)throw s;return{done:!0,value:void 0}}}};return Rh.set(r,"[[Iterator]]",e),r},Uue={}.toString,D9=Array.isArray||function(t){return Uue.call(t)=="[object Array]"},Vue=String.prototype.valueOf,Wue=function(e){try{return Vue.call(e),!0}catch{return!1}},zue=Object.prototype.toString,Gue="[object String]",que=ol(),M9=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:que?Wue(e):zue.call(e)===Gue},mO=typeof Map=="function"&&Map.prototype?Map:null,Hue=typeof Set=="function"&&Set.prototype?Set:null,sx;mO||(sx=function(e){return!1});var F9=mO?Map.prototype.has:null,fM=Hue?Set.prototype.has:null;!sx&&!F9&&(sx=function(e){return!1});var L9=sx||function(e){if(!e||typeof e!="object")return!1;try{if(F9.call(e),fM)try{fM.call(e)}catch{return!0}return e instanceof mO}catch{}return!1},Kue=typeof Map=="function"&&Map.prototype?Map:null,yO=typeof Set=="function"&&Set.prototype?Set:null,ax;yO||(ax=function(e){return!1});var dM=Kue?Map.prototype.has:null,B9=yO?Set.prototype.has:null;!ax&&!B9&&(ax=function(e){return!1});var U9=ax||function(e){if(!e||typeof e!="object")return!1;try{if(B9.call(e),dM)try{dM.call(e)}catch{return!0}return e instanceof yO}catch{}return!1},hM=T9,pM=Bue;if(il()||zw()){var FE=Symbol.iterator;R0.exports=function(e){if(e!=null&&typeof e[FE]<"u")return e[FE]();if(hM(e))return Array.prototype[FE].call(e)}}else{var Que=D9,Yue=M9,mM=Ds,Xue=mM("%Map%",!0),Jue=mM("%Set%",!0),Gi=go,yM=Gi("Array.prototype.push"),gM=Gi("String.prototype.charCodeAt"),Zue=Gi("String.prototype.slice"),efe=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=gM(e,r);if(i<55296||i>56319)return r+1;var o=gM(e,r+1);return o<56320||o>57343?r+1:r+2},LE=function(e){var r=0;return{next:function(){var i=r>=e.length,o;return i||(o=e[r],r+=1),{done:i,value:o}}}},vM=function(e,r){if(Que(e)||hM(e))return LE(e);if(Yue(e)){var n=0;return{next:function(){var o=efe(e,n),s=Zue(e,n,o);return n=o,{done:o>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!Xue&&!Jue)R0.exports=function(e){if(e!=null)return vM(e,!0)};else{var tfe=L9,rfe=U9,bM=Gi("Map.prototype.forEach",!0),xM=Gi("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var _M=Gi("Map.prototype.iterator",!0),wM=Gi("Set.prototype.iterator",!0);var SM=Gi("Map.prototype.@@iterator",!0)||Gi("Map.prototype._es6-shim iterator_",!0),EM=Gi("Set.prototype.@@iterator",!0)||Gi("Set.prototype._es6-shim iterator_",!0),nfe=function(e){if(tfe(e)){if(_M)return pM(_M(e));if(SM)return SM(e);if(bM){var r=[];return bM(e,function(i,o){yM(r,[o,i])}),LE(r)}}if(rfe(e)){if(wM)return pM(wM(e));if(EM)return EM(e);if(xM){var n=[];return xM(e,function(i){yM(n,i)}),LE(n)}}};R0.exports=function(e){return nfe(e)||vM(e)}}}var ife=R0.exports,AM=function(t){return t!==t},V9=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||AM(e)&&AM(r))},ofe=V9,W9=function(){return typeof Object.is=="function"?Object.is:ofe},sfe=W9,afe=Gw,lfe=function(){var e=sfe();return afe(Object,{is:e},{is:function(){return Object.is!==e}}),e},cfe=Gw,ufe=_g,ffe=V9,z9=W9,dfe=lfe,G9=ufe(z9(),Object);cfe(G9,{getPolyfill:z9,implementation:ffe,shim:dfe});var hfe=G9,q9={exports:{}},pfe="Function.prototype.bind called on incompatible ",BE=Array.prototype.slice,mfe=Object.prototype.toString,yfe="[object Function]",gfe=function(e){var r=this;if(typeof r!="function"||mfe.call(r)!==yfe)throw new TypeError(pfe+r);for(var n=BE.call(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,n.concat(BE.call(arguments)));return Object(f)===f?f:this}else return r.apply(e,n.concat(BE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},vfe=gfe,H9=Function.prototype.bind||vfe,Ze,nd=SyntaxError,K9=Function,cf=TypeError,UE=function(t){try{return K9('"use strict"; return ('+t+").constructor;")()}catch{}},dc=Object.getOwnPropertyDescriptor;if(dc)try{dc({},"")}catch{dc=null}var VE=function(){throw new cf},bfe=dc?function(){try{return arguments.callee,VE}catch{try{return dc(arguments,"callee").get}catch{return VE}}}():VE,nu=il(),ta=Object.getPrototypeOf||function(t){return t.__proto__},gu={},xfe=typeof Uint8Array>"u"?Ze:ta(Uint8Array),uf={"%AggregateError%":typeof AggregateError>"u"?Ze:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ze:ArrayBuffer,"%ArrayIteratorPrototype%":nu?ta([][Symbol.iterator]()):Ze,"%AsyncFromSyncIteratorPrototype%":Ze,"%AsyncFunction%":gu,"%AsyncGenerator%":gu,"%AsyncGeneratorFunction%":gu,"%AsyncIteratorPrototype%":gu,"%Atomics%":typeof Atomics>"u"?Ze:Atomics,"%BigInt%":typeof BigInt>"u"?Ze:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ze:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ze:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ze:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ze:FinalizationRegistry,"%Function%":K9,"%GeneratorFunction%":gu,"%Int8Array%":typeof Int8Array>"u"?Ze:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ze:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ze:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":nu?ta(ta([][Symbol.iterator]())):Ze,"%JSON%":typeof JSON=="object"?JSON:Ze,"%Map%":typeof Map>"u"?Ze:Map,"%MapIteratorPrototype%":typeof Map>"u"||!nu?Ze:ta(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ze:Promise,"%Proxy%":typeof Proxy>"u"?Ze:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ze:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ze:Set,"%SetIteratorPrototype%":typeof Set>"u"||!nu?Ze:ta(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ze:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":nu?ta(""[Symbol.iterator]()):Ze,"%Symbol%":nu?Symbol:Ze,"%SyntaxError%":nd,"%ThrowTypeError%":bfe,"%TypedArray%":xfe,"%TypeError%":cf,"%Uint8Array%":typeof Uint8Array>"u"?Ze:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ze:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ze:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ze:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ze:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ze:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ze:WeakSet},_fe=function t(e){var r;if(e==="%AsyncFunction%")r=UE("async function () {}");else if(e==="%GeneratorFunction%")r=UE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=UE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=ta(i.prototype))}return uf[e]=r,r},CM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ag=H9,lx=oO,wfe=Ag.call(Function.call,Array.prototype.concat),Sfe=Ag.call(Function.apply,Array.prototype.splice),PM=Ag.call(Function.call,String.prototype.replace),cx=Ag.call(Function.call,String.prototype.slice),Efe=Ag.call(Function.call,RegExp.prototype.exec),Afe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Cfe=/\\(\\)?/g,Pfe=function(e){var r=cx(e,0,1),n=cx(e,-1);if(r==="%"&&n!=="%")throw new nd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new nd("invalid intrinsic syntax, expected opening `%`");var i=[];return PM(e,Afe,function(o,s,a,l){i[i.length]=a?PM(l,Cfe,"$1"):s||o}),i},Tfe=function(e,r){var n=e,i;if(lx(CM,n)&&(i=CM[n],n="%"+i[0]+"%"),lx(uf,n)){var o=uf[n];if(o===gu&&(o=_fe(n)),typeof o>"u"&&!r)throw new cf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new nd("intrinsic "+e+" does not exist!")},Q9=function(e,r){if(typeof e!="string"||e.length===0)throw new cf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new cf('"allowMissing" argument must be a boolean');if(Efe(/^%?[^%]*%?$/,e)===null)throw new nd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Pfe(e),i=n.length>0?n[0]:"",o=Tfe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Sfe(n,wfe([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],p=cx(h,0,1),m=cx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new nd("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",lx(uf,s))a=uf[s];else if(a!=null){if(!(h in a)){if(!r)throw new cf("base intrinsic for "+e+" exists, but the property is not available.");return}if(dc&&f+1>=n.length){var y=dc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=lx(a,h),a=a[h];d&&!l&&(uf[s]=a)}}return a};(function(t){var e=H9,r=Q9,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,d.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(q9);var Y9=q9.exports,X9=Q9,J9=Y9,Ife=J9(X9("String.prototype.indexOf")),Nfe=function(e,r){var n=X9(e,!!r);return typeof n=="function"&&Ife(e,".prototype.")>-1?J9(n):n},Z9=Function.prototype.toString,Fu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,VP,$0;if(typeof Fu=="function"&&typeof Object.defineProperty=="function")try{VP=Object.defineProperty({},"length",{get:function(){throw $0}}),$0={},Fu(function(){throw 42},null,VP)}catch(t){t!==$0&&(Fu=null)}else Fu=null;var kfe=/^\s*class\b/,WP=function(e){try{var r=Z9.call(e);return kfe.test(r)}catch{return!1}},WE=function(e){try{return WP(e)?!1:(Z9.call(e),!0)}catch{return!1}},D0=Object.prototype.toString,Ofe="[object Object]",jfe="[object Function]",Rfe="[object GeneratorFunction]",$fe="[object HTMLAllCollection]",Dfe="[object HTML document.all class]",Mfe="[object HTMLCollection]",Ffe=typeof Symbol=="function"&&!!Symbol.toStringTag,Lfe=!(0 in[,]),zP=function(){return!1};if(typeof document=="object"){var Bfe=document.all;D0.call(Bfe)===D0.call(document.all)&&(zP=function(e){if((Lfe||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=D0.call(e);return(r===$fe||r===Dfe||r===Mfe||r===Ofe)&&e("")==null}catch{}return!1})}var Ufe=Fu?function(e){if(zP(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Fu(e,null,VP)}catch(r){if(r!==$0)return!1}return!WP(e)&&WE(e)}:function(e){if(zP(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Ffe)return WE(e);if(WP(e))return!1;var r=D0.call(e);return r!==jfe&&r!==Rfe&&!/^\[object HTML/.test(r)?!1:WE(e)},Vfe=Ufe,Wfe=Object.prototype.toString,ez=Object.prototype.hasOwnProperty,zfe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)ez.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Gfe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},qfe=function(e,r,n){for(var i in e)ez.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Hfe=function(e,r,n){if(!Vfe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Wfe.call(e)==="[object Array]"?zfe(e,r,i):typeof e=="string"?Gfe(e,r,i):qfe(e,r,i)},tz=Hfe,zE=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Kfe=typeof globalThis>"u"?Rl:globalThis,rz=function(){for(var e=[],r=0;r<zE.length;r++)typeof Kfe[zE[r]]=="function"&&(e[e.length]=zE[r]);return e},nz=tz,Qfe=rz,gO=go,Yfe=gO("Object.prototype.toString"),iz=ol(),M0=Qw,Xfe=typeof globalThis>"u"?Rl:globalThis,oz=Qfe(),Jfe=gO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Zfe=gO("String.prototype.slice"),sz={},GE=Object.getPrototypeOf;iz&&M0&&GE&&nz(oz,function(t){var e=new Xfe[t];if(Symbol.toStringTag in e){var r=GE(e),n=M0(r,Symbol.toStringTag);if(!n){var i=GE(r);n=M0(i,Symbol.toStringTag)}sz[t]=n.get}});var ede=function(e){var r=!1;return nz(sz,function(n,i){if(!r)try{r=n.call(e)===i}catch{}}),r},az=function(e){if(!e||typeof e!="object")return!1;if(!iz||!(Symbol.toStringTag in e)){var r=Zfe(Yfe(e),8,-1);return Jfe(oz,r)>-1}return M0?ede(e):!1},tde=Y9,rde=Nfe,lz=Kw,nde=az,TM=lz("ArrayBuffer",!0),IM=lz("Float32Array",!0),F0=rde("ArrayBuffer.prototype.byteLength",!0),NM=TM&&!F0&&new TM().slice,kM=NM&&tde(NM),ide=F0||kM?function(e){if(!e||typeof e!="object")return!1;try{return F0?F0(e):kM(e,0),!0}catch{return!1}}:IM?function(e){try{return new IM(e).buffer===e&&!nde(e)}catch(r){return typeof e=="object"&&r.name==="RangeError"}}:function(e){return!1},ode=Date.prototype.getDay,sde=function(e){try{return ode.call(e),!0}catch{return!1}},ade=Object.prototype.toString,lde="[object Date]",cde=ol(),ude=function(e){return typeof e!="object"||e===null?!1:cde?sde(e):ade.call(e)===lde},GP=go,cz=ol(),uz,fz,qP,HP;if(cz){uz=GP("Object.prototype.hasOwnProperty"),fz=GP("RegExp.prototype.exec"),qP={};var qE=function(){throw qP};HP={toString:qE,valueOf:qE},typeof Symbol.toPrimitive=="symbol"&&(HP[Symbol.toPrimitive]=qE)}var fde=GP("Object.prototype.toString"),dde=Object.getOwnPropertyDescriptor,hde="[object RegExp]",pde=cz?function(e){if(!e||typeof e!="object")return!1;var r=dde(e,"lastIndex"),n=r&&uz(r,"value");if(!n)return!1;try{fz(e,HP)}catch(i){return i===qP}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:fde(e)===hde},mde=go,OM=mde("SharedArrayBuffer.prototype.byteLength",!0),yde=OM?function(e){if(!e||typeof e!="object")return!1;try{return OM(e),!0}catch{return!1}}:function(e){return!1},gde=Number.prototype.toString,vde=function(e){try{return gde.call(e),!0}catch{return!1}},bde=Object.prototype.toString,xde="[object Number]",_de=ol(),wde=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:_de?vde(e):bde.call(e)===xde},dz=go,Sde=dz("Boolean.prototype.toString"),Ede=dz("Object.prototype.toString"),Ade=function(e){try{return Sde(e),!0}catch{return!1}},Cde="[object Boolean]",Pde=ol(),Tde=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:Pde&&Symbol.toStringTag in e?Ade(e):Ede(e)===Cde},KP={exports:{}},Ide=Object.prototype.toString,Nde=il();if(Nde){var kde=Symbol.prototype.toString,Ode=/^Symbol\(.*\)$/,jde=function(e){return typeof e.valueOf()!="symbol"?!1:Ode.test(kde.call(e))};KP.exports=function(e){if(typeof e=="symbol")return!0;if(Ide.call(e)!=="[object Symbol]")return!1;try{return jde(e)}catch{return!1}}}else KP.exports=function(e){return!1};var Rde=KP.exports,QP={exports:{}},jM=typeof BigInt<"u"&&BigInt,$de=function(){return typeof jM=="function"&&typeof BigInt=="function"&&typeof jM(42)=="bigint"&&typeof BigInt(42)=="bigint"},Dde=$de();if(Dde){var Mde=BigInt.prototype.valueOf,Fde=function(e){try{return Mde.call(e),!0}catch{}return!1};QP.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:Fde(e)}}else QP.exports=function(e){return!1};var Lde=QP.exports,Bde=M9,Ude=wde,Vde=Tde,Wde=Rde,zde=Lde,Gde=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(Bde(e))return"String";if(Ude(e))return"Number";if(Vde(e))return"Boolean";if(Wde(e))return"Symbol";if(zde(e))return"BigInt"},ux=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,RM=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,fx;ux||(fx=function(e){return!1});var YP=ux?ux.prototype.has:null,HE=RM?RM.prototype.has:null;!fx&&!YP&&(fx=function(e){return!1});var qde=fx||function(e){if(!e||typeof e!="object")return!1;try{if(YP.call(e,YP),HE)try{HE.call(e,HE)}catch{return!0}return e instanceof ux}catch{}return!1},XP={exports:{}},Hde=Ds,hz=go,Kde=Hde("%WeakSet%",!0),KE=hz("WeakSet.prototype.has",!0);if(KE){var QE=hz("WeakMap.prototype.has",!0);XP.exports=function(e){if(!e||typeof e!="object")return!1;try{if(KE(e,KE),QE)try{QE(e,QE)}catch{return!0}return e instanceof Kde}catch{}return!1}}else XP.exports=function(e){return!1};var Qde=XP.exports,Yde=L9,Xde=U9,Jde=qde,Zde=Qde,ehe=function(e){if(e&&typeof e=="object"){if(Yde(e))return"Map";if(Xde(e))return"Set";if(Jde(e))return"WeakMap";if(Zde(e))return"WeakSet"}return!1},pz={exports:{}},the="Function.prototype.bind called on incompatible ",rhe=Object.prototype.toString,nhe=Math.max,ihe="[object Function]",$M=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},ohe=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},she=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},ahe=function(e){var r=this;if(typeof r!="function"||rhe.apply(r)!==ihe)throw new TypeError(the+r);for(var n=ohe(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,$M(n,arguments));return Object(f)===f?f:this}return r.apply(e,$M(n,arguments))},s=nhe(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+she(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},lhe=ahe,mz=Function.prototype.bind||lhe,We,id=SyntaxError,yz=Function,ff=TypeError,YE=function(t){try{return yz('"use strict"; return ('+t+").constructor;")()}catch{}},hc=Object.getOwnPropertyDescriptor;if(hc)try{hc({},"")}catch{hc=null}var XE=function(){throw new ff},che=hc?function(){try{return arguments.callee,XE}catch{try{return hc(arguments,"callee").get}catch{return XE}}}():XE,iu=il(),uhe=qw(),Er=Object.getPrototypeOf||(uhe?function(t){return t.__proto__}:null),vu={},fhe=typeof Uint8Array>"u"||!Er?We:Er(Uint8Array),pc={"%AggregateError%":typeof AggregateError>"u"?We:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?We:ArrayBuffer,"%ArrayIteratorPrototype%":iu&&Er?Er([][Symbol.iterator]()):We,"%AsyncFromSyncIteratorPrototype%":We,"%AsyncFunction%":vu,"%AsyncGenerator%":vu,"%AsyncGeneratorFunction%":vu,"%AsyncIteratorPrototype%":vu,"%Atomics%":typeof Atomics>"u"?We:Atomics,"%BigInt%":typeof BigInt>"u"?We:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?We:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?We:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?We:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?We:Float32Array,"%Float64Array%":typeof Float64Array>"u"?We:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?We:FinalizationRegistry,"%Function%":yz,"%GeneratorFunction%":vu,"%Int8Array%":typeof Int8Array>"u"?We:Int8Array,"%Int16Array%":typeof Int16Array>"u"?We:Int16Array,"%Int32Array%":typeof Int32Array>"u"?We:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":iu&&Er?Er(Er([][Symbol.iterator]())):We,"%JSON%":typeof JSON=="object"?JSON:We,"%Map%":typeof Map>"u"?We:Map,"%MapIteratorPrototype%":typeof Map>"u"||!iu||!Er?We:Er(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?We:Promise,"%Proxy%":typeof Proxy>"u"?We:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?We:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?We:Set,"%SetIteratorPrototype%":typeof Set>"u"||!iu||!Er?We:Er(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?We:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":iu&&Er?Er(""[Symbol.iterator]()):We,"%Symbol%":iu?Symbol:We,"%SyntaxError%":id,"%ThrowTypeError%":che,"%TypedArray%":fhe,"%TypeError%":ff,"%Uint8Array%":typeof Uint8Array>"u"?We:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?We:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?We:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?We:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?We:WeakMap,"%WeakRef%":typeof WeakRef>"u"?We:WeakRef,"%WeakSet%":typeof WeakSet>"u"?We:WeakSet};if(Er)try{null.error}catch(t){var dhe=Er(Er(t));pc["%Error.prototype%"]=dhe}var hhe=function t(e){var r;if(e==="%AsyncFunction%")r=YE("async function () {}");else if(e==="%GeneratorFunction%")r=YE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=YE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Er&&(r=Er(i.prototype))}return pc[e]=r,r},DM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Cg=mz,dx=Hw,phe=Cg.call(Function.call,Array.prototype.concat),mhe=Cg.call(Function.apply,Array.prototype.splice),MM=Cg.call(Function.call,String.prototype.replace),hx=Cg.call(Function.call,String.prototype.slice),yhe=Cg.call(Function.call,RegExp.prototype.exec),ghe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,vhe=/\\(\\)?/g,bhe=function(e){var r=hx(e,0,1),n=hx(e,-1);if(r==="%"&&n!=="%")throw new id("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new id("invalid intrinsic syntax, expected opening `%`");var i=[];return MM(e,ghe,function(o,s,a,l){i[i.length]=a?MM(l,vhe,"$1"):s||o}),i},xhe=function(e,r){var n=e,i;if(dx(DM,n)&&(i=DM[n],n="%"+i[0]+"%"),dx(pc,n)){var o=pc[n];if(o===vu&&(o=hhe(n)),typeof o>"u"&&!r)throw new ff("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new id("intrinsic "+e+" does not exist!")},gz=function(e,r){if(typeof e!="string"||e.length===0)throw new ff("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ff('"allowMissing" argument must be a boolean');if(yhe(/^%?[^%]*%?$/,e)===null)throw new id("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=bhe(e),i=n.length>0?n[0]:"",o=xhe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],mhe(n,phe([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],p=hx(h,0,1),m=hx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new id("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",dx(pc,s))a=pc[s];else if(a!=null){if(!(h in a)){if(!r)throw new ff("base intrinsic for "+e+" exists, but the property is not available.");return}if(hc&&f+1>=n.length){var y=hc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=dx(a,h),a=a[h];d&&!l&&(pc[s]=a)}}return a};(function(t){var e=mz,r=gz,n=v9,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var f=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f})(pz);var vz=pz.exports,bz=gz,xz=vz,_he=xz(bz("String.prototype.indexOf")),whe=function(e,r){var n=bz(e,!!r);return typeof n=="function"&&_he(e,".prototype.")>-1?xz(n):n},px=tz,She=rz,FM=vz,vO=whe,L0=Qw,Ehe=vO("Object.prototype.toString"),_z=ol(),LM=typeof globalThis>"u"?Rl:globalThis,JP=She(),bO=vO("String.prototype.slice"),JE=Object.getPrototypeOf,Ahe=vO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},mx={__proto__:null};_z&&L0&&JE?px(JP,function(t){var e=new LM[t];if(Symbol.toStringTag in e){var r=JE(e),n=L0(r,Symbol.toStringTag);if(!n){var i=JE(r);n=L0(i,Symbol.toStringTag)}mx["$"+t]=FM(n.get)}}):px(JP,function(t){var e=new LM[t],r=e.slice||e.set;r&&(mx["$"+t]=FM(r))});var Che=function(e){var r=!1;return px(mx,function(n,i){if(!r)try{"$"+n(e)===i&&(r=bO(i,1))}catch{}}),r},Phe=function(e){var r=!1;return px(mx,function(n,i){if(!r)try{n(e),r=bO(i,1)}catch{}}),r},The=function(e){if(!e||typeof e!="object")return!1;if(!_z){var r=bO(Ehe(e),8,-1);return Ahe(JP,r)>-1?r:r!=="Object"?!1:Phe(e)}return L0?Che(e):null},ZE,BM;function Ihe(){if(BM)return ZE;BM=1;var t=_g,e=go,r=Ds,n=az,i=r("ArrayBuffer",!0),o=r("Float32Array",!0),s=e("ArrayBuffer.prototype.byteLength",!0),a=i&&!s&&new i().slice,l=a&&t(a);return ZE=s||l?function(f){if(!f||typeof f!="object")return!1;try{return s?s(f):l(f,0),!0}catch{return!1}}:o?function(f){try{return new o(f).buffer===f&&!n(f)}catch{return!1}}:function(f){return!1},ZE}var Nhe=go,UM=Nhe("ArrayBuffer.prototype.byteLength",!0),khe=Ihe(),Ohe=function(e){return khe(e)?UM?UM(e):e.byteLength:NaN},wz=Rae,ts=fce,VM=Uce,jhe=Kw,od=ife,Rhe=$9,WM=hfe,zM=T9,GM=D9,qM=ide,HM=ude,KM=pde,QM=yde,YM=Ww,XM=Gde,JM=ehe,ZM=The,eF=Ohe,tF=ts("SharedArrayBuffer.prototype.byteLength",!0),rF=ts("Date.prototype.getTime"),eA=Object.getPrototypeOf,nF=ts("Object.prototype.toString"),yx=jhe("%Set%",!0),ZP=ts("Map.prototype.has",!0),gx=ts("Map.prototype.get",!0),iF=ts("Map.prototype.size",!0),vx=ts("Set.prototype.add",!0),Sz=ts("Set.prototype.delete",!0),bx=ts("Set.prototype.has",!0),B0=ts("Set.prototype.size",!0);function oF(t,e,r,n){for(var i=od(t),o;(o=i.next())&&!o.done;)if(ho(e,o.value,r,n))return Sz(t,o.value),!0;return!1}function Ez(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function $he(t,e,r,n,i,o){var s=Ez(r);if(s!=null)return s;var a=gx(e,s),l=wz({},i,{strict:!1});return typeof a>"u"&&!ZP(e,s)||!ho(n,a,l,o)?!1:!ZP(t,s)&&ho(n,a,l,o)}function Dhe(t,e,r){var n=Ez(r);return n??(bx(e,n)&&!bx(t,n))}function sF(t,e,r,n,i,o){for(var s=od(t),a,l;(a=s.next())&&!a.done;)if(l=a.value,ho(r,l,i,o)&&ho(n,gx(e,l),i,o))return Sz(t,l),!0;return!1}function ho(t,e,r,n){var i=r||{};if(i.strict?WM(t,e):t===e)return!0;var o=XM(t),s=XM(e);if(o!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?WM(t,e):t==e;var a=n.has(t),l=n.has(e),c;if(a&&l){if(n.get(t)===n.get(e))return!0}else c={};return a||n.set(t,c),l||n.set(e,c),Lhe(t,e,i,n)}function aF(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Mhe(t,e,r,n){if(B0(t)!==B0(e))return!1;for(var i=od(t),o=od(e),s,a,l;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new yx),vx(l,s.value);else if(!bx(e,s.value)){if(r.strict||!Dhe(t,e,s.value))return!1;l||(l=new yx),vx(l,s.value)}if(l){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!oF(l,a.value,r.strict,n))return!1}else if(!r.strict&&!bx(t,a.value)&&!oF(l,a.value,r.strict,n))return!1;return B0(l)===0}return!0}function Fhe(t,e,r,n){if(iF(t)!==iF(e))return!1;for(var i=od(t),o=od(e),s,a,l,c,f,d;(s=i.next())&&!s.done;)if(c=s.value[0],f=s.value[1],c&&typeof c=="object")l||(l=new yx),vx(l,c);else if(d=gx(e,c),typeof d>"u"&&!ZP(e,c)||!ho(f,d,r,n)){if(r.strict||!$he(t,e,c,f,r,n))return!1;l||(l=new yx),vx(l,c)}if(l){for(;(a=o.next())&&!a.done;)if(c=a.value[0],d=a.value[1],c&&typeof c=="object"){if(!sF(l,t,c,d,r,n))return!1}else if(!r.strict&&(!t.has(c)||!ho(gx(t,c),d,r,n))&&!sF(l,t,c,d,wz({},r,{strict:!1}),n))return!1;return B0(l)===0}return!0}function Lhe(t,e,r,n){var i,o;if(typeof t!=typeof e||t==null||e==null||nF(t)!==nF(e)||zM(t)!==zM(e))return!1;var s=GM(t),a=GM(e);if(s!==a)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var f=KM(t),d=KM(e);if(f!==d||(f||d)&&(t.source!==e.source||VM(t)!==VM(e)))return!1;var h=HM(t),p=HM(e);if(h!==p||(h||p)&&rF(t)!==rF(e)||r.strict&&eA&&eA(t)!==eA(e))return!1;var m=ZM(t),y=ZM(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var g=aF(t),b=aF(e);if(g!==b)return!1;if(g||b){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=qM(t),x=qM(e);if(v!==x)return!1;if(v||x)return eF(t)!==eF(e)?!1:typeof Uint8Array=="function"&&ho(new Uint8Array(t),new Uint8Array(e),r,n);var S=QM(t),_=QM(e);if(S!==_)return!1;if(S||_)return tF(t)!==tF(e)?!1:typeof Uint8Array=="function"&&ho(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var w=YM(t),A=YM(e);if(w.length!==A.length)return!1;for(w.sort(),A.sort(),i=w.length-1;i>=0;i--)if(w[i]!=A[i])return!1;for(i=w.length-1;i>=0;i--)if(o=w[i],!ho(t[o],e[o],r,n))return!1;var C=JM(t),T=JM(e);return C!==T?!1:C==="Set"||T==="Set"?Mhe(t,e,r,n):C==="Map"?Fhe(t,e,r,n):!0}var Bhe=function(e,r,n){return ho(e,r,n,Rhe())};const Uhe=ct(Bhe),Vhe=(t,e)=>Uhe(t,e);var Whe="firebase",zhe="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo(Whe,zhe,"app");const Ghe={apiKey:"AIzaSyCa4jaiAOgH5H8B6hSo4DU49WnkpGPeavA",authDomain:"hkmjbs-streaming.firebaseapp.com",databaseURL:"https://hkmjbs-streaming-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hkmjbs-streaming",storageBucket:"hkmjbs-streaming.appspot.com",messagingSenderId:"537815456325",appId:"1:537815456325:web:c387796326f9db2726a12c"},xO=NW(Ghe),$h=Wse(xO),Az={database:$h,get:t=>{const e=ap($h,t);return X8(e).then(r=>{if(r.exists())return r.val()}).catch(r=>{throw console.error(r),r})},set:(t,e)=>{const r=ap($h,t);return rO(r,e).catch(n=>{throw console.error(n),n})},update:(t,e)=>{const r=ap($h,t);return Y8(r,e).catch(n=>{throw console.error(n),n})},push:(t,e)=>{const r=ap($h,t);return Q8(r,e).catch(n=>{throw console.error(n),n})}},_O=E.createContext(Az);function qhe({children:t}){return u.jsx(_O.Provider,{value:Az,children:t})}const Cz=()=>E.useContext(_O),mr=(t,e)=>{const{database:r}=E.useContext(_O),n=E.useMemo(()=>ap(r,t),[r,t]),[i,o]=E.useState(),[s,a]=E.useState(e),l=E.useCallback(h=>rO(n,h),[n]),c=E.useCallback(h=>Y8(n,h),[n]),f=E.useCallback(h=>Q8(n,h),[n]);return E.useEffect(()=>{Vhe(e,s)||a(e)},[s,e]),E.useEffect(()=>{const h=[];s!=null&&s.order&&s.order.byChild&&h.push(Ose(s.order.byChild)),s!=null&&s.filter&&(typeof s.filter.equalTo<"u"&&h.push(Rse(s.filter.equalTo)),typeof s.filter.limitToLast<"u"&&h.push(Nse(s.filter.limitToLast)));const p=h.length>0?$se(n,...h):n;s!=null&&s.onlyOnce?X8(p).then(m=>{m.exists()&&o(m.val())}):Cse(p,m=>{o(m.val())},s??{})},[s,n]),{data:E.useMemo(()=>i,[i]),set:l,update:c,push:f}};var Pg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sd=typeof window>"u"||"Deno"in window;function wi(){}function Hhe(t,e){return typeof t=="function"?t(e):t}function eT(t){return typeof t=="number"&&t>=0&&t!==1/0}function Pz(t,e){return Math.max(t+(e||0)-Date.now(),0)}function lF(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(n){if(e.queryHash!==wO(s,e.options))return!1}else if(!$m(e.queryKey,s))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||o&&!o(e))}function cF(t,e){const{exact:r,status:n,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Rm(e.options.mutationKey)!==Rm(o))return!1}else if(!$m(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function wO(t,e){return((e==null?void 0:e.queryKeyHashFn)||Rm)(t)}function Rm(t){return JSON.stringify(t,(e,r)=>rT(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function $m(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!$m(t[r],e[r])):!1}function Tz(t,e){if(t===e)return t;const r=uF(t)&&uF(e);if(r||rT(t)&&rT(e)){const n=r?t:Object.keys(t),i=n.length,o=r?e:Object.keys(e),s=o.length,a=r?[]:{};let l=0;for(let c=0;c<s;c++){const f=r?c:o[c];!r&&t[f]===void 0&&e[f]===void 0&&n.includes(f)?(a[f]=void 0,l++):(a[f]=Tz(t[f],e[f]),a[f]===t[f]&&t[f]!==void 0&&l++)}return i===s&&l===i?t:a}return e}function tT(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function uF(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rT(t){if(!fF(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!fF(r)||!r.hasOwnProperty("isPrototypeOf"))}function fF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Khe(t){return new Promise(e=>{setTimeout(e,t)})}function nT(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Tz(t,e):e}function Qhe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Yhe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Hl,sa,_f,GV,Xhe=(GV=class extends Pg{constructor(){super();he(this,Hl,void 0);he(this,sa,void 0);he(this,_f,void 0);le(this,_f,e=>{if(!sd&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){D(this,sa)||this.setEventListener(D(this,_f))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,sa))==null||e.call(this),le(this,sa,void 0))}setEventListener(e){var r;le(this,_f,e),(r=D(this,sa))==null||r.call(this),le(this,sa,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,Hl)!==e&&(le(this,Hl,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof D(this,Hl)=="boolean"?D(this,Hl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hl=new WeakMap,sa=new WeakMap,_f=new WeakMap,GV),xx=new Xhe,wf,aa,Sf,qV,Jhe=(qV=class extends Pg{constructor(){super();he(this,wf,!0);he(this,aa,void 0);he(this,Sf,void 0);le(this,Sf,e=>{if(!sd&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,aa)||this.setEventListener(D(this,Sf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,aa))==null||e.call(this),le(this,aa,void 0))}setEventListener(e){var r;le(this,Sf,e),(r=D(this,aa))==null||r.call(this),le(this,aa,e(this.setOnline.bind(this)))}setOnline(e){D(this,wf)!==e&&(le(this,wf,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,wf)}},wf=new WeakMap,aa=new WeakMap,Sf=new WeakMap,qV),_x=new Jhe;function Zhe(t){return Math.min(1e3*2**t,3e4)}function Xw(t){return(t??"online")==="online"?_x.isOnline():!0}var Iz=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tA(t){return t instanceof Iz}function Nz(t){let e=!1,r=0,n=!1,i,o,s;const a=new Promise((g,b)=>{o=g,s=b}),l=g=>{var b;n||(p(new Iz(g)),(b=t.abort)==null||b.call(t))},c=()=>{e=!0},f=()=>{e=!1},d=()=>!xx.isFocused()||t.networkMode!=="always"&&!_x.isOnline(),h=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),i==null||i(),o(g))},p=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),i==null||i(),s(g))},m=()=>new Promise(g=>{var b;i=v=>{const x=n||!d();return x&&g(v),x},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),y=()=>{if(n)return;let g;try{g=t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var w;if(n)return;const v=t.retry??(sd?0:3),x=t.retryDelay??Zhe,S=typeof x=="function"?x(r,b):x,_=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(e||!_){p(b);return}r++,(w=t.onFail)==null||w.call(t,r,b),Khe(S).then(()=>{if(d())return m()}).then(()=>{e?p(b):y()})})};return Xw(t.networkMode)?y():m().then(y),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:f}}function epe(){let t=[],e=0,r=h=>{h()},n=h=>{h()},i=h=>setTimeout(h,0);const o=h=>{i=h},s=h=>{let p;e++;try{p=h()}finally{e--,e||c()}return p},a=h=>{e?t.push(h):i(()=>{r(h)})},l=h=>(...p)=>{a(()=>{h(...p)})},c=()=>{const h=t;t=[],h.length&&i(()=>{n(()=>{h.forEach(p=>{r(p)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:o}}var zr=epe(),Kl,HV,kz=(HV=class{constructor(){he(this,Kl,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eT(this.gcTime)&&le(this,Kl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(sd?1/0:5*60*1e3))}clearGcTimeout(){D(this,Kl)&&(clearTimeout(D(this,Kl)),le(this,Kl,void 0))}},Kl=new WeakMap,HV),Ef,Af,bi,la,xi,br,Gy,Ql,Cf,U0,Ki,ss,KV,tpe=(KV=class extends kz{constructor(r){super();he(this,Cf);he(this,Ki);he(this,Ef,void 0);he(this,Af,void 0);he(this,bi,void 0);he(this,la,void 0);he(this,xi,void 0);he(this,br,void 0);he(this,Gy,void 0);he(this,Ql,void 0);le(this,Ql,!1),le(this,Gy,r.defaultOptions),Re(this,Cf,U0).call(this,r.options),le(this,br,[]),le(this,bi,r.cache),this.queryKey=r.queryKey,this.queryHash=r.queryHash,le(this,Ef,r.state||rpe(this.options)),this.state=D(this,Ef),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!D(this,br).length&&this.state.fetchStatus==="idle"&&D(this,bi).remove(this)}setData(r,n){const i=nT(this.state.data,r,this.options);return Re(this,Ki,ss).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(r,n){Re(this,Ki,ss).call(this,{type:"setState",state:r,setStateOptions:n})}cancel(r){var i;const n=D(this,la);return(i=D(this,xi))==null||i.cancel(r),n?n.then(wi).catch(wi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Ef))}isActive(){return D(this,br).some(r=>r.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||D(this,br).some(r=>r.getCurrentResult().isStale)}isStaleByTime(r=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Pz(this.state.dataUpdatedAt,r)}onFocus(){var n;const r=D(this,br).find(i=>i.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,xi))==null||n.continue()}onOnline(){var n;const r=D(this,br).find(i=>i.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,xi))==null||n.continue()}addObserver(r){D(this,br).includes(r)||(D(this,br).push(r),this.clearGcTimeout(),D(this,bi).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){D(this,br).includes(r)&&(le(this,br,D(this,br).filter(n=>n!==r)),D(this,br).length||(D(this,xi)&&(D(this,Ql)?D(this,xi).cancel({revert:!0}):D(this,xi).cancelRetry()),this.scheduleGc()),D(this,bi).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return D(this,br).length}invalidate(){this.state.isInvalidated||Re(this,Ki,ss).call(this,{type:"invalidate"})}fetch(r,n){var f,d,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,la))return(f=D(this,xi))==null||f.continueRetry(),D(this,la)}if(r&&Re(this,Cf,U0).call(this,r),!this.options.queryFn){const m=D(this,br).find(y=>y.options.queryFn);m&&Re(this,Cf,U0).call(this,m.options)}const i=new AbortController,o={queryKey:this.queryKey,meta:this.meta},s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(le(this,Ql,!0),i.signal)})};s(o);const a=()=>this.options.queryFn?(le(this,Ql,!1),this.options.persister?this.options.persister(this.options.queryFn,o,this):this.options.queryFn(o)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),(d=this.options.behavior)==null||d.onFetch(l,this),le(this,Af,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Re(this,Ki,ss).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var y,g,b,v;tA(m)&&m.silent||Re(this,Ki,ss).call(this,{type:"error",error:m}),tA(m)||((g=(y=D(this,bi).config).onError)==null||g.call(y,m,this),(v=(b=D(this,bi).config).onSettled)==null||v.call(b,this.state.data,m,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return le(this,xi,Nz({fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var y,g,b,v;if(typeof m>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(m),(g=(y=D(this,bi).config).onSuccess)==null||g.call(y,m,this),(v=(b=D(this,bi).config).onSettled)==null||v.call(b,m,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(m,y)=>{Re(this,Ki,ss).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Re(this,Ki,ss).call(this,{type:"pause"})},onContinue:()=>{Re(this,Ki,ss).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),le(this,la,D(this,xi).promise),D(this,la)}},Ef=new WeakMap,Af=new WeakMap,bi=new WeakMap,la=new WeakMap,xi=new WeakMap,br=new WeakMap,Gy=new WeakMap,Ql=new WeakMap,Cf=new WeakSet,U0=function(r){this.options={...D(this,Gy),...r},this.updateGcTime(this.options.gcTime)},Ki=new WeakSet,ss=function(r){const n=i=>{switch(r.type){case"failed":return{...i,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:r.meta??null,fetchStatus:Xw(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...i,data:r.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=r.error;return tA(o)&&o.revert&&D(this,Af)?{...D(this,Af),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...r.state}}};this.state=n(this.state),zr.batch(()=>{D(this,br).forEach(i=>{i.onQueryUpdate()}),D(this,bi).notify({query:this,type:"updated",action:r})})},KV);function rpe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var wo,QV,npe=(QV=class extends Pg{constructor(e={}){super();he(this,wo,void 0);this.config=e,le(this,wo,new Map)}build(e,r,n){const i=r.queryKey,o=r.queryHash??wO(i,r);let s=this.get(o);return s||(s=new tpe({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){D(this,wo).has(e.queryHash)||(D(this,wo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=D(this,wo).get(e.queryHash);r&&(e.destroy(),r===e&&D(this,wo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,wo).get(e)}getAll(){return[...D(this,wo).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>lF(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>lF(e,n)):r}notify(e){zr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){zr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wo=new WeakMap,QV),So,qy,Qn,Pf,Eo,qs,YV,ipe=(YV=class extends kz{constructor(r){super();he(this,Eo);he(this,So,void 0);he(this,qy,void 0);he(this,Qn,void 0);he(this,Pf,void 0);this.mutationId=r.mutationId,le(this,qy,r.defaultOptions),le(this,Qn,r.mutationCache),le(this,So,[]),this.state=r.state||ope(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options={...D(this,qy),...r},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){D(this,So).includes(r)||(D(this,So).push(r),this.clearGcTimeout(),D(this,Qn).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){le(this,So,D(this,So).filter(n=>n!==r)),this.scheduleGc(),D(this,Qn).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){D(this,So).length||(this.state.status==="pending"?this.scheduleGc():D(this,Qn).remove(this))}continue(){var r;return((r=D(this,Pf))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var o,s,a,l,c,f,d,h,p,m,y,g,b,v,x,S,_,w,A,C;const n=()=>(le(this,Pf,Nz({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{Re(this,Eo,qs).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{Re(this,Eo,qs).call(this,{type:"pause"})},onContinue:()=>{Re(this,Eo,qs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),D(this,Pf).promise),i=this.state.status==="pending";try{if(!i){Re(this,Eo,qs).call(this,{type:"pending",variables:r}),await((s=(o=D(this,Qn).config).onMutate)==null?void 0:s.call(o,r,this));const P=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,r));P!==this.state.context&&Re(this,Eo,qs).call(this,{type:"pending",context:P,variables:r})}const T=await n();return await((f=(c=D(this,Qn).config).onSuccess)==null?void 0:f.call(c,T,r,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,T,r,this.state.context)),await((m=(p=D(this,Qn).config).onSettled)==null?void 0:m.call(p,T,null,this.state.variables,this.state.context,this)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,T,null,r,this.state.context)),Re(this,Eo,qs).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(b=D(this,Qn).config).onError)==null?void 0:v.call(b,T,r,this.state.context,this)),await((S=(x=this.options).onError)==null?void 0:S.call(x,T,r,this.state.context)),await((w=(_=D(this,Qn).config).onSettled)==null?void 0:w.call(_,void 0,T,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,void 0,T,r,this.state.context)),T}finally{Re(this,Eo,qs).call(this,{type:"error",error:T})}}}},So=new WeakMap,qy=new WeakMap,Qn=new WeakMap,Pf=new WeakMap,Eo=new WeakSet,qs=function(r){const n=i=>{switch(r.type){case"failed":return{...i,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Xw(this.options.networkMode),status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...i,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:r.error,failureCount:i.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=n(this.state),zr.batch(()=>{D(this,So).forEach(i=>{i.onMutationUpdate(r)}),D(this,Qn).notify({mutation:this,type:"updated",action:r})})},YV);function ope(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _i,Hy,Yl,XV,spe=(XV=class extends Pg{constructor(e={}){super();he(this,_i,void 0);he(this,Hy,void 0);he(this,Yl,void 0);this.config=e,le(this,_i,[]),le(this,Hy,0)}build(e,r,n){const i=new ipe({mutationCache:this,mutationId:++fv(this,Hy)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){D(this,_i).push(e),this.notify({type:"added",mutation:e})}remove(e){le(this,_i,D(this,_i).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){zr.batch(()=>{D(this,_i).forEach(e=>{this.remove(e)})})}getAll(){return D(this,_i)}find(e){const r={exact:!0,...e};return D(this,_i).find(n=>cF(r,n))}findAll(e={}){return D(this,_i).filter(r=>cF(e,r))}notify(e){zr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return le(this,Yl,(D(this,Yl)??Promise.resolve()).then(()=>{const e=D(this,_i).filter(r=>r.state.isPaused);return zr.batch(()=>e.reduce((r,n)=>r.then(()=>n.continue().catch(wi)),Promise.resolve()))}).then(()=>{le(this,Yl,void 0)})),D(this,Yl)}},_i=new WeakMap,Hy=new WeakMap,Yl=new WeakMap,XV);function ape(t){return{onFetch:(e,r)=>{const n=async()=>{var m,y,g,b,v;const i=e.options,o=(g=(y=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,s=((b=e.state.data)==null?void 0:b.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let c=!1;const f=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},d=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),h=async(x,S,_)=>{if(c)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const w={queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};f(w);const A=await d(w),{maxPages:C}=e.options,T=_?Yhe:Qhe;return{pages:T(x.pages,A,C),pageParams:T(x.pageParams,S,C)}};let p;if(o&&s.length){const x=o==="backward",S=x?lpe:dF,_={pages:s,pageParams:a},w=S(i,_);p=await h(_,w,x)}else{p=await h(l,a[0]??i.initialPageParam);const x=t??s.length;for(let S=1;S<x;S++){const _=dF(i,p);p=await h(p,_)}}return p};e.options.persister?e.fetchFn=()=>{var i,o;return(o=(i=e.options).persister)==null?void 0:o.call(i,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=n}}}function dF(t,{pages:e,pageParams:r}){const n=e.length-1;return t.getNextPageParam(e[n],e,r[n],r)}function lpe(t,{pages:e,pageParams:r}){var n;return(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r)}var ar,ca,ua,Tf,If,fa,Nf,kf,JV,cpe=(JV=class{constructor(t={}){he(this,ar,void 0);he(this,ca,void 0);he(this,ua,void 0);he(this,Tf,void 0);he(this,If,void 0);he(this,fa,void 0);he(this,Nf,void 0);he(this,kf,void 0);le(this,ar,t.queryCache||new npe),le(this,ca,t.mutationCache||new spe),le(this,ua,t.defaultOptions||{}),le(this,Tf,new Map),le(this,If,new Map),le(this,fa,0)}mount(){fv(this,fa)._++,D(this,fa)===1&&(le(this,Nf,xx.subscribe(()=>{xx.isFocused()&&(this.resumePausedMutations(),D(this,ar).onFocus())})),le(this,kf,_x.subscribe(()=>{_x.isOnline()&&(this.resumePausedMutations(),D(this,ar).onOnline())})))}unmount(){var t,e;fv(this,fa)._--,D(this,fa)===0&&((t=D(this,Nf))==null||t.call(this),le(this,Nf,void 0),(e=D(this,kf))==null||e.call(this),le(this,kf,void 0))}isFetching(t){return D(this,ar).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,ca).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=D(this,ar).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=D(this,ar).find({queryKey:t}),i=n==null?void 0:n.state.data,o=Hhe(e,i);if(typeof o>"u")return;const s=this.defaultQueryOptions({queryKey:t});return D(this,ar).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return zr.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var e;return(e=D(this,ar).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=D(this,ar);zr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=D(this,ar),n={type:"active",...t};return zr.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=zr.batch(()=>D(this,ar).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(wi).catch(wi)}invalidateQueries(t={},e={}){return zr.batch(()=>{if(D(this,ar).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=zr.batch(()=>D(this,ar).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(wi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(wi)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=D(this,ar).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wi).catch(wi)}fetchInfiniteQuery(t){return t.behavior=ape(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wi).catch(wi)}resumePausedMutations(){return D(this,ca).resumePausedMutations()}getQueryCache(){return D(this,ar)}getMutationCache(){return D(this,ca)}getDefaultOptions(){return D(this,ua)}setDefaultOptions(t){le(this,ua,t)}setQueryDefaults(t,e){D(this,Tf).set(Rm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Tf).values()];let r={};return e.forEach(n=>{$m(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){D(this,If).set(Rm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,If).values()];let r={};return e.forEach(n=>{$m(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...D(this,ua).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=wO(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,ua).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,ar).clear(),D(this,ca).clear()}},ar=new WeakMap,ca=new WeakMap,ua=new WeakMap,Tf=new WeakMap,If=new WeakMap,fa=new WeakMap,Nf=new WeakMap,kf=new WeakMap,JV),Rn,It,Ky,bn,Xl,Of,Ao,Qy,jf,Rf,Jl,Zl,da,$f,ec,lp,Yy,iT,Xy,oT,Jy,sT,Zy,aT,eg,lT,tg,cT,rg,uT,fw,Oz,ZV,upe=(ZV=class extends Pg{constructor(e,r){super();he(this,ec);he(this,Yy);he(this,Xy);he(this,Jy);he(this,Zy);he(this,eg);he(this,tg);he(this,rg);he(this,fw);he(this,Rn,void 0);he(this,It,void 0);he(this,Ky,void 0);he(this,bn,void 0);he(this,Xl,void 0);he(this,Of,void 0);he(this,Ao,void 0);he(this,Qy,void 0);he(this,jf,void 0);he(this,Rf,void 0);he(this,Jl,void 0);he(this,Zl,void 0);he(this,da,void 0);he(this,$f,new Set);this.options=r,le(this,Rn,e),le(this,Ao,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,It).addObserver(this),hF(D(this,It),this.options)?Re(this,ec,lp).call(this):this.updateResult(),Re(this,Zy,aT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fT(D(this,It),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fT(D(this,It),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,eg,lT).call(this),Re(this,tg,cT).call(this),D(this,It).removeObserver(this)}setOptions(e,r){const n=this.options,i=D(this,It);if(this.options=D(this,Rn).defaultQueryOptions(e),tT(n,this.options)||D(this,Rn).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,It),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),Re(this,rg,uT).call(this);const o=this.hasListeners();o&&pF(D(this,It),i,this.options,n)&&Re(this,ec,lp).call(this),this.updateResult(r),o&&(D(this,It)!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Re(this,Yy,iT).call(this);const s=Re(this,Xy,oT).call(this);o&&(D(this,It)!==i||this.options.enabled!==n.enabled||s!==D(this,da))&&Re(this,Jy,sT).call(this,s)}getOptimisticResult(e){const r=D(this,Rn).getQueryCache().build(D(this,Rn),e),n=this.createResult(r,e);return dpe(this,n)&&(le(this,bn,n),le(this,Of,this.options),le(this,Xl,D(this,It).state)),n}getCurrentResult(){return D(this,bn)}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(D(this,$f).add(n),e[n])})}),r}getCurrentQuery(){return D(this,It)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=D(this,Rn).defaultQueryOptions(e),n=D(this,Rn).getQueryCache().build(D(this,Rn),r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Re(this,ec,lp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,bn)))}createResult(e,r){var w;const n=D(this,It),i=this.options,o=D(this,bn),s=D(this,Xl),a=D(this,Of),c=e!==n?e.state:D(this,Ky),{state:f}=e;let{error:d,errorUpdatedAt:h,fetchStatus:p,status:m}=f,y=!1,g;if(r._optimisticResults){const A=this.hasListeners(),C=!A&&hF(e,r),T=A&&pF(e,n,r,i);(C||T)&&(p=Xw(e.options.networkMode)?"fetching":"paused",f.dataUpdatedAt||(m="pending")),r._optimisticResults==="isRestoring"&&(p="idle")}if(r.select&&typeof f.data<"u")if(o&&f.data===(s==null?void 0:s.data)&&r.select===D(this,Qy))g=D(this,jf);else try{le(this,Qy,r.select),g=r.select(f.data),g=nT(o==null?void 0:o.data,g,r),le(this,jf,g),le(this,Ao,null)}catch(A){le(this,Ao,A)}else g=f.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&m==="pending"){let A;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))A=o.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((w=D(this,Rf))==null?void 0:w.state.data,D(this,Rf)):r.placeholderData,r.select&&typeof A<"u")try{A=r.select(A),le(this,Ao,null)}catch(C){le(this,Ao,C)}typeof A<"u"&&(m="success",g=nT(o==null?void 0:o.data,A,r),y=!0)}D(this,Ao)&&(d=D(this,Ao),g=D(this,jf),h=Date.now(),m="error");const b=p==="fetching",v=m==="pending",x=m==="error",S=v&&b;return{status:m,fetchStatus:p,isPending:v,isSuccess:m==="success",isError:x,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:f.dataUpdatedAt,error:d,errorUpdatedAt:h,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:x&&f.dataUpdatedAt===0,isPaused:p==="paused",isPlaceholderData:y,isRefetchError:x&&f.dataUpdatedAt!==0,isStale:SO(e,r),refetch:this.refetch}}updateResult(e){const r=D(this,bn),n=this.createResult(D(this,It),this.options);if(le(this,Xl,D(this,It).state),le(this,Of,this.options),D(this,Xl).data!==void 0&&le(this,Rf,D(this,It)),tT(n,r))return;le(this,bn,n);const i={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!D(this,$f).size)return!0;const l=new Set(a??D(this,$f));return this.options.throwOnError&&l.add("error"),Object.keys(D(this,bn)).some(c=>{const f=c;return D(this,bn)[f]!==r[f]&&l.has(f)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),Re(this,fw,Oz).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,Zy,aT).call(this)}},Rn=new WeakMap,It=new WeakMap,Ky=new WeakMap,bn=new WeakMap,Xl=new WeakMap,Of=new WeakMap,Ao=new WeakMap,Qy=new WeakMap,jf=new WeakMap,Rf=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,da=new WeakMap,$f=new WeakMap,ec=new WeakSet,lp=function(e){Re(this,rg,uT).call(this);let r=D(this,It).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(wi)),r},Yy=new WeakSet,iT=function(){if(Re(this,eg,lT).call(this),sd||D(this,bn).isStale||!eT(this.options.staleTime))return;const r=Pz(D(this,bn).dataUpdatedAt,this.options.staleTime)+1;le(this,Jl,setTimeout(()=>{D(this,bn).isStale||this.updateResult()},r))},Xy=new WeakSet,oT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,It)):this.options.refetchInterval)??!1},Jy=new WeakSet,sT=function(e){Re(this,tg,cT).call(this),le(this,da,e),!(sd||this.options.enabled===!1||!eT(D(this,da))||D(this,da)===0)&&le(this,Zl,setInterval(()=>{(this.options.refetchIntervalInBackground||xx.isFocused())&&Re(this,ec,lp).call(this)},D(this,da)))},Zy=new WeakSet,aT=function(){Re(this,Yy,iT).call(this),Re(this,Jy,sT).call(this,Re(this,Xy,oT).call(this))},eg=new WeakSet,lT=function(){D(this,Jl)&&(clearTimeout(D(this,Jl)),le(this,Jl,void 0))},tg=new WeakSet,cT=function(){D(this,Zl)&&(clearInterval(D(this,Zl)),le(this,Zl,void 0))},rg=new WeakSet,uT=function(){const e=D(this,Rn).getQueryCache().build(D(this,Rn),this.options);if(e===D(this,It))return;const r=D(this,It);le(this,It,e),le(this,Ky,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},fw=new WeakSet,Oz=function(e){zr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(D(this,bn))}),D(this,Rn).getQueryCache().notify({query:D(this,It),type:"observerResultsUpdated"})})},ZV);function fpe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function hF(t,e){return fpe(t,e)||t.state.dataUpdatedAt>0&&fT(t,e,e.refetchOnMount)}function fT(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&SO(t,e)}return!1}function pF(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&SO(t,r)}function SO(t,e){return t.isStaleByTime(e.staleTime)}function dpe(t,e){return!tT(t.getCurrentResult(),e)}var jz=E.createContext(void 0),hpe=t=>{const e=E.useContext(jz);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ppe=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.createElement(jz.Provider,{value:t},e)),Rz=E.createContext(!1),mpe=()=>E.useContext(Rz);Rz.Provider;function ype(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var gpe=E.createContext(ype()),vpe=()=>E.useContext(gpe);function bpe(t,e){return typeof t=="function"?t(...e):!!t}var xpe=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},_pe=t=>{E.useEffect(()=>{t.clearReset()},[t])},wpe=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&bpe(r,[t.error,n]),Spe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Epe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ape=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Cpe(t,e,r){const n=hpe(r),i=mpe(),o=vpe(),s=n.defaultQueryOptions(t);s._optimisticResults=i?"isRestoring":"optimistic",Spe(s),xpe(s,o),_pe(o);const[a]=E.useState(()=>new e(n,s)),l=a.getOptimisticResult(s);if(E.useSyncExternalStore(E.useCallback(c=>{const f=i?()=>{}:a.subscribe(zr.batchCalls(c));return a.updateResult(),f},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),E.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),Epe(s,l))throw Ape(s,a,o);if(wpe({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:n.getQueryCache().get(s.queryHash)}))throw l.error;return s.notifyOnChangeProps?l:a.trackResult(l)}function Ko(t,e){return Cpe(t,upe,e)}function $z(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=$z(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function Ppe(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=$z(t))&&(n&&(n+=" "),n+=e);return n}const mF=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,yF=Ppe,Dz=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return yF(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(c=>{const f=r==null?void 0:r[c],d=o==null?void 0:o[c];if(f===null)return null;const h=mF(f)||mF(d);return i[c][h]}),a=r&&Object.entries(r).reduce((c,f)=>{let[d,h]=f;return h===void 0||(c[d]=h),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,f)=>{let{class:d,className:h,...p}=f;return Object.entries(p).every(m=>{let[y,g]=m;return Array.isArray(g)?g.includes({...o,...a}[y]):{...o,...a}[y]===g})?[...c,d,h]:c},[]);return yF(t,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},Tpe=Dz(["font-semibold"],{variants:{variant:{contained:["border","rounded"],text:[],icon:["hover:enabled:bg-opacity-50 leading-4"]},color:{primary:[],secondary:[],success:[],danger:[],inverted:[]},size:{small:["text-sm"],medium:["text-base"],large:["text-md"],xlarge:["text-2xl"]},disabled:{true:["cursor-not-allowed opacity-30"]},loading:{true:["cursor-wait opacity-30"]}},compoundVariants:[{variant:"contained",size:"small",className:"py-1 px-2"},{variant:"contained",size:"medium",className:"py-2 px-4"},{variant:"contained",size:"large",className:"py-2 px-4"},{variant:"contained",size:"xlarge",className:"py-4 px-4"},{color:"primary",variant:"contained",className:"bg-teal-800 text-white border-transparent hover:enabled:bg-teal-700"},{color:"secondary",variant:"contained",className:"bg-white text-gray-800 border-gray-400 hover:enabled:bg-gray-100"},{color:"success",variant:"contained",className:"bg-green-100 text-green-500 border-green-400 hover:enabled:bg-green-200"},{color:"danger",variant:"contained",className:"bg-red-100 text-red-500 border-red-400 hover:enabled:bg-red-200"},{color:"primary",variant:"text",className:"text-teal-800 hover:enabled:text-teal-700"},{color:"secondary",variant:"text",className:"text-gray-800 hover:enabled:text-gray-700"},{color:"success",variant:"text",className:"text-green-800 hover:enabled:text-green-700"},{color:"danger",variant:"text",className:"text-red-800 hover:enabled:text-red-700"},{color:"inverted",variant:"text",className:"text-gray-100 hover:enabled:text-gray-0"},{color:"primary",variant:"icon",className:"text-teal-800 hover:enabled:text-teal-700 hover:enabled:bg-teal-100"},{color:"secondary",variant:"icon",className:"text-gray-800 hover:enabled:text-gray-700 hover:enabled:bg-gray-100"},{color:"success",variant:"icon",className:"text-green-800 hover:enabled:text-green-700 hover:enabled:bg-green-100"},{color:"danger",variant:"icon",className:"text-red-800 hover:enabled:text-red-700 hover:enabled:bg-red-100"},{color:"primary",size:"medium",className:"uppercase"}],defaultVariants:{color:"primary",size:"medium",variant:"contained"}});function Oe({color:t,size:e,variant:r,className:n,type:i="button",loading:o,...s}){const a=E.useMemo(()=>Tpe({color:t,size:e,variant:r,disabled:s.disabled,loading:o,className:n}),[t,e,r,s.disabled,o,n]);return u.jsx("button",{type:i,className:a,disabled:s.disabled||o,...s})}const Ipe=typeof navigator>"u"?!1:navigator.product==="ReactNative",Mz={timeout:Ipe?6e4:12e4},Npe=function(e){const r={...Mz,...typeof e=="string"?{url:e}:e},{searchParams:n}=new URL(r.url,"http://localhost");if(r.timeout=Fz(r.timeout),r.query){for(const[s,a]of Object.entries(r.query))if(a!==void 0)if(Array.isArray(a))for(const l of a)n.append(s,l);else n.append(s,a)}const[i]=r.url.split("?"),o=n.toString();return o&&(r.url="".concat(i,"?").concat(o)),r.method=r.body&&!r.method?"POST":(r.method||"GET").toUpperCase(),r};function Fz(t){if(t===!1||t===0)return!1;if(t.connect||t.socket)return t;const e=Number(t);return isNaN(e)?Fz(Mz.timeout):{connect:e,socket:e}}const kpe=/^https?:\/\//i,Ope=function(e){if(!kpe.test(e.url))throw new Error('"'.concat(e.url,'" is not a valid URL'))};var rA=function(t){return t.replace(/^\s+|\s+$/g,"")},jpe=function(t){return Object.prototype.toString.call(t)==="[object Array]"},Rpe=function(t){if(!t)return{};for(var e={},r=rA(t).split(`
`),n=0;n<r.length;n++){var i=r[n],o=i.indexOf(":"),s=rA(i.slice(0,o)).toLowerCase(),a=rA(i.slice(o+1));typeof e[s]>"u"?e[s]=a:jpe(e[s])?e[s].push(a):e[s]=[e[s],a]}return e};const $pe=ct(Rpe),Dpe=t=>function(r,n){const i=r==="onError";let o=n;for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];for(let c=0;c<t[r].length;c++){const f=t[r][c];if(o=f(o,...a),i&&!o)break}return o};function Mpe(){const t=Object.create(null);let e=0;function r(i){const o=e++;return t[o]=i,function(){delete t[o]}}function n(i){for(const o in t)t[o](i)}return{publish:n,subscribe:r}}const Fpe=["request","response","progress","error","abort"],gF=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function Lz(t,e){const r=[],n=gF.reduce((o,s)=>(o[s]=o[s]||[],o),{processOptions:[Npe],validateOptions:[Ope]});function i(o){const s=(m,y,g)=>{let b=m,v=y;if(!b)try{v=l("onResponse",y,g)}catch(x){v=null,b=x}b=b&&l("onError",b,g),b?a.error.publish(b):v&&a.response.publish(v)},a=Fpe.reduce((m,y)=>(m[y]=Mpe(),m),{}),l=Dpe(n),c=l("processOptions",o);l("validateOptions",c);const f={options:c,channels:a,applyMiddleware:l};let d;const h=a.request.subscribe(m=>{d=e(m,(y,g)=>s(y,g,m))});a.abort.subscribe(()=>{h(),d&&d.abort()});const p=l("onReturn",a,f);return p===a&&a.request.publish(f),p}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return gF.forEach(a=>{s[a]&&n[a].push(s[a])}),r.push(s),i},i.clone=()=>Lz(r,e),t.forEach(i.use),i}var Bz=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},pi=(t,e,r)=>(Bz(t,e,"read from private field"),r?r.call(t):e.get(t)),pl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Vs=(t,e,r,n)=>(Bz(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),V0,W0,bu,z0,Hs,G0,q0;class Uz{constructor(){this.readyState=0,this.responseType="",pl(this,V0,void 0),pl(this,W0,void 0),pl(this,bu,void 0),pl(this,z0,{}),pl(this,Hs,void 0),pl(this,G0,{}),pl(this,q0,void 0)}open(e,r,n){Vs(this,V0,e),Vs(this,W0,r),Vs(this,bu,""),this.readyState=1,this.onreadystatechange(),Vs(this,Hs,void 0)}abort(){pi(this,Hs)&&pi(this,Hs).abort()}getAllResponseHeaders(){return pi(this,bu)}setRequestHeader(e,r){pi(this,z0)[e]=r}setInit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Vs(this,G0,e),Vs(this,q0,r)}send(e){const r=this.responseType!=="arraybuffer",n={...pi(this,G0),method:pi(this,V0),headers:pi(this,z0),body:e};typeof AbortController=="function"&&pi(this,q0)&&(Vs(this,Hs,new AbortController),typeof EventTarget<"u"&&pi(this,Hs).signal instanceof EventTarget&&(n.signal=pi(this,Hs).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(pi(this,W0),n).then(i=>(i.headers.forEach((o,s)=>{Vs(this,bu,pi(this,bu)+"".concat(s,": ").concat(o,`\r
`))}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,r?i.text():i.arrayBuffer())).then(i=>{typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,this.onreadystatechange()}).catch(i=>{var o;if(i.name==="AbortError"){this.onabort();return}(o=this.onerror)==null||o.call(this,i)})}}V0=new WeakMap;W0=new WeakMap;bu=new WeakMap;z0=new WeakMap;Hs=new WeakMap;G0=new WeakMap;q0=new WeakMap;const dT=typeof XMLHttpRequest=="function"?"xhr":"fetch",Lpe=dT==="xhr"?XMLHttpRequest:Uz,Bpe=(t,e)=>{var r;const n=t.options,i=t.applyMiddleware("finalizeOptions",n),o={},s=t.applyMiddleware("interceptRequest",void 0,{adapter:dT,context:t});if(s){const S=setTimeout(e,0,null,s);return{abort:()=>clearTimeout(S)}}let a=new Lpe;a instanceof Uz&&typeof i.fetch=="object"&&a.setInit(i.fetch,(r=i.useAbortSignal)!=null?r:!0);const l=i.headers,c=i.timeout;let f=!1,d=!1,h=!1;if(a.onerror=S=>{b(new Error("Request error while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.ontimeout=S=>{b(new Error("Request timeout while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.onabort=()=>{g(!0),f=!0},a.onreadystatechange=()=>{y(),!(f||a.readyState!==4)&&a.status!==0&&x()},a.open(i.method,i.url,!0),a.withCredentials=!!i.withCredentials,l&&a.setRequestHeader)for(const S in l)l.hasOwnProperty(S)&&a.setRequestHeader(S,l[S]);return i.rawBody&&(a.responseType="arraybuffer"),t.applyMiddleware("onRequest",{options:i,adapter:dT,request:a,context:t}),a.send(i.body||null),c&&(o.connect=setTimeout(()=>m("ETIMEDOUT"),c.connect)),{abort:p};function p(){f=!0,a&&a.abort()}function m(S){h=!0,a.abort();const _=new Error(S==="ESOCKETTIMEDOUT"?"Socket timed out on request to ".concat(i.url):"Connection timed out on request to ".concat(i.url));_.code=S,t.channels.error.publish(_)}function y(){c&&(g(),o.socket=setTimeout(()=>m("ESOCKETTIMEDOUT"),c.socket))}function g(S){(S||f||a.readyState>=2&&o.connect)&&clearTimeout(o.connect),o.socket&&clearTimeout(o.socket)}function b(S){if(d)return;g(!0),d=!0,a=null;const _=S||new Error("Network error while attempting to reach ".concat(i.url));_.isNetworkError=!0,_.request=i,e(_)}function v(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:i.url,method:i.method,headers:$pe(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function x(){if(!(f||d||h)){if(a.status===0){b(new Error("Unknown XHR error"));return}g(),d=!0,e(null,v())}}},Upe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bpe;return Lz(t,e)};var vF={exports:{}},nA,bF;function Vpe(){if(bF)return nA;bF=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,o=n*365.25;nA=function(f,d){d=d||{};var h=typeof f;if(h==="string"&&f.length>0)return s(f);if(h==="number"&&isFinite(f))return d.long?l(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function s(f){if(f=String(f),!(f.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(d){var h=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(f){var d=Math.abs(f);return d>=n?Math.round(f/n)+"d":d>=r?Math.round(f/r)+"h":d>=e?Math.round(f/e)+"m":d>=t?Math.round(f/t)+"s":f+"ms"}function l(f){var d=Math.abs(f);return d>=n?c(f,d,n,"day"):d>=r?c(f,d,r,"hour"):d>=e?c(f,d,e,"minute"):d>=t?c(f,d,t,"second"):f+" ms"}function c(f,d,h,p){var m=d>=h*1.5;return Math.round(f/h)+" "+p+(m?"s":"")}return nA}function Wpe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Vpe(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(f){let d,h=null,p,m;function y(...g){if(!y.enabled)return;const b=y,v=Number(new Date),x=v-(d||v);b.diff=x,b.prev=d,b.curr=v,d=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let S=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,A)=>{if(w==="%%")return"%";S++;const C=r.formatters[A];if(typeof C=="function"){const T=g[S];w=C.call(b,T),g.splice(S,1),S--}return w}),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(f)),m),set:g=>{h=g}}),typeof r.init=="function"&&r.init(y),y}function n(f,d){const h=r(this.namespace+(typeof d>"u"?":":d)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d;const h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){const f=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function l(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var zpe=Wpe;(function(t,e){var r={};e.formatArgs=i,e.save=o,e.load=s,e.useColors=n,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let d=0,h=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(h=d))}),c.splice(h,0,f)}e.log=console.debug||console.log||(()=>{});function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=r.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=zpe(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(vF,vF.exports);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function xF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Gpe(t){var e,r;return xF(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(xF(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}const qpe=typeof Buffer>"u"?()=>!1:t=>Buffer.isBuffer(t),Hpe=["boolean","string","number"];function Kpe(){return{processOptions:t=>{const e=t.body;return!e||!(!(typeof e.pipe=="function")&&!qpe(e)&&(Hpe.indexOf(typeof e)!==-1||Array.isArray(e)||Gpe(e)))?t:Object.assign({},t,{body:JSON.stringify(t.body),headers:Object.assign({},t.headers,{"Content-Type":"application/json"})})}}}function Qpe(t){return{onResponse:r=>{const n=r.headers["content-type"]||"",i=t&&t.force||n.indexOf("application/json")!==-1;return!r.body||!n||!i?r:Object.assign({},r,{body:e(r.body)})},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function e(r){try{return JSON.parse(r)}catch(n){throw n.message="Failed to parsed response body as JSON: ".concat(n.message),n}}}let cp={};typeof globalThis<"u"?cp=globalThis:typeof window<"u"?cp=window:typeof global<"u"?cp=global:typeof self<"u"&&(cp=self);var Ype=cp;function Xpe(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).implementation||Ype.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new e(i=>(r.error.subscribe(o=>i.error(o)),r.progress.subscribe(o=>i.next(Object.assign({type:"progress"},o))),r.response.subscribe(o=>{i.next(Object.assign({type:"response"},o)),i.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function Jpe(){return{onRequest:t=>{if(t.adapter!=="xhr")return;const e=t.request,r=t.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"));function n(i){return o=>{const s=o.lengthComputable?o.loaded/o.total*100:-1;r.channels.progress.publish({stage:i,percent:s,total:o.total,loaded:o.loaded,lengthComputable:o.lengthComputable})}}}}}class Zpe{constructor(e){this.__CANCEL__=!0,this.message=e}toString(){return"Cancel".concat(this.message?": ".concat(this.message):"")}}const _F=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r=null;this.promise=new Promise(n=>{r=n}),e(n=>{this.reason||(this.reason=new Zpe(n),r(this.reason))})}};_F.source=()=>{let t;return{token:new _F(r=>{t=r}),cancel:t}};var Vz=(t,e,r)=>r.method!=="GET"&&r.method!=="HEAD"?!1:t.isNetworkError||!1;const eme=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";var tme=t=>{const e=t.maxRetries||5,r=t.retryDelay||rme,n=t.shouldRetry;return{onError:(i,o)=>{const s=o.options,a=s.maxRetries||e,l=s.shouldRetry||n,c=s.attemptNumber||0;if(eme(s.body)||!l(i,c,s)||c>=a)return i;const f=Object.assign({},o,{options:Object.assign({},s,{attemptNumber:c+1})});return setTimeout(()=>o.channels.request.publish(f),r(c)),null}}};function rme(t){return 100*Math.pow(2,t)+Math.random()*100}const EO=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tme({shouldRetry:Vz,...t})};EO.shouldRetry=Vz;var hT=function(t,e){return hT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},hT(t,e)};function AO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var wx=function(){return wx=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wx.apply(this,arguments)};function wF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pT(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function mT(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Vo(t){return typeof t=="function"}function Wz(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var iA=Wz(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function SF(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var CO=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=wF(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else s.remove(this);var f=this.initialTeardown;if(Vo(f))try{f()}catch(y){o=y instanceof iA?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=wF(d),p=h.next();!p.done;p=h.next()){var m=p.value;try{EF(m)}catch(y){o=o??[],y instanceof iA?o=mT(mT([],pT(o)),pT(y.errors)):o.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new iA(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)EF(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&SF(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&SF(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();CO.EMPTY;function zz(t){return t instanceof CO||t&&"closed"in t&&Vo(t.remove)&&Vo(t.add)&&Vo(t.unsubscribe)}function EF(t){Vo(t)?t():t.unsubscribe()}var Gz={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qz={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,mT([t,e],pT(r)))},clearTimeout:function(t){var e=qz.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function nme(t){qz.setTimeout(function(){throw t})}function AF(){}function ime(t){t()}var PO=function(t){AO(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,zz(r)&&r.add(n)):n.destination=lme,n}return e.create=function(r,n,i){return new yT(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(CO),ome=Function.prototype.bind;function oA(t,e){return ome.call(t,e)}var sme=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Rv(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Rv(n)}else Rv(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Rv(r)}},t}(),yT=function(t){AO(e,t);function e(r,n,i){var o=t.call(this)||this,s;if(Vo(r)||!r)s={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;o&&Gz.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},s={next:r.next&&oA(r.next,a),error:r.error&&oA(r.error,a),complete:r.complete&&oA(r.complete,a)}):s=r}return o.destination=new sme(s),o}return e}(PO);function Rv(t){nme(t)}function ame(t){throw t}var lme={closed:!0,next:AF,error:ame,complete:AF},cme=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ume(t){return t}function fme(t){return t.length===0?ume:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Dm=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=hme(e)?e:new yT(e,r,n);return ime(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=CF(r),new r(function(i,o){var s=new yT({next:function(a){try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[cme]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return fme(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=CF(e),new e(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function CF(t){var e;return(e=t??Gz.Promise)!==null&&e!==void 0?e:Promise}function dme(t){return t&&Vo(t.next)&&Vo(t.error)&&Vo(t.complete)}function hme(t){return t&&t instanceof PO||dme(t)&&zz(t)}function pme(t){return Vo(t==null?void 0:t.lift)}function Hz(t){return function(e){if(pme(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Kz(t,e,r,n,i){return new mme(t,e,r,n,i)}var mme=function(t){AO(e,t);function e(r,n,i,o,s,a){var l=t.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(f){r.error(f)}}:t.prototype._next,l._error=o?function(c){try{o(c)}catch(f){r.error(f)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(PO),yme=Wz(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Cr(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=!1,s;t.subscribe({next:function(a){s=a,o=!0},error:i,complete:function(){o?n(s):r?n(e.defaultValue):i(new yme)}})})}function Nc(t,e){return Hz(function(r,n){var i=0;r.subscribe(Kz(n,function(o){n.next(t.call(e,o,i++))}))})}function Tg(t,e){return Hz(function(r,n){var i=0;r.subscribe(Kz(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}const sA=5;class gme extends Error{constructor(e){const r=Qz(e);super(r.message),this.statusCode=400,Object.assign(this,r)}}class vme extends Error{constructor(e){const r=Qz(e);super(r.message),this.statusCode=500,Object.assign(this,r)}}function Qz(t){const e=t.body,r={response:t,statusCode:t.statusCode,responseBody:_me(e,t),message:"",details:void 0};if(e.error&&e.message)return r.message="".concat(e.error," - ").concat(e.message),r;if(bme(e)){const n=e.error.items||[],i=n.slice(0,sA).map(s=>{var a;return(a=s.error)==null?void 0:a.description}).filter(Boolean);let o=i.length?`:
- `.concat(i.join(`
- `)):"";return n.length>sA&&(o+=`
...and `.concat(n.length-sA," more")),r.message="".concat(e.error.description).concat(o),r.details=e.error,r}return e.error&&e.error.description?(r.message=e.error.description,r.details=e.error,r):(r.message=e.error||e.message||xme(t),r)}function bme(t){return PF(t)&&PF(t.error)&&t.error.type==="mutationError"&&typeof t.error.description=="string"}function PF(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function xme(t){const e=t.statusMessage?" ".concat(t.statusMessage):"";return"".concat(t.method,"-request to ").concat(t.url," resulted in HTTP ").concat(t.statusCode).concat(e)}function _me(t,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(t,null,2):t}const wme={onResponse:t=>{if(t.statusCode>=500)throw new vme(t);if(t.statusCode>=400)throw new gme(t);return t}},Sme={onResponse:t=>{const e=t.headers["x-sanity-warning"];return(Array.isArray(e)?e:[e]).filter(Boolean).forEach(n=>console.warn(n)),t}};function TF(t,e){let{maxRetries:r=5,retryDelay:n}=e;const i=Upe([r>0?EO({retryDelay:n,maxRetries:r,shouldRetry:Eme}):{},...t,Sme,Kpe(),Qpe(),Jpe(),wme,Xpe({implementation:Dm})]);function o(s){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:i)({maxRedirects:0,...s})}return o.defaultRequester=i,o}function Eme(t,e,r){const n=r.method==="GET"||r.method==="HEAD",o=(r.uri||r.url).startsWith("/data/query"),s=t.response&&(t.response.statusCode===429||t.response.statusCode===502||t.response.statusCode===503);return(n||o)&&s?!0:EO.shouldRetry(t,e,r)}function Yz(t){if(typeof t=="string"||Array.isArray(t))return{id:t};if(typeof t=="object"&&t!==null&&"query"in t&&typeof t.query=="string")return"params"in t&&typeof t.params=="object"&&t.params!==null?{query:t.query,params:t.params}:{query:t.query};const e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

`.concat(e))}const IF=["image","file"],NF=["before","after","replace"],Xz=t=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},Ame=t=>{if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},Cme=t=>{if(IF.indexOf(t)===-1)throw new Error("Invalid asset type: ".concat(t,". Must be one of ").concat(IF.join(", ")))},Bp=(t,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error("".concat(t,"() takes an object of properties"))},Jz=(t,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error("".concat(t,'(): "').concat(e,'" is not a valid document ID'))},Sx=(t,e)=>{if(!e._id)throw new Error("".concat(t,'() requires that the document contains an ID ("_id" property)'));Jz(t,e._id)},Pme=(t,e,r)=>{const n="insert(at, selector, items)";if(NF.indexOf(t)===-1){const i=NF.map(o=>'"'.concat(o,'"')).join(", ");throw new Error("".concat(n,' takes an "at"-argument which is one of: ').concat(i))}if(typeof e!="string")throw new Error("".concat(n,' takes a "selector"-argument which must be a string'));if(!Array.isArray(r))throw new Error("".concat(n,' takes an "items"-argument which must be an array'))},Zz=t=>{if(!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset||""},eG=t=>{if(typeof t!="string"||!/^[a-z0-9._-]{1,75}$/i.test(t))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return t};var tG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},df=(t,e,r)=>(tG(t,e,"read from private field"),r?r.call(t):e.get(t)),rG=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},nG=(t,e,r,n)=>(tG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),xu,_u;class iG{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.selection=e,this.operations=r}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return Bp("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,r,n){return Pme(e,r,n),this._assign("insert",{[e]:r,items:n})}append(e,r){return this.insert("after","".concat(e,"[-1]"),r)}prepend(e,r){return this.insert("before","".concat(e,"[0]"),r)}splice(e,r,n,i){const o=typeof n>"u"||n===-1,s=r<0?r-1:r,a=o?-1:Math.max(0,r+n),l=s<0&&a>=0?"":a,c="".concat(e,"[").concat(s,":").concat(l,"]");return this.insert("replace",c,i||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...Yz(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Bp(e,r),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},n&&this.operations[e]||{},r)}),this}_set(e,r){return this._assign(e,r,!1)}}const Tme=class oG extends iG{constructor(e,r,n){super(e,r),rG(this,xu,void 0),nG(this,xu,n)}clone(){return new oG(this.selection,{...this.operations},df(this,xu))}commit(e){if(!df(this,xu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return df(this,xu).mutate({patch:this.serialize()},n)}};xu=new WeakMap;let Up=Tme;const Ime=class sG extends iG{constructor(e,r,n){super(e,r),rG(this,_u,void 0),nG(this,_u,n)}clone(){return new sG(this.selection,{...this.operations},df(this,_u))}commit(e){if(!df(this,_u))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return df(this,_u).mutate({patch:this.serialize()},n)}};_u=new WeakMap;let Vp=Ime;var aG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ga=(t,e,r)=>(aG(t,e,"read from private field"),r?r.call(t):e.get(t)),lG=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},cG=(t,e,r,n)=>(aG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_l,wl;const uG={returnDocuments:!1};class fG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;this.operations=e,this.trxId=r}create(e){return Bp("create",e),this._add({create:e})}createIfNotExists(e){const r="createIfNotExists";return Bp(r,e),Sx(r,e),this._add({[r]:e})}createOrReplace(e){const r="createOrReplace";return Bp(r,e),Sx(r,e),this._add({[r]:e})}delete(e){return Jz("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}const Nme=class dG extends fG{constructor(e,r,n){super(e,n),lG(this,_l,void 0),cG(this,_l,r)}clone(){return new dG([...this.operations],ga(this,_l),this.trxId)}commit(e){if(!ga(this,_l))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ga(this,_l).mutate(this.serialize(),Object.assign({transactionId:this.trxId},uG,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof Vp)return this._add({patch:e.serialize()});if(n){const o=r(new Vp(e,{},ga(this,_l)));if(!(o instanceof Vp))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};_l=new WeakMap;let hG=Nme;const kme=class pG extends fG{constructor(e,r,n){super(e,n),lG(this,wl,void 0),cG(this,wl,r)}clone(){return new pG([...this.operations],ga(this,wl),this.trxId)}commit(e){if(!ga(this,wl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ga(this,wl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},uG,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof Up)return this._add({patch:e.serialize()});if(n){const o=r(new Up(e,{},ga(this,wl)));if(!(o instanceof Up))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};wl=new WeakMap;let mG=kme;const Ome="https://www.sanity.io/help/";function TO(t){return Ome+t}function jme(t){let e=!1,r;return function(){return e||(r=t(...arguments),e=!0),r}}const Jw=t=>jme(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return console.warn(t.join(" "),...r)}),Rme=Jw(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),$me=Jw(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),Dme=Jw(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(TO("js-client-browser-token")," for more information and how to hide this warning.")]),Mme=Jw(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(TO("js-client-api-version"))]),Fme="apicdn.sanity.io",Ex={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0},Lme=["localhost","127.0.0.1","0.0.0.0"],Bme=t=>Lme.indexOf(t)!==-1,Ume=function(e){if(e==="1"||e==="X")return;const r=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&r instanceof Date&&r.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")},yG=function(e){switch(e){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},gG=(t,e)=>{const r=Object.assign({},e,t);r.apiVersion||Mme();const n=Object.assign({},Ex,r),i=n.useProjectHostname;if(typeof Promise>"u"){const d=TO("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(d))}if(i&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&yG(n.perspective),"encodeSourceMapAtPath"in n||"encodeSourceMap"in n||"studioUrl"in n||"logger"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.");if("stega"in n&&n.stega!==void 0&&n.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'createClient' to 'false'.");const o=typeof window<"u"&&window.location&&window.location.hostname,s=o&&Bme(window.location.hostname);o&&s&&n.token&&n.ignoreBrowserTokenWarning!==!0?Dme():typeof n.useCdn>"u"&&Rme(),i&&Ame(n.projectId),n.dataset&&Xz(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?eG(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion="".concat(n.apiVersion).replace(/^v/,""),n.isDefaultApi=n.apiHost===Ex.apiHost,n.useCdn=n.useCdn!==!1&&!n.withCredentials,Ume(n.apiVersion);const a=n.apiHost.split("://",2),l=a[0],c=a[1],f=n.isDefaultApi?Fme:c;return n.useProjectHostname?(n.url="".concat(l,"://").concat(n.projectId,".").concat(c,"/v").concat(n.apiVersion),n.cdnUrl="".concat(l,"://").concat(n.projectId,".").concat(f,"/v").concat(n.apiVersion)):(n.url="".concat(n.apiHost,"/v").concat(n.apiVersion),n.cdnUrl=n.url),n},Vme="X-Sanity-Project-ID";function Wme(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r={},n=e.token||t.token;n&&(r.Authorization="Bearer ".concat(n)),!e.useGlobalApi&&!t.useProjectHostname&&t.projectId&&(r[Vme]=t.projectId);const i=!!(typeof e.withCredentials>"u"?t.token||t.withCredentials:e.withCredentials),o=typeof e.timeout>"u"?t.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},r,e.headers||{}),timeout:typeof o>"u"?5*60*1e3:o,proxy:e.proxy||t.proxy,json:!0,withCredentials:i,fetch:typeof e.fetch=="object"&&typeof t.fetch=="object"?{...t.fetch,...e.fetch}:e.fetch||t.fetch})}const vG=t=>{let{query:e,params:r={},options:n={}}=t;const i=new URLSearchParams,{tag:o,...s}=n;o&&i.append("tag",o),i.append("query",e);for(const[a,l]of Object.entries(r))i.append("$".concat(a),JSON.stringify(l));for(const[a,l]of Object.entries(s))l&&i.append(a,"".concat(l));return"?".concat(i)},zme=(t,e)=>t===!1?void 0:typeof t>"u"?e:t,Gme=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{dryRun:t.dryRun,returnIds:!0,returnDocuments:zme(t.returnDocuments,!0),visibility:t.visibility||"sync",autoGenerateArrayKeys:t.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:t.skipCrossDatasetReferenceValidation}},IO=t=>t.type==="response",qme=t=>t.body,Hme=(t,e)=>t.reduce((r,n)=>(r[e(n)]=n,r),Object.create(null)),Kme=11264;function bG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if("stega"in i&&i.stega!==void 0&&i.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'fetch' to 'false'.");const o=i.filterResponse===!1?f=>f:f=>f.result,{cache:s,next:a,...l}={useAbortSignal:typeof i.signal<"u",...i},c=typeof s<"u"||typeof a<"u"?{...l,fetch:{cache:s,next:a}}:l;return Ig(t,e,"query",{query:r,params:n},c).pipe(Nc(o))}function xG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:qd(t,"doc",r),json:!0,tag:n.tag};return Ng(t,e,i).pipe(Tg(IO),Nc(o=>o.body.documents&&o.body.documents[0]))}function _G(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:qd(t,"doc",r.join(",")),json:!0,tag:n.tag};return Ng(t,e,i).pipe(Tg(IO),Nc(o=>{const s=Hme(o.body.documents||[],a=>a._id);return r.map(a=>s[a]||null)}))}function wG(t,e,r,n){return Sx("createIfNotExists",r),Zw(t,e,r,"createIfNotExists",n)}function SG(t,e,r,n){return Sx("createOrReplace",r),Zw(t,e,r,"createOrReplace",n)}function EG(t,e,r,n){return Ig(t,e,"mutate",{mutations:[{delete:Yz(r)}]},n)}function AG(t,e,r,n){let i;r instanceof Vp||r instanceof Up?i={patch:r.serialize()}:r instanceof hG||r instanceof mG?i=r.serialize():i=r;const o=Array.isArray(i)?i:[i],s=n&&n.transactionId||void 0;return Ig(t,e,"mutate",{mutations:o,transactionId:s},n)}function Ig(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=r==="mutate",s=r==="query",a=o?"":vG(n),l=!o&&a.length<Kme,c=l?a:"",f=i.returnFirst,{timeout:d,token:h,tag:p,headers:m}=i,y=qd(t,r,c),g={method:l?"GET":"POST",uri:y,json:!0,body:l?void 0:n,query:o&&Gme(i),timeout:d,headers:m,token:h,tag:p,perspective:i.perspective,resultSourceMap:i.resultSourceMap,canUseCdn:s,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal,useCdn:i.useCdn};return Ng(t,e,g).pipe(Tg(IO),Nc(qme),Nc(b=>{if(!o)return b;const v=b.results||[];if(i.returnDocuments)return f?v[0]&&v[0].document:v.map(_=>_.document);const x=f?"documentId":"documentIds",S=f?v[0]&&v[0].id:v.map(_=>_.id);return{transactionId:b.transactionId,results:v,[x]:S}}))}function Zw(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o={[n]:r},s=Object.assign({returnFirst:!0,returnDocuments:!0},i);return Ig(t,e,"mutate",{mutations:[o]},s)}function Ng(t,e,r){var n,i;const o=r.url||r.uri,s=t.config(),a=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&o.indexOf("/data/")===0:r.canUseCdn;let l=((n=r.useCdn)!=null?n:s.useCdn)&&a;const c=r.tag&&s.requestTagPrefix?[s.requestTagPrefix,r.tag].join("."):r.tag||s.requestTagPrefix;if(c&&r.tag!==null&&(r.query={tag:eG(c),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&o.indexOf("/data/query/")===0){const h=(i=r.resultSourceMap)!=null?i:s.resultSourceMap;h!==void 0&&h!==!1&&(r.query={resultSourceMap:h,...r.query});const p=r.perspective||s.perspective;typeof p=="string"&&p!=="raw"&&(yG(p),r.query={perspective:p,...r.query},p==="previewDrafts"&&l&&(l=!1,$me()))}const f=Wme(s,Object.assign({},r,{url:NO(t,o,l)})),d=new Dm(h=>e(f,s.requester).subscribe(h));return r.signal?d.pipe(Qme(r.signal)):d}function mo(t,e,r){return Ng(t,e,r).pipe(Tg(i=>i.type==="response"),Nc(i=>i.body))}function qd(t,e,r){const n=t.config(),i=Zz(n),o="/".concat(e,"/").concat(i),s=r?"".concat(o,"/").concat(r):o;return"/data".concat(s).replace(/\/($|\?)/,"$1")}function NO(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{url:n,cdnUrl:i}=t.config(),o=r?i:n;return"".concat(o,"/").concat(e.replace(/^\//,""))}function Qme(t){return e=>new Dm(r=>{const n=()=>r.error(Xme(t));if(t&&t.aborted){n();return}const i=e.subscribe(r);return t.addEventListener("abort",n),()=>{t.removeEventListener("abort",n),i.unsubscribe()}})}const Yme=!!globalThis.DOMException;function Xme(t){var e,r;if(Yme)return new DOMException((e=t==null?void 0:t.reason)!=null?e:"The operation was aborted.","AbortError");const n=new Error((r=t==null?void 0:t.reason)!=null?r:"The operation was aborted.");return n.name="AbortError",n}var CG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ax=(t,e,r)=>(CG(t,e,"read from private field"),r?r.call(t):e.get(t)),Cx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Px=(t,e,r,n)=>(CG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),H0,K0,Q0,Y0;class Jme{constructor(e,r){Cx(this,H0,void 0),Cx(this,K0,void 0),Px(this,H0,e),Px(this,K0,r)}upload(e,r,n){return PG(Ax(this,H0),Ax(this,K0),e,r,n)}}H0=new WeakMap;K0=new WeakMap;class Zme{constructor(e,r){Cx(this,Q0,void 0),Cx(this,Y0,void 0),Px(this,Q0,e),Px(this,Y0,r)}upload(e,r,n){const i=PG(Ax(this,Q0),Ax(this,Y0),e,r,n);return Cr(i.pipe(Tg(o=>o.type==="response"),Nc(o=>o.body.document)))}}Q0=new WeakMap;Y0=new WeakMap;function PG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};Cme(r);let o=i.extract||void 0;o&&!o.length&&(o=["none"]);const s=Zz(t.config()),a=r==="image"?"images":"files",l=eye(i,n),{tag:c,label:f,title:d,description:h,creditLine:p,filename:m,source:y}=l,g={label:f,title:d,description:h,filename:m,meta:o,creditLine:p};return y&&(g.sourceId=y.id,g.sourceName=y.name,g.sourceUrl=y.url),Ng(t,e,{tag:c,method:"POST",timeout:l.timeout||0,uri:"/assets/".concat(a,"/").concat(s),headers:l.contentType?{"Content-Type":l.contentType}:{},query:g,body:n})}function eye(t,e){return typeof File>"u"||!(e instanceof File)?t:Object.assign({filename:t.preserveFilename===!1?void 0:e.name,contentType:e.type},t)}var tye=(t,e)=>Object.keys(e).concat(Object.keys(t)).reduce((r,n)=>(r[n]=typeof t[n]>"u"?e[n]:t[n],r),{});const rye=(t,e)=>e.reduce((r,n)=>(typeof t[n]>"u"||(r[n]=t[n]),r),{}),nye=14800,iye=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],oye={includeResult:!0};function TG(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{url:n,token:i,withCredentials:o,requestTagPrefix:s}=this.config(),a=r.tag&&s?[s,r.tag].join("."):r.tag,l={...tye(r,oye),tag:a},c=rye(l,iye),f=vG({query:t,params:e,options:{tag:a,...c}}),d="".concat(n).concat(qd(this,"listen",f));if(d.length>nye)return new Dm(y=>y.error(new Error("Query too large for listener")));const h=l.events?l.events:["mutation"],p=h.indexOf("reconnect")!==-1,m={};return(i||o)&&(m.withCredentials=!0),i&&(m.headers={Authorization:"Bearer ".concat(i)}),new Dm(y=>{let g;T().then(k=>{g=k}).catch(k=>{y.error(k),I()});let b,v=!1;function x(){v||(C(),!v&&g.readyState===g.CLOSED&&(A(),clearTimeout(b),b=setTimeout(P,100)))}function S(k){y.error(sye(k))}function _(k){const N=IG(k);return N instanceof Error?y.error(N):y.next(N)}function w(){v=!0,A(),y.complete()}function A(){g&&(g.removeEventListener("error",x),g.removeEventListener("channelError",S),g.removeEventListener("disconnect",w),h.forEach(k=>g.removeEventListener(k,_)),g.close())}function C(){p&&y.next({type:"reconnect"})}async function T(){const{default:k}=await gW(()=>import("./browser-khom2oYL.js").then(j=>j.b),__vite__mapDeps([])),N=new k(d,m);return N.addEventListener("error",x),N.addEventListener("channelError",S),N.addEventListener("disconnect",w),h.forEach(j=>N.addEventListener(j,_)),N}function P(){T().then(k=>{g=k}).catch(k=>{y.error(k),I()})}function I(){v=!0,A()}return I})}function IG(t){try{const e=t.data&&JSON.parse(t.data)||{};return Object.assign({type:t.type},e)}catch(e){return e}}function sye(t){if(t instanceof Error)return t;const e=IG(t);return e instanceof Error?e:new Error(aye(e))}function aye(t){return t.error?t.error.description?t.error.description:typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2):t.message||"Unknown listener error"}var NG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},sn=(t,e,r)=>(NG(t,e,"read from private field"),r?r.call(t):e.get(t)),Tx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ix=(t,e,r,n)=>(NG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Sl,El,Al,Cl;class lye{constructor(e,r){Tx(this,Sl,void 0),Tx(this,El,void 0),Ix(this,Sl,e),Ix(this,El,r)}create(e,r){return hf(sn(this,Sl),sn(this,El),"PUT",e,r)}edit(e,r){return hf(sn(this,Sl),sn(this,El),"PATCH",e,r)}delete(e){return hf(sn(this,Sl),sn(this,El),"DELETE",e)}list(){return mo(sn(this,Sl),sn(this,El),{uri:"/datasets",tag:null})}}Sl=new WeakMap;El=new WeakMap;class cye{constructor(e,r){Tx(this,Al,void 0),Tx(this,Cl,void 0),Ix(this,Al,e),Ix(this,Cl,r)}create(e,r){return Cr(hf(sn(this,Al),sn(this,Cl),"PUT",e,r))}edit(e,r){return Cr(hf(sn(this,Al),sn(this,Cl),"PATCH",e,r))}delete(e){return Cr(hf(sn(this,Al),sn(this,Cl),"DELETE",e))}list(){return Cr(mo(sn(this,Al),sn(this,Cl),{uri:"/datasets",tag:null}))}}Al=new WeakMap;Cl=new WeakMap;function hf(t,e,r,n,i){return Xz(n),mo(t,e,{method:r,uri:"/datasets/".concat(n),body:i,tag:null})}var kG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},va=(t,e,r)=>(kG(t,e,"read from private field"),r?r.call(t):e.get(t)),Nx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},kx=(t,e,r,n)=>(kG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),up,fp,dp,hp;class uye{constructor(e,r){Nx(this,up,void 0),Nx(this,fp,void 0),kx(this,up,e),kx(this,fp,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return mo(va(this,up),va(this,fp),{uri:r})}getById(e){return mo(va(this,up),va(this,fp),{uri:"/projects/".concat(e)})}}up=new WeakMap;fp=new WeakMap;class fye{constructor(e,r){Nx(this,dp,void 0),Nx(this,hp,void 0),kx(this,dp,e),kx(this,hp,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return Cr(mo(va(this,dp),va(this,hp),{uri:r}))}getById(e){return Cr(mo(va(this,dp),va(this,hp),{uri:"/projects/".concat(e)}))}}dp=new WeakMap;hp=new WeakMap;var OG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ox=(t,e,r)=>(OG(t,e,"read from private field"),r?r.call(t):e.get(t)),jx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Rx=(t,e,r,n)=>(OG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),X0,J0,Z0,eb;class dye{constructor(e,r){jx(this,X0,void 0),jx(this,J0,void 0),Rx(this,X0,e),Rx(this,J0,r)}getById(e){return mo(Ox(this,X0),Ox(this,J0),{uri:"/users/".concat(e)})}}X0=new WeakMap;J0=new WeakMap;class hye{constructor(e,r){jx(this,Z0,void 0),jx(this,eb,void 0),Rx(this,Z0,e),Rx(this,eb,r)}getById(e){return Cr(mo(Ox(this,Z0),Ox(this,eb),{uri:"/users/".concat(e)}))}}Z0=new WeakMap;eb=new WeakMap;var jG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ke=(t,e,r)=>(jG(t,e,"read from private field"),r?r.call(t):e.get(t)),$x=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Dx=(t,e,r,n)=>(jG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Pl,vr,Tl,or;const pye=class gT{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ex;$x(this,Pl,void 0),$x(this,vr,void 0),this.listen=TG,this.config(r),Dx(this,vr,e),this.assets=new Jme(this,ke(this,vr)),this.datasets=new lye(this,ke(this,vr)),this.projects=new uye(this,ke(this,vr)),this.users=new dye(this,ke(this,vr))}clone(){return new gT(ke(this,vr),this.config())}config(e){if(e===void 0)return{...ke(this,Pl)};if(ke(this,Pl)&&ke(this,Pl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return Dx(this,Pl,gG(e,ke(this,Pl)||{})),this}withConfig(e){return new gT(ke(this,vr),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return bG(this,ke(this,vr),e,r,n)}getDocument(e,r){return xG(this,ke(this,vr),e,r)}getDocuments(e,r){return _G(this,ke(this,vr),e,r)}create(e,r){return Zw(this,ke(this,vr),e,"create",r)}createIfNotExists(e,r){return wG(this,ke(this,vr),e,r)}createOrReplace(e,r){return SG(this,ke(this,vr),e,r)}delete(e,r){return EG(this,ke(this,vr),e,r)}mutate(e,r){return AG(this,ke(this,vr),e,r)}patch(e,r){return new Up(e,r,this)}transaction(e){return new mG(e,this)}request(e){return mo(this,ke(this,vr),e)}getUrl(e,r){return NO(this,e,r)}getDataUrl(e,r){return qd(this,e,r)}};Pl=new WeakMap;vr=new WeakMap;let mye=pye;const yye=class vT{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ex;$x(this,Tl,void 0),$x(this,or,void 0),this.listen=TG,this.config(r),Dx(this,or,e),this.assets=new Zme(this,ke(this,or)),this.datasets=new cye(this,ke(this,or)),this.projects=new fye(this,ke(this,or)),this.users=new hye(this,ke(this,or)),this.observable=new mye(e,r)}clone(){return new vT(ke(this,or),this.config())}config(e){if(e===void 0)return{...ke(this,Tl)};if(ke(this,Tl)&&ke(this,Tl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),Dx(this,Tl,gG(e,ke(this,Tl)||{})),this}withConfig(e){return new vT(ke(this,or),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Cr(bG(this,ke(this,or),e,r,n))}getDocument(e,r){return Cr(xG(this,ke(this,or),e,r))}getDocuments(e,r){return Cr(_G(this,ke(this,or),e,r))}create(e,r){return Cr(Zw(this,ke(this,or),e,"create",r))}createIfNotExists(e,r){return Cr(wG(this,ke(this,or),e,r))}createOrReplace(e,r){return Cr(SG(this,ke(this,or),e,r))}delete(e,r){return Cr(EG(this,ke(this,or),e,r))}mutate(e,r){return Cr(AG(this,ke(this,or),e,r))}patch(e,r){return new Vp(e,r,this)}transaction(e){return new hG(e,this)}request(e){return Cr(mo(this,ke(this,or),e))}dataRequest(e,r,n){return Cr(Ig(this,ke(this,or),e,r,n))}getUrl(e,r){return NO(this,e,r)}getDataUrl(e,r){return qd(this,e,r)}};Tl=new WeakMap;or=new WeakMap;let gye=yye;function vye(t,e){return{requester:TF(t,{}).defaultRequester,createClient:o=>new e(TF(t,{maxRetries:o.maxRetries,retryDelay:o.retryDelay}),o)}}var bye=[];const xye=vye(bye,gye),_ye=xye.createClient;var wye={VITE_GOOGLE_DRIVE_API_KEY:"AIzaSyC7KJIuaklIdqAKSEyoxr-_aJuEiZCWaiQ",VITE_IMGUR_CLIENT_ID:"6c65de36fe2a506",VITE_IMGUR_API_KEY:"87d72ff33afd8692c44b8bc013ad38293056c54b",VITE_IMGUR_ALBUM_ID:"o2qeHx9",VITE_HOMEPAGE_HOST:"https://hkleague2024.hkmahjong.org",VITE_CMS_HOST:"https://hkmjbs.sanity.studio",VITE_TOURNAMENT_ID:"b6908027-9179-485a-8bce-822c42114371",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const kO='_id, name, nickname, designation, "portraitImage": portraitImage.asset->url',Oo='_id, "slug": slug.current, name, secondaryName, thirdName, "squareLogoImage": squareLogoImage.asset->url, "color": color.hex, description',ba=`team->{${Oo}}, player->{${kO}}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url`,Hd=_ye({projectId:"0a9a4r26",dataset:"production",useCdn:!0,apiVersion:"2023-05-03",token:wye.VITE_DATABASE_API_KEY}),Sye=async(t,e)=>{const r=await Hd.fetch(`*[_type == "teamPlayer" && team._ref in [${t.map(i=>`"${i}"`).join(",")}]] | { "teamId": team._ref, player->{${kO}, "statistics": statistics[_key=="${e}"][0] } }`),n={};for(let i=0;i<r.length;i++){const o=r[i];n[o.teamId]||(n[o.teamId]=[]),n[o.teamId].push(oo(null,o))}return n},Eye=()=>Hd.fetch(`*[_type == "match" && !(_id in path("drafts.**")) && (status == "initialized" || status == "streaming")] | order(startAt asc)[0...10]{ _id, name, playerEast->{${ba}}, playerSouth->{${ba}}, playerWest->{${ba}}, playerNorth->{${ba}}, playerEastTeam->{${Oo}}, playerSouthTeam->{${Oo}}, playerWestTeam->{${Oo}}, playerNorthTeam->{${Oo}}, startAt, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax}}`).then(t=>t.map(e=>{const{playerEast:r,playerEastTeam:n,playerSouth:i,playerSouthTeam:o,playerWest:s,playerWestTeam:a,playerNorth:l,playerNorthTeam:c,...f}=e,d={...f,nameAlt:f.name.startsWith("常規賽 #23Pre")?`常規賽 ${f.startAt.substring(0,10)} 第${f.name[f.name.length-1]}回戰`:f.name,playerEast:oo(n,r),playerSouth:oo(o,i),playerWest:oo(a,s),playerNorth:oo(c,l),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(r&&n&&i&&o&&s&&a&&l&&c){const h={[r.team._id]:"playerEast",[i.team._id]:"playerSouth",[s.team._id]:"playerWest",[l.team._id]:"playerNorth"};d._order=[h[n._id],h[o._id],h[a._id],h[c._id]]}return d})),OO=async(t,e)=>{const r=await Hd.fetch(`*[_type == "match" && _id == "${t}"]{ _id, name, playerEast->{${ba}}, playerSouth->{${ba}}, playerWest->{${ba}}, playerNorth->{${ba}}, playerEastTeam->{${Oo}}, playerSouthTeam->{${Oo}}, playerWestTeam->{${Oo}}, playerNorthTeam->{${Oo}}, startAt, youtubeUrl, bilibiliUrl, result, rounds, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax, teams[]{ "_id": team._ref, matchCount, ranking, point }}}`).then(n=>{const{playerEast:i,playerEastTeam:o,playerSouth:s,playerSouthTeam:a,playerWest:l,playerWestTeam:c,playerNorth:f,playerNorthTeam:d,...h}=n[0],p={...h,nameAlt:h.name.startsWith("常規賽 #23Pre")?`常規賽 ${h.startAt.substring(0,10)} 第${h.name[h.name.length-1]}回戰`:h.name,playerEast:oo(o,i),playerSouth:oo(a,s),playerWest:oo(c,l),playerNorth:oo(d,f),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(i&&o&&s&&a&&l&&c&&f&&d){const m={[i.team._id]:"playerEast",[s.team._id]:"playerSouth",[l.team._id]:"playerWest",[f.team._id]:"playerNorth"};p._order=[m[o._id],m[a._id],m[c._id],m[d._id]]}return p});if(e){const n=[r.playerEast.playerId,r.playerSouth.playerId,r.playerWest.playerId,r.playerNorth.playerId].filter(i=>i!=="");if(n.length>0){const i=await Aye(n,r.tournament._id);r.playerEast.playerStatistic=i[r.playerEast.playerId],r.playerSouth.playerStatistic=i[r.playerSouth.playerId],r.playerWest.playerStatistic=i[r.playerWest.playerId],r.playerNorth.playerStatistic=i[r.playerNorth.playerId]}r.playerEast.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerEast.teamId)||null,r.playerSouth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerSouth.teamId)||null,r.playerWest.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerWest.teamId)||null,r.playerNorth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerNorth.teamId)||null}return r},Aye=async(t,e)=>Hd.fetch(`*[_type=="player" && _id in [${t.map(r=>`"${r}"`).join(",")}]]{ _id, "statistics": statistics[_key=="${e}"][0] }`).then(r=>r.reduce((n,i)=>{if(!i.statistics||i.statistics.matchCount<=0)return n;const o={point:i.statistics.point,matchCount:i.statistics.matchCount,nonFourthP:i.statistics.nonFourthP,firstAndSecondP:i.statistics.firstAndSecondP,ronP:i.statistics.ronP,riichiP:i.statistics.riichiP,chuckP:i.statistics.chuckP,revealP:i.statistics.revealP,ronPureScoreAvg:i.statistics.ronPureScoreAvg,chuckPureScoreAvg:i.statistics.chuckPureScoreAvg,pointRanking:i.statistics.pointRanking,nonFourthPRanking:i.statistics.nonFourthPRanking,firstAndSecondPRanking:i.statistics.firstAndSecondPRanking,ronPRanking:i.statistics.ronPRanking,riichiPRanking:i.statistics.riichiPRanking,chuckPRanking:i.statistics.chuckPRanking,revealPRanking:i.statistics.revealPRanking,ronPureScoreAvgRanking:i.statistics.ronPureScoreAvgRanking,chuckPureScoreAvgRanking:i.statistics.chuckPureScoreAvgRanking};return n[i._id]=o,n},{})),pp=t=>{const e=`${t.playerPortraitImageUrl}?w=360&h=500`,r=`${t.teamLogoImageUrl}?w=500&h=500`,n=`${t.teamLogoImageUrl}?w=1000&h=1000`,i=t.playerDesignation,o=t.playerName,s=t.color;return{name:o,nickname:t.playerNickname,color:s,title:i,teamPicUrl:r,largeTeamPicUrl:n,proPicUrl:e}},oo=(t,e)=>{const r={playerId:"",playerName:"",playerNickname:"",playerDesignation:"",playerPortraitImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png",playerFullname:"",playerStatistic:null,teamId:"",teamName:"",teamSecondaryName:"",teamThirdName:"",teamFullname:"",teamStatistic:null,color:"#000000",teamLogoImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png"};if(e){if(e.player){r.playerId=e.player._id,r.playerName=e.player.name,e.player.nickname&&(r.playerNickname=e.player.nickname),e.player.designation&&(r.playerDesignation=e.player.designation),e.player.portraitImage&&(r.playerPortraitImageUrl=e.player.portraitImage);const n=e.player.statistics;r.playerStatistic=n&&n.matchCount>0?{point:n.point,pointRanking:n.pointRanking,matchCount:n.matchCount,nonFourthP:n.nonFourthP,nonFourthPRanking:n.nonFourthPRanking,firstAndSecondP:n.firstAndSecondP,firstAndSecondPRanking:n.firstAndSecondPRanking,riichiP:n.riichiP,riichiPRanking:n.riichiPRanking,ronP:n.ronP,ronPRanking:n.ronPRanking,chuckP:n.chuckP,chuckPRanking:n.chuckPRanking,revealP:n.revealP,revealPRanking:n.revealPRanking,ronPureScoreAvg:n.ronPureScoreAvg,ronPureScoreAvgRanking:n.ronPureScoreAvgRanking,chuckPureScoreAvg:n.chuckPureScoreAvg,chuckPureScoreAvgRanking:n.chuckPureScoreAvgRanking}:null}e.team&&(r.teamId=e.team._id,r.teamName=e.team.name,r.teamSecondaryName=e.team.secondaryName,r.teamThirdName=e.team.thirdName,r.color=e.team.color,e.team.squareLogoImage&&(r.teamLogoImageUrl=e.team.squareLogoImage)),r.playerFullname=r.playerName+(r.playerNickname?` (${r.playerNickname})`:""),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "),r.playerDesignation=r.teamFullname,e.overridedDesignation&&(r.playerDesignation=e.overridedDesignation),e.overridedName&&(r.playerName=e.overridedName),e.overridedNickname&&(r.playerNickname=e.overridedNickname),e.overridedColor&&(r.color=e.overridedColor),e.overridedPortraitImage&&(r.playerPortraitImageUrl=e.overridedPortraitImage)}else t&&(r.teamId=t._id,r.teamName=t.name,r.teamSecondaryName=t.secondaryName,r.teamThirdName=t.thirdName,r.color=t.color,t.squareLogoImage&&(r.teamLogoImageUrl=t.squareLogoImage),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "));return r},e1=async t=>await Hd.fetch(`*[_type == "matchTournament" && _id == "${t}"][0]{..., "logoUrl": logo.asset->url, teams[]{..., team->{${Oo}}}}`),RG=async t=>await Hd.fetch(`*[_type=="teamPlayer" && !(_id in path("drafts.**")) && defined(player->statistics[_key=="${t}"])]{"teamId": team._ref, player->{${kO}, "statistics": statistics[_key=="${t}"][0]}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url}`);e1("b6908027-9179-485a-8bce-822c42114371");const kF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function Cye(){const t=E.useCallback(()=>{window.navigator.clipboard.writeText(kF)},[]);return u.jsx("div",{className:"flex items-center justify-center gap-x-8",children:u.jsxs("div",{children:[u.jsx("p",{children:"1. 打開OBS"}),u.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),u.jsxs("p",{children:["- 網址 = ",u.jsx("strong",{children:"上述網址"}),u.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",u.jsx("br",{})," - 自訂CSS ="," ",u.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[u.jsx("pre",{children:kF}),u.jsx("div",{className:"absolute top-2 right-2",children:u.jsx("button",{type:"button",onClick:t,children:u.jsx("i",{className:"bi bi-copy"})})})]}),u.jsx("br",{}),"其餘默認即可。"]}),u.jsx("p",{children:"4. 確定"})]})})}let Pye=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const hs=(t=12)=>Pye(t),Tye=()=>{const t=new Date;return`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`},aA=t=>`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${t}`,jO=t=>{let e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);e=Math.round(e*1.25),r=Math.round(r*1.25),n=Math.round(n*1.25),e=e<255?e:255,r=r<255?r:255,n=n<255?n:255,e=Math.round(e),r=Math.round(r),n=Math.round(n);const i=e.toString(16).length===1?`0${e.toString(16)}`:e.toString(16),o=r.toString(16).length===1?`0${r.toString(16)}`:r.toString(16),s=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16);return`#${i}${o}${s}`},Iye=t=>{switch(t){case"12":return"三倍滿 (12翻)";case"13":return"累計役滿 (13翻)"}return"(未知)"},Nye=t=>{switch(t){case"13":return"單倍役滿";case"26":return"雙倍役滿";case"39":return"三倍役滿";case"130":return"無上限"}return"(未知)"},En=t=>typeof t>"u"||t===null?"-":t>=0?`+${t.toFixed(1)}`:`▲${Math.abs(t).toFixed(1)}`,Ka=t=>typeof t>"u"||t===null?"-":t===1||t==="1"?"1st":t===2||t==="2"?"2nd":t===3||t==="3"?"3rd":`${t}th`,Ws=t=>typeof t>"u"||t===null?"-":t.toFixed(2),$v=t=>t===0?t.toLocaleString("en-US"):t>0?`${Math.floor(t).toLocaleString("en-US")}`:Math.floor(t).toLocaleString("en-US"),zs=({teamPlayer:t})=>{const e=`${t.playerPortraitImageUrl}?w=64&h=64&fit=crop&crop=top`,r=`${t.teamLogoImageUrl}?w=64&h=64`,n=t.playerDesignation,i=t.playerName,o=t.color;return u.jsxs("div",{className:"flex justify-start items-center gap-x-1 border-l-4 pl-2",style:{borderColor:o},children:[u.jsx("div",{className:"w-8 h-8",children:r&&u.jsx("img",{src:r,alt:n})}),u.jsx("div",{className:"w-8 h-8",children:e&&u.jsx("img",{src:e,alt:i})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-neutral-600",children:n}),u.jsx("p",{className:"font-bold",children:i})]})]})};function kye(){const{data:t,refetch:e}=Ko({queryKey:["matches"],queryFn:Eye}),{data:r,set:n}=mr("obs/1");E.useCallback(o=>{const s=o.currentTarget.getAttribute("data-id");s&&confirm(`請確定上一局對局已經結束才開始新的直播！！
確定要開始直播新的對局嗎？`)&&n({matchId:s})},[n]);const i=E.useMemo(()=>t==null?void 0:t.find(o=>o._id===(r==null?void 0:r.matchId)),[t,r==null?void 0:r.matchId]);return u.jsx("div",{className:"container mx-auto",children:u.jsxs("div",{className:"h-screen flex flex-col py-16 gap-y-12",children:[u.jsx("div",{className:"shrink-0",children:u.jsxs("h1",{className:"text-4xl font-bold text-center",children:[u.jsx("img",{src:"/images/master-logo.jpeg",className:"inline-block w-16",alt:"HKMSCA"})," ",u.jsx("span",{children:"日麻比賽直播系統 (牌藝攻防)"})]})}),u.jsxs("div",{className:"shrink-0 space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-x-4",children:[u.jsx("div",{className:"col-span-2",children:u.jsxs("div",{className:"px-8 py-4 bg-green-300 border-2 border-green-600 text-center space-y-4",children:[u.jsx("p",{className:"text-3xl font-bold text-green-900",children:"OBS設定"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-4",children:[u.jsx("div",{children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("a",{href:`${location.origin}/v1/obs/1/scene`,target:"_blank",className:"block text-black bg-white bg-opacity-40 p-2 rounded hover:text-black",children:[u.jsx("span",{className:"text-red-600 font-bold",children:"*01/30新增*"}),u.jsx("br",{}),"多合一場景"]}),u.jsx("a",{href:`${location.origin}/v1/obs/1/realtime-summary`,target:"_blank",className:"block text-black bg-white bg-opacity-40 p-2 rounded hover:text-black",children:"現時數據"}),u.jsx("a",{href:`${location.origin}/v1/obs/1/end`,target:"_blank",className:"text-black bg-white bg-opacity-40 p-2 rounded hover:text-black",children:"今日賽事已完結"})]}),u.jsxs("div",{className:"bg-white rounded p-4 space-y-4",children:[u.jsx("p",{className:"text-center",children:"請在下方表格點擊“直播“來切換賽事"}),i&&u.jsx("div",{children:u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx(zs,{teamPlayer:i.playerEast}),u.jsx(zs,{teamPlayer:i.playerSouth}),u.jsx(zs,{teamPlayer:i.playerWest}),u.jsx(zs,{teamPlayer:i.playerNorth})]})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("p",{children:"開始前倒數"}),u.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[u.jsx("a",{href:`${location.origin}/v1/obs/1/forecast?m=0`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"即將開始"}),u.jsx("a",{href:`${location.origin}/v1/obs/1/forecast?m=5`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"5分鐘"}),u.jsx("a",{href:`${location.origin}/v1/obs/1/forecast?m=10`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"10分鐘"}),u.jsx("a",{href:`${location.origin}/v1/obs/1/forecast?m=15`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"15分鐘"}),u.jsx("a",{href:`${location.origin}/v1/obs/1/forecast?m=20`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"20分鐘"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx("a",{href:`${location.origin}/v1/obs/1/introduction`,target:"_blank",className:"text-black bg-white bg-opacity-40 p-2 rounded hover:text-black",children:"賽前介紹"}),u.jsx("a",{href:`${location.origin}/v1/obs/1`,target:"_blank",className:"text-black bg-white bg-opacity-40 p-2 rounded hover:text-black",children:"直播頁面"}),u.jsx("a",{href:`${location.origin}/v1/obs/1/summary`,target:"_blank",className:"text-black bg-white bg-opacity-40 p-2 rounded hover:text-black",children:"賽後結果"})]})]})]})}),u.jsx("div",{children:u.jsx("div",{className:"text-left",children:u.jsx(Cye,{})})})]})]})}),u.jsx("div",{children:u.jsxs("div",{className:"px-8 py-4 bg-yellow-300 border-2 border-yellow-600 text-center space-y-4",children:[u.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:"主播＋控制台"}),u.jsxs("p",{className:"text-2xl",children:["分數控制台：",u.jsxs("a",{href:`${location.origin}/v1/obs/1/control`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/control"]})]}),u.jsx("div",{children:u.jsx("img",{className:"mx-auto block w-48 h-48",src:aA(`${location.origin}/v1/obs/1/control`),alt:""})}),u.jsxs("p",{className:"text-2xl",children:["多合一場景控制台：",u.jsxs("a",{href:`${location.origin}/v1/obs/1/scene-control`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/scene-control"]})]}),u.jsx("div",{children:u.jsx("img",{className:"mx-auto block w-48 h-48",src:aA(`${location.origin}/v1/obs/1/scene-control`),alt:""})}),u.jsxs("p",{className:"text-2xl",children:["OBS遙控控制台(要連上牌藝Wifi)",u.jsx("a",{href:"http://192.168.1.8:88/obs-control",target:"_blank",className:"text-black",children:"http://192.168.1.8:88/obs-control"})]}),u.jsx("div",{children:u.jsx("img",{className:"mx-auto block w-48 h-48",src:aA("http://192.168.1.8:88/obs-control"),alt:""})})]})})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-right mb-2",children:u.jsxs(Oe,{color:"secondary",onClick:()=>e(),children:[u.jsx("i",{className:"bi bi-arrow-repeat"})," 刷新"]})}),u.jsxs("table",{className:"data-table w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"對局"}),u.jsx("th",{children:"東"}),u.jsx("th",{children:"南"}),u.jsx("th",{children:"西"}),u.jsx("th",{children:"北"}),u.jsx("th",{className:"text-right",children:"操作"})]})}),u.jsx("tbody",{children:t==null?void 0:t.map(o=>u.jsxs("tr",{children:[u.jsxs("th",{children:[u.jsx("p",{children:o.name}),u.jsx("p",{className:"font-normal text-sm text-neutral-600",children:o.tournament.name})]}),u.jsx("td",{children:u.jsx(zs,{teamPlayer:o.playerEast})}),u.jsx("td",{children:u.jsx(zs,{teamPlayer:o.playerSouth})}),u.jsx("td",{children:u.jsx(zs,{teamPlayer:o.playerWest})}),u.jsx("td",{children:u.jsx(zs,{teamPlayer:o.playerNorth})}),u.jsxs("td",{className:"space-x-2 text-right",children:[u.jsxs("div",{className:"space-x-2",children:[u.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/square`,target:"_blank",children:[u.jsx("i",{className:"bi bi-card-image"})," 出Post圖"]}),u.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/thumbnail`,target:"_blank",children:[u.jsx("i",{className:"bi bi-youtube"})," YT Thumbnail"]}),u.jsxs("a",{href:`/v1/match/${o._id}/nameplates`,target:"_blank",children:[u.jsx("i",{className:"bi bi-person-badge"})," 名牌"]})]}),u.jsxs("div",{className:"space-x-2",children:[u.jsxs("a",{href:`/v1/match/${o._id}/forecast?startAt=${o.name.endsWith("2")?"21":"19"}:30`,target:"_blank",children:[u.jsx("i",{className:"bi bi-bell"})," 倒數"]}),u.jsxs("a",{href:`/v1/match/${o._id}/introduction`,target:"_blank",children:[u.jsx("i",{className:"bi bi-person-vcard"})," 介紹"]}),u.jsxs("a",{href:`/v1/match/${o._id}/summary`,target:"_blank",children:[u.jsx("i",{className:"bi bi-trophy"})," 結果"]}),o._id===(r==null?void 0:r.matchId)?u.jsxs("span",{className:"bg-red-600 px-2 py-1 rounded text-white",children:[u.jsx("i",{className:"bi bi-record-circle"})," LIVE 直播中"]}):u.jsxs("a",{href:`/v1/match/${o._id}/control`,target:"_blank",className:"text-red-600",children:[u.jsx("i",{className:"bi bi-record-circle"})," 直播"]})]})]})]},o._id))})]})]}),u.jsx("div",{children:u.jsx("div",{className:"text-center space-x-4",children:u.jsx("a",{href:"https://hkmjbs.sanity.studio/",target:"_blank",children:u.jsxs(Oe,{color:"secondary",children:["資料庫 ",u.jsx("i",{className:"bi bi-box-arrow-up-right"})]})})})}),u.jsx("div",{className:"flex gap-x-4"})]})]})})}const Oye=t=>{const e={};for(let r=0;r<t.length;r+=1)e[r.toString()]=t[r];return e},OF=t=>{if(t.length!==0)return t[t.length-1]},rs=t=>{const{data:e,update:r}=mr(`/matches/${t}`),{data:n,update:i,push:o}=mr("matchRounds",{order:{byChild:"matchId"},filter:{equalTo:t}}),s=E.useMemo(()=>OF(Object.values(n??{}))??void 0,[n]),a=E.useMemo(()=>Object.values((s==null?void 0:s.doras)??{}),[s]),l=E.useCallback((v,x)=>{const S=n==null?void 0:n[v];S&&i({[v]:{...S,...x}})},[n,i]),c=E.useCallback(v=>{const x=OF(Object.keys(n??{}));x&&i({[x]:{...s,...v}})},[s,n,i]),f=E.useCallback(v=>{c({doras:Oye(v)})},[c]),d=E.useCallback(v=>{r({name:v})},[r]),h=E.useCallback(v=>{r({players:v})},[r]),p=E.useCallback(v=>{r({activeResultDetail:v})},[r]),m=E.useCallback(v=>{r({showPoints:v})},[r]),y=E.useCallback(v=>{r({hideHeader:v})},[r]),g=E.useCallback(v=>{r({hidePlayers:v})},[r]),b=E.useCallback(v=>{i({[v]:{...n==null?void 0:n[v],hasBroadcasted:!0}})},[n,i]);return{match:e,matchRounds:n,matchCurrentRound:s,matchCurrentRoundDoras:a,setMatchName:d,setMatchPlayers:h,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchHidePlayersDisplay:g,setMatchActiveResultDetail:p,setMatchRoundHasBroadcastedToTrue:b,setCurrentRoundDoras:f,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:o}};var ze=(t=>(t[t.Unknown=0]="Unknown",t[t.Exhausted=-1]="Exhausted",t[t.Ron=1]="Ron",t[t.SelfDrawn=2]="SelfDrawn",t[t.Hotfix=-2]="Hotfix",t))(ze||{}),_t=(t=>(t[t.Unknown=0]="Unknown",t[t.NextRound=1]="NextRound",t[t.Extended=2]="Extended",t[t.NextRoundAndExtended=3]="NextRoundAndExtended",t[t.Hotfix=-2]="Hotfix",t[t.End=-1]="End",t))(_t||{}),vt=(t=>(t[t.Win=1]="Win",t[t.Lose=-1]="Lose",t[t.None=0]="None",t))(vt||{}),Ln=(t=>(t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North",t))(Ln||{});const lA=[Ln.East,Ln.South,Ln.West,Ln.North],jF=["0","1","2","3"],jye=t=>parseInt(t,10),Wc=(t,e)=>lA[(4+jye(t)-(e-1)%lA.length)%lA.length],ti=(t,e)=>Wc(t,e)===Ln.East,$G=(t,e)=>Wc(t,e)===Ln.South,DG=(t,e)=>Wc(t,e)===Ln.West,MG=(t,e)=>Wc(t,e)===Ln.North,FG=t=>t>=1&&t<=4,LG=t=>t>=5&&t<=8,BG=t=>t>=9&&t<=12,UG=t=>t>=13&&t<=16,ou={"1h20f":{ne:200,e:400,ner:1e3,er:1500},"1h25f":{ne:200,e:400,ner:1e3,er:1500},"1h30f":{ne:300,e:500,ner:1e3,er:1500},"1h40f":{ne:400,e:700,ner:1300,er:2e3},"1h50f":{ne:400,e:800,ner:1600,er:2400},"1h60f":{ne:500,e:1e3,ner:2e3,er:2900},"1h70f":{ne:600,e:1200,ner:2300,er:3400},"1h80f":{ne:700,e:1300,ner:2600,er:3900},"1h90f":{ne:800,e:1500,ner:2900,er:4400},"1h100f":{ne:800,e:1600,ner:3200,er:4800},"1h110f":{ne:900,e:1800,ner:3600,er:5300},"2h20f":{ne:400,e:700,ner:1500,er:2100},"2h25f":{ne:400,e:800,ner:1600,er:2400},"2h30f":{ne:500,e:1e3,ner:2e3,er:2900},"2h40f":{ne:700,e:1300,ner:2600,er:3900},"2h50f":{ne:800,e:1600,ner:3200,er:4800},"2h60f":{ne:1e3,e:2e3,ner:3900,er:5800},"2h70f":{ne:1200,e:2300,ner:4500,er:6800},"2h80f":{ne:1300,e:2600,ner:5200,er:7700},"2h90f":{ne:1500,e:2900,ner:5800,er:8700},"2h100f":{ne:1600,e:3200,ner:6400,er:9600},"2h110f":{ne:1800,e:3600,ner:7100,er:10600},"3h20f":{ne:700,e:1300,ner:2600,er:3900},"3h25f":{ne:800,e:1600,ner:3200,er:4800},"3h30f":{ne:1e3,e:2e3,ner:3900,er:5800},"3h40f":{ne:1300,e:2600,ner:5200,er:7700},"3h50f":{ne:1600,e:3200,ner:6400,er:9600},"3h60f":{ne:2e3,e:3900,ner:7700,er:11600},"4h20f":{ne:1300,e:2600,ner:5200,er:7700},"4h25f":{ne:1600,e:3200,ner:6400,er:9600},"4h30f":{ne:2e3,e:3900,ner:7700,er:11600},"5h":{ne:2e3,e:4e3,ner:8e3,er:12e3},"6h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"7h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"8h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"9h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"10h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"11h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"12h":{ne:6e3,e:12e3,ner:24e3,er:36e3}},Rye=(t,e,r)=>{let n;const i=parseInt(t,10);if(Number.isNaN(i))throw new Error(`han "${t}" is NaN`);const o=parseInt(e,10);if(Number.isNaN(o))throw new Error(`fu "${e}" is NaN`);return i>=13?n=ou["12h"]:i>=5?n=ou[`${i}h`]:i>=4&&o>=(r!=null&&r.roundUp?30:40)||i>=3&&o>=(r!=null&&r.roundUp?60:70)?n=ou["5h"]:n=ou[`${i}h${o}f`],n||ou["1h30f"]},$ye=(t=1)=>({ne:8e3*t,e:16e3*t,ner:32e3*t,er:48e3*t}),RF=(t,e,r,n,i,o)=>{const s=r>0?$ye(Math.min(GG((o==null?void 0:o.yakumanMax)??"130"),r)):Rye(t,e,o);return n?i?{win:s.er,target:s.er}:{win:s.e*3,all:s.e}:i?{win:s.ner,target:s.ner}:{win:s.e+2*s.ne,east:s.e,others:s.ne}},Dye=t=>t.all||t.east?ze.SelfDrawn:t.target?ze.Ron:ze.Unknown,$F=t=>jF[(t-1)%jF.length],Mye=t=>({0:{beforeScore:t[0].afterScore,afterScore:t[0].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[0].isYellowCarded||!1,isRedCarded:t[0].isRedCarded||!1,type:vt.None,scoreChanges:[],prevScoreChanges:t[0].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:t[1].afterScore,afterScore:t[1].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[1].isYellowCarded||!1,isRedCarded:t[1].isRedCarded||!1,type:vt.None,scoreChanges:[],prevScoreChanges:t[1].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:t[2].afterScore,afterScore:t[2].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[2].isYellowCarded||!1,isRedCarded:t[2].isRedCarded||!1,type:vt.None,scoreChanges:[],prevScoreChanges:t[2].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:t[3].afterScore,afterScore:t[3].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[3].isYellowCarded||!1,isRedCarded:t[3].isRedCarded||!1,type:vt.None,scoreChanges:[],prevScoreChanges:t[3].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}}),DF=t=>Mye({0:t[0],1:t[1],2:t[2],3:t[3]}),Fye=()=>`${Tye()}-${hs(6)}`,Mx=(t,e,r)=>`${t}-${e}.${r}`,Lye={1:"東 1 局",2:"東 2 局",3:"東 3 局",4:"東 4 局",5:"南 1 局",6:"南 2 局",7:"南 3 局",8:"南 4 局",9:"西 1 局",10:"西 2 局",11:"西 3 局",12:"西 4 局",13:"北 1 局",14:"北 2 局",15:"北 3 局",16:"北 4 局"},Bye=(t,e,r=8)=>{try{const n=Lye[Math.min(t,r)];if(!n)throw new Error(`Unable to parse round=${t} in MJMatchCounterSpan`);return e&&e!==0?`${n}${e}本場`:n}catch(n){return console.error(n),`${t}.${e??0}`}},VG=t=>{switch(t){case"0":return"3";case"1":return"0";case"2":return"1";case"3":return"2"}},WG=t=>{switch(t){case"0":return"1";case"1":return"2";case"2":return"3";case"3":return"0"}},zG=t=>{switch(t){case"0":return"2";case"1":return"3";case"2":return"0";case"3":return"1"}},GG=t=>{switch(t){case"13":return 1;case"26":return 2;case"39":return 3;case"130":return 10}},Uye={[ze.Ron]:"ron",[ze.SelfDrawn]:"tsumo",[ze.Exhausted]:"exhausted",[ze.Hotfix]:"hotfix",[ze.Unknown]:"unknown"},Vye={[Ln.East]:"east",[Ln.South]:"south",[Ln.West]:"west",[Ln.North]:"north"},Wye={[vt.None]:"none",[vt.Win]:"win",[vt.Lose]:"lose"},Dv=(t,e)=>{var r,n,i,o,s,a,l,c,f;return{position:Vye[Wc(e,t.roundCount)],type:Wye[t.playerResults[e].type],status:t.playerResults[e].isRiichi||(r=t.playerResults[e].detail)!=null&&r.isRiichied?"isRiichied":t.playerResults[e].isRevealed||(n=t.playerResults[e].detail)!=null&&n.isRevealed?"isRevealed":"none",isWaited:!!t.playerResults[e].waitingTiles&&t.playerResults[e].waitingTiles.length>0,beforeScore:t.playerResults[e].beforeScore,afterScore:t.playerResults[e].afterScore,dora:(i=t.playerResults[e].detail)==null?void 0:i.dora,redDora:(o=t.playerResults[e].detail)==null?void 0:o.redDora,innerDora:(s=t.playerResults[e].detail)==null?void 0:s.innerDora,han:(a=t.playerResults[e].detail)==null?void 0:a.han,fu:(l=t.playerResults[e].detail)==null?void 0:l.fu,yaku:(f=(c=t.playerResults[e].detail)==null?void 0:c.yakus)==null?void 0:f.map(({label:d})=>d).join(" "),pureScore:0}},qG=t=>{const e=t.at(-1),r=HG([e.playerResults[0].afterScore,e.playerResults[1].afterScore,e.playerResults[2].afterScore,e.playerResults[3].afterScore]);return{result:{playerEast:{score:e.playerResults[0].afterScore,ranking:r[0].ranking.toString(),point:r[0].point,penalty:e.playerResults[0].isRedCarded?-30:0,penaltyReason:e.playerResults[0].isRedCarded?"紅牌":""},playerSouth:{score:e.playerResults[1].afterScore,ranking:r[1].ranking.toString(),point:r[1].point,penalty:e.playerResults[1].isRedCarded?-30:0,penaltyReason:e.playerResults[1].isRedCarded?"紅牌":""},playerWest:{score:e.playerResults[2].afterScore,ranking:r[2].ranking.toString(),point:r[2].point,penalty:e.playerResults[2].isRedCarded?-30:0,penaltyReason:e.playerResults[2].isRedCarded?"紅牌":""},playerNorth:{score:e.playerResults[3].afterScore,ranking:r[3].ranking.toString(),point:r[3].point,penalty:e.playerResults[3].isRedCarded?-30:0,penaltyReason:e.playerResults[3].isRedCarded?"紅牌":""}},rounds:t.map(o=>({_key:hs(),type:Uye[o.resultType],code:`${o.roundCount}.${o.extendedRoundCount}`,playerEast:Dv(o,"0"),playerSouth:Dv(o,"1"),playerWest:Dv(o,"2"),playerNorth:Dv(o,"3")}))}},zye=(t,e)=>{if(e===0)return[0,0,0,0];const r=t.map((i,o)=>({score:i,index:o})).sort((i,o)=>o.score-i.score),n=[0,0,0,0];return r[0].score===r[1].score?r[1].score===r[2].score?r[2].score===r[3].score?(n[r[0].index]=Math.round(e*.4),n[r[1].index]=Math.round(e*.2),n[r[2].index]=Math.round(e*.2),n[r[3].index]=Math.round(e*.2),n):(n[r[0].index]=Math.round(e*.4),n[r[1].index]=Math.round(e*.3),n[r[2].index]=Math.round(e*.3),n):(n[r[0].index]=Math.round(e/2),n[r[1].index]=Math.round(e/2),n):(n[r[0].index]=e,n)},HG=(t,e=3e4,r=[50,10,-10,-30])=>{const n=t.map((a,l)=>({score:a,index:l})).sort((a,l)=>l.score-a.score),i=[{point:0,ranking:1},{point:0,ranking:1},{point:0,ranking:1},{point:0,ranking:1}];if(new Set(t).size===4)return i[n[0].index]={point:(n[0].score-e)/1e3+r[0],ranking:1},i[n[1].index]={point:(n[1].score-e)/1e3+r[1],ranking:2},i[n[2].index]={point:(n[2].score-e)/1e3+r[2],ranking:3},i[n[3].index]={point:(n[3].score-e)/1e3+r[3],ranking:4},i;const o=r.map((a,l)=>({point:a,ranking:l+1}));let s=0;for(;s<3;){let a=s;for(;a<3&&n[s].score===n[a+1].score;)a+=1;if(s!==a){const l=o.reduce((h,p,m)=>h+(m>=s&&m<=a?p.point:0),0)*10,c=a-s+1,f=Math.floor(l*(1/c)),d=Math.floor(l-(c-1)*f);o[s].point=d/10,o[s].ranking=s+1;for(let h=s+1;h<=a;h++)o[h].point=f/10,o[h].ranking=s+1}s=a+1}return i[n[0].index]={point:(n[0].score-e)/1e3+o[0].point,ranking:o[0].ranking},i[n[1].index]={point:(n[1].score-e)/1e3+o[1].point,ranking:o[1].ranking},i[n[2].index]={point:(n[2].score-e)/1e3+o[2].point,ranking:o[2].ranking},i[n[3].index]={point:(n[3].score-e)/1e3+o[3].point,ranking:o[3].ranking},i};function Lt({signed:t,className:e,positiveClassName:r,negativeClassName:n,value:i,animated:o,hideZero:s,title:a}){const[l,c]=E.useState(i),f=E.useRef(null),d=E.useCallback(m=>m===0?s?"":m.toLocaleString("en-US"):m>0?`${t?"+":""}${Math.floor(m).toLocaleString("en-US")}`:Math.floor(m).toLocaleString("en-US"),[s,t]),h=E.useMemo(()=>d(l),[d,l]),p=E.useMemo(()=>i>0?`${e??""} ${r??""}`:i<0?`${e??""} ${n??""}`:e,[e,n,r,i]);return E.useEffect(()=>{if(l!==i)if(o){for(let g=16;g<1e3;g+=16)setTimeout(()=>{f.current&&(f.current.innerText=Math.floor(l-(l-i)*(g/1e3)).toLocaleString("en-US"))},g);setTimeout(()=>{c(i),f.current&&(f.current.innerText=Math.floor(i).toLocaleString("en-US"))},1016)}else c(i)},[o,l,i]),E.useEffect(()=>{f.current&&(f.current.innerText=h)},[h]),u.jsx("span",{title:a,ref:f,className:p})}const MF={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function jo({className:t,children:e,...r}){const n=E.useMemo(()=>MF[e==null?void 0:e.toString()]??MF.default,[e]);return u.jsx("div",{className:`mahjong-tile ${n} ${t}`,...r})}function Qa({player:t,playerIndex:e,score:r,scoreChanges:n=[],point:i,ranking:o,isEast:s,isRiichi:a,isYellowCarded:l,isRedCarded:c,isRonDisallowed:f,waitingTiles:d,onClickWaitingTiles:h,showPointAndRanking:p,className:m,...y}){const[g,b]=E.useState(r),[v,x]=E.useState(null),S=E.useMemo(()=>jO(t.color??"#000000"),[t.color]),_=E.useMemo(()=>!!v,[v]);return E.useEffect(()=>{r!==g&&(x(n),setTimeout(()=>{b(r)},2550),setTimeout(()=>{x(null)},3e3))},[r,n,g]),u.jsxs("div",{className:"relative min-w-[5.35em] mx-auto [&_.hide-if-changing]:transition-opacity [&_.hide-if-changing]:data-[score-changing='1']:opacity-0 overflow-visible","data-score-changing":_?"1":"0",children:[u.jsxs("div",{className:"absolute top-[0.05em] bottom-[0.15em] -left-[0.1em] -right-[0.1em] rounded-[0.1em] overflow-hidden -z-50",children:[l&&u.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[yellowPenaltyAni_8s_ease-in-out_1]"}),c&&u.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[redPenaltyAni_8s_ease-in-out_1]"})]}),l&&u.jsx("div",{className:"absolute -top-[0.4em] left-0 h-[0.5em] w-[0.37em] bg-[#ffe100] rounded-[0.05em]"}),c&&u.jsx("div",{className:"absolute -top-[0.4em] left-[0.45em] h-[0.5em] w-[0.37em] bg-[#ff1900] rounded-[0.05em]"}),u.jsxs("div",{className:"flex items-end gap-x-[0.1em]",children:[u.jsxs("div",{className:"shrink-0 w-[1.75em] h-full relative -bottom-[0.085em] -left-[0.085em]",children:[u.jsx("div",{className:"absolute w-full h-full bg-[#d1b571] overflow-hidden rounded-[0.1em]",style:{opacity:a?1:0},children:u.jsx("div",{className:"origin-bottom w-[200%] h-[100%] bg-[#d1291d] animate-[riichi_8s_ease-in-out_infinite]"})}),u.jsx("div",{className:"relative z-10 w-full aspect-[90/125] p-[0.085em]",children:u.jsxs("div",{className:"w-full h-full bg-white rounded-[0.08em] overflow-hidden",style:{background:`linear-gradient(180deg, ${t.color}, ${S})`},children:[t.teamPicUrl&&u.jsx("div",{className:"absolute inset-[0.085em] overflow-hidden",children:u.jsx("img",{className:"absolute max-w-[none] h-[2.2em] w-[2.2em] opacity-30 animate-[scrollFromRightToLeft_12s_linear_infinite]",src:t.teamPicUrl,alt:t.name})}),t.proPicUrl&&u.jsx("img",{className:"relative z-10 w-full h-full rounded-[0.08em]",src:t.proPicUrl,alt:t.name}),t.nickname&&u.jsx("div",{className:"absolute bottom-[0.085em] left-[0.085em] right-[0.085em] rounded-b-[0.08em] bg-[linear-gradient(to_top,#00000060,#00000050_70%,transparent)] text-white z-20",children:u.jsx("p",{className:"text-center text-[0.25em] font-semibold pb-[0.25em] pt-[0.5em]",children:t.nickname})})]})})]}),u.jsxs("div",{className:"flex-1 flex flex-col gap-y-[0.125em] items-start justify-end",children:[u.jsxs("div",{className:"flex gap-[0.125em] relative self-stretch",children:[u.jsx("div",{className:"absolute inset-0 flex items-end",children:u.jsxs("div",{className:"text-center bg-red-600 text-[0.3em] flex gap-x-[0.2em] px-[1em] opacity-0 transition-opacity hide-if-changing cursor-pointer",style:{opacity:f?1:0},children:[u.jsx("i",{className:"bi bi-ban"})," 和了禁止"]})}),u.jsxs("div",{className:"bg-black bg-opacity-60 rounded text-[0.5em] flex gap-x-[0.2em] p-[0.1em] pl-[0.2em] pr-[0.2em] opacity-0 transition-opacity data-[has-waiting-tiles='1']:opacity-100 hide-if-changing cursor-pointer","data-has-waiting-tiles":d&&d.length>0||h?"1":"0",onClick:h,"data-player-index":e,children:[u.jsx("div",{className:"flex-1 leading-none min-h-[1.19em] flex flex-wrap gap-[0.15em]",children:d==null?void 0:d.map(w=>u.jsx(jo,{className:"inline-block align-bottom w-[0.85em] animate-[fadeInFromLeft_1s_ease-in-out]",children:w},w))}),u.jsx("div",{className:"bg-[#FFFFFF] w-[4px]"}),u.jsxs("div",{className:"text-[#FFFFFF] text-[0.4em] leading-[1.3em] flex items-center",children:["待",u.jsx("br",{}),"牌"]})]})]}),u.jsxs("div",{className:`relative w-full text-left bg-white px-[0.1em] pb-[0.05em] pt-[0.08em] ${m}`,...y,style:{background:`linear-gradient(260deg, transparent, transparent 22px, ${S} 23px, ${t.color} 100%`,textShadow:"#00000048 2px 2px 3px, #00000048 -2px -2px 3px, #00000048 -2px 2px 3px, #00000048 2px -2px 3px, #00000048 0 0 6px"},children:[u.jsxs("div",{className:"flex flex-col justify-center gap-y-[0.075em] mt-[0.04em]",children:[u.jsx("div",{className:"text-[0.1875em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",children:t.title||"　"}),u.jsx("div",{className:"text-[0.3125em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",style:{transformOrigin:"left",transform:(t.name||"").length>=17?"scaleX(0.9)":"scaleX(1)"},children:t.name})]}),v&&u.jsx("div",{className:"absolute bottom-[2.75em] pr-[0.125em] left-0 text-[0.5625em] leading-none animate-[drop_3s_ease-in-out] font-numeric",children:v.map(w=>u.jsx("div",{children:u.jsx(Lt,{signed:!0,value:w,positiveClassName:"text-[#09eb09]",negativeClassName:"text-[#eb0000]"})}))}),u.jsxs("div",{className:"relative mt-[0.12em] mb-[0.03em]",children:[u.jsx("p",{className:"relative text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:p?0:1,bottom:p?"1em":0},children:u.jsx(Lt,{animated:!0,value:g})}),u.jsxs("p",{className:"absolute left-0 right-[0.25em] text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:p?1:0,bottom:p?0:"-1em"},children:[En(i),u.jsx("span",{className:"text-[0.8em]",children:"pt"}),u.jsx("span",{className:"absolute right-0 bottom-0 text-[0.75em]",children:Ka(o)})]})]})]})]})]}),u.jsx("div",{className:`mt-[0.2em] h-[0.075em] rounded-full ${s&&"bg-red-500"}`})]})}function ps({roundCount:t,extendedRoundCount:e,max:r=16,...n}){const i=E.useMemo(()=>Bye(t,e??0,r),[t,r,e]);return u.jsx("span",{...n,children:i})}ps.defaultProps={extendedRoundCount:0};const Mv=({player:t})=>u.jsxs("div",{className:"border-b-4 pb-1",style:{borderColor:t.color},children:[u.jsx("p",{className:"text-sm text-neutral-600",children:t.title}),u.jsx("p",{className:"font-bold",children:t.name})]});function Fv({value:t}){return u.jsx(Lt,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const Lv=({matchRound:t,playerIndex:e})=>u.jsxs("span",{children:[t.playerResults[e].isRiichi&&u.jsx("span",{className:"text-xs",children:"立"}),t.resultType===ze.Ron&&t.playerResults[e].type===vt.Lose&&u.jsx("span",{className:"text-xs",children:"統"}),t.resultType===ze.Ron&&t.playerResults[e].type===vt.Win&&u.jsx("span",{className:"text-xs",children:"和"}),t.resultType===ze.SelfDrawn&&t.playerResults[e].type===vt.Win&&u.jsx("span",{className:"text-xs",children:"摸"}),t.resultType===ze.Exhausted&&t.playerResults[e].type===vt.Win&&u.jsx("span",{className:"text-xs",children:"聽"})]});function kg({players:t,matchRounds:e,...r}){const n=E.useMemo(()=>Object.entries(e??{}),[e]);return u.jsxs("table",{...r,children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[u.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),u.jsx("th",{className:"w-1/4",children:u.jsx(Mv,{player:t[0]})}),u.jsx("th",{className:"w-1/4",children:u.jsx(Mv,{player:t[1]})}),u.jsx("th",{className:"w-1/4",children:u.jsx(Mv,{player:t[2]})}),u.jsx("th",{className:"w-1/4",children:u.jsx(Mv,{player:t[3]})})]})}),u.jsxs("tbody",{children:[n[0]&&u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center"}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:n[0][1].playerResults[0].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:n[0][1].playerResults[1].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:n[0][1].playerResults[2].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:n[0][1].playerResults[3].beforeScore})})]}),n.map(([i,o])=>o.resultType===ze.Hotfix?u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),u.jsx("td",{className:"text-center",children:o.playerResults[0].afterScore}),u.jsx("td",{className:"text-center",children:o.playerResults[1].afterScore}),u.jsx("td",{className:"text-center",children:o.playerResults[2].afterScore}),u.jsx("td",{className:"text-center",children:o.playerResults[3].afterScore})]},i):u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center whitespace-nowrap",children:u.jsx(ps,{roundCount:o.roundCount,extendedRoundCount:o.extendedRoundCount,max:8,className:"px-4"})}),u.jsxs("td",{className:"text-center",children:[u.jsx(Fv,{value:o.playerResults[0].afterScore-o.playerResults[0].beforeScore})," ",u.jsx(Lv,{matchRound:o,playerIndex:"0"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Fv,{value:o.playerResults[1].afterScore-o.playerResults[1].beforeScore})," ",u.jsx(Lv,{matchRound:o,playerIndex:"1"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Fv,{value:o.playerResults[2].afterScore-o.playerResults[2].beforeScore})," ",u.jsx(Lv,{matchRound:o,playerIndex:"2"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Fv,{value:o.playerResults[3].afterScore-o.playerResults[3].beforeScore})," ",u.jsx(Lv,{matchRound:o,playerIndex:"3"})]})]},i)),n[n.length-1]&&u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center whitespace-nowrap px-16"}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:n[n.length-1][1].playerResults[0].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:n[n.length-1][1].playerResults[1].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:n[n.length-1][1].playerResults[2].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:n[n.length-1][1].playerResults[3].afterScore})})]})]})]})}function Gye({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n,matchCurrentRoundDoras:i}=rs(t);return!e||!n?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[u.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[u.jsxs("div",{className:"shrink-0 rounded-[1rem] bg-black bg-opacity-50 p-2 flex items-stretch gap-x-4",children:[u.jsx("div",{className:"text-[2.5rem] leading-none border-[.25rem] rounded-[.75rem] pb-[0.3em] pt-[0.2em] px-4 border-current flex items-center justify-center",children:u.jsx(ps,{roundCount:n.roundCount,max:8})}),u.jsxs("div",{className:"flex flex-col justify-around",children:[u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-4"})}),u.jsx("div",{children:n.extendedRoundCount??0})]}),u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-4"})}),u.jsx("div",{children:n.cumulatedThousands??0})]})]}),u.jsx("div",{className:"flex items-center gap-x-2",children:i.map((o,s)=>u.jsx(jo,{className:"w-9 cursor-pointer","data-index":s,children:o},o))})]}),u.jsx("div",{className:"flex-1"})]}),u.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(o=>u.jsx("div",{className:"flex gap-x-2 items-center",children:u.jsx("div",{className:"flex-1 text-[2.5rem]",children:u.jsx(Qa,{player:e.players[o],score:n.playerResults[o].beforeScore,scoreChanges:n.playerResults[o].prevScoreChanges,isEast:ti(o,n.roundCount),isRiichi:n.playerResults[o].isRiichi,isYellowCarded:n.playerResults[o].isYellowCarded,isRedCarded:n.playerResults[o].isRedCarded})})}))}),u.jsx(kg,{players:e.players,matchRounds:r,className:"w-full table-auto"})]})})}function qye({han:t,fu:e,yakumanCount:r,...n}){const i=E.useMemo(()=>{if(r&&r>0)return r===1?"役滿":r===2?"兩倍役滿":r===3?"三倍役滿":r===4?"四倍役滿":`${r}倍役滿`;if(t>=11)return"三倍滿";if(t>=8)return"倍滿";if(t>=6)return"跳滿";if(t>=5)return"滿貫";if(t>=4&&typeof e<"u"&&e>=40)return"滿貫";if(t>=3&&typeof e<"u"&&e>=70)return"滿貫";if(typeof e<"u")return},[r,t,e]);return i?u.jsx("div",{...n,children:i}):u.jsxs("div",{...n,children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:t}),u.jsx("span",{children:"飜"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:e}),u.jsx("span",{children:"符"})]})]})}const Hye=({active:t,color:e="#000000",largeTeamPicUrl:r})=>u.jsxs(u.Fragment,{children:[u.jsx("img",{src:"/images/r.png",className:"w-0 h-0 opacity-0"}),u.jsx("img",{src:"/images/e.png",className:"w-0 h-0 opacity-0"}),u.jsx("img",{src:"/images/a.png",className:"w-0 h-0 opacity-0"}),u.jsx("img",{src:"/images/c.png",className:"w-0 h-0 opacity-0"}),u.jsx("img",{src:"/images/h.png",className:"w-0 h-0 opacity-0"}),u.jsx("img",{src:"/images/score-thousand.png",className:"w-0 h-0 opacity-0"}),t&&u.jsxs("div",{className:"reach-animation",children:[u.jsx("div",{className:"reach-background",style:{background:`linear-gradient(to bottom, transparent, ${e}80 40%, ${e}80 60%, transparent)`}}),u.jsx("div",{className:"reach-animation-logo",style:{backgroundImage:`url("${r}")`}}),u.jsx("div",{className:"reach-animation-bar",style:{backgroundImage:'url("/images/score-thousand.png")'}}),u.jsxs("div",{className:"reach-animation-text",children:[u.jsx("div",{className:"reach-animation-text-character c1",style:{backgroundImage:'url("/images/r.png")'}}),u.jsx("div",{className:"reach-animation-text-character c2",style:{backgroundImage:'url("/images/e.png")'}}),u.jsx("div",{className:"reach-animation-text-character c3",style:{backgroundImage:'url("/images/a.png")'}}),u.jsx("div",{className:"reach-animation-text-character c4",style:{backgroundImage:'url("/images/c.png")'}}),u.jsx("div",{className:"reach-animation-text-character c5",style:{backgroundImage:'url("/images/h.png")'}})]})]})]});function RO({params:{matchId:t}}){const{match:e,matchCurrentRound:r,matchCurrentRoundDoras:n}=rs(t),i=E.useMemo(()=>{if(!e||!r)return[];const d=HG([r.playerResults[0].afterScore,r.playerResults[1].afterScore,r.playerResults[2].afterScore,r.playerResults[3].afterScore]);return["0","1","2","3"].map((h,p)=>({...e.players[h],color:e.players[h].color,currentStatus:{...r.playerResults[h],isEast:ti(h,r.roundCount),...d[p]}}))},[e,r]),[o,s]=E.useState(null),[a,l]=E.useState(),[c,f]=E.useState({0:!1,1:!1,2:!1,3:!1});return E.useEffect(()=>{["0","1","2","3"].forEach(d=>{typeof(r==null?void 0:r.playerResults[d].isRiichi)<"u"&&r.playerResults[d].isRiichi!==c[d]&&(r.playerResults[d].isRiichi===!0&&(s(d),setTimeout(()=>{s(null)},2800)),f(h=>({...h,[d]:r.playerResults[d].isRiichi})))})},[r==null?void 0:r.playerResults,c]),E.useEffect(()=>{a!==(r==null?void 0:r.code)&&(l(r==null?void 0:r.code),f({0:!1,1:!1,2:!1,3:!1}))},[r==null?void 0:r.code,a]),!e||!r?u.jsx("div",{className:"text-current",children:"對局讀取失敗。"}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute inset-0 mx-auto py-8 overflow-hidden text-[4.8rem] transition-opacity",style:{background:"linear-gradient(transparent, transparent 73%, rgba(0, 0, 0, 0.4))",opacity:o!==null?0:1},children:[u.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[u.jsxs("div",{className:"relative text-[0.6em] p-2 pl-10 pr-[1em] flex items-center gap-x-8",style:{transition:"width 0.3s, left 1.5s, opacity 1.5s",left:e.hideHeader?"-100%":"0",opacity:e.hideHeader?"0":"1",background:"linear-gradient(280deg, transparent, transparent 0.5em, #00000080 0.5em, #00000080 100%)"},children:[u.jsxs("div",{className:"",children:[u.jsx("div",{className:"text-[0.5em]",children:e.name}),u.jsxs("div",{className:"flex gap-x-8 items-center",children:[u.jsx("div",{className:"min-w-[3.5em]",children:u.jsx(ps,{roundCount:r.roundCount,max:8})}),u.jsxs("div",{className:"flex flex-col justify-around gap-2",children:[u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-[0.25em] mt-[0.1em]"})}),u.jsx("div",{className:"text-[0.45em] leading-none",children:r.extendedRoundCount??0})]}),u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-[0.25em] mt-[0.1em]"})}),u.jsx("div",{className:"text-[0.45em] leading-none",children:r.cumulatedThousands??0})]})]})]})]}),u.jsx("div",{className:"flex items-center gap-x-2",children:n.map(d=>u.jsx(jo,{className:"w-[1.4em] animate-[fadeInFromLeft_0.5s_ease-in-out]",children:d},d))})]}),u.jsx("div",{className:"flex-1"})]}),u.jsx("div",{className:"flex items-center justify-center mt-20",children:u.jsx("div",{className:"body-hidden mx-20 text-[16px]"})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 items-end gap-x-8 text-white animate-[fadeInFromBottom_1s_ease-in-out]",style:{opacity:e.activeResultDetail||e.hidePlayers?0:1,bottom:e.activeResultDetail||e.hidePlayers?"-150px":0,transition:"opacity 0.5s, bottom 0.5s"},children:i.map(d=>u.jsxs("div",{className:"w-[5.35em]",children:[u.jsx(Qa,{player:d,score:d.currentStatus.afterScore,scoreChanges:d.currentStatus.scoreChanges,isEast:d.currentStatus.isEast,isRiichi:d.currentStatus.isRiichi&&r.resultType===ze.Unknown,waitingTiles:r.resultType===ze.Unknown?d.currentStatus.waitingTiles:[],isYellowCarded:d.currentStatus.isYellowCarded,isRedCarded:d.currentStatus.isRedCarded,isRonDisallowed:d.currentStatus.isRonDisallowed,ranking:d.currentStatus.ranking,point:d.currentStatus.point,showPointAndRanking:!!e.showPoints}),u.jsx("img",{src:d.largeTeamPicUrl,className:"w-0 h-0"})]},d.name))}),e.activeResultDetail&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 gap-x-8 text-white transition-opacity animate-[fadeInFromBottom_1s_ease-in-out]",children:[u.jsx("div",{className:"w-[5.35em]",children:u.jsx(Qa,{player:e.players[e.activeResultDetail.winnerPlayerIndex],score:r.playerResults[e.activeResultDetail.winnerPlayerIndex].afterScore})}),u.jsxs("div",{className:"col-span-3 bg-black bg-opacity-50 py-6 px-8 text-[0.5em] flex items-stretch gap-x-4",children:[u.jsx("div",{className:`flex-1 flex flex-wrap gap-x-[0.75em] ${e.activeResultDetail.yakumanCount>0?"self-center justify-center":""}`,children:e.activeResultDetail.yakus.map(({label:d})=>u.jsx("span",{children:d},d))}),u.jsx("div",{className:"shrink-0 w-px bg-neutral-200"}),u.jsx("div",{className:"shrink-0 min-w-[3em] self-center text-green-400 text-[1.4em] text-center",children:u.jsx(qye,{han:e.activeResultDetail.han,fu:e.activeResultDetail.fu,yakumanCount:e.activeResultDetail.yakumanCount})})]})]})]}),u.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 pointer-events-none",children:u.jsx(Hye,{active:o!==null,color:o&&i[o].color,largeTeamPicUrl:o&&i[o].largeTeamPicUrl})})]})}function Jn({open:t,title:e,children:r,onClose:n,hideCloseButton:i}){const o=E.useRef(null);E.useEffect(()=>{if(o!=null&&o.current&&t){o.current.showModal();const{current:a}=o;return()=>{a.close()}}},[t]);const s=E.useCallback(()=>{n==null||n()},[n]);return u.jsx("dialog",{ref:o,onClose:s,children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex mb-4",children:[u.jsx("div",{className:"flex-1 items-center font-bold text-lg",children:e}),!i&&u.jsx("div",{className:"shrink-0",children:u.jsx("button",{type:"button",className:"absolute top-4 right-4",onClick:s,children:u.jsx("i",{className:"bi bi-x"})})})]}),r]})})}const $O=()=>u.jsx("div",{className:"inline-block w-4 h-4 border-2 border-neutral-800 border-l-transparent rounded-full animate-spin"});function Kye({title:t,children:e,okButtonText:r="確認",cancelButtonText:n="取消",onClickOk:i,onClickCancel:o,...s}){const[a,l]=E.useState(!1),c=E.useCallback(()=>{i&&(l(!0),i().finally(()=>{l(!1)}))},[i]);return u.jsxs(Jn,{title:t,...s,children:[u.jsx("div",{className:"mb-4",children:e}),u.jsxs("div",{className:"flex gap-x-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Oe,{type:"button",color:"secondary",className:"w-full",onClick:o,disabled:a,children:n})}),u.jsx("div",{className:"flex-1",children:u.jsx(Oe,{type:"button",color:"danger",className:"w-full",onClick:c,disabled:a,children:a?u.jsx($O,{}):r})})]})]})}const Qye={isShowConfirmDialog:!1,setIsShowConfirmDialog:()=>{},confirmDialogOptions:{title:"警告"},setConfirmDialogOptions:()=>{}},KG=E.createContext(Qye);function Yye({children:t}){const[e,r]=E.useState(!1),[n,i]=E.useState({title:"警告"}),o=E.useMemo(()=>({isShowConfirmDialog:e,setIsShowConfirmDialog:r,confirmDialogOptions:n,setConfirmDialogOptions:i}),[n,e]),s=E.useCallback(()=>{r(!1)},[]);return u.jsxs(KG.Provider,{value:o,children:[t,u.jsx(Kye,{open:e,okButtonText:n.okButtonText,cancelButtonText:n.cancelButtonText,onClickOk:n.onClickOk,onClickCancel:n.onClickCancel,onClose:s,...n,hideCloseButton:!0,children:n.content})]})}const Xye=()=>{const t=E.useContext(KG);return{showConfirmDialog:E.useCallback(r=>{const n=async()=>(r.onClickOk??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)}),i=async()=>(r.onClickCancel??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)});t.setConfirmDialogOptions({...r,onClickOk:n,onClickCancel:i}),t.setIsShowConfirmDialog(!0)},[t])}};function QG(){var t=E.useRef(!1),e=E.useCallback(function(){return t.current},[]);return E.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e}function t1(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={loading:!1});var n=E.useRef(0),i=QG(),o=E.useState(r),s=o[0],a=o[1],l=E.useCallback(function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=++n.current;return s.loading||a(function(h){return wx(wx({},h),{loading:!0})}),t.apply(void 0,c).then(function(h){return i()&&d===n.current&&a({value:h,loading:!1}),h},function(h){return i()&&d===n.current&&a({error:h,loading:!1}),h})},e);return[s,l]}function Jye(t,e){e===void 0&&(e=[]);var r=t1(t,e,{loading:!0}),n=r[0],i=r[1];return E.useEffect(function(){i()},[i]),n}var cA=function(){};function uA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function fA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Zye=typeof window<"u",ege=function(t,e){return typeof e=="boolean"?e:!t},To=function(t){return E.useReducer(ege,t)},tge=function(t,e){return function(r,n){var i=r.getData("text/uri-list");if(i){(t.onUri||cA)(i,n);return}if(r.files&&r.files.length){(t.onFiles||cA)(Array.from(r.files),n);return}r.items&&r.items.length&&r.items[0].getAsString(function(o){e&&(t.onText||cA)(o,n)})}},rge=function(t,e){return{onDragOver:function(r){r.preventDefault()},onDragEnter:function(r){r.preventDefault(),e(!0)},onDragLeave:function(){e(!1)},onDrop:function(r){r.preventDefault(),r.persist(),e(!1),t(r.dataTransfer,r)},onPaste:function(r){r.persist(),t(r.clipboardData,r)}}},nge=function(t){t===void 0&&(t={});var e=t.onFiles,r=t.onText,n=t.onUri,i=QG(),o=E.useState(!1),s=o[0],a=o[1],l=E.useMemo(function(){return tge(t,i())},[e,r,n]),c=E.useMemo(function(){return rge(l,a)},[l,a]);return[c,{over:s}]},YG=function(t,e){var r=E.useRef(function(){});E.useEffect(function(){r.current=t}),E.useEffect(function(){if(e!==null){var n=setInterval(function(){return r.current()},e||0);return function(){return clearInterval(n)}}},[e])},FF=function(t,e){return new URLSearchParams(t).get(e)},ige=function(t){var e=window.location,r=E.useState(function(){return FF(e.search,t)}),n=r[0],i=r[1];return E.useEffect(function(){var o=function(){i(FF(e.search,t))};return uA(window,"popstate",o),uA(window,"pushstate",o),uA(window,"replacestate",o),function(){fA(window,"popstate",o),fA(window,"pushstate",o),fA(window,"replacestate",o)}},[]),n},oge=function(){return null};const Fx=Zye?ige:oge,sge=[["1m","2m","3m","4m","5m","6m","7m","8m","9m","0m"],["1p","2p","3p","4p","5p","6p","7p","8p","9p","0p"],["1s","2s","3s","4s","5s","6s","7s","8s","9s","0s"],["1z","2z","3z","4z","5z","6z","7z"]],LF={m:0,p:1,s:2,z:3},age=(t,e)=>{const[r,n]=[t[0],t[1]],[i,o]=[e[0],e[1]];return n!==o?LF[n]-LF[o]:parseInt(r,10)-parseInt(i,10)};function BF({onSubmit:t,onRemove:e,canRemove:r,hideRedTiles:n,multiple:i,defaultValue:o}){const[s,a]=E.useState([]),l=E.useCallback(d=>{var p;const h=(p=d.currentTarget)==null?void 0:p.getAttribute("data-key");h&&a(i?m=>{const y=m.indexOf(h);if(y===-1)return[...m,h].sort(age);const g=[...m];return g.splice(y,1),g}:[h])},[i]),c=E.useCallback(()=>{s&&t&&(t==null||t(s),a([]))},[t,s]),f=E.useCallback(()=>{r&&(e==null||e(),a([]))},[r,e]);return E.useEffect(()=>{a(o??[])},[o]),u.jsxs("div",{children:[u.jsx("div",{className:`mb-4 grid ${n?"grid-cols-9":"grid-cols-10"} gap-1 lg:gap-x-2 lg:gap-y-4 items-center text-center`,children:sge.map(d=>d.map(h=>(!h.startsWith("0")||!n)&&u.jsx("button",{type:"button",onClick:l,"data-key":h,className:`${s.indexOf(h)!==-1?"bg-blue-400":"bg-black bg-opacity-20"} rounded p-1 lg:p-2`,children:u.jsx(jo,{children:h})})))}),u.jsxs("div",{className:"flex gap-x-4",children:[r&&u.jsx("div",{className:"flex-1",children:u.jsx(Oe,{className:"w-full",type:"button",color:"secondary",onClick:f,children:"移除"})}),u.jsx("div",{className:"flex-1",children:u.jsx(Oe,{className:"w-full",type:"button",color:"primary",onClick:c,disabled:s.length===0,children:"確定"})})]})]})}const Bv=({teamPlayer:t})=>u.jsx(Qa,{player:pp(t),score:25e3}),lge=({matchDTO:t})=>{const e=Cz(),r=E.useCallback(async()=>{if(!confirm("確定資料都正確了嗎？要開始對局了嗎？"))return;const n={code:t._id,name:t.name,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:{startingScore:t.tournament.startingScore,isManganRoundUp:t.tournament.startingScore?"1":"0",yakuMax:t.tournament.yakuMax,yakumanMax:t.tournament.yakumanMax},players:{0:pp(t.playerEast),1:pp(t.playerSouth),2:pp(t.playerWest),3:pp(t.playerNorth)},activeResultDetail:null};await e.set(`matches/${t._id}`,n);const i=parseInt(t.tournament.startingScore),o={matchId:t._id,code:Mx(t._id,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await e.push("matchRounds",o),await e.update("obs/1",{matchId:t._id})},[t._id,t.name,t.playerEast,t.playerNorth,t.playerSouth,t.playerWest,t.tournament.startingScore,t.tournament.yakuMax,t.tournament.yakumanMax,e]);return u.jsx("div",{className:"container mx-auto max-w-screen-md py-16",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-red-500 p-4 text-white space-y-2",children:[u.jsx("div",{className:"text-center text-6xl",children:u.jsx("i",{className:"bi bi-exclamation-triangle"})}),u.jsxs("p",{className:"text-center text-xl",children:["這是開始直播前的最後機會，請檢查以下內容是否完全正確。",u.jsx("br",{}),"一旦對局開始，要修改內容就很麻煩。",u.jsx("br",{}),u.jsx("br",{}),"如果要修改，請在資料庫修改後，刷新此頁面。"]})]}),u.jsxs("h4",{className:"text-3xl",children:[u.jsx("span",{className:"text-neutral-600",children:"對局名稱:"})," ",u.jsx("span",{className:"font-bold",children:t.name})]}),u.jsxs("div",{className:"grid grid-cols-10 gap-x-2",children:[u.jsxs("div",{className:"col-span-4 col-start-4",children:[u.jsx("div",{className:"text-[48px]",children:u.jsx(Bv,{teamPlayer:t.playerWest})}),u.jsx("p",{className:"text-center text-4xl",children:"西"})]}),u.jsxs("div",{className:"col-span-4 col-start-1 flex items-center gap-x-2",children:[u.jsx("div",{className:"flex-1 text-[48px]",children:u.jsx(Bv,{teamPlayer:t.playerNorth})}),u.jsx("div",{className:"shrink-0 text-4xl",children:"北"})]}),u.jsx("div",{className:"col-span-2"}),u.jsxs("div",{className:"col-span-4 flex items-center gap-x-2",children:[u.jsx("div",{className:"shrink-0 text-4xl",children:"南"}),u.jsx("div",{className:"flex-1 text-[48px]",children:u.jsx(Bv,{teamPlayer:t.playerSouth})})]}),u.jsxs("div",{className:"col-span-4 col-start-4",children:[u.jsx("p",{className:"text-center text-4xl",children:"東"}),u.jsx("div",{className:"text-[48px]",children:u.jsx(Bv,{teamPlayer:t.playerEast})})]})]}),u.jsxs("div",{className:"text-2xl",children:[u.jsx("span",{className:"text-neutral-600",children:"聯賽:"})," ",u.jsx("span",{className:"font-bold",children:t.tournament.name})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[u.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"起始點數"}),u.jsx("p",{className:"text-4xl",children:t.tournament.startingScore})]}),u.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[u.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"切上滿貫"}),u.jsx("p",{className:"text-4xl",children:t.tournament.isManganRoundUp?"有":"沒有"})]}),u.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[u.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"翻數上限"}),u.jsx("p",{className:"text-4xl",children:Iye(t.tournament.yakuMax)})]}),u.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[u.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"役滿上限"}),u.jsx("p",{className:"text-4xl",children:Nye(t.tournament.yakumanMax)})]})]}),u.jsx("div",{className:"pt-8",children:u.jsx(Oe,{className:"w-full",size:"xlarge",variant:"contained",color:"success",onClick:r,children:"確認以上內容無誤，開始對局"})})]})})},cge=({players:t,currentRound:e,onAction:r})=>{const n=E.useCallback(i=>{const o=i.currentTarget.getAttribute("data-player-index"),s=i.currentTarget.getAttribute("data-action");r(o,s)},[r]);return u.jsx("div",{className:"space-y-2",children:["0","1","2","3"].map(i=>{var o,s;return u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"shrink-0 flex flex-col gap-1",children:[u.jsx("button",{className:"text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ffe100",width:"2rem",height:"2.5rem",top:"0rem",left:"-2.5rem",opacity:e.playerResults[i].isYellowCarded?1:.35},"data-player-index":i,"data-action":"yellow-card",onClick:n,children:"黃牌"}),u.jsx("button",{className:"text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ff1900",width:"2rem",height:"2.5rem",top:"2.7rem",left:"-2.5rem",opacity:e.playerResults[i].isRedCarded?1:.35},"data-player-index":i,"data-action":"red-card",onClick:n,children:"紅牌"}),u.jsxs("button",{className:"text-gray-900 text-xs px-1 rounded",style:{border:"1px solid #333",borderColor:e.playerResults[i].isRonDisallowed?"#f00":"#333",color:e.playerResults[i].isRonDisallowed?"#fff":"#000",background:e.playerResults[i].isRonDisallowed?"#f00":"transparent",width:"2rem",height:"2.5rem",top:"2.7rem",left:"-2.5rem",opacity:e.playerResults[i].isRonDisallowed?1:.35},"data-player-index":i,"data-action":"disallow-ron",onClick:n,children:[u.jsx("div",{className:"whitespace-nowrap",children:"和了"}),u.jsx("div",{className:"whitespace-nowrap",children:"禁止"})]})]}),u.jsx("div",{className:"flex-1",children:u.jsx("table",{className:"w-full border border-black ring-2 ring-transparent data-[east='1']:ring-red-500 bg-white","data-east":ti(i,e.roundCount)?"1":"0",children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{className:"p-1 text-white w-32 relative",style:{background:t[i].color},children:u.jsxs("div",{className:"flex gap-x-1 items-center w-32",children:[u.jsx("img",{className:"shrink-0 w-8 h-8 inline-block",src:t[i].teamPicUrl,alt:t[i].title}),u.jsx("img",{className:"shrink-0 w-[1.44rem] h-8 inline-block",src:t[i].proPicUrl,alt:t[i].name}),u.jsxs("div",{className:"flex-1 align-middle overflow-hidden",children:[u.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].title}),u.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].nickname||t[i].name})]})]})}),u.jsx("td",{className:"px-2 border-b border-black",colSpan:2,children:u.jsxs("button",{className:"py-2 text-left block","data-player-index":i,"data-action":"waitingTile",onClick:n,children:[u.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),u.jsx("div",{className:"inline-block space-x-1",children:(o=e.playerResults[i].waitingTiles)==null?void 0:o.map(a=>u.jsx(jo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:a},a))})]})}),u.jsx("td",{className:"whitespace-nowrap w-0 space-y-1 pr-1",rowSpan:2,children:u.jsxs("div",{className:"flex items-center gap-x-1",children:[u.jsxs("div",{className:"flex flex-col gap-2 self-stretch",children:[u.jsx("button",{className:"flex-1 h-16 w-16 bg-neutral-200 border rounded-full border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"riichi",onClick:n,"data-active":e.playerResults[i].isRiichi?"1":"0",disabled:e.playerResults[i].isRevealed,children:"立直"}),u.jsx("button",{className:"flex-1 px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"reveal",onClick:n,"data-active":e.playerResults[i].isRevealed?"1":"0",disabled:e.playerResults[i].isRiichi,children:"副露"})]}),u.jsxs("div",{className:"flex items-center gap-x-1 relative",children:[u.jsx("div",{className:"flex flex-col gap-1",children:u.jsx("button",{className:"px-1 ml-3 h-12 w-16 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-self",onClick:n,children:"自摸"})}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("button",{className:"px-1 mr-4 h-10 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-before",onClick:n,children:["和",t[VG(i)].nickname||"上家"]}),u.jsxs("button",{className:"px-1 ml-4 h-10 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-opposite",onClick:n,children:["和",t[zG(i)].nickname||"對家"]}),u.jsxs("button",{className:"px-1 mr-4 h-10 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-after",onClick:n,children:["和",t[WG(i)].nickname||"下家"]})]}),e.playerResults[i].isRonDisallowed&&u.jsxs("div",{className:"absolute inset-0 bg-red-500 text-white text-lg opacity-90 flex items-center justify-center",children:[u.jsx("i",{className:"bi bi-ban"})," 和了禁止"]})]})]})})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"p-1 space-x-1 text-white text-4xl",style:{background:t[i].color},children:e.playerResults[i].afterScore}),u.jsx("td",{className:"px-2",children:u.jsxs("button",{className:"py-2 text-left text-xl","data-player-index":i,"data-action":"yaku",onClick:n,children:[u.jsx("span",{className:"mr-2 text-xl",children:"役"}),u.jsx("div",{className:"inline-block space-x-1",children:(s=e.playerResults[i].detail.yakus)==null?void 0:s.map(({label:a})=>u.jsx("span",{children:a},a))})]})}),u.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4",children:u.jsxs("div",{children:[u.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[i].detail.dora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-minus",onClick:n,children:"-"}),"寶",e.playerResults[i].detail.dora,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-plus",onClick:n,children:"+"})]}),u.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[i].detail.redDora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-minus",onClick:n,children:"-"}),"赤",e.playerResults[i].detail.redDora??0,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-plus",onClick:n,children:"+"})]})]})})]})]})},i)})]})})})},uge=[["0","3","1","2"],["3","2","0","1"],["2","1","3","0"],["1","0","2","3"]],fge=({players:t,currentRound:e,onAction:r})=>{var l,c,f,d;const[n,i]=E.useState(0),o=E.useMemo(()=>uge[n],[n]),s=E.useCallback(h=>{const p=h.currentTarget.getAttribute("data-player-index"),m=h.currentTarget.getAttribute("data-action");r(p,m)},[r]),a=E.useCallback(()=>{i(h=>(h+1)%4)},[]);return u.jsxs("div",{children:[u.jsx("div",{className:"text-center mb-4",children:u.jsxs(Oe,{size:"small",onClick:a,children:["逆時針旋轉 ",u.jsx("i",{className:"bi bi-arrow-counterclockwise"})]})}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("table",{className:"w-full border border-black",children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[0]].color},children:[u.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[0]].teamPicUrl,alt:t[o[0]].title}),u.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[0]].proPicUrl,alt:t[o[0]].name}),u.jsxs("div",{className:"inline-block align-middle",children:[u.jsx("p",{children:t[o[0]].title}),u.jsx("p",{children:t[o[0]].name})]})]}),u.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[0]].color},children:e.playerResults[o[0]].afterScore})]}),u.jsx("tr",{children:u.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:u.jsxs("button",{className:"py-2 text-left block","data-player-index":o[0],"data-action":"waitingTile",onClick:s,children:[u.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),u.jsx("div",{className:"inline-block space-x-1",children:(l=e.playerResults[o[0]].waitingTiles)==null?void 0:l.map(h=>u.jsx(jo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),u.jsxs("tr",{children:[u.jsx("td",{className:"w-full px-2",children:u.jsx("span",{children:"役"})}),u.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:u.jsxs("div",{children:[u.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[0]].detail.dora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[0]].detail.dora,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),u.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[0]].detail.redDora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[0]].detail.redDora??0,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),u.jsx("tr",{children:u.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:u.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[0]].isRevealed?"1":"0",disabled:e.playerResults[o[0]].isRiichi,children:"副露"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-self",onClick:s,children:"自摸"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-before",onClick:s,children:"和上家←"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[0]].isRiichi?"1":"0",disabled:e.playerResults[o[0]].isRevealed,children:"立直"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-after",onClick:s,children:"和下家↑"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-opposite",onClick:s,children:"和對家↖"})]})})})]})}),u.jsx("table",{className:"w-full border border-black",children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[1]].color},children:[u.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[1]].teamPicUrl,alt:t[o[1]].title}),u.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[1]].proPicUrl,alt:t[o[1]].name}),u.jsxs("div",{className:"inline-block align-middle",children:[u.jsx("p",{children:t[o[1]].title}),u.jsx("p",{children:t[o[1]].name})]})]}),u.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[1]].color},children:e.playerResults[o[1]].afterScore})]}),u.jsx("tr",{children:u.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:u.jsxs("button",{className:"py-2 text-left block","data-player-index":o[1],"data-action":"waitingTile",onClick:s,children:[u.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),u.jsx("div",{className:"inline-block space-x-1",children:(c=e.playerResults[o[1]].waitingTiles)==null?void 0:c.map(h=>u.jsx(jo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),u.jsxs("tr",{children:[u.jsx("td",{className:"w-full px-2",children:u.jsx("span",{children:"役"})}),u.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:u.jsxs("div",{children:[u.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[1]].detail.dora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[1]].detail.dora,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),u.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[1]].detail.redDora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[1]].detail.redDora??0,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),u.jsx("tr",{children:u.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:u.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-after",onClick:s,children:"→和下家"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-self",onClick:s,children:"自摸"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[1]].isRevealed?"1":"0",disabled:e.playerResults[o[1]].isRiichi,children:"副露"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-opposite",onClick:s,children:"↗和對家"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-before",onClick:s,children:"↑和上家"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[1]].isRiichi?"1":"0",disabled:e.playerResults[o[1]].isRevealed,children:"立直"})]})})})]})}),u.jsx("table",{className:"w-full border border-black",children:u.jsxs("tbody",{children:[u.jsx("tr",{children:u.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:u.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[2]].isRiichi?"1":"0",disabled:e.playerResults[o[2]].isRevealed,children:"立直"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-before",onClick:s,children:"和上家↓"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-opposite",onClick:s,children:"和對家↙"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[2]].isRevealed?"1":"0",disabled:e.playerResults[o[2]].isRiichi,children:"副露"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-self",onClick:s,children:"自摸"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-after",onClick:s,children:"和下家←"})]})})}),u.jsxs("tr",{children:[u.jsx("td",{className:"w-full px-2",children:u.jsx("span",{children:"役"})}),u.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:u.jsxs("div",{children:[u.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[2]].detail.dora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[2]].detail.dora,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),u.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[2]].detail.redDora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[2]].detail.redDora??0,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),u.jsx("tr",{children:u.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:u.jsxs("button",{className:"py-2 text-left block","data-player-index":o[2],"data-action":"waitingTile",onClick:s,children:[u.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),u.jsx("div",{className:"inline-block space-x-1",children:(f=e.playerResults[o[2]].waitingTiles)==null?void 0:f.map(h=>u.jsx(jo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),u.jsxs("tr",{children:[u.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[2]].color},children:[u.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[2]].teamPicUrl,alt:t[o[2]].title}),u.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[2]].proPicUrl,alt:t[o[2]].name}),u.jsxs("div",{className:"inline-block align-middle",children:[u.jsx("p",{children:t[o[2]].title}),u.jsx("p",{children:t[o[2]].name})]})]}),u.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[2]].color},children:e.playerResults[o[2]].afterScore})]})]})}),u.jsx("table",{className:"w-full border border-black",children:u.jsxs("tbody",{children:[u.jsx("tr",{children:u.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:u.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-opposite",onClick:s,children:"↘和對家"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-after",onClick:s,children:"↓和下家"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[3]].isRiichi?"1":"0",disabled:e.playerResults[o[3]].isRevealed,children:"立直"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-before",onClick:s,children:"→和上家"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-self",onClick:s,children:"自摸"}),u.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[3]].isRevealed?"1":"0",disabled:e.playerResults[o[3]].isRiichi,children:"副露"})]})})}),u.jsxs("tr",{children:[u.jsx("td",{className:"w-full px-2",children:u.jsx("span",{children:"役"})}),u.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:u.jsxs("div",{children:[u.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[3]].detail.dora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[3]].detail.dora,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),u.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[3]].detail.redDora>0?"1":"0",children:[u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[3]].detail.redDora,u.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),u.jsx("tr",{children:u.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:u.jsxs("button",{className:"py-2 text-left block","data-player-index":o[3],"data-action":"waitingTile",onClick:s,children:[u.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),u.jsx("div",{className:"inline-block space-x-1",children:(d=e.playerResults[o[3]].waitingTiles)==null?void 0:d.map(h=>u.jsx(jo,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),u.jsxs("tr",{children:[u.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[3]].color},children:[u.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[3]].teamPicUrl,alt:t[o[3]].title}),u.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[3]].proPicUrl,alt:t[o[3]].name}),u.jsxs("div",{className:"inline-block align-middle",children:[u.jsx("p",{children:t[o[3]].title}),u.jsx("p",{children:t[o[3]].name})]})]}),u.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[3]].color},children:e.playerResults[o[3]].afterScore})]})]})})]})]})},dge=({tabs:t,onChangeValue:e,defaultValue:r})=>{const[n,i]=E.useState(r),o=E.useCallback(s=>{const a=s.currentTarget.getAttribute("data-value");i(a),e==null||e(a)},[e]);return u.jsx("div",{className:"border-b border-neutral-400",children:t.map(s=>u.jsx("button",{className:"py-2 px-4 border-b-2 border-transparent hover:bg-neutral-200 rounded-t data-[active='1']:border-teal-600 data-[active='1']:text-teal-800 data-[active='1']:bg-teal-100","data-value":s.value,"data-active":n===s.value?"1":"0",onClick:o,children:s.label},s.value))})};function XG({onChange:t,onChangeChecked:e,className:r,...n}){const i=E.useCallback(o=>{t==null||t(o),e==null||e(o.currentTarget.checked)},[t,e]);return u.jsx("input",{className:"mt-[0.3rem] mr-2 h-3.5 w-8 appearance-none rounded-[0.4375rem] bg-neutral-300 dark:bg-neutral-600 before:pointer-events-none before:absolute before:h-3.5 before:w-3.5 before:rounded-full before:bg-transparent before:content-[''] after:absolute after:z-[2] after:-mt-[0.1875rem] after:h-5 after:w-5 after:rounded-full after:border-none after:bg-neutral-100 dark:after:bg-neutral-400 after:shadow-[0_0px_3px_0_rgb(0_0_0_/_7%),_0_2px_2px_0_rgb(0_0_0_/_4%)] after:transition-[background-color_0.2s,transform_0.2s] after:content-[''] checked:bg-blue-600 dark:checked:bg-blue-600 checked:after:absolute checked:after:z-[2] checked:after:-mt-[3px] checked:after:ml-[1.0625rem] checked:after:h-5 checked:after:w-5 checked:after:rounded-full checked:after:border-none checked:after:bg-blue-600 dark:checked:after:bg-blue-600 checked:after:shadow-[0_3px_1px_-2px_rgba(0,0,0,0.2),_0_2px_2px_0_rgba(0,0,0,0.14),_0_1px_5px_0_rgba(0,0,0,0.12)] checked:after:transition-[background-color_0.2s,transform_0.2s] checked:after:content-[''] hover:cursor-pointer focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[3px_-1px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-5 focus:after:w-5 focus:after:rounded-full focus:after:content-[''] checked:focus:border-blue-600 checked:focus:bg-blue-600 checked:focus:before:ml-[1.0625rem] checked:focus:before:scale-100 checked:focus:before:shadow-[3px_-1px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s]",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:i,...n})}function Lx({han:t,fu:e,yakumanCount:r,yakumanCountMax:n=10,raw:i,isManganRoundUp:o,...s}){const a=E.useMemo(()=>{if(r&&r>0){const l=Math.min(n,r);return l===1?"役滿":l===2?"兩倍役滿":l===3?"三倍役滿":l===4?"四倍役滿":`${l}倍役滿`}return i?typeof e<"u"&&t<=4?`${t}飜${e}符`:`${t}飜`:t>=11?"三倍滿":t>=8?"倍滿":t>=6?"跳滿":t>=5||t>=4&&typeof e<"u"&&(e>=40||o&&e>=30)||t>=3&&typeof e<"u"&&(e>=70||o&&e>=60)?"滿貫":typeof e<"u"?`${t}飜${e}符`:`${t}飜`},[r,i,t,e,o,n]);return u.jsx("div",{...s,children:a})}const Uv=({options:t,value:e,onChange:r,disabled:n})=>{const[i,o]=E.useState(0),s=E.useMemo(()=>t[i],[i,t]),a=E.useCallback(()=>{const c=Math.max(0,i-1);o(c),r==null||r(t[c].value)},[i,r,t]),l=E.useCallback(()=>{const c=Math.min(t.length-1,i+1);o(c),r==null||r(t[c].value)},[i,r,t]);return E.useEffect(()=>{if(typeof e<"u"&&e!==s.value){const c=t.findIndex(f=>f.value===e);c!==-1&&o(c)}},[s.value,t,e]),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:a,disabled:n||i===0,children:u.jsx("i",{className:"bi bi-dash-circle"})})}),u.jsx("div",{className:"flex-1 text-center text-2xl",children:s.label}),u.jsx("div",{className:"shrink-0",children:u.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:l,disabled:n||i===t.length-1,children:u.jsx("i",{className:"bi bi-plus-circle"})})})]})},Lu=[{id:"riichi",label:"立直",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e["double-riichi"],group:"riichi"},{id:"double-riichi",label:"雙立直",han:2,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e.riichi,group:"riichi"},{id:"ippatsu",label:"一發",han:1,hanIfOpened:0,disableFn:({raw:t})=>!(t.riichi||t["double-riichi"])||!!t.chankan,group:"riichi"},{id:"menzenchin-tsumohou",label:"門前清自摸和",han:1,hanIfOpened:0,hidden:!0,group:"menzenchin-tsumohou"},{id:"tanyao",label:"斷么九",han:1,hanIfOpened:1,disableFn:({raw:t})=>!!t.chantaiyao||!!t["junchan-taiyao"]||!!t["yakuhai-east"]||!!t["yakuhai-south"]||!!t["yakuhai-west"]||!!t["yakuhai-north"]||!!t["yakuhai-haku"]||!!t["yakuhai-hatsu"]||!!t["yakuhai-chun"]||!!t.honroutou||!!t.honitsu||!!t.ittsu,group:"common"},{id:"pinfu",label:"平和",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.chiitoitsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"]||!!e.toitoi,group:"common"},{id:"yakuhai-east",label:"東",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!ti(e,t)&&!FG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-east",label:"雙東",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-south",label:"南",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!$G(e,t)&&!LG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-south",label:"雙南",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-west",label:"西",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!DG(e,t)&&!BG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-west",label:"雙西",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-north",label:"北",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!MG(e,t)&&!UG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-north",label:"雙北",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-haku",label:"白",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-hatsu",label:"發",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-chun",label:"中",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"shousangen",label:"小三元",han:2,hanIfOpened:2,disableFn:({raw:t})=>[t["yakuhai-haku"],t["yakuhai-hatsu"],t["yakuhai-chun"]].filter(e=>!!e).length!==2,group:"yakuhai"},{id:"haitei-raoyue",label:"海底撈月",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e["rinshan-kaihou"],hiddenIfDisabled:!0,group:"luck"},{id:"houtei-raoyui",label:"河底撈魚",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"rinshan-kaihou",label:"嶺上開花",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e.pinfu||!!e.chiitoitsu||!!e.ryanpeikou||!!e["haitei-raoyue"],hiddenIfDisabled:!0,group:"luck"},{id:"chankan",label:"搶槓",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"chiitoitsu",label:"七對子",han:2,hanIfOpened:0,overrideFu:25,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.ryanpeikou||!!e.pinfu||!!e["sanshku-doujun"]||!!e.ittsu||!!e.chantaiyao||!!e["junchan-taiyao"]||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["rinshan-kaihou"],group:"peikou"},{id:"iipeikou",label:"一盃口",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.ryanpeikou||!!e.chiitoitsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu,group:"peikou"},{id:"ryanpeikou",label:"二盃口",han:3,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.chiitoitsu||!!e["rinshan-kaihou"]||!!e["sanshku-doujun"]||!!e.ittsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"],group:"peikou"},{id:"sanshku-doujun",label:"三色同順",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.ittsu||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chinitsu||!!t.honitsu||!!t.toitoi,group:"row"},{id:"ittsu",label:"一氣通貫",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.tanyao||!!t["sanshku-doujun"]||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.toitoi,group:"row"},{id:"honitsu",label:"混一色",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.chinitsu||!!t.tanyao||!!t["junchan-taiyao"]||!!t["sanshku-doujun"]||!!t["sanshku-doukou"],group:"itsu"},{id:"chinitsu",label:"清一色",han:6,hanIfOpened:5,disableFn:({raw:t})=>!!t.honitsu||!!t.honroutou||!!t.chantaiyao||!!t["sanshku-doukou"],group:"itsu"},{id:"chantaiyao",label:"混全帶么九",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t.tanyao||!!t["junchan-taiyao"]||!!t.honroutou||!!t.chiitoitsu||!!t.chinitsu||!!t.ittsu||!!t.toitoi,group:"taiyao"},{id:"junchan-taiyao",label:"純全帶么九",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t.honroutou||!!t.chiitoitsu||!!t.ittsu||!!t.honitsu||!!t.toitoi,group:"taiyao"},{id:"honroutou",label:"混老頭",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou,group:"taiyao"},{id:"toitoi",label:"對對和",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sanshku-doukou",label:"三色同刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou||!!t.honitsu,group:"column"},{id:"sanankou",label:"三暗刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sankantsu",label:"三槓子",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"kokushi-musou",label:"國士無雙",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou-jsuan-men"],group:"kokushi-musou"},{id:"kokushi-musou-jsuan-men",label:"國士無雙十三面",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou"],group:"kokushi-musou"},{id:"daisangen",label:"大三元",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"shousuushii",label:"小四喜",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"daisuushii",label:"大四喜",han:26,hanIfOpened:26,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.shousuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"chinroutou",label:"清老頭",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"ryuuiisou",label:"綠一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tsuuiisou,group:"ryuuiisou"},{id:"tsuuiisou",label:"字一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"combo"},{id:"suuankou",label:"四暗刻",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e["suuankou-dannki"],group:"combo"},{id:"suuankou-dannki",label:"四暗刻單騎",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e.suuankou,group:"combo"},{id:"suukantsu",label:"四槓子",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tenhou||!!t.chiihou||!!t.ronhou,group:"combo"},{id:"chuuren-poutou",label:"九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["pure-chuuren-poutou"],group:"chuuren-poutou"},{id:"pure-chuuren-poutou",label:"純正九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["chuuren-poutou"],group:"chuuren-poutou"},{id:"tenhou",label:"天和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!ti(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"chiihou",label:"地和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!ti(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"ronhou",label:"人和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!ti(r,e)||n==="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"}],UF=Lu.filter(({yakumanCount:t,hidden:e})=>!t&&!e),hge=UF.map(t=>t.group).filter((t,e)=>UF.findIndex(({group:r})=>t===r)===e),VF=Lu.filter(({yakumanCount:t,hidden:e})=>typeof t<"u"&&t>0&&!e),pge=VF.map(t=>t.group).filter((t,e)=>VF.findIndex(({group:r})=>t===r)===e),WF=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12",value:"12"},{label:"13",value:"13"},{label:"14",value:"14"},{label:"15",value:"15"},{label:"16",value:"16"},{label:"17",value:"17"},{label:"18",value:"18"}],mge=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],yge=[{label:"30符",value:"30"},{label:"40符",value:"40"},{label:"50符",value:"50"},{label:"60符",value:"60"},{label:"70符",value:"70"},{label:"80符",value:"80"},{label:"90符",value:"90"},{label:"100符",value:"100"},{label:"110符",value:"110"},{label:"20符",value:"20"},{label:"25符",value:"25"}],zF=({yaku:t,active:e,isRevealed:r,disabled:n,onClick:i,hiddenIfDisabled:o})=>n&&o?u.jsx(u.Fragment,{}):u.jsx("button",{"data-id":t.id,"data-han":r?t.hanIfOpened:t.han,"data-active":e?"1":"0",disabled:n,className:"text-xl text-center px-3 border border-neutral-300 text-neutral-800 cursor-pointer hover:opacity-80 data-[han='0']:cursor-not-allowed disabled:opacity-20 disabled:hover:opacity-20 data-[active='1']:enabled:border-teal-800 data-[active='1']:enabled:text-white data-[active='1']:enabled:bg-teal-800 disabled:cursor-not-allowed",onClick:i,children:t.label},t.id),JG=({round:t,activePlayerIndex:e,targetPlayerIndex:r,onChange:n,value:i})=>{const[o,s]=E.useState({}),[a,l]=To(!1),[c,f]=To(!1),[d,h]=E.useState("0"),[p,m]=E.useState("0"),[y,g]=E.useState("0"),[b,v]=E.useState("30"),x=E.useCallback(A=>{const C=A.currentTarget.getAttribute("data-id");!C||!Lu.find(({id:P})=>P===C)||s(P=>({...P,[C]:!P[C]}))},[]),S=E.useCallback(()=>{s({}),l(!1),h("0"),m("0"),g("0"),v("30")},[l]),_=E.useMemo(()=>({activePlayerIndex:e,targetPlayerIndex:r,round:t,isRevealed:a,raw:o}),[e,a,t,r,o]),w=E.useMemo(()=>{let A=parseInt(b),C=!1;const T=[],P={...o};r==="-1"&&!a&&(P["menzenchin-tsumohou"]=!0),P["yakuhai-east"]&&FG(t)&&ti(e,t)?(P["yakuhai-east"]=!1,P["yakuhai-double-east"]=!0):P["yakuhai-south"]&&LG(t)&&$G(e,t)?(P["yakuhai-south"]=!1,P["yakuhai-double-south"]=!0):P["yakuhai-west"]&&BG(t)&&DG(e,t)?(P["yakuhai-west"]=!1,P["yakuhai-double-west"]=!0):P["yakuhai-north"]&&UG(t)&&MG(e,t)&&(P["yakuhai-north"]=!1,P["yakuhai-double-north"]=!0),P["yakuhai-haku"]&&P["yakuhai-hatsu"]&&P["yakuhai-chun"]&&(P.daisangen=!0);const I=Lu.filter(({id:N,disableFn:j})=>!!P[N]&&!(j!=null&&j(_))),k=I.filter(({yakumanCount:N})=>typeof N<"u"&&N>0);if(k.length>0)for(const N of k)N.yakumanCount&&N.yakumanCount>0&&T.push({id:N.id,label:N.label,han:0,yakumanCount:N.yakumanCount});else if(I.length>0){for(const N of I){const j=a?N.hanIfOpened:N.han;j!==0&&T.push({id:N.id,label:N.label,han:j,yakumanCount:0})}T.findIndex(({id:N})=>N==="chiitoitsu")!==-1?(C=!0,A=25):T.findIndex(({id:N})=>N==="pinfu")!==-1&&(C=!0,A=r==="-1"?20:30),d!=="0"&&T.push({id:`dora-${d}`,label:`寶牌${d}`,han:parseInt(d),yakumanCount:0}),p!=="0"&&T.push({id:`dora-${p}`,label:`赤寶牌${p}`,han:parseInt(p),yakumanCount:0}),y!=="0"&&T.push({id:`dora-${y}`,label:`裡寶牌${y}`,han:parseInt(y),yakumanCount:0})}return{han:T.reduce((N,{han:j})=>N+j,0),fu:A,yakumanCount:T.reduce((N,{yakumanCount:j})=>N+j,0),yakus:T,isFuOverrided:C,raw:o,dora:parseInt(d),redDora:parseInt(p),innerDora:parseInt(y),isRevealed:a,isRiichied:!!o.riichi}},[b,o,r,a,t,d,p,y,_]);return E.useEffect(()=>{n&&n(w)},[w,n]),E.useEffect(()=>{i&&(s(i.raw??{}),h(i.dora.toString()),m(i.redDora.toString()),g("0"),l(i.isRevealed))},[l,i]),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx(XG,{checked:a,onChangeChecked:l})," ","有副露？"]}),u.jsxs("div",{className:"space-x-4",children:[u.jsx("button",{className:"text-sm text-teal-700 underline",onClick:f,children:c?"一般役":"役滿役"}),u.jsx("button",{className:"text-sm text-teal-700 underline",onClick:S,children:"重置"})]})]}),!c&&u.jsxs("div",{children:[u.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:hge.map(A=>u.jsx("div",{className:"flex flex-wrap gap-2",children:Lu.filter(({group:C})=>C===A).map(C=>{var T;return u.jsx(zF,{yaku:C,isRevealed:a,active:o[C.id],disabled:(T=C.disableFn)==null?void 0:T.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))}),u.jsx("table",{className:"w-full mt-2",children:u.jsx("tbody",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"w-20 bg-yellow-400 px-1 border-yellow-100 border-t border-b",children:"寶牌"}),u.jsx("td",{className:"w-36 py-1 px-2 bg-yellow-200 data-[active='1']:text-red-600","data-active":d!=="0"?"1":"0",children:u.jsx(Uv,{value:d,onChange:h,options:WF})}),u.jsx("td",{className:"w-2"}),u.jsx("th",{className:"w-20 bg-red-400 px-1 border-neutral-100 border-t border-b",children:"赤寶牌"}),u.jsx("td",{className:"w-36 py-1 px-2 bg-red-200 data-[active='1']:text-red-600","data-active":p!=="0"?"1":"0",children:u.jsx(Uv,{value:p,onChange:m,options:mge})}),u.jsx("td",{className:"w-2"}),u.jsx("th",{className:"w-20 bg-blue-400 px-1 border-neutral-100 border-t border-b",children:"裡寶牌"}),u.jsx("td",{className:"w-36 py-1 px-2 bg-blue-200 data-[active='1']:text-red-600","data-active":y!=="0"?"1":"0",children:u.jsx(Uv,{value:y,onChange:g,options:WF})}),u.jsx("td",{className:"w-2"}),u.jsx("th",{className:"w-20 bg-neutral-400 px-1 border-neutral-100 border-t border-b",children:"符數"}),u.jsx("td",{className:"w-36 py-1 px-2 bg-neutral-200",children:u.jsx(Uv,{value:w.isFuOverrided?w.fu.toString():b,onChange:v,options:yge,disabled:w.isFuOverrided})})]})})})]}),c&&u.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:pge.map(A=>u.jsx("div",{className:"flex flex-wrap gap-2",children:Lu.filter(({group:C})=>C===A).map(C=>{var T;return u.jsx(zF,{yaku:C,isRevealed:a,active:o[C.id],disabled:(T=C.disableFn)==null?void 0:T.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))})]})},gge=({result:t,matchSetting:e})=>{var r;return u.jsx("div",{children:u.jsx("table",{className:"w-full mt-2 bg-teal-100",children:u.jsx("tbody",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"w-16 bg-teal-400 py-2 px-1",children:"結算"}),u.jsx("td",{className:"flex flex-wrap gap-2 p-2 align-middle",children:(r=t.yakus)==null?void 0:r.map(({label:n})=>u.jsx("span",{children:n},n))}),u.jsxs("td",{className:"w-32 bg-teal-400 text-center",children:[u.jsx(Lx,{han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",yakumanCountMax:GG(e.yakumanMax)}),u.jsx(Lx,{className:"text-xs text-neutral-600",han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",raw:!0})]})]})})})})},vge=({onSubmit:t,defaultValue:e,open:r,onClose:n,...i})=>{const[o,s]=E.useState(),a=E.useCallback(()=>{o&&t(o)},[t,o]);return E.useEffect(()=>{s(e)},[e]),u.jsxs(Jn,{open:r,onClose:n,children:[u.jsx(JG,{...i,onChange:s,value:e}),u.jsx("div",{className:"mt-4",children:u.jsx(Oe,{className:"w-full",onClick:a,children:"儲存"})})]})};function cs({className:t,onChange:e,onChangeValue:r,...n}){const i=E.useMemo(()=>`block w-full rounded-md border-0 px-1 py-[9px] text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 ${t}`,[t]),o=E.useCallback(s=>{e==null||e(s),r==null||r(s.currentTarget.value)},[e,r]);return u.jsx("select",{className:i,onChange:o,...n})}function bge({score:t,...e}){const r=E.useMemo(()=>t?t.target?t.target:t.all?`${t.all} ALL`:`${t.others},${t.east}`:"(錯誤)",[t]);return u.jsx("div",{...e,children:r})}function wn({children:t,label:e,action:r,...n}){return u.jsx("div",{...n,children:u.jsxs("label",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("p",{className:"text-sm text-gray-800 font-bold",children:e}),u.jsx("div",{children:r})]}),u.jsx("div",{children:t})]})})}function ZG({match:t,currentMatchRound:e,initialActivePlayerIndex:r="0",initialTargetPlayerIndex:n="-1",submitNode:i=u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:o}){const[s,a]=E.useState({han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}),l=E.useMemo(()=>Object.keys(t.players).map(I=>({index:I.toString(),name:`${t.players[I].name} (${t.players[I].nickname})`,position:Wc(I,e.roundCount)})),[t.players,e.roundCount]),[c,f]=E.useState(r??"0"),d=E.useMemo(()=>typeof c<"u"?l==null?void 0:l.find(({index:P})=>P===c):void 0,[c,l]),[h,p]=E.useState(n),m=E.useMemo(()=>{const P=RF(s.han,s.fu,s.yakumanCount,(d==null?void 0:d.position)===Ln.East,h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});return e.extendedRoundCount>0&&(P.win+=e.extendedRoundCount*300,P.target&&(P.target+=e.extendedRoundCount*300),P.all&&(P.all+=e.extendedRoundCount*100),P.east&&(P.east+=e.extendedRoundCount*100),P.others&&(P.others+=e.extendedRoundCount*100)),e.cumulatedThousands>0&&(P.win+=e.cumulatedThousands*1e3),P},[s.han,s.fu,s.yakumanCount,d==null?void 0:d.position,h,t.setting.isManganRoundUp,t.setting.yakumanMax,e.extendedRoundCount,e.cumulatedThousands]),y=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:P})=>P==="daisangen")!==-1,[s.isRevealed,s.yakus]),[g,b]=E.useState("-1"),v=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:P})=>P==="daisuushii")!==-1,[s.isRevealed,s.yakus]),[x,S]=E.useState("-1"),_=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:P})=>P==="suukantsu")!==-1,[s.isRevealed,s.yakus]),[w,A]=E.useState("-1"),C=E.useMemo(()=>{const P=Object.keys(e.playerResults),I={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].scoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].scoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].scoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].scoreChanges??[]}};if(c===h)return I;for(let N=0;N<P.length;N+=1){const j=P[N];j===c?(I[j].afterScore+=m.win,I[j].type=vt.Win,I[j].scoreChanges=[m.win]):m.target&&j===h?(I[j].afterScore-=m.target,I[j].type=vt.Lose,I[j].scoreChanges=[-m.target]):m.all?(I[j].afterScore-=m.all,I[j].type=vt.Lose,I[j].scoreChanges=[-m.all]):m.east&&m.others&&(ti(j,e.roundCount)?(I[j].afterScore-=m.east,I[j].type=vt.Lose,I[j].scoreChanges=[-m.east]):(I[j].afterScore-=m.others,I[j].type=vt.Lose,I[j].scoreChanges=[-m.others]))}[{bool:y,triggeredPlayerIndex:g,yakuId:"daisangen"},{bool:v,triggeredPlayerIndex:x,yakuId:"daisuushii"},{bool:_,triggeredPlayerIndex:w,yakuId:"suukantsu"}].forEach(({bool:N,triggeredPlayerIndex:j,yakuId:L})=>{var V;if(N&&j!=="-1"&&j!==c&&j!==h){const F=(V=s.yakus)==null?void 0:V.find(({id:M})=>L===M);if(F){const M=RF(1,30,F.yakumanCount,ti(c,e.roundCount),h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});if(M.target){const B=Math.round(M.target/2);I[h].afterScore+=B,I[h].scoreChanges[0]+=B,I[h].scoreChanges[0]===0&&I[h].scoreChanges.splice(0,1),I[j].afterScore-=B,typeof I[j].scoreChanges[0]>"u"?I[j].scoreChanges.push(-B):I[j].scoreChanges[0]-=B}else if(M.all)for(let B=0;B<P.length;B+=1){const z=M.all;P[B]!==c&&P[B]!==j&&(I[P[B]].afterScore+=z,I[P[B]].scoreChanges[0]+=z,I[P[B]].scoreChanges[0]===0&&I[P[B]].scoreChanges.splice(0,1),I[j].afterScore-=z,typeof I[j].scoreChanges[0]>"u"?I[j].scoreChanges.push(-z):I[j].scoreChanges[0]-=z)}else if(M.east&&M.others){for(let B=0;B<P.length;B+=1)if(P[B]!==c&&P[B]!==j){const z=ti(P[B],e.roundCount)?M.east:M.others;I[P[B]].afterScore+=z,I[P[B]].scoreChanges[0]+=z,I[P[B]].scoreChanges[0]===0&&I[P[B]].scoreChanges.splice(0,1),I[j].afterScore-=z,typeof I[j].scoreChanges[0]>"u"?I[j].scoreChanges.push(-z):I[j].scoreChanges[0]-=z}}}}},[]);let k=0;for(let N=0;N<P.length;N+=1){const j=P[N];j!==c&&I[j].isRiichi&&(I[j].afterScore-=1e3,I[j].scoreChanges.unshift(-1e3),k+=1e3)}return c&&k>0&&(I[c].afterScore+=k,I[c].scoreChanges.unshift(k)),I[c].detail=s,I},[c,m.all,m.east,m.others,m.target,m.win,e.playerResults,e.roundCount,y,v,_,t.setting.isManganRoundUp,t.setting.yakumanMax,h,s,g,x,w]),T=E.useCallback(()=>{if(!o||!s)return;const P={...e,resultType:Dye(m),playerResults:C,nextRoundCumulatedThousands:0,resultDetail:{winnerPlayerIndex:c,...s,yakus:s.yakus??[]}};o(P)},[c,m,e,o,C,s]);return E.useEffect(()=>{f(r),p(n),a(e.playerResults[r].detail)},[e.playerResults,r,n]),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex gap-x-4 items-center",children:[u.jsx("div",{className:"flex-1",children:u.jsx(cs,{value:c,onChangeValue:f,children:l.map(({index:P,name:I})=>u.jsx("option",{value:P,children:I},P))})}),u.jsx("div",{className:"text-xs text-gray-500",children:"和了"}),u.jsx("div",{className:"flex-1",children:u.jsxs(cs,{value:h,onChangeValue:p,children:[u.jsx("option",{value:"-1",children:"自摸"}),l.map(({index:P,name:I})=>u.jsx("option",{value:P,children:I},P))]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-bold",children:"役種"}),u.jsxs("div",{children:[u.jsx(JG,{round:e.roundCount,activePlayerIndex:c,targetPlayerIndex:h,onChange:a,value:e.playerResults[c].detail}),u.jsx(gge,{result:s,matchSetting:t.setting}),u.jsx("div",{className:"text-3xl font-bold text-center bg-teal-400 py-2",children:u.jsx(bge,{score:m})})]})]}),(y||v||_)&&u.jsxs("div",{className:"space-y-2 bg-yellow-200 p-4",children:[u.jsx("h5",{className:"font-bold",children:"包牌"}),u.jsxs("p",{children:["當某家打出的牌被鳴牌後，導致役滿確定時（大三元、大四喜、四槓子），便會觸發「包牌」。",u.jsx("br",{}),"- 如自摸，包牌者需支付該役種全部點數",u.jsx("br",{}),"- 如他家放銃，包牌者需支付該役種一半點數"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y&&u.jsx(wn,{label:"大三元包牌者",children:u.jsxs(cs,{value:g,onChangeValue:b,children:[u.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:P,name:I})=>u.jsx("option",{value:P,children:I},P))]})}),v&&u.jsx(wn,{label:"大四喜包牌者",children:u.jsxs(cs,{value:x,onChangeValue:S,children:[u.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:P,name:I})=>u.jsx("option",{value:P,children:I},P))]})}),_&&u.jsx(wn,{label:"四槓子包牌者",children:u.jsxs(cs,{value:w,onChangeValue:A,children:[u.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:P,name:I})=>u.jsx("option",{value:P,children:I},P))]})})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-bold",children:"分數變動"}),u.jsxs("table",{className:"data-table w-full text-lg",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"玩家"}),u.jsx("th",{children:"目前分數"}),u.jsx("th",{children:"變動"}),u.jsx("th",{children:"最新分數"})]})}),u.jsx("tbody",{children:Object.keys(t.players).map(P=>u.jsxs("tr",{children:[u.jsx("th",{className:"text-white py-1",style:{background:t.players[P].color},children:t.players[P].name}),u.jsx("td",{className:"px-2 text-center w-32",children:C[P].beforeScore}),u.jsx("td",{className:"text-center w-32",children:u.jsx(Lt,{signed:!0,value:C[P].afterScore-C[P].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),u.jsx("td",{className:"text-center w-32",children:C[P].afterScore})]},P))})]})]}),u.jsx("div",{className:"space-y-2",children:u.jsx(Oe,{onClick:T,className:"w-full",disabled:!(s!=null&&s.yakus)||s.yakus.length<=0,children:i})})]})}function eq({match:t,currentMatchRound:e,submitNode:r=u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:n}){const[i,o]=E.useState({0:!1,1:!1,2:!1,3:!1}),s=E.useCallback(c=>{var h,p;const f=(h=c.currentTarget)==null?void 0:h.checked,d=(p=c.currentTarget)==null?void 0:p.getAttribute("data-player-index");typeof f>"u"||!d||o(m=>({...m,[d]:f}))},[]),a=E.useMemo(()=>{const c=Object.keys(e.playerResults),f={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].prevScoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].prevScoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].prevScoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].prevScoreChanges??[]}};let d=0,h=0;const p=["0","1","2","3"].filter(m=>i[m]&&!e.playerResults[m].isRonDisallowed).length;p===1?(d=3e3,h=1e3):p===2?(d=1500,h=1500):p===3&&(d=1e3,h=3e3);for(let m=0;m<c.length;m+=1){const y=c[m];d&&h&&(i[y]?(f[y].type=vt.Win,e.playerResults[y].isRonDisallowed?(f[y].afterScore-=h,f[y].scoreChanges=[-h]):(f[y].afterScore+=d,f[y].scoreChanges=[d])):(f[y].type=vt.Lose,f[y].afterScore-=h,f[y].scoreChanges=[-h])),f[y].isRiichi&&(f[y].afterScore-=1e3,f[y].scoreChanges.unshift(-1e3))}return f},[e.playerResults,i]),l=E.useCallback(()=>{if(!n)return;const c={...e,resultType:ze.Exhausted,playerResults:a,nextRoundCumulatedThousands:e.cumulatedThousands+Object.values(a).filter(({isRiichi:f})=>!!f).length};n(c)},[e,n,a]);return E.useEffect(()=>{var c,f,d,h;o({0:!!e.playerResults[0].waitingTiles&&((c=e.playerResults[0].waitingTiles)==null?void 0:c.length)>0,1:!!e.playerResults[1].waitingTiles&&((f=e.playerResults[1].waitingTiles)==null?void 0:f.length)>0,2:!!e.playerResults[2].waitingTiles&&((d=e.playerResults[2].waitingTiles)==null?void 0:d.length)>0,3:!!e.playerResults[3].waitingTiles&&((h=e.playerResults[3].waitingTiles)==null?void 0:h.length)>0})},[e.playerResults]),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-bold",children:"分數變動"}),u.jsxs("table",{className:"data-table w-full text-lg",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"玩家"}),u.jsx("th",{className:"!bg-yellow-200",children:"聽牌？"}),u.jsx("th",{className:"w-32",children:"目前分數"}),u.jsx("th",{className:"w-32",children:"變動"}),u.jsx("th",{className:"w-32",children:"最新分數"})]})}),u.jsx("tbody",{children:Object.keys(t.players).map(c=>u.jsxs("tr",{children:[u.jsx("th",{className:"text-white py-1",style:{background:t.players[c].color},children:t.players[c].name}),u.jsxs("td",{className:"text-center bg-yellow-200",style:{backgroundColor:e.playerResults[c].isRonDisallowed?"#F00":""},children:[u.jsx(XG,{checked:i[c],onChange:s,"data-player-index":c}),e.playerResults[c].isRonDisallowed&&u.jsx("p",{className:"text-white text-sm font-semibold",children:"和了禁止"})]}),u.jsx("td",{className:"text-center",children:a[c].beforeScore}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{signed:!0,value:a[c].afterScore-a[c].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),u.jsx("td",{className:"text-center",children:a[c].afterScore})]},c))})]})]}),u.jsx("div",{className:"space-y-2",children:u.jsx(Oe,{onClick:l,className:"w-full",children:r})})]})}var Og=t=>t.type==="checkbox",Bu=t=>t instanceof Date,_n=t=>t==null;const tq=t=>typeof t=="object";var yr=t=>!_n(t)&&!Array.isArray(t)&&tq(t)&&!Bu(t),rq=t=>yr(t)&&t.target?Og(t.target)?t.target.checked:t.target.value:t,xge=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,nq=(t,e)=>t.has(xge(e)),_ge=t=>{const e=t.constructor&&t.constructor.prototype;return yr(e)&&e.hasOwnProperty("isPrototypeOf")},DO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jn(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(DO&&(t instanceof Blob||t instanceof FileList))&&(r||yr(t)))if(e=r?[]:{},!r&&!_ge(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=jn(t[n]));else return t;return e}var jg=t=>Array.isArray(t)?t.filter(Boolean):[],qt=t=>t===void 0,se=(t,e,r)=>{if(!e||!yr(t))return r;const n=jg(e.split(/[,[\].]+?/)).reduce((i,o)=>_n(i)?i:i[o],t);return qt(n)||n===t?qt(t[e])?r:t[e]:n},Zi=t=>typeof t=="boolean";const Bx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ro={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},os={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wge=O.createContext(null),MO=()=>O.useContext(wge);var iq=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const s=o;return e._proxyFormState[s]!==ro.all&&(e._proxyFormState[s]=!n||ro.all),r&&(r[s]=!0),t[s]}});return i},Si=t=>yr(t)&&!Object.keys(t).length,oq=(t,e,r,n)=>{r(t);const{name:i,...o}=t;return Si(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(s=>e[s]===(!n||ro.all))},tb=t=>Array.isArray(t)?t:[t],sq=(t,e,r)=>!t||!e||t===e||tb(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function FO(t){const e=O.useRef(t);e.current=t,O.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function Sge(t){const e=MO(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=O.useState(r._formState),l=O.useRef(!0),c=O.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),f=O.useRef(i);return f.current=i,FO({disabled:n,next:d=>l.current&&sq(f.current,d.name,o)&&oq(d,c.current,r._updateFormState)&&a({...r._formState,...d}),subject:r._subjects.state}),O.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),iq(s,r,c.current,!1)}var Ro=t=>typeof t=="string",aq=(t,e,r,n,i)=>Ro(t)?(n&&e.watch.add(t),se(r,t,i)):Array.isArray(t)?t.map(o=>(n&&e.watch.add(o),se(r,o))):(n&&(e.watchAll=!0),r);function Ya(t){const e=MO(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=O.useRef(n);a.current=n,FO({disabled:o,subject:r._subjects.values,next:f=>{sq(a.current,f.name,s)&&c(jn(aq(a.current,r._names,f.values||r._formValues,!1,i)))}});const[l,c]=O.useState(r._getWatch(n,i));return O.useEffect(()=>r._removeUnmounted()),l}var LO=t=>/^\w*$/.test(t),lq=t=>jg(t.replace(/["|']|\]/g,"").split(/\.|\[/)),wt=(t,e,r)=>{let n=-1;const i=LO(e)?[e]:lq(e),o=i.length,s=o-1;for(;++n<o;){const a=i[n];let l=r;if(n!==s){const c=t[a];l=yr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}t[a]=l,t=t[a]}return t};function Ege(t){const e=MO(),{name:r,disabled:n,control:i=e.control,shouldUnregister:o}=t,s=nq(i._names.array,r),a=Ya({control:i,name:r,defaultValue:se(i._formValues,r,se(i._defaultValues,r,t.defaultValue)),exact:!0}),l=Sge({control:i,name:r}),c=O.useRef(i.register(r,{...t.rules,value:a,...Zi(t.disabled)?{disabled:t.disabled}:{}}));return O.useEffect(()=>{const f=i._options.shouldUnregister||o,d=(h,p)=>{const m=se(i._fields,h);m&&(m._f.mount=p)};if(d(r,!0),f){const h=jn(se(i._options.defaultValues,r));wt(i._defaultValues,r,h),qt(se(i._formValues,r))&&wt(i._formValues,r,h)}return()=>{(s?f&&!i._state.action:f)?i.unregister(r):d(r,!1)}},[r,i,s,o]),O.useEffect(()=>{se(i._fields,r)&&i._updateDisabledField({disabled:n,fields:i._fields,name:r,value:se(i._fields,r)._f.value})},[n,r,i]),{field:{name:r,value:a,...Zi(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:O.useCallback(f=>c.current.onChange({target:{value:rq(f),name:r},type:Bx.CHANGE}),[r]),onBlur:O.useCallback(()=>c.current.onBlur({target:{value:se(i._formValues,r),name:r},type:Bx.BLUR}),[r,i]),ref:f=>{const d=se(i._fields,r);d&&f&&(d._f.ref={focus:()=>f.focus(),select:()=>f.select(),setCustomValidity:h=>f.setCustomValidity(h),reportValidity:()=>f.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!se(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!se(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!se(l.touchedFields,r)},error:{enumerable:!0,get:()=>se(l.errors,r)}})}}const Mn=t=>t.render(Ege(t));var Age=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},GF=t=>({isOnSubmit:!t||t===ro.onSubmit,isOnBlur:t===ro.onBlur,isOnChange:t===ro.onChange,isOnAll:t===ro.all,isOnTouch:t===ro.onTouched}),qF=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Wp=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const o=se(t,i);if(o){const{_f:s,...a}=o;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],i)&&!n)break;if(s.ref&&e(s.ref,s.name)&&!n)break;Wp(a,e)}else yr(a)&&Wp(a,e)}}};var Cge=(t,e,r)=>{const n=jg(se(t,r));return wt(n,"root",e[r]),wt(t,r,n),t},BO=t=>t.type==="file",xa=t=>typeof t=="function",Ux=t=>{if(!DO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},rb=t=>Ro(t),UO=t=>t.type==="radio",Vx=t=>t instanceof RegExp;const HF={value:!1,isValid:!1},KF={value:!0,isValid:!0};var cq=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!qt(t[0].attributes.value)?qt(t[0].value)||t[0].value===""?KF:{value:t[0].value,isValid:!0}:KF:HF}return HF};const QF={isValid:!1,value:null};var uq=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,QF):QF;function YF(t,e,r="validate"){if(rb(t)||Array.isArray(t)&&t.every(rb)||Zi(t)&&!t)return{type:r,message:rb(t)?t:"",ref:e}}var su=t=>yr(t)&&!Vx(t)?t:{value:t,message:""},XF=async(t,e,r,n,i)=>{const{ref:o,refs:s,required:a,maxLength:l,minLength:c,min:f,max:d,pattern:h,validate:p,name:m,valueAsNumber:y,mount:g,disabled:b}=t._f,v=se(e,m);if(!g||b)return{};const x=s?s[0]:o,S=k=>{n&&x.reportValidity&&(x.setCustomValidity(Zi(k)?"":k||""),x.reportValidity())},_={},w=UO(o),A=Og(o),C=w||A,T=(y||BO(o))&&qt(o.value)&&qt(v)||Ux(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,P=Age.bind(null,m,r,_),I=(k,N,j,L=os.maxLength,V=os.minLength)=>{const F=k?N:j;_[m]={type:k?L:V,message:F,ref:o,...P(k?L:V,F)}};if(i?!Array.isArray(v)||!v.length:a&&(!C&&(T||_n(v))||Zi(v)&&!v||A&&!cq(s).isValid||w&&!uq(s).isValid)){const{value:k,message:N}=rb(a)?{value:!!a,message:a}:su(a);if(k&&(_[m]={type:os.required,message:N,ref:x,...P(os.required,N)},!r))return S(N),_}if(!T&&(!_n(f)||!_n(d))){let k,N;const j=su(d),L=su(f);if(!_n(v)&&!isNaN(v)){const V=o.valueAsNumber||v&&+v;_n(j.value)||(k=V>j.value),_n(L.value)||(N=V<L.value)}else{const V=o.valueAsDate||new Date(v),F=z=>new Date(new Date().toDateString()+" "+z),M=o.type=="time",B=o.type=="week";Ro(j.value)&&v&&(k=M?F(v)>F(j.value):B?v>j.value:V>new Date(j.value)),Ro(L.value)&&v&&(N=M?F(v)<F(L.value):B?v<L.value:V<new Date(L.value))}if((k||N)&&(I(!!k,j.message,L.message,os.max,os.min),!r))return S(_[m].message),_}if((l||c)&&!T&&(Ro(v)||i&&Array.isArray(v))){const k=su(l),N=su(c),j=!_n(k.value)&&v.length>+k.value,L=!_n(N.value)&&v.length<+N.value;if((j||L)&&(I(j,k.message,N.message),!r))return S(_[m].message),_}if(h&&!T&&Ro(v)){const{value:k,message:N}=su(h);if(Vx(k)&&!v.match(k)&&(_[m]={type:os.pattern,message:N,ref:o,...P(os.pattern,N)},!r))return S(N),_}if(p){if(xa(p)){const k=await p(v,e),N=YF(k,x);if(N&&(_[m]={...N,...P(os.validate,N.message)},!r))return S(N.message),_}else if(yr(p)){let k={};for(const N in p){if(!Si(k)&&!r)break;const j=YF(await p[N](v,e),x,N);j&&(k={...j,...P(N,j.message)},S(j.message),r&&(_[m]=k))}if(!Si(k)&&(_[m]={ref:x,...k},!r))return _}}return S(!0),_};function Pge(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=qt(t)?n++:t[e[n++]];return t}function Tge(t){for(const e in t)if(t.hasOwnProperty(e)&&!qt(t[e]))return!1;return!0}function Lr(t,e){const r=Array.isArray(e)?e:LO(e)?[e]:lq(e),n=r.length===1?t:Pge(t,r),i=r.length-1,o=r[i];return n&&delete n[o],i!==0&&(yr(n)&&Si(n)||Array.isArray(n)&&Tge(n))&&Lr(t,r.slice(0,-1)),t}var dA=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}},Wx=t=>_n(t)||!tq(t);function Ll(t,e){if(Wx(t)||Wx(e))return t===e;if(Bu(t)&&Bu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const s=e[i];if(Bu(o)&&Bu(s)||yr(o)&&yr(s)||Array.isArray(o)&&Array.isArray(s)?!Ll(o,s):o!==s)return!1}}return!0}var fq=t=>t.type==="select-multiple",Ige=t=>UO(t)||Og(t),hA=t=>Ux(t)&&t.isConnected,dq=t=>{for(const e in t)if(xa(t[e]))return!0;return!1};function zx(t,e={}){const r=Array.isArray(t);if(yr(t)||r)for(const n in t)Array.isArray(t[n])||yr(t[n])&&!dq(t[n])?(e[n]=Array.isArray(t[n])?[]:{},zx(t[n],e[n])):_n(t[n])||(e[n]=!0);return e}function hq(t,e,r){const n=Array.isArray(t);if(yr(t)||n)for(const i in t)Array.isArray(t[i])||yr(t[i])&&!dq(t[i])?qt(e)||Wx(r[i])?r[i]=Array.isArray(t[i])?zx(t[i],[]):{...zx(t[i])}:hq(t[i],_n(e)?{}:e[i],r[i]):r[i]=!Ll(t[i],e[i]);return r}var pA=(t,e)=>hq(t,e,zx(e)),pq=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>qt(t)?t:e?t===""?NaN:t&&+t:r&&Ro(t)?new Date(t):n?n(t):t;function mA(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return BO(e)?e.files:UO(e)?uq(t.refs).value:fq(e)?[...e.selectedOptions].map(({value:r})=>r):Og(e)?cq(t.refs).value:pq(qt(e.value)?t.ref.value:e.value,t)}var Nge=(t,e,r,n)=>{const i={};for(const o of t){const s=se(e,o);s&&wt(i,o,s._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Dh=t=>qt(t)?t:Vx(t)?t.source:yr(t)?Vx(t.value)?t.value.source:t.value:t,kge=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function JF(t,e,r){const n=se(t,r);if(n||LO(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),s=se(e,o),a=se(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var Oge=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,jge=(t,e)=>!jg(se(t,e)).length&&Lr(t,e);const Rge={mode:ro.onSubmit,reValidateMode:ro.onChange,shouldFocusError:!0};function $ge(t={},e){let r={...Rge,...t},n={submitCount:0,isDirty:!1,isLoading:xa(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},o=yr(r.defaultValues)||yr(r.values)?jn(r.defaultValues||r.values)||{}:{},s=r.shouldUnregister?{}:jn(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,f=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:dA(),array:dA(),state:dA()},p=GF(r.mode),m=GF(r.reValidateMode),y=r.criteriaMode===ro.all,g=R=>U=>{clearTimeout(f),f=setTimeout(R,U)},b=async R=>{if(d.isValid||R){const U=r.resolver?Si((await T()).errors):await I(i,!0);U!==n.isValid&&h.state.next({isValid:U})}},v=R=>d.isValidating&&h.state.next({isValidating:R}),x=(R,U=[],W,oe,Q=!0,Y=!0)=>{if(oe&&W){if(a.action=!0,Y&&Array.isArray(se(i,R))){const ye=W(se(i,R),oe.argA,oe.argB);Q&&wt(i,R,ye)}if(Y&&Array.isArray(se(n.errors,R))){const ye=W(se(n.errors,R),oe.argA,oe.argB);Q&&wt(n.errors,R,ye),jge(n.errors,R)}if(d.touchedFields&&Y&&Array.isArray(se(n.touchedFields,R))){const ye=W(se(n.touchedFields,R),oe.argA,oe.argB);Q&&wt(n.touchedFields,R,ye)}d.dirtyFields&&(n.dirtyFields=pA(o,s)),h.state.next({name:R,isDirty:N(R,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else wt(s,R,U)},S=(R,U)=>{wt(n.errors,R,U),h.state.next({errors:n.errors})},_=R=>{n.errors=R,h.state.next({errors:n.errors,isValid:!1})},w=(R,U,W,oe)=>{const Q=se(i,R);if(Q){const Y=se(s,R,qt(W)?se(o,R):W);qt(Y)||oe&&oe.defaultChecked||U?wt(s,R,U?Y:mA(Q._f)):V(R,Y),a.mount&&b()}},A=(R,U,W,oe,Q)=>{let Y=!1,ye=!1;const at={name:R},Zt=!!(se(i,R)&&se(i,R)._f.disabled);if(!W||oe){d.isDirty&&(ye=n.isDirty,n.isDirty=at.isDirty=N(),Y=ye!==at.isDirty);const hi=Zt||Ll(se(o,R),U);ye=!!(!Zt&&se(n.dirtyFields,R)),hi||Zt?Lr(n.dirtyFields,R):wt(n.dirtyFields,R,!0),at.dirtyFields=n.dirtyFields,Y=Y||d.dirtyFields&&ye!==!hi}if(W){const hi=se(n.touchedFields,R);hi||(wt(n.touchedFields,R,W),at.touchedFields=n.touchedFields,Y=Y||d.touchedFields&&hi!==W)}return Y&&Q&&h.state.next(at),Y?at:{}},C=(R,U,W,oe)=>{const Q=se(n.errors,R),Y=d.isValid&&Zi(U)&&n.isValid!==U;if(t.delayError&&W?(c=g(()=>S(R,W)),c(t.delayError)):(clearTimeout(f),c=null,W?wt(n.errors,R,W):Lr(n.errors,R)),(W?!Ll(Q,W):Q)||!Si(oe)||Y){const ye={...oe,...Y&&Zi(U)?{isValid:U}:{},errors:n.errors,name:R};n={...n,...ye},h.state.next(ye)}v(!1)},T=async R=>r.resolver(s,r.context,Nge(R||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation)),P=async R=>{const{errors:U}=await T(R);if(R)for(const W of R){const oe=se(U,W);oe?wt(n.errors,W,oe):Lr(n.errors,W)}else n.errors=U;return U},I=async(R,U,W={valid:!0})=>{for(const oe in R){const Q=R[oe];if(Q){const{_f:Y,...ye}=Q;if(Y){const at=l.array.has(Y.name),Zt=await XF(Q,s,y,r.shouldUseNativeValidation&&!U,at);if(Zt[Y.name]&&(W.valid=!1,U))break;!U&&(se(Zt,Y.name)?at?Cge(n.errors,Zt,Y.name):wt(n.errors,Y.name,Zt[Y.name]):Lr(n.errors,Y.name))}ye&&await I(ye,U,W)}}return W.valid},k=()=>{for(const R of l.unMount){const U=se(i,R);U&&(U._f.refs?U._f.refs.every(W=>!hA(W)):!hA(U._f.ref))&&ut(R)}l.unMount=new Set},N=(R,U)=>(R&&U&&wt(s,R,U),!Ll(te(),o)),j=(R,U,W)=>aq(R,l,{...a.mount?s:qt(U)?o:Ro(R)?{[R]:U}:U},W,U),L=R=>jg(se(a.mount?s:o,R,t.shouldUnregister?se(o,R,[]):[])),V=(R,U,W={})=>{const oe=se(i,R);let Q=U;if(oe){const Y=oe._f;Y&&(!Y.disabled&&wt(s,R,pq(U,Y)),Q=Ux(Y.ref)&&_n(U)?"":U,fq(Y.ref)?[...Y.ref.options].forEach(ye=>ye.selected=Q.includes(ye.value)):Y.refs?Og(Y.ref)?Y.refs.length>1?Y.refs.forEach(ye=>(!ye.defaultChecked||!ye.disabled)&&(ye.checked=Array.isArray(Q)?!!Q.find(at=>at===ye.value):Q===ye.value)):Y.refs[0]&&(Y.refs[0].checked=!!Q):Y.refs.forEach(ye=>ye.checked=ye.value===Q):BO(Y.ref)?Y.ref.value="":(Y.ref.value=Q,Y.ref.type||h.values.next({name:R,values:{...s}})))}(W.shouldDirty||W.shouldTouch)&&A(R,Q,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&ae(R)},F=(R,U,W)=>{for(const oe in U){const Q=U[oe],Y=`${R}.${oe}`,ye=se(i,Y);(l.array.has(R)||!Wx(Q)||ye&&!ye._f)&&!Bu(Q)?F(Y,Q,W):V(Y,Q,W)}},M=(R,U,W={})=>{const oe=se(i,R),Q=l.array.has(R),Y=jn(U);wt(s,R,Y),Q?(h.array.next({name:R,values:{...s}}),(d.isDirty||d.dirtyFields)&&W.shouldDirty&&h.state.next({name:R,dirtyFields:pA(o,s),isDirty:N(R,Y)})):oe&&!oe._f&&!_n(Y)?F(R,Y,W):V(R,Y,W),qF(R,l)&&h.state.next({...n}),h.values.next({name:R,values:{...s}}),!a.mount&&e()},B=async R=>{const U=R.target;let W=U.name,oe=!0;const Q=se(i,W),Y=()=>U.type?mA(Q._f):rq(R),ye=at=>{oe=Number.isNaN(at)||at===se(s,W,at)};if(Q){let at,Zt;const hi=Y(),ir=R.type===Bx.BLUR||R.type===Bx.FOCUS_OUT,yh=!kge(Q._f)&&!r.resolver&&!se(n.errors,W)&&!Q._f.deps||Oge(ir,se(n.touchedFields,W),n.isSubmitted,m,p),gh=qF(W,l,ir);wt(s,W,hi),ir?(Q._f.onBlur&&Q._f.onBlur(R),c&&c(0)):Q._f.onChange&&Q._f.onChange(R);const vh=A(W,hi,ir,!1),DS=!Si(vh)||gh;if(!ir&&h.values.next({name:W,type:R.type,values:{...s}}),yh)return d.isValid&&b(),DS&&h.state.next({name:W,...gh?{}:vh});if(!ir&&gh&&h.state.next({...n}),v(!0),r.resolver){const{errors:bh}=await T([W]);if(ye(hi),oe){const MS=JF(n.errors,i,W),uv=JF(bh,i,MS.name||W);at=uv.error,W=uv.name,Zt=Si(bh)}}else at=(await XF(Q,s,y,r.shouldUseNativeValidation))[W],ye(hi),oe&&(at?Zt=!1:d.isValid&&(Zt=await I(i,!0)));oe&&(Q._f.deps&&ae(Q._f.deps),C(W,Zt,at,vh))}},z=(R,U)=>{if(se(n.errors,U)&&R.focus)return R.focus(),1},ae=async(R,U={})=>{let W,oe;const Q=tb(R);if(v(!0),r.resolver){const Y=await P(qt(R)?R:Q);W=Si(Y),oe=R?!Q.some(ye=>se(Y,ye)):W}else R?(oe=(await Promise.all(Q.map(async Y=>{const ye=se(i,Y);return await I(ye&&ye._f?{[Y]:ye}:ye)}))).every(Boolean),!(!oe&&!n.isValid)&&b()):oe=W=await I(i);return h.state.next({...!Ro(R)||d.isValid&&W!==n.isValid?{}:{name:R},...r.resolver||!R?{isValid:W}:{},errors:n.errors,isValidating:!1}),U.shouldFocus&&!oe&&Wp(i,z,R?Q:l.mount),oe},te=R=>{const U={...o,...a.mount?s:{}};return qt(R)?U:Ro(R)?se(U,R):R.map(W=>se(U,W))},ge=(R,U)=>({invalid:!!se((U||n).errors,R),isDirty:!!se((U||n).dirtyFields,R),isTouched:!!se((U||n).touchedFields,R),error:se((U||n).errors,R)}),Le=R=>{R&&tb(R).forEach(U=>Lr(n.errors,U)),h.state.next({errors:R?n.errors:{}})},Qe=(R,U,W)=>{const oe=(se(i,R,{_f:{}})._f||{}).ref;wt(n.errors,R,{...U,ref:oe}),h.state.next({name:R,errors:n.errors,isValid:!1}),W&&W.shouldFocus&&oe&&oe.focus&&oe.focus()},fe=(R,U)=>xa(R)?h.values.subscribe({next:W=>R(j(void 0,U),W)}):j(R,U,!0),ut=(R,U={})=>{for(const W of R?tb(R):l.mount)l.mount.delete(W),l.array.delete(W),U.keepValue||(Lr(i,W),Lr(s,W)),!U.keepError&&Lr(n.errors,W),!U.keepDirty&&Lr(n.dirtyFields,W),!U.keepTouched&&Lr(n.touchedFields,W),!r.shouldUnregister&&!U.keepDefaultValue&&Lr(o,W);h.values.next({values:{...s}}),h.state.next({...n,...U.keepDirty?{isDirty:N()}:{}}),!U.keepIsValid&&b()},nt=({disabled:R,name:U,field:W,fields:oe,value:Q})=>{if(Zi(R)){const Y=R?void 0:qt(Q)?mA(W?W._f:se(oe,U)._f):Q;wt(s,U,Y),A(U,Y,!1,!1,!0)}},Z=(R,U={})=>{let W=se(i,R);const oe=Zi(U.disabled);return wt(i,R,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:R}},name:R,mount:!0,...U}}),l.mount.add(R),W?nt({field:W,disabled:U.disabled,name:R,value:U.value}):w(R,!0,U.value),{...oe?{disabled:U.disabled}:{},...r.progressive?{required:!!U.required,min:Dh(U.min),max:Dh(U.max),minLength:Dh(U.minLength),maxLength:Dh(U.maxLength),pattern:Dh(U.pattern)}:{},name:R,onChange:B,onBlur:B,ref:Q=>{if(Q){Z(R,U),W=se(i,R);const Y=qt(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,ye=Ige(Y),at=W._f.refs||[];if(ye?at.find(Zt=>Zt===Y):Y===W._f.ref)return;wt(i,R,{_f:{...W._f,...ye?{refs:[...at.filter(hA),Y,...Array.isArray(se(o,R))?[{}]:[]],ref:{type:Y.type,name:R}}:{ref:Y}}}),w(R,!1,void 0,Y)}else W=se(i,R,{}),W._f&&(W._f.mount=!1),(r.shouldUnregister||U.shouldUnregister)&&!(nq(l.array,R)&&a.action)&&l.unMount.add(R)}}},_e=()=>r.shouldFocusError&&Wp(i,z,l.mount),Ae=R=>{Zi(R)&&(h.state.next({disabled:R}),Wp(i,(U,W)=>{let oe=R;const Q=se(i,W);Q&&Zi(Q._f.disabled)&&(oe||(oe=Q._f.disabled)),U.disabled=oe},0,!1))},q=(R,U)=>async W=>{W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let oe=jn(s);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:Q,values:Y}=await T();n.errors=Q,oe=Y}else await I(i);Lr(n.errors,"root"),Si(n.errors)?(h.state.next({errors:{}}),await R(oe,W)):(U&&await U({...n.errors},W),_e(),setTimeout(_e)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Si(n.errors),submitCount:n.submitCount+1,errors:n.errors})},it=(R,U={})=>{se(i,R)&&(qt(U.defaultValue)?M(R,jn(se(o,R))):(M(R,U.defaultValue),wt(o,R,jn(U.defaultValue))),U.keepTouched||Lr(n.touchedFields,R),U.keepDirty||(Lr(n.dirtyFields,R),n.isDirty=U.defaultValue?N(R,jn(se(o,R))):N()),U.keepError||(Lr(n.errors,R),d.isValid&&b()),h.state.next({...n}))},je=(R,U={})=>{const W=R?jn(R):o,oe=jn(W),Q=R&&!Si(R)?oe:o;if(U.keepDefaultValues||(o=W),!U.keepValues){if(U.keepDirtyValues)for(const Y of l.mount)se(n.dirtyFields,Y)?wt(Q,Y,se(s,Y)):M(Y,se(Q,Y));else{if(DO&&qt(R))for(const Y of l.mount){const ye=se(i,Y);if(ye&&ye._f){const at=Array.isArray(ye._f.refs)?ye._f.refs[0]:ye._f.ref;if(Ux(at)){const Zt=at.closest("form");if(Zt){Zt.reset();break}}}}i={}}s=t.shouldUnregister?U.keepDefaultValues?jn(o):{}:jn(Q),h.array.next({values:{...Q}}),h.values.next({values:{...Q}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!U.keepIsValid,a.watch=!!t.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Ll(R,o)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:U.keepDirtyValues?n.dirtyFields:U.keepDefaultValues&&R?pA(o,R):{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},xt=(R,U)=>je(xa(R)?R(s):R,U);return{control:{register:Z,unregister:ut,getFieldState:ge,handleSubmit:q,setError:Qe,_executeSchema:T,_getWatch:j,_getDirty:N,_updateValid:b,_removeUnmounted:k,_updateFieldArray:x,_updateDisabledField:nt,_getFieldArray:L,_reset:je,_resetDefaultValues:()=>xa(r.defaultValues)&&r.defaultValues().then(R=>{xt(R,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:R=>{n={...n,...R}},_disableForm:Ae,_subjects:h,_proxyFormState:d,_setErrors:_,get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state(R){a=R},get _defaultValues(){return o},get _names(){return l},set _names(R){l=R},get _formState(){return n},set _formState(R){n=R},get _options(){return r},set _options(R){r={...r,...R}}},trigger:ae,register:Z,handleSubmit:q,watch:fe,setValue:M,getValues:te,reset:xt,resetField:it,clearErrors:Le,unregister:ut,setError:Qe,setFocus:(R,U={})=>{const W=se(i,R),oe=W&&W._f;if(oe){const Q=oe.refs?oe.refs[0]:oe.ref;Q.focus&&(Q.focus(),U.shouldSelect&&Q.select())}},getFieldState:ge}}function Kd(t={}){const e=O.useRef(),r=O.useRef(),[n,i]=O.useState({isDirty:!1,isValidating:!1,isLoading:xa(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:xa(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...$ge(t,()=>i(s=>({...s}))),formState:n});const o=e.current.control;return o._options=t,FO({subject:o._subjects.state,next:s=>{oq(s,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),O.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),O.useEffect(()=>{if(o._proxyFormState.isDirty){const s=o._getDirty();s!==n.isDirty&&o._subjects.state.next({isDirty:s})}},[o,n.isDirty]),O.useEffect(()=>{t.values&&!Ll(t.values,r.current)?(o._reset(t.values,o._options.resetOptions),r.current=t.values,i(s=>({...s}))):o._resetDefaultValues()},[t.values,o]),O.useEffect(()=>{t.errors&&o._setErrors(t.errors)},[t.errors,o]),O.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=iq(n,o),e.current}function mq({player:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return u.jsxs("div",{className:"relative flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{backgroundColor:t.color??"#115e59"},...n,children:[t.teamPicUrl&&u.jsx("div",{className:"absolute inset-0 opacity-10 bg-center bg-no-repeat bg-cover",style:{backgroundImage:`url(${t.teamPicUrl})`}}),u.jsx("div",{className:"relative z-10 shrink-0",children:u.jsx("div",{className:"w-14 h-14 bg-center bg-contain bg-no-repeat rounded",style:{backgroundImage:`url(${t.proPicUrl||"/images/portrait-placeholder.jpeg"})`}})}),u.jsxs("div",{className:"flex-1 relative z-10 ",children:[u.jsx("div",{children:t.title??"(無頭銜)"}),u.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})]}),e&&u.jsx("div",{className:"shrink-0",children:u.jsx(Oe,{variant:"icon",color:"inverted",type:"button",onClick:i,children:u.jsx("i",{className:"bi bi-pencil"})})})]})}const Dge=Dz(["block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"]);function _a({className:t,...e}){const r=E.useMemo(()=>Dge({className:t}),[t]);return u.jsx("input",{className:r,...e})}function Mge({match:t,currentMatchRound:e,onSubmit:r}){const{reset:n,handleSubmit:i,control:o}=Kd({defaultValues:{player_0:0,player_1:0,player_2:0,player_3:0,cumulatedThousands:0,roundCount:0,extendedRoundCount:0}}),s=E.useMemo(()=>Object.keys(t.players).map(c=>({...t.players[c],index:c.toString(),position:Wc(c,e.roundCount)})),[t.players,e.roundCount]),a=E.useMemo(()=>i(l=>{if(!r)return;const c={...e,resultType:ze.Hotfix,playerResults:{0:{...e.playerResults[0],afterScore:parseInt(l.player_0,10)},1:{...e.playerResults[1],afterScore:parseInt(l.player_1,10)},2:{...e.playerResults[2],afterScore:parseInt(l.player_2,10)},3:{...e.playerResults[3],afterScore:parseInt(l.player_3,10)}},cumulatedThousands:parseInt(l.cumulatedThousands,10),roundCount:parseInt(l.roundCount,10),extendedRoundCount:parseInt(l.extendedRoundCount,10)};r(c)}),[e,i,r]);return E.useEffect(()=>{n({player_0:e.playerResults[0].beforeScore,player_1:e.playerResults[1].beforeScore,player_2:e.playerResults[2].beforeScore,player_3:e.playerResults[3].beforeScore,cumulatedThousands:e.cumulatedThousands,roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount})},[e.cumulatedThousands,e.extendedRoundCount,e.playerResults,e.roundCount,n]),u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"space-y-2",children:u.jsxs("table",{className:"data-table w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"w-1/2",children:"玩家"}),u.jsx("th",{className:"w-1/4",children:"現在分數"}),u.jsx("th",{className:"w-1/4",children:"新的分數"})]})}),u.jsxs("tbody",{children:[s.map(l=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(mq,{player:l})}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.playerResults[l.index].beforeScore}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(Mn,{name:`player_${l.index}`,control:o,rules:{required:!0},render:({field:c})=>u.jsx(_a,{className:"text-center",type:"number",...c})})})]},l.index)),u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"供托"}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.cumulatedThousands}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(Mn,{name:"cumulatedThousands",control:o,rules:{required:!0},render:({field:l})=>u.jsx(_a,{className:"text-center",type:"number",...l})})})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"局數(東1局=1, 東2局=2, ...)"}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.roundCount}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(Mn,{name:"roundCount",control:o,rules:{required:!0},render:({field:l})=>u.jsx(_a,{className:"text-center",type:"number",...l})})})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"本場數"}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.extendedRoundCount}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(Mn,{name:"extendedRoundCount",control:o,rules:{required:!0},render:({field:l})=>u.jsx(_a,{className:"text-center",type:"number",...l})})})]})]})]})}),u.jsx("div",{className:"space-y-2",children:u.jsx(Oe,{onClick:a,className:"w-full",children:"提交並更新直播畫面"})})]})}const Fge=({match:t,matchRound:e,onSubmit:r})=>{const{control:n,register:i,reset:o}=Kd(),s=Ya({name:"_playerResults",control:n}),a=Ya({name:"_resultType",control:n}),l=E.useMemo(()=>!e||!s?null:{...e,playerResults:{0:{...e.playerResults[0],isRiichi:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed",detail:{...e.playerResults[0].detail,isRiichied:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed"}},1:{...e.playerResults[1],isRiichi:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed",detail:{...e.playerResults[1].detail,isRiichied:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed"}},2:{...e.playerResults[2],isRiichi:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed",detail:{...e.playerResults[2].detail,isRiichied:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed"}},3:{...e.playerResults[3],isRiichi:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed",detail:{...e.playerResults[3].detail,isRiichied:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed"}}}},[e,s]),c=E.useMemo(()=>{var h,p;return l?{match:t,currentMatchRound:l,initialActivePlayerIndex:l.resultType===ze.Ron||l.resultType===ze.SelfDrawn?((h=Object.entries(l.playerResults).find(([,m])=>m.type===vt.Win))==null?void 0:h[0])??"0":"0",initialTargetPlayerIndex:l.resultType===ze.Ron?((p=Object.entries(l.playerResults).find(([,m])=>m.type===vt.Lose))==null?void 0:p[0])??"-1":"-1"}:null},[t,l]),f=E.useMemo(()=>l?{match:t,currentMatchRound:l}:null,[t,l]),d=E.useCallback(h=>{r==null||r(h)},[r]);return E.useEffect(()=>{e&&o({_resultType:e.resultType===ze.Ron||e.resultType===ze.SelfDrawn?"ron":"exhausted",_playerResults:{0:{status:e.playerResults[0].isRevealed?"isRevealed":e.playerResults[0].isRiichi?"isRiichied":"none"},1:{status:e.playerResults[1].isRevealed?"isRevealed":e.playerResults[1].isRiichi?"isRiichied":"none"},2:{status:e.playerResults[2].isRevealed?"isRevealed":e.playerResults[2].isRiichi?"isRiichied":"none"},3:{status:e.playerResults[3].isRevealed?"isRevealed":e.playerResults[3].isRiichi?"isRiichied":"none"}}})},[e,e==null?void 0:e.playerResults,e==null?void 0:e.resultType,o]),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold",children:"各玩家終局狀態"}),u.jsxs("table",{className:"w-full data-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{children:"立直/副露？"})]})}),u.jsx("tbody",{children:["0","1","2","3"].map(h=>u.jsxs("tr",{children:[u.jsx("td",{children:t.players[h].nickname}),u.jsx("td",{children:u.jsxs("select",{...i(`_playerResults.${h}.status`),children:[u.jsx("option",{value:"none",children:"-"}),u.jsx("option",{value:"isRiichied",children:"立直"}),u.jsx("option",{value:"isRevealed",children:"副露"})]})})]},h))})]}),u.jsx("hr",{}),u.jsxs("h2",{className:"text-xl font-bold",children:[u.jsx("span",{children:"對局結果："}),u.jsxs("select",{...i("_resultType"),children:[u.jsx("option",{value:"ron",children:"和了"}),u.jsx("option",{value:"exhausted",children:"流局"})]})]}),a==="ron"&&!!c&&u.jsx(ZG,{...c,submitNode:"提交修改",onSubmit:d}),a==="exhausted"&&!!f&&u.jsx(eq,{...f,submitNode:"提交修改",onSubmit:d})]})};function Mm(t){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mm(t)}function Lge(t,e){if(Mm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Mm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bge(t){var e=Lge(t,"string");return Mm(e)==="symbol"?e:String(e)}function Uge(t,e,r){return e=Bge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(r),!0).forEach(function(n){Uge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function On(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var tL=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yA=function(){return Math.random().toString(36).substring(7).split("").join(".")},rL={INIT:"@@redux/INIT"+yA(),REPLACE:"@@redux/REPLACE"+yA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yA()}};function Vge(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function yq(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(On(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(On(1));return r(yq)(t,e)}if(typeof t!="function")throw new Error(On(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function f(){if(l)throw new Error(On(3));return o}function d(y){if(typeof y!="function")throw new Error(On(4));if(l)throw new Error(On(5));var g=!0;return c(),a.push(y),function(){if(g){if(l)throw new Error(On(6));g=!1,c();var v=a.indexOf(y);a.splice(v,1),s=null}}}function h(y){if(!Vge(y))throw new Error(On(7));if(typeof y.type>"u")throw new Error(On(8));if(l)throw new Error(On(9));try{l=!0,o=i(o,y)}finally{l=!1}for(var g=s=a,b=0;b<g.length;b++){var v=g[b];v()}return y}function p(y){if(typeof y!="function")throw new Error(On(10));i=y,h({type:rL.REPLACE})}function m(){var y,g=d;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(On(11));function x(){v.next&&v.next(f())}x();var S=g(x);return{unsubscribe:S}}},y[tL]=function(){return this},y}return h({type:rL.INIT}),n={dispatch:h,subscribe:d,getState:f,replaceReducer:p},n[tL]=m,n}function nL(t,e){return function(){return e(t.apply(this,arguments))}}function iL(t,e){if(typeof t=="function")return nL(t,e);if(typeof t!="object"||t===null)throw new Error(On(16));var r={};for(var n in t){var i=t[n];typeof i=="function"&&(r[n]=nL(i,e))}return r}function gq(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function Wge(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error(On(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=gq.apply(void 0,a)(i.dispatch),eL(eL({},i),{},{dispatch:o})}}}var zge={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=E,Gge=uk;function qge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hge=typeof Object.is=="function"?Object.is:qge,Kge=Gge.useSyncExternalStore,Qge=r1.useRef,Yge=r1.useEffect,Xge=r1.useMemo,Jge=r1.useDebugValue;zge.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var o=Qge(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Xge(function(){function l(p){if(!c){if(c=!0,f=p,p=n(p),i!==void 0&&s.hasValue){var m=s.value;if(i(m,p))return d=m}return d=p}if(m=d,Hge(f,p))return m;var y=n(p);return i!==void 0&&i(m,y)?m:(f=p,d=y)}var c=!1,f,d,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var a=Kge(t,o[0],o[1]);return Yge(function(){s.hasValue=!0,s.value=a},[a]),Jge(a),a};function Zge(t){t()}let vq=Zge;const eve=t=>vq=t,tve=()=>vq,oL=Symbol.for("react-redux-context"),sL=typeof globalThis<"u"?globalThis:{};function rve(){var t;if(!E.createContext)return{};const e=(t=sL[oL])!=null?t:sL[oL]=new Map;let r=e.get(E.createContext);return r||(r=E.createContext(null),e.set(E.createContext,r)),r}const bq=rve(),nve=()=>{throw new Error("uSES not initialized!")};function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pf.apply(this,arguments)}function xq(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var _q={exports:{}},mt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $r=typeof Symbol=="function"&&Symbol.for,VO=$r?Symbol.for("react.element"):60103,WO=$r?Symbol.for("react.portal"):60106,n1=$r?Symbol.for("react.fragment"):60107,i1=$r?Symbol.for("react.strict_mode"):60108,o1=$r?Symbol.for("react.profiler"):60114,s1=$r?Symbol.for("react.provider"):60109,a1=$r?Symbol.for("react.context"):60110,zO=$r?Symbol.for("react.async_mode"):60111,l1=$r?Symbol.for("react.concurrent_mode"):60111,c1=$r?Symbol.for("react.forward_ref"):60112,u1=$r?Symbol.for("react.suspense"):60113,ive=$r?Symbol.for("react.suspense_list"):60120,f1=$r?Symbol.for("react.memo"):60115,d1=$r?Symbol.for("react.lazy"):60116,ove=$r?Symbol.for("react.block"):60121,sve=$r?Symbol.for("react.fundamental"):60117,ave=$r?Symbol.for("react.responder"):60118,lve=$r?Symbol.for("react.scope"):60119;function di(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case VO:switch(t=t.type,t){case zO:case l1:case n1:case o1:case i1:case u1:return t;default:switch(t=t&&t.$$typeof,t){case a1:case c1:case d1:case f1:case s1:return t;default:return e}}case WO:return e}}}function wq(t){return di(t)===l1}mt.AsyncMode=zO;mt.ConcurrentMode=l1;mt.ContextConsumer=a1;mt.ContextProvider=s1;mt.Element=VO;mt.ForwardRef=c1;mt.Fragment=n1;mt.Lazy=d1;mt.Memo=f1;mt.Portal=WO;mt.Profiler=o1;mt.StrictMode=i1;mt.Suspense=u1;mt.isAsyncMode=function(t){return wq(t)||di(t)===zO};mt.isConcurrentMode=wq;mt.isContextConsumer=function(t){return di(t)===a1};mt.isContextProvider=function(t){return di(t)===s1};mt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===VO};mt.isForwardRef=function(t){return di(t)===c1};mt.isFragment=function(t){return di(t)===n1};mt.isLazy=function(t){return di(t)===d1};mt.isMemo=function(t){return di(t)===f1};mt.isPortal=function(t){return di(t)===WO};mt.isProfiler=function(t){return di(t)===o1};mt.isStrictMode=function(t){return di(t)===i1};mt.isSuspense=function(t){return di(t)===u1};mt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===n1||t===l1||t===o1||t===i1||t===u1||t===ive||typeof t=="object"&&t!==null&&(t.$$typeof===d1||t.$$typeof===f1||t.$$typeof===s1||t.$$typeof===a1||t.$$typeof===c1||t.$$typeof===sve||t.$$typeof===ave||t.$$typeof===lve||t.$$typeof===ove)};mt.typeOf=di;_q.exports=mt;var Gx=_q.exports,GO=Gx,cve={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},uve={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fve={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Sq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qO={};qO[GO.ForwardRef]=fve;qO[GO.Memo]=Sq;function aL(t){return GO.isMemo(t)?Sq:qO[t.$$typeof]||cve}var dve=Object.defineProperty,hve=Object.getOwnPropertyNames,lL=Object.getOwnPropertySymbols,pve=Object.getOwnPropertyDescriptor,mve=Object.getPrototypeOf,cL=Object.prototype;function Eq(t,e,r){if(typeof e!="string"){if(cL){var n=mve(e);n&&n!==cL&&Eq(t,n,r)}var i=hve(e);lL&&(i=i.concat(lL(e)));for(var o=aL(t),s=aL(e),a=0;a<i.length;++a){var l=i[a];if(!uve[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var c=pve(e,l);try{dve(t,l,c)}catch{}}}}return t}var yve=Eq;const uL=ct(yve);var Aq={exports:{}},yt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO=Symbol.for("react.element"),KO=Symbol.for("react.portal"),h1=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),y1=Symbol.for("react.provider"),g1=Symbol.for("react.context"),gve=Symbol.for("react.server_context"),v1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),x1=Symbol.for("react.suspense_list"),_1=Symbol.for("react.memo"),w1=Symbol.for("react.lazy"),vve=Symbol.for("react.offscreen"),Cq;Cq=Symbol.for("react.module.reference");function Vi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case HO:switch(t=t.type,t){case h1:case m1:case p1:case b1:case x1:return t;default:switch(t=t&&t.$$typeof,t){case gve:case g1:case v1:case w1:case _1:case y1:return t;default:return e}}case KO:return e}}}yt.ContextConsumer=g1;yt.ContextProvider=y1;yt.Element=HO;yt.ForwardRef=v1;yt.Fragment=h1;yt.Lazy=w1;yt.Memo=_1;yt.Portal=KO;yt.Profiler=m1;yt.StrictMode=p1;yt.Suspense=b1;yt.SuspenseList=x1;yt.isAsyncMode=function(){return!1};yt.isConcurrentMode=function(){return!1};yt.isContextConsumer=function(t){return Vi(t)===g1};yt.isContextProvider=function(t){return Vi(t)===y1};yt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===HO};yt.isForwardRef=function(t){return Vi(t)===v1};yt.isFragment=function(t){return Vi(t)===h1};yt.isLazy=function(t){return Vi(t)===w1};yt.isMemo=function(t){return Vi(t)===_1};yt.isPortal=function(t){return Vi(t)===KO};yt.isProfiler=function(t){return Vi(t)===m1};yt.isStrictMode=function(t){return Vi(t)===p1};yt.isSuspense=function(t){return Vi(t)===b1};yt.isSuspenseList=function(t){return Vi(t)===x1};yt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===h1||t===m1||t===p1||t===b1||t===x1||t===vve||typeof t=="object"&&t!==null&&(t.$$typeof===w1||t.$$typeof===_1||t.$$typeof===y1||t.$$typeof===g1||t.$$typeof===v1||t.$$typeof===Cq||t.getModuleId!==void 0)};yt.typeOf=Vi;Aq.exports=yt;var bve=Aq.exports;const xve=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _ve(t,e,r,n,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a=!1,l,c,f,d,h;function p(v,x){return l=v,c=x,f=t(l,c),d=e(n,c),h=r(f,d,c),a=!0,h}function m(){return f=t(l,c),e.dependsOnOwnProps&&(d=e(n,c)),h=r(f,d,c),h}function y(){return t.dependsOnOwnProps&&(f=t(l,c)),e.dependsOnOwnProps&&(d=e(n,c)),h=r(f,d,c),h}function g(){const v=t(l,c),x=!s(v,f);return f=v,x&&(h=r(f,d,c)),h}function b(v,x){const S=!o(x,c),_=!i(v,l,x,c);return l=v,c=x,S&&_?m():S?y():_?g():h}return function(x,S){return a?b(x,S):p(x,S)}}function wve(t,e){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=e,o=xq(e,xve);const s=r(t,o),a=n(t,o),l=i(t,o);return _ve(s,a,l,t,o)}function Sve(t,e){const r={};for(const n in t){const i=t[n];typeof i=="function"&&(r[n]=(...o)=>e(i(...o)))}return r}function bT(t){return function(r){const n=t(r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function fL(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function Pq(t,e){return function(n,{displayName:i}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=t,o.dependsOnOwnProps=fL(t);let c=o(a,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=fL(c),c=o(a,l)),c},o}}function QO(t,e){return(r,n)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${n.wrappedComponentName}.`)}}function Eve(t){return t&&typeof t=="object"?bT(e=>Sve(t,e)):t?typeof t=="function"?Pq(t):QO(t,"mapDispatchToProps"):bT(e=>({dispatch:e}))}function Ave(t){return t?typeof t=="function"?Pq(t):QO(t,"mapStateToProps"):bT(()=>({}))}function Cve(t,e,r){return pf({},r,t,e)}function Pve(t){return function(r,{displayName:n,areMergedPropsEqual:i}){let o=!1,s;return function(l,c,f){const d=t(l,c,f);return o?i(d,s)||(s=d):(o=!0,s=d),s}}}function Tve(t){return t?typeof t=="function"?Pve(t):QO(t,"mergeProps"):()=>Cve}function Ive(){const t=tve();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const dL={notify(){},get:()=>[]};function Tq(t,e){let r,n=dL,i=0,o=!1;function s(y){f();const g=n.subscribe(y);let b=!1;return()=>{b||(b=!0,g(),d())}}function a(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return o}function f(){i++,r||(r=e?e.addNestedSub(l):t.subscribe(l),n=Ive())}function d(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=dL)}function h(){o||(o=!0,f())}function p(){o&&(o=!1,d())}const m={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return m}const Nve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qx=Nve?E.useLayoutEffect:E.useEffect;function hL(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function gA(t,e){if(hL(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!hL(t[r[i]],e[r[i]]))return!1;return!0}const kve=["reactReduxForwardedRef"];let Iq=nve;const Ove=t=>{Iq=t},jve=[null,null];function Rve(t,e,r){qx(()=>t(...e),r)}function $ve(t,e,r,n,i,o){t.current=n,r.current=!1,i.current&&(i.current=null,o())}function Dve(t,e,r,n,i,o,s,a,l,c,f){if(!t)return()=>{};let d=!1,h=null;const p=()=>{if(d||!a.current)return;const y=e.getState();let g,b;try{g=n(y,i.current)}catch(v){b=v,h=v}b||(h=null),g===o.current?s.current||c():(o.current=g,l.current=g,s.current=!0,f())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function Mve(t,e){return t===e}function Nq(t,e,r,{pure:n,areStatesEqual:i=Mve,areOwnPropsEqual:o=gA,areStatePropsEqual:s=gA,areMergedPropsEqual:a=gA,forwardRef:l=!1,context:c=bq}={}){const f=c,d=Ave(t),h=Eve(e),p=Tve(r),m=!!t;return g=>{const b=g.displayName||g.name||"Component",v=`Connect(${b})`,x={shouldHandleStateChanges:m,displayName:v,wrappedComponentName:b,WrappedComponent:g,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function S(A){const[C,T,P]=E.useMemo(()=>{const{reactReduxForwardedRef:q}=A,it=xq(A,kve);return[A.context,q,it]},[A]),I=E.useMemo(()=>C&&C.Consumer&&bve.isContextConsumer(E.createElement(C.Consumer,null))?C:f,[C,f]),k=E.useContext(I),N=!!A.store&&!!A.store.getState&&!!A.store.dispatch,j=!!k&&!!k.store,L=N?A.store:k.store,V=j?k.getServerState:L.getState,F=E.useMemo(()=>wve(L.dispatch,x),[L]),[M,B]=E.useMemo(()=>{if(!m)return jve;const q=Tq(L,N?void 0:k.subscription),it=q.notifyNestedSubs.bind(q);return[q,it]},[L,N,k]),z=E.useMemo(()=>N?k:pf({},k,{subscription:M}),[N,k,M]),ae=E.useRef(),te=E.useRef(P),ge=E.useRef(),Le=E.useRef(!1);E.useRef(!1);const Qe=E.useRef(!1),fe=E.useRef();qx(()=>(Qe.current=!0,()=>{Qe.current=!1}),[]);const ut=E.useMemo(()=>()=>ge.current&&P===te.current?ge.current:F(L.getState(),P),[L,P]),nt=E.useMemo(()=>it=>M?Dve(m,L,M,F,te,ae,Le,Qe,ge,B,it):()=>{},[M]);Rve($ve,[te,ae,Le,P,ge,B]);let Z;try{Z=Iq(nt,ut,V?()=>F(V(),P):ut)}catch(q){throw fe.current&&(q.message+=`
The error may be correlated with this previous error:
${fe.current.stack}

`),q}qx(()=>{fe.current=void 0,ge.current=void 0,ae.current=Z});const _e=E.useMemo(()=>E.createElement(g,pf({},Z,{ref:T})),[T,g,Z]);return E.useMemo(()=>m?E.createElement(I.Provider,{value:z},_e):_e,[I,_e,z])}const w=E.memo(S);if(w.WrappedComponent=g,w.displayName=S.displayName=v,l){const C=E.forwardRef(function(P,I){return E.createElement(w,pf({},P,{reactReduxForwardedRef:I}))});return C.displayName=v,C.WrappedComponent=g,uL(C,g)}return uL(w,g)}}function Fve({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:o="once"}){const s=E.useMemo(()=>{const c=Tq(t);return{store:t,subscription:c,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:o}},[t,n,i,o]),a=E.useMemo(()=>t.getState(),[t]);qx(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=e||bq;return E.createElement(l.Provider,{value:s},r)}Ove(uk.useSyncExternalStore);eve(lg.unstable_batchedUpdates);function Lve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function kq(t,e){var r=E.useState(function(){return{inputs:e,result:t()}})[0],n=E.useRef(!0),i=E.useRef(r),o=n.current||!!(e&&i.current.inputs&&Lve(e,i.current.inputs)),s=o?i.current:{inputs:e,result:t()};return E.useEffect(function(){n.current=!1,i.current=s},[s]),s.result}function Bve(t,e){return kq(function(){return t},e)}var He=kq,pe=Bve,Uve="Invariant failed";function Oq(t,e){if(!t)throw new Error(Uve)}var so=function(e){var r=e.top,n=e.right,i=e.bottom,o=e.left,s=n-o,a=i-r,l={top:r,right:n,bottom:i,left:o,width:s,height:a,x:o,y:r,center:{x:(n+o)/2,y:(i+r)/2}};return l},YO=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},pL=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},Vve=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},vA={top:0,right:0,bottom:0,left:0},XO=function(e){var r=e.borderBox,n=e.margin,i=n===void 0?vA:n,o=e.border,s=o===void 0?vA:o,a=e.padding,l=a===void 0?vA:a,c=so(YO(r,i)),f=so(pL(r,s)),d=so(pL(f,l));return{marginBox:c,borderBox:so(r),paddingBox:f,contentBox:d,margin:i,border:s,padding:l}},mi=function(e){var r=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var i=Number(r);return isNaN(i)&&Oq(!1),i},Wve=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hx=function(e,r){var n=e.borderBox,i=e.border,o=e.margin,s=e.padding,a=Vve(n,r);return XO({borderBox:a,border:i,margin:o,padding:s})},Kx=function(e,r){return r===void 0&&(r=Wve()),Hx(e,r)},jq=function(e,r){var n={top:mi(r.marginTop),right:mi(r.marginRight),bottom:mi(r.marginBottom),left:mi(r.marginLeft)},i={top:mi(r.paddingTop),right:mi(r.paddingRight),bottom:mi(r.paddingBottom),left:mi(r.paddingLeft)},o={top:mi(r.borderTopWidth),right:mi(r.borderRightWidth),bottom:mi(r.borderBottomWidth),left:mi(r.borderLeftWidth)};return XO({borderBox:e,margin:n,padding:i,border:o})},Rq=function(e){var r=e.getBoundingClientRect(),n=window.getComputedStyle(e);return jq(r,n)},mL=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function zve(t,e){return!!(t===e||mL(t)&&mL(e))}function Gve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!zve(t[r],e[r]))return!1;return!0}function Or(t,e){e===void 0&&(e=Gve);var r=null;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r&&r.lastThis===this&&e(i,r.lastArgs))return r.lastResult;var s=t.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var Fm=function(e){var r=[],n=null,i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};function Qx(){return Qx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qx.apply(this,arguments)}function $q(t,e){}$q.bind(null,"warn");$q.bind(null,"error");function Ma(){}function qve(t,e){return{...t,...e}}function ki(t,e,r){const n=e.map(i=>{const o=qve(r,i.options);return t.addEventListener(i.eventName,i.fn,o),function(){t.removeEventListener(i.eventName,i.fn,o)}});return function(){n.forEach(o=>{o()})}}const Hve="Invariant failed";class Yx extends Error{}Yx.prototype.toString=function(){return this.message};function ee(t,e){if(!t)throw new Yx(Hve)}class Kve extends O.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Ma,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof Yx&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=ki(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Yx){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Qve=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Xx=t=>t+1,Yve=t=>`
  You have lifted an item in position ${Xx(t.source.index)}
`,Dq=(t,e)=>{const r=t.droppableId===e.droppableId,n=Xx(t.index),i=Xx(e.index);return r?`
      You have moved the item from position ${n}
      to position ${i}
    `:`
    You have moved the item from position ${n}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},Mq=(t,e,r)=>e.droppableId===r.droppableId?`
      The item ${t}
      has been combined with ${r.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,Xve=t=>{const e=t.destination;if(e)return Dq(t.source,e);const r=t.combine;return r?Mq(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},yL=t=>`
  The item has returned to its starting position
  of ${Xx(t.index)}
`,Jve=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${yL(t.source)}
    `;const e=t.destination,r=t.combine;return e?`
      You have dropped the item.
      ${Dq(t.source,e)}
    `:r?`
      You have dropped the item.
      ${Mq(t.draggableId,t.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${yL(t.source)}
  `},Zve={dragHandleUsageInstructions:Qve,onDragStart:Yve,onDragUpdate:Xve,onDragEnd:Jve};var nb=Zve;const jr={x:0,y:0},Hr=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),ri=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Fa=(t,e)=>t.x===e.x&&t.y===e.y,Qd=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),kc=(t,e,r=0)=>t==="x"?{x:e,y:r}:{x:r,y:e},Lm=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),gL=(t,e)=>Math.min(...e.map(r=>Lm(t,r))),Fq=t=>e=>({x:t(e.x),y:t(e.y)});var e0e=(t,e)=>{const r=so({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r};const Rg=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),vL=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],t0e={top:0,right:0,bottom:0,left:0},r0e=(t,e)=>e?Rg(t,e.scroll.diff.displacement):t,n0e=(t,e,r)=>r&&r.increasedBy?{...t,[e.end]:t[e.end]+r.increasedBy[e.line]}:t,i0e=(t,e)=>e&&e.shouldClipSubject?e0e(e.pageMarginBox,t):so(t);var ad=({page:t,withPlaceholder:e,axis:r,frame:n})=>{const i=r0e(t.marginBox,n),o=n0e(i,r,e),s=i0e(o,n);return{page:t,withPlaceholder:e,active:s}},JO=(t,e)=>{t.frame||ee(!1);const r=t.frame,n=ri(e,r.scroll.initial),i=Qd(n),o={...r,scroll:{initial:r.scroll.initial,current:e,diff:{value:n,displacement:i},max:r.scroll.max}},s=ad({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:o});return{...t,frame:o,subject:s}};const Lq=Or(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),Bq=Or(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),S1=Or(t=>Object.values(t)),o0e=Or(t=>Object.values(t));var Yd=Or((t,e)=>o0e(e).filter(n=>t===n.descriptor.droppableId).sort((n,i)=>n.descriptor.index-i.descriptor.index));function ZO(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function E1(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var A1=Or((t,e)=>e.filter(r=>r.descriptor.id!==t.descriptor.id)),s0e=({isMovingForward:t,draggable:e,destination:r,insideDestination:n,previousImpact:i})=>{if(!r.isCombineEnabled||!ZO(i))return null;function s(p){const m={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...i,at:m}}const a=i.displaced.all,l=a.length?a[0]:null;if(t)return l?s(l):null;const c=A1(e,n);if(!l){if(!c.length)return null;const p=c[c.length-1];return s(p.descriptor.id)}const f=c.findIndex(p=>p.descriptor.id===l);f===-1&&ee(!1);const d=f-1;if(d<0)return null;const h=c[d];return s(h.descriptor.id)},Xd=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const Uq={point:jr,value:0},Bm={invisible:{},visible:{},all:[]},a0e={displaced:Bm,displacedBy:Uq,at:null};var l0e=a0e,Ri=(t,e)=>r=>t<=r&&r<=e,Vq=t=>{const e=Ri(t.top,t.bottom),r=Ri(t.left,t.right);return n=>{if(e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=e(n.top)||e(n.bottom),s=r(n.left)||r(n.right);if(o&&s)return!0;const l=n.top<t.top&&n.bottom>t.bottom,c=n.left<t.left&&n.right>t.right;return l&&c?!0:l&&s||c&&o}},c0e=t=>{const e=Ri(t.top,t.bottom),r=Ri(t.left,t.right);return n=>e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right)};const ej={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Wq={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var u0e=t=>e=>{const r=Ri(e.top,e.bottom),n=Ri(e.left,e.right);return i=>t===ej?r(i.top)&&r(i.bottom):n(i.left)&&n(i.right)};const f0e=(t,e)=>{const r=e.frame?e.frame.scroll.diff.displacement:jr;return Rg(t,r)},d0e=(t,e,r)=>e.subject.active?r(e.subject.active)(t):!1,h0e=(t,e,r)=>r(e)(t),tj=({target:t,destination:e,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:i})=>{const o=n?f0e(t,e):t;return d0e(o,e,i)&&h0e(o,r,i)},p0e=t=>tj({...t,isVisibleThroughFrameFn:Vq}),zq=t=>tj({...t,isVisibleThroughFrameFn:c0e}),m0e=t=>tj({...t,isVisibleThroughFrameFn:u0e(t.destination.axis)}),y0e=(t,e,r)=>{if(typeof r=="boolean")return r;if(!e)return!0;const{invisible:n,visible:i}=e;if(n[t])return!1;const o=i[t];return o?o.shouldAnimate:!0};function g0e(t,e){const r=t.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return so(YO(r,n))}function Um({afterDragging:t,destination:e,displacedBy:r,viewport:n,forceShouldAnimate:i,last:o}){return t.reduce(function(a,l){const c=g0e(l,r),f=l.descriptor.id;if(a.all.push(f),!p0e({target:c,destination:e,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=y0e(f,o,i),p={draggableId:f,shouldAnimate:h};return a.visible[f]=p,a},{all:[],visible:{},invisible:{}})}function v0e(t,e){if(!t.length)return 0;const r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function bL({insideDestination:t,inHomeList:e,displacedBy:r,destination:n}){const i=v0e(t,{inHomeList:e});return{displaced:Bm,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Jx({draggable:t,insideDestination:e,destination:r,viewport:n,displacedBy:i,last:o,index:s,forceShouldAnimate:a}){const l=Xd(t,r);if(s==null)return bL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const c=e.find(m=>m.descriptor.index===s);if(!c)return bL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const f=A1(t,e),d=e.indexOf(c),h=f.slice(d);return{displaced:Um({afterDragging:h,destination:r,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Xa(t,e){return!!e.effected[t]}var b0e=({isMovingForward:t,destination:e,draggables:r,combine:n,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=n.draggableId,a=r[o].descriptor.index;return Xa(o,i)?t?a:a-1:t?a+1:a},x0e=({isMovingForward:t,isInHomeList:e,insideDestination:r,location:n})=>{if(!r.length)return null;const i=n.index,o=t?i+1:i-1,s=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=e?a:a+1;return o<s||o>l?null:o},_0e=({isMovingForward:t,isInHomeList:e,draggable:r,draggables:n,destination:i,insideDestination:o,previousImpact:s,viewport:a,afterCritical:l})=>{const c=s.at;if(c||ee(!1),c.type==="REORDER"){const d=x0e({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:o});return d==null?null:Jx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:d})}const f=b0e({isMovingForward:t,destination:i,displaced:s.displaced,draggables:n,combine:c.combine,afterCritical:l});return f==null?null:Jx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:f})},w0e=({displaced:t,afterCritical:e,combineWith:r,displacedBy:n})=>{const i=!!(t.visible[r]||t.invisible[r]);return Xa(r,e)?i?jr:Qd(n.point):i?n.point:jr},S0e=({afterCritical:t,impact:e,draggables:r})=>{const n=E1(e);n||ee(!1);const i=n.draggableId,o=r[i].page.borderBox.center,s=w0e({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return Hr(o,s)};const Gq=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,E0e=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,rj=(t,e,r)=>e[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2,xL=({axis:t,moveRelativeTo:e,isMoving:r})=>kc(t.line,e.marginBox[t.end]+Gq(t,r),rj(t,e.marginBox,r)),_L=({axis:t,moveRelativeTo:e,isMoving:r})=>kc(t.line,e.marginBox[t.start]-E0e(t,r),rj(t,e.marginBox,r)),A0e=({axis:t,moveInto:e,isMoving:r})=>kc(t.line,e.contentBox[t.start]+Gq(t,r),rj(t,e.contentBox,r));var C0e=({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i})=>{const o=Yd(n.descriptor.id,r),s=e.page,a=n.axis;if(!o.length)return A0e({axis:a,moveInto:n.page,isMoving:s});const{displaced:l,displacedBy:c}=t,f=l.all[0];if(f){const h=r[f];if(Xa(f,i))return _L({axis:a,moveRelativeTo:h.page,isMoving:s});const p=Hx(h.page,c.point);return _L({axis:a,moveRelativeTo:p,isMoving:s})}const d=o[o.length-1];if(d.descriptor.id===e.descriptor.id)return s.borderBox.center;if(Xa(d.descriptor.id,i)){const h=Hx(d.page,Qd(i.displacedBy.point));return xL({axis:a,moveRelativeTo:h,isMoving:s})}return xL({axis:a,moveRelativeTo:d.page,isMoving:s})},xT=(t,e)=>{const r=t.frame;return r?Hr(e,r.scroll.diff.displacement):e};const P0e=({impact:t,draggable:e,droppable:r,draggables:n,afterCritical:i})=>{const o=e.page.borderBox.center,s=t.at;return!r||!s?o:s.type==="REORDER"?C0e({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i}):S0e({impact:t,draggables:n,afterCritical:i})};var C1=t=>{const e=P0e(t),r=t.droppable;return r?xT(r,e):e},qq=(t,e)=>{const r=ri(e,t.scroll.initial),n=Qd(r);return{frame:so({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:n}}}};function wL(t,e){return t.map(r=>e[r])}function T0e(t,e){for(let r=0;r<e.length;r++){const n=e[r].visible[t];if(n)return n}return null}var I0e=({impact:t,viewport:e,destination:r,draggables:n,maxScrollChange:i})=>{const o=qq(e,Hr(e.scroll.current,i)),s=r.frame?JO(r,Hr(r.frame.scroll.current,i)):r,a=t.displaced,l=Um({afterDragging:wL(a.all,n),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),c=Um({afterDragging:wL(a.all,n),destination:s,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),f={},d={},h=[a,l,c];return a.all.forEach(m=>{const y=T0e(m,h);if(y){d[m]=y;return}f[m]=!0}),{...t,displaced:{all:a.all,invisible:f,visible:d}}},N0e=(t,e)=>Hr(t.scroll.diff.displacement,e),nj=({pageBorderBoxCenter:t,draggable:e,viewport:r})=>{const n=N0e(r,t),i=ri(n,e.page.borderBox.center);return Hr(e.client.borderBox.center,i)},Hq=({draggable:t,destination:e,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const s=ri(r,t.page.borderBox.center),l={target:Rg(t.page.borderBox,s),destination:e,withDroppableDisplacement:i,viewport:n};return o?m0e(l):zq(l)},k0e=({isMovingForward:t,draggable:e,destination:r,draggables:n,previousImpact:i,viewport:o,previousPageBorderBoxCenter:s,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const c=Yd(r.descriptor.id,n),f=Xd(e,r),d=s0e({isMovingForward:t,draggable:e,destination:r,insideDestination:c,previousImpact:i})||_0e({isMovingForward:t,isInHomeList:f,draggable:e,draggables:n,destination:r,insideDestination:c,previousImpact:i,viewport:o,afterCritical:l});if(!d)return null;const h=C1({impact:d,draggable:e,droppable:r,draggables:n,afterCritical:l});if(Hq({draggable:e,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:nj({pageBorderBoxCenter:h,draggable:e,viewport:o}),impact:d,scrollJumpRequest:null};const m=ri(h,s),y=I0e({impact:d,viewport:o,destination:r,draggables:n,maxScrollChange:m});return{clientSelection:a,impact:y,scrollJumpRequest:m}};const yn=t=>{const e=t.subject.active;return e||ee(!1),e};var O0e=({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:n,viewport:i})=>{const o=r.subject.active;if(!o)return null;const s=r.axis,a=Ri(o[s.start],o[s.end]),l=S1(n).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>Vq(i.frame)(yn(f))).filter(f=>{const d=yn(f);return t?o[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<o[s.crossAxisStart]}).filter(f=>{const d=yn(f),h=Ri(d[s.start],d[s.end]);return a(d[s.start])||a(d[s.end])||h(o[s.start])||h(o[s.end])}).sort((f,d)=>{const h=yn(f)[s.crossAxisStart],p=yn(d)[s.crossAxisStart];return t?h-p:p-h}).filter((f,d,h)=>yn(f)[s.crossAxisStart]===yn(h[0])[s.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(f=>Ri(yn(f)[s.start],yn(f)[s.end])(e[s.line]));return c.length===1?c[0]:c.length>1?c.sort((f,d)=>yn(f)[s.start]-yn(d)[s.start])[0]:l.sort((f,d)=>{const h=gL(e,vL(yn(f))),p=gL(e,vL(yn(d)));return h!==p?h-p:yn(f)[s.start]-yn(d)[s.start]})[0]};const SL=(t,e)=>{const r=t.page.borderBox.center;return Xa(t.descriptor.id,e)?ri(r,e.displacedBy.point):r},j0e=(t,e)=>{const r=t.page.borderBox;return Xa(t.descriptor.id,e)?Rg(r,Qd(e.displacedBy.point)):r};var R0e=({pageBorderBoxCenter:t,viewport:e,destination:r,insideDestination:n,afterCritical:i})=>n.filter(s=>zq({target:j0e(s,i),destination:r,viewport:e.frame,withDroppableDisplacement:!0})).sort((s,a)=>{const l=Lm(t,xT(r,SL(s,i))),c=Lm(t,xT(r,SL(a,i)));return l<c?-1:c<l?1:s.descriptor.index-a.descriptor.index})[0]||null,$g=Or(function(e,r){const n=r[e.line];return{value:n,point:kc(e.line,n)}});const $0e=(t,e,r)=>{const n=t.axis;if(t.descriptor.mode==="virtual")return kc(n.line,e[n.line]);const i=t.subject.page.contentBox[n.size],l=Yd(t.descriptor.id,r).reduce((c,f)=>c+f.client.marginBox[n.size],0)+e[n.line]-i;return l<=0?null:kc(n.line,l)},Kq=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),Qq=(t,e,r)=>{const n=t.frame;Xd(e,t)&&ee(!1),t.subject.withPlaceholder&&ee(!1);const i=$g(t.axis,e.displaceBy).point,o=$0e(t,i,r),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!n){const f=ad({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return{...t,subject:f}}const a=o?Hr(n.scroll.max,o):n.scroll.max,l=Kq(n,a),c=ad({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},D0e=t=>{const e=t.subject.withPlaceholder;e||ee(!1);const r=t.frame;if(!r){const s=ad({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:s}}const n=e.oldFrameMaxScroll;n||ee(!1);const i=Kq(r,n),o=ad({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:o,frame:i}};var M0e=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:r,draggable:n,draggables:i,destination:o,viewport:s,afterCritical:a})=>{if(!e){if(r.length)return null;const d={displaced:Bm,displacedBy:Uq,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=C1({impact:d,draggable:n,droppable:o,draggables:i,afterCritical:a}),p=Xd(n,o)?o:Qq(o,n,i);return Hq({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=t[o.axis.line]<=e.page.borderBox.center[o.axis.line],c=(()=>{const d=e.descriptor.index;return e.descriptor.id===n.descriptor.id||l?d:d+1})(),f=$g(o.axis,n.displaceBy);return Jx({draggable:n,insideDestination:r,destination:o,viewport:s,displacedBy:f,last:Bm,index:c})},F0e=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:r,isOver:n,draggables:i,droppables:o,viewport:s,afterCritical:a})=>{const l=O0e({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:o,viewport:s});if(!l)return null;const c=Yd(l.descriptor.id,i),f=R0e({pageBorderBoxCenter:e,viewport:s,destination:l,insideDestination:c,afterCritical:a}),d=M0e({previousPageBorderBoxCenter:e,destination:l,draggable:r,draggables:i,moveRelativeTo:f,insideDestination:c,viewport:s,afterCritical:a});if(!d)return null;const h=C1({impact:d,draggable:r,droppable:l,draggables:i,afterCritical:a});return{clientSelection:nj({pageBorderBoxCenter:h,draggable:r,viewport:s}),impact:d,scrollJumpRequest:null}},oi=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const L0e=(t,e)=>{const r=oi(t);return r?e[r]:null};var B0e=({state:t,type:e})=>{const r=L0e(t.impact,t.dimensions.droppables),n=!!r,i=t.dimensions.droppables[t.critical.droppable.id],o=r||i,s=o.axis.direction,a=s==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||s==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!n)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,{draggables:d,droppables:h}=t.dimensions;return a?k0e({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:c,destination:o,draggables:d,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):F0e({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:c,isOver:o,draggables:d,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Il(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Yq(t){const e=Ri(t.top,t.bottom),r=Ri(t.left,t.right);return function(i){return e(i.y)&&r(i.x)}}function U0e(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function V0e({pageBorderBox:t,draggable:e,candidates:r}){const n=e.page.borderBox.center,i=r.map(o=>{const s=o.axis,a=kc(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Lm(n,a)}}).sort((o,s)=>s.distance-o.distance);return i[0]?i[0].id:null}function W0e({pageBorderBox:t,draggable:e,droppables:r}){const n=S1(r).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!U0e(t,o))return!1;if(Yq(o)(t.center))return!0;const s=i.axis,a=o.center[s.crossAxisLine],l=t[s.crossAxisStart],c=t[s.crossAxisEnd],f=Ri(o[s.crossAxisStart],o[s.crossAxisEnd]),d=f(l),h=f(c);return!d&&!h?!0:d?l<a:c>a});return n.length?n.length===1?n[0].descriptor.id:V0e({pageBorderBox:t,draggable:e,candidates:n}):null}const Xq=(t,e)=>so(Rg(t,e));var z0e=(t,e)=>{const r=t.frame;return r?Xq(e,r.scroll.diff.value):e};function Jq({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function G0e({draggable:t,closest:e,inHomeList:r}){return e?r&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var q0e=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:r,insideDestination:n,last:i,viewport:o,afterCritical:s})=>{const a=r.axis,l=$g(r.axis,e.displaceBy),c=l.value,f=t[a.start],d=t[a.end],p=A1(e,n).find(y=>{const g=y.descriptor.id,b=y.page.borderBox.center[a.line],v=Xa(g,s),x=Jq({displaced:i,id:g});return v?x?d<=b:f<b-c:x?d<=b+c:f<b})||null,m=G0e({draggable:e,closest:p,inHomeList:Xd(e,r)});return Jx({draggable:e,insideDestination:n,destination:r,viewport:o,last:i,displacedBy:l,index:m})};const H0e=4;var K0e=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:r,destination:n,insideDestination:i,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const s=n.axis,a=$g(n.axis,t.displaceBy),l=a.value,c=e[s.start],f=e[s.end],h=A1(t,i).find(m=>{const y=m.descriptor.id,g=m.page.borderBox,v=g[s.size]/H0e,x=Xa(y,o),S=Jq({displaced:r.displaced,id:y});return x?S?f>g[s.start]+v&&f<g[s.end]-v:c>g[s.start]-l+v&&c<g[s.end]-l-v:S?f>g[s.start]+l+v&&f<g[s.end]+l-v:c>g[s.start]+v&&c<g[s.end]-v});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Zq=({pageOffset:t,draggable:e,draggables:r,droppables:n,previousImpact:i,viewport:o,afterCritical:s})=>{const a=Xq(e.page.borderBox,t),l=W0e({pageBorderBox:a,draggable:e,droppables:n});if(!l)return l0e;const c=n[l],f=Yd(c.descriptor.id,r),d=z0e(c,a);return K0e({pageBorderBoxWithDroppableScroll:d,draggable:e,previousImpact:i,destination:c,insideDestination:f,afterCritical:s})||q0e({pageBorderBoxWithDroppableScroll:d,draggable:e,destination:c,insideDestination:f,last:i.displaced,viewport:o,afterCritical:s})},ij=(t,e)=>({...t,[e.descriptor.id]:e});const Q0e=({previousImpact:t,impact:e,droppables:r})=>{const n=oi(t),i=oi(e);if(!n||n===i)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const s=D0e(o);return ij(r,s)};var Y0e=({draggable:t,draggables:e,droppables:r,previousImpact:n,impact:i})=>{const o=Q0e({previousImpact:n,impact:i,droppables:r}),s=oi(i);if(!s)return o;const a=r[s];if(Xd(t,a)||a.subject.withPlaceholder)return o;const l=Qq(a,t,e);return ij(o,l)},zp=({state:t,clientSelection:e,dimensions:r,viewport:n,impact:i,scrollJumpRequest:o})=>{const s=n||t.viewport,a=r||t.dimensions,l=e||t.current.client.selection,c=ri(l,t.initial.client.selection),f={offset:c,selection:l,borderBoxCenter:Hr(t.initial.client.borderBoxCenter,c)},d={selection:Hr(f.selection,s.scroll.current),borderBoxCenter:Hr(f.borderBoxCenter,s.scroll.current),offset:Hr(f.offset,s.scroll.diff.value)},h={client:f,page:d};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:s,current:h};const p=a.draggables[t.critical.draggable.id],m=i||Zq({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),y=Y0e({draggable:p,impact:m,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:y},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function X0e(t,e){return t.map(r=>e[r])}var eH=({impact:t,viewport:e,draggables:r,destination:n,forceShouldAnimate:i})=>{const o=t.displaced,s=X0e(o.all,r),a=Um({afterDragging:s,destination:n,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...t,displaced:a}},tH=({impact:t,draggable:e,droppable:r,draggables:n,viewport:i,afterCritical:o})=>{const s=C1({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:o});return nj({pageBorderBoxCenter:s,draggable:e,viewport:i})},rH=({state:t,dimensions:e,viewport:r})=>{t.movementMode!=="SNAP"&&ee(!1);const n=t.impact,i=r||t.viewport,o=e||t.dimensions,{draggables:s,droppables:a}=o,l=s[t.critical.draggable.id],c=oi(n);c||ee(!1);const f=a[c],d=eH({impact:n,viewport:i,destination:f,draggables:s}),h=tH({impact:d,draggable:l,droppable:f,draggables:s,viewport:i,afterCritical:t.afterCritical});return zp({impact:d,clientSelection:h,state:t,dimensions:o,viewport:i})},J0e=t=>({index:t.index,droppableId:t.droppableId}),nH=({draggable:t,home:e,draggables:r,viewport:n})=>{const i=$g(e.axis,t.displaceBy),o=Yd(e.descriptor.id,r),s=o.indexOf(t);s===-1&&ee(!1);const a=o.slice(s+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:l};return{impact:{displaced:Um({afterDragging:a,destination:e,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:J0e(t.descriptor)}},afterCritical:c}},Z0e=(t,e)=>({draggables:t.draggables,droppables:ij(t.droppables,e)}),ebe=({draggable:t,offset:e,initialWindowScroll:r})=>{const n=Hx(t.client,e),i=Kx(n,r);return{...t,placeholder:{...t.placeholder,client:n},client:n,page:i}},tbe=t=>{const e=t.frame;return e||ee(!1),e},rbe=({additions:t,updatedDroppables:e,viewport:r})=>{const n=r.scroll.diff.value;return t.map(i=>{const o=i.descriptor.droppableId,s=e[o],l=tbe(s).scroll.diff.value,c=Hr(n,l);return ebe({draggable:i,offset:c,initialWindowScroll:r.scroll.initial})})},nbe=({state:t,published:e})=>{const r=e.modified.map(b=>{const v=t.dimensions.droppables[b.droppableId];return JO(v,b.scroll)}),n={...t.dimensions.droppables,...Lq(r)},i=Bq(rbe({additions:e.additions,updatedDroppables:n,viewport:t.viewport})),o={...t.dimensions.draggables,...i};e.removals.forEach(b=>{delete o[b]});const s={droppables:n,draggables:o},a=oi(t.impact),l=a?s.droppables[a]:null,c=s.draggables[t.critical.draggable.id],f=s.droppables[t.critical.droppable.id],{impact:d,afterCritical:h}=nH({draggable:c,home:f,draggables:o,viewport:t.viewport}),p=l&&l.isCombineEnabled?t.impact:d,m=Zq({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),y={...t,phase:"DRAGGING",impact:m,onLiftImpact:d,dimensions:s,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const _T=t=>t.movementMode==="SNAP",bA=(t,e,r)=>{const n=Z0e(t.dimensions,e);return!_T(t)||r?zp({state:t,dimensions:n}):rH({state:t,dimensions:n})};function xA(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const EL={phase:"IDLE",completed:null,shouldFlush:!1};var ibe=(t=EL,e)=>{if(e.type==="FLUSH")return{...EL,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ee(!1);const{critical:r,clientSelection:n,viewport:i,dimensions:o,movementMode:s}=e.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],c={selection:n,borderBoxCenter:a.client.borderBox.center,offset:jr},f={client:c,page:{selection:Hr(c.selection,i.scroll.initial),borderBoxCenter:Hr(c.selection,i.scroll.initial),offset:Hr(c.selection,i.scroll.diff.value)}},d=S1(o.droppables).every(y=>!y.isFixedOnPage),{impact:h,afterCritical:p}=nH({draggable:a,home:l,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:f,current:f,isWindowScrollAllowed:d,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&ee(!1),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ee(!1),nbe({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Il(t)||ee(!1);const{client:r}=e.payload;return Fa(r,t.current.client.selection)?t:zp({state:t,clientSelection:r,impact:_T(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return xA(t);Il(t)||ee(!1);const{id:r,newScroll:n}=e.payload,i=t.dimensions.droppables[r];if(!i)return t;const o=JO(i,n);return bA(t,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Il(t)||ee(!1);const{id:r,isEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||ee(!1),i.isEnabled===n&&ee(!1);const o={...i,isEnabled:n};return bA(t,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Il(t)||ee(!1);const{id:r,isCombineEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||ee(!1),i.isCombineEnabled===n&&ee(!1);const o={...i,isCombineEnabled:n};return bA(t,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Il(t)||ee(!1),t.isWindowScrollAllowed||ee(!1);const r=e.payload.newScroll;if(Fa(t.viewport.scroll.current,r))return xA(t);const n=qq(t.viewport,r);return _T(t)?rH({state:t,viewport:n}):zp({state:t,viewport:n})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Il(t))return t;const r=e.payload.maxScroll;if(Fa(r,t.viewport.scroll.max))return t;const n={...t.viewport,scroll:{...t.viewport.scroll,max:r}};return{...t,viewport:n}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ee(!1);const r=B0e({state:t,type:e.type});return r?zp({state:t,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const r=e.payload.reason;return t.phase!=="COLLECTING"&&ee(!1),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(e.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ee(!1),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:r}=e.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return t};const obe=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),sbe=t=>({type:"LIFT",payload:t}),abe=t=>({type:"INITIAL_PUBLISH",payload:t}),lbe=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),cbe=()=>({type:"COLLECTION_STARTING",payload:null}),ube=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),fbe=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),dbe=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),iH=t=>({type:"MOVE",payload:t}),hbe=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),pbe=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),mbe=()=>({type:"MOVE_UP",payload:null}),ybe=()=>({type:"MOVE_DOWN",payload:null}),gbe=()=>({type:"MOVE_RIGHT",payload:null}),vbe=()=>({type:"MOVE_LEFT",payload:null}),oj=()=>({type:"FLUSH",payload:null}),bbe=t=>({type:"DROP_ANIMATE",payload:t}),sj=t=>({type:"DROP_COMPLETE",payload:t}),oH=t=>({type:"DROP",payload:t}),xbe=t=>({type:"DROP_PENDING",payload:t}),sH=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var _be=t=>({getState:e,dispatch:r})=>n=>i=>{if(i.type!=="LIFT"){n(i);return}const{id:o,clientSelection:s,movementMode:a}=i.payload,l=e();l.phase==="DROP_ANIMATING"&&r(sj({completed:l.completed})),e().phase!=="IDLE"&&ee(!1),r(oj()),r(obe({draggableId:o,movementMode:a}));const f={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:p}=t.startPublishing(f);r(abe({critical:d,dimensions:h,clientSelection:s,movementMode:a,viewport:p}))},wbe=t=>()=>e=>r=>{r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)};const aj={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Vm={opacity:{drop:0,combining:.7},scale:{drop:.75}},aH={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ml=`${aH.outOfTheWay}s ${aj.outOfTheWay}`,Gp={fluid:`opacity ${ml}`,snap:`transform ${ml}, opacity ${ml}`,drop:t=>{const e=`${t}s ${aj.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${ml}`,placeholder:`height ${ml}, width ${ml}, margin ${ml}`},AL=t=>Fa(t,jr)?void 0:`translate(${t.x}px, ${t.y}px)`,wT={moveTo:AL,drop:(t,e)=>{const r=AL(t);if(r)return e?`${r} scale(${Vm.scale.drop})`:r}},{minDropTime:ST,maxDropTime:lH}=aH,Sbe=lH-ST,CL=1500,Ebe=.6;var Abe=({current:t,destination:e,reason:r})=>{const n=Lm(t,e);if(n<=0)return ST;if(n>=CL)return lH;const i=n/CL,o=ST+Sbe*i,s=r==="CANCEL"?o*Ebe:o;return Number(s.toFixed(2))},Cbe=({impact:t,draggable:e,dimensions:r,viewport:n,afterCritical:i})=>{const{draggables:o,droppables:s}=r,a=oi(t),l=a?s[a]:null,c=s[e.descriptor.droppableId],f=tH({impact:t,draggable:e,draggables:o,afterCritical:i,droppable:l||c,viewport:n});return ri(f,e.client.borderBox.center)},Pbe=({draggables:t,reason:e,lastImpact:r,home:n,viewport:i,onLiftImpact:o})=>!r.at||e!=="DROP"?{impact:eH({draggables:t,impact:o,destination:n,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:Bm},didDropInsideDroppable:!0};const Tbe=({getState:t,dispatch:e})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const i=t(),o=n.payload.reason;if(i.phase==="COLLECTING"){e(xbe({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ee(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ee(!1);const a=i.critical,l=i.dimensions,c=l.draggables[i.critical.draggable.id],{impact:f,didDropInsideDroppable:d}=Pbe({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=d?ZO(f):null,p=d?E1(f):null,m={index:a.draggable.index,droppableId:a.droppable.id},y={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:h,combine:p},g=Cbe({impact:f,draggable:c,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:f};if(!(!Fa(i.current.client.offset,g)||!!y.combine)){e(sj({completed:b}));return}const x=Abe({current:i.current.client.offset,destination:g,reason:o});e(bbe({newHomeClientOffset:g,dropDuration:x,completed:b}))};var Ibe=Tbe,cH=()=>({x:window.pageXOffset,y:window.pageYOffset});function Nbe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function kbe({onWindowScroll:t}){function e(){t(cH())}const r=Fm(e),n=Nbe(r);let i=Ma;function o(){return i!==Ma}function s(){o()&&ee(!1),i=ki(window,[n])}function a(){o()||ee(!1),r.cancel(),i(),i=Ma}return{start:s,stop:a,isActive:o}}const Obe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",jbe=t=>{const e=kbe({onWindowScroll:r=>{t.dispatch(hbe({newScroll:r}))}});return r=>n=>{!e.isActive()&&n.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&Obe(n)&&e.stop(),r(n)}};var Rbe=jbe,$be=t=>{let e=!1,r=!1;const n=setTimeout(()=>{r=!0}),i=o=>{e||r||(e=!0,t(o),clearTimeout(n))};return i.wasCalled=()=>e,i},Dbe=()=>{const t=[],e=i=>{const o=t.findIndex(a=>a.timerId===i);o===-1&&ee(!1);const[s]=t.splice(o,1);s.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),s={timerId:o,callback:i};t.push(s)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const Mbe=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,Fbe=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,Lbe=(t,e)=>{if(t===e)return!0;const r=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,n=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return r&&n},Mh=(t,e)=>{e()},Vv=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function _A(t,e,r,n){if(!t){r(n(e));return}const i=$be(r);t(e,{announce:i}),i.wasCalled()||r(n(e))}var Bbe=(t,e)=>{const r=Dbe();let n=null;const i=(d,h)=>{n&&ee(!1),Mh("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:d,mode:h})})},o=(d,h)=>{n&&ee(!1),Mh("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Vv(d,h))})},s=(d,h)=>{n&&ee(!1);const p=Vv(d,h);n={mode:h,lastCritical:d,lastLocation:p.source,lastCombine:null},r.add(()=>{Mh("onDragStart",()=>_A(t().onDragStart,p,e,nb.onDragStart))})},a=(d,h)=>{const p=ZO(h),m=E1(h);n||ee(!1);const y=!Lbe(d,n.lastCritical);y&&(n.lastCritical=d);const g=!Mbe(n.lastLocation,p);g&&(n.lastLocation=p);const b=!Fbe(n.lastCombine,m);if(b&&(n.lastCombine=m),!y&&!g&&!b)return;const v={...Vv(d,n.mode),combine:m,destination:p};r.add(()=>{Mh("onDragUpdate",()=>_A(t().onDragUpdate,v,e,nb.onDragUpdate))})},l=()=>{n||ee(!1),r.flush()},c=d=>{n||ee(!1),n=null,Mh("onDragEnd",()=>_A(t().onDragEnd,d,e,nb.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:s,update:a,flush:l,drop:c,abort:()=>{if(!n)return;const d={...Vv(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},Ube=(t,e)=>{const r=Bbe(t,e);return n=>i=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),i(o),r.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const a=o.payload.completed.result;r.flush(),i(o),r.drop(a);return}if(i(o),o.type==="FLUSH"){r.abort();return}const s=n.getState();s.phase==="DRAGGING"&&r.update(s.critical,s.impact)}};const Vbe=t=>e=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}const n=t.getState();n.phase!=="DROP_ANIMATING"&&ee(!1),t.dispatch(sj({completed:n.completed}))};var Wbe=Vbe;const zbe=t=>{let e=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return i=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),i(o),o.type!=="DROP_ANIMATE")return;const s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(sH())}};r=requestAnimationFrame(()=>{r=null,e=ki(window,[s])})}};var Gbe=zbe,qbe=t=>()=>e=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)},Hbe=t=>{let e=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!e){if(n.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){e=!1;const i=n.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Kbe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var Qbe=t=>e=>r=>n=>{if(Kbe(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const i=e.getState();i.phase!=="DRAGGING"&&ee(!1),t.start(i);return}r(n),t.scroll(e.getState())};const Ybe=t=>e=>r=>{if(e(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(oH({reason:n.reason})))};var Xbe=Ybe;const Jbe=gq;var Zbe=({dimensionMarshal:t,focusMarshal:e,styleMarshal:r,getResponders:n,announce:i,autoScroller:o})=>yq(ibe,Jbe(Wge(wbe(r),qbe(t),_be(t),Ibe,Wbe,Gbe,Xbe,Qbe(o),Rbe,Hbe(e),Ube(n,i))));const wA=()=>({additions:{},removals:{},modified:{}});function exe({registry:t,callbacks:e}){let r=wA(),n=null;const i=()=>{n||(e.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:c,modified:f}=r,d=Object.keys(l).map(m=>t.draggable.getById(m).getDimension(jr)).sort((m,y)=>m.descriptor.index-y.descriptor.index),h=Object.keys(f).map(m=>{const g=t.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:g}}),p={additions:d,removals:Object.keys(c),modified:h};r=wA(),e.publish(p)}))};return{add:l=>{const c=l.descriptor.id;r.additions[c]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[c]&&delete r.removals[c],i()},remove:l=>{const c=l.descriptor;r.removals[c.id]=!0,r.modified[c.droppableId]=!0,r.additions[c.id]&&delete r.additions[c.id],i()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=wA())}}}var uH=({scrollHeight:t,scrollWidth:e,height:r,width:n})=>{const i=ri({x:e,y:t},{x:n,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},fH=()=>{const t=document.documentElement;return t||ee(!1),t},dH=()=>{const t=fH();return uH({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},txe=()=>{const t=cH(),e=dH(),r=t.y,n=t.x,i=fH(),o=i.clientWidth,s=i.clientHeight,a=n+o,l=r+s;return{frame:so({top:r,left:n,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:jr,displacement:jr}}}},rxe=({critical:t,scrollOptions:e,registry:r})=>{const n=txe(),i=n.scroll.current,o=t.droppable,s=r.droppable.getAllByType(o.type).map(f=>f.callbacks.getDimensionAndWatchScroll(i,e)),a=r.draggable.getAllByType(t.draggable.type).map(f=>f.getDimension(i));return{dimensions:{draggables:Bq(a),droppables:Lq(s)},critical:t,viewport:n}};function PL(t,e,r){return!(r.descriptor.id===e.id||r.descriptor.type!==e.type||t.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var nxe=(t,e)=>{let r=null;const n=exe({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||ee(!1),r&&e.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(t.droppable.exists(h)||ee(!1),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},s=(h,p)=>{r&&(t.droppable.exists(h)||ee(!1),e.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&t.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},c=h=>{r||ee(!1);const p=r.critical.draggable;h.type==="ADDITION"&&PL(t,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&PL(t,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:s,startPublishing:h=>{r&&ee(!1);const p=t.draggable.getById(h.draggableId),m=t.droppable.getById(p.descriptor.droppableId),y={draggable:p.descriptor,droppable:m.descriptor},g=t.subscribe(c);return r={critical:y,unsubscribe:g},rxe({critical:y,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},hH=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",ixe=t=>{window.scrollBy(t.x,t.y)};const oxe=Or(t=>S1(t).filter(e=>!(!e.isEnabled||!e.frame))),sxe=(t,e)=>oxe(e).find(n=>(n.frame||ee(!1),Yq(n.frame.pageMarginBox)(t)))||null;var axe=({center:t,destination:e,droppables:r})=>{if(e){const i=r[e];return i.frame?i:null}return sxe(t,r)};const Wm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var lxe=(t,e,r=()=>Wm)=>{const n=r(),i=t[e.size]*n.startFromPercentage,o=t[e.size]*n.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},pH=({startOfRange:t,endOfRange:e,current:r})=>{const n=e-t;return n===0?0:(r-t)/n},lj=1,cxe=(t,e,r=()=>Wm)=>{const n=r();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return n.maxPixelScroll;if(t===e.startScrollingFrom)return lj;const o=1-pH({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),s=n.maxPixelScroll*n.ease(o);return Math.ceil(s)},uxe=(t,e,r)=>{const n=r(),i=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,s=e,a=o,c=Date.now()-s;if(c>=o)return t;if(c<i)return lj;const f=pH({startOfRange:i,endOfRange:a,current:c}),d=t*n.ease(f);return Math.ceil(d)},TL=({distanceToEdge:t,thresholds:e,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=cxe(t,e,i);return o===0?0:n?Math.max(uxe(o,r,i),lj):o},IL=({container:t,distanceToEdges:e,dragStartTime:r,axis:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=lxe(t,n,o);return e[n.end]<e[n.start]?TL({distanceToEdge:e[n.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*TL({distanceToEdge:e[n.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},fxe=({container:t,subject:e,proposedScroll:r})=>{const n=e.height>t.height,i=e.width>t.width;return!i&&!n?r:i&&n?null:{x:i?0:r.x,y:n?0:r.y}};const dxe=Fq(t=>t===0?0:t);var mH=({dragStartTime:t,container:e,subject:r,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s={top:n.y-e.top,right:e.right-n.x,bottom:e.bottom-n.y,left:n.x-e.left},a=IL({container:e,distanceToEdges:s,dragStartTime:t,axis:ej,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),l=IL({container:e,distanceToEdges:s,dragStartTime:t,axis:Wq,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),c=dxe({x:l,y:a});if(Fa(c,jr))return null;const f=fxe({container:e,subject:r,proposedScroll:c});return f?Fa(f,jr)?null:f:null};const hxe=Fq(t=>t===0?0:t>0?1:-1),cj=(()=>{const t=(e,r)=>e<0?e:e>r?e-r:0;return({current:e,max:r,change:n})=>{const i=Hr(e,n),o={x:t(i.x,r.x),y:t(i.y,r.y)};return Fa(o,jr)?null:o}})(),yH=({max:t,current:e,change:r})=>{const n={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=hxe(r),o=cj({max:n,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},uj=(t,e)=>yH({current:t.scroll.current,max:t.scroll.max,change:e}),pxe=(t,e)=>{if(!uj(t,e))return null;const r=t.scroll.max,n=t.scroll.current;return cj({current:n,max:r,change:e})},fj=(t,e)=>{const r=t.frame;return r?yH({current:r.scroll.current,max:r.scroll.max,change:e}):!1},mxe=(t,e)=>{const r=t.frame;return!r||!fj(t,e)?null:cj({current:r.scroll.current,max:r.scroll.max,change:e})};var yxe=({viewport:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=mH({dragStartTime:n,container:t.frame,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return s&&uj(t,s)?s:null},gxe=({droppable:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=t.frame;if(!s)return null;const a=mH({dragStartTime:n,container:s.pageMarginBox,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return a&&fj(t,a)?a:null},NL=({state:t,dragStartTime:e,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:i,getAutoScrollerOptions:o})=>{const s=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const d=t.viewport,h=yxe({dragStartTime:e,viewport:d,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const c=axe({center:s,destination:oi(t.impact),droppables:t.dimensions.droppables});if(!c)return;const f=gxe({dragStartTime:e,droppable:c,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});f&&i(c.descriptor.id,f)},vxe=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r=()=>Wm})=>{const n=Fm(t),i=Fm(e);let o=null;const s=c=>{o||ee(!1);const{shouldUseTimeDampening:f,dragStartTime:d}=o;NL({state:c,scrollWindow:n,scrollDroppable:i,dragStartTime:d,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:c=>{o&&ee(!1);const f=Date.now();let d=!1;const h=()=>{d=!0};NL({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:f,shouldUseTimeDampening:d},d&&s(c)},stop:()=>{o&&(n.cancel(),i.cancel(),o=null)},scroll:s}},bxe=({move:t,scrollDroppable:e,scrollWindow:r})=>{const n=(a,l)=>{const c=Hr(a.current.client.selection,l);t({client:c})},i=(a,l)=>{if(!fj(a,l))return l;const c=mxe(a,l);if(!c)return e(a.descriptor.id,l),null;const f=ri(l,c);return e(a.descriptor.id,f),ri(l,f)},o=(a,l,c)=>{if(!a||!uj(l,c))return c;const f=pxe(l,c);if(!f)return r(c),null;const d=ri(c,f);return r(d),ri(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=oi(a.impact);c||ee(!1);const f=i(a.dimensions.droppables[c],l);if(!f)return;const d=a.viewport,h=o(a.isWindowScrollAllowed,d,f);h&&n(a,h)}},xxe=({scrollDroppable:t,scrollWindow:e,move:r,getAutoScrollerOptions:n})=>{const i=vxe({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n}),o=bxe({move:r,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:i.start,stop:i.stop}};const ld="data-rfd",cd=(()=>{const t=`${ld}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),ET=(()=>{const t=`${ld}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),_xe=(()=>{const t=`${ld}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),kL={contextId:`${ld}-scroll-container-context-id`},wxe=t=>e=>`[${e}="${t}"]`,Fh=(t,e)=>t.map(r=>{const n=r.styles[e];return n?`${r.selector} { ${n} }`:""}).join(" "),Sxe="pointer-events: none;";var Exe=t=>{const e=wxe(t),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(cd.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:Sxe,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${Gp.outOfTheWay};
    `;return{selector:e(ET.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:e(_xe.contextId),styles:{always:"overflow-anchor: none;"}},s=[n,r,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Fh(s,"always"),resting:Fh(s,"resting"),dragging:Fh(s,"dragging"),dropAnimating:Fh(s,"dropAnimating"),userCancel:Fh(s,"userCancel")}};const Axe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect;var si=Axe;const SA=()=>{const t=document.querySelector("head");return t||ee(!1),t},OL=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function Cxe(t,e){const r=He(()=>Exe(t),[t]),n=E.useRef(null),i=E.useRef(null),o=pe(Or(d=>{const h=i.current;h||ee(!1),h.textContent=d}),[]),s=pe(d=>{const h=n.current;h||ee(!1),h.textContent=d},[]);si(()=>{!n.current&&!i.current||ee(!1);const d=OL(e),h=OL(e);return n.current=d,i.current=h,d.setAttribute(`${ld}-always`,t),h.setAttribute(`${ld}-dynamic`,t),SA().appendChild(d),SA().appendChild(h),s(r.always),o(r.resting),()=>{const p=m=>{const y=m.current;y||ee(!1),SA().removeChild(y),m.current=null};p(n),p(i)}},[e,s,o,r.always,r.resting,t]);const a=pe(()=>o(r.dragging),[o,r.dragging]),l=pe(d=>{if(d==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),c=pe(()=>{i.current&&o(r.resting)},[o,r.resting]);return He(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function gH(t,e){return Array.from(t.querySelectorAll(e))}var vH=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function P1(t){return t instanceof vH(t).HTMLElement}function Pxe(t,e){const r=`[${cd.contextId}="${t}"]`,n=gH(document,r);if(!n.length)return null;const i=n.find(o=>o.getAttribute(cd.draggableId)===e);return!i||!P1(i)?null:i}function Txe(t){const e=E.useRef({}),r=E.useRef(null),n=E.useRef(null),i=E.useRef(!1),o=pe(function(h,p){const m={id:h,focus:p};return e.current[h]=m,function(){const g=e.current;g[h]!==m&&delete g[h]}},[]),s=pe(function(h){const p=Pxe(t,h);p&&p!==document.activeElement&&p.focus()},[t]),a=pe(function(h,p){r.current===h&&(r.current=p)},[]),l=pe(function(){n.current||i.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&s(h)}))},[s]),c=pe(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute(cd.draggableId)===h&&(r.current=h)},[]);return si(()=>(i.current=!0,function(){i.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),He(()=>({register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,c,l,a])}function Ixe(){const t={draggables:{},droppables:{}},e=[];function r(d){return e.push(d),function(){const p=e.indexOf(d);p!==-1&&e.splice(p,1)}}function n(d){e.length&&e.forEach(h=>h(d))}function i(d){return t.draggables[d]||null}function o(d){const h=i(d);return h||ee(!1),h}const s={register:d=>{t.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,p=i(h);p&&d.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:o,findById:i,exists:d=>!!i(d),getAllByType:d=>Object.values(t.draggables).filter(h=>h.descriptor.type===d)};function a(d){return t.droppables[d]||null}function l(d){const h=a(d);return h||ee(!1),h}const c={register:d=>{t.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete t.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(t.droppables).filter(h=>h.descriptor.type===d)};function f(){t.draggables={},t.droppables={},e.length=0}return{draggable:s,droppable:c,subscribe:r,clean:f}}function Nxe(){const t=He(Ixe,[]);return E.useEffect(()=>function(){O.version.startsWith("16")||O.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var dj=O.createContext(null),Zx=()=>{const t=document.body;return t||ee(!1),t};const kxe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Oxe=kxe;const jxe=t=>`rfd-announcement-${t}`;function Rxe(t){const e=He(()=>jxe(t),[t]),r=E.useRef(null);return E.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Qx(o.style,Oxe),Zx().appendChild(o),function(){setTimeout(function(){const l=Zx();l.contains(o)&&l.removeChild(o),o===r.current&&(r.current=null)})}},[e]),pe(i=>{const o=r.current;if(o){o.textContent=i;return}},[])}let $xe=0;const bH={separator:"::"};function Dxe(t,e=bH){return He(()=>`${t}${e.separator}${$xe++}`,[e.separator,t])}function Mxe(t,e=bH){const r=O.useId();return He(()=>`${t}${e.separator}${r}`,[e.separator,t,r])}var hj="useId"in O?Mxe:Dxe;function Fxe({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function Lxe({contextId:t,text:e}){const r=hj("hidden-text",{separator:"-"}),n=He(()=>Fxe({contextId:t,uniqueId:r}),[r,t]);return E.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=e,o.style.display="none",Zx().appendChild(o),function(){const a=Zx();a.contains(o)&&a.removeChild(o)}},[n,e]),n}var T1=O.createContext(null);function xH(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),e}function Bxe(){let t=null;function e(){return!!t}function r(s){return s===t}function n(s){t&&ee(!1);const a={abandon:s};return t=a,a}function i(){t||ee(!1),t=null}function o(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:r,claim:n,release:i,tryAbandon:o}}function zm(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Uxe=9,Vxe=13,pj=27,_H=32,Wxe=33,zxe=34,Gxe=35,qxe=36,Hxe=37,Kxe=38,Qxe=39,Yxe=40,Xxe={[Vxe]:!0,[Uxe]:!0};var wH=t=>{Xxe[t.keyCode]&&t.preventDefault()};const Jxe=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(n=>`on${n}`in document)||t})();var I1=Jxe;const SH=0,jL=5;function Zxe(t,e){return Math.abs(e.x-t.x)>=jL||Math.abs(e.y-t.y)>=jL}const RL={type:"IDLE"};function e_e({cancel:t,completed:e,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:s,clientY:a}=i;if(o!==SH)return;const l={x:s,y:a},c=r();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&ee(!1);const f=c.point;if(!Zxe(f,l))return;i.preventDefault();const d=c.actions.fluidLift(l);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:i=>{const o=r();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{r().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(r().type==="PENDING"){t();return}if(i.keyCode===pj){i.preventDefault(),t();return}wH(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=r();if(o.type==="IDLE"&&ee(!1),o.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:I1,fn:t}]}function t_e(t){const e=E.useRef(RL),r=E.useRef(Ma),n=He(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==SH||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=t.findClosestDraggableId(d);if(!h)return;const p=t.tryGetLock(h,s,{sourceEvent:d});if(!p)return;d.preventDefault();const m={x:d.clientX,y:d.clientY};r.current(),c(p,m)}}),[t]),i=He(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const d=t.findClosestDraggableId(f);if(!d)return;const h=t.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||t.canGetLock(d)&&f.preventDefault())}}),[t]),o=pe(function(){const d={passive:!1,capture:!0};r.current=ki(window,[i,n],d)},[i,n]),s=pe(()=>{e.current.type!=="IDLE"&&(e.current=RL,r.current(),o())},[o]),a=pe(()=>{const f=e.current;s(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[s]),l=pe(function(){const d={capture:!0,passive:!1},h=e_e({cancel:a,completed:s,getPhase:()=>e.current,setPhase:p=>{e.current=p}});r.current=ki(window,h,d)},[a,s]),c=pe(function(d,h){e.current.type!=="IDLE"&&ee(!1),e.current={type:"PENDING",point:h,actions:d},l()},[l]);si(function(){return o(),function(){r.current()}},[o])}function r_e(){}const n_e={[zxe]:!0,[Wxe]:!0,[qxe]:!0,[Gxe]:!0};function i_e(t,e){function r(){e(),t.cancel()}function n(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===pj){i.preventDefault(),r();return}if(i.keyCode===_H){i.preventDefault(),n();return}if(i.keyCode===Yxe){i.preventDefault(),t.moveDown();return}if(i.keyCode===Kxe){i.preventDefault(),t.moveUp();return}if(i.keyCode===Qxe){i.preventDefault(),t.moveRight();return}if(i.keyCode===Hxe){i.preventDefault(),t.moveLeft();return}if(n_e[i.keyCode]){i.preventDefault();return}wH(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:I1,fn:r}]}function o_e(t){const e=E.useRef(r_e),r=He(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==_H)return;const s=t.findClosestDraggableId(o);if(!s)return;const a=t.tryGetLock(s,f,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const c=a.snapLift();e.current();function f(){l||ee(!1),l=!1,e.current(),n()}e.current=ki(window,i_e(c,f),{capture:!0,passive:!1})}}),[t]),n=pe(function(){const o={passive:!1,capture:!0};e.current=ki(window,[r],o)},[r]);si(function(){return n(),function(){e.current()}},[n])}const EA={type:"IDLE"},s_e=120,a_e=.15;function l_e({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(e().type!=="DRAGGING"){t();return}r.keyCode===pj&&r.preventDefault(),t()}},{eventName:I1,fn:t}]}function c_e({cancel:t,completed:e,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:o,clientY:s}=n.touches[0],a={x:o,y:s};n.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){t();return}n.preventDefault(),t()}},{eventName:"touchforcechange",fn:n=>{const i=r();i.type==="IDLE"&&ee(!1);const o=n.touches[0];if(!o||!(o.force>=a_e))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&t();return}if(a){if(i.hasMoved){n.preventDefault();return}t();return}n.preventDefault()}},{eventName:I1,fn:t}]}function u_e(t){const e=E.useRef(EA),r=E.useRef(Ma),n=pe(function(){return e.current},[]),i=pe(function(p){e.current=p},[]),o=He(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const m=t.findClosestDraggableId(p);if(!m)return;const y=t.tryGetLock(m,a,{sourceEvent:p});if(!y)return;const g=p.touches[0],{clientX:b,clientY:v}=g,x={x:b,y:v};r.current(),d(y,x)}}),[t]),s=pe(function(){const p={capture:!0,passive:!1};r.current=ki(window,[o],p)},[o]),a=pe(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(EA),r.current(),s())},[s,i]),l=pe(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=pe(function(){const p={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:n},y=ki(window,c_e(m),p),g=ki(window,l_e(m),p);r.current=function(){y(),g()}},[l,n,a]),f=pe(function(){const p=n();p.type!=="PENDING"&&ee(!1);const m=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[n,i]),d=pe(function(p,m){n().type!=="IDLE"&&ee(!1);const y=setTimeout(f,s_e);i({type:"PENDING",point:m,actions:p,longPressTimerId:y}),c()},[c,n,i,f]);si(function(){return s(),function(){r.current();const m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(EA))}},[n,s,i]),si(function(){return ki(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const f_e=["input","button","textarea","select","option","optgroup","video","audio"];function EH(t,e){if(e==null)return!1;if(f_e.includes(e.tagName.toLowerCase()))return!0;const n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===t?!1:EH(t,e.parentElement)}function d_e(t,e){const r=e.target;return P1(r)?EH(t,r):!1}var h_e=t=>so(t.getBoundingClientRect()).center;function p_e(t){return t instanceof vH(t).Element}const m_e=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||t})();function AH(t,e){return t==null?null:t[m_e](e)?t:AH(t.parentElement,e)}function y_e(t,e){return t.closest?t.closest(e):AH(t,e)}function g_e(t){return`[${cd.contextId}="${t}"]`}function v_e(t,e){const r=e.target;if(!p_e(r))return null;const n=g_e(t),i=y_e(r,n);return!i||!P1(i)?null:i}function b_e(t,e){const r=v_e(t,e);return r?r.getAttribute(cd.draggableId):null}function x_e(t,e){const r=`[${ET.contextId}="${t}"]`,i=gH(document,r).find(o=>o.getAttribute(ET.id)===e);return!i||!P1(i)?null:i}function __e(t){t.preventDefault()}function Wv({expected:t,phase:e,isLockActive:r,shouldWarn:n}){return!(!r()||t!==e)}function CH({lockAPI:t,store:e,registry:r,draggableId:n}){if(t.isClaimed())return!1;const i=r.draggable.findById(n);return!(!i||!i.options.isEnabled||!hH(e.getState(),n))}function w_e({lockAPI:t,contextId:e,store:r,registry:n,draggableId:i,forceSensorStop:o,sourceEvent:s}){if(!CH({lockAPI:t,store:r,registry:n,draggableId:i}))return null;const l=n.draggable.getById(i),c=x_e(e,l.descriptor.id);if(!c||s&&!l.options.canDragInteractiveElements&&d_e(c,s))return null;const f=t.claim(o||Ma);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return t.isActive(f)}function m(_,w){Wv({expected:_,phase:d,isLockActive:p,shouldWarn:!0})&&r.dispatch(w())}const y=m.bind(null,"DRAGGING");function g(_){function w(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(w(),ee(!1)),r.dispatch(sbe(_.liftActionArgs)),d="DRAGGING";function A(C,T={shouldBlockNextClick:!1}){if(_.cleanup(),T.shouldBlockNextClick){const P=ki(window,[{eventName:"click",fn:__e,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}w(),r.dispatch(oH({reason:C}))}return{isActive:()=>Wv({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>A("DROP",C),cancel:C=>A("CANCEL",C),..._.actions}}function b(_){const w=Fm(C=>{y(()=>iH({client:C}))});return{...g({liftActionArgs:{id:i,clientSelection:_,movementMode:"FLUID"},cleanup:()=>w.cancel(),actions:{move:w}}),move:w}}function v(){const _={moveUp:()=>y(mbe),moveRight:()=>y(gbe),moveDown:()=>y(ybe),moveLeft:()=>y(vbe)};return g({liftActionArgs:{id:i,clientSelection:h_e(c),movementMode:"SNAP"},cleanup:Ma,actions:_})}function x(){Wv({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>Wv({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:v,abort:x}}const S_e=[t_e,o_e,u_e];function E_e({contextId:t,store:e,registry:r,customSensors:n,enableDefaultSensors:i}){const o=[...i?S_e:[],...n||[]],s=E.useState(()=>Bxe())[0],a=pe(function(g,b){zm(g)&&!zm(b)&&s.tryAbandon()},[s]);si(function(){let g=e.getState();return e.subscribe(()=>{const v=e.getState();a(g,v),g=v})},[s,e,a]),si(()=>s.tryAbandon,[s.tryAbandon]);const l=pe(y=>CH({lockAPI:s,registry:r,store:e,draggableId:y}),[s,r,e]),c=pe((y,g,b)=>w_e({lockAPI:s,registry:r,contextId:t,store:e,draggableId:y,forceSensorStop:g||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[t,s,r,e]),f=pe(y=>b_e(t,y),[t]),d=pe(y=>{const g=r.draggable.findById(y);return g?g.options:null},[r.draggable]),h=pe(function(){s.isClaimed()&&(s.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(oj()))},[s,e]),p=pe(()=>s.isClaimed(),[s]),m=He(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:f,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:p}),[l,c,f,d,h,p]);for(let y=0;y<o.length;y++)o[y](m)}const A_e=t=>({onBeforeCapture:e=>{const r=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};O.version.startsWith("16")||O.version.startsWith("17")?r():lg.flushSync(r)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),C_e=t=>({...Wm,...t.autoScrollerOptions,durationDampening:{...Wm.durationDampening,...t.autoScrollerOptions}});function Lh(t){return t.current||ee(!1),t.current}function P_e(t){const{contextId:e,setCallbacks:r,sensors:n,nonce:i,dragHandleUsageInstructions:o}=t,s=E.useRef(null),a=xH(t),l=pe(()=>A_e(a.current),[a]),c=pe(()=>C_e(a.current),[a]),f=Rxe(e),d=Lxe({contextId:e,text:o}),h=Cxe(e,i),p=pe(P=>{Lh(s).dispatch(P)},[]),m=He(()=>iL({publishWhileDragging:lbe,updateDroppableScroll:ube,updateDroppableIsEnabled:fbe,updateDroppableIsCombineEnabled:dbe,collectionStarting:cbe},p),[p]),y=Nxe(),g=He(()=>nxe(y,m),[y,m]),b=He(()=>xxe({scrollWindow:ixe,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:c,...iL({move:iH},p)}),[g.scrollDroppable,p,c]),v=Txe(e),x=He(()=>Zbe({announce:f,autoScroller:b,dimensionMarshal:g,focusMarshal:v,getResponders:l,styleMarshal:h}),[f,b,g,v,l,h]);s.current=x;const S=pe(()=>{const P=Lh(s);P.getState().phase!=="IDLE"&&P.dispatch(oj())},[]),_=pe(()=>{const P=Lh(s).getState();return P.phase==="DROP_ANIMATING"?!0:P.phase==="IDLE"?!1:P.isDragging},[]),w=He(()=>({isDragging:_,tryAbort:S}),[_,S]);r(w);const A=pe(P=>hH(Lh(s).getState(),P),[]),C=pe(()=>Il(Lh(s).getState()),[]),T=He(()=>({marshal:g,focus:v,contextId:e,canLift:A,isMovementAllowed:C,dragHandleUsageInstructionsId:d,registry:y}),[e,g,d,v,A,C,y]);return E_e({contextId:e,store:x,registry:y,customSensors:n||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),E.useEffect(()=>S,[S]),O.createElement(T1.Provider,{value:T},O.createElement(Fve,{context:dj,store:x},t.children))}let T_e=0;function I_e(){return He(()=>`${T_e++}`,[])}function N_e(){return O.useId()}var k_e="useId"in O?N_e:I_e;function O_e(t){const e=k_e(),r=t.dragHandleUsageInstructions||nb.dragHandleUsageInstructions;return O.createElement(Kve,null,n=>O.createElement(P_e,{nonce:t.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const $L={dragging:5e3,dropAnimating:4500},j_e=(t,e)=>e?Gp.drop(e.duration):t?Gp.snap:Gp.fluid,R_e=(t,e)=>{if(t)return e?Vm.opacity.drop:Vm.opacity.combining},$_e=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function D_e(t){const r=t.dimension.client,{offset:n,combineWith:i,dropping:o}=t,s=!!i,a=$_e(t),l=!!o,c=l?wT.drop(n,s):wT.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:j_e(a,o),transform:c,opacity:R_e(s,l),zIndex:l?$L.dropAnimating:$L.dragging,pointerEvents:"none"}}function M_e(t){return{transform:wT.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function F_e(t){return t.type==="DRAGGING"?D_e(t):M_e(t)}function L_e(t,e,r=jr){const n=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=jq(i,n),s=Kx(o,r),a={client:o,tagName:e.tagName.toLowerCase(),display:n.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:o,page:s}}function B_e(t){const e=hj("draggable"),{descriptor:r,registry:n,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}=t,l=He(()=>({canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}),[o,a,s]),c=pe(p=>{const m=i();return m||ee(!1),L_e(r,m,p)},[r,i]),f=He(()=>({uniqueId:e,descriptor:r,options:l,getDimension:c}),[r,c,l,e]),d=E.useRef(f),h=E.useRef(!0);si(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),si(()=>{if(h.current){h.current=!1;return}const p=d.current;d.current=f,n.draggable.update(f,p)},[f,n.draggable])}var mj=O.createContext(null);function e_(t){const e=E.useContext(t);return e||ee(!1),e}function U_e(t){t.preventDefault()}const V_e=t=>{const e=E.useRef(null),r=pe((w=null)=>{e.current=w},[]),n=pe(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:s}=e_(T1),{type:a,droppableId:l}=e_(mj),c=He(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:f,draggableId:d,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:y,mapped:g,dropAnimationFinished:b}=t;if(!y){const w=He(()=>({descriptor:c,registry:s,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:h}),[c,s,n,m,p,h]);B_e(w)}const v=He(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:U_e}:null,[i,o,d,h]),x=pe(w=>{g.type==="DRAGGING"&&g.dropping&&w.propertyName==="transform"&&(O.version.startsWith("16")||O.version.startsWith("17")?b():lg.flushSync(b))},[b,g]),S=He(()=>{const w=F_e(g),A=g.type==="DRAGGING"&&g.dropping?x:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:w,onTransitionEnd:A},dragHandleProps:v}},[i,v,d,g,x,r]),_=He(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return O.createElement(O.Fragment,null,f(S,g.snapshot,_))};var W_e=V_e,PH=(t,e)=>t===e,TH=t=>{const{combine:e,destination:r}=t;return r?r.droppableId:e?e.droppableId:null};const z_e=t=>t.combine?t.combine.draggableId:null,G_e=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function q_e(){const t=Or((i,o)=>({x:i,y:o})),e=Or((i,o,s=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:s,combineWith:a,combineTargetFor:null})),r=Or((i,o,s,a,l=null,c=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:i,dimension:s,forceShouldAnimate:f,snapshot:e(o,a,l,c,null)}}));return(i,o)=>{if(zm(i)){if(i.critical.draggable.id!==o.draggableId)return null;const s=i.current.client.offset,a=i.dimensions.draggables[o.draggableId],l=oi(i.impact),c=G_e(i.impact),f=i.forceShouldAnimate;return r(t(s.x,s.y),i.movementMode,a,o.isClone,l,c,f)}if(i.phase==="DROP_ANIMATING"){const s=i.completed;if(s.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=i.dimensions.draggables[o.draggableId],c=s.result,f=c.mode,d=TH(c),h=z_e(c),m={duration:i.dropDuration,curve:aj.drop,moveTo:i.newHomeClientOffset,opacity:h?Vm.opacity.drop:null,scale:h?Vm.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:l,dropping:m,draggingOver:d,combineWith:h,mode:f,forceShouldAnimate:null,snapshot:e(f,a,d,h,m)}}}return null}}function IH(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const H_e={mapped:{type:"SECONDARY",offset:jr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:IH(null)}};function K_e(){const t=Or((s,a)=>({x:s,y:a})),e=Or(IH),r=Or((s,a=null,l)=>({mapped:{type:"SECONDARY",offset:s,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),n=s=>s?r(jr,s,!0):null,i=(s,a,l,c)=>{const f=l.displaced.visible[s],d=!!(c.inVirtualList&&c.effected[s]),h=E1(l),p=h&&h.draggableId===s?a:null;if(!f){if(!d)return n(p);if(l.displaced.invisible[s])return null;const g=Qd(c.displacedBy.point),b=t(g.x,g.y);return r(b,p,!0)}if(d)return n(p);const m=l.displacedBy.point,y=t(m.x,m.y);return r(y,p,f.shouldAnimate)};return(s,a)=>{if(zm(s))return s.critical.draggable.id===a.draggableId?null:i(a.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){const l=s.completed;return l.result.draggableId===a.draggableId?null:i(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const Q_e=()=>{const t=q_e(),e=K_e();return(n,i)=>t(n,i)||e(n,i)||H_e},Y_e={dropAnimationFinished:sH},X_e=Nq(Q_e,Y_e,null,{context:dj,areStatePropsEqual:PH})(W_e);var J_e=X_e;function NH(t){return e_(mj).isUsingCloneFor===t.draggableId&&!t.isClone?null:O.createElement(J_e,t)}function Z_e(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return O.createElement(NH,Qx({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const kH=t=>e=>t===e,ewe=kH("scroll"),twe=kH("auto"),DL=(t,e)=>e(t.overflowX)||e(t.overflowY),rwe=t=>{const e=window.getComputedStyle(t),r={overflowX:e.overflowX,overflowY:e.overflowY};return DL(r,ewe)||DL(r,twe)},nwe=()=>!1,OH=t=>t==null?null:t===document.body?nwe()?t:null:t===document.documentElement?null:rwe(t)?t:OH(t.parentElement);var iwe=OH,AT=t=>({x:t.scrollLeft,y:t.scrollTop});const jH=t=>t?window.getComputedStyle(t).position==="fixed"?!0:jH(t.parentElement):!1;var owe=t=>{const e=iwe(t),r=jH(t);return{closestScrollable:e,isFixedOnPage:r}},swe=({descriptor:t,isEnabled:e,isCombineEnabled:r,isFixedOnPage:n,direction:i,client:o,page:s,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,m=uH({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:jr,displacement:jr}}}})(),c=i==="vertical"?ej:Wq,f=ad({page:s,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:e,client:o,page:s,frame:l,subject:f}};const awe=(t,e)=>{const r=Rq(t);if(!e||t!==e)return r;const n=r.paddingBox.top-e.scrollTop,i=r.paddingBox.left-e.scrollLeft,o=n+e.scrollHeight,s=i+e.scrollWidth,l=YO({top:n,right:s,bottom:o,left:i},r.border);return XO({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var lwe=({ref:t,descriptor:e,env:r,windowScroll:n,direction:i,isDropDisabled:o,isCombineEnabled:s,shouldClipSubject:a})=>{const l=r.closestScrollable,c=awe(t,l),f=Kx(c,n),d=(()=>{if(!l)return null;const p=Rq(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:Kx(p,n),scroll:AT(l),scrollSize:m,shouldClipSubject:a}})();return swe({descriptor:e,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:c,page:f,closest:d})};const cwe={passive:!1},uwe={passive:!0};var ML=t=>t.shouldPublishImmediately?cwe:uwe;const zv=t=>t&&t.env.closestScrollable||null;function fwe(t){const e=E.useRef(null),r=e_(T1),n=hj("droppable"),{registry:i,marshal:o}=r,s=xH(t),a=He(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=E.useRef(a),c=He(()=>Or((S,_)=>{e.current||ee(!1);const w={x:S,y:_};o.updateDroppableScroll(a.id,w)}),[a.id,o]),f=pe(()=>{const S=e.current;return!S||!S.env.closestScrollable?jr:AT(S.env.closestScrollable)},[]),d=pe(()=>{const S=f();c(S.x,S.y)},[f,c]),h=He(()=>Fm(d),[d]),p=pe(()=>{const S=e.current,_=zv(S);if(S&&_||ee(!1),S.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),m=pe((S,_)=>{e.current&&ee(!1);const w=s.current,A=w.getDroppableRef();A||ee(!1);const C=owe(A),T={ref:A,descriptor:a,env:C,scrollOptions:_};e.current=T;const P=lwe({ref:A,descriptor:a,env:C,windowScroll:S,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),I=C.closestScrollable;return I&&(I.setAttribute(kL.contextId,r.contextId),I.addEventListener("scroll",p,ML(T.scrollOptions))),P},[r.contextId,a,p,s]),y=pe(()=>{const S=e.current,_=zv(S);return S&&_||ee(!1),AT(_)},[]),g=pe(()=>{const S=e.current;S||ee(!1);const _=zv(S);e.current=null,_&&(h.cancel(),_.removeAttribute(kL.contextId),_.removeEventListener("scroll",p,ML(S.scrollOptions)))},[p,h]),b=pe(S=>{const _=e.current;_||ee(!1);const w=zv(_);w||ee(!1),w.scrollTop+=S.y,w.scrollLeft+=S.x},[]),v=He(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:y,dragStopped:g,scroll:b}),[g,m,y,b]),x=He(()=>({uniqueId:n,descriptor:a,callbacks:v}),[v,a,n]);si(()=>(l.current=x.descriptor,i.droppable.register(x),()=>{e.current&&g(),i.droppable.unregister(x)}),[v,a,g,x,o,i.droppable]),si(()=>{e.current&&o.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,o]),si(()=>{e.current&&o.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,o])}function AA(){}const FL={width:0,height:0,margin:t0e},dwe=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>t||r==="close"?FL:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},hwe=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>{const n=dwe({isAnimatingOpenOnMount:t,placeholder:e,animate:r});return{display:e.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Gp.placeholder:null}},pwe=t=>{const e=E.useRef(null),r=pe(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:n,onTransitionEnd:i,onClose:o,contextId:s}=t,[a,l]=E.useState(t.animate==="open");E.useEffect(()=>a?n!=="open"?(r(),l(!1),AA):e.current?AA:(e.current=setTimeout(()=>{e.current=null,l(!1)}),r):AA,[n,a,r]);const c=pe(d=>{d.propertyName==="height"&&(i(),n==="close"&&o())},[n,o,i]),f=hwe({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return O.createElement(t.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":s,onTransitionEnd:c,ref:t.innerRef})};var mwe=O.memo(pwe);class ywe extends O.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,r){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const gwe=t=>{const e=E.useContext(T1);e||ee(!1);const{contextId:r,isMovementAllowed:n}=e,i=E.useRef(null),o=E.useRef(null),{children:s,droppableId:a,type:l,mode:c,direction:f,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:p,snapshot:m,useClone:y,updateViewportMaxScroll:g,getContainerForClone:b}=t,v=pe(()=>i.current,[]),x=pe((I=null)=>{i.current=I},[]);pe(()=>o.current,[]);const S=pe((I=null)=>{o.current=I},[]),_=pe(()=>{n()&&g({maxScroll:dH()})},[n,g]);fwe({droppableId:a,type:l,mode:c,direction:f,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:v});const w=He(()=>O.createElement(ywe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:I,data:k,animate:N})=>O.createElement(mwe,{placeholder:k,onClose:I,innerRef:S,animate:N,contextId:r,onTransitionEnd:_})),[r,_,t.placeholder,t.shouldAnimatePlaceholder,S]),A=He(()=>({innerRef:x,placeholder:w,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,w,x]),C=y?y.dragging.draggableId:null,T=He(()=>({droppableId:a,type:l,isUsingCloneFor:C}),[a,C,l]);function P(){if(!y)return null;const{dragging:I,render:k}=y,N=O.createElement(NH,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(j,L)=>k(j,L,I));return mte.createPortal(N,b())}return O.createElement(mj.Provider,{value:T},s(A,m),P())};var vwe=gwe;function bwe(){return document.body||ee(!1),document.body}const LL={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:bwe},RH=t=>{let e={...t},r;for(r in LL)t[r]===void 0&&(e={...e,[r]:LL[r]});return e},CA=(t,e)=>t===e.droppable.type,BL=(t,e)=>e.draggables[t.draggable.id],xwe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},r=Or(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=Or((o,s,a,l,c,f)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===o){const m=f?{render:f,dragging:r(c.descriptor)}:null,y={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:m}}if(!s)return e;if(!l)return t;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,s)=>{const a=RH(s),l=a.droppableId,c=a.type,f=!a.isDropDisabled,d=a.renderClone;if(zm(o)){const h=o.critical;if(!CA(c,h))return e;const p=BL(h,o.dimensions),m=oi(o.impact)===l;return n(l,f,m,m,p,d)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!CA(c,h.critical))return e;const p=BL(h.critical,o.dimensions);return n(l,f,TH(h.result)===l,oi(h.impact)===l,p,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!CA(c,h.critical))return e;const p=oi(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),y=h.critical.droppable.id===l;return p?m?t:e:y?t:e}return e}},_we={updateViewportMaxScroll:pbe},wwe=Nq(xwe,_we,(t,e,r)=>({...RH(r),...t,...e}),{context:dj,areStatePropsEqual:PH})(vwe);var Swe=wwe;const Ewe=["0","1","2","3"],Awe=({defaultPlayers:t,onSubmit:e})=>{const{register:r,reset:n,control:i,getValues:o,setValue:s}=Kd({defaultValues:t}),a=Ya({control:i,name:["0.proPicUrl","0.teamPicUrl","1.proPicUrl","1.teamPicUrl","2.proPicUrl","2.teamPicUrl","3.proPicUrl","3.teamPicUrl"]}),l=Ya({control:i,name:["0.color","1.color","2.color","3.color"]}),c=E.useCallback(p=>{if(!p.destination)return;const m=["0","1","2","3"],[y]=m.splice(p.source.index,1);m.splice(p.destination.index,0,y),n({0:o(m[0]),1:o(m[1]),2:o(m[2]),3:o(m[3])})},[o,n]),f=E.useCallback(p=>{const m=p.currentTarget.getAttribute("data-index"),y=p.currentTarget.getAttribute("data-type"),g=o(`${m}.${y}`),b=prompt("新的圖片網址",g??"");b!==null&&s(`${m}.${y}`,b)},[o,s]),d=E.useCallback(()=>{n()},[n]),h=E.useCallback(()=>{e==null||e(o())},[o,e]);return E.useEffect(()=>{n({0:{...t[0]},1:{...t[1]},2:{...t[2]},3:{...t[3]}})},[t,n]),u.jsxs("div",{children:[u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-8"}),u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"flex font-semibold gap-2 text-center",children:[u.jsx("div",{className:"flex-1"}),u.jsx("div",{className:"flex-[2]",children:"圖片"}),u.jsx("div",{className:"flex-[2]",children:"隊伍"}),u.jsx("div",{className:"flex-[5]",children:"隊伍名稱／稱號"}),u.jsx("div",{className:"flex-[5]",children:"名稱"}),u.jsx("div",{className:"flex-[3]",children:"暱稱"}),u.jsx("div",{className:"flex-[3]",children:"顏色"})]})})]}),u.jsxs("div",{className:"flex",children:[u.jsxs("div",{className:"w-8 flex flex-col justify-around font-semibold",children:[u.jsx("div",{children:"東"}),u.jsx("div",{children:"南"}),u.jsx("div",{children:"西"}),u.jsx("div",{children:"北"})]}),u.jsx("div",{className:"flex-1",children:u.jsx(O_e,{onDragEnd:c,children:u.jsx(Swe,{droppableId:"droppable",children:p=>u.jsxs("div",{...p.droppableProps,ref:p.innerRef,children:[Ewe.map((m,y)=>u.jsx(Z_e,{draggableId:m,index:y,children:g=>u.jsx("div",{ref:g.innerRef,...g.draggableProps,children:u.jsxs("div",{className:"flex gap-2 py-1 items-center",children:[u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-2xl",...g.dragHandleProps,children:u.jsx("i",{className:"bi bi-grip-vertical"})})}),u.jsx("div",{className:"flex-[2] border border-neutral-400",children:u.jsx("img",{className:"aspect-[18/25] w-full cursor-pointer",src:a[2*y],onClick:f,"data-type":"proPicUrl","data-index":y,alt:""})}),u.jsx("div",{className:"flex-[2] border border-neutral-400",children:u.jsx("img",{className:"aspect-square w-full cursor-pointer",src:a[2*y+1],onClick:f,"data-type":"teamPicUrl","data-index":y,alt:""})}),u.jsx("div",{className:"flex-[5]",children:u.jsx("input",{className:"w-full",...r(`${m}.title`)})}),u.jsx("div",{className:"flex-[5]",children:u.jsx("input",{className:"w-full",...r(`${m}.name`)})}),u.jsx("div",{className:"flex-[3]",children:u.jsx("input",{className:"w-full",...r(`${m}.nickname`)})}),u.jsx("div",{className:"flex-[3]",children:u.jsx("input",{className:"w-full text-white",...r(`${m}.color`),style:{background:l[y]}})})]})})},m)),p.placeholder]})})})})]}),u.jsxs("div",{className:"flex mt-8",children:[u.jsx(Oe,{className:"flex-1",variant:"text",color:"secondary",onClick:d,children:"重置"}),u.jsx(Oe,{className:"flex-1",onClick:h,children:"儲存"})]})]})},PA=[{label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(舊版)"]}),value:"listView-old"},{label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(新版)"]}),value:"listView-new"},{label:u.jsxs("span",{children:[u.jsx("i",{className:"bi-grid-fill"})," 2x2"]}),value:"gridView"}];function Gv({value:t}){return u.jsx(Lt,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const qv=({match:t,matchRound:e,playerIndex:r})=>{var n;return u.jsxs("div",{className:"text-xs",children:[u.jsxs("p",{children:[e.playerResults[r].isRiichi&&u.jsx("span",{children:"立"}),e.resultType===ze.Ron&&e.playerResults[r].type===vt.Lose&&u.jsx("span",{children:"統"}),e.resultType===ze.Ron&&e.playerResults[r].type===vt.Win&&u.jsx("span",{children:"和"}),e.resultType===ze.SelfDrawn&&e.playerResults[r].type===vt.Win&&u.jsx("span",{children:"摸"}),e.resultType===ze.Exhausted&&e.playerResults[r].type===vt.Win&&u.jsx("span",{children:"聽"})]}),e.playerResults[r].isRonDisallowed&&u.jsx("p",{className:"text-red-500 font-semibold",children:"和了禁止"}),(e.resultType===ze.Ron||e.resultType===ze.SelfDrawn)&&e.playerResults[r].type===vt.Win&&u.jsxs("div",{className:"bg-black bg-opacity-10 rounded py-1 px-2 mx-auto inline-block",children:[u.jsx("p",{className:"font-bold",children:u.jsx(Lx,{className:"text-xs text-neutral-600",han:e.playerResults[r].detail.han,fu:e.playerResults[r].detail.fu,yakumanCount:e.playerResults[r].detail.yakumanCount,isManganRoundUp:t.setting.isManganRoundUp==="1"})}),u.jsx("p",{children:(n=e.playerResults[r].detail.yakus)==null?void 0:n.map(({label:i})=>i).join(" ")})]})]})};function $H({params:{matchId:t}}){const{data:e,set:r}=mr("obs/1"),{data:n}=Ko({queryKey:["matches",t],queryFn:({queryKey:$})=>OO($[1])}),{match:i,matchRounds:o,matchCurrentRound:s,matchCurrentRoundDoras:a,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:f,setCurrentRoundDoras:d,setMatchName:h,setMatchPlayers:p,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchHidePlayersDisplay:g,setMatchActiveResultDetail:b,setMatchRoundHasBroadcastedToTrue:v}=rs(t),x=E.useMemo(()=>Object.entries(o??{}).map(([$,de])=>({id:$,...de}))??[],[o]),S=E.useMemo(()=>x.filter(({resultDetail:$,hasBroadcasted:de})=>!!$&&!de),[x]),[_,w]=E.useState(void 0),[A,C]=E.useState(PA[0].value),[T,P]=To(!1),[I,k]=E.useState({initialActivePlayerIndex:"0",initialTargetPlayerIndex:"-1"}),N=Xye(),[j,L]=To(!1),[V,F]=To(!1),M=E.useCallback(()=>{F(!0)},[F]),B=E.useCallback($=>{p($),F(!1)},[p,F]),[z,ae]=To(!1),[te,ge]=To(!1),[Le,Qe]=E.useState({id:null,matchRound:null}),fe=E.useCallback($=>{const de=$.currentTarget.getAttribute("data-matchRoundId");if(!de)return;const Pe=o==null?void 0:o[de];Pe&&(Qe({id:de,matchRound:Pe}),ge(!0))},[o,ge]),ut=E.useCallback($=>{if(!x||!Le.id)return;const de=x.findIndex(({id:Rt})=>Rt===Le.id);if(de===-1)return;l(Le.id,$);let Pe=$;for(let Rt=de+1;Rt<x.length;Rt++){const{id:kn,...qn}=x[Rt],_2={...qn,playerResults:{0:{...qn.playerResults[0],beforeScore:Pe.playerResults[0].afterScore,afterScore:Pe.playerResults[0].afterScore+(qn.playerResults[0].afterScore-qn.playerResults[0].beforeScore)},1:{...qn.playerResults[1],beforeScore:Pe.playerResults[1].afterScore,afterScore:Pe.playerResults[1].afterScore+(qn.playerResults[1].afterScore-qn.playerResults[1].beforeScore)},2:{...qn.playerResults[2],beforeScore:Pe.playerResults[2].afterScore,afterScore:Pe.playerResults[2].afterScore+(qn.playerResults[2].afterScore-qn.playerResults[2].beforeScore)},3:{...qn.playerResults[3],beforeScore:Pe.playerResults[3].afterScore,afterScore:Pe.playerResults[3].afterScore+(qn.playerResults[3].afterScore-qn.playerResults[3].beforeScore)}}};l(kn,_2),Pe=_2}ge(!1),setTimeout(()=>{alert("「下次小心d喇屌 :)」")},0)},[Le.id,x,ge,l]),[,nt]=E.useState(null),Z=E.useCallback($=>{const de=$.currentTarget.getAttribute("data-player-index");if(!de)return;const Pe=i==null?void 0:i.players[de];if(!Pe)return;const Rt=!(s!=null&&s.playerResults[de].isRiichi);N.showConfirmDialog({title:Rt?"確定要立直嗎？":"取消立直？",content:Rt?`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Pe.name}！`:`你是否想取消 ${Pe.name} 的立直？`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[de]:{...s==null?void 0:s.playerResults[de],isRiichi:!(s!=null&&s.playerResults[de].isRiichi)}}})}})},[N,i==null?void 0:i.players,s==null?void 0:s.playerResults,c]),_e=E.useCallback($=>{var Pe;const de=parseInt((Pe=$.currentTarget)==null?void 0:Pe.getAttribute("data-index"),10);typeof de<"u"&&!Number.isNaN(de)&&w(de)},[]),Ae=E.useCallback($=>{if(typeof _<"u"){const de=$[0];if(!de)return;const Pe=[...a];_===-1?Pe.push(de):Pe[_]=de,d(Pe),w(void 0)}},[_,a,d]),q=E.useCallback(()=>{if(typeof _<"u"){const $=[...a];_>-1&&($.splice(_,1),d($),w(void 0))}},[_,a,d]),it=E.useCallback(()=>{w(void 0)},[]),je=E.useCallback($=>{const de=$==null?void 0:$.currentTarget.getAttribute("data-player-index");de&&(k({initialActivePlayerIndex:de}),P())},[P]),xt=E.useCallback(()=>{L(!0)},[L]),zt=E.useCallback(()=>{ae(!0)},[ae]),Fr=E.useCallback(($,de)=>{if(!i||!s)return;const Pe=i.players[$],Rt=s.playerResults[$];switch(de){case"reveal":return c({playerResults:{...s.playerResults,[$]:{...s.playerResults[$],isRevealed:!s.playerResults[$].isRevealed,detail:{...s.playerResults[$].detail,isRevealed:!s.playerResults[$].isRevealed}}}});case"riichi":return N.showConfirmDialog({title:Rt.isRiichi?"取消立直？":"確定要立直嗎？",content:Rt.isRiichi?`你是否想取消 ${Pe.name} 的立直？`:`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],isRiichi:!(s!=null&&s.playerResults[$].isRiichi),detail:{...s.playerResults[$].detail,isRiichied:!s.playerResults[$].isRiichi,raw:{...s.playerResults[$].detail.raw,riichi:!s.playerResults[$].isRiichi}}}}}),Rt.isRiichi||(nt("立直動畫"),setTimeout(()=>{nt(null)},2e3))}});case"ron-self":c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],detail:{...s.playerResults[$].detail,raw:{...s.playerResults[$].detail.raw,"menzenchin-tsumohou":!(s!=null&&s.playerResults[$].detail.isRevealed)}}}}}),k({initialActivePlayerIndex:$,initialTargetPlayerIndex:"-1"}),P();return;case"ron-before":c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],detail:{...s.playerResults[$].detail,raw:{...s.playerResults[$].detail.raw,"menzenchin-tsumohou":!1}}}}}),k({initialActivePlayerIndex:$,initialTargetPlayerIndex:VG($)}),P();return;case"ron-after":c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],detail:{...s.playerResults[$].detail,raw:{...s.playerResults[$].detail.raw,"menzenchin-tsumohou":!1}}}}}),k({initialActivePlayerIndex:$,initialTargetPlayerIndex:WG($)}),P();return;case"ron-opposite":c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],detail:{...s.playerResults[$].detail,raw:{...s.playerResults[$].detail.raw,"menzenchin-tsumohou":!1}}}}}),k({initialActivePlayerIndex:$,initialTargetPlayerIndex:zG($)}),P();return;case"dora-normal-plus":return c({playerResults:{...s.playerResults,[$]:{...s.playerResults[$],detail:{...s.playerResults[$].detail,dora:s.playerResults[$].detail.dora+1}}}});case"dora-normal-minus":return c({playerResults:{...s.playerResults,[$]:{...s.playerResults[$],detail:{...s.playerResults[$].detail,dora:Math.max(s.playerResults[$].detail.dora-1,0)}}}});case"dora-red-plus":return c({playerResults:{...s.playerResults,[$]:{...s.playerResults[$],detail:{...s.playerResults[$].detail,redDora:s.playerResults[$].detail.redDora+1}}}});case"dora-red-minus":return c({playerResults:{...s.playerResults,[$]:{...s.playerResults[$],detail:{...s.playerResults[$].detail,redDora:Math.max(s.playerResults[$].detail.redDora-1,0)}}}});case"waitingTile":return Y({index:$,tiles:(s==null?void 0:s.playerResults[$].waitingTiles)??[]});case"yaku":return yh({index:$});case"yellow-card":return N.showConfirmDialog({title:Rt.isYellowCarded?"取消黃牌？":"確定要給予這名玩家黃牌嗎？",content:Rt.isYellowCarded?`你是否想取消 ${Pe.name} 的黃牌？`:`一旦點擊確定，就會播出黃牌動畫，請確定要黃牌的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],isYellowCarded:!(s!=null&&s.playerResults[$].isYellowCarded)}}})}});case"red-card":return N.showConfirmDialog({title:Rt.isRedCarded?"取消紅牌？":"確定要給予這名玩家紅牌嗎？",content:Rt.isRedCarded?`你是否想取消 ${Pe.name} 的紅牌？`:`一旦點擊確定，就會播出紅牌動畫，請確定要紅牌的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],isRedCarded:!(s!=null&&s.playerResults[$].isRedCarded)}}})}});case"disallow-ron":return N.showConfirmDialog({title:Rt.isRedCarded?"取消和了禁止？":"確定要給予這名玩家和了禁止嗎？",content:Rt.isRedCarded?`你是否想取消 ${Pe.name} 的和了禁止？`:`一旦點擊確定，就會播出紅牌動畫，請確定要和了禁止的是 ${Pe.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[$]:{...s==null?void 0:s.playerResults[$],isRonDisallowed:!(s!=null&&s.playerResults[$].isRonDisallowed)}}})}})}},[N,i,s,P,c]),Gn=E.useCallback($=>{try{const de=$F($.roundCount),Pe=$.playerResults[de].type===vt.Win,Rt=!Pe&&$.roundCount>=8;Rt&&alert("對局結束。"),c({...$,nextRoundType:Rt?_t.End:Pe?_t.Extended:_t.NextRound}),P(!1),nt("分數變動中…"),setTimeout(()=>{nt(null)},4e3)}catch(de){console.error(de)}},[P,c]),R=E.useCallback($=>{try{const de=$F($.roundCount),Pe=$.playerResults[de].type!==vt.Win,Rt=Pe&&$.roundCount>=8;if(Rt)if($.nextRoundCumulatedThousands>0){const kn=zye([$.playerResults[0].afterScore,$.playerResults[1].afterScore,$.playerResults[2].afterScore,$.playerResults[3].afterScore],$.nextRoundCumulatedThousands*1e3);kn[0]!==0&&($.playerResults[0].scoreChanges.unshift(kn[0]),$.playerResults[0].afterScore+=kn[0]),kn[1]!==0&&($.playerResults[1].scoreChanges.unshift(kn[1]),$.playerResults[1].afterScore+=kn[1]),kn[2]!==0&&($.playerResults[2].scoreChanges.unshift(kn[2]),$.playerResults[2].afterScore+=kn[2]),kn[3]!==0&&($.playerResults[3].scoreChanges.unshift(kn[3]),$.playerResults[3].afterScore+=kn[3]),alert(`對局結束。終局時剩餘的 ${$.nextRoundCumulatedThousands*1e3} 供託已派給首位。`)}else alert("對局結束。");c({...$,nextRoundType:Rt?_t.End:Pe?_t.NextRoundAndExtended:_t.Extended}),L(!1),nt("分數變動中…"),setTimeout(()=>{nt(null)},4e3)}catch(de){console.error(de)}},[L,c]),U=E.useCallback($=>{try{c({playerResults:$.playerResults,resultType:ze.Hotfix});const de={matchId:t,code:Mx(t,$.roundCount,$.extendedRoundCount),roundCount:$.roundCount,extendedRoundCount:$.extendedRoundCount,cumulatedThousands:$.cumulatedThousands,nextRoundCumulatedThousands:0,resultType:ze.Unknown,nextRoundType:_t.Unknown,playerResults:DF($.playerResults),doras:(s==null?void 0:s.doras)??[]};f(de),nt("分數變動中…"),setTimeout(()=>{nt(null)},4e3),ae(!1)}catch(de){console.error(de)}},[s==null?void 0:s.doras,t,f,ae,c]),W=E.useCallback(()=>{if(!s)return;const $=s.nextRoundType===_t.NextRound||s.nextRoundType===_t.NextRoundAndExtended?s.roundCount+1:s.roundCount,de=s.nextRoundType===_t.Extended||s.nextRoundType===_t.NextRoundAndExtended?s.extendedRoundCount+1:0,Pe={matchId:t,code:Mx(t,$,de),roundCount:$,extendedRoundCount:de,cumulatedThousands:s.nextRoundCumulatedThousands,nextRoundCumulatedThousands:0,resultType:ze.Unknown,nextRoundType:_t.Unknown,playerResults:DF(s.playerResults),doras:{}};f(Pe).then(()=>{w(-1)})},[s,t,f]),oe=E.useCallback(()=>{r({matchId:t})},[t,r]),[Q,Y]=E.useState(null),ye=E.useCallback($=>{const de=$.currentTarget.getAttribute("data-player-index");typeof de>"u"||!(s!=null&&s.playerResults[de])||Y({index:de,tiles:(s==null?void 0:s.playerResults[de].waitingTiles)??[]})},[s==null?void 0:s.playerResults]),at=E.useCallback(()=>{Y(null)},[]),Zt=E.useCallback($=>{Q&&(c({playerResults:{...s==null?void 0:s.playerResults,[Q.index]:{...s==null?void 0:s.playerResults[Q.index],waitingTiles:$}}}),Y(null))},[Q,s==null?void 0:s.playerResults,c]),hi=E.useCallback(()=>{Q&&(c({playerResults:{...s==null?void 0:s.playerResults,[Q.index]:{...s==null?void 0:s.playerResults[Q.index],waitingTiles:[]}}}),Y(null))},[Q,s==null?void 0:s.playerResults,c]),[ir,yh]=E.useState(null),gh=E.useCallback(()=>{yh(null)},[]),vh=E.useCallback($=>{!s||!ir||(c({playerResults:{...s.playerResults,[ir.index]:{...s.playerResults[ir.index],detail:{...s.playerResults[ir.index].detail,...$}}}}),yh(null))},[ir,s,c]),DS=E.useCallback($=>{if($.preventDefault(),!i)return;const de=prompt("對局名稱",i.name);de&&h(de)},[i,h]),bh=E.useCallback($=>{if(!o)return;const de=$.currentTarget.getAttribute("data-match-round-id");if(!de)return;const Pe=o[de].resultDetail;Pe&&(b(Pe),v(de),nt("播放和牌中…"),setTimeout(()=>{b(null),nt(null)},1e4))},[o,b,v]),MS=E.useCallback(()=>{b(null)},[b]),uv=E.useCallback(()=>{m(!0)},[m]),MJ=E.useCallback(()=>{m(!1)},[m]),FJ=E.useCallback(()=>{y(!0)},[y]),LJ=E.useCallback(()=>{y(!1)},[y]),BJ=E.useCallback(()=>{g(!0)},[g]),UJ=E.useCallback(()=>{g(!1)},[g]);return(!i||!s)&&n?u.jsx(lge,{matchDTO:n}):!i||!s?u.jsx("div",{children:"對局讀取失敗。"}):u.jsxs("div",{children:[u.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-24 pb-48",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-row items-center gap-x-4 text-white",children:[u.jsxs("div",{className:"p-2 pl-4 pr-10 flex items-center gap-x-8 transition-[width] text-[4rem]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[u.jsxs("div",{className:"text-[0.5em] relative",children:[u.jsx("div",{className:"text-[0.5em]",children:u.jsxs("button",{type:"button",onClick:DS,children:[i.name," ",u.jsx("i",{className:"bi bi-pencil"})]})}),u.jsxs("div",{className:"flex gap-x-8 items-center",children:[u.jsx("div",{children:u.jsx(ps,{roundCount:s.roundCount,max:8})}),u.jsxs("div",{className:"flex flex-col justify-around",children:[u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2"})}),u.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.extendedRoundCount??0})]}),u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2"})}),u.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.cumulatedThousands??0})]})]})]}),i.hideHeader&&u.jsx("div",{className:"absolute inset-0 opacity-100 bg-red-800 text-center",children:"隱藏中"})]}),u.jsxs("div",{className:"flex items-center gap-x-2",children:[a.map(($,de)=>u.jsx("button",{"data-index":de,onClick:_e,className:"hover:opacity-80",children:u.jsx(jo,{className:"w-12 animate-[fadeInFromLeft_0.5s_ease-in-out]",children:$},$)})),u.jsx(Oe,{type:"button",color:a.length===0?"danger":"secondary",className:`${a.length===0&&"animate-bounce"}`,"data-index":"-1",onClick:_e,children:"+懸賞"})]})]}),u.jsx("div",{className:"flex-1"}),u.jsx("div",{className:"shrink-0",children:(e==null?void 0:e.matchId)!==t&&u.jsx(Oe,{color:"success",type:"button",className:"animate-pulse",onClick:oe,children:"開始OBS"})})]}),u.jsxs("div",{className:"flex justify-between gap-x-8 ",children:[u.jsx("div",{className:"flex-1",children:u.jsx(dge,{tabs:PA,defaultValue:PA[0].value,onChangeValue:C})}),u.jsxs("div",{className:"text-right space-x-4",children:[i.activeResultDetail&&u.jsxs(Oe,{color:"secondary",type:"button",onClick:MS,children:["結束播放中的和牌詳情",u.jsx("br",{}),u.jsx("span",{className:"text-xs",children:"(或最多10秒後自動結束)"})]}),s.nextRoundType!==_t.Unknown&&s.nextRoundType!==_t.End&&u.jsxs(Oe,{color:"success",type:"button",className:"animate-pulse",onClick:W,children:["進入",u.jsx(ps,{roundCount:s.nextRoundType===_t.NextRound||s.nextRoundType===_t.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===_t.Extended||s.nextRoundType===_t.NextRoundAndExtended?s.extendedRoundCount+1:0})]}),u.jsx(Oe,{color:"secondary",type:"button",onClick:xt,children:"流局"})]})]}),A==="listView-old"&&u.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map($=>u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx("div",{className:"flex-1 text-[2.5rem]",children:u.jsx(Qa,{player:i.players[$],playerIndex:$,score:s.playerResults[$].afterScore,scoreChanges:s.playerResults[$].scoreChanges,isEast:ti($,s.roundCount),isRiichi:s.playerResults[$].isRiichi,waitingTiles:s.playerResults[$].waitingTiles,onClickWaitingTiles:ye,isYellowCarded:s.playerResults[$].isYellowCarded,isRedCarded:s.playerResults[$].isRedCarded,showPointAndRanking:i.showPoints})}),u.jsx("div",{children:u.jsx("button",{type:"button",className:`${s.playerResults[$].isRiichi?"bg-orange-600 text-white":"bg-white text-orange-600 opacity-30"} h-16 w-16 border-2 border-orange-600  rounded-full text-lg`,onClick:Z,"data-player-index":$,children:s.playerResults[$].isRiichi?"已立直":"立直?"})}),u.jsx("div",{className:"pl-6",children:u.jsx(Oe,{color:"danger",type:"button",onClick:je,"data-player-index":$,children:"和了"})})]}))}),A==="listView-new"&&u.jsx(cge,{players:i.players,currentRound:s,onAction:Fr}),A==="gridView"&&u.jsx(fge,{players:i.players,currentRound:s,onAction:Fr}),u.jsx("div",{children:u.jsxs(Oe,{size:"small",color:"secondary",onClick:M,children:[u.jsx("i",{className:"bi bi-people"})," 修改玩家"]})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("h4",{className:"text-3xl",children:[u.jsx("i",{className:"bi bi-bar-chart-steps"})," 紀錄"," ",u.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[u.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),u.jsx("th",{children:i.players[0].nickname}),u.jsx("th",{children:i.players[1].nickname}),u.jsx("th",{children:i.players[2].nickname}),u.jsx("th",{children:i.players[3].nickname}),u.jsx("th",{className:"text-right",children:"操作"})]})}),u.jsxs("tbody",{children:[x[0]&&u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center"}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:x[0].playerResults[0].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:x[0].playerResults[1].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:x[0].playerResults[2].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(Lt,{value:x[0].playerResults[3].beforeScore})}),u.jsx("td",{})]}),x.map($=>$.resultType===ze.Hotfix?u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),u.jsx("td",{className:"text-center",children:$.playerResults[0].afterScore}),u.jsx("td",{className:"text-center",children:$.playerResults[1].afterScore}),u.jsx("td",{className:"text-center",children:$.playerResults[2].afterScore}),u.jsx("td",{className:"text-center",children:$.playerResults[3].afterScore}),u.jsx("td",{})]},$.id):u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center whitespace-nowrap",children:u.jsx(ps,{roundCount:$.roundCount,extendedRoundCount:$.extendedRoundCount,max:8,className:"px-4"})}),u.jsxs("td",{className:"text-center",children:[u.jsx(Gv,{value:$.playerResults[0].afterScore-$.playerResults[0].beforeScore}),u.jsx(qv,{match:i,matchRound:$,playerIndex:"0"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Gv,{value:$.playerResults[1].afterScore-$.playerResults[1].beforeScore}),u.jsx(qv,{match:i,matchRound:$,playerIndex:"1"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Gv,{value:$.playerResults[2].afterScore-$.playerResults[2].beforeScore}),u.jsx(qv,{match:i,matchRound:$,playerIndex:"2"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Gv,{value:$.playerResults[3].afterScore-$.playerResults[3].beforeScore}),u.jsx(qv,{match:i,matchRound:$,playerIndex:"3"})]}),u.jsxs("td",{className:"text-right space-x-2",children:[($.resultType===ze.Ron||$.resultType===ze.SelfDrawn)&&u.jsxs(Oe,{color:$.hasBroadcasted?"secondary":"success",type:"button",variant:"text",className:$.hasBroadcasted?"opacity-50":"",onClick:bh,"data-match-round-id":$.id,children:[u.jsx("i",{className:"bi bi-camera-reels"})," ",$.hasBroadcasted?"已播放過":"播放和牌詳情"]}),$.resultType!==ze.Unknown&&u.jsxs(Oe,{variant:"text",color:"danger","data-matchRoundId":$.id,onClick:fe,children:[u.jsx("i",{className:"bi bi-pencil"})," 修改"]})]})]},$.id)),x[x.length-1]&&u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center whitespace-nowrap px-16",children:u.jsxs(Oe,{onClick:zt,size:"small",color:"secondary",children:[u.jsx("i",{className:"bi bi-pencil"})," 手動調整分數"]})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:x[x.length-1].playerResults[0].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:x[x.length-1].playerResults[1].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:x[x.length-1].playerResults[2].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Lt,{value:x[x.length-1].playerResults[3].afterScore})}),u.jsx("td",{})]})]})]})]})]}),u.jsx(Jn,{open:typeof _<"u",title:"選擇懸賞",onClose:it,children:u.jsx(BF,{hideRedTiles:!0,onSubmit:Ae,onRemove:q,canRemove:typeof _<"u"&&_>0,defaultValue:typeof _<"u"?[a[_]]:void 0})}),u.jsx(Jn,{open:!!Q,title:"選擇待牌",onClose:at,children:u.jsx(BF,{hideRedTiles:!0,onSubmit:Zt,onRemove:hi,defaultValue:Q==null?void 0:Q.tiles,multiple:!0,canRemove:!0})}),u.jsx(vge,{round:s.roundCount,activePlayerIndex:(ir==null?void 0:ir.index)??"0",targetPlayerIndex:"-1",open:!!ir,onClose:gh,onSubmit:vh,defaultValue:s.playerResults[(ir==null?void 0:ir.index)??"0"].detail}),u.jsx(Jn,{title:"和了",open:T,onClose:()=>P(!1),children:u.jsx(ZG,{match:i,currentMatchRound:s,onSubmit:Gn,...I})}),u.jsx(Jn,{title:"流局",open:j,onClose:()=>L(!1),children:u.jsx(eq,{match:i,currentMatchRound:s,onSubmit:R,...I})}),u.jsx(Jn,{title:"修改玩家",open:V,onClose:()=>F(!1),children:u.jsx(Awe,{defaultPlayers:i.players,onSubmit:B})}),u.jsx(Jn,{title:"手動調整分數",open:z,onClose:()=>ae(!1),children:u.jsx(Mge,{match:i,currentMatchRound:s,onSubmit:U,...I})}),u.jsx(Jn,{title:"修改局數",open:te,onClose:()=>ge(!1),children:u.jsx(Fge,{match:i,matchRound:Le.matchRound,onSubmit:ut})}),u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 pl-6 pr-6 pb-6 z-50 flex justify-between items-end bg-gradient-to-b from-transparent to-[#00000080]",children:[u.jsx("div",{className:"text-left"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-right mb-4",children:[s.nextRoundType!==_t.Unknown&&s.nextRoundType!==_t.End&&u.jsxs("button",{className:"text-6xl p-4 text-green-800 bg-green-400 border-4 border-green-600 rounded-lg",onClick:W,children:["進入",u.jsx(ps,{roundCount:s.nextRoundType===_t.NextRound||s.nextRoundType===_t.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===_t.Extended||s.nextRoundType===_t.NextRoundAndExtended?s.extendedRoundCount+1:0})," ",u.jsx("i",{className:"bi bi-play-fill"})]}),s.nextRoundType===_t.End&&u.jsx("a",{href:`/v1/match/${t}/export`,target:"_blank",children:u.jsxs("button",{className:"text-6xl p-4 text-yellow-800 bg-yellow-400 border-4 border-yellow-600 rounded-lg",children:["上傳成績",u.jsx("i",{className:"bi bi-cloud-upload"})]})})]}),u.jsxs("div",{className:"flex gap-x-6 items-end justify-end",children:[!i.hideHeader&&u.jsxs("button",{onClick:FJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[u.jsx("i",{className:"bi bi-eye"})," 標題：顯示中"]}),i.hideHeader&&u.jsxs("button",{onClick:LJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-600 border border-red-500 leading-6 text-white",children:[u.jsx("i",{className:"bi bi-eye-slash"})," 標題：隱藏中"]}),!i.hidePlayers&&u.jsxs("button",{onClick:BJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[u.jsx("i",{className:"bi bi-people-fill"})," 玩家：顯示中"]}),i.hidePlayers&&u.jsxs("button",{onClick:UJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-600 border border-red-500 leading-6 text-white",children:[u.jsx("i",{className:"bi bi-people"})," 玩家：隱藏中"]}),!i.showPoints&&u.jsxs("button",{onClick:uv,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[u.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),i.showPoints&&u.jsxs("button",{onClick:MJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-green-300 border border-green-300 leading-6 text-green-800",children:[u.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),S.map($=>u.jsx("button",{onClick:bh,"data-match-round-id":$.id,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-200 border border-red-300 leading-6 text-red-800 animate-bounce",children:u.jsxs("p",{children:[u.jsx("i",{className:"bi bi-trophy"})," ",$.roundCount,".",$.extendedRoundCount," 和牌動畫：待播放"]})}))]})]})]})]})}function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},be.apply(this,arguments)}function Ms(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Uu=255,wa=100,mp=t=>{var{r:e,g:r,b:n,a:i}=t,o=Math.max(e,r,n),s=o-Math.min(e,r,n),a=s?o===e?(r-n)/s:o===r?2+(n-e)/s:4+(e-r)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*wa:0,v:o/Uu*wa,a:i}},DH=t=>{var{h:e,s:r,l:n,a:i}=MH(t);return"hsla("+e+", "+r+"%, "+n+"%, "+i+")"},MH=t=>{var{h:e,s:r,v:n,a:i}=t,o=(200-r)*n/wa;return{h:e,s:o>0&&o<200?r*n/wa/(o<=wa?o:200-o)*wa:0,l:o/2,a:i}},FH=t=>{var{r:e,g:r,b:n}=t,i=e<<16|r<<8|n;return"#"+(o=>new Array(7-o.length).join("0")+o)(i.toString(16))},Cwe=t=>{var{r:e,g:r,b:n,a:i}=t,o=typeof i=="number"&&(i*255|256).toString(16).slice(1);return""+FH({r:e,g:r,b:n,a:i})+(o||"")},Gm=t=>mp(Pwe(t)),Pwe=t=>{var e=t.replace("#","");/^#?/.test(t)&&e.length===3&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var r=new RegExp("[A-Za-z0-9]{2}","g"),[n,i,o=0,s]=t.match(r).map(a=>parseInt(a,16));return{r:n,g:i,b:o,a:(s??255)/Uu}},N1=t=>{var{h:e,s:r,v:n,a:i}=t,o=e/60,s=r/wa,a=n/wa,l=Math.floor(o)%6,c=o-Math.floor(o),f=Uu*a*(1-s),d=Uu*a*(1-s*c),h=Uu*a*(1-s*(1-c));a*=Uu;var p={};switch(l){case 0:p.r=a,p.g=h,p.b=f;break;case 1:p.r=d,p.g=a,p.b=f;break;case 2:p.r=f,p.g=a,p.b=h;break;case 3:p.r=f,p.g=d,p.b=a;break;case 4:p.r=h,p.g=f,p.b=a;break;case 5:p.r=a,p.g=f,p.b=d;break}return p.r=Math.round(p.r),p.g=Math.round(p.g),p.b=Math.round(p.b),be({},p,{a:i})},Twe=t=>{var{r:e,g:r,b:n,a:i}=N1(t);return"rgba("+e+", "+r+", "+n+", "+i+")"},Iwe=t=>{var{r:e,g:r,b:n}=t;return{r:e,g:r,b:n}},Nwe=t=>{var{h:e,s:r,l:n}=t;return{h:e,s:r,l:n}},CT=t=>FH(N1(t)),kwe=t=>{var{h:e,s:r,v:n}=t;return{h:e,s:r,v:n}},Vu=t=>{var e,r,n,i,o,s,a,l;return typeof t=="string"&&PT(t)?(s=Gm(t),a=t):typeof t!="string"&&(s=t),s&&(n=kwe(s),o=MH(s),i=N1(s),l=Cwe(i),a=CT(s),r=Nwe(o),e=Iwe(i)),{rgb:e,hsl:r,hsv:n,rgba:i,hsla:o,hsva:s,hex:a,hexa:l}},PT=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t);function UL(t){var e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useCallback((r,n)=>e.current&&e.current(r,n),[])}var qp=t=>"touches"in t,VL=t=>{!qp(t)&&t.preventDefault&&t.preventDefault()},WL=function(e,r,n){return r===void 0&&(r=0),n===void 0&&(n=1),e>n?n:e<r?r:e},zL=(t,e)=>{var r=t.getBoundingClientRect(),n=qp(e)?e.touches[0]:e;return{left:WL((n.pageX-(r.left+window.pageXOffset))/r.width),top:WL((n.pageY-(r.top+window.pageYOffset))/r.height),width:r.width,height:r.height,x:n.pageX-(r.left+window.pageXOffset),y:n.pageY-(r.top+window.pageYOffset)}},Owe=["prefixCls","className","onMove","onDown"],LH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-interactive",className:n,onMove:i,onDown:o}=t,s=Ms(t,Owe),a=E.useRef(null),l=E.useRef(!1),[c,f]=E.useState(!1),d=UL(i),h=UL(o),p=v=>l.current&&!qp(v)?!1:(l.current=qp(v),!0),m=E.useCallback(v=>{VL(v);var x=qp(v)?v.touches.length>0:v.buttons>0;x&&a.current?d&&d(zL(a.current,v),v):f(!1)},[d]),y=E.useCallback(()=>f(!1),[]),g=E.useCallback(v=>{var x=v?window.addEventListener:window.removeEventListener;x(l.current?"touchmove":"mousemove",m),x(l.current?"touchend":"mouseup",y)},[]);E.useEffect(()=>(g(c),()=>{c&&g(!1)}),[c,g]);var b=E.useCallback(v=>{VL(v.nativeEvent),p(v.nativeEvent)&&(h&&h(zL(a.current,v.nativeEvent),v.nativeEvent),f(!0))},[h]);return u.jsx("div",be({},s,{className:[r,n||""].filter(Boolean).join(" "),style:be({},s.style,{touchAction:"none"}),ref:a,tabIndex:0,onMouseDown:b,onTouchStart:b}))});LH.displayName="Interactive";const BH=LH;var jwe=t=>{var{className:e,color:r,left:n,top:i,prefixCls:o}=t,s={position:"absolute",top:i,left:n},a={"--saturation-pointer-box-shadow":"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",width:6,height:6,transform:"translate(-3px, -3px)",boxShadow:"var(--saturation-pointer-box-shadow)",borderRadius:"50%",backgroundColor:r};return E.useMemo(()=>u.jsx("div",{className:o+"-pointer "+(e||""),style:s,children:u.jsx("div",{className:o+"-fill",style:a})}),[i,n,r,e,o])},Rwe=["prefixCls","radius","pointer","className","hue","style","hsva","onChange"],UH=O.forwardRef((t,e)=>{var r,{prefixCls:n="w-color-saturation",radius:i=0,pointer:o,className:s,hue:a=0,style:l,hsva:c,onChange:f}=t,d=Ms(t,Rwe),h=be({width:200,height:200,borderRadius:i},l,{position:"relative"}),p=(y,g)=>{f&&c&&f({h:c.h,s:y.left*100,v:(1-y.top)*100,a:c.a})},m=E.useMemo(()=>{if(!c)return null;var y={top:100-c.v+"%",left:c.s+"%",color:DH(c)};return o&&typeof o=="function"?o(be({prefixCls:n},y)):u.jsx(jwe,be({prefixCls:n},y))},[c,o,n]);return u.jsx(BH,be({className:[n,s||""].filter(Boolean).join(" ")},d,{style:be({position:"absolute",inset:0,cursor:"crosshair",backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsl("+((r=c==null?void 0:c.h)!=null?r:a)+", 100%, 50%))"},h),ref:e,onMove:p,onDown:p,children:m}))});UH.displayName="Saturation";const $we=UH;var Dwe=["className","prefixCls","left","top","style","fillProps"],Mwe=t=>{var{className:e,prefixCls:r,left:n,top:i,style:o,fillProps:s}=t,a=Ms(t,Dwe),l=be({},o,{position:"absolute",left:n,top:i}),c=be({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},s==null?void 0:s.style,{transform:n?"translate(-9px, -1px)":"translate(-1px, -9px)"});return u.jsx("div",be({className:r+"-pointer "+(e||""),style:l},a,{children:u.jsx("div",be({className:r+"-fill"},s,{style:c}))}))},Fwe=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],Lwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==",VH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-alpha",className:n,hsva:i,background:o,bgProps:s={},innerProps:a={},pointerProps:l={},radius:c=0,width:f,height:d=16,direction:h="horizontal",style:p,onChange:m,pointer:y}=t,g=Ms(t,Fwe),b=A=>{m&&m(be({},i,{a:h==="horizontal"?A.left:A.top}),A)},v=DH(Object.assign({},i,{a:1})),x="linear-gradient(to "+(h==="horizontal"?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+v+" 100%)",S={};h==="horizontal"?S.left=i.a*100+"%":S.top=i.a*100+"%";var _=be({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:c,background:"url("+Lwe+") left center",backgroundColor:"var(--alpha-background-color)"},{width:f,height:d},p,{position:"relative"}),w=y&&typeof y=="function"?y(be({prefixCls:r},l,S)):u.jsx(Mwe,be({},l,{prefixCls:r},S));return u.jsxs("div",be({},g,{className:[r,r+"-"+h,n||""].filter(Boolean).join(" "),style:_,ref:e,children:[u.jsx("div",be({},s,{style:be({inset:0,position:"absolute",background:o||x,borderRadius:c},s.style)})),u.jsx(BH,be({},a,{style:be({},a.style,{inset:0,zIndex:1,position:"absolute"}),onMove:b,onDown:b,children:w}))]}))});VH.displayName="Alpha";const TT=VH;var Bwe=["prefixCls","placement","label","value","className","style","labelStyle","inputStyle","onChange","onBlur"],Uwe=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t),Vwe=t=>Number(String(t).replace(/%/g,"")),WH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input",placement:n="bottom",label:i,value:o,className:s,style:a,labelStyle:l,inputStyle:c,onChange:f,onBlur:d}=t,h=Ms(t,Bwe),[p,m]=E.useState(o),y=E.useRef(!1);E.useEffect(()=>{t.value!==p&&(y.current||m(t.value))},[t.value]);function g(_,w){var A=(w||_.target.value).trim().replace(/^#/,"");Uwe(A)&&f&&f(_,A);var C=Vwe(A);isNaN(C)||f&&f(_,C),m(A)}function b(_){y.current=!1,m(t.value),d&&d(_)}var v={};n==="bottom"&&(v.flexDirection="column"),n==="top"&&(v.flexDirection="column-reverse"),n==="left"&&(v.flexDirection="row-reverse");var x=be({"--editable-input-label-color":"rgb(153, 153, 153)","--editable-input-box-shadow":"rgb(204 204 204) 0px 0px 0px 1px inset","--editable-input-color":"#666",position:"relative",alignItems:"center",display:"flex",fontSize:11},v,a),S=be({width:"100%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,fontSize:11,background:"transparent",boxSizing:"border-box",border:"none",color:"var(--editable-input-color)",boxShadow:"var(--editable-input-box-shadow)"},c);return u.jsxs("div",{className:[r,s||""].filter(Boolean).join(" "),style:x,children:[u.jsx("input",be({ref:e,value:p,onChange:g,onBlur:b,autoComplete:"off",onFocus:()=>y.current=!0},h,{style:S})),i&&u.jsx("span",{style:be({color:"var(--editable-input-label-color)",textTransform:"capitalize"},l),children:i})]})});WH.displayName="EditableInput";const yp=WH;var Wwe=["prefixCls","hsva","placement","rProps","gProps","bProps","aProps","className","style","onChange"],zH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input-rgba",hsva:n,placement:i="bottom",rProps:o={},gProps:s={},bProps:a={},aProps:l={},className:c,style:f,onChange:d}=t,h=Ms(t,Wwe),p=n?N1(n):{};function m(g){var b=Number(g.target.value);b&&b>255&&(g.target.value="255"),b&&b<0&&(g.target.value="0")}var y=(g,b,v)=>{typeof g=="number"&&(b==="a"&&(g<0&&(g=0),g>100&&(g=100),d&&d(Vu(mp(be({},p,{a:g/100}))))),g>255&&(g=255,v.target.value="255"),g<0&&(g=0,v.target.value="0"),b==="r"&&d&&d(Vu(mp(be({},p,{r:g})))),b==="g"&&d&&d(Vu(mp(be({},p,{g})))),b==="b"&&d&&d(Vu(mp(be({},p,{b:g})))))};return u.jsxs("div",be({ref:e,className:[r,c||""].filter(Boolean).join(" ")},h,{style:be({fontSize:11,display:"flex"},f),children:[u.jsx(yp,be({label:"R",value:p.r||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"r",g)},o,{style:be({},o.style)})),u.jsx(yp,be({label:"G",value:p.g||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"g",g)},s,{style:be({marginLeft:5},o.style)})),u.jsx(yp,be({label:"B",value:p.b||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"b",g)},a,{style:be({marginLeft:5},a.style)})),l&&u.jsx(yp,be({label:"A",value:p.a?parseInt(String(p.a*100),10):0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"a",g)},l,{style:be({marginLeft:5},l.style)}))]}))});zH.displayName="EditableInputRGBA";const zwe=zH;var Gwe=["prefixCls","className","hue","onChange","direction"],GH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-hue",className:n,hue:i=0,onChange:o,direction:s="horizontal"}=t,a=Ms(t,Gwe);return u.jsx(TT,be({ref:e,className:r+" "+(n||"")},a,{direction:s,background:"linear-gradient(to "+(s==="horizontal"?"right":"bottom")+", rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)",hsva:{h:i,s:100,v:100,a:i/360},onChange:(l,c)=>{o&&o({h:s==="horizontal"?360*c.left:360*c.top})}}))});GH.displayName="Hue";const qwe=GH;var Hwe=["prefixCls","className","color","colors","style","rectProps","onChange","addonAfter","addonBefore","rectRender"],qH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-swatch",className:n,color:i,colors:o=[],style:s,rectProps:a={},onChange:l,addonAfter:c,addonBefore:f,rectRender:d}=t,h=Ms(t,Hwe),p=be({"--swatch-background-color":"rgb(144, 19, 254)",background:"var(--swatch-background-color)",height:15,width:15,marginRight:5,marginBottom:5,cursor:"pointer",position:"relative",outline:"none",borderRadius:2},a.style),m=(y,g)=>{l&&l(Gm(y),Vu(Gm(y)),g)};return u.jsxs("div",be({ref:e},h,{className:[r,n||""].filter(Boolean).join(" "),style:be({display:"flex",flexWrap:"wrap",position:"relative"},s),children:[f&&O.isValidElement(f)&&f,o&&Array.isArray(o)&&o.map((y,g)=>{var b="",v="";typeof y=="string"&&(b=y,v=y),typeof y=="object"&&y.color&&(b=y.title||y.color,v=y.color);var x=i&&i.toLocaleLowerCase()===v.toLocaleLowerCase(),S=d&&d({title:b,color:v,checked:!!x,style:be({},p,{background:v}),onClick:w=>m(v,w)});if(S)return u.jsx(E.Fragment,{children:S},g);var _=a.children&&O.isValidElement(a.children)?O.cloneElement(a.children,{color:v,checked:x}):null;return u.jsx("div",be({tabIndex:0,title:b,onClick:w=>m(v,w)},a,{children:_,style:be({},p,{background:v})}),g)}),c&&O.isValidElement(c)&&c]}))});qH.displayName="Swatch";const Kwe=qH;var Qwe=["prefixCls","className","onChange","width","presetColors","color","editableDisable","disableAlpha","style"],Ywe=["#D0021B","#F5A623","#f8e61b","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],GL=t=>u.jsx("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:4,top:1,bottom:1,left:t.left,borderRadius:1,position:"absolute",backgroundColor:"#fff"}}),HH=O.forwardRef((t,e)=>{var{prefixCls:r="w-color-sketch",className:n,onChange:i,width:o=218,presetColors:s=Ywe,color:a,editableDisable:l=!0,disableAlpha:c=!1,style:f}=t,d=Ms(t,Qwe),[h,p]=E.useState({h:209,s:36,v:90,a:1});E.useEffect(()=>{typeof a=="string"&&PT(a)&&p(Gm(a)),typeof a=="object"&&p(a)},[a]);var m=w=>{p(w),i&&i(Vu(w))},y=(w,A)=>{typeof w=="string"&&PT(w)&&/(3|6)/.test(String(w.length))&&m(Gm(w))},g=w=>m(be({},h,{a:w.a})),b=w=>m(be({},h,w,{a:h.a})),v=be({"--sketch-background":"rgb(255, 255, 255)","--sketch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px","--sketch-swatch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset","--sketch-alpha-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset, rgb(0 0 0 / 25%) 0px 0px 4px inset","--sketch-swatch-border-top":"1px solid rgb(238, 238, 238)",background:"var(--sketch-background)",borderRadius:4,boxShadow:"var(--sketch-box-shadow)",width:o},f),x={borderRadius:2,background:Twe(h),boxShadow:"var(--sketch-alpha-box-shadow)"},S={borderTop:"var(--sketch-swatch-border-top)",paddingTop:10,paddingLeft:10},_={marginRight:10,marginBottom:10,borderRadius:3,boxShadow:"var(--sketch-swatch-box-shadow)"};return u.jsxs("div",be({},d,{className:r+" "+(n||""),ref:e,style:v,children:[u.jsxs("div",{style:{padding:"10px 10px 8px"},children:[u.jsx($we,{hsva:h,style:{width:"auto",height:150},onChange:b}),u.jsxs("div",{style:{display:"flex",marginTop:4},children:[u.jsxs("div",{style:{flex:1},children:[u.jsx(qwe,{width:"auto",height:10,hue:h.h,pointer:GL,innerProps:{style:{marginLeft:1,marginRight:5}},onChange:w=>m(be({},h,w))}),!c&&u.jsx(TT,{width:"auto",height:10,hsva:h,pointer:GL,style:{marginTop:4},innerProps:{style:{marginLeft:1,marginRight:5}},onChange:g})]}),!c&&u.jsx(TT,{width:24,height:24,hsva:h,radius:2,style:{marginLeft:4},bgProps:{style:{background:"transparent"}},innerProps:{style:x},pointer:()=>u.jsx(E.Fragment,{})})]})]}),l&&u.jsxs("div",{style:{display:"flex",margin:"0 10px 3px 10px"},children:[u.jsx(yp,{label:"Hex",value:CT(h).replace(/^#/,"").toLocaleUpperCase(),onChange:(w,A)=>y(A),style:{minWidth:58}}),u.jsx(zwe,{hsva:h,style:{marginLeft:6},aProps:c?!1:{},onChange:w=>m(w.hsva)})]}),s&&s.length>0&&u.jsx(Kwe,{style:S,colors:s,color:CT(h),onChange:w=>m(w),rectProps:{style:_}})]}))});HH.displayName="Sketch";const Xwe=HH;function KH({value:t,onChange:e,onBlur:r}){const n=E.useCallback(i=>{e==null||e(i.hex)},[e]);return u.jsx(Xwe,{disableAlpha:!0,onChange:n,onBlur:r,color:t})}const Jwe=async()=>new Promise(t=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.addEventListener("change",r=>{var i;const n=(i=r.target.files)==null?void 0:i[0];n&&t(n)}),e.click()}),qL=({children:t,helperText:e,onChangeFile:r=async()=>{},...n})=>{const i=E.useMemo(()=>t||u.jsxs("div",{className:"space-y-2 text-center text-xs",children:[u.jsx("p",{children:u.jsx("i",{className:"bi bi-upload"})}),u.jsx("p",{children:"拖拉檔案上傳 ／ 點擊上傳"}),u.jsx("p",{children:e})]}),[t,e]),[{loading:o},s]=t1(r),a=E.useCallback(()=>{Jwe().then(s)},[s]),l=E.useMemo(()=>({onFiles:f=>{const d=f.find(h=>!!h);d&&s(d)}}),[s]),[c]=nge(l);return u.jsxs("div",{className:"relative",children:[u.jsx("div",{...n,className:"bg-neutral-50 border border-neutral-200 border-dashed p-1 cursor-pointer hover:border-neutral-400 text-neutral-400",onClick:a,...c,children:i}),o&&u.jsx("div",{className:"absolute z-10 cursor-not-allowed inset-0 bg-neutral-300 text-white flex gap-x-1 items-center justify-center",children:u.jsx($O,{})})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH="firebasestorage.googleapis.com",YH="storageBucket",Zwe=2*60*1e3,e1e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends Lc{constructor(e,r,n=0){super(TA(e),`Firebase Storage: ${r} (${TA(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return TA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function TA(t){return"storage/"+t}function yj(){const t="An unknown error occurred, please check the error payload for server response.";return new Yt(Kt.UNKNOWN,t)}function t1e(t){return new Yt(Kt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function r1e(t){return new Yt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n1e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yt(Kt.UNAUTHENTICATED,t)}function i1e(){return new Yt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function o1e(t){return new Yt(Kt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function s1e(){return new Yt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a1e(){return new Yt(Kt.CANCELED,"User canceled the upload/download.")}function l1e(t){return new Yt(Kt.INVALID_URL,"Invalid URL '"+t+"'.")}function c1e(t){return new Yt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function u1e(){return new Yt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YH+"' property when initializing the app?")}function f1e(){return new Yt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d1e(){return new Yt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function h1e(t){return new Yt(Kt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function IT(t){return new Yt(Kt.INVALID_ARGUMENT,t)}function XH(){return new Yt(Kt.APP_DELETED,"The Firebase app was deleted.")}function p1e(t){return new Yt(Kt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hp(t,e){return new Yt(Kt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bh(t){throw new Yt(Kt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ni.makeFromUrl(e,r)}catch{return new ni(e,"")}if(n.path==="")return n;throw c1e(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const f="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${i}/o${h}`,"i"),m={bucket:1,path:3},y=r===QH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${g}`,"i"),x=[{regex:a,indices:l,postModify:o},{regex:p,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<x.length;S++){const _=x[S],w=_.regex.exec(e);if(w){const A=w[_.indices.bucket];let C=w[_.indices.path];C||(C=""),n=new ni(A,C),_.postModify(n);break}}if(n==null)throw l1e(e);return n}}class m1e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1e(t,e,r){let n=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function f(...g){c||(c=!0,e.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,t(p,l())},g)}function h(){o&&clearTimeout(o)}function p(g,...b){if(c){h();return}if(g){h(),f.call(null,g,...b);return}if(l()||s){h(),f.call(null,g,...b);return}n<64&&(n*=2);let x;a===1?(a=2,x=0):x=(n+Math.random())*1e3,d(x)}let m=!1;function y(g){m||(m=!0,h(),!c&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,y(!0)},r),y}function g1e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1e(t){return t!==void 0}function b1e(t){return typeof t=="object"&&!Array.isArray(t)}function gj(t){return typeof t=="string"||t instanceof String}function HL(t){return vj()&&t instanceof Blob}function vj(){return typeof Blob<"u"}function KL(t,e,r,n){if(n<e)throw IT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw IT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function JH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mc||(mc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1e(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1e{constructor(e,r,n,i,o,s,a,l,c,f,d,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Hv(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===mc.NO_ERROR,l=o.getStatus();if(!a||x1e(l,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===mc.ABORT;n(!1,new Hv(!1,null,f));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Hv(c,o))})},r=(n,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());v1e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=yj();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?XH():a1e();s(l)}else{const l=s1e();s(l)}};this.canceled_?r(!1,new Hv(!1,null,!0)):this.backoffId_=y1e(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function w1e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function S1e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E1e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function A1e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function C1e(t,e,r,n,i,o,s=!0){const a=JH(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return E1e(c,e),w1e(c,r),S1e(c,o),A1e(c,n),new _1e(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function T1e(...t){const e=P1e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(vj())return new Blob(t);throw new Yt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function I1e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1e(t){if(typeof atob>"u")throw h1e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class IA{constructor(e,r){this.data=e,this.contentType=r||null}}function k1e(t,e){switch(t){case $o.RAW:return new IA(ZH(e));case $o.BASE64:case $o.BASE64URL:return new IA(e7(t,e));case $o.DATA_URL:return new IA(j1e(e),R1e(e))}throw yj()}function ZH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=n,s=t.charCodeAt(++r);n=65536|(o&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function O1e(t){let e;try{e=decodeURIComponent(t)}catch{throw Hp($o.DATA_URL,"Malformed data URL.")}return ZH(e)}function e7(t,e){switch(t){case $o.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Hp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $o.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Hp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=N1e(e)}catch(i){throw i.message.includes("polyfill")?i:Hp(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class t7{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Hp($o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=$1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function j1e(t){const e=new t7(t);return e.base64?e7($o.BASE64,e.rest):O1e(e.rest)}function R1e(t){return new t7(t).contentType}function $1e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,r){let n=0,i="";HL(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(HL(this.data_)){const n=this.data_,i=I1e(n,e,r);return i===null?null:new oa(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new oa(n,!0)}}static getBlob(...e){if(vj()){const r=e.map(n=>n instanceof oa?n.data_:n);return new oa(T1e.apply(null,r))}else{const r=e.map(s=>gj(s)?k1e($o.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let o=0;return r.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new oa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(t){let e;try{e=JSON.parse(t)}catch{return null}return b1e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function M1e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function n7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1e(t,e){return e}class gn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||F1e}}let Kv=null;function L1e(t){return!gj(t)||t.length<2?t:n7(t)}function i7(){if(Kv)return Kv;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(o,s){return L1e(s)}const r=new gn("name");r.xform=e,t.push(r);function n(o,s){return s!==void 0?Number(s):s}const i=new gn("size");return i.xform=n,t.push(i),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),Kv=t,Kv}function B1e(t,e){function r(){const n=t.bucket,i=t.fullPath,o=new ni(n,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function U1e(t,e,r){const n={};n.type="file";const i=r.length;for(let o=0;o<i;o++){const s=r[o];n[s.local]=s.xform(n,e[s.server])}return B1e(n,t),n}function o7(t,e,r){const n=r7(e);return n===null?null:U1e(t,n,r)}function V1e(t,e,r,n){const i=r7(e);if(i===null||!gj(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const f=t.bucket,d=t.fullPath,h="/b/"+s(f)+"/o/"+s(d),p=bj(h,r,n),m=JH({alt:"media",token:c});return p+m})[0]}function W1e(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const o=e[i];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class s7{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(t){if(!t)throw yj()}function z1e(t,e){function r(n,i){const o=o7(t,i,e);return a7(o!==null),o}return r}function G1e(t,e){function r(n,i){const o=o7(t,i,e);return a7(o!==null),V1e(o,i,t.host,t._protocol)}return r}function l7(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=i1e():i=n1e():r.getStatus()===402?i=r1e(t.bucket):r.getStatus()===403?i=o1e(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function q1e(t){const e=l7(t);function r(n,i){let o=e(n,i);return n.getStatus()===404&&(o=t1e(t.path)),o.serverResponse=i.serverResponse,o}return r}function H1e(t,e,r){const n=e.fullServerUrl(),i=bj(n,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new s7(i,o,G1e(t,r),s);return a.errorHandler=q1e(e),a}function K1e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Q1e(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=K1e(null,e)),n}function Y1e(t,e,r,n,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let S=0;S<2;S++)x=x+Math.random().toString().slice(2);return x}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=Q1e(e,n,i),f=W1e(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=oa.getBlob(d,n,h);if(p===null)throw f1e();const m={name:c.fullPath},y=bj(o,t.host,t._protocol),g="POST",b=t.maxUploadRetryTime,v=new s7(y,g,z1e(t,r),b);return v.urlParams=m,v.headers=s,v.body=p.uploadData(),v.errorHandler=l7(e),v}class X1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Bh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class J1e extends X1e{initXhr(){this.xhr_.responseType="text"}}function c7(){return new J1e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,r){this._service=e,r instanceof ni?this._location=r:this._location=ni.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Oc(e,r)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n7(this._location.path)}get storage(){return this._service}get parent(){const e=D1e(this._location.path);if(e===null)return null;const r=new ni(this._location.bucket,e);return new Oc(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw p1e(e)}}function Z1e(t,e,r){t._throwIfRoot("uploadBytes");const n=Y1e(t.storage,t._location,i7(),new oa(e,!0),r);return t.storage.makeRequestWithTokens(n,c7).then(i=>({metadata:i,ref:t}))}function eSe(t){t._throwIfRoot("getDownloadURL");const e=H1e(t.storage,t._location,i7());return t.storage.makeRequestWithTokens(e,c7).then(r=>{if(r===null)throw d1e();return r})}function tSe(t,e){const r=M1e(t._location.path,e),n=new ni(t._location.bucket,r);return new Oc(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rSe(t){return/^[A-Za-z]+:\/\//.test(t)}function nSe(t,e){return new Oc(t,e)}function u7(t,e){if(t instanceof xj){const r=t;if(r._bucket==null)throw u1e();const n=new Oc(r,r._bucket);return e!=null?u7(n,e):n}else return e!==void 0?tSe(t,e):t}function iSe(t,e){if(e&&rSe(e)){if(t instanceof xj)return nSe(t,e);throw IT("To use ref(service, url), the first argument must be a Storage instance.")}else return u7(t,e)}function QL(t,e){const r=e==null?void 0:e[YH];return r==null?null:ni.makeFromBucketSpec(r,t)}function oSe(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:yk(i,t.app.options.projectId))}class xj{constructor(e,r,n,i,o){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=QH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zwe,this._maxUploadRetryTime=e1e,this._requests=new Set,i!=null?this._bucket=ni.makeFromBucketSpec(i,this._host):this._bucket=QL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=QL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oc(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new m1e(XH());{const s=C1e(e,this._appId,n,i,r,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const YL="@firebase/storage",XL="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7="storage";function sSe(t,e,r){return t=Zr(t),Z1e(t,e,r)}function aSe(t){return t=Zr(t),eSe(t)}function lSe(t,e){return t=Zr(t),iSe(t,e)}function cSe(t=_k(),e){t=Zr(t);const n=bk(t,f7).getImmediate({identifier:e}),i=mk("storage");return i&&uSe(n,...i),n}function uSe(t,e,r,n={}){oSe(t,e,r,n)}function fSe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new xj(r,n,i,e,xk)}function dSe(){Gf(new Ac(f7,fSe,"PUBLIC").setMultipleInstances(!0)),Uo(YL,XL,""),Uo(YL,XL,"esm2017")}dSe();const hSe=cSe(xO),JL=(t,e)=>{const r=e??`images/uploads/ungroup/image_${hs()}`,n=lSe(hSe,r);return sSe(n,t).then(async i=>({url:await aSe(i.ref)}))},ZL={title:"",name:"新的玩家",color:"#FF0000",proPicUrl:""};function d7({defaultValue:t,onSubmit:e}){const{reset:r,setValue:n,control:i,handleSubmit:o}=Kd({defaultValues:ZL}),[{loading:s},a]=t1(e,[e]),l=E.useMemo(()=>o(m=>{a(m)}),[a,o]),c=Ya({control:i}),f=E.useCallback(m=>JL(m).then(({url:y})=>{n("proPicUrl",y)}),[n]),d=E.useCallback(()=>{n("proPicUrl",null)},[n]),h=E.useCallback(m=>JL(m).then(({url:y})=>{n("teamPicUrl",y)}),[n]),p=E.useCallback(()=>{n("teamPicUrl",null)},[n]);return E.useEffect(()=>{r(t??ZL)},[t,r]),u.jsxs("form",{onSubmit:l,className:"space-y-6",children:[u.jsxs("div",{className:"flex gap-x-6",children:[u.jsx("div",{className:"shrink-0",children:u.jsx(wn,{label:"顏色",children:u.jsx(Mn,{name:"color",control:i,render:({field:m})=>u.jsx(KH,{...m}),disabled:s})})}),u.jsxs("div",{className:"flex-1 space-y-6",children:[u.jsx(wn,{label:"稱號",children:u.jsx(Mn,{name:"title",control:i,render:({field:m})=>u.jsx(_a,{type:"text",...m,placeholder:"例：天鳳鳳位、雀魂x段",disabled:s})})}),u.jsx(wn,{className:"mb-6",label:"名字",children:u.jsx(Mn,{name:"name",control:i,rules:{required:!0},render:({field:m})=>u.jsx(_a,{...m}),disabled:s})}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-6",children:[u.jsx(wn,{className:"mb-6",label:"玩家圖片",action:c.proPicUrl&&u.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:d,children:"移除"}),children:u.jsx(qL,{helperText:"建議大小 360px * 500px (18:25)",onChangeFile:f,children:c.proPicUrl&&u.jsx("img",{className:"aspect-[18/25]",src:c.proPicUrl})})}),u.jsx(wn,{className:"mb-6",label:"隊伍圖片",action:c.teamPicUrl&&u.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:p,children:"移除"}),children:u.jsx(qL,{helperText:"建議大小 500px * 500px (1:1)",onChangeFile:h,children:c.teamPicUrl&&u.jsx("img",{className:"aspect-square",src:c.teamPicUrl})})})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"mb-2",children:"預覽"}),u.jsx("div",{className:"text-[4rem] p-4 bg-gray-800 text-white",children:u.jsx(Qa,{player:c,score:25e3,waitingTiles:["5m","6m","7m"],isRiichi:!0,isEast:!0})})]}),u.jsx("div",{children:u.jsx(Oe,{type:"submit",loading:s,children:"儲存"})})]})}var pSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,_j=_j||{},Ee=pSe||self;function k1(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Dg(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function mSe(t){return Object.prototype.hasOwnProperty.call(t,NA)&&t[NA]||(t[NA]=++ySe)}var NA="closure_uid_"+(1e9*Math.random()>>>0),ySe=0;function gSe(t,e,r){return t.call.apply(t.bind,arguments)}function vSe(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function fn(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?fn=gSe:fn=vSe,fn.apply(null,arguments)}function Qv(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function Dr(t,e){function r(){}r.prototype=e.prototype,t.$=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.ac=function(n,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(n,s)}}function al(){this.s=this.s,this.o=this.o}var bSe=0;al.prototype.s=!1;al.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),bSe!=0)&&mSe(this)};al.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const h7=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function wj(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function e3(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(k1(n)){const i=t.length||0,o=n.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=n[s]}else t.push(n)}}function dn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var xSe=function(){if(!Ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const r=()=>{};Ee.addEventListener("test",r,e),Ee.removeEventListener("test",r,e)}catch{}return t}();function qm(t){return/^[\s\xa0]*$/.test(t)}function O1(){var t=Ee.navigator;return t&&(t=t.userAgent)?t:""}function Io(t){return O1().indexOf(t)!=-1}function Sj(t){return Sj[" "](t),t}Sj[" "]=function(){};function _Se(t,e){var r=hEe;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}var wSe=Io("Opera"),ud=Io("Trident")||Io("MSIE"),p7=Io("Edge"),NT=p7||ud,m7=Io("Gecko")&&!(O1().toLowerCase().indexOf("webkit")!=-1&&!Io("Edge"))&&!(Io("Trident")||Io("MSIE"))&&!Io("Edge"),SSe=O1().toLowerCase().indexOf("webkit")!=-1&&!Io("Edge");function y7(){var t=Ee.document;return t?t.documentMode:void 0}var kT;e:{var kA="",OA=function(){var t=O1();if(m7)return/rv:([^\);]+)(\)|;)/.exec(t);if(p7)return/Edge\/([\d\.]+)/.exec(t);if(ud)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(SSe)return/WebKit\/(\S+)/.exec(t);if(wSe)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(OA&&(kA=OA?OA[1]:""),ud){var jA=y7();if(jA!=null&&jA>parseFloat(kA)){kT=String(jA);break e}}kT=kA}var OT;if(Ee.document&&ud){var t3=y7();OT=t3||parseInt(kT,10)||void 0}else OT=void 0;var ESe=OT;function Hm(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(m7){e:{try{Sj(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ASe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Hm.$.h.call(this)}}Dr(Hm,dn);var ASe={2:"touch",3:"pen",4:"mouse"};Hm.prototype.h=function(){Hm.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Mg="closure_listenable_"+(1e6*Math.random()|0),CSe=0;function PSe(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.la=i,this.key=++CSe,this.fa=this.ia=!1}function j1(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ej(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function TSe(t,e){for(const r in t)e.call(void 0,t[r],r,t)}function g7(t){const e={};for(const r in t)e[r]=t[r];return e}const r3="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v7(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let o=0;o<r3.length;o++)r=r3[o],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function R1(t){this.src=t,this.g={},this.h=0}R1.prototype.add=function(t,e,r,n,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=RT(t,e,n,i);return-1<s?(e=t[s],r||(e.ia=!1)):(e=new PSe(e,this.src,o,!!n,i),e.ia=r,t.push(e)),e};function jT(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=h7(n,e),o;(o=0<=i)&&Array.prototype.splice.call(n,i,1),o&&(j1(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function RT(t,e,r,n){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!r&&o.la==n)return i}return-1}var Aj="closure_lm_"+(1e6*Math.random()|0),RA={};function b7(t,e,r,n,i){if(n&&n.once)return _7(t,e,r,n,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)b7(t,e[o],r,n,i);return null}return r=Tj(r),t&&t[Mg]?t.O(e,r,Dg(n)?!!n.capture:!!n,i):x7(t,e,r,!1,n,i)}function x7(t,e,r,n,i,o){if(!e)throw Error("Invalid event type");var s=Dg(i)?!!i.capture:!!i,a=Pj(t);if(a||(t[Aj]=a=new R1(t)),r=a.add(e,r,n,s,o),r.proxy)return r;if(n=ISe(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)xSe||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(S7(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function ISe(){function t(r){return e.call(t.src,t.listener,r)}const e=NSe;return t}function _7(t,e,r,n,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)_7(t,e[o],r,n,i);return null}return r=Tj(r),t&&t[Mg]?t.P(e,r,Dg(n)?!!n.capture:!!n,i):x7(t,e,r,!0,n,i)}function w7(t,e,r,n,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)w7(t,e[o],r,n,i);else n=Dg(n)?!!n.capture:!!n,r=Tj(r),t&&t[Mg]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],r=RT(o,r,n,i),-1<r&&(j1(o[r]),Array.prototype.splice.call(o,r,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Pj(t))&&(e=t.g[e.toString()],t=-1,e&&(t=RT(e,r,n,i)),(r=-1<t?e[t]:null)&&Cj(r))}function Cj(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Mg])jT(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(S7(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=Pj(e))?(jT(r,t),r.h==0&&(r.src=null,e[Aj]=null)):j1(t)}}}function S7(t){return t in RA?RA[t]:RA[t]="on"+t}function NSe(t,e){if(t.fa)t=!0;else{e=new Hm(e,this);var r=t.listener,n=t.la||t.src;t.ia&&Cj(t),t=r.call(n,e)}return t}function Pj(t){return t=t[Aj],t instanceof R1?t:null}var $A="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tj(t){return typeof t=="function"?t:(t[$A]||(t[$A]=function(e){return t.handleEvent(e)}),t[$A])}function Rr(){al.call(this),this.i=new R1(this),this.S=this,this.J=null}Dr(Rr,al);Rr.prototype[Mg]=!0;Rr.prototype.removeEventListener=function(t,e,r,n){w7(this,t,e,r,n)};function Yr(t,e){var r,n=t.J;if(n)for(r=[];n;n=n.J)r.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new dn(e,t);else if(e instanceof dn)e.target=e.target||t;else{var i=e;e=new dn(n,t),v7(e,i)}if(i=!0,r)for(var o=r.length-1;0<=o;o--){var s=e.g=r[o];i=Yv(s,n,!0,e)&&i}if(s=e.g=t,i=Yv(s,n,!0,e)&&i,i=Yv(s,n,!1,e)&&i,r)for(o=0;o<r.length;o++)s=e.g=r[o],i=Yv(s,n,!1,e)&&i}Rr.prototype.N=function(){if(Rr.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)j1(r[n]);delete t.g[e],t.h--}}this.J=null};Rr.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};Rr.prototype.P=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Yv(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==r){var a=s.listener,l=s.la||s.src;s.ia&&jT(t.i,s),i=a.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var Ij=Ee.JSON.stringify;class kSe{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function OSe(){var t=Nj;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class jSe{constructor(){this.h=this.g=null}add(e,r){const n=E7.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var E7=new kSe(()=>new RSe,t=>t.reset());class RSe{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function $Se(t){var e=1;t=t.split(":");const r=[];for(;0<e&&t.length;)r.push(t.shift()),e--;return t.length&&r.push(t.join(":")),r}function DSe(t){Ee.setTimeout(()=>{throw t},0)}let Km,Qm=!1,Nj=new jSe,A7=()=>{const t=Ee.Promise.resolve(void 0);Km=()=>{t.then(MSe)}};var MSe=()=>{for(var t;t=OSe();){try{t.h.call(t.g)}catch(r){DSe(r)}var e=E7;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qm=!1};function $1(t,e){Rr.call(this),this.h=t||1,this.g=e||Ee,this.j=fn(this.qb,this),this.l=Date.now()}Dr($1,Rr);ie=$1.prototype;ie.ga=!1;ie.T=null;ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yr(this,"tick"),this.ga&&(kj(this),this.start()))}};ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function kj(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ie.N=function(){$1.$.N.call(this),kj(this),delete this.g};function Oj(t,e,r){if(typeof t=="function")r&&(t=fn(t,r));else if(t&&typeof t.handleEvent=="function")t=fn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ee.setTimeout(t,e||0)}function C7(t){t.g=Oj(()=>{t.g=null,t.i&&(t.i=!1,C7(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class FSe extends al{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:C7(this)}N(){super.N(),this.g&&(Ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ym(t){al.call(this),this.h=t,this.g={}}Dr(Ym,al);var n3=[];function P7(t,e,r,n){Array.isArray(r)||(r&&(n3[0]=r.toString()),r=n3);for(var i=0;i<r.length;i++){var o=b7(e,r[i],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function T7(t){Ej(t.g,function(e,r){this.g.hasOwnProperty(r)&&Cj(e)},t),t.g={}}Ym.prototype.N=function(){Ym.$.N.call(this),T7(this)};Ym.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function D1(){this.g=!0}D1.prototype.Ea=function(){this.g=!1};function LSe(t,e,r,n,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var f=c[0];c=c[1];var d=f.split("_");s=2<=d.length&&d[1]=="type"?s+(f+"="+c+"&"):s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function BSe(t,e,r,n,i,o,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+o+" "+s})}function Wu(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+VSe(t,r)+(n?" "+n:"")})}function USe(t,e){t.info(function(){return"TIMEOUT: "+e})}D1.prototype.info=function(){};function VSe(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Ij(r)}catch{return e}}var zc={},i3=null;function M1(){return i3=i3||new Rr}zc.Ta="serverreachability";function I7(t){dn.call(this,zc.Ta,t)}Dr(I7,dn);function Xm(t){const e=M1();Yr(e,new I7(e))}zc.STAT_EVENT="statevent";function N7(t,e){dn.call(this,zc.STAT_EVENT,t),this.stat=e}Dr(N7,dn);function An(t){const e=M1();Yr(e,new N7(e,t))}zc.Ua="timingevent";function k7(t,e){dn.call(this,zc.Ua,t),this.size=e}Dr(k7,dn);function Fg(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ee.setTimeout(function(){t()},e)}var F1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},O7={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jj(){}jj.prototype.h=null;function o3(t){return t.h||(t.h=t.i())}function j7(){}var Lg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Rj(){dn.call(this,"d")}Dr(Rj,dn);function $j(){dn.call(this,"c")}Dr($j,dn);var $T;function L1(){}Dr(L1,jj);L1.prototype.g=function(){return new XMLHttpRequest};L1.prototype.i=function(){return{}};$T=new L1;function Bg(t,e,r,n){this.l=t,this.j=e,this.m=r,this.W=n||1,this.U=new Ym(this),this.P=WSe,t=NT?125:void 0,this.V=new $1(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new R7}function R7(){this.i=null,this.g="",this.h=!1}var WSe=45e3,$7={},DT={};ie=Bg.prototype;ie.setTimeout=function(t){this.P=t};function MT(t,e,r){t.L=1,t.A=U1(Is(e)),t.u=r,t.S=!0,D7(t,null)}function D7(t,e){t.G=Date.now(),Ug(t),t.B=Is(t.A);var r=t.B,n=t.W;Array.isArray(n)||(n=[String(n)]),z7(r.i,"t",n),t.o=0,r=t.l.J,t.h=new R7,t.g=fK(t.l,r?e:null,!t.u),0<t.O&&(t.M=new FSe(fn(t.Pa,t,t.g),t.O)),P7(t.U,t.g,"readystatechange",t.nb),e=t.I?g7(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Xm(),LSe(t.j,t.v,t.B,t.m,t.W,t.u)}ie.nb=function(t){t=t.target;const e=this.M;e&&Do(t)==3?e.l():this.Pa(t)};ie.Pa=function(t){try{if(t==this.g)e:{const f=Do(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>f)&&(f!=3||NT||this.g&&(this.h.h||this.g.ja()||c3(this.g)))){this.J||f!=4||e==7||(e==8||0>=d?Xm(3):Xm(2)),B1(this);var r=this.g.da();this.ca=r;t:if(M7(this)){var n=c3(this.g);t="";var i=n.length,o=Do(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bl(this),Kp(this);var s="";break t}this.h.i=new Ee.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==i-1});n.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=r==200,BSe(this.j,this.v,this.B,this.m,this.W,f,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qm(a)){var c=a;break t}}c=null}if(r=c)Wu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,FT(this,r);else{this.i=!1,this.s=3,An(12),Bl(this),Kp(this);break e}}this.S?(F7(this,f,s),NT&&this.i&&f==3&&(P7(this.U,this.V,"tick",this.mb),this.V.start())):(Wu(this.j,this.m,s,null),FT(this,s)),f==4&&Bl(this),this.i&&!this.J&&(f==4?aK(this.l,this):(this.i=!1,Ug(this)))}else uEe(this.g),r==400&&0<s.indexOf("Unknown SID")?(this.s=3,An(12)):(this.s=0,An(13)),Bl(this),Kp(this)}}}catch{}finally{}};function M7(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function F7(t,e,r){let n=!0,i;for(;!t.J&&t.o<r.length;)if(i=zSe(t,r),i==DT){e==4&&(t.s=4,An(14),n=!1),Wu(t.j,t.m,null,"[Incomplete Response]");break}else if(i==$7){t.s=4,An(15),Wu(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else Wu(t.j,t.m,i,null),FT(t,i);M7(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||r.length!=0||t.h.h||(t.s=1,An(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),Uj(e),e.M=!0,An(11))):(Wu(t.j,t.m,r,"[Invalid Chunked Response]"),Bl(t),Kp(t))}ie.mb=function(){if(this.g){var t=Do(this.g),e=this.g.ja();this.o<e.length&&(B1(this),F7(this,t,e),this.i&&t!=4&&Ug(this))}};function zSe(t,e){var r=t.o,n=e.indexOf(`
`,r);return n==-1?DT:(r=Number(e.substring(r,n)),isNaN(r)?$7:(n+=1,n+r>e.length?DT:(e=e.slice(n,n+r),t.o=n+r,e)))}ie.cancel=function(){this.J=!0,Bl(this)};function Ug(t){t.Y=Date.now()+t.P,L7(t,t.P)}function L7(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Fg(fn(t.lb,t),e)}function B1(t){t.C&&(Ee.clearTimeout(t.C),t.C=null)}ie.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(USe(this.j,this.B),this.L!=2&&(Xm(),An(17)),Bl(this),this.s=2,Kp(this)):L7(this,this.Y-t)};function Kp(t){t.l.H==0||t.J||aK(t.l,t)}function Bl(t){B1(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,kj(t.V),T7(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function FT(t,e){try{var r=t.l;if(r.H!=0&&(r.g==t||LT(r.i,t))){if(!t.K&&LT(r.i,t)&&r.H==3){try{var n=r.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<t.G)n_(r),G1(r);else break e;Bj(r),An(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=Fg(fn(r.ib,r),6e3));if(1>=H7(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Ul(r,11)}else if((t.K||r.g==t)&&n_(r),!qm(e))for(i=r.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(r.V=c[0],c=c[1],r.H==2)if(c[0]=="c"){r.K=c[1],r.pa=c[2];const f=c[3];f!=null&&(r.ra=f,r.l.info("VER="+r.ra));const d=c[4];d!=null&&(r.Ga=d,r.l.info("SVER="+r.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const p=t.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=n.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Dj(o,o.h),o.h=null))}if(n.F){const y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(n.Da=y,Ot(n.I,n.F,y))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-t.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var s=t;if(n.wa=uK(n,n.J?n.pa:null,n.Y),s.K){K7(n.i,s);var a=s,l=n.L;l&&a.setTimeout(l),a.C&&(B1(a),Ug(a)),n.g=s}else oK(n);0<r.j.length&&q1(r)}else c[0]!="stop"&&c[0]!="close"||Ul(r,7);else r.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ul(r,7):Lj(r):c[0]!="noop"&&r.h&&r.h.Aa(c),r.A=0)}}Xm(4)}catch{}}function GSe(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(k1(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function qSe(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(k1(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function B7(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(k1(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=qSe(t),n=GSe(t),i=n.length,o=0;o<i;o++)e.call(void 0,n[o],r&&r[o],t)}var U7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HSe(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var o=t[r].substring(0,n);i=t[r].substring(n+1)}else o=t[r];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function yc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof yc){this.h=t.h,t_(this,t.j),this.s=t.s,this.g=t.g,r_(this,t.m),this.l=t.l;var e=t.i,r=new Jm;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),s3(this,r),this.o=t.o}else t&&(e=String(t).match(U7))?(this.h=!1,t_(this,e[1]||"",!0),this.s=gp(e[2]||""),this.g=gp(e[3]||"",!0),r_(this,e[4]),this.l=gp(e[5]||"",!0),s3(this,e[6]||"",!0),this.o=gp(e[7]||"")):(this.h=!1,this.i=new Jm(null,this.h))}yc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(vp(e,a3,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(vp(e,a3,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(vp(r,r.charAt(0)=="/"?YSe:QSe,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",vp(r,JSe)),t.join("")};function Is(t){return new yc(t)}function t_(t,e,r){t.j=r?gp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function r_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function s3(t,e,r){e instanceof Jm?(t.i=e,ZSe(t.i,t.h)):(r||(e=vp(e,XSe)),t.i=new Jm(e,t.h))}function Ot(t,e,r){t.i.set(e,r)}function U1(t){return Ot(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function gp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vp(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,KSe),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function KSe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var a3=/[#\/\?@]/g,QSe=/[#\?:]/g,YSe=/[#\?]/g,XSe=/[#\?@]/g,JSe=/#/g;function Jm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ll(t){t.g||(t.g=new Map,t.h=0,t.i&&HSe(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}ie=Jm.prototype;ie.add=function(t,e){ll(this),this.i=null,t=Jd(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function V7(t,e){ll(t),e=Jd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function W7(t,e){return ll(t),e=Jd(t,e),t.g.has(e)}ie.forEach=function(t,e){ll(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};ie.ta=function(){ll(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let o=0;o<i.length;o++)r.push(e[n])}return r};ie.Z=function(t){ll(this);let e=[];if(typeof t=="string")W7(this,t)&&(e=e.concat(this.g.get(Jd(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};ie.set=function(t,e){return ll(this),this.i=null,t=Jd(this,t),W7(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function z7(t,e,r){V7(t,e),0<r.length&&(t.i=null,t.g.set(Jd(t,e),wj(r)),t.h+=r.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var i=o;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function Jd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ZSe(t,e){e&&!t.j&&(ll(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(V7(this,n),z7(this,i,r))},t)),t.j=e}var eEe=class{constructor(t,e){this.g=t,this.map=e}};function G7(t){this.l=t||tEe,Ee.PerformanceNavigationTiming?(t=Ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ee.g&&Ee.g.Ka&&Ee.g.Ka()&&Ee.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tEe=10;function q7(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function H7(t){return t.h?1:t.g?t.g.size:0}function LT(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Dj(t,e){t.g?t.g.add(e):t.h=e}function K7(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}G7.prototype.cancel=function(){if(this.i=Q7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Q7(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.F);return e}return wj(t.i)}var rEe=class{stringify(t){return Ee.JSON.stringify(t,void 0)}parse(t){return Ee.JSON.parse(t,void 0)}};function nEe(){this.g=new rEe}function iEe(t,e,r){const n=r||"";try{B7(t,function(i,o){let s=i;Dg(i)&&(s=Ij(i)),e.push(n+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function oEe(t,e){const r=new D1;if(Ee.Image){const n=new Image;n.onload=Qv(Xv,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Qv(Xv,r,n,"TestLoadImage: error",!1,e),n.onabort=Qv(Xv,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Qv(Xv,r,n,"TestLoadImage: timeout",!1,e),Ee.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Xv(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function V1(t){this.l=t.ec||null,this.j=t.ob||!1}Dr(V1,jj);V1.prototype.g=function(){return new W1(this.l,this.j)};V1.prototype.i=function(t){return function(){return t}}({});function W1(t,e){Rr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Mj,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Dr(W1,Rr);var Mj=0;ie=W1.prototype;ie.open=function(t,e){if(this.readyState!=Mj)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zm(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vg(this)),this.readyState=Mj};ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zm(this)),this.g&&(this.readyState=3,Zm(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Y7(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Y7(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Vg(this):Zm(this),this.readyState==3&&Y7(this)}};ie.Za=function(t){this.g&&(this.response=this.responseText=t,Vg(this))};ie.Ya=function(t){this.g&&(this.response=t,Vg(this))};ie.ka=function(){this.g&&Vg(this)};function Vg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zm(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function Zm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(W1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var sEe=Ee.JSON.parse;function Qt(t){Rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=X7,this.L=this.M=!1}Dr(Qt,Rr);var X7="",aEe=/^https?$/i,lEe=["POST","PUT"];ie=Qt.prototype;ie.Oa=function(t){this.M=t};ie.ha=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$T.g(),this.C=this.u?o3(this.u):o3($T),this.g.onreadystatechange=fn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){l3(this,o);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const o of n.keys())r.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(o=>o.toLowerCase()=="content-type"),i=Ee.FormData&&t instanceof Ee.FormData,!(0<=h7(lEe,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of r)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eK(this),0<this.B&&((this.L=cEe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fn(this.ua,this)):this.A=Oj(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){l3(this,o)}};function cEe(t){return ud&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.ua=function(){typeof _j<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yr(this,"timeout"),this.abort(8))};function l3(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,J7(t),z1(t)}function J7(t){t.F||(t.F=!0,Yr(t,"complete"),Yr(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Yr(this,"complete"),Yr(this,"abort"),z1(this))};ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),z1(this,!0)),Qt.$.N.call(this)};ie.La=function(){this.s||(this.G||this.v||this.l?Z7(this):this.kb())};ie.kb=function(){Z7(this)};function Z7(t){if(t.h&&typeof _j<"u"&&(!t.C[1]||Do(t)!=4||t.da()!=2)){if(t.v&&Do(t)==4)Oj(t.La,0,t);else if(Yr(t,"readystatechange"),Do(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=s===0){var i=String(t.I).match(U7)[1]||null;!i&&Ee.self&&Ee.self.location&&(i=Ee.self.location.protocol.slice(0,-1)),n=!aEe.test(i?i.toLowerCase():"")}r=n}if(r)Yr(t,"complete"),Yr(t,"success");else{t.m=6;try{var o=2<Do(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",J7(t)}}finally{z1(t)}}}}function z1(t,e){if(t.g){eK(t);const r=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Yr(t,"ready");try{r.onreadystatechange=n}catch{}}}function eK(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ee.clearTimeout(t.A),t.A=null)}ie.isActive=function(){return!!this.g};function Do(t){return t.g?t.g.readyState:0}ie.da=function(){try{return 2<Do(this)?this.g.status:-1}catch{return-1}};ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),sEe(e)}};function c3(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case X7:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function uEe(t){const e={};t=(t.g&&2<=Do(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(qm(t[n]))continue;var r=$Se(t[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const o=e[i]||[];e[i]=o,o.push(r)}TSe(e,function(n){return n.join(", ")})}ie.Ia=function(){return this.m};ie.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function tK(t){let e="";return Ej(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function Fj(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=tK(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):Ot(t,e,r))}function Uh(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function rK(t){this.Ga=0,this.j=[],this.l=new D1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uh("baseRetryDelayMs",5e3,t),this.hb=Uh("retryDelaySeedMs",1e4,t),this.eb=Uh("forwardChannelMaxRetries",2,t),this.xa=Uh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new G7(t&&t.concurrentRequestLimit),this.Ja=new nEe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ie=rK.prototype;ie.ra=8;ie.H=1;function Lj(t){if(nK(t),t.H==3){var e=t.W++,r=Is(t.I);if(Ot(r,"SID",t.K),Ot(r,"RID",e),Ot(r,"TYPE","terminate"),Wg(t,r),e=new Bg(t,t.l,e),e.L=2,e.A=U1(Is(r)),r=!1,Ee.navigator&&Ee.navigator.sendBeacon)try{r=Ee.navigator.sendBeacon(e.A.toString(),"")}catch{}!r&&Ee.Image&&(new Image().src=e.A,r=!0),r||(e.g=fK(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ug(e)}cK(t)}function G1(t){t.g&&(Uj(t),t.g.cancel(),t.g=null)}function nK(t){G1(t),t.u&&(Ee.clearTimeout(t.u),t.u=null),n_(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ee.clearTimeout(t.m),t.m=null)}function q1(t){if(!q7(t.i)&&!t.m){t.m=!0;var e=t.Na;Km||A7(),Qm||(Km(),Qm=!0),Nj.add(e,t),t.C=0}}function fEe(t,e){return H7(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Fg(fn(t.Na,t,e),lK(t,t.C)),t.C++,!0)}ie.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Bg(this,this.l,t);let o=this.s;if(this.U&&(o?(o=g7(o),v7(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=iK(this,i,e),r=Is(this.I),Ot(r,"RID",t),Ot(r,"CVER",22),this.F&&Ot(r,"X-HTTP-Session-Id",this.F),Wg(this,r),o&&(this.O?e="headers="+encodeURIComponent(String(tK(o)))+"&"+e:this.o&&Fj(r,this.o,o)),Dj(this.i,i),this.bb&&Ot(r,"TYPE","init"),this.P?(Ot(r,"$req",e),Ot(r,"SID","null"),i.aa=!0,MT(i,r,null)):MT(i,r,e),this.H=2}}else this.H==3&&(t?u3(this,t):this.j.length==0||q7(this.i)||u3(this))};function u3(t,e){var r;e?r=e.m:r=t.W++;const n=Is(t.I);Ot(n,"SID",t.K),Ot(n,"RID",r),Ot(n,"AID",t.V),Wg(t,n),t.o&&t.s&&Fj(n,t.o,t.s),r=new Bg(t,t.l,r,t.C+1),t.o===null&&(r.I=t.s),e&&(t.j=e.F.concat(t.j)),e=iK(t,r,1e3),r.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Dj(t.i,r),MT(r,n,e)}function Wg(t,e){t.na&&Ej(t.na,function(r,n){Ot(e,n,r)}),t.h&&B7({},function(r,n){Ot(e,n,r)})}function iK(t,e,r){r=Math.min(t.j.length,r);var n=t.h?fn(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+r];o==-1?0<r?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<r;l++){let c=i[l].g;const f=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{iEe(f,s,"req"+c+"_")}catch{n&&n(f)}}if(a){n=s.join("&");break e}}}return t=t.j.splice(0,r),e.F=t,n}function oK(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Km||A7(),Qm||(Km(),Qm=!0),Nj.add(e,t),t.A=0}}function Bj(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Fg(fn(t.Ma,t),lK(t,t.A)),t.A++,!0)}ie.Ma=function(){if(this.u=null,sK(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Fg(fn(this.jb,this),t)}};ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,An(10),G1(this),sK(this))};function Uj(t){t.B!=null&&(Ee.clearTimeout(t.B),t.B=null)}function sK(t){t.g=new Bg(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Is(t.wa);Ot(e,"RID","rpc"),Ot(e,"SID",t.K),Ot(e,"AID",t.V),Ot(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ot(e,"TO",t.qa),Ot(e,"TYPE","xmlhttp"),Wg(t,e),t.o&&t.s&&Fj(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var r=t.g;t=t.pa,r.L=1,r.A=U1(Is(e)),r.u=null,r.S=!0,D7(r,t)}ie.ib=function(){this.v!=null&&(this.v=null,G1(this),Bj(this),An(19))};function n_(t){t.v!=null&&(Ee.clearTimeout(t.v),t.v=null)}function aK(t,e){var r=null;if(t.g==e){n_(t),Uj(t),t.g=null;var n=2}else if(LT(t.i,e))r=e.F,K7(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){r=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;n=M1(),Yr(n,new k7(n,r)),q1(t)}else oK(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(n==1&&fEe(t,e)||n==2&&Bj(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:Ul(t,5);break;case 4:Ul(t,10);break;case 3:Ul(t,6);break;default:Ul(t,2)}}}function lK(t,e){let r=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(r*=2),r*e}function Ul(t,e){if(t.l.info("Error code "+e),e==2){var r=null;t.h&&(r=null);var n=fn(t.pb,t);r||(r=new yc("//www.google.com/images/cleardot.gif"),Ee.location&&Ee.location.protocol=="http"||t_(r,"https"),U1(r)),oEe(r.toString(),n)}else An(2);t.H=0,t.h&&t.h.za(e),cK(t),nK(t)}ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),An(2)):(this.l.info("Failed to ping google.com"),An(1))};function cK(t){if(t.H=0,t.ma=[],t.h){const e=Q7(t.i);(e.length!=0||t.j.length!=0)&&(e3(t.ma,e),e3(t.ma,t.j),t.i.i.length=0,wj(t.j),t.j.length=0),t.h.ya()}}function uK(t,e,r){var n=r instanceof yc?Is(r):new yc(r);if(n.g!="")e&&(n.g=e+"."+n.g),r_(n,n.m);else{var i=Ee.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new yc(null);n&&t_(o,n),e&&(o.g=e),i&&r_(o,i),r&&(o.l=r),n=o}return r=t.F,e=t.Da,r&&e&&Ot(n,r,e),Ot(n,"VER",t.ra),Wg(t,n),n}function fK(t,e,r){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Qt(new V1({ob:r})):new Qt(t.va),e.Oa(t.J),e}ie.isActive=function(){return!!this.h&&this.h.isActive(this)};function dK(){}ie=dK.prototype;ie.Ba=function(){};ie.Aa=function(){};ie.za=function(){};ie.ya=function(){};ie.isActive=function(){return!0};ie.Va=function(){};function i_(){if(ud&&!(10<=Number(ESe)))throw Error("Environmental error: no available transport.")}i_.prototype.g=function(t,e){return new li(t,e)};function li(t,e){Rr.call(this),this.g=new rK(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!qm(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qm(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Zd(this)}Dr(li,Rr);li.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,r=this.h||void 0;An(0),t.Y=e,t.na=r||{},t.G=t.aa,t.I=uK(t,null,t.Y),q1(t)};li.prototype.close=function(){Lj(this.g)};li.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=Ij(t),t=r);e.j.push(new eEe(e.fb++,t)),e.H==3&&q1(e)};li.prototype.N=function(){this.g.h=null,delete this.j,Lj(this.g),delete this.g,li.$.N.call(this)};function hK(t){Rj.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Dr(hK,Rj);function pK(){$j.call(this),this.status=1}Dr(pK,$j);function Zd(t){this.g=t}Dr(Zd,dK);Zd.prototype.Ba=function(){Yr(this.g,"a")};Zd.prototype.Aa=function(t){Yr(this.g,new hK(t))};Zd.prototype.za=function(t){Yr(this.g,new pK)};Zd.prototype.ya=function(){Yr(this.g,"b")};function dEe(){this.blockSize=-1}function yo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Dr(yo,dEe);yo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function DA(t,e,r){r||(r=0);var n=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)n[i]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;e=t.g[0],r=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^r&(i^o))+n[0]+3614090360&4294967295;e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[3]+3250441966&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[4]+4118548399&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[7]+4249261313&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[8]+1770035416&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[11]+2304563134&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[12]+1804603682&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[15]+1236535329&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(r^i))+n[1]+4129170786&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[0]+3921069994&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[5]+3593408605&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[4]+3889429448&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[9]+568446438&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[8]+1163531501&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[13]+2850285829&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[12]+2368359562&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(r^i^o)+n[5]+4294588738&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[14]+4259657740&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[1]+2763975236&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[10]+3200236656&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[13]+681279174&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[6]+76029189&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[9]+3654602809&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[2]+3299628645&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(i^(r|~o))+n[0]+4096336452&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[5]+4237533241&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[12]+1700485571&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[1]+2240044497&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[8]+1873313359&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[13]+1309151649&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[4]+4149444226&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}yo.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var r=e-this.blockSize,n=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=r;)DA(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(n[i++]=t.charCodeAt(o++),i==this.blockSize){DA(this,n),i=0;break}}else for(;o<e;)if(n[i++]=t[o++],i==this.blockSize){DA(this,n),i=0;break}}this.h=i,this.i+=e};yo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var r=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=r&255,r/=256;for(this.j(t),t=Array(16),e=r=0;4>e;++e)for(var n=0;32>n;n+=8)t[r++]=this.g[e]>>>n&255;return t};function pt(t,e){this.h=e;for(var r=[],n=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;n&&o==e||(r[i]=o,n=!1)}this.g=r}var hEe={};function Vj(t){return-128<=t&&128>t?_Se(t,function(e){return new pt([e|0],0>e?-1:0)}):new pt([t|0],0>t?-1:0)}function Mo(t){if(isNaN(t)||!isFinite(t))return mf;if(0>t)return Gr(Mo(-t));for(var e=[],r=1,n=0;t>=r;n++)e[n]=t/r|0,r*=BT;return new pt(e,0)}function mK(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Gr(mK(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Mo(Math.pow(e,8)),n=mf,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Mo(Math.pow(e,o)),n=n.R(o).add(Mo(s))):(n=n.R(r),n=n.add(Mo(s)))}return n}var BT=4294967296,mf=Vj(0),UT=Vj(1),f3=Vj(16777216);ie=pt.prototype;ie.ea=function(){if(Pi(this))return-Gr(this).ea();for(var t=0,e=1,r=0;r<this.g.length;r++){var n=this.D(r);t+=(0<=n?n:BT+n)*e,e*=BT}return t};ie.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ms(this))return"0";if(Pi(this))return"-"+Gr(this).toString(t);for(var e=Mo(Math.pow(t,6)),r=this,n="";;){var i=s_(r,e).g;r=o_(r,i.R(e));var o=((0<r.g.length?r.g[0]:r.h)>>>0).toString(t);if(r=i,ms(r))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ms(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Pi(t){return t.h==-1}ie.X=function(t){return t=o_(this,t),Pi(t)?-1:ms(t)?0:1};function Gr(t){for(var e=t.g.length,r=[],n=0;n<e;n++)r[n]=~t.g[n];return new pt(r,~t.h).add(UT)}ie.abs=function(){return Pi(this)?Gr(this):this};ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0,i=0;i<=e;i++){var o=n+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);n=s>>>16,o&=65535,s&=65535,r[i]=s<<16|o}return new pt(r,r[r.length-1]&-2147483648?-1:0)};function o_(t,e){return t.add(Gr(e))}ie.R=function(t){if(ms(this)||ms(t))return mf;if(Pi(this))return Pi(t)?Gr(this).R(Gr(t)):Gr(Gr(this).R(t));if(Pi(t))return Gr(this.R(Gr(t)));if(0>this.X(f3)&&0>t.X(f3))return Mo(this.ea()*t.ea());for(var e=this.g.length+t.g.length,r=[],n=0;n<2*e;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<t.g.length;i++){var o=this.D(n)>>>16,s=this.D(n)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;r[2*n+2*i]+=s*l,Jv(r,2*n+2*i),r[2*n+2*i+1]+=o*l,Jv(r,2*n+2*i+1),r[2*n+2*i+1]+=s*a,Jv(r,2*n+2*i+1),r[2*n+2*i+2]+=o*a,Jv(r,2*n+2*i+2)}for(n=0;n<e;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=e;n<2*e;n++)r[n]=0;return new pt(r,0)};function Jv(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Vh(t,e){this.g=t,this.h=e}function s_(t,e){if(ms(e))throw Error("division by zero");if(ms(t))return new Vh(mf,mf);if(Pi(t))return e=s_(Gr(t),e),new Vh(Gr(e.g),Gr(e.h));if(Pi(e))return e=s_(t,Gr(e)),new Vh(Gr(e.g),e.h);if(30<t.g.length){if(Pi(t)||Pi(e))throw Error("slowDivide_ only works with positive integers.");for(var r=UT,n=e;0>=n.X(t);)r=d3(r),n=d3(n);var i=au(r,1),o=au(n,1);for(n=au(n,2),r=au(r,2);!ms(n);){var s=o.add(n);0>=s.X(t)&&(i=i.add(r),o=s),n=au(n,1),r=au(r,1)}return e=o_(t,i.R(e)),new Vh(i,e)}for(i=mf;0<=t.X(e);){for(r=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=Mo(r),s=o.R(e);Pi(s)||0<s.X(t);)r-=n,o=Mo(r),s=o.R(e);ms(o)&&(o=UT),i=i.add(o),t=o_(t,s)}return new Vh(i,t)}ie.gb=function(t){return s_(this,t).h};ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)&t.D(n);return new pt(r,this.h&t.h)};ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)|t.D(n);return new pt(r,this.h|t.h)};ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)^t.D(n);return new pt(r,this.h^t.h)};function d3(t){for(var e=t.g.length+1,r=[],n=0;n<e;n++)r[n]=t.D(n)<<1|t.D(n-1)>>>31;return new pt(r,t.h)}function au(t,e){var r=e>>5;e%=32;for(var n=t.g.length-r,i=[],o=0;o<n;o++)i[o]=0<e?t.D(o+r)>>>e|t.D(o+r+1)<<32-e:t.D(o+r);return new pt(i,t.h)}i_.prototype.createWebChannel=i_.prototype.g;li.prototype.send=li.prototype.u;li.prototype.open=li.prototype.m;li.prototype.close=li.prototype.close;F1.NO_ERROR=0;F1.TIMEOUT=8;F1.HTTP_ERROR=6;O7.COMPLETE="complete";j7.EventType=Lg;Lg.OPEN="a";Lg.CLOSE="b";Lg.ERROR="c";Lg.MESSAGE="d";Rr.prototype.listen=Rr.prototype.O;Qt.prototype.listenOnce=Qt.prototype.P;Qt.prototype.getLastError=Qt.prototype.Sa;Qt.prototype.getLastErrorCode=Qt.prototype.Ia;Qt.prototype.getStatus=Qt.prototype.da;Qt.prototype.getResponseJson=Qt.prototype.Wa;Qt.prototype.getResponseText=Qt.prototype.ja;Qt.prototype.send=Qt.prototype.ha;Qt.prototype.setWithCredentials=Qt.prototype.Oa;yo.prototype.digest=yo.prototype.l;yo.prototype.reset=yo.prototype.reset;yo.prototype.update=yo.prototype.j;pt.prototype.add=pt.prototype.add;pt.prototype.multiply=pt.prototype.R;pt.prototype.modulo=pt.prototype.gb;pt.prototype.compare=pt.prototype.X;pt.prototype.toNumber=pt.prototype.ea;pt.prototype.toString=pt.prototype.toString;pt.prototype.getBits=pt.prototype.D;pt.fromNumber=Mo;pt.fromString=mK;var pEe=function(){return new i_},mEe=function(){return M1()},MA=F1,yEe=O7,gEe=zc,h3={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zv=j7,vEe=Qt,bEe=yo,yf=pt;const p3="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new gk("@firebase/firestore");function Wh(){return jc.logLevel}function ne(t,...e){if(jc.logLevel<=et.DEBUG){const r=e.map(Wj);jc.debug(`Firestore (${eh}): ${t}`,...r)}}function Qo(t,...e){if(jc.logLevel<=et.ERROR){const r=e.map(Wj);jc.error(`Firestore (${eh}): ${t}`,...r)}}function fd(t,...e){if(jc.logLevel<=et.WARN){const r=e.map(Wj);jc.warn(`Firestore (${eh}): ${t}`,...r)}}function Wj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+t;throw Qo(e),new Error(e)}function Pt(t,e){t||Se()}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Lc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(an.UNAUTHENTICATED))}shutdown(){}}class _Ee{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class wEe{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let o=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xs,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xs)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pt(typeof n.accessToken=="string"),new yK(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string"),new an(e)}}class SEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class EEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new SEe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AEe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CEe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pt(typeof r.token=="string"),this.R=r.token,new AEe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=PEe(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function lt(t,e){return t<e?-1:t>e?1:0}function dd(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new me(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new me(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new me(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new pr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new pr(0,0))}static max(){return new Ce(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,r,n){r===void 0?r=0:r>e.length&&Se(),n===void 0?n=e.length-r:n>e.length-r&&Se(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ey.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ey?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),s=r.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Dt extends ey{construct(e,r,n){return new Dt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new me(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Dt(r)}static emptyPath(){return new Dt([])}}const TEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends ey{construct(e,r,n){return new qr(e,r,n)}static isValidIdentifier(e){return TEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new me(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new me(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new me(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new me(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(r)}static emptyPath(){return new qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Dt.fromString(e))}static fromName(e){return new xe(Dt.fromString(e).popFirst(5))}static empty(){return new xe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Dt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Dt(e.slice()))}}function IEe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(n===1e9?new pr(r+1,0):new pr(r,n));return new Ja(i,xe.empty(),e)}function NEe(t){return new Ja(t.readTime,t.key,-1)}class Ja{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ja(Ce.min(),xe.empty(),-1)}static max(){return new Ja(Ce.max(),xe.empty(),-1)}}function kEe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=xe.comparator(t.documentKey,e.documentKey),r!==0?r:lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OEe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zg(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==OEe)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new H((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof H?r:H.resolve(r)}catch(r){return H.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):H.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):H.reject(r)}static resolve(e){return new H((r,n)=>{r(e)})}static reject(e){return new H((r,n)=>{n(e)})}static waitFor(e){return new H((r,n)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&r()},l=>n(l))}),s=!0,o===i&&r()})}static or(e){let r=H.resolve(!1);for(const n of e)r=r.next(i=>i?H.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new H((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;r(e[c]).next(f=>{s[c]=f,++a,a===o&&n(s)},f=>i(f))}})}static doWhile(e,r){return new H((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new xs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Qp(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=Gj(n.target.error);this.V.reject(new Qp(e,i))}}static open(e,r,n,i){try{return new zj(r,e.transaction(i,n))}catch(o){throw new Qp(r,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new $Ee(r)}}class Vl{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Vl.S(Sm())===12.2&&Qo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),jl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!AW())return!1;if(Vl.C())return!0;const e=Sm(),r=Vl.S(e),n=0<r&&r<10,i=Vl.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const r=e.match(/Android ([\d.]+)/i),n=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(ne("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;r(s)},i.onblocked=()=>{n(new Qp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?n(new me(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new me(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Qp(e,s))},i.onupgradeneeded=o=>{ne("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{ne("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=r=>this.B(r)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const o=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.O(e);const a=zj.open(this.db,e,o?"readonly":"readwrite",n),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),H.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&s<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class REe{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return jl(this.k.delete())}}class Qp extends me{constructor(e,r){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Gg(t){return t.name==="IndexedDbTransactionError"}class $Ee{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ne("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),jl(n)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),jl(this.store.add(e))}get(e){return jl(this.store.get(e)).next(r=>(r===void 0&&(r=null),ne("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),jl(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),jl(this.store.count())}W(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(n.range);return new H((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(n),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new H((i,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{i(s.target.result)}})}H(e,r){ne("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.J=!1;const i=this.cursor(n);return this.G(i,(o,s,a)=>a.delete())}Y(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.G(i,r)}Z(e){const r=this.cursor({});return new H((n,i)=>{r.onerror=o=>{const s=Gj(o.target.error);i(s)},r.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():n()}):n()}})}G(e,r){const n=[];return new H((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new REe(a),c=r(a.primaryKey,a.value,l);if(c instanceof H){const f=c.catch(d=>(l.done(),H.reject(d)));n.push(f)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>H.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function jl(t){return new H((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=Gj(n.target.error);r(i)}})}let m3=!1;function Gj(t){const e=Vl.S(Sm());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m3||(m3=!0,setTimeout(()=>{throw n},0)),n}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.se(n),this.oe=n=>r.writeSequenceNumber(n))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}qj._e=-1;function H1(t){return t==null}function a_(t){return t===0&&1/t==-1/0}function DEe(t){return typeof t=="number"&&Number.isInteger(t)&&!a_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function th(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,r){this.comparator=e,this.root=r||Vr.EMPTY}insert(e,r){return new Wt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new e0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new e0(this.root,e,this.comparator,!1)}getReverseIterator(){return new e0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new e0(this.root,e,this.comparator,!0)}}class e0{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Vr.RED,this.left=i??Vr.EMPTY,this.right=o??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new Vr(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Vr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1;Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,r,n,i,o){return this}insert(e,r,n){return new Vr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new g3(this.data.getIterator())}getIteratorFrom(e){return new g3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Xr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Xr(this.comparator);return r.data=e,r}}class g3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new ao([])}unionWith(e){let r=new Xr(qr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ao(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return dd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bK("Invalid base64 string: "+o):o}}(e);return new mn(r)}static fromUint8Array(e){const r=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new mn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const MEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(t){if(Pt(!!t),typeof t=="string"){let e=0;const r=MEe.exec(t);if(Pt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:tr(t.seconds),nanos:tr(t.nanos)}}function tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rc(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Kj(t){const e=t.mapValue.fields.__previous_value__;return Hj(e)?Kj(e):e}function ty(t){const e=Za(t.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FEe{constructor(e,r,n,i,o,s,a,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ry{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ry("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ry&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $c(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hj(t)?4:LEe(t)?9007199254740991:10:Se()}function Yo(t,e){if(t===e)return!0;const r=$c(t);if(r!==$c(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ty(t).isEqual(ty(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Za(i.timestampValue),a=Za(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Rc(i.bytesValue).isEqual(Rc(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return tr(i.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tr(i.integerValue)===tr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=tr(i.doubleValue),a=tr(o.doubleValue);return s===a?a_(s)===a_(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return dd(t.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(y3(s)!==y3(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Yo(s[l],a[l])))return!1;return!0}(t,e);default:return Se()}}function ny(t,e){return(t.values||[]).find(r=>Yo(r,e))!==void 0}function hd(t,e){if(t===e)return 0;const r=$c(t),n=$c(e);if(r!==n)return lt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=tr(o.integerValue||o.doubleValue),l=tr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return v3(t.timestampValue,e.timestampValue);case 4:return v3(ty(t),ty(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Rc(o),l=Rc(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const f=lt(a[c],l[c]);if(f!==0)return f}return lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=lt(tr(o.latitude),tr(s.latitude));return a!==0?a:lt(tr(o.longitude),tr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const f=hd(a[c],l[c]);if(f)return f}return lt(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===t0.mapValue&&s===t0.mapValue)return 0;if(o===t0.mapValue)return 1;if(s===t0.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const h=lt(l[d],f[d]);if(h!==0)return h;const p=hd(a[l[d]],c[f[d]]);if(p!==0)return p}return lt(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Se()}}function v3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const r=Za(t),n=Za(e),i=lt(r.seconds,n.seconds);return i!==0?i:lt(r.nanos,n.nanos)}function pd(t){return VT(t)}function VT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Za(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Rc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return xe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=VT(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${VT(r.fields[s])}`;return i+"}"}(t.mapValue):Se()}function WT(t){return!!t&&"integerValue"in t}function Qj(t){return!!t&&"arrayValue"in t}function b3(t){return!!t&&"nullValue"in t}function x3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ib(t){return!!t&&"mapValue"in t}function Yp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return th(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Yp(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Yp(t.arrayValue.values[r]);return e}return Object.assign({},t)}function LEe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!ib(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yp(r)}setAll(e){let r=qr.emptyPath(),n={},i=[];e.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=a.popLast()}s?n[a.lastSegment()]=Yp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());ib(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];ib(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){th(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Ti(Yp(this.value))}}function xK(t){const e=[];return th(t.fields,(r,n)=>{const i=new qr([r]);if(ib(n)){const o=xK(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ao(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,r,n,i,o,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Ce.min(),Ce.min(),Ce.min(),Ti.empty(),0)}static newFoundDocument(e,r,n,i){return new cn(e,1,r,Ce.min(),n,i,0)}static newNoDocument(e,r){return new cn(e,2,r,Ce.min(),Ce.min(),Ti.empty(),0)}static newUnknownDocument(e,r){return new cn(e,3,r,Ce.min(),Ce.min(),Ti.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,r){this.position=e,this.inclusive=r}}function _3(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?n=xe.comparator(xe.fromName(s.referenceValue),r.key):n=hd(s,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function w3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Yo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,r="asc"){this.field=e,this.dir=r}}function BEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{}class fr extends _K{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new VEe(e,r,n):r==="array-contains"?new GEe(e,n):r==="in"?new qEe(e,n):r==="not-in"?new HEe(e,n):r==="array-contains-any"?new KEe(e,n):new fr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new WEe(e,n):new zEe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(hd(r,this.value)):r!==null&&$c(this.value)===$c(r)&&this.matchesComparison(hd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xo extends _K{constructor(e,r){super(),this.filters=e,this.op=r,this.ue=null}static create(e,r){return new Xo(e,r)}matches(e){return wK(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function wK(t){return t.op==="and"}function SK(t){return UEe(t)&&wK(t)}function UEe(t){for(const e of t.filters)if(e instanceof Xo)return!1;return!0}function zT(t){if(t instanceof fr)return t.field.canonicalString()+t.op.toString()+pd(t.value);if(SK(t))return t.filters.map(e=>zT(e)).join(",");{const e=t.filters.map(r=>zT(r)).join(",");return`${t.op}(${e})`}}function EK(t,e){return t instanceof fr?function(n,i){return i instanceof fr&&n.op===i.op&&n.field.isEqual(i.field)&&Yo(n.value,i.value)}(t,e):t instanceof Xo?function(n,i){return i instanceof Xo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&EK(s,i.filters[a]),!0):!1}(t,e):void Se()}function AK(t){return t instanceof fr?function(r){return`${r.field.canonicalString()} ${r.op} ${pd(r.value)}`}(t):t instanceof Xo?function(r){return r.op.toString()+" {"+r.getFilters().map(AK).join(" ,")+"}"}(t):"Filter"}class VEe extends fr{constructor(e,r,n){super(e,r,n),this.key=xe.fromName(n.referenceValue)}matches(e){const r=xe.comparator(e.key,this.key);return this.matchesComparison(r)}}class WEe extends fr{constructor(e,r){super(e,"in",r),this.keys=CK("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class zEe extends fr{constructor(e,r){super(e,"not-in",r),this.keys=CK("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function CK(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>xe.fromName(n.referenceValue))}class GEe extends fr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Qj(r)&&ny(r.arrayValue,this.value)}}class qEe extends fr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ny(this.value.arrayValue,r)}}class HEe extends fr{constructor(e,r){super(e,"not-in",r)}matches(e){if(ny(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ny(this.value.arrayValue,r)}}class KEe extends fr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Qj(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ny(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QEe{constructor(e,r=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function S3(t,e=null,r=[],n=[],i=null,o=null,s=null){return new QEe(t,e,r,n,i,o,s)}function Yj(t){const e=Te(t);if(e.ce===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>zT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),H1(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>pd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>pd(n)).join(",")),e.ce=r}return e.ce}function Xj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!BEe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!EK(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w3(t.startAt,e.startAt)&&w3(t.endAt,e.endAt)}function GT(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,r=null,n=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function YEe(t,e,r,n,i,o,s,a){return new K1(t,e,r,n,i,o,s,a)}function PK(t){return new K1(t)}function E3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XEe(t){return t.collectionGroup!==null}function Xp(t){const e=Te(t);if(e.le===null){e.le=[];const r=new Set;for(const o of e.explicitOrderBy)e.le.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xr(qr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.le.push(new c_(o,n))}),r.has(qr.keyField().canonicalString())||e.le.push(new c_(qr.keyField(),n))}return e.le}function Wo(t){const e=Te(t);return e.he||(e.he=JEe(e,Xp(t))),e.he}function JEe(t,e){if(t.limitType==="F")return S3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new c_(i.field,o)});const r=t.endAt?new l_(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new l_(t.startAt.position,t.startAt.inclusive):null;return S3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function qT(t,e,r){return new K1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Q1(t,e){return Xj(Wo(t),Wo(e))&&t.limitType===e.limitType}function TK(t){return`${Yj(Wo(t))}|lt:${t.limitType}`}function wu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>AK(i)).join(", ")}]`),H1(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>pd(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>pd(i)).join(",")),`Target(${n})`}(Wo(t))}; limitType=${t.limitType})`}function Y1(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):xe.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of Xp(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,a,l){const c=_3(s,a,l);return s.inclusive?c<=0:c<0}(n.startAt,Xp(n),i)||n.endAt&&!function(s,a,l){const c=_3(s,a,l);return s.inclusive?c>=0:c>0}(n.endAt,Xp(n),i))}(t,e)}function ZEe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IK(t){return(e,r)=>{let n=!1;for(const i of Xp(t)){const o=eAe(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function eAe(t,e,r){const n=t.field.isKeyField()?xe.comparator(e.key,r.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?hd(l,c):Se()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){th(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return vK(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tAe=new Wt(xe.comparator);function Ns(){return tAe}const NK=new Wt(xe.comparator);function bp(...t){let e=NK;for(const r of t)e=e.insert(r.key,r);return e}function kK(t){let e=NK;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Wl(){return Jp()}function OK(){return Jp()}function Jp(){return new rh(t=>t.toString(),(t,e)=>t.isEqual(e))}const rAe=new Wt(xe.comparator),nAe=new Xr(xe.comparator);function Ge(...t){let e=nAe;for(const r of t)e=e.add(r);return e}const iAe=new Xr(lt);function oAe(){return iAe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jK(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a_(e)?"-0":e}}function RK(t){return{integerValue:""+t}}function sAe(t,e){return DEe(e)?RK(e):jK(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this._=void 0}}function aAe(t,e,r){return t instanceof u_?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Hj(o)&&(o=Kj(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(r,e):t instanceof iy?DK(t,e):t instanceof oy?MK(t,e):function(i,o){const s=$K(i,o),a=A3(s)+A3(i.Ie);return WT(s)&&WT(i.Ie)?RK(a):jK(i.serializer,a)}(t,e)}function lAe(t,e,r){return t instanceof iy?DK(t,e):t instanceof oy?MK(t,e):r}function $K(t,e){return t instanceof f_?function(n){return WT(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class u_ extends X1{}class iy extends X1{constructor(e){super(),this.elements=e}}function DK(t,e){const r=FK(e);for(const n of t.elements)r.some(i=>Yo(i,n))||r.push(n);return{arrayValue:{values:r}}}class oy extends X1{constructor(e){super(),this.elements=e}}function MK(t,e){let r=FK(e);for(const n of t.elements)r=r.filter(i=>!Yo(i,n));return{arrayValue:{values:r}}}class f_ extends X1{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function A3(t){return tr(t.integerValue||t.doubleValue)}function FK(t){return Qj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function cAe(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof iy&&i instanceof iy||n instanceof oy&&i instanceof oy?dd(n.elements,i.elements,Yo):n instanceof f_&&i instanceof f_?Yo(n.Ie,i.Ie):n instanceof u_&&i instanceof u_}(t.transform,e.transform)}class uAe{constructor(e,r){this.version=e,this.transformResults=r}}class zo{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new zo}static exists(e){return new zo(void 0,e)}static updateTime(e){return new zo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ob(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class J1{}function LK(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jj(t.key,zo.none()):new qg(t.key,t.data,zo.none());{const r=t.data,n=Ti.empty();let i=new Xr(qr.comparator);for(let o of e.fields)if(!i.has(o)){let s=r.field(o);s===null&&o.length>1&&(o=o.popLast(),s=r.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Gc(t.key,n,new ao(i.toArray()),zo.none())}}function fAe(t,e,r){t instanceof qg?function(i,o,s){const a=i.value.clone(),l=P3(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Gc?function(i,o,s){if(!ob(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=P3(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(BK(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Zp(t,e,r,n){return t instanceof qg?function(o,s,a,l){if(!ob(o.precondition,s))return a;const c=o.value.clone(),f=T3(o.fieldTransforms,l,s);return c.setAll(f),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Gc?function(o,s,a,l){if(!ob(o.precondition,s))return a;const c=T3(o.fieldTransforms,l,s),f=s.data;return f.setAll(BK(o)),f.setAll(c),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(o,s,a){return ob(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function dAe(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=$K(n.transform,i||null);o!=null&&(r===null&&(r=Ti.empty()),r.set(n.field,o))}return r||null}function C3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&dd(n,i,(o,s)=>cAe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qg extends J1{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gc extends J1{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function BK(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function P3(t,e,r){const n=new Map;Pt(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,lAe(s,a,r[i]))}return n}function T3(t,e,r){const n=new Map;for(const i of t){const o=i.transform,s=r.data.field(i.field);n.set(i.field,aAe(o,s,e))}return n}class Jj extends J1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hAe extends J1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pAe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&fAe(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Zp(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Zp(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=OK();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=r.has(i.key)?null:a;const l=LK(s,a);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ce.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ge())}isEqual(e){return this.batchId===e.batchId&&dd(this.mutations,e.mutations,(r,n)=>C3(r,n))&&dd(this.baseMutations,e.baseMutations,(r,n)=>C3(r,n))}}class Zj{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Pt(e.mutations.length===n.length);let i=function(){return rAe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new Zj(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mAe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yAe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er,Xe;function gAe(t){switch(t){default:return Se();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function UK(t){if(t===void 0)return Qo("GRPC error has no .code"),K.UNKNOWN;switch(t){case er.OK:return K.OK;case er.CANCELLED:return K.CANCELLED;case er.UNKNOWN:return K.UNKNOWN;case er.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case er.INTERNAL:return K.INTERNAL;case er.UNAVAILABLE:return K.UNAVAILABLE;case er.UNAUTHENTICATED:return K.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case er.NOT_FOUND:return K.NOT_FOUND;case er.ALREADY_EXISTS:return K.ALREADY_EXISTS;case er.PERMISSION_DENIED:return K.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case er.ABORTED:return K.ABORTED;case er.OUT_OF_RANGE:return K.OUT_OF_RANGE;case er.UNIMPLEMENTED:return K.UNIMPLEMENTED;case er.DATA_LOSS:return K.DATA_LOSS;default:return Se()}}(Xe=er||(er={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vAe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bAe=new yf([4294967295,4294967295],0);function I3(t){const e=vAe().encode(t),r=new bEe;return r.update(e),new Uint8Array(r.digest())}function N3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yf([r,n],0),new yf([i,o],0)]}class eR{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new xp(`Invalid padding: ${r}`);if(n<0)throw new xp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new xp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new xp(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ee=yf.fromNumber(this.Te)}de(e,r,n){let i=e.add(r.multiply(yf.fromNumber(n)));return i.compare(bAe)===1&&(i=new yf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const r=I3(e),[n,i]=N3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);if(!this.Ae(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new eR(o,i,r);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const r=I3(e),[n,i]=N3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);this.Re(s)}}Re(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class xp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Hg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Z1(Ce.min(),i,new Wt(lt),Ns(),Ge())}}class Hg{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Hg(n,r,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,r,n,i){this.Ve=e,this.removedTargetIds=r,this.key=n,this.me=i}}class VK{constructor(e,r){this.targetId=e,this.fe=r}}class WK{constructor(e,r,n=mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class k3{constructor(){this.ge=0,this.pe=j3(),this.ye=mn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ge(),r=Ge(),n=Ge();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Se()}}),new Hg(this.ye,this.we,e,r,n)}Fe(){this.Se=!1,this.pe=j3()}Me(e,r){this.Se=!0,this.pe=this.pe.insert(e,r)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Pt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class xAe{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ns(),this.Qe=O3(),this.Ke=new Wt(lt)}$e(e){for(const r of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me);for(const r of e.removedTargetIds)this.We(r,e.key,e.me)}Ge(e){this.forEachTarget(e,r=>{const n=this.ze(r);switch(e.state){case 0:this.je(r)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(r);break;case 3:this.je(r)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),n.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ke.forEach((n,i)=>{this.je(i)&&r(i)})}Je(e){const r=e.targetId,n=e.fe.count,i=this.Ye(r);if(i){const o=i.target;if(GT(o))if(n===0){const s=new xe(o.path);this.We(r,s,cn.newNoDocument(s,Ce.min()))}else Pt(n===1);else{const s=this.Ze(r);if(s!==n){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,c)}}}}}Xe(e){const r=e.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let s,a;try{s=Rc(n).toUint8Array()}catch(l){if(l instanceof bK)return fd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new eR(s,i,o)}catch(l){return fd(l instanceof xp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,r,n){return r.fe.count===n-this.rt(e,r.targetId)?0:2}rt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(r,o,null),i++)}),i}it(e){const r=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&GT(a.target)){const l=new xe(a.target.path);this.qe.get(l)!==null||this.st(s,l)||this.We(s,l,cn.newNoDocument(l,e))}o.De&&(r.set(s,o.ve()),o.Fe())}});let n=Ge();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Z1(e,r,this.Ke,this.qe,n);return this.qe=Ns(),this.Qe=O3(),this.Ke=new Wt(lt),i}Ue(e,r){if(!this.je(e))return;const n=this.st(e,r.key)?2:0;this.ze(e).Me(r.key,n),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(e))}We(e,r,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,r)?i.Me(r,1):i.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(e)),n&&(this.qe=this.qe.insert(r,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let r=this.ke.get(e);return r||(r=new k3,this.ke.set(e,r)),r}ot(e){let r=this.Qe.get(e);return r||(r=new Xr(lt),this.Qe=this.Qe.insert(e,r)),r}je(e){const r=this.Ye(e)!==null;return r||ne("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){const r=this.ke.get(e);return r&&r.be?null:this.Le._t(e)}He(e){this.ke.set(e,new k3),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}st(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function O3(){return new Wt(xe.comparator)}function j3(){return new Wt(xe.comparator)}const _Ae={asc:"ASCENDING",desc:"DESCENDING"},wAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SAe={and:"AND",or:"OR"};class EAe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function HT(t,e){return t.useProto3Json||H1(e)?e:{value:e}}function d_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AAe(t,e){return d_(t,e.toTimestamp())}function Go(t){return Pt(!!t),Ce.fromTimestamp(function(r){const n=Za(r);return new pr(n.seconds,n.nanos)}(t))}function tR(t,e){return KT(t,e).canonicalString()}function KT(t,e){const r=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function GK(t){const e=Dt.fromString(t);return Pt(YK(e)),e}function QT(t,e){return tR(t.databaseId,e.path)}function FA(t,e){const r=GK(e);if(r.get(1)!==t.databaseId.projectId)throw new me(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new me(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new xe(HK(r))}function qK(t,e){return tR(t.databaseId,e)}function CAe(t){const e=GK(t);return e.length===4?Dt.emptyPath():HK(e)}function YT(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HK(t){return Pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R3(t,e,r){return{name:QT(t,e),fields:r.value.mapValue.fields}}function PAe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,f){return c.useProto3Json?(Pt(f===void 0||typeof f=="string"),mn.fromBase64String(f||"")):(Pt(f===void 0||f instanceof Uint8Array),mn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const f=c.code===void 0?K.UNKNOWN:UK(c.code);return new me(f,c.message||"")}(s);r=new WK(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=FA(t,n.document.name),o=Go(n.document.updateTime),s=n.document.createTime?Go(n.document.createTime):Ce.min(),a=new Ti({mapValue:{fields:n.document.fields}}),l=cn.newFoundDocument(i,o,s,a),c=n.targetIds||[],f=n.removedTargetIds||[];r=new sb(c,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=FA(t,n.document),o=n.readTime?Go(n.readTime):Ce.min(),s=cn.newNoDocument(i,o),a=n.removedTargetIds||[];r=new sb([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=FA(t,n.document),o=n.removedTargetIds||[];r=new sb([],o,i,null)}else{if(!("filter"in e))return Se();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new yAe(i,o),a=n.targetId;r=new VK(a,s)}}return r}function TAe(t,e){let r;if(e instanceof qg)r={update:R3(t,e.key,e.value)};else if(e instanceof Jj)r={delete:QT(t,e.key)};else if(e instanceof Gc)r={update:R3(t,e.key,e.data),updateMask:MAe(e.fieldMask)};else{if(!(e instanceof hAe))return Se();r={verify:QT(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,s){const a=s.transform;if(a instanceof u_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof iy)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oy)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof f_)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Se()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:AAe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se()}(t,e.precondition)),r}function IAe(t,e){return t&&t.length>0?(Pt(e!==void 0),t.map(r=>function(i,o){let s=i.updateTime?Go(i.updateTime):Go(o);return s.isEqual(Ce.min())&&(s=Go(o)),new uAe(s,i.transformResults||[])}(r,e))):[]}function NAe(t,e){return{documents:[qK(t,e.path)]}}function kAe(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=qK(t,i);const o=function(c){if(c.length!==0)return QK(Xo.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(f=>function(h){return{field:Su(h.field),direction:RAe(h.dir)}}(f))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=HT(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:r,parent:i}}function OAe(t){let e=CAe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Pt(n===1);const f=r.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];r.where&&(o=function(d){const h=KK(d);return h instanceof Xo&&SK(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(d){return d.map(h=>function(m){return new c_(Eu(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let a=null;r.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,H1(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new l_(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const h=!d.before,p=d.values||[];return new l_(p,h)}(r.endAt)),YEe(e,i,s,o,a,"F",l,c)}function jAe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function KK(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Eu(r.unaryFilter.field);return fr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Eu(r.unaryFilter.field);return fr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Eu(r.unaryFilter.field);return fr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Eu(r.unaryFilter.field);return fr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(t):t.fieldFilter!==void 0?function(r){return fr.create(Eu(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Xo.create(r.compositeFilter.filters.map(n=>KK(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se()}}(r.compositeFilter.op))}(t):Se()}function RAe(t){return _Ae[t]}function $Ae(t){return wAe[t]}function DAe(t){return SAe[t]}function Su(t){return{fieldPath:t.canonicalString()}}function Eu(t){return qr.fromServerFormat(t.fieldPath)}function QK(t){return t instanceof fr?function(r){if(r.op==="=="){if(x3(r.value))return{unaryFilter:{field:Su(r.field),op:"IS_NAN"}};if(b3(r.value))return{unaryFilter:{field:Su(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(x3(r.value))return{unaryFilter:{field:Su(r.field),op:"IS_NOT_NAN"}};if(b3(r.value))return{unaryFilter:{field:Su(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Su(r.field),op:$Ae(r.op),value:r.value}}}(t):t instanceof Xo?function(r){const n=r.getFilters().map(i=>QK(i));return n.length===1?n[0]:{compositeFilter:{op:DAe(r.op),filters:n}}}(t):Se()}function MAe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function YK(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,r,n,i,o=Ce.min(),s=Ce.min(),a=mn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FAe{constructor(e){this.ct=e}}function LAe(t){const e=OAe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BAe{constructor(){this._n=new UAe}addToCollectionParentIndex(e,r){return this._n.add(r),H.resolve()}getCollectionParents(e,r){return H.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return H.resolve()}deleteFieldIndex(e,r){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,r){return H.resolve()}getDocumentsMatchingTarget(e,r){return H.resolve(null)}getIndexType(e,r){return H.resolve(0)}getFieldIndexes(e,r){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,r){return H.resolve(Ja.min())}getMinOffsetFromCollectionGroup(e,r){return H.resolve(Ja.min())}updateCollectionGroup(e,r,n){return H.resolve()}updateIndexEntries(e,r){return H.resolve()}}class UAe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Xr(Dt.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Xr(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new md(0)}static Bn(){return new md(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VAe{constructor(){this.changes=new rh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?H.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WAe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zAe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Zp(n.mutation,i,ao.empty(),pr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ge()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ge()){const i=Wl();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let s=bp();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Wl();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ge()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{r.set(s,a)})})}computeViews(e,r,n,i){let o=Ns();const s=Jp(),a=function(){return Jp()}();return r.forEach((l,c)=>{const f=n.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Gc)?o=o.insert(c.key,c):f!==void 0?(s.set(c.key,f.mutation.getFieldMask()),Zp(f.mutation,c,f.mutation.getFieldMask(),pr.now())):s.set(c.key,ao.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,f)=>s.set(c,f)),r.forEach((c,f)=>{var d;return a.set(c,new WAe(f,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,r){const n=Jp();let i=new Wt((s,a)=>s-a),o=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let f=n.get(l)||ao.empty();f=a.applyToLocalView(c,f),n.set(l,f);const d=(i.get(a.batchId)||Ge()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,f=l.value,d=OK();f.forEach(h=>{if(!o.has(h)){const p=LK(r.get(h),n.get(h));p!==null&&d.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return H.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):XEe(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):H.resolve(Wl());let a=-1,l=o;return s.next(c=>H.forEach(c,(f,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(f)?H.resolve():this.remoteDocumentCache.getEntry(e,f).next(h=>{l=l.insert(f,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,Ge())).next(f=>({batchId:a,changes:kK(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new xe(r)).next(n=>{let i=bp();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let s=bp();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,l=>{const c=function(d,h){return new K1(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(f=>{f.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(s=>{o.forEach((l,c)=>{const f=c.getKey();s.get(f)===null&&(s=s.insert(f,cn.newInvalidDocument(f)))});let a=bp();return s.forEach((l,c)=>{const f=o.get(l);f!==void 0&&Zp(f.mutation,c,ao.empty(),pr.now()),Y1(r,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GAe{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return H.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Go(i.createTime)}}(r)),H.resolve()}getNamedQuery(e,r){return H.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,function(i){return{name:i.name,query:LAe(i.bundledQuery),readTime:Go(i.readTime)}}(r)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qAe{constructor(){this.overlays=new Wt(xe.comparator),this.hr=new Map}getOverlay(e,r){return H.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Wl();return H.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.ht(e,r,o)}),H.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.hr.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(n)),H.resolve()}getOverlaysForCollection(e,r,n){const i=Wl(),o=r.length+1,s=new xe(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>n&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Wt((c,f)=>c-f);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let f=o.get(c.largestBatchId);f===null&&(f=Wl(),o=o.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=Wl(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>a.set(c,f)),!(a.size()>=i)););return H.resolve(a)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new mAe(r,n));let o=this.hr.get(r);o===void 0&&(o=Ge(),this.hr.set(r,o)),this.hr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.Pr=new Xr(Tr.Ir),this.Tr=new Xr(Tr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const n=new Tr(e,r);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Ar(new Tr(e,r))}Rr(e,r){e.forEach(n=>this.removeReference(n,r))}Vr(e){const r=new xe(new Dt([])),n=new Tr(r,e),i=new Tr(r,e+1),o=[];return this.Tr.forEachInRange([n,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new xe(new Dt([])),n=new Tr(r,e),i=new Tr(r,e+1);let o=Ge();return this.Tr.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(e){const r=new Tr(e,0),n=this.Pr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Tr{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return xe.comparator(e.key,r.key)||lt(e.pr,r.pr)}static Er(e,r){return lt(e.pr,r.pr)||xe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HAe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new Xr(Tr.Ir)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new pAe(o,r,n,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Tr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,r){return H.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.br(n),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Tr(r,0),i=new Tr(r,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([n,i],s=>{const a=this.Sr(s.pr);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Xr(lt);return r.forEach(i=>{const o=new Tr(i,0),s=new Tr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{n=n.add(a.pr)})}),H.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;xe.isDocumentKey(o)||(o=o.child(""));const s=new Tr(new xe(o),0);let a=new Xr(lt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},s),H.resolve(this.Dr(a))}Dr(e){const r=[];return e.forEach(n=>{const i=this.Sr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Pt(this.Cr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return H.forEach(r.mutations,i=>{const o=new Tr(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,r){const n=new Tr(r,0),i=this.wr.firstAfterOrEqual(n);return H.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Cr(e,r){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KAe{constructor(e){this.vr=e,this.docs=function(){return new Wt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,s=this.vr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return H.resolve(n?n.document.mutableCopy():cn.newInvalidDocument(r))}getEntries(e,r){let n=Ns();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():cn.newInvalidDocument(i))}),H.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Ns();const s=r.path,a=new xe(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||kEe(NEe(f),n)<=0||(i.has(f.key)||Y1(r,f))&&(o=o.insert(f.key,f.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,r,n,i){Se()}Fr(e,r){return H.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new QAe(this)}getSize(e){return H.resolve(this.size)}}class QAe extends VAe{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)}),H.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(e){this.persistence=e,this.Mr=new rh(r=>Yj(r),Xj),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new rR,this.targetCount=0,this.Br=md.Nn()}forEachTarget(e,r){return this.Mr.forEach((n,i)=>r(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Or&&(this.Or=r),H.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Br=new md(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,H.resolve()}updateTargetData(e,r){return this.qn(r),H.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,r){const n=this.Mr.get(r)||null;return H.resolve(n)}addMatchingKeys(e,r,n){return this.Nr.dr(r,n),H.resolve()}removeMatchingKeys(e,r,n){this.Nr.Rr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),H.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Nr.gr(r);return H.resolve(n)}containsKey(e,r){return H.resolve(this.Nr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XAe{constructor(e,r){this.Lr={},this.overlays={},this.kr=new qj(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new YAe(this),this.indexManager=new BAe,this.remoteDocumentCache=function(i){return new KAe(i)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new FAe(r),this.$r=new GAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new qAe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Lr[e.toKey()];return n||(n=new HAe(r,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,n){ne("MemoryPersistence","Starting transaction:",e);const i=new JAe(this.kr.next());return this.referenceDelegate.Ur(),n(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,r){return H.or(Object.values(this.Lr).map(n=>()=>n.containsKey(e,r)))}}class JAe extends jEe{constructor(e){super(),this.currentSequenceNumber=e}}class nR{constructor(e){this.persistence=e,this.zr=new rR,this.jr=null}static Hr(e){return new nR(e)}get Jr(){if(this.jr)return this.jr;throw Se()}addReference(e,r,n){return this.zr.addReference(n,r),this.Jr.delete(n.toString()),H.resolve()}removeReference(e,r,n){return this.zr.removeReference(n,r),this.Jr.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),H.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(i=>this.Jr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Jr,n=>{const i=xe.fromPath(n);return this.Yr(e,i).next(o=>{o||r.removeEntry(i,Ce.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(n=>{n?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return H.or([()=>H.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.qi=n,this.Qi=i}static Ki(e,r){let n=Ge(),i=Ge();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new iR(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZAe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eCe{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ure()?8:Vl.v(Sm())>0?6:4}()}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.ji(e,r).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,r,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new ZAe;return this.Ji(e,r,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,r,s,a.size)})}).next(()=>o.result)}Yi(e,r,n,i){return n.documentReadCount<this.Wi?(Wh()<=et.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",wu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),H.resolve()):(Wh()<=et.DEBUG&&ne("QueryEngine","Query:",wu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Wh()<=et.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",wu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wo(r))):H.resolve())}ji(e,r){if(E3(r))return H.resolve(null);let n=Wo(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=qT(r,null,"F"),n=Wo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const s=Ge(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Zi(r,a);return this.Xi(r,c,s,l.readTime)?this.ji(e,qT(r,null,"F")):this.es(e,c,r,l)}))})))}Hi(e,r,n,i){return E3(r)||i.isEqual(Ce.min())?H.resolve(null):this.zi.getDocuments(e,n).next(o=>{const s=this.Zi(r,o);return this.Xi(r,s,n,i)?H.resolve(null):(Wh()<=et.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wu(r)),this.es(e,s,r,IEe(i,-1)).next(a=>a))})}Zi(e,r){let n=new Xr(IK(e));return r.forEach((i,o)=>{Y1(e,o)&&(n=n.add(o))}),n}Xi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,r,n){return Wh()<=et.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",wu(r)),this.zi.getDocumentsMatchingQuery(e,r,Ja.min(),n)}es(e,r,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tCe{constructor(e,r,n,i){this.persistence=e,this.ts=r,this.serializer=i,this.ns=new Wt(lt),this.rs=new rh(o=>Yj(o),Xj),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zAe(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function rCe(t,e,r,n){return new tCe(t,e,r,n)}async function XK(t,e){const r=Te(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r._s(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let l=Ge();for(const c of i){s.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of o){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return r.localDocuments.getDocuments(n,l).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}function nCe(t,e){const r=Te(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,f){const d=c.batch,h=d.keys();let p=H.resolve();return h.forEach(m=>{p=p.next(()=>f.getEntry(l,m)).next(y=>{const g=c.docVersions.get(m);Pt(g!==null),y.version.compareTo(g)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),f.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=Ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function JK(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function iCe(t,e){const r=Te(t),n=e.snapshotVersion;let i=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=r.os.newChangeBuffer({trackRemovals:!0});i=r.ns;const a=[];e.targetChanges.forEach((f,d)=>{const h=i.get(d);if(!h)return;a.push(r.Qr.removeMatchingKeys(o,f.removedDocuments,d).next(()=>r.Qr.addMatchingKeys(o,f.addedDocuments,d)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(mn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,n)),i=i.insert(d,p),function(y,g,b){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,f)&&a.push(r.Qr.updateTargetData(o,p))});let l=Ns(),c=Ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(oCe(o,s,e.documentUpdates).next(f=>{l=f.cs,c=f.ls})),!n.isEqual(Ce.min())){const f=r.Qr.getLastRemoteSnapshotVersion(o).next(d=>r.Qr.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(f)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(r.ns=i,o))}function oCe(t,e,r){let n=Ge(),i=Ge();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=Ns();return r.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:s,ls:i}})}function sCe(t,e){const r=Te(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function aCe(t,e){const r=Te(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Qr.getTargetData(n,e).next(o=>o?(i=o,H.resolve(i)):r.Qr.allocateTargetId(n).next(s=>(i=new Sa(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ns.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ns=r.ns.insert(n.targetId,n),r.rs.set(e,n.targetId)),n})}async function XT(t,e,r){const n=Te(t),i=n.ns.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Gg(s))throw s;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.ns=n.ns.remove(e),n.rs.delete(i.target)}function $3(t,e,r){const n=Te(t);let i=Ce.min(),o=Ge();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,f){const d=Te(l),h=d.rs.get(f);return h!==void 0?H.resolve(d.ns.get(h)):d.Qr.getTargetData(c,f)}(n,s,Wo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>n.ts.getDocumentsMatchingQuery(s,e,r?i:Ce.min(),r?o:Ge())).next(a=>(lCe(n,ZEe(e),a),{documents:a,hs:o})))}function lCe(t,e,r){let n=t.ss.get(e)||Ce.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.ss.set(e,n)}class D3{constructor(){this.activeTargetIds=oAe()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cCe{constructor(){this.no=new D3,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,n){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new D3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uCe{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r0=null;function LA(){return r0===null?r0=function(){return 268435456+Math.round(2147483648*Math.random())}():r0++,"0x"+r0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fCe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dCe{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class hCe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+r.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(r,n,i,o,s){const a=LA(),l=this.bo(r,n.toUriEncodedString());ne("RestConnection",`Sending RPC '${r}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(r,l,c,i).then(f=>(ne("RestConnection",`Received RPC '${r}' ${a}: `,f),f),f=>{throw fd("RestConnection",`RPC '${r}' ${a} failed with error: `,f,"url: ",l,"request:",i),f})}vo(r,n,i,o,s,a){return this.So(r,n,i,o,s)}Do(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eh}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>r[s]=o),i&&i.headers.forEach((o,s)=>r[s]=o)}bo(r,n){const i=fCe[r];return`${this.fo}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,r,n,i){const o=LA();return new Promise((s,a)=>{const l=new vEe;l.setWithCredentials(!0),l.listenOnce(yEe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case MA.NO_ERROR:const f=l.getResponseJson();ne(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case MA.TIMEOUT:ne(nn,`RPC '${e}' ${o} timed out`),a(new me(K.DEADLINE_EXCEEDED,"Request time out"));break;case MA.HTTP_ERROR:const d=l.getStatus();if(ne(nn,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(b)>=0?b:K.UNKNOWN}(p.status);a(new me(m,p.message))}else a(new me(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new me(K.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{ne(nn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);ne(nn,`RPC '${e}' ${o} sending request:`,i),l.send(r,"POST",c,n,15)})}Fo(e,r,n){const i=LA(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pEe(),a=mEe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const f=o.join("");ne(nn,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=s.createWebChannel(f,l);let h=!1,p=!1;const m=new dCe({lo:g=>{p?ne(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(ne(nn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),ne(nn,`RPC '${e}' stream ${i} sending:`,g),d.send(g))},ho:()=>d.close()}),y=(g,b,v)=>{g.listen(b,x=>{try{v(x)}catch(S){setTimeout(()=>{throw S},0)}})};return y(d,Zv.EventType.OPEN,()=>{p||ne(nn,`RPC '${e}' stream ${i} transport opened.`)}),y(d,Zv.EventType.CLOSE,()=>{p||(p=!0,ne(nn,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),y(d,Zv.EventType.ERROR,g=>{p||(p=!0,fd(nn,`RPC '${e}' stream ${i} transport errored:`,g),m.Vo(new me(K.UNAVAILABLE,"The operation could not be completed")))}),y(d,Zv.EventType.MESSAGE,g=>{var b;if(!p){const v=g.data[0];Pt(!!v);const x=v,S=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(S){ne(nn,`RPC '${e}' stream ${i} received error:`,S);const _=S.status;let w=function(T){const P=er[T];if(P!==void 0)return UK(P)}(_),A=S.message;w===void 0&&(w=K.INTERNAL,A="Unknown error status: "+_+" with message "+S.message),p=!0,m.Vo(new me(w,A)),d.close()}else ne(nn,`RPC '${e}' stream ${i} received:`,v),m.mo(v)}}),y(a,gEe.STAT_EVENT,g=>{g.stat===h3.PROXY?ne(nn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===h3.NOPROXY&&ne(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}}function BA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){return new EAe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e,r,n=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=r,this.Mo=n,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const r=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,r-n);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e,r,n,i,o,s,a,l){this.oi=e,this.$o=n,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ZK(e,r)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,r){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():r&&r.code===K.RESOURCE_EXHAUSTED?(Qo(r.toString()),Qo("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):r&&r.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(r)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),r=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Wo===r&&this.o_(n,i)},n=>{e(()=>{const i=new me(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.__(i)})})}o_(e,r){const n=this.s_(this.Wo);this.stream=this.a_(e,r),this.stream.Po(()=>{n(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{n(()=>this.__(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return r=>{this.oi.enqueueAndForget(()=>this.Wo===e?r():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pCe extends eQ{constructor(e,r,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}a_(e,r){return this.connection.Fo("Listen",e,r)}onMessage(e){this.jo.reset();const r=PAe(this.serializer,e),n=function(o){if(!("targetChange"in o))return Ce.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?Go(s.readTime):Ce.min()}(e);return this.listener.u_(r,n)}c_(e){const r={};r.database=YT(this.serializer),r.addTarget=function(o,s){let a;const l=s.target;if(a=GT(l)?{documents:NAe(o,l)}:{query:kAe(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=zK(o,s.resumeToken);const c=HT(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ce.min())>0){a.readTime=d_(o,s.snapshotVersion.toTimestamp());const c=HT(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=jAe(this.serializer,e);n&&(r.labels=n),this.t_(r)}l_(e){const r={};r.database=YT(this.serializer),r.removeTarget=e,this.t_(r)}}class mCe extends eQ{constructor(e,r,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,r){return this.connection.Fo("Write",e,r)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const r=IAe(e.writeResults,e.commitTime),n=Go(e.commitTime);return this.listener.T_(n,r)}return Pt(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=YT(this.serializer),this.t_(e)}I_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>TAe(this.serializer,n))};this.t_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yCe extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new me(K.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,KT(r,n),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(K.UNKNOWN,o.toString())})}vo(e,r,n,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,KT(r,n),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(K.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class gCe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Qo(r),this.g_=!1):ne("OnlineStateTracker",r)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vCe{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{n.enqueueAndForget(async()=>{qc(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Te(l);c.v_.add(4),await Kg(c),c.x_.set("Unknown"),c.v_.delete(4),await tS(c)}(this))})}),this.x_=new gCe(n,i)}}async function tS(t){if(qc(t))for(const e of t.F_)await e(!0)}async function Kg(t){for(const e of t.F_)await e(!1)}function tQ(t,e){const r=Te(t);r.C_.has(e.targetId)||(r.C_.set(e.targetId,e),aR(r)?sR(r):nh(r).Jo()&&oR(r,e))}function rQ(t,e){const r=Te(t),n=nh(r);r.C_.delete(e),n.Jo()&&nQ(r,e),r.C_.size===0&&(n.Jo()?n.Xo():qc(r)&&r.x_.set("Unknown"))}function oR(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}nh(t).c_(e)}function nQ(t,e){t.O_.Oe(e),nh(t).l_(e)}function sR(t){t.O_=new xAe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),nh(t).start(),t.x_.p_()}function aR(t){return qc(t)&&!nh(t).Ho()&&t.C_.size>0}function qc(t){return Te(t).v_.size===0}function iQ(t){t.O_=void 0}async function bCe(t){t.C_.forEach((e,r)=>{oR(t,e)})}async function xCe(t,e){iQ(t),aR(t)?(t.x_.S_(e),sR(t)):t.x_.set("Unknown")}async function _Ce(t,e,r){if(t.x_.set("Online"),e instanceof WK&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(n){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await h_(t,n)}else if(e instanceof sb?t.O_.$e(e):e instanceof VK?t.O_.Je(e):t.O_.Ge(e),!r.isEqual(Ce.min()))try{const n=await JK(t.localStore);r.compareTo(n)>=0&&await function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=o.C_.get(c);f&&o.C_.set(c,f.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const f=o.C_.get(l);if(!f)return;o.C_.set(l,f.withResumeToken(mn.EMPTY_BYTE_STRING,f.snapshotVersion)),nQ(o,l);const d=new Sa(f.target,l,c,f.sequenceNumber);oR(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ne("RemoteStore","Failed to raise snapshot:",n),await h_(t,n)}}async function h_(t,e,r){if(!Gg(e))throw e;t.v_.add(1),await Kg(t),t.x_.set("Offline"),r||(r=()=>JK(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await r(),t.v_.delete(1),await tS(t)})}function oQ(t,e){return e().catch(r=>h_(t,r,e))}async function rS(t){const e=Te(t),r=el(e);let n=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;wCe(e);)try{const i=await sCe(e.localStore,n);if(i===null){e.D_.length===0&&r.Xo();break}n=i.batchId,SCe(e,i)}catch(i){await h_(e,i)}sQ(e)&&aQ(e)}function wCe(t){return qc(t)&&t.D_.length<10}function SCe(t,e){t.D_.push(e);const r=el(t);r.Jo()&&r.P_&&r.I_(e.mutations)}function sQ(t){return qc(t)&&!el(t).Ho()&&t.D_.length>0}function aQ(t){el(t).start()}async function ECe(t){el(t).d_()}async function ACe(t){const e=el(t);for(const r of t.D_)e.I_(r.mutations)}async function CCe(t,e,r){const n=t.D_.shift(),i=Zj.from(n,e,r);await oQ(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rS(t)}async function PCe(t,e){e&&el(t).P_&&await async function(n,i){if(function(s){return gAe(s)&&s!==K.ABORTED}(i.code)){const o=n.D_.shift();el(n).Zo(),await oQ(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await rS(n)}}(t,e),sQ(t)&&aQ(t)}async function F3(t,e){const r=Te(t);r.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const n=qc(r);r.v_.add(3),await Kg(r),n&&r.x_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.v_.delete(3),await tS(r)}async function TCe(t,e){const r=Te(t);e?(r.v_.delete(2),await tS(r)):e||(r.v_.add(2),await Kg(r),r.x_.set("Unknown"))}function nh(t){return t.N_||(t.N_=function(r,n,i){const o=Te(r);return o.R_(),new pCe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:bCe.bind(null,t),To:xCe.bind(null,t),u_:_Ce.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),aR(t)?sR(t):t.x_.set("Unknown")):(await t.N_.stop(),iQ(t))})),t.N_}function el(t){return t.B_||(t.B_=function(r,n,i){const o=Te(r);return o.R_(),new mCe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:ECe.bind(null,t),To:PCe.bind(null,t),E_:ACe.bind(null,t),T_:CCe.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await rS(t)):(await t.B_.stop(),t.D_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const s=Date.now()+n,a=new lR(e,r,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cR(t,e){if(Qo("AsyncQueue",`${e}: ${t}`),Gg(t))return new me(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e){this.comparator=e?(r,n)=>e(r,n)||xe.comparator(r.key,n.key):(r,n)=>xe.comparator(r.key,n.key),this.keyedMap=bp(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new gf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof gf)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new gf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.L_=new Wt(xe.comparator)}track(e){const r=e.doc.key,n=this.L_.get(r);n?e.type!==0&&n.type===3?this.L_=this.L_.insert(r,e):e.type===3&&n.type!==1?this.L_=this.L_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.L_=this.L_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.L_=this.L_.remove(r):e.type===1&&n.type===2?this.L_=this.L_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.L_=this.L_.insert(r,{type:2,doc:e.doc}):Se():this.L_=this.L_.insert(r,e)}k_(){const e=[];return this.L_.inorderTraversal((r,n)=>{e.push(n)}),e}}class yd{constructor(e,r,n,i,o,s,a,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,o){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new yd(e,r,gf.emptySet(r),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Q1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ICe{constructor(){this.q_=void 0,this.Q_=[]}}class NCe{constructor(){this.queries=new rh(e=>TK(e),Q1),this.onlineState="Unknown",this.K_=new Set}}async function kCe(t,e){const r=Te(t),n=e.query;let i=!1,o=r.queries.get(n);if(o||(i=!0,o=new ICe),i)try{o.q_=await r.onListen(n)}catch(s){const a=cR(s,`Initialization of query '${wu(e.query)}' failed`);return void e.onError(a)}r.queries.set(n,o),o.Q_.push(e),e.U_(r.onlineState),o.q_&&e.W_(o.q_)&&uR(r)}async function OCe(t,e){const r=Te(t),n=e.query;let i=!1;const o=r.queries.get(n);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function jCe(t,e){const r=Te(t);let n=!1;for(const i of e){const o=i.query,s=r.queries.get(o);if(s){for(const a of s.Q_)a.W_(i)&&(n=!0);s.q_=i}}n&&uR(r)}function RCe(t,e,r){const n=Te(t),i=n.queries.get(e);if(i)for(const o of i.Q_)o.onError(r);n.queries.delete(e)}function uR(t){t.K_.forEach(e=>{e.next()})}class $Ce{constructor(e,r,n){this.query=e,this.G_=r,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new yd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.z_?this.H_(e)&&(this.G_.next(e),r=!0):this.J_(e,this.onlineState)&&(this.Y_(e),r=!0),this.j_=e,r}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let r=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),r=!0),r}J_(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const r=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Y_(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e){this.key=e}}class cQ{constructor(e){this.key=e}}class DCe{constructor(e,r){this.query=e,this.oa=r,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Ge(),this.mutatedKeys=Ge(),this.ua=IK(e),this.ca=new gf(this.ua)}get la(){return this.oa}ha(e,r){const n=r?r.Pa:new L3,i=r?r.ca:this.ca;let o=r?r.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,d)=>{const h=i.get(f),p=Y1(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(n.track({type:3,doc:p}),g=!0):this.Ia(h,p)||(n.track({type:2,doc:p}),g=!0,(l&&this.ua(p,l)>0||c&&this.ua(p,c)<0)&&(a=!0)):!h&&p?(n.track({type:0,doc:p}),g=!0):h&&!p&&(n.track({type:1,doc:h}),g=!0,(l||c)&&(a=!0)),g&&(p?(s=s.add(p),o=y?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),n.track({type:1,doc:f})}return{ca:s,Pa:n,Xi:a,mutatedKeys:o}}Ia(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((f,d)=>function(p,m){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return y(p)-y(m)}(f.type,d.type)||this.ua(f.doc,d.doc)),this.Ta(n),i=i!=null&&i;const a=r&&!i?this.Ea():[],l=this.aa.size===0&&this.current&&!i?1:0,c=l!==this._a;return this._a=l,s.length!==0||c?{snapshot:new yd(this.query,e.ca,o,s,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new L3,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(r=>this.oa=this.oa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.oa=this.oa.delete(r)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Ge(),this.ca.forEach(n=>{this.Aa(n.key)&&(this.aa=this.aa.add(n.key))});const r=[];return e.forEach(n=>{this.aa.has(n)||r.push(new cQ(n))}),this.aa.forEach(n=>{e.has(n)||r.push(new lQ(n))}),r}Ra(e){this.oa=e.hs,this.aa=Ge();const r=this.ha(e.documents);return this.applyChanges(r,!0)}Va(){return yd.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class MCe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class FCe{constructor(e){this.key=e,this.ma=!1}}class LCe{constructor(e,r,n,i,o,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new rh(a=>TK(a),Q1),this.pa=new Map,this.ya=new Set,this.wa=new Wt(xe.comparator),this.Sa=new Map,this.ba=new rR,this.Da={},this.Ca=new Map,this.va=md.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function BCe(t,e){const r=YCe(t);let n,i;const o=r.ga.get(e);if(o)n=o.targetId,r.sharedClientState.addLocalQueryTarget(n),i=o.view.Va();else{const s=await aCe(r.localStore,Wo(e)),a=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await UCe(r,e,n,a==="current",s.resumeToken),r.isPrimaryClient&&tQ(r.remoteStore,s)}return i}async function UCe(t,e,r,n,i){t.Ma=(d,h,p)=>async function(y,g,b,v){let x=g.view.ha(b);x.Xi&&(x=await $3(y.localStore,g.query,!1).then(({documents:A})=>g.view.ha(A,x)));const S=v&&v.targetChanges.get(g.targetId),_=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(x,y.isPrimaryClient,S,_);return U3(y,g.targetId,w.da),w.snapshot}(t,d,h,p);const o=await $3(t.localStore,e,!0),s=new DCe(e,o.hs),a=s.ha(o.documents),l=Hg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);U3(t,r,c.da);const f=new MCe(e,r,s);return t.ga.set(e,f),t.pa.has(r)?t.pa.get(r).push(e):t.pa.set(r,[e]),c.snapshot}async function VCe(t,e){const r=Te(t),n=r.ga.get(e),i=r.pa.get(n.targetId);if(i.length>1)return r.pa.set(n.targetId,i.filter(o=>!Q1(o,e))),void r.ga.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await XT(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),rQ(r.remoteStore,n.targetId),JT(r,n.targetId)}).catch(zg)):(JT(r,n.targetId),await XT(r.localStore,n.targetId,!0))}async function WCe(t,e,r){const n=XCe(t);try{const i=await function(s,a){const l=Te(s),c=pr.now(),f=a.reduce((p,m)=>p.add(m.key),Ge());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ns(),y=Ge();return l.os.getEntries(p,f).next(g=>{m=g,m.forEach((b,v)=>{v.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(g=>{d=g;const b=[];for(const v of a){const x=dAe(v,d.get(v.key).overlayedDocument);x!=null&&b.push(new Gc(v.key,x,xK(x.value.mapValue),zo.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,a)}).next(g=>{h=g;const b=g.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,g.batchId,b)})}).then(()=>({batchId:h.batchId,changes:kK(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Da[s.currentUser.toKey()];c||(c=new Wt(lt)),c=c.insert(a,l),s.Da[s.currentUser.toKey()]=c}(n,i.batchId,r),await Qg(n,i.changes),await rS(n.remoteStore)}catch(i){const o=cR(i,"Failed to persist write");r.reject(o)}}async function uQ(t,e){const r=Te(t);try{const n=await iCe(r.localStore,e);e.targetChanges.forEach((i,o)=>{const s=r.Sa.get(o);s&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?Pt(s.ma):i.removedDocuments.size>0&&(Pt(s.ma),s.ma=!1))}),await Qg(r,n,e)}catch(n){await zg(n)}}function B3(t,e,r){const n=Te(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Te(s);l.onlineState=a;let c=!1;l.queries.forEach((f,d)=>{for(const h of d.Q_)h.U_(a)&&(c=!0)}),c&&uR(l)}(n.eventManager,e),i.length&&n.fa.u_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function zCe(t,e,r){const n=Te(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Sa.get(e),o=i&&i.key;if(o){let s=new Wt(xe.comparator);s=s.insert(o,cn.newNoDocument(o,Ce.min()));const a=Ge().add(o),l=new Z1(Ce.min(),new Map,new Wt(lt),s,a);await uQ(n,l),n.wa=n.wa.remove(o),n.Sa.delete(e),fR(n)}else await XT(n.localStore,e,!1).then(()=>JT(n,e,r)).catch(zg)}async function GCe(t,e){const r=Te(t),n=e.batch.batchId;try{const i=await nCe(r.localStore,e);dQ(r,n,null),fQ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Qg(r,i)}catch(i){await zg(i)}}async function qCe(t,e,r){const n=Te(t);try{const i=await function(s,a){const l=Te(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Pt(d!==null),f=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(n.localStore,e);dQ(n,e,r),fQ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Qg(n,i)}catch(i){await zg(i)}}function fQ(t,e){(t.Ca.get(e)||[]).forEach(r=>{r.resolve()}),t.Ca.delete(e)}function dQ(t,e,r){const n=Te(t);let i=n.Da[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Da[n.currentUser.toKey()]=i}}function JT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.pa.get(e))t.ga.delete(n),r&&t.fa.xa(n,r);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(n=>{t.ba.containsKey(n)||hQ(t,n)})}function hQ(t,e){t.ya.delete(e.path.canonicalString());const r=t.wa.get(e);r!==null&&(rQ(t.remoteStore,r),t.wa=t.wa.remove(e),t.Sa.delete(r),fR(t))}function U3(t,e,r){for(const n of r)n instanceof lQ?(t.ba.addReference(n.key,e),HCe(t,n)):n instanceof cQ?(ne("SyncEngine","Document no longer in limbo: "+n.key),t.ba.removeReference(n.key,e),t.ba.containsKey(n.key)||hQ(t,n.key)):Se()}function HCe(t,e){const r=e.key,n=r.path.canonicalString();t.wa.get(r)||t.ya.has(n)||(ne("SyncEngine","New document in limbo: "+r),t.ya.add(n),fR(t))}function fR(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const r=new xe(Dt.fromString(e)),n=t.va.next();t.Sa.set(n,new FCe(r)),t.wa=t.wa.insert(r,n),tQ(t.remoteStore,new Sa(Wo(PK(r.path)),n,"TargetPurposeLimboResolution",qj._e))}}async function Qg(t,e,r){const n=Te(t),i=[],o=[],s=[];n.ga.isEmpty()||(n.ga.forEach((a,l)=>{s.push(n.Ma(l,e,r).then(c=>{if((c||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const f=iR.Ki(l.targetId,c);o.push(f)}}))}),await Promise.all(s),n.fa.u_(i),await async function(l,c){const f=Te(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>H.forEach(c,h=>H.forEach(h.qi,p=>f.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>H.forEach(h.Qi,p=>f.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Gg(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=f.ns.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);f.ns=f.ns.insert(h,y)}}}(n.localStore,o))}async function KCe(t,e){const r=Te(t);if(!r.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const n=await XK(r.localStore,e);r.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(l=>{l.reject(new me(K.CANCELLED,s))})}),o.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Qg(r,n.us)}}function QCe(t,e){const r=Te(t),n=r.Sa.get(e);if(n&&n.ma)return Ge().add(n.key);{let i=Ge();const o=r.pa.get(e);if(!o)return i;for(const s of o){const a=r.ga.get(s);i=i.unionWith(a.view.la)}return i}}function YCe(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uQ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QCe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zCe.bind(null,e),e.fa.u_=jCe.bind(null,e.eventManager),e.fa.xa=RCe.bind(null,e.eventManager),e}function XCe(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GCe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qCe.bind(null,e),e}class V3{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=eS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return rCe(this.persistence,new eCe,e.initialUser,this.serializer)}createPersistence(e){return new XAe(nR.Hr,this.serializer)}createSharedClientState(e){return new cCe}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class JCe{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>B3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=KCe.bind(null,this.syncEngine),await TCe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NCe}()}createDatastore(e){const r=eS(e.databaseInfo.databaseId),n=function(o){return new hCe(o)}(e.databaseInfo);return function(o,s,a,l){return new yCe(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,s,a){return new vCe(n,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,r=>B3(this.syncEngine,r,0),function(){return M3.D()?new M3:new uCe}())}createSyncEngine(e,r){return function(i,o,s,a,l,c,f){const d=new LCe(i,o,s,a,l,c);return f&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e;await async function(n){const i=Te(n);ne("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Kg(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZCe{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Qo("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ePe{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=an.UNAUTHENTICATED,this.clientId=gK.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=cR(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function UA(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await XK(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function W3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await rPe(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>F3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>F3(e.remoteStore,i)),t._onlineComponents=e}function tPe(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function rPe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await UA(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!tPe(r))throw r;fd("Error using user provided cache. Falling back to memory cache: "+r),await UA(t,new V3)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await UA(t,new V3);return t._offlineComponents}async function pQ(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await W3(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await W3(t,new JCe))),t._onlineComponents}function nPe(t){return pQ(t).then(e=>e.syncEngine)}async function iPe(t){const e=await pQ(t),r=e.eventManager;return r.onListen=BCe.bind(null,e.syncEngine),r.onUnlisten=VCe.bind(null,e.syncEngine),r}function oPe(t,e,r={}){const n=new xs;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const f=new ZCe({next:h=>{s.enqueueAndForget(()=>OCe(o,d)),h.fromCache&&l.source==="server"?c.reject(new me(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new $Ce(a,f,{includeMetadataChanges:!0,Z_:!0});return kCe(o,d)}(await iPe(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yQ(t,e,r){if(!r)throw new me(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sPe(t,e,r,n){if(e===!0&&n===!0)throw new me(K.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function G3(t){if(!xe.isDocumentKey(t))throw new me(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q3(t){if(xe.isDocumentKey(t))throw new me(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dR(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se()}function gd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=dR(t);throw new me(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new me(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sPe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mQ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new me(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new me(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new me(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nS{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new me(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new me(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H3(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xEe;switch(n.type){case"firstParty":return new EEe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new me(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=z3.get(r);n&&(ne("ComponentProvider","Removing Datastore"),z3.delete(r),n.terminate())}(this),Promise.resolve()}}function aPe(t,e,r,n={}){var i;const o=(t=gd(t,nS))._getSettings(),s=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&fd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=an.MOCK_USER;else{a=yk(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new me(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new an(c)}t._authCredentials=new _Ee(new yK(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new iS(this.firestore,e,this._query)}}class $i{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new La(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $i(this.firestore,e,this._key)}}class La extends iS{constructor(e,r,n){super(e,r,PK(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $i(this.firestore,null,new xe(e))}withConverter(e){return new La(this.firestore,e,this._path)}}function lPe(t,e,...r){if(t=Zr(t),yQ("collection","path",e),t instanceof nS){const n=Dt.fromString(e,...r);return q3(n),new La(t,null,n)}{if(!(t instanceof $i||t instanceof La))throw new me(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Dt.fromString(e,...r));return q3(n),new La(t.firestore,null,n)}}function hR(t,e,...r){if(t=Zr(t),arguments.length===1&&(e=gK.newId()),yQ("doc","path",e),t instanceof nS){const n=Dt.fromString(e,...r);return G3(n),new $i(t,null,new xe(n))}{if(!(t instanceof $i||t instanceof La))throw new me(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Dt.fromString(e,...r));return G3(n),new $i(t.firestore,t instanceof La?t.converter:null,new xe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cPe{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new ZK(this,"async_queue_retry"),this._u=()=>{const r=BA();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.jo.Ko()};const e=BA();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const r=BA();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const r=new xs;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Gg(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const r=this.Xa.then(()=>(this.iu=!0,e().catch(n=>{this.ru=n,this.iu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Qo("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.iu=!1,n))));return this.Xa=r,r}enqueueAfterDelay(e,r,n){this.au(),this.ou.indexOf(e)>-1&&(r=0);const i=lR.createAndSchedule(this,e,r,n,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&Se()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const r of this.nu)if(r.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.nu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const r=this.nu.indexOf(e);this.nu.splice(r,1)}}class oS extends nS{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new cPe}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vQ(this),this._firestoreClient.terminate()}}function uPe(t,e){const r=typeof t=="object"?t:_k(),n=typeof t=="string"?t:e||"(default)",i=bk(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=mk("firestore");o&&aPe(i,...o)}return i}function gQ(t){return t._firestoreClient||vQ(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vQ(t){var e,r,n;const i=t._freezeSettings(),o=function(a,l,c,f){return new FEe(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,mQ(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new ePe(t._authCredentials,t._appCheckCredentials,t._queue,o),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vd(mn.fromBase64String(e))}catch(r){throw new me(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new vd(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new me(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new me(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new me(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fPe=/^__.*__$/;class dPe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Gc(e,this.data,this.fieldMask,r,this.fieldTransforms):new qg(e,this.data,r,this.fieldTransforms)}}function xQ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class yR{constructor(e,r,n,i,o,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new yR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Au({path:n,Vu:!1});return i.mu(e),i}fu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return p_(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(xQ(this.du)&&fPe.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class hPe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||eS(e)}Su(e,r,n,i=!1){return new yR({du:e,methodName:r,wu:n,path:qr.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pPe(t){const e=t._freezeSettings(),r=eS(t._databaseId);return new hPe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function mPe(t,e,r,n,i,o={}){const s=t.Su(o.merge||o.mergeFields?2:0,e,r,i);EQ("Data must be an object, but it was:",s,n);const a=wQ(n,s);let l,c;if(o.merge)l=new ao(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const d of o.mergeFields){const h=yPe(e,d,r);if(!s.contains(h))throw new me(K.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);vPe(f,h)||f.push(h)}l=new ao(f),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new dPe(new Ti(a),l,c)}function _Q(t,e){if(SQ(t=Zr(t)))return EQ("Unsupported field value:",e,t),wQ(t,e);if(t instanceof bQ)return function(n,i){if(!xQ(i.du))throw i.pu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(n,i){const o=[];let s=0;for(const a of n){let l=_Q(a,i.gu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=Zr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return sAe(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=pr.fromDate(n);return{timestampValue:d_(i.serializer,o)}}if(n instanceof pr){const o=new pr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:d_(i.serializer,o)}}if(n instanceof mR)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof vd)return{bytesValue:zK(i.serializer,n._byteString)};if(n instanceof $i){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tR(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.pu(`Unsupported field value: ${dR(n)}`)}(t,e)}function wQ(t,e){const r={};return vK(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):th(t,(n,i)=>{const o=_Q(i,e.Ru(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function SQ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof mR||t instanceof vd||t instanceof $i||t instanceof bQ)}function EQ(t,e,r){if(!SQ(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=dR(r);throw n==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+n)}}function yPe(t,e,r){if((e=Zr(e))instanceof pR)return e._internalPath;if(typeof e=="string")return AQ(t,e);throw p_("Field path arguments must be of type string or ",t,!1,void 0,r)}const gPe=new RegExp("[~\\*/\\[\\]]");function AQ(t,e,r){if(e.search(gPe)>=0)throw p_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new pR(...e.split("."))._internalPath}catch{throw p_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function p_(t,e,r,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new me(K.INVALID_ARGUMENT,a+t+l)}function vPe(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $i(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bPe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(PQ("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class bPe extends CQ{data(){return super.data()}}function PQ(t,e){return typeof e=="string"?AQ(t,e):e instanceof pR?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xPe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _Pe{convertValue(e,r="none"){switch($c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Se()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return th(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertGeoPoint(e){return new mR(tr(e.latitude),tr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Kj(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ty(e));default:return null}}convertTimestamp(e){const r=Za(e);return new pr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Dt.fromString(e);Pt(YK(n));const i=new ry(n.get(1),n.get(3)),o=new xe(n.popFirst(5));return i.isEqual(r)||Qo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wPe(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SPe extends CQ{constructor(e,r,n,i,o,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ab(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(PQ("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ab extends SPe{data(e={}){return super.data(e)}}class EPe{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new n0(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ab(this._firestore,this._userDataWriter,n.key,n,new n0(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new me(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new ab(i._firestore,i._userDataWriter,a.doc.key,a.doc,new n0(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new ab(i._firestore,i._userDataWriter,a.doc.key,a.doc,new n0(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:APe(a.type),doc:l,oldIndex:c,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function APe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}class CPe extends _Pe{constructor(e){super(),this.firestore=e}convertBytes(e){return new vd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new $i(this.firestore,null,r)}}function PPe(t){t=gd(t,iS);const e=gd(t.firestore,oS),r=gQ(e),n=new CPe(e);return xPe(t._query),oPe(r,t._query).then(i=>new EPe(e,n,t,i))}function TQ(t,e,r){t=gd(t,$i);const n=gd(t.firestore,oS),i=wPe(t.converter,e,r);return IQ(n,[mPe(pPe(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,zo.none())])}function TPe(t){return IQ(gd(t.firestore,oS),[new Jj(t._key,zo.none())])}function IQ(t,e){return function(n,i){const o=new xs;return n.asyncQueue.enqueueAndForget(async()=>WCe(await nPe(n),i,o)),o.promise}(gQ(t),e)}(function(e,r=!0){(function(i){eh=i})(xk),Gf(new Ac("firestore",(n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new oS(new wEe(n.getProvider("auth-internal")),new CEe(n.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new me(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ry(c.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:r},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Uo(p3,"4.4.1",e),Uo(p3,"4.4.1","esm2017")})();const sS=uPe(xO),IPe=async()=>await PPe(lPe(sS,"players")).then(e=>e.docs.map(r=>r.data())).catch(console.log),ZT=async t=>{const e={...t,id:hs(),createdAt:new Date().getTime(),updatedAt:new Date().getTime()};return await TQ(hR(sS,"players",e.id),e),e},NPe=async(t,e)=>{const r={...e,updatedAt:new Date().getTime()};return await TQ(hR(sS,"players",r.id),r),r},kPe=async t=>(await TPe(hR(sS,"players",t)),!0);function OPe({onSelect:t,...e}){const[r,n]=E.useState(""),i=E.useCallback(()=>{n(hs())},[]);return u.jsxs(Jn,{title:"選擇玩家",...e,children:[u.jsx(Oe,{onClick:i,color:"secondary",children:"刷新列表"}),u.jsx("div",{className:"mt-4",children:u.jsx(NQ,{onClickPlayer:t},r)})]})}const NQ=({onClickPlayer:t,onClickClone:e,onClickDelete:r})=>{const{value:n,loading:i}=Jye(IPe),o=E.useCallback(l=>{if(!t||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const f=n.find(d=>d.id===c);f&&t(c,f)},[t,n]),s=E.useCallback(l=>{if(!e||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const f=n.find(p=>p.id===c);if(!f)return;const{id:d,...h}=f;e(h)},[e,n]),a=E.useCallback(l=>{if(!r)return;const c=l.currentTarget.getAttribute("data-id");c&&r(c)},[r]);return u.jsxs(u.Fragment,{children:[i&&u.jsx("div",{className:"w-32 text-center mx-auto my-8",children:u.jsx($O,{})}),!i&&(n==null?void 0:n.length)===0&&u.jsx("div",{className:"text-gray-500 text-center py-4",children:u.jsx("span",{children:"沒有已儲存的玩家"})}),u.jsx("div",{className:`grid grid-cols-1 gap-2 ${e||r?"":"md:grid-cols-2"}`,children:!i&&(n==null?void 0:n.map(l=>u.jsxs("div",{className:"text-left flex items-center gap-x-2",children:[u.jsx("div",{className:"flex-1 cursor-pointer",onClick:o,"data-id":l.id,children:u.jsx(mq,{player:l})}),e&&u.jsx("div",{className:"shrink-0",children:u.jsx(Oe,{color:"primary",variant:"text",onClick:s,"data-id":l.id,children:"複製"})}),r&&u.jsx("div",{className:"shrink-0",children:u.jsx(Oe,{color:"danger",variant:"text",onClick:a,"data-id":l.id,children:"刪除"})})]},l.id)))})]})};function jPe(){const[t,e]=E.useState(),[r,n]=E.useState("1"),[i,o]=To(!1),s=E.useCallback(()=>o(!1),[o]),a=E.useCallback(()=>{e(void 0),o(!0)},[o]),l=E.useCallback((h,p)=>{e(p),o(!0)},[o]),c=E.useCallback(h=>{ZT({...h,name:h.name+"(複製)"}).then(()=>{n(hs())})},[]),f=E.useCallback(h=>{confirm("確定要刪除玩家嗎？")&&kPe(h).then(()=>{n(hs())})},[]),d=E.useCallback(h=>h.id?NPe(h.id,h).then(()=>{n(hs()),o(!1)}):ZT(h).then(()=>{n(hs()),o(!1)}),[o]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{children:u.jsx("h1",{className:"text-4xl",children:"玩家"})}),u.jsx("div",{children:u.jsx(Oe,{onClick:a,children:"新增"})})]}),u.jsx(NQ,{onClickPlayer:l,onClickClone:c,onClickDelete:f},r)]}),u.jsx(Jn,{title:"新增／修改玩家",open:i,onClose:s,children:u.jsx("div",{className:"container space-y-6",children:u.jsx(d7,{onSubmit:d,defaultValue:t})})})]})}const RPe={0:"東",1:"南",2:"西",3:"北"};function $Pe({playerIndex:t,...e}){return u.jsx("span",{...e,children:RPe[t]})}const DPe={0:{title:"",name:"玩家A",color:"#6700cf"},1:{title:"",name:"玩家B",color:"#00b5de"},2:{title:"",name:"玩家C",color:"#e3277b"},3:{title:"",name:"玩家D",color:"#03ada5"}},MPe=`${new Date().toISOString().substring(0,10)} 對局`;function FPe(){const t=Cz(),[,e]=qte(),{getValues:r,control:n}=Kd({defaultValues:{name:MPe,startingScore:"25000",isManganRoundUp:"1",yakuMax:"12",yakumanMax:"13"}}),i=Ya({name:"startingScore",control:n}),[o,s]=E.useState(DPe),[a,l]=E.useState(),[c,f]=To(!1),d=E.useCallback(w=>{const A=w.currentTarget.getAttribute("data-player-index");if(!A)return;const C=o[A];l({index:A,player:C}),f(!0)},[o,f]),h=E.useCallback(async w=>{a&&(s(A=>({...A,[a.index]:{...A[a.index],...w}})),f(!1))},[a,f]),p=E.useCallback(()=>{f(!1)},[f]),[m,y]=E.useState(),g=E.useCallback(w=>{w.preventDefault(),y("choose")},[]),b=E.useCallback(()=>{y(null)},[]),v=E.useCallback((w,A)=>{m==="choose"&&(l(C=>C?{...C,player:A}:void 0),y(null))},[m]),x=E.useCallback(w=>{const A=w.currentTarget;if(!A)return;const C=A.getAttribute("data-player-index");if(!C)return;const T=C==="0"?"1":C==="1"?"2":"3";s(P=>({...P,[C]:P[T],[T]:P[C]}))},[]),[{loading:S},_]=t1(async()=>{const{name:w,...A}=r(),C=await Promise.all(Object.values(o).map(N=>N.id||N.name==="玩家A"||N.name==="玩家B"||N.name==="玩家C"||N.name==="玩家D"?Promise.resolve(N):ZT(N))),T={code:Fye(),name:w,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:A,players:{0:C[0],1:C[1],2:C[2],3:C[3]},activeResultDetail:null},P=await t.push("matches",T),I=parseInt(A.startingScore),k={matchId:P.key,code:Mx(T.code,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:I,afterScore:I,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await t.push("matchRounds",k),e(`/v1/match/${k.matchId}/obs`)},[t,r,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"container mx-auto max-w-screen-sm",children:u.jsxs("div",{className:"min-h-screen flex flex-col py-16 gap-y-4",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h1",{className:"text-4xl",children:"對局"}),u.jsx(wn,{label:"對局名稱",children:u.jsx(Mn,{name:"name",control:n,rules:{required:!0},render:({field:w})=>u.jsx("div",{className:"text-xl",children:u.jsx(_a,{...w})})})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx(wn,{label:"起始點數",children:u.jsx(Mn,{name:"startingScore",control:n,rules:{required:!0},render:({field:w})=>u.jsxs(cs,{...w,children:[u.jsx("option",{value:"25000",children:"25000"}),u.jsx("option",{value:"30000",children:"30000"}),u.jsx("option",{value:"35000",children:"35000"}),u.jsx("option",{value:"50000",children:"50000"}),u.jsx("option",{value:"100000",children:"100000"})]})})}),u.jsx(wn,{label:"滿貫切上",children:u.jsx(Mn,{name:"isManganRoundUp",control:n,rules:{required:!0},render:({field:w})=>u.jsxs(cs,{...w,children:[u.jsx("option",{value:"0",children:"不切上"}),u.jsx("option",{value:"1",children:"切上 (3翻70符 & 4翻40符 = 滿貫)"})]})})}),u.jsx(wn,{label:"累積翻數上限",children:u.jsx(Mn,{name:"yakuMax",control:n,rules:{required:!0},render:({field:w})=>u.jsxs(cs,{...w,children:[u.jsx("option",{value:"12",children:"三倍滿 (12翻)"}),u.jsx("option",{value:"13",children:"累計役滿 (13翻)"})]})})}),u.jsx(wn,{label:"役滿上限",children:u.jsx(Mn,{name:"yakumanMax",control:n,rules:{required:!0},render:({field:w})=>u.jsxs(cs,{...w,children:[u.jsx("option",{value:"13",children:"單役滿"}),u.jsx("option",{value:"26",children:"兩倍役滿"}),u.jsx("option",{value:"39",children:"三倍役滿"}),u.jsx("option",{value:"130",children:"無上限"})]})})})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h1",{className:"text-4xl",children:"玩家"}),u.jsx("div",{children:["0","1","2","3"].map(w=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-x-4",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("div",{className:"h-14 w-14 border-4 rounded border-black text-[40px] flex items-center justify-center pb-1",children:u.jsx($Pe,{playerIndex:w})})}),u.jsx("div",{className:"flex-1 text-[48px] cursor-pointer hover:scale-105","data-player-index":w,onClick:d,children:u.jsx(Qa,{player:o[w],score:i})})]},w),w!=="3"&&u.jsx("div",{className:"text-center",children:u.jsx(Oe,{variant:"icon",color:"secondary",type:"button","data-player-index":w,onClick:x,children:u.jsx("i",{className:"bi bi-arrow-down-up"})})})]}))})]})]})}),u.jsx("div",{className:"shrink-0 space-y-4",children:u.jsx(Oe,{size:"xlarge",className:"w-full",onClick:_,loading:S,type:"submit",children:"開始對局"})})]})}),u.jsx(Jn,{title:u.jsxs("div",{className:"space-x-4",children:[u.jsx("span",{children:"修改玩家"}),u.jsxs("a",{href:"#",className:"text-xs underline font-normal text-teal-600 hover:text-teal-500 align-middle",onClick:g,children:[u.jsx("i",{className:"bi bi-search"}),"搜尋玩家"]})]}),open:c,onClose:p,children:u.jsxs("div",{className:"container space-y-6",children:[!!(a!=null&&a.player.id)&&u.jsxs("div",{className:"py-2 px-3 bg-yellow-200 text-yellow-800 rounded",children:["注意：在這裡的修改不會儲存到玩家列表的資料庫。假如你想保留這些修改，請在"," ",u.jsxs("a",{href:"/players",target:"_blank",className:"text-teal-600 underline",children:["玩家列表 ",u.jsx("i",{className:"bi bi-box-arrow-up-right"})]})," ","中修改。"]}),u.jsx(d7,{onSubmit:h,defaultValue:a==null?void 0:a.player})]})}),u.jsx(OPe,{open:m==="choose",onSelect:v,onClose:b})]})}function LPe({team:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return u.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})}),e&&u.jsx("div",{className:"shrink-0",children:u.jsx(Oe,{variant:"icon",color:"inverted",type:"button",onClick:i,children:u.jsx("i",{className:"bi bi-pencil"})})})]})}function BPe(){const{data:t,update:e,push:r}=mr("teams"),n=E.useMemo(()=>Object.entries(t??{}).reverse().map(([b,v])=>({...v,_id:b})),[t]),[i,o]=To(!1),{register:s,reset:a,handleSubmit:l,control:c}=Kd({defaultValues:{_id:void 0,name:"新的隊伍",color:"#000000"}}),f=Ya({control:c}),d=E.useMemo(()=>({name:"隊員名字",title:f.name??"",color:f.color??"#000000"}),[f.color,f.name]),h=E.useRef(null),p=E.useCallback(()=>o(!1),[o]),m=E.useCallback(()=>{a({_id:"",name:"新的隊伍",color:"#000000"}),o(!0)},[a,o]),y=E.useCallback(b=>{a({...b}),o(!0)},[a,o]),g=E.useMemo(()=>l(b=>{b._id?e({[b._id]:b}):r(b),o(!1)}),[l,r,o,e]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{children:u.jsx("h1",{className:"text-4xl",children:"隊伍"})}),u.jsx("div",{children:u.jsx(Oe,{onClick:m,children:"新增"})})]}),u.jsx("div",{className:"space-y-2",children:n.map(b=>u.jsx(LPe,{team:b,onClickEdit:y},b._id))})]}),u.jsx(Jn,{title:"新增／修改隊伍",open:i,onClose:p,children:u.jsx("div",{className:"container",children:u.jsxs("form",{ref:h,onSubmit:g,children:[u.jsx("input",{type:"hidden",...s("_id")}),u.jsxs("div",{children:[u.jsx(wn,{className:"mb-6",label:"名字",children:u.jsx(Mn,{name:"name",control:c,rules:{required:!0},render:({field:b})=>u.jsx(_a,{...b})})}),u.jsx(wn,{className:"mb-6",label:"顏色（務必選能看清楚白字的深色）",children:u.jsx(Mn,{name:"color",control:c,rules:{required:!0},render:({field:b})=>u.jsx(KH,{...b})})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"mb-2",children:"預覽"}),u.jsx("div",{className:"text-[4rem] px-4 pt-6 pb-1 bg-gray-800 text-white relative",children:u.jsx(Qa,{player:d,score:25e3})})]}),u.jsxs("div",{className:"flex gap-x-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Oe,{className:"w-full",color:"secondary",type:"button",onClick:p,children:"取消"})}),u.jsx("div",{className:"flex-1",children:u.jsx(Oe,{className:"w-full",type:"submit",children:"儲存"})})]})]})})})]})}function UPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(RO,{params:r})}function VPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=rs((e==null?void 0:e.matchId)??"");return!r||!i?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:u.jsx(kg,{players:r.players,matchRounds:n,className:"w-full table-auto"})})})}function WPe(){const{data:t}=mr("matches"),e=E.useMemo(()=>Object.entries(t??{}).reverse().map(([r,n])=>({...n,_id:r})),[t]);return u.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsx("div",{className:"flex justify-between items-center",children:u.jsx("div",{children:u.jsx("h1",{className:"text-4xl",children:"對局"})})}),u.jsxs("table",{className:"data-table w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"對局"}),u.jsx("th",{children:"東家"}),u.jsx("th",{children:"南家"}),u.jsx("th",{children:"西家"}),u.jsx("th",{children:"北家"})]})}),u.jsx("tbody",{children:e.map(r=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("a",{href:`/v1/match/${r._id}`,target:"_blank",children:r.name})}),u.jsx("td",{children:r.players[0].name}),u.jsx("td",{children:r.players[1].name}),u.jsx("td",{children:r.players[2].name}),u.jsx("td",{children:r.players[3].name})]},r._id))})]})]})}function zPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),{match:r,matchCurrentRound:n}=rs((e==null?void 0:e.matchId)??"");return!r||!n?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6"})})}function GPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=rs((e==null?void 0:e.matchId)??""),[o,s]=E.useState(0);return E.useEffect(()=>{const l=setInterval(()=>{s(c=>1-c)},8e3);return()=>{clearInterval(l)}},[]),!r||!i?u.jsx("div",{children:"對局讀取失敗。"}):u.jsxs("div",{children:[u.jsx("div",{className:o===0?"block":"hidden",children:u.jsx(kg,{players:r.players,matchRounds:n,className:"w-full table-auto"})}),u.jsx("div",{className:o===1?"block":"hidden"})]})}function qPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsxs("main",{children:[u.jsxs("a",{href:"/v1/obs/1/scene-control",className:"block text-center py-4 bg-neutral-300",children:[u.jsx("i",{className:"bi bi-arrow-left-circle-fill"})," 切換到場景控制台"]}),u.jsx($H,{params:r})]})}const i0=({teamPlayer:t})=>{const e=E.useMemo(()=>jO(t.color),[t.color]);return u.jsxs("div",{className:"relative overflow-hidden",children:[u.jsx("table",{className:"w-full",children:u.jsxs("tbody",{children:[u.jsxs("tr",{style:{background:t.color},children:[u.jsx("td",{className:"w-[8mm] h-[8mm]"}),u.jsx("td",{className:"w-[2mm] border-r border-white"}),u.jsx("td",{}),u.jsx("td",{className:"w-[2mm] border-l border-white"}),u.jsx("td",{className:"w-[8mm] h-[8mm]"})]}),u.jsxs("tr",{style:{background:t.color},children:[u.jsx("td",{className:"h-[2mm] border-b border-white"}),u.jsx("td",{}),u.jsx("td",{}),u.jsx("td",{}),u.jsx("td",{className:"h-[2mm] border-b border-white"})]}),u.jsxs("tr",{style:{background:`linear-gradient(180deg, ${t.color}, ${e})`},children:[u.jsx("td",{}),u.jsx("td",{}),u.jsx("td",{className:"w-[150mm] h-[40mm]"}),u.jsx("td",{}),u.jsx("td",{})]}),u.jsxs("tr",{style:{background:e},children:[u.jsx("td",{className:"h-[2mm] border-t border-white"}),u.jsx("td",{}),u.jsx("td",{}),u.jsx("td",{}),u.jsx("td",{className:"h-[2mm] border-t border-white"})]}),u.jsxs("tr",{style:{background:e},children:[u.jsx("td",{className:"w-[8mm] h-[8mm]"}),u.jsx("td",{className:"w-[2mm] border-r border-white"}),u.jsx("td",{}),u.jsx("td",{className:"w-[2mm] border-l border-white"}),u.jsx("td",{className:"w-[8mm] h-[8mm]"})]})]})}),u.jsx("div",{className:"absolute left-[0] top-[2.5mm] w-[55mm] h-[55mm] bg-contain opacity-50",style:{backgroundImage:`url(${t.teamLogoImageUrl+"?w=500&h=500"})`}}),u.jsxs("div",{className:"absolute top-[10mm] bottom-[10mm] left-[25mm] right-[12mm] flex flex-col items-center justify-center",children:[u.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold mb-[3mm]",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerName}),u.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerNickname})]})]})},HPe=()=>{const{matchId:t}=Kte(),{data:e}=Ko({queryKey:["matches",t],queryFn:({queryKey:r})=>OO(r[1]),enabled:!!t});return e?u.jsxs("div",{className:"pt-16",children:[u.jsxs("div",{className:"w-[170mm] mx-auto mb-8 print:hidden",children:[u.jsx("p",{children:"右鍵「列印」，設定如下："}),u.jsxs("ul",{children:[u.jsxs("li",{children:["紙張大小：",u.jsx("strong",{children:"A4"})]}),u.jsxs("li",{children:["邊界：",u.jsx("strong",{children:"無邊界"})]}),u.jsxs("li",{children:["選項：",u.jsx("strong",{children:"打勾「背景圖片」"})]})]})]}),u.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:u.jsx(i0,{teamPlayer:e==null?void 0:e.playerEast})}),u.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:u.jsx(i0,{teamPlayer:e==null?void 0:e.playerSouth})}),u.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:u.jsx(i0,{teamPlayer:e==null?void 0:e.playerWest})}),u.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:u.jsx(i0,{teamPlayer:e==null?void 0:e.playerNorth})})]}):u.jsx(u.Fragment,{})},kQ=({params:{matchId:t}})=>{const{match:e,matchRounds:r}=rs(t),n=E.useMemo(()=>Object.entries(r??{}).filter(([,i])=>!!i.resultDetail).map(([i,o])=>({id:i,...o}))??[],[r]);return!e||!r?u.jsx(u.Fragment,{}):u.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-8",children:[u.jsx("h1",{className:"text-4xl text-center",children:e.name}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("h4",{className:"text-3xl",children:[u.jsx("i",{className:"bi bi-bar-chart-steps"})," 分數"," ",u.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),u.jsx(kg,{players:e.players,matchRounds:r??{},className:"w-full table-auto"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("h4",{className:"text-3xl",children:[u.jsx("i",{className:"bi bi-clock-history"})," 和牌記錄"]}),u.jsxs("table",{className:"data-table w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"局數"}),u.jsx("th",{children:"玩家"}),u.jsx("th",{children:"分數"}),u.jsx("th",{children:"役種"})]})}),u.jsx("tbody",{children:n.map(i=>u.jsxs("tr",{className:"odd:bg-neutral-200",children:[u.jsx("td",{className:"text-center py-1",children:u.jsx(ps,{roundCount:i.roundCount,extendedRoundCount:i.extendedRoundCount})}),u.jsx("td",{className:"text-center py-1",style:{background:e.players[i.resultDetail.winnerPlayerIndex].color},children:e.players[i.resultDetail.winnerPlayerIndex].name}),u.jsx("td",{className:"text-center py-1 text-xl",children:u.jsx(Lt,{value:i.playerResults[i.resultDetail.winnerPlayerIndex].afterScore-i.playerResults[i.resultDetail.winnerPlayerIndex].beforeScore,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}),u.jsxs("td",{className:"text-center py-1",children:[u.jsx("p",{children:i.resultDetail.yakus.map(({label:o})=>o).join(" ")}),u.jsx("p",{children:u.jsx(Lx,{han:i.resultDetail.han,fu:i.resultDetail.fu,yakumanCount:i.resultDetail.yakumanCount,isManganRoundUp:e.setting.isManganRoundUp==="1"})})]})]},i.id))})]})]})]})};function KPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(kQ,{params:r})}function OQ({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n}=rs(t),[i,o]=E.useState(!1),[s,a]=E.useState(!1),l=E.useCallback(()=>{if(!e||!r)return;const c={_id:t,...qG(Object.values(r))};a(!0),fetch(`https://hkleague2024.hkmahjong.org/api/match/${c._id}/result`,{method:"PATCH",body:JSON.stringify(c),headers:{Accept:"application/json"}}).then(()=>{o(!0),a(!1),alert("上傳完畢，請在資料庫上查看。")})},[e,t,r]);return!e||!n?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[u.jsxs("div",{children:[u.jsx("h6",{className:"text-center text-sm",children:t}),u.jsx("h3",{className:"text-2xl text-center",children:e.name})]}),u.jsx(kg,{players:e.players,matchRounds:r,className:"w-full table-auto"}),u.jsxs("div",{className:"text-center",children:[!i&&u.jsx(Oe,{disabled:s,onClick:l,children:s?"上傳中…":"上傳成績"}),i&&u.jsx("a",{href:`https://hkmjbs.sanity.studio/structure/general-list-matches-past;${t}`,children:u.jsx(Oe,{color:"secondary",children:"在資料庫上查看"})})]})]})})}const QPe=({queryKey:t})=>OO(t[1],t[2]),gR=(t,e)=>Ko({queryKey:["matches",t,e],queryFn:QPe,enabled:!!t}),YPe=({initialMinutes:t})=>{const[e,r]=E.useState(0),[n,i]=E.useMemo(()=>[Math.floor(e/60).toString().padStart(2,"0"),(e%60).toString().padStart(2,"0")],[e]);return E.useEffect(()=>{r(t*60)},[t]),YG(()=>{r(o=>o-1)},e>0?1e3:null),e<=0?u.jsx("span",{className:"text-[.5em]",children:"比賽即將開始"}):u.jsxs("span",{children:[n,":",i]})},jQ=({params:{matchId:t}})=>{const{data:e}=gR(t),r=E.useMemo(()=>e?[e[e._order[0]],e[e._order[1]],e[e._order[2]],e[e._order[3]]]:[],[e]),n=Fx("startAt"),i=Fx("m"),o=E.useMemo(()=>{if(i)return parseInt(i);try{const[s,a]=n.split(":").map(f=>parseInt(f)),l=new Date;l.setHours(s),l.setMinutes(a);const c=new Date;return Math.max(0,(l.getTime()-c.getTime())/6e4)}catch{return 15}},[i,n]);return u.jsxs("div",{className:"absolute inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:[u.jsxs("div",{className:"w-[80vw]",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),u.jsx("div",{children:u.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),u.jsxs("div",{className:"flex justify-between items-center mb-[10vh]",children:[u.jsxs("div",{style:{paddingBottom:"25vh"},children:[u.jsx("p",{className:"text-left text-[80px] leading-3",children:"下一場賽事"}),u.jsx("p",{className:"text-left text-[120px] scale-[200%] origin-top-left font-numeric",children:u.jsx(YPe,{initialMinutes:o})})]}),u.jsx("div",{className:"grid grid-cols-2 gap-[2vw]",children:r.map(s=>u.jsx("img",{className:"w-[16vw] aspect-square",src:s.teamLogoImageUrl+"?w=500&h=500"}))})]})]}),u.jsxs("div",{className:"absolute bottom-[5vh] left-[10vw]",children:[u.jsx("div",{children:u.jsx("img",{src:"/images/homepage-qr.png",className:"w-[8vw]",alt:""})}),u.jsxs("p",{className:"text-[32px]",children:["聯賽官網: ",u.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})]})]})]})};function XPe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(jQ,{params:r})}function RQ(){return u.jsx("div",{className:"absolute inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:u.jsxs("div",{className:"w-[80%]",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),u.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[20%]",alt:""})]}),u.jsxs("div",{className:"flex flex-col justify-center items-center h-[70vh]",children:[u.jsx("p",{className:"text-[100px] text-center",children:"今天賽事已結束，感謝各位收看！"}),u.jsx("div",{className:"text-center mt-[5vh]",children:u.jsx("img",{src:"/images/homepage-qr.png",className:"w-[20%] mx-auto",alt:""})}),u.jsx("p",{className:"text-[48px] text-center",children:u.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})}),u.jsx("p",{className:"text-[48px] text-center",children:"賽程、賽事重溫、隊伍介紹、新手教程"})]})]})})}var $Q={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,n(a)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})($Q);var JPe=$Q.exports;const Pr=ct(JPe),K3=({teamPlayer:t,team:e,fadeIn:r,fadeOut:n,delay:i})=>{const o=jO(e.color);return u.jsxs("div",{className:Pr("relative aspect-[18/25] rounded-[1em] overflow-hidden",{"mi-team-player-in":r,"mi-team-player-out":n}),style:{background:`linear-gradient(180deg, ${e.color}, ${o})`,animationDelay:i+"s"},children:[u.jsx("div",{className:"absolute inset-0",style:{background:`url(${e.teamLogoImageUrl+"?w=500&h=500&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.2}}),u.jsx("img",{className:"relative z-10 block mx-auto w-full",src:t.playerPortraitImageUrl+"?h=500&w=360&auto=format&fit=crop&crop=top",alt:t.playerName}),u.jsx("div",{className:"absolute z-20 bottom-0 left-0 right-0 text-center py-[0.25em]",style:{background:"linear-gradient(to top, #00000090 80%, transparent"},children:u.jsxs("div",{children:[u.jsx("p",{className:"text-[1.5em] leading-[1em] font-semibold",children:t.playerNickname}),u.jsx("p",{className:"text-[0.8em]",children:t.playerName})]})})]},t.playerName)},ZPe=({slide:t,status:e,subslide:r})=>{var n,i,o,s,a,l,c,f,d,h,p,m,y,g,b,v,x,S,_,w,A;return t.type==="teams"?u.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-1"}),u.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:t.teams.map((C,T)=>u.jsxs("div",{className:Pr("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?T*.25+"s":"0s"},children:[u.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${C.color})`,opacity:.5}},C.teamId),u.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${C.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),u.jsxs("div",{className:Pr("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[u.jsx("img",{src:C.teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),u.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:C.teamName}),u.jsx("h3",{className:"text-[1em] font-semibold text-center",children:C.teamSecondaryName})]}),u.jsxs("div",{className:Pr("absolute inset-0 opacity-0",{"mi-teams-player-in":e>=0&&r>=1,"mi-teams-player-out":e>0}),style:{animationDelay:e===0?T*.25+"s":"0s"},children:[u.jsx("img",{src:C.playerPortraitImageUrl+"?w=360&h=500&auto=format",className:"aspect-[18/25] w-full",alt:""}),u.jsxs("div",{className:"font-semibold text-center",children:[u.jsx("p",{className:"text-[1em]",children:C.playerNickname}),u.jsx("p",{className:"text-[.8em]",children:C.playerName})]})]})]},C.teamId))})]}):t.type==="team"?u.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:Pr("absolute inset-0 -z-10",{"mi-team-colorBackground-in":e===0,"mi-team-colorBackground-out":e>0}),style:{background:`linear-gradient(to bottom, transparent 60%, ${t.team.color})`,opacity:.5}}),u.jsx("div",{className:Pr("absolute inset-0 -z-10",{"mi-team-logoBackground-in":e===0,"mi-team-logoBackground-out":e>0}),style:{background:`url(${t.team.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.125}}),u.jsxs("div",{className:Pr("text-right mb-[.5em]",{"mi-team-team-in":e===0,"mi-team-team-out":e>0}),children:[u.jsxs("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:[u.jsxs("div",{className:"text-left space-y-[.5em]",children:[u.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[u.jsx("p",{children:"隊伍積分"}),u.jsx("p",{children:u.jsx("span",{className:"font-numeric",children:En((n=t.team.teamStatistic)==null?void 0:n.point)})})]}),u.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[u.jsx("p",{children:"隊伍排名"}),u.jsx("p",{children:u.jsx("span",{className:"font-numeric",children:Ka((i=t.team.teamStatistic)==null?void 0:i.ranking)})})]})]}),u.jsx("img",{src:t.team.teamLogoImageUrl+"?w=512&h=512&auto=format",alt:t.team.teamFullname,className:"aspect-square",style:{width:256,height:256}})]}),u.jsx("h3",{className:"inline-block font-semibold text-right text-[1.5em]",children:t.team.teamFullname})]}),u.jsxs("div",{className:"flex-[2] relative",children:[u.jsx("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e===0&&r>=0&&r<1?1:0},children:t.teamPlayers.map((C,T)=>u.jsx(K3,{team:t.team,teamPlayer:C,fadeIn:e===0&&r<=0,fadeOut:e===0&&r>0,delay:(r<=0?1.7:0)+T*.25},C.playerName))}),u.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e>=0&&e<1&&r>=1&&r<2?1:0},children:[u.jsx(K3,{team:t.team,teamPlayer:t.team,fadeIn:e===0&&r===1,fadeOut:e>0,delay:0}),u.jsx("div",{className:"col-span-3",children:u.jsxs("div",{className:Pr({"mi-team-activePlayerStat-in":e===0&&r===1,"mi-team-activePlayerStat-out":e>0}),children:[u.jsxs("div",{className:"flex justify-between mb-[1em]",children:[u.jsxs("p",{className:"text-[2em] flex items-center",children:[u.jsx("span",{children:"個人總分"}),u.jsx("span",{className:"font-numeric",children:En((o=t.team.playerStatistic)==null?void 0:o.point)}),u.jsxs("span",{className:"ml-4 font-numeric text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[((s=t.team.playerStatistic)==null?void 0:s.pointRanking)??"-","名"]})]}),u.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",u.jsx("span",{className:"font-numeric",children:((a=t.team.playerStatistic)==null?void 0:a.matchCount)??"-"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em]",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),u.jsxs("p",{className:"flex items-center",children:[u.jsx("span",{className:"font-numeric",children:Ws((l=t.team.playerStatistic)==null?void 0:l.nonFourthP)}),u.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((c=t.team.playerStatistic)==null?void 0:c.nonFourthPRanking)??"-","名"]})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-[.9em]",children:"連對率"}),u.jsxs("p",{className:"flex items-center",children:[u.jsx("span",{className:"font-numeric",children:Ws((f=t.team.playerStatistic)==null?void 0:f.firstAndSecondP)}),u.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((d=t.team.playerStatistic)==null?void 0:d.firstAndSecondPRanking)??"-","名"]})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-[.9em]",children:"立直率"}),u.jsxs("p",{className:"flex items-center",children:[u.jsx("span",{className:"font-numeric",children:Ws((h=t.team.playerStatistic)==null?void 0:h.riichiP)}),u.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((p=t.team.playerStatistic)==null?void 0:p.riichiPRanking)??"-","名"]})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-[.9em]",children:"和了率"}),u.jsxs("p",{className:"flex items-center",children:[u.jsx("span",{className:"font-numeric",children:Ws((m=t.team.playerStatistic)==null?void 0:m.ronP)}),u.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((y=t.team.playerStatistic)==null?void 0:y.ronPRanking)??"-","名"]})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-[.9em]",children:"銃和率"}),u.jsxs("p",{className:"flex items-center",children:[u.jsx("span",{className:"font-numeric",children:Ws((g=t.team.playerStatistic)==null?void 0:g.chuckP)}),u.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((b=t.team.playerStatistic)==null?void 0:b.chuckPRanking)??"-","名"]})]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-[.9em]",children:"副露率"}),u.jsxs("p",{className:"flex items-center",children:[u.jsx("span",{className:"font-numeric",children:Ws((v=t.team.playerStatistic)==null?void 0:v.revealP)}),u.jsxs("span",{className:"font-numeric ml-2 text-[.75em] min-w-[2.5em] text-right text-cyan-400",children:[" ",((x=t.team.playerStatistic)==null?void 0:x.revealPRanking)??"-","名"]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.8em]",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("p",{className:"text-[.9em]",children:"和了平均打點"}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-numeric",children:Ws((S=t.team.playerStatistic)==null?void 0:S.ronPureScoreAvg)}),u.jsxs("p",{className:"font-numeric text-[.75em] min-w-[2.5em] text-cyan-400 -mt-4",children:[((_=t.team.playerStatistic)==null?void 0:_.ronPureScoreAvgRanking)??"-","名"]})]})]}),u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("p",{className:"text-[.9em]",children:"銃和平均打點"}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-numeric",children:Ws((w=t.team.playerStatistic)==null?void 0:w.chuckPureScoreAvg)}),u.jsxs("p",{className:"font-numeric text-[.75em] min-w-[2.5em] text-cyan-400 -mt-4",children:[((A=t.team.playerStatistic)==null?void 0:A.chuckPureScoreAvgRanking)??"-","名"]})]})]})]})]})})]})]})]}):u.jsx(u.Fragment,{})},vR=({params:{matchId:t},forwardFlag:e,resetFlag:r,disableClick:n})=>{const{data:i}=gR(t,!0),o=E.useMemo(()=>i?[i==null?void 0:i.playerEast.teamId,i==null?void 0:i.playerSouth.teamId,i==null?void 0:i.playerWest.teamId,i==null?void 0:i.playerNorth.teamId]:null,[i]),{data:s}=Ko({queryKey:["match",t,"groupedPlayers"],queryFn:()=>Sye(o,i==null?void 0:i.tournament._id),enabled:!!i&&!!o}),a=E.useMemo(()=>!i||!s?[{type:"empty",_id:"empty",subslide:0}]:[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:[i.playerEast,i.playerSouth,i.playerWest,i.playerNorth],subslide:1},{_id:"team_playerEast",type:"team",team:i.playerEast,teamPlayers:s[i.playerEast.teamId],subslide:2},{_id:"team_playerSouth",type:"team",team:i.playerSouth,teamPlayers:s[i.playerSouth.teamId],subslide:2},{_id:"team_playerWest",type:"team",team:i.playerWest,teamPlayers:s[i.playerWest.teamId],subslide:2},{_id:"team_playerNorth",type:"team",team:i.playerNorth,teamPlayers:s[i.playerNorth.teamId],subslide:2}],[i,s]),[l,c]=E.useState(0),[f,d]=E.useState(0),[h,p]=E.useState(!1),[m,y]=E.useState(e??0),[g,b]=E.useState(r??0),v=E.useCallback(()=>{if(h)return;const S=a[l];if(!S){c(1);return}S.type==="empty"?c(_=>_+1):f>=S.subslide-1?(c(_=>_+.5),p(!0),setTimeout(()=>{c(_=>Math.ceil(_)),d(0),p(!1)},1200)):(d(_=>_+.5),p(!0),setTimeout(()=>{d(_=>Math.ceil(_)),p(!1)},1200))},[h,l,a,f]),x=E.useCallback(()=>{n||v()},[n,v]);return E.useEffect(()=>{typeof e<"u"&&e!==m&&(v(),y(e))},[e,v,m]),E.useEffect(()=>{typeof r<"u"&&r!==g&&(c(0),d(0),b(r))},[e,v,m,g,r]),!i||!s?u.jsx(u.Fragment,{}):u.jsxs("div",{className:"match-introduction absolute inset-0 text-white text-[36px] -z-50 overflow-hidden",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:x,children:[u.jsx("div",{className:"absolute py-16 px-24 inset-0",children:u.jsxs("div",{className:"flex gap-x-[0.25em] mi-title-in",children:[u.jsx("div",{children:u.jsx("img",{src:i.tournament.logoUrl+"?w=280&h=280&auto=format",alt:i.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:i.tournament.name}),u.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:i.nameAlt})]})]})}),a.map((S,_)=>u.jsx(ZPe,{slide:S,status:l-_,subslide:f},S._id))]})},o0=({player:t})=>u.jsx("div",{className:"relative w-full h-full border-[.5em]",style:{borderColor:t.color},children:u.jsxs("div",{className:"absolute top-0 left-0 flex gap-x-8 pr-1 rounded-br-lg text-[1.5em] font-semibold text-white",style:{backgroundColor:t.color},children:[u.jsxs("p",{children:[t.name," (",t.nickname,")"]}),u.jsx("p",{children:t.currentStatus.afterScore})]})}),DQ=({params:{matchId:t}})=>{const{match:e,matchCurrentRound:r}=rs(t),n=E.useMemo(()=>{if(!e||!r)return[];const i=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],o=Object.entries(r.playerResults).map(([s,a])=>({playerIndex:s,score:a.afterScore})).sort((s,a)=>a.score-s.score).map((s,a)=>({playerIndex:s.playerIndex,...i[a],point:(s.score-3e4)/1e3+i[a].point})).reduce((s,a)=>(s[a.playerIndex]={point:a.point,ranking:a.ranking},s),{});return["0","1","2","3"].map(s=>({...e.players[s],color:e.players[s].color,currentStatus:{...r.playerResults[s],isEast:ti(s,r.roundCount),...o[s]}}))},[e,r]);return!e||n.length===0?u.jsx(u.Fragment,{}):u.jsxs("div",{className:"absolute inset-0 grid grid-cols-8",children:[u.jsx("div",{className:"col-span-5",children:u.jsx(o0,{player:n[0]})}),u.jsx("div",{className:"col-span-1"}),u.jsx("div",{className:"col-span-2"}),u.jsx("div",{className:"col-span-5",children:u.jsx(o0,{player:n[1]})}),u.jsx("div",{className:"col-span-1"}),u.jsx("div",{className:"col-span-1"}),u.jsx("div",{className:"col-span-1"}),u.jsx("div",{className:"col-span-5",children:u.jsx(o0,{player:n[2]})}),u.jsx("div",{className:"col-span-3 row-span-2"}),u.jsx("div",{className:"col-span-5",children:u.jsx(o0,{player:n[3]})})]})};function eTe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(DQ,{params:r})}function tTe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(OQ,{params:r})}function MQ(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=MQ(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function dt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=MQ(t))&&(n&&(n+=" "),n+=e);return n}var rTe=Array.isArray,zn=rTe,nTe=typeof Rl=="object"&&Rl&&Rl.Object===Object&&Rl,FQ=nTe,iTe=FQ,oTe=typeof self=="object"&&self&&self.Object===Object&&self,sTe=iTe||oTe||Function("return this")(),ns=sTe,aTe=ns,lTe=aTe.Symbol,Yg=lTe,Q3=Yg,LQ=Object.prototype,cTe=LQ.hasOwnProperty,uTe=LQ.toString,zh=Q3?Q3.toStringTag:void 0;function fTe(t){var e=cTe.call(t,zh),r=t[zh];try{t[zh]=void 0;var n=!0}catch{}var i=uTe.call(t);return n&&(e?t[zh]=r:delete t[zh]),i}var dTe=fTe,hTe=Object.prototype,pTe=hTe.toString;function mTe(t){return pTe.call(t)}var yTe=mTe,Y3=Yg,gTe=dTe,vTe=yTe,bTe="[object Null]",xTe="[object Undefined]",X3=Y3?Y3.toStringTag:void 0;function _Te(t){return t==null?t===void 0?xTe:bTe:X3&&X3 in Object(t)?gTe(t):vTe(t)}var Fs=_Te;function wTe(t){return t!=null&&typeof t=="object"}var Ls=wTe,STe=Fs,ETe=Ls,ATe="[object Symbol]";function CTe(t){return typeof t=="symbol"||ETe(t)&&STe(t)==ATe}var ih=CTe,PTe=zn,TTe=ih,ITe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NTe=/^\w*$/;function kTe(t,e){if(PTe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||TTe(t)?!0:NTe.test(t)||!ITe.test(t)||e!=null&&t in Object(e)}var bR=kTe;function OTe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cl=OTe;const oh=ct(cl);var jTe=Fs,RTe=cl,$Te="[object AsyncFunction]",DTe="[object Function]",MTe="[object GeneratorFunction]",FTe="[object Proxy]";function LTe(t){if(!RTe(t))return!1;var e=jTe(t);return e==DTe||e==MTe||e==$Te||e==FTe}var xR=LTe;const Fe=ct(xR);var BTe=ns,UTe=BTe["__core-js_shared__"],VTe=UTe,VA=VTe,J3=function(){var t=/[^.]+$/.exec(VA&&VA.keys&&VA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function WTe(t){return!!J3&&J3 in t}var zTe=WTe,GTe=Function.prototype,qTe=GTe.toString;function HTe(t){if(t!=null){try{return qTe.call(t)}catch{}try{return t+""}catch{}}return""}var BQ=HTe,KTe=xR,QTe=zTe,YTe=cl,XTe=BQ,JTe=/[\\^$.*+?()[\]{}|]/g,ZTe=/^\[object .+?Constructor\]$/,eIe=Function.prototype,tIe=Object.prototype,rIe=eIe.toString,nIe=tIe.hasOwnProperty,iIe=RegExp("^"+rIe.call(nIe).replace(JTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oIe(t){if(!YTe(t)||QTe(t))return!1;var e=KTe(t)?iIe:ZTe;return e.test(XTe(t))}var sIe=oIe;function aIe(t,e){return t==null?void 0:t[e]}var lIe=aIe,cIe=sIe,uIe=lIe;function fIe(t,e){var r=uIe(t,e);return cIe(r)?r:void 0}var Hc=fIe,dIe=Hc,hIe=dIe(Object,"create"),aS=hIe,Z3=aS;function pIe(){this.__data__=Z3?Z3(null):{},this.size=0}var mIe=pIe;function yIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var gIe=yIe,vIe=aS,bIe="__lodash_hash_undefined__",xIe=Object.prototype,_Ie=xIe.hasOwnProperty;function wIe(t){var e=this.__data__;if(vIe){var r=e[t];return r===bIe?void 0:r}return _Ie.call(e,t)?e[t]:void 0}var SIe=wIe,EIe=aS,AIe=Object.prototype,CIe=AIe.hasOwnProperty;function PIe(t){var e=this.__data__;return EIe?e[t]!==void 0:CIe.call(e,t)}var TIe=PIe,IIe=aS,NIe="__lodash_hash_undefined__";function kIe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=IIe&&e===void 0?NIe:e,this}var OIe=kIe,jIe=mIe,RIe=gIe,$Ie=SIe,DIe=TIe,MIe=OIe;function sh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}sh.prototype.clear=jIe;sh.prototype.delete=RIe;sh.prototype.get=$Ie;sh.prototype.has=DIe;sh.prototype.set=MIe;var FIe=sh;function LIe(){this.__data__=[],this.size=0}var BIe=LIe;function UIe(t,e){return t===e||t!==t&&e!==e}var _R=UIe,VIe=_R;function WIe(t,e){for(var r=t.length;r--;)if(VIe(t[r][0],e))return r;return-1}var lS=WIe,zIe=lS,GIe=Array.prototype,qIe=GIe.splice;function HIe(t){var e=this.__data__,r=zIe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():qIe.call(e,r,1),--this.size,!0}var KIe=HIe,QIe=lS;function YIe(t){var e=this.__data__,r=QIe(e,t);return r<0?void 0:e[r][1]}var XIe=YIe,JIe=lS;function ZIe(t){return JIe(this.__data__,t)>-1}var eNe=ZIe,tNe=lS;function rNe(t,e){var r=this.__data__,n=tNe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var nNe=rNe,iNe=BIe,oNe=KIe,sNe=XIe,aNe=eNe,lNe=nNe;function ah(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ah.prototype.clear=iNe;ah.prototype.delete=oNe;ah.prototype.get=sNe;ah.prototype.has=aNe;ah.prototype.set=lNe;var cS=ah,cNe=Hc,uNe=ns,fNe=cNe(uNe,"Map"),wR=fNe,eB=FIe,dNe=cS,hNe=wR;function pNe(){this.size=0,this.__data__={hash:new eB,map:new(hNe||dNe),string:new eB}}var mNe=pNe;function yNe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var gNe=yNe,vNe=gNe;function bNe(t,e){var r=t.__data__;return vNe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var uS=bNe,xNe=uS;function _Ne(t){var e=xNe(this,t).delete(t);return this.size-=e?1:0,e}var wNe=_Ne,SNe=uS;function ENe(t){return SNe(this,t).get(t)}var ANe=ENe,CNe=uS;function PNe(t){return CNe(this,t).has(t)}var TNe=PNe,INe=uS;function NNe(t,e){var r=INe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var kNe=NNe,ONe=mNe,jNe=wNe,RNe=ANe,$Ne=TNe,DNe=kNe;function lh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lh.prototype.clear=ONe;lh.prototype.delete=jNe;lh.prototype.get=RNe;lh.prototype.has=$Ne;lh.prototype.set=DNe;var SR=lh,UQ=SR,MNe="Expected a function";function ER(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(MNe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(ER.Cache||UQ),r}ER.Cache=UQ;var FNe=ER,LNe=FNe,BNe=500;function UNe(t){var e=LNe(t,function(n){return r.size===BNe&&r.clear(),n}),r=e.cache;return e}var VNe=UNe,WNe=VNe,zNe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GNe=/\\(\\)?/g,qNe=WNe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(zNe,function(r,n,i,o){e.push(i?o.replace(GNe,"$1"):n||r)}),e}),HNe=qNe;function KNe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var AR=KNe,tB=Yg,QNe=AR,YNe=zn,XNe=ih,JNe=1/0,rB=tB?tB.prototype:void 0,nB=rB?rB.toString:void 0;function VQ(t){if(typeof t=="string")return t;if(YNe(t))return QNe(t,VQ)+"";if(XNe(t))return nB?nB.call(t):"";var e=t+"";return e=="0"&&1/t==-JNe?"-0":e}var ZNe=VQ,eke=ZNe;function tke(t){return t==null?"":eke(t)}var WQ=tke,rke=zn,nke=bR,ike=HNe,oke=WQ;function ske(t,e){return rke(t)?t:nke(t,e)?[t]:ike(oke(t))}var zQ=ske,ake=ih,lke=1/0;function cke(t){if(typeof t=="string"||ake(t))return t;var e=t+"";return e=="0"&&1/t==-lke?"-0":e}var fS=cke,uke=zQ,fke=fS;function dke(t,e){e=uke(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[fke(e[r++])];return r&&r==n?t:void 0}var CR=dke,hke=CR;function pke(t,e,r){var n=t==null?void 0:hke(t,e);return n===void 0?r:n}var GQ=pke;const Di=ct(GQ);function mke(t){return t==null}var yke=mke;const tt=ct(yke);var gke=Fs,vke=zn,bke=Ls,xke="[object String]";function _ke(t){return typeof t=="string"||!vke(t)&&bke(t)&&gke(t)==xke}var wke=_ke;const Xg=ct(wke);var Ske=Fs,Eke=Ls,Ake="[object Number]";function Cke(t){return typeof t=="number"||Eke(t)&&Ske(t)==Ake}var qQ=Cke;const Pke=ct(qQ);var Tke=qQ;function Ike(t){return Tke(t)&&t!=+t}var Nke=Ike;const Jg=ct(Nke);var lo=function(e){return e===0?0:e>0?1:-1},zl=function(e){return Xg(e)&&e.indexOf("%")===e.length-1},re=function(e){return Pke(e)&&!Jg(e)},hr=function(e){return re(e)||Xg(e)},kke=0,Zg=function(e){var r=++kke;return"".concat(e||"").concat(r)},bd=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!re(e)&&!Xg(e))return n;var o;if(zl(e)){var s=e.indexOf("%");o=r*parseFloat(e.slice(0,s))/100}else o=+e;return Jg(o)&&(o=n),i&&o>r&&(o=r),o},Ks=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Oke=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},eo=function(e,r){return re(e)&&re(r)?function(n){return e+n*(r-e)}:function(){return r}};function m_(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Di(n,e))===r})}function vf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function eI(t){"@babel/helpers - typeof";return eI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eI(t)}var jke=["viewBox","children"],Rke=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iB=["points","pathLength"],WA={svg:jke,polygon:iB,polyline:iB},PR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],y_=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),!oh(n))return null;var i={};return Object.keys(n).forEach(function(o){PR.includes(o)&&(i[o]=r||function(s){return n[o](n,s)})}),i},$ke=function(e,r,n){return function(i){return e(r,n,i),null}},g_=function(e,r,n){if(!oh(e)||eI(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];PR.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=$ke(s,r,n))}),i},Dke=["children"],Mke=["children"];function oB(t,e){if(t==null)return{};var r=Fke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function tI(t){"@babel/helpers - typeof";return tI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tI(t)}var sB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},_s=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},aB=null,zA=null,TR=function t(e){if(e===aB&&Array.isArray(zA))return zA;var r=[];return E.Children.forEach(e,function(n){tt(n)||(Gx.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),zA=r,aB=e,r};function Mi(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return _s(i)}):n=[_s(e)],TR(t).forEach(function(i){var o=Di(i,"type.displayName")||Di(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function No(t,e){var r=Mi(t,e);return r&&r[0]}var lB=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!re(n)||n<=0||!re(i)||i<=0)},Lke=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Bke=function(e){return e&&e.type&&Xg(e.type)&&Lke.indexOf(e.type)>=0},Uke=function(e){return e&&tI(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},Vke=function(e,r,n,i){var o,s=(o=WA==null?void 0:WA[i])!==null&&o!==void 0?o:[];return!Fe(e)&&(i&&s.includes(r)||Rke.includes(r))||n&&PR.includes(r)},Ke=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!oh(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;Vke((a=i)===null||a===void 0?void 0:a[s],s,r,n)&&(o[s]=i[s])}),o},HQ=function t(e,r){if(e===r)return!0;var n=E.Children.count(e);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return cB(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=e[i],s=r[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!cB(o,s))return!1}return!0},cB=function(e,r){if(tt(e)&&tt(r))return!0;if(!tt(e)&&!tt(r)){var n=e.props||{},i=n.children,o=oB(n,Dke),s=r.props||{},a=s.children,l=oB(s,Mke);return i&&a?vf(o,l)&&HQ(i,a):!i&&!a?vf(o,l):!1}return!1},uB=function(e,r){var n=[],i={};return TR(e).forEach(function(o,s){if(Bke(o))n.push(o);else if(o){var a=_s(o.type),l=r[a]||{},c=l.handler,f=l.once;if(c&&(!f||!i[a])){var d=c(o,a,s);n.push(d),i[a]=!0}}}),n},Wke=function(e){var r=e&&e.type;return r&&sB[r]?sB[r]:null},zke=function(e,r){return TR(r).indexOf(e)},Gke=["children","width","height","viewBox","className","style","title","desc"];function rI(){return rI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rI.apply(this,arguments)}function qke(t,e){if(t==null)return{};var r=Hke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function nI(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,c=qke(t,Gke),f=i||{width:r,height:n,x:0,y:0},d=dt("recharts-surface",o);return O.createElement("svg",rI({},Ke(c,!0,"svg"),{className:d,width:r,height:n,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),O.createElement("title",null,a),O.createElement("desc",null,l),e)}var Kke=["children","className"];function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iI.apply(this,arguments)}function Qke(t,e){if(t==null)return{};var r=Yke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Jt=O.forwardRef(function(t,e){var r=t.children,n=t.className,i=Qke(t,Kke),o=dt("recharts-layer",n);return O.createElement("g",iI({className:o},Ke(i,!0),{ref:e}),r)}),gc=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function Xke(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var Jke=Xke,Zke=Jke;function eOe(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Zke(t,e,r)}var tOe=eOe,rOe="\\ud800-\\udfff",nOe="\\u0300-\\u036f",iOe="\\ufe20-\\ufe2f",oOe="\\u20d0-\\u20ff",sOe=nOe+iOe+oOe,aOe="\\ufe0e\\ufe0f",lOe="\\u200d",cOe=RegExp("["+lOe+rOe+sOe+aOe+"]");function uOe(t){return cOe.test(t)}var KQ=uOe;function fOe(t){return t.split("")}var dOe=fOe,QQ="\\ud800-\\udfff",hOe="\\u0300-\\u036f",pOe="\\ufe20-\\ufe2f",mOe="\\u20d0-\\u20ff",yOe=hOe+pOe+mOe,gOe="\\ufe0e\\ufe0f",vOe="["+QQ+"]",oI="["+yOe+"]",sI="\\ud83c[\\udffb-\\udfff]",bOe="(?:"+oI+"|"+sI+")",YQ="[^"+QQ+"]",XQ="(?:\\ud83c[\\udde6-\\uddff]){2}",JQ="[\\ud800-\\udbff][\\udc00-\\udfff]",xOe="\\u200d",ZQ=bOe+"?",eY="["+gOe+"]?",_Oe="(?:"+xOe+"(?:"+[YQ,XQ,JQ].join("|")+")"+eY+ZQ+")*",wOe=eY+ZQ+_Oe,SOe="(?:"+[YQ+oI+"?",oI,XQ,JQ,vOe].join("|")+")",EOe=RegExp(sI+"(?="+sI+")|"+SOe+wOe,"g");function AOe(t){return t.match(EOe)||[]}var COe=AOe,POe=dOe,TOe=KQ,IOe=COe;function NOe(t){return TOe(t)?IOe(t):POe(t)}var kOe=NOe,OOe=tOe,jOe=KQ,ROe=kOe,$Oe=WQ;function DOe(t){return function(e){e=$Oe(e);var r=jOe(e)?ROe(e):void 0,n=r?r[0]:e.charAt(0),i=r?OOe(r,1).join(""):e.slice(1);return n[t]()+i}}var MOe=DOe,FOe=MOe,LOe=FOe("toUpperCase"),BOe=LOe;const dS=ct(BOe);function Et(t){return function(){return t}}const tY=Math.cos,v_=Math.sin,vo=Math.sqrt,b_=Math.PI,hS=2*b_,aI=Math.PI,lI=2*aI,Nl=1e-6,UOe=lI-Nl;function rY(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function VOe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return rY;const r=10**e;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class WOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?rY:VOe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,o,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,r,n,i,o){if(e=+e,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=n-e,c=i-r,f=s-e,d=a-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Nl)if(!(Math.abs(d*l-c*f)>Nl)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-s,m=i-a,y=l*l+c*c,g=p*p+m*m,b=Math.sqrt(y),v=Math.sqrt(h),x=o*Math.tan((aI-Math.acos((y+h-g)/(2*b*v)))/2),S=x/v,_=x/b;Math.abs(S-1)>Nl&&this._append`L${e+S*f},${r+S*d}`,this._append`A${o},${o},0,0,${+(d*p>f*m)},${this._x1=e+_*l},${this._y1=r+_*c}`}}arc(e,r,n,i,o,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=e+a,f=r+l,d=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Nl||Math.abs(this._y1-f)>Nl)&&this._append`L${c},${f}`,n&&(h<0&&(h=h%lI+lI),h>UOe?this._append`A${n},${n},0,1,${d},${e-a},${r-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=f}`:h>Nl&&this._append`A${n},${n},0,${+(h>=aI)},${d},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function IR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new WOe(e)}function NR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nY(t){this._context=t}nY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pS(t){return new nY(t)}function iY(t){return t[0]}function oY(t){return t[1]}function sY(t,e){var r=Et(!0),n=null,i=pS,o=null,s=IR(a);t=typeof t=="function"?t:t===void 0?iY:Et(t),e=typeof e=="function"?e:e===void 0?oY:Et(e);function a(l){var c,f=(l=NR(l)).length,d,h=!1,p;for(n==null&&(o=i(p=s())),c=0;c<=f;++c)!(c<f&&r(d=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,c,l),+e(d,c,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Et(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Et(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Et(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(o=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=o=null:o=i(n=l),a):n},a}function s0(t,e,r){var n=null,i=Et(!0),o=null,s=pS,a=null,l=IR(c);t=typeof t=="function"?t:t===void 0?iY:Et(+t),e=typeof e=="function"?e:Et(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?oY:Et(+r);function c(d){var h,p,m,y=(d=NR(d)).length,g,b=!1,v,x=new Array(y),S=new Array(y);for(o==null&&(a=s(v=l())),h=0;h<=y;++h){if(!(h<y&&i(g=d[h],h,d))===b)if(b=!b)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=h-1;m>=p;--m)a.point(x[m],S[m]);a.lineEnd(),a.areaEnd()}b&&(x[h]=+t(g,h,d),S[h]=+e(g,h,d),a.point(n?+n(g,h,d):x[h],r?+r(g,h,d):S[h]))}if(v)return a=null,v+""||null}function f(){return sY().defined(i).curve(s).context(o)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Et(+d),n=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Et(+d),c):t},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Et(+d),c):n},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Et(+d),r=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Et(+d),c):e},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Et(+d),c):r},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(r)},c.lineX1=function(){return f().x(n).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Et(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}class aY{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function zOe(t){return new aY(t,!0)}function GOe(t){return new aY(t,!1)}const kR={draw(t,e){const r=vo(e/b_);t.moveTo(r,0),t.arc(0,0,r,0,hS)}},qOe={draw(t,e){const r=vo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},lY=vo(1/3),HOe=lY*2,KOe={draw(t,e){const r=vo(e/HOe),n=r*lY;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},QOe={draw(t,e){const r=vo(e),n=-r/2;t.rect(n,n,r,r)}},YOe=.8908130915292852,cY=v_(b_/10)/v_(7*b_/10),XOe=v_(hS/10)*cY,JOe=-tY(hS/10)*cY,ZOe={draw(t,e){const r=vo(e*YOe),n=XOe*r,i=JOe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let o=1;o<5;++o){const s=hS*o/5,a=tY(s),l=v_(s);t.lineTo(l*r,-a*r),t.lineTo(a*n-l*i,l*n+a*i)}t.closePath()}},GA=vo(3),eje={draw(t,e){const r=-vo(e/(GA*3));t.moveTo(0,r*2),t.lineTo(-GA*r,-r),t.lineTo(GA*r,-r),t.closePath()}},yi=-.5,gi=vo(3)/2,cI=1/vo(12),tje=(cI/2+1)*3,rje={draw(t,e){const r=vo(e/tje),n=r/2,i=r*cI,o=n,s=r*cI+r,a=-o,l=s;t.moveTo(n,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(yi*n-gi*i,gi*n+yi*i),t.lineTo(yi*o-gi*s,gi*o+yi*s),t.lineTo(yi*a-gi*l,gi*a+yi*l),t.lineTo(yi*n+gi*i,yi*i-gi*n),t.lineTo(yi*o+gi*s,yi*s-gi*o),t.lineTo(yi*a+gi*l,yi*l-gi*a),t.closePath()}};function nje(t,e){let r=null,n=IR(i);t=typeof t=="function"?t:Et(t||kR),e=typeof e=="function"?e:Et(e===void 0?64:+e);function i(){let o;if(r||(r=o=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Et(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Et(+o),i):e},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function x_(){}function __(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function uY(t){this._context=t}uY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:__(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:__(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ije(t){return new uY(t)}function fY(t){this._context=t}fY.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:__(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oje(t){return new fY(t)}function dY(t){this._context=t}dY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:__(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sje(t){return new dY(t)}function hY(t){this._context=t}hY.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function aje(t){return new hY(t)}function fB(t){return t<0?-1:1}function dB(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(fB(o)+fB(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function hB(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function qA(t,e,r){var n=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-n)/3;t._context.bezierCurveTo(n+a,i+a*e,o-a,s-a*r,o,s)}function w_(t){this._context=t}w_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qA(this,this._t0,hB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qA(this,hB(this,r=dB(this,t,e)),r);break;default:qA(this,this._t0,r=dB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function pY(t){this._context=new mY(t)}(pY.prototype=Object.create(w_.prototype)).point=function(t,e){w_.prototype.point.call(this,e,t)};function mY(t){this._context=t}mY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}};function lje(t){return new w_(t)}function cje(t){return new pY(t)}function yY(t){this._context=t}yY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=pB(t),i=pB(e),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function pB(t){var e,r=t.length-1,n,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function uje(t){return new yY(t)}function mS(t,e){this._context=t,this._t=e}mS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function fje(t){return new mS(t,.5)}function dje(t){return new mS(t,0)}function hje(t){return new mS(t,1)}function xd(t,e){if((s=t.length)>1)for(var r=1,n,i,o=t[e[0]],s,a=o.length;r<s;++r)for(i=o,o=t[e[r]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function uI(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function pje(t,e){return t[e]}function mje(t){const e=[];return e.key=t,e}function yje(){var t=Et([]),e=uI,r=xd,n=pje;function i(o){var s=Array.from(t.apply(this,arguments),mje),a,l=s.length,c=-1,f;for(const d of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+n(d,s[a].key,c,o)]).data=d;for(a=0,f=NR(e(s));a<l;++a)s[f[a]].index=a;return r(s,f),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Et(Array.from(o)),i):t},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:Et(+o),i):n},i.order=function(o){return arguments.length?(e=o==null?uI:typeof o=="function"?o:Et(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(r=o??xd,i):r},i}function gje(t,e){if((n=t.length)>0){for(var r,n,i=0,o=t[0].length,s;i<o;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}xd(t,e)}}function vje(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,o=n.length;r<o;++r){for(var s=0,a=0;s<i;++s)a+=t[s][r][1]||0;n[r][1]+=n[r][0]=-a/2}xd(t,e)}}function bje(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,o,s;n<o;++n){for(var a=0,l=0,c=0;a<s;++a){for(var f=t[e[a]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,m=0;m<a;++m){var y=t[e[m]],g=y[n][1]||0,b=y[n-1][1]||0;p+=g-b}l+=d,c+=p*d}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,xd(t,e)}}function sy(t){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(t)}var xje=["type","size","sizeType"];function fI(){return fI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fI.apply(this,arguments)}function mB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mB(Object(r),!0).forEach(function(n){_je(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _je(t,e,r){return e=wje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wje(t){var e=Sje(t,"string");return sy(e)==="symbol"?e:String(e)}function Sje(t,e){if(sy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eje(t,e){if(t==null)return{};var r=Aje(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Aje(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var gY={symbolCircle:kR,symbolCross:qOe,symbolDiamond:KOe,symbolSquare:QOe,symbolStar:ZOe,symbolTriangle:eje,symbolWye:rje},Cje=Math.PI/180,Pje=function(e){var r="symbol".concat(dS(e));return gY[r]||kR},Tje=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Cje;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ije=function(e,r){gY["symbol".concat(dS(e))]=r},OR=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=Eje(e,xje),c=yB(yB({},l),{},{type:n,size:o,sizeType:a}),f=function(){var g=Pje(n),b=nje().type(g).size(Tje(o,a,n));return b()},d=c.className,h=c.cx,p=c.cy,m=Ke(c,!0);return h===+h&&p===+p&&o===+o?O.createElement("path",fI({},m,{className:dt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};OR.registerSymbol=Ije;function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dI.apply(this,arguments)}function gB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nje(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(r),!0).forEach(function(n){ay(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vY(n.key),n)}}function Oje(t,e,r){return e&&vB(t.prototype,e),r&&vB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function jje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hI(t,e)}function hI(t,e){return hI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hI(t,e)}function Rje(t){var e=Mje();return function(){var n=S_(t),i;if(e){var o=S_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return $je(this,i)}}function $je(t,e){if(e&&(_d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dje(t)}function Dje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S_(t){return S_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S_(t)}function ay(t,e,r){return e=vY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vY(t){var e=Fje(t,"string");return _d(e)==="symbol"?e:String(e)}function Fje(t,e){if(_d(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vi=32,jR=function(t){jje(r,t);var e=Rje(r);function r(){return kje(this,r),e.apply(this,arguments)}return Oje(r,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,s=vi/2,a=vi/6,l=vi/3,c=i.inactive?o:i.color;if(i.type==="plainline")return O.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:vi,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(vi,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return O.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(vi/8,"h").concat(vi,"v").concat(vi*3/4,"h").concat(-vi,"z"),className:"recharts-legend-icon"});if(O.isValidElement(i.legendIcon)){var f=Nje({},i);return delete f.legendIcon,O.cloneElement(i.legendIcon,f)}return O.createElement(OR,{fill:c,cx:s,cy:s,size:vi,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,s=o.payload,a=o.iconSize,l=o.layout,c=o.formatter,f=o.inactiveColor,d={x:0,y:0,width:vi,height:vi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,y){var g,b=m.formatter||c,v=dt((g={"recharts-legend-item":!0},ay(g,"legend-item-".concat(y),!0),ay(g,"inactive",m.inactive),g));if(m.type==="none")return null;var x=Fe(m.value)?null:m.value;gc(!Fe(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=m.inactive?f:m.color;return O.createElement("li",dI({className:v,style:h,key:"legend-item-".concat(y)},g_(i.props,m,y)),O.createElement(nI,{width:a,height:a,viewBox:d,style:p},i.renderIcon(m)),O.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},b?b(x,m,y):x))})}},{key:"render",value:function(){var i=this.props,o=i.payload,s=i.layout,a=i.align;if(!o||!o.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),r}(E.PureComponent);ay(jR,"displayName","Legend");ay(jR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Lje=cS;function Bje(){this.__data__=new Lje,this.size=0}var Uje=Bje;function Vje(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Wje=Vje;function zje(t){return this.__data__.get(t)}var Gje=zje;function qje(t){return this.__data__.has(t)}var Hje=qje,Kje=cS,Qje=wR,Yje=SR,Xje=200;function Jje(t,e){var r=this.__data__;if(r instanceof Kje){var n=r.__data__;if(!Qje||n.length<Xje-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Yje(n)}return r.set(t,e),this.size=r.size,this}var Zje=Jje,eRe=cS,tRe=Uje,rRe=Wje,nRe=Gje,iRe=Hje,oRe=Zje;function ch(t){var e=this.__data__=new eRe(t);this.size=e.size}ch.prototype.clear=tRe;ch.prototype.delete=rRe;ch.prototype.get=nRe;ch.prototype.has=iRe;ch.prototype.set=oRe;var bY=ch,sRe="__lodash_hash_undefined__";function aRe(t){return this.__data__.set(t,sRe),this}var lRe=aRe;function cRe(t){return this.__data__.has(t)}var uRe=cRe,fRe=SR,dRe=lRe,hRe=uRe;function E_(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new fRe;++e<r;)this.add(t[e])}E_.prototype.add=E_.prototype.push=dRe;E_.prototype.has=hRe;var xY=E_;function pRe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var _Y=pRe;function mRe(t,e){return t.has(e)}var wY=mRe,yRe=xY,gRe=_Y,vRe=wY,bRe=1,xRe=2;function _Re(t,e,r,n,i,o){var s=r&bRe,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),f=o.get(e);if(c&&f)return c==e&&f==t;var d=-1,h=!0,p=r&xRe?new yRe:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var m=t[d],y=e[d];if(n)var g=s?n(y,m,d,e,t,o):n(m,y,d,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!gRe(e,function(b,v){if(!vRe(p,v)&&(m===b||i(m,b,r,n,o)))return p.push(v)})){h=!1;break}}else if(!(m===y||i(m,y,r,n,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var SY=_Re,wRe=ns,SRe=wRe.Uint8Array,ERe=SRe;function ARe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var CRe=ARe;function PRe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var RR=PRe,bB=Yg,xB=ERe,TRe=_R,IRe=SY,NRe=CRe,kRe=RR,ORe=1,jRe=2,RRe="[object Boolean]",$Re="[object Date]",DRe="[object Error]",MRe="[object Map]",FRe="[object Number]",LRe="[object RegExp]",BRe="[object Set]",URe="[object String]",VRe="[object Symbol]",WRe="[object ArrayBuffer]",zRe="[object DataView]",_B=bB?bB.prototype:void 0,HA=_B?_B.valueOf:void 0;function GRe(t,e,r,n,i,o,s){switch(r){case zRe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case WRe:return!(t.byteLength!=e.byteLength||!o(new xB(t),new xB(e)));case RRe:case $Re:case FRe:return TRe(+t,+e);case DRe:return t.name==e.name&&t.message==e.message;case LRe:case URe:return t==e+"";case MRe:var a=NRe;case BRe:var l=n&ORe;if(a||(a=kRe),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=jRe,s.set(t,e);var f=IRe(a(t),a(e),n,i,o,s);return s.delete(t),f;case VRe:if(HA)return HA.call(t)==HA.call(e)}return!1}var qRe=GRe;function HRe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var EY=HRe,KRe=EY,QRe=zn;function YRe(t,e,r){var n=e(t);return QRe(t)?n:KRe(n,r(t))}var XRe=YRe;function JRe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var ZRe=JRe;function e2e(){return[]}var t2e=e2e,r2e=ZRe,n2e=t2e,i2e=Object.prototype,o2e=i2e.propertyIsEnumerable,wB=Object.getOwnPropertySymbols,s2e=wB?function(t){return t==null?[]:(t=Object(t),r2e(wB(t),function(e){return o2e.call(t,e)}))}:n2e,a2e=s2e;function l2e(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var c2e=l2e,u2e=Fs,f2e=Ls,d2e="[object Arguments]";function h2e(t){return f2e(t)&&u2e(t)==d2e}var p2e=h2e,SB=p2e,m2e=Ls,AY=Object.prototype,y2e=AY.hasOwnProperty,g2e=AY.propertyIsEnumerable,v2e=SB(function(){return arguments}())?SB:function(t){return m2e(t)&&y2e.call(t,"callee")&&!g2e.call(t,"callee")},$R=v2e,A_={exports:{}};function b2e(){return!1}var x2e=b2e;A_.exports;(function(t,e){var r=ns,n=x2e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?r.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;t.exports=c})(A_,A_.exports);var CY=A_.exports,_2e=9007199254740991,w2e=/^(?:0|[1-9]\d*)$/;function S2e(t,e){var r=typeof t;return e=e??_2e,!!e&&(r=="number"||r!="symbol"&&w2e.test(t))&&t>-1&&t%1==0&&t<e}var DR=S2e,E2e=9007199254740991;function A2e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=E2e}var MR=A2e,C2e=Fs,P2e=MR,T2e=Ls,I2e="[object Arguments]",N2e="[object Array]",k2e="[object Boolean]",O2e="[object Date]",j2e="[object Error]",R2e="[object Function]",$2e="[object Map]",D2e="[object Number]",M2e="[object Object]",F2e="[object RegExp]",L2e="[object Set]",B2e="[object String]",U2e="[object WeakMap]",V2e="[object ArrayBuffer]",W2e="[object DataView]",z2e="[object Float32Array]",G2e="[object Float64Array]",q2e="[object Int8Array]",H2e="[object Int16Array]",K2e="[object Int32Array]",Q2e="[object Uint8Array]",Y2e="[object Uint8ClampedArray]",X2e="[object Uint16Array]",J2e="[object Uint32Array]",Nt={};Nt[z2e]=Nt[G2e]=Nt[q2e]=Nt[H2e]=Nt[K2e]=Nt[Q2e]=Nt[Y2e]=Nt[X2e]=Nt[J2e]=!0;Nt[I2e]=Nt[N2e]=Nt[V2e]=Nt[k2e]=Nt[W2e]=Nt[O2e]=Nt[j2e]=Nt[R2e]=Nt[$2e]=Nt[D2e]=Nt[M2e]=Nt[F2e]=Nt[L2e]=Nt[B2e]=Nt[U2e]=!1;function Z2e(t){return T2e(t)&&P2e(t.length)&&!!Nt[C2e(t)]}var e$e=Z2e;function t$e(t){return function(e){return t(e)}}var PY=t$e,C_={exports:{}};C_.exports;(function(t,e){var r=FQ,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,s=o&&r.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(C_,C_.exports);var r$e=C_.exports,n$e=e$e,i$e=PY,EB=r$e,AB=EB&&EB.isTypedArray,o$e=AB?i$e(AB):n$e,TY=o$e,s$e=c2e,a$e=$R,l$e=zn,c$e=CY,u$e=DR,f$e=TY,d$e=Object.prototype,h$e=d$e.hasOwnProperty;function p$e(t,e){var r=l$e(t),n=!r&&a$e(t),i=!r&&!n&&c$e(t),o=!r&&!n&&!i&&f$e(t),s=r||n||i||o,a=s?s$e(t.length,String):[],l=a.length;for(var c in t)(e||h$e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||u$e(c,l)))&&a.push(c);return a}var m$e=p$e,y$e=Object.prototype;function g$e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||y$e;return t===r}var v$e=g$e;function b$e(t,e){return function(r){return t(e(r))}}var IY=b$e,x$e=IY,_$e=x$e(Object.keys,Object),w$e=_$e,S$e=v$e,E$e=w$e,A$e=Object.prototype,C$e=A$e.hasOwnProperty;function P$e(t){if(!S$e(t))return E$e(t);var e=[];for(var r in Object(t))C$e.call(t,r)&&r!="constructor"&&e.push(r);return e}var T$e=P$e,I$e=xR,N$e=MR;function k$e(t){return t!=null&&N$e(t.length)&&!I$e(t)}var ev=k$e,O$e=m$e,j$e=T$e,R$e=ev;function $$e(t){return R$e(t)?O$e(t):j$e(t)}var yS=$$e,D$e=XRe,M$e=a2e,F$e=yS;function L$e(t){return D$e(t,F$e,M$e)}var B$e=L$e,CB=B$e,U$e=1,V$e=Object.prototype,W$e=V$e.hasOwnProperty;function z$e(t,e,r,n,i,o){var s=r&U$e,a=CB(t),l=a.length,c=CB(e),f=c.length;if(l!=f&&!s)return!1;for(var d=l;d--;){var h=a[d];if(!(s?h in e:W$e.call(e,h)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=s;++d<l;){h=a[d];var b=t[h],v=e[h];if(n)var x=s?n(v,b,h,e,t,o):n(b,v,h,t,e,o);if(!(x===void 0?b===v||i(b,v,r,n,o):x)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var S=t.constructor,_=e.constructor;S!=_&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return o.delete(t),o.delete(e),y}var G$e=z$e,q$e=Hc,H$e=ns,K$e=q$e(H$e,"DataView"),Q$e=K$e,Y$e=Hc,X$e=ns,J$e=Y$e(X$e,"Promise"),Z$e=J$e,eDe=Hc,tDe=ns,rDe=eDe(tDe,"Set"),NY=rDe,nDe=Hc,iDe=ns,oDe=nDe(iDe,"WeakMap"),sDe=oDe,pI=Q$e,mI=wR,yI=Z$e,gI=NY,vI=sDe,kY=Fs,uh=BQ,PB="[object Map]",aDe="[object Object]",TB="[object Promise]",IB="[object Set]",NB="[object WeakMap]",kB="[object DataView]",lDe=uh(pI),cDe=uh(mI),uDe=uh(yI),fDe=uh(gI),dDe=uh(vI),kl=kY;(pI&&kl(new pI(new ArrayBuffer(1)))!=kB||mI&&kl(new mI)!=PB||yI&&kl(yI.resolve())!=TB||gI&&kl(new gI)!=IB||vI&&kl(new vI)!=NB)&&(kl=function(t){var e=kY(t),r=e==aDe?t.constructor:void 0,n=r?uh(r):"";if(n)switch(n){case lDe:return kB;case cDe:return PB;case uDe:return TB;case fDe:return IB;case dDe:return NB}return e});var hDe=kl,KA=bY,pDe=SY,mDe=qRe,yDe=G$e,OB=hDe,jB=zn,RB=CY,gDe=TY,vDe=1,$B="[object Arguments]",DB="[object Array]",a0="[object Object]",bDe=Object.prototype,MB=bDe.hasOwnProperty;function xDe(t,e,r,n,i,o){var s=jB(t),a=jB(e),l=s?DB:OB(t),c=a?DB:OB(e);l=l==$B?a0:l,c=c==$B?a0:c;var f=l==a0,d=c==a0,h=l==c;if(h&&RB(t)){if(!RB(e))return!1;s=!0,f=!1}if(h&&!f)return o||(o=new KA),s||gDe(t)?pDe(t,e,r,n,i,o):mDe(t,e,l,r,n,i,o);if(!(r&vDe)){var p=f&&MB.call(t,"__wrapped__"),m=d&&MB.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,g=m?e.value():e;return o||(o=new KA),i(y,g,r,n,o)}}return h?(o||(o=new KA),yDe(t,e,r,n,i,o)):!1}var _De=xDe,wDe=_De,FB=Ls;function OY(t,e,r,n,i){return t===e?!0:t==null||e==null||!FB(t)&&!FB(e)?t!==t&&e!==e:wDe(t,e,r,n,OY,i)}var FR=OY,SDe=bY,EDe=FR,ADe=1,CDe=2;function PDe(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=r[i];var l=a[0],c=t[l],f=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new SDe;if(n)var h=n(c,f,l,t,e,d);if(!(h===void 0?EDe(f,c,ADe|CDe,n,d):h))return!1}}return!0}var TDe=PDe,IDe=cl;function NDe(t){return t===t&&!IDe(t)}var jY=NDe,kDe=jY,ODe=yS;function jDe(t){for(var e=ODe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,kDe(i)]}return e}var RDe=jDe;function $De(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var RY=$De,DDe=TDe,MDe=RDe,FDe=RY;function LDe(t){var e=MDe(t);return e.length==1&&e[0][2]?FDe(e[0][0],e[0][1]):function(r){return r===t||DDe(r,t,e)}}var BDe=LDe;function UDe(t,e){return t!=null&&e in Object(t)}var VDe=UDe,WDe=zQ,zDe=$R,GDe=zn,qDe=DR,HDe=MR,KDe=fS;function QDe(t,e,r){e=WDe(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=KDe(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&HDe(i)&&qDe(s,i)&&(GDe(t)||zDe(t)))}var YDe=QDe,XDe=VDe,JDe=YDe;function ZDe(t,e){return t!=null&&JDe(t,e,XDe)}var eMe=ZDe,tMe=FR,rMe=GQ,nMe=eMe,iMe=bR,oMe=jY,sMe=RY,aMe=fS,lMe=1,cMe=2;function uMe(t,e){return iMe(t)&&oMe(e)?sMe(aMe(t),e):function(r){var n=rMe(r,t);return n===void 0&&n===e?nMe(r,t):tMe(e,n,lMe|cMe)}}var fMe=uMe;function dMe(t){return t}var fh=dMe;function hMe(t){return function(e){return e==null?void 0:e[t]}}var pMe=hMe,mMe=CR;function yMe(t){return function(e){return mMe(e,t)}}var gMe=yMe,vMe=pMe,bMe=gMe,xMe=bR,_Me=fS;function wMe(t){return xMe(t)?vMe(_Me(t)):bMe(t)}var SMe=wMe,EMe=BDe,AMe=fMe,CMe=fh,PMe=zn,TMe=SMe;function IMe(t){return typeof t=="function"?t:t==null?CMe:typeof t=="object"?PMe(t)?AMe(t[0],t[1]):EMe(t):TMe(t)}var ul=IMe;function NMe(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var $Y=NMe;function kMe(t){return t!==t}var OMe=kMe;function jMe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var RMe=jMe,$Me=$Y,DMe=OMe,MMe=RMe;function FMe(t,e,r){return e===e?MMe(t,e,r):$Me(t,DMe,r)}var LMe=FMe,BMe=LMe;function UMe(t,e){var r=t==null?0:t.length;return!!r&&BMe(t,e,0)>-1}var VMe=UMe;function WMe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var zMe=WMe;function GMe(){}var qMe=GMe,QA=NY,HMe=qMe,KMe=RR,QMe=1/0,YMe=QA&&1/KMe(new QA([,-0]))[1]==QMe?function(t){return new QA(t)}:HMe,XMe=YMe,JMe=xY,ZMe=VMe,eFe=zMe,tFe=wY,rFe=XMe,nFe=RR,iFe=200;function oFe(t,e,r){var n=-1,i=ZMe,o=t.length,s=!0,a=[],l=a;if(r)s=!1,i=eFe;else if(o>=iFe){var c=e?null:rFe(t);if(c)return nFe(c);s=!1,i=tFe,l=new JMe}else l=e?[]:a;e:for(;++n<o;){var f=t[n],d=e?e(f):f;if(f=r||f!==0?f:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(f)}else i(l,d,r)||(l!==a&&l.push(d),a.push(f))}return a}var sFe=oFe,aFe=ul,lFe=sFe;function cFe(t,e){return t&&t.length?lFe(t,aFe(e)):[]}var uFe=cFe;const LB=ct(uFe);function DY(t,e,r){return e===!0?LB(t,r):Fe(e)?LB(t,e):t}function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}var fFe=["ref"];function BB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(r),!0).forEach(function(n){gS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FY(n.key),n)}}function hFe(t,e,r){return e&&UB(t.prototype,e),r&&UB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bI(t,e)}function mFe(t){var e=gFe();return function(){var n=P_(t),i;if(e){var o=P_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yFe(this,i)}}function yFe(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MY(t)}function MY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P_(t){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P_(t)}function gS(t,e,r){return e=FY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FY(t){var e=vFe(t,"string");return wd(e)==="symbol"?e:String(e)}function vFe(t,e){if(wd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bFe(t,e){if(t==null)return{};var r=xFe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xFe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function _Fe(t){return t.value}function wFe(t,e){if(O.isValidElement(t))return O.cloneElement(t,e);if(typeof t=="function")return O.createElement(t,e);e.ref;var r=bFe(e,fFe);return O.createElement(jR,r)}var VB=1,ly=function(t){pFe(r,t);var e=mFe(r);function r(){var n;dFe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),gS(MY(n),"lastBoundingBox",{width:-1,height:-1}),n}return hFe(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.lastBoundingBox.width)>VB||Math.abs(o.height-this.lastBoundingBox.height)>VB)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o))}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,s=o.layout,a=o.align,l=o.verticalAlign,c=o.margin,f=o.chartWidth,d=o.chartHeight,h,p;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((f||0)-m.width)/2}}else h=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();p={top:((d||0)-y.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return yl(yl({},h),p)}},{key:"render",value:function(){var i=this,o=this.props,s=o.content,a=o.width,l=o.height,c=o.wrapperStyle,f=o.payloadUniqBy,d=o.payload,h=yl(yl({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return O.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){i.wrapperNode=m}},wFe(s,yl(yl({},this.props),{},{payload:DY(d,f,_Fe)})))}}],[{key:"getWithHeight",value:function(i,o){var s=i.props.layout;return s==="vertical"&&re(i.props.height)?{height:i.props.height}:s==="horizontal"?{width:i.props.width||o}:null}}]),r}(E.PureComponent);gS(ly,"displayName","Legend");gS(ly,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var WB=Yg,SFe=$R,EFe=zn,zB=WB?WB.isConcatSpreadable:void 0;function AFe(t){return EFe(t)||SFe(t)||!!(zB&&t&&t[zB])}var CFe=AFe,PFe=EY,TFe=CFe;function LY(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=TFe),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?LY(a,e-1,r,n,i):PFe(i,a):n||(i[i.length]=a)}return i}var BY=LY;function IFe(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++i];if(r(o[l],l,o)===!1)break}return e}}var NFe=IFe,kFe=NFe,OFe=kFe(),jFe=OFe,RFe=jFe,$Fe=yS;function DFe(t,e){return t&&RFe(t,e,$Fe)}var UY=DFe,MFe=ev;function FFe(t,e){return function(r,n){if(r==null)return r;if(!MFe(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var LFe=FFe,BFe=UY,UFe=LFe,VFe=UFe(BFe),LR=VFe,WFe=LR,zFe=ev;function GFe(t,e){var r=-1,n=zFe(t)?Array(t.length):[];return WFe(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var VY=GFe;function qFe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var HFe=qFe,GB=ih;function KFe(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=GB(t),s=e!==void 0,a=e===null,l=e===e,c=GB(e);if(!a&&!c&&!o&&t>e||o&&s&&l&&!a&&!c||n&&s&&l||!r&&l||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!l)return-1}return 0}var QFe=KFe,YFe=QFe;function XFe(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;++n<s;){var l=YFe(i[n],o[n]);if(l){if(n>=a)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return t.index-e.index}var JFe=XFe,YA=AR,ZFe=CR,eLe=ul,tLe=VY,rLe=HFe,nLe=PY,iLe=JFe,oLe=fh,sLe=zn;function aLe(t,e,r){e.length?e=YA(e,function(o){return sLe(o)?function(s){return ZFe(s,o.length===1?o[0]:o)}:o}):e=[oLe];var n=-1;e=YA(e,nLe(eLe));var i=tLe(t,function(o,s,a){var l=YA(e,function(c){return c(o)});return{criteria:l,index:++n,value:o}});return rLe(i,function(o,s){return iLe(o,s,r)})}var lLe=aLe;function cLe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var uLe=cLe,fLe=uLe,qB=Math.max;function dLe(t,e,r){return e=qB(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=qB(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),fLe(t,this,a)}}var hLe=dLe;function pLe(t){return function(){return t}}var mLe=pLe,yLe=Hc,gLe=function(){try{var t=yLe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),WY=gLe,vLe=mLe,HB=WY,bLe=fh,xLe=HB?function(t,e){return HB(t,"toString",{configurable:!0,enumerable:!1,value:vLe(e),writable:!0})}:bLe,_Le=xLe,wLe=800,SLe=16,ELe=Date.now;function ALe(t){var e=0,r=0;return function(){var n=ELe(),i=SLe-(n-r);if(r=n,i>0){if(++e>=wLe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var CLe=ALe,PLe=_Le,TLe=CLe,ILe=TLe(PLe),NLe=ILe,kLe=fh,OLe=hLe,jLe=NLe;function RLe(t,e){return jLe(OLe(t,e,kLe),t+"")}var $Le=RLe,DLe=_R,MLe=ev,FLe=DR,LLe=cl;function BLe(t,e,r){if(!LLe(r))return!1;var n=typeof e;return(n=="number"?MLe(r)&&FLe(e,r.length):n=="string"&&e in r)?DLe(r[e],t):!1}var vS=BLe,ULe=BY,VLe=lLe,WLe=$Le,KB=vS,zLe=WLe(function(t,e){if(t==null)return[];var r=e.length;return r>1&&KB(t,e[0],e[1])?e=[]:r>2&&KB(e[0],e[1],e[2])&&(e=[e[0]]),VLe(t,ULe(e,1),[])}),GLe=zLe;const BR=ct(GLe);function cy(t){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(t)}function qLe(t,e){return YLe(t)||QLe(t,e)||KLe(t,e)||HLe()}function HLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KLe(t,e){if(t){if(typeof t=="string")return QB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QB(t,e)}}function QB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QLe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function YLe(t){if(Array.isArray(t))return t}function YB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(r),!0).forEach(function(n){XLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XLe(t,e,r){return e=JLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JLe(t){var e=ZLe(t,"string");return cy(e)==="symbol"?e:String(e)}function ZLe(t,e){if(cy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(cy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e3e(t){return Array.isArray(t)&&hr(t[0])&&hr(t[1])?t.join(" ~ "):t}var t3e=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,f=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,y=e.label,g=e.labelFormatter,b=function(){if(f&&f.length){var T={padding:0,margin:0},P=(h?BR(f,h):f).map(function(I,k){if(I.type==="none")return null;var N=XA({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},a),j=I.formatter||d||e3e,L=I.value,V=I.name,F=L,M=V;if(j&&F!=null&&M!=null){var B=j(L,V,I,k,f);if(Array.isArray(B)){var z=qLe(B,2);F=z[0],M=z[1]}else F=B}return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:N},hr(M)?O.createElement("span",{className:"recharts-tooltip-item-name"},M):null,hr(M)?O.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,O.createElement("span",{className:"recharts-tooltip-item-value"},F),O.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},v=XA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=XA({margin:0},c),S=!tt(y),_=S?y:"",w=dt("recharts-default-tooltip",p),A=dt("recharts-tooltip-label",m);return S&&g&&f!==void 0&&f!==null&&(_=g(y,f)),O.createElement("div",{className:w,style:v},O.createElement("p",{className:A,style:x},O.isValidElement(_)?_:"".concat(_)),b())},zY={exports:{}},r3e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",n3e=r3e,i3e=n3e;function GY(){}function qY(){}qY.resetWarningCache=GY;var o3e=function(){function t(n,i,o,s,a,l){if(l!==i3e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qY,resetWarningCache:GY};return r.PropTypes=r,r};zY.exports=o3e();var s3e=zY.exports;const Ie=ct(s3e);var a3e=Object.getOwnPropertyNames,l3e=Object.getOwnPropertySymbols,c3e=Object.prototype.hasOwnProperty;function XB(t,e){return function(n,i,o){return t(n,i,o)&&e(n,i,o)}}function l0(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var o=i.cache,s=o.get(r),a=o.get(n);if(s&&a)return s===n&&a===r;o.set(r,n),o.set(n,r);var l=t(r,n,i);return o.delete(r),o.delete(n),l}}function JB(t){return a3e(t).concat(l3e(t))}var HY=Object.hasOwn||function(t,e){return c3e.call(t,e)};function dh(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var KY="_owner",ZB=Object.getOwnPropertyDescriptor,e4=Object.keys;function u3e(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function f3e(t,e){return dh(t.getTime(),e.getTime())}function t4(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),c=!1,f=0;(a=l.next())&&!a.done;){var d=s.value,h=d[0],p=d[1],m=a.value,y=m[0],g=m[1];!c&&!n[f]&&(c=r.equals(h,y,o,f,t,e,r)&&r.equals(p,g,h,y,t,e,r))&&(n[f]=!0),f++}if(!c)return!1;o++}return!0}function d3e(t,e,r){var n=e4(t),i=n.length;if(e4(e).length!==i)return!1;for(var o;i-- >0;)if(o=n[i],o===KY&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!HY(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Gh(t,e,r){var n=JB(t),i=n.length;if(JB(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=n[i],o===KY&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!HY(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(s=ZB(t,o),a=ZB(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function h3e(t,e){return dh(t.valueOf(),e.valueOf())}function p3e(t,e){return t.source===e.source&&t.flags===e.flags}function r4(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,c=0;(s=a.next())&&!s.done;)!l&&!n[c]&&(l=r.equals(o.value,s.value,o.value,s.value,t,e,r))&&(n[c]=!0),c++;if(!l)return!1}return!0}function m3e(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var y3e="[object Arguments]",g3e="[object Boolean]",v3e="[object Date]",b3e="[object Map]",x3e="[object Number]",_3e="[object Object]",w3e="[object RegExp]",S3e="[object Set]",E3e="[object String]",A3e=Array.isArray,n4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,i4=Object.assign,C3e=Object.prototype.toString.call.bind(Object.prototype.toString);function P3e(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(f,d,h){if(f===d)return!0;if(f==null||d==null||typeof f!="object"||typeof d!="object")return f!==f&&d!==d;var p=f.constructor;if(p!==d.constructor)return!1;if(p===Object)return i(f,d,h);if(A3e(f))return e(f,d,h);if(n4!=null&&n4(f))return l(f,d,h);if(p===Date)return r(f,d,h);if(p===RegExp)return s(f,d,h);if(p===Map)return n(f,d,h);if(p===Set)return a(f,d,h);var m=C3e(f);return m===v3e?r(f,d,h):m===w3e?s(f,d,h):m===b3e?n(f,d,h):m===S3e?a(f,d,h):m===_3e?typeof f.then!="function"&&typeof d.then!="function"&&i(f,d,h):m===y3e?i(f,d,h):m===g3e||m===x3e||m===E3e?o(f,d,h):!1}}function T3e(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Gh:u3e,areDatesEqual:f3e,areMapsEqual:n?XB(t4,Gh):t4,areObjectsEqual:n?Gh:d3e,arePrimitiveWrappersEqual:h3e,areRegExpsEqual:p3e,areSetsEqual:n?XB(r4,Gh):r4,areTypedArraysEqual:n?Gh:m3e};if(r&&(i=i4({},i,r(i))),e){var o=l0(i.areArraysEqual),s=l0(i.areMapsEqual),a=l0(i.areObjectsEqual),l=l0(i.areSetsEqual);i=i4({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function I3e(t){return function(e,r,n,i,o,s,a){return t(e,r,a)}}function N3e(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,o=t.strict;if(n)return function(l,c){var f=n(),d=f.cache,h=d===void 0?e?new WeakMap:void 0:d,p=f.meta;return r(l,c,{cache:h,equals:i,meta:p,strict:o})};if(e)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return r(l,c,s)}}var k3e=fl();fl({strict:!0});fl({circular:!0});fl({circular:!0,strict:!0});fl({createInternalComparator:function(){return dh}});fl({strict:!0,createInternalComparator:function(){return dh}});fl({circular:!0,createInternalComparator:function(){return dh}});fl({circular:!0,createInternalComparator:function(){return dh},strict:!0});function fl(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=T3e(t),l=P3e(a),c=n?n(l):I3e(l);return N3e({circular:r,comparator:l,createState:i,equals:c,strict:s})}function O3e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function o4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>e?(t(o),r=-1):O3e(i)};requestAnimationFrame(n)}function xI(t){"@babel/helpers - typeof";return xI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xI(t)}function j3e(t){return M3e(t)||D3e(t)||$3e(t)||R3e()}function R3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $3e(t,e){if(t){if(typeof t=="string")return s4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s4(t,e)}}function s4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function M3e(t){if(Array.isArray(t))return t}function F3e(){var t={},e=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,a=j3e(s),l=a[0],c=a.slice(1);if(typeof l=="number"){o4(i.bind(null,c),l);return}i(l),o4(i.bind(null,c));return}xI(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function uy(t){"@babel/helpers - typeof";return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uy(t)}function a4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(r),!0).forEach(function(n){T_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T_(t,e,r){return e=L3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L3e(t){var e=B3e(t,"string");return uy(e)==="symbol"?e:String(e)}function B3e(t,e){if(uy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(uy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U3e=["Webkit","Moz","O","ms"],V3e=["-webkit-","-moz-","-o-","-ms-"],W3e=["transform","transformOrigin","transition"],z3e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},G3e=function(e){return e},q3e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},H3e=function(e,r){if(W3e.indexOf(e)===-1)return T_({},e,Number.isNaN(r)?0:r);var n=e==="transition",i=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=r;return U3e.reduce(function(s,a,l){return n&&(o=r.replace(/(transform|transform-origin)/gim,"".concat(V3e[l],"$1"))),Sd(Sd({},s),{},T_({},a+i,o))},{})},em=function(e,r){return Object.keys(r).reduce(function(n,i){return Sd(Sd({},n),{},T_({},i,e(i,r[i])))},{})},UR=function(e){return Object.keys(e).reduce(function(r,n){return Sd(Sd({},r),H3e(n,r[n]))},e)},l4=function(e,r,n){return e.map(function(i){return"".concat(q3e(i)," ").concat(r,"ms ").concat(n)}).join(",")};function K3e(t,e){return X3e(t)||Y3e(t,e)||QY(t,e)||Q3e()}function Q3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function X3e(t){if(Array.isArray(t))return t}function J3e(t){return tBe(t)||eBe(t)||QY(t)||Z3e()}function Z3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QY(t,e){if(t){if(typeof t=="string")return _I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _I(t,e)}}function eBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tBe(t){if(Array.isArray(t))return _I(t)}function _I(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var I_=1e-4,YY=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},XY=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},c4=function(e,r){return function(n){var i=YY(e,r);return XY(i,n)}},rBe=function(e,r){return function(n){var i=YY(e,r),o=[].concat(J3e(i.map(function(s,a){return s*a}).slice(1)),[0]);return XY(o,n)}},u4=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],o=r[1],s=r[2],a=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),f=K3e(c,4);i=f[0],o=f[1],s=f[2],a=f[3]}}}var d=c4(i,s),h=c4(o,a),p=rBe(i,s),m=function(b){return b>1?1:b<0?0:b},y=function(b){for(var v=b>1?1:b,x=v,S=0;S<8;++S){var _=d(x)-v,w=p(x);if(Math.abs(_-v)<I_||w<I_)return h(x);x=m(x-_/w)}return h(x)};return y.isStepper=!1,y},nBe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(f,d,h){var p=-(f-d)*n,m=h*o,y=h+(p-m)*a/1e3,g=h*a/1e3+f;return Math.abs(g-d)<I_&&Math.abs(y)<I_?[d,0]:[g,y]};return l.isStepper=!0,l.dt=a,l},iBe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return u4(i);case"spring":return nBe();default:if(i.split("(")[0]==="cubic-bezier")return u4(i)}return typeof i=="function"?i:null};function fy(t){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(t)}function f4(t){return aBe(t)||sBe(t)||JY(t)||oBe()}function oBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aBe(t){if(Array.isArray(t))return SI(t)}function d4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(r),!0).forEach(function(n){wI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wI(t,e,r){return e=lBe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lBe(t){var e=cBe(t,"string");return fy(e)==="symbol"?e:String(e)}function cBe(t,e){if(fy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uBe(t,e){return hBe(t)||dBe(t,e)||JY(t,e)||fBe()}function fBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JY(t,e){if(t){if(typeof t=="string")return SI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SI(t,e)}}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dBe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function hBe(t){if(Array.isArray(t))return t}var N_=function(e,r,n){return e+(r-e)*n},EI=function(e){var r=e.from,n=e.to;return r!==n},pBe=function t(e,r,n){var i=em(function(o,s){if(EI(s)){var a=e(s.from,s.to,s.velocity),l=uBe(a,2),c=l[0],f=l[1];return Br(Br({},s),{},{from:c,velocity:f})}return s},r);return n<1?em(function(o,s){return EI(s)?Br(Br({},s),{},{velocity:N_(s.velocity,i[o].velocity,n),from:N_(s.from,i[o].from,n)}):s},r):t(e,i,n-1)};const mBe=function(t,e,r,n,i){var o=z3e(t,e),s=o.reduce(function(g,b){return Br(Br({},g),{},wI({},b,[t[b],e[b]]))},{}),a=o.reduce(function(g,b){return Br(Br({},g),{},wI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,c,f,d=function(){return null},h=function(){return em(function(b,v){return v.from},a)},p=function(){return!Object.values(a).filter(EI).length},m=function(b){c||(c=b);var v=b-c,x=v/r.dt;a=pBe(r,a,x),i(Br(Br(Br({},t),e),h())),c=b,p()||(l=requestAnimationFrame(d))},y=function(b){f||(f=b);var v=(b-f)/n,x=em(function(_,w){return N_.apply(void 0,f4(w).concat([r(v)]))},s);if(i(Br(Br(Br({},t),e),x)),v<1)l=requestAnimationFrame(d);else{var S=em(function(_,w){return N_.apply(void 0,f4(w).concat([r(1)]))},s);i(Br(Br(Br({},t),e),S))}};return d=r.isStepper?m:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}var yBe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function gBe(t,e){if(t==null)return{};var r=vBe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vBe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function JA(t){return wBe(t)||_Be(t)||xBe(t)||bBe()}function bBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xBe(t,e){if(t){if(typeof t=="string")return AI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AI(t,e)}}function _Be(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wBe(t){if(Array.isArray(t))return AI(t)}function AI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h4(Object(r),!0).forEach(function(n){_p(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _p(t,e,r){return e=ZY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZY(n.key),n)}}function EBe(t,e,r){return e&&p4(t.prototype,e),r&&p4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZY(t){var e=ABe(t,"string");return Ed(e)==="symbol"?e:String(e)}function ABe(t,e){if(Ed(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ed(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CI(t,e)}function CI(t,e){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},CI(t,e)}function PBe(t){var e=TBe();return function(){var n=k_(t),i;if(e){var o=k_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return PI(this,i)}}function PI(t,e){if(e&&(Ed(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TI(t)}function TI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k_(t){return k_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k_(t)}var ks=function(t){CBe(r,t);var e=PBe(r);function r(n,i){var o;SBe(this,r),o=e.call(this,n,i);var s=o.props,a=s.isActive,l=s.attributeName,c=s.from,f=s.to,d=s.steps,h=s.children,p=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(TI(o)),o.changeStyle=o.changeStyle.bind(TI(o)),!a||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:f}),PI(o);if(d&&d.length)o.state={style:d[0].style};else if(c){if(typeof h=="function")return o.state={style:c},PI(o);o.state={style:l?_p({},l,c):c}}else o.state={style:{}};return o}return EBe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,f=o.to,d=o.from,h=this.state.style;if(a){if(!s){var p={style:l?_p({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(k3e(i.to,f)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||c?d:i.to;if(this.state&&h){var g={style:l?_p({},l,y):y};(l&&[l]!==y||!l&&h!==y)&&this.setState(g)}this.runAnimation(qi(qi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,c=i.easing,f=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=mBe(s,a,iBe(c),l,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([h,f,m,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,c=s[0],f=c.style,d=c.duration,h=d===void 0?0:d,p=function(y,g,b){if(b===0)return y;var v=g.duration,x=g.easing,S=x===void 0?"ease":x,_=g.style,w=g.properties,A=g.onAnimationEnd,C=b>0?s[b-1]:g,T=w||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(JA(y),[o.runJSAnimation.bind(o,{from:C.style,to:_,duration:v,easing:S}),v]);var P=l4(T,v,S),I=qi(qi(qi({},C.style),_),{},{transition:P});return[].concat(JA(y),[I,v,A]).filter(G3e)};return this.manager.start([l].concat(JA(s.reduce(p,[f,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=F3e());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,c=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=a?_p({},a,l):l,g=l4(Object.keys(y),s,c);m.start([f,o,qi(qi({},y),{},{transition:g}),s,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=gBe(i,yBe),c=E.Children.count(o),f=UR(this.state.style);if(typeof o=="function")return o(f);if(!a||c===0||s<=0)return o;var d=function(p){var m=p.props,y=m.style,g=y===void 0?{}:y,b=m.className,v=E.cloneElement(p,qi(qi({},l),{},{style:qi(qi({},g),f),className:b}));return v};return c===1?d(E.Children.only(o)):O.createElement("div",null,E.Children.map(o,function(h){return d(h)}))}}]),r}(E.PureComponent);ks.displayName="Animate";ks.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ks.propTypes={from:Ie.oneOfType([Ie.object,Ie.string]),to:Ie.oneOfType([Ie.object,Ie.string]),attributeName:Ie.string,duration:Ie.number,begin:Ie.number,easing:Ie.oneOfType([Ie.string,Ie.func]),steps:Ie.arrayOf(Ie.shape({duration:Ie.number.isRequired,style:Ie.object.isRequired,easing:Ie.oneOfType([Ie.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ie.func]),properties:Ie.arrayOf("string"),onAnimationEnd:Ie.func})),children:Ie.oneOfType([Ie.node,Ie.func]),isActive:Ie.bool,canBegin:Ie.bool,onAnimationEnd:Ie.func,shouldReAnimate:Ie.bool,onAnimationStart:Ie.func,onAnimationReStart:Ie.func};Number.isFinite===void 0&&(Number.isFinite=function(t){return typeof t=="number"&&isFinite(t)});Ie.object,Ie.object,Ie.object,Ie.element;Ie.object,Ie.object,Ie.object,Ie.oneOfType([Ie.array,Ie.element]),Ie.any;function dy(t){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(t)}function c0(t,e,r){return e=IBe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IBe(t){var e=NBe(t,"string");return dy(e)==="symbol"?e:String(e)}function NBe(t,e){if(dy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(dy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qh="recharts-tooltip-wrapper",kBe={visibility:"hidden"};function OBe(t){var e,r=t.coordinate,n=t.translateX,i=t.translateY;return dt(qh,(e={},c0(e,"".concat(qh,"-right"),re(n)&&r&&re(r.x)&&n>=r.x),c0(e,"".concat(qh,"-left"),re(n)&&r&&re(r.x)&&n<r.x),c0(e,"".concat(qh,"-bottom"),re(i)&&r&&re(r.y)&&i>=r.y),c0(e,"".concat(qh,"-top"),re(i)&&r&&re(r.y)&&i<r.y),e))}function m4(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&re(o[n]))return o[n];var f=r[n]-a-i,d=r[n]+i;if(e[n])return s[n]?f:d;if(s[n]){var h=f,p=l[n];return h<p?Math.max(d,l[n]):Math.max(f,l[n])}var m=d+a,y=l[n]+c;return m>y?Math.max(f,l[n]):Math.max(d,l[n])}function jBe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return UR({transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")})}function RBe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,f,d;return s.height>0&&s.width>0&&r?(f=m4({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=m4({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=jBe({translateX:f,translateY:d,useTranslate3d:a})):c=kBe,{cssProperties:c,cssClasses:OBe({translateX:f,translateY:d,coordinate:r})}}function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(t)}function y4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(r),!0).forEach(function(n){cb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eX(n.key),n)}}function DBe(t,e,r){return e&&g4(t.prototype,e),r&&g4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&II(t,e)}function II(t,e){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},II(t,e)}function FBe(t){var e=BBe();return function(){var n=O_(t),i;if(e){var o=O_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return LBe(this,i)}}function LBe(t,e){if(e&&(Ad(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lb(t)}function lb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O_(t){return O_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O_(t)}function cb(t,e,r){return e=eX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eX(t){var e=UBe(t,"string");return Ad(e)==="symbol"?e:String(e)}function UBe(t,e){if(Ad(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ad(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v4=1,VBe=function(t){MBe(r,t);var e=FBe(r);function r(){var n;$Be(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),cb(lb(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),cb(lb(n),"lastBoundingBox",{width:-1,height:-1}),cb(lb(n),"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,f,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(f=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&f!==void 0?f:0}})}}),n}return DBe(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.lastBoundingBox.width)>v4||Math.abs(i.height-this.lastBoundingBox.height)>v4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,s=o.active,a=o.allowEscapeViewBox,l=o.animationDuration,c=o.animationEasing,f=o.children,d=o.coordinate,h=o.hasPayload,p=o.isAnimationActive,m=o.offset,y=o.position,g=o.reverseDirection,b=o.useTranslate3d,v=o.viewBox,x=o.wrapperStyle,S=RBe({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:b,viewBox:v}),_=S.cssClasses,w=S.cssProperties,A=ZA(ZA(ZA({},p&&s&&UR({transition:"transform ".concat(l,"ms ").concat(c)})),w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return O.createElement("div",{tabIndex:-1,role:"dialog",className:_,style:A,ref:function(T){i.wrapperNode=T}},f)}}]),r}(E.PureComponent),WBe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ws={isSsr:WBe(),get:function(e){return ws[e]},set:function(e,r){if(typeof e=="string")ws[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){ws[i]=e[i]})}}};function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function b4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function x4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b4(Object(r),!0).forEach(function(n){VR(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tX(n.key),n)}}function GBe(t,e,r){return e&&_4(t.prototype,e),r&&_4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NI(t,e)}function NI(t,e){return NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},NI(t,e)}function HBe(t){var e=YBe();return function(){var n=j_(t),i;if(e){var o=j_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return KBe(this,i)}}function KBe(t,e){if(e&&(Cd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QBe(t)}function QBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j_(t){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j_(t)}function VR(t,e,r){return e=tX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tX(t){var e=XBe(t,"string");return Cd(e)==="symbol"?e:String(e)}function XBe(t,e){if(Cd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JBe(t){return t.dataKey}function ZBe(t,e){return O.isValidElement(t)?O.cloneElement(t,e):typeof t=="function"?O.createElement(t,e):O.createElement(t3e,e)}var zu=function(t){qBe(r,t);var e=HBe(r);function r(){return zBe(this,r),e.apply(this,arguments)}return GBe(r,[{key:"render",value:function(){var i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.content,f=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,y=i.payloadUniqBy,g=i.position,b=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,S=i.wrapperStyle,_=m??[];d&&_.length&&(_=DY(m.filter(function(A){return A.value!=null}),y,JBe));var w=_.length>0;return O.createElement(VBe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:h,active:o,coordinate:f,hasPayload:w,offset:p,position:g,reverseDirection:b,useTranslate3d:v,viewBox:x,wrapperStyle:S},ZBe(c,x4(x4({},this.props),{},{payload:_})))}}]),r}(E.PureComponent);VR(zu,"displayName","Tooltip");VR(zu,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ws.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var e4e=ns,t4e=function(){return e4e.Date.now()},r4e=t4e,n4e=/\s/;function i4e(t){for(var e=t.length;e--&&n4e.test(t.charAt(e)););return e}var o4e=i4e,s4e=o4e,a4e=/^\s+/;function l4e(t){return t&&t.slice(0,s4e(t)+1).replace(a4e,"")}var c4e=l4e,u4e=c4e,w4=cl,f4e=ih,S4=NaN,d4e=/^[-+]0x[0-9a-f]+$/i,h4e=/^0b[01]+$/i,p4e=/^0o[0-7]+$/i,m4e=parseInt;function y4e(t){if(typeof t=="number")return t;if(f4e(t))return S4;if(w4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=w4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=u4e(t);var r=h4e.test(t);return r||p4e.test(t)?m4e(t.slice(2),r?2:8):d4e.test(t)?S4:+t}var rX=y4e,g4e=cl,eC=r4e,E4=rX,v4e="Expected a function",b4e=Math.max,x4e=Math.min;function _4e(t,e,r){var n,i,o,s,a,l,c=0,f=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(v4e);e=E4(e)||0,g4e(r)&&(f=!!r.leading,d="maxWait"in r,o=d?b4e(E4(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function p(w){var A=n,C=i;return n=i=void 0,c=w,s=t.apply(C,A),s}function m(w){return c=w,a=setTimeout(b,e),f?p(w):s}function y(w){var A=w-l,C=w-c,T=e-A;return d?x4e(T,o-C):T}function g(w){var A=w-l,C=w-c;return l===void 0||A>=e||A<0||d&&C>=o}function b(){var w=eC();if(g(w))return v(w);a=setTimeout(b,y(w))}function v(w){return a=void 0,h&&n?p(w):(n=i=void 0,s)}function x(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function S(){return a===void 0?s:v(eC())}function _(){var w=eC(),A=g(w);if(n=arguments,i=this,l=w,A){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(b,e),p(l)}return a===void 0&&(a=setTimeout(b,e)),s}return _.cancel=x,_.flush=S,_}var w4e=_4e,S4e=w4e,E4e=cl,A4e="Expected a function";function C4e(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(A4e);return E4e(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),S4e(t,e,{leading:n,maxWait:e,trailing:i})}var P4e=C4e;const nX=ct(P4e);function hy(t){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(t)}function A4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function u0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A4(Object(r),!0).forEach(function(n){T4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T4e(t,e,r){return e=I4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I4e(t){var e=N4e(t,"string");return hy(e)==="symbol"?e:String(e)}function N4e(t,e){if(hy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k4e(t,e){return $4e(t)||R4e(t,e)||j4e(t,e)||O4e()}function O4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j4e(t,e){if(t){if(typeof t=="string")return C4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(t,e)}}function C4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function $4e(t){if(Array.isArray(t))return t}var iX=E.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,f=c===void 0?0:c,d=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,y=m===void 0?0:m,g=t.id,b=t.className,v=t.onResize,x=t.style,S=x===void 0?{}:x,_=E.useRef(null),w=E.useRef();w.current=v,E.useImperativeHandle(e,function(){return Object.assign(_.current,{get current(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current}})});var A=E.useState({containerWidth:i.width,containerHeight:i.height}),C=k4e(A,2),T=C[0],P=C[1],I=E.useCallback(function(N,j){P(function(L){var V=Math.round(N),F=Math.round(j);return L.containerWidth===V&&L.containerHeight===F?L:{containerWidth:V,containerHeight:F}})},[]);E.useEffect(function(){var N=function(B){var z,ae=B[0].contentRect,te=ae.width,ge=ae.height;I(te,ge),(z=w.current)===null||z===void 0||z.call(w,te,ge)};y>0&&(N=nX(N,y,{trailing:!0,leading:!1}));var j=new ResizeObserver(N),L=_.current.getBoundingClientRect(),V=L.width,F=L.height;return I(V,F),j.observe(_.current),function(){j.disconnect()}},[I,y]);var k=E.useMemo(function(){var N=T.containerWidth,j=T.containerHeight;if(N<0||j<0)return null;gc(zl(s)||zl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),gc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var L=zl(s)?N:s,V=zl(l)?j:l;r&&r>0&&(L?V=L/r:V&&(L=V*r),h&&V>h&&(V=h)),gc(L>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,V,s,l,f,d,r);var F=!Array.isArray(p)&&Gx.isElement(p)&&_s(p.type).endsWith("Chart");return O.Children.map(p,function(M){return Gx.isElement(M)?E.cloneElement(M,u0({width:L,height:V},F?{style:u0({height:"100%",width:"100%",maxHeight:V,maxWidth:L},M.props.style)}:{})):M})},[r,p,l,h,d,f,T,s]);return O.createElement("div",{id:g?"".concat(g):void 0,className:dt("recharts-responsive-container",b),style:u0(u0({},S),{},{width:s,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:_},k)}),oX=function(e){return null};oX.displayName="Cell";function py(t){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(t)}function P4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P4(Object(r),!0).forEach(function(n){D4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D4e(t,e,r){return e=M4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M4e(t){var e=F4e(t,"string");return py(e)==="symbol"?e:String(e)}function F4e(t,e){if(py(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lu={widthCache:{},cacheCount:0},L4e=2e3,B4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},T4="recharts_measurement_span";function U4e(t){var e=kI({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var tm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ws.isSsr)return{width:0,height:0};var n=U4e(r),i=JSON.stringify({text:e,copyStyle:n});if(lu.widthCache[i])return lu.widthCache[i];try{var o=document.getElementById(T4);o||(o=document.createElement("span"),o.setAttribute("id",T4),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=kI(kI({},B4e),n);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return lu.widthCache[i]=l,++lu.cacheCount>L4e&&(lu.cacheCount=0,lu.widthCache={}),l}catch{return{width:0,height:0}}},V4e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function R_(t,e){return q4e(t)||G4e(t,e)||z4e(t,e)||W4e()}function W4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4e(t,e){if(t){if(typeof t=="string")return I4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I4(t,e)}}function I4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function q4e(t){if(Array.isArray(t))return t}function H4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q4e(n.key),n)}}function K4e(t,e,r){return e&&N4(t.prototype,e),r&&N4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q4e(t){var e=Y4e(t,"string");return my(e)==="symbol"?e:String(e)}function Y4e(t,e){if(my(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(my(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,O4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,X4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,J4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Z4e=Object.keys(sX),Gu="NaN";function eUe(t,e){return t*sX[e]}var f0=function(){function t(e,r){H4e(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!X4e.test(r)&&(this.num=NaN,this.unit=""),Z4e.includes(r)&&(this.num=eUe(e,r),this.unit="px")}return K4e(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=J4e.exec(r))!==null&&n!==void 0?n:[],o=R_(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function aX(t){if(t.includes(Gu))return Gu;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=k4.exec(e))!==null&&r!==void 0?r:[],i=R_(n,4),o=i[1],s=i[2],a=i[3],l=f0.parse(o??""),c=f0.parse(a??""),f=s==="*"?l.multiply(c):l.divide(c);if(f.isNaN())return Gu;e=e.replace(k4,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=O4.exec(e))!==null&&d!==void 0?d:[],p=R_(h,4),m=p[1],y=p[2],g=p[3],b=f0.parse(m??""),v=f0.parse(g??""),x=y==="+"?b.add(v):b.subtract(v);if(x.isNaN())return Gu;e=e.replace(O4,x.toString())}return e}var j4=/\(([^()]*)\)/;function tUe(t){for(var e=t;e.includes("(");){var r=j4.exec(e),n=R_(r,2),i=n[1];e=e.replace(j4,aX(i))}return e}function rUe(t){var e=t.replace(/\s+/g,"");return e=tUe(e),e=aX(e),e}function nUe(t){try{return rUe(t)}catch{return Gu}}function tC(t){var e=nUe(t.slice(5,-1));return e===Gu?"":e}var iUe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],oUe=["dx","dy","angle","className","breakAll"];function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OI.apply(this,arguments)}function R4(t,e){if(t==null)return{};var r=sUe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sUe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function $4(t,e){return uUe(t)||cUe(t,e)||lUe(t,e)||aUe()}function aUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lUe(t,e){if(t){if(typeof t=="string")return D4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D4(t,e)}}function D4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cUe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function uUe(t){if(Array.isArray(t))return t}var lX=/[ \f\n\r\t\v\u2028\u2029]+/,cX=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var o=[];tt(r)||(n?o=r.toString().split(""):o=r.toString().split(lX));var s=o.map(function(l){return{word:l,width:tm(l,i).width}}),a=n?0:tm(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},fUe=function(e,r,n,i,o){var s=e.maxLines,a=e.children,l=e.style,c=e.breakAll,f=re(s),d=a,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(V,F){var M=F.word,B=F.width,z=V[V.length-1];if(z&&(i==null||o||z.width+B+n<Number(i)))z.words.push(M),z.width+=B+n;else{var ae={words:[M],width:B};V.push(ae)}return V},[])},p=h(r),m=function(L){return L.reduce(function(V,F){return V.width>F.width?V:F})};if(!f)return p;for(var y="…",g=function(L){var V=d.slice(0,L),F=cX({breakAll:c,style:l,children:V+y}).wordsWithComputedWidth,M=h(F),B=M.length>s||m(M).width>Number(i);return[B,M]},b=0,v=d.length-1,x=0,S;b<=v&&x<=d.length-1;){var _=Math.floor((b+v)/2),w=_-1,A=g(w),C=$4(A,2),T=C[0],P=C[1],I=g(_),k=$4(I,1),N=k[0];if(!T&&!N&&(b=_+1),T&&N&&(v=_-1),!T&&N){S=P;break}x++}return S||p},M4=function(e){var r=tt(e)?[]:e.toString().split(lX);return[{words:r}]},dUe=function(e){var r=e.width,n=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((r||n)&&!ws.isSsr){var l,c,f=cX({breakAll:s,children:i,style:o});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,c=h}else return M4(i);return fUe({breakAll:s,children:i,maxLines:a,style:o},l,c,r,n)}return M4(i)},F4="#808080",$_=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,f=e.scaleToFit,d=f===void 0?!1:f,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,y=m===void 0?"end":m,g=e.fill,b=g===void 0?F4:g,v=R4(e,iUe),x=E.useMemo(function(){return dUe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),S=v.dx,_=v.dy,w=v.angle,A=v.className,C=v.breakAll,T=R4(v,oUe);if(!hr(n)||!hr(o))return null;var P=n+(re(S)?S:0),I=o+(re(_)?_:0),k;switch(y){case"start":k=tC("calc(".concat(c,")"));break;case"middle":k=tC("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:k=tC("calc(".concat(x.length-1," * -").concat(a,")"));break}var N=[];if(d){var j=x[0].width,L=v.width;N.push("scale(".concat((re(L)?L/j:1)/j,")"))}return w&&N.push("rotate(".concat(w,", ").concat(P,", ").concat(I,")")),N.length&&(T.transform=N.join(" ")),O.createElement("text",OI({},Ke(T,!0),{x:P,y:I,className:dt("recharts-text",A),textAnchor:p,fill:b.includes("url")?F4:b}),x.map(function(V,F){var M=V.words.join(C?"":" ");return O.createElement("tspan",{x:P,dy:F===0?k:a,key:M},M)}))};function Ba(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hUe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WR(t){let e,r,n;t.length!==2?(e=Ba,r=(a,l)=>Ba(t(a),l),n=(a,l)=>t(a)-l):(e=t===Ba||t===hUe?t:pUe,r=t,n=t);function i(a,l,c=0,f=a.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;r(a[d],l)<0?c=d+1:f=d}while(c<f)}return c}function o(a,l,c=0,f=a.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;r(a[d],l)<=0?c=d+1:f=d}while(c<f)}return c}function s(a,l,c=0,f=a.length){const d=i(a,l,c,f-1);return d>c&&n(a[d-1],l)>-n(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function pUe(){return 0}function uX(t){return t===null?NaN:+t}function*mUe(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}const yUe=WR(Ba),tv=yUe.right;WR(uX).center;class L4 extends Map{constructor(e,r=bUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(B4(this,e))}has(e){return super.has(B4(this,e))}set(e,r){return super.set(gUe(this,e),r)}delete(e){return super.delete(vUe(this,e))}}function B4({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function gUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function vUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function bUe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function xUe(t=Ba){if(t===Ba)return fX;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function fX(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const _Ue=Math.sqrt(50),wUe=Math.sqrt(10),SUe=Math.sqrt(2);function D_(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=_Ue?10:o>=wUe?5:o>=SUe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=r&&r<2?D_(t,e,r*2):[a,l,c]}function jI(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,o,s]=n?D_(e,t,r):D_(t,e,r);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(n)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function RI(t,e,r){return e=+e,t=+t,r=+r,D_(t,e,r)[2]}function $I(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?RI(e,t,r):RI(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function U4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function V4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function dX(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?fX:xUe(i);n>r;){if(n-r>600){const l=n-r+1,c=e-r+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(e-c*d/l+h)),m=Math.min(n,Math.floor(e+(l-c)*d/l+h));dX(t,e,p,m,i)}const o=t[e];let s=r,a=n;for(Hh(t,r,e),i(t[n],o)>0&&Hh(t,r,n);s<a;){for(Hh(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[r],o)===0?Hh(t,r,a):(++a,Hh(t,a,n)),a<=e&&(r=a+1),e<=a&&(n=a-1)}return t}function Hh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function EUe(t,e,r){if(t=Float64Array.from(mUe(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return V4(t);if(e>=1)return U4(t);var n,i=(n-1)*e,o=Math.floor(i),s=U4(dX(t,o).subarray(0,o+1)),a=V4(t.subarray(o+1));return s+(a-s)*(i-o)}}function AUe(t,e,r=uX){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),s=+r(t[o],o,t),a=+r(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function CUe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}function Wi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Bs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const DI=Symbol("implicit");function zR(){var t=new L4,e=[],r=[],n=DI;function i(o){let s=t.get(o);if(s===void 0){if(n!==DI)return n;t.set(o,s=e.push(o)-1)}return r[s%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new L4;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return zR(e,r).unknown(n)},Wi.apply(i,arguments),i}function yy(){var t=zR().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,o,s,a=!1,l=0,c=0,f=.5;delete t.unknown;function d(){var h=e().length,p=i<n,m=p?i:n,y=p?n:i;o=(y-m)/Math.max(1,h-l+c*2),a&&(o=Math.floor(o)),m+=(y-m-o*(h-l))*f,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var g=CUe(h).map(function(b){return m+o*b});return r(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},t.copy=function(){return yy(e(),[n,i]).round(a).paddingInner(l).paddingOuter(c).align(f)},Wi.apply(d(),arguments)}function hX(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return hX(e())},t}function rm(){return hX(yy.apply(null,arguments).paddingInner(1))}function GR(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function pX(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function rv(){}var gy=.7,M_=1/gy,bf="\\s*([+-]?\\d+)\\s*",vy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PUe=/^#([0-9a-f]{3,8})$/,TUe=new RegExp(`^rgb\\(${bf},${bf},${bf}\\)$`),IUe=new RegExp(`^rgb\\(${qo},${qo},${qo}\\)$`),NUe=new RegExp(`^rgba\\(${bf},${bf},${bf},${vy}\\)$`),kUe=new RegExp(`^rgba\\(${qo},${qo},${qo},${vy}\\)$`),OUe=new RegExp(`^hsl\\(${vy},${qo},${qo}\\)$`),jUe=new RegExp(`^hsla\\(${vy},${qo},${qo},${vy}\\)$`),W4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GR(rv,by,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:z4,formatHex:z4,formatHex8:RUe,formatHsl:$Ue,formatRgb:G4,toString:G4});function z4(){return this.rgb().formatHex()}function RUe(){return this.rgb().formatHex8()}function $Ue(){return mX(this).formatHsl()}function G4(){return this.rgb().formatRgb()}function by(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=PUe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?q4(e):r===3?new Bn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?d0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?d0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=TUe.exec(t))?new Bn(e[1],e[2],e[3],1):(e=IUe.exec(t))?new Bn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=NUe.exec(t))?d0(e[1],e[2],e[3],e[4]):(e=kUe.exec(t))?d0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=OUe.exec(t))?Q4(e[1],e[2]/100,e[3]/100,1):(e=jUe.exec(t))?Q4(e[1],e[2]/100,e[3]/100,e[4]):W4.hasOwnProperty(t)?q4(W4[t]):t==="transparent"?new Bn(NaN,NaN,NaN,0):null}function q4(t){return new Bn(t>>16&255,t>>8&255,t&255,1)}function d0(t,e,r,n){return n<=0&&(t=e=r=NaN),new Bn(t,e,r,n)}function DUe(t){return t instanceof rv||(t=by(t)),t?(t=t.rgb(),new Bn(t.r,t.g,t.b,t.opacity)):new Bn}function MI(t,e,r,n){return arguments.length===1?DUe(t):new Bn(t,e,r,n??1)}function Bn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}GR(Bn,MI,pX(rv,{brighter(t){return t=t==null?M_:Math.pow(M_,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gy:Math.pow(gy,t),new Bn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bn(vc(this.r),vc(this.g),vc(this.b),F_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:H4,formatHex:H4,formatHex8:MUe,formatRgb:K4,toString:K4}));function H4(){return`#${Gl(this.r)}${Gl(this.g)}${Gl(this.b)}`}function MUe(){return`#${Gl(this.r)}${Gl(this.g)}${Gl(this.b)}${Gl((isNaN(this.opacity)?1:this.opacity)*255)}`}function K4(){const t=F_(this.opacity);return`${t===1?"rgb(":"rgba("}${vc(this.r)}, ${vc(this.g)}, ${vc(this.b)}${t===1?")":`, ${t})`}`}function F_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gl(t){return t=vc(t),(t<16?"0":"")+t.toString(16)}function Q4(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new no(t,e,r,n)}function mX(t){if(t instanceof no)return new no(t.h,t.s,t.l,t.opacity);if(t instanceof rv||(t=by(t)),!t)return new no;if(t instanceof no)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-e)/a+2:s=(e-r)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new no(s,a,l,t.opacity)}function FUe(t,e,r,n){return arguments.length===1?mX(t):new no(t,e,r,n??1)}function no(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}GR(no,FUe,pX(rv,{brighter(t){return t=t==null?M_:Math.pow(M_,t),new no(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gy:Math.pow(gy,t),new no(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Bn(rC(t>=240?t-240:t+120,i,n),rC(t,i,n),rC(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new no(Y4(this.h),h0(this.s),h0(this.l),F_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=F_(this.opacity);return`${t===1?"hsl(":"hsla("}${Y4(this.h)}, ${h0(this.s)*100}%, ${h0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Y4(t){return t=(t||0)%360,t<0?t+360:t}function h0(t){return Math.max(0,Math.min(1,t||0))}function rC(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const qR=t=>()=>t;function LUe(t,e){return function(r){return t+r*e}}function BUe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function UUe(t){return(t=+t)==1?yX:function(e,r){return r-e?BUe(e,r,t):qR(isNaN(e)?r:e)}}function yX(t,e){var r=e-t;return r?LUe(t,r):qR(isNaN(t)?e:t)}const X4=function t(e){var r=UUe(e);function n(i,o){var s=r((i=MI(i)).r,(o=MI(o)).r),a=r(i.g,o.g),l=r(i.b,o.b),c=yX(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=c(f),i+""}}return n.gamma=t,n}(1);function VUe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function WUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zUe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=hh(t[s],e[s]);for(;s<r;++s)o[s]=e[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function GUe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function L_(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function qUe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=hh(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var FI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nC=new RegExp(FI.source,"g");function HUe(t){return function(){return t}}function KUe(t){return function(e){return t(e)+""}}function QUe(t,e){var r=FI.lastIndex=nC.lastIndex=0,n,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(n=FI.exec(t))&&(i=nC.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:L_(n,i)})),r=nC.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?KUe(l[0].x):HUe(e):(e=l.length,function(c){for(var f=0,d;f<e;++f)a[(d=l[f]).i]=d.x(c);return a.join("")})}function hh(t,e){var r=typeof e,n;return e==null||r==="boolean"?qR(e):(r==="number"?L_:r==="string"?(n=by(e))?(e=n,X4):QUe:e instanceof by?X4:e instanceof Date?GUe:WUe(e)?VUe:Array.isArray(e)?zUe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?qUe:L_)(t,e)}function HR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function YUe(t,e){e===void 0&&(e=t,t=hh);for(var r=0,n=e.length-1,i=e[0],o=new Array(n<0?0:n);r<n;)o[r]=t(i,i=e[++r]);return function(s){var a=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return o[a](s-a)}}function XUe(t){return function(){return t}}function B_(t){return+t}var J4=[0,1];function Cn(t){return t}function LI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:XUe(isNaN(e)?NaN:.5)}function JUe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ZUe(t,e,r){var n=t[0],i=t[1],o=e[0],s=e[1];return i<n?(n=LI(i,n),o=r(s,o)):(n=LI(n,i),o=r(o,s)),function(a){return o(n(a))}}function eVe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=LI(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(a){var l=tv(t,a,1,n)-1;return o[l](i[l](a))}}function nv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bS(){var t=J4,e=J4,r=hh,n,i,o,s=Cn,a,l,c;function f(){var h=Math.min(t.length,e.length);return s!==Cn&&(s=JUe(t[0],t[h-1])),a=h>2?eVe:ZUe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(n),e,r)))(n(s(h)))}return d.invert=function(h){return s(i((c||(c=a(e,t.map(n),L_)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,B_),f()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),r=HR,f()},d.clamp=function(h){return arguments.length?(s=h?!0:Cn,f()):s!==Cn},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,p){return n=h,i=p,f()}}function KR(){return bS()(Cn,Cn)}function tVe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function U_(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Pd(t){return t=U_(Math.abs(t)),t?t[1]:NaN}function rVe(t,e){return function(r,n){for(var i=r.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),o.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function nVe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var iVe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xy(t){if(!(e=iVe.exec(t)))throw new Error("invalid format: "+t);var e;return new QR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xy.prototype=QR.prototype;function QR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}QR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oVe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var gX;function sVe(t,e){var r=U_(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(gX=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+U_(t,Math.max(0,e+o-1))[0]}function Z4(t,e){var r=U_(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const eU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:tVe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Z4(t*100,e),r:Z4,s:sVe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tU(t){return t}var rU=Array.prototype.map,nU=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aVe(t){var e=t.grouping===void 0||t.thousands===void 0?tU:rVe(rU.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?tU:nVe(rU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=xy(d);var h=d.fill,p=d.align,m=d.sign,y=d.symbol,g=d.zero,b=d.width,v=d.comma,x=d.precision,S=d.trim,_=d.type;_==="n"?(v=!0,_="g"):eU[_]||(x===void 0&&(x=12),S=!0,_="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var w=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=y==="$"?n:/[%p]/.test(_)?s:"",C=eU[_],T=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function P(I){var k=w,N=A,j,L,V;if(_==="c")N=C(I)+N,I="";else{I=+I;var F=I<0||1/I<0;if(I=isNaN(I)?l:C(Math.abs(I),x),S&&(I=oVe(I)),F&&+I==0&&m!=="+"&&(F=!1),k=(F?m==="("?m:a:m==="-"||m==="("?"":m)+k,N=(_==="s"?nU[8+gX/3]:"")+N+(F&&m==="("?")":""),T){for(j=-1,L=I.length;++j<L;)if(V=I.charCodeAt(j),48>V||V>57){N=(V===46?i+I.slice(j+1):I.slice(j))+N,I=I.slice(0,j);break}}}v&&!g&&(I=e(I,1/0));var M=k.length+I.length+N.length,B=M<b?new Array(b-M+1).join(h):"";switch(v&&g&&(I=e(B+I,B.length?b-N.length:1/0),B=""),p){case"<":I=k+I+N+B;break;case"=":I=k+B+I+N;break;case"^":I=B.slice(0,M=B.length>>1)+k+I+N+B.slice(M);break;default:I=B+k+I+N;break}return o(I)}return P.toString=function(){return d+""},P}function f(d,h){var p=c((d=xy(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Pd(h)/3)))*3,y=Math.pow(10,-m),g=nU[8+m/3];return function(b){return p(y*b)+g}}return{format:c,formatPrefix:f}}var p0,YR,vX;lVe({thousands:",",grouping:[3],currency:["$",""]});function lVe(t){return p0=aVe(t),YR=p0.format,vX=p0.formatPrefix,p0}function cVe(t){return Math.max(0,-Pd(Math.abs(t)))}function uVe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pd(e)/3)))*3-Pd(Math.abs(t)))}function fVe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pd(e)-Pd(t))+1}function bX(t,e,r,n){var i=$I(t,e,r),o;switch(n=xy(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=uVe(i,s))&&(n.precision=o),vX(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=fVe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=cVe(i))&&(n.precision=o-(n.type==="%")*2);break}}return YR(n)}function dl(t){var e=t.domain;return t.ticks=function(r){var n=e();return jI(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return bX(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,s=n[i],a=n[o],l,c,f=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);f-- >0;){if(c=RI(s,a,r),c===l)return n[i]=s,n[o]=a,e(n);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function V_(){var t=KR();return t.copy=function(){return nv(t,V_())},Wi.apply(t,arguments),dl(t)}function xX(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,B_),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return xX(t).unknown(e)},t=arguments.length?Array.from(t,B_):[0,1],dl(r)}function _X(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),t[r]=e.floor(i),t[n]=e.ceil(o),t}function iU(t){return Math.log(t)}function oU(t){return Math.exp(t)}function dVe(t){return-Math.log(-t)}function hVe(t){return-Math.exp(-t)}function pVe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function mVe(t){return t===10?pVe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function yVe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function sU(t){return(e,r)=>-t(-e,r)}function XR(t){const e=t(iU,oU),r=e.domain;let n=10,i,o;function s(){return i=yVe(n),o=mVe(n),r()[0]<0?(i=sU(i),o=sU(o),t(dVe,hVe)):t(iU,oU),e}return e.base=function(a){return arguments.length?(n=+a,s()):n},e.domain=function(a){return arguments.length?(r(a),s()):r()},e.ticks=a=>{const l=r();let c=l[0],f=l[l.length-1];const d=f<c;d&&([c,f]=[f,c]);let h=i(c),p=i(f),m,y;const g=a==null?10:+a;let b=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<n;++m)if(y=h<0?m/o(-h):m*o(h),!(y<c)){if(y>f)break;b.push(y)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(y=h>0?m/o(-h):m*o(h),!(y<c)){if(y>f)break;b.push(y)}b.length*2<g&&(b=jI(c,f,g))}else b=jI(h,p,Math.min(p-h,g)).map(o);return d?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=xy(l)).precision==null&&(l.trim=!0),l=YR(l)),a===1/0)return l;const c=Math.max(1,n*a/e.ticks().length);return f=>{let d=f/o(Math.round(i(f)));return d*n<n-.5&&(d*=n),d<=c?l(f):""}},e.nice=()=>r(_X(r(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function wX(){const t=XR(bS()).domain([1,10]);return t.copy=()=>nv(t,wX()).base(t.base()),Wi.apply(t,arguments),t}function aU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function lU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function JR(t){var e=1,r=t(aU(e),lU(e));return r.constant=function(n){return arguments.length?t(aU(e=+n),lU(e)):e},dl(r)}function SX(){var t=JR(bS());return t.copy=function(){return nv(t,SX()).constant(t.constant())},Wi.apply(t,arguments)}function cU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gVe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vVe(t){return t<0?-t*t:t*t}function ZR(t){var e=t(Cn,Cn),r=1;function n(){return r===1?t(Cn,Cn):r===.5?t(gVe,vVe):t(cU(r),cU(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},dl(e)}function e2(){var t=ZR(bS());return t.copy=function(){return nv(t,e2()).exponent(t.exponent())},Wi.apply(t,arguments),t}function bVe(){return e2.apply(null,arguments).exponent(.5)}function uU(t){return Math.sign(t)*t*t}function xVe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function EX(){var t=KR(),e=[0,1],r=!1,n;function i(o){var s=xVe(t(o));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(o){return t.invert(uU(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,B_)).map(uU)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return EX(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Wi.apply(i,arguments),dl(i)}function AX(){var t=[],e=[],r=[],n;function i(){var s=0,a=Math.max(1,e.length);for(r=new Array(a-1);++s<a;)r[s-1]=AUe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?n:e[tv(r,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ba),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return AX().domain(t).range(e).unknown(n)},Wi.apply(o,arguments)}function CX(){var t=0,e=1,r=1,n=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[tv(n,l,0,r)]:o}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,n[0]]:c>=r?[n[r-1],e]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return CX().domain([t,e]).range(i).unknown(o)},Wi.apply(dl(s),arguments)}function PX(){var t=[.5],e=[0,1],r,n=1;function i(o){return o!=null&&o<=o?e[tv(t,o,0,n)]:r}return i.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return PX().domain(t).range(e).unknown(r)},Wi.apply(i,arguments)}const iC=new Date,oC=new Date;function gr(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=o=>gr(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),r&&(i.count=(o,s)=>(iC.setTime(+o),oC.setTime(+s),t(iC),t(oC),Math.floor(r(iC,oC))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?s=>n(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const W_=gr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);W_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):W_);W_.range;const ys=1e3,Oi=ys*60,gs=Oi*60,Os=gs*24,t2=Os*7,fU=Os*30,sC=Os*365,ql=gr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ys)},(t,e)=>(e-t)/ys,t=>t.getUTCSeconds());ql.range;const r2=gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ys)},(t,e)=>{t.setTime(+t+e*Oi)},(t,e)=>(e-t)/Oi,t=>t.getMinutes());r2.range;const n2=gr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Oi)},(t,e)=>(e-t)/Oi,t=>t.getUTCMinutes());n2.range;const i2=gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ys-t.getMinutes()*Oi)},(t,e)=>{t.setTime(+t+e*gs)},(t,e)=>(e-t)/gs,t=>t.getHours());i2.range;const o2=gr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*gs)},(t,e)=>(e-t)/gs,t=>t.getUTCHours());o2.range;const iv=gr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Oi)/Os,t=>t.getDate()-1);iv.range;const xS=gr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Os,t=>t.getUTCDate()-1);xS.range;const TX=gr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Os,t=>Math.floor(t/Os));TX.range;function Kc(t){return gr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Oi)/t2)}const _S=Kc(0),z_=Kc(1),_Ve=Kc(2),wVe=Kc(3),Td=Kc(4),SVe=Kc(5),EVe=Kc(6);_S.range;z_.range;_Ve.range;wVe.range;Td.range;SVe.range;EVe.range;function Qc(t){return gr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/t2)}const wS=Qc(0),G_=Qc(1),AVe=Qc(2),CVe=Qc(3),Id=Qc(4),PVe=Qc(5),TVe=Qc(6);wS.range;G_.range;AVe.range;CVe.range;Id.range;PVe.range;TVe.range;const s2=gr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());s2.range;const a2=gr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());a2.range;const js=gr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());js.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});js.range;const Rs=gr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Rs.range;function IX(t,e,r,n,i,o){const s=[[ql,1,ys],[ql,5,5*ys],[ql,15,15*ys],[ql,30,30*ys],[o,1,Oi],[o,5,5*Oi],[o,15,15*Oi],[o,30,30*Oi],[i,1,gs],[i,3,3*gs],[i,6,6*gs],[i,12,12*gs],[n,1,Os],[n,2,2*Os],[r,1,t2],[e,1,fU],[e,3,3*fU],[t,1,sC]];function a(c,f,d){const h=f<c;h&&([c,f]=[f,c]);const p=d&&typeof d.range=="function"?d:l(c,f,d),m=p?p.range(c,+f+1):[];return h?m.reverse():m}function l(c,f,d){const h=Math.abs(f-c)/d,p=WR(([,,g])=>g).right(s,h);if(p===s.length)return t.every($I(c/sC,f/sC,d));if(p===0)return W_.every(Math.max($I(c,f,d),1));const[m,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return m.every(y)}return[a,l]}const[IVe,NVe]=IX(Rs,a2,wS,TX,o2,n2),[kVe,OVe]=IX(js,s2,_S,iv,i2,r2);function aC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Kh(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function jVe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=Qh(i),f=Yh(i),d=Qh(o),h=Yh(o),p=Qh(s),m=Yh(s),y=Qh(a),g=Yh(a),b=Qh(l),v=Yh(l),x={a:F,A:M,b:B,B:z,c:null,d:gU,e:gU,f:r5e,g:d5e,G:p5e,H:ZVe,I:e5e,j:t5e,L:NX,m:n5e,M:i5e,p:ae,q:te,Q:xU,s:_U,S:o5e,u:s5e,U:a5e,V:l5e,w:c5e,W:u5e,x:null,X:null,y:f5e,Y:h5e,Z:m5e,"%":bU},S={a:ge,A:Le,b:Qe,B:fe,c:null,d:vU,e:vU,f:b5e,g:I5e,G:k5e,H:y5e,I:g5e,j:v5e,L:OX,m:x5e,M:_5e,p:ut,q:nt,Q:xU,s:_U,S:w5e,u:S5e,U:E5e,V:A5e,w:C5e,W:P5e,x:null,X:null,y:T5e,Y:N5e,Z:O5e,"%":bU},_={a:P,A:I,b:k,B:N,c:j,d:mU,e:mU,f:QVe,g:pU,G:hU,H:yU,I:yU,j:GVe,L:KVe,m:zVe,M:qVe,p:T,q:WVe,Q:XVe,s:JVe,S:HVe,u:FVe,U:LVe,V:BVe,w:MVe,W:UVe,x:L,X:V,y:pU,Y:hU,Z:VVe,"%":YVe};x.x=w(r,x),x.X=w(n,x),x.c=w(e,x),S.x=w(r,S),S.X=w(n,S),S.c=w(e,S);function w(Z,_e){return function(Ae){var q=[],it=-1,je=0,xt=Z.length,zt,Fr,Gn;for(Ae instanceof Date||(Ae=new Date(+Ae));++it<xt;)Z.charCodeAt(it)===37&&(q.push(Z.slice(je,it)),(Fr=dU[zt=Z.charAt(++it)])!=null?zt=Z.charAt(++it):Fr=zt==="e"?" ":"0",(Gn=_e[zt])&&(zt=Gn(Ae,Fr)),q.push(zt),je=it+1);return q.push(Z.slice(je,it)),q.join("")}}function A(Z,_e){return function(Ae){var q=Kh(1900,void 0,1),it=C(q,Z,Ae+="",0),je,xt;if(it!=Ae.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(_e&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(je=lC(Kh(q.y,0,1)),xt=je.getUTCDay(),je=xt>4||xt===0?G_.ceil(je):G_(je),je=xS.offset(je,(q.V-1)*7),q.y=je.getUTCFullYear(),q.m=je.getUTCMonth(),q.d=je.getUTCDate()+(q.w+6)%7):(je=aC(Kh(q.y,0,1)),xt=je.getDay(),je=xt>4||xt===0?z_.ceil(je):z_(je),je=iv.offset(je,(q.V-1)*7),q.y=je.getFullYear(),q.m=je.getMonth(),q.d=je.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),xt="Z"in q?lC(Kh(q.y,0,1)).getUTCDay():aC(Kh(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(xt+5)%7:q.w+q.U*7-(xt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,lC(q)):aC(q)}}function C(Z,_e,Ae,q){for(var it=0,je=_e.length,xt=Ae.length,zt,Fr;it<je;){if(q>=xt)return-1;if(zt=_e.charCodeAt(it++),zt===37){if(zt=_e.charAt(it++),Fr=_[zt in dU?_e.charAt(it++):zt],!Fr||(q=Fr(Z,Ae,q))<0)return-1}else if(zt!=Ae.charCodeAt(q++))return-1}return q}function T(Z,_e,Ae){var q=c.exec(_e.slice(Ae));return q?(Z.p=f.get(q[0].toLowerCase()),Ae+q[0].length):-1}function P(Z,_e,Ae){var q=p.exec(_e.slice(Ae));return q?(Z.w=m.get(q[0].toLowerCase()),Ae+q[0].length):-1}function I(Z,_e,Ae){var q=d.exec(_e.slice(Ae));return q?(Z.w=h.get(q[0].toLowerCase()),Ae+q[0].length):-1}function k(Z,_e,Ae){var q=b.exec(_e.slice(Ae));return q?(Z.m=v.get(q[0].toLowerCase()),Ae+q[0].length):-1}function N(Z,_e,Ae){var q=y.exec(_e.slice(Ae));return q?(Z.m=g.get(q[0].toLowerCase()),Ae+q[0].length):-1}function j(Z,_e,Ae){return C(Z,e,_e,Ae)}function L(Z,_e,Ae){return C(Z,r,_e,Ae)}function V(Z,_e,Ae){return C(Z,n,_e,Ae)}function F(Z){return s[Z.getDay()]}function M(Z){return o[Z.getDay()]}function B(Z){return l[Z.getMonth()]}function z(Z){return a[Z.getMonth()]}function ae(Z){return i[+(Z.getHours()>=12)]}function te(Z){return 1+~~(Z.getMonth()/3)}function ge(Z){return s[Z.getUTCDay()]}function Le(Z){return o[Z.getUTCDay()]}function Qe(Z){return l[Z.getUTCMonth()]}function fe(Z){return a[Z.getUTCMonth()]}function ut(Z){return i[+(Z.getUTCHours()>=12)]}function nt(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var _e=w(Z+="",x);return _e.toString=function(){return Z},_e},parse:function(Z){var _e=A(Z+="",!1);return _e.toString=function(){return Z},_e},utcFormat:function(Z){var _e=w(Z+="",S);return _e.toString=function(){return Z},_e},utcParse:function(Z){var _e=A(Z+="",!0);return _e.toString=function(){return Z},_e}}}var dU={"-":"",_:" ",0:"0"},Mr=/^\s*\d+/,RVe=/^%/,$Ve=/[\\^$*+?|[\]().{}]/g;function st(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function DVe(t){return t.replace($Ve,"\\$&")}function Qh(t){return new RegExp("^(?:"+t.map(DVe).join("|")+")","i")}function Yh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function MVe(t,e,r){var n=Mr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function FVe(t,e,r){var n=Mr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function LVe(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function BVe(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function UVe(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function hU(t,e,r){var n=Mr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function pU(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function VVe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function WVe(t,e,r){var n=Mr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function zVe(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function mU(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function GVe(t,e,r){var n=Mr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function yU(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function qVe(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function HVe(t,e,r){var n=Mr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function KVe(t,e,r){var n=Mr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function QVe(t,e,r){var n=Mr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function YVe(t,e,r){var n=RVe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function XVe(t,e,r){var n=Mr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function JVe(t,e,r){var n=Mr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function gU(t,e){return st(t.getDate(),e,2)}function ZVe(t,e){return st(t.getHours(),e,2)}function e5e(t,e){return st(t.getHours()%12||12,e,2)}function t5e(t,e){return st(1+iv.count(js(t),t),e,3)}function NX(t,e){return st(t.getMilliseconds(),e,3)}function r5e(t,e){return NX(t,e)+"000"}function n5e(t,e){return st(t.getMonth()+1,e,2)}function i5e(t,e){return st(t.getMinutes(),e,2)}function o5e(t,e){return st(t.getSeconds(),e,2)}function s5e(t){var e=t.getDay();return e===0?7:e}function a5e(t,e){return st(_S.count(js(t)-1,t),e,2)}function kX(t){var e=t.getDay();return e>=4||e===0?Td(t):Td.ceil(t)}function l5e(t,e){return t=kX(t),st(Td.count(js(t),t)+(js(t).getDay()===4),e,2)}function c5e(t){return t.getDay()}function u5e(t,e){return st(z_.count(js(t)-1,t),e,2)}function f5e(t,e){return st(t.getFullYear()%100,e,2)}function d5e(t,e){return t=kX(t),st(t.getFullYear()%100,e,2)}function h5e(t,e){return st(t.getFullYear()%1e4,e,4)}function p5e(t,e){var r=t.getDay();return t=r>=4||r===0?Td(t):Td.ceil(t),st(t.getFullYear()%1e4,e,4)}function m5e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+st(e/60|0,"0",2)+st(e%60,"0",2)}function vU(t,e){return st(t.getUTCDate(),e,2)}function y5e(t,e){return st(t.getUTCHours(),e,2)}function g5e(t,e){return st(t.getUTCHours()%12||12,e,2)}function v5e(t,e){return st(1+xS.count(Rs(t),t),e,3)}function OX(t,e){return st(t.getUTCMilliseconds(),e,3)}function b5e(t,e){return OX(t,e)+"000"}function x5e(t,e){return st(t.getUTCMonth()+1,e,2)}function _5e(t,e){return st(t.getUTCMinutes(),e,2)}function w5e(t,e){return st(t.getUTCSeconds(),e,2)}function S5e(t){var e=t.getUTCDay();return e===0?7:e}function E5e(t,e){return st(wS.count(Rs(t)-1,t),e,2)}function jX(t){var e=t.getUTCDay();return e>=4||e===0?Id(t):Id.ceil(t)}function A5e(t,e){return t=jX(t),st(Id.count(Rs(t),t)+(Rs(t).getUTCDay()===4),e,2)}function C5e(t){return t.getUTCDay()}function P5e(t,e){return st(G_.count(Rs(t)-1,t),e,2)}function T5e(t,e){return st(t.getUTCFullYear()%100,e,2)}function I5e(t,e){return t=jX(t),st(t.getUTCFullYear()%100,e,2)}function N5e(t,e){return st(t.getUTCFullYear()%1e4,e,4)}function k5e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Id(t):Id.ceil(t),st(t.getUTCFullYear()%1e4,e,4)}function O5e(){return"+0000"}function bU(){return"%"}function xU(t){return+t}function _U(t){return Math.floor(+t/1e3)}var cu,RX,$X;j5e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function j5e(t){return cu=jVe(t),RX=cu.format,cu.parse,$X=cu.utcFormat,cu.utcParse,cu}function R5e(t){return new Date(t)}function $5e(t){return t instanceof Date?+t:+new Date(+t)}function l2(t,e,r,n,i,o,s,a,l,c){var f=KR(),d=f.invert,h=f.domain,p=c(".%L"),m=c(":%S"),y=c("%I:%M"),g=c("%I %p"),b=c("%a %d"),v=c("%b %d"),x=c("%B"),S=c("%Y");function _(w){return(l(w)<w?p:a(w)<w?m:s(w)<w?y:o(w)<w?g:n(w)<w?i(w)<w?b:v:r(w)<w?x:S)(w)}return f.invert=function(w){return new Date(d(w))},f.domain=function(w){return arguments.length?h(Array.from(w,$5e)):h().map(R5e)},f.ticks=function(w){var A=h();return t(A[0],A[A.length-1],w??10)},f.tickFormat=function(w,A){return A==null?_:c(A)},f.nice=function(w){var A=h();return(!w||typeof w.range!="function")&&(w=e(A[0],A[A.length-1],w??10)),w?h(_X(A,w)):f},f.copy=function(){return nv(f,l2(t,e,r,n,i,o,s,a,l,c))},f}function D5e(){return Wi.apply(l2(kVe,OVe,js,s2,_S,iv,i2,r2,ql,RX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function M5e(){return Wi.apply(l2(IVe,NVe,Rs,a2,wS,xS,o2,n2,ql,$X).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function SS(){var t=0,e=1,r,n,i,o,s=Cn,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-r)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,r=o(t=+t),n=o(e=+e),i=r===n?0:1/(n-r),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s};function f(d){return function(h){var p,m;return arguments.length?([p,m]=h,s=d(p,m),c):[s(0),s(1)]}}return c.range=f(hh),c.rangeRound=f(HR),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,r=d(t),n=d(e),i=r===n?0:1/(n-r),c}}function hl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function DX(){var t=dl(SS()(Cn));return t.copy=function(){return hl(t,DX())},Bs.apply(t,arguments)}function MX(){var t=XR(SS()).domain([1,10]);return t.copy=function(){return hl(t,MX()).base(t.base())},Bs.apply(t,arguments)}function FX(){var t=JR(SS());return t.copy=function(){return hl(t,FX()).constant(t.constant())},Bs.apply(t,arguments)}function c2(){var t=ZR(SS());return t.copy=function(){return hl(t,c2()).exponent(t.exponent())},Bs.apply(t,arguments)}function F5e(){return c2.apply(null,arguments).exponent(.5)}function LX(){var t=[],e=Cn;function r(n){if(n!=null&&!isNaN(n=+n))return e((tv(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ba),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>EUe(t,o/n))},r.copy=function(){return LX(e).domain(t)},Bs.apply(r,arguments)}function ES(){var t=0,e=.5,r=1,n=1,i,o,s,a,l,c=Cn,f,d=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+f(y))-o)*(n*y<n*o?a:l),c(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=f(t=+t),o=f(e=+e),s=f(r=+r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(c=y,p):c};function m(y){return function(g){var b,v,x;return arguments.length?([b,v,x]=g,c=YUe(y,[b,v,x]),p):[c(0),c(.5),c(1)]}}return p.range=m(hh),p.rangeRound=m(HR),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return f=y,i=y(t),o=y(e),s=y(r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p}}function BX(){var t=dl(ES()(Cn));return t.copy=function(){return hl(t,BX())},Bs.apply(t,arguments)}function UX(){var t=XR(ES()).domain([.1,1,10]);return t.copy=function(){return hl(t,UX()).base(t.base())},Bs.apply(t,arguments)}function VX(){var t=JR(ES());return t.copy=function(){return hl(t,VX()).constant(t.constant())},Bs.apply(t,arguments)}function u2(){var t=ZR(ES());return t.copy=function(){return hl(t,u2()).exponent(t.exponent())},Bs.apply(t,arguments)}function L5e(){return u2.apply(null,arguments).exponent(.5)}const wU=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yy,scaleDiverging:BX,scaleDivergingLog:UX,scaleDivergingPow:u2,scaleDivergingSqrt:L5e,scaleDivergingSymlog:VX,scaleIdentity:xX,scaleImplicit:DI,scaleLinear:V_,scaleLog:wX,scaleOrdinal:zR,scalePoint:rm,scalePow:e2,scaleQuantile:AX,scaleQuantize:CX,scaleRadial:EX,scaleSequential:DX,scaleSequentialLog:MX,scaleSequentialPow:c2,scaleSequentialQuantile:LX,scaleSequentialSqrt:F5e,scaleSequentialSymlog:FX,scaleSqrt:bVe,scaleSymlog:SX,scaleThreshold:PX,scaleTime:D5e,scaleUtc:M5e,tickFormat:bX},Symbol.toStringTag,{value:"Module"}));var B5e=ih;function U5e(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(a===void 0?s===s&&!B5e(s):r(s,a)))var a=s,l=o}return l}var WX=U5e;function V5e(t,e){return t>e}var W5e=V5e,z5e=WX,G5e=W5e,q5e=fh;function H5e(t){return t&&t.length?z5e(t,q5e,G5e):void 0}var K5e=H5e;const AS=ct(K5e);function Q5e(t,e){return t<e}var Y5e=Q5e,X5e=WX,J5e=Y5e,Z5e=fh;function e6e(t){return t&&t.length?X5e(t,Z5e,J5e):void 0}var t6e=e6e;const CS=ct(t6e);var r6e=AR,n6e=ul,i6e=VY,o6e=zn;function s6e(t,e){var r=o6e(t)?r6e:i6e;return r(t,n6e(e))}var a6e=s6e,l6e=BY,c6e=a6e;function u6e(t,e){return l6e(c6e(t,e),1)}var f6e=u6e;const d6e=ct(f6e);var h6e=FR;function p6e(t,e){return h6e(t,e)}var m6e=p6e;const PS=ct(m6e);var ph=1e9,y6e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},d2,Mt=!0,Ui="[DecimalError] ",bc=Ui+"Invalid argument: ",f2=Ui+"Exponent out of range: ",mh=Math.floor,Ol=Math.pow,g6e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zn,Ir=1e7,kt=7,zX=9007199254740991,q_=mh(zX/kt),ue={};ue.absoluteValue=ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ue.comparedTo=ue.cmp=function(t){var e,r,n,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};ue.decimalPlaces=ue.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*kt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ue.dividedBy=ue.div=function(t){return Ss(this,new this.constructor(t))};ue.dividedToIntegerBy=ue.idiv=function(t){var e=this,r=e.constructor;return bt(Ss(e,new r(t),0,1),r.precision)};ue.equals=ue.eq=function(t){return!this.cmp(t)};ue.exponent=function(){return nr(this)};ue.greaterThan=ue.gt=function(t){return this.cmp(t)>0};ue.greaterThanOrEqualTo=ue.gte=function(t){return this.cmp(t)>=0};ue.isInteger=ue.isint=function(){return this.e>this.d.length-2};ue.isNegative=ue.isneg=function(){return this.s<0};ue.isPositive=ue.ispos=function(){return this.s>0};ue.isZero=function(){return this.s===0};ue.lessThan=ue.lt=function(t){return this.cmp(t)<0};ue.lessThanOrEqualTo=ue.lte=function(t){return this.cmp(t)<1};ue.logarithm=ue.log=function(t){var e,r=this,n=r.constructor,i=n.precision,o=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Zn))throw Error(Ui+"NaN");if(r.s<1)throw Error(Ui+(r.s?"NaN":"-Infinity"));return r.eq(Zn)?new n(0):(Mt=!1,e=Ss(_y(r,o),_y(t,o),o),Mt=!0,bt(e,i))};ue.minus=ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HX(e,t):GX(e,(t.s=-t.s,t))};ue.modulo=ue.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Ui+"NaN");return r.s?(Mt=!1,e=Ss(r,t,0,1).times(t),Mt=!0,r.minus(e)):bt(new n(r),i)};ue.naturalExponential=ue.exp=function(){return qX(this)};ue.naturalLogarithm=ue.ln=function(){return _y(this)};ue.negated=ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ue.plus=ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?GX(e,t):HX(e,(t.s=-t.s,t))};ue.precision=ue.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(bc+t);if(e=nr(i)+1,n=i.d.length-1,r=n*kt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};ue.squareRoot=ue.sqrt=function(){var t,e,r,n,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ui+"NaN")}for(t=nr(a),Mt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Fo(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=mh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(o=n,n=o.plus(Ss(a,o,s+2)).times(.5),Fo(o.d).slice(0,s)===(e=Fo(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(bt(o,r+1,0),o.times(o).eq(a)){n=o;break}}else if(e!="9999")break;s+=4}return Mt=!0,bt(n,r)};ue.times=ue.mul=function(t){var e,r,n,i,o,s,a,l,c,f=this,d=f.constructor,h=f.d,p=(t=new d(t)).d;if(!f.s||!t.s)return new d(0);for(t.s*=f.s,r=f.e+t.e,l=h.length,c=p.length,l<c&&(o=h,h=p,p=o,s=l,l=c,c=s),o=[],s=l+c,n=s;n--;)o.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)a=o[i]+p[n]*h[i-n-1]+e,o[i--]=a%Ir|0,e=a/Ir|0;o[i]=(o[i]+e)%Ir|0}for(;!o[--s];)o.pop();return e?++r:o.shift(),t.d=o,t.e=r,Mt?bt(t,d.precision):t};ue.toDecimalPlaces=ue.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Jo(t,0,ph),e===void 0?e=n.rounding:Jo(e,0,8),bt(r,t+nr(r)+1,e))};ue.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Dc(n,!0):(Jo(t,0,ph),e===void 0?e=i.rounding:Jo(e,0,8),n=bt(new i(n),t+1,e),r=Dc(n,!0,t+1)),r};ue.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?Dc(i):(Jo(t,0,ph),e===void 0?e=o.rounding:Jo(e,0,8),n=bt(new o(i),t+nr(i)+1,e),r=Dc(n.abs(),!1,t+nr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};ue.toInteger=ue.toint=function(){var t=this,e=t.constructor;return bt(new e(t),nr(t)+1,e.rounding)};ue.toNumber=function(){return+this};ue.toPower=ue.pow=function(t){var e,r,n,i,o,s,a=this,l=a.constructor,c=12,f=+(t=new l(t));if(!t.s)return new l(Zn);if(a=new l(a),!a.s){if(t.s<1)throw Error(Ui+"Infinity");return a}if(a.eq(Zn))return a;if(n=l.precision,t.eq(Zn))return bt(a,n);if(e=t.e,r=t.d.length-1,s=e>=r,o=a.s,s){if((r=f<0?-f:f)<=zX){for(i=new l(Zn),e=Math.ceil(n/kt+4),Mt=!1;r%2&&(i=i.times(a),EU(i.d,e)),r=mh(r/2),r!==0;)a=a.times(a),EU(a.d,e);return Mt=!0,t.s<0?new l(Zn).div(i):bt(i,n)}}else if(o<0)throw Error(Ui+"NaN");return o=o<0&&t.d[Math.max(e,r)]&1?-1:1,a.s=1,Mt=!1,i=t.times(_y(a,n+c)),Mt=!0,i=qX(i),i.s=o,i};ue.toPrecision=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?(r=nr(i),n=Dc(i,r<=o.toExpNeg||r>=o.toExpPos)):(Jo(t,1,ph),e===void 0?e=o.rounding:Jo(e,0,8),i=bt(new o(i),t,e),r=nr(i),n=Dc(i,t<=r||r<=o.toExpNeg,t)),n};ue.toSignificantDigits=ue.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Jo(t,1,ph),e===void 0?e=n.rounding:Jo(e,0,8)),bt(new n(r),t,e)};ue.toString=ue.valueOf=ue.val=ue.toJSON=ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=nr(t),r=t.constructor;return Dc(t,e<=r.toExpNeg||e>=r.toExpPos)};function GX(t,e){var r,n,i,o,s,a,l,c,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Mt?bt(e,d):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(n=l,o=-o,a=c.length):(n=c,i=s,a=l.length),s=Math.ceil(d/kt),a=s>a?s+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=l.length,o=c.length,a-o<0&&(o=a,n=c,c=l,l=n),r=0;o;)r=(l[--o]=l[o]+c[o]+r)/Ir|0,l[o]%=Ir;for(r&&(l.unshift(r),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Mt?bt(e,d):e}function Jo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(bc+t)}function Fo(t){var e,r,n,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)n=t[e]+"",r=kt-n.length,r&&(o+=ra(r)),o+=n;s=t[e],n=s+"",r=kt-n.length,r&&(o+=ra(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Ss=function(){function t(n,i){var o,s=0,a=n.length;for(n=n.slice();a--;)o=n[a]*i+s,n[a]=o%Ir|0,s=o/Ir|0;return s&&n.unshift(s),n}function e(n,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function r(n,i,o){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*Ir+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,s){var a,l,c,f,d,h,p,m,y,g,b,v,x,S,_,w,A,C,T=n.constructor,P=n.s==i.s?1:-1,I=n.d,k=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(Ui+"Division by zero");for(l=n.e-i.e,A=k.length,_=I.length,p=new T(P),m=p.d=[],c=0;k[c]==(I[c]||0);)++c;if(k[c]>(I[c]||0)&&--l,o==null?v=o=T.precision:s?v=o+(nr(n)-nr(i))+1:v=o,v<0)return new T(0);if(v=v/kt+2|0,c=0,A==1)for(f=0,k=k[0],v++;(c<_||f)&&v--;c++)x=f*Ir+(I[c]||0),m[c]=x/k|0,f=x%k|0;else{for(f=Ir/(k[0]+1)|0,f>1&&(k=t(k,f),I=t(I,f),A=k.length,_=I.length),S=A,y=I.slice(0,A),g=y.length;g<A;)y[g++]=0;C=k.slice(),C.unshift(0),w=k[0],k[1]>=Ir/2&&++w;do f=0,a=e(k,y,A,g),a<0?(b=y[0],A!=g&&(b=b*Ir+(y[1]||0)),f=b/w|0,f>1?(f>=Ir&&(f=Ir-1),d=t(k,f),h=d.length,g=y.length,a=e(d,y,h,g),a==1&&(f--,r(d,A<h?C:k,h))):(f==0&&(a=f=1),d=k.slice()),h=d.length,h<g&&d.unshift(0),r(y,d,g),a==-1&&(g=y.length,a=e(k,y,A,g),a<1&&(f++,r(y,A<g?C:k,g))),g=y.length):a===0&&(f++,y=[0]),m[c++]=f,a&&y[0]?y[g++]=I[S]||0:(y=[I[S]],g=1);while((S++<_||y[0]!==void 0)&&v--)}return m[0]||m.shift(),p.e=l,bt(p,s?o+nr(p)+1:o)}}();function qX(t,e){var r,n,i,o,s,a,l=0,c=0,f=t.constructor,d=f.precision;if(nr(t)>16)throw Error(f2+nr(t));if(!t.s)return new f(Zn);for(e==null?(Mt=!1,a=d):a=e,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(n=Math.log(Ol(2,c))/Math.LN10*2+5|0,a+=n,r=i=o=new f(Zn),f.precision=a;;){if(i=bt(i.times(t),a),r=r.times(++l),s=o.plus(Ss(i,r,a)),Fo(s.d).slice(0,a)===Fo(o.d).slice(0,a)){for(;c--;)o=bt(o.times(o),a);return f.precision=d,e==null?(Mt=!0,bt(o,d)):o}o=s}}function nr(t){for(var e=t.e*kt,r=t.d[0];r>=10;r/=10)e++;return e}function cC(t,e,r){if(e>t.LN10.sd())throw Mt=!0,r&&(t.precision=r),Error(Ui+"LN10 precision limit exceeded");return bt(new t(t.LN10),e)}function ra(t){for(var e="";t--;)e+="0";return e}function _y(t,e){var r,n,i,o,s,a,l,c,f,d=1,h=10,p=t,m=p.d,y=p.constructor,g=y.precision;if(p.s<1)throw Error(Ui+(p.s?"NaN":"-Infinity"));if(p.eq(Zn))return new y(0);if(e==null?(Mt=!1,c=g):c=e,p.eq(10))return e==null&&(Mt=!0),cC(y,c);if(c+=h,y.precision=c,r=Fo(m),n=r.charAt(0),o=nr(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Fo(p.d),n=r.charAt(0),d++;o=nr(p),n>1?(p=new y("0."+r),o++):p=new y(n+"."+r.slice(1))}else return l=cC(y,c+2,g).times(o+""),p=_y(new y(n+"."+r.slice(1)),c-h).plus(l),y.precision=g,e==null?(Mt=!0,bt(p,g)):p;for(a=s=p=Ss(p.minus(Zn),p.plus(Zn),c),f=bt(p.times(p),c),i=3;;){if(s=bt(s.times(f),c),l=a.plus(Ss(s,new y(i),c)),Fo(l.d).slice(0,c)===Fo(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(cC(y,c+2,g).times(o+""))),a=Ss(a,new y(d),c),y.precision=g,e==null?(Mt=!0,bt(a,g)):a;a=l,i+=2}}function SU(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=mh(r/kt),t.d=[],n=(r+1)%kt,r<0&&(n+=kt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=kt;n<i;)t.d.push(+e.slice(n,n+=kt));e=e.slice(n),n=kt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Mt&&(t.e>q_||t.e<-q_))throw Error(f2+r)}else t.s=0,t.e=0,t.d=[0];return t}function bt(t,e,r){var n,i,o,s,a,l,c,f,d=t.d;for(s=1,o=d[0];o>=10;o/=10)s++;if(n=e-s,n<0)n+=kt,i=e,c=d[f=0];else{if(f=Math.ceil((n+1)/kt),o=d.length,f>=o)return t;for(c=o=d[f],s=1;o>=10;o/=10)s++;n%=kt,i=n-kt+s}if(r!==void 0&&(o=Ol(10,s-i-1),a=c/o%10|0,l=e<0||d[f+1]!==void 0||c%o,l=r<4?(a||l)&&(r==0||r==(t.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?i>0?c/Ol(10,s-i):0:d[f-1])%10&1||r==(t.s<0?8:7))),e<1||!d[0])return l?(o=nr(t),d.length=1,e=e-o-1,d[0]=Ol(10,(kt-e%kt)%kt),t.e=mh(-e/kt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(n==0?(d.length=f,o=1,f--):(d.length=f+1,o=Ol(10,kt-n),d[f]=i>0?(c/Ol(10,s-i)%Ol(10,i)|0)*o:0),l)for(;;)if(f==0){(d[0]+=o)==Ir&&(d[0]=1,++t.e);break}else{if(d[f]+=o,d[f]!=Ir)break;d[f--]=0,o=1}for(n=d.length;d[--n]===0;)d.pop();if(Mt&&(t.e>q_||t.e<-q_))throw Error(f2+nr(t));return t}function HX(t,e){var r,n,i,o,s,a,l,c,f,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Mt?bt(e,p):e;if(l=t.d,d=e.d,n=e.e,c=t.e,l=l.slice(),s=c-n,s){for(f=s<0,f?(r=l,s=-s,a=d.length):(r=d,n=c,a=l.length),i=Math.max(Math.ceil(p/kt),a)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,a=d.length,f=i<a,f&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){f=l[i]<d[i];break}s=0}for(f&&(r=l,l=d,d=r,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=Ir-1;--l[o],l[i]+=Ir}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,Mt?bt(e,p):e):new h(0)}function Dc(t,e,r){var n,i=nr(t),o=Fo(t.d),s=o.length;return e?(r&&(n=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+ra(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ra(-i-1)+o,r&&(n=r-s)>0&&(o+=ra(n))):i>=s?(o+=ra(i+1-s),r&&(n=r-i-1)>0&&(o=o+"."+ra(n))):((n=i+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(o+="."),o+=ra(n))),t.s<0?"-"+o:o}function EU(t,e){if(t.length>e)return t.length=e,!0}function KX(t){var e,r,n;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(bc+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return SU(s,o.toString())}else if(typeof o!="string")throw Error(bc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,g6e.test(o))SU(s,o);else throw Error(bc+o)}if(i.prototype=ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=KX,i.config=i.set=v6e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function v6e(t){if(!t||typeof t!="object")throw Error(Ui+"Object expected");var e,r,n,i=["precision",1,ph,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(mh(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(bc+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(bc+r+": "+n);return this}var d2=KX(y6e);Zn=new d2(1);const gt=d2;function b6e(t){return S6e(t)||w6e(t)||_6e(t)||x6e()}function x6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _6e(t,e){if(t){if(typeof t=="string")return BI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(t,e)}}function w6e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function S6e(t){if(Array.isArray(t))return BI(t)}function BI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E6e=function(e){return e},QX={"@@functional/placeholder":!0},YX=function(e){return e===QX},AU=function(e){return function r(){return arguments.length===0||arguments.length===1&&YX(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},A6e=function t(e,r){return e===1?r:AU(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==QX}).length;return s>=e?r.apply(void 0,i):t(e-s,AU(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var f=i.map(function(d){return YX(d)?l.shift():d});return r.apply(void 0,b6e(f).concat(l))}))})},TS=function(e){return A6e(e.length,e)},UI=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},C6e=TS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),P6e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return E6e;var i=r.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},VI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},XX=function(e){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r&&o.every(function(a,l){return a===r[l]})||(r=o,n=e.apply(void 0,o)),n}};function T6e(t){var e;return t===0?e=1:e=Math.floor(new gt(t).abs().log(10).toNumber())+1,e}function I6e(t,e,r){for(var n=new gt(t),i=0,o=[];n.lt(e)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var N6e=TS(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),k6e=TS(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),O6e=TS(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const IS={rangeStep:I6e,getDigitCount:T6e,interpolateNumber:N6e,uninterpolateNumber:k6e,uninterpolateTruncation:O6e};function WI(t){return $6e(t)||R6e(t)||JX(t)||j6e()}function j6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R6e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function $6e(t){if(Array.isArray(t))return zI(t)}function wy(t,e){return F6e(t)||M6e(t,e)||JX(t,e)||D6e()}function D6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JX(t,e){if(t){if(typeof t=="string")return zI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zI(t,e)}}function zI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M6e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function F6e(t){if(Array.isArray(t))return t}function ZX(t){var e=wy(t,2),r=e[0],n=e[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function eJ(t,e,r){if(t.lte(0))return new gt(0);var n=IS.getDigitCount(t.toNumber()),i=new gt(10).pow(n),o=t.div(i),s=n!==1?.05:.1,a=new gt(Math.ceil(o.div(s).toNumber())).add(r).mul(s),l=a.mul(i);return e?l:new gt(Math.ceil(l))}function L6e(t,e,r){var n=1,i=new gt(t);if(!i.isint()&&r){var o=Math.abs(t);o<1?(n=new gt(10).pow(IS.getDigitCount(t)-1),i=new gt(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new gt(Math.floor(t)))}else t===0?i=new gt(Math.floor((e-1)/2)):r||(i=new gt(Math.floor(t)));var s=Math.floor((e-1)/2),a=P6e(C6e(function(l){return i.add(new gt(l-s).mul(n)).toNumber()}),UI);return a(0,e)}function tJ(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new gt(0),tickMin:new gt(0),tickMax:new gt(0)};var o=eJ(new gt(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new gt(0):(s=new gt(t).add(e).div(2),s=s.sub(new gt(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new gt(e).sub(s).div(o).toNumber()),c=a+l+1;return c>r?tJ(t,e,r,n,i+1):(c<r&&(l=e>0?l+(r-c):l,a=e>0?a:a+(r-c)),{step:o,tickMin:s.sub(new gt(a).mul(o)),tickMax:s.add(new gt(l).mul(o))})}function B6e(t){var e=wy(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=ZX([r,n]),l=wy(a,2),c=l[0],f=l[1];if(c===-1/0||f===1/0){var d=f===1/0?[c].concat(WI(UI(0,i-1).map(function(){return 1/0}))):[].concat(WI(UI(0,i-1).map(function(){return-1/0})),[f]);return r>n?VI(d):d}if(c===f)return L6e(c,i,o);var h=tJ(c,f,s,o),p=h.step,m=h.tickMin,y=h.tickMax,g=IS.rangeStep(m,y.add(new gt(.1).mul(p)),p);return r>n?VI(g):g}function U6e(t,e){var r=wy(t,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=ZX([n,i]),a=wy(s,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var f=Math.max(e,2),d=eJ(new gt(c).sub(l).div(f-1),o,0),h=[].concat(WI(IS.rangeStep(new gt(l),new gt(c).sub(new gt(.99).mul(d)),d)),[c]);return n>i?VI(h):h}var V6e=XX(B6e),W6e=XX(U6e),z6e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H_.apply(this,arguments)}function G6e(t,e){return Q6e(t)||K6e(t,e)||H6e(t,e)||q6e()}function q6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H6e(t,e){if(t){if(typeof t=="string")return CU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CU(t,e)}}function CU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K6e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Q6e(t){if(Array.isArray(t))return t}function Y6e(t,e){if(t==null)return{};var r=X6e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function X6e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function ov(t){var e=t.offset,r=t.layout,n=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,c=Y6e(t,z6e),f=Ke(c),d=o.map(function(h){var p=s(h,i),m=p.x,y=p.y,g=p.value,b=p.errorVal;if(!b)return null;var v=[],x,S;if(Array.isArray(b)){var _=G6e(b,2);x=_[0],S=_[1]}else x=S=b;if(r==="vertical"){var w=a.scale,A=y+e,C=A+n,T=A-n,P=w(g-x),I=w(g+S);v.push({x1:I,y1:C,x2:I,y2:T}),v.push({x1:P,y1:A,x2:I,y2:A}),v.push({x1:P,y1:C,x2:P,y2:T})}else if(r==="horizontal"){var k=l.scale,N=m+e,j=N-n,L=N+n,V=k(g-x),F=k(g+S);v.push({x1:j,y1:F,x2:L,y2:F}),v.push({x1:N,y1:V,x2:N,y2:F}),v.push({x1:j,y1:V,x2:L,y2:V})}return O.createElement(Jt,H_({className:"recharts-errorBar",key:"bar-".concat(v.map(function(M){return"".concat(M.x1,"-").concat(M.x2,"-").concat(M.y1,"-").concat(M.y2)}))},f),v.map(function(M){return O.createElement("line",H_({},M,{key:"line-".concat(M.x1,"-").concat(M.x2,"-").concat(M.y1,"-").concat(M.y2)}))}))});return O.createElement(Jt,{className:"recharts-errorBars"},d)}ov.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};ov.displayName="ErrorBar";function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){J6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J6e(t,e,r){return e=Z6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z6e(t){var e=eWe(t,"string");return Sy(e)==="symbol"?e:String(e)}function eWe(t,e){if(Sy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rJ=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=No(r,ly);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(n||[]).reduce(function(l,c){var f=c.item,d=c.props,h=d.sectors||d.data||[];return l.concat(h.map(function(p){return{type:s.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):a=(n||[]).map(function(l){var c=l.item,f=c.props,d=f.dataKey,h=f.name,p=f.legendType,m=f.hide;return{inactive:m,dataKey:d,type:s.props.iconType||p||"square",color:h2(c),value:h||d,payload:c.props}}),uC(uC(uC({},s.props),ly.getWithHeight(s,i)),{},{payload:a,item:s})};function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function TU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(r),!0).forEach(function(n){xf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xf(t,e,r){return e=tWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tWe(t){var e=rWe(t,"string");return Ey(e)==="symbol"?e:String(e)}function rWe(t,e){if(Ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IU(t){return sWe(t)||oWe(t)||iWe(t)||nWe()}function nWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iWe(t,e){if(t){if(typeof t=="string")return GI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GI(t,e)}}function oWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sWe(t){if(Array.isArray(t))return GI(t)}function GI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ci(t,e,r){return tt(t)||tt(e)?r:hr(e)?Di(t,e,r):Fe(e)?e(t):r}function nm(t,e,r,n){var i=d6e(t,function(a){return ci(a,e)});if(r==="number"){var o=i.filter(function(a){return re(a)||parseFloat(a)});return o.length?[CS(o),AS(o)]:[1/0,-1/0]}var s=n?i.filter(function(a){return!tt(a)}):i;return s.map(function(a){return hr(a)||a instanceof Date?a:""})}var aWe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<a;c++){var f=c>0?i[c-1].coordinate:i[a-1].coordinate,d=i[c].coordinate,h=c>=a-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(lo(d-f)!==lo(h-d)){var m=[];if(lo(h-d)===lo(l[1]-l[0])){p=h;var y=d+l[1]-l[0];m[0]=Math.min(y,(y+f)/2),m[1]=Math.max(y,(y+f)/2)}else{p=f;var g=h+l[1]-l[0];m[0]=Math.min(d,(g+d)/2),m[1]=Math.max(d,(g+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){s=i[c].index;break}}else{var v=Math.min(f,h),x=Math.max(f,h);if(e>(v+d)/2&&e<=(x+d)/2){s=i[c].index;break}}}else for(var S=0;S<a;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},h2=function(e){var r=e,n=r.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(n){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},lWe=function(e){var r=e.barSize,n=e.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var o={},s=Object.keys(i),a=0,l=s.length;a<l;a++)for(var c=i[s[a]].stackGroups,f=Object.keys(c),d=0,h=f.length;d<h;d++){var p=c[f[d]],m=p.items,y=p.cateAxisId,g=m.filter(function(x){return _s(x.type).indexOf("Bar")>=0});if(g&&g.length){var b=g[0].props.barSize,v=g[0].props[y];o[v]||(o[v]=[]),o[v].push({item:g[0],stackList:g.slice(1),barSize:tt(b)?r:b})}}return o},cWe=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var c=bd(r,i,0,!0),f,d=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/l,m=s.reduce(function(S,_){return S+_.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&p>0&&(h=!0,p*=.9,m=l*p);var y=(i-m)/2>>0,g={offset:y-c,size:0};f=s.reduce(function(S,_){var w={item:_.item,position:{offset:g.offset+g.size+c,size:h?p:_.barSize}},A=[].concat(IU(S),[w]);return g=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:g})}),A},d)}else{var b=bd(n,i,0,!0);i-2*b-(l-1)*c<=0&&(c=0);var v=(i-2*b-(l-1)*c)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;f=s.reduce(function(S,_,w){var A=[].concat(IU(S),[{item:_.item,position:{offset:b+(v+c)*w+(v-x)/2,size:x}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:A[A.length-1].position})}),A},d)}return f},uWe=function(e,r,n,i){var o=n.children,s=n.width,a=n.margin,l=s-(a.left||0)-(a.right||0),c=rJ({children:o,legendWidth:l});if(c){var f=i||{},d=f.width,h=f.height,p=c.align,m=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&re(e[p]))return Ci(Ci({},e),{},xf({},p,e[p]+(d||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&re(e[m]))return Ci(Ci({},e),{},xf({},m,e[m]+(h||0)))}return e},fWe=function(e,r,n){return tt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},nJ=function(e,r,n,i,o){var s=r.props.children,a=Mi(s,ov).filter(function(c){return fWe(i,o,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,f){var d=ci(f,n,0),h=Array.isArray(d)?[CS(d),AS(d)]:[d,d],p=l.reduce(function(m,y){var g=ci(f,y,0),b=h[0]-Math.abs(Array.isArray(g)?g[0]:g),v=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},dWe=function(e,r,n,i,o){var s=r.map(function(a){return nJ(e,a,n,o,i)}).filter(function(a){return!tt(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},iJ=function(e,r,n,i,o){var s=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&nJ(e,l,c,i)||nm(e,c,n,o)});if(n==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,c){for(var f=0,d=c.length;f<d;f++)a[c[f]]||(a[c[f]]=!0,l.push(c[f]));return l},[])},oJ=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},NU=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(s=!0),l.coordinate});return o||a.push(r),s||a.push(n),a},Qs=function(e,r,n){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?lo(a[0]-a[1])*2*c:c,r&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(d){var h=o?o.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return f.filter(function(d){return!Jg(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:o?o[d]:d,index:h,offset:c}})},fC=new WeakMap,m0=function(e,r){if(typeof r!="function")return e;fC.has(e)||fC.set(e,new WeakMap);var n=fC.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},hWe=function(e,r,n){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:yy(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:V_(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:rm(),realScaleType:"point"}:o==="category"?{scale:yy(),realScaleType:"band"}:{scale:V_(),realScaleType:"linear"};if(Xg(i)){var l="scale".concat(dS(i));return{scale:(wU[l]||rm)(),realScaleType:wU[l]?l:"point"}}return Fe(i)?{scale:i}:{scale:rm(),realScaleType:"point"}},kU=1e-4,pWe=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),o=Math.min(i[0],i[1])-kU,s=Math.max(i[0],i[1])+kU,a=e(r[0]),l=e(r[n-1]);(a<o||a>s||l<o||l>s)&&e.domain([r[0],r[n-1]])}},mWe=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},yWe=function(e,r){if(!r||r.length!==2||!re(r[0])||!re(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[e[0],e[1]];return(!re(e[0])||e[0]<n)&&(o[0]=n),(!re(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},gWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0,a=0;a<r;++a){var l=Jg(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=o,e[a][n][1]=o+l,o=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+l,s=e[a][n][1])}},vWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0;s<r;++s){var a=Jg(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},bWe={sign:gWe,expand:gje,none:xd,silhouette:vje,wiggle:bje,positive:vWe},xWe=function(e,r,n){var i=r.map(function(a){return a.props.dataKey}),o=bWe[n],s=yje().keys(i).value(function(a,l){return+ci(a,l,0)}).order(uI).offset(o);return s(e)},_We=function(e,r,n,i,o,s){if(!e)return null;var a=s?r.reverse():r,l={},c=a.reduce(function(d,h){var p=h.props,m=p.stackId,y=p.hide;if(y)return d;var g=h.props[n],b=d[g]||{hasStack:!1,stackGroups:{}};if(hr(m)){var v=b.stackGroups[m]||{numericAxisId:n,cateAxisId:i,items:[]};v.items.push(h),b.hasStack=!0,b.stackGroups[m]=v}else b.stackGroups[Zg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return Ci(Ci({},d),{},xf({},g,b))},l),f={};return Object.keys(c).reduce(function(d,h){var p=c[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,g){var b=p.stackGroups[g];return Ci(Ci({},y),{},xf({},g,{numericAxisId:n,cateAxisId:i,items:b.items,stackedData:xWe(e,b.items,o)}))},m)}return Ci(Ci({},d),{},xf({},h,p))},f)},wWe=function(e,r){var n=r.realScaleType,i=r.type,o=r.tickCount,s=r.originalDomain,a=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var f=V6e(c,o,a);return e.domain([CS(f),AS(f)]),{niceTicks:f}}if(o&&i==="number"){var d=e.domain(),h=W6e(d,o,a);return{niceTicks:h}}return null},OU=function(e){var r=e.axis,n=e.ticks,i=e.bandSize,o=e.entry,s=e.index,a=e.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!tt(o[r.dataKey])){var l=m_(n,"value",o[r.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=ci(o,tt(a)?r.dataKey:a);return tt(c)?null:r.scale(c)},jU=function(e){var r=e.axis,n=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(r.type==="category")return n[a]?n[a].coordinate+i:null;var l=ci(s,r.dataKey,r.domain[a]);return tt(l)?null:r.scale(l)-o/2+i},SWe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},EWe=function(e,r){var n=e.props.stackId;if(hr(n)){var i=r[n];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},AWe=function(e){return e.reduce(function(r,n){return[CS(n.concat([r[0]]).filter(re)),AS(n.concat([r[1]]).filter(re))]},[1/0,-1/0])},sJ=function(e,r,n){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(c,f){var d=AWe(f.slice(r,n+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},RU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$U=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qI=function(e,r,n){if(Fe(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(re(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(RU.test(e[0])){var o=+RU.exec(e[0])[1];i[0]=r[0]-o}else Fe(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(re(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if($U.test(e[1])){var s=+$U.exec(e[1])[1];i[1]=r[1]+s}else Fe(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},K_=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var o=BR(r,function(d){return d.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],f=o[a-1];s=Math.min((c.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},DU=function(e,r,n){return!e||!e.length||PS(e,Di(n,"type.defaultProps.domain"))?r:e},aJ=function(e,r){var n=e.props,i=n.dataKey,o=n.name,s=n.unit,a=n.formatter,l=n.tooltipType,c=n.chartType;return Ci(Ci({},Ke(e)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:h2(e),value:ci(r,i),type:l,payload:r,chartType:c})};function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){CWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CWe(t,e,r){return e=PWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PWe(t){var e=TWe(t,"string");return Ay(e)==="symbol"?e:String(e)}function TWe(t,e){if(Ay(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ay(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q_=Math.PI/180,IWe=function(e){return e*180/Math.PI},Kr=function(e,r,n,i){return{x:e+Math.cos(-Q_*i)*n,y:r+Math.sin(-Q_*i)*n}},NWe=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-s,2))},kWe=function(e,r){var n=e.x,i=e.y,o=r.cx,s=r.cy,a=NWe({x:n,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(n-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:IWe(c),angleInRadian:c}},OWe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),s=Math.min(i,o);return{startAngle:r-s*360,endAngle:n-s*360}},jWe=function(e,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},LU=function(e,r){var n=e.x,i=e.y,o=kWe({x:n,y:i},r),s=o.radius,a=o.angle,l=r.innerRadius,c=r.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var f=OWe(r),d=f.startAngle,h=f.endAngle,p=a,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?FU(FU({},r),{},{radius:s,angle:jWe(p,r)}):null};function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}var RWe=["offset"];function $We(t){return LWe(t)||FWe(t)||MWe(t)||DWe()}function DWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MWe(t,e){if(t){if(typeof t=="string")return HI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HI(t,e)}}function FWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LWe(t){if(Array.isArray(t))return HI(t)}function HI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function BWe(t,e){if(t==null)return{};var r=UWe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function UWe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function BU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(r),!0).forEach(function(n){VWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VWe(t,e,r){return e=WWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WWe(t){var e=zWe(t,"string");return Cy(e)==="symbol"?e:String(e)}function zWe(t,e){if(Cy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Py.apply(this,arguments)}var GWe=function(e){var r=e.value,n=e.formatter,i=tt(e.children)?r:e.children;return Fe(n)?n(i):i},qWe=function(e,r){var n=lo(r-e),i=Math.min(Math.abs(r-e),360);return n*i},HWe=function(e,r,n){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,c=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,y=l.clockWise,g=(d+h)/2,b=qWe(p,m),v=b>=0?1:-1,x,S;i==="insideStart"?(x=p+v*s,S=y):i==="insideEnd"?(x=m-v*s,S=!y):i==="end"&&(x=m+v*s,S=y),S=b<=0?S:!S;var _=Kr(c,f,g,x),w=Kr(c,f,g,x+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),C=tt(e.id)?Zg("recharts-radial-line-"):e.id;return O.createElement("text",Py({},n,{dominantBaseline:"central",className:dt("recharts-radial-bar-label",a)}),O.createElement("defs",null,O.createElement("path",{id:C,d:A})),O.createElement("textPath",{xlinkHref:"#".concat(C)},r))},KWe=function(e){var r=e.viewBox,n=e.offset,i=e.position,o=r,s=o.cx,a=o.cy,l=o.innerRadius,c=o.outerRadius,f=o.startAngle,d=o.endAngle,h=(f+d)/2;if(i==="outside"){var p=Kr(s,a,c+n,h),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,b=Kr(s,a,g,h),v=b.x,x=b.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},QWe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,o=e.position,s=r,a=s.x,l=s.y,c=s.width,f=s.height,d=f>=0?1:-1,h=d*i,p=d>0?"end":"start",m=d>0?"start":"end",y=c>=0?1:-1,g=y*i,b=y>0?"end":"start",v=y>0?"start":"end";if(o==="top"){var x={x:a+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:p};return sr(sr({},x),n?{height:Math.max(l-n.y,0),width:c}:{})}if(o==="bottom"){var S={x:a+c/2,y:l+f+h,textAnchor:"middle",verticalAnchor:m};return sr(sr({},S),n?{height:Math.max(n.y+n.height-(l+f),0),width:c}:{})}if(o==="left"){var _={x:a-g,y:l+f/2,textAnchor:b,verticalAnchor:"middle"};return sr(sr({},_),n?{width:Math.max(_.x-n.x,0),height:f}:{})}if(o==="right"){var w={x:a+c+g,y:l+f/2,textAnchor:v,verticalAnchor:"middle"};return sr(sr({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:f}:{})}var A=n?{width:c,height:f}:{};return o==="insideLeft"?sr({x:a+g,y:l+f/2,textAnchor:v,verticalAnchor:"middle"},A):o==="insideRight"?sr({x:a+c-g,y:l+f/2,textAnchor:b,verticalAnchor:"middle"},A):o==="insideTop"?sr({x:a+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},A):o==="insideBottom"?sr({x:a+c/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},A):o==="insideTopLeft"?sr({x:a+g,y:l+h,textAnchor:v,verticalAnchor:m},A):o==="insideTopRight"?sr({x:a+c-g,y:l+h,textAnchor:b,verticalAnchor:m},A):o==="insideBottomLeft"?sr({x:a+g,y:l+f-h,textAnchor:v,verticalAnchor:p},A):o==="insideBottomRight"?sr({x:a+c-g,y:l+f-h,textAnchor:b,verticalAnchor:p},A):oh(o)&&(re(o.x)||zl(o.x))&&(re(o.y)||zl(o.y))?sr({x:a+bd(o.x,c),y:l+bd(o.y,f),textAnchor:"end",verticalAnchor:"end"},A):sr({x:a+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},A)},YWe=function(e){return"cx"in e&&re(e.cx)};function un(t){var e=t.offset,r=e===void 0?5:e,n=BWe(t,RWe),i=sr({offset:r},n),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,f=i.className,d=f===void 0?"":f,h=i.textBreakAll;if(!o||tt(a)&&tt(l)&&!E.isValidElement(c)&&!Fe(c))return null;if(E.isValidElement(c))return E.cloneElement(c,i);var p;if(Fe(c)){if(p=E.createElement(c,i),E.isValidElement(p))return p}else p=GWe(i);var m=YWe(o),y=Ke(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return HWe(i,p,y);var g=m?KWe(i):QWe(i);return O.createElement($_,Py({className:dt("recharts-label",d)},y,g,{breakAll:h}),p)}un.displayName="Label";var lJ=function(e){var r=e.cx,n=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,f=e.outerRadius,d=e.x,h=e.y,p=e.top,m=e.left,y=e.width,g=e.height,b=e.clockWise,v=e.labelViewBox;if(v)return v;if(re(y)&&re(g)){if(re(d)&&re(h))return{x:d,y:h,width:y,height:g};if(re(p)&&re(m))return{x:p,y:m,width:y,height:g}}return re(d)&&re(h)?{x:d,y:h,width:0,height:0}:re(r)&&re(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:f||l||a||0,clockWise:b}:e.viewBox?e.viewBox:{}},XWe=function(e,r){return e?e===!0?O.createElement(un,{key:"label-implicit",viewBox:r}):hr(e)?O.createElement(un,{key:"label-implicit",viewBox:r,value:e}):E.isValidElement(e)?e.type===un?E.cloneElement(e,{key:"label-implicit",viewBox:r}):O.createElement(un,{key:"label-implicit",content:e,viewBox:r}):Fe(e)?O.createElement(un,{key:"label-implicit",content:e,viewBox:r}):oh(e)?O.createElement(un,Py({viewBox:r},e,{key:"label-implicit"})):null:null},JWe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=lJ(e),s=Mi(i,un).map(function(l,c){return E.cloneElement(l,{viewBox:r||o,key:"label-".concat(c)})});if(!n)return s;var a=XWe(e.label,r||o);return[a].concat($We(s))};un.parseViewBox=lJ;un.renderCallByParent=JWe;function ZWe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var e8e=ZWe;const t8e=ct(e8e);function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}var r8e=["valueAccessor"],n8e=["data","dataKey","clockWise","id","textBreakAll"];function i8e(t){return l8e(t)||a8e(t)||s8e(t)||o8e()}function o8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s8e(t,e){if(t){if(typeof t=="string")return KI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KI(t,e)}}function a8e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function l8e(t){if(Array.isArray(t))return KI(t)}function KI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Y_(){return Y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Y_.apply(this,arguments)}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function VU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){c8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c8e(t,e,r){return e=u8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u8e(t){var e=f8e(t,"string");return Ty(e)==="symbol"?e:String(e)}function f8e(t,e){if(Ty(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ty(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WU(t,e){if(t==null)return{};var r=d8e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function d8e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var h8e=function(e){return Array.isArray(e.value)?t8e(e.value):e.value};function Ua(t){var e=t.valueAccessor,r=e===void 0?h8e:e,n=WU(t,r8e),i=n.data,o=n.dataKey,s=n.clockWise,a=n.id,l=n.textBreakAll,c=WU(n,n8e);return!i||!i.length?null:O.createElement(Jt,{className:"recharts-label-list"},i.map(function(f,d){var h=tt(o)?r(f,d):ci(f&&f.payload,o),p=tt(a)?{}:{id:"".concat(a,"-").concat(d)};return O.createElement(un,Y_({},Ke(f,!0),c,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:un.parseViewBox(tt(s)?f:VU(VU({},f),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Ua.displayName="LabelList";function p8e(t,e){return t?t===!0?O.createElement(Ua,{key:"labelList-implicit",data:e}):O.isValidElement(t)||Fe(t)?O.createElement(Ua,{key:"labelList-implicit",data:e,content:t}):oh(t)?O.createElement(Ua,Y_({data:e},t,{key:"labelList-implicit"})):null:null}function m8e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Mi(n,Ua).map(function(s,a){return E.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!r)return i;var o=p8e(t.label,e);return[o].concat(i8e(i))}Ua.renderCallByParent=m8e;function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QI.apply(this,arguments)}function zU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(r),!0).forEach(function(n){y8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y8e(t,e,r){return e=g8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g8e(t){var e=v8e(t,"string");return Iy(e)==="symbol"?e:String(e)}function v8e(t,e){if(Iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b8e=function(e,r){var n=lo(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},y0=function(e){var r=e.cx,n=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,f=l*(a?1:-1)+i,d=Math.asin(l/f)/Q_,h=c?o:o+s*d,p=Kr(r,n,f,h),m=Kr(r,n,i,h),y=c?o-s*d:o,g=Kr(r,n,f*Math.cos(d*Q_),y);return{center:p,circleTangency:m,lineTangency:g,theta:d}},cJ=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=b8e(s,a),c=s+l,f=Kr(r,n,o,s),d=Kr(r,n,o,c),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=Kr(r,n,i,s),m=Kr(r,n,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},x8e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,f=e.endAngle,d=lo(f-c),h=y0({cx:r,cy:n,radius:o,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,y=h.theta,g=y0({cx:r,cy:n,radius:o,angle:f,sign:-d,cornerRadius:s,cornerIsExternal:l}),b=g.circleTangency,v=g.lineTangency,x=g.theta,S=l?Math.abs(c-f):Math.abs(c-f)-y-x;if(S<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):cJ({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:f});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var w=y0({cx:r,cy:n,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=w.circleTangency,C=w.lineTangency,T=w.theta,P=y0({cx:r,cy:n,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),I=P.circleTangency,k=P.lineTangency,N=P.theta,j=l?Math.abs(c-f):Math.abs(c-f)-T-N;if(j<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},_8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uJ=function(e){var r=GU(GU({},_8e),e),n=r.cx,i=r.cy,o=r.innerRadius,s=r.outerRadius,a=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(s<o||f===d)return null;var p=dt("recharts-sector",h),m=s-o,y=bd(a,m,0,!0),g;return y>0&&Math.abs(f-d)<360?g=x8e({cx:n,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(y,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:d}):g=cJ({cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:f,endAngle:d}),O.createElement("path",QI({},Ke(r,!0),{className:p,d:g,role:"img"}))};function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YI.apply(this,arguments)}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){w8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w8e(t,e,r){return e=S8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S8e(t){var e=E8e(t,"string");return Ny(e)==="symbol"?e:String(e)}function E8e(t,e){if(Ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KU={curveBasisClosed:oje,curveBasisOpen:sje,curveBasis:ije,curveBumpX:zOe,curveBumpY:GOe,curveLinearClosed:aje,curveLinear:pS,curveMonotoneX:lje,curveMonotoneY:cje,curveNatural:uje,curveStep:fje,curveStepAfter:hje,curveStepBefore:dje},g0=function(e){return e.x===+e.x&&e.y===+e.y},Xh=function(e){return e.x},Jh=function(e){return e.y},A8e=function(e,r){if(Fe(e))return e;var n="curve".concat(dS(e));return(n==="curveMonotone"||n==="curveBump")&&r?KU["".concat(n).concat(r==="vertical"?"Y":"X")]:KU[n]||pS},C8e=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,f=A8e(n,a),d=c?o.filter(function(y){return g0(y)}):o,h;if(Array.isArray(s)){var p=c?s.filter(function(y){return g0(y)}):s,m=d.map(function(y,g){return HU(HU({},y),{},{base:p[g]})});return a==="vertical"?h=s0().y(Jh).x1(Xh).x0(function(y){return y.base.x}):h=s0().x(Xh).y1(Jh).y0(function(y){return y.base.y}),h.defined(g0).curve(f),h(m)}return a==="vertical"&&re(s)?h=s0().y(Jh).x1(Xh).x0(s):re(s)?h=s0().x(Xh).y1(Jh).y0(s):h=sY().x(Xh).y(Jh),h.defined(g0).curve(f),h(d)},XI=function(e){var r=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?C8e(e):i;return O.createElement("path",YI({},Ke(e),y_(e),{className:dt("recharts-curve",r),d:s,ref:o}))};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function X_(){return X_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},X_.apply(this,arguments)}function P8e(t,e){return k8e(t)||N8e(t,e)||I8e(t,e)||T8e()}function T8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8e(t,e){if(t){if(typeof t=="string")return QU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QU(t,e)}}function QU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N8e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function k8e(t){if(Array.isArray(t))return t}function YU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(r),!0).forEach(function(n){O8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O8e(t,e,r){return e=j8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j8e(t){var e=R8e(t,"string");return ky(e)==="symbol"?e:String(e)}function R8e(t,e){if(ky(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ky(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JU=function(e,r,n,i,o){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,f;if(s>0&&o instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=o[h]>s?s:o[h];f="M".concat(e,",").concat(r+a*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(r)),f+="L ".concat(e+n-l*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(r+a*d[1])),f+="L ".concat(e+n,",").concat(r+i-a*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+n-l*d[2],",").concat(r+i)),f+="L ".concat(e+l*d[3],",").concat(r+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(r+i-a*d[3])),f+="Z"}else if(s>0&&o===+o&&o>0){var m=Math.min(s,o);f="M ".concat(e,",").concat(r+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(r,`
            L `).concat(e+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n,",").concat(r+a*m,`
            L `).concat(e+n,",").concat(r+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n-l*m,",").concat(r+i,`
            L `).concat(e+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(r+i-a*m," Z")}else f="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return f},$8e=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,o=r.x,s=r.y,a=r.width,l=r.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(o,o+a),f=Math.max(o,o+a),d=Math.min(s,s+l),h=Math.max(s,s+l);return n>=c&&n<=f&&i>=d&&i<=h}return!1},D8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},p2=function(e){var r=XU(XU({},D8e),e),n=E.useRef(),i=E.useState(-1),o=P8e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&a(S)}catch{}},[]);var l=r.x,c=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,v=r.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||f===0||d===0)return null;var x=dt("recharts-rectangle",p);return v?O.createElement(ks,{canBegin:s>0,from:{width:f,height:d,x:l,y:c},to:{width:f,height:d,x:l,y:c},duration:y,animationEasing:m,isActive:v},function(S){var _=S.width,w=S.height,A=S.x,C=S.y;return O.createElement(ks,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:b,easing:m},O.createElement("path",X_({},Ke(r,!0),{className:x,d:JU(A,C,_,w,h),ref:n})))}):O.createElement("path",X_({},Ke(r,!0),{className:x,d:JU(l,c,f,d,h)}))};function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JI.apply(this,arguments)}var m2=function(e){var r=e.cx,n=e.cy,i=e.r,o=e.className,s=dt("recharts-dot",o);return r===+r&&n===+n&&i===+i?O.createElement("circle",JI({},Ke(e),y_(e),{className:s,cx:r,cy:n,r:i})):null};function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}var M8e=["x","y","top","left","width","height","className"];function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZI.apply(this,arguments)}function ZU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function F8e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(r),!0).forEach(function(n){L8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L8e(t,e,r){return e=B8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B8e(t){var e=U8e(t,"string");return Oy(e)==="symbol"?e:String(e)}function U8e(t,e){if(Oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V8e(t,e){if(t==null)return{};var r=W8e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function W8e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var z8e=function(e,r,n,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},G8e=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,c=l===void 0?0:l,f=e.width,d=f===void 0?0:f,h=e.height,p=h===void 0?0:h,m=e.className,y=V8e(e,M8e),g=F8e({x:n,y:o,top:a,left:c,width:d,height:p},y);return!re(n)||!re(o)||!re(d)||!re(p)||!re(a)||!re(c)?null:O.createElement("path",ZI({},Ke(g,!0),{className:dt("recharts-cross",m),d:z8e(n,o,d,p,a,c)}))},q8e=IY,H8e=q8e(Object.getPrototypeOf,Object),K8e=H8e,Q8e=Fs,Y8e=K8e,X8e=Ls,J8e="[object Object]",Z8e=Function.prototype,e9e=Object.prototype,fJ=Z8e.toString,t9e=e9e.hasOwnProperty,r9e=fJ.call(Object);function n9e(t){if(!X8e(t)||Q8e(t)!=J8e)return!1;var e=Y8e(t);if(e===null)return!0;var r=t9e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&fJ.call(r)==r9e}var i9e=n9e;const o9e=ct(i9e);var s9e=Fs,a9e=Ls,l9e="[object Boolean]";function c9e(t){return t===!0||t===!1||a9e(t)&&s9e(t)==l9e}var u9e=c9e;const f9e=ct(u9e);function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J_.apply(this,arguments)}function d9e(t,e){return y9e(t)||m9e(t,e)||p9e(t,e)||h9e()}function h9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p9e(t,e){if(t){if(typeof t=="string")return eV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eV(t,e)}}function eV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m9e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function y9e(t){if(Array.isArray(t))return t}function tV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(r),!0).forEach(function(n){g9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g9e(t,e,r){return e=v9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v9e(t){var e=b9e(t,"string");return jy(e)==="symbol"?e:String(e)}function b9e(t,e){if(jy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nV=function(e,r,n,i,o){var s=n-i,a;return a="M ".concat(e,",").concat(r),a+="L ".concat(e+n,",").concat(r),a+="L ".concat(e+n-s/2,",").concat(r+o),a+="L ".concat(e+n-s/2-i,",").concat(r+o),a+="L ".concat(e,",").concat(r," Z"),a},x9e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_9e=function(e){var r=rV(rV({},x9e),e),n=E.useRef(),i=E.useState(-1),o=d9e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&a(x)}catch{}},[]);var l=r.x,c=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(l!==+l||c!==+c||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var v=dt("recharts-trapezoid",p);return b?O.createElement(ks,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:c},duration:y,animationEasing:m,isActive:b},function(x){var S=x.upperWidth,_=x.lowerWidth,w=x.height,A=x.x,C=x.y;return O.createElement(ks,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:m},O.createElement("path",J_({},Ke(r,!0),{className:v,d:nV(A,C,S,_,w),ref:n})))}):O.createElement("g",null,O.createElement("path",J_({},Ke(r,!0),{className:v,d:nV(l,c,f,d,h)})))},w9e=["option","shapeType","propTransformer","activeClassName","isActive"];function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function S9e(t,e){if(t==null)return{};var r=E9e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E9e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function iV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Z_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(r),!0).forEach(function(n){A9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A9e(t,e,r){return e=C9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C9e(t){var e=P9e(t,"string");return Ry(e)==="symbol"?e:String(e)}function P9e(t,e){if(Ry(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ry(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T9e(t,e){return Z_(Z_({},e),t)}function I9e(t,e){return t==="symbols"}function oV(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return O.createElement(p2,r);case"trapezoid":return O.createElement(_9e,r);case"sector":return O.createElement(uJ,r);case"symbols":if(I9e(e))return O.createElement(OR,r);break;default:return null}}function N9e(t){return E.isValidElement(t)?t.props:t}function k9e(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?T9e:n,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=S9e(t,w9e),c;if(E.isValidElement(e))c=E.cloneElement(e,Z_(Z_({},l),N9e(e)));else if(Fe(e))c=e(l);else if(o9e(e)&&!f9e(e)){var f=i(e,l);c=O.createElement(oV,{shapeType:r,elementProps:f})}else{var d=l;c=O.createElement(oV,{shapeType:r,elementProps:d})}return a?O.createElement(Jt,{className:s},c):c}function NS(t,e){return e!=null&&"trapezoids"in t.props}function kS(t,e){return e!=null&&"sectors"in t.props}function $y(t,e){return e!=null&&"points"in t.props}function O9e(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,o=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&o}function j9e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function R9e(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function $9e(t,e){var r;return NS(t,e)?r=O9e:kS(t,e)?r=j9e:$y(t,e)&&(r=R9e),r}function D9e(t,e){var r;return NS(t,e)?r="trapezoids":kS(t,e)?r="sectors":$y(t,e)&&(r="points"),r}function M9e(t,e){if(NS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(kS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return $y(t,e)?e.payload:{}}function F9e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=D9e(r,e),o=M9e(r,e),s=n.filter(function(l,c){var f=PS(o,l),d=r.props[i].filter(function(m){var y=$9e(r,e);return y(m,e)}),h=r.props[i].indexOf(d[d.length-1]),p=c===h;return f&&p}),a=n.indexOf(s[s.length-1]);return a}var L9e=Math.ceil,B9e=Math.max;function U9e(t,e,r,n){for(var i=-1,o=B9e(L9e((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var V9e=U9e,W9e=rX,sV=1/0,z9e=17976931348623157e292;function G9e(t){if(!t)return t===0?t:0;if(t=W9e(t),t===sV||t===-sV){var e=t<0?-1:1;return e*z9e}return t===t?t:0}var dJ=G9e,q9e=V9e,H9e=vS,dC=dJ;function K9e(t){return function(e,r,n){return n&&typeof n!="number"&&H9e(e,r,n)&&(r=n=void 0),e=dC(e),r===void 0?(r=e,e=0):r=dC(r),n=n===void 0?e<r?1:-1:dC(n),q9e(e,r,n,t)}}var Q9e=K9e,Y9e=Q9e,X9e=Y9e(),J9e=X9e;const ew=ct(J9e);function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function aV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(r),!0).forEach(function(n){hJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hJ(t,e,r){return e=Z9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z9e(t){var e=eze(t,"string");return Dy(e)==="symbol"?e:String(e)}function eze(t,e){if(Dy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Dy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tze=["Webkit","Moz","O","ms"],rze=function(e,r){if(!e)return null;var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=tze.reduce(function(o,s){return lV(lV({},o),{},hJ({},s+n,r))},{});return i[e]=r,i};function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function tw(){return tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tw.apply(this,arguments)}function cV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(r),!0).forEach(function(n){Kn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pJ(n.key),n)}}function ize(t,e,r){return e&&uV(t.prototype,e),r&&uV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function oze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eN(t,e)}function eN(t,e){return eN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},eN(t,e)}function sze(t){var e=lze();return function(){var n=rw(t),i;if(e){var o=rw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return aze(this,i)}}function aze(t,e){if(e&&(Nd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xo(t)}function xo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rw(t){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rw(t)}function Kn(t,e,r){return e=pJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pJ(t){var e=cze(t,"string");return Nd(e)==="symbol"?e:String(e)}function cze(t,e){if(Nd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Nd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uze=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=rm().domain(ew(0,l)).range([o,o+s-a]),f=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:f}},fV=function(e){return e.changedTouches&&!!e.changedTouches.length},kd=function(t){oze(r,t);var e=sze(r);function r(n){var i;return nze(this,r),i=e.call(this,n),Kn(xo(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),Kn(xo(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),Kn(xo(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,s=o.endIndex,a=o.onDragEnd,l=o.startIndex;a==null||a({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),Kn(xo(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Kn(xo(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Kn(xo(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Kn(xo(i),"handleSlideDragStart",function(o){var s=fV(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(xo(i),"startX"),endX:i.handleTravellerDragStart.bind(xo(i),"endX")},i.state={},i}return ize(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,s=i.endX,a=this.state.scaleValues,l=this.props,c=l.gap,f=l.data,d=f.length-1,h=Math.min(o,s),p=Math.max(o,s),m=r.getIndexInRange(a,h),y=r.getIndexInRange(a,p);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(i){var o=this.props,s=o.data,a=o.tickFormatter,l=o.dataKey,c=ci(s[i],l,i);return Fe(a)?a(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,s=o.slideMoveStartX,a=o.startX,l=o.endX,c=this.props,f=c.x,d=c.width,h=c.travellerWidth,p=c.startIndex,m=c.endIndex,y=c.onChange,g=i.pageX-s;g>0?g=Math.min(g,f+d-h-l,f+d-h-a):g<0&&(g=Math.max(g,f-a,f-l));var b=this.getIndex({startX:a+g,endX:l+g});(b.startIndex!==p||b.endIndex!==m)&&y&&y(b),this.setState({startX:a+g,endX:l+g,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var s=fV(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,s=this.state,a=s.brushMoveStartX,l=s.movingTravellerId,c=s.endX,f=s.startX,d=this.state[l],h=this.props,p=h.x,m=h.width,y=h.travellerWidth,g=h.onChange,b=h.gap,v=h.data,x={startX:this.state.startX,endX:this.state.endX},S=i.pageX-a;S>0?S=Math.min(S,p+m-y-d):S<0&&(S=Math.max(S,p-d)),x[l]=d+S;var _=this.getIndex(x),w=_.startIndex,A=_.endIndex,C=function(){var P=v.length-1;return l==="startX"&&(c>f?w%b===0:A%b===0)||c<f&&A===P||l==="endX"&&(c>f?A%b===0:w%b===0)||c>f&&A===P};this.setState((o={},Kn(o,l,d+S),Kn(o,"brushMoveStartX",i.pageX),o),function(){g&&C()&&g(_)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var s=this,a=this.state,l=a.scaleValues,c=a.startX,f=a.endX,d=this.state[o],h=l.indexOf(d);if(h!==-1){var p=h+i;if(!(p===-1||p>=l.length)){var m=l[p];o==="startX"&&m>=f||o==="endX"&&m<=c||this.setState(Kn({},o,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.fill,f=i.stroke;return O.createElement("rect",{stroke:f,fill:c,x:o,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.data,f=i.children,d=i.padding,h=E.Children.only(f);return h?O.cloneElement(h,{x:o,y:s,width:a,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,o){var s=this,a=this.props,l=a.y,c=a.travellerWidth,f=a.height,d=a.traveller,h=a.ariaLabel,p=a.data,m=a.startIndex,y=a.endIndex,g=Math.max(i,this.props.x),b=hC(hC({},Ke(this.props)),{},{x:g,y:l,width:c,height:f}),v=h||"Min value: ".concat(p[m].name,", Max value: ").concat(p[y].name);return O.createElement(Jt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,o))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(d,b))}},{key:"renderSlide",value:function(i,o){var s=this.props,a=s.y,l=s.height,c=s.stroke,f=s.travellerWidth,d=Math.min(i,o)+f,h=Math.max(Math.abs(o-i)-f,0);return O.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:h,height:l})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,s=i.endIndex,a=i.y,l=i.height,c=i.travellerWidth,f=i.stroke,d=this.state,h=d.startX,p=d.endX,m=5,y={pointerEvents:"none",fill:f};return O.createElement(Jt,{className:"recharts-brush-texts"},O.createElement($_,tw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-m,y:a+l/2},y),this.getTextOfTick(o)),O.createElement($_,tw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+m,y:a+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,o=i.data,s=i.className,a=i.children,l=i.x,c=i.y,f=i.width,d=i.height,h=i.alwaysShowText,p=this.state,m=p.startX,y=p.endX,g=p.isTextActive,b=p.isSlideMoving,v=p.isTravellerMoving,x=p.isTravellerFocused;if(!o||!o.length||!re(l)||!re(c)||!re(f)||!re(d)||f<=0||d<=0)return null;var S=dt("recharts-brush",s),_=O.Children.count(a)===1,w=rze("userSelect","none");return O.createElement(Jt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||b||v||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,s=i.y,a=i.width,l=i.height,c=i.stroke,f=Math.floor(s+l/2)-1;return O.createElement(O.Fragment,null,O.createElement("rect",{x:o,y:s,width:a,height:l,fill:c,stroke:"none"}),O.createElement("line",{x1:o+1,y1:f,x2:o+a-1,y2:f,fill:"none",stroke:"#fff"}),O.createElement("line",{x1:o+1,y1:f+2,x2:o+a-1,y2:f+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var s;return O.isValidElement(i)?s=O.cloneElement(i,o):Fe(i)?s=i(o):s=r.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(i,o){var s=i.data,a=i.width,l=i.x,c=i.travellerWidth,f=i.updateId,d=i.startIndex,h=i.endIndex;if(s!==o.prevData||f!==o.prevUpdateId)return hC({prevData:s,prevTravellerWidth:c,prevUpdateId:f,prevX:l,prevWidth:a},s&&s.length?uze({data:s,width:a,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(o.scale&&(a!==o.prevWidth||l!==o.prevX||c!==o.prevTravellerWidth)){o.scale.range([l,l+a-c]);var p=o.scale.domain().map(function(m){return o.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:f,prevX:l,prevWidth:a,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(i,o){for(var s=i.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);i[c]>o?l=c:a=c}return o>=i[l]?l:a}}]),r}(E.PureComponent);Kn(kd,"displayName","Brush");Kn(kd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var fze=LR;function dze(t,e){var r;return fze(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var hze=dze,pze=_Y,mze=ul,yze=hze,gze=zn,vze=vS;function bze(t,e,r){var n=gze(t)?pze:yze;return r&&vze(t,e,r)&&(e=void 0),n(t,mze(e))}var xze=bze;const _ze=ct(xze);var Ho=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},dV=WY;function wze(t,e,r){e=="__proto__"&&dV?dV(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Sze=wze,Eze=Sze,Aze=UY,Cze=ul;function Pze(t,e){var r={};return e=Cze(e),Aze(t,function(n,i,o){Eze(r,i,e(n,i,o))}),r}var Tze=Pze;const Ize=ct(Tze);function Nze(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var kze=Nze,Oze=LR;function jze(t,e){var r=!0;return Oze(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var Rze=jze,$ze=kze,Dze=Rze,Mze=ul,Fze=zn,Lze=vS;function Bze(t,e,r){var n=Fze(t)?$ze:Dze;return r&&Lze(t,e,r)&&(e=void 0),n(t,Mze(e))}var Uze=Bze;const mJ=ct(Uze);function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}var Vze=["x","y"];function tN(){return tN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tN.apply(this,arguments)}function hV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(r),!0).forEach(function(n){Wze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wze(t,e,r){return e=zze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zze(t){var e=Gze(t,"string");return My(e)==="symbol"?e:String(e)}function Gze(t,e){if(My(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(My(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qze(t,e){if(t==null)return{};var r=Hze(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hze(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Kze(t,e){var r=t.x,n=t.y,i=qze(t,Vze),o="".concat(r),s=parseInt(o,10),a="".concat(n),l=parseInt(a,10),c="".concat(e.height||i.height),f=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Zh(Zh(Zh(Zh(Zh({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:f,width:h,name:e.name,radius:e.radius})}function pV(t){return O.createElement(k9e,tN({shapeType:"rectangle",propTransformer:Kze,activeClassName:"recharts-active-bar"},t))}var Qze=["value","background"];function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}function Yze(t,e){if(t==null)return{};var r=Xze(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xze(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function nw(){return nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nw.apply(this,arguments)}function mV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(r),!0).forEach(function(n){Ea(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yJ(n.key),n)}}function Zze(t,e,r){return e&&yV(t.prototype,e),r&&yV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function eGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rN(t,e)}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rN(t,e)}function tGe(t){var e=nGe();return function(){var n=iw(t),i;if(e){var o=iw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return rGe(this,i)}}function rGe(t,e){if(e&&(Od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wp(t)}function wp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iw(t){return iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iw(t)}function Ea(t,e,r){return e=yJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yJ(t){var e=iGe(t,"string");return Od(e)==="symbol"?e:String(e)}function iGe(t,e){if(Od(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Od(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OS=function(t){eGe(r,t);var e=tGe(r);function r(){var n;Jze(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),Ea(wp(n),"state",{isAnimationFinished:!1}),Ea(wp(n),"id",Zg("recharts-bar-")),Ea(wp(n),"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Ea(wp(n),"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return Zze(r,[{key:"renderRectanglesStatically",value:function(i){var o=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,f=s.activeBar,d=Ke(this.props);return i&&i.map(function(h,p){var m=p===c,y=m?f:a,g=xr(xr(xr({},d),h),{},{isActive:m,option:y,index:p,dataKey:l,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return O.createElement(Jt,nw({className:"recharts-bar-rectangle"},g_(o.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value)}),O.createElement(pV,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,s=o.data,a=o.layout,l=o.isAnimationActive,c=o.animationBegin,f=o.animationDuration,d=o.animationEasing,h=o.animationId,p=this.state.prevData;return O.createElement(ks,{begin:c,duration:f,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=s.map(function(b,v){var x=p&&p[v];if(x){var S=eo(x.x,b.x),_=eo(x.y,b.y),w=eo(x.width,b.width),A=eo(x.height,b.height);return xr(xr({},b),{},{x:S(y),y:_(y),width:w(y),height:A(y)})}if(a==="horizontal"){var C=eo(0,b.height),T=C(y);return xr(xr({},b),{},{y:b.y+b.height-T,height:T})}var P=eo(0,b.width),I=P(y);return xr(xr({},b),{},{width:I})});return O.createElement(Jt,null,i.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,s=i.isAnimationActive,a=this.state.prevData;return s&&o&&o.length&&(!a||!PS(a,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,s=o.data,a=o.dataKey,l=o.activeIndex,c=Ke(this.props.background);return s.map(function(f,d){f.value;var h=f.background,p=Yze(f,Qze);if(!h)return null;var m=xr(xr(xr(xr(xr({},p),{},{fill:"#eee"},h),c),g_(i.props,f,d)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:a,index:d,key:"background-bar-".concat(d),className:"recharts-bar-background-rectangle"});return O.createElement(pV,nw({option:i.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,f=s.layout,d=s.children,h=Mi(d,ov);if(!h)return null;var p=f==="vertical"?a[0].height/2:a[0].width/2,m=function(b,v){var x=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:x,errorVal:ci(b,v)}},y={clipPath:i?"url(#clipPath-".concat(o,")"):null};return O.createElement(Jt,y,h.map(function(g){return O.cloneElement(g,{key:"error-bar-".concat(o,"-").concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:f,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,s=i.data,a=i.className,l=i.xAxis,c=i.yAxis,f=i.left,d=i.top,h=i.width,p=i.height,m=i.isAnimationActive,y=i.background,g=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,v=dt("recharts-bar",a),x=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,_=x||S,w=tt(g)?this.id:g;return O.createElement(Jt,{className:v},x||S?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(w)},O.createElement("rect",{x:x?f:f-h/2,y:S?d:d-p/2,width:x?h:h*2,height:S?p:p*2}))):null,O.createElement(Jt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!m||b)&&Ua.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}]),r}(E.PureComponent);Ea(OS,"displayName","Bar");Ea(OS,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!ws.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ea(OS,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,f=t.dataStartIndex,d=t.displayedData,h=t.offset,p=mWe(n,r);if(!p)return null;var m=e.layout,y=r.props,g=y.dataKey,b=y.children,v=y.minPointSize,x=m==="horizontal"?s:o,S=c?x.scale.domain():null,_=SWe({numericAxis:x}),w=Mi(b,oX),A=d.map(function(C,T){var P,I,k,N,j,L;if(c?P=yWe(c[f+T],S):(P=ci(C,g),Array.isArray(P)||(P=[_,P])),m==="horizontal"){var V,F=[s.scale(P[0]),s.scale(P[1])],M=F[0],B=F[1];I=jU({axis:o,ticks:a,bandSize:i,offset:p.offset,entry:C,index:T}),k=(V=B??M)!==null&&V!==void 0?V:void 0,N=p.size;var z=M-B;if(j=Number.isNaN(z)?0:z,L={x:I,y:s.y,width:N,height:s.height},Math.abs(v)>0&&Math.abs(j)<Math.abs(v)){var ae=lo(j||v)*(Math.abs(v)-Math.abs(j));k-=ae,j+=ae}}else{var te=[o.scale(P[0]),o.scale(P[1])],ge=te[0],Le=te[1];if(I=ge,k=jU({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:C,index:T}),N=Le-ge,j=p.size,L={x:o.x,y:k,width:o.width,height:j},Math.abs(v)>0&&Math.abs(N)<Math.abs(v)){var Qe=lo(N||v)*(Math.abs(v)-Math.abs(N));N+=Qe}}return xr(xr(xr({},C),{},{x:I,y:k,width:N,height:j,value:c?P:P[1],payload:C,background:L},w&&w[T]&&w[T].props),{},{tooltipPayload:[aJ(r,C)],tooltipPosition:{x:I+N/2,y:k+j/2}})});return xr({data:A,layout:m},h)});function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function oGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gJ(n.key),n)}}function sGe(t,e,r){return e&&gV(t.prototype,e),r&&gV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(r),!0).forEach(function(n){jS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jS(t,e,r){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gJ(t){var e=aGe(t,"string");return Fy(e)==="symbol"?e:String(e)}function aGe(t,e){if(Fy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lGe=function(e,r,n,i,o){var s=e.width,a=e.height,l=e.layout,c=e.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},h=!!No(c,OS);return f.reduce(function(p,m){var y=r[m],g=y.orientation,b=y.domain,v=y.padding,x=v===void 0?{}:v,S=y.mirror,_=y.reversed,w="".concat(g).concat(S?"Mirror":""),A,C,T,P,I;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var k=b[1]-b[0],N=1/0,j=y.categoricalDomain.sort();j.forEach(function(Le,Qe){Qe>0&&(N=Math.min((Le||0)-(j[Qe-1]||0),N))});var L=N/k,V=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(A=L*V/2),y.padding==="no-gap"){var F=bd(e.barCategoryGap,L*V),M=L*V/2;A=M-F-(M-F)/V*F}}i==="xAxis"?C=[n.left+(x.left||0)+(A||0),n.left+n.width-(x.right||0)-(A||0)]:i==="yAxis"?C=l==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(A||0),n.top+n.height-(x.bottom||0)-(A||0)]:C=y.range,_&&(C=[C[1],C[0]]);var B=hWe(y,o,h),z=B.scale,ae=B.realScaleType;z.domain(b).range(C),pWe(z);var te=wWe(z,Yi(Yi({},y),{},{realScaleType:ae}));i==="xAxis"?(I=g==="top"&&!S||g==="bottom"&&S,T=n.left,P=d[w]-I*y.height):i==="yAxis"&&(I=g==="left"&&!S||g==="right"&&S,T=d[w]-I*y.width,P=n.top);var ge=Yi(Yi(Yi({},y),te),{},{realScaleType:ae,x:T,y:P,scale:z,width:i==="xAxis"?n.width:y.width,height:i==="yAxis"?n.height:y.height});return ge.bandSize=K_(ge,te),!y.hide&&i==="xAxis"?d[w]+=(I?-1:1)*ge.height:y.hide||(d[w]+=(I?-1:1)*ge.width),Yi(Yi({},p),{},jS({},m,ge))},{})},vJ=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return{x:Math.min(n,o),y:Math.min(i,s),width:Math.abs(o-n),height:Math.abs(s-i)}},cGe=function(e){var r=e.x1,n=e.y1,i=e.x2,o=e.y2;return vJ({x:r,y:n},{x:i,y:o})},bJ=function(){function t(e){oGe(this,t),this.scale=e}return sGe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(r)+a}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}]),t}();jS(bJ,"EPS",1e-4);var y2=function(e){var r=Object.keys(e).reduce(function(n,i){return Yi(Yi({},n),{},jS({},i,bJ.create(e[i])))},{});return Yi(Yi({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return Ize(i,function(l,c){return r[c].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return mJ(i,function(o,s){return r[s].isInRange(o)})}})};function uGe(t){return(t%180+180)%180}var fGe=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=uGe(i),s=o*Math.PI/180,a=Math.atan(n/r),l=s>a&&s<Math.PI-a?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)};function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function bV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(r),!0).forEach(function(n){dGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dGe(t,e,r){return e=hGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hGe(t){var e=pGe(t,"string");return Ly(e)==="symbol"?e:String(e)}function pGe(t,e){if(Ly(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ly(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mGe(t,e){return bGe(t)||vGe(t,e)||gGe(t,e)||yGe()}function yGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gGe(t,e){if(t){if(typeof t=="string")return _V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _V(t,e)}}function _V(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vGe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function bGe(t){if(Array.isArray(t))return t}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nN.apply(this,arguments)}var xGe=function(e,r){var n;return O.isValidElement(e)?n=O.cloneElement(e,r):Fe(e)?n=e(r):n=O.createElement("line",nN({},r,{className:"recharts-reference-line-line"})),n},_Ge=function(e,r,n,i,o){var s=o.viewBox,a=s.x,l=s.y,c=s.width,f=s.height,d=o.position;if(n){var h=o.y,p=o.yAxis.orientation,m=e.y.apply(h,{position:d});if(Ho(o,"discard")&&!e.y.isInRange(m))return null;var y=[{x:a+c,y:m},{x:a,y:m}];return p==="left"?y.reverse():y}if(r){var g=o.x,b=o.xAxis.orientation,v=e.x.apply(g,{position:d});if(Ho(o,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:l+f},{x:v,y:l}];return b==="top"?x.reverse():x}if(i){var S=o.segment,_=S.map(function(w){return e.apply(w,{position:d})});return Ho(o,"discard")&&_ze(_,function(w){return!e.isInRange(w)})?null:_}return null};function g2(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxis,o=t.yAxis,s=t.shape,a=t.className,l=t.alwaysShow,c=t.clipPathId;gc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=y2({x:i.scale,y:o.scale}),d=hr(e),h=hr(r),p=n&&n.length===2,m=_Ge(f,d,h,p,t);if(!m)return null;var y=mGe(m,2),g=y[0],b=g.x,v=g.y,x=y[1],S=x.x,_=x.y,w=Ho(t,"hidden")?"url(#".concat(c,")"):void 0,A=xV(xV({clipPath:w},Ke(t,!0)),{},{x1:b,y1:v,x2:S,y2:_});return O.createElement(Jt,{className:dt("recharts-reference-line",a)},xGe(s,A),un.renderCallByParent(t,cGe({x1:b,y1:v,x2:S,y2:_})))}g2.displayName="ReferenceLine";g2.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function iN(){return iN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iN.apply(this,arguments)}function wV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(r),!0).forEach(function(n){wGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wGe(t,e,r){return e=SGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SGe(t){var e=EGe(t,"string");return By(e)==="symbol"?e:String(e)}function EGe(t,e){if(By(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(By(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AGe=function(e){var r=e.x,n=e.y,i=e.xAxis,o=e.yAxis,s=y2({x:i.scale,y:o.scale}),a=s.apply({x:r,y:n},{bandAware:!0});return Ho(e,"discard")&&!s.isInRange(a)?null:a};function sv(t){var e=t.x,r=t.y,n=t.r,i=t.alwaysShow,o=t.clipPathId,s=hr(e),a=hr(r);if(gc(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=AGe(t);if(!l)return null;var c=l.x,f=l.y,d=t.shape,h=t.className,p=Ho(t,"hidden")?"url(#".concat(o,")"):void 0,m=SV(SV({clipPath:p},Ke(t,!0)),{},{cx:c,cy:f});return O.createElement(Jt,{className:dt("recharts-reference-dot",h)},sv.renderDot(d,m),un.renderCallByParent(t,{x:c-n,y:f-n,width:2*n,height:2*n}))}sv.displayName="ReferenceDot";sv.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};sv.renderDot=function(t,e){var r;return O.isValidElement(t)?r=O.cloneElement(t,e):Fe(t)?r=t(e):r=O.createElement(m2,iN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r};function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oN.apply(this,arguments)}function EV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(r),!0).forEach(function(n){CGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CGe(t,e,r){return e=PGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PGe(t){var e=TGe(t,"string");return Uy(e)==="symbol"?e:String(e)}function TGe(t,e){if(Uy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Uy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IGe=function(e,r,n,i,o){var s=o.x1,a=o.x2,l=o.y1,c=o.y2,f=o.xAxis,d=o.yAxis;if(!f||!d)return null;var h=y2({x:f.scale,y:d.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Ho(o,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:vJ(p,m)};function av(t){var e=t.x1,r=t.x2,n=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;gc(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=hr(e),c=hr(r),f=hr(n),d=hr(i),h=t.shape;if(!l&&!c&&!f&&!d&&!h)return null;var p=IGe(l,c,f,d,t);if(!p&&!h)return null;var m=Ho(t,"hidden")?"url(#".concat(a,")"):void 0;return O.createElement(Jt,{className:dt("recharts-reference-area",o)},av.renderRect(h,AV(AV({clipPath:m},Ke(t,!0)),p)),un.renderCallByParent(t,p))}av.displayName="ReferenceArea";av.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};av.renderRect=function(t,e){var r;return O.isValidElement(t)?r=O.cloneElement(t,e):Fe(t)?r=t(e):r=O.createElement(p2,oN({},e,{className:"recharts-reference-area-rect"})),r};function xJ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)if(r===void 0||r(t[i])===!0)n.push(t[i]);else return;return n}function NGe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return fGe(n,r)}function kGe(t,e,r){var n=r==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:n?i:o,end:n?i+s:o+a}:{start:n?i+s:o+a,end:n?i:o}}function ow(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function OGe(t,e){return xJ(t,e+1)}function jGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=e.start,a=e.end,l=0,c=1,f=s,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:xJ(n,c)};var y=l,g,b=function(){return g===void 0&&(g=r(m,y)),g},v=m.coordinate,x=l===0||ow(t,v,b,f,a);x||(l=0,f=s,c+=1),x&&(f=v+t*(b()/2+i),l+=c)},h;c<=o.length;)if(h=d(),h)return h.v;return[]}function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(t)}function CV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function on(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CV(Object(r),!0).forEach(function(n){RGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RGe(t,e,r){return e=$Ge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ge(t){var e=DGe(t,"string");return Vy(e)==="symbol"?e:String(e)}function DGe(t,e){if(Vy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=o.length,a=e.start,l=e.end,c=function(h){var p=o[h],m,y=function(){return m===void 0&&(m=r(p,h)),m};if(h===s-1){var g=t*(p.coordinate+t*y()/2-l);o[h]=p=on(on({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else o[h]=p=on(on({},p),{},{tickCoord:p.coordinate});var b=ow(t,p.tickCoord,y,a,l);b&&(l=p.tickCoord-t*(y()/2+i),o[h]=on(on({},p),{},{isShow:!0}))},f=s-1;f>=0;f--)c(f);return o}function FGe(t,e,r,n,i,o){var s=(n||[]).slice(),a=s.length,l=e.start,c=e.end;if(o){var f=n[a-1],d=r(f,a-1),h=t*(f.coordinate+t*d/2-c);s[a-1]=f=on(on({},f),{},{tickCoord:h>0?f.coordinate-h*t:f.coordinate});var p=ow(t,f.tickCoord,function(){return d},l,c);p&&(c=f.tickCoord-t*(d/2+i),s[a-1]=on(on({},f),{},{isShow:!0}))}for(var m=o?a-1:a,y=function(v){var x=s[v],S,_=function(){return S===void 0&&(S=r(x,v)),S};if(v===0){var w=t*(x.coordinate-t*_()/2-l);s[v]=x=on(on({},x),{},{tickCoord:w<0?x.coordinate-w*t:x.coordinate})}else s[v]=x=on(on({},x),{},{tickCoord:x.coordinate});var A=ow(t,x.tickCoord,_,l,c);A&&(l=x.tickCoord+t*(_()/2+i),s[v]=on(on({},x),{},{isShow:!0}))},g=0;g<m;g++)y(g);return s}function sN(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,f=t.unit,d=t.angle;if(!i||!i.length||!n)return[];if(re(l)||ws.isSsr)return OGe(i,typeof l=="number"&&re(l)?l:0);var h=[],p=a==="top"||a==="bottom"?"width":"height",m=f&&p==="width"?tm(f,{fontSize:e,letterSpacing:r}):{width:0,height:0},y=function(x,S){var _=Fe(c)?c(x.value,S):x.value;return p==="width"?NGe(tm(_,{fontSize:e,letterSpacing:r}),m,d):tm(_,{fontSize:e,letterSpacing:r})[p]},g=i.length>=2?lo(i[1].coordinate-i[0].coordinate):1,b=kGe(o,g,p);return l==="equidistantPreserveStart"?jGe(g,b,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?h=FGe(g,b,y,i,s,l==="preserveStartEnd"):h=MGe(g,b,y,i,s),h.filter(function(v){return v.isShow}))}var LGe=["viewBox"],BGe=["viewBox"],UGe=["ticks"];function jd(t){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qu.apply(this,arguments)}function PV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(r),!0).forEach(function(n){v2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pC(t,e){if(t==null)return{};var r=VGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function WGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_J(n.key),n)}}function zGe(t,e,r){return e&&TV(t.prototype,e),r&&TV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function GGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aN(t,e)}function aN(t,e){return aN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},aN(t,e)}function qGe(t){var e=QGe();return function(){var n=sw(t),i;if(e){var o=sw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return HGe(this,i)}}function HGe(t,e){if(e&&(jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KGe(t)}function KGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sw(t){return sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sw(t)}function v2(t,e,r){return e=_J(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _J(t){var e=YGe(t,"string");return jd(e)==="symbol"?e:String(e)}function YGe(t,e){if(jd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var im=function(t){GGe(r,t);var e=qGe(r);function r(n){var i;return WGe(this,r),i=e.call(this,n),i.state={fontSize:"",letterSpacing:""},i}return zGe(r,[{key:"shouldComponentUpdate",value:function(i,o){var s=i.viewBox,a=pC(i,LGe),l=this.props,c=l.viewBox,f=pC(l,BGe);return!vf(s,c)||!vf(a,f)||!vf(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,s=o.x,a=o.y,l=o.width,c=o.height,f=o.orientation,d=o.tickSize,h=o.mirror,p=o.tickMargin,m,y,g,b,v,x,S=h?-1:1,_=i.tickSize||d,w=re(i.tickCoord)?i.tickCoord:i.coordinate;switch(f){case"top":m=y=i.coordinate,b=a+ +!h*c,g=b-S*_,x=g-S*p,v=w;break;case"left":g=b=i.coordinate,y=s+ +!h*l,m=y-S*_,v=m-S*p,x=w;break;case"right":g=b=i.coordinate,y=s+ +h*l,m=y+S*_,v=m+S*p,x=w;break;default:m=y=i.coordinate,b=a+ +h*c,g=b+S*_,x=g+S*p,v=w;break}return{line:{x1:m,y1:g,x2:y,y2:b},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a;switch(o){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a="end";switch(o){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.orientation,f=i.mirror,d=i.axisLine,h=vn(vn(vn({},Ke(this.props)),Ke(d)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!f||c==="bottom"&&f);h=vn(vn({},h),{},{x1:o,y1:s+p*l,x2:o+a,y2:s+p*l})}else{var m=+(c==="left"&&!f||c==="right"&&f);h=vn(vn({},h),{},{x1:o+m*a,y1:s,x2:o+m*a,y2:s+l})}return O.createElement("line",qu({},h,{className:dt("recharts-cartesian-axis-line",Di(d,"className"))}))}},{key:"renderTicks",value:function(i,o,s){var a=this,l=this.props,c=l.tickLine,f=l.stroke,d=l.tick,h=l.tickFormatter,p=l.unit,m=sN(vn(vn({},this.props),{},{ticks:i}),o,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=Ke(this.props),v=Ke(d),x=vn(vn({},b),{},{fill:"none"},Ke(c)),S=m.map(function(_,w){var A=a.getTickLineCoord(_),C=A.line,T=A.tick,P=vn(vn(vn(vn({textAnchor:y,verticalAnchor:g},b),{},{stroke:"none",fill:f},v),T),{},{index:w,payload:_,visibleTicksCount:m.length,tickFormatter:h});return O.createElement(Jt,qu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},g_(a.props,_,w)),c&&O.createElement("line",qu({},x,C,{className:dt("recharts-cartesian-axis-tick-line",Di(c,"className"))})),d&&r.renderTickItem(d,P,"".concat(Fe(h)?h(_.value,w):_.value).concat(p||"")))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var i=this,o=this.props,s=o.axisLine,a=o.width,l=o.height,c=o.ticksGenerator,f=o.className,d=o.hide;if(d)return null;var h=this.props,p=h.ticks,m=pC(h,UGe),y=p;return Fe(c)&&(y=p&&p.length>0?c(this.props):c(m)),a<=0||l<=0||!y||!y.length?null:O.createElement(Jt,{className:dt("recharts-cartesian-axis",f),ref:function(b){i.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),un.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,s){var a;return O.isValidElement(i)?a=O.cloneElement(i,o):Fe(i)?a=i(o):a=O.createElement($_,qu({},o,{className:"recharts-cartesian-axis-tick-value"}),s),a}}]),r}(E.Component);v2(im,"displayName","CartesianAxis");v2(im,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var XGe=["x1","y1","x2","y2","key"],JGe=["offset"];function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(t)}function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lN.apply(this,arguments)}function IV(t,e){if(t==null)return{};var r=ZGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ZGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function NV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Gs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(r),!0).forEach(function(n){b2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wJ(n.key),n)}}function tqe(t,e,r){return e&&kV(t.prototype,e),r&&kV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cN(t,e)}function cN(t,e){return cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cN(t,e)}function nqe(t){var e=sqe();return function(){var n=aw(t),i;if(e){var o=aw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return iqe(this,i)}}function iqe(t,e){if(e&&(Rd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oqe(t)}function oqe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aw(t){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aw(t)}function b2(t,e,r){return e=wJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wJ(t){var e=aqe(t,"string");return Rd(e)==="symbol"?e:String(e)}function aqe(t,e){if(Rd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RS=function(t){rqe(r,t);var e=nqe(r);function r(){return eqe(this,r),e.apply(this,arguments)}return tqe(r,[{key:"renderHorizontal",value:function(i){var o=this,s=this.props,a=s.x,l=s.width,c=s.horizontal;if(!i||!i.length)return null;var f=i.map(function(d,h){var p=Gs(Gs({},o.props),{},{x1:a,y1:d,x2:a+l,y2:d,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}},{key:"renderVertical",value:function(i){var o=this,s=this.props,a=s.y,l=s.height,c=s.vertical;if(!i||!i.length)return null;var f=i.map(function(d,h){var p=Gs(Gs({},o.props),{},{x1:d,y1:a,x2:d,y2:a+l,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,f=s.width,d=s.height,h=i.map(function(m){return Math.round(m+l-l)}).sort(function(m,y){return m-y});l!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?l+f-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return O.createElement("rect",{key:"react-".concat(y),x:m,y:c,width:b,height:d,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,f=s.width,d=s.height,h=i.map(function(m){return Math.round(m+c-c)}).sort(function(m,y){return m-y});c!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?c+d-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return O.createElement("rect",{key:"react-".concat(y),y:m,x:l,height:b,width:f,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,s=o.fillOpacity,a=o.x,l=o.y,c=o.width,f=o.height;return O.createElement("rect",{x:a,y:l,width:c,height:f,stroke:"none",fill:i,fillOpacity:s,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.horizontal,f=i.vertical,d=i.horizontalCoordinatesGenerator,h=i.verticalCoordinatesGenerator,p=i.xAxis,m=i.yAxis,y=i.offset,g=i.chartWidth,b=i.chartHeight,v=i.syncWithTicks,x=i.horizontalValues,S=i.verticalValues;if(!re(a)||a<=0||!re(l)||l<=0||!re(o)||o!==+o||!re(s)||s!==+s)return null;var _=this.props,w=_.horizontalPoints,A=_.verticalPoints;if((!w||!w.length)&&Fe(d)){var C=x&&x.length;w=d({yAxis:m?Gs(Gs({},m),{},{ticks:C?x:m.ticks}):void 0,width:g,height:b,offset:y},C?!0:v)}if((!A||!A.length)&&Fe(h)){var T=S&&S.length;A=h({xAxis:p?Gs(Gs({},p),{},{ticks:T?S:p.ticks}):void 0,width:g,height:b,offset:y},T?!0:v)}return O.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),c&&this.renderHorizontal(w),f&&this.renderVertical(A),c&&this.renderHorizontalStripes(w),f&&this.renderVerticalStripes(A))}}],[{key:"renderLineItem",value:function(i,o){var s;if(O.isValidElement(i))s=O.cloneElement(i,o);else if(Fe(i))s=i(o);else{var a=o.x1,l=o.y1,c=o.x2,f=o.y2,d=o.key,h=IV(o,XGe),p=Ke(h);p.offset;var m=IV(p,JGe);s=O.createElement("line",lN({},m,{x1:a,y1:l,x2:c,y2:f,fill:"none",key:d}))}return s}}]),r}(E.PureComponent);b2(RS,"displayName","CartesianGrid");b2(RS,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var lqe=["type","layout","connectNulls","ref"];function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(t)}function cqe(t,e){if(t==null)return{};var r=uqe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uqe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},om.apply(this,arguments)}function OV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(r),!0).forEach(function(n){Xi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uu(t){return pqe(t)||hqe(t)||dqe(t)||fqe()}function fqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dqe(t,e){if(t){if(typeof t=="string")return uN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uN(t,e)}}function hqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pqe(t){if(Array.isArray(t))return uN(t)}function uN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SJ(n.key),n)}}function yqe(t,e,r){return e&&jV(t.prototype,e),r&&jV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}function fN(t,e){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fN(t,e)}function vqe(t){var e=xqe();return function(){var n=lw(t),i;if(e){var o=lw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bqe(this,i)}}function bqe(t,e){if(e&&($d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ys(t)}function Ys(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lw(t){return lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lw(t)}function Xi(t,e,r){return e=SJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SJ(t){var e=_qe(t,"string");return $d(e)==="symbol"?e:String(e)}function _qe(t,e){if($d(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $n=function(t){gqe(r,t);var e=vqe(r);function r(){var n;mqe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),Xi(Ys(n),"state",{isAnimationFinished:!0,totalLength:0}),Xi(Ys(n),"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Xi(Ys(n),"getStrokeDasharray",function(a,l,c){var f=c.reduce(function(v,x){return v+x});if(!f)return n.generateSimpleStrokeDasharray(l,a);for(var d=Math.floor(a/f),h=a%f,p=l-a,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>h){m=[].concat(uu(c.slice(0,y)),[h-g]);break}var b=m.length%2===0?[0,p]:[p];return[].concat(uu(r.repeat(c,d)),uu(m),b).map(function(v){return"".concat(v,"px")}).join(", ")}),Xi(Ys(n),"id",Zg("recharts-line-")),Xi(Ys(n),"pathRef",function(a){n.mainCurve=a}),Xi(Ys(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Xi(Ys(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return yqe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,l=s.xAxis,c=s.yAxis,f=s.layout,d=s.children,h=Mi(d,ov);if(!h)return null;var p=function(g,b){return{x:g.x,y:g.y,value:g.value,errorVal:ci(g.payload,b)}},m={clipPath:i?"url(#clipPath-".concat(o,")"):null};return O.createElement(Jt,m,h.map(function(y){return O.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:l,yAxis:c,layout:f,dataPointFormatter:p})}))}},{key:"renderDots",value:function(i,o,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,f=l.points,d=l.dataKey,h=Ke(this.props),p=Ke(c,!0),m=f.map(function(g,b){var v=Hn(Hn(Hn({key:"dot-".concat(b),r:3},h),p),{},{value:g.value,dataKey:d,cx:g.x,cy:g.y,index:b,payload:g.payload});return r.renderDotItem(c,v)}),y={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(s,")"):null};return O.createElement(Jt,om({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(i,o,s,a){var l=this.props,c=l.type,f=l.layout,d=l.connectNulls;l.ref;var h=cqe(l,lqe),p=Hn(Hn(Hn({},Ke(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(s,")"):null,points:i},a),{},{type:c,layout:f,connectNulls:d});return O.createElement(XI,om({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,f=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=a.animateNewValues,g=a.width,b=a.height,v=this.state,x=v.prevPoints,S=v.totalLength;return O.createElement(ks,{begin:d,duration:h,isActive:f,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(x){var A=x.length/l.length,C=l.map(function(N,j){var L=Math.floor(j*A);if(x[L]){var V=x[L],F=eo(V.x,N.x),M=eo(V.y,N.y);return Hn(Hn({},N),{},{x:F(w),y:M(w)})}if(y){var B=eo(g*2,N.x),z=eo(b/2,N.y);return Hn(Hn({},N),{},{x:B(w),y:z(w)})}return Hn(Hn({},N),{},{x:N.x,y:N.y})});return s.renderCurveStatically(C,i,o)}var T=eo(0,S),P=T(w),I;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});I=s.getStrokeDasharray(P,S,k)}else I=s.generateSimpleStrokeDasharray(S,P);return s.renderCurveStatically(l,i,o,{strokeDasharray:I})})}},{key:"renderCurve",value:function(i,o){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,f=c.prevPoints,d=c.totalLength;return l&&a&&a.length&&(!f&&d>0||!PS(f,a))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(a,i,o)}},{key:"render",value:function(){var i,o=this.props,s=o.hide,a=o.dot,l=o.points,c=o.className,f=o.xAxis,d=o.yAxis,h=o.top,p=o.left,m=o.width,y=o.height,g=o.isAnimationActive,b=o.id;if(s||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,S=dt("recharts-line",c),_=f&&f.allowDataOverflow,w=d&&d.allowDataOverflow,A=_||w,C=tt(b)?this.id:b,T=(i=Ke(a))!==null&&i!==void 0?i:{r:3,strokeWidth:2},P=T.r,I=P===void 0?3:P,k=T.strokeWidth,N=k===void 0?2:k,j=Uke(a)?a:{},L=j.clipDot,V=L===void 0?!0:L,F=I*2+N;return O.createElement(Jt,{className:S},_||w?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(C)},O.createElement("rect",{x:_?p:p-m/2,y:w?h:h-y/2,width:_?m:m*2,height:w?y:y*2})),!V&&O.createElement("clipPath",{id:"clipPath-dots-".concat(C)},O.createElement("rect",{x:p-F/2,y:h-F/2,width:m+F,height:y+F}))):null,!x&&this.renderCurve(A,C),this.renderErrorBar(A,C),(x||a)&&this.renderDots(A,V,C),(!g||v)&&Ua.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var s=i.length%2!==0?[].concat(uu(i),[0]):i,a=[],l=0;l<o;++l)a=[].concat(uu(a),uu(s));return a}},{key:"renderDotItem",value:function(i,o){var s;if(O.isValidElement(i))s=O.cloneElement(i,o);else if(Fe(i))s=i(o);else{var a=dt("recharts-line-dot",i?i.className:"");s=O.createElement(m2,om({},o,{className:a}))}return s}}]),r}(E.PureComponent);Xi($n,"displayName","Line");Xi($n,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ws.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Xi($n,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,f=e.layout,d=l.map(function(h,p){var m=ci(h,s);return f==="horizontal"?{x:OU({axis:r,ticks:i,bandSize:a,entry:h,index:p}),y:tt(m)?null:n.scale(m),value:m,payload:h}:{x:tt(m)?null:r.scale(m),y:OU({axis:n,ticks:o,bandSize:a,entry:h,index:p}),value:m,payload:h}});return Hn({points:d,layout:f},c)});var lv=function(){return null};lv.displayName="XAxis";lv.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var cv=function(){return null};cv.displayName="YAxis";cv.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var wqe=ul,Sqe=ev,Eqe=yS;function Aqe(t){return function(e,r,n){var i=Object(e);if(!Sqe(e)){var o=wqe(r);e=Eqe(e),r=function(a){return o(i[a],a,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:void 0}}var Cqe=Aqe,Pqe=dJ;function Tqe(t){var e=Pqe(t),r=e%1;return e===e?r?e-r:e:0}var Iqe=Tqe,Nqe=$Y,kqe=ul,Oqe=Iqe,jqe=Math.max;function Rqe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Oqe(r);return i<0&&(i=jqe(n+i,0)),Nqe(t,kqe(e),i)}var $qe=Rqe,Dqe=Cqe,Mqe=$qe,Fqe=Dqe(Mqe),Lqe=Fqe;const Bqe=ct(Lqe);function RV(t){return zqe(t)||Wqe(t)||Vqe(t)||Uqe()}function Uqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vqe(t,e){if(t){if(typeof t=="string")return dN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dN(t,e)}}function Wqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zqe(t){if(Array.isArray(t))return dN(t)}function dN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var hN=function(e,r,n,i,o){var s=Mi(e,g2),a=Mi(e,sv),l=[].concat(RV(s),RV(a)),c=Mi(e,av),f="".concat(i,"Id"),d=i[0],h=r;if(l.length&&(h=l.reduce(function(y,g){if(g.props[f]===n&&Ho(g.props,"extendDomain")&&re(g.props[d])){var b=g.props[d];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},h)),c.length){var p="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(y,g){if(g.props[f]===n&&Ho(g.props,"extendDomain")&&re(g.props[p])&&re(g.props[m])){var b=g.props[p],v=g.props[m];return[Math.min(y[0],b,v),Math.max(y[1],b,v)]}return y},h)}return o&&o.length&&(h=o.reduce(function(y,g){return re(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},h)),h},EJ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function o(l,c,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||l,h),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)e.call(f,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},a.prototype.listeners=function(c){var f=r?r+c:c,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(c){var f=r?r+c:c,d=this._events[f];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,f,d,h,p,m){var y=r?r+c:c;if(!this._events[y])return!1;var g=this._events[y],b=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,d),!0;case 4:return g.fn.call(g.context,f,d,h),!0;case 5:return g.fn.call(g.context,f,d,h,p),!0;case 6:return g.fn.call(g.context,f,d,h,p,m),!0}for(x=1,v=new Array(b-1);x<b;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var S=g.length,_;for(x=0;x<S;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),b){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,f);break;case 3:g[x].fn.call(g[x].context,f,d);break;case 4:g[x].fn.call(g[x].context,f,d,h);break;default:if(!v)for(_=1,v=new Array(b-1);_<b;_++)v[_-1]=arguments[_];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,f,d){return o(this,c,f,d,!1)},a.prototype.once=function(c,f,d){return o(this,c,f,d,!0)},a.prototype.removeListener=function(c,f,d,h){var p=r?r+c:c;if(!this._events[p])return this;if(!f)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===f&&(!h||m.once)&&(!d||m.context===d)&&s(this,p);else{for(var y=0,g=[],b=m.length;y<b;y++)(m[y].fn!==f||h&&!m[y].once||d&&m[y].context!==d)&&g.push(m[y]);g.length?this._events[p]=g.length===1?g[0]:g:s(this,p)}return this},a.prototype.removeAllListeners=function(c){var f;return c?(f=r?r+c:c,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(EJ);var Gqe=EJ.exports;const qqe=ct(Gqe);var mC=new qqe,yC="recharts.syncMouseEvents";function Wy(t){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(t)}function Hqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AJ(n.key),n)}}function Kqe(t,e,r){return e&&$V(t.prototype,e),r&&$V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gC(t,e,r){return e=AJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AJ(t){var e=Qqe(t,"string");return Wy(e)==="symbol"?e:String(e)}function Qqe(t,e){if(Wy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Wy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yqe=function(){function t(){Hqe(this,t),gC(this,"activeIndex",0),gC(this,"coordinateList",[]),gC(this,"layout","horizontal")}return Kqe(t,[{key:"setDetails",value:function(r){var n=r.coordinateList,i=n===void 0?[]:n,o=r.container,s=o===void 0?null:o,a=r.layout,l=a===void 0?null:a,c=r.offset,f=c===void 0?null:c,d=r.mouseHandlerCallback,h=d===void 0?null:d;this.coordinateList=i??this.coordinateList,this.container=s??this.container,this.layout=l??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=o+l+c,h=s+this.offset.top+a/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}]),t}();function Xqe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&re(n)&&re(i))return!0}return!1}function Jqe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function CJ(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,o=t.endAngle,s=Kr(e,r,n,i),a=Kr(e,r,n,o);return{points:[s,a],cx:e,cy:r,radius:n,startAngle:i,endAngle:o}}function Zqe(t,e,r){var n,i,o,s;if(t==="horizontal")n=e.x,o=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,o=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,f=e.outerRadius,d=e.angle,h=Kr(a,l,c,d),p=Kr(a,l,f,d);n=h.x,i=h.y,o=p.x,s=p.y}else return CJ(e);return[{x:n,y:i},{x:o,y:s}]}function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function DV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function v0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(r),!0).forEach(function(n){eHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eHe(t,e,r){return e=tHe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tHe(t){var e=rHe(t,"string");return zy(e)==="symbol"?e:String(e)}function rHe(t,e){if(zy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nHe(t){var e=t.element,r=t.tooltipEventType,n=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,c=t.layout,f=t.chartName;if(!e||!e.props.cursor||!n||!i||f!=="ScatterChart"&&r!=="axis")return null;var d,h=XI;if(f==="ScatterChart")d=i,h=G8e;else if(f==="BarChart")d=Jqe(c,i,s,l),h=p2;else if(c==="radial"){var p=CJ(i),m=p.cx,y=p.cy,g=p.radius,b=p.startAngle,v=p.endAngle;d={cx:m,cy:y,startAngle:b,endAngle:v,innerRadius:g,outerRadius:g},h=uJ}else d={points:Zqe(c,i,s)},h=XI;var x=v0(v0(v0(v0({stroke:"#ccc",pointerEvents:"none"},s),d),Ke(e.props.cursor)),{},{payload:o,payloadIndex:a,className:"recharts-tooltip-cursor"});return E.isValidElement(e.props.cursor)?E.cloneElement(e.props.cursor,x):E.createElement(h,x)}var iHe=["item"],oHe=["children","className","width","height","style","compact","title","desc"];function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(t)}function MV(t,e){return lHe(t)||aHe(t,e)||PJ(t,e)||sHe()}function sHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aHe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function lHe(t){if(Array.isArray(t))return t}function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hu.apply(this,arguments)}function FV(t,e){if(t==null)return{};var r=cHe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cHe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function uHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TJ(n.key),n)}}function fHe(t,e,r){return e&&LV(t.prototype,e),r&&LV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pN(t,e)}function pN(t,e){return pN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},pN(t,e)}function hHe(t){var e=mHe();return function(){var n=cw(t),i;if(e){var o=cw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return pHe(this,i)}}function pHe(t,e){if(e&&(Dd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ne(t)}function Ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cw(t){return cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cw(t)}function Md(t){return vHe(t)||gHe(t)||PJ(t)||yHe()}function yHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PJ(t,e){if(t){if(typeof t=="string")return mN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mN(t,e)}}function gHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vHe(t){if(Array.isArray(t))return mN(t)}function mN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function BV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BV(Object(r),!0).forEach(function(n){ve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ve(t,e,r){return e=TJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TJ(t){var e=bHe(t,"string");return Dd(e)==="symbol"?e:String(e)}function bHe(t,e){if(Dd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Dd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xHe={xAxis:["bottom","top"],yAxis:["left","right"]},_He={width:"100%",height:"100%"},IJ={x:0,y:0},wHe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},SHe=function(e,r,n,i){var o=r.find(function(f){return f&&f.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return G(G(G({},i),Kr(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,c=i.angle;return G(G(G({},i),Kr(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return IJ},$S=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,s=(n??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(Md(a),Md(c)):a},[]);return s.length>0?s:e&&e.length&&re(i)&&re(o)?e.slice(i,o+1):[]};function NJ(t){return t==="number"?[0,"auto"]:void 0}var kJ=function(e,r,n,i){var o=e.graphicalItems,s=e.tooltipAxis,a=$S(r,e);return n<0||!o||!o.length||n>=a.length?null:o.reduce(function(l,c){var f,d=c.props.hide;if(d)return l;var h=(f=c.props.data)!==null&&f!==void 0?f:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var m=h===void 0?a:h;p=m_(m,s.dataKey,i)}else p=h&&h[n]||a[n];return p?[].concat(Md(l),[aJ(c,p)]):l},[])},UV=function(e,r,n,i){var o=i||{x:e.chartX,y:e.chartY},s=wHe(o,n),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,f=aWe(s,a,c,l);if(f>=0&&c){var d=c[f]&&c[f].value,h=kJ(e,r,f,d),p=SHe(n,a,f,o);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},EHe=function(e,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,f=e.layout,d=e.children,h=e.stackOffset,p=oJ(f,o);return n.reduce(function(m,y){var g,b=y.props,v=b.type,x=b.dataKey,S=b.allowDataOverflow,_=b.allowDuplicatedCategory,w=b.scale,A=b.ticks,C=b.includeHidden,T=y.props[s];if(m[T])return m;var P=$S(e.data,{graphicalItems:i.filter(function(te){return te.props[s]===T}),dataStartIndex:l,dataEndIndex:c}),I=P.length,k,N,j;Xqe(y.props.domain,S,v)&&(k=qI(y.props.domain,null,S),p&&(v==="number"||w!=="auto")&&(j=nm(P,x,"category")));var L=NJ(v);if(!k||k.length===0){var V,F=(V=y.props.domain)!==null&&V!==void 0?V:L;if(x){if(k=nm(P,x,v),v==="category"&&p){var M=Oke(k);_&&M?(N=k,k=ew(0,I)):_||(k=DU(F,k,y).reduce(function(te,ge){return te.indexOf(ge)>=0?te:[].concat(Md(te),[ge])},[]))}else if(v==="category")_?k=k.filter(function(te){return te!==""&&!tt(te)}):k=DU(F,k,y).reduce(function(te,ge){return te.indexOf(ge)>=0||ge===""||tt(ge)?te:[].concat(Md(te),[ge])},[]);else if(v==="number"){var B=dWe(P,i.filter(function(te){return te.props[s]===T&&(C||!te.props.hide)}),x,o,f);B&&(k=B)}p&&(v==="number"||w!=="auto")&&(j=nm(P,x,"category"))}else p?k=ew(0,I):a&&a[T]&&a[T].hasStack&&v==="number"?k=h==="expand"?[0,1]:sJ(a[T].stackGroups,l,c):k=iJ(P,i.filter(function(te){return te.props[s]===T&&(C||!te.props.hide)}),v,f,!0);if(v==="number")k=hN(d,k,T,o,A),F&&(k=qI(F,k,S));else if(v==="category"&&F){var z=F,ae=k.every(function(te){return z.indexOf(te)>=0});ae&&(k=z)}}return G(G({},m),{},ve({},T,G(G({},y.props),{},{axisType:o,domain:k,categoricalDomain:j,duplicateDomain:N,originalDomain:(g=y.props.domain)!==null&&g!==void 0?g:L,isCategorical:p,layout:f})))},{})},AHe=function(e,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,f=e.layout,d=e.children,h=$S(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=h.length,m=oJ(f,o),y=-1;return n.reduce(function(g,b){var v=b.props[s],x=NJ("number");if(!g[v]){y++;var S;return m?S=ew(0,p):a&&a[v]&&a[v].hasStack?(S=sJ(a[v].stackGroups,l,c),S=hN(d,S,v,o)):(S=qI(x,iJ(h,n.filter(function(_){return _.props[s]===v&&!_.props.hide}),"number",f),i.defaultProps.allowDataOverflow),S=hN(d,S,v,o)),G(G({},g),{},ve({},v,G(G({axisType:o},i.defaultProps),{},{hide:!0,orientation:Di(xHe,"".concat(o,".").concat(y%2),null),domain:S,originalDomain:x,isCategorical:m,layout:f})))}return g},{})},CHe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,s=r.graphicalItems,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,f=e.children,d="".concat(i,"Id"),h=Mi(f,o),p={};return h&&h.length?p=EHe(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(p=AHe(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),p},PHe=function(e){var r=Ks(e),n=Qs(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:BR(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:K_(r,n)}},VV=function(e){var r=e.children,n=e.defaultShowTooltip,i=No(r,kd),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},THe=function(e){return!e||!e.length?!1:e.some(function(r){var n=_s(r&&r.type);return n&&n.indexOf("Bar")>=0})},WV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IHe=function(e,r){var n=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,c=n.width,f=n.height,d=n.children,h=n.margin||{},p=No(d,kd),m=No(d,ly),y=Object.keys(l).reduce(function(_,w){var A=l[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},ve({},C,_[C]+A.width)):_},{left:h.left||0,right:h.right||0}),g=Object.keys(s).reduce(function(_,w){var A=s[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},ve({},C,Di(_,"".concat(C))+A.height)):_},{top:h.top||0,bottom:h.bottom||0}),b=G(G({},g),y),v=b.bottom;p&&(b.bottom+=p.props.height||kd.defaultProps.height),m&&r&&(b=uWe(b,i,n,r));var x=c-b.left-b.right,S=f-b.top-b.bottom;return G(G({brushBottom:v},b),{},{width:Math.max(x,0),height:Math.max(S,0)})},NHe=function(e){var r,n=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,f=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(g,b){var v=b.graphicalItems,x=b.stackGroups,S=b.offset,_=b.updateId,w=b.dataStartIndex,A=b.dataEndIndex,C=g.barSize,T=g.layout,P=g.barGap,I=g.barCategoryGap,k=g.maxBarSize,N=WV(T),j=N.numericAxisName,L=N.cateAxisName,V=THe(v),F=V&&lWe({barSize:C,stackGroups:x}),M=[];return v.forEach(function(B,z){var ae=$S(g.data,{graphicalItems:[B],dataStartIndex:w,dataEndIndex:A}),te=B.props,ge=te.dataKey,Le=te.maxBarSize,Qe=B.props["".concat(j,"Id")],fe=B.props["".concat(L,"Id")],ut={},nt=c.reduce(function(W,oe){var Q,Y=b["".concat(oe.axisType,"Map")],ye=B.props["".concat(oe.axisType,"Id")];Y&&Y[ye]||oe.axisType==="zAxis"||Oq(!1);var at=Y[ye];return G(G({},W),{},(Q={},ve(Q,oe.axisType,at),ve(Q,"".concat(oe.axisType,"Ticks"),Qs(at)),Q))},ut),Z=nt[L],_e=nt["".concat(L,"Ticks")],Ae=x&&x[Qe]&&x[Qe].hasStack&&EWe(B,x[Qe].stackGroups),q=_s(B.type).indexOf("Bar")>=0,it=K_(Z,_e),je=[];if(q){var xt,zt,Fr=tt(Le)?k:Le,Gn=(xt=(zt=K_(Z,_e,!0))!==null&&zt!==void 0?zt:Fr)!==null&&xt!==void 0?xt:0;je=cWe({barGap:P,barCategoryGap:I,bandSize:Gn!==it?Gn:it,sizeList:F[fe],maxBarSize:Fr}),Gn!==it&&(je=je.map(function(W){return G(G({},W),{},{position:G(G({},W.position),{},{offset:W.position.offset-Gn/2})})}))}var R=B&&B.type&&B.type.getComposedData;if(R){var U;M.push({props:G(G({},R(G(G({},nt),{},{displayedData:ae,props:g,dataKey:ge,item:B,bandSize:it,barPosition:je,offset:S,stackedData:Ae,layout:T,dataStartIndex:w,dataEndIndex:A}))),{},(U={key:B.key||"item-".concat(z)},ve(U,j,nt[j]),ve(U,L,nt[L]),ve(U,"animationId",_),U)),childIndex:zke(B,g.children),item:B})}}),M},m=function(g,b){var v=g.props,x=g.dataStartIndex,S=g.dataEndIndex,_=g.updateId;if(!lB({props:v}))return null;var w=v.children,A=v.layout,C=v.stackOffset,T=v.data,P=v.reverseStackOrder,I=WV(A),k=I.numericAxisName,N=I.cateAxisName,j=Mi(w,i),L=_We(T,j,"".concat(k,"Id"),"".concat(N,"Id"),C,P),V=c.reduce(function(ae,te){var ge="".concat(te.axisType,"Map");return G(G({},ae),{},ve({},ge,CHe(v,G(G({},te),{},{graphicalItems:j,stackGroups:te.axisType===k&&L,dataStartIndex:x,dataEndIndex:S}))))},{}),F=IHe(G(G({},V),{},{props:v,graphicalItems:j}),b==null?void 0:b.legendBBox);Object.keys(V).forEach(function(ae){V[ae]=d(v,V[ae],F,ae.replace("Map",""),n)});var M=V["".concat(N,"Map")],B=PHe(M),z=p(v,G(G({},V),{},{dataStartIndex:x,dataEndIndex:S,updateId:_,graphicalItems:j,stackGroups:L,offset:F}));return G(G({formattedGraphicalItems:z,graphicalItems:j,offset:F,stackGroups:L},B),V)};return r=function(y){dHe(b,y);var g=hHe(b);function b(v){var x,S,_;return uHe(this,b),_=g.call(this,v),ve(Ne(_),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ve(Ne(_),"accessibilityManager",new Yqe),ve(Ne(_),"handleLegendBBoxUpdate",function(w){if(w){var A=_.state,C=A.dataStartIndex,T=A.dataEndIndex,P=A.updateId;_.setState(G({legendBBox:w},m({props:_.props,dataStartIndex:C,dataEndIndex:T,updateId:P},G(G({},_.state),{},{legendBBox:w}))))}}),ve(Ne(_),"handleReceiveSyncEvent",function(w,A,C){if(_.props.syncId===w){if(C===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),ve(Ne(_),"handleBrushChange",function(w){var A=w.startIndex,C=w.endIndex;if(A!==_.state.dataStartIndex||C!==_.state.dataEndIndex){var T=_.state.updateId;_.setState(function(){return G({dataStartIndex:A,dataEndIndex:C},m({props:_.props,dataStartIndex:A,dataEndIndex:C,updateId:T},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:C})}}),ve(Ne(_),"handleMouseEnter",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var T=_.props.onMouseEnter;Fe(T)&&T(C,w)}}),ve(Ne(_),"triggeredAfterMouseMove",function(w){var A=_.getMouseInfo(w),C=A?G(G({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(C),_.triggerSyncEvent(C);var T=_.props.onMouseMove;Fe(T)&&T(C,w)}),ve(Ne(_),"handleItemMouseEnter",function(w){_.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),ve(Ne(_),"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),ve(Ne(_),"handleMouseMove",function(w){w.persist(),_.throttleTriggeredAfterMouseMove(w)}),ve(Ne(_),"handleMouseLeave",function(w){var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var C=_.props.onMouseLeave;Fe(C)&&C(A,w)}),ve(Ne(_),"handleOuterEvent",function(w){var A=Wke(w),C=Di(_.props,"".concat(A));if(A&&Fe(C)){var T,P;/.*touch.*/i.test(A)?P=_.getMouseInfo(w.changedTouches[0]):P=_.getMouseInfo(w),C((T=P)!==null&&T!==void 0?T:{},w)}}),ve(Ne(_),"handleClick",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var T=_.props.onClick;Fe(T)&&T(C,w)}}),ve(Ne(_),"handleMouseDown",function(w){var A=_.props.onMouseDown;if(Fe(A)){var C=_.getMouseInfo(w);A(C,w)}}),ve(Ne(_),"handleMouseUp",function(w){var A=_.props.onMouseUp;if(Fe(A)){var C=_.getMouseInfo(w);A(C,w)}}),ve(Ne(_),"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),ve(Ne(_),"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseDown(w.changedTouches[0])}),ve(Ne(_),"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseUp(w.changedTouches[0])}),ve(Ne(_),"triggerSyncEvent",function(w){_.props.syncId!==void 0&&mC.emit(yC,_.props.syncId,w,_.eventEmitterSymbol)}),ve(Ne(_),"applySyncEvent",function(w){var A=_.props,C=A.layout,T=A.syncMethod,P=_.state.updateId,I=w.dataStartIndex,k=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)_.setState(G({dataStartIndex:I,dataEndIndex:k},m({props:_.props,dataStartIndex:I,dataEndIndex:k,updateId:P},_.state)));else if(w.activeTooltipIndex!==void 0){var N=w.chartX,j=w.chartY,L=w.activeTooltipIndex,V=_.state,F=V.offset,M=V.tooltipTicks;if(!F)return;if(typeof T=="function")L=T(M,w);else if(T==="value"){L=-1;for(var B=0;B<M.length;B++)if(M[B].value===w.activeLabel){L=B;break}}var z=G(G({},F),{},{x:F.left,y:F.top}),ae=Math.min(N,z.x+z.width),te=Math.min(j,z.y+z.height),ge=M[L]&&M[L].value,Le=kJ(_.state,_.props.data,L),Qe=M[L]?{x:C==="horizontal"?M[L].coordinate:ae,y:C==="horizontal"?te:M[L].coordinate}:IJ;_.setState(G(G({},w),{},{activeLabel:ge,activeCoordinate:Qe,activePayload:Le,activeTooltipIndex:L}))}else _.setState(w)}),ve(Ne(_),"verticalCoordinatesGenerator",function(w,A){var C=w.xAxis,T=w.width,P=w.height,I=w.offset;return NU(sN(G(G(G({},im.defaultProps),C),{},{ticks:Qs(C,!0),viewBox:{x:0,y:0,width:T,height:P}})),I.left,I.left+I.width,A)}),ve(Ne(_),"horizontalCoordinatesGenerator",function(w,A){var C=w.yAxis,T=w.width,P=w.height,I=w.offset;return NU(sN(G(G(G({},im.defaultProps),C),{},{ticks:Qs(C,!0),viewBox:{x:0,y:0,width:T,height:P}})),I.top,I.top+I.height,A)}),ve(Ne(_),"axesTicksGenerator",function(w){return Qs(w,!0)}),ve(Ne(_),"renderCursor",function(w){var A,C=_.state,T=C.isTooltipActive,P=C.activeCoordinate,I=C.activePayload,k=C.offset,N=C.activeTooltipIndex,j=C.tooltipAxisBandSize,L=_.getTooltipEventType(),V=(A=w.props.active)!==null&&A!==void 0?A:T,F=_.props.layout,M=w.key||"_recharts-cursor";return O.createElement(nHe,{key:M,activeCoordinate:P,activePayload:I,activeTooltipIndex:N,chartName:n,element:w,isActive:V,layout:F,offset:k,tooltipAxisBandSize:j,tooltipEventType:L})}),ve(Ne(_),"renderPolarAxis",function(w,A,C){var T=Di(w,"type.axisType"),P=Di(_.state,"".concat(T,"Map")),I=P&&P[w.props["".concat(T,"Id")]];return E.cloneElement(w,G(G({},I),{},{className:T,key:w.key||"".concat(A,"-").concat(C),ticks:Qs(I,!0)}))}),ve(Ne(_),"renderXAxis",function(w,A,C){var T=_.state.xAxisMap,P=T[w.props.xAxisId];return _.renderAxis(P,w,A,C)}),ve(Ne(_),"renderYAxis",function(w,A,C){var T=_.state.yAxisMap,P=T[w.props.yAxisId];return _.renderAxis(P,w,A,C)}),ve(Ne(_),"renderGrid",function(w){var A=_.state,C=A.xAxisMap,T=A.yAxisMap,P=A.offset,I=_.props,k=I.width,N=I.height,j=Ks(C),L=Bqe(T,function(M){return mJ(M.domain,Number.isFinite)}),V=L||Ks(T),F=w.props||{};return E.cloneElement(w,{key:w.key||"grid",x:re(F.x)?F.x:P.left,y:re(F.y)?F.y:P.top,width:re(F.width)?F.width:P.width,height:re(F.height)?F.height:P.height,xAxis:j,yAxis:V,offset:P,chartWidth:k,chartHeight:N,verticalCoordinatesGenerator:F.verticalCoordinatesGenerator||_.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:F.horizontalCoordinatesGenerator||_.horizontalCoordinatesGenerator})}),ve(Ne(_),"renderPolarGrid",function(w){var A=w.props,C=A.radialLines,T=A.polarAngles,P=A.polarRadius,I=_.state,k=I.radiusAxisMap,N=I.angleAxisMap,j=Ks(k),L=Ks(N),V=L.cx,F=L.cy,M=L.innerRadius,B=L.outerRadius;return E.cloneElement(w,{polarAngles:Array.isArray(T)?T:Qs(L,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(P)?P:Qs(j,!0).map(function(z){return z.coordinate}),cx:V,cy:F,innerRadius:M,outerRadius:B,key:w.key||"polar-grid",radialLines:C})}),ve(Ne(_),"renderLegend",function(){var w=_.state.formattedGraphicalItems,A=_.props,C=A.children,T=A.width,P=A.height,I=_.props.margin||{},k=T-(I.left||0)-(I.right||0),N=rJ({children:C,formattedGraphicalItems:w,legendWidth:k,legendContent:f});if(!N)return null;var j=N.item,L=FV(N,iHe);return E.cloneElement(j,G(G({},L),{},{chartWidth:T,chartHeight:P,margin:I,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),ve(Ne(_),"renderTooltip",function(){var w,A=_.props.children,C=No(A,zu);if(!C)return null;var T=_.state,P=T.isTooltipActive,I=T.activeCoordinate,k=T.activePayload,N=T.activeLabel,j=T.offset,L=(w=C.props.active)!==null&&w!==void 0?w:P;return E.cloneElement(C,{viewBox:G(G({},j),{},{x:j.left,y:j.top}),active:L,label:N,payload:L?k:[],coordinate:I})}),ve(Ne(_),"renderBrush",function(w){var A=_.props,C=A.margin,T=A.data,P=_.state,I=P.offset,k=P.dataStartIndex,N=P.dataEndIndex,j=P.updateId;return E.cloneElement(w,{key:w.key||"_recharts-brush",onChange:m0(_.handleBrushChange,w.props.onChange),data:T,x:re(w.props.x)?w.props.x:I.left,y:re(w.props.y)?w.props.y:I.top+I.height+I.brushBottom-(C.bottom||0),width:re(w.props.width)?w.props.width:I.width,startIndex:k,endIndex:N,updateId:"brush-".concat(j)})}),ve(Ne(_),"renderReferenceElement",function(w,A,C){if(!w)return null;var T=Ne(_),P=T.clipPathId,I=_.state,k=I.xAxisMap,N=I.yAxisMap,j=I.offset,L=w.props,V=L.xAxisId,F=L.yAxisId;return E.cloneElement(w,{key:w.key||"".concat(A,"-").concat(C),xAxis:k[V],yAxis:N[F],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:P})}),ve(Ne(_),"renderActivePoints",function(w){var A=w.item,C=w.activePoint,T=w.basePoint,P=w.childIndex,I=w.isRange,k=[],N=A.props.key,j=A.item.props,L=j.activeDot,V=j.dataKey,F=G(G({index:P,dataKey:V,cx:C.x,cy:C.y,r:4,fill:h2(A.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value,key:"".concat(N,"-activePoint-").concat(P)},Ke(L)),y_(L));return k.push(b.renderActiveDot(L,F)),T?k.push(b.renderActiveDot(L,G(G({},F),{},{cx:T.x,cy:T.y,key:"".concat(N,"-basePoint-").concat(P)}))):I&&k.push(null),k}),ve(Ne(_),"renderGraphicChild",function(w,A,C){var T=_.filterFormatItem(w,A,C);if(!T)return null;var P=_.getTooltipEventType(),I=_.state,k=I.isTooltipActive,N=I.tooltipAxis,j=I.activeTooltipIndex,L=I.activeLabel,V=_.props.children,F=No(V,zu),M=T.props,B=M.points,z=M.isRange,ae=M.baseLine,te=T.item.props,ge=te.activeDot,Le=te.hide,Qe=te.activeBar,fe=te.activeShape,ut=!!(!Le&&k&&F&&(ge||Qe||fe)),nt={};P!=="axis"&&F&&F.props.trigger==="click"?nt={onClick:m0(_.handleItemMouseEnter,w.props.onClick)}:P!=="axis"&&(nt={onMouseLeave:m0(_.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:m0(_.handleItemMouseEnter,w.props.onMouseEnter)});var Z=E.cloneElement(w,G(G({},T.props),nt));function _e(oe){return typeof N.dataKey=="function"?N.dataKey(oe.payload):null}if(ut)if(j>=0){var Ae,q;if(N.dataKey&&!N.allowDuplicatedCategory){var it=typeof N.dataKey=="function"?_e:"payload.".concat(N.dataKey.toString());Ae=m_(B,it,L),q=z&&ae&&m_(ae,it,L)}else Ae=B==null?void 0:B[j],q=z&&ae&&ae[j];if(fe||Qe){var je=w.props.activeIndex!==void 0?w.props.activeIndex:j;return[E.cloneElement(w,G(G(G({},T.props),nt),{},{activeIndex:je})),null,null]}if(!tt(Ae))return[Z].concat(Md(_.renderActivePoints({item:T,activePoint:Ae,basePoint:q,childIndex:j,isRange:z})))}else{var xt,zt=(xt=_.getItemByXY(_.state.activeCoordinate))!==null&&xt!==void 0?xt:{graphicalItem:Z},Fr=zt.graphicalItem,Gn=Fr.item,R=Gn===void 0?w:Gn,U=Fr.childIndex,W=G(G(G({},T.props),nt),{},{activeIndex:U});return[E.cloneElement(R,W),null,null]}return z?[Z,null,null]:[Z,null]}),ve(Ne(_),"renderCustomized",function(w,A,C){return E.cloneElement(w,G(G({key:"recharts-customized-".concat(C)},_.props),_.state))}),ve(Ne(_),"renderMap",{CartesianGrid:{handler:_.renderGrid,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:_.renderReferenceElement},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:_.renderXAxis},YAxis:{handler:_.renderYAxis},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:Zg("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=nX(_.triggeredAfterMouseMove,(S=v.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return fHe(b,[{key:"componentDidMount",value:function(){var x,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(x,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=No(this.props.children,zu);if(x&&typeof x.props.shared=="boolean"){var S=x.props.shared?"axis":"item";return l.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),w=V4e(_),A={chartX:Math.round(x.pageX-w.left),chartY:Math.round(x.pageY-w.top)},C=_.width/S.offsetWidth||1,T=this.inRange(A.chartX,A.chartY,C);if(!T)return null;var P=this.state,I=P.xAxisMap,k=P.yAxisMap,N=this.getTooltipEventType();if(N!=="axis"&&I&&k){var j=Ks(I).scale,L=Ks(k).scale,V=j&&j.invert?j.invert(A.chartX):null,F=L&&L.invert?L.invert(A.chartY):null;return G(G({},A),{},{xValue:V,yValue:F})}var M=UV(this.state,this.props.data,this.props.layout,T);return M?G(G({},A),M):null}},{key:"inRange",value:function(x,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,A=x/_,C=S/_;if(w==="horizontal"||w==="vertical"){var T=this.state.offset,P=A>=T.left&&A<=T.left+T.width&&C>=T.top&&C<=T.top+T.height;return P?{x:A,y:C}:null}var I=this.state,k=I.angleAxisMap,N=I.radiusAxisMap;if(k&&N){var j=Ks(k);return LU({x:A,y:C},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,S=this.getTooltipEventType(),_=No(x,zu),w={};_&&S==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var A=y_(this.props,this.handleOuterEvent);return G(G({},A),w)}},{key:"addListener",value:function(){mC.on(yC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){mC.removeListener(yC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,S,_){for(var w=this.state.formattedGraphicalItems,A=0,C=w.length;A<C;A++){var T=w[A];if(T.item===x||T.props.key===x.key||S===_s(T.item.type)&&_===T.childIndex)return T}return null}},{key:"renderAxis",value:function(x,S,_,w){var A=this.props,C=A.width,T=A.height;return O.createElement(im,Hu({},x,{className:dt("recharts-".concat(x.axisType," ").concat(x.axisType),x.className),key:S.key||"".concat(_,"-").concat(w),viewBox:{x:0,y:0,width:C,height:T},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var x=this.clipPathId,S=this.state.offset,_=S.left,w=S.top,A=S.height,C=S.width;return O.createElement("defs",null,O.createElement("clipPath",{id:x},O.createElement("rect",{x:_,y:w,height:A,width:C})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=MV(_,2),A=w[0],C=w[1];return G(G({},S),{},ve({},A,C.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=MV(_,2),A=w[0],C=w[1];return G(G({},S),{},ve({},A,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var S=this.state,_=S.formattedGraphicalItems,w=S.activeItem;if(_&&_.length)for(var A=0,C=_.length;A<C;A++){var T=_[A],P=T.props,I=T.item,k=_s(I.type);if(k==="Bar"){var N=(P.data||[]).find(function(F){return $8e(x,F)});if(N)return{graphicalItem:T,payload:N}}else if(k==="RadialBar"){var j=(P.data||[]).find(function(F){return LU(x,F)});if(j)return{graphicalItem:T,payload:j}}else if(NS(T,w)||kS(T,w)||$y(T,w)){var L=F9e({graphicalItem:T,activeTooltipItem:w,itemData:I.props.data}),V=I.props.activeIndex===void 0?L:I.props.activeIndex;return{graphicalItem:G(G({},T),{},{childIndex:V}),payload:$y(T,w)?I.props.data[L]:T.props.data[L]}}}return null}},{key:"render",value:function(){var x=this;if(!lB(this))return null;var S=this.props,_=S.children,w=S.className,A=S.width,C=S.height,T=S.style,P=S.compact,I=S.title,k=S.desc,N=FV(S,oHe),j=Ke(N);if(P)return O.createElement(nI,Hu({},j,{width:A,height:C,title:I,desc:k}),this.renderClipPath(),uB(_,this.renderMap));if(this.props.accessibilityLayer){var L,V;j.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,j.role=(V=this.props.role)!==null&&V!==void 0?V:"img",j.onKeyDown=function(M){x.accessibilityManager.keyboardEvent(M)},j.onFocus=function(){x.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return O.createElement("div",Hu({className:dt("recharts-wrapper",w),style:G({position:"relative",cursor:"default",width:A,height:C},T)},F,{ref:function(B){x.container=B},role:"region"}),O.createElement(nI,Hu({},j,{width:A,height:C,title:I,desc:k,style:_He}),this.renderClipPath(),uB(_,this.renderMap)),this.renderLegend(),this.renderTooltip())}}]),b}(E.Component),ve(r,"displayName",n),ve(r,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),ve(r,"getDerivedStateFromProps",function(y,g){var b=y.dataKey,v=y.data,x=y.children,S=y.width,_=y.height,w=y.layout,A=y.stackOffset,C=y.margin,T=g.dataStartIndex,P=g.dataEndIndex;if(g.updateId===void 0){var I=VV(y);return G(G(G({},I),{},{updateId:0},m(G(G({props:y},I),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(b!==g.prevDataKey||v!==g.prevData||S!==g.prevWidth||_!==g.prevHeight||w!==g.prevLayout||A!==g.prevStackOffset||!vf(C,g.prevMargin)){var k=VV(y),N={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},j=G(G({},UV(g,v,w)),{},{updateId:g.updateId+1}),L=G(G(G({},k),N),j);return G(G(G({},L),m(G({props:y},L),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(!HQ(x,g.prevChildren)){var V,F,M,B,z=No(x,kd),ae=z&&(V=(F=z.props)===null||F===void 0?void 0:F.startIndex)!==null&&V!==void 0?V:T,te=z&&(M=(B=z.props)===null||B===void 0?void 0:B.endIndex)!==null&&M!==void 0?M:P,ge=ae!==T||te!==P,Le=!tt(v),Qe=Le&&!ge?g.updateId:g.updateId+1;return G(G({updateId:Qe},m(G(G({props:y},g),{},{updateId:Qe,dataStartIndex:ae,dataEndIndex:te}),g)),{},{prevChildren:x,dataStartIndex:ae,dataEndIndex:te})}return null}),ve(r,"renderActiveDot",function(y,g){var b;return E.isValidElement(y)?b=E.cloneElement(y,g):Fe(y)?b=y(g):b=O.createElement(m2,g),O.createElement(Jt,{className:"recharts-active-dot",key:g.key},b)}),r},OJ=NHe({chartName:"LineChart",GraphicalChild:$n,axisComponents:[{axisType:"xAxis",AxisComp:lv},{axisType:"yAxis",AxisComp:cv}],formatAxisMap:lGe});function jJ({teams:t}){const e=E.useMemo(()=>{const r=Math.max(...t.map(({matchCount:i})=>i)),n=Array(r+1).fill(void 0).map((i,o)=>({name:o%2===1?`W${Math.ceil(o/2)}`:""}));for(const i of t){n[0][i.team._id]=0;for(let o=0;o<r;o++)n[o+1][i.team._id]=i.pointHistories[o]}return n},[t]);return u.jsx(iX,{width:"100%",height:"100%",children:u.jsxs(OJ,{data:e,children:[u.jsx(RS,{strokeDasharray:"3 3"}),u.jsx(lv,{tick:{fill:"white"},dataKey:"name"}),u.jsx(cv,{tick:{fill:"white"},width:80,allowDecimals:!1,tickCount:5}),t.map(r=>u.jsx($n,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:r.team._id},r.team._id)),t.map(r=>u.jsx($n,{type:"linear",stroke:r.team.color,strokeWidth:8,isAnimationActive:!1,name:r.team.name,dataKey:r.team._id},r.team._id))]})})}const RJ=(t,e)=>t.reduce((r,n)=>{const i=typeof e=="function"?e(n):n[e];return r[i]?r[i]=[...r[i],n]:r[i]=[n],r},{}),fu="b6908027-9179-485a-8bce-822c42114371",ep=(t,e,r,n,i,o)=>t.map(s=>({player:oo(e[s.teamId],{...s,team:e[s.teamId]}),value:r(s.player.statistics),tieBreakValue:n(s.player.statistics)})).sort((s,a)=>s.value===a.value?(s.tieBreakValue-a.tieBreakValue)*(o==="asc"?1:-1):(s.value-a.value)*(i==="asc"?1:-1)).slice(0,6),kHe=({value:t})=>typeof t>"u"?u.jsx(u.Fragment,{}):t>0?u.jsxs("span",{className:"text-red-500",children:[u.jsx("i",{className:"bi bi-caret-down-fill"})," ",u.jsx("span",{className:"-m-2",children:t})]}):t<0?u.jsxs("span",{className:"text-green-400",children:[u.jsx("i",{className:"bi bi-caret-up-fill"})," ",u.jsx("span",{className:"-m-2",children:Math.abs(t)})]}):u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-dash"})," ",u.jsx("span",{className:"-m-2",children:"0"})]}),OHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?u.jsxs("div",{className:"absolute inset-0 flex flex-col twr-team-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[u.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6 twr-team-ranking-row",children:[u.jsx("p",{className:"flex-1 text-center",children:"排名"}),u.jsx("p",{className:"flex-[5]",children:"隊伍"}),u.jsx("p",{className:"flex-1 text-center",children:"積分"}),u.jsx("p",{className:"flex-1 text-center",children:"與前名差距"}),u.jsx("p",{className:"flex-1 text-center",children:"半莊數"})]}),t.teams.map((n,i)=>u.jsxs("div",{className:"relative flex-1 flex items-center gap-6 overflow-hidden twr-team-ranking-row",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[u.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-48 opacity-10 -z-10"}),u.jsxs("p",{className:"flex-1 text-center space-x-2",children:[u.jsx("span",{children:Ka(n.ranking)}),u.jsx(kHe,{value:(n.rankingHistories.at(-1)??0)-(n.rankingHistories.at(-3)??0)})]}),u.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),u.jsx("p",{className:"flex-1 text-center",children:En(n.point)}),u.jsx("p",{className:"flex-1 text-center",children:i>0?(t.teams[i-1].point-n.point).toFixed(1):"-"}),u.jsxs("p",{className:"flex-1 text-center",children:[n.matchCount,u.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id))]}):t.type==="chart"?u.jsxs("div",{className:"absolute inset-0 flex twr-chart gap-[1em] items-stretch","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-[3] twr-chart-chart",children:u.jsx(jJ,{teams:t.teams})}),u.jsx("div",{className:"flex-1 flex flex-col twr-team-ranking","data-active":e===0,children:t.teams.map((n,i)=>u.jsxs("div",{className:"relative flex-1 flex items-center justify-between overflow-hidden twr-team-ranking-row px-2",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[u.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-5 -z-10"}),u.jsx("div",{children:u.jsx("p",{children:n.team.name})}),u.jsx("div",{children:En(n.point)})]},n._id))})]}):t.type==="players"?u.jsxs("div",{className:"absolute inset-0 flex twr-player-ranking gap-[1em] items-stretch twr-player-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[u.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[u.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-player-ranking-row",children:"MVP"}),u.jsx("p",{className:"text-center twr-player-ranking-row",children:"積分最高選手"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestPointPlayers.map(({player:n,value:i,tieBreakValue:o},s)=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center twr-player-ranking-row",style:{background:`linear-gradient(to right, ${n.color}C0, transparent 105%)`,animationDelay:`${s*.05}s`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-25 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em]",children:[u.jsx("div",{className:"w-[2.2em]",children:Ka(s+1)}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-[1.5em] leading-[1em]",children:n.playerNickname}),u.jsx("p",{className:"text-[.75em] leading-[1em]",children:n.playerName})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[1.5em] leading-[1em] font-numeric",children:i.toFixed(1)}),u.jsxs("p",{className:"text-[.75em] leading-[1em] opacity-80",children:["(半莊數: ",o,")"]})]})]})]},n.playerId))})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-[1em] twr-player-ranking-row",children:[u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"和了率"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPPlayers.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"平均打點"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPurePointPlayers.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"銃和率"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.lowestChuckPPlayers.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"最高得點"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestScoreMax.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(0)})})]})]},n.playerId))})]})]})]}):t.type==="heatmap"?u.jsx("div",{className:"absolute inset-0 flex gap-[1em] items-stretch twr-heatmap","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:u.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[u.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-heatmap-title",children:"點數熱力圖"}),u.jsxs("p",{className:"text-center mb-8 twr-heatmap-title",children:[u.jsx("span",{className:"bg-green-500 px-1",children:"綠色"}),"代表高分、",u.jsx("span",{className:"bg-red-500 px-1",children:"紅色"}),"代表低分"]}),u.jsxs("div",{className:"grid grid-cols-12 flex-1 text-center text-[.8em]",children:[t.teams.map((n,i)=>u.jsxs("div",{className:"h-20 twr-heatmap-cell",style:{animationDelay:i*.05+"s"},children:[u.jsx("div",{style:{background:`${n.team.color}80`},children:u.jsx("img",{src:n.team.squareLogoImage+"?w=128&h=128",alt:n.team.name,className:"h-24 w-24 my-2 inline-block"})}),u.jsx("p",{className:"py-2",style:{background:n.point>0?`rgba(23, 235, 0, ${n.point/t.highestTeamPoint})`:`rgba(235, 0, 0, ${n.point/t.lowestTeamPoint})`},children:En(n.point)})]},n.team._id)),[0,1,2,3].map(n=>t.teams.map((i,o)=>{var s,a;return u.jsx("div",{className:"flex items-center justify-center twr-heatmap-cell",style:{background:typeof((s=t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics)==null?void 0:s.point)<"u"?t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point>0?`rgba(23, 235, 0, ${t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point/t.highestPlayerPoint})`:`rgba(235, 0, 0, ${t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point/t.lowestPlayerPoint})`:"tranparent",animationDelay:(o+n+1)*.05+"s"},children:En((a=t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics)==null?void 0:a.point)},i.team._id)}))]})]})}):u.jsx(u.Fragment,{}),$J=({params:{week:t}})=>{const[e,r]=E.useMemo(()=>["16/1","18/1"],[]),{data:n}=Ko({queryKey:["tournament",fu],queryFn:()=>e1(fu).then(m=>({...m,teams:m.teams.sort((y,g)=>g.point-y.point)})),enabled:!!fu}),{data:i}=Ko({queryKey:["tournament",fu,"players"],queryFn:()=>RG(fu),enabled:!!fu}),o=E.useMemo(()=>n?n.teams.reduce((m,{team:y})=>(m[y._id]=y,m),{}):{},[n]),[s,a]=E.useState(0),[l,c]=E.useState(0),[f,d]=E.useState(!1),h=E.useMemo(()=>{var g,b;if(!n||!i)return[{type:"empty",_id:"empty",subslide:0}];const m=i.filter(v=>v.player.statistics.matchCount>0),y=i.sort((v,x)=>{var S,_;return(((S=x.player.statistics)==null?void 0:S.point)??0)-(((_=v.player.statistics)==null?void 0:_.point)??0)});return[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:n.teams,subslide:1},{type:"chart",_id:"chart",teams:n.teams,subslide:1},{type:"players",_id:"players",highestPointPlayers:ep(m,o,v=>v.point,v=>v.matchCount,"desc","asc"),highestRonPPlayers:ep(m,o,v=>v.ronCount/v.roundCount,v=>v.roundCount,"desc","desc"),highestRonPurePointPlayers:ep(m,o,v=>v.ronPureScoreAvg,v=>v.roundCount,"desc","desc"),lowestChuckPPlayers:ep(m,o,v=>v.chuckCount/v.roundCount,v=>v.roundCount,"asc","desc"),highestScoreMax:ep(m,o,v=>v.scoreMax,v=>v.roundCount,"desc","desc"),subslide:1},{type:"heatmap",_id:"heatmap",teams:n.teams,teamPlayersGroupedByTeamIds:RJ(y,v=>v.teamId),highestTeamPoint:n.teams[0].point,lowestTeamPoint:n.teams.at(-1).point,highestPlayerPoint:((g=y[0].player.statistics)==null?void 0:g.point)??0,lowestPlayerPoint:((b=y.at(-1).player.statistics)==null?void 0:b.point)??0,subslide:1}]},[i,o,n]),p=E.useCallback(()=>{if(f)return;const m=h[s];if(!m){a(1);return}m.type==="empty"?a(y=>y+1):l>=m.subslide-1?(a(y=>y+.5),d(!0),setTimeout(()=>{a(y=>Math.ceil(y)),c(0),d(!1)},1200)):(c(y=>y+.5),d(!0),setTimeout(()=>{c(y=>Math.ceil(y)),d(!1)},1200))},[f,s,h,l]);return n?u.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:p,children:u.jsxs("div",{className:"absolute inset-0 tournament-weekly-report text-white text-[36px] flex py-[1em] px-[1em] gap-x-[1em]",children:[u.jsxs("div",{className:"twr-title flex flex-col justify-between items-center",children:[u.jsx("div",{children:u.jsx("img",{src:n.logoUrl+"?w=280&h=280&auto=format",alt:n.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),u.jsxs("p",{style:{fontSize:"3em",writingMode:"vertical-rl",textOrientation:"upright"},children:["第",u.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:t}),"週結算"]}),u.jsxs("p",{style:{fontSize:"1.2em",writingMode:"vertical-rl",textOrientation:"upright"},children:[u.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:e}),"~",u.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:r})]})]}),u.jsx("div",{className:"flex-1 relative",children:h.map((m,y)=>u.jsx(OHe,{slide:m,status:s-y,subslide:l},m._id))})]})}):u.jsx(u.Fragment,{})};Math.ceil((new Date().getTime()-17049888e5)/1e3/60/60/24/7).toString();const zV=()=>u.jsx($J,{params:{week:"2"}}),jHe=({m:t})=>{const[e,r]=E.useState(t*60),[n,i]=E.useMemo(()=>[Math.floor(e/60).toString().padStart(2,"0"),(e%60).toString().padStart(2,"0")],[e]);return E.useEffect(()=>{r(t*60)},[t]),YG(()=>{r(o=>o-1)},e>0?1e3:null),e<=0?u.jsx("span",{children:"--:--"}):u.jsxs("span",{children:[n,":",i]})},du="b6908027-9179-485a-8bce-822c42114371",tp=(t,e,r,n,i,o)=>t.map(s=>({player:oo(e[s.teamId],{...s,team:e[s.teamId]}),value:r(s.player.statistics),tieBreakValue:n(s.player.statistics)})).sort((s,a)=>s.value===a.value?(s.tieBreakValue-a.tieBreakValue)*(o==="asc"?1:-1):(s.value-a.value)*(i==="asc"?1:-1)).slice(0,6),RHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?u.jsxs("div",{className:"absolute inset-0 flex flex-col twr-team-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[u.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6 twr-team-ranking-row",children:[u.jsx("p",{className:"flex-1 text-center",children:"排名"}),u.jsx("p",{className:"flex-[5]",children:"隊伍"}),u.jsx("p",{className:"flex-1 text-center",children:"積分"}),u.jsx("p",{className:"flex-1 text-center",children:"與前名差距"}),u.jsx("p",{className:"flex-1 text-center",children:"半莊數"})]}),t.teams.map((n,i)=>u.jsxs("div",{className:"relative flex-1 flex items-center gap-6 overflow-hidden twr-team-ranking-row",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[u.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-48 opacity-10 -z-10"}),u.jsx("p",{className:"flex-1 text-center space-x-2",children:u.jsx("span",{children:Ka(n.ranking)})}),u.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),u.jsx("p",{className:"flex-1 text-center",children:En(n.point)}),u.jsx("p",{className:"flex-1 text-center",children:i>0?(t.teams[i-1].point-n.point).toFixed(1):"-"}),u.jsxs("p",{className:"flex-1 text-center",children:[n.matchCount,u.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id))]}):t.type==="chart"?u.jsxs("div",{className:"absolute inset-0 flex twr-chart gap-[1em] items-stretch","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-[3] twr-chart-chart",children:u.jsx(jJ,{teams:t.teams})}),u.jsx("div",{className:"flex-1 flex flex-col twr-team-ranking","data-active":e===0,children:t.teams.map((n,i)=>u.jsxs("div",{className:"relative flex-1 flex items-center justify-between overflow-hidden twr-team-ranking-row px-2",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[u.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-5 -z-10"}),u.jsx("div",{children:u.jsx("p",{children:n.team.name})}),u.jsx("div",{children:En(n.point)})]},n._id))})]}):t.type==="players"?u.jsxs("div",{className:"absolute inset-0 flex twr-player-ranking gap-[1em] items-stretch twr-player-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[u.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[u.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-player-ranking-row",children:"MVP"}),u.jsx("p",{className:"text-center twr-player-ranking-row",children:"積分最高選手"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestPointPlayers.map(({player:n,value:i,tieBreakValue:o},s)=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center twr-player-ranking-row",style:{background:`linear-gradient(to right, ${n.color}C0, transparent 105%)`,animationDelay:`${s*.05}s`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-25 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em]",children:[u.jsx("div",{className:"w-[2.2em]",children:Ka(s+1)}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-[1.5em] leading-[1em]",children:n.playerNickname}),u.jsx("p",{className:"text-[.75em] leading-[1em]",children:n.playerName})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[1.5em] leading-[1em] font-numeric",children:i.toFixed(1)}),u.jsxs("p",{className:"text-[.75em] leading-[1em] opacity-80",children:["(半莊數: ",o,")"]})]})]})]},n.playerId))})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-[1em] twr-player-ranking-row",children:[u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"和了率"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPPlayers.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"平均打點"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPurePointPlayers.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"銃和率"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.lowestChuckPPlayers.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),u.jsxs("div",{className:"space-y-[.5em]",children:[u.jsx("p",{className:"text-center",children:"最高得點"}),u.jsx("div",{className:"flex-1 flex flex-col",children:t.highestScoreMax.map(({player:n,value:i})=>u.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[u.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),u.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(0)})})]})]},n.playerId))})]})]})]}):t.type==="heatmap"?u.jsx("div",{className:"absolute inset-0 flex gap-[1em] items-stretch twr-heatmap","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:u.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[u.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-heatmap-title",children:"點數熱力圖"}),u.jsxs("p",{className:"text-center mb-8 twr-heatmap-title",children:[u.jsx("span",{className:"bg-green-500 px-1",children:"綠色"}),"代表高分、",u.jsx("span",{className:"bg-red-500 px-1",children:"紅色"}),"代表低分"]}),u.jsxs("div",{className:"grid grid-cols-12 flex-1 text-center text-[.8em]",children:[t.teams.map((n,i)=>u.jsxs("div",{className:"h-20 twr-heatmap-cell",style:{animationDelay:i*.05+"s"},children:[u.jsx("div",{style:{background:`${n.team.color}80`},children:u.jsx("img",{src:n.team.squareLogoImage+"?w=128&h=128",alt:n.team.name,className:"h-24 w-24 my-2 inline-block"})}),u.jsx("p",{className:"py-2",style:{background:n.point>0?`rgba(23, 235, 0, ${n.point/t.highestTeamPoint})`:`rgba(235, 0, 0, ${n.point/t.lowestTeamPoint})`},children:En(n.point)})]},n.team._id)),[0,1,2,3].map(n=>t.teams.map((i,o)=>{var s,a;return u.jsx("div",{className:"flex items-center justify-center twr-heatmap-cell",style:{background:typeof((s=t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics)==null?void 0:s.point)<"u"?t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point>0?`rgba(23, 235, 0, ${t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point/t.highestPlayerPoint})`:`rgba(235, 0, 0, ${t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics.point/t.lowestPlayerPoint})`:"tranparent",animationDelay:(o+n+1)*.05+"s"},children:En((a=t.teamPlayersGroupedByTeamIds[i.team._id][n].player.statistics)==null?void 0:a.point)},i.team._id)}))]})]})}):u.jsx(u.Fragment,{}),uw=({forwardFlag:t,refetchFlag:e,resetFlag:r,disableClick:n,auto:i,minute:o,params:s})=>{const a=Fx("m")||(o==null?void 0:o.toString()),l=Fx("auto")||i,{data:c,refetch:f}=Ko({queryKey:["tournament",du],queryFn:()=>e1(du).then(k=>({...k,teams:k.teams.sort((N,j)=>j.point-N.point)})),enabled:!!du,staleTime:5*60*1e3}),{data:d}=Ko({queryKey:["tournament",du,"players"],queryFn:()=>RG(du),enabled:!!du,staleTime:5*60*1e3}),h=E.useMemo(()=>c?c.teams.reduce((k,{team:N})=>(k[N._id]=N,k),{}):{},[c]),[p,m]=E.useState(0),[y,g]=E.useState(0),[b,v]=E.useState(!1),[x,S]=E.useState(t??0),[_,w]=E.useState(e??0),[A,C]=E.useState(r??0),T=E.useMemo(()=>{var L,V;if(!c||!d)return[{type:"empty",_id:"empty",subslide:0}];const k=d.filter(F=>F.player.statistics.matchCount>0),N=d.sort((F,M)=>{var B,z;return(((B=M.player.statistics)==null?void 0:B.point)??0)-(((z=F.player.statistics)==null?void 0:z.point)??0)}),j=[{type:"teams",_id:"teams",teams:c.teams,subslide:1},{type:"chart",_id:"chart",teams:c.teams,subslide:1},{type:"players",_id:"players",highestPointPlayers:tp(k,h,F=>F.point,F=>F.matchCount,"desc","asc"),highestRonPPlayers:tp(k,h,F=>F.ronCount/F.roundCount,F=>F.roundCount,"desc","desc"),highestRonPurePointPlayers:tp(k,h,F=>F.ronPureScoreAvg,F=>F.roundCount,"desc","desc"),lowestChuckPPlayers:tp(k,h,F=>F.chuckCount/F.roundCount,F=>F.roundCount,"asc","desc"),highestScoreMax:tp(k,h,F=>F.scoreMax,F=>F.roundCount,"desc","desc"),subslide:1},{type:"heatmap",_id:"heatmap",teams:c.teams,teamPlayersGroupedByTeamIds:RJ(N,F=>F.teamId),highestTeamPoint:c.teams[0].point,lowestTeamPoint:c.teams.at(-1).point,highestPlayerPoint:((L=N[0].player.statistics)==null?void 0:L.point)??0,lowestPlayerPoint:((V=N.at(-1).player.statistics)==null?void 0:V.point)??0,subslide:1}];return l||j.unshift({type:"empty",_id:"empty",subslide:0}),j},[l,d,h,c]),P=E.useCallback(()=>{if(b)return;const k=T[p];if(!k){m(1);return}k.type==="empty"?m(N=>N+1):y>=k.subslide-1?(m(N=>N+.5),v(!0),setTimeout(()=>{m(N=>Math.ceil(N)%T.length),g(0),v(!1)},1200)):(g(N=>N+.5),v(!0),setTimeout(()=>{g(N=>Math.ceil(N)%T.length),v(!1)},1200))},[b,p,T,y]);E.useEffect(()=>{if(l){const k=setInterval(()=>{P()},8e3);return()=>clearInterval(k)}},[l,P]);const I=E.useCallback(()=>{n||P()},[n,P]);return E.useEffect(()=>{typeof t<"u"&&t!==x&&(P(),S(t))},[t,P,x]),E.useEffect(()=>{typeof e<"u"&&e!==_&&(f(),w(e))},[_,A,e,f]),E.useEffect(()=>{typeof r<"u"&&r!==A&&(m(0),g(0),C(r))},[t,P,x,A,r]),c?u.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:I,children:u.jsxs("div",{className:"absolute inset-0 tournament-weekly-report text-white text-[36px] flex py-[1em] px-[1em] gap-x-[1em]",children:[u.jsxs("div",{className:"twr-title flex flex-col justify-start gap-[1em] items-center relative",children:[u.jsx("div",{children:u.jsx("img",{src:c.logoUrl+"?w=280&h=280&auto=format",alt:c.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),u.jsx("div",{className:"flex-1 flex flex-col justify-center pb-[3.5em]",children:u.jsx("p",{style:{fontSize:"3em",writingMode:"vertical-rl",textOrientation:"upright"},children:"現時數據"})}),a&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-cyan-500 text-center font-numeric text-[1.5em] pt-[.125em]",children:[u.jsx("p",{className:"text-[.56em]",children:"下一場賽事"}),u.jsx("p",{children:u.jsx(jHe,{m:parseInt(a)})})]})]}),u.jsx("div",{className:"flex-1 relative",children:T.map((k,N)=>u.jsx(RHe,{slide:k,status:p-N,subslide:y},k._id))})]})}):u.jsx(u.Fragment,{})};function $He({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(vR,{params:r})}function DHe({players:t,rounds:e}){return u.jsx(iX,{width:"100%",height:"100%",children:u.jsxs(OJ,{data:e,children:[u.jsx(RS,{strokeDasharray:"3 3"}),u.jsx(lv,{tick:{fill:"white"},dataKey:"name"}),u.jsx(cv,{tick:{fill:"white"},width:120,allowDecimals:!1,tickCount:5}),u.jsx($n,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerEast"}),u.jsx($n,{type:"linear",stroke:t.playerEast.color,strokeWidth:8,isAnimationActive:!1,name:t.playerEast.name,dataKey:"playerEast"}),u.jsx($n,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerSouth"}),u.jsx($n,{type:"linear",stroke:t.playerSouth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerSouth.name,dataKey:"playerSouth"}),u.jsx($n,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerWest"}),u.jsx($n,{type:"linear",stroke:t.playerWest.color,strokeWidth:8,isAnimationActive:!1,name:t.playerWest.name,dataKey:"playerWest"}),u.jsx($n,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerNorth"}),u.jsx($n,{type:"linear",stroke:t.playerNorth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerNorth.name,dataKey:"playerNorth"})]})})}const MHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?u.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-1"}),u.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:["playerEast","playerSouth","playerWest","playerNorth"].map((n,i)=>u.jsxs("div",{className:Pr("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s",filter:t.teams[n].ranking!=="1"?"grayscale(1)":"grayscale(0)"},children:[u.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${t.teams[n].color})`,opacity:.5}}),u.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),u.jsxs("div",{className:Pr("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[u.jsx("img",{src:t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),u.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:t.teams[n].teamName}),u.jsx("h3",{className:"text-[1em] h-[2em] font-semibold text-center",children:t.teams[n].teamSecondaryName}),u.jsxs("h3",{className:"text-[1.5em] font-semibold text-center flex justify-between px-[.5em]",children:[u.jsx("span",{children:Ka(t.teams[n].ranking)}),u.jsx("span",{children:En(t.teams[n].point)})]})]})]},n))})]}):t.type==="players"?u.jsxs("div",{className:"absolute px-24 pb-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-1"}),u.jsxs("div",{className:"flex-[3] flex flex-col items-stretch",children:[u.jsxs("div",{className:Pr("flex gap-x-[1em] pl-[1em] mb-[.5em] items-end",{"mi-teams-in":e===0,"mi-teams-out":e>0}),children:[u.jsxs("div",{className:"flex-[5] space-x-[1.5em] text-[1.1em]",children:[u.jsxs("span",{children:[u.jsx("span",{className:"text-[1.5em]",children:t.roundCount})," 總局數"]}),u.jsxs("span",{className:"opacity-80",children:["（"," ",u.jsx("span",{className:"text-[1.5em]",children:t.exhaustedRoundCount})," ","流局數 ）"]})]}),u.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"分數"}),u.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"立直次數"}),u.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"和了次數"}),u.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"放銃次數"})]}),t.teamPlayers.map((n,i)=>u.jsxs("div",{className:Pr("relative overflow-hidden flex-1",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s"},children:[u.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to left, transparent, ${n.color})`,opacity:.5}},n.teamName),u.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${n.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),u.jsxs("div",{className:Pr("absolute inset-0 flex gap-x-[1em] items-center pl-[1em]",{"mi-teams-team-out":e>=0&&r>0}),children:[u.jsxs("div",{className:"text-left flex-[5]",children:[u.jsx("h3",{className:"text-[1.5em] font-semibold",children:n.playerFullname}),u.jsx("h3",{className:"text-[.8em] font-semibold",children:n.teamFullname})]}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("p",{className:"text-[1.5em] leading-[1em]",children:$v(n.result.score)}),u.jsx("p",{children:En(n.result.point)})]}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("span",{className:"text-[1.5em]",children:$v(n.result.riichiCount)}),"回"]}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("span",{className:"text-[1.5em]",children:$v(n.result.ronCount)}),"回"]}),u.jsxs("div",{className:"flex-1 text-right",children:[u.jsx("span",{className:"text-[1.5em]",children:$v(n.result.chuckCount)}),"回"]})]})]},n.teamName))]})]}):t.type==="chart"?u.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-1"}),u.jsxs("div",{className:"flex-[3] flex items-stretch gap-x-[1em]",children:[u.jsx("div",{className:Pr("flex-[3]",{"mi-chart-chart-in":e===0,"mi-chart-chart-out":e>0}),children:u.jsx(DHe,{rounds:t.rounds,players:t.players})}),u.jsx("div",{className:"flex-1 flex flex-col pb-[1em]",children:[0,1,2,3].map(n=>u.jsxs("div",{className:Pr("relative overflow-hidden flex-1 pl-[.5em] flex flex-col justify-center",{"mi-chart-player-in":e===0,"mi-chart-player-out":e>0}),style:{background:`linear-gradient(to left, transparent, ${t.teamPlayers[n].color}C0)`,animationDelay:e===0?n*.25+"s":"0s"},children:[u.jsx("img",{src:t.teamPlayers[n].teamLogoImageUrl+"?w=320&h=320",alt:t.teamPlayers[n].teamId,className:"absolute left-0 opacity-10 -z-10"}),u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].playerNickname}),u.jsx("p",{className:"text-[.75em]",children:t.teamPlayers[n].teamName})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].result.score}),u.jsx("p",{className:"text-[.75em]",children:En(t.teamPlayers[n].result.point)})]})]})]}))})]})]}):t.type==="ranking"?u.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[u.jsx("div",{className:"flex-1"}),u.jsxs("div",{className:Pr("flex-[5] flex flex-col",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),children:[u.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6",children:[u.jsx("p",{className:"flex-1 text-center",children:"排名"}),u.jsx("p",{className:"flex-[5]",children:"隊伍"}),u.jsx("p",{className:"flex-1 text-right",children:"積分"}),u.jsx("p",{className:"flex-1 text-right",children:"與前名差距"}),u.jsx("p",{className:"flex-1 text-right",children:"半莊數"})]}),t.teams.map((n,i)=>{var o,s,a,l;return u.jsxs("div",{className:Pr("relative flex-1 flex items-center gap-6 overflow-hidden",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`,opacity:n.newResult?1:.3},children:[u.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-25 -z-10"}),u.jsxs("div",{className:"absolute left-[.5em]",children:[n.ranking>i+1&&u.jsx("span",{children:u.jsx("i",{className:"bi bi-caret-up-fill text-green-500"})}),n.ranking<i+1&&u.jsx("span",{children:u.jsx("i",{className:"bi bi-caret-down-fill text-red-500"})})]}),u.jsx("p",{className:"flex-1 text-center space-x-1",children:u.jsx("span",{children:Ka(i+1)})}),u.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),u.jsx("p",{className:Pr("flex-1 text-right",{"text-green-500":n.newResult&&n.newResult.point>n.point,"text-red-500":n.newResult&&n.newResult.point<n.point}),children:En(((o=n.newResult)==null?void 0:o.point)||n.point)}),u.jsx("p",{className:"flex-1 text-right",children:i>0?((((s=t.teams[i-1].newResult)==null?void 0:s.point)||t.teams[i-1].point)-(((a=n.newResult)==null?void 0:a.point)||n.point)).toFixed(1):"-"}),u.jsxs("p",{className:"flex-1 text-right",children:[((l=n.newResult)==null?void 0:l.matchCount)||n.matchCount,u.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id)})]})]}):u.jsx(u.Fragment,{}),x2=({params:{matchId:t},forwardFlag:e,resetFlag:r,disableClick:n})=>{const{match:i,matchRounds:o}=rs(t),{data:s}=gR(t),{data:a}=Ko({queryKey:["tournament",s==null?void 0:s.tournament._id],queryFn:()=>e1(s==null?void 0:s.tournament._id).then(_=>({..._,teams:_.teams.sort((w,A)=>A.point-w.point)})),enabled:!!(s!=null&&s.tournament._id)}),l=E.useMemo(()=>{var k,N,j,L,V,F,M,B,z,ae,te,ge,Le,Qe;if(!i||!o||!s||!a)return[{type:"empty",_id:"empty",subslide:0}];const _=qG(Object.values(o)),w=[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:{playerEast:{...s.playerEast,point:_.result.playerEast.point,ranking:_.result.playerEast.ranking},playerSouth:{...s.playerSouth,point:_.result.playerSouth.point,ranking:_.result.playerSouth.ranking},playerWest:{...s.playerWest,point:_.result.playerWest.point,ranking:_.result.playerWest.ranking},playerNorth:{...s.playerNorth,point:_.result.playerNorth.point,ranking:_.result.playerNorth.ranking}},subslide:1}],A={playerEast:{score:((k=_.result.playerEast)==null?void 0:k.score)??25e3,point:((N=_.result.playerEast)==null?void 0:N.point)??0,ranking:((j=_.result.playerEast)==null?void 0:j.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerSouth:{score:((L=_.result.playerSouth)==null?void 0:L.score)??25e3,point:((V=_.result.playerSouth)==null?void 0:V.point)??0,ranking:((F=_.result.playerSouth)==null?void 0:F.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerWest:{score:((M=_.result.playerWest)==null?void 0:M.score)??25e3,point:((B=_.result.playerWest)==null?void 0:B.point)??0,ranking:((z=_.result.playerWest)==null?void 0:z.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerNorth:{score:((ae=_.result.playerNorth)==null?void 0:ae.score)??25e3,point:((te=_.result.playerNorth)==null?void 0:te.point)??0,ranking:((ge=_.result.playerNorth)==null?void 0:ge.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]}};for(const fe of _.rounds)A.playerEast.scores.push(fe.playerEast.afterScore),A.playerSouth.scores.push(fe.playerSouth.afterScore),A.playerWest.scores.push(fe.playerWest.afterScore),A.playerNorth.scores.push(fe.playerNorth.afterScore),fe.playerEast.status==="isRiichied"&&(A.playerEast.riichiCount+=1),fe.playerSouth.status==="isRiichied"&&(A.playerSouth.riichiCount+=1),fe.playerWest.status==="isRiichied"&&(A.playerWest.riichiCount+=1),fe.playerNorth.status==="isRiichied"&&(A.playerNorth.riichiCount+=1),(fe.type==="ron"||fe.type==="tsumo")&&(fe.playerEast.type==="win"&&(A.playerEast.ronCount+=1),fe.playerSouth.type==="win"&&(A.playerSouth.ronCount+=1),fe.playerWest.type==="win"&&(A.playerWest.ronCount+=1),fe.playerNorth.type==="win"&&(A.playerNorth.ronCount+=1)),fe.type==="ron"&&(fe.playerEast.type==="lose"&&(A.playerEast.chuckCount+=1),fe.playerSouth.type==="lose"&&(A.playerSouth.chuckCount+=1),fe.playerWest.type==="lose"&&(A.playerWest.chuckCount+=1),fe.playerNorth.type==="lose"&&(A.playerNorth.chuckCount+=1));const C=[{...s.playerEast,result:A.playerEast},{...s.playerSouth,result:A.playerSouth},{...s.playerWest,result:A.playerWest},{...s.playerNorth,result:A.playerNorth}].sort((fe,ut)=>ut.result.score-fe.result.score);w.push({type:"players",_id:"players",teamPlayers:C,roundCount:((Le=_.rounds)==null?void 0:Le.filter(fe=>fe.type!=="hotfix").length)??0,exhaustedRoundCount:((Qe=_.rounds)==null?void 0:Qe.filter(fe=>fe.type==="exhausted").length)??0,subslide:1});const T=_.rounds.findIndex(fe=>fe.code.startsWith("5."));w.push({type:"chart",_id:"chart",rounds:[{name:"東",playerEast:25e3,playerSouth:25e3,playerWest:25e3,playerNorth:25e3},..._.rounds.map((fe,ut)=>({name:ut===T?"南":"",playerEast:fe.playerEast.afterScore,playerSouth:fe.playerSouth.afterScore,playerWest:fe.playerWest.afterScore,playerNorth:fe.playerNorth.afterScore}))],players:{playerEast:{name:s.playerEast.playerNickname,color:s.playerEast.color},playerSouth:{name:s.playerSouth.playerNickname,color:s.playerSouth.color},playerWest:{name:s.playerWest.playerNickname,color:s.playerWest.color},playerNorth:{name:s.playerNorth.playerNickname,color:s.playerNorth.color}},teamPlayers:C,subslide:1});const P=["playerEast","playerSouth","playerWest","playerNorth"],I=[...a.teams].map(fe=>{for(const ut of P)if(fe.team._id===s[ut].teamId)return{...fe,newResult:{point:fe.point+_.result[ut].point+_.result[ut].penalty,matchCount:fe.matchCount+1}};return fe});return w.push({_id:"ranking",type:"ranking",teams:I.sort((fe,ut)=>{var nt,Z;return(((nt=ut.newResult)==null?void 0:nt.point)||ut.point)-(((Z=fe.newResult)==null?void 0:Z.point)||fe.point)}),subslide:1}),w},[i,s,o,a]),[c,f]=E.useState(0),[d,h]=E.useState(0),[p,m]=E.useState(!1),[y,g]=E.useState(e??0),[b,v]=E.useState(r??0),x=E.useCallback(()=>{if(p)return;const _=l[c];if(!_){f(1);return}_.type==="empty"?f(w=>w+1):d>=_.subslide-1?(f(w=>w+.5),m(!0),setTimeout(()=>{f(w=>Math.ceil(w)),h(0),m(!1)},1200)):(h(w=>w+.5),m(!0),setTimeout(()=>{h(w=>Math.ceil(w)),m(!1)},1200))},[p,c,l,d]),S=E.useCallback(()=>{n||x()},[n,x]);return E.useEffect(()=>{typeof e<"u"&&e!==y&&(x(),g(e))},[e,x,y]),E.useEffect(()=>{typeof r<"u"&&r!==b&&(f(0),h(0),v(r))},[e,x,y,b,r]),!i||!o||!s||!a?u.jsx(u.Fragment,{}):u.jsxs("div",{className:"match-introduction absolute inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:S,children:[u.jsx("div",{className:"absolute py-16 px-24 inset-0",children:u.jsxs("div",{className:"flex items-end gap-x-[0.25em] mi-title-in",children:[u.jsx("div",{children:u.jsx("img",{src:s.tournament.logoUrl+"?w=280&h=280&auto=format",alt:s.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:s.tournament.name}),u.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:s.nameAlt})]}),u.jsx("div",{children:u.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:"對局結果"})})]})}),l.map((_,w)=>u.jsx(MHe,{slide:_,status:c-w,subslide:d},_._id))]})};function FHe({params:{obsRoomId:t}}){const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(x2,{params:r})}const LHe=()=>{const t=[window.innerWidth,window.innerHeight],[e,r]=E.useState(t);return E.useEffect(()=>{const n=()=>{r([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),e},Ku=[{id:"scoring",name:"直播分數",render:t=>u.jsx(RO,{params:{matchId:t.matchId}})},{id:"introduction",name:"賽前介紹",render:t=>{var e,r;return u.jsx(vR,{params:{matchId:t.matchId},disableClick:!0,forwardFlag:(e=t.activeSceneProps)==null?void 0:e.forwardFlag,resetFlag:(r=t.activeSceneProps)==null?void 0:r.resetFlag})},actions:[{key:"reset",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-skip-backward-fill"})," 回到第一頁"]}),perform:t=>({...t,resetFlag:1-(t.resetFlag??0)})},{key:"forward",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-forward"})," 下一頁"]}),perform:t=>({...t,forwardFlag:1-(t.forwardFlag??0)})}]},{id:"result",name:"對局結果",render:t=>{var e,r;return u.jsx(x2,{params:{matchId:t.matchId},disableClick:!0,forwardFlag:(e=t.activeSceneProps)==null?void 0:e.forwardFlag,resetFlag:(r=t.activeSceneProps)==null?void 0:r.resetFlag})},actions:[{key:"reset",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-skip-backward-fill"})," 回到第一頁"]}),perform:t=>({...t,resetFlag:1-(t.resetFlag??0)})},{key:"forward",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-forward"})," 下一頁"]}),perform:t=>({...t,forwardFlag:1-(t.forwardFlag??0)})}]},{id:"realtime-stat",name:"現時數據",render:t=>{var e,r,n;return u.jsx(uw,{disableClick:!0,forwardFlag:(e=t.activeSceneProps)==null?void 0:e.forwardFlag,resetFlag:(r=t.activeSceneProps)==null?void 0:r.resetFlag,refetchFlag:(n=t.activeSceneProps)==null?void 0:n.refetchFlag})},actions:[{key:"refetch",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-cloud-download"})," 下載最新數據"]}),perform:t=>({...t,refetchFlag:1-(t.refetchFlag??0)})},{key:"reset",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-skip-backward-fill"})," 回到第一頁"]}),perform:t=>({...t,resetFlag:1-(t.resetFlag??0)})},{key:"forward",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-forward"})," 下一頁"]}),perform:t=>({...t,forwardFlag:1-(t.forwardFlag??0)})}]},{id:"realtime-stat-with-countdown",name:"現時數據(+下一場對局倒數＆自動播放)",render:t=>{var e,r;return u.jsx(uw,{disableClick:!0,auto:!0,minute:((e=t.activeSceneProps)==null?void 0:e.minute)??0,refetchFlag:(r=t.activeSceneProps)==null?void 0:r.refetchFlag})},actions:[{key:"p5m",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-caret-up-fill"})," +5 分鐘"]}),perform:t=>({minute:(t.minute??0)+5})},{key:"p1m",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-caret-up"})," +1 分鐘"]}),perform:t=>({minute:(t.minute??0)+1})},{key:"m1m",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-caret-down"})," -1 分鐘"]}),perform:t=>({minute:Math.max((t.minute??0)-1,0)})},{key:"m5m",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-caret-down-fill"})," -5 分鐘"]}),perform:t=>({minute:Math.max((t.minute??0)-5,0)})},{key:"reset-10m",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-arrow-clockwise"})," 重設成 10 分鐘"]}),perform:()=>({minute:10})},{key:"refetch",label:u.jsxs("span",{children:[u.jsx("i",{className:"bi bi-cloud-download"})," 下載最新數據"]}),perform:t=>({...t,refetchFlag:1-(t.refetchFlag??0)})}]},{id:"ended",name:"本日已結束",render:()=>u.jsx(RQ,{})}],BHe=({params:{obsRoomId:t}})=>{const e=E.useRef(null),[r]=LHe(),{data:n,update:i}=mr(`obs/${t}`),o=E.useMemo(()=>Ku.find(({id:l})=>l===(n==null?void 0:n.activeSceneId))??Ku[0],[n==null?void 0:n.activeSceneId]),s=E.useCallback(l=>{const c=l.currentTarget.getAttribute("data-id");if(!c)return;const f=Ku.find(({id:d})=>d===c);f&&i({activeSceneId:f.id})},[i]),a=E.useCallback(l=>()=>{i({activeSceneProps:l((n==null?void 0:n.activeSceneProps)??{})})},[n==null?void 0:n.activeSceneProps,i]);return E.useEffect(()=>{if(!e.current)return;const l=Math.min(.375,Math.max(0,(r-48)/720*.375));e.current.style.transform=`scale(${l})`},[e.current,r]),n?u.jsxs("main",{children:[u.jsxs("a",{href:"/v1/obs/1/control",className:"block text-center py-4 bg-neutral-300",children:["切換到入分控制台 ",u.jsx("i",{className:"bi bi-arrow-right-circle-fill"})]}),u.jsxs("div",{className:"py-8 container px-6 max-w-screen-md mx-auto space-y-6",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-red-600",children:[u.jsx("i",{className:"bi bi-record-circle"})," 目前場景：",(o==null?void 0:o.name)??"(沒有)"]}),u.jsx("div",{className:"relative aspect-video ring ring-red-500 mt-2",children:u.jsx("div",{className:"absolute overflow-hidden w-[1920px] h-[1080px] origin-top-left scale-[.375]",ref:e,children:u.jsx(DJ,{params:{obsRoomId:t}})})}),u.jsx("div",{className:"text-center",children:u.jsxs("a",{href:"/v1/obs/1/scene",target:"_blank",children:["打開連結 ",u.jsx("i",{className:"bi bi-box-arrow-up-right"})]})}),o.actions&&u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[u.jsxs("p",{className:"font-bold",children:[u.jsx("i",{className:"bi bi-hand-index-thumb"})," 場景動作："]}),o.actions.map(l=>u.jsx(Oe,{size:"xlarge",onClick:a(l.perform),children:l.label},l.key))]})]}),u.jsx("hr",{}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold mb-2",children:"切換場景（雙點擊以防誤觸）"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Ku.map(l=>u.jsx("button",{"data-id":l.id,"data-active":l.id===o.id,className:"bg-green-300 border-green-400 rounded-lg text-green-800 text-lg py-4 px-6 data-[active=true]:ring data-[active=true]:ring-red-500",onDoubleClick:s,children:l.name},l.id))})]})]})]}):u.jsx(u.Fragment,{})},DJ=({params:{obsRoomId:t}})=>{const{data:e}=mr(`obs/${t}`),r=E.useMemo(()=>Ku.find(({id:n})=>n===(e==null?void 0:e.activeSceneId))??Ku[0],[e==null?void 0:e.activeSceneId]);return e?u.jsx("div",{className:"absolute inset-0",children:r.render(e)}):u.jsx(u.Fragment,{})},UHe=new cpe({defaultOptions:{queries:{retry:2,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,staleTime:1/0}}});vC.createRoot(document.getElementById("root")).render(u.jsx(O.StrictMode,{children:u.jsx(ppe,{client:UHe,children:u.jsx(qhe,{children:u.jsx(Yye,{children:u.jsxs(Qte,{children:[u.jsx(Ye,{path:"/v1",component:kye}),u.jsx(Ye,{path:"/v1/create-match",component:FPe}),u.jsx(Ye,{path:"/v1/match/:matchId",component:Gye}),u.jsx(Ye,{path:"/v1/match/:matchId/obs",component:RO}),u.jsx(Ye,{path:"/v1/match/:matchId/overlay",component:DQ}),u.jsx(Ye,{path:"/v1/match/:matchId/control",component:$H}),u.jsx(Ye,{path:"/v1/match/:matchId/export",component:OQ}),u.jsx(Ye,{path:"/v1/match/:matchId/forecast",component:jQ}),u.jsx(Ye,{path:"/v1/match/:matchId/introduction",component:vR}),u.jsx(Ye,{path:"/v1/match/:matchId/summary",component:x2}),u.jsx(Ye,{path:"/v1/match/:matchId/nameplates",component:HPe}),u.jsx(Ye,{path:"/v1/match/:matchId/stat",component:kQ}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId",component:UPe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/scene",component:DJ}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/scene-control",component:BHe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/overlay",component:eTe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/control",component:qPe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/export",component:tTe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/forecast",component:XPe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/introduction",component:$He}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/summary",component:FHe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/weekly-summary",component:zV}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/realtime-summary",component:uw}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/end",component:RQ}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/score",component:VPe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/chart",component:zPe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/carousel",component:GPe}),u.jsx(Ye,{path:"/v1/obs/:obsRoomId/stat",component:KPe}),u.jsx(Ye,{path:"/v1/players",component:jPe}),u.jsx(Ye,{path:"/v1/teams",component:BPe}),u.jsx(Ye,{path:"/v1/matches",component:WPe}),u.jsx(Ye,{path:"/v1/weekly-summary/",component:zV}),u.jsx(Ye,{path:"/v1/weekly-summary/:week",component:$J}),u.jsx(Ye,{path:"/v1/realtime-summary/",component:uw})]})})})})}));Jte();export{Rl as c,ct as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
