import{r as t,z as p,A as h,j as e,B as f}from"./index-0LaFy2cp.js";import{S as n}from"./SCENES-DkkTBgDe.js";function j(){const c=t.useRef(null),[l]=p(),{data:r,update:i}=h("obs/1"),s=t.useMemo(()=>n.find(({id:a})=>a===(r==null?void 0:r.activeSceneId))??n[0],[r==null?void 0:r.activeSceneId]),x=t.useCallback(a=>{const d=a.currentTarget.getAttribute("data-id");if(!d)return;const o=n.find(({id:u})=>u===d);o&&i({activeSceneId:o.id})},[i]),m=t.useCallback(a=>()=>{i({activeSceneProps:a((r==null?void 0:r.activeSceneProps)??{})})},[r==null?void 0:r.activeSceneProps,i]);return t.useEffect(()=>{if(!c.current)return;const a=Math.min(.375,Math.max(0,(l-48)/720*.375));c.current.style.transform=`scale(${a})`},[c.current,l]),r?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"py-8 container px-6 max-w-(--breakpoint-md) mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-red-600",children:[e.jsx("i",{className:"bi bi-record-circle"})," 目前場景：",(s==null?void 0:s.name)??"(沒有)"]}),e.jsx("div",{className:"overflow-hidden w-full aspect-video ring-3 ring-error mt-2",children:e.jsx("iframe",{className:" w-[1920px] h-[1080px] origin-top-left scale-[.375]",src:"/v2/obs/scene/master",frameBorder:0})}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"/v2/obs/scene/master",target:"_blank",children:["打開連結 ",e.jsx("i",{className:"bi bi-box-arrow-up-right"})]})}),s.actions&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[e.jsxs("p",{className:"font-bold",children:[e.jsx("i",{className:"bi bi-hand-index-thumb"})," 場景動作："]}),s.actions.map(a=>e.jsx(f,{size:"xlarge",onClick:m(a.perform),children:a.label},a.key))]})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold mb-2",children:"切換場景（雙點擊以防誤觸）"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(a=>e.jsx("button",{"data-id":a.id,"data-active":a.id===s.id,className:"bg-green-300 border-green-400 rounded-lg text-green-800 text-lg py-4 px-6 data-[active=true]:ring-3 data-[active=true]:ring-red-500",onDoubleClick:x,children:a.name},a.id))})]})]})}):e.jsx(e.Fragment,{})}export{j as default};
