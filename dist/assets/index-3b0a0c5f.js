function mC(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(n,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var c0={exports:{}},Yu={},f0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=Symbol.for("react.element"),_C=Symbol.for("react.portal"),SC=Symbol.for("react.fragment"),xC=Symbol.for("react.strict_mode"),wC=Symbol.for("react.profiler"),EC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),AC=Symbol.for("react.forward_ref"),bC=Symbol.for("react.suspense"),PC=Symbol.for("react.memo"),IC=Symbol.for("react.lazy"),og=Symbol.iterator;function NC(t){return t===null||typeof t!="object"?null:(t=og&&t[og]||t["@@iterator"],typeof t=="function"?t:null)}var d0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p0=Object.assign,h0={};function Mi(t,e,r){this.props=t,this.context=e,this.refs=h0,this.updater=r||d0}Mi.prototype.isReactComponent={};Mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y0(){}y0.prototype=Mi.prototype;function Kp(t,e,r){this.props=t,this.context=e,this.refs=h0,this.updater=r||d0}var Yp=Kp.prototype=new y0;Yp.constructor=Kp;p0(Yp,Mi.prototype);Yp.isPureReactComponent=!0;var ig=Array.isArray,g0=Object.prototype.hasOwnProperty,Jp={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,r){var n,o={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)g0.call(e,n)&&!m0.hasOwnProperty(n)&&(o[n]=e[n]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)o[n]===void 0&&(o[n]=a[n]);return{$$typeof:la,type:t,key:i,ref:s,props:o,_owner:Jp.current}}function kC(t,e){return{$$typeof:la,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xp(t){return typeof t=="object"&&t!==null&&t.$$typeof===la}function TC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var sg=/\/+/g;function Bc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TC(""+t.key):e.toString(36)}function sl(t,e,r,n,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case la:case _C:s=!0}}if(s)return s=t,o=o(s),t=n===""?"."+Bc(s,0):n,ig(o)?(r="",t!=null&&(r=t.replace(sg,"$&/")+"/"),sl(o,e,r,"",function(u){return u})):o!=null&&(Xp(o)&&(o=kC(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(sg,"$&/")+"/")+t)),e.push(o)),1;if(s=0,n=n===""?".":n+":",ig(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+Bc(i,a);s+=sl(i,e,r,l,o)}else if(l=NC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+Bc(i,a++),s+=sl(i,e,r,l,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Da(t,e,r){if(t==null)return t;var n=[],o=0;return sl(t,n,"","",function(i){return e.call(r,i,o++)}),n}function RC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},al={transition:null},OC={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:al,ReactCurrentOwner:Jp};te.Children={map:Da,forEach:function(t,e,r){Da(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!Xp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Mi;te.Fragment=SC;te.Profiler=wC;te.PureComponent=Kp;te.StrictMode=xC;te.Suspense=bC;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OC;te.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=p0({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Jp.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)g0.call(e,l)&&!m0.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:la,type:t.type,key:o,ref:i,props:n,_owner:s}};te.createContext=function(t){return t={$$typeof:CC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EC,_context:t},t.Consumer=t};te.createElement=v0;te.createFactory=function(t){var e=v0.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:AC,render:t}};te.isValidElement=Xp;te.lazy=function(t){return{$$typeof:IC,_payload:{_status:-1,_result:t},_init:RC}};te.memo=function(t,e){return{$$typeof:PC,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=al.transition;al.transition={};try{t()}finally{al.transition=e}};te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};te.useCallback=function(t,e){return ht.current.useCallback(t,e)};te.useContext=function(t){return ht.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};te.useEffect=function(t,e){return ht.current.useEffect(t,e)};te.useId=function(){return ht.current.useId()};te.useImperativeHandle=function(t,e,r){return ht.current.useImperativeHandle(t,e,r)};te.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ht.current.useMemo(t,e)};te.useReducer=function(t,e,r){return ht.current.useReducer(t,e,r)};te.useRef=function(t){return ht.current.useRef(t)};te.useState=function(t){return ht.current.useState(t)};te.useSyncExternalStore=function(t,e,r){return ht.current.useSyncExternalStore(t,e,r)};te.useTransition=function(){return ht.current.useTransition()};te.version="18.2.0";f0.exports=te;var x=f0.exports;const ge=u0(x),jC=mC({__proto__:null,default:ge},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=x,DC=Symbol.for("react.element"),FC=Symbol.for("react.fragment"),MC=Object.prototype.hasOwnProperty,LC=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BC={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,r){var n,o={},i=null,s=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)MC.call(e,n)&&!BC.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:DC,type:t,key:i,ref:s,props:o,_owner:LC.current}}Yu.Fragment=FC;Yu.jsx=_0;Yu.jsxs=_0;c0.exports=Yu;var c=c0.exports,fd={},S0={exports:{}},It={},x0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,W){var L=R.length;R.push(W);e:for(;0<L;){var le=L-1>>>1,Ee=R[le];if(0<o(Ee,W))R[le]=W,R[L]=Ee,L=le;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var W=R[0],L=R.pop();if(L!==W){R[0]=L;e:for(var le=0,Ee=R.length,mr=Ee>>>1;le<mr;){var Bt=2*(le+1)-1,Mr=R[Bt],Ut=Bt+1,D=R[Ut];if(0>o(Mr,L))Ut<Ee&&0>o(D,Mr)?(R[le]=D,R[Ut]=L,le=Ut):(R[le]=Mr,R[Bt]=L,le=Bt);else if(Ut<Ee&&0>o(D,L))R[le]=D,R[Ut]=L,le=Ut;else break e}}return W}function o(R,W){var L=R.sortIndex-W.sortIndex;return L!==0?L:R.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],p=1,d=null,f=3,y=!1,v=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=R)n(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=r(u)}}function E(R){if(S=!1,g(R),!v)if(r(l)!==null)v=!0,Re(A);else{var W=r(u);W!==null&&nt(E,W.startTime-R)}}function A(R,W){v=!1,S&&(S=!1,m(O),O=-1),y=!0;var L=f;try{for(g(W),d=r(l);d!==null&&(!(d.expirationTime>W)||R&&!ve());){var le=d.callback;if(typeof le=="function"){d.callback=null,f=d.priorityLevel;var Ee=le(d.expirationTime<=W);W=t.unstable_now(),typeof Ee=="function"?d.callback=Ee:d===r(l)&&n(l),g(W)}else n(l);d=r(l)}if(d!==null)var mr=!0;else{var Bt=r(u);Bt!==null&&nt(E,Bt.startTime-W),mr=!1}return mr}finally{d=null,f=L,y=!1}}var b=!1,T=null,O=-1,Q=5,V=-1;function ve(){return!(t.unstable_now()-V<Q)}function H(){if(T!==null){var R=t.unstable_now();V=R;var W=!0;try{W=T(!0,R)}finally{W?U():(b=!1,T=null)}}else b=!1}var U;if(typeof h=="function")U=function(){h(H)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,je=ae.port2;ae.port1.onmessage=H,U=function(){je.postMessage(null)}}else U=function(){P(H,0)};function Re(R){T=R,b||(b=!0,U())}function nt(R,W){O=P(function(){R(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,Re(A))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var L=f;f=W;try{return R()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var L=f;f=R;try{return W()}finally{f=L}},t.unstable_scheduleCallback=function(R,W,L){var le=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?le+L:le):L=le,R){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=L+Ee,R={id:p++,callback:W,priorityLevel:R,startTime:L,expirationTime:Ee,sortIndex:-1},L>le?(R.sortIndex=L,e(u,R),r(l)===null&&R===r(u)&&(S?(m(O),O=-1):S=!0,nt(E,L-le))):(R.sortIndex=Ee,e(l,R),v||y||(v=!0,Re(A))),R},t.unstable_shouldYield=ve,t.unstable_wrapCallback=function(R){var W=f;return function(){var L=f;f=W;try{return R.apply(this,arguments)}finally{f=L}}}})(w0);x0.exports=w0;var UC=x0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=x,Pt=UC;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C0=new Set,js={};function so(t,e){hi(t,e),hi(t+"Capture",e)}function hi(t,e){for(js[t]=e,t=0;t<e.length;t++)C0.add(e[t])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dd=Object.prototype.hasOwnProperty,WC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ag={},lg={};function zC(t){return dd.call(lg,t)?!0:dd.call(ag,t)?!1:WC.test(t)?lg[t]=!0:(ag[t]=!0,!1)}function VC(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GC(t,e,r,n){if(e===null||typeof e>"u"||VC(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,r,n,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zp=/[\-:]([a-z])/g;function eh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zp,eh);tt[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zp,eh);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zp,eh);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function th(t,e,r,n){var o=tt.hasOwnProperty(e)?tt[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GC(e,r,o,n)&&(r=null),n||o===null?zC(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var $r=E0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fa=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),rh=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),A0=Symbol.for("react.provider"),b0=Symbol.for("react.context"),nh=Symbol.for("react.forward_ref"),hd=Symbol.for("react.suspense"),yd=Symbol.for("react.suspense_list"),oh=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),P0=Symbol.for("react.offscreen"),ug=Symbol.iterator;function Ki(t){return t===null||typeof t!="object"?null:(t=ug&&t[ug]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Uc;function ds(t){if(Uc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Uc=e&&e[1]||""}return`
`+Uc+t}var Wc=!1;function zc(t,e){if(!t||Wc)return"";Wc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=n.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Wc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ds(t):""}function HC(t){switch(t.tag){case 5:return ds(t.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 2:case 15:return t=zc(t.type,!1),t;case 11:return t=zc(t.type.render,!1),t;case 1:return t=zc(t.type,!0),t;default:return""}}function gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oo:return"Fragment";case Ro:return"Portal";case pd:return"Profiler";case rh:return"StrictMode";case hd:return"Suspense";case yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b0:return(t.displayName||"Context")+".Consumer";case A0:return(t._context.displayName||"Context")+".Provider";case nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oh:return e=t.displayName||null,e!==null?e:gd(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return gd(t(e))}catch{}}return null}function QC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gd(e);case 8:return e===rh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qC(t){var e=I0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ma(t){t._valueTracker||(t._valueTracker=qC(t))}function N0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=I0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function md(t,e){var r=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=dn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k0(t,e){e=e.checked,e!=null&&th(t,"checked",e,!1)}function vd(t,e){k0(t,e);var r=dn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_d(t,e.type,r):e.hasOwnProperty("defaultValue")&&_d(t,e.type,dn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function _d(t,e,r){(e!=="number"||kl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ps=Array.isArray;function qo(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+dn(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(I(92));if(ps(r)){if(1<r.length)throw Error(I(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:dn(r)}}function T0(t,e){var r=dn(e.value),n=dn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function R0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var La,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(La=La||document.createElement("div"),La.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=La.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $s(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KC=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(t){KC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ms[e]=ms[t]})});function j0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ms.hasOwnProperty(t)&&ms[t]?(""+e).trim():e+"px"}function $0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=j0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var YC=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wd(t,e){if(e){if(YC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Ed(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=null;function ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ad=null,Ko=null,Yo=null;function hg(t){if(t=fa(t)){if(typeof Ad!="function")throw Error(I(280));var e=t.stateNode;e&&(e=tc(e),Ad(t.stateNode,t.type,e))}}function D0(t){Ko?Yo?Yo.push(t):Yo=[t]:Ko=t}function F0(){if(Ko){var t=Ko,e=Yo;if(Yo=Ko=null,hg(t),e)for(t=0;t<e.length;t++)hg(e[t])}}function M0(t,e){return t(e)}function L0(){}var Vc=!1;function B0(t,e,r){if(Vc)return t(e,r);Vc=!0;try{return M0(t,e,r)}finally{Vc=!1,(Ko!==null||Yo!==null)&&(L0(),F0())}}function Ds(t,e){var r=t.stateNode;if(r===null)return null;var n=tc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(I(231,e,typeof r));return r}var bd=!1;if(Ir)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){bd=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{bd=!1}function JC(t,e,r,n,o,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(p){this.onError(p)}}var vs=!1,Tl=null,Rl=!1,Pd=null,XC={onError:function(t){vs=!0,Tl=t}};function ZC(t,e,r,n,o,i,s,a,l){vs=!1,Tl=null,JC.apply(XC,arguments)}function eA(t,e,r,n,o,i,s,a,l){if(ZC.apply(this,arguments),vs){if(vs){var u=Tl;vs=!1,Tl=null}else throw Error(I(198));Rl||(Rl=!0,Pd=u)}}function ao(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function U0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yg(t){if(ao(t)!==t)throw Error(I(188))}function tA(t){var e=t.alternate;if(!e){if(e=ao(t),e===null)throw Error(I(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return yg(o),t;if(i===n)return yg(o),e;i=i.sibling}throw Error(I(188))}if(r.return!==n.return)r=o,n=i;else{for(var s=!1,a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s)throw Error(I(189))}}if(r.alternate!==n)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?t:e}function W0(t){return t=tA(t),t!==null?z0(t):null}function z0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z0(t);if(e!==null)return e;t=t.sibling}return null}var V0=Pt.unstable_scheduleCallback,gg=Pt.unstable_cancelCallback,rA=Pt.unstable_shouldYield,nA=Pt.unstable_requestPaint,Oe=Pt.unstable_now,oA=Pt.unstable_getCurrentPriorityLevel,sh=Pt.unstable_ImmediatePriority,G0=Pt.unstable_UserBlockingPriority,Ol=Pt.unstable_NormalPriority,iA=Pt.unstable_LowPriority,H0=Pt.unstable_IdlePriority,Ju=null,dr=null;function sA(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Ju,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:uA,aA=Math.log,lA=Math.LN2;function uA(t){return t>>>=0,t===0?32:31-(aA(t)/lA|0)|0}var Ba=64,Ua=4194304;function hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,i=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~o;a!==0?n=hs(a):(i&=s,i!==0&&(n=hs(i)))}else s=r&~o,s!==0?n=hs(s):i!==0&&(n=hs(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&o)&&(o=n&-n,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Jt(e),o=1<<r,n|=t[r],e&=~o;return n}function cA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fA(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Jt(i),a=1<<s,l=o[s];l===-1?(!(a&r)||a&n)&&(o[s]=cA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Id(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q0(){var t=Ba;return Ba<<=1,!(Ba&4194240)&&(Ba=64),t}function Gc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ua(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=r}function dA(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Jt(r),i=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~i}}function ah(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Jt(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var ue=0;function q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K0,lh,Y0,J0,X0,Nd=!1,Wa=[],Zr=null,en=null,tn=null,Fs=new Map,Ms=new Map,Hr=[],pA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mg(t,e){switch(t){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Fs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(e.pointerId)}}function Ji(t,e,r,n,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},e!==null&&(e=fa(e),e!==null&&lh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function hA(t,e,r,n,o){switch(e){case"focusin":return Zr=Ji(Zr,t,e,r,n,o),!0;case"dragenter":return en=Ji(en,t,e,r,n,o),!0;case"mouseover":return tn=Ji(tn,t,e,r,n,o),!0;case"pointerover":var i=o.pointerId;return Fs.set(i,Ji(Fs.get(i)||null,t,e,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,Ms.set(i,Ji(Ms.get(i)||null,t,e,r,n,o)),!0}return!1}function Z0(t){var e=Nn(t.target);if(e!==null){var r=ao(e);if(r!==null){if(e=r.tag,e===13){if(e=U0(r),e!==null){t.blockedOn=e,X0(t.priority,function(){Y0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ll(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Cd=n,r.target.dispatchEvent(n),Cd=null}else return e=fa(r),e!==null&&lh(e),t.blockedOn=r,!1;e.shift()}return!0}function vg(t,e,r){ll(t)&&r.delete(e)}function yA(){Nd=!1,Zr!==null&&ll(Zr)&&(Zr=null),en!==null&&ll(en)&&(en=null),tn!==null&&ll(tn)&&(tn=null),Fs.forEach(vg),Ms.forEach(vg)}function Xi(t,e){t.blockedOn===e&&(t.blockedOn=null,Nd||(Nd=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,yA)))}function Ls(t){function e(o){return Xi(o,t)}if(0<Wa.length){Xi(Wa[0],t);for(var r=1;r<Wa.length;r++){var n=Wa[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Zr!==null&&Xi(Zr,t),en!==null&&Xi(en,t),tn!==null&&Xi(tn,t),Fs.forEach(e),Ms.forEach(e),r=0;r<Hr.length;r++)n=Hr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Hr.length&&(r=Hr[0],r.blockedOn===null);)Z0(r),r.blockedOn===null&&Hr.shift()}var Jo=$r.ReactCurrentBatchConfig,$l=!0;function gA(t,e,r,n){var o=ue,i=Jo.transition;Jo.transition=null;try{ue=1,uh(t,e,r,n)}finally{ue=o,Jo.transition=i}}function mA(t,e,r,n){var o=ue,i=Jo.transition;Jo.transition=null;try{ue=4,uh(t,e,r,n)}finally{ue=o,Jo.transition=i}}function uh(t,e,r,n){if($l){var o=kd(t,e,r,n);if(o===null)tf(t,e,n,Dl,r),mg(t,n);else if(hA(o,t,e,r,n))n.stopPropagation();else if(mg(t,n),e&4&&-1<pA.indexOf(t)){for(;o!==null;){var i=fa(o);if(i!==null&&K0(i),i=kd(t,e,r,n),i===null&&tf(t,e,n,Dl,r),i===o)break;o=i}o!==null&&n.stopPropagation()}else tf(t,e,n,null,r)}}var Dl=null;function kd(t,e,r,n){if(Dl=null,t=ih(n),t=Nn(t),t!==null)if(e=ao(t),e===null)t=null;else if(r=e.tag,r===13){if(t=U0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dl=t,null}function eS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oA()){case sh:return 1;case G0:return 4;case Ol:case iA:return 16;case H0:return 536870912;default:return 16}default:return 16}}var qr=null,ch=null,ul=null;function tS(){if(ul)return ul;var t,e=ch,r=e.length,n,o="value"in qr?qr.value:qr.textContent,i=o.length;for(t=0;t<r&&e[t]===o[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===o[i-n];n++);return ul=o.slice(t,1<n?1-n:void 0)}function cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function za(){return!0}function _g(){return!1}function Nt(t){function e(r,n,o,i,s){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?za:_g,this.isPropagationStopped=_g,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),e}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fh=Nt(Li),ca=Pe({},Li,{view:0,detail:0}),vA=Nt(ca),Hc,Qc,Zi,Xu=Pe({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zi&&(Zi&&t.type==="mousemove"?(Hc=t.screenX-Zi.screenX,Qc=t.screenY-Zi.screenY):Qc=Hc=0,Zi=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:Qc}}),Sg=Nt(Xu),_A=Pe({},Xu,{dataTransfer:0}),SA=Nt(_A),xA=Pe({},ca,{relatedTarget:0}),qc=Nt(xA),wA=Pe({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),EA=Nt(wA),CA=Pe({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AA=Nt(CA),bA=Pe({},Li,{data:0}),xg=Nt(bA),PA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NA[t])?!!e[t]:!1}function dh(){return kA}var TA=Pe({},ca,{key:function(t){if(t.key){var e=PA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dh,charCode:function(t){return t.type==="keypress"?cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RA=Nt(TA),OA=Pe({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wg=Nt(OA),jA=Pe({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dh}),$A=Nt(jA),DA=Pe({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),FA=Nt(DA),MA=Pe({},Xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LA=Nt(MA),BA=[9,13,27,32],ph=Ir&&"CompositionEvent"in window,_s=null;Ir&&"documentMode"in document&&(_s=document.documentMode);var UA=Ir&&"TextEvent"in window&&!_s,rS=Ir&&(!ph||_s&&8<_s&&11>=_s),Eg=String.fromCharCode(32),Cg=!1;function nS(t,e){switch(t){case"keyup":return BA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jo=!1;function WA(t,e){switch(t){case"compositionend":return oS(e);case"keypress":return e.which!==32?null:(Cg=!0,Eg);case"textInput":return t=e.data,t===Eg&&Cg?null:t;default:return null}}function zA(t,e){if(jo)return t==="compositionend"||!ph&&nS(t,e)?(t=tS(),ul=ch=qr=null,jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rS&&e.locale!=="ko"?null:e.data;default:return null}}var VA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VA[t.type]:e==="textarea"}function iS(t,e,r,n){D0(n),e=Fl(e,"onChange"),0<e.length&&(r=new fh("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ss=null,Bs=null;function GA(t){gS(t,0)}function Zu(t){var e=Fo(t);if(N0(e))return t}function HA(t,e){if(t==="change")return e}var sS=!1;if(Ir){var Kc;if(Ir){var Yc="oninput"in document;if(!Yc){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Yc=typeof bg.oninput=="function"}Kc=Yc}else Kc=!1;sS=Kc&&(!document.documentMode||9<document.documentMode)}function Pg(){Ss&&(Ss.detachEvent("onpropertychange",aS),Bs=Ss=null)}function aS(t){if(t.propertyName==="value"&&Zu(Bs)){var e=[];iS(e,Bs,t,ih(t)),B0(GA,e)}}function QA(t,e,r){t==="focusin"?(Pg(),Ss=e,Bs=r,Ss.attachEvent("onpropertychange",aS)):t==="focusout"&&Pg()}function qA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(Bs)}function KA(t,e){if(t==="click")return Zu(e)}function YA(t,e){if(t==="input"||t==="change")return Zu(e)}function JA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:JA;function Us(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!dd.call(e,o)||!rr(t[o],e[o]))return!1}return!0}function Ig(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ng(t,e){var r=Ig(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ig(r)}}function lS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uS(){for(var t=window,e=kl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kl(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XA(t){var e=uS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&lS(r.ownerDocument.documentElement,r)){if(n!==null&&hh(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=n.end===void 0?i:Math.min(n.end,o),!t.extend&&i>n&&(o=n,n=i,i=o),o=Ng(r,i);var s=Ng(r,n);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZA=Ir&&"documentMode"in document&&11>=document.documentMode,$o=null,Td=null,xs=null,Rd=!1;function kg(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rd||$o==null||$o!==kl(n)||(n=$o,"selectionStart"in n&&hh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xs&&Us(xs,n)||(xs=n,n=Fl(Td,"onSelect"),0<n.length&&(e=new fh("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=$o)))}function Va(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Do={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},Jc={},cS={};Ir&&(cS=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function ec(t){if(Jc[t])return Jc[t];if(!Do[t])return t;var e=Do[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cS)return Jc[t]=e[r];return t}var fS=ec("animationend"),dS=ec("animationiteration"),pS=ec("animationstart"),hS=ec("transitionend"),yS=new Map,Tg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(t,e){yS.set(t,e),so(e,[t])}for(var Xc=0;Xc<Tg.length;Xc++){var Zc=Tg[Xc],eb=Zc.toLowerCase(),tb=Zc[0].toUpperCase()+Zc.slice(1);_n(eb,"on"+tb)}_n(fS,"onAnimationEnd");_n(dS,"onAnimationIteration");_n(pS,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(hS,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function Rg(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,eA(n,e,void 0,t),t.currentTarget=null}function gS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Rg(o,a,u),i=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Rg(o,a,u),i=l}}}if(Rl)throw t=Pd,Rl=!1,Pd=null,t}function _e(t,e){var r=e[Fd];r===void 0&&(r=e[Fd]=new Set);var n=t+"__bubble";r.has(n)||(mS(e,t,2,!1),r.add(n))}function ef(t,e,r){var n=0;e&&(n|=4),mS(r,t,n,e)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Ws(t){if(!t[Ga]){t[Ga]=!0,C0.forEach(function(r){r!=="selectionchange"&&(rb.has(r)||ef(r,!1,t),ef(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ga]||(e[Ga]=!0,ef("selectionchange",!1,e))}}function mS(t,e,r,n){switch(eS(e)){case 1:var o=gA;break;case 4:o=mA;break;default:o=uh}r=o.bind(null,e,r,t),o=void 0,!bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function tf(t,e,r,n,o){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=Nn(a),s===null)return;if(l=s.tag,l===5||l===6){n=i=s;continue e}a=a.parentNode}}n=n.return}B0(function(){var u=i,p=ih(r),d=[];e:{var f=yS.get(t);if(f!==void 0){var y=fh,v=t;switch(t){case"keypress":if(cl(r)===0)break e;case"keydown":case"keyup":y=RA;break;case"focusin":v="focus",y=qc;break;case"focusout":v="blur",y=qc;break;case"beforeblur":case"afterblur":y=qc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=SA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=$A;break;case fS:case dS:case pS:y=EA;break;case hS:y=FA;break;case"scroll":y=vA;break;case"wheel":y=LA;break;case"copy":case"cut":case"paste":y=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=wg}var S=(e&4)!==0,P=!S&&t==="scroll",m=S?f!==null?f+"Capture":null:f;S=[];for(var h=u,g;h!==null;){g=h;var E=g.stateNode;if(g.tag===5&&E!==null&&(g=E,m!==null&&(E=Ds(h,m),E!=null&&S.push(zs(h,E,g)))),P)break;h=h.return}0<S.length&&(f=new y(f,v,null,r,p),d.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&r!==Cd&&(v=r.relatedTarget||r.fromElement)&&(Nn(v)||v[Nr]))break e;if((y||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?Nn(v):null,v!==null&&(P=ao(v),v!==P||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(S=Sg,E="onMouseLeave",m="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(S=wg,E="onPointerLeave",m="onPointerEnter",h="pointer"),P=y==null?f:Fo(y),g=v==null?f:Fo(v),f=new S(E,h+"leave",y,r,p),f.target=P,f.relatedTarget=g,E=null,Nn(p)===u&&(S=new S(m,h+"enter",v,r,p),S.target=g,S.relatedTarget=P,E=S),P=E,y&&v)t:{for(S=y,m=v,h=0,g=S;g;g=po(g))h++;for(g=0,E=m;E;E=po(E))g++;for(;0<h-g;)S=po(S),h--;for(;0<g-h;)m=po(m),g--;for(;h--;){if(S===m||m!==null&&S===m.alternate)break t;S=po(S),m=po(m)}S=null}else S=null;y!==null&&Og(d,f,y,S,!1),v!==null&&P!==null&&Og(d,P,v,S,!0)}}e:{if(f=u?Fo(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var A=HA;else if(Ag(f))if(sS)A=YA;else{A=qA;var b=QA}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=KA);if(A&&(A=A(t,u))){iS(d,A,r,p);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&_d(f,"number",f.value)}switch(b=u?Fo(u):window,t){case"focusin":(Ag(b)||b.contentEditable==="true")&&($o=b,Td=u,xs=null);break;case"focusout":xs=Td=$o=null;break;case"mousedown":Rd=!0;break;case"contextmenu":case"mouseup":case"dragend":Rd=!1,kg(d,r,p);break;case"selectionchange":if(ZA)break;case"keydown":case"keyup":kg(d,r,p)}var T;if(ph)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else jo?nS(t,r)&&(O="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(rS&&r.locale!=="ko"&&(jo||O!=="onCompositionStart"?O==="onCompositionEnd"&&jo&&(T=tS()):(qr=p,ch="value"in qr?qr.value:qr.textContent,jo=!0)),b=Fl(u,O),0<b.length&&(O=new xg(O,t,null,r,p),d.push({event:O,listeners:b}),T?O.data=T:(T=oS(r),T!==null&&(O.data=T)))),(T=UA?WA(t,r):zA(t,r))&&(u=Fl(u,"onBeforeInput"),0<u.length&&(p=new xg("onBeforeInput","beforeinput",null,r,p),d.push({event:p,listeners:u}),p.data=T))}gS(d,e)})}function zs(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Fl(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Ds(t,r),i!=null&&n.unshift(zs(t,i,o)),i=Ds(t,e),i!=null&&n.push(zs(t,i,o))),t=t.return}return n}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Og(t,e,r,n,o){for(var i=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,o?(l=Ds(r,i),l!=null&&s.unshift(zs(r,l,a))):o||(l=Ds(r,i),l!=null&&s.push(zs(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var nb=/\r\n?/g,ob=/\u0000|\uFFFD/g;function jg(t){return(typeof t=="string"?t:""+t).replace(nb,`
`).replace(ob,"")}function Ha(t,e,r){if(e=jg(e),jg(t)!==e&&r)throw Error(I(425))}function Ml(){}var Od=null,jd=null;function $d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dd=typeof setTimeout=="function"?setTimeout:void 0,ib=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,sb=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(t){return $g.resolve(null).then(t).catch(ab)}:Dd;function ab(t){setTimeout(function(){throw t})}function rf(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),Ls(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Ls(e)}function rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Bi=Math.random().toString(36).slice(2),lr="__reactFiber$"+Bi,Vs="__reactProps$"+Bi,Nr="__reactContainer$"+Bi,Fd="__reactEvents$"+Bi,lb="__reactListeners$"+Bi,ub="__reactHandles$"+Bi;function Nn(t){var e=t[lr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Nr]||r[lr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Dg(t);t!==null;){if(r=t[lr])return r;t=Dg(t)}return e}t=r,r=t.parentNode}return null}function fa(t){return t=t[lr]||t[Nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function tc(t){return t[Vs]||null}var Md=[],Mo=-1;function Sn(t){return{current:t}}function xe(t){0>Mo||(t.current=Md[Mo],Md[Mo]=null,Mo--)}function me(t,e){Mo++,Md[Mo]=t.current,t.current=e}var pn={},at=Sn(pn),St=Sn(!1),Jn=pn;function yi(t,e){var r=t.type.contextTypes;if(!r)return pn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function xt(t){return t=t.childContextTypes,t!=null}function Ll(){xe(St),xe(at)}function Fg(t,e,r){if(at.current!==pn)throw Error(I(168));me(at,e),me(St,r)}function vS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(I(108,QC(t)||"Unknown",o));return Pe({},r,n)}function Bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pn,Jn=at.current,me(at,t),me(St,St.current),!0}function Mg(t,e,r){var n=t.stateNode;if(!n)throw Error(I(169));r?(t=vS(t,e,Jn),n.__reactInternalMemoizedMergedChildContext=t,xe(St),xe(at),me(at,t)):xe(St),me(St,r)}var xr=null,rc=!1,nf=!1;function _S(t){xr===null?xr=[t]:xr.push(t)}function cb(t){rc=!0,_S(t)}function xn(){if(!nf&&xr!==null){nf=!0;var t=0,e=ue;try{var r=xr;for(ue=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}xr=null,rc=!1}catch(o){throw xr!==null&&(xr=xr.slice(t+1)),V0(sh,xn),o}finally{ue=e,nf=!1}}return null}var Lo=[],Bo=0,Ul=null,Wl=0,Rt=[],Ot=0,Xn=null,wr=1,Er="";function An(t,e){Lo[Bo++]=Wl,Lo[Bo++]=Ul,Ul=t,Wl=e}function SS(t,e,r){Rt[Ot++]=wr,Rt[Ot++]=Er,Rt[Ot++]=Xn,Xn=t;var n=wr;t=Er;var o=32-Jt(n)-1;n&=~(1<<o),r+=1;var i=32-Jt(e)+o;if(30<i){var s=o-o%5;i=(n&(1<<s)-1).toString(32),n>>=s,o-=s,wr=1<<32-Jt(e)+o|r<<o|n,Er=i+t}else wr=1<<i|r<<o|n,Er=t}function yh(t){t.return!==null&&(An(t,1),SS(t,1,0))}function gh(t){for(;t===Ul;)Ul=Lo[--Bo],Lo[Bo]=null,Wl=Lo[--Bo],Lo[Bo]=null;for(;t===Xn;)Xn=Rt[--Ot],Rt[Ot]=null,Er=Rt[--Ot],Rt[Ot]=null,wr=Rt[--Ot],Rt[Ot]=null}var bt=null,At=null,we=!1,Qt=null;function xS(t,e){var r=jt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Lg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,At=rn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Xn!==null?{id:wr,overflow:Er}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=jt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,bt=t,At=null,!0):!1;default:return!1}}function Ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bd(t){if(we){var e=At;if(e){var r=e;if(!Lg(t,e)){if(Ld(t))throw Error(I(418));e=rn(r.nextSibling);var n=bt;e&&Lg(t,e)?xS(n,r):(t.flags=t.flags&-4097|2,we=!1,bt=t)}}else{if(Ld(t))throw Error(I(418));t.flags=t.flags&-4097|2,we=!1,bt=t}}}function Bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function Qa(t){if(t!==bt)return!1;if(!we)return Bg(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$d(t.type,t.memoizedProps)),e&&(e=At)){if(Ld(t))throw wS(),Error(I(418));for(;e;)xS(t,e),e=rn(e.nextSibling)}if(Bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){At=rn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}At=null}}else At=bt?rn(t.stateNode.nextSibling):null;return!0}function wS(){for(var t=At;t;)t=rn(t.nextSibling)}function gi(){At=bt=null,we=!1}function mh(t){Qt===null?Qt=[t]:Qt.push(t)}var fb=$r.ReactCurrentBatchConfig;function Vt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var zl=Sn(null),Vl=null,Uo=null,vh=null;function _h(){vh=Uo=Vl=null}function Sh(t){var e=zl.current;xe(zl),t._currentValue=e}function Ud(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Xo(t,e){Vl=t,vh=Uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(vh!==t)if(t={context:t,memoizedValue:e,next:null},Uo===null){if(Vl===null)throw Error(I(308));Uo=t,Vl.dependencies={lanes:0,firstContext:t}}else Uo=Uo.next=t;return e}var kn=null;function xh(t){kn===null?kn=[t]:kn.push(t)}function ES(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,xh(e)):(r.next=o.next,o.next=r),e.interleaved=r,kr(t,n)}function kr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ur=!1;function wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,kr(t,r)}return o=n.interleaved,o===null?(e.next=e,xh(n)):(e.next=o.next,o.next=e),n.interleaved=e,kr(t,r)}function fl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ah(t,r)}}function Ug(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?o=i=e:i=i.next=e}else o=i=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Gl(t,e,r,n){var o=t.updateQueue;Ur=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==s&&(a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,p=u=l=null,a=i;do{var f=a.lane,y=a.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(f=e,y=r,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(y,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,f=typeof v=="function"?v.call(y,d,f):v,f==null)break e;d=Pe({},d,f);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(u=p=y,l=d):p=p.next=y,s|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(1);if(p===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=p,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);eo|=s,t.lanes=s,t.memoizedState=d}}function Wg(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(I(191,o));o.call(n)}}}var AS=new E0.Component().refs;function Wd(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Pe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var nc={isMounted:function(t){return(t=t._reactInternals)?ao(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=dt(),o=sn(t),i=br(n,o);i.payload=e,r!=null&&(i.callback=r),e=nn(t,i,o),e!==null&&(Xt(e,t,o,n),fl(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=dt(),o=sn(t),i=br(n,o);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=nn(t,i,o),e!==null&&(Xt(e,t,o,n),fl(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=dt(),n=sn(t),o=br(r,n);o.tag=2,e!=null&&(o.callback=e),e=nn(t,o,n),e!==null&&(Xt(e,t,n,r),fl(e,t,n))}};function zg(t,e,r,n,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!Us(r,n)||!Us(o,i):!0}function bS(t,e,r){var n=!1,o=pn,i=e.contextType;return typeof i=="object"&&i!==null?i=Ft(i):(o=xt(e)?Jn:at.current,n=e.contextTypes,i=(n=n!=null)?yi(t,o):pn),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vg(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&nc.enqueueReplaceState(e,e.state,null)}function zd(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs=AS,wh(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Ft(i):(i=xt(e)?Jn:at.current,o.context=yi(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wd(t,e,i,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&nc.enqueueReplaceState(o,o.state,null),Gl(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function es(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var n=r.stateNode}if(!n)throw Error(I(147,t));var o=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;a===AS&&(a=o.refs={}),s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,t))}return t}function qa(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gg(t){var e=t._init;return e(t._payload)}function PS(t){function e(m,h){if(t){var g=m.deletions;g===null?(m.deletions=[h],m.flags|=16):g.push(h)}}function r(m,h){if(!t)return null;for(;h!==null;)e(m,h),h=h.sibling;return null}function n(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function o(m,h){return m=an(m,h),m.index=0,m.sibling=null,m}function i(m,h,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<h?(m.flags|=2,h):g):(m.flags|=2,h)):(m.flags|=1048576,h)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,h,g,E){return h===null||h.tag!==6?(h=ff(g,m.mode,E),h.return=m,h):(h=o(h,g),h.return=m,h)}function l(m,h,g,E){var A=g.type;return A===Oo?p(m,h,g.props.children,E,g.key):h!==null&&(h.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Br&&Gg(A)===h.type)?(E=o(h,g.props),E.ref=es(m,h,g),E.return=m,E):(E=ml(g.type,g.key,g.props,null,m.mode,E),E.ref=es(m,h,g),E.return=m,E)}function u(m,h,g,E){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=df(g,m.mode,E),h.return=m,h):(h=o(h,g.children||[]),h.return=m,h)}function p(m,h,g,E,A){return h===null||h.tag!==7?(h=Fn(g,m.mode,E,A),h.return=m,h):(h=o(h,g),h.return=m,h)}function d(m,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ff(""+h,m.mode,g),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Fa:return g=ml(h.type,h.key,h.props,null,m.mode,g),g.ref=es(m,null,h),g.return=m,g;case Ro:return h=df(h,m.mode,g),h.return=m,h;case Br:var E=h._init;return d(m,E(h._payload),g)}if(ps(h)||Ki(h))return h=Fn(h,m.mode,g,null),h.return=m,h;qa(m,h)}return null}function f(m,h,g,E){var A=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return A!==null?null:a(m,h,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fa:return g.key===A?l(m,h,g,E):null;case Ro:return g.key===A?u(m,h,g,E):null;case Br:return A=g._init,f(m,h,A(g._payload),E)}if(ps(g)||Ki(g))return A!==null?null:p(m,h,g,E,null);qa(m,g)}return null}function y(m,h,g,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(g)||null,a(h,m,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fa:return m=m.get(E.key===null?g:E.key)||null,l(h,m,E,A);case Ro:return m=m.get(E.key===null?g:E.key)||null,u(h,m,E,A);case Br:var b=E._init;return y(m,h,g,b(E._payload),A)}if(ps(E)||Ki(E))return m=m.get(g)||null,p(h,m,E,A,null);qa(h,E)}return null}function v(m,h,g,E){for(var A=null,b=null,T=h,O=h=0,Q=null;T!==null&&O<g.length;O++){T.index>O?(Q=T,T=null):Q=T.sibling;var V=f(m,T,g[O],E);if(V===null){T===null&&(T=Q);break}t&&T&&V.alternate===null&&e(m,T),h=i(V,h,O),b===null?A=V:b.sibling=V,b=V,T=Q}if(O===g.length)return r(m,T),we&&An(m,O),A;if(T===null){for(;O<g.length;O++)T=d(m,g[O],E),T!==null&&(h=i(T,h,O),b===null?A=T:b.sibling=T,b=T);return we&&An(m,O),A}for(T=n(m,T);O<g.length;O++)Q=y(T,m,O,g[O],E),Q!==null&&(t&&Q.alternate!==null&&T.delete(Q.key===null?O:Q.key),h=i(Q,h,O),b===null?A=Q:b.sibling=Q,b=Q);return t&&T.forEach(function(ve){return e(m,ve)}),we&&An(m,O),A}function S(m,h,g,E){var A=Ki(g);if(typeof A!="function")throw Error(I(150));if(g=A.call(g),g==null)throw Error(I(151));for(var b=A=null,T=h,O=h=0,Q=null,V=g.next();T!==null&&!V.done;O++,V=g.next()){T.index>O?(Q=T,T=null):Q=T.sibling;var ve=f(m,T,V.value,E);if(ve===null){T===null&&(T=Q);break}t&&T&&ve.alternate===null&&e(m,T),h=i(ve,h,O),b===null?A=ve:b.sibling=ve,b=ve,T=Q}if(V.done)return r(m,T),we&&An(m,O),A;if(T===null){for(;!V.done;O++,V=g.next())V=d(m,V.value,E),V!==null&&(h=i(V,h,O),b===null?A=V:b.sibling=V,b=V);return we&&An(m,O),A}for(T=n(m,T);!V.done;O++,V=g.next())V=y(T,m,O,V.value,E),V!==null&&(t&&V.alternate!==null&&T.delete(V.key===null?O:V.key),h=i(V,h,O),b===null?A=V:b.sibling=V,b=V);return t&&T.forEach(function(H){return e(m,H)}),we&&An(m,O),A}function P(m,h,g,E){if(typeof g=="object"&&g!==null&&g.type===Oo&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Fa:e:{for(var A=g.key,b=h;b!==null;){if(b.key===A){if(A=g.type,A===Oo){if(b.tag===7){r(m,b.sibling),h=o(b,g.props.children),h.return=m,m=h;break e}}else if(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Br&&Gg(A)===b.type){r(m,b.sibling),h=o(b,g.props),h.ref=es(m,b,g),h.return=m,m=h;break e}r(m,b);break}else e(m,b);b=b.sibling}g.type===Oo?(h=Fn(g.props.children,m.mode,E,g.key),h.return=m,m=h):(E=ml(g.type,g.key,g.props,null,m.mode,E),E.ref=es(m,h,g),E.return=m,m=E)}return s(m);case Ro:e:{for(b=g.key;h!==null;){if(h.key===b)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){r(m,h.sibling),h=o(h,g.children||[]),h.return=m,m=h;break e}else{r(m,h);break}else e(m,h);h=h.sibling}h=df(g,m.mode,E),h.return=m,m=h}return s(m);case Br:return b=g._init,P(m,h,b(g._payload),E)}if(ps(g))return v(m,h,g,E);if(Ki(g))return S(m,h,g,E);qa(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(r(m,h.sibling),h=o(h,g),h.return=m,m=h):(r(m,h),h=ff(g,m.mode,E),h.return=m,m=h),s(m)):r(m,h)}return P}var mi=PS(!0),IS=PS(!1),da={},pr=Sn(da),Gs=Sn(da),Hs=Sn(da);function Tn(t){if(t===da)throw Error(I(174));return t}function Eh(t,e){switch(me(Hs,e),me(Gs,t),me(pr,da),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xd(e,t)}xe(pr),me(pr,e)}function vi(){xe(pr),xe(Gs),xe(Hs)}function NS(t){Tn(Hs.current);var e=Tn(pr.current),r=xd(e,t.type);e!==r&&(me(Gs,t),me(pr,r))}function Ch(t){Gs.current===t&&(xe(pr),xe(Gs))}var Ce=Sn(0);function Hl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function Ah(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var dl=$r.ReactCurrentDispatcher,sf=$r.ReactCurrentBatchConfig,Zn=0,be=null,Me=null,qe=null,Ql=!1,ws=!1,Qs=0,db=0;function ot(){throw Error(I(321))}function bh(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!rr(t[r],e[r]))return!1;return!0}function Ph(t,e,r,n,o,i){if(Zn=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dl.current=t===null||t.memoizedState===null?gb:mb,t=r(n,o),ws){i=0;do{if(ws=!1,Qs=0,25<=i)throw Error(I(301));i+=1,qe=Me=null,e.updateQueue=null,dl.current=vb,t=r(n,o)}while(ws)}if(dl.current=ql,e=Me!==null&&Me.next!==null,Zn=0,qe=Me=be=null,Ql=!1,e)throw Error(I(300));return t}function Ih(){var t=Qs!==0;return Qs=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?be.memoizedState=qe=t:qe=qe.next=t,qe}function Mt(){if(Me===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=qe===null?be.memoizedState:qe.next;if(e!==null)qe=e,Me=t;else{if(t===null)throw Error(I(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},qe===null?be.memoizedState=qe=t:qe=qe.next=t}return qe}function qs(t,e){return typeof e=="function"?e(t):e}function af(t){var e=Mt(),r=e.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=t;var n=Me,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}n.baseQueue=o=i,r.pending=null}if(o!==null){i=o.next,n=n.baseState;var a=s=null,l=null,u=i;do{var p=u.lane;if((Zn&p)===p)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=n):l=l.next=d,be.lanes|=p,eo|=p}u=u.next}while(u!==null&&u!==i);l===null?s=n:l.next=a,rr(n,e.memoizedState)||(vt=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do i=o.lane,be.lanes|=i,eo|=i,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function lf(t){var e=Mt(),r=e.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,i=e.memoizedState;if(o!==null){r.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);rr(i,e.memoizedState)||(vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function kS(){}function TS(t,e){var r=be,n=Mt(),o=e(),i=!rr(n.memoizedState,o);if(i&&(n.memoizedState=o,vt=!0),n=n.queue,Nh(jS.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,Ks(9,OS.bind(null,r,n,o,e),void 0,null),Ye===null)throw Error(I(349));Zn&30||RS(r,e,o)}return o}function RS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function OS(t,e,r,n){e.value=r,e.getSnapshot=n,$S(e)&&DS(t)}function jS(t,e,r){return r(function(){$S(e)&&DS(t)})}function $S(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!rr(t,r)}catch{return!0}}function DS(t){var e=kr(t,1);e!==null&&Xt(e,t,1,-1)}function Hg(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:t},e.queue=t,t=t.dispatch=yb.bind(null,be,t),[e.memoizedState,t]}function Ks(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function FS(){return Mt().memoizedState}function pl(t,e,r,n){var o=sr();be.flags|=t,o.memoizedState=Ks(1|e,r,void 0,n===void 0?null:n)}function oc(t,e,r,n){var o=Mt();n=n===void 0?null:n;var i=void 0;if(Me!==null){var s=Me.memoizedState;if(i=s.destroy,n!==null&&bh(n,s.deps)){o.memoizedState=Ks(e,r,i,n);return}}be.flags|=t,o.memoizedState=Ks(1|e,r,i,n)}function Qg(t,e){return pl(8390656,8,t,e)}function Nh(t,e){return oc(2048,8,t,e)}function MS(t,e){return oc(4,2,t,e)}function LS(t,e){return oc(4,4,t,e)}function BS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function US(t,e,r){return r=r!=null?r.concat([t]):null,oc(4,4,BS.bind(null,e,t),r)}function kh(){}function WS(t,e){var r=Mt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bh(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function zS(t,e){var r=Mt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&bh(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function VS(t,e,r){return Zn&21?(rr(r,e)||(r=Q0(),be.lanes|=r,eo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=r)}function pb(t,e){var r=ue;ue=r!==0&&4>r?r:4,t(!0);var n=sf.transition;sf.transition={};try{t(!1),e()}finally{ue=r,sf.transition=n}}function GS(){return Mt().memoizedState}function hb(t,e,r){var n=sn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},HS(t))QS(e,r);else if(r=ES(t,e,r,n),r!==null){var o=dt();Xt(r,t,n,o),qS(r,e,n)}}function yb(t,e,r){var n=sn(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(HS(t))QS(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,r);if(o.hasEagerState=!0,o.eagerState=a,rr(a,s)){var l=e.interleaved;l===null?(o.next=o,xh(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}r=ES(t,e,o,n),r!==null&&(o=dt(),Xt(r,t,n,o),qS(r,e,n))}}function HS(t){var e=t.alternate;return t===be||e!==null&&e===be}function QS(t,e){ws=Ql=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function qS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ah(t,r)}}var ql={readContext:Ft,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},gb={readContext:Ft,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:Qg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,pl(4194308,4,BS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return pl(4194308,4,t,e)},useInsertionEffect:function(t,e){return pl(4,2,t,e)},useMemo:function(t,e){var r=sr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=sr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=hb.bind(null,be,t),[n.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:Hg,useDebugValue:kh,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=Hg(!1),e=t[0];return t=pb.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=be,o=sr();if(we){if(r===void 0)throw Error(I(407));r=r()}else{if(r=e(),Ye===null)throw Error(I(349));Zn&30||RS(n,e,r)}o.memoizedState=r;var i={value:r,getSnapshot:e};return o.queue=i,Qg(jS.bind(null,n,i,t),[t]),n.flags|=2048,Ks(9,OS.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=sr(),e=Ye.identifierPrefix;if(we){var r=Er,n=wr;r=(n&~(1<<32-Jt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Qs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=db++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mb={readContext:Ft,useCallback:WS,useContext:Ft,useEffect:Nh,useImperativeHandle:US,useInsertionEffect:MS,useLayoutEffect:LS,useMemo:zS,useReducer:af,useRef:FS,useState:function(){return af(qs)},useDebugValue:kh,useDeferredValue:function(t){var e=Mt();return VS(e,Me.memoizedState,t)},useTransition:function(){var t=af(qs)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:TS,useId:GS,unstable_isNewReconciler:!1},vb={readContext:Ft,useCallback:WS,useContext:Ft,useEffect:Nh,useImperativeHandle:US,useInsertionEffect:MS,useLayoutEffect:LS,useMemo:zS,useReducer:lf,useRef:FS,useState:function(){return lf(qs)},useDebugValue:kh,useDeferredValue:function(t){var e=Mt();return Me===null?e.memoizedState=t:VS(e,Me.memoizedState,t)},useTransition:function(){var t=lf(qs)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:TS,useId:GS,unstable_isNewReconciler:!1};function _i(t,e){try{var r="",n=e;do r+=HC(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function uf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Vd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var _b=typeof WeakMap=="function"?WeakMap:Map;function KS(t,e,r){r=br(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Yl||(Yl=!0,ep=n),Vd(t,e)},r}function YS(t,e,r){r=br(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){Vd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Vd(t,e),typeof n!="function"&&(on===null?on=new Set([this]):on.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function qg(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new _b;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=Ob.bind(null,t,e,r),e.then(t,t))}function Kg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yg(t,e,r,n,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=br(-1,1),e.tag=2,nn(r,e,1))),r.lanes|=1),t)}var Sb=$r.ReactCurrentOwner,vt=!1;function ut(t,e,r,n){e.child=t===null?IS(e,null,r,n):mi(e,t.child,r,n)}function Jg(t,e,r,n,o){r=r.render;var i=e.ref;return Xo(e,o),n=Ph(t,e,r,n,i,o),r=Ih(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Tr(t,e,o)):(we&&r&&yh(e),e.flags|=1,ut(t,e,n,o),e.child)}function Xg(t,e,r,n,o){if(t===null){var i=r.type;return typeof i=="function"&&!Mh(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,JS(t,e,i,n,o)):(t=ml(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:Us,r(s,n)&&t.ref===e.ref)return Tr(t,e,o)}return e.flags|=1,t=an(i,n),t.ref=e.ref,t.return=e,e.child=t}function JS(t,e,r,n,o){if(t!==null){var i=t.memoizedProps;if(Us(i,n)&&t.ref===e.ref)if(vt=!1,e.pendingProps=n=i,(t.lanes&o)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,Tr(t,e,o)}return Gd(t,e,r,n,o)}function XS(t,e,r){var n=e.pendingProps,o=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(zo,Et),Et|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(zo,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,me(zo,Et),Et|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,me(zo,Et),Et|=n;return ut(t,e,o,r),e.child}function ZS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Gd(t,e,r,n,o){var i=xt(r)?Jn:at.current;return i=yi(e,i),Xo(e,o),r=Ph(t,e,r,n,i,o),n=Ih(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Tr(t,e,o)):(we&&n&&yh(e),e.flags|=1,ut(t,e,r,o),e.child)}function Zg(t,e,r,n,o){if(xt(r)){var i=!0;Bl(e)}else i=!1;if(Xo(e,o),e.stateNode===null)hl(t,e),bS(e,r,n),zd(e,r,n,o),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ft(u):(u=xt(r)?Jn:at.current,u=yi(e,u));var p=r.getDerivedStateFromProps,d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Vg(e,s,n,u),Ur=!1;var f=e.memoizedState;s.state=f,Gl(e,n,s,o),l=e.memoizedState,a!==n||f!==l||St.current||Ur?(typeof p=="function"&&(Wd(e,r,p,n),l=e.memoizedState),(a=Ur||zg(e,r,a,n,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,CS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Vt(e.type,a),s.props=u,d=e.pendingProps,f=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ft(l):(l=xt(r)?Jn:at.current,l=yi(e,l));var y=r.getDerivedStateFromProps;(p=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Vg(e,s,n,l),Ur=!1,f=e.memoizedState,s.state=f,Gl(e,n,s,o);var v=e.memoizedState;a!==d||f!==v||St.current||Ur?(typeof y=="function"&&(Wd(e,r,y,n),v=e.memoizedState),(u=Ur||zg(e,r,u,n,f,v,l)||!1)?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),s.props=n,s.state=v,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Hd(t,e,r,n,i,o)}function Hd(t,e,r,n,o,i){ZS(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return o&&Mg(e,r,!1),Tr(t,e,i);n=e.stateNode,Sb.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=mi(e,t.child,null,i),e.child=mi(e,null,a,i)):ut(t,e,a,i),e.memoizedState=n.state,o&&Mg(e,r,!0),e.child}function ex(t){var e=t.stateNode;e.pendingContext?Fg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fg(t,e.context,!1),Eh(t,e.containerInfo)}function em(t,e,r,n,o){return gi(),mh(o),e.flags|=256,ut(t,e,r,n),e.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function qd(t){return{baseLanes:t,cachePool:null,transitions:null}}function tx(t,e,r){var n=e.pendingProps,o=Ce.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),me(Ce,o&1),t===null)return Bd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ac(s,n,0,null),t=Fn(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qd(r),e.memoizedState=Qd,t):Th(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return xb(t,e,s,n,a,o,r);if(i){i=n.fallback,s=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=an(o,l),n.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=an(a,i):(i=Fn(i,s,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=t.child.memoizedState,s=s===null?qd(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~r,e.memoizedState=Qd,n}return i=t.child,t=i.sibling,n=an(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Th(t,e){return e=ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ka(t,e,r,n){return n!==null&&mh(n),mi(e,t.child,null,r),t=Th(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xb(t,e,r,n,o,i,s){if(r)return e.flags&256?(e.flags&=-257,n=uf(Error(I(422))),Ka(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,o=e.mode,n=ac({mode:"visible",children:n.children},o,0,null),i=Fn(i,o,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&mi(e,t.child,null,s),e.child.memoizedState=qd(s),e.memoizedState=Qd,i);if(!(e.mode&1))return Ka(t,e,s,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(I(419)),n=uf(i,n,void 0),Ka(t,e,s,n)}if(a=(s&t.childLanes)!==0,vt||a){if(n=Ye,n!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,kr(t,o),Xt(n,t,o,-1))}return Fh(),n=uf(Error(I(421))),Ka(t,e,s,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=jb.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,At=rn(o.nextSibling),bt=e,we=!0,Qt=null,t!==null&&(Rt[Ot++]=wr,Rt[Ot++]=Er,Rt[Ot++]=Xn,wr=t.id,Er=t.overflow,Xn=e),e=Th(e,n.children),e.flags|=4096,e)}function tm(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ud(t.return,e,r)}function cf(t,e,r,n,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function rx(t,e,r){var n=e.pendingProps,o=n.revealOrder,i=n.tail;if(ut(t,e,n.children,r),n=Ce.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tm(t,r,e);else if(t.tag===19)tm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(me(Ce,n),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&Hl(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),cf(e,!1,o,r,i);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Hl(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}cf(e,!0,r,null,i);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,r=an(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=an(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function wb(t,e,r){switch(e.tag){case 3:ex(e),gi();break;case 5:NS(e);break;case 1:xt(e.type)&&Bl(e);break;case 4:Eh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;me(zl,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(me(Ce,Ce.current&1),e.flags|=128,null):r&e.child.childLanes?tx(t,e,r):(me(Ce,Ce.current&1),t=Tr(t,e,r),t!==null?t.sibling:null);me(Ce,Ce.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return rx(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),me(Ce,Ce.current),n)break;return null;case 22:case 23:return e.lanes=0,XS(t,e,r)}return Tr(t,e,r)}var nx,Kd,ox,ix;nx=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Kd=function(){};ox=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,Tn(pr.current);var i=null;switch(r){case"input":o=md(t,o),n=md(t,n),i=[];break;case"select":o=Pe({},o,{value:void 0}),n=Pe({},n,{value:void 0}),i=[];break;case"textarea":o=Sd(t,o),n=Sd(t,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ml)}wd(r,n);var s;r=null;for(u in o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(js.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=o!=null?o[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(js.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&_e("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ix=function(t,e,r,n){r!==n&&(e.flags|=4)};function ts(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Eb(t,e,r){var n=e.pendingProps;switch(gh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return xt(e.type)&&Ll(),it(e),null;case 3:return n=e.stateNode,vi(),xe(St),xe(at),Ah(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(np(Qt),Qt=null))),Kd(t,e),it(e),null;case 5:Ch(e);var o=Tn(Hs.current);if(r=e.type,t!==null&&e.stateNode!=null)ox(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(I(166));return it(e),null}if(t=Tn(pr.current),Qa(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[lr]=e,n[Vs]=i,t=(e.mode&1)!==0,r){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(o=0;o<ys.length;o++)_e(ys[o],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":cg(n,i),_e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},_e("invalid",n);break;case"textarea":dg(n,i),_e("invalid",n)}wd(r,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ha(n.textContent,a,t),o=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ha(n.textContent,a,t),o=["children",""+a]):js.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&_e("scroll",n)}switch(r){case"input":Ma(n),fg(n,i,!0);break;case"textarea":Ma(n),pg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ml)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=R0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[lr]=e,t[Vs]=n,nx(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ed(r,n),r){case"dialog":_e("cancel",t),_e("close",t),o=n;break;case"iframe":case"object":case"embed":_e("load",t),o=n;break;case"video":case"audio":for(o=0;o<ys.length;o++)_e(ys[o],t);o=n;break;case"source":_e("error",t),o=n;break;case"img":case"image":case"link":_e("error",t),_e("load",t),o=n;break;case"details":_e("toggle",t),o=n;break;case"input":cg(t,n),o=md(t,n),_e("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=Pe({},n,{value:void 0}),_e("invalid",t);break;case"textarea":dg(t,n),o=Sd(t,n),_e("invalid",t);break;default:o=n}wd(r,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?$0(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&O0(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&$s(t,l):typeof l=="number"&&$s(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(js.hasOwnProperty(i)?l!=null&&i==="onScroll"&&_e("scroll",t):l!=null&&th(t,i,l,s))}switch(r){case"input":Ma(t),fg(t,n,!1);break;case"textarea":Ma(t),pg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+dn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?qo(t,!!n.multiple,i,!1):n.defaultValue!=null&&qo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Ml)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)ix(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(I(166));if(r=Tn(Hs.current),Tn(pr.current),Qa(e)){if(n=e.stateNode,r=e.memoizedProps,n[lr]=e,(i=n.nodeValue!==r)&&(t=bt,t!==null))switch(t.tag){case 3:Ha(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lr]=e,e.stateNode=n}return it(e),null;case 13:if(xe(Ce),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&At!==null&&e.mode&1&&!(e.flags&128))wS(),gi(),e.flags|=98560,i=!1;else if(i=Qa(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(I(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[lr]=e}else gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Qt!==null&&(np(Qt),Qt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Ue===0&&(Ue=3):Fh())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return vi(),Kd(t,e),t===null&&Ws(e.stateNode.containerInfo),it(e),null;case 10:return Sh(e.type._context),it(e),null;case 17:return xt(e.type)&&Ll(),it(e),null;case 19:if(xe(Ce),i=e.memoizedState,i===null)return it(e),null;if(n=(e.flags&128)!==0,s=i.rendering,s===null)if(n)ts(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Hl(t),s!==null){for(e.flags|=128,ts(i,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return me(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>Si&&(e.flags|=128,n=!0,ts(i,!1),e.lanes=4194304)}else{if(!n)if(t=Hl(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ts(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!we)return it(e),null}else 2*Oe()-i.renderingStartTime>Si&&r!==1073741824&&(e.flags|=128,n=!0,ts(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(r=i.last,r!==null?r.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,r=Ce.current,me(Ce,n?r&1|2:r&1),e):(it(e),null);case 22:case 23:return Dh(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Et&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function Cb(t,e){switch(gh(e),e.tag){case 1:return xt(e.type)&&Ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(),xe(St),xe(at),Ah(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ch(e),null;case 13:if(xe(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Ce),null;case 4:return vi(),null;case 10:return Sh(e.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var Ya=!1,st=!1,Ab=typeof WeakSet=="function"?WeakSet:Set,F=null;function Wo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ne(t,e,n)}else r.current=null}function Yd(t,e,r){try{r()}catch(n){Ne(t,e,n)}}var rm=!1;function bb(t,e){if(Od=$l,t=uS(),hh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,u=0,p=0,d=t,f=null;t:for(;;){for(var y;d!==r||o!==0&&d.nodeType!==3||(a=s+o),d!==i||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===r&&++u===o&&(a=s),f===i&&++p===n&&(l=s),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(jd={focusedElem:t,selectionRange:r},$l=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,P=v.memoizedState,m=e.stateNode,h=m.getSnapshotBeforeUpdate(e.elementType===e.type?S:Vt(e.type,S),P);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(E){Ne(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return v=rm,rm=!1,v}function Es(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Yd(e,r,i)}o=o.next}while(o!==n)}}function ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Jd(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function sx(t){var e=t.alternate;e!==null&&(t.alternate=null,sx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Vs],delete e[Fd],delete e[lb],delete e[ub])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ax(t){return t.tag===5||t.tag===3||t.tag===4}function nm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ax(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ml));else if(n!==4&&(t=t.child,t!==null))for(Xd(t,e,r),t=t.sibling;t!==null;)Xd(t,e,r),t=t.sibling}function Zd(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Zd(t,e,r),t=t.sibling;t!==null;)Zd(t,e,r),t=t.sibling}var Xe=null,Ht=!1;function Lr(t,e,r){for(r=r.child;r!==null;)lx(t,e,r),r=r.sibling}function lx(t,e,r){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Ju,r)}catch{}switch(r.tag){case 5:st||Wo(r,e);case 6:var n=Xe,o=Ht;Xe=null,Lr(t,e,r),Xe=n,Ht=o,Xe!==null&&(Ht?(t=Xe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Xe.removeChild(r.stateNode));break;case 18:Xe!==null&&(Ht?(t=Xe,r=r.stateNode,t.nodeType===8?rf(t.parentNode,r):t.nodeType===1&&rf(t,r),Ls(t)):rf(Xe,r.stateNode));break;case 4:n=Xe,o=Ht,Xe=r.stateNode.containerInfo,Ht=!0,Lr(t,e,r),Xe=n,Ht=o;break;case 0:case 11:case 14:case 15:if(!st&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Yd(r,e,s),o=o.next}while(o!==n)}Lr(t,e,r);break;case 1:if(!st&&(Wo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ne(r,e,a)}Lr(t,e,r);break;case 21:Lr(t,e,r);break;case 22:r.mode&1?(st=(n=st)||r.memoizedState!==null,Lr(t,e,r),st=n):Lr(t,e,r);break;default:Lr(t,e,r)}}function om(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Ab),e.forEach(function(n){var o=$b.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function Wt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,Ht=!1;break e;case 3:Xe=a.stateNode.containerInfo,Ht=!0;break e;case 4:Xe=a.stateNode.containerInfo,Ht=!0;break e}a=a.return}if(Xe===null)throw Error(I(160));lx(i,s,o),Xe=null,Ht=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){Ne(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ux(e,t),e=e.sibling}function ux(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),ir(t),n&4){try{Es(3,t,t.return),ic(3,t)}catch(S){Ne(t,t.return,S)}try{Es(5,t,t.return)}catch(S){Ne(t,t.return,S)}}break;case 1:Wt(e,t),ir(t),n&512&&r!==null&&Wo(r,r.return);break;case 5:if(Wt(e,t),ir(t),n&512&&r!==null&&Wo(r,r.return),t.flags&32){var o=t.stateNode;try{$s(o,"")}catch(S){Ne(t,t.return,S)}}if(n&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&k0(o,i),Ed(a,s);var u=Ed(a,i);for(s=0;s<l.length;s+=2){var p=l[s],d=l[s+1];p==="style"?$0(o,d):p==="dangerouslySetInnerHTML"?O0(o,d):p==="children"?$s(o,d):th(o,p,d,u)}switch(a){case"input":vd(o,i);break;case"textarea":T0(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?qo(o,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?qo(o,!!i.multiple,i.defaultValue,!0):qo(o,!!i.multiple,i.multiple?[]:"",!1))}o[Vs]=i}catch(S){Ne(t,t.return,S)}}break;case 6:if(Wt(e,t),ir(t),n&4){if(t.stateNode===null)throw Error(I(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(S){Ne(t,t.return,S)}}break;case 3:if(Wt(e,t),ir(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ls(e.containerInfo)}catch(S){Ne(t,t.return,S)}break;case 4:Wt(e,t),ir(t);break;case 13:Wt(e,t),ir(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(jh=Oe())),n&4&&om(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(st=(u=st)||p,Wt(e,t),st=u):Wt(e,t),ir(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for(F=t,p=t.child;p!==null;){for(d=F=p;F!==null;){switch(f=F,y=f.child,f.tag){case 0:case 11:case 14:case 15:Es(4,f,f.return);break;case 1:Wo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Ne(n,r,S)}}break;case 5:Wo(f,f.return);break;case 22:if(f.memoizedState!==null){sm(d);continue}}y!==null?(y.return=f,F=y):sm(d)}p=p.sibling}e:for(p=null,d=t;;){if(d.tag===5){if(p===null){p=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=j0("display",s))}catch(S){Ne(t,t.return,S)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){Ne(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wt(e,t),ir(t),n&4&&om(t);break;case 21:break;default:Wt(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ax(r)){var n=r;break e}r=r.return}throw Error(I(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&($s(o,""),n.flags&=-33);var i=nm(t);Zd(t,i,o);break;case 3:case 4:var s=n.stateNode.containerInfo,a=nm(t);Xd(t,a,s);break;default:throw Error(I(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pb(t,e,r){F=t,cx(t)}function cx(t,e,r){for(var n=(t.mode&1)!==0;F!==null;){var o=F,i=o.child;if(o.tag===22&&n){var s=o.memoizedState!==null||Ya;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||st;a=Ya;var u=st;if(Ya=s,(st=l)&&!u)for(F=o;F!==null;)s=F,l=s.child,s.tag===22&&s.memoizedState!==null?am(o):l!==null?(l.return=s,F=l):am(o);for(;i!==null;)F=i,cx(i),i=i.sibling;F=o,Ya=a,st=u}im(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,F=i):im(t)}}function im(t){for(;F!==null;){var e=F;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||ic(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!st)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:Vt(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wg(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Wg(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Ls(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}st||e.flags&512&&Jd(e)}catch(f){Ne(e,e.return,f)}}if(e===t){F=null;break}if(r=e.sibling,r!==null){r.return=e.return,F=r;break}F=e.return}}function sm(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var r=e.sibling;if(r!==null){r.return=e.return,F=r;break}F=e.return}}function am(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ic(4,e)}catch(l){Ne(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(l){Ne(e,o,l)}}var i=e.return;try{Jd(e)}catch(l){Ne(e,i,l)}break;case 5:var s=e.return;try{Jd(e)}catch(l){Ne(e,s,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var Ib=Math.ceil,Kl=$r.ReactCurrentDispatcher,Rh=$r.ReactCurrentOwner,Dt=$r.ReactCurrentBatchConfig,ie=0,Ye=null,De=null,et=0,Et=0,zo=Sn(0),Ue=0,Ys=null,eo=0,sc=0,Oh=0,Cs=null,gt=null,jh=0,Si=1/0,Sr=null,Yl=!1,ep=null,on=null,Ja=!1,Kr=null,Jl=0,As=0,tp=null,yl=-1,gl=0;function dt(){return ie&6?Oe():yl!==-1?yl:yl=Oe()}function sn(t){return t.mode&1?ie&2&&et!==0?et&-et:fb.transition!==null?(gl===0&&(gl=Q0()),gl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:eS(t.type)),t):1}function Xt(t,e,r,n){if(50<As)throw As=0,tp=null,Error(I(185));ua(t,r,n),(!(ie&2)||t!==Ye)&&(t===Ye&&(!(ie&2)&&(sc|=r),Ue===4&&Qr(t,et)),wt(t,n),r===1&&ie===0&&!(e.mode&1)&&(Si=Oe()+500,rc&&xn()))}function wt(t,e){var r=t.callbackNode;fA(t,e);var n=jl(t,t===Ye?et:0);if(n===0)r!==null&&gg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&gg(r),e===1)t.tag===0?cb(lm.bind(null,t)):_S(lm.bind(null,t)),sb(function(){!(ie&6)&&xn()}),r=null;else{switch(q0(n)){case 1:r=sh;break;case 4:r=G0;break;case 16:r=Ol;break;case 536870912:r=H0;break;default:r=Ol}r=vx(r,fx.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function fx(t,e){if(yl=-1,gl=0,ie&6)throw Error(I(327));var r=t.callbackNode;if(Zo()&&t.callbackNode!==r)return null;var n=jl(t,t===Ye?et:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xl(t,n);else{e=n;var o=ie;ie|=2;var i=px();(Ye!==t||et!==e)&&(Sr=null,Si=Oe()+500,Dn(t,e));do try{Tb();break}catch(a){dx(t,a)}while(1);_h(),Kl.current=i,ie=o,De!==null?e=0:(Ye=null,et=0,e=Ue)}if(e!==0){if(e===2&&(o=Id(t),o!==0&&(n=o,e=rp(t,o))),e===1)throw r=Ys,Dn(t,0),Qr(t,n),wt(t,Oe()),r;if(e===6)Qr(t,n);else{if(o=t.current.alternate,!(n&30)&&!Nb(o)&&(e=Xl(t,n),e===2&&(i=Id(t),i!==0&&(n=i,e=rp(t,i))),e===1))throw r=Ys,Dn(t,0),Qr(t,n),wt(t,Oe()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(I(345));case 2:bn(t,gt,Sr);break;case 3:if(Qr(t,n),(n&130023424)===n&&(e=jh+500-Oe(),10<e)){if(jl(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){dt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Dd(bn.bind(null,t,gt,Sr),e);break}bn(t,gt,Sr);break;case 4:if(Qr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var s=31-Jt(n);i=1<<s,s=e[s],s>o&&(o=s),n&=~i}if(n=o,n=Oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ib(n/1960))-n,10<n){t.timeoutHandle=Dd(bn.bind(null,t,gt,Sr),n);break}bn(t,gt,Sr);break;case 5:bn(t,gt,Sr);break;default:throw Error(I(329))}}}return wt(t,Oe()),t.callbackNode===r?fx.bind(null,t):null}function rp(t,e){var r=Cs;return t.current.memoizedState.isDehydrated&&(Dn(t,e).flags|=256),t=Xl(t,e),t!==2&&(e=gt,gt=r,e!==null&&np(e)),t}function np(t){gt===null?gt=t:gt.push.apply(gt,t)}function Nb(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!rr(i(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~Oh,e&=~sc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Jt(e),n=1<<r;t[r]=-1,e&=~n}}function lm(t){if(ie&6)throw Error(I(327));Zo();var e=jl(t,0);if(!(e&1))return wt(t,Oe()),null;var r=Xl(t,e);if(t.tag!==0&&r===2){var n=Id(t);n!==0&&(e=n,r=rp(t,n))}if(r===1)throw r=Ys,Dn(t,0),Qr(t,e),wt(t,Oe()),r;if(r===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bn(t,gt,Sr),wt(t,Oe()),null}function $h(t,e){var r=ie;ie|=1;try{return t(e)}finally{ie=r,ie===0&&(Si=Oe()+500,rc&&xn())}}function to(t){Kr!==null&&Kr.tag===0&&!(ie&6)&&Zo();var e=ie;ie|=1;var r=Dt.transition,n=ue;try{if(Dt.transition=null,ue=1,t)return t()}finally{ue=n,Dt.transition=r,ie=e,!(ie&6)&&xn()}}function Dh(){Et=zo.current,xe(zo)}function Dn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ib(r)),De!==null)for(r=De.return;r!==null;){var n=r;switch(gh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ll();break;case 3:vi(),xe(St),xe(at),Ah();break;case 5:Ch(n);break;case 4:vi();break;case 13:xe(Ce);break;case 19:xe(Ce);break;case 10:Sh(n.type._context);break;case 22:case 23:Dh()}r=r.return}if(Ye=t,De=t=an(t.current,null),et=Et=e,Ue=0,Ys=null,Oh=sc=eo=0,gt=Cs=null,kn!==null){for(e=0;e<kn.length;e++)if(r=kn[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=o,n.next=s}r.pending=n}kn=null}return t}function dx(t,e){do{var r=De;try{if(_h(),dl.current=ql,Ql){for(var n=be.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Ql=!1}if(Zn=0,qe=Me=be=null,ws=!1,Qs=0,Rh.current=null,r===null||r.return===null){Ue=1,Ys=e,De=null;break}e:{var i=t,s=r.return,a=r,l=e;if(e=et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,p=a,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var y=Kg(s);if(y!==null){y.flags&=-257,Yg(y,s,a,i,e),y.mode&1&&qg(i,u,e),e=y,l=u;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){qg(i,u,e),Fh();break e}l=Error(I(426))}}else if(we&&a.mode&1){var P=Kg(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Yg(P,s,a,i,e),mh(_i(l,a));break e}}i=l=_i(l,a),Ue!==4&&(Ue=2),Cs===null?Cs=[i]:Cs.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=KS(i,l,e);Ug(i,m);break e;case 1:a=l;var h=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(on===null||!on.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=YS(i,a,e);Ug(i,E);break e}}i=i.return}while(i!==null)}yx(r)}catch(A){e=A,De===r&&r!==null&&(De=r=r.return);continue}break}while(1)}function px(){var t=Kl.current;return Kl.current=ql,t===null?ql:t}function Fh(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Ye===null||!(eo&268435455)&&!(sc&268435455)||Qr(Ye,et)}function Xl(t,e){var r=ie;ie|=2;var n=px();(Ye!==t||et!==e)&&(Sr=null,Dn(t,e));do try{kb();break}catch(o){dx(t,o)}while(1);if(_h(),ie=r,Kl.current=n,De!==null)throw Error(I(261));return Ye=null,et=0,Ue}function kb(){for(;De!==null;)hx(De)}function Tb(){for(;De!==null&&!rA();)hx(De)}function hx(t){var e=mx(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?yx(t):De=e,Rh.current=null}function yx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Cb(r,e),r!==null){r.flags&=32767,De=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,De=null;return}}else if(r=Eb(r,e,Et),r!==null){De=r;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Ue===0&&(Ue=5)}function bn(t,e,r){var n=ue,o=Dt.transition;try{Dt.transition=null,ue=1,Rb(t,e,r,n)}finally{Dt.transition=o,ue=n}return null}function Rb(t,e,r,n){do Zo();while(Kr!==null);if(ie&6)throw Error(I(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(dA(t,i),t===Ye&&(De=Ye=null,et=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ja||(Ja=!0,vx(Ol,function(){return Zo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Dt.transition,Dt.transition=null;var s=ue;ue=1;var a=ie;ie|=4,Rh.current=null,bb(t,r),ux(r,t),XA(jd),$l=!!Od,jd=Od=null,t.current=r,Pb(r),nA(),ie=a,ue=s,Dt.transition=i}else t.current=r;if(Ja&&(Ja=!1,Kr=t,Jl=o),i=t.pendingLanes,i===0&&(on=null),sA(r.stateNode),wt(t,Oe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Yl)throw Yl=!1,t=ep,ep=null,t;return Jl&1&&t.tag!==0&&Zo(),i=t.pendingLanes,i&1?t===tp?As++:(As=0,tp=t):As=0,xn(),null}function Zo(){if(Kr!==null){var t=q0(Jl),e=Dt.transition,r=ue;try{if(Dt.transition=null,ue=16>t?16:t,Kr===null)var n=!1;else{if(t=Kr,Kr=null,Jl=0,ie&6)throw Error(I(331));var o=ie;for(ie|=4,F=t.current;F!==null;){var i=F,s=i.child;if(F.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(F=u;F!==null;){var p=F;switch(p.tag){case 0:case 11:case 15:Es(8,p,i)}var d=p.child;if(d!==null)d.return=p,F=d;else for(;F!==null;){p=F;var f=p.sibling,y=p.return;if(sx(p),p===u){F=null;break}if(f!==null){f.return=y,F=f;break}F=y}}}var v=i.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}F=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,F=s;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Es(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,F=m;break e}F=i.return}}var h=t.current;for(F=h;F!==null;){s=F;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,F=g;else e:for(s=h;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ic(9,a)}}catch(A){Ne(a,a.return,A)}if(a===s){F=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,F=E;break e}F=a.return}}if(ie=o,xn(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Ju,t)}catch{}n=!0}return n}finally{ue=r,Dt.transition=e}}return!1}function um(t,e,r){e=_i(r,e),e=KS(t,e,1),t=nn(t,e,1),e=dt(),t!==null&&(ua(t,1,e),wt(t,e))}function Ne(t,e,r){if(t.tag===3)um(t,t,r);else for(;e!==null;){if(e.tag===3){um(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(on===null||!on.has(n))){t=_i(r,t),t=YS(e,t,1),e=nn(e,t,1),t=dt(),e!==null&&(ua(e,1,t),wt(e,t));break}}e=e.return}}function Ob(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&r,Ye===t&&(et&r)===r&&(Ue===4||Ue===3&&(et&130023424)===et&&500>Oe()-jh?Dn(t,0):Oh|=r),wt(t,e)}function gx(t,e){e===0&&(t.mode&1?(e=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):e=1);var r=dt();t=kr(t,e),t!==null&&(ua(t,e,r),wt(t,r))}function jb(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),gx(t,r)}function $b(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(e),gx(t,r)}var mx;mx=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)vt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return vt=!1,wb(t,e,r);vt=!!(t.flags&131072)}else vt=!1,we&&e.flags&1048576&&SS(e,Wl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;hl(t,e),t=e.pendingProps;var o=yi(e,at.current);Xo(e,r),o=Ph(null,e,n,t,o,r);var i=Ih();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(n)?(i=!0,Bl(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,wh(e),o.updater=nc,e.stateNode=o,o._reactInternals=e,zd(e,n,t,r),e=Hd(null,e,n,!0,i,r)):(e.tag=0,we&&i&&yh(e),ut(null,e,o,r),e=e.child),e;case 16:n=e.elementType;e:{switch(hl(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=Fb(n),t=Vt(n,t),o){case 0:e=Gd(null,e,n,t,r);break e;case 1:e=Zg(null,e,n,t,r);break e;case 11:e=Jg(null,e,n,t,r);break e;case 14:e=Xg(null,e,n,Vt(n.type,t),r);break e}throw Error(I(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Vt(n,o),Gd(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Vt(n,o),Zg(t,e,n,o,r);case 3:e:{if(ex(e),t===null)throw Error(I(387));n=e.pendingProps,i=e.memoizedState,o=i.element,CS(t,e),Gl(e,n,null,r);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=_i(Error(I(423)),e),e=em(t,e,n,r,o);break e}else if(n!==o){o=_i(Error(I(424)),e),e=em(t,e,n,r,o);break e}else for(At=rn(e.stateNode.containerInfo.firstChild),bt=e,we=!0,Qt=null,r=IS(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gi(),n===o){e=Tr(t,e,r);break e}ut(t,e,n,r)}e=e.child}return e;case 5:return NS(e),t===null&&Bd(e),n=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,$d(n,o)?s=null:i!==null&&$d(n,i)&&(e.flags|=32),ZS(t,e),ut(t,e,s,r),e.child;case 6:return t===null&&Bd(e),null;case 13:return tx(t,e,r);case 4:return Eh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=mi(e,null,n,r):ut(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Vt(n,o),Jg(t,e,n,o,r);case 7:return ut(t,e,e.pendingProps,r),e.child;case 8:return ut(t,e,e.pendingProps.children,r),e.child;case 12:return ut(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,me(zl,n._currentValue),n._currentValue=s,i!==null)if(rr(i.value,s)){if(i.children===o.children&&!St.current){e=Tr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=br(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?l.next=l:(l.next=p.next,p.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Ud(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(I(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),Ud(s,r,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ut(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,Xo(e,r),o=Ft(o),n=n(o),e.flags|=1,ut(t,e,n,r),e.child;case 14:return n=e.type,o=Vt(n,e.pendingProps),o=Vt(n.type,o),Xg(t,e,n,o,r);case 15:return JS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Vt(n,o),hl(t,e),e.tag=1,xt(n)?(t=!0,Bl(e)):t=!1,Xo(e,r),bS(e,n,o),zd(e,n,o,r),Hd(null,e,n,!0,t,r);case 19:return rx(t,e,r);case 22:return XS(t,e,r)}throw Error(I(156,e.tag))};function vx(t,e){return V0(t,e)}function Db(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,r,n){return new Db(t,e,r,n)}function Mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fb(t){if(typeof t=="function")return Mh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nh)return 11;if(t===oh)return 14}return 2}function an(t,e){var r=t.alternate;return r===null?(r=jt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ml(t,e,r,n,o,i){var s=2;if(n=t,typeof t=="function")Mh(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Oo:return Fn(r.children,o,i,e);case rh:s=8,o|=8;break;case pd:return t=jt(12,r,e,o|2),t.elementType=pd,t.lanes=i,t;case hd:return t=jt(13,r,e,o),t.elementType=hd,t.lanes=i,t;case yd:return t=jt(19,r,e,o),t.elementType=yd,t.lanes=i,t;case P0:return ac(r,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A0:s=10;break e;case b0:s=9;break e;case nh:s=11;break e;case oh:s=14;break e;case Br:s=16,n=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=jt(s,r,e,o),e.elementType=t,e.type=n,e.lanes=i,e}function Fn(t,e,r,n){return t=jt(7,t,n,e),t.lanes=r,t}function ac(t,e,r,n){return t=jt(22,t,n,e),t.elementType=P0,t.lanes=r,t.stateNode={isHidden:!1},t}function ff(t,e,r){return t=jt(6,t,null,e),t.lanes=r,t}function df(t,e,r){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mb(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gc(0),this.expirationTimes=Gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Lh(t,e,r,n,o,i,s,a,l){return t=new Mb(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(i),t}function Lb(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function _x(t){if(!t)return pn;t=t._reactInternals;e:{if(ao(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var r=t.type;if(xt(r))return vS(t,r,e)}return e}function Sx(t,e,r,n,o,i,s,a,l){return t=Lh(r,n,!0,t,o,i,s,a,l),t.context=_x(null),r=t.current,n=dt(),o=sn(r),i=br(n,o),i.callback=e??null,nn(r,i,o),t.current.lanes=o,ua(t,o,n),wt(t,n),t}function lc(t,e,r,n){var o=e.current,i=dt(),s=sn(o);return r=_x(r),e.context===null?e.context=r:e.pendingContext=r,e=br(i,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=nn(o,e,s),t!==null&&(Xt(t,o,s,i),fl(t,o,s)),s}function Zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Bh(t,e){cm(t,e),(t=t.alternate)&&cm(t,e)}function Bb(){return null}var xx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uh(t){this._internalRoot=t}uc.prototype.render=Uh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));lc(t,e,null,null)};uc.prototype.unmount=Uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){lc(null,t,null,null)}),e[Nr]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var e=J0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Hr.length&&e!==0&&e<Hr[r].priority;r++);Hr.splice(r,0,t),r===0&&Z0(t)}};function Wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fm(){}function Ub(t,e,r,n,o){if(o){if(typeof n=="function"){var i=n;n=function(){var u=Zl(s);i.call(u)}}var s=Sx(e,n,t,0,null,!1,!1,"",fm);return t._reactRootContainer=s,t[Nr]=s.current,Ws(t.nodeType===8?t.parentNode:t),to(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var a=n;n=function(){var u=Zl(l);a.call(u)}}var l=Lh(t,0,!1,null,null,!1,!1,"",fm);return t._reactRootContainer=l,t[Nr]=l.current,Ws(t.nodeType===8?t.parentNode:t),to(function(){lc(e,l,r,n)}),l}function fc(t,e,r,n,o){var i=r._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=Zl(s);a.call(l)}}lc(e,s,t,o)}else s=Ub(r,e,t,o,n);return Zl(s)}K0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=hs(e.pendingLanes);r!==0&&(ah(e,r|1),wt(e,Oe()),!(ie&6)&&(Si=Oe()+500,xn()))}break;case 13:to(function(){var n=kr(t,1);if(n!==null){var o=dt();Xt(n,t,1,o)}}),Bh(t,1)}};lh=function(t){if(t.tag===13){var e=kr(t,134217728);if(e!==null){var r=dt();Xt(e,t,134217728,r)}Bh(t,134217728)}};Y0=function(t){if(t.tag===13){var e=sn(t),r=kr(t,e);if(r!==null){var n=dt();Xt(r,t,e,n)}Bh(t,e)}};J0=function(){return ue};X0=function(t,e){var r=ue;try{return ue=t,e()}finally{ue=r}};Ad=function(t,e,r){switch(e){case"input":if(vd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=tc(n);if(!o)throw Error(I(90));N0(n),vd(n,o)}}}break;case"textarea":T0(t,r);break;case"select":e=r.value,e!=null&&qo(t,!!r.multiple,e,!1)}};M0=$h;L0=to;var Wb={usingClientEntryPoint:!1,Events:[fa,Fo,tc,D0,F0,$h]},rs={findFiberByHostInstance:Nn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zb={bundleType:rs.bundleType,version:rs.version,rendererPackageName:rs.rendererPackageName,rendererConfig:rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W0(t),t===null?null:t.stateNode},findFiberByHostInstance:rs.findFiberByHostInstance||Bb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{Ju=Xa.inject(zb),dr=Xa}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wb;It.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wh(e))throw Error(I(200));return Lb(t,e,null,r)};It.createRoot=function(t,e){if(!Wh(t))throw Error(I(299));var r=!1,n="",o=xx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Lh(t,1,!1,null,null,r,!1,n,o),t[Nr]=e.current,Ws(t.nodeType===8?t.parentNode:t),new Uh(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=W0(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return to(t)};It.hydrate=function(t,e,r){if(!cc(e))throw Error(I(200));return fc(null,t,e,!0,r)};It.hydrateRoot=function(t,e,r){if(!Wh(t))throw Error(I(405));var n=r!=null&&r.hydratedSources||null,o=!1,i="",s=xx;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=Sx(e,null,t,1,r??null,o,!1,i,s),t[Nr]=e.current,Ws(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new uc(e)};It.render=function(t,e,r){if(!cc(e))throw Error(I(200));return fc(null,t,e,!1,r)};It.unmountComponentAtNode=function(t){if(!cc(t))throw Error(I(40));return t._reactRootContainer?(to(function(){fc(null,null,t,!1,function(){t._reactRootContainer=null,t[Nr]=null})}),!0):!1};It.unstable_batchedUpdates=$h;It.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!cc(r))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return fc(t,e,r,!1,n)};It.version="18.2.0-next-9e3b772b8-20220608";function wx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wx)}catch(t){console.error(t)}}wx(),S0.exports=It;var Vb=S0.exports,dm=Vb;fd.createRoot=dm.createRoot,fd.hydrateRoot=dm.hydrateRoot;var Ex={exports:{}},Cx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=x;function Gb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hb=typeof Object.is=="function"?Object.is:Gb,Qb=xi.useState,qb=xi.useEffect,Kb=xi.useLayoutEffect,Yb=xi.useDebugValue;function Jb(t,e){var r=e(),n=Qb({inst:{value:r,getSnapshot:e}}),o=n[0].inst,i=n[1];return Kb(function(){o.value=r,o.getSnapshot=e,pf(o)&&i({inst:o})},[t,r,e]),qb(function(){return pf(o)&&i({inst:o}),t(function(){pf(o)&&i({inst:o})})},[t]),Yb(r),r}function pf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Hb(t,r)}catch{return!0}}function Xb(t,e){return e()}var Zb=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xb:Jb;Cx.useSyncExternalStore=xi.useSyncExternalStore!==void 0?xi.useSyncExternalStore:Zb;Ex.exports=Cx;var eP=Ex.exports;const{useEffect:tP,useLayoutEffect:rP,useRef:nP,useInsertionEffect:oP}=jC,iP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sP=iP?rP:tP,aP=oP||sP,Ax=t=>{const e=nP([t,(...r)=>e[0](...r)]).current;return aP(()=>{e[0]=t}),e[1]},lP=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",uP=(t,e="")=>t[0]==="~"?t.slice(1):e+t,cP="popstate",zh="pushState",Vh="replaceState",fP="hashchange",pm=[cP,zh,Vh,fP],dP=t=>{for(const e of pm)addEventListener(e,t);return()=>{for(const e of pm)removeEventListener(e,t)}},pP=(t,e)=>eP.useSyncExternalStore(dP,t,e),hm=()=>location.pathname,hP=({ssrPath:t}={})=>pP(hm,t?()=>t:hm),yP=(t,{replace:e=!1}={})=>history[e?Vh:zh](null,"",t),gP=(t={})=>[lP(t.base,hP(t)),Ax((e,r)=>yP(uP(e,t.base),r))];if(typeof history<"u")for(const t of[zh,Vh]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}function mP(t=_P){let e={};const r=n=>e[n]||(e[n]=t(n));return(n,o)=>{const{regexp:i,keys:s}=r(n||""),a=i.exec(o);return a?[!0,s.reduce((u,p,d)=>(u[p.name]=a[d+1],u),{})]:[!1,null]}}const ym=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),vP=(t,e,r)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&r&&(n="(?:\\/"+n+")"),n+(e?"?":"")},_P=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let r=null,n=0,o=[],i="";for(;(r=e.exec(t))!==null;){const[s,a,l]=r,u=l==="+"||l==="*",p=l==="?"||l==="*",d=p&&t[r.index-1]==="/"?1:0,f=t.substring(n,r.index-d);o.push({name:a}),n=e.lastIndex,i+=ym(f)+vP(u,p,d)}return i+=ym(t.substring(n)),{keys:o,regexp:new RegExp("^"+i+"(?:\\/)?$","i")}},SP={hook:gP,matcher:mP(),base:""},xP=x.createContext(SP),dc=()=>x.useContext(xP),pc=t=>t.hook(t),wP=()=>pc(dc()),EP=t=>{const e=dc(),[r]=pc(e);return e.matcher(t,r)},CP=x.createContext({params:{}}),gm=(t,e)=>x.createElement(CP.Provider,{value:{params:t},children:e}),kt=({path:t,match:e,component:r,children:n})=>{const o=EP(t),[i,s]=e||o;return i?r?gm(s,x.createElement(r,{params:s})):gm(s,typeof n=="function"?n(s):n):null};x.forwardRef((t,e)=>{const r=dc(),[,n]=pc(r),{to:o,href:i=o,children:s,onClick:a}=t,l=Ax(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(a&&a(d),d.defaultPrevented||(d.preventDefault(),n(o||i,t)))}),u={href:i[0]==="~"?i.slice(1):r.base+i,onClick:l,to:null,ref:e},p=x.isValidElement(s)?s:x.createElement("a",t);return x.cloneElement(p,u)});const op=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===x.Fragment?op(e.props.children):op(e))):[t],AP=({children:t,location:e})=>{const r=dc(),n=r.matcher,[o]=pc(r);for(const i of op(t)){let s=0;if(x.isValidElement(i)&&(s=i.props.path?n(i.props.path,e||o):[!0,{}])[0])return x.cloneElement(i,{match:s})}return null};const bP="modulepreload",PP=function(t){return"/"+t},mm={},IP=function(e,r,n){if(!r||r.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=PP(i),i in mm)return;mm[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let p=o.length-1;p>=0;p--){const d=o[p];if(d.href===i&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":bP,s||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),s)return new Promise((p,d)=>{u.addEventListener("load",p),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},NP=t=>{t&&t instanceof Function&&IP(()=>import("./web-vitals-9f4c2f45.js"),[]).then(({getCLS:e,getFID:r,getFCP:n,getLCP:o,getTTFB:i})=>{e(t),r(t),n(t),o(t),i(t)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(t,e){if(!t)throw Ui(e)},Ui=function(t){return new Error("Firebase Database ("+bx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):(o&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128)}return e},kP=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const o=t[r++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[r++];e[n++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=t[r++],s=t[r++],a=t[r++],l=((o&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return e.join("")},Gh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<t.length;o+=3){const i=t[o],s=o+1<t.length,a=s?t[o+1]:0,l=o+2<t.length,u=l?t[o+2]:0,p=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,y=u&63;l||(y=64,s||(f=64)),n.push(r[p],r[d],r[f],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Px(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<t.length;){const i=r[t.charAt(o++)],a=o<t.length?r[t.charAt(o)]:0;++o;const u=o<t.length?r[t.charAt(o)]:64;++o;const d=o<t.length?r[t.charAt(o)]:64;if(++o,i==null||a==null||u==null||d==null)throw new TP;const f=i<<2|a>>4;if(n.push(f),u!==64){const y=a<<4&240|u>>2;if(n.push(y),d!==64){const v=u<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ix=function(t){const e=Px(t);return Gh.encodeByteArray(e,!0)},eu=function(t){return Ix(t).replace(/\./g,"")},ip=function(t){try{return Gh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){return Nx(void 0,t)}function Nx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!OP(r)||(t[r]=Nx(t[r],e[r]));return t}function OP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=()=>jP().__FIREBASE_DEFAULTS__,DP=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ip(t[1]);return e&&JSON.parse(e)},kx=()=>{try{return $P()||DP()||FP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MP=t=>{var e,r;return(r=(e=kx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},LP=t=>{const e=MP(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Tx=()=>{var t;return(t=kx())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",o=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[eu(JSON.stringify(r)),eu(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(UP())}function WP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ox(){return bx.NODE_ADMIN===!0}function zP(){try{return typeof indexedDB=="object"}catch{return!1}}function VP(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var i;e(((i=o.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="FirebaseError";class ha extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=GP,Object.setPrototypeOf(this,ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jx.prototype.create)}}class jx{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?HP(i,n):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new ha(o,a,n)}}function HP(t,e){return t.replace(QP,(r,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const QP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){return JSON.parse(t)}function Be(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=function(t){let e={},r={},n={},o="";try{const i=t.split(".");e=Js(ip(i[0])||""),r=Js(ip(i[1])||""),o=i[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:o}},qP=function(t){const e=$x(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},KP=function(t){const e=$x(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tu(t,e,r){const n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=e.call(r,t[o],o,t));return n}function sp(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const o of r){if(!n.includes(o))return!1;const i=t[o],s=e[o];if(_m(i)&&_m(s)){if(!sp(i,s))return!1}else if(i!==s)return!1}for(const o of n)if(!r.includes(o))return!1;return!0}function _m(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let d=0;d<16;d++)n[d]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let d=16;d<80;d++){const f=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(f<<1|f>>>31)&4294967295}let o=this.chain_[0],i=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,p;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(s^a),p=1518500249):(u=i^s^a,p=1859775393):d<60?(u=i&s|a&(i|s),p=2400959708):(u=i^s^a,p=3395469782);const f=(o<<5|o>>>27)+u+l+p+n[d]&4294967295;l=a,a=s,s=(i<<30|i>>>2)&4294967295,i=o,o=f}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let o=0;const i=this.buf_;let s=this.inbuf_;for(;o<r;){if(s===0)for(;o<=n;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<r;)if(i[s]=e.charCodeAt(o),++s,++o,s===this.blockSize){this.compress_(i),s=0;break}}else for(;o<r;)if(i[s]=e[o],++s,++o,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let o=0;o<5;o++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[o]>>i&255,++n;return e}}function ya(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);if(o>=55296&&o<=56319){const i=o-55296;n++,N(n<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(n)-56320;o=65536+(i<<10)+s}o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):o<65536?(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128)}return e},hc=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t){return t&&t._delegate?t._delegate:t}class Xs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new pa;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:r});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(o)return null;throw i}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tI(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:o});n.resolve(i)}catch{}}}}clearInstance(e=Pn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pn){return this.instances.has(e)}getOptions(e=Pn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);n===a&&s.resolve(o)}return o}onInit(e,r){var n;const o=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(o))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(o,i);const s=this.instances.get(o);return s&&e(s,o),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const o of n)try{o(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:eI(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Pn){return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eI(t){return t===Pn?void 0:t}function tI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new ZP(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const nI={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},oI=he.INFO,iI={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},sI=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),o=iI[e];if(o)console[o](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dx{constructor(e){this.name=e,this._logLevel=oI,this._logHandler=sI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const aI=(t,e)=>e.some(r=>t instanceof r);let Sm,xm;function lI(){return Sm||(Sm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uI(){return xm||(xm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,ap=new WeakMap,Mx=new WeakMap,hf=new WeakMap,Hh=new WeakMap;function cI(t){const e=new Promise((r,n)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(ln(t.result)),o()},s=()=>{n(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&Fx.set(r,t)}).catch(()=>{}),Hh.set(e,t),e}function fI(t){if(ap.has(t))return;const e=new Promise((r,n)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),o()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});ap.set(t,e)}let lp={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mx.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ln(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dI(t){lp=t(lp)}function pI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(yf(this),e,...r);return Mx.set(n,e.sort?e.sort():[e]),ln(n)}:uI().includes(t)?function(...e){return t.apply(yf(this),e),ln(Fx.get(this))}:function(...e){return ln(t.apply(yf(this),e))}}function hI(t){return typeof t=="function"?pI(t):(t instanceof IDBTransaction&&fI(t),aI(t,lI())?new Proxy(t,lp):t)}function ln(t){if(t instanceof IDBRequest)return cI(t);if(hf.has(t))return hf.get(t);const e=hI(t);return e!==t&&(hf.set(t,e),Hh.set(e,t)),e}const yf=t=>Hh.get(t);function yI(t,e,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=ln(s);return n&&s.addEventListener("upgradeneeded",l=>{n(ln(s.result),l.oldVersion,l.newVersion,ln(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),o&&l.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const gI=["get","getKey","getAll","getAllKeys","count"],mI=["put","add","delete","clear"],gf=new Map;function wm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,o=mI.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||gI.includes(r)))return;const i=async function(s,...a){const l=this.transaction(s,o?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(a.shift())),(await Promise.all([u[r](...a),o&&l.done]))[0]};return gf.set(e,i),i}dI(t=>({...t,get:(e,r,n)=>wm(e,r)||t.get(e,r,n),has:(e,r)=>!!wm(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(_I(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function _I(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",Em="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Dx("@firebase/app"),SI="@firebase/app-compat",xI="@firebase/analytics-compat",wI="@firebase/analytics",EI="@firebase/app-check-compat",CI="@firebase/app-check",AI="@firebase/auth",bI="@firebase/auth-compat",PI="@firebase/database",II="@firebase/database-compat",NI="@firebase/functions",kI="@firebase/functions-compat",TI="@firebase/installations",RI="@firebase/installations-compat",OI="@firebase/messaging",jI="@firebase/messaging-compat",$I="@firebase/performance",DI="@firebase/performance-compat",FI="@firebase/remote-config",MI="@firebase/remote-config-compat",LI="@firebase/storage",BI="@firebase/storage-compat",UI="@firebase/firestore",WI="@firebase/firestore-compat",zI="firebase",VI="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",GI={[up]:"fire-core",[SI]:"fire-core-compat",[wI]:"fire-analytics",[xI]:"fire-analytics-compat",[CI]:"fire-app-check",[EI]:"fire-app-check-compat",[AI]:"fire-auth",[bI]:"fire-auth-compat",[PI]:"fire-rtdb",[II]:"fire-rtdb-compat",[NI]:"fire-fn",[kI]:"fire-fn-compat",[TI]:"fire-iid",[RI]:"fire-iid-compat",[OI]:"fire-fcm",[jI]:"fire-fcm-compat",[$I]:"fire-perf",[DI]:"fire-perf-compat",[FI]:"fire-rc",[MI]:"fire-rc-compat",[LI]:"fire-gcs",[BI]:"fire-gcs-compat",[UI]:"fire-fst",[WI]:"fire-fst-compat","fire-js":"fire-js",[zI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,fp=new Map;function HI(t,e){try{t.container.addComponent(e)}catch(r){ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function nu(t){const e=t.name;if(fp.has(e))return ro.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const r of ru.values())HI(r,t);return!0}function QI(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},un=new jx("app","Firebase",qI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=VI;function Lx(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:cp,automaticDataCollectionEnabled:!1},e),o=n.name;if(typeof o!="string"||!o)throw un.create("bad-app-name",{appName:String(o)});if(r||(r=Tx()),!r)throw un.create("no-options");const i=ru.get(o);if(i){if(sp(r,i.options)&&sp(n,i.config))return i;throw un.create("duplicate-app",{appName:o})}const s=new rI(o);for(const l of fp.values())s.addComponent(l);const a=new KI(r,n,s);return ru.set(o,a),a}function JI(t=cp){const e=ru.get(t);if(!e&&t===cp&&Tx())return Lx();if(!e)throw un.create("no-app",{appName:t});return e}function ei(t,e,r){var n;let o=(n=GI[t])!==null&&n!==void 0?n:t;r&&(o+=`-${r}`);const i=o.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${o}" with version "${e}":`];i&&a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ro.warn(a.join(" "));return}nu(new Xs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-heartbeat-database",ZI=1,Zs="firebase-heartbeat-store";let mf=null;function Bx(){return mf||(mf=yI(XI,ZI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zs)}}}).catch(t=>{throw un.create("idb-open",{originalErrorMessage:t.message})})),mf}async function eN(t){try{return await(await Bx()).transaction(Zs).objectStore(Zs).get(Ux(t))}catch(e){if(e instanceof ha)ro.warn(e.message);else{const r=un.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ro.warn(r.message)}}}async function Cm(t,e){try{const n=(await Bx()).transaction(Zs,"readwrite");await n.objectStore(Zs).put(e,Ux(t)),await n.done}catch(r){if(r instanceof ha)ro.warn(r.message);else{const n=un.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ro.warn(n.message)}}}function Ux(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,rN=30*24*60*60*1e3;class nN{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new iN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Am();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(o=>o.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const i=new Date(o.date).valueOf();return Date.now()-i<=rN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Am(),{heartbeatsToSend:r,unsentEntries:n}=oN(this._heartbeatsCache.heartbeats),o=eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Am(){return new Date().toISOString().substring(0,10)}function oN(t,e=tN){const r=[];let n=t.slice();for(const o of t){const i=r.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),bm(r)>e){i.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),bm(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class iN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zP()?VP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await eN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cm(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cm(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function bm(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){nu(new Xs("platform-logger",e=>new vI(e),"PRIVATE")),nu(new Xs("heartbeat",e=>new nN(e),"PRIVATE")),ei(up,Em,t),ei(up,Em,"esm2017"),ei("fire-js","")}sN("");var aN="firebase",lN="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(aN,lN,"app");const Pm="@firebase/database",Im="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wx="";function uN(t){Wx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:Js(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return hr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cN(e)}}catch{}return new fN},Rn=zx("localStorage"),dp=zx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new Dx("@firebase/database"),dN=function(){let t=1;return function(){return t++}}(),Vx=function(t){const e=XP(t),r=new JP;r.update(e);const n=r.digest();return Gh.encodeByteArray(n)},ga=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=ga.apply(null,n):typeof n=="object"?e+=Be(n):e+=n,e+=" "}return e};let Mn=null,Nm=!0;const pN=function(t,e){N(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ti.logLevel=he.VERBOSE,Mn=ti.log.bind(ti),e&&dp.set("logging_enabled",!0)):typeof t=="function"?Mn=t:(Mn=null,dp.remove("logging_enabled"))},Ze=function(...t){if(Nm===!0&&(Nm=!1,Mn===null&&dp.get("logging_enabled")===!0&&pN(!0)),Mn){const e=ga.apply(null,t);Mn(e)}},ma=function(t){return function(...e){Ze(t,...e)}},pp=function(...t){const e="FIREBASE INTERNAL ERROR: "+ga(...t);ti.error(e)},Rr=function(...t){const e=`FIREBASE FATAL ERROR: ${ga(...t)}`;throw ti.error(e),new Error(e)},pt=function(...t){const e="FIREBASE WARNING: "+ga(...t);ti.warn(e)},hN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qh=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yN=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},no="[MIN_NAME]",hn="[MAX_NAME]",lo=function(t,e){if(t===e)return 0;if(t===no||e===hn)return-1;if(e===no||t===hn)return 1;{const r=km(t),n=km(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},gN=function(t,e){return t===e?0:t<e?-1:1},ns=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Be(e))},qh=function(t){if(typeof t!="object"||t===null)return Be(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=Be(e[n]),r+=":",r+=qh(t[e[n]]);return r+="}",r},Gx=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let o=0;o<r;o+=e)o+e>r?n.push(t.substring(o,r)):n.push(t.substring(o,o+e));return n};function rt(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const Hx=function(t){N(!Qh(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let o,i,s,a,l;t===0?(i=0,s=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),i=a+n,s=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(i=0,s=Math.round(t/Math.pow(2,1-n-r))));const u=[];for(l=r;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(o?1:0),u.reverse();const p=u.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(p.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},mN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _N(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const SN=new RegExp("^-?(0*)\\d{1,10}$"),xN=-2147483648,wN=2147483647,km=function(t){if(SN.test(t)){const e=Number(t);if(e>=xN&&e<=wN)return e}return null},Wi=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw pt("Exception was thrown by user callback.",r),e},Math.floor(0))}},EN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bs=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){pt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pt(e)}}class ri{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ri.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="5",Qx="v",qx="s",Kx="r",Yx="f",Jx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xx="ls",Zx="p",hp="ac",ew="websocket",tw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,r,n,o,i=!1,s="",a=!1,l=!1){this.secure=r,this.namespace=n,this.webSocketOnly=o,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function bN(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function nw(t,e,r){N(typeof e=="string","typeof type must == string"),N(typeof r=="object","typeof params must == object");let n;if(e===ew)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===tw)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bN(t)&&(r.ns=t.namespace);const o=[];return rt(r,(i,s)=>{o.push(i+"="+s)}),n+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.counters_={}}incrementCounter(e,r=1){hr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return RP(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf={},_f={};function Yh(t){const e=t.toString();return vf[e]||(vf[e]=new PN),vf[e]}function IN(t,e){const r=t.toString();return _f[r]||(_f[r]=e()),_f[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<n.length;++o)n[o]&&Wi(()=>{this.onMessage_(n[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="start",kN="close",TN="pLPCommand",RN="pRTLPCB",ow="id",iw="pw",sw="ser",ON="cb",jN="seg",$N="ts",DN="d",FN="dframe",aw=1870,lw=30,MN=aw-lw,LN=25e3,BN=3e4;class Vo{constructor(e,r,n,o,i,s,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=o,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(e),this.stats_=Yh(r),this.urlFn=l=>(this.appCheckToken&&(l[hp]=this.appCheckToken),nw(r,tw,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new NN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(BN)),yN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jh((...i)=>{const[s,a,l,u,p]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Tm)this.id=a,this.password=l;else if(s===kN)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...i)=>{const[s,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[Tm]="t",n[sw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[ON]=this.scriptTagHolder.uniqueCallbackIdentifier),n[Qx]=Kh,this.transportSessionId&&(n[qx]=this.transportSessionId),this.lastSessionId&&(n[Xx]=this.lastSessionId),this.applicationId&&(n[Zx]=this.applicationId),this.appCheckToken&&(n[hp]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jx.test(location.hostname)&&(n[Kx]=Yx);const o=this.urlFn(n);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vo.forceAllow_=!0}static forceDisallow(){Vo.forceDisallow_=!0}static isAvailable(){return Vo.forceAllow_?!0:!Vo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!mN()&&!vN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=Be(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=Ix(r),o=Gx(n,MN);for(let i=0;i<o.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[i]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[FN]="t",n[ow]=e,n[iw]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=Be(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Jh{constructor(e,r,n,o){this.onDisconnect=n,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=dN(),window[TN+this.uniqueCallbackIdentifier]=e,window[RN+this.uniqueCallbackIdentifier]=r,this.myIFrame=Jh.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ze("frame writing exception"),a.stack&&Ze(a.stack),Ze(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ze("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ow]=this.myID,e[iw]=this.myPW,e[sw]=this.currentSerial;let r=this.urlFn(e),n="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lw+n.length<=aw;){const s=this.pendingSegs.shift();n=n+"&"+jN+o+"="+s.seg+"&"+$N+o+"="+s.ts+"&"+DN+o+"="+s.d,o++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},o=setTimeout(n,Math.floor(LN)),i=()=>{clearTimeout(o),n()};this.addTag(e,i)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const o=n.readyState;(!o||o==="loaded"||o==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Ze("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=16384,WN=45e3;let ou=null;typeof MozWebSocket<"u"?ou=MozWebSocket:typeof WebSocket<"u"&&(ou=WebSocket);class qt{constructor(e,r,n,o,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=o,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Yh(r),this.connURL=qt.connectionURL_(r,s,a,o,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,o,i){const s={};return s[Qx]=Kh,typeof location<"u"&&location.hostname&&Jx.test(location.hostname)&&(s[Kx]=Yx),r&&(s[qx]=r),n&&(s[Xx]=n),o&&(s[hp]=o),i&&(s[Zx]=i),nw(e,ew,s)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rn.set("previous_websocket_failure",!0);try{let n;Ox(),this.mySock=new ou(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const o=n.message||n.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const o=n.message||n.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){qt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&ou!==null&&!qt.forceDisallow_}static previouslyFailed(){return Rn.isInMemoryStorage||Rn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=Js(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(N(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=Be(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=Gx(r,UN);n.length>1&&this.sendString_(String(n.length));for(let o=0;o<n.length;o++)this.sendString_(n[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WN))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}qt.responsesRequiredToBeHealthy=2;qt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Vo,qt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=qt&&qt.isAvailable();let n=r&&!qt.previouslyFailed();if(e.webSocketOnly&&(r||pt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[qt];else{const o=this.transports_=[];for(const i of ea.ALL_TRANSPORTS)i&&i.isAvailable()&&o.push(i);ea.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ea.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=6e4,VN=5e3,GN=10*1024,HN=100*1024,Sf="t",Rm="d",QN="s",Om="r",qN="e",jm="o",$m="a",Dm="n",Fm="p",KN="h";class YN{constructor(e,r,n,o,i,s,a,l,u,p){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=o,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new ea(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=bs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>HN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>GN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sf in e){const r=e[Sf];r===$m?this.upgradeIfSecondaryHealthy_():r===Om?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===jm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=ns("t",e),n=ns("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Fm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$m,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Dm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=ns("t",e),n=ns("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=ns(Sf,e);if(Rm in e){const n=e[Rm];if(r===KN){const o=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(r===Dm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===QN?this.onConnectionShutdown_(n):r===Om?this.onReset_(n):r===qN?pp("Server Error: "+n):r===jm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pp("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Kh!==n&&pt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),bs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(VN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Fm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{put(e,r,n,o){}merge(e,r,n,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.allowedEvents_=e,this.listeners_={},N(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let o=0;o<n.length;o++)n[o].callback.apply(n[o].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const o=this.getInitialEvent(e);o&&r.apply(n,o)}off(e,r,n){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let i=0;i<o.length;i++)if(o[i].callback===r&&(!n||n===o[i].context)){o.splice(i,1);return}}validateEventType_(e){N(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends cw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Rx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new iu}getInitialEvent(e){return N(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=32,Lm=768;class ce{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[n]=this.pieces_[o],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}}function se(){return new ce("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yn(t){return t.pieces_.length-t.pieceNum_}function ye(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ce(t.pieces_,e)}function Xh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function JN(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function ta(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new ce(e,0)}function Te(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof ce)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let o=0;o<n.length;o++)n[o].length>0&&r.push(n[o])}return new ce(r,0)}function K(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){const r=q(t),n=q(e);if(r===null)return e;if(r===n)return ft(ye(t),ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function XN(t,e){const r=ta(t,0),n=ta(e,0);for(let o=0;o<r.length&&o<n.length;o++){const i=lo(r[o],n[o]);if(i!==0)return i}return r.length===n.length?0:r.length<n.length?-1:1}function Zh(t,e){if(yn(t)!==yn(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function $t(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(yn(t)>yn(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class ZN{constructor(e,r){this.errorPrefix_=r,this.parts_=ta(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=hc(this.parts_[n]);dw(this)}}function ek(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=hc(e),dw(t)}function tk(t){const e=t.parts_.pop();t.byteLength_-=hc(e),t.parts_.length>0&&(t.byteLength_-=1)}function dw(t){if(t.byteLength_>Lm)throw new Error(t.errorPrefix_+"has a key path longer than "+Lm+" bytes ("+t.byteLength_+").");if(t.parts_.length>Mm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Mm+") or object contains a cycle "+In(t))}function In(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends cw{constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new ey}getInitialEvent(e){return N(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=1e3,rk=60*5*1e3,Bm=30*1e3,nk=1.3,ok=3e4,ik="server_kill",Um=3;class Pr extends uw{constructor(e,r,n,o,i,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=o,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Pr.nextPersistentConnectionId_++,this.log_=ma("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=os,this.maxReconnectDelay_=rk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ox())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ey.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&iu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const o=++this.requestNumber_,i={r:o,a:e,b:r};this.log_(Be(i)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[o]=n)}get(e){this.initConnection_();const r=new pa,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),r.promise}listen(e,r,n,o){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:o,hashFn:r,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+n+" for "+o);const i={p:n},s="q";e.tag&&(i.q=r._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(s,i,a=>{const l=a.d,u=a.s;Pr.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(o))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(n,o),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&hr(e,"w")){const n=wi(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',i=r._path.toString();pt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||KP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Bm)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=qP(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,o=>{const i=o.s,s=o.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+o),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,o)&&this.connected_&&this.sendUnlisten_(n,o,e._queryObject,r)}sendUnlisten_(e,r,n,o){this.log_("Unlisten on "+e+" for "+r);const i={p:e},s="n";o&&(i.q=n,i.t=o),this.sendRequest(s,i)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,o){const i={p:r,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,s=>{o&&setTimeout(()=>{o(s.s,s.d)},Math.floor(0))})}put(e,r,n,o){this.putInternal("p",e,r,n,o)}merge(e,r,n,o){this.putInternal("m",e,r,n,o)}putInternal(e,r,n,o,i){this.initConnection_();const s={p:r,d:n};i!==void 0&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:o}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,i=>{this.log_(r+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(i.s,i.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const i=n.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Be(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):pp("Unrecognized action received from server: "+Be(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ok&&(this.reconnectDelay_=os),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*nk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Pr.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},u=function(d){N(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);s?Ze("getToken() completed but was canceled"):(Ze("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new YN(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,y=>{pt(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(ik)},i))}catch(d){this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&pt(d),l())}}}interrupt(e){Ze("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ze("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vm(this.interruptReasons_)&&(this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(i=>qh(i)).join("$"):n="default";const o=this.removeListen_(e,n);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){const n=new ce(e).toString();let o;if(this.listens.has(n)){const i=this.listens.get(n);o=i.get(r),i.delete(r),i.size===0&&this.listens.delete(n)}else o=void 0;return o}onAuthRevoked_(e,r){Ze("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Um&&(this.reconnectDelay_=Bm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Ze("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Um&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+Wx.replace(/\./g,"-")]=1,Rx()?e["framework.cordova"]=1:WP()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=iu.getInstance().currentlyOnline();return vm(this.interruptReasons_)&&e}}Pr.nextPersistentConnectionId_=0;Pr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new Y(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new Y(no,e),o=new Y(no,r);return this.compare(n,o)!==0}minPost(){return Y.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za;class pw extends yc{static get __EMPTY_NODE(){return Za}static set __EMPTY_NODE(e){Za=e}compare(e,r){return lo(e.name,r.name)}isDefinedOn(e){throw Ui("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return Y.MIN}maxPost(){return new Y(hn,Za)}makePost(e,r){return N(typeof e=="string","KeyIndex indexValue must always be a string."),new Y(e,Za)}toString(){return".key"}}const Ln=new pw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,r,n,o,i=null){this.isReverse_=o,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=r?n(e.key,r):1,o&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ke{constructor(e,r,n,o,i){this.key=e,this.value=r,this.color=n??Ke.RED,this.left=o??_t.EMPTY_NODE,this.right=i??_t.EMPTY_NODE}copy(e,r,n,o,i){return new Ke(e??this.key,r??this.value,n??this.color,o??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let o=this;const i=n(e,o.key);return i<0?o=o.copy(null,null,null,o.left.insert(e,r,n),null):i===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,r,n)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return _t.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,o;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return _t.EMPTY_NODE;o=n.right.min_(),n=n.copy(o.key,o.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ke.RED=!0;Ke.BLACK=!1;class sk{copy(e,r,n,o,i){return this}insert(e,r,n){return new Ke(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _t{constructor(e,r=_t.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new _t(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Ke.BLACK,null,null))}remove(e){return new _t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ke.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,o=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return o?o.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(o=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new el(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new el(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new el(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new el(this.root_,null,this.comparator_,!0,e)}}_t.EMPTY_NODE=new sk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t,e){return lo(t.name,e.name)}function ty(t,e){return lo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yp;function lk(t){yp=t}const hw=function(t){return typeof t=="number"?"number:"+Hx(t):"string:"+t},yw=function(t){if(t.isLeafNode()){const e=t.val();N(typeof e=="string"||typeof e=="number"||typeof e=="object"&&hr(e,".sv"),"Priority must be a string or number.")}else N(t===yp||t.isEmpty(),"priority of unexpected type.");N(t===yp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm;class Qe{constructor(e,r=Qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yw(this.priorityNode_)}static set __childrenNodeConstructor(e){Wm=e}static get __childrenNodeConstructor(){return Wm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return K(e)?this:q(e)===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=q(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(N(n!==".priority"||yn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(ye(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hw(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=Hx(this.value_):e+=this.value_,this.lazyHash_=Vx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qe.__childrenNodeConstructor?-1:(N(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,o=Qe.VALUE_TYPE_ORDER.indexOf(r),i=Qe.VALUE_TYPE_ORDER.indexOf(n);return N(o>=0,"Unknown leaf type: "+r),N(i>=0,"Unknown leaf type: "+n),o===i?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gw,mw;function uk(t){gw=t}function ck(t){mw=t}class fk extends yc{compare(e,r){const n=e.node.getPriority(),o=r.node.getPriority(),i=n.compareTo(o);return i===0?lo(e.name,r.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return Y.MIN}maxPost(){return new Y(hn,new Qe("[PRIORITY-POST]",mw))}makePost(e,r){const n=gw(e);return new Y(r,new Qe("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ae=new fk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=Math.log(2);class pk{constructor(e){const r=i=>parseInt(Math.log(i)/dk,10),n=i=>parseInt(Array(i+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const o=n(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const su=function(t,e,r,n){t.sort(e);const o=function(l,u){const p=u-l;let d,f;if(p===0)return null;if(p===1)return d=t[l],f=r?r(d):d,new Ke(f,d.node,Ke.BLACK,null,null);{const y=parseInt(p/2,10)+l,v=o(l,y),S=o(y+1,u);return d=t[y],f=r?r(d):d,new Ke(f,d.node,Ke.BLACK,v,S)}},i=function(l){let u=null,p=null,d=t.length;const f=function(v,S){const P=d-v,m=d;d-=v;const h=o(P+1,m),g=t[P],E=r?r(g):g;y(new Ke(E,g.node,S,null,h))},y=function(v){u?(u.left=v,u=v):(p=v,u=v)};for(let v=0;v<l.count;++v){const S=l.nextBitIsOne(),P=Math.pow(2,l.count-(v+1));S?f(P,Ke.BLACK):(f(P,Ke.BLACK),f(P,Ke.RED))}return p},s=new pk(t.length),a=i(s);return new _t(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf;const ho={};class Cr{constructor(e,r){this.indexes_=e,this.indexSet_=r}static get Default(){return N(ho&&Ae,"ChildrenNode.ts has not been loaded"),xf=xf||new Cr({".priority":ho},{".priority":Ae}),xf}get(e){const r=wi(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof _t?r:null}hasIndex(e){return hr(this.indexSet_,e.toString())}addIndex(e,r){N(e!==Ln,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let o=!1;const i=r.getIterator(Y.Wrap);let s=i.getNext();for(;s;)o=o||e.isDefinedOn(s.node),n.push(s),s=i.getNext();let a;o?a=su(n,e.getCompare()):a=ho;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const p=Object.assign({},this.indexes_);return p[l]=a,new Cr(p,u)}addToIndexes(e,r){const n=tu(this.indexes_,(o,i)=>{const s=wi(this.indexSet_,i);if(N(s,"Missing index implementation for "+i),o===ho)if(s.isDefinedOn(e.node)){const a=[],l=r.getIterator(Y.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),su(a,s.getCompare())}else return ho;else{const a=r.get(e.name);let l=o;return a&&(l=l.remove(new Y(e.name,a))),l.insert(e,e.node)}});return new Cr(n,this.indexSet_)}removeFromIndexes(e,r){const n=tu(this.indexes_,o=>{if(o===ho)return o;{const i=r.get(e.name);return i?o.remove(new Y(e.name,i)):o}});return new Cr(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let is;class z{constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&yw(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return is||(is=new z(new _t(ty),null,Cr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||is}updatePriority(e){return this.children_.isEmpty()?this:new z(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?is:r}}getChild(e){const r=q(e);return r===null?this:this.getImmediateChild(r).getChild(ye(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(N(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new Y(e,r);let o,i;r.isEmpty()?(o=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(o=this.children_.insert(e,r),i=this.indexMap_.addToIndexes(n,this.children_));const s=o.isEmpty()?is:this.priorityNode_;return new z(o,s,i)}}updateChild(e,r){const n=q(e);if(n===null)return r;{N(q(e)!==".priority"||yn(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(n).updateChild(ye(e),r);return this.updateImmediateChild(n,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,o=0,i=!0;if(this.forEachChild(Ae,(s,a)=>{r[s]=a.val(e),n++,i&&z.INTEGER_REGEXP_.test(s)?o=Math.max(o,Number(s)):i=!1}),!e&&i&&o<2*n){const s=[];for(const a in r)s[a]=r[a];return s}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+hw(this.getPriority().val())+":"),this.forEachChild(Ae,(r,n)=>{const o=n.hash();o!==""&&(e+=":"+r+":"+o)}),this.lazyHash_=e===""?"":Vx(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const o=this.resolveIndex_(n);if(o){const i=o.getPredecessorKey(new Y(e,r));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new Y(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new Y(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Y.Wrap);let i=o.peek();for(;i!=null&&r.compare(i,e)<0;)o.getNext(),i=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Y.Wrap);let i=o.peek();for(;i!=null&&r.compare(i,e)>0;)o.getNext(),i=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===va?-1:0}withIndex(e){if(e===Ln||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new z(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Ln||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(Ae),o=r.getIterator(Ae);let i=n.getNext(),s=o.getNext();for(;i&&s;){if(i.name!==s.name||!i.node.equals(s.node))return!1;i=n.getNext(),s=o.getNext()}return i===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===Ln?null:this.indexMap_.get(e.toString())}}z.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hk extends z{constructor(){super(new _t(ty),z.EMPTY_NODE,Cr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return z.EMPTY_NODE}isEmpty(){return!1}}const va=new hk;Object.defineProperties(Y,{MIN:{value:new Y(no,z.EMPTY_NODE)},MAX:{value:new Y(hn,va)}});pw.__EMPTY_NODE=z.EMPTY_NODE;Qe.__childrenNodeConstructor=z;lk(va);ck(va);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=!0;function Le(t,e=null){if(t===null)return z.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),N(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Qe(r,Le(e))}if(!(t instanceof Array)&&yk){const r=[];let n=!1;if(rt(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=Le(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new Y(s,l)))}}),r.length===0)return z.EMPTY_NODE;const i=su(r,ak,s=>s.name,ty);if(n){const s=su(r,Ae.getCompare());return new z(i,Le(e),new Cr({".priority":s},{".priority":Ae}))}else return new z(i,Le(e),Cr.Default)}else{let r=z.EMPTY_NODE;return rt(t,(n,o)=>{if(hr(t,n)&&n.substring(0,1)!=="."){const i=Le(o);(i.isLeafNode()||!i.isEmpty())&&(r=r.updateImmediateChild(n,i))}}),r.updatePriority(Le(e))}}uk(Le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends yc{constructor(e){super(),this.indexPath_=e,N(!K(e)&&q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),o=this.extractChild(r.node),i=n.compareTo(o);return i===0?lo(e.name,r.name):i}makePost(e,r){const n=Le(e),o=z.EMPTY_NODE.updateChild(this.indexPath_,n);return new Y(r,o)}maxPost(){const e=z.EMPTY_NODE.updateChild(this.indexPath_,va);return new Y(hn,e)}toString(){return ta(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk extends yc{compare(e,r){const n=e.node.compareTo(r.node);return n===0?lo(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return Y.MIN}maxPost(){return Y.MAX}makePost(e,r){const n=Le(e);return new Y(r,n)}toString(){return".value"}}const vw=new gk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t){return{type:"value",snapshotNode:t}}function Ei(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ra(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function na(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function mk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.index_=e}updateChild(e,r,n,o,i,s){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(o).equals(n.getChild(o))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(r)?s.trackChildChange(ra(r,a)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ei(r,n)):s.trackChildChange(na(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Ae,(o,i)=>{r.hasChild(o)||n.trackChildChange(ra(o,i))}),r.isLeafNode()||r.forEachChild(Ae,(o,i)=>{if(e.hasChild(o)){const s=e.getImmediateChild(o);s.equals(i)||n.trackChildChange(na(o,i,s))}else n.trackChildChange(Ei(o,i))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?z.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.indexedFilter_=new ny(e.getIndex()),this.index_=e.getIndex(),this.startPost_=oa.getStartPost_(e),this.endPost_=oa.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,o,i,s){return this.matches(new Y(r,n))||(n=z.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,o,i,s)}updateFullNode(e,r,n){r.isLeafNode()&&(r=z.EMPTY_NODE);let o=r.withIndex(this.index_);o=o.updatePriority(z.EMPTY_NODE);const i=this;return r.forEachChild(Ae,(s,a)=>{i.matches(new Y(s,a))||(o=o.updateImmediateChild(s,z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new oa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,o,i,s){return this.rangedFilter_.matches(new Y(r,n))||(n=z.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,o,i,s):this.fullLimitUpdateChild_(e,r,n,i,s)}updateFullNode(e,r,n){let o;if(r.isLeafNode()||r.isEmpty())o=z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){o=z.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;i.hasNext()&&s<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))o=o.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{o=r.withIndex(this.index_),o=o.updatePriority(z.EMPTY_NODE);let i;this.reverse_?i=o.getReverseIterator(this.index_):i=o.getIterator(this.index_);let s=0;for(;i.hasNext();){const a=i.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:o=o.updateImmediateChild(a.name,z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,o,i){let s;if(this.reverse_){const d=this.index_.getCompare();s=(f,y)=>d(y,f)}else s=this.index_.getCompare();const a=e;N(a.numChildren()===this.limit_,"");const l=new Y(r,n),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(l);if(a.hasChild(r)){const d=a.getImmediateChild(r);let f=o.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===r||a.hasChild(f.name));)f=o.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:s(f,l);if(p&&!n.isEmpty()&&y>=0)return i!=null&&i.trackChildChange(na(r,n,d)),a.updateImmediateChild(r,n);{i!=null&&i.trackChildChange(ra(r,d));const S=a.updateImmediateChild(r,z.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Ei(f.name,f.node)),S.updateImmediateChild(f.name,f.node)):S}}else return n.isEmpty()?e:p&&s(u,l)>=0?(i!=null&&(i.trackChildChange(ra(u.name,u.node)),i.trackChildChange(Ei(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(u.name,z.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:no}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const e=new oy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _k(t){return t.loadsAllData()?new ny(t.getIndex()):t.hasLimit()?new vk(t):new oa(t)}function Sk(t,e){const r=t.copy();return r.limitSet_=!0,r.limit_=e,r.viewFrom_="r",r}function xk(t,e,r){const n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,r!=null?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function wk(t,e,r){const n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,r!==void 0?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function Ek(t,e){const r=t.copy();return r.index_=e,r}function zm(t){const e={};if(t.isDefault())return e;let r;if(t.index_===Ae?r="$priority":t.index_===vw?r="$value":t.index_===Ln?r="$key":(N(t.index_ instanceof ry,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=Be(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=Be(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Be(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Be(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Be(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Vm(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==Ae&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends uw{constructor(e,r,n,o){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=o,this.log_=ma("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,r,n,o){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=au.getListenId_(e,n),a={};this.listens_[s]=a;const l=zm(e._queryParams);this.restRequest_(i+".json",l,(u,p)=>{let d=p;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,n),wi(this.listens_,s)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",o(f,null)}})}unlisten(e,r){const n=au.getListenId_(e,r);delete this.listens_[n]}get(e){const r=zm(e._queryParams),n=e._path.toString(),o=new pa;return this.restRequest_(n+".json",r,(i,s)=>{let a=s;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(n,a,!1,null),o.resolve(a)):o.reject(new Error(a))}),o.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,i])=>{o&&o.accessToken&&(r.auth=o.accessToken),i&&i.token&&(r.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+YP(r);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Js(a.responseText)}catch{pt("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&pt("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.rootNode_=z.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(){return{value:null,children:new Map}}function Sw(t,e,r){if(K(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=q(e);t.children.has(n)||t.children.set(n,lu());const o=t.children.get(n);e=ye(e),Sw(o,e,r)}}function gp(t,e,r){t.value!==null?r(e,t.value):Ak(t,(n,o)=>{const i=new ce(e.toString()+"/"+n);gp(o,i,r)})}function Ak(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&rt(this.last_,(n,o)=>{r[n]=r[n]-o}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=10*1e3,Pk=30*1e3,Ik=5*60*1e3;class Nk{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new bk(e);const n=Gm+(Pk-Gm)*Math.random();bs(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;rt(e,(o,i)=>{i>0&&hr(this.statsToReport_,o)&&(r[o]=i,n=!0)}),n&&this.server_.reportStats(r),bs(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ik))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Yt||(Yt={}));function iy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ay(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=Yt.ACK_USER_WRITE,this.source=iy()}operationForChild(e){if(K(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ce(e));return new uu(se(),r,this.revert)}}else return N(q(this.path)===e,"operationForChild called for unrelated child."),new uu(ye(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,r){this.source=e,this.path=r,this.type=Yt.LISTEN_COMPLETE}operationForChild(e){return K(this.path)?new ia(this.source,se()):new ia(this.source,ye(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=Yt.OVERWRITE}operationForChild(e){return K(this.path)?new oo(this.source,se(),this.snap.getImmediateChild(e)):new oo(this.source,ye(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=Yt.MERGE}operationForChild(e){if(K(this.path)){const r=this.children.subtree(new ce(e));return r.isEmpty()?null:r.value?new oo(this.source,se(),r.value):new Ci(this.source,se(),r)}else return N(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ci(this.source,ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(K(e))return this.isFullyInitialized()&&!this.filtered_;const r=q(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Tk(t,e,r,n){const o=[],i=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&i.push(mk(s.childName,s.snapshotNode))}),ss(t,o,"child_removed",e,n,r),ss(t,o,"child_added",e,n,r),ss(t,o,"child_moved",i,n,r),ss(t,o,"child_changed",e,n,r),ss(t,o,"value",e,n,r),o}function ss(t,e,r,n,o,i){const s=n.filter(a=>a.type===r);s.sort((a,l)=>Ok(t,a,l)),s.forEach(a=>{const l=Rk(t,a,i);o.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Rk(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ok(t,e,r){if(e.childName==null||r.childName==null)throw Ui("Should only compare child_ events.");const n=new Y(e.childName,e.snapshotNode),o=new Y(r.childName,r.snapshotNode);return t.index_.compare(n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e){return{eventCache:t,serverCache:e}}function Ps(t,e,r,n){return gc(new gn(e,r,n),t.serverCache)}function xw(t,e,r,n){return gc(t.eventCache,new gn(e,r,n))}function cu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function io(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf;const jk=()=>(wf||(wf=new _t(gN)),wf);class pe{constructor(e,r=jk()){this.value=e,this.children=r}static fromObject(e){let r=new pe(null);return rt(e,(n,o)=>{r=r.set(new ce(n),o)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:se(),value:this.value};if(K(e))return null;{const n=q(e),o=this.children.get(n);if(o!==null){const i=o.findRootMostMatchingPathAndValue(ye(e),r);return i!=null?{path:Te(new ce(n),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(K(e))return this;{const r=q(e),n=this.children.get(r);return n!==null?n.subtree(ye(e)):new pe(null)}}set(e,r){if(K(e))return new pe(r,this.children);{const n=q(e),i=(this.children.get(n)||new pe(null)).set(ye(e),r),s=this.children.insert(n,i);return new pe(this.value,s)}}remove(e){if(K(e))return this.children.isEmpty()?new pe(null):new pe(null,this.children);{const r=q(e),n=this.children.get(r);if(n){const o=n.remove(ye(e));let i;return o.isEmpty()?i=this.children.remove(r):i=this.children.insert(r,o),this.value===null&&i.isEmpty()?new pe(null):new pe(this.value,i)}else return this}}get(e){if(K(e))return this.value;{const r=q(e),n=this.children.get(r);return n?n.get(ye(e)):null}}setTree(e,r){if(K(e))return r;{const n=q(e),i=(this.children.get(n)||new pe(null)).setTree(ye(e),r);let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),new pe(this.value,s)}}fold(e){return this.fold_(se(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((o,i)=>{n[o]=i.fold_(Te(e,o),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,se(),r)}findOnPath_(e,r,n){const o=this.value?n(r,this.value):!1;if(o)return o;if(K(e))return null;{const i=q(e),s=this.children.get(i);return s?s.findOnPath_(ye(e),Te(r,i),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,se(),r)}foreachOnPath_(e,r,n){if(K(e))return this;{this.value&&n(r,this.value);const o=q(e),i=this.children.get(o);return i?i.foreachOnPath_(ye(e),Te(r,o),n):new pe(null)}}foreach(e){this.foreach_(se(),e)}foreach_(e,r){this.children.inorderTraversal((n,o)=>{o.foreach_(Te(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.writeTree_=e}static empty(){return new Zt(new pe(null))}}function Is(t,e,r){if(K(e))return new Zt(new pe(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const o=n.path;let i=n.value;const s=ft(o,e);return i=i.updateChild(s,r),new Zt(t.writeTree_.set(o,i))}else{const o=new pe(r),i=t.writeTree_.setTree(e,o);return new Zt(i)}}}function mp(t,e,r){let n=t;return rt(r,(o,i)=>{n=Is(n,Te(e,o),i)}),n}function Hm(t,e){if(K(e))return Zt.empty();{const r=t.writeTree_.setTree(e,new pe(null));return new Zt(r)}}function vp(t,e){return uo(t,e)!=null}function uo(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(ft(r.path,e)):null}function Qm(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ae,(n,o)=>{e.push(new Y(n,o))}):t.writeTree_.children.inorderTraversal((n,o)=>{o.value!=null&&e.push(new Y(n,o.value))}),e}function cn(t,e){if(K(e))return t;{const r=uo(t,e);return r!=null?new Zt(new pe(r)):new Zt(t.writeTree_.subtree(e))}}function _p(t){return t.writeTree_.isEmpty()}function Ai(t,e){return ww(se(),t.writeTree_,e)}function ww(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((o,i)=>{o===".priority"?(N(i.value!==null,"Priority writes must always be leaf nodes"),n=i.value):r=ww(Te(t,o),i,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Te(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t,e){return bw(e,t)}function $k(t,e,r,n,o){N(n>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:o}),o&&(t.visibleWrites=Is(t.visibleWrites,e,r)),t.lastWriteId=n}function Dk(t,e,r,n){N(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=mp(t.visibleWrites,e,r),t.lastWriteId=n}function Fk(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function Mk(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);N(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let o=n.visible,i=!1,s=t.allWrites.length-1;for(;o&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=r&&Lk(a,n.path)?o=!1:$t(n.path,a.path)&&(i=!0)),s--}if(o){if(i)return Bk(t),!0;if(n.snap)t.visibleWrites=Hm(t.visibleWrites,n.path);else{const a=n.children;rt(a,l=>{t.visibleWrites=Hm(t.visibleWrites,Te(n.path,l))})}return!0}else return!1}function Lk(t,e){if(t.snap)return $t(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&$t(Te(t.path,r),e))return!0;return!1}function Bk(t){t.visibleWrites=Ew(t.allWrites,Uk,se()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Uk(t){return t.visible}function Ew(t,e,r){let n=Zt.empty();for(let o=0;o<t.length;++o){const i=t[o];if(e(i)){const s=i.path;let a;if(i.snap)$t(r,s)?(a=ft(r,s),n=Is(n,a,i.snap)):$t(s,r)&&(a=ft(s,r),n=Is(n,se(),i.snap.getChild(a)));else if(i.children){if($t(r,s))a=ft(r,s),n=mp(n,a,i.children);else if($t(s,r))if(a=ft(s,r),K(a))n=mp(n,se(),i.children);else{const l=wi(i.children,q(a));if(l){const u=l.getChild(ye(a));n=Is(n,se(),u)}}}else throw Ui("WriteRecord should have .snap or .children")}}return n}function Cw(t,e,r,n,o){if(!n&&!o){const i=uo(t.visibleWrites,e);if(i!=null)return i;{const s=cn(t.visibleWrites,e);if(_p(s))return r;if(r==null&&!vp(s,se()))return null;{const a=r||z.EMPTY_NODE;return Ai(s,a)}}}else{const i=cn(t.visibleWrites,e);if(!o&&_p(i))return r;if(!o&&r==null&&!vp(i,se()))return null;{const s=function(u){return(u.visible||o)&&(!n||!~n.indexOf(u.writeId))&&($t(u.path,e)||$t(e,u.path))},a=Ew(t.allWrites,s,e),l=r||z.EMPTY_NODE;return Ai(a,l)}}}function Wk(t,e,r){let n=z.EMPTY_NODE;const o=uo(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Ae,(i,s)=>{n=n.updateImmediateChild(i,s)}),n;if(r){const i=cn(t.visibleWrites,e);return r.forEachChild(Ae,(s,a)=>{const l=Ai(cn(i,new ce(s)),a);n=n.updateImmediateChild(s,l)}),Qm(i).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{const i=cn(t.visibleWrites,e);return Qm(i).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function zk(t,e,r,n,o){N(n||o,"Either existingEventSnap or existingServerSnap must exist");const i=Te(e,r);if(vp(t.visibleWrites,i))return null;{const s=cn(t.visibleWrites,i);return _p(s)?o.getChild(r):Ai(s,o.getChild(r))}}function Vk(t,e,r,n){const o=Te(e,r),i=uo(t.visibleWrites,o);if(i!=null)return i;if(n.isCompleteForChild(r)){const s=cn(t.visibleWrites,o);return Ai(s,n.getNode().getImmediateChild(r))}else return null}function Gk(t,e){return uo(t.visibleWrites,e)}function Hk(t,e,r,n,o,i,s){let a;const l=cn(t.visibleWrites,e),u=uo(l,se());if(u!=null)a=u;else if(r!=null)a=Ai(l,r);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const p=[],d=s.getCompare(),f=i?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let y=f.getNext();for(;y&&p.length<o;)d(y,n)!==0&&p.push(y),y=f.getNext();return p}else return[]}function Qk(){return{visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1}}function fu(t,e,r,n){return Cw(t.writeTree,t.treePath,e,r,n)}function ly(t,e){return Wk(t.writeTree,t.treePath,e)}function qm(t,e,r,n){return zk(t.writeTree,t.treePath,e,r,n)}function du(t,e){return Gk(t.writeTree,Te(t.treePath,e))}function qk(t,e,r,n,o,i){return Hk(t.writeTree,t.treePath,e,r,n,o,i)}function uy(t,e,r){return Vk(t.writeTree,t.treePath,e,r)}function Aw(t,e){return bw(Te(t.treePath,e),t.writeTree)}function bw(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;N(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),N(n!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(n);if(o){const i=o.type;if(r==="child_added"&&i==="child_removed")this.changeMap.set(n,na(n,e.snapshotNode,o.snapshotNode));else if(r==="child_removed"&&i==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&i==="child_changed")this.changeMap.set(n,ra(n,o.oldSnap));else if(r==="child_changed"&&i==="child_added")this.changeMap.set(n,Ei(n,e.snapshotNode));else if(r==="child_changed"&&i==="child_changed")this.changeMap.set(n,na(n,e.snapshotNode,o.oldSnap));else throw Ui("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const Pw=new Yk;class cy{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new gn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uy(this.writes_,e,n)}}getChildAfterChild(e,r,n){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:io(this.viewCache_),i=qk(this.writes_,o,r,1,n,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){return{filter:t}}function Xk(t,e){N(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),N(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Zk(t,e,r,n,o){const i=new Kk;let s,a;if(r.type===Yt.OVERWRITE){const u=r;u.source.fromUser?s=Sp(t,e,u.path,u.snap,n,o,i):(N(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!K(u.path),s=pu(t,e,u.path,u.snap,n,o,a,i))}else if(r.type===Yt.MERGE){const u=r;u.source.fromUser?s=tT(t,e,u.path,u.children,n,o,i):(N(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=xp(t,e,u.path,u.children,n,o,a,i))}else if(r.type===Yt.ACK_USER_WRITE){const u=r;u.revert?s=oT(t,e,u.path,n,o,i):s=rT(t,e,u.path,u.affectedTree,n,o,i)}else if(r.type===Yt.LISTEN_COMPLETE)s=nT(t,e,r.path,n,i);else throw Ui("Unknown operation type: "+r.type);const l=i.getChanges();return eT(e,s,l),{viewCache:s,changes:l}}function eT(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const o=n.getNode().isLeafNode()||n.getNode().isEmpty(),i=cu(t);(r.length>0||!t.eventCache.isFullyInitialized()||o&&!n.getNode().equals(i)||!n.getNode().getPriority().equals(i.getPriority()))&&r.push(_w(cu(e)))}}function Iw(t,e,r,n,o,i){const s=e.eventCache;if(du(n,r)!=null)return e;{let a,l;if(K(r))if(N(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=io(e),p=u instanceof z?u:z.EMPTY_NODE,d=ly(n,p);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=fu(n,io(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=q(r);if(u===".priority"){N(yn(r)===1,"Can't have a priority with additional path components");const p=s.getNode();l=e.serverCache.getNode();const d=qm(n,r,p,l);d!=null?a=t.filter.updatePriority(p,d):a=s.getNode()}else{const p=ye(r);let d;if(s.isCompleteForChild(u)){l=e.serverCache.getNode();const f=qm(n,r,s.getNode(),l);f!=null?d=s.getNode().getImmediateChild(u).updateChild(p,f):d=s.getNode().getImmediateChild(u)}else d=uy(n,u,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),u,d,p,o,i):a=s.getNode()}}return Ps(e,a,s.isFullyInitialized()||K(r),t.filter.filtersNodes())}}function pu(t,e,r,n,o,i,s,a){const l=e.serverCache;let u;const p=s?t.filter:t.filter.getIndexedFilter();if(K(r))u=p.updateFullNode(l.getNode(),n,null);else if(p.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(r,n);u=p.updateFullNode(l.getNode(),y,null)}else{const y=q(r);if(!l.isCompleteForPath(r)&&yn(r)>1)return e;const v=ye(r),P=l.getNode().getImmediateChild(y).updateChild(v,n);y===".priority"?u=p.updatePriority(l.getNode(),P):u=p.updateChild(l.getNode(),y,P,v,Pw,null)}const d=xw(e,u,l.isFullyInitialized()||K(r),p.filtersNodes()),f=new cy(o,d,i);return Iw(t,d,r,o,f,a)}function Sp(t,e,r,n,o,i,s){const a=e.eventCache;let l,u;const p=new cy(o,e,i);if(K(r))u=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=Ps(e,u,!0,t.filter.filtersNodes());else{const d=q(r);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),n),l=Ps(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=ye(r),y=a.getNode().getImmediateChild(d);let v;if(K(f))v=n;else{const S=p.getCompleteChild(d);S!=null?Xh(f)===".priority"&&S.getChild(fw(f)).isEmpty()?v=S:v=S.updateChild(f,n):v=z.EMPTY_NODE}if(y.equals(v))l=e;else{const S=t.filter.updateChild(a.getNode(),d,v,f,p,s);l=Ps(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Km(t,e){return t.eventCache.isCompleteForChild(e)}function tT(t,e,r,n,o,i,s){let a=e;return n.foreach((l,u)=>{const p=Te(r,l);Km(e,q(p))&&(a=Sp(t,a,p,u,o,i,s))}),n.foreach((l,u)=>{const p=Te(r,l);Km(e,q(p))||(a=Sp(t,a,p,u,o,i,s))}),a}function Ym(t,e,r){return r.foreach((n,o)=>{e=e.updateChild(n,o)}),e}function xp(t,e,r,n,o,i,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;K(r)?u=n:u=new pe(null).setTree(r,n);const p=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(p.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),v=Ym(t,y,f);l=pu(t,l,new ce(d),v,o,i,s,a)}}),u.children.inorderTraversal((d,f)=>{const y=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!p.hasChild(d)&&!y){const v=e.serverCache.getNode().getImmediateChild(d),S=Ym(t,v,f);l=pu(t,l,new ce(d),S,o,i,s,a)}}),l}function rT(t,e,r,n,o,i,s){if(du(o,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(K(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return pu(t,e,r,l.getNode().getChild(r),o,i,a,s);if(K(r)){let u=new pe(null);return l.getNode().forEachChild(Ln,(p,d)=>{u=u.set(new ce(p),d)}),xp(t,e,r,u,o,i,a,s)}else return e}else{let u=new pe(null);return n.foreach((p,d)=>{const f=Te(r,p);l.isCompleteForPath(f)&&(u=u.set(p,l.getNode().getChild(f)))}),xp(t,e,r,u,o,i,a,s)}}function nT(t,e,r,n,o){const i=e.serverCache,s=xw(e,i.getNode(),i.isFullyInitialized()||K(r),i.isFiltered());return Iw(t,s,r,n,Pw,o)}function oT(t,e,r,n,o,i){let s;if(du(n,r)!=null)return e;{const a=new cy(n,e,o),l=e.eventCache.getNode();let u;if(K(r)||q(r)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=fu(n,io(e));else{const d=e.serverCache.getNode();N(d instanceof z,"serverChildren would be complete if leaf node"),p=ly(n,d)}p=p,u=t.filter.updateFullNode(l,p,i)}else{const p=q(r);let d=uy(n,p,e.serverCache);d==null&&e.serverCache.isCompleteForChild(p)&&(d=l.getImmediateChild(p)),d!=null?u=t.filter.updateChild(l,p,d,ye(r),a,i):e.eventCache.getNode().hasChild(p)?u=t.filter.updateChild(l,p,z.EMPTY_NODE,ye(r),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=fu(n,io(e)),s.isLeafNode()&&(u=t.filter.updateFullNode(u,s,i)))}return s=e.serverCache.isFullyInitialized()||du(n,se())!=null,Ps(e,u,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,o=new ny(n.getIndex()),i=_k(n);this.processor_=Jk(i);const s=r.serverCache,a=r.eventCache,l=o.updateFullNode(z.EMPTY_NODE,s.getNode(),null),u=i.updateFullNode(z.EMPTY_NODE,a.getNode(),null),p=new gn(l,s.isFullyInitialized(),o.filtersNodes()),d=new gn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=gc(d,p),this.eventGenerator_=new kk(this.query_)}get query(){return this.query_}}function sT(t){return t.viewCache_.serverCache.getNode()}function aT(t){return cu(t.viewCache_)}function lT(t,e){const r=io(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!K(e)&&!r.getImmediateChild(q(e)).isEmpty())?r.getChild(e):null}function Jm(t){return t.eventRegistrations_.length===0}function uT(t,e){t.eventRegistrations_.push(e)}function Xm(t,e,r){const n=[];if(r){N(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(i=>{const s=i.createCancelEvent(r,o);s&&n.push(s)})}if(e){let o=[];for(let i=0;i<t.eventRegistrations_.length;++i){const s=t.eventRegistrations_[i];if(!s.matches(e))o.push(s);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return n}function Zm(t,e,r,n){e.type===Yt.MERGE&&e.source.queryId!==null&&(N(io(t.viewCache_),"We should always have a full cache before handling merges"),N(cu(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,i=Zk(t.processor_,o,e,r,n);return Xk(t.processor_,i.viewCache),N(i.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Nw(t,i.changes,i.viewCache.eventCache.getNode(),null)}function cT(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ae,(i,s)=>{n.push(Ei(i,s))}),r.isFullyInitialized()&&n.push(_w(r.getNode())),Nw(t,n,r.getNode(),e)}function Nw(t,e,r,n){const o=n?[n]:t.eventRegistrations_;return Tk(t.eventGenerator_,e,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;class kw{constructor(){this.views=new Map}}function fT(t){N(!hu,"__referenceConstructor has already been defined"),hu=t}function dT(){return N(hu,"Reference.ts has not been loaded"),hu}function pT(t){return t.views.size===0}function fy(t,e,r,n){const o=e.source.queryId;if(o!==null){const i=t.views.get(o);return N(i!=null,"SyncTree gave us an op for an invalid query."),Zm(i,e,r,n)}else{let i=[];for(const s of t.views.values())i=i.concat(Zm(s,e,r,n));return i}}function Tw(t,e,r,n,o){const i=e._queryIdentifier,s=t.views.get(i);if(!s){let a=fu(r,o?n:null),l=!1;a?l=!0:n instanceof z?(a=ly(r,n),l=!1):(a=z.EMPTY_NODE,l=!1);const u=gc(new gn(a,l,!1),new gn(n,o,!1));return new iT(e,u)}return s}function hT(t,e,r,n,o,i){const s=Tw(t,e,n,o,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),uT(s,r),cT(s,r)}function yT(t,e,r,n){const o=e._queryIdentifier,i=[];let s=[];const a=mn(t);if(o==="default")for(const[l,u]of t.views.entries())s=s.concat(Xm(u,r,n)),Jm(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(o);l&&(s=s.concat(Xm(l,r,n)),Jm(l)&&(t.views.delete(o),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!mn(t)&&i.push(new(dT())(e._repo,e._path)),{removed:i,events:s}}function Rw(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function fn(t,e){let r=null;for(const n of t.views.values())r=r||lT(n,e);return r}function Ow(t,e){if(e._queryParams.loadsAllData())return vc(t);{const n=e._queryIdentifier;return t.views.get(n)}}function jw(t,e){return Ow(t,e)!=null}function mn(t){return vc(t)!=null}function vc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu;function gT(t){N(!yu,"__referenceConstructor has already been defined"),yu=t}function mT(){return N(yu,"Reference.ts has not been loaded"),yu}let vT=1;class ev{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pe(null),this.pendingWriteTree_=Qk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $w(t,e,r,n,o){return $k(t.pendingWriteTree_,e,r,n,o),o?zi(t,new oo(iy(),e,r)):[]}function _T(t,e,r,n){Dk(t.pendingWriteTree_,e,r,n);const o=pe.fromObject(r);return zi(t,new Ci(iy(),e,o))}function Yr(t,e,r=!1){const n=Fk(t.pendingWriteTree_,e);if(Mk(t.pendingWriteTree_,e)){let i=new pe(null);return n.snap!=null?i=i.set(se(),!0):rt(n.children,s=>{i=i.set(new ce(s),!0)}),zi(t,new uu(n.path,i,r))}else return[]}function _a(t,e,r){return zi(t,new oo(sy(),e,r))}function ST(t,e,r){const n=pe.fromObject(r);return zi(t,new Ci(sy(),e,n))}function xT(t,e){return zi(t,new ia(sy(),e))}function wT(t,e,r){const n=py(t,r);if(n){const o=hy(n),i=o.path,s=o.queryId,a=ft(i,e),l=new ia(ay(s),a);return yy(t,i,l)}else return[]}function gu(t,e,r,n,o=!1){const i=e._path,s=t.syncPointTree_.get(i);let a=[];if(s&&(e._queryIdentifier==="default"||jw(s,e))){const l=yT(s,e,r,n);pT(s)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!o){const p=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,y)=>mn(y));if(p&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const y=AT(f);for(let v=0;v<y.length;++v){const S=y[v],P=S.query,m=Lw(t,S);t.listenProvider_.startListening(Ns(P),sa(t,P),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!n&&(p?t.listenProvider_.stopListening(Ns(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(_c(f));t.listenProvider_.stopListening(Ns(f),y)}))}bT(t,u)}return a}function Dw(t,e,r,n){const o=py(t,n);if(o!=null){const i=hy(o),s=i.path,a=i.queryId,l=ft(s,e),u=new oo(ay(a),l,r);return yy(t,s,u)}else return[]}function ET(t,e,r,n){const o=py(t,n);if(o){const i=hy(o),s=i.path,a=i.queryId,l=ft(s,e),u=pe.fromObject(r),p=new Ci(ay(a),l,u);return yy(t,s,p)}else return[]}function wp(t,e,r,n=!1){const o=e._path;let i=null,s=!1;t.syncPointTree_.foreachOnPath(o,(f,y)=>{const v=ft(f,o);i=i||fn(y,v),s=s||mn(y)});let a=t.syncPointTree_.get(o);a?(s=s||mn(a),i=i||fn(a,se())):(a=new kw,t.syncPointTree_=t.syncPointTree_.set(o,a));let l;i!=null?l=!0:(l=!1,i=z.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((y,v)=>{const S=fn(v,se());S&&(i=i.updateImmediateChild(y,S))}));const u=jw(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=_c(e);N(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=PT();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const p=mc(t.pendingWriteTree_,o);let d=hT(a,e,r,p,i,l);if(!u&&!s&&!n){const f=Ow(a,e);d=d.concat(IT(t,e,f))}return d}function dy(t,e,r){const o=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=ft(s,e),u=fn(a,l);if(u)return u});return Cw(o,e,i,r,!0)}function CT(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(u,p)=>{const d=ft(u,r);n=n||fn(p,d)});let o=t.syncPointTree_.get(r);o?n=n||fn(o,se()):(o=new kw,t.syncPointTree_=t.syncPointTree_.set(r,o));const i=n!=null,s=i?new gn(n,!0,!1):null,a=mc(t.pendingWriteTree_,e._path),l=Tw(o,e,a,i?s.getNode():z.EMPTY_NODE,i);return aT(l)}function zi(t,e){return Fw(e,t.syncPointTree_,null,mc(t.pendingWriteTree_,se()))}function Fw(t,e,r,n){if(K(t.path))return Mw(t,e,r,n);{const o=e.get(se());r==null&&o!=null&&(r=fn(o,se()));let i=[];const s=q(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const u=r?r.getImmediateChild(s):null,p=Aw(n,s);i=i.concat(Fw(a,l,u,p))}return o&&(i=i.concat(fy(o,t,n,r))),i}}function Mw(t,e,r,n){const o=e.get(se());r==null&&o!=null&&(r=fn(o,se()));let i=[];return e.children.inorderTraversal((s,a)=>{const l=r?r.getImmediateChild(s):null,u=Aw(n,s),p=t.operationForChild(s);p&&(i=i.concat(Mw(p,a,l,u)))}),o&&(i=i.concat(fy(o,t,n,r))),i}function Lw(t,e){const r=e.query,n=sa(t,r);return{hashFn:()=>(sT(e)||z.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return n?wT(t,r._path,n):xT(t,r._path);{const i=_N(o,r);return gu(t,r,null,i)}}}}function sa(t,e){const r=_c(e);return t.queryToTagMap.get(r)}function _c(t){return t._path.toString()+"$"+t._queryIdentifier}function py(t,e){return t.tagToQueryMap.get(e)}function hy(t){const e=t.indexOf("$");return N(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ce(t.substr(0,e))}}function yy(t,e,r){const n=t.syncPointTree_.get(e);N(n,"Missing sync point for query tag that we're tracking");const o=mc(t.pendingWriteTree_,e);return fy(n,r,o,null)}function AT(t){return t.fold((e,r,n)=>{if(r&&mn(r))return[vc(r)];{let o=[];return r&&(o=Rw(r)),rt(n,(i,s)=>{o=o.concat(s)}),o}})}function Ns(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(mT())(t._repo,t._path):t}function bT(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const o=_c(n),i=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(i)}}}function PT(){return vT++}function IT(t,e,r){const n=e._path,o=sa(t,e),i=Lw(t,r),s=t.listenProvider_.startListening(Ns(e),o,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(n);if(o)N(!mn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,p,d)=>{if(!K(u)&&p&&mn(p))return[vc(p).query];{let f=[];return p&&(f=f.concat(Rw(p).map(y=>y.query))),rt(d,(y,v)=>{f=f.concat(v)}),f}});for(let u=0;u<l.length;++u){const p=l[u];t.listenProvider_.stopListening(Ns(p),sa(t,p))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new gy(r)}node(){return this.node_}}class my{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Te(this.path_,e);return new my(this.syncTree_,r)}node(){return dy(this.syncTree_,this.path_)}}const NT=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tv=function(t,e,r){if(!t||typeof t!="object")return t;if(N(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return kT(t[".sv"],e,r);if(typeof t[".sv"]=="object")return TT(t[".sv"],e);N(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},kT=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:N(!1,"Unexpected server value: "+t)}},TT=function(t,e,r){t.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&N(!1,"Unexpected increment value: "+n);const o=e.node();if(N(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return n;const s=o.getValue();return typeof s!="number"?n:s+n},Bw=function(t,e,r,n){return vy(e,new my(r,t),n)},Uw=function(t,e,r){return vy(t,new gy(e),r)};function vy(t,e,r){const n=t.getPriority().val(),o=tv(n,e.getImmediateChild(".priority"),r);let i;if(t.isLeafNode()){const s=t,a=tv(s.getValue(),e,r);return a!==s.getValue()||o!==s.getPriority().val()?new Qe(a,Le(o)):t}else{const s=t;return i=s,o!==s.getPriority().val()&&(i=i.updatePriority(new Qe(o))),s.forEachChild(Ae,(a,l)=>{const u=vy(l,e.getImmediateChild(a),r);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function Sy(t,e){let r=e instanceof ce?e:new ce(e),n=t,o=q(r);for(;o!==null;){const i=wi(n.node.children,o)||{children:{},childCount:0};n=new _y(o,n,i),r=ye(r),o=q(r)}return n}function Vi(t){return t.node.value}function Ww(t,e){t.node.value=e,Ep(t)}function zw(t){return t.node.childCount>0}function RT(t){return Vi(t)===void 0&&!zw(t)}function Sc(t,e){rt(t.node.children,(r,n)=>{e(new _y(r,t,n))})}function Vw(t,e,r,n){r&&!n&&e(t),Sc(t,o=>{Vw(o,e,!0,n)}),r&&n&&e(t)}function OT(t,e,r){let n=r?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Sa(t){return new ce(t.parent===null?t.name:Sa(t.parent)+"/"+t.name)}function Ep(t){t.parent!==null&&jT(t.parent,t.name,t)}function jT(t,e,r){const n=RT(r),o=hr(t.node.children,e);n&&o?(delete t.node.children[e],t.node.childCount--,Ep(t)):!n&&!o&&(t.node.children[e]=r.node,t.node.childCount++,Ep(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=/[\[\].#$\/\u0000-\u001F\u007F]/,DT=/[\[\].#$\u0000-\u001F\u007F]/,Ef=10*1024*1024,xc=function(t){return typeof t=="string"&&t.length!==0&&!$T.test(t)},Gw=function(t){return typeof t=="string"&&t.length!==0&&!DT.test(t)},FT=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gw(t)},Cp=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Qh(t)||t&&typeof t=="object"&&hr(t,".sv")},xa=function(t,e,r,n){n&&e===void 0||wc(ya(t,"value"),e,r)},wc=function(t,e,r){const n=r instanceof ce?new ZN(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+In(n));if(typeof e=="function")throw new Error(t+"contains a function "+In(n)+" with contents = "+e.toString());if(Qh(e))throw new Error(t+"contains "+e.toString()+" "+In(n));if(typeof e=="string"&&e.length>Ef/3&&hc(e)>Ef)throw new Error(t+"contains a string greater than "+Ef+" utf8 bytes "+In(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,i=!1;if(rt(e,(s,a)=>{if(s===".value")o=!0;else if(s!==".priority"&&s!==".sv"&&(i=!0,!xc(s)))throw new Error(t+" contains an invalid key ("+s+") "+In(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ek(n,s),wc(t,a,n),tk(n)}),o&&i)throw new Error(t+' contains ".value" child '+In(n)+" in addition to actual children.")}},MT=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const i=ta(n);for(let s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!xc(i[s]))throw new Error(t+"contains an invalid key ("+i[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(XN);let o=null;for(r=0;r<e.length;r++){if(n=e[r],o!==null&&$t(o,n))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+n.toString());o=n}},LT=function(t,e,r,n){if(n&&e===void 0)return;const o=ya(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const i=[];rt(e,(s,a)=>{const l=new ce(s);if(wc(o,a,Te(r,l)),Xh(l)===".priority"&&!Cp(a))throw new Error(o+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(l)}),MT(o,i)},BT=function(t,e,r,n){if(!(n&&r===void 0)&&!xc(r))throw new Error(ya(t,e)+'was an invalid key = "'+r+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},xy=function(t,e,r,n){if(!(n&&r===void 0)&&!Gw(r))throw new Error(ya(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},UT=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),xy(t,e,r,n)},Hw=function(t,e){if(q(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},WT=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!FT(r))throw new Error(ya(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ec(t,e){let r=null;for(let n=0;n<e.length;n++){const o=e[n],i=o.getPath();r!==null&&!Zh(i,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:i}),r.events.push(o)}r&&t.eventLists_.push(r)}function Qw(t,e,r){Ec(t,r),qw(t,n=>Zh(n,e))}function Lt(t,e,r){Ec(t,r),qw(t,n=>$t(n,e)||$t(e,n))}function qw(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const o=t.eventLists_[n];if(o){const i=o.path;e(i)?(VT(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function VT(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();Mn&&Ze("event: "+r.toString()),Wi(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="repo_interrupt",HT=25;class QT{constructor(e,r,n,o){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lu(),this.transactionQueueTree_=new _y,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qT(t,e,r){if(t.stats_=Yh(t.repoInfo_),t.forceRestClient_||EN())t.server_=new au(t.repoInfo_,(n,o,i,s)=>{rv(t,n,o,i,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nv(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Pr(t.repoInfo_,e,(n,o,i,s)=>{rv(t,n,o,i,s)},n=>{nv(t,n)},n=>{KT(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=IN(t.repoInfo_,()=>new Nk(t.stats_,t.server_)),t.infoData_=new Ck,t.infoSyncTree_=new ev({startListening:(n,o,i,s)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=_a(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),wy(t,"connected",!1),t.serverSyncTree_=new ev({startListening:(n,o,i,s)=>(t.server_.listen(n,i,o,(a,l)=>{const u=s(a,l);Lt(t.eventQueue_,n._path,u)}),[]),stopListening:(n,o)=>{t.server_.unlisten(n,o)}})}function Kw(t){const r=t.infoData_.getNode(new ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Cc(t){return NT({timestamp:Kw(t)})}function rv(t,e,r,n,o){t.dataUpdateCount++;const i=new ce(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let s=[];if(o)if(n){const l=tu(r,u=>Le(u));s=ET(t.serverSyncTree_,i,l,o)}else{const l=Le(r);s=Dw(t.serverSyncTree_,i,l,o)}else if(n){const l=tu(r,u=>Le(u));s=ST(t.serverSyncTree_,i,l)}else{const l=Le(r);s=_a(t.serverSyncTree_,i,l)}let a=i;s.length>0&&(a=bi(t,i)),Lt(t.eventQueue_,a,s)}function nv(t,e){wy(t,"connected",e),e===!1&&ZT(t)}function KT(t,e){rt(e,(r,n)=>{wy(t,r,n)})}function wy(t,e,r){const n=new ce("/.info/"+e),o=Le(r);t.infoData_.updateSnapshot(n,o);const i=_a(t.infoSyncTree_,n,o);Lt(t.eventQueue_,n,i)}function Ey(t){return t.nextWriteId_++}function YT(t,e,r){const n=CT(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(o=>{const i=Le(o).withIndex(e._queryParams.getIndex());wp(t.serverSyncTree_,e,r,!0);let s;if(e._queryParams.loadsAllData())s=_a(t.serverSyncTree_,e._path,i);else{const a=sa(t.serverSyncTree_,e);s=Dw(t.serverSyncTree_,e._path,i,a)}return Lt(t.eventQueue_,e._path,s),gu(t.serverSyncTree_,e,r,null,!0),i},o=>(wa(t,"get for query "+Be(e)+" failed: "+o),Promise.reject(new Error(o))))}function JT(t,e,r,n,o){wa(t,"set",{path:e.toString(),value:r,priority:n});const i=Cc(t),s=Le(r,n),a=dy(t.serverSyncTree_,e),l=Uw(s,a,i),u=Ey(t),p=$w(t.serverSyncTree_,e,l,u,!0);Ec(t.eventQueue_,p),t.server_.put(e.toString(),s.val(!0),(f,y)=>{const v=f==="ok";v||pt("set at "+e+" failed: "+f);const S=Yr(t.serverSyncTree_,u,!v);Lt(t.eventQueue_,e,S),Ap(t,o,f,y)});const d=Ay(t,e);bi(t,d),Lt(t.eventQueue_,d,[])}function XT(t,e,r,n){wa(t,"update",{path:e.toString(),value:r});let o=!0;const i=Cc(t),s={};if(rt(r,(a,l)=>{o=!1,s[a]=Bw(Te(e,a),Le(l),t.serverSyncTree_,i)}),o)Ze("update() called with empty data.  Don't do anything."),Ap(t,n,"ok",void 0);else{const a=Ey(t),l=_T(t.serverSyncTree_,e,s,a);Ec(t.eventQueue_,l),t.server_.merge(e.toString(),r,(u,p)=>{const d=u==="ok";d||pt("update at "+e+" failed: "+u);const f=Yr(t.serverSyncTree_,a,!d),y=f.length>0?bi(t,e):e;Lt(t.eventQueue_,y,f),Ap(t,n,u,p)}),rt(r,u=>{const p=Ay(t,Te(e,u));bi(t,p)}),Lt(t.eventQueue_,e,[])}}function ZT(t){wa(t,"onDisconnectEvents");const e=Cc(t),r=lu();gp(t.onDisconnect_,se(),(o,i)=>{const s=Bw(o,i,t.serverSyncTree_,e);Sw(r,o,s)});let n=[];gp(r,se(),(o,i)=>{n=n.concat(_a(t.serverSyncTree_,o,i));const s=Ay(t,o);bi(t,s)}),t.onDisconnect_=lu(),Lt(t.eventQueue_,se(),n)}function eR(t,e,r){let n;q(e._path)===".info"?n=wp(t.infoSyncTree_,e,r):n=wp(t.serverSyncTree_,e,r),Qw(t.eventQueue_,e._path,n)}function ov(t,e,r){let n;q(e._path)===".info"?n=gu(t.infoSyncTree_,e,r):n=gu(t.serverSyncTree_,e,r),Qw(t.eventQueue_,e._path,n)}function tR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(GT)}function wa(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ze(r,...e)}function Ap(t,e,r,n){e&&Wi(()=>{if(r==="ok")e(null);else{const o=(r||"error").toUpperCase();let i=o;n&&(i+=": "+n);const s=new Error(i);s.code=o,e(s)}})}function Yw(t,e,r){return dy(t.serverSyncTree_,e,r)||z.EMPTY_NODE}function Cy(t,e=t.transactionQueueTree_){if(e||Ac(t,e),Vi(e)){const r=Xw(t,e);N(r.length>0,"Sending zero length transaction queue"),r.every(o=>o.status===0)&&rR(t,Sa(e),r)}else zw(e)&&Sc(e,r=>{Cy(t,r)})}function rR(t,e,r){const n=r.map(u=>u.currentWriteId),o=Yw(t,e,n);let i=o;const s=o.hash();for(let u=0;u<r.length;u++){const p=r[u];N(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const d=ft(e,p.path);i=i.updateChild(d,p.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{wa(t,"transaction put response",{path:l.toString(),status:u});let p=[];if(u==="ok"){const d=[];for(let f=0;f<r.length;f++)r[f].status=2,p=p.concat(Yr(t.serverSyncTree_,r[f].currentWriteId)),r[f].onComplete&&d.push(()=>r[f].onComplete(null,!0,r[f].currentOutputSnapshotResolved)),r[f].unwatcher();Ac(t,Sy(t.transactionQueueTree_,e)),Cy(t,t.transactionQueueTree_),Lt(t.eventQueue_,e,p);for(let f=0;f<d.length;f++)Wi(d[f])}else{if(u==="datastale")for(let d=0;d<r.length;d++)r[d].status===3?r[d].status=4:r[d].status=0;else{pt("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<r.length;d++)r[d].status=4,r[d].abortReason=u}bi(t,e)}},s)}function bi(t,e){const r=Jw(t,e),n=Sa(r),o=Xw(t,r);return nR(t,o,n),n}function nR(t,e,r){if(e.length===0)return;const n=[];let o=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=ft(r,l.path);let p=!1,d;if(N(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)p=!0,d=l.abortReason,o=o.concat(Yr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=HT)p=!0,d="maxretry",o=o.concat(Yr(t.serverSyncTree_,l.currentWriteId,!0));else{const f=Yw(t,l.path,s);l.currentInputSnapshot=f;const y=e[a].update(f.val());if(y!==void 0){wc("transaction failed: Data returned ",y,l.path);let v=Le(y);typeof y=="object"&&y!=null&&hr(y,".priority")||(v=v.updatePriority(f.getPriority()));const P=l.currentWriteId,m=Cc(t),h=Uw(v,f,m);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=h,l.currentWriteId=Ey(t),s.splice(s.indexOf(P),1),o=o.concat($w(t.serverSyncTree_,l.path,h,l.currentWriteId,l.applyLocally)),o=o.concat(Yr(t.serverSyncTree_,P,!0))}else p=!0,d="nodata",o=o.concat(Yr(t.serverSyncTree_,l.currentWriteId,!0))}Lt(t.eventQueue_,r,o),o=[],p&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(d),!1,null))))}Ac(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Wi(n[a]);Cy(t,t.transactionQueueTree_)}function Jw(t,e){let r,n=t.transactionQueueTree_;for(r=q(e);r!==null&&Vi(n)===void 0;)n=Sy(n,r),e=ye(e),r=q(e);return n}function Xw(t,e){const r=[];return Zw(t,e,r),r.sort((n,o)=>n.order-o.order),r}function Zw(t,e,r){const n=Vi(e);if(n)for(let o=0;o<n.length;o++)r.push(n[o]);Sc(e,o=>{Zw(t,o,r)})}function Ac(t,e){const r=Vi(e);if(r){let n=0;for(let o=0;o<r.length;o++)r[o].status!==2&&(r[n]=r[o],n++);r.length=n,Ww(e,r.length>0?r:void 0)}Sc(e,n=>{Ac(t,n)})}function Ay(t,e){const r=Sa(Jw(t,e)),n=Sy(t.transactionQueueTree_,e);return OT(n,o=>{Cf(t,o)}),Cf(t,n),Vw(n,o=>{Cf(t,o)}),r}function Cf(t,e){const r=Vi(e);if(r){const n=[];let o=[],i=-1;for(let s=0;s<r.length;s++)r[s].status===3||(r[s].status===1?(N(i===s-1,"All SENT items should be at beginning of queue."),i=s,r[s].status=3,r[s].abortReason="set"):(N(r[s].status===0,"Unexpected transaction status in abort"),r[s].unwatcher(),o=o.concat(Yr(t.serverSyncTree_,r[s].currentWriteId,!0)),r[s].onComplete&&n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Ww(e,void 0):r.length=i+1,Lt(t.eventQueue_,Sa(e),o);for(let s=0;s<n.length;s++)Wi(n[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let o=r[n];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function iR(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):pt(`Invalid query segment '${r}' in query '${t}'`)}return e}const iv=function(t,e){const r=sR(t),n=r.namespace;r.domain==="firebase.com"&&Rr(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Rr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||hN();const o=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new rw(r.host,r.secure,n,o,e,"",n!==r.subdomain),path:new ce(r.pathString)}},sR=function(t){let e="",r="",n="",o="",i="",s=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let p=t.indexOf("/");p===-1&&(p=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(p,d)),p<d&&(o=oR(t.substring(p,d)));const f=iR(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")r="localhost";else if(y.split(".").length<=2)r=y;else{const v=e.indexOf(".");n=e.substring(0,v).toLowerCase(),r=e.substring(v+1),i=n}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:o,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aR=function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let o;const i=new Array(8);for(o=7;o>=0;o--)i[o]=sv.charAt(r%64),r=Math.floor(r/64);N(r===0,"Cannot push at time == 0");let s=i.join("");if(n){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)s+=sv.charAt(e[o]);return N(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,r,n,o){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Be(this.snapshot.exportVal())}}class t1{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,r,n,o){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=o}get key(){return K(this._path)?null:Xh(this._path)}get ref(){return new yr(this._repo,this._path)}get _queryIdentifier(){const e=Vm(this._queryParams),r=qh(e);return r==="{}"?"default":r}get _queryObject(){return Vm(this._queryParams)}isEqual(e){if(e=wn(e),!(e instanceof co))return!1;const r=this._repo===e._repo,n=Zh(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return r&&n&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+JN(this._path)}}function lR(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function by(t){let e=null,r=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===Ln){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==no)throw new Error(n);if(typeof e!="string")throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==hn)throw new Error(n);if(typeof r!="string")throw new Error(o)}}else if(t.getIndex()===Ae){if(e!=null&&!Cp(e)||r!=null&&!Cp(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(N(t.getIndex()instanceof ry||t.getIndex()===vw,"unknown index type."),e!=null&&typeof e=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function n1(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class yr extends co{constructor(e,r){super(e,r,new oy,!1)}get parent(){const e=fw(this._path);return e===null?null:new yr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Pi{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new ce(e),n=Ii(this.ref,e);return new Pi(this._node.getChild(r),n,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,o)=>e(new Pi(o,Ii(this.ref,n),Ae)))}hasChild(e){const r=new ce(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gs(t,e){return t=wn(t),t._checkNotDeleted("ref"),e!==void 0?Ii(t._root,e):t._root}function Ii(t,e){return t=wn(t),q(t._path)===null?UT("child","path",e,!1):xy("child","path",e,!1),new yr(t._repo,Te(t._path,e))}function o1(t,e){t=wn(t),Hw("push",t._path),xa("push",e,t._path,!0);const r=Kw(t._repo),n=aR(r),o=Ii(t,n),i=Ii(t,n);let s;return e!=null?s=Py(i,e).then(()=>i):s=Promise.resolve(i),o.then=s.then.bind(s),o.catch=s.then.bind(s,void 0),o}function Py(t,e){t=wn(t),Hw("set",t._path),xa("set",e,t._path,!1);const r=new pa;return JT(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}function i1(t,e){LT("update",e,t._path,!1);const r=new pa;return XT(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function s1(t){t=wn(t);const e=new r1(()=>{}),r=new bc(e);return YT(t._repo,t,r).then(n=>new Pi(n,new yr(t._repo,t._path),t._queryParams.getIndex()))}class bc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new e1("value",this,new Pi(e.snapshotNode,new yr(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new t1(this,e,r):null}matches(e){return e instanceof bc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Iy{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new t1(this,e,r):null}createEvent(e,r){N(e.childName!=null,"Child events should have a childName.");const n=Ii(new yr(r._repo,r._path),e.childName),o=r._queryParams.getIndex();return new e1(e.type,this,new Pi(e.snapshotNode,n,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Iy?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function uR(t,e,r,n,o){let i;if(typeof n=="object"&&(i=void 0,o=n),typeof n=="function"&&(i=n),o&&o.onlyOnce){const l=r,u=(p,d)=>{ov(t._repo,t,a),l(p,d)};u.userCallback=r.userCallback,u.context=r.context,r=u}const s=new r1(r,i||void 0),a=e==="value"?new bc(s):new Iy(e,s);return eR(t._repo,t,a),()=>ov(t._repo,t,a)}function cR(t,e,r,n){return uR(t,"value",e,r,n)}class Ea{}class fR extends Ea{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){xa("endAt",this._value,e._path,!0);const r=wk(e._queryParams,this._value,this._key);if(n1(r),by(r),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new co(e._repo,e._path,r,e._orderByCalled)}}class dR extends Ea{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){xa("startAt",this._value,e._path,!0);const r=xk(e._queryParams,this._value,this._key);if(n1(r),by(r),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new co(e._repo,e._path,r,e._orderByCalled)}}class pR extends Ea{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new co(e._repo,e._path,Sk(e._queryParams,this._limit),e._orderByCalled)}}function hR(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pR(t)}class yR extends Ea{constructor(e){super(),this._path=e}_apply(e){lR(e,"orderByChild");const r=new ce(this._path);if(K(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new ry(r),o=Ek(e._queryParams,n);return by(o),new co(e._repo,e._path,o,!0)}}function gR(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xy("orderByChild","path",t,!1),new yR(t)}class mR extends Ea{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){if(xa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new fR(this._value,this._key)._apply(new dR(this._value,this._key)._apply(e))}}function vR(t,e){return BT("equalTo","key",e,!0),new mR(t,e)}function _R(t,...e){let r=wn(t);for(const n of e)r=n._apply(r);return r}fT(yr);gT(yr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="FIREBASE_DATABASE_EMULATOR_HOST",bp={};let xR=!1;function wR(t,e,r,n){t.repoInfo_=new rw(`${e}:${r}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function ER(t,e,r,n,o){let i=n||t.options.databaseURL;i===void 0&&(t.options.projectId||Rr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ze("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=iv(i,o),a=s.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[SR]),u?(l=!0,i=`http://${u}?ns=${a.namespace}`,s=iv(i,o),a=s.repoInfo):l=!s.repoInfo.secure;const p=o&&l?new ri(ri.OWNER):new AN(t.name,t.options,e);WT("Invalid Firebase Database URL",s),K(s.path)||Rr("Database URL must point to the root of a Firebase Database (not including a child path).");const d=AR(a,t,p,new CN(t.name,r));return new bR(d,t)}function CR(t,e){const r=bp[e];(!r||r[t.key]!==t)&&Rr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),tR(t),delete r[t.key]}function AR(t,e,r,n){let o=bp[e.name];o||(o={},bp[e.name]=o);let i=o[t.toURLString()];return i&&Rr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new QT(t,xR,r,n),o[t.toURLString()]=i,i}class bR{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yr(this._repo,se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Rr("Cannot call "+e+" on a deleted database.")}}function PR(t=JI(),e){const r=QI(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=LP("database");n&&a1(r,...n)}return r}function a1(t,e,r,n={}){t=wn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Rr("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let i;if(o.repoInfo_.nodeAdmin)n.mockUserToken&&Rr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new ri(ri.OWNER);else if(n.mockUserToken){const s=typeof n.mockUserToken=="string"?n.mockUserToken:BP(n.mockUserToken,t.app.options.projectId);i=new ri(s)}wR(o,e,r,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){uN(YI),nu(new Xs("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return ER(n,o,i,r)},"PUBLIC").setMultipleInstances(!0)),ei(Pm,Im,t),ei(Pm,Im,"esm2017")}Pr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Pr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};IR();var av=Object.prototype.toString,l1=function(e){var r=av.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&av.call(e.callee)==="[object Function]"),n},Af,lv;function NR(){if(lv)return Af;lv=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=l1,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(f){var y=f.constructor;return y&&y.prototype===f},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!u["$"+f]&&e.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{l(window[f])}catch{return!0}}catch{return!0}return!1}(),d=function(f){if(typeof window>"u"||!p)return l(f);try{return l(f)}catch{return!1}};t=function(y){var v=y!==null&&typeof y=="object",S=r.call(y)==="[object Function]",P=n(y),m=v&&r.call(y)==="[object String]",h=[];if(!v&&!S&&!P)throw new TypeError("Object.keys called on a non-object");var g=s&&S;if(m&&y.length>0&&!e.call(y,0))for(var E=0;E<y.length;++E)h.push(String(E));if(P&&y.length>0)for(var A=0;A<y.length;++A)h.push(String(A));else for(var b in y)!(g&&b==="prototype")&&e.call(y,b)&&h.push(String(b));if(i)for(var T=d(y),O=0;O<a.length;++O)!(T&&a[O]==="constructor")&&e.call(y,a[O])&&h.push(a[O]);return h}}return Af=t,Af}var kR=Array.prototype.slice,TR=l1,uv=Object.keys,vl=uv?function(e){return uv(e)}:NR(),cv=Object.keys;vl.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return TR(n)?cv(kR.call(n)):cv(n)})}else Object.keys=vl;return Object.keys||vl};var Ca=vl,Pc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},fv=typeof Symbol<"u"&&Symbol,RR=Pc,Dr=function(){return typeof fv!="function"||typeof Symbol!="function"||typeof fv("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:RR()},OR="Function.prototype.bind called on incompatible ",bf=Array.prototype.slice,jR=Object.prototype.toString,$R="[object Function]",DR=function(e){var r=this;if(typeof r!="function"||jR.call(r)!==$R)throw new TypeError(OR+r);for(var n=bf.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(bf.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(bf.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},FR=DR,Ny=Function.prototype.bind||FR,MR=Ny,Ic=MR.call(Function.call,Object.prototype.hasOwnProperty),re,Ni=SyntaxError,u1=Function,ni=TypeError,Pf=function(t){try{return u1('"use strict"; return ('+t+").constructor;")()}catch{}},Bn=Object.getOwnPropertyDescriptor;if(Bn)try{Bn({},"")}catch{Bn=null}var If=function(){throw new ni},LR=Bn?function(){try{return arguments.callee,If}catch{try{return Bn(arguments,"callee").get}catch{return If}}}():If,yo=Dr(),Wr=Object.getPrototypeOf||function(t){return t.__proto__},Co={},BR=typeof Uint8Array>"u"?re:Wr(Uint8Array),oi={"%AggregateError%":typeof AggregateError>"u"?re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?re:ArrayBuffer,"%ArrayIteratorPrototype%":yo?Wr([][Symbol.iterator]()):re,"%AsyncFromSyncIteratorPrototype%":re,"%AsyncFunction%":Co,"%AsyncGenerator%":Co,"%AsyncGeneratorFunction%":Co,"%AsyncIteratorPrototype%":Co,"%Atomics%":typeof Atomics>"u"?re:Atomics,"%BigInt%":typeof BigInt>"u"?re:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?re:FinalizationRegistry,"%Function%":u1,"%GeneratorFunction%":Co,"%Int8Array%":typeof Int8Array>"u"?re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":yo?Wr(Wr([][Symbol.iterator]())):re,"%JSON%":typeof JSON=="object"?JSON:re,"%Map%":typeof Map>"u"?re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!yo?re:Wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?re:Promise,"%Proxy%":typeof Proxy>"u"?re:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!yo?re:Wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":yo?Wr(""[Symbol.iterator]()):re,"%Symbol%":yo?Symbol:re,"%SyntaxError%":Ni,"%ThrowTypeError%":LR,"%TypedArray%":BR,"%TypeError%":ni,"%Uint8Array%":typeof Uint8Array>"u"?re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?re:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?re:WeakSet},UR=function t(e){var r;if(e==="%AsyncFunction%")r=Pf("async function () {}");else if(e==="%GeneratorFunction%")r=Pf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Pf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=Wr(o.prototype))}return oi[e]=r,r},dv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Aa=Ny,mu=Ic,WR=Aa.call(Function.call,Array.prototype.concat),zR=Aa.call(Function.apply,Array.prototype.splice),pv=Aa.call(Function.call,String.prototype.replace),vu=Aa.call(Function.call,String.prototype.slice),VR=Aa.call(Function.call,RegExp.prototype.exec),GR=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,HR=/\\(\\)?/g,QR=function(e){var r=vu(e,0,1),n=vu(e,-1);if(r==="%"&&n!=="%")throw new Ni("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ni("invalid intrinsic syntax, expected opening `%`");var o=[];return pv(e,GR,function(i,s,a,l){o[o.length]=a?pv(l,HR,"$1"):s||i}),o},qR=function(e,r){var n=e,o;if(mu(dv,n)&&(o=dv[n],n="%"+o[0]+"%"),mu(oi,n)){var i=oi[n];if(i===Co&&(i=UR(n)),typeof i>"u"&&!r)throw new ni("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ni("intrinsic "+e+" does not exist!")},Fr=function(e,r){if(typeof e!="string"||e.length===0)throw new ni("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ni('"allowMissing" argument must be a boolean');if(VR(/^%?[^%]*%?$/,e)===null)throw new Ni("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=QR(e),o=n.length>0?n[0]:"",i=qR("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],zR(n,WR([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=vu(f,0,1),v=vu(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new Ni("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",mu(oi,s))a=oi[s];else if(a!=null){if(!(f in a)){if(!r)throw new ni("base intrinsic for "+e+" exists, but the property is not available.");return}if(Bn&&p+1>=n.length){var S=Bn(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=mu(a,f),a=a[f];d&&!l&&(oi[s]=a)}}return a},KR=Fr,Pp=KR("%Object.defineProperty%",!0),Ip=function(){if(Pp)try{return Pp({},"a",{value:1}),!0}catch{return!1}return!1};Ip.hasArrayLengthDefineBug=function(){if(!Ip())return null;try{return Pp([],"length",{value:1}).length!==1}catch{return!0}};var Gi=Ip,YR=Ca,JR=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",XR=Object.prototype.toString,ZR=Array.prototype.concat,c1=Object.defineProperty,e2=function(t){return typeof t=="function"&&XR.call(t)==="[object Function]"},t2=Gi(),f1=c1&&t2,r2=function(t,e,r,n){e in t&&(!e2(n)||!n())||(f1?c1(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},d1=function(t,e){var r=arguments.length>2?arguments[2]:{},n=YR(e);JR&&(n=ZR.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)r2(t,n[o],e[n[o]],r[n[o]])};d1.supportsDescriptors=!!f1;var p1=d1,h1={exports:{}};(function(t){var e=Ny,r=Fr,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var f=i(e,o,arguments);if(s&&a){var y=s(f,"length");y.configurable&&a(f,"length",{value:1+l(0,d.length-(arguments.length-1))})}return f};var u=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u})(h1);var Nc=h1.exports,y1=Fr,g1=Nc,n2=g1(y1("String.prototype.indexOf")),nr=function(e,r){var n=y1(e,!!r);return typeof n=="function"&&n2(e,".prototype.")>-1?g1(n):n},o2=Ca,m1=Pc(),v1=nr,hv=Object,i2=v1("Array.prototype.push"),yv=v1("Object.prototype.propertyIsEnumerable"),s2=m1?Object.getOwnPropertySymbols:null,_1=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=hv(e);if(arguments.length===1)return n;for(var o=1;o<arguments.length;++o){var i=hv(arguments[o]),s=o2(i),a=m1&&(Object.getOwnPropertySymbols||s2);if(a)for(var l=a(i),u=0;u<l.length;++u){var p=l[u];yv(i,p)&&i2(s,p)}for(var d=0;d<s.length;++d){var f=s[d];if(yv(i,f)){var y=i[f];n[f]=y}}}return n},Nf=_1,a2=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var s in o)i+=s;return t!==i},l2=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},S1=function(){return!Object.assign||a2()||l2()?Nf:Object.assign},u2=p1,c2=S1,f2=function(){var e=c2();return u2(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},d2=p1,p2=Nc,h2=_1,x1=S1,y2=f2,g2=p2.apply(x1()),w1=function(e,r){return g2(Object,arguments)};d2(w1,{getPolyfill:x1,implementation:h2,shim:y2});var m2=w1,gv={foo:{}},v2=Object,kc=function(){return{__proto__:gv}.foo===gv.foo&&!({__proto__:null}instanceof v2)},_2="Function.prototype.bind called on incompatible ",S2=Object.prototype.toString,x2=Math.max,w2="[object Function]",mv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},E2=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},C2=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},A2=function(e){var r=this;if(typeof r!="function"||S2.apply(r)!==w2)throw new TypeError(_2+r);for(var n=E2(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,mv(n,arguments));return Object(p)===p?p:this}return r.apply(e,mv(n,arguments))},s=x2(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+C2(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},b2=A2,E1=Function.prototype.bind||b2,P2="Function.prototype.bind called on incompatible ",I2=Object.prototype.toString,N2=Math.max,k2="[object Function]",vv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},T2=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},R2=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},O2=function(e){var r=this;if(typeof r!="function"||I2.apply(r)!==k2)throw new TypeError(P2+r);for(var n=T2(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,vv(n,arguments));return Object(p)===p?p:this}return r.apply(e,vv(n,arguments))},s=N2(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+R2(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},j2=O2,$2=Function.prototype.bind||j2,D2=Function.prototype.call,F2=Object.prototype.hasOwnProperty,M2=$2,Tc=M2.call(D2,F2),J,ki=SyntaxError,C1=Function,ii=TypeError,kf=function(t){try{return C1('"use strict"; return ('+t+").constructor;")()}catch{}},Un=Object.getOwnPropertyDescriptor;if(Un)try{Un({},"")}catch{Un=null}var Tf=function(){throw new ii},L2=Un?function(){try{return arguments.callee,Tf}catch{try{return Un(arguments,"callee").get}catch{return Tf}}}():Tf,go=Dr(),B2=kc(),ze=Object.getPrototypeOf||(B2?function(t){return t.__proto__}:null),Ao={},U2=typeof Uint8Array>"u"||!ze?J:ze(Uint8Array),Wn={"%AggregateError%":typeof AggregateError>"u"?J:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?J:ArrayBuffer,"%ArrayIteratorPrototype%":go&&ze?ze([][Symbol.iterator]()):J,"%AsyncFromSyncIteratorPrototype%":J,"%AsyncFunction%":Ao,"%AsyncGenerator%":Ao,"%AsyncGeneratorFunction%":Ao,"%AsyncIteratorPrototype%":Ao,"%Atomics%":typeof Atomics>"u"?J:Atomics,"%BigInt%":typeof BigInt>"u"?J:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?J:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?J:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?J:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?J:Float32Array,"%Float64Array%":typeof Float64Array>"u"?J:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?J:FinalizationRegistry,"%Function%":C1,"%GeneratorFunction%":Ao,"%Int8Array%":typeof Int8Array>"u"?J:Int8Array,"%Int16Array%":typeof Int16Array>"u"?J:Int16Array,"%Int32Array%":typeof Int32Array>"u"?J:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":go&&ze?ze(ze([][Symbol.iterator]())):J,"%JSON%":typeof JSON=="object"?JSON:J,"%Map%":typeof Map>"u"?J:Map,"%MapIteratorPrototype%":typeof Map>"u"||!go||!ze?J:ze(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?J:Promise,"%Proxy%":typeof Proxy>"u"?J:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?J:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?J:Set,"%SetIteratorPrototype%":typeof Set>"u"||!go||!ze?J:ze(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?J:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":go&&ze?ze(""[Symbol.iterator]()):J,"%Symbol%":go?Symbol:J,"%SyntaxError%":ki,"%ThrowTypeError%":L2,"%TypedArray%":U2,"%TypeError%":ii,"%Uint8Array%":typeof Uint8Array>"u"?J:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?J:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?J:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?J:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?J:WeakMap,"%WeakRef%":typeof WeakRef>"u"?J:WeakRef,"%WeakSet%":typeof WeakSet>"u"?J:WeakSet};if(ze)try{null.error}catch(t){var W2=ze(ze(t));Wn["%Error.prototype%"]=W2}var z2=function t(e){var r;if(e==="%AsyncFunction%")r=kf("async function () {}");else if(e==="%GeneratorFunction%")r=kf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=kf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&ze&&(r=ze(o.prototype))}return Wn[e]=r,r},_v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ba=E1,_u=Tc,V2=ba.call(Function.call,Array.prototype.concat),G2=ba.call(Function.apply,Array.prototype.splice),Sv=ba.call(Function.call,String.prototype.replace),Su=ba.call(Function.call,String.prototype.slice),H2=ba.call(Function.call,RegExp.prototype.exec),Q2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q2=/\\(\\)?/g,K2=function(e){var r=Su(e,0,1),n=Su(e,-1);if(r==="%"&&n!=="%")throw new ki("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ki("invalid intrinsic syntax, expected opening `%`");var o=[];return Sv(e,Q2,function(i,s,a,l){o[o.length]=a?Sv(l,q2,"$1"):s||i}),o},Y2=function(e,r){var n=e,o;if(_u(_v,n)&&(o=_v[n],n="%"+o[0]+"%"),_u(Wn,n)){var i=Wn[n];if(i===Ao&&(i=z2(n)),typeof i>"u"&&!r)throw new ii("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new ki("intrinsic "+e+" does not exist!")},Rc=function(e,r){if(typeof e!="string"||e.length===0)throw new ii("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ii('"allowMissing" argument must be a boolean');if(H2(/^%?[^%]*%?$/,e)===null)throw new ki("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=K2(e),o=n.length>0?n[0]:"",i=Y2("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],G2(n,V2([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=Su(f,0,1),v=Su(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new ki("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",_u(Wn,s))a=Wn[s];else if(a!=null){if(!(f in a)){if(!r)throw new ii("base intrinsic for "+e+" exists, but the property is not available.");return}if(Un&&p+1>=n.length){var S=Un(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=_u(a,f),a=a[f];d&&!l&&(Wn[s]=a)}}return a},A1={exports:{}},J2="Function.prototype.bind called on incompatible ",X2=Object.prototype.toString,Z2=Math.max,eO="[object Function]",xv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},tO=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},rO=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},nO=function(e){var r=this;if(typeof r!="function"||X2.apply(r)!==eO)throw new TypeError(J2+r);for(var n=tO(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,xv(n,arguments));return Object(p)===p?p:this}return r.apply(e,xv(n,arguments))},s=Z2(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+rO(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},oO=nO,iO=Function.prototype.bind||oO,X,Ti=SyntaxError,b1=Function,si=TypeError,Rf=function(t){try{return b1('"use strict"; return ('+t+").constructor;")()}catch{}},zn=Object.getOwnPropertyDescriptor;if(zn)try{zn({},"")}catch{zn=null}var Of=function(){throw new si},sO=zn?function(){try{return arguments.callee,Of}catch{try{return zn(arguments,"callee").get}catch{return Of}}}():Of,mo=Dr(),aO=kc(),Ve=Object.getPrototypeOf||(aO?function(t){return t.__proto__}:null),bo={},lO=typeof Uint8Array>"u"||!Ve?X:Ve(Uint8Array),Vn={"%AggregateError%":typeof AggregateError>"u"?X:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?X:ArrayBuffer,"%ArrayIteratorPrototype%":mo&&Ve?Ve([][Symbol.iterator]()):X,"%AsyncFromSyncIteratorPrototype%":X,"%AsyncFunction%":bo,"%AsyncGenerator%":bo,"%AsyncGeneratorFunction%":bo,"%AsyncIteratorPrototype%":bo,"%Atomics%":typeof Atomics>"u"?X:Atomics,"%BigInt%":typeof BigInt>"u"?X:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?X:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?X:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?X:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?X:Float32Array,"%Float64Array%":typeof Float64Array>"u"?X:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?X:FinalizationRegistry,"%Function%":b1,"%GeneratorFunction%":bo,"%Int8Array%":typeof Int8Array>"u"?X:Int8Array,"%Int16Array%":typeof Int16Array>"u"?X:Int16Array,"%Int32Array%":typeof Int32Array>"u"?X:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":mo&&Ve?Ve(Ve([][Symbol.iterator]())):X,"%JSON%":typeof JSON=="object"?JSON:X,"%Map%":typeof Map>"u"?X:Map,"%MapIteratorPrototype%":typeof Map>"u"||!mo||!Ve?X:Ve(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?X:Promise,"%Proxy%":typeof Proxy>"u"?X:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?X:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?X:Set,"%SetIteratorPrototype%":typeof Set>"u"||!mo||!Ve?X:Ve(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?X:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":mo&&Ve?Ve(""[Symbol.iterator]()):X,"%Symbol%":mo?Symbol:X,"%SyntaxError%":Ti,"%ThrowTypeError%":sO,"%TypedArray%":lO,"%TypeError%":si,"%Uint8Array%":typeof Uint8Array>"u"?X:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?X:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?X:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?X:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?X:WeakMap,"%WeakRef%":typeof WeakRef>"u"?X:WeakRef,"%WeakSet%":typeof WeakSet>"u"?X:WeakSet};if(Ve)try{null.error}catch(t){var uO=Ve(Ve(t));Vn["%Error.prototype%"]=uO}var cO=function t(e){var r;if(e==="%AsyncFunction%")r=Rf("async function () {}");else if(e==="%GeneratorFunction%")r=Rf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Rf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&Ve&&(r=Ve(o.prototype))}return Vn[e]=r,r},wv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pa=iO,xu=Tc,fO=Pa.call(Function.call,Array.prototype.concat),dO=Pa.call(Function.apply,Array.prototype.splice),Ev=Pa.call(Function.call,String.prototype.replace),wu=Pa.call(Function.call,String.prototype.slice),pO=Pa.call(Function.call,RegExp.prototype.exec),hO=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,yO=/\\(\\)?/g,gO=function(e){var r=wu(e,0,1),n=wu(e,-1);if(r==="%"&&n!=="%")throw new Ti("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ti("invalid intrinsic syntax, expected opening `%`");var o=[];return Ev(e,hO,function(i,s,a,l){o[o.length]=a?Ev(l,yO,"$1"):s||i}),o},mO=function(e,r){var n=e,o;if(xu(wv,n)&&(o=wv[n],n="%"+o[0]+"%"),xu(Vn,n)){var i=Vn[n];if(i===bo&&(i=cO(n)),typeof i>"u"&&!r)throw new si("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ti("intrinsic "+e+" does not exist!")},vO=function(e,r){if(typeof e!="string"||e.length===0)throw new si("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new si('"allowMissing" argument must be a boolean');if(pO(/^%?[^%]*%?$/,e)===null)throw new Ti("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=gO(e),o=n.length>0?n[0]:"",i=mO("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],dO(n,fO([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=wu(f,0,1),v=wu(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new Ti("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",xu(Vn,s))a=Vn[s];else if(a!=null){if(!(f in a)){if(!r)throw new si("base intrinsic for "+e+" exists, but the property is not available.");return}if(zn&&p+1>=n.length){var S=zn(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=xu(a,f),a=a[f];d&&!l&&(Vn[s]=a)}}return a},_O="Function.prototype.bind called on incompatible ",SO=Object.prototype.toString,xO=Math.max,wO="[object Function]",Cv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},EO=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},CO=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},AO=function(e){var r=this;if(typeof r!="function"||SO.apply(r)!==wO)throw new TypeError(_O+r);for(var n=EO(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,Cv(n,arguments));return Object(p)===p?p:this}return r.apply(e,Cv(n,arguments))},s=xO(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+CO(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},bO=AO,PO=Function.prototype.bind||bO,Z,Ri=SyntaxError,P1=Function,ai=TypeError,jf=function(t){try{return P1('"use strict"; return ('+t+").constructor;")()}catch{}},Gn=Object.getOwnPropertyDescriptor;if(Gn)try{Gn({},"")}catch{Gn=null}var $f=function(){throw new ai},IO=Gn?function(){try{return arguments.callee,$f}catch{try{return Gn(arguments,"callee").get}catch{return $f}}}():$f,vo=Dr(),NO=kc(),Ge=Object.getPrototypeOf||(NO?function(t){return t.__proto__}:null),Po={},kO=typeof Uint8Array>"u"||!Ge?Z:Ge(Uint8Array),Hn={"%AggregateError%":typeof AggregateError>"u"?Z:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Z:ArrayBuffer,"%ArrayIteratorPrototype%":vo&&Ge?Ge([][Symbol.iterator]()):Z,"%AsyncFromSyncIteratorPrototype%":Z,"%AsyncFunction%":Po,"%AsyncGenerator%":Po,"%AsyncGeneratorFunction%":Po,"%AsyncIteratorPrototype%":Po,"%Atomics%":typeof Atomics>"u"?Z:Atomics,"%BigInt%":typeof BigInt>"u"?Z:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Z:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Z:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Z:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Z:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Z:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Z:FinalizationRegistry,"%Function%":P1,"%GeneratorFunction%":Po,"%Int8Array%":typeof Int8Array>"u"?Z:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Z:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Z:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":vo&&Ge?Ge(Ge([][Symbol.iterator]())):Z,"%JSON%":typeof JSON=="object"?JSON:Z,"%Map%":typeof Map>"u"?Z:Map,"%MapIteratorPrototype%":typeof Map>"u"||!vo||!Ge?Z:Ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Z:Promise,"%Proxy%":typeof Proxy>"u"?Z:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Z:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Z:Set,"%SetIteratorPrototype%":typeof Set>"u"||!vo||!Ge?Z:Ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Z:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":vo&&Ge?Ge(""[Symbol.iterator]()):Z,"%Symbol%":vo?Symbol:Z,"%SyntaxError%":Ri,"%ThrowTypeError%":IO,"%TypedArray%":kO,"%TypeError%":ai,"%Uint8Array%":typeof Uint8Array>"u"?Z:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Z:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Z:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Z:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Z:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Z:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Z:WeakSet};if(Ge)try{null.error}catch(t){var TO=Ge(Ge(t));Hn["%Error.prototype%"]=TO}var RO=function t(e){var r;if(e==="%AsyncFunction%")r=jf("async function () {}");else if(e==="%GeneratorFunction%")r=jf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=jf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&Ge&&(r=Ge(o.prototype))}return Hn[e]=r,r},Av={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ia=PO,Eu=Tc,OO=Ia.call(Function.call,Array.prototype.concat),jO=Ia.call(Function.apply,Array.prototype.splice),bv=Ia.call(Function.call,String.prototype.replace),Cu=Ia.call(Function.call,String.prototype.slice),$O=Ia.call(Function.call,RegExp.prototype.exec),DO=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,FO=/\\(\\)?/g,MO=function(e){var r=Cu(e,0,1),n=Cu(e,-1);if(r==="%"&&n!=="%")throw new Ri("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ri("invalid intrinsic syntax, expected opening `%`");var o=[];return bv(e,DO,function(i,s,a,l){o[o.length]=a?bv(l,FO,"$1"):s||i}),o},LO=function(e,r){var n=e,o;if(Eu(Av,n)&&(o=Av[n],n="%"+o[0]+"%"),Eu(Hn,n)){var i=Hn[n];if(i===Po&&(i=RO(n)),typeof i>"u"&&!r)throw new ai("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ri("intrinsic "+e+" does not exist!")},BO=function(e,r){if(typeof e!="string"||e.length===0)throw new ai("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ai('"allowMissing" argument must be a boolean');if($O(/^%?[^%]*%?$/,e)===null)throw new Ri("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=MO(e),o=n.length>0?n[0]:"",i=LO("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],jO(n,OO([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=Cu(f,0,1),v=Cu(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new Ri("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Eu(Hn,s))a=Hn[s];else if(a!=null){if(!(f in a)){if(!r)throw new ai("base intrinsic for "+e+" exists, but the property is not available.");return}if(Gn&&p+1>=n.length){var S=Gn(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=Eu(a,f),a=a[f];d&&!l&&(Hn[s]=a)}}return a},UO=Fr,_l=UO("%Object.getOwnPropertyDescriptor%",!0);if(_l)try{_l([],"length")}catch{_l=null}var Oc=_l,WO=Gi(),ky=BO,ks=WO&&ky("%Object.defineProperty%",!0);if(ks)try{ks({},"a",{value:1})}catch{ks=!1}var zO=ky("%SyntaxError%"),_o=ky("%TypeError%"),Pv=Oc,Ty=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new _o("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new _o("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _o("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Pv&&Pv(e,r);if(ks)ks(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:o===null&&l?l.enumerable:!o,value:n,writable:i===null&&l?l.writable:!i});else if(a||!o&&!i&&!s)e[r]=n;else throw new zO("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},I1=vO,Iv=Ty,VO=Gi(),Nv=Oc,kv=I1("%TypeError%"),GO=I1("%Math.floor%"),N1=function(e,r){if(typeof e!="function")throw new kv("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||GO(r)!==r)throw new kv("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],o=!0,i=!0;if("length"in e&&Nv){var s=Nv(e,"length");s&&!s.configurable&&(o=!1),s&&!s.writable&&(i=!1)}return(o||i||!n)&&(VO?Iv(e,"length",r,!0,!0):Iv(e,"length",r)),e};(function(t){var e=E1,r=Rc,n=N1,o=r("%TypeError%"),i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,i),l=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(f){if(typeof f!="function")throw new o("a function is required");var y=a(e,s,arguments);return n(y,1+u(0,f.length-(arguments.length-1)),!0)};var p=function(){return a(e,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p})(A1);var HO=A1.exports,k1=Rc,T1=HO,QO=T1(k1("String.prototype.indexOf")),qO=function(e,r){var n=k1(e,!!r);return typeof n=="function"&&QO(e,".prototype.")>-1?T1(n):n},KO=Ca,YO=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",JO=Object.prototype.toString,XO=Array.prototype.concat,Tv=Ty,ZO=function(t){return typeof t=="function"&&JO.call(t)==="[object Function]"},R1=Gi(),ej=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!ZO(n)||!n())return}R1?Tv(t,e,r,!0):Tv(t,e,r)},O1=function(t,e){var r=arguments.length>2?arguments[2]:{},n=KO(e);YO&&(n=XO.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)ej(t,n[o],e[n[o]],r[n[o]])};O1.supportsDescriptors=!!R1;var Ry=O1,j1={exports:{}},tj="Function.prototype.bind called on incompatible ",Df=Array.prototype.slice,rj=Object.prototype.toString,nj="[object Function]",oj=function(e){var r=this;if(typeof r!="function"||rj.call(r)!==nj)throw new TypeError(tj+r);for(var n=Df.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(Df.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(Df.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},ij=oj,$1=Function.prototype.bind||ij,ne,Oi=SyntaxError,D1=Function,li=TypeError,Ff=function(t){try{return D1('"use strict"; return ('+t+").constructor;")()}catch{}},Qn=Object.getOwnPropertyDescriptor;if(Qn)try{Qn({},"")}catch{Qn=null}var Mf=function(){throw new li},sj=Qn?function(){try{return arguments.callee,Mf}catch{try{return Qn(arguments,"callee").get}catch{return Mf}}}():Mf,So=Dr(),zr=Object.getPrototypeOf||function(t){return t.__proto__},Io={},aj=typeof Uint8Array>"u"?ne:zr(Uint8Array),ui={"%AggregateError%":typeof AggregateError>"u"?ne:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ne:ArrayBuffer,"%ArrayIteratorPrototype%":So?zr([][Symbol.iterator]()):ne,"%AsyncFromSyncIteratorPrototype%":ne,"%AsyncFunction%":Io,"%AsyncGenerator%":Io,"%AsyncGeneratorFunction%":Io,"%AsyncIteratorPrototype%":Io,"%Atomics%":typeof Atomics>"u"?ne:Atomics,"%BigInt%":typeof BigInt>"u"?ne:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ne:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ne:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ne:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ne:FinalizationRegistry,"%Function%":D1,"%GeneratorFunction%":Io,"%Int8Array%":typeof Int8Array>"u"?ne:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ne:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ne:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":So?zr(zr([][Symbol.iterator]())):ne,"%JSON%":typeof JSON=="object"?JSON:ne,"%Map%":typeof Map>"u"?ne:Map,"%MapIteratorPrototype%":typeof Map>"u"||!So?ne:zr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ne:Promise,"%Proxy%":typeof Proxy>"u"?ne:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ne:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ne:Set,"%SetIteratorPrototype%":typeof Set>"u"||!So?ne:zr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ne:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":So?zr(""[Symbol.iterator]()):ne,"%Symbol%":So?Symbol:ne,"%SyntaxError%":Oi,"%ThrowTypeError%":sj,"%TypedArray%":aj,"%TypeError%":li,"%Uint8Array%":typeof Uint8Array>"u"?ne:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ne:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ne:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ne:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ne:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ne:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ne:WeakSet},lj=function t(e){var r;if(e==="%AsyncFunction%")r=Ff("async function () {}");else if(e==="%GeneratorFunction%")r=Ff("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ff("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=zr(o.prototype))}return ui[e]=r,r},Rv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Na=$1,Au=Ic,uj=Na.call(Function.call,Array.prototype.concat),cj=Na.call(Function.apply,Array.prototype.splice),Ov=Na.call(Function.call,String.prototype.replace),bu=Na.call(Function.call,String.prototype.slice),fj=Na.call(Function.call,RegExp.prototype.exec),dj=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pj=/\\(\\)?/g,hj=function(e){var r=bu(e,0,1),n=bu(e,-1);if(r==="%"&&n!=="%")throw new Oi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Oi("invalid intrinsic syntax, expected opening `%`");var o=[];return Ov(e,dj,function(i,s,a,l){o[o.length]=a?Ov(l,pj,"$1"):s||i}),o},yj=function(e,r){var n=e,o;if(Au(Rv,n)&&(o=Rv[n],n="%"+o[0]+"%"),Au(ui,n)){var i=ui[n];if(i===Io&&(i=lj(n)),typeof i>"u"&&!r)throw new li("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Oi("intrinsic "+e+" does not exist!")},gj=function(e,r){if(typeof e!="string"||e.length===0)throw new li("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new li('"allowMissing" argument must be a boolean');if(fj(/^%?[^%]*%?$/,e)===null)throw new Oi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=hj(e),o=n.length>0?n[0]:"",i=yj("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],cj(n,uj([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=bu(f,0,1),v=bu(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new Oi("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Au(ui,s))a=ui[s];else if(a!=null){if(!(f in a)){if(!r)throw new li("base intrinsic for "+e+" exists, but the property is not available.");return}if(Qn&&p+1>=n.length){var S=Qn(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=Au(a,f),a=a[f];d&&!l&&(ui[s]=a)}}return a};(function(t){var e=$1,r=gj,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var f=i(e,o,arguments);if(s&&a){var y=s(f,"length");y.configurable&&a(f,"length",{value:1+l(0,d.length-(arguments.length-1))})}return f};var u=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u})(j1);var mj=j1.exports,aa=function(){return typeof(function(){}).name=="string"},Ts=Object.getOwnPropertyDescriptor;if(Ts)try{Ts([],"length")}catch{Ts=null}aa.functionsHaveConfigurableNames=function(){if(!aa()||!Ts)return!1;var e=Ts(function(){},"name");return!!e&&!!e.configurable};var vj=Function.prototype.bind;aa.boundFunctionsHaveNames=function(){return aa()&&typeof vj=="function"&&(function(){}).bind().name!==""};var _j=aa,jv=Ty,Sj=Gi(),xj=_j.functionsHaveConfigurableNames(),wj=TypeError,Ej=function(e,r){if(typeof e!="function")throw new wj("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||xj)&&(Sj?jv(e,"name",r,!0,!0):jv(e,"name",r)),e},Cj=Ej,Aj=Object,bj=TypeError,F1=Cj(function(){if(this!=null&&this!==Aj(this))throw new bj("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),Pj=F1,Ij=Ry.supportsDescriptors,Nj=Object.getOwnPropertyDescriptor,M1=function(){if(Ij&&/a/mig.flags==="gim"){var e=Nj(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return Pj},kj=Ry.supportsDescriptors,Tj=M1,Rj=Object.getOwnPropertyDescriptor,Oj=Object.defineProperty,jj=TypeError,$v=Object.getPrototypeOf,$j=/a/,Dj=function(){if(!kj||!$v)throw new jj("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=Tj(),r=$v($j),n=Rj(r,"flags");return(!n||n.get!==e)&&Oj(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},Fj=Ry,Mj=mj,Lj=F1,L1=M1,Bj=Dj,B1=Mj(L1());Fj(B1,{getPolyfill:L1,implementation:Lj,shim:Bj});var Uj=B1,Sl={exports:{}},Wj=Pc,En=function(){return Wj()&&!!Symbol.toStringTag},zj=En(),Vj=nr,Np=Vj("Object.prototype.toString"),jc=function(e){return zj&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Np(e)==="[object Arguments]"},U1=function(e){return jc(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Np(e)!=="[object Array]"&&Np(e.callee)==="[object Function]"},Gj=function(){return jc(arguments)}();jc.isLegacyArguments=U1;var W1=Gj?jc:U1;const Hj={},Qj=Object.freeze(Object.defineProperty({__proto__:null,default:Hj},Symbol.toStringTag,{value:"Module"})),qj=vC(Qj);var Oy=typeof Map=="function"&&Map.prototype,Lf=Object.getOwnPropertyDescriptor&&Oy?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Pu=Oy&&Lf&&typeof Lf.get=="function"?Lf.get:null,Kj=Oy&&Map.prototype.forEach,jy=typeof Set=="function"&&Set.prototype,Bf=Object.getOwnPropertyDescriptor&&jy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Iu=jy&&Bf&&typeof Bf.get=="function"?Bf.get:null,Yj=jy&&Set.prototype.forEach,Jj=typeof WeakMap=="function"&&WeakMap.prototype,Rs=Jj?WeakMap.prototype.has:null,Xj=typeof WeakSet=="function"&&WeakSet.prototype,Os=Xj?WeakSet.prototype.has:null,Zj=typeof WeakRef=="function"&&WeakRef.prototype,Dv=Zj?WeakRef.prototype.deref:null,e$=Boolean.prototype.valueOf,t$=Object.prototype.toString,r$=Function.prototype.toString,n$=String.prototype.match,$y=String.prototype.slice,Jr=String.prototype.replace,o$=String.prototype.toUpperCase,Fv=String.prototype.toLowerCase,z1=RegExp.prototype.test,Mv=Array.prototype.concat,ar=Array.prototype.join,i$=Array.prototype.slice,Lv=Math.floor,kp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Uf=Object.getOwnPropertySymbols,Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ji=typeof Symbol=="function"&&typeof Symbol.iterator=="object",lt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ji||"symbol")?Symbol.toStringTag:null,V1=Object.prototype.propertyIsEnumerable,Bv=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Uv(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||z1.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Lv(-t):Lv(t);if(n!==t){var o=String(n),i=$y.call(e,o.length+1);return Jr.call(o,r,"$&_")+"."+Jr.call(Jr.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Jr.call(e,r,"$&_")}var Rp=qj,Wv=Rp.custom,zv=H1(Wv)?Wv:null,s$=function t(e,r,n,o){var i=r||{};if(Vr(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Vr(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Vr(i,"customInspect")?i.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Vr(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Vr(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return q1(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Uv(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?Uv(e,u):u}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return Op(e)?"[Array]":"[Object]";var d=C$(i,n);if(typeof o>"u")o=[];else if(Q1(o,e)>=0)return"[Circular]";function f(U,ae,je){if(ae&&(o=i$.call(o),o.push(ae)),je){var Re={depth:i.depth};return Vr(i,"quoteStyle")&&(Re.quoteStyle=i.quoteStyle),t(U,Re,n+1,o)}return t(U,i,n+1,o)}if(typeof e=="function"&&!Vv(e)){var y=y$(e),v=tl(e,f);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(v.length>0?" { "+ar.call(v,", ")+" }":"")}if(H1(e)){var S=ji?Jr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Tp.call(e);return typeof e=="object"&&!ji?as(S):S}if(x$(e)){for(var P="<"+Fv.call(String(e.nodeName)),m=e.attributes||[],h=0;h<m.length;h++)P+=" "+m[h].name+"="+G1(a$(m[h].value),"double",i);return P+=">",e.childNodes&&e.childNodes.length&&(P+="..."),P+="</"+Fv.call(String(e.nodeName))+">",P}if(Op(e)){if(e.length===0)return"[]";var g=tl(e,f);return d&&!E$(g)?"["+jp(g,d)+"]":"[ "+ar.call(g,", ")+" ]"}if(u$(e)){var E=tl(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!V1.call(e,"cause")?"{ ["+String(e)+"] "+ar.call(Mv.call("[cause]: "+f(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ar.call(E,", ")+" }"}if(typeof e=="object"&&s){if(zv&&typeof e[zv]=="function"&&Rp)return Rp(e,{depth:p-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(g$(e)){var A=[];return Kj.call(e,function(U,ae){A.push(f(ae,e,!0)+" => "+f(U,e))}),Gv("Map",Pu.call(e),A,d)}if(_$(e)){var b=[];return Yj.call(e,function(U){b.push(f(U,e))}),Gv("Set",Iu.call(e),b,d)}if(m$(e))return Wf("WeakMap");if(S$(e))return Wf("WeakSet");if(v$(e))return Wf("WeakRef");if(f$(e))return as(f(Number(e)));if(p$(e))return as(f(kp.call(e)));if(d$(e))return as(e$.call(e));if(c$(e))return as(f(String(e)));if(!l$(e)&&!Vv(e)){var T=tl(e,f),O=Bv?Bv(e)===Object.prototype:e instanceof Object||e.constructor===Object,Q=e instanceof Object?"":"null prototype",V=!O&&lt&&Object(e)===e&&lt in e?$y.call(Cn(e),8,-1):Q?"Object":"",ve=O||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",H=ve+(V||Q?"["+ar.call(Mv.call([],V||[],Q||[]),": ")+"] ":"");return T.length===0?H+"{}":d?H+"{"+jp(T,d)+"}":H+"{ "+ar.call(T,", ")+" }"}return String(e)};function G1(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function a$(t){return Jr.call(String(t),/"/g,"&quot;")}function Op(t){return Cn(t)==="[object Array]"&&(!lt||!(typeof t=="object"&&lt in t))}function l$(t){return Cn(t)==="[object Date]"&&(!lt||!(typeof t=="object"&&lt in t))}function Vv(t){return Cn(t)==="[object RegExp]"&&(!lt||!(typeof t=="object"&&lt in t))}function u$(t){return Cn(t)==="[object Error]"&&(!lt||!(typeof t=="object"&&lt in t))}function c$(t){return Cn(t)==="[object String]"&&(!lt||!(typeof t=="object"&&lt in t))}function f$(t){return Cn(t)==="[object Number]"&&(!lt||!(typeof t=="object"&&lt in t))}function d$(t){return Cn(t)==="[object Boolean]"&&(!lt||!(typeof t=="object"&&lt in t))}function H1(t){if(ji)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Tp)return!1;try{return Tp.call(t),!0}catch{}return!1}function p$(t){if(!t||typeof t!="object"||!kp)return!1;try{return kp.call(t),!0}catch{}return!1}var h$=Object.prototype.hasOwnProperty||function(t){return t in this};function Vr(t,e){return h$.call(t,e)}function Cn(t){return t$.call(t)}function y$(t){if(t.name)return t.name;var e=n$.call(r$.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Q1(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function g$(t){if(!Pu||!t||typeof t!="object")return!1;try{Pu.call(t);try{Iu.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function m$(t){if(!Rs||!t||typeof t!="object")return!1;try{Rs.call(t,Rs);try{Os.call(t,Os)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function v$(t){if(!Dv||!t||typeof t!="object")return!1;try{return Dv.call(t),!0}catch{}return!1}function _$(t){if(!Iu||!t||typeof t!="object")return!1;try{Iu.call(t);try{Pu.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function S$(t){if(!Os||!t||typeof t!="object")return!1;try{Os.call(t,Os);try{Rs.call(t,Rs)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function x$(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function q1(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return q1($y.call(t,0,e.maxStringLength),e)+n}var o=Jr.call(Jr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,w$);return G1(o,"single",e)}function w$(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+o$.call(e.toString(16))}function as(t){return"Object("+t+")"}function Wf(t){return t+" { ? }"}function Gv(t,e,r,n){var o=n?jp(r,n):ar.call(r,", ");return t+" ("+e+") {"+o+"}"}function E$(t){for(var e=0;e<t.length;e++)if(Q1(t[e],`
`)>=0)return!1;return!0}function C$(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=ar.call(Array(t.indent+1)," ");else return null;return{base:r,prev:ar.call(Array(e+1),r)}}function jp(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+ar.call(t,","+r)+`
`+e.prev}function tl(t,e){var r=Op(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Vr(t,o)?e(t[o],t):""}var i=typeof Uf=="function"?Uf(t):[],s;if(ji){s={};for(var a=0;a<i.length;a++)s["$"+i[a]]=i[a]}for(var l in t)Vr(t,l)&&(r&&String(Number(l))===l&&l<t.length||ji&&s["$"+l]instanceof Symbol||(z1.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof Uf=="function")for(var u=0;u<i.length;u++)V1.call(t,i[u])&&n.push("["+e(i[u])+"]: "+e(t[i[u]],t));return n}var Dy=Fr,Hi=nr,A$=s$,b$=Dy("%TypeError%"),rl=Dy("%WeakMap%",!0),nl=Dy("%Map%",!0),P$=Hi("WeakMap.prototype.get",!0),I$=Hi("WeakMap.prototype.set",!0),N$=Hi("WeakMap.prototype.has",!0),k$=Hi("Map.prototype.get",!0),T$=Hi("Map.prototype.set",!0),R$=Hi("Map.prototype.has",!0),Fy=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},O$=function(t,e){var r=Fy(t,e);return r&&r.value},j$=function(t,e,r){var n=Fy(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},$$=function(t,e){return!!Fy(t,e)},K1=function(){var e,r,n,o={assert:function(i){if(!o.has(i))throw new b$("Side channel does not contain "+A$(i))},get:function(i){if(rl&&i&&(typeof i=="object"||typeof i=="function")){if(e)return P$(e,i)}else if(nl){if(r)return k$(r,i)}else if(n)return O$(n,i)},has:function(i){if(rl&&i&&(typeof i=="object"||typeof i=="function")){if(e)return N$(e,i)}else if(nl){if(r)return R$(r,i)}else if(n)return $$(n,i);return!1},set:function(i,s){rl&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new rl),I$(e,i,s)):nl?(r||(r=new nl),T$(r,i,s)):(n||(n={key:{},next:null}),j$(n,i,s))}};return o},D$=Fr,F$=Ic,ls=K1(),vr=D$("%TypeError%"),My={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new vr("`O` is not an object");if(typeof e!="string")throw new vr("`slot` must be a string");if(ls.assert(t),!My.has(t,e))throw new vr("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new vr("`O` is not an object");if(typeof e!="string")throw new vr("`slot` must be a string");var r=ls.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new vr("`O` is not an object");if(typeof e!="string")throw new vr("`slot` must be a string");var r=ls.get(t);return!!r&&F$(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new vr("`O` is not an object");if(typeof e!="string")throw new vr("`slot` must be a string");var n=ls.get(t);n||(n={},ls.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(My);var M$=My,us=M$,L$=SyntaxError,Hv=typeof StopIteration=="object"?StopIteration:null,B$=function(e){if(!Hv)throw new L$("this environment lacks StopIteration");us.set(e,"[[Done]]",!1);var r={next:function(){var o=us.get(this,"[[Iterator]]"),i=us.get(o,"[[Done]]");try{return{done:i,value:i?void 0:o.next()}}catch(s){if(us.set(o,"[[Done]]",!0),s!==Hv)throw s;return{done:!0,value:void 0}}}};return us.set(r,"[[Iterator]]",e),r},U$={}.toString,Y1=Array.isArray||function(t){return U$.call(t)=="[object Array]"},W$=String.prototype.valueOf,z$=function(e){try{return W$.call(e),!0}catch{return!1}},V$=Object.prototype.toString,G$="[object String]",H$=En(),J1=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:H$?z$(e):V$.call(e)===G$},Ly=typeof Map=="function"&&Map.prototype?Map:null,Q$=typeof Set=="function"&&Set.prototype?Set:null,Nu;Ly||(Nu=function(e){return!1});var X1=Ly?Map.prototype.has:null,Qv=Q$?Set.prototype.has:null;!Nu&&!X1&&(Nu=function(e){return!1});var Z1=Nu||function(e){if(!e||typeof e!="object")return!1;try{if(X1.call(e),Qv)try{Qv.call(e)}catch{return!0}return e instanceof Ly}catch{}return!1},q$=typeof Map=="function"&&Map.prototype?Map:null,By=typeof Set=="function"&&Set.prototype?Set:null,ku;By||(ku=function(e){return!1});var qv=q$?Map.prototype.has:null,eE=By?Set.prototype.has:null;!ku&&!eE&&(ku=function(e){return!1});var tE=ku||function(e){if(!e||typeof e!="object")return!1;try{if(eE.call(e),qv)try{qv.call(e)}catch{return!0}return e instanceof By}catch{}return!1},Kv=W1,Yv=B$;if(Dr()||Pc()){var zf=Symbol.iterator;Sl.exports=function(e){if(e!=null&&typeof e[zf]<"u")return e[zf]();if(Kv(e))return Array.prototype[zf].call(e)}}else{var K$=Y1,Y$=J1,Jv=Fr,J$=Jv("%Map%",!0),X$=Jv("%Set%",!0),zt=nr,Xv=zt("Array.prototype.push"),Zv=zt("String.prototype.charCodeAt"),Z$=zt("String.prototype.slice"),eD=function(e,r){var n=e.length;if(r+1>=n)return r+1;var o=Zv(e,r);if(o<55296||o>56319)return r+1;var i=Zv(e,r+1);return i<56320||i>57343?r+1:r+2},Vf=function(e){var r=0;return{next:function(){var o=r>=e.length,i;return o||(i=e[r],r+=1),{done:o,value:i}}}},e_=function(e,r){if(K$(e)||Kv(e))return Vf(e);if(Y$(e)){var n=0;return{next:function(){var i=eD(e,n),s=Z$(e,n,i);return n=i,{done:i>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!J$&&!X$)Sl.exports=function(e){if(e!=null)return e_(e,!0)};else{var tD=Z1,rD=tE,t_=zt("Map.prototype.forEach",!0),r_=zt("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var n_=zt("Map.prototype.iterator",!0),o_=zt("Set.prototype.iterator",!0);var i_=zt("Map.prototype.@@iterator",!0)||zt("Map.prototype._es6-shim iterator_",!0),s_=zt("Set.prototype.@@iterator",!0)||zt("Set.prototype._es6-shim iterator_",!0),nD=function(e){if(tD(e)){if(n_)return Yv(n_(e));if(i_)return i_(e);if(t_){var r=[];return t_(e,function(o,i){Xv(r,[i,o])}),Vf(r)}}if(rD(e)){if(o_)return Yv(o_(e));if(s_)return s_(e);if(r_){var n=[];return r_(e,function(o){Xv(n,o)}),Vf(n)}}};Sl.exports=function(e){return nD(e)||e_(e)}}}var oD=Sl.exports,iD=Ca,sD=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",aD=Object.prototype.toString,lD=Array.prototype.concat,rE=Object.defineProperty,uD=function(t){return typeof t=="function"&&aD.call(t)==="[object Function]"},cD=Gi(),nE=rE&&cD,fD=function(t,e,r,n){e in t&&(!uD(n)||!n())||(nE?rE(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},oE=function(t,e){var r=arguments.length>2?arguments[2]:{},n=iD(e);sD&&(n=lD.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)fD(t,n[o],e[n[o]],r[n[o]])};oE.supportsDescriptors=!!nE;var iE=oE,a_=function(t){return t!==t},sE=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||a_(e)&&a_(r))},dD=sE,aE=function(){return typeof Object.is=="function"?Object.is:dD},pD=aE,hD=iE,yD=function(){var e=pD();return hD(Object,{is:e},{is:function(){return Object.is!==e}}),e},gD=iE,mD=Nc,vD=sE,lE=aE,_D=yD,uE=mD(lE(),Object);gD(uE,{getPolyfill:lE,implementation:vD,shim:_D});var SD=uE,cE={exports:{}},xD="Function.prototype.bind called on incompatible ",Gf=Array.prototype.slice,wD=Object.prototype.toString,ED="[object Function]",CD=function(e){var r=this;if(typeof r!="function"||wD.call(r)!==ED)throw new TypeError(xD+r);for(var n=Gf.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(Gf.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(Gf.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},AD=CD,fE=Function.prototype.bind||AD,oe,$i=SyntaxError,dE=Function,ci=TypeError,Hf=function(t){try{return dE('"use strict"; return ('+t+").constructor;")()}catch{}},qn=Object.getOwnPropertyDescriptor;if(qn)try{qn({},"")}catch{qn=null}var Qf=function(){throw new ci},bD=qn?function(){try{return arguments.callee,Qf}catch{try{return qn(arguments,"callee").get}catch{return Qf}}}():Qf,xo=Dr(),Gr=Object.getPrototypeOf||function(t){return t.__proto__},No={},PD=typeof Uint8Array>"u"?oe:Gr(Uint8Array),fi={"%AggregateError%":typeof AggregateError>"u"?oe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?oe:ArrayBuffer,"%ArrayIteratorPrototype%":xo?Gr([][Symbol.iterator]()):oe,"%AsyncFromSyncIteratorPrototype%":oe,"%AsyncFunction%":No,"%AsyncGenerator%":No,"%AsyncGeneratorFunction%":No,"%AsyncIteratorPrototype%":No,"%Atomics%":typeof Atomics>"u"?oe:Atomics,"%BigInt%":typeof BigInt>"u"?oe:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?oe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?oe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?oe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?oe:FinalizationRegistry,"%Function%":dE,"%GeneratorFunction%":No,"%Int8Array%":typeof Int8Array>"u"?oe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?oe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?oe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xo?Gr(Gr([][Symbol.iterator]())):oe,"%JSON%":typeof JSON=="object"?JSON:oe,"%Map%":typeof Map>"u"?oe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xo?oe:Gr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?oe:Promise,"%Proxy%":typeof Proxy>"u"?oe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?oe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?oe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xo?oe:Gr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?oe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xo?Gr(""[Symbol.iterator]()):oe,"%Symbol%":xo?Symbol:oe,"%SyntaxError%":$i,"%ThrowTypeError%":bD,"%TypedArray%":PD,"%TypeError%":ci,"%Uint8Array%":typeof Uint8Array>"u"?oe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?oe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?oe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?oe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?oe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?oe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?oe:WeakSet},ID=function t(e){var r;if(e==="%AsyncFunction%")r=Hf("async function () {}");else if(e==="%GeneratorFunction%")r=Hf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Hf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=Gr(o.prototype))}return fi[e]=r,r},l_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ka=fE,Tu=Ic,ND=ka.call(Function.call,Array.prototype.concat),kD=ka.call(Function.apply,Array.prototype.splice),u_=ka.call(Function.call,String.prototype.replace),Ru=ka.call(Function.call,String.prototype.slice),TD=ka.call(Function.call,RegExp.prototype.exec),RD=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,OD=/\\(\\)?/g,jD=function(e){var r=Ru(e,0,1),n=Ru(e,-1);if(r==="%"&&n!=="%")throw new $i("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $i("invalid intrinsic syntax, expected opening `%`");var o=[];return u_(e,RD,function(i,s,a,l){o[o.length]=a?u_(l,OD,"$1"):s||i}),o},$D=function(e,r){var n=e,o;if(Tu(l_,n)&&(o=l_[n],n="%"+o[0]+"%"),Tu(fi,n)){var i=fi[n];if(i===No&&(i=ID(n)),typeof i>"u"&&!r)throw new ci("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new $i("intrinsic "+e+" does not exist!")},pE=function(e,r){if(typeof e!="string"||e.length===0)throw new ci("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ci('"allowMissing" argument must be a boolean');if(TD(/^%?[^%]*%?$/,e)===null)throw new $i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=jD(e),o=n.length>0?n[0]:"",i=$D("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],kD(n,ND([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=Ru(f,0,1),v=Ru(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new $i("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Tu(fi,s))a=fi[s];else if(a!=null){if(!(f in a)){if(!r)throw new ci("base intrinsic for "+e+" exists, but the property is not available.");return}if(qn&&p+1>=n.length){var S=qn(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=Tu(a,f),a=a[f];d&&!l&&(fi[s]=a)}}return a};(function(t){var e=fE,r=pE,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var f=i(e,o,arguments);if(s&&a){var y=s(f,"length");y.configurable&&a(f,"length",{value:1+l(0,d.length-(arguments.length-1))})}return f};var u=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u})(cE);var hE=cE.exports,yE=pE,gE=hE,DD=gE(yE("String.prototype.indexOf")),FD=function(e,r){var n=yE(e,!!r);return typeof n=="function"&&DD(e,".prototype.")>-1?gE(n):n},mE=Function.prototype.toString,Go=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,$p,xl;if(typeof Go=="function"&&typeof Object.defineProperty=="function")try{$p=Object.defineProperty({},"length",{get:function(){throw xl}}),xl={},Go(function(){throw 42},null,$p)}catch(t){t!==xl&&(Go=null)}else Go=null;var MD=/^\s*class\b/,Dp=function(e){try{var r=mE.call(e);return MD.test(r)}catch{return!1}},qf=function(e){try{return Dp(e)?!1:(mE.call(e),!0)}catch{return!1}},wl=Object.prototype.toString,LD="[object Object]",BD="[object Function]",UD="[object GeneratorFunction]",WD="[object HTMLAllCollection]",zD="[object HTML document.all class]",VD="[object HTMLCollection]",GD=typeof Symbol=="function"&&!!Symbol.toStringTag,HD=!(0 in[,]),Fp=function(){return!1};if(typeof document=="object"){var QD=document.all;wl.call(QD)===wl.call(document.all)&&(Fp=function(e){if((HD||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=wl.call(e);return(r===WD||r===zD||r===VD||r===LD)&&e("")==null}catch{}return!1})}var qD=Go?function(e){if(Fp(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Go(e,null,$p)}catch(r){if(r!==xl)return!1}return!Dp(e)&&qf(e)}:function(e){if(Fp(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(GD)return qf(e);if(Dp(e))return!1;var r=wl.call(e);return r!==BD&&r!==UD&&!/^\[object HTML/.test(r)?!1:qf(e)},KD=qD,YD=Object.prototype.toString,vE=Object.prototype.hasOwnProperty,JD=function(e,r,n){for(var o=0,i=e.length;o<i;o++)vE.call(e,o)&&(n==null?r(e[o],o,e):r.call(n,e[o],o,e))},XD=function(e,r,n){for(var o=0,i=e.length;o<i;o++)n==null?r(e.charAt(o),o,e):r.call(n,e.charAt(o),o,e)},ZD=function(e,r,n){for(var o in e)vE.call(e,o)&&(n==null?r(e[o],o,e):r.call(n,e[o],o,e))},eF=function(e,r,n){if(!KD(r))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),YD.call(e)==="[object Array]"?JD(e,r,o):typeof e=="string"?XD(e,r,o):ZD(e,r,o)},_E=eF,Kf=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],tF=typeof globalThis>"u"?qp:globalThis,SE=function(){for(var e=[],r=0;r<Kf.length;r++)typeof tF[Kf[r]]=="function"&&(e[e.length]=Kf[r]);return e},xE=_E,rF=SE,Uy=nr,nF=Uy("Object.prototype.toString"),wE=En(),El=Oc,oF=typeof globalThis>"u"?qp:globalThis,EE=rF(),iF=Uy("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},sF=Uy("String.prototype.slice"),CE={},Yf=Object.getPrototypeOf;wE&&El&&Yf&&xE(EE,function(t){var e=new oF[t];if(Symbol.toStringTag in e){var r=Yf(e),n=El(r,Symbol.toStringTag);if(!n){var o=Yf(r);n=El(o,Symbol.toStringTag)}CE[t]=n.get}});var aF=function(e){var r=!1;return xE(CE,function(n,o){if(!r)try{r=n.call(e)===o}catch{}}),r},AE=function(e){if(!e||typeof e!="object")return!1;if(!wE||!(Symbol.toStringTag in e)){var r=sF(nF(e),8,-1);return iF(EE,r)>-1}return El?aF(e):!1},lF=hE,uF=FD,bE=Rc,cF=AE,c_=bE("ArrayBuffer",!0),f_=bE("Float32Array",!0),Cl=uF("ArrayBuffer.prototype.byteLength",!0),d_=c_&&!Cl&&new c_().slice,p_=d_&&lF(d_),fF=Cl||p_?function(e){if(!e||typeof e!="object")return!1;try{return Cl?Cl(e):p_(e,0),!0}catch{return!1}}:f_?function(e){try{return new f_(e).buffer===e&&!cF(e)}catch(r){return typeof e=="object"&&r.name==="RangeError"}}:function(e){return!1},dF=Date.prototype.getDay,pF=function(e){try{return dF.call(e),!0}catch{return!1}},hF=Object.prototype.toString,yF="[object Date]",gF=En(),mF=function(e){return typeof e!="object"||e===null?!1:gF?pF(e):hF.call(e)===yF},Mp=nr,PE=En(),IE,NE,Lp,Bp;if(PE){IE=Mp("Object.prototype.hasOwnProperty"),NE=Mp("RegExp.prototype.exec"),Lp={};var Jf=function(){throw Lp};Bp={toString:Jf,valueOf:Jf},typeof Symbol.toPrimitive=="symbol"&&(Bp[Symbol.toPrimitive]=Jf)}var vF=Mp("Object.prototype.toString"),_F=Object.getOwnPropertyDescriptor,SF="[object RegExp]",xF=PE?function(e){if(!e||typeof e!="object")return!1;var r=_F(e,"lastIndex"),n=r&&IE(r,"value");if(!n)return!1;try{NE(e,Bp)}catch(o){return o===Lp}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:vF(e)===SF},wF=nr,h_=wF("SharedArrayBuffer.prototype.byteLength",!0),EF=h_?function(e){if(!e||typeof e!="object")return!1;try{return h_(e),!0}catch{return!1}}:function(e){return!1},CF=Number.prototype.toString,AF=function(e){try{return CF.call(e),!0}catch{return!1}},bF=Object.prototype.toString,PF="[object Number]",IF=En(),NF=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:IF?AF(e):bF.call(e)===PF},kE=nr,kF=kE("Boolean.prototype.toString"),TF=kE("Object.prototype.toString"),RF=function(e){try{return kF(e),!0}catch{return!1}},OF="[object Boolean]",jF=En(),$F=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:jF&&Symbol.toStringTag in e?RF(e):TF(e)===OF},Up={exports:{}},DF=Object.prototype.toString,FF=Dr();if(FF){var MF=Symbol.prototype.toString,LF=/^Symbol\(.*\)$/,BF=function(e){return typeof e.valueOf()!="symbol"?!1:LF.test(MF.call(e))};Up.exports=function(e){if(typeof e=="symbol")return!0;if(DF.call(e)!=="[object Symbol]")return!1;try{return BF(e)}catch{return!1}}}else Up.exports=function(e){return!1};var UF=Up.exports,Wp={exports:{}},y_=typeof BigInt<"u"&&BigInt,WF=function(){return typeof y_=="function"&&typeof BigInt=="function"&&typeof y_(42)=="bigint"&&typeof BigInt(42)=="bigint"},zF=WF();if(zF){var VF=BigInt.prototype.valueOf,GF=function(e){try{return VF.call(e),!0}catch{}return!1};Wp.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:GF(e)}}else Wp.exports=function(e){return!1};var HF=Wp.exports,QF=J1,qF=NF,KF=$F,YF=UF,JF=HF,XF=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(QF(e))return"String";if(qF(e))return"Number";if(KF(e))return"Boolean";if(YF(e))return"Symbol";if(JF(e))return"BigInt"},Ou=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,g_=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,ju;Ou||(ju=function(e){return!1});var zp=Ou?Ou.prototype.has:null,Xf=g_?g_.prototype.has:null;!ju&&!zp&&(ju=function(e){return!1});var ZF=ju||function(e){if(!e||typeof e!="object")return!1;try{if(zp.call(e,zp),Xf)try{Xf.call(e,Xf)}catch{return!0}return e instanceof Ou}catch{}return!1},Vp={exports:{}},e3=Fr,TE=nr,t3=e3("%WeakSet%",!0),Zf=TE("WeakSet.prototype.has",!0);if(Zf){var ed=TE("WeakMap.prototype.has",!0);Vp.exports=function(e){if(!e||typeof e!="object")return!1;try{if(Zf(e,Zf),ed)try{ed(e,ed)}catch{return!0}return e instanceof t3}catch{}return!1}}else Vp.exports=function(e){return!1};var r3=Vp.exports,n3=Z1,o3=tE,i3=ZF,s3=r3,a3=function(e){if(e&&typeof e=="object"){if(n3(e))return"Map";if(o3(e))return"Set";if(i3(e))return"WeakMap";if(s3(e))return"WeakSet"}return!1},RE={exports:{}},l3="Function.prototype.bind called on incompatible ",u3=Object.prototype.toString,c3=Math.max,f3="[object Function]",m_=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},d3=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},p3=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},h3=function(e){var r=this;if(typeof r!="function"||u3.apply(r)!==f3)throw new TypeError(l3+r);for(var n=d3(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,m_(n,arguments));return Object(p)===p?p:this}return r.apply(e,m_(n,arguments))},s=c3(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+p3(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o},y3=h3,OE=Function.prototype.bind||y3,ee,Di=SyntaxError,jE=Function,di=TypeError,td=function(t){try{return jE('"use strict"; return ('+t+").constructor;")()}catch{}},Kn=Object.getOwnPropertyDescriptor;if(Kn)try{Kn({},"")}catch{Kn=null}var rd=function(){throw new di},g3=Kn?function(){try{return arguments.callee,rd}catch{try{return Kn(arguments,"callee").get}catch{return rd}}}():rd,wo=Dr(),m3=kc(),He=Object.getPrototypeOf||(m3?function(t){return t.__proto__}:null),ko={},v3=typeof Uint8Array>"u"||!He?ee:He(Uint8Array),Yn={"%AggregateError%":typeof AggregateError>"u"?ee:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ee:ArrayBuffer,"%ArrayIteratorPrototype%":wo&&He?He([][Symbol.iterator]()):ee,"%AsyncFromSyncIteratorPrototype%":ee,"%AsyncFunction%":ko,"%AsyncGenerator%":ko,"%AsyncGeneratorFunction%":ko,"%AsyncIteratorPrototype%":ko,"%Atomics%":typeof Atomics>"u"?ee:Atomics,"%BigInt%":typeof BigInt>"u"?ee:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ee:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ee:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ee:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ee:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ee:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ee:FinalizationRegistry,"%Function%":jE,"%GeneratorFunction%":ko,"%Int8Array%":typeof Int8Array>"u"?ee:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ee:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ee:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":wo&&He?He(He([][Symbol.iterator]())):ee,"%JSON%":typeof JSON=="object"?JSON:ee,"%Map%":typeof Map>"u"?ee:Map,"%MapIteratorPrototype%":typeof Map>"u"||!wo||!He?ee:He(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ee:Promise,"%Proxy%":typeof Proxy>"u"?ee:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ee:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ee:Set,"%SetIteratorPrototype%":typeof Set>"u"||!wo||!He?ee:He(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ee:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":wo&&He?He(""[Symbol.iterator]()):ee,"%Symbol%":wo?Symbol:ee,"%SyntaxError%":Di,"%ThrowTypeError%":g3,"%TypedArray%":v3,"%TypeError%":di,"%Uint8Array%":typeof Uint8Array>"u"?ee:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ee:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ee:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ee:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ee:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ee:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ee:WeakSet};if(He)try{null.error}catch(t){var _3=He(He(t));Yn["%Error.prototype%"]=_3}var S3=function t(e){var r;if(e==="%AsyncFunction%")r=td("async function () {}");else if(e==="%GeneratorFunction%")r=td("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=td("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&He&&(r=He(o.prototype))}return Yn[e]=r,r},v_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ta=OE,$u=Tc,x3=Ta.call(Function.call,Array.prototype.concat),w3=Ta.call(Function.apply,Array.prototype.splice),__=Ta.call(Function.call,String.prototype.replace),Du=Ta.call(Function.call,String.prototype.slice),E3=Ta.call(Function.call,RegExp.prototype.exec),C3=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A3=/\\(\\)?/g,b3=function(e){var r=Du(e,0,1),n=Du(e,-1);if(r==="%"&&n!=="%")throw new Di("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Di("invalid intrinsic syntax, expected opening `%`");var o=[];return __(e,C3,function(i,s,a,l){o[o.length]=a?__(l,A3,"$1"):s||i}),o},P3=function(e,r){var n=e,o;if($u(v_,n)&&(o=v_[n],n="%"+o[0]+"%"),$u(Yn,n)){var i=Yn[n];if(i===ko&&(i=S3(n)),typeof i>"u"&&!r)throw new di("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Di("intrinsic "+e+" does not exist!")},$E=function(e,r){if(typeof e!="string"||e.length===0)throw new di("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new di('"allowMissing" argument must be a boolean');if(E3(/^%?[^%]*%?$/,e)===null)throw new Di("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=b3(e),o=n.length>0?n[0]:"",i=P3("%"+o+"%",r),s=i.name,a=i.value,l=!1,u=i.alias;u&&(o=u[0],w3(n,x3([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],y=Du(f,0,1),v=Du(f,-1);if((y==='"'||y==="'"||y==="`"||v==='"'||v==="'"||v==="`")&&y!==v)throw new Di("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",$u(Yn,s))a=Yn[s];else if(a!=null){if(!(f in a)){if(!r)throw new di("base intrinsic for "+e+" exists, but the property is not available.");return}if(Kn&&p+1>=n.length){var S=Kn(a,f);d=!!S,d&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else d=$u(a,f),a=a[f];d&&!l&&(Yn[s]=a)}}return a};(function(t){var e=OE,r=$E,n=N1,o=r("%TypeError%"),i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,i),l=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(f){if(typeof f!="function")throw new o("a function is required");var y=a(e,s,arguments);return n(y,1+u(0,f.length-(arguments.length-1)),!0)};var p=function(){return a(e,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p})(RE);var DE=RE.exports,FE=$E,ME=DE,I3=ME(FE("String.prototype.indexOf")),N3=function(e,r){var n=FE(e,!!r);return typeof n=="function"&&I3(e,".prototype.")>-1?ME(n):n},Fu=_E,k3=SE,S_=DE,Wy=N3,Al=Oc,T3=Wy("Object.prototype.toString"),LE=En(),x_=typeof globalThis>"u"?qp:globalThis,Gp=k3(),zy=Wy("String.prototype.slice"),nd=Object.getPrototypeOf,R3=Wy("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Mu={__proto__:null};LE&&Al&&nd?Fu(Gp,function(t){var e=new x_[t];if(Symbol.toStringTag in e){var r=nd(e),n=Al(r,Symbol.toStringTag);if(!n){var o=nd(r);n=Al(o,Symbol.toStringTag)}Mu["$"+t]=S_(n.get)}}):Fu(Gp,function(t){var e=new x_[t],r=e.slice||e.set;r&&(Mu["$"+t]=S_(r))});var O3=function(e){var r=!1;return Fu(Mu,function(n,o){if(!r)try{"$"+n(e)===o&&(r=zy(o,1))}catch{}}),r},j3=function(e){var r=!1;return Fu(Mu,function(n,o){if(!r)try{n(e),r=zy(o,1)}catch{}}),r},$3=function(e){if(!e||typeof e!="object")return!1;if(!LE){var r=zy(T3(e),8,-1);return R3(Gp,r)>-1?r:r!=="Object"?!1:j3(e)}return Al?O3(e):null},od,w_;function D3(){if(w_)return od;w_=1;var t=Nc,e=nr,r=Fr,n=AE,o=r("ArrayBuffer",!0),i=r("Float32Array",!0),s=e("ArrayBuffer.prototype.byteLength",!0),a=o&&!s&&new o().slice,l=a&&t(a);return od=s||l?function(p){if(!p||typeof p!="object")return!1;try{return s?s(p):l(p,0),!0}catch{return!1}}:i?function(p){try{return new i(p).buffer===p&&!n(p)}catch{return!1}}:function(p){return!1},od}var F3=nr,E_=F3("ArrayBuffer.prototype.byteLength",!0),M3=D3(),L3=function(e){return M3(e)?E_?E_(e):e.byteLength:NaN},BE=m2,gr=qO,C_=Uj,B3=Rc,Fi=oD,U3=K1,A_=SD,b_=W1,P_=Y1,I_=fF,N_=mF,k_=xF,T_=EF,R_=Ca,O_=XF,j_=a3,$_=$3,D_=L3,F_=gr("SharedArrayBuffer.prototype.byteLength",!0),M_=gr("Date.prototype.getTime"),id=Object.getPrototypeOf,L_=gr("Object.prototype.toString"),Lu=B3("%Set%",!0),Hp=gr("Map.prototype.has",!0),Bu=gr("Map.prototype.get",!0),B_=gr("Map.prototype.size",!0),Uu=gr("Set.prototype.add",!0),UE=gr("Set.prototype.delete",!0),Wu=gr("Set.prototype.has",!0),bl=gr("Set.prototype.size",!0);function U_(t,e,r,n){for(var o=Fi(t),i;(i=o.next())&&!i.done;)if(er(e,i.value,r,n))return UE(t,i.value),!0;return!1}function WE(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function W3(t,e,r,n,o,i){var s=WE(r);if(s!=null)return s;var a=Bu(e,s),l=BE({},o,{strict:!1});return typeof a>"u"&&!Hp(e,s)||!er(n,a,l,i)?!1:!Hp(t,s)&&er(n,a,l,i)}function z3(t,e,r){var n=WE(r);return n??(Wu(e,n)&&!Wu(t,n))}function W_(t,e,r,n,o,i){for(var s=Fi(t),a,l;(a=s.next())&&!a.done;)if(l=a.value,er(r,l,o,i)&&er(n,Bu(e,l),o,i))return UE(t,l),!0;return!1}function er(t,e,r,n){var o=r||{};if(o.strict?A_(t,e):t===e)return!0;var i=O_(t),s=O_(e);if(i!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return o.strict?A_(t,e):t==e;var a=n.has(t),l=n.has(e),u;if(a&&l){if(n.get(t)===n.get(e))return!0}else u={};return a||n.set(t,u),l||n.set(e,u),H3(t,e,o,n)}function z_(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function V3(t,e,r,n){if(bl(t)!==bl(e))return!1;for(var o=Fi(t),i=Fi(e),s,a,l;(s=o.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new Lu),Uu(l,s.value);else if(!Wu(e,s.value)){if(r.strict||!z3(t,e,s.value))return!1;l||(l=new Lu),Uu(l,s.value)}if(l){for(;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!U_(l,a.value,r.strict,n))return!1}else if(!r.strict&&!Wu(t,a.value)&&!U_(l,a.value,r.strict,n))return!1;return bl(l)===0}return!0}function G3(t,e,r,n){if(B_(t)!==B_(e))return!1;for(var o=Fi(t),i=Fi(e),s,a,l,u,p,d;(s=o.next())&&!s.done;)if(u=s.value[0],p=s.value[1],u&&typeof u=="object")l||(l=new Lu),Uu(l,u);else if(d=Bu(e,u),typeof d>"u"&&!Hp(e,u)||!er(p,d,r,n)){if(r.strict||!W3(t,e,u,p,r,n))return!1;l||(l=new Lu),Uu(l,u)}if(l){for(;(a=i.next())&&!a.done;)if(u=a.value[0],d=a.value[1],u&&typeof u=="object"){if(!W_(l,t,u,d,r,n))return!1}else if(!r.strict&&(!t.has(u)||!er(Bu(t,u),d,r,n))&&!W_(l,t,u,d,BE({},r,{strict:!1}),n))return!1;return bl(l)===0}return!0}function H3(t,e,r,n){var o,i;if(typeof t!=typeof e||t==null||e==null||L_(t)!==L_(e)||b_(t)!==b_(e))return!1;var s=P_(t),a=P_(e);if(s!==a)return!1;var l=t instanceof Error,u=e instanceof Error;if(l!==u||(l||u)&&(t.name!==e.name||t.message!==e.message))return!1;var p=k_(t),d=k_(e);if(p!==d||(p||d)&&(t.source!==e.source||C_(t)!==C_(e)))return!1;var f=N_(t),y=N_(e);if(f!==y||(f||y)&&M_(t)!==M_(e)||r.strict&&id&&id(t)!==id(e))return!1;var v=$_(t),S=$_(e);if(v!==S)return!1;if(v||S){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var P=z_(t),m=z_(e);if(P!==m)return!1;if(P||m){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var h=I_(t),g=I_(e);if(h!==g)return!1;if(h||g)return D_(t)!==D_(e)?!1:typeof Uint8Array=="function"&&er(new Uint8Array(t),new Uint8Array(e),r,n);var E=T_(t),A=T_(e);if(E!==A)return!1;if(E||A)return F_(t)!==F_(e)?!1:typeof Uint8Array=="function"&&er(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var b=R_(t),T=R_(e);if(b.length!==T.length)return!1;for(b.sort(),T.sort(),o=b.length-1;o>=0;o--)if(b[o]!=T[o])return!1;for(o=b.length-1;o>=0;o--)if(i=b[o],!er(t[i],e[i],r,n))return!1;var O=j_(t),Q=j_(e);return O!==Q?!1:O==="Set"||Q==="Set"?V3(t,e,r,n):O==="Map"?G3(t,e,r,n):!0}var Q3=function(e,r,n){return er(e,r,n,U3())};const q3=u0(Q3),K3=(t,e)=>q3(t,e),Y3={apiKey:"AIzaSyCa4jaiAOgH5H8B6hSo4DU49WnkpGPeavA",authDomain:"hkmjbs-streaming.firebaseapp.com",databaseURL:"https://hkmjbs-streaming-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hkmjbs-streaming",storageBucket:"hkmjbs-streaming.appspot.com",messagingSenderId:"537815456325",appId:"1:537815456325:web:c387796326f9db2726a12c"},J3=Lx(Y3),To=PR(J3);window.location.hostname==="localhost"&&a1(To,"localhost",9e3);const zE={database:To,get:t=>{const e=gs(To,t);return s1(e).then(r=>{if(r.exists())return r.val()}).catch(r=>{throw console.error(r),r})},set:(t,e)=>{const r=gs(To,t);return Py(r,e).catch(n=>{throw console.error(n),n})},update:(t,e)=>{const r=gs(To,t);return i1(r,e).catch(n=>{throw console.error(n),n})},push:(t,e)=>{const r=gs(To,t);return o1(r,e).catch(n=>{throw console.error(n),n})}},Vy=x.createContext(zE);function X3({children:t}){return c.jsx(Vy.Provider,{value:zE,children:t})}const Z3=()=>x.useContext(Vy),Or=(t,e)=>{const{database:r}=x.useContext(Vy),n=x.useMemo(()=>gs(r,t),[r,t]),[o,i]=x.useState(),[s,a]=x.useState(e),l=x.useCallback(f=>Py(n,f),[n]),u=x.useCallback(f=>i1(n,f),[n]),p=x.useCallback(f=>o1(n,f),[n]);return x.useEffect(()=>{K3(e,s)||a(e)},[s,e]),x.useEffect(()=>{const f=[];s!=null&&s.order&&s.order.byChild&&f.push(gR(s.order.byChild)),s!=null&&s.filter&&(typeof s.filter.equalTo<"u"&&f.push(vR(s.filter.equalTo)),typeof s.filter.limitToLast<"u"&&f.push(hR(s.filter.limitToLast)));const y=f.length>0?_R(n,...f):n;s!=null&&s.onlyOnce?s1(y).then(v=>{v.exists()&&i(v.val())}):cR(y,v=>{i(v.val())},s??{})},[s,n]),{data:x.useMemo(()=>o,[o]),set:l,update:u,push:p}};function VE(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=VE(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function eM(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=VE(t))&&(n&&(n+=" "),n+=e);return n}const V_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,G_=eM,Gy=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return G_(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(u=>{const p=r==null?void 0:r[u],d=i==null?void 0:i[u];if(p===null)return null;const f=V_(p)||V_(d);return o[u][f]}),a=r&&Object.entries(r).reduce((u,p)=>{let[d,f]=p;return f===void 0||(u[d]=f),u},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,p)=>{let{class:d,className:f,...y}=p;return Object.entries(y).every(v=>{let[S,P]=v;return Array.isArray(P)?P.includes({...i,...a}[S]):{...i,...a}[S]===P})?[...u,d,f]:u},[]);return G_(t,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},tM=Gy(["font-semibold"],{variants:{variant:{contained:["border","rounded"],text:[],icon:["hover:enabled:bg-opacity-50 leading-4"]},color:{primary:[],secondary:[],success:[],danger:[],inverted:[]},size:{small:["text-sm"],medium:["text-base"],large:["text-md"],xlarge:["text-2xl"]},disabled:{true:["cursor-not-allowed opacity-30"]},loading:{true:["cursor-wait opacity-30"]}},compoundVariants:[{variant:"contained",size:"small",className:"py-1 px-2"},{variant:"contained",size:"medium",className:"py-2 px-4"},{variant:"contained",size:"large",className:"py-2 px-4"},{variant:"contained",size:"xlarge",className:"py-4 px-4"},{color:"primary",variant:"contained",className:"bg-teal-800 text-white border-transparent hover:enabled:bg-teal-700"},{color:"secondary",variant:"contained",className:"bg-white text-gray-800 border-gray-400 hover:enabled:bg-gray-100"},{color:"success",variant:"contained",className:"bg-green-100 text-green-500 border-green-400 hover:enabled:bg-green-200"},{color:"danger",variant:"contained",className:"bg-red-100 text-red-500 border-red-400 hover:enabled:bg-red-200"},{color:"primary",variant:"text",className:"text-teal-800 hover:enabled:text-teal-700"},{color:"secondary",variant:"text",className:"text-gray-800 hover:enabled:text-gray-700"},{color:"success",variant:"text",className:"text-green-800 hover:enabled:text-green-700"},{color:"danger",variant:"text",className:"text-red-800 hover:enabled:text-red-700"},{color:"inverted",variant:"text",className:"text-gray-100 hover:enabled:text-gray-0"},{color:"primary",variant:"icon",className:"text-teal-800 hover:enabled:text-teal-700 hover:enabled:bg-teal-100"},{color:"secondary",variant:"icon",className:"text-gray-800 hover:enabled:text-gray-700 hover:enabled:bg-gray-100"},{color:"success",variant:"icon",className:"text-green-800 hover:enabled:text-green-700 hover:enabled:bg-green-100"},{color:"danger",variant:"icon",className:"text-red-800 hover:enabled:text-red-700 hover:enabled:bg-red-100"},{color:"primary",size:"medium",className:"uppercase"}],defaultVariants:{color:"primary",size:"medium",variant:"contained"}});function Se({color:t,size:e,variant:r,className:n,type:o="button",loading:i,...s}){const a=x.useMemo(()=>tM({color:t,size:e,variant:r,disabled:s.disabled,loading:i,className:n}),[t,e,r,s.disabled,i,n]);return c.jsx("button",{type:o,className:a,disabled:s.disabled||i,...s})}function rM(){return c.jsx("div",{className:"container mx-auto max-w-screen-sm ",children:c.jsxs("div",{className:"h-screen flex flex-col py-16 gap-y-12",children:[c.jsx("div",{className:"shrink-0",children:c.jsx("h1",{className:"text-5xl text-center",children:"日麻比賽直播系統 (牌藝攻防)"})}),c.jsx("div",{className:"text-center",children:c.jsx("img",{src:"/images/master-logo.jpeg",className:"w-48 mx-auto",alt:"HKMSCA"})}),c.jsxs("div",{className:"shrink-0 space-y-4",children:[c.jsx("div",{children:c.jsx("a",{href:"/create-match",children:c.jsx(Se,{className:"w-full",size:"xlarge",children:"開新對局"})})}),c.jsx("div",{children:c.jsx("div",{className:"text-center",children:c.jsx("a",{href:"/obs/1",target:"_blank",children:c.jsx(Se,{color:"secondary",size:"large",children:"直播頁面"})})})}),c.jsx("div",{className:"flex gap-x-4"})]})]})})}const nM=t=>{const e={};for(let r=0;r<t.length;r+=1)e[r.toString()]=t[r];return e},H_=t=>{if(t.length!==0)return t[t.length-1]},Qi=t=>{const{data:e,update:r}=Or(`/matches/${t}`),{data:n,update:o,push:i}=Or("matchRounds",{order:{byChild:"matchId"},filter:{equalTo:t}}),s=x.useMemo(()=>H_(Object.values(n??{}))??void 0,[n]),a=x.useMemo(()=>Object.values((s==null?void 0:s.doras)??{}),[s]),l=x.useCallback(d=>{const f=H_(Object.keys(n??{}));f&&o({[f]:{...s,...d}})},[s,n,o]),u=x.useCallback(d=>{l({doras:nM(d)})},[l]),p=x.useCallback(d=>{r({name:d})},[r]);return{match:e,matchRounds:n,matchCurrentRound:s,matchCurrentRoundDoras:a,setMatchName:p,setCurrentRoundDoras:u,updateCurrentMatchRound:l,pushMatchRound:i}};var tr=(t=>(t[t.Unknown=0]="Unknown",t[t.Exhausted=-1]="Exhausted",t[t.Ron=1]="Ron",t[t.SelfDrawn=2]="SelfDrawn",t[t.Hotfix=-2]="Hotfix",t))(tr||{}),Fe=(t=>(t[t.Unknown=0]="Unknown",t[t.NextRound=1]="NextRound",t[t.Extended=2]="Extended",t[t.NextRoundAndExtended=3]="NextRoundAndExtended",t[t.Hotfix=-2]="Hotfix",t[t.End=-1]="End",t))(Fe||{}),mt=(t=>(t[t.Win=1]="Win",t[t.Lose=-1]="Lose",t[t.None=0]="None",t))(mt||{}),On=(t=>(t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North",t))(On||{});let oM=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const iM=(t=12)=>oM(t),sM=()=>{const t=new Date;return`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`},aM=t=>`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${t}`,lM=t=>{let e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);e=Math.round(e*1.5),r=Math.round(r*1.5),n=Math.round(n*1.5),e=e<255?e:255,r=r<255?r:255,n=n<255?n:255,e=Math.round(e),r=Math.round(r),n=Math.round(n);const o=e.toString(16).length===1?`0${e.toString(16)}`:e.toString(16),i=r.toString(16).length===1?`0${r.toString(16)}`:r.toString(16),s=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16);return`#${o}${i}${s}`},sd=[On.East,On.South,On.West,On.North],Q_=["0","1","2","3"],uM=t=>parseInt(t,10),$c=(t,e)=>sd[(4+uM(t)-(e-1)%sd.length)%sd.length],Dc=(t,e)=>$c(t,e)===On.East,cs={"1h20f":{ne:200,e:400,ner:1e3,er:1500},"1h25f":{ne:200,e:400,ner:1e3,er:1500},"1h30f":{ne:300,e:500,ner:1e3,er:1500},"1h40f":{ne:400,e:700,ner:1300,er:2e3},"1h50f":{ne:400,e:800,ner:1600,er:2400},"1h60f":{ne:500,e:1e3,ner:2e3,er:2900},"1h70f":{ne:600,e:1200,ner:2300,er:3400},"1h80f":{ne:700,e:1300,ner:2600,er:3900},"1h90f":{ne:800,e:1500,ner:2900,er:4400},"1h100f":{ne:800,e:1600,ner:3200,er:4800},"1h110f":{ne:900,e:1800,ner:3600,er:5300},"2h20f":{ne:400,e:700,ner:1500,er:2100},"2h25f":{ne:400,e:800,ner:1600,er:2400},"2h30f":{ne:500,e:1e3,ner:2e3,er:2900},"2h40f":{ne:700,e:1300,ner:2600,er:3900},"2h50f":{ne:800,e:1600,ner:3200,er:4800},"2h60f":{ne:1e3,e:2e3,ner:3900,er:5800},"2h70f":{ne:1200,e:2300,ner:4500,er:6800},"2h80f":{ne:1300,e:2600,ner:5200,er:7700},"2h90f":{ne:1500,e:2900,ner:5800,er:8700},"2h100f":{ne:1600,e:3200,ner:6400,er:9600},"2h110f":{ne:1800,e:3600,ner:7100,er:10600},"3h20f":{ne:700,e:1300,ner:2600,er:3900},"3h25f":{ne:800,e:1600,ner:3200,er:4800},"3h30f":{ne:1e3,e:2e3,ner:3900,er:5800},"3h40f":{ne:1300,e:2600,ner:5200,er:7700},"3h50f":{ne:1600,e:3200,ner:6400,er:9600},"3h60f":{ne:2e3,e:3900,ner:7700,er:11600},"4h20f":{ne:1300,e:2600,ner:5200,er:7700},"4h25f":{ne:1600,e:3200,ner:6400,er:9600},"4h30f":{ne:2e3,e:3900,ner:7700,er:11600},"5h":{ne:2e3,e:4e3,ner:8e3,er:12e3},"6h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"7h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"8h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"9h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"10h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"11h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"12h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"13h":{ne:8e3,e:16e3,ner:32e3,er:48e3}},cM=(t,e,r)=>{let n;const o=parseInt(t,10);if(Number.isNaN(o))throw new Error(`han "${t}" is NaN`);const i=parseInt(e,10);if(Number.isNaN(i))throw new Error(`fu "${e}" is NaN`);if(o>=13?n=cs["13h"]:o>=5?n=cs[`${o}h`]:o>=4&&i>=(r!=null&&r.roundUp?30:40)||o>=3&&i>=(r!=null&&r.roundUp?60:70)?n=cs["5h"]:n=cs[`${o}h${i}f`],!n)throw new Error(`unrecongized han ${t} and fu ${e}`);return n},fM=t=>t.all||t.east?tr.SelfDrawn:t.target?tr.Ron:tr.Unknown,q_=t=>Q_[(t-1)%Q_.length],dM=t=>({0:{beforeScore:t[0].afterScore,afterScore:t[0].afterScore,isRevealed:!1,isRiichi:!1,type:mt.None,scoreChanges:[],prevScoreChanges:t[0].scoreChanges??[]},1:{beforeScore:t[1].afterScore,afterScore:t[1].afterScore,isRevealed:!1,isRiichi:!1,type:mt.None,scoreChanges:[],prevScoreChanges:t[1].scoreChanges??[]},2:{beforeScore:t[2].afterScore,afterScore:t[2].afterScore,isRevealed:!1,isRiichi:!1,type:mt.None,scoreChanges:[],prevScoreChanges:t[2].scoreChanges??[]},3:{beforeScore:t[3].afterScore,afterScore:t[3].afterScore,isRevealed:!1,isRiichi:!1,type:mt.None,scoreChanges:[],prevScoreChanges:t[3].scoreChanges??[]}}),K_=t=>dM({0:t[0],1:t[1],2:t[2],3:t[3]}),pM=()=>`${sM()}-${iM(6)}`,Qp=(t,e,r)=>`${t}-${e}.${r}`,hM={1:"東 1 局",2:"東 2 局",3:"東 3 局",4:"東 4 局",5:"南 1 局",6:"南 2 局",7:"南 3 局",8:"南 4 局",9:"西 1 局",10:"西 2 局",11:"西 3 局",12:"西 4 局",13:"北 1 局",14:"北 2 局",15:"北 3 局",16:"北 4 局"},GE=(t,e,r=8)=>{try{const n=hM[Math.min(t,r)];if(!n)throw new Error(`Unable to parse round=${t} in MJMatchCounterSpan`);return e&&e!==0?`${n}${e}本場`:n}catch(n){return console.error(n),`${t}.${e??0}`}};function Ct({signed:t,className:e,positiveClassName:r,negativeClassName:n,value:o,animated:i,hideZero:s}){const[a,l]=x.useState(o),u=x.useRef(null),p=x.useCallback(y=>y===0?s?"":y.toLocaleString("en-US"):y>0?`${t?"+":""}${Math.floor(y).toLocaleString("en-US")}`:Math.floor(y).toLocaleString("en-US"),[s,t]),d=x.useMemo(()=>p(a),[p,a]),f=x.useMemo(()=>o>0?`${e??""} ${r??""}`:o<0?`${e??""} ${n??""}`:e,[e,n,r,o]);return x.useEffect(()=>{if(a!==o)if(i){for(let S=16;S<1e3;S+=16)setTimeout(()=>{u.current&&(u.current.innerText=Math.floor(a-(a-o)*(S/1e3)).toLocaleString("en-US"))},S);setTimeout(()=>{l(o)},1e3+16)}else l(o)},[i,a,o]),x.useEffect(()=>{u.current&&(u.current.innerText=d)},[d]),c.jsx("span",{ref:u,className:f})}function yM(t){return c.jsx("div",{...t,children:c.jsx("div",{className:"relative w-full h-full bg-[#d1b571] overflow-hidden",children:c.jsx("div",{className:"origin-bottom w-[200%] h-[100%] bg-[#d1291d] animate-[riichi_8s_ease-in-out_infinite]"})})})}const Y_={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function Ra({className:t,children:e,...r}){const n=x.useMemo(()=>Y_[e==null?void 0:e.toString()]??Y_.default,[e]);return c.jsx("div",{className:`mahjong-tile ${n} ${t}`,...r})}function qi({player:t,playerIndex:e,score:r,scoreChanges:n=[],isEast:o,isRiichi:i,waitingTiles:s,onClickWaitingTiles:a,className:l,...u}){const[p,d]=x.useState(r),[f,y]=x.useState(void 0),v=x.useMemo(()=>lM(t.color),[t.color]),S=x.useMemo(()=>!!f,[f]);return x.useEffect(()=>{r!==p&&(y(n),setTimeout(()=>{d(r)},2550),setTimeout(()=>{y(void 0)},3e3))},[r,n,p]),c.jsxs("div",{className:"min-w-[5.35em] mx-auto [&_.hide-if-changing]:transition-opacity [&_.hide-if-changing]:data-[score-changing='1']:opacity-0","data-score-changing":S?"1":"0",children:[c.jsxs("div",{className:"flex items-end gap-x-[0.1em]",children:[c.jsx("div",{className:"shrink-0 w-[1.75em] h-full relative -bottom-[0.075em] -left-[0.075em] z-10",children:c.jsx("div",{className:"w-full aspect-[90/125] p-[0.075em]",children:c.jsxs("div",{className:"w-full h-full bg-white rounded-[0.08em]",style:{background:`linear-gradient(180deg, ${t.color}, ${v})`},children:[i&&c.jsx(yM,{className:"absolute -z-10 w-full h-full top-0 left-0 rounded-[0.08em] overflow-hidden"}),t.propicSrc&&c.jsx("img",{className:"w-full h-full rounded-[0.08em]",src:t.propicSrc,alt:t.name})]})})}),c.jsxs("div",{className:"flex-1 flex flex-col gap-y-[0.075em] items-start justify-end",children:[c.jsxs("div",{className:"bg-black bg-opacity-60 rounded text-[0.5em] flex gap-x-[0.2em] p-[0.1em] pr-[0.2em] opacity-0 transition-opacity data-[has-waiting-tiles='1']:opacity-100 hide-if-changing cursor-pointer","data-has-waiting-tiles":s&&s.length>0||a?"1":"0",onClick:a,"data-player-index":e,children:[c.jsx("div",{className:"flex-1 space-x-[0.15em] leading-none min-h-[1.19em]",children:s==null?void 0:s.map(P=>c.jsx(Ra,{className:"inline-block align-bottom w-[0.85em] animate-[fadeIn_1s_ease-in-out]",children:P},P))}),c.jsx("div",{className:"bg-[#DDDDDD] w-px"}),c.jsxs("div",{className:"text-[#DDDDDD] text-[0.35em] leading-[1.2em] flex items-center",children:["待",c.jsx("br",{}),"牌"]})]}),c.jsxs("div",{className:`relative w-full text-left bg-white px-[0.1em] py-[0.1em] pt-[0.15em] ${l}`,...u,style:{background:`linear-gradient(260deg, transparent, transparent 22px, ${v} 23px, ${t.color} 100%`},children:[c.jsxs("div",{className:"flex flex-col justify-center h-[0.55em] gap-y-[0.1em]",children:[c.jsx("div",{className:"text-[0.225em] ml-[0.2em] leading-none text-white hide-if-changing",children:t.title||"　"}),c.jsx("div",{className:"text-[0.225em] ml-[0.2em] leading-none text-white hide-if-changing",children:t.name})]}),f&&c.jsx("div",{className:"absolute bottom-[2.25em] pr-[0.125em] left-0 text-[0.70em] leading-none animate-[drop_3s_ease-in-out] font-numeric",children:f.map(P=>c.jsx("div",{children:c.jsx(Ct,{signed:!0,value:P,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}))}),c.jsx("div",{className:"text-[0.70em] flex-1 leading-none text-white font-numeric mt-[0.025em]",children:c.jsx(Ct,{animated:!0,value:p})})]})]})]}),c.jsx("div",{className:`mt-[0.2em] h-[0.075em] rounded-full ${o&&"bg-red-500"}`})]})}function vn({roundCount:t,extendedRoundCount:e,max:r=16,...n}){const o=x.useMemo(()=>GE(t,e??0,r),[t,r,e]);return c.jsx("span",{...n,children:o})}vn.defaultProps={extendedRoundCount:0};function Ho({player:t,onClickEdit:e,children:r,...n}){const o=x.useCallback(()=>{e==null||e(t)},[e,t]);return c.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[c.jsx("div",{className:"shrink-0",children:c.jsx("div",{className:"w-14 h-14 bg-center bg-contain bg-no-repeat rounded",style:{backgroundImage:`url(${t.propicSrc||"/images/portrait-placeholder.jpeg"})`}})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{children:t.title??"(無頭銜)"}),c.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})]}),e&&c.jsx("div",{className:"shrink-0",children:c.jsx(Se,{variant:"icon",color:"inverted",type:"button",onClick:o,children:c.jsx("span",{className:"material-symbols-outlined",children:"edit"})})})]})}function ol({value:t}){return c.jsx(Ct,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}function Fc({players:t,matchRounds:e,...r}){const n=x.useMemo(()=>Object.entries(e??{}),[e]);return c.jsxs("table",{...r,children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[c.jsx("th",{children:"局數"}),c.jsx("th",{className:"w-min-[120px]",children:c.jsx(Ho,{player:t[0]})}),c.jsx("th",{className:"w-min-[120px]",children:c.jsx(Ho,{player:t[1]})}),c.jsx("th",{className:"w-min-[120px]",children:c.jsx(Ho,{player:t[2]})}),c.jsx("th",{className:"w-min-[120px]",children:c.jsx(Ho,{player:t[3]})})]})}),c.jsxs("tbody",{children:[n[0]&&c.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[c.jsx("td",{className:"text-center"}),c.jsx("td",{className:"text-center",children:c.jsx(Ct,{value:n[0][1].playerResults[0].beforeScore})}),c.jsx("td",{className:"text-center",children:c.jsx(Ct,{value:n[0][1].playerResults[1].beforeScore})}),c.jsx("td",{className:"text-center",children:c.jsx(Ct,{value:n[0][1].playerResults[2].beforeScore})}),c.jsx("td",{className:"text-center",children:c.jsx(Ct,{value:n[0][1].playerResults[3].beforeScore})})]}),n.map(([o,i])=>i.resultType===tr.Hotfix?c.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[c.jsx("td",{className:"text-center",children:"手動調整"}),c.jsx("td",{className:"text-center",children:i.playerResults[0].afterScore}),c.jsx("td",{className:"text-center",children:i.playerResults[1].afterScore}),c.jsx("td",{className:"text-center",children:i.playerResults[2].afterScore}),c.jsx("td",{className:"text-center",children:i.playerResults[3].afterScore})]},o):c.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[c.jsx("td",{className:"text-center",children:c.jsx(vn,{roundCount:i.roundCount,extendedRoundCount:i.extendedRoundCount,max:8})}),c.jsx("td",{className:"text-center",children:c.jsx(ol,{value:i.playerResults[0].afterScore-i.playerResults[0].beforeScore})}),c.jsx("td",{className:"text-center",children:c.jsx(ol,{value:i.playerResults[1].afterScore-i.playerResults[1].beforeScore})}),c.jsx("td",{className:"text-center",children:c.jsx(ol,{value:i.playerResults[2].afterScore-i.playerResults[2].beforeScore})}),c.jsx("td",{className:"text-center",children:c.jsx(ol,{value:i.playerResults[3].afterScore-i.playerResults[3].beforeScore})})]},o)),n[n.length-1]&&c.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[c.jsx("td",{className:"text-center"}),c.jsx("td",{className:"text-center font-bold text-lg",children:c.jsx(Ct,{value:n[n.length-1][1].playerResults[0].afterScore})}),c.jsx("td",{className:"text-center font-bold text-lg",children:c.jsx(Ct,{value:n[n.length-1][1].playerResults[1].afterScore})}),c.jsx("td",{className:"text-center font-bold text-lg",children:c.jsx(Ct,{value:n[n.length-1][1].playerResults[2].afterScore})}),c.jsx("td",{className:"text-center font-bold text-lg",children:c.jsx(Ct,{value:n[n.length-1][1].playerResults[3].afterScore})})]})]})]})}function gM({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n,matchCurrentRoundDoras:o}=Qi(t);return!e||!n?c.jsx("div",{children:"對局讀取失敗。"}):c.jsx("div",{children:c.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[c.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[c.jsxs("div",{className:"shrink-0 rounded-[1rem] bg-black bg-opacity-50 p-2 flex items-stretch gap-x-4",children:[c.jsx("div",{className:"text-[2.5rem] leading-none border-[.25rem] rounded-[.75rem] pb-[0.3em] pt-[0.2em] px-4 border-current flex items-center justify-center",children:c.jsx(vn,{roundCount:n.roundCount,max:8})}),c.jsxs("div",{className:"flex flex-col justify-around",children:[c.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-4"})}),c.jsx("div",{children:n.extendedRoundCount??0})]}),c.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-4"})}),c.jsx("div",{children:n.cumulatedThousands??0})]})]}),c.jsx("div",{className:"flex items-center gap-x-2",children:o.map((i,s)=>c.jsx(Ra,{className:"w-9 cursor-pointer","data-index":s,children:i},i))})]}),c.jsx("div",{className:"flex-1"})]}),c.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(i=>c.jsx("div",{className:"flex gap-x-2 items-center",children:c.jsx("div",{className:"flex-1 text-[2.5rem]",children:c.jsx(qi,{player:e.players[i],score:n.playerResults[i].beforeScore,scoreChanges:n.playerResults[i].prevScoreChanges,isEast:Dc(i,n.roundCount),isRiichi:n.playerResults[i].isRiichi})})}))}),c.jsx(Fc,{players:e.players,matchRounds:r,className:"w-full table-auto"})]})})}function J_({className:t,children:e,...r}){return c.jsx("div",{className:`w-screen h-screen mx-auto flex flex-col gap-y-4 items-stretch py-8 ${t} overflow-hidden text-[4.8rem]`,style:{background:"linear-gradient(transparent, transparent 73%, rgba(0, 0, 0, 0.25))"},...r,children:e})}const X_=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function mM({matchId:t}){const e=x.useMemo(()=>`${window.location.origin}/match/${t}/control`,[t]),r=x.useCallback(()=>{window.navigator.clipboard.writeText(X_)},[]);return c.jsxs("div",{className:"flex items-center justify-center gap-x-8",children:[c.jsxs("div",{children:[c.jsx("p",{children:"1. 打開OBS"}),c.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),c.jsxs("p",{children:["- 網址 = 此頁的網址 ",c.jsx("strong",{children:window.location.href}),c.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",c.jsx("br",{})," - 自訂CSS ="," ",c.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[c.jsx("pre",{children:X_}),c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("button",{type:"button",onClick:r,children:c.jsx("span",{className:"material-symbols-outlined",children:"content_copy"})})})]})]})]}),c.jsxs("div",{children:[c.jsx("p",{children:'3. 在管理後台點擊右上角的 "開始OBS" '}),c.jsx("p",{children:"4. 確定"})]}),c.jsx("div",{className:"shrink-0",children:c.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-center underline",children:[c.jsx("img",{className:"block w-32 h-32",src:aM(e),alt:""}),c.jsx("p",{children:"管理後台"})]})})]})}function HE({params:{matchId:t}}){const{match:e,matchCurrentRound:r,matchCurrentRoundDoras:n}=Qi(t),o=x.useMemo(()=>!e||!r?[]:["0","1","2","3"].map(i=>({...e.players[i],color:e.players[i].color,currentStatus:{...r.playerResults[i],isEast:Dc(i,r.roundCount)}})),[e,r]);return!e||!r?c.jsx(J_,{children:c.jsx("div",{className:"text-current",children:"對局讀取失敗。"})}):c.jsxs(J_,{children:[c.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[c.jsxs("div",{className:"p-2 pl-10 pr-10 flex items-center gap-x-8 transition-[width]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[c.jsxs("div",{className:"text-[0.5em]",children:[c.jsx("div",{className:"text-[0.5em]",children:e.name}),c.jsxs("div",{className:"flex gap-x-8 items-center",children:[c.jsx("div",{className:"min-w-[3.5em]",children:c.jsx(vn,{roundCount:r.roundCount,max:8})}),c.jsxs("div",{className:"flex flex-col justify-around gap-2",children:[c.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[c.jsx("div",{className:"flex-1",children:c.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2.5"})}),c.jsx("div",{className:"text-[0.4em] leading-none",children:r.extendedRoundCount??0})]}),c.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[c.jsx("div",{className:"flex-1",children:c.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2.5"})}),c.jsx("div",{className:"text-[0.4em] leading-none",children:r.cumulatedThousands??0})]})]})]})]}),c.jsx("div",{className:"flex items-center gap-x-2",children:n.map(i=>c.jsx(Ra,{className:"w-14 animate-[fadeIn_0.5s_ease-in-out]",children:i},i))})]}),c.jsx("div",{className:"flex-1"})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("div",{className:"body-hidden mx-20 text-[16px]",children:c.jsx(mM,{matchId:t})})}),c.jsx("div",{className:"flex flex-row items-end justify-center gap-x-8 text-white px-10",children:o.map(i=>c.jsx(qi,{player:i,score:i.currentStatus.afterScore,scoreChanges:i.currentStatus.scoreChanges,isEast:i.currentStatus.isEast,isRiichi:i.currentStatus.isRiichi,waitingTiles:i.currentStatus.waitingTiles},i.name))})]})}function jr({open:t,title:e,children:r,onClose:n,hideCloseButton:o}){const i=x.useRef(null);x.useEffect(()=>{if(i!=null&&i.current&&t){i.current.showModal();const{current:a}=i;return()=>{a.close()}}},[t]);const s=x.useCallback(()=>{n==null||n()},[n]);return c.jsx("dialog",{ref:i,onClose:s,children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex mb-4",children:[c.jsx("div",{className:"flex-1 items-center font-bold text-lg",children:e}),!o&&c.jsx("div",{className:"shrink-0",children:c.jsx("button",{type:"button",className:"absolute top-4 right-4",onClick:s,children:c.jsx("span",{className:"material-symbols-outlined",children:"close"})})})]}),r]})})}function vM({title:t,children:e,okButtonText:r="確認",cancelButtonText:n="取消",onClickOk:o,onClickCancel:i,...s}){const[a,l]=x.useState(!1),u=x.useCallback(()=>{o&&(l(!0),o().finally(()=>{l(!1)}))},[o]);return c.jsxs(jr,{title:t,...s,children:[c.jsx("div",{className:"mb-4",children:e}),c.jsxs("div",{className:"flex gap-x-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Se,{type:"button",color:"secondary",className:"w-full",onClick:i,disabled:a,children:n})}),c.jsx("div",{className:"flex-1",children:c.jsx(Se,{type:"button",color:"danger",className:"w-full",onClick:u,disabled:a,children:a?c.jsx("span",{className:"material-symbols-outlined animate-spin leading-none",children:"horizontal_rule"}):r})})]})]})}const _M={isShowConfirmDialog:!1,setIsShowConfirmDialog:()=>{},confirmDialogOptions:{title:"警告"},setConfirmDialogOptions:()=>{}},QE=x.createContext(_M);function SM({children:t}){const[e,r]=x.useState(!1),[n,o]=x.useState({title:"警告"}),i=x.useMemo(()=>({isShowConfirmDialog:e,setIsShowConfirmDialog:r,confirmDialogOptions:n,setConfirmDialogOptions:o}),[n,e]),s=x.useCallback(()=>{r(!1)},[]);return c.jsxs(QE.Provider,{value:i,children:[t,c.jsx(vM,{open:e,okButtonText:n.okButtonText,cancelButtonText:n.cancelButtonText,onClickOk:n.onClickOk,onClickCancel:n.onClickCancel,onClose:s,...n,hideCloseButton:!0,children:n.content})]})}const xM=()=>{const t=x.useContext(QE);return{showConfirmDialog:x.useCallback(r=>{const n=async()=>(r.onClickOk??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)}),o=async()=>(r.onClickCancel??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)});t.setConfirmDialogOptions({...r,onClickOk:n,onClickCancel:o}),t.setIsShowConfirmDialog(!0)},[t])}};function zu({className:t,onChange:e,onChangeValue:r,...n}){const o=x.useMemo(()=>`bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ${t}`,[t]),i=x.useCallback(s=>{e==null||e(s),r==null||r(s.currentTarget.value)},[e,r]);return c.jsx("select",{className:o,onChange:i,...n})}function wM({isEast:t,isRon:e,onChangeScore:r}){const[n,o]=x.useState("1"),[i,s]=x.useState("30");x.useEffect(()=>{if(!r)return;const u=cM(n,i);u&&r(t?e?{win:u.er,target:u.er}:{win:u.e*3,all:u.e}:e?{win:u.ner,target:u.ner}:{win:u.e+2*u.ne,east:u.e,others:u.ne})},[i,n,t,e,r]);const a=x.useCallback(u=>{const p=u.currentTarget.value;o(p)},[]),l=x.useCallback(u=>{const p=u.currentTarget.value;s(p)},[]);return c.jsx("div",{children:c.jsxs("div",{className:"flex gap-x-4",children:[c.jsx("div",{className:"flex-1",children:c.jsxs(zu,{className:"w-full",placeholder:"番",value:n,onChange:a,children:[c.jsx("option",{value:1,children:"1番"}),c.jsx("option",{value:2,children:"2番"}),c.jsx("option",{value:3,children:"3番"}),c.jsx("option",{value:4,children:"4番"}),c.jsx("option",{value:5,children:"5番"}),c.jsx("option",{value:6,children:"6番"}),c.jsx("option",{value:7,children:"7番"}),c.jsx("option",{value:8,children:"8番"}),c.jsx("option",{value:9,children:"9番"}),c.jsx("option",{value:10,children:"10番"}),c.jsx("option",{value:11,children:"11番"}),c.jsx("option",{value:12,children:"12番"}),c.jsx("option",{value:13,children:"累計役滿"})]})}),c.jsx("div",{className:"flex-1",children:c.jsxs(zu,{className:"w-full",placeholder:"符",value:i,onChange:l,children:[c.jsx("option",{value:20,children:"20符"}),c.jsx("option",{value:25,children:"25符"}),c.jsx("option",{value:30,children:"30符"}),c.jsx("option",{value:40,children:"40符"}),c.jsx("option",{value:50,children:"50符"}),c.jsx("option",{value:60,children:"60符"}),c.jsx("option",{value:70,children:"70符"}),c.jsx("option",{value:80,children:"80符"}),c.jsx("option",{value:90,children:"90符"}),c.jsx("option",{value:100,children:"100符"}),c.jsx("option",{value:110,children:"110符"})]})})]})})}function EM({score:t,...e}){const r=x.useMemo(()=>t?t.target?t.target:t.all?`${t.all} ALL`:`${t.others},${t.east}`:"(錯誤)",[t]);return c.jsx("div",{...e,children:r})}function CM({match:t,currentMatchRound:e,initialActivePlayerIndex:r="0",initialTargetPlayerIndex:n="-1",onSubmit:o,...i}){const[s,a]=x.useState({win:1e3,target:1e3}),l=x.useMemo(()=>Object.keys(t.players).map(g=>({index:g.toString(),name:t.players[g].name,position:$c(g,e.roundCount)})),[t.players,e.roundCount]),[u,p]=x.useState(r),d=x.useMemo(()=>typeof u<"u"?l==null?void 0:l.find(({index:h})=>h===u):void 0,[u,l]),[f,y]=x.useState(n),v=x.useCallback(h=>{const g={...h};e.extendedRoundCount>0&&(g.win+=e.extendedRoundCount*300,g.target&&(g.target+=e.extendedRoundCount*300),g.all&&(g.all+=e.extendedRoundCount*100),g.east&&(g.east+=e.extendedRoundCount*100),g.others&&(g.others+=e.extendedRoundCount*100)),e.cumulatedThousands>0&&(g.win+=e.cumulatedThousands*1e3),a(g)},[e.cumulatedThousands,e.extendedRoundCount]),S=x.useMemo(()=>c.jsxs("div",{children:[c.jsx(vn,{roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount,max:8}),c.jsx("span",{children:" 和了"})]}),[e.roundCount,e.extendedRoundCount]),P=x.useMemo(()=>{const h=Object.keys(e.playerResults),g={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].scoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].scoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].scoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].scoreChanges??[]}};if(u===f)return g;let E=0;for(let A=0;A<h.length;A+=1){const b=h[A];b===u?(g[b].afterScore+=s.win,g[b].type=mt.Win,g[b].scoreChanges=[s.win]):s.target&&b===f?(g[b].afterScore-=s.target,g[b].type=mt.Lose,g[b].scoreChanges=[-s.target]):s.all?(g[b].afterScore-=s.all,g[b].type=mt.Lose,g[b].scoreChanges=[-s.all]):s.east&&s.others&&(Dc(b,e.roundCount)?(g[b].afterScore-=s.east,g[b].type=mt.Lose,g[b].scoreChanges=[-s.east]):(g[b].afterScore-=s.others,g[b].type=mt.Lose,g[b].scoreChanges=[-s.others])),b!==u&&g[b].isRiichi&&(g[b].afterScore-=1e3,g[b].scoreChanges.unshift(-1e3),E+=1e3)}return u&&E>0&&(g[u].afterScore+=E,g[u].scoreChanges.unshift(E)),g},[u,s.all,s.east,s.others,s.target,s.win,e,f]),m=x.useCallback(()=>{if(!o)return;const h={...e,resultType:fM(s),playerResults:P,cumulatedThousands:0};o(h)},[s,e,o,P]);return x.useEffect(()=>{i.open&&p(r)},[i.open,r]),c.jsx(jr,{title:S,...i,children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex gap-x-4 items-center",children:[c.jsx("div",{className:"flex-1",children:c.jsx(zu,{value:u,onChangeValue:p,children:l.map(({index:h,name:g})=>c.jsx("option",{value:h,children:g},h))})}),c.jsx("div",{className:"text-xs text-gray-500",children:"和了"}),c.jsx("div",{className:"flex-1",children:c.jsxs(zu,{value:f,onChangeValue:y,children:[c.jsx("option",{value:"-1",children:"自摸"}),l.map(({index:h,name:g})=>c.jsx("option",{value:h,children:g},h))]})})]}),c.jsx(wM,{isEast:(d==null?void 0:d.position)===On.East,isRon:f!=="-1",onChangeScore:v}),c.jsx("div",{className:"text-2xl font-bold text-center bg-gray-600 text-white py-2",children:c.jsx(EM,{score:s})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h5",{className:"font-bold",children:"分數變動"}),c.jsx("table",{className:"text-sm w-full",children:c.jsx("tbody",{children:Object.keys(t.players).map(h=>c.jsxs("tr",{children:[c.jsx("th",{children:t.players[h].name}),c.jsx("td",{children:P[h].beforeScore}),c.jsx("td",{children:c.jsx(Ct,{signed:!0,value:P[h].afterScore-P[h].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),c.jsx("td",{className:"text-right",children:P[h].afterScore})]},h))})})]}),c.jsx("div",{className:"space-y-2",children:c.jsx(Se,{onClick:m,className:"w-full",children:"提交並播出分數變動動畫"})})]})})}var Vu=function(){return Vu=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Vu.apply(this,arguments)};function AM(){var t=x.useRef(!1),e=x.useCallback(function(){return t.current},[]);return x.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e}function bM(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={loading:!1});var n=x.useRef(0),o=AM(),i=x.useState(r),s=i[0],a=i[1],l=x.useCallback(function(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];var d=++n.current;return s.loading||a(function(f){return Vu(Vu({},f),{loading:!0})}),t.apply(void 0,u).then(function(f){return o()&&d===n.current&&a({value:f,loading:!1}),f},function(f){return o()&&d===n.current&&a({error:f,loading:!1}),f})},e);return[s,l]}var PM=function(t,e){return typeof e=="boolean"?e:!t},IM=function(t){return x.useReducer(PM,t)};const pi=IM,NM=[["1m","2m","3m","4m","5m","6m","7m","8m","9m","0m"],["1p","2p","3p","4p","5p","6p","7p","8p","9p","0p"],["1s","2s","3s","4s","5s","6s","7s","8s","9s","0s"],["1z","2z","3z","4z","5z","6z","7z"]],Z_={m:0,p:1,s:2,z:3},kM=(t,e)=>{const[r,n]=[t[0],t[1]],[o,i]=[e[0],e[1]];return n!==i?Z_[n]-Z_[i]:parseInt(r,10)-parseInt(o,10)};function e0({onSubmit:t,onRemove:e,canRemove:r,hideRedTiles:n,multiple:o,defaultValue:i}){const[s,a]=x.useState([]),l=x.useCallback(d=>{var y;const f=(y=d.currentTarget)==null?void 0:y.getAttribute("data-key");f&&a(o?v=>{const S=v.indexOf(f);if(S===-1)return[...v,f].sort(kM);const P=[...v];return P.splice(S,1),P}:[f])},[o]),u=x.useCallback(()=>{s&&t&&(t==null||t(s),a([]))},[t,s]),p=x.useCallback(()=>{r&&(e==null||e(),a([]))},[r,e]);return x.useEffect(()=>{a(i??[])},[i]),c.jsxs("div",{children:[c.jsx("div",{className:`mb-4 grid ${n?"grid-cols-9":"grid-cols-10"} gap-1 lg:gap-x-2 lg:gap-y-4 items-center text-center`,children:NM.map(d=>d.map(f=>(!f.startsWith("0")||!n)&&c.jsx("button",{type:"button",onClick:l,"data-key":f,className:`${s.indexOf(f)!==-1?"bg-blue-400":"bg-black bg-opacity-20"} rounded p-1 lg:p-2`,children:c.jsx(Ra,{children:f})})))}),c.jsxs("div",{className:"flex gap-x-4",children:[r&&c.jsx("div",{className:"flex-1",children:c.jsx(Se,{className:"w-full",type:"button",color:"secondary",onClick:p,children:"移除"})}),c.jsx("div",{className:"flex-1",children:c.jsx(Se,{className:"w-full",type:"button",color:"primary",onClick:u,disabled:s.length===0,children:"確定"})})]})]})}function TM({onChange:t,onChangeChecked:e,className:r,...n}){const o=x.useCallback(i=>{t==null||t(i),e==null||e(i.currentTarget.checked)},[t,e]);return c.jsx("input",{className:"mt-[0.3rem] mr-2 h-3.5 w-8 appearance-none rounded-[0.4375rem] bg-neutral-300 dark:bg-neutral-600 before:pointer-events-none before:absolute before:h-3.5 before:w-3.5 before:rounded-full before:bg-transparent before:content-[''] after:absolute after:z-[2] after:-mt-[0.1875rem] after:h-5 after:w-5 after:rounded-full after:border-none after:bg-neutral-100 dark:after:bg-neutral-400 after:shadow-[0_0px_3px_0_rgb(0_0_0_/_7%),_0_2px_2px_0_rgb(0_0_0_/_4%)] after:transition-[background-color_0.2s,transform_0.2s] after:content-[''] checked:bg-blue-600 dark:checked:bg-blue-600 checked:after:absolute checked:after:z-[2] checked:after:-mt-[3px] checked:after:ml-[1.0625rem] checked:after:h-5 checked:after:w-5 checked:after:rounded-full checked:after:border-none checked:after:bg-blue-600 dark:checked:after:bg-blue-600 checked:after:shadow-[0_3px_1px_-2px_rgba(0,0,0,0.2),_0_2px_2px_0_rgba(0,0,0,0.14),_0_1px_5px_0_rgba(0,0,0,0.12)] checked:after:transition-[background-color_0.2s,transform_0.2s] checked:after:content-[''] hover:cursor-pointer focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[3px_-1px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-5 focus:after:w-5 focus:after:rounded-full focus:after:content-[''] checked:focus:border-blue-600 checked:focus:bg-blue-600 checked:focus:before:ml-[1.0625rem] checked:focus:before:scale-100 checked:focus:before:shadow-[3px_-1px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s]",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:o,...n})}function RM({match:t,currentMatchRound:e,onSubmit:r,...n}){const o=x.useMemo(()=>Object.keys(t.players).map(f=>({index:f.toString(),name:t.players[f].name,position:$c(f,e.roundCount)})),[t.players,e.roundCount]),[i,s]=x.useState({0:!1,1:!1,2:!1,3:!1}),a=x.useCallback(d=>{var v,S;const f=(v=d.currentTarget)==null?void 0:v.checked,y=(S=d.currentTarget)==null?void 0:S.getAttribute("data-player-index");typeof f>"u"||!y||s(P=>({...P,[y]:f}))},[]),l=x.useMemo(()=>c.jsxs("div",{children:[c.jsx(vn,{roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount,max:8}),c.jsx("span",{children:" 流局"})]}),[e.roundCount,e.extendedRoundCount]),u=x.useMemo(()=>{const d=Object.keys(e.playerResults),f={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].prevScoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].prevScoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].prevScoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].prevScoreChanges??[]}};let y=0,v=0;const S=Object.values(i).filter(P=>!!P).length;S===1?(y=3e3,v=1e3):S===2?(y=1500,v=1500):S===3&&(y=1e3,v=3e3);for(let P=0;P<d.length;P+=1){const m=d[P];y&&v&&(i[m]?(f[m].afterScore+=y,f[m].type=mt.Win,f[m].scoreChanges=[y]):(f[m].afterScore-=v,f[m].type=mt.Lose,f[m].scoreChanges=[-v])),f[m].isRiichi&&(f[m].afterScore-=1e3,f[m].scoreChanges.unshift(-1e3))}return f},[e.playerResults,i]),p=x.useCallback(()=>{if(!r)return;const d={...e,resultType:tr.Exhausted,playerResults:u,cumulatedThousands:e.cumulatedThousands+Object.values(u).filter(({isRiichi:f})=>!!f).length};r(d)},[e,r,u]);return x.useEffect(()=>{n.open&&s({0:!1,1:!1,2:!1,3:!1})},[n.open]),c.jsx(jr,{title:l,...n,children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-right text-xs text-gray-500",children:"聽牌？"}),o.map(d=>c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-1",children:d.name}),c.jsx("div",{className:"shrink-0",children:c.jsx(TM,{checked:i[d.index],onChange:a,"data-player-index":d.index})})]},d.index))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h5",{className:"font-bold",children:"分數變動"}),c.jsx("table",{className:"text-sm w-full",children:c.jsx("tbody",{children:Object.keys(t.players).map(d=>c.jsxs("tr",{children:[c.jsx("th",{children:t.players[d].name}),c.jsx("td",{children:u[d].beforeScore}),c.jsx("td",{children:c.jsx(Ct,{signed:!0,value:u[d].afterScore-u[d].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),c.jsx("td",{className:"text-right",children:u[d].afterScore})]},d))})})]}),c.jsx("div",{className:"space-y-2",children:c.jsx(Se,{onClick:p,className:"w-full",children:"提交並播出分數變動動畫"})})]})})}var Oa=t=>t.type==="checkbox",Qo=t=>t instanceof Date,ct=t=>t==null;const qE=t=>typeof t=="object";var We=t=>!ct(t)&&!Array.isArray(t)&&qE(t)&&!Qo(t),KE=t=>We(t)&&t.target?Oa(t.target)?t.target.checked:t.target.value:t,OM=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,YE=(t,e)=>t.has(OM(e)),jM=t=>{const e=t.constructor&&t.constructor.prototype;return We(e)&&e.hasOwnProperty("isPrototypeOf")},Hy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gt(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Hy&&(t instanceof Blob||t instanceof FileList))&&(r||We(t)))if(e=r?[]:{},!r&&!jM(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=Gt(t[n]));else return t;return e}var ja=t=>Array.isArray(t)?t.filter(Boolean):[],ke=t=>t===void 0,$=(t,e,r)=>{if(!e||!We(t))return r;const n=ja(e.split(/[,[\].]+?/)).reduce((o,i)=>ct(o)?o:o[i],t);return ke(n)||n===t?ke(t[e])?r:t[e]:n},ur=t=>typeof t=="boolean";const Gu={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Kt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_r={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$M=ge.createContext(null),Qy=()=>ge.useContext($M);var JE=(t,e,r,n=!0)=>{const o={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(o,i,{get:()=>{const s=i;return e._proxyFormState[s]!==Kt.all&&(e._proxyFormState[s]=!n||Kt.all),r&&(r[s]=!0),t[s]}});return o},Tt=t=>We(t)&&!Object.keys(t).length,XE=(t,e,r,n)=>{r(t);const{name:o,...i}=t;return Tt(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(s=>e[s]===(!n||Kt.all))},Pl=t=>Array.isArray(t)?t:[t],ZE=(t,e,r)=>!t||!e||t===e||Pl(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function qy(t){const e=ge.useRef(t);e.current=t,ge.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function DM(t){const e=Qy(),{control:r=e.control,disabled:n,name:o,exact:i}=t||{},[s,a]=ge.useState(r._formState),l=ge.useRef(!0),u=ge.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=ge.useRef(o);return p.current=o,qy({disabled:n,next:d=>l.current&&ZE(p.current,d.name,i)&&XE(d,u.current,r._updateFormState)&&a({...r._formState,...d}),subject:r._subjects.state}),ge.useEffect(()=>(l.current=!0,u.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),JE(s,r,u.current,!1)}var cr=t=>typeof t=="string",eC=(t,e,r,n,o)=>cr(t)?(n&&e.watch.add(t),$(r,t,o)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),$(r,i))):(n&&(e.watchAll=!0),r);function tC(t){const e=Qy(),{control:r=e.control,name:n,defaultValue:o,disabled:i,exact:s}=t||{},a=ge.useRef(n);a.current=n,qy({disabled:i,subject:r._subjects.values,next:p=>{ZE(a.current,p.name,s)&&u(Gt(eC(a.current,r._names,p.values||r._formValues,!1,o)))}});const[l,u]=ge.useState(r._getWatch(n,o));return ge.useEffect(()=>r._removeUnmounted()),l}var Ky=t=>/^\w*$/.test(t),rC=t=>ja(t.replace(/["|']|\]/g,"").split(/\.|\[/));function de(t,e,r){let n=-1;const o=Ky(e)?[e]:rC(e),i=o.length,s=i-1;for(;++n<i;){const a=o[n];let l=r;if(n!==s){const u=t[a];l=We(u)||Array.isArray(u)?u:isNaN(+o[n+1])?{}:[]}t[a]=l,t=t[a]}return t}function FM(t){const e=Qy(),{name:r,disabled:n,control:o=e.control,shouldUnregister:i}=t,s=YE(o._names.array,r),a=tC({control:o,name:r,defaultValue:$(o._formValues,r,$(o._defaultValues,r,t.defaultValue)),exact:!0}),l=DM({control:o,name:r}),u=ge.useRef(o.register(r,{...t.rules,value:a}));return u.current=o.register(r,t.rules),ge.useEffect(()=>{const p=o._options.shouldUnregister||i,d=(f,y)=>{const v=$(o._fields,f);v&&(v._f.mount=y)};if(d(r,!0),p){const f=Gt($(o._options.defaultValues,r));de(o._defaultValues,r,f),ke($(o._formValues,r))&&de(o._formValues,r,f)}return()=>{(s?p&&!o._state.action:p)?o.unregister(r):d(r,!1)}},[r,o,s,i]),ge.useEffect(()=>{$(o._fields,r)&&o._updateDisabledField({disabled:n,fields:o._fields,name:r,value:$(o._fields,r)._f.value})},[n,r,o]),{field:{name:r,value:a,...ur(n)||ur(l.disabled)?{disabled:l.disabled||n}:{},onChange:ge.useCallback(p=>u.current.onChange({target:{value:KE(p),name:r},type:Gu.CHANGE}),[r]),onBlur:ge.useCallback(()=>u.current.onBlur({target:{value:$(o._formValues,r),name:r},type:Gu.BLUR}),[r,o]),ref:p=>{const d=$(o._fields,r);d&&p&&(d._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:f=>p.setCustomValidity(f),reportValidity:()=>p.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!$(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!$(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!$(l.touchedFields,r)},error:{enumerable:!0,get:()=>$(l.errors,r)}})}}const fr=t=>t.render(FM(t));var MM=(t,e,r,n,o)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:o||!0}}:{},t0=t=>({isOnSubmit:!t||t===Kt.onSubmit,isOnBlur:t===Kt.onBlur,isOnChange:t===Kt.onChange,isOnAll:t===Kt.all,isOnTouch:t===Kt.onTouched}),r0=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Il=(t,e,r,n)=>{for(const o of r||Object.keys(t)){const i=$(t,o);if(i){const{_f:s,...a}=i;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],o)&&!n)break;if(s.ref&&e(s.ref,s.name)&&!n)break}else We(a)&&Il(a,e)}}};var LM=(t,e,r)=>{const n=ja($(t,r));return de(n,"root",e[r]),de(t,r,n),t},Yy=t=>t.type==="file",Xr=t=>typeof t=="function",Hu=t=>{if(!Hy)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Nl=t=>cr(t),Jy=t=>t.type==="radio",Qu=t=>t instanceof RegExp;const n0={value:!1,isValid:!1},o0={value:!0,isValid:!0};var nC=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ke(t[0].attributes.value)?ke(t[0].value)||t[0].value===""?o0:{value:t[0].value,isValid:!0}:o0:n0}return n0};const i0={isValid:!1,value:null};var oC=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,i0):i0;function s0(t,e,r="validate"){if(Nl(t)||Array.isArray(t)&&t.every(Nl)||ur(t)&&!t)return{type:r,message:Nl(t)?t:"",ref:e}}var Eo=t=>We(t)&&!Qu(t)?t:{value:t,message:""},a0=async(t,e,r,n,o)=>{const{ref:i,refs:s,required:a,maxLength:l,minLength:u,min:p,max:d,pattern:f,validate:y,name:v,valueAsNumber:S,mount:P,disabled:m}=t._f,h=$(e,v);if(!P||m)return{};const g=s?s[0]:i,E=H=>{n&&g.reportValidity&&(g.setCustomValidity(ur(H)?"":H||""),g.reportValidity())},A={},b=Jy(i),T=Oa(i),O=b||T,Q=(S||Yy(i))&&ke(i.value)&&ke(h)||Hu(i)&&i.value===""||h===""||Array.isArray(h)&&!h.length,V=MM.bind(null,v,r,A),ve=(H,U,ae,je=_r.maxLength,Re=_r.minLength)=>{const nt=H?U:ae;A[v]={type:H?je:Re,message:nt,ref:i,...V(H?je:Re,nt)}};if(o?!Array.isArray(h)||!h.length:a&&(!O&&(Q||ct(h))||ur(h)&&!h||T&&!nC(s).isValid||b&&!oC(s).isValid)){const{value:H,message:U}=Nl(a)?{value:!!a,message:a}:Eo(a);if(H&&(A[v]={type:_r.required,message:U,ref:g,...V(_r.required,U)},!r))return E(U),A}if(!Q&&(!ct(p)||!ct(d))){let H,U;const ae=Eo(d),je=Eo(p);if(!ct(h)&&!isNaN(h)){const Re=i.valueAsNumber||h&&+h;ct(ae.value)||(H=Re>ae.value),ct(je.value)||(U=Re<je.value)}else{const Re=i.valueAsDate||new Date(h),nt=L=>new Date(new Date().toDateString()+" "+L),R=i.type=="time",W=i.type=="week";cr(ae.value)&&h&&(H=R?nt(h)>nt(ae.value):W?h>ae.value:Re>new Date(ae.value)),cr(je.value)&&h&&(U=R?nt(h)<nt(je.value):W?h<je.value:Re<new Date(je.value))}if((H||U)&&(ve(!!H,ae.message,je.message,_r.max,_r.min),!r))return E(A[v].message),A}if((l||u)&&!Q&&(cr(h)||o&&Array.isArray(h))){const H=Eo(l),U=Eo(u),ae=!ct(H.value)&&h.length>+H.value,je=!ct(U.value)&&h.length<+U.value;if((ae||je)&&(ve(ae,H.message,U.message),!r))return E(A[v].message),A}if(f&&!Q&&cr(h)){const{value:H,message:U}=Eo(f);if(Qu(H)&&!h.match(H)&&(A[v]={type:_r.pattern,message:U,ref:i,...V(_r.pattern,U)},!r))return E(U),A}if(y){if(Xr(y)){const H=await y(h,e),U=s0(H,g);if(U&&(A[v]={...U,...V(_r.validate,U.message)},!r))return E(U.message),A}else if(We(y)){let H={};for(const U in y){if(!Tt(H)&&!r)break;const ae=s0(await y[U](h,e),g,U);ae&&(H={...ae,...V(U,ae.message)},E(ae.message),r&&(A[v]=H))}if(!Tt(H)&&(A[v]={ref:g,...H},!r))return A}}return E(!0),A};function BM(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=ke(t)?n++:t[e[n++]];return t}function UM(t){for(const e in t)if(t.hasOwnProperty(e)&&!ke(t[e]))return!1;return!0}function Je(t,e){const r=Array.isArray(e)?e:Ky(e)?[e]:rC(e),n=r.length===1?t:BM(t,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(We(n)&&Tt(n)||Array.isArray(n)&&UM(n))&&Je(t,r.slice(0,-1)),t}function ad(){let t=[];return{get observers(){return t},next:o=>{for(const i of t)i.next&&i.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(i=>i!==o)}}),unsubscribe:()=>{t=[]}}}var qu=t=>ct(t)||!qE(t);function jn(t,e){if(qu(t)||qu(e))return t===e;if(Qo(t)&&Qo(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const o of r){const i=t[o];if(!n.includes(o))return!1;if(o!=="ref"){const s=e[o];if(Qo(i)&&Qo(s)||We(i)&&We(s)||Array.isArray(i)&&Array.isArray(s)?!jn(i,s):i!==s)return!1}}return!0}var iC=t=>t.type==="select-multiple",WM=t=>Jy(t)||Oa(t),ld=t=>Hu(t)&&t.isConnected,sC=t=>{for(const e in t)if(Xr(t[e]))return!0;return!1};function Ku(t,e={}){const r=Array.isArray(t);if(We(t)||r)for(const n in t)Array.isArray(t[n])||We(t[n])&&!sC(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Ku(t[n],e[n])):ct(t[n])||(e[n]=!0);return e}function aC(t,e,r){const n=Array.isArray(t);if(We(t)||n)for(const o in t)Array.isArray(t[o])||We(t[o])&&!sC(t[o])?ke(e)||qu(r[o])?r[o]=Array.isArray(t[o])?Ku(t[o],[]):{...Ku(t[o])}:aC(t[o],ct(e)?{}:e[o],r[o]):r[o]=!jn(t[o],e[o]);return r}var ud=(t,e)=>aC(t,e,Ku(e)),lC=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ke(t)?t:e?t===""?NaN:t&&+t:r&&cr(t)?new Date(t):n?n(t):t;function cd(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return Yy(e)?e.files:Jy(e)?oC(t.refs).value:iC(e)?[...e.selectedOptions].map(({value:r})=>r):Oa(e)?nC(t.refs).value:lC(ke(e.value)?t.ref.value:e.value,t)}var zM=(t,e,r,n)=>{const o={};for(const i of t){const s=$(e,i);s&&de(o,i,s._f)}return{criteriaMode:r,names:[...t],fields:o,shouldUseNativeValidation:n}},fs=t=>ke(t)?t:Qu(t)?t.source:We(t)?Qu(t.value)?t.value.source:t.value:t,VM=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function l0(t,e,r){const n=$(t,r);if(n||Ky(r))return{error:n,name:r};const o=r.split(".");for(;o.length;){const i=o.join("."),s=$(e,i),a=$(t,i);if(s&&!Array.isArray(s)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};o.pop()}return{name:r}}var GM=(t,e,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(e||t):(r?n.isOnBlur:o.isOnBlur)?!t:(r?n.isOnChange:o.isOnChange)?t:!0,HM=(t,e)=>!ja($(t,e)).length&&Je(t,e);const QM={mode:Kt.onSubmit,reValidateMode:Kt.onChange,shouldFocusError:!0};function qM(t={},e){let r={...QM,...t},n={submitCount:0,isDirty:!1,isLoading:Xr(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},o={},i=We(r.defaultValues)||We(r.values)?Gt(r.defaultValues||r.values)||{}:{},s=r.shouldUnregister?{}:Gt(i),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,p=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:ad(),array:ad(),state:ad()},y=t.resetOptions&&t.resetOptions.keepDirtyValues,v=t0(r.mode),S=t0(r.reValidateMode),P=r.criteriaMode===Kt.all,m=_=>w=>{clearTimeout(p),p=setTimeout(_,w)},h=async _=>{if(d.isValid||_){const w=r.resolver?Tt((await Q()).errors):await ve(o,!0);w!==n.isValid&&f.state.next({isValid:w})}},g=_=>d.isValidating&&f.state.next({isValidating:_}),E=(_,w=[],C,M,j=!0,k=!0)=>{if(M&&C){if(a.action=!0,k&&Array.isArray($(o,_))){const B=C($(o,_),M.argA,M.argB);j&&de(o,_,B)}if(k&&Array.isArray($(n.errors,_))){const B=C($(n.errors,_),M.argA,M.argB);j&&de(n.errors,_,B),HM(n.errors,_)}if(d.touchedFields&&k&&Array.isArray($(n.touchedFields,_))){const B=C($(n.touchedFields,_),M.argA,M.argB);j&&de(n.touchedFields,_,B)}d.dirtyFields&&(n.dirtyFields=ud(i,s)),f.state.next({name:_,isDirty:U(_,w),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else de(s,_,w)},A=(_,w)=>{de(n.errors,_,w),f.state.next({errors:n.errors})},b=(_,w,C,M)=>{const j=$(o,_);if(j){const k=$(s,_,ke(C)?$(i,_):C);ke(k)||M&&M.defaultChecked||w?de(s,_,w?k:cd(j._f)):Re(_,k),a.mount&&h()}},T=(_,w,C,M,j)=>{let k=!1,B=!1;const fe={name:_};if(!C||M){d.isDirty&&(B=n.isDirty,n.isDirty=fe.isDirty=U(),k=B!==fe.isDirty);const $e=jn($(i,_),w);B=$(n.dirtyFields,_),$e?Je(n.dirtyFields,_):de(n.dirtyFields,_,!0),fe.dirtyFields=n.dirtyFields,k=k||d.dirtyFields&&B!==!$e}if(C){const $e=$(n.touchedFields,_);$e||(de(n.touchedFields,_,C),fe.touchedFields=n.touchedFields,k=k||d.touchedFields&&$e!==C)}return k&&j&&f.state.next(fe),k?fe:{}},O=(_,w,C,M)=>{const j=$(n.errors,_),k=d.isValid&&ur(w)&&n.isValid!==w;if(t.delayError&&C?(u=m(()=>A(_,C)),u(t.delayError)):(clearTimeout(p),u=null,C?de(n.errors,_,C):Je(n.errors,_)),(C?!jn(j,C):j)||!Tt(M)||k){const B={...M,...k&&ur(w)?{isValid:w}:{},errors:n.errors,name:_};n={...n,...B},f.state.next(B)}g(!1)},Q=async _=>r.resolver(s,r.context,zM(_||l.mount,o,r.criteriaMode,r.shouldUseNativeValidation)),V=async _=>{const{errors:w}=await Q(_);if(_)for(const C of _){const M=$(w,C);M?de(n.errors,C,M):Je(n.errors,C)}else n.errors=w;return w},ve=async(_,w,C={valid:!0})=>{for(const M in _){const j=_[M];if(j){const{_f:k,...B}=j;if(k){const fe=l.array.has(k.name),$e=await a0(j,s,P,r.shouldUseNativeValidation&&!w,fe);if($e[k.name]&&(C.valid=!1,w))break;!w&&($($e,k.name)?fe?LM(n.errors,$e,k.name):de(n.errors,k.name,$e[k.name]):Je(n.errors,k.name))}B&&await ve(B,w,C)}}return C.valid},H=()=>{for(const _ of l.unMount){const w=$(o,_);w&&(w._f.refs?w._f.refs.every(C=>!ld(C)):!ld(w._f.ref))&&D(_)}l.unMount=new Set},U=(_,w)=>(_&&w&&de(s,_,w),!jn(Ee(),i)),ae=(_,w,C)=>eC(_,l,{...a.mount?s:ke(w)?i:cr(_)?{[_]:w}:w},C,w),je=_=>ja($(a.mount?s:i,_,t.shouldUnregister?$(i,_,[]):[])),Re=(_,w,C={})=>{const M=$(o,_);let j=w;if(M){const k=M._f;k&&(!k.disabled&&de(s,_,lC(w,k)),j=Hu(k.ref)&&ct(w)?"":w,iC(k.ref)?[...k.ref.options].forEach(B=>B.selected=j.includes(B.value)):k.refs?Oa(k.ref)?k.refs.length>1?k.refs.forEach(B=>(!B.defaultChecked||!B.disabled)&&(B.checked=Array.isArray(j)?!!j.find(fe=>fe===B.value):j===B.value)):k.refs[0]&&(k.refs[0].checked=!!j):k.refs.forEach(B=>B.checked=B.value===j):Yy(k.ref)?k.ref.value="":(k.ref.value=j,k.ref.type||f.values.next({name:_,values:{...s}})))}(C.shouldDirty||C.shouldTouch)&&T(_,j,C.shouldTouch,C.shouldDirty,!0),C.shouldValidate&&le(_)},nt=(_,w,C)=>{for(const M in w){const j=w[M],k=`${_}.${M}`,B=$(o,k);(l.array.has(_)||!qu(j)||B&&!B._f)&&!Qo(j)?nt(k,j,C):Re(k,j,C)}},R=(_,w,C={})=>{const M=$(o,_),j=l.array.has(_),k=Gt(w);de(s,_,k),j?(f.array.next({name:_,values:{...s}}),(d.isDirty||d.dirtyFields)&&C.shouldDirty&&f.state.next({name:_,dirtyFields:ud(i,s),isDirty:U(_,k)})):M&&!M._f&&!ct(k)?nt(_,k,C):Re(_,k,C),r0(_,l)&&f.state.next({...n}),f.values.next({name:_,values:{...s}}),!a.mount&&e()},W=async _=>{const w=_.target;let C=w.name,M=!0;const j=$(o,C),k=()=>w.type?cd(j._f):KE(_),B=fe=>{M=Number.isNaN(fe)||fe===$(s,C,fe)};if(j){let fe,$e;const $a=k(),fo=_.type===Gu.BLUR||_.type===Gu.FOCUS_OUT,hC=!VM(j._f)&&!r.resolver&&!$(n.errors,C)&&!j._f.deps||GM(fo,$(n.touchedFields,C),n.isSubmitted,S,v),Mc=r0(C,l,fo);de(s,C,$a),fo?(j._f.onBlur&&j._f.onBlur(_),u&&u(0)):j._f.onChange&&j._f.onChange(_);const Lc=T(C,$a,fo,!1),yC=!Tt(Lc)||Mc;if(!fo&&f.values.next({name:C,type:_.type,values:{...s}}),hC)return d.isValid&&h(),yC&&f.state.next({name:C,...Mc?{}:Lc});if(!fo&&Mc&&f.state.next({...n}),g(!0),r.resolver){const{errors:rg}=await Q([C]);if(B($a),M){const gC=l0(n.errors,o,C),ng=l0(rg,o,gC.name||C);fe=ng.error,C=ng.name,$e=Tt(rg)}}else fe=(await a0(j,s,P,r.shouldUseNativeValidation))[C],B($a),M&&(fe?$e=!1:d.isValid&&($e=await ve(o,!0)));M&&(j._f.deps&&le(j._f.deps),O(C,$e,fe,Lc))}},L=(_,w)=>{if($(n.errors,w)&&_.focus)return _.focus(),1},le=async(_,w={})=>{let C,M;const j=Pl(_);if(g(!0),r.resolver){const k=await V(ke(_)?_:j);C=Tt(k),M=_?!j.some(B=>$(k,B)):C}else _?(M=(await Promise.all(j.map(async k=>{const B=$(o,k);return await ve(B&&B._f?{[k]:B}:B)}))).every(Boolean),!(!M&&!n.isValid)&&h()):M=C=await ve(o);return f.state.next({...!cr(_)||d.isValid&&C!==n.isValid?{}:{name:_},...r.resolver||!_?{isValid:C}:{},errors:n.errors,isValidating:!1}),w.shouldFocus&&!M&&Il(o,L,_?j:l.mount),M},Ee=_=>{const w={...i,...a.mount?s:{}};return ke(_)?w:cr(_)?$(w,_):_.map(C=>$(w,C))},mr=(_,w)=>({invalid:!!$((w||n).errors,_),isDirty:!!$((w||n).dirtyFields,_),isTouched:!!$((w||n).touchedFields,_),error:$((w||n).errors,_)}),Bt=_=>{_&&Pl(_).forEach(w=>Je(n.errors,w)),f.state.next({errors:_?n.errors:{}})},Mr=(_,w,C)=>{const M=($(o,_,{_f:{}})._f||{}).ref;de(n.errors,_,{...w,ref:M}),f.state.next({name:_,errors:n.errors,isValid:!1}),C&&C.shouldFocus&&M&&M.focus&&M.focus()},Ut=(_,w)=>Xr(_)?f.values.subscribe({next:C=>_(ae(void 0,w),C)}):ae(_,w,!0),D=(_,w={})=>{for(const C of _?Pl(_):l.mount)l.mount.delete(C),l.array.delete(C),w.keepValue||(Je(o,C),Je(s,C)),!w.keepError&&Je(n.errors,C),!w.keepDirty&&Je(n.dirtyFields,C),!w.keepTouched&&Je(n.touchedFields,C),!r.shouldUnregister&&!w.keepDefaultValue&&Je(i,C);f.values.next({values:{...s}}),f.state.next({...n,...w.keepDirty?{isDirty:U()}:{}}),!w.keepIsValid&&h()},G=({disabled:_,name:w,field:C,fields:M,value:j})=>{if(ur(_)){const k=_?void 0:ke(j)?cd(C?C._f:$(M,w)._f):j;de(s,w,k),T(w,k,!1,!1,!0)}},Ie=(_,w={})=>{let C=$(o,_);const M=ur(w.disabled);return de(o,_,{...C||{},_f:{...C&&C._f?C._f:{ref:{name:_}},name:_,mount:!0,...w}}),l.mount.add(_),C?G({field:C,disabled:w.disabled,name:_}):b(_,!0,w.value),{...M?{disabled:w.disabled}:{},...r.progressive?{required:!!w.required,min:fs(w.min),max:fs(w.max),minLength:fs(w.minLength),maxLength:fs(w.maxLength),pattern:fs(w.pattern)}:{},name:_,onChange:W,onBlur:W,ref:j=>{if(j){Ie(_,w),C=$(o,_);const k=ke(j.value)&&j.querySelectorAll&&j.querySelectorAll("input,select,textarea")[0]||j,B=WM(k),fe=C._f.refs||[];if(B?fe.find($e=>$e===k):k===C._f.ref)return;de(o,_,{_f:{...C._f,...B?{refs:[...fe.filter(ld),k,...Array.isArray($(i,_))?[{}]:[]],ref:{type:k.type,name:_}}:{ref:k}}}),b(_,!1,void 0,k)}else C=$(o,_,{}),C._f&&(C._f.mount=!1),(r.shouldUnregister||w.shouldUnregister)&&!(YE(l.array,_)&&a.action)&&l.unMount.add(_)}}},or=()=>r.shouldFocusError&&Il(o,L,l.mount),dC=_=>{ur(_)&&(f.state.next({disabled:_}),Il(o,w=>{w.disabled=_},0,!1))},Zy=(_,w)=>async C=>{C&&(C.preventDefault&&C.preventDefault(),C.persist&&C.persist());let M=Gt(s);if(f.state.next({isSubmitting:!0}),r.resolver){const{errors:j,values:k}=await Q();n.errors=j,M=k}else await ve(o);Je(n.errors,"root"),Tt(n.errors)?(f.state.next({errors:{}}),await _(M,C)):(w&&await w({...n.errors},C),or(),setTimeout(or)),f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Tt(n.errors),submitCount:n.submitCount+1,errors:n.errors})},pC=(_,w={})=>{$(o,_)&&(ke(w.defaultValue)?R(_,$(i,_)):(R(_,w.defaultValue),de(i,_,w.defaultValue)),w.keepTouched||Je(n.touchedFields,_),w.keepDirty||(Je(n.dirtyFields,_),n.isDirty=w.defaultValue?U(_,$(i,_)):U()),w.keepError||(Je(n.errors,_),d.isValid&&h()),f.state.next({...n}))},eg=(_,w={})=>{const C=_?Gt(_):i,M=Gt(C),j=_&&!Tt(_)?M:i;if(w.keepDefaultValues||(i=C),!w.keepValues){if(w.keepDirtyValues||y)for(const k of l.mount)$(n.dirtyFields,k)?de(j,k,$(s,k)):R(k,$(j,k));else{if(Hy&&ke(_))for(const k of l.mount){const B=$(o,k);if(B&&B._f){const fe=Array.isArray(B._f.refs)?B._f.refs[0]:B._f.ref;if(Hu(fe)){const $e=fe.closest("form");if($e){$e.reset();break}}}}o={}}s=t.shouldUnregister?w.keepDefaultValues?Gt(i):{}:Gt(j),f.array.next({values:{...j}}),f.values.next({values:{...j}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!w.keepIsValid,a.watch=!!t.shouldUnregister,f.state.next({submitCount:w.keepSubmitCount?n.submitCount:0,isDirty:w.keepDirty?n.isDirty:!!(w.keepDefaultValues&&!jn(_,i)),isSubmitted:w.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:w.keepDirtyValues?n.dirtyFields:w.keepDefaultValues&&_?ud(i,_):{},touchedFields:w.keepTouched?n.touchedFields:{},errors:w.keepErrors?n.errors:{},isSubmitSuccessful:w.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},tg=(_,w)=>eg(Xr(_)?_(s):_,w);return{control:{register:Ie,unregister:D,getFieldState:mr,handleSubmit:Zy,setError:Mr,_executeSchema:Q,_getWatch:ae,_getDirty:U,_updateValid:h,_removeUnmounted:H,_updateFieldArray:E,_updateDisabledField:G,_getFieldArray:je,_reset:eg,_resetDefaultValues:()=>Xr(r.defaultValues)&&r.defaultValues().then(_=>{tg(_,r.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:_=>{n={...n,..._}},_disableForm:dC,_subjects:f,_proxyFormState:d,get _fields(){return o},get _formValues(){return s},get _state(){return a},set _state(_){a=_},get _defaultValues(){return i},get _names(){return l},set _names(_){l=_},get _formState(){return n},set _formState(_){n=_},get _options(){return r},set _options(_){r={...r,..._}}},trigger:le,register:Ie,handleSubmit:Zy,watch:Ut,setValue:R,getValues:Ee,reset:tg,resetField:pC,clearErrors:Bt,unregister:D,setError:Mr,setFocus:(_,w={})=>{const C=$(o,_),M=C&&C._f;if(M){const j=M.refs?M.refs[0]:M.ref;j.focus&&(j.focus(),w.shouldSelect&&j.select())}},getFieldState:mr}}function Xy(t={}){const e=ge.useRef(),r=ge.useRef(),[n,o]=ge.useState({isDirty:!1,isValidating:!1,isLoading:Xr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:Xr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...qM(t,()=>o(s=>({...s}))),formState:n});const i=e.current.control;return i._options=t,qy({subject:i._subjects.state,next:s=>{XE(s,i._proxyFormState,i._updateFormState,!0)&&o({...i._formState})}}),ge.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ge.useEffect(()=>{if(i._proxyFormState.isDirty){const s=i._getDirty();s!==n.isDirty&&i._subjects.state.next({isDirty:s})}},[i,n.isDirty]),ge.useEffect(()=>{t.values&&!jn(t.values,r.current)?(i._reset(t.values,i._options.resetOptions),r.current=t.values):i._resetDefaultValues()},[t.values,i]),ge.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=JE(n,i),e.current}const KM=Gy(["block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"]);function Ar({className:t,...e}){const r=x.useMemo(()=>KM({className:t}),[t]);return c.jsx("input",{className:r,...e})}function YM({match:t,currentMatchRound:e,onSubmit:r,...n}){const{reset:o,handleSubmit:i,control:s}=Xy({defaultValues:{player_0:0,player_1:0,player_2:0,player_3:0,cumulatedThousands:0,roundCount:0,extendedRoundCount:0}}),a=x.useMemo(()=>Object.keys(t.players).map(p=>({...t.players[p],index:p.toString(),position:$c(p,e.roundCount)})),[t.players,e.roundCount]),l=x.useMemo(()=>i(u=>{if(!r)return;const p={...e,resultType:tr.Hotfix,playerResults:{0:{...e.playerResults[0],afterScore:parseInt(u.player_0,10)},1:{...e.playerResults[1],afterScore:parseInt(u.player_1,10)},2:{...e.playerResults[2],afterScore:parseInt(u.player_2,10)},3:{...e.playerResults[3],afterScore:parseInt(u.player_3,10)}},cumulatedThousands:parseInt(u.cumulatedThousands,10),roundCount:parseInt(u.roundCount,10),extendedRoundCount:parseInt(u.extendedRoundCount,10)};r(p)}),[e,i,r]);return x.useEffect(()=>{n.open&&o({player_0:e.playerResults[0].beforeScore,player_1:e.playerResults[1].beforeScore,player_2:e.playerResults[2].beforeScore,player_3:e.playerResults[3].beforeScore,cumulatedThousands:e.cumulatedThousands,roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount})},[e.cumulatedThousands,e.extendedRoundCount,e.playerResults,e.roundCount,n.open,o]),c.jsx(jr,{title:"手動調整分數",...n,children:c.jsxs("div",{className:"space-y-8",children:[c.jsx("div",{className:"space-y-2",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"w-1/2",children:"玩家"}),c.jsx("th",{className:"w-1/4",children:"現在分數"}),c.jsx("th",{className:"w-1/4",children:"新的分數"})]})}),c.jsxs("tbody",{children:[a.map(u=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:c.jsx(Ho,{player:u})}),c.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.playerResults[u.index].beforeScore}),c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:c.jsx(fr,{name:`player_${u.index}`,control:s,rules:{required:!0},render:({field:p})=>c.jsx(Ar,{className:"text-center",type:"number",...p})})})]},u.index)),c.jsxs("tr",{children:[c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"供托"}),c.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.cumulatedThousands}),c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:c.jsx(fr,{name:"cumulatedThousands",control:s,rules:{required:!0},render:({field:u})=>c.jsx(Ar,{className:"text-center",type:"number",...u})})})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"局數(東1局=1, 東2局=2, ...)"}),c.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.roundCount}),c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:c.jsx(fr,{name:"roundCount",control:s,rules:{required:!0},render:({field:u})=>c.jsx(Ar,{className:"text-center",type:"number",...u})})})]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"本場數"}),c.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.extendedRoundCount}),c.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:c.jsx(fr,{name:"extendedRoundCount",control:s,rules:{required:!0},render:({field:u})=>c.jsx(Ar,{className:"text-center",type:"number",...u})})})]})]})]})}),c.jsx("div",{className:"space-y-2",children:c.jsx(Se,{onClick:l,className:"w-full",children:"提交並更新直播畫面"})})]})})}function JM({params:{matchId:t}}){const{data:e,set:r}=Or("obs/1"),{match:n,matchRounds:o,matchCurrentRound:i,matchCurrentRoundDoras:s,updateCurrentMatchRound:a,pushMatchRound:l,setCurrentRoundDoras:u,setMatchName:p}=Qi(t),[d,f]=x.useState(void 0),[y,v]=pi(!1),[S,P]=x.useState({initialActivePlayerIndex:"0"}),m=xM(),[h,g]=pi(!1),[E,A]=pi(!1),b=x.useCallback(D=>{const G=D.currentTarget.getAttribute("data-player-index");!G||!(n!=null&&n.players[G])||a({playerResults:{...i==null?void 0:i.playerResults,[G]:{...i==null?void 0:i.playerResults[G],isRevealed:!(i!=null&&i.playerResults[G].isRevealed)}}})},[n==null?void 0:n.players,i==null?void 0:i.playerResults,a]),T=x.useCallback(D=>{const G=D.currentTarget.getAttribute("data-player-index");if(!G)return;const Ie=n==null?void 0:n.players[G];Ie&&m.showConfirmDialog({title:"確定要立直嗎？",content:`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Ie.name}！`,onClickOk:async()=>(a({playerResults:{...i==null?void 0:i.playerResults,[G]:{...i==null?void 0:i.playerResults[G],isRiichi:!0}}}),new Promise(or=>{setTimeout(or,3e3)}))})},[m,n==null?void 0:n.players,i==null?void 0:i.playerResults,a]),O=x.useCallback(D=>{var Ie;const G=parseInt((Ie=D.currentTarget)==null?void 0:Ie.getAttribute("data-index"),10);typeof G<"u"&&!Number.isNaN(G)&&f(G)},[]),Q=x.useCallback(D=>{if(typeof d<"u"){const G=D[0];if(!G)return;const Ie=[...s];d===-1?Ie.push(G):Ie[d]=G,u(Ie),f(void 0)}},[d,s,u]),V=x.useCallback(()=>{if(typeof d<"u"){const D=[...s];d>-1&&(D.splice(d,1),u(D),f(void 0))}},[d,s,u]),ve=x.useCallback(()=>{f(void 0)},[]),H=x.useCallback(D=>{const G=D==null?void 0:D.currentTarget.getAttribute("data-player-index");G&&(P({initialActivePlayerIndex:G}),v())},[v]),U=x.useCallback(()=>{g(!0)},[g]),ae=x.useCallback(()=>{A(!0)},[A]),je=x.useCallback(D=>{try{const G=q_(D.roundCount),Ie=D.playerResults[G].type===mt.Win,or=!Ie&&D.roundCount>=8;or&&alert("對局結束。"),a({...D,nextRoundType:or?Fe.End:Ie?Fe.Extended:Fe.NextRound}),v(!1)}catch(G){console.error(G)}},[v,a]),Re=x.useCallback(D=>{try{const G=q_(D.roundCount),Ie=D.playerResults[G].type!==mt.Win,or=Ie&&D.roundCount>=8;or&&alert("對局結束。"),a({...D,nextRoundType:or?Fe.End:Ie?Fe.NextRoundAndExtended:Fe.Extended}),g(!1)}catch(G){console.error(G)}},[g,a]),nt=x.useCallback(D=>{try{a({playerResults:D.playerResults,resultType:tr.Hotfix});const G={matchId:t,code:Qp(t,D.roundCount,D.extendedRoundCount),roundCount:D.roundCount,extendedRoundCount:D.extendedRoundCount,cumulatedThousands:D.cumulatedThousands,resultType:tr.Unknown,nextRoundType:Fe.Unknown,playerResults:K_(D.playerResults),doras:{}};l(G),A(!1)}catch(G){console.error(G)}},[t,l,A,a]),R=x.useCallback(()=>{if(!i)return;const D=i.nextRoundType===Fe.NextRound||i.nextRoundType===Fe.NextRoundAndExtended?i.roundCount+1:i.roundCount,G=i.nextRoundType===Fe.Extended||i.nextRoundType===Fe.NextRoundAndExtended?i.extendedRoundCount+1:0,Ie={matchId:t,code:Qp(t,D,G),roundCount:D,extendedRoundCount:G,cumulatedThousands:i.cumulatedThousands,resultType:tr.Unknown,nextRoundType:Fe.Unknown,playerResults:K_(i.playerResults),doras:{}};l(Ie),f(-1)},[i,t,l]),W=x.useCallback(()=>{r({matchId:t})},[t,r]),[L,le]=x.useState(null),Ee=x.useCallback(D=>{const G=D.currentTarget.getAttribute("data-player-index");typeof G>"u"||!(i!=null&&i.playerResults[G])||le({index:G,tiles:(i==null?void 0:i.playerResults[G].waitingTiles)??[]})},[i==null?void 0:i.playerResults]),mr=x.useCallback(()=>{le(null)},[]),Bt=x.useCallback(D=>{L&&(a({playerResults:{...i==null?void 0:i.playerResults,[L.index]:{...i==null?void 0:i.playerResults[L.index],waitingTiles:D}}}),le(null))},[L,i==null?void 0:i.playerResults,a]),Mr=x.useCallback(()=>{L&&(a({playerResults:{...i==null?void 0:i.playerResults,[L.index]:{...i==null?void 0:i.playerResults[L.index],waitingTiles:[]}}}),le(null))},[L,i==null?void 0:i.playerResults,a]),Ut=x.useCallback(D=>{if(D.preventDefault(),!n)return;const G=prompt("對局名稱",n.name);G&&p(G)},[n,p]);return!n||!i?c.jsx("div",{children:"對局讀取失敗。"}):c.jsxs("div",{children:[c.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[c.jsxs("div",{className:"flex flex-row items-center gap-x-4 text-white",children:[c.jsxs("div",{className:"p-2 pl-4 pr-10 flex items-center gap-x-8 transition-[width] text-[4rem]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[c.jsxs("div",{className:"text-[0.5em]",children:[c.jsxs("div",{className:"text-[0.5em]",children:[n.name," ",c.jsx("button",{type:"button",onClick:Ut,children:c.jsx("span",{className:"material-symbols-outlined text-sm underline decoration-dotted",children:"edit"})})]}),c.jsxs("div",{className:"flex gap-x-8 items-center",children:[c.jsx("div",{children:c.jsx(vn,{roundCount:i.roundCount,max:8})}),c.jsxs("div",{className:"flex flex-col justify-around",children:[c.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[c.jsx("div",{className:"flex-1",children:c.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2"})}),c.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:i.extendedRoundCount??0})]}),c.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[c.jsx("div",{className:"flex-1",children:c.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2"})}),c.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:i.cumulatedThousands??0})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-x-2",children:[s.map(D=>c.jsx(Ra,{className:"w-12 animate-[fadeIn_0.5s_ease-in-out]",children:D},D)),c.jsx(Se,{type:"button",color:"secondary",className:`${s.length===0&&"animate-bounce"}`,"data-index":"-1",onClick:O,children:"+懸賞"})]})]}),c.jsx("div",{className:"flex-1"}),c.jsx("div",{className:"shrink-0",children:(e==null?void 0:e.matchId)!==t&&c.jsx(Se,{color:"success",type:"button",className:"animate-pulse",onClick:W,children:"開始OBS"})})]}),c.jsxs("div",{className:"text-right space-x-4",children:[i.nextRoundType!==Fe.Unknown&&i.nextRoundType!==Fe.End&&c.jsxs(Se,{color:"success",type:"button",className:"animate-pulse",onClick:R,children:["進入",c.jsx(vn,{roundCount:i.nextRoundType===Fe.NextRound||i.nextRoundType===Fe.NextRoundAndExtended?i.roundCount+1:i.roundCount,extendedRoundCount:i.nextRoundType===Fe.Extended||i.nextRoundType===Fe.NextRoundAndExtended?i.extendedRoundCount+1:0})]}),c.jsx(Se,{color:"secondary",type:"button",onClick:U,children:"流局"})]}),c.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(D=>c.jsxs("div",{className:"flex gap-x-2 items-center",children:[c.jsx("div",{className:"flex-1 text-[2.5rem]",children:c.jsx(qi,{player:n.players[D],playerIndex:D,score:i.playerResults[D].afterScore,scoreChanges:i.playerResults[D].scoreChanges,isEast:Dc(D,i.roundCount),isRiichi:i.playerResults[D].isRiichi,waitingTiles:i.playerResults[D].waitingTiles,onClickWaitingTiles:Ee})}),c.jsx("div",{children:c.jsx("button",{type:"button",className:`${i.playerResults[D].isRevealed?"bg-blue-600 text-white":"bg-white text-blue-600 opacity-30"} h-16 w-16 border-2 border-blue-600  rounded-full text-lg`,onClick:b,"data-player-index":D,children:i.playerResults[D].isRevealed?"已副露":"副露?"})}),c.jsx("div",{children:c.jsx("button",{type:"button",className:`${i.playerResults[D].isRiichi?"bg-orange-600 text-white":"bg-white text-orange-600 opacity-30"} h-16 w-16 border-2 border-orange-600  rounded-full text-lg`,onClick:T,"data-player-index":D,children:i.playerResults[D].isRiichi?"已立直":"立直?"})}),c.jsx("div",{className:"pl-6",children:c.jsx(Se,{color:"danger",type:"button",onClick:H,"data-player-index":D,children:"和了"})})]}))}),c.jsx(Fc,{players:n.players,matchRounds:o??{},className:"w-full table-auto"}),c.jsx("div",{children:c.jsx(Se,{color:"secondary",type:"button",onClick:ae,children:"手動調整分數"})})]}),c.jsx(jr,{open:typeof d<"u",title:"選擇懸賞",onClose:ve,children:c.jsx(e0,{hideRedTiles:!0,onSubmit:Q,onRemove:V,canRemove:typeof d<"u"&&d>0})}),c.jsx(jr,{open:!!L,title:"選擇待牌",onClose:mr,children:c.jsx(e0,{hideRedTiles:!0,onSubmit:Bt,onRemove:Mr,defaultValue:L==null?void 0:L.tiles,multiple:!0,canRemove:!0})}),c.jsx(CM,{match:n,currentMatchRound:i,open:y,onSubmit:je,onClose:()=>v(!1),...S}),c.jsx(RM,{match:n,currentMatchRound:i,open:h,onSubmit:Re,onClose:()=>g(!1),...S}),c.jsx(YM,{match:n,currentMatchRound:i,open:E,onSubmit:nt,onClose:()=>A(!1),...S})]})}function $n({children:t,label:e,...r}){return c.jsx("div",{...r,children:c.jsxs("label",{children:[c.jsx("div",{className:"text-sm text-gray-800 mb-1",children:e}),c.jsx("div",{children:t})]})})}const XM=Gy(["block w-full rounded-md border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"]);function uC({className:t,...e}){const r=x.useMemo(()=>XM({className:t}),[t]);return c.jsx("input",{type:"color",className:r,...e})}const il={title:"",name:"新的玩家",color:"#FF0000",propicSrc:""};function cC({defaultValue:t,onSubmit:e}){const[r,n]=x.useState(il),{reset:o,getValues:i,control:s,handleSubmit:a}=Xy({defaultValues:il}),[{loading:l},u]=bM(e,[e]),p=x.useMemo(()=>a(f=>{u(f)}),[u,a]),d=x.useCallback(()=>{n(i())},[i]);return x.useEffect(()=>{o(t??il),n(t??il)},[t,o]),c.jsxs("form",{onSubmit:p,onBlur:d,className:"space-y-6",children:[c.jsx($n,{label:"顏色（務必選能看清楚白字的深色）",children:c.jsx(fr,{name:"color",control:s,render:({field:f})=>c.jsx(uC,{...f}),disabled:l})}),c.jsx($n,{label:"稱號",children:c.jsx(fr,{name:"title",control:s,render:({field:f})=>c.jsx(Ar,{type:"text",...f,placeholder:"例：天鳳鳳位、雀魂x段",disabled:l})})}),c.jsx($n,{className:"mb-6",label:"名字",children:c.jsx(fr,{name:"name",control:s,rules:{required:!0},render:({field:f})=>c.jsx(Ar,{...f}),disabled:l})}),c.jsxs($n,{className:"mb-6",label:"圖片URL (https://...)",children:[c.jsx(fr,{name:"propicSrc",control:s,render:({field:f})=>c.jsx(Ar,{type:"url",placeholder:"https://",...f,disabled:l})}),c.jsx("p",{className:"text-sm",children:"建議大小 360px * 500px (18:25)、使用去背的 .png"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"mb-2",children:"預覽"}),c.jsx("div",{className:"text-[4rem] p-4 bg-gray-800 text-white",children:c.jsx(qi,{player:r,score:25e3,waitingTiles:["5m","6m","7m"],isRiichi:!0,isEast:!0})})]}),c.jsx("div",{children:c.jsx(Se,{type:"submit",loading:l,children:"儲存"})})]})}function ZM(){const[t,e]=x.useState(),r=x.useMemo(()=>[],[]),[n,o]=pi(!1),i=x.useCallback(()=>o(!1),[o]),s=x.useCallback(()=>{e(void 0),o(!0)},[o]),a=x.useCallback(u=>{e(u),o(!0)},[o]),l=x.useCallback(()=>Promise.resolve(),[]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[c.jsx("div",{className:"shrink-0",children:c.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-4xl",children:"玩家"})}),c.jsx("div",{children:c.jsx(Se,{onClick:s,children:"新增"})})]}),c.jsx("div",{className:"space-y-2",children:r.map(u=>c.jsx(Ho,{player:u,onClickEdit:a}))})]}),c.jsx(jr,{title:"新增／修改玩家",open:n,onClose:i,children:c.jsx("div",{className:"container space-y-6",children:c.jsx(cC,{onSubmit:l,defaultValue:t})})})]})}const eL={0:"東",1:"南",2:"西",3:"北"};function tL({playerIndex:t,...e}){return c.jsx("span",{...e,children:eL[t]})}const rL={0:{title:"",name:"玩家A",color:"#6700cf"},1:{title:"",name:"玩家B",color:"#00b5de"},2:{title:"",name:"玩家C",color:"#e3277b"},3:{title:"",name:"玩家D",color:"#03ada5"}},nL=`${new Date().toISOString().substring(0,10)} 對局`;function oL(){const t=Z3(),[,e]=wP(),[r,n]=x.useState(rL),[o,i]=x.useState(),[s,a]=x.useState(nL),[l,u]=pi(!1),p=x.useCallback(S=>{const P=S.currentTarget.getAttribute("data-player-index");if(!P)return;const m=r[P];i({index:P,player:m}),u(!0)},[r,u]),d=x.useCallback(async S=>{o&&(n(P=>({...P,[o.index]:{...P[o.index],...S}})),u(!1))},[o,u]),f=x.useCallback(()=>{u(!1)},[u]),y=x.useCallback(S=>{const P=S.currentTarget;if(!P)return;const m=P.getAttribute("data-player-index");if(!m)return;const h=m==="0"?"1":m==="1"?"2":"3";n(g=>({...g,[m]:g[h],[h]:g[m]}))},[]),v=x.useCallback(async()=>{const S={code:pM(),name:s,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:{template:"mleague"},players:r},m={matchId:(await t.push("matches",S)).key,code:Qp(S.code,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]},1:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]},2:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]},3:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]}},doras:[]};await t.push("matchRounds",m),e(`/match/${m.matchId}/obs`)},[t,s,r,e]);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"container mx-auto max-w-screen-sm",children:c.jsxs("div",{className:"min-h-screen flex flex-col py-16 gap-y-4",children:[c.jsx("div",{className:"shrink-0",children:c.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"space-y-12",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-4xl",children:"對局"}),c.jsx($n,{label:"對局名稱",children:c.jsx(Ar,{name:"name",value:s,onChange:S=>a(S.currentTarget.value)})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-4xl",children:"玩家"}),c.jsx("div",{className:"space-y-2",children:["0","1","2","3"].map(S=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-x-2",children:[c.jsx("div",{className:"shrink-0",children:c.jsx("div",{className:"h-14 w-14 border-4 rounded border-black text-[2.5rem] flex items-center justify-center",children:c.jsx(tL,{playerIndex:S})})}),c.jsx("div",{className:"flex-1 text-[2.5em]",children:c.jsx(qi,{player:r[S],score:25e3})}),c.jsx("div",{className:"shrink-0 space-x-2",children:c.jsx(Se,{type:"button","data-player-index":S,onClick:p,disabled:!r[S],children:"修改"})})]},S),S!=="3"&&c.jsx("div",{className:"text-center",children:c.jsx(Se,{variant:"icon",color:"secondary",type:"button","data-player-index":S,onClick:y,children:c.jsx("span",{className:"material-symbols-outlined",children:"swap_vert"})})})]}))})]})]})}),c.jsx("div",{className:"shrink-0 space-y-4",children:c.jsx(Se,{size:"xlarge",className:"w-full",onClick:v,type:"submit",children:"開始對局"})})]})}),c.jsx(jr,{title:"修改玩家",open:l,onClose:f,children:c.jsx("div",{className:"container space-y-6",children:c.jsx(cC,{onSubmit:d,defaultValue:o==null?void 0:o.player})})})]})}function iL({team:t,onClickEdit:e,children:r,...n}){const o=x.useCallback(()=>{e==null||e(t)},[e,t]);return c.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})}),e&&c.jsx("div",{className:"shrink-0",children:c.jsx(Se,{variant:"icon",color:"inverted",type:"button",onClick:o,children:c.jsx("span",{className:"material-symbols-outlined",children:"edit"})})})]})}function sL(){const{data:t,update:e,push:r}=Or("teams"),n=x.useMemo(()=>Object.entries(t??{}).reverse().map(([m,h])=>({...h,_id:m})),[t]),[o,i]=pi(!1),{register:s,reset:a,handleSubmit:l,control:u}=Xy({defaultValues:{_id:void 0,name:"新的隊伍",color:"#000000"}}),p=tC({control:u}),d=x.useMemo(()=>({name:"隊員名字",title:p.name??"",color:p.color??"#000000"}),[p.color,p.name]),f=x.useRef(null),y=x.useCallback(()=>i(!1),[i]),v=x.useCallback(()=>{a({_id:"",name:"新的隊伍",color:"#000000"}),i(!0)},[a,i]),S=x.useCallback(m=>{a({...m}),i(!0)},[a,i]),P=x.useMemo(()=>l(m=>{m._id?e({[m._id]:m}):r(m),i(!1)}),[l,r,i,e]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[c.jsx("div",{className:"shrink-0",children:c.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-4xl",children:"隊伍"})}),c.jsx("div",{children:c.jsx(Se,{onClick:v,children:"新增"})})]}),c.jsx("div",{className:"space-y-2",children:n.map(m=>c.jsx(iL,{team:m,onClickEdit:S},m._id))})]}),c.jsx(jr,{title:"新增／修改隊伍",open:o,onClose:y,children:c.jsx("div",{className:"container",children:c.jsxs("form",{ref:f,onSubmit:P,children:[c.jsx("input",{type:"hidden",...s("_id")}),c.jsxs("div",{children:[c.jsx($n,{className:"mb-6",label:"名字",children:c.jsx(fr,{name:"name",control:u,rules:{required:!0},render:({field:m})=>c.jsx(Ar,{...m})})}),c.jsx($n,{className:"mb-6",label:"顏色（務必選能看清楚白字的深色）",children:c.jsx(fr,{name:"color",control:u,rules:{required:!0},render:({field:m})=>c.jsx(uC,{...m})})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"mb-2",children:"預覽"}),c.jsx("div",{className:"text-[4rem] px-4 pt-6 pb-1 bg-gray-800 text-white relative",children:c.jsx(qi,{player:d,score:25e3})})]}),c.jsxs("div",{className:"flex gap-x-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Se,{className:"w-full",color:"secondary",type:"button",onClick:y,children:"取消"})}),c.jsx("div",{className:"flex-1",children:c.jsx(Se,{className:"w-full",type:"submit",children:"儲存"})})]})]})})})]})}function aL({params:{obsRoomId:t}}){const{data:e}=Or(`obs/${t}`),r=x.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return console.log(e),!r||!r.matchId?c.jsx(c.Fragment,{children:"讀取中…"}):c.jsx(HE,{params:r})}function lL({params:{obsRoomId:t}}){const{data:e}=Or(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:o}=Qi((e==null?void 0:e.matchId)??"");return!r||!o?c.jsx("div",{children:"對局讀取失敗。"}):c.jsx("div",{children:c.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:c.jsx(Fc,{players:r.players,matchRounds:n,className:"w-full table-auto"})})})}function uL(){const{data:t}=Or("matches"),e=x.useMemo(()=>Object.entries(t??{}).reverse().map(([r,n])=>({...n,_id:r})),[t]);return c.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[c.jsx("div",{className:"shrink-0",children:c.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("div",{children:c.jsx("h1",{className:"text-4xl",children:"玩家"})})}),c.jsx("div",{className:"space-y-2",children:e.map(()=>"123")})]})}function fC({players:t,matchRounds:e}){return x.useMemo(()=>{const r=Object.values(e??{}),n=r[r.length-1];return[...r.map(o=>({name:o.resultType===tr.Hotfix?"分數調整":GE(o.roundCount,o.extendedRoundCount,8),p0:o.playerResults[0].beforeScore,p1:o.playerResults[1].beforeScore,p2:o.playerResults[2].beforeScore,p3:o.playerResults[3].beforeScore})),{name:"完結",p0:n.playerResults[0].afterScore,p1:n.playerResults[1].afterScore,p2:n.playerResults[2].afterScore,p3:n.playerResults[3].afterScore}]},[e]),c.jsx("div",{className:"bg-white"})}function cL({params:{obsRoomId:t}}){const{data:e}=Or(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:o}=Qi((e==null?void 0:e.matchId)??"");return!r||!o?c.jsx("div",{children:"對局讀取失敗。"}):c.jsx("div",{children:c.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:c.jsx(fC,{players:r.players,matchRounds:n})})})}function fL({params:{obsRoomId:t}}){const{data:e}=Or(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:o}=Qi((e==null?void 0:e.matchId)??""),[i,s]=x.useState(0);return x.useEffect(()=>{const l=setInterval(()=>{s(u=>1-u)},8e3);return()=>{clearInterval(l)}},[]),!r||!o?c.jsx("div",{children:"對局讀取失敗。"}):c.jsxs("div",{children:[c.jsx("div",{className:i===0?"block":"hidden",children:c.jsx(Fc,{players:r.players,matchRounds:n,className:"w-full table-auto"})}),c.jsx("div",{className:i===1?"block":"hidden",children:c.jsx(fC,{players:r.players,matchRounds:n})})]})}fd.createRoot(document.getElementById("root")).render(c.jsx(ge.StrictMode,{children:c.jsx(X3,{children:c.jsx(SM,{children:c.jsxs(AP,{children:[c.jsx(kt,{path:"/",component:rM}),c.jsx(kt,{path:"/create-match",component:oL}),c.jsx(kt,{path:"/match/:matchId",component:gM}),c.jsx(kt,{path:"/match/:matchId/obs",component:HE}),c.jsx(kt,{path:"/match/:matchId/control",component:JM}),c.jsx(kt,{path:"/obs/:obsRoomId",component:aL}),c.jsx(kt,{path:"/obs/:obsRoomId/score",component:lL}),c.jsx(kt,{path:"/obs/:obsRoomId/chart",component:cL}),c.jsx(kt,{path:"/obs/:obsRoomId/carousel",component:fL}),c.jsx(kt,{path:"/players",component:ZM}),c.jsx(kt,{path:"/teams",component:sL}),c.jsx(kt,{path:"/matches",component:uL})]})})})}));NP();
