var IS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var D=(t,e,r)=>(IS(t,e,"read from private field"),r?r.call(t):e.get(t)),de=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},oe=(t,e,r,n)=>(IS(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var tv=(t,e,r,n)=>({set _(i){oe(t,e,i,r)},get _(){return D(t,e,n)}}),Oe=(t,e,r)=>(IS(t,e,"access private method"),r);function xJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _J(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var zV={exports:{}},iw={},GV={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=Symbol.for("react.element"),wJ=Symbol.for("react.portal"),SJ=Symbol.for("react.fragment"),EJ=Symbol.for("react.strict_mode"),AJ=Symbol.for("react.profiler"),CJ=Symbol.for("react.provider"),TJ=Symbol.for("react.context"),PJ=Symbol.for("react.forward_ref"),IJ=Symbol.for("react.suspense"),NJ=Symbol.for("react.memo"),kJ=Symbol.for("react.lazy"),f$=Symbol.iterator;function OJ(t){return t===null||typeof t!="object"?null:(t=f$&&t[f$]||t["@@iterator"],typeof t=="function"?t:null)}var qV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HV=Object.assign,KV={};function jd(t,e,r){this.props=t,this.context=e,this.refs=KV,this.updater=r||qV}jd.prototype.isReactComponent={};jd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YV(){}YV.prototype=jd.prototype;function lN(t,e,r){this.props=t,this.context=e,this.refs=KV,this.updater=r||qV}var cN=lN.prototype=new YV;cN.constructor=lN;HV(cN,jd.prototype);cN.isPureReactComponent=!0;var d$=Array.isArray,QV=Object.prototype.hasOwnProperty,uN={current:null},XV={key:!0,ref:!0,__self:!0,__source:!0};function JV(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)QV.call(e,n)&&!XV.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:qy,type:t,key:o,ref:s,props:i,_owner:uN.current}}function RJ(t,e){return{$$typeof:qy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fN(t){return typeof t=="object"&&t!==null&&t.$$typeof===qy}function jJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var h$=/\/+/g;function NS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jJ(""+t.key):e.toString(36)}function c0(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qy:case wJ:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+NS(s,0):n,d$(i)?(r="",t!=null&&(r=t.replace(h$,"$&/")+"/"),c0(i,e,r,"",function(c){return c})):i!=null&&(fN(i)&&(i=RJ(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(h$,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",d$(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+NS(o,a);s+=c0(o,e,r,l,i)}else if(l=OJ(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+NS(o,a++),s+=c0(o,e,r,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function rv(t,e,r){if(t==null)return t;var n=[],i=0;return c0(t,n,"","",function(o){return e.call(r,o,i++)}),n}function $J(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},u0={transition:null},DJ={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:u0,ReactCurrentOwner:uN};ze.Children={map:rv,forEach:function(t,e,r){rv(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return rv(t,function(){e++}),e},toArray:function(t){return rv(t,function(e){return e})||[]},only:function(t){if(!fN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=jd;ze.Fragment=SJ;ze.Profiler=AJ;ze.PureComponent=lN;ze.StrictMode=EJ;ze.Suspense=IJ;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DJ;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=HV({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=uN.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)QV.call(e,l)&&!XV.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:qy,type:t.type,key:i,ref:o,props:n,_owner:s}};ze.createContext=function(t){return t={$$typeof:TJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CJ,_context:t},t.Consumer=t};ze.createElement=JV;ze.createFactory=function(t){var e=JV.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:PJ,render:t}};ze.isValidElement=fN;ze.lazy=function(t){return{$$typeof:kJ,_payload:{_status:-1,_result:t},_init:$J}};ze.memo=function(t,e){return{$$typeof:NJ,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=u0.transition;u0.transition={};try{t()}finally{u0.transition=e}};ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.useCallback=function(t,e){return Pn.current.useCallback(t,e)};ze.useContext=function(t){return Pn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Pn.current.useEffect(t,e)};ze.useId=function(){return Pn.current.useId()};ze.useImperativeHandle=function(t,e,r){return Pn.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Pn.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return Pn.current.useReducer(t,e,r)};ze.useRef=function(t){return Pn.current.useRef(t)};ze.useState=function(t){return Pn.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return Pn.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return Pn.current.useTransition()};ze.version="18.2.0";GV.exports=ze;var E=GV.exports;const k=ot(E),MJ=xJ({__proto__:null,default:k},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FJ=E,LJ=Symbol.for("react.element"),BJ=Symbol.for("react.fragment"),UJ=Object.prototype.hasOwnProperty,VJ=FJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WJ={key:!0,ref:!0,__self:!0,__source:!0};function ZV(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)UJ.call(e,n)&&!WJ.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:LJ,type:t,key:o,ref:s,props:i,_owner:VJ.current}}iw.Fragment=BJ;iw.jsx=ZV;iw.jsxs=ZV;zV.exports=iw;var d=zV.exports,uC={},e6={exports:{}},si={},t6={exports:{}},r6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,L){var z=$.length;$.push(L);e:for(;0<z;){var ce=z-1>>>1,te=$[ce];if(0<i(te,L))$[ce]=L,$[z]=te,z=ce;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var L=$[0],z=$.pop();if(z!==L){$[0]=z;e:for(var ce=0,te=$.length,be=te>>>1;ce<be;){var st=2*(ce+1)-1,rt=$[st],Vt=st+1,pt=$[Vt];if(0>i(rt,z))Vt<te&&0>i(pt,rt)?($[ce]=pt,$[Vt]=z,ce=Vt):($[ce]=rt,$[st]=z,ce=st);else if(Vt<te&&0>i(pt,z))$[ce]=pt,$[Vt]=z,ce=Vt;else break e}}return L}function i($,L){var z=$.sortIndex-L.sortIndex;return z!==0?z:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,f=null,h=3,p=!1,m=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var L=r(c);L!==null;){if(L.callback===null)n(c);else if(L.startTime<=$)n(c),L.sortIndex=L.expirationTime,e(l,L);else break;L=r(c)}}function S($){if(y=!1,x($),!m)if(r(l)!==null)m=!0,V(_);else{var L=r(c);L!==null&&F(S,L.startTime-$)}}function _($,L){m=!1,y&&(y=!1,b(C),C=-1),p=!0;var z=h;try{for(x(L),f=r(l);f!==null&&(!(f.expirationTime>L)||$&&!P());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,h=f.priorityLevel;var te=ce(f.expirationTime<=L);L=t.unstable_now(),typeof te=="function"?f.callback=te:f===r(l)&&n(l),x(L)}else n(l);f=r(l)}if(f!==null)var be=!0;else{var st=r(c);st!==null&&F(S,st.startTime-L),be=!1}return be}finally{f=null,h=z,p=!1}}var w=!1,A=null,C=-1,I=5,T=-1;function P(){return!(t.unstable_now()-T<I)}function O(){if(A!==null){var $=t.unstable_now();T=$;var L=!0;try{L=A(!0,$)}finally{L?N():(w=!1,A=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,B=R.port2;R.port1.onmessage=O,N=function(){B.postMessage(null)}}else N=function(){g(O,0)};function V($){A=$,w||(w=!0,N())}function F($,L){C=g(function(){$(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,V(_))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var z=h;h=L;try{return $()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=h;h=$;try{return L()}finally{h=z}},t.unstable_scheduleCallback=function($,L,z){var ce=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ce+z:ce):z=ce,$){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,$={id:u++,callback:L,priorityLevel:$,startTime:z,expirationTime:te,sortIndex:-1},z>ce?($.sortIndex=z,e(c,$),r(l)===null&&$===r(c)&&(y?(b(C),C=-1):y=!0,F(S,z-ce))):($.sortIndex=te,e(l,$),m||p||(m=!0,V(_))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var L=h;return function(){var z=h;h=L;try{return $.apply(this,arguments)}finally{h=z}}}})(r6);t6.exports=r6;var zJ=t6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n6=E,ni=zJ;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i6=new Set,Xp={};function jc(t,e){kf(t,e),kf(t+"Capture",e)}function kf(t,e){for(Xp[t]=e,t=0;t<e.length;t++)i6.add(e[t])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fC=Object.prototype.hasOwnProperty,GJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p$={},m$={};function qJ(t){return fC.call(m$,t)?!0:fC.call(p$,t)?!1:GJ.test(t)?m$[t]=!0:(p$[t]=!0,!1)}function HJ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KJ(t,e,r,n){if(e===null||typeof e>"u"||HJ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qr[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qr[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qr[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qr[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qr[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qr[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qr[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qr[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qr[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var dN=/[\-:]([a-z])/g;function hN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dN,hN);Qr[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dN,hN);Qr[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dN,hN);Qr[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qr[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});Qr.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qr[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function pN(t,e,r,n){var i=Qr.hasOwnProperty(e)?Qr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KJ(e,r,i,n)&&(r=null),n||i===null?qJ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ks=n6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nv=Symbol.for("react.element"),_u=Symbol.for("react.portal"),wu=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),dC=Symbol.for("react.profiler"),o6=Symbol.for("react.provider"),s6=Symbol.for("react.context"),yN=Symbol.for("react.forward_ref"),hC=Symbol.for("react.suspense"),pC=Symbol.for("react.suspense_list"),gN=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),a6=Symbol.for("react.offscreen"),y$=Symbol.iterator;function ph(t){return t===null||typeof t!="object"?null:(t=y$&&t[y$]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,kS;function Yh(t){if(kS===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);kS=e&&e[1]||""}return`
`+kS+t}var OS=!1;function RS(t,e){if(!t||OS)return"";OS=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{OS=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Yh(t):""}function YJ(t){switch(t.tag){case 5:return Yh(t.type);case 16:return Yh("Lazy");case 13:return Yh("Suspense");case 19:return Yh("SuspenseList");case 0:case 2:case 15:return t=RS(t.type,!1),t;case 11:return t=RS(t.type.render,!1),t;case 1:return t=RS(t.type,!0),t;default:return""}}function mC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wu:return"Fragment";case _u:return"Portal";case dC:return"Profiler";case mN:return"StrictMode";case hC:return"Suspense";case pC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s6:return(t.displayName||"Context")+".Consumer";case o6:return(t._context.displayName||"Context")+".Provider";case yN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gN:return e=t.displayName||null,e!==null?e:mC(t.type)||"Memo";case Hs:e=t._payload,t=t._init;try{return mC(t(e))}catch{}}return null}function QJ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mC(e);case 8:return e===mN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XJ(t){var e=l6(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function iv(t){t._valueTracker||(t._valueTracker=XJ(t))}function c6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=l6(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function tb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yC(t,e){var r=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function g$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ba(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function u6(t,e){e=e.checked,e!=null&&pN(t,"checked",e,!1)}function gC(t,e){u6(t,e);var r=Ba(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vC(t,e.type,r):e.hasOwnProperty("defaultValue")&&vC(t,e.type,Ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function v$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vC(t,e,r){(e!=="number"||tb(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Qh=Array.isArray;function zu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ba(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function b$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Y(92));if(Qh(r)){if(1<r.length)throw Error(Y(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ba(r)}}function f6(t,e){var r=Ba(e.value),n=Ba(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function x$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function d6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?d6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ov,h6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ov=ov||document.createElement("div"),ov.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ov.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jp(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var yp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JJ=["Webkit","ms","Moz","O"];Object.keys(yp).forEach(function(t){JJ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yp[e]=yp[t]})});function p6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||yp.hasOwnProperty(t)&&yp[t]?(""+e).trim():e+"px"}function m6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=p6(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var ZJ=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _C(t,e){if(e){if(ZJ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function wC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SC=null;function vN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var EC=null,Gu=null,qu=null;function _$(t){if(t=Yy(t)){if(typeof EC!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=cw(e),EC(t.stateNode,t.type,e))}}function y6(t){Gu?qu?qu.push(t):qu=[t]:Gu=t}function g6(){if(Gu){var t=Gu,e=qu;if(qu=Gu=null,_$(t),e)for(t=0;t<e.length;t++)_$(e[t])}}function v6(t,e){return t(e)}function b6(){}var jS=!1;function x6(t,e,r){if(jS)return t(e,r);jS=!0;try{return v6(t,e,r)}finally{jS=!1,(Gu!==null||qu!==null)&&(b6(),g6())}}function Zp(t,e){var r=t.stateNode;if(r===null)return null;var n=cw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Y(231,e,typeof r));return r}var AC=!1;if(bs)try{var mh={};Object.defineProperty(mh,"passive",{get:function(){AC=!0}}),window.addEventListener("test",mh,mh),window.removeEventListener("test",mh,mh)}catch{AC=!1}function eZ(t,e,r,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var gp=!1,rb=null,nb=!1,CC=null,tZ={onError:function(t){gp=!0,rb=t}};function rZ(t,e,r,n,i,o,s,a,l){gp=!1,rb=null,eZ.apply(tZ,arguments)}function nZ(t,e,r,n,i,o,s,a,l){if(rZ.apply(this,arguments),gp){if(gp){var c=rb;gp=!1,rb=null}else throw Error(Y(198));nb||(nb=!0,CC=c)}}function $c(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function _6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w$(t){if($c(t)!==t)throw Error(Y(188))}function iZ(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return w$(i),t;if(o===n)return w$(i),e;o=o.sibling}throw Error(Y(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(Y(189))}}if(r.alternate!==n)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?t:e}function w6(t){return t=iZ(t),t!==null?S6(t):null}function S6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S6(t);if(e!==null)return e;t=t.sibling}return null}var E6=ni.unstable_scheduleCallback,S$=ni.unstable_cancelCallback,oZ=ni.unstable_shouldYield,sZ=ni.unstable_requestPaint,Xt=ni.unstable_now,aZ=ni.unstable_getCurrentPriorityLevel,bN=ni.unstable_ImmediatePriority,A6=ni.unstable_UserBlockingPriority,ib=ni.unstable_NormalPriority,lZ=ni.unstable_LowPriority,C6=ni.unstable_IdlePriority,ow=null,Mo=null;function cZ(t){if(Mo&&typeof Mo.onCommitFiberRoot=="function")try{Mo.onCommitFiberRoot(ow,t,void 0,(t.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:dZ,uZ=Math.log,fZ=Math.LN2;function dZ(t){return t>>>=0,t===0?32:31-(uZ(t)/fZ|0)|0}var sv=64,av=4194304;function Xh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ob(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Xh(a):(o&=s,o!==0&&(n=Xh(o)))}else s=r&~i,s!==0?n=Xh(s):o!==0&&(n=Xh(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-io(e),i=1<<r,n|=t[r],e&=~i;return n}function hZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pZ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-io(o),a=1<<s,l=i[s];l===-1?(!(a&r)||a&n)&&(i[s]=hZ(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function TC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T6(){var t=sv;return sv<<=1,!(sv&4194240)&&(sv=64),t}function $S(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hy(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-io(e),t[e]=r}function mZ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-io(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function xN(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-io(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var lt=0;function P6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I6,_N,N6,k6,O6,PC=!1,lv=[],wa=null,Sa=null,Ea=null,em=new Map,tm=new Map,Zs=[],yZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E$(t,e){switch(t){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":em.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tm.delete(e.pointerId)}}function yh(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Yy(e),e!==null&&_N(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gZ(t,e,r,n,i){switch(e){case"focusin":return wa=yh(wa,t,e,r,n,i),!0;case"dragenter":return Sa=yh(Sa,t,e,r,n,i),!0;case"mouseover":return Ea=yh(Ea,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return em.set(o,yh(em.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,tm.set(o,yh(tm.get(o)||null,t,e,r,n,i)),!0}return!1}function R6(t){var e=Ol(t.target);if(e!==null){var r=$c(e);if(r!==null){if(e=r.tag,e===13){if(e=_6(r),e!==null){t.blockedOn=e,O6(t.priority,function(){N6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function f0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=IC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);SC=n,r.target.dispatchEvent(n),SC=null}else return e=Yy(r),e!==null&&_N(e),t.blockedOn=r,!1;e.shift()}return!0}function A$(t,e,r){f0(t)&&r.delete(e)}function vZ(){PC=!1,wa!==null&&f0(wa)&&(wa=null),Sa!==null&&f0(Sa)&&(Sa=null),Ea!==null&&f0(Ea)&&(Ea=null),em.forEach(A$),tm.forEach(A$)}function gh(t,e){t.blockedOn===e&&(t.blockedOn=null,PC||(PC=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,vZ)))}function rm(t){function e(i){return gh(i,t)}if(0<lv.length){gh(lv[0],t);for(var r=1;r<lv.length;r++){var n=lv[r];n.blockedOn===t&&(n.blockedOn=null)}}for(wa!==null&&gh(wa,t),Sa!==null&&gh(Sa,t),Ea!==null&&gh(Ea,t),em.forEach(e),tm.forEach(e),r=0;r<Zs.length;r++)n=Zs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Zs.length&&(r=Zs[0],r.blockedOn===null);)R6(r),r.blockedOn===null&&Zs.shift()}var Hu=ks.ReactCurrentBatchConfig,sb=!0;function bZ(t,e,r,n){var i=lt,o=Hu.transition;Hu.transition=null;try{lt=1,wN(t,e,r,n)}finally{lt=i,Hu.transition=o}}function xZ(t,e,r,n){var i=lt,o=Hu.transition;Hu.transition=null;try{lt=4,wN(t,e,r,n)}finally{lt=i,Hu.transition=o}}function wN(t,e,r,n){if(sb){var i=IC(t,e,r,n);if(i===null)GS(t,e,n,ab,r),E$(t,n);else if(gZ(i,t,e,r,n))n.stopPropagation();else if(E$(t,n),e&4&&-1<yZ.indexOf(t)){for(;i!==null;){var o=Yy(i);if(o!==null&&I6(o),o=IC(t,e,r,n),o===null&&GS(t,e,n,ab,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else GS(t,e,n,null,r)}}var ab=null;function IC(t,e,r,n){if(ab=null,t=vN(n),t=Ol(t),t!==null)if(e=$c(t),e===null)t=null;else if(r=e.tag,r===13){if(t=_6(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ab=t,null}function j6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aZ()){case bN:return 1;case A6:return 4;case ib:case lZ:return 16;case C6:return 536870912;default:return 16}default:return 16}}var ca=null,SN=null,d0=null;function $6(){if(d0)return d0;var t,e=SN,r=e.length,n,i="value"in ca?ca.value:ca.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return d0=i.slice(t,1<n?1-n:void 0)}function h0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cv(){return!0}function C$(){return!1}function ai(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cv:C$,this.isPropagationStopped=C$,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cv)},persist:function(){},isPersistent:cv}),e}var $d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EN=ai($d),Ky=Bt({},$d,{view:0,detail:0}),_Z=ai(Ky),DS,MS,vh,sw=Bt({},Ky,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:AN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vh&&(vh&&t.type==="mousemove"?(DS=t.screenX-vh.screenX,MS=t.screenY-vh.screenY):MS=DS=0,vh=t),DS)},movementY:function(t){return"movementY"in t?t.movementY:MS}}),T$=ai(sw),wZ=Bt({},sw,{dataTransfer:0}),SZ=ai(wZ),EZ=Bt({},Ky,{relatedTarget:0}),FS=ai(EZ),AZ=Bt({},$d,{animationName:0,elapsedTime:0,pseudoElement:0}),CZ=ai(AZ),TZ=Bt({},$d,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PZ=ai(TZ),IZ=Bt({},$d,{data:0}),P$=ai(IZ),NZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OZ[t])?!!e[t]:!1}function AN(){return RZ}var jZ=Bt({},Ky,{key:function(t){if(t.key){var e=NZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=h0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:AN,charCode:function(t){return t.type==="keypress"?h0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?h0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$Z=ai(jZ),DZ=Bt({},sw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I$=ai(DZ),MZ=Bt({},Ky,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:AN}),FZ=ai(MZ),LZ=Bt({},$d,{propertyName:0,elapsedTime:0,pseudoElement:0}),BZ=ai(LZ),UZ=Bt({},sw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VZ=ai(UZ),WZ=[9,13,27,32],CN=bs&&"CompositionEvent"in window,vp=null;bs&&"documentMode"in document&&(vp=document.documentMode);var zZ=bs&&"TextEvent"in window&&!vp,D6=bs&&(!CN||vp&&8<vp&&11>=vp),N$=String.fromCharCode(32),k$=!1;function M6(t,e){switch(t){case"keyup":return WZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Su=!1;function GZ(t,e){switch(t){case"compositionend":return F6(e);case"keypress":return e.which!==32?null:(k$=!0,N$);case"textInput":return t=e.data,t===N$&&k$?null:t;default:return null}}function qZ(t,e){if(Su)return t==="compositionend"||!CN&&M6(t,e)?(t=$6(),d0=SN=ca=null,Su=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D6&&e.locale!=="ko"?null:e.data;default:return null}}var HZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HZ[t.type]:e==="textarea"}function L6(t,e,r,n){y6(n),e=lb(e,"onChange"),0<e.length&&(r=new EN("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var bp=null,nm=null;function KZ(t){Q6(t,0)}function aw(t){var e=Cu(t);if(c6(e))return t}function YZ(t,e){if(t==="change")return e}var B6=!1;if(bs){var LS;if(bs){var BS="oninput"in document;if(!BS){var R$=document.createElement("div");R$.setAttribute("oninput","return;"),BS=typeof R$.oninput=="function"}LS=BS}else LS=!1;B6=LS&&(!document.documentMode||9<document.documentMode)}function j$(){bp&&(bp.detachEvent("onpropertychange",U6),nm=bp=null)}function U6(t){if(t.propertyName==="value"&&aw(nm)){var e=[];L6(e,nm,t,vN(t)),x6(KZ,e)}}function QZ(t,e,r){t==="focusin"?(j$(),bp=e,nm=r,bp.attachEvent("onpropertychange",U6)):t==="focusout"&&j$()}function XZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aw(nm)}function JZ(t,e){if(t==="click")return aw(e)}function ZZ(t,e){if(t==="input"||t==="change")return aw(e)}function eee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lo=typeof Object.is=="function"?Object.is:eee;function im(t,e){if(lo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!fC.call(e,i)||!lo(t[i],e[i]))return!1}return!0}function $$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function D$(t,e){var r=$$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$$(r)}}function V6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W6(){for(var t=window,e=tb();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=tb(t.document)}return e}function TN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tee(t){var e=W6(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&V6(r.ownerDocument.documentElement,r)){if(n!==null&&TN(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=D$(r,o);var s=D$(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ree=bs&&"documentMode"in document&&11>=document.documentMode,Eu=null,NC=null,xp=null,kC=!1;function M$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;kC||Eu==null||Eu!==tb(n)||(n=Eu,"selectionStart"in n&&TN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xp&&im(xp,n)||(xp=n,n=lb(NC,"onSelect"),0<n.length&&(e=new EN("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Eu)))}function uv(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Au={animationend:uv("Animation","AnimationEnd"),animationiteration:uv("Animation","AnimationIteration"),animationstart:uv("Animation","AnimationStart"),transitionend:uv("Transition","TransitionEnd")},US={},z6={};bs&&(z6=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function lw(t){if(US[t])return US[t];if(!Au[t])return t;var e=Au[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in z6)return US[t]=e[r];return t}var G6=lw("animationend"),q6=lw("animationiteration"),H6=lw("animationstart"),K6=lw("transitionend"),Y6=new Map,F$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(t,e){Y6.set(t,e),jc(e,[t])}for(var VS=0;VS<F$.length;VS++){var WS=F$[VS],nee=WS.toLowerCase(),iee=WS[0].toUpperCase()+WS.slice(1);Za(nee,"on"+iee)}Za(G6,"onAnimationEnd");Za(q6,"onAnimationIteration");Za(H6,"onAnimationStart");Za("dblclick","onDoubleClick");Za("focusin","onFocus");Za("focusout","onBlur");Za(K6,"onTransitionEnd");kf("onMouseEnter",["mouseout","mouseover"]);kf("onMouseLeave",["mouseout","mouseover"]);kf("onPointerEnter",["pointerout","pointerover"]);kf("onPointerLeave",["pointerout","pointerover"]);jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oee=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jh));function L$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,nZ(n,e,void 0,t),t.currentTarget=null}function Q6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;L$(i,a,c),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;L$(i,a,c),o=l}}}if(nb)throw t=CC,nb=!1,CC=null,t}function Ct(t,e){var r=e[DC];r===void 0&&(r=e[DC]=new Set);var n=t+"__bubble";r.has(n)||(X6(e,t,2,!1),r.add(n))}function zS(t,e,r){var n=0;e&&(n|=4),X6(r,t,n,e)}var fv="_reactListening"+Math.random().toString(36).slice(2);function om(t){if(!t[fv]){t[fv]=!0,i6.forEach(function(r){r!=="selectionchange"&&(oee.has(r)||zS(r,!1,t),zS(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fv]||(e[fv]=!0,zS("selectionchange",!1,e))}}function X6(t,e,r,n){switch(j6(e)){case 1:var i=bZ;break;case 4:i=xZ;break;default:i=wN}r=i.bind(null,e,r,t),i=void 0,!AC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function GS(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ol(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}x6(function(){var c=o,u=vN(r),f=[];e:{var h=Y6.get(t);if(h!==void 0){var p=EN,m=t;switch(t){case"keypress":if(h0(r)===0)break e;case"keydown":case"keyup":p=$Z;break;case"focusin":m="focus",p=FS;break;case"focusout":m="blur",p=FS;break;case"beforeblur":case"afterblur":p=FS;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=T$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=FZ;break;case G6:case q6:case H6:p=CZ;break;case K6:p=BZ;break;case"scroll":p=_Z;break;case"wheel":p=VZ;break;case"copy":case"cut":case"paste":p=PZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=I$}var y=(e&4)!==0,g=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var v=c,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,b!==null&&(S=Zp(v,b),S!=null&&y.push(sm(v,S,x)))),g)break;v=v.return}0<y.length&&(h=new p(h,m,null,r,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==SC&&(m=r.relatedTarget||r.fromElement)&&(Ol(m)||m[xs]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Ol(m):null,m!==null&&(g=$c(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=T$,S="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=I$,S="onPointerLeave",b="onPointerEnter",v="pointer"),g=p==null?h:Cu(p),x=m==null?h:Cu(m),h=new y(S,v+"leave",p,r,u),h.target=g,h.relatedTarget=x,S=null,Ol(u)===c&&(y=new y(b,v+"enter",m,r,u),y.target=x,y.relatedTarget=g,S=y),g=S,p&&m)t:{for(y=p,b=m,v=0,x=y;x;x=Hc(x))v++;for(x=0,S=b;S;S=Hc(S))x++;for(;0<v-x;)y=Hc(y),v--;for(;0<x-v;)b=Hc(b),x--;for(;v--;){if(y===b||b!==null&&y===b.alternate)break t;y=Hc(y),b=Hc(b)}y=null}else y=null;p!==null&&B$(f,h,p,y,!1),m!==null&&g!==null&&B$(f,g,m,y,!0)}}e:{if(h=c?Cu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=YZ;else if(O$(h))if(B6)_=ZZ;else{_=XZ;var w=QZ}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=JZ);if(_&&(_=_(t,c))){L6(f,_,r,u);break e}w&&w(t,h,c),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&vC(h,"number",h.value)}switch(w=c?Cu(c):window,t){case"focusin":(O$(w)||w.contentEditable==="true")&&(Eu=w,NC=c,xp=null);break;case"focusout":xp=NC=Eu=null;break;case"mousedown":kC=!0;break;case"contextmenu":case"mouseup":case"dragend":kC=!1,M$(f,r,u);break;case"selectionchange":if(ree)break;case"keydown":case"keyup":M$(f,r,u)}var A;if(CN)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Su?M6(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(D6&&r.locale!=="ko"&&(Su||C!=="onCompositionStart"?C==="onCompositionEnd"&&Su&&(A=$6()):(ca=u,SN="value"in ca?ca.value:ca.textContent,Su=!0)),w=lb(c,C),0<w.length&&(C=new P$(C,t,null,r,u),f.push({event:C,listeners:w}),A?C.data=A:(A=F6(r),A!==null&&(C.data=A)))),(A=zZ?GZ(t,r):qZ(t,r))&&(c=lb(c,"onBeforeInput"),0<c.length&&(u=new P$("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:c}),u.data=A))}Q6(f,e)})}function sm(t,e,r){return{instance:t,listener:e,currentTarget:r}}function lb(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Zp(t,r),o!=null&&n.unshift(sm(t,o,i)),o=Zp(t,e),o!=null&&n.push(sm(t,o,i))),t=t.return}return n}function Hc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function B$(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Zp(r,o),l!=null&&s.unshift(sm(r,l,a))):i||(l=Zp(r,o),l!=null&&s.push(sm(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var see=/\r\n?/g,aee=/\u0000|\uFFFD/g;function U$(t){return(typeof t=="string"?t:""+t).replace(see,`
`).replace(aee,"")}function dv(t,e,r){if(e=U$(e),U$(t)!==e&&r)throw Error(Y(425))}function cb(){}var OC=null,RC=null;function jC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $C=typeof setTimeout=="function"?setTimeout:void 0,lee=typeof clearTimeout=="function"?clearTimeout:void 0,V$=typeof Promise=="function"?Promise:void 0,cee=typeof queueMicrotask=="function"?queueMicrotask:typeof V$<"u"?function(t){return V$.resolve(null).then(t).catch(uee)}:$C;function uee(t){setTimeout(function(){throw t})}function qS(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),rm(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);rm(e)}function Aa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Dd=Math.random().toString(36).slice(2),So="__reactFiber$"+Dd,am="__reactProps$"+Dd,xs="__reactContainer$"+Dd,DC="__reactEvents$"+Dd,fee="__reactListeners$"+Dd,dee="__reactHandles$"+Dd;function Ol(t){var e=t[So];if(e)return e;for(var r=t.parentNode;r;){if(e=r[xs]||r[So]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=W$(t);t!==null;){if(r=t[So])return r;t=W$(t)}return e}t=r,r=t.parentNode}return null}function Yy(t){return t=t[So]||t[xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function cw(t){return t[am]||null}var MC=[],Tu=-1;function el(t){return{current:t}}function Nt(t){0>Tu||(t.current=MC[Tu],MC[Tu]=null,Tu--)}function At(t,e){Tu++,MC[Tu]=t.current,t.current=e}var Ua={},pn=el(Ua),Mn=el(!1),gc=Ua;function Of(t,e){var r=t.type.contextTypes;if(!r)return Ua;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fn(t){return t=t.childContextTypes,t!=null}function ub(){Nt(Mn),Nt(pn)}function z$(t,e,r){if(pn.current!==Ua)throw Error(Y(168));At(pn,e),At(Mn,r)}function J6(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Y(108,QJ(t)||"Unknown",i));return Bt({},r,n)}function fb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ua,gc=pn.current,At(pn,t),At(Mn,Mn.current),!0}function G$(t,e,r){var n=t.stateNode;if(!n)throw Error(Y(169));r?(t=J6(t,e,gc),n.__reactInternalMemoizedMergedChildContext=t,Nt(Mn),Nt(pn),At(pn,t)):Nt(Mn),At(Mn,r)}var is=null,uw=!1,HS=!1;function Z6(t){is===null?is=[t]:is.push(t)}function hee(t){uw=!0,Z6(t)}function tl(){if(!HS&&is!==null){HS=!0;var t=0,e=lt;try{var r=is;for(lt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}is=null,uw=!1}catch(i){throw is!==null&&(is=is.slice(t+1)),E6(bN,tl),i}finally{lt=e,HS=!1}}return null}var Pu=[],Iu=0,db=null,hb=0,xi=[],_i=0,vc=null,ss=1,as="";function ml(t,e){Pu[Iu++]=hb,Pu[Iu++]=db,db=t,hb=e}function e5(t,e,r){xi[_i++]=ss,xi[_i++]=as,xi[_i++]=vc,vc=t;var n=ss;t=as;var i=32-io(n)-1;n&=~(1<<i),r+=1;var o=32-io(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,ss=1<<32-io(e)+i|r<<i|n,as=o+t}else ss=1<<o|r<<i|n,as=t}function PN(t){t.return!==null&&(ml(t,1),e5(t,1,0))}function IN(t){for(;t===db;)db=Pu[--Iu],Pu[Iu]=null,hb=Pu[--Iu],Pu[Iu]=null;for(;t===vc;)vc=xi[--_i],xi[_i]=null,as=xi[--_i],xi[_i]=null,ss=xi[--_i],xi[_i]=null}var ei=null,Qn=null,Ot=!1,Yi=null;function t5(t,e){var r=Ai(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function q$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ei=t,Qn=Aa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ei=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=vc!==null?{id:ss,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ai(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ei=t,Qn=null,!0):!1;default:return!1}}function FC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function LC(t){if(Ot){var e=Qn;if(e){var r=e;if(!q$(t,e)){if(FC(t))throw Error(Y(418));e=Aa(r.nextSibling);var n=ei;e&&q$(t,e)?t5(n,r):(t.flags=t.flags&-4097|2,Ot=!1,ei=t)}}else{if(FC(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ot=!1,ei=t}}}function H$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ei=t}function hv(t){if(t!==ei)return!1;if(!Ot)return H$(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jC(t.type,t.memoizedProps)),e&&(e=Qn)){if(FC(t))throw r5(),Error(Y(418));for(;e;)t5(t,e),e=Aa(e.nextSibling)}if(H$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=Aa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=ei?Aa(t.stateNode.nextSibling):null;return!0}function r5(){for(var t=Qn;t;)t=Aa(t.nextSibling)}function Rf(){Qn=ei=null,Ot=!1}function NN(t){Yi===null?Yi=[t]:Yi.push(t)}var pee=ks.ReactCurrentBatchConfig;function Wi(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var pb=el(null),mb=null,Nu=null,kN=null;function ON(){kN=Nu=mb=null}function RN(t){var e=pb.current;Nt(pb),t._currentValue=e}function BC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ku(t,e){mb=t,kN=Nu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jn=!0),t.firstContext=null)}function ji(t){var e=t._currentValue;if(kN!==t)if(t={context:t,memoizedValue:e,next:null},Nu===null){if(mb===null)throw Error(Y(308));Nu=t,mb.dependencies={lanes:0,firstContext:t}}else Nu=Nu.next=t;return e}var Rl=null;function jN(t){Rl===null?Rl=[t]:Rl.push(t)}function n5(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,jN(e)):(r.next=i.next,i.next=r),e.interleaved=r,_s(t,n)}function _s(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ks=!1;function $N(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ps(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,_s(t,r)}return i=n.interleaved,i===null?(e.next=e,jN(n)):(e.next=i.next,i.next=e),n.interleaved=e,_s(t,r)}function p0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xN(t,r)}}function K$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function yb(t,e,r,n){var i=t.updateQueue;Ks=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,u=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=Bt({},f,h);break e;case 2:Ks=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);xc|=s,t.lanes=s,t.memoizedState=f}}function Y$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Y(191,i));i.call(n)}}}var o5=new n6.Component().refs;function UC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Bt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fw={isMounted:function(t){return(t=t._reactInternals)?$c(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Pa(t),o=ps(n,i);o.payload=e,r!=null&&(o.callback=r),e=Ca(t,o,i),e!==null&&(oo(e,t,i,n),p0(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Pa(t),o=ps(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Ca(t,o,i),e!==null&&(oo(e,t,i,n),p0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cn(),n=Pa(t),i=ps(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ca(t,i,n),e!==null&&(oo(e,t,n,r),p0(e,t,n))}};function Q$(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!im(r,n)||!im(i,o):!0}function s5(t,e,r){var n=!1,i=Ua,o=e.contextType;return typeof o=="object"&&o!==null?o=ji(o):(i=Fn(e)?gc:pn.current,n=e.contextTypes,o=(n=n!=null)?Of(t,i):Ua),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function X$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&fw.enqueueReplaceState(e,e.state,null)}function VC(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=o5,$N(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ji(o):(o=Fn(e)?gc:pn.current,i.context=Of(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(UC(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fw.enqueueReplaceState(i,i.state,null),yb(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var n=r.stateNode}if(!n)throw Error(Y(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===o5&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,t))}return t}function pv(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function J$(t){var e=t._init;return e(t._payload)}function a5(t){function e(b,v){if(t){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=Ia(b,v),b.index=0,b.sibling=null,b}function o(b,v,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function s(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,x,S){return v===null||v.tag!==6?(v=eE(x,b.mode,S),v.return=b,v):(v=i(v,x),v.return=b,v)}function l(b,v,x,S){var _=x.type;return _===wu?u(b,v,x.props.children,S,x.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Hs&&J$(_)===v.type)?(S=i(v,x.props),S.ref=bh(b,v,x),S.return=b,S):(S=x0(x.type,x.key,x.props,null,b.mode,S),S.ref=bh(b,v,x),S.return=b,S)}function c(b,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=tE(x,b.mode,S),v.return=b,v):(v=i(v,x.children||[]),v.return=b,v)}function u(b,v,x,S,_){return v===null||v.tag!==7?(v=Zl(x,b.mode,S,_),v.return=b,v):(v=i(v,x),v.return=b,v)}function f(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=eE(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nv:return x=x0(v.type,v.key,v.props,null,b.mode,x),x.ref=bh(b,null,v),x.return=b,x;case _u:return v=tE(v,b.mode,x),v.return=b,v;case Hs:var S=v._init;return f(b,S(v._payload),x)}if(Qh(v)||ph(v))return v=Zl(v,b.mode,x,null),v.return=b,v;pv(b,v)}return null}function h(b,v,x,S){var _=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nv:return x.key===_?l(b,v,x,S):null;case _u:return x.key===_?c(b,v,x,S):null;case Hs:return _=x._init,h(b,v,_(x._payload),S)}if(Qh(x)||ph(x))return _!==null?null:u(b,v,x,S,null);pv(b,x)}return null}function p(b,v,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(x)||null,a(v,b,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nv:return b=b.get(S.key===null?x:S.key)||null,l(v,b,S,_);case _u:return b=b.get(S.key===null?x:S.key)||null,c(v,b,S,_);case Hs:var w=S._init;return p(b,v,x,w(S._payload),_)}if(Qh(S)||ph(S))return b=b.get(x)||null,u(v,b,S,_,null);pv(v,S)}return null}function m(b,v,x,S){for(var _=null,w=null,A=v,C=v=0,I=null;A!==null&&C<x.length;C++){A.index>C?(I=A,A=null):I=A.sibling;var T=h(b,A,x[C],S);if(T===null){A===null&&(A=I);break}t&&A&&T.alternate===null&&e(b,A),v=o(T,v,C),w===null?_=T:w.sibling=T,w=T,A=I}if(C===x.length)return r(b,A),Ot&&ml(b,C),_;if(A===null){for(;C<x.length;C++)A=f(b,x[C],S),A!==null&&(v=o(A,v,C),w===null?_=A:w.sibling=A,w=A);return Ot&&ml(b,C),_}for(A=n(b,A);C<x.length;C++)I=p(A,b,C,x[C],S),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?C:I.key),v=o(I,v,C),w===null?_=I:w.sibling=I,w=I);return t&&A.forEach(function(P){return e(b,P)}),Ot&&ml(b,C),_}function y(b,v,x,S){var _=ph(x);if(typeof _!="function")throw Error(Y(150));if(x=_.call(x),x==null)throw Error(Y(151));for(var w=_=null,A=v,C=v=0,I=null,T=x.next();A!==null&&!T.done;C++,T=x.next()){A.index>C?(I=A,A=null):I=A.sibling;var P=h(b,A,T.value,S);if(P===null){A===null&&(A=I);break}t&&A&&P.alternate===null&&e(b,A),v=o(P,v,C),w===null?_=P:w.sibling=P,w=P,A=I}if(T.done)return r(b,A),Ot&&ml(b,C),_;if(A===null){for(;!T.done;C++,T=x.next())T=f(b,T.value,S),T!==null&&(v=o(T,v,C),w===null?_=T:w.sibling=T,w=T);return Ot&&ml(b,C),_}for(A=n(b,A);!T.done;C++,T=x.next())T=p(A,b,C,T.value,S),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?C:T.key),v=o(T,v,C),w===null?_=T:w.sibling=T,w=T);return t&&A.forEach(function(O){return e(b,O)}),Ot&&ml(b,C),_}function g(b,v,x,S){if(typeof x=="object"&&x!==null&&x.type===wu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case nv:e:{for(var _=x.key,w=v;w!==null;){if(w.key===_){if(_=x.type,_===wu){if(w.tag===7){r(b,w.sibling),v=i(w,x.props.children),v.return=b,b=v;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Hs&&J$(_)===w.type){r(b,w.sibling),v=i(w,x.props),v.ref=bh(b,w,x),v.return=b,b=v;break e}r(b,w);break}else e(b,w);w=w.sibling}x.type===wu?(v=Zl(x.props.children,b.mode,S,x.key),v.return=b,b=v):(S=x0(x.type,x.key,x.props,null,b.mode,S),S.ref=bh(b,v,x),S.return=b,b=S)}return s(b);case _u:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(b,v.sibling),v=i(v,x.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=tE(x,b.mode,S),v.return=b,b=v}return s(b);case Hs:return w=x._init,g(b,v,w(x._payload),S)}if(Qh(x))return m(b,v,x,S);if(ph(x))return y(b,v,x,S);pv(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(b,v.sibling),v=i(v,x),v.return=b,b=v):(r(b,v),v=eE(x,b.mode,S),v.return=b,b=v),s(b)):r(b,v)}return g}var jf=a5(!0),l5=a5(!1),Qy={},Fo=el(Qy),lm=el(Qy),cm=el(Qy);function jl(t){if(t===Qy)throw Error(Y(174));return t}function DN(t,e){switch(At(cm,e),At(lm,t),At(Fo,Qy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xC(e,t)}Nt(Fo),At(Fo,e)}function $f(){Nt(Fo),Nt(lm),Nt(cm)}function c5(t){jl(cm.current);var e=jl(Fo.current),r=xC(e,t.type);e!==r&&(At(lm,t),At(Fo,r))}function MN(t){lm.current===t&&(Nt(Fo),Nt(lm))}var Dt=el(0);function gb(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var KS=[];function FN(){for(var t=0;t<KS.length;t++)KS[t]._workInProgressVersionPrimary=null;KS.length=0}var m0=ks.ReactCurrentDispatcher,YS=ks.ReactCurrentBatchConfig,bc=0,Lt=null,ar=null,Pr=null,vb=!1,_p=!1,um=0,mee=0;function tn(){throw Error(Y(321))}function LN(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!lo(t[r],e[r]))return!1;return!0}function BN(t,e,r,n,i,o){if(bc=o,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,m0.current=t===null||t.memoizedState===null?bee:xee,t=r(n,i),_p){o=0;do{if(_p=!1,um=0,25<=o)throw Error(Y(301));o+=1,Pr=ar=null,e.updateQueue=null,m0.current=_ee,t=r(n,i)}while(_p)}if(m0.current=bb,e=ar!==null&&ar.next!==null,bc=0,Pr=ar=Lt=null,vb=!1,e)throw Error(Y(300));return t}function UN(){var t=um!==0;return um=0,t}function go(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?Lt.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function $i(){if(ar===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=ar.next;var e=Pr===null?Lt.memoizedState:Pr.next;if(e!==null)Pr=e,ar=t;else{if(t===null)throw Error(Y(310));ar=t,t={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},Pr===null?Lt.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function fm(t,e){return typeof e=="function"?e(t):e}function QS(t){var e=$i(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var n=ar,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((bc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,s=n):l=l.next=f,Lt.lanes|=u,xc|=u}c=c.next}while(c!==null&&c!==o);l===null?s=n:l.next=a,lo(n,e.memoizedState)||(jn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Lt.lanes|=o,xc|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function XS(t){var e=$i(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);lo(o,e.memoizedState)||(jn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function u5(){}function f5(t,e){var r=Lt,n=$i(),i=e(),o=!lo(n.memoizedState,i);if(o&&(n.memoizedState=i,jn=!0),n=n.queue,VN(p5.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Pr!==null&&Pr.memoizedState.tag&1){if(r.flags|=2048,dm(9,h5.bind(null,r,n,i,e),void 0,null),Ir===null)throw Error(Y(349));bc&30||d5(r,e,i)}return i}function d5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function h5(t,e,r,n){e.value=r,e.getSnapshot=n,m5(e)&&y5(t)}function p5(t,e,r){return r(function(){m5(e)&&y5(t)})}function m5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!lo(t,r)}catch{return!0}}function y5(t){var e=_s(t,1);e!==null&&oo(e,t,1,-1)}function Z$(t){var e=go();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:t},e.queue=t,t=t.dispatch=vee.bind(null,Lt,t),[e.memoizedState,t]}function dm(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function g5(){return $i().memoizedState}function y0(t,e,r,n){var i=go();Lt.flags|=t,i.memoizedState=dm(1|e,r,void 0,n===void 0?null:n)}function dw(t,e,r,n){var i=$i();n=n===void 0?null:n;var o=void 0;if(ar!==null){var s=ar.memoizedState;if(o=s.destroy,n!==null&&LN(n,s.deps)){i.memoizedState=dm(e,r,o,n);return}}Lt.flags|=t,i.memoizedState=dm(1|e,r,o,n)}function e2(t,e){return y0(8390656,8,t,e)}function VN(t,e){return dw(2048,8,t,e)}function v5(t,e){return dw(4,2,t,e)}function b5(t,e){return dw(4,4,t,e)}function x5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _5(t,e,r){return r=r!=null?r.concat([t]):null,dw(4,4,x5.bind(null,e,t),r)}function WN(){}function w5(t,e){var r=$i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LN(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function S5(t,e){var r=$i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LN(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function E5(t,e,r){return bc&21?(lo(r,e)||(r=T6(),Lt.lanes|=r,xc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jn=!0),t.memoizedState=r)}function yee(t,e){var r=lt;lt=r!==0&&4>r?r:4,t(!0);var n=YS.transition;YS.transition={};try{t(!1),e()}finally{lt=r,YS.transition=n}}function A5(){return $i().memoizedState}function gee(t,e,r){var n=Pa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},C5(t))T5(e,r);else if(r=n5(t,e,r,n),r!==null){var i=Cn();oo(r,t,n,i),P5(r,e,n)}}function vee(t,e,r){var n=Pa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(C5(t))T5(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,lo(a,s)){var l=e.interleaved;l===null?(i.next=i,jN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=n5(t,e,i,n),r!==null&&(i=Cn(),oo(r,t,n,i),P5(r,e,n))}}function C5(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function T5(t,e){_p=vb=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function P5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xN(t,r)}}var bb={readContext:ji,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},bee={readContext:ji,useCallback:function(t,e){return go().memoizedState=[t,e===void 0?null:e],t},useContext:ji,useEffect:e2,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,y0(4194308,4,x5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return y0(4194308,4,t,e)},useInsertionEffect:function(t,e){return y0(4,2,t,e)},useMemo:function(t,e){var r=go();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=go();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=gee.bind(null,Lt,t),[n.memoizedState,t]},useRef:function(t){var e=go();return t={current:t},e.memoizedState=t},useState:Z$,useDebugValue:WN,useDeferredValue:function(t){return go().memoizedState=t},useTransition:function(){var t=Z$(!1),e=t[0];return t=yee.bind(null,t[1]),go().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Lt,i=go();if(Ot){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=e(),Ir===null)throw Error(Y(349));bc&30||d5(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,e2(p5.bind(null,n,o,t),[t]),n.flags|=2048,dm(9,h5.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=go(),e=Ir.identifierPrefix;if(Ot){var r=as,n=ss;r=(n&~(1<<32-io(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=um++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=mee++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xee={readContext:ji,useCallback:w5,useContext:ji,useEffect:VN,useImperativeHandle:_5,useInsertionEffect:v5,useLayoutEffect:b5,useMemo:S5,useReducer:QS,useRef:g5,useState:function(){return QS(fm)},useDebugValue:WN,useDeferredValue:function(t){var e=$i();return E5(e,ar.memoizedState,t)},useTransition:function(){var t=QS(fm)[0],e=$i().memoizedState;return[t,e]},useMutableSource:u5,useSyncExternalStore:f5,useId:A5,unstable_isNewReconciler:!1},_ee={readContext:ji,useCallback:w5,useContext:ji,useEffect:VN,useImperativeHandle:_5,useInsertionEffect:v5,useLayoutEffect:b5,useMemo:S5,useReducer:XS,useRef:g5,useState:function(){return XS(fm)},useDebugValue:WN,useDeferredValue:function(t){var e=$i();return ar===null?e.memoizedState=t:E5(e,ar.memoizedState,t)},useTransition:function(){var t=XS(fm)[0],e=$i().memoizedState;return[t,e]},useMutableSource:u5,useSyncExternalStore:f5,useId:A5,unstable_isNewReconciler:!1};function Df(t,e){try{var r="",n=e;do r+=YJ(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function JS(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function WC(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var wee=typeof WeakMap=="function"?WeakMap:Map;function I5(t,e,r){r=ps(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){_b||(_b=!0,ZC=n),WC(t,e)},r}function N5(t,e,r){r=ps(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){WC(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){WC(t,e),typeof n!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function t2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new wee;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Dee.bind(null,t,e,r),e.then(t,t))}function r2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n2(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ps(-1,1),e.tag=2,Ca(r,e,1))),r.lanes|=1),t)}var See=ks.ReactCurrentOwner,jn=!1;function xn(t,e,r,n){e.child=t===null?l5(e,null,r,n):jf(e,t.child,r,n)}function i2(t,e,r,n,i){r=r.render;var o=e.ref;return Ku(e,i),n=BN(t,e,r,n,o,i),r=UN(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ws(t,e,i)):(Ot&&r&&PN(e),e.flags|=1,xn(t,e,n,i),e.child)}function o2(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!XN(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,k5(t,e,o,n,i)):(t=x0(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:im,r(s,n)&&t.ref===e.ref)return ws(t,e,i)}return e.flags|=1,t=Ia(o,n),t.ref=e.ref,t.return=e,e.child=t}function k5(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(im(o,n)&&t.ref===e.ref)if(jn=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(jn=!0);else return e.lanes=t.lanes,ws(t,e,i)}return zC(t,e,r,n,i)}function O5(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Ou,qn),qn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Ou,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,At(Ou,qn),qn|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,At(Ou,qn),qn|=n;return xn(t,e,i,r),e.child}function R5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zC(t,e,r,n,i){var o=Fn(r)?gc:pn.current;return o=Of(e,o),Ku(e,i),r=BN(t,e,r,n,o,i),n=UN(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ws(t,e,i)):(Ot&&n&&PN(e),e.flags|=1,xn(t,e,r,i),e.child)}function s2(t,e,r,n,i){if(Fn(r)){var o=!0;fb(e)}else o=!1;if(Ku(e,i),e.stateNode===null)g0(t,e),s5(e,r,n),VC(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=ji(c):(c=Fn(r)?gc:pn.current,c=Of(e,c));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&X$(e,s,n,c),Ks=!1;var h=e.memoizedState;s.state=h,yb(e,n,s,i),l=e.memoizedState,a!==n||h!==l||Mn.current||Ks?(typeof u=="function"&&(UC(e,r,u,n),l=e.memoizedState),(a=Ks||Q$(e,r,a,n,h,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,i5(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Wi(e.type,a),s.props=c,f=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=Fn(r)?gc:pn.current,l=Of(e,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&X$(e,s,n,l),Ks=!1,h=e.memoizedState,s.state=h,yb(e,n,s,i);var m=e.memoizedState;a!==f||h!==m||Mn.current||Ks?(typeof p=="function"&&(UC(e,r,p,n),m=e.memoizedState),(c=Ks||Q$(e,r,c,n,h,m,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return GC(t,e,r,n,o,i)}function GC(t,e,r,n,i,o){R5(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&G$(e,r,!1),ws(t,e,o);n=e.stateNode,See.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=jf(e,t.child,null,o),e.child=jf(e,null,a,o)):xn(t,e,a,o),e.memoizedState=n.state,i&&G$(e,r,!0),e.child}function j5(t){var e=t.stateNode;e.pendingContext?z$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z$(t,e.context,!1),DN(t,e.containerInfo)}function a2(t,e,r,n,i){return Rf(),NN(i),e.flags|=256,xn(t,e,r,n),e.child}var qC={dehydrated:null,treeContext:null,retryLane:0};function HC(t){return{baseLanes:t,cachePool:null,transitions:null}}function $5(t,e,r){var n=e.pendingProps,i=Dt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Dt,i&1),t===null)return LC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=mw(s,n,0,null),t=Zl(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=HC(r),e.memoizedState=qC,t):zN(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Eee(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ia(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ia(a,o):(o=Zl(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?HC(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=qC,n}return o=t.child,t=o.sibling,n=Ia(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zN(t,e){return e=mw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mv(t,e,r,n){return n!==null&&NN(n),jf(e,t.child,null,r),t=zN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Eee(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=JS(Error(Y(422))),mv(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=mw({mode:"visible",children:n.children},i,0,null),o=Zl(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&jf(e,t.child,null,s),e.child.memoizedState=HC(s),e.memoizedState=qC,o);if(!(e.mode&1))return mv(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Y(419)),n=JS(o,n,void 0),mv(t,e,s,n)}if(a=(s&t.childLanes)!==0,jn||a){if(n=Ir,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,_s(t,i),oo(n,t,i,-1))}return QN(),n=JS(Error(Y(421))),mv(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Mee.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Qn=Aa(i.nextSibling),ei=e,Ot=!0,Yi=null,t!==null&&(xi[_i++]=ss,xi[_i++]=as,xi[_i++]=vc,ss=t.id,as=t.overflow,vc=e),e=zN(e,n.children),e.flags|=4096,e)}function l2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),BC(t.return,e,r)}function ZS(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function D5(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(xn(t,e,n.children,r),n=Dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l2(t,r,e);else if(t.tag===19)l2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(At(Dt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&gb(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),ZS(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gb(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}ZS(e,!0,r,null,o);break;case"together":ZS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function g0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ws(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,r=Ia(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ia(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Aee(t,e,r){switch(e.tag){case 3:j5(e),Rf();break;case 5:c5(e);break;case 1:Fn(e.type)&&fb(e);break;case 4:DN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;At(pb,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(At(Dt,Dt.current&1),e.flags|=128,null):r&e.child.childLanes?$5(t,e,r):(At(Dt,Dt.current&1),t=ws(t,e,r),t!==null?t.sibling:null);At(Dt,Dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return D5(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Dt,Dt.current),n)break;return null;case 22:case 23:return e.lanes=0,O5(t,e,r)}return ws(t,e,r)}var M5,KC,F5,L5;M5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};KC=function(){};F5=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,jl(Fo.current);var o=null;switch(r){case"input":i=yC(t,i),n=yC(t,n),o=[];break;case"select":i=Bt({},i,{value:void 0}),n=Bt({},n,{value:void 0}),o=[];break;case"textarea":i=bC(t,i),n=bC(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=cb)}_C(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xp.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};L5=function(t,e,r,n){r!==n&&(e.flags|=4)};function xh(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Cee(t,e,r){var n=e.pendingProps;switch(IN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Fn(e.type)&&ub(),rn(e),null;case 3:return n=e.stateNode,$f(),Nt(Mn),Nt(pn),FN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yi!==null&&(rT(Yi),Yi=null))),KC(t,e),rn(e),null;case 5:MN(e);var i=jl(cm.current);if(r=e.type,t!==null&&e.stateNode!=null)F5(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Y(166));return rn(e),null}if(t=jl(Fo.current),hv(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[So]=e,n[am]=o,t=(e.mode&1)!==0,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(i=0;i<Jh.length;i++)Ct(Jh[i],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":g$(n,o),Ct("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ct("invalid",n);break;case"textarea":b$(n,o),Ct("invalid",n)}_C(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&dv(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&dv(n.textContent,a,t),i=["children",""+a]):Xp.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ct("scroll",n)}switch(r){case"input":iv(n),v$(n,o,!0);break;case"textarea":iv(n),x$(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=cb)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d6(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[So]=e,t[am]=n,M5(t,e,!1,!1),e.stateNode=t;e:{switch(s=wC(r,n),r){case"dialog":Ct("cancel",t),Ct("close",t),i=n;break;case"iframe":case"object":case"embed":Ct("load",t),i=n;break;case"video":case"audio":for(i=0;i<Jh.length;i++)Ct(Jh[i],t);i=n;break;case"source":Ct("error",t),i=n;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=n;break;case"details":Ct("toggle",t),i=n;break;case"input":g$(t,n),i=yC(t,n),Ct("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Bt({},n,{value:void 0}),Ct("invalid",t);break;case"textarea":b$(t,n),i=bC(t,n),Ct("invalid",t);break;default:i=n}_C(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?m6(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&h6(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Jp(t,l):typeof l=="number"&&Jp(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xp.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ct("scroll",t):l!=null&&pN(t,o,l,s))}switch(r){case"input":iv(t),v$(t,n,!1);break;case"textarea":iv(t),x$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ba(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?zu(t,!!n.multiple,o,!1):n.defaultValue!=null&&zu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=cb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)L5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Y(166));if(r=jl(cm.current),jl(Fo.current),hv(e)){if(n=e.stateNode,r=e.memoizedProps,n[So]=e,(o=n.nodeValue!==r)&&(t=ei,t!==null))switch(t.tag){case 3:dv(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dv(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[So]=e,e.stateNode=n}return rn(e),null;case 13:if(Nt(Dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Qn!==null&&e.mode&1&&!(e.flags&128))r5(),Rf(),e.flags|=98560,o=!1;else if(o=hv(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[So]=e}else Rf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),o=!1}else Yi!==null&&(rT(Yi),Yi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Dt.current&1?fr===0&&(fr=3):QN())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return $f(),KC(t,e),t===null&&om(e.stateNode.containerInfo),rn(e),null;case 10:return RN(e.type._context),rn(e),null;case 17:return Fn(e.type)&&ub(),rn(e),null;case 19:if(Nt(Dt),o=e.memoizedState,o===null)return rn(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)xh(o,!1);else{if(fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=gb(t),s!==null){for(e.flags|=128,xh(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return At(Dt,Dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xt()>Mf&&(e.flags|=128,n=!0,xh(o,!1),e.lanes=4194304)}else{if(!n)if(t=gb(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),xh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ot)return rn(e),null}else 2*Xt()-o.renderingStartTime>Mf&&r!==1073741824&&(e.flags|=128,n=!0,xh(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,r=Dt.current,At(Dt,n?r&1|2:r&1),e):(rn(e),null);case 22:case 23:return YN(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?qn&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Tee(t,e){switch(IN(e),e.tag){case 1:return Fn(e.type)&&ub(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $f(),Nt(Mn),Nt(pn),FN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MN(e),null;case 13:if(Nt(Dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Rf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(Dt),null;case 4:return $f(),null;case 10:return RN(e.type._context),null;case 22:case 23:return YN(),null;case 24:return null;default:return null}}var yv=!1,cn=!1,Pee=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ku(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Gt(t,e,n)}else r.current=null}function YC(t,e,r){try{r()}catch(n){Gt(t,e,n)}}var c2=!1;function Iee(t,e){if(OC=sb,t=W6(),TN(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var p;f!==r||i!==0&&f.nodeType!==3||(a=s+i),f!==o||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===r&&++c===i&&(a=s),h===o&&++u===n&&(l=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(RC={focusedElem:t,selectionRange:r},sb=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,g=m.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Wi(e.type,y),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(S){Gt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return m=c2,c2=!1,m}function wp(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&YC(e,r,o)}i=i.next}while(i!==n)}}function hw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function QC(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function B5(t){var e=t.alternate;e!==null&&(t.alternate=null,B5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[So],delete e[am],delete e[DC],delete e[fee],delete e[dee])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function U5(t){return t.tag===5||t.tag===3||t.tag===4}function u2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function XC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=cb));else if(n!==4&&(t=t.child,t!==null))for(XC(t,e,r),t=t.sibling;t!==null;)XC(t,e,r),t=t.sibling}function JC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(JC(t,e,r),t=t.sibling;t!==null;)JC(t,e,r),t=t.sibling}var Lr=null,qi=!1;function Ms(t,e,r){for(r=r.child;r!==null;)V5(t,e,r),r=r.sibling}function V5(t,e,r){if(Mo&&typeof Mo.onCommitFiberUnmount=="function")try{Mo.onCommitFiberUnmount(ow,r)}catch{}switch(r.tag){case 5:cn||ku(r,e);case 6:var n=Lr,i=qi;Lr=null,Ms(t,e,r),Lr=n,qi=i,Lr!==null&&(qi?(t=Lr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Lr.removeChild(r.stateNode));break;case 18:Lr!==null&&(qi?(t=Lr,r=r.stateNode,t.nodeType===8?qS(t.parentNode,r):t.nodeType===1&&qS(t,r),rm(t)):qS(Lr,r.stateNode));break;case 4:n=Lr,i=qi,Lr=r.stateNode.containerInfo,qi=!0,Ms(t,e,r),Lr=n,qi=i;break;case 0:case 11:case 14:case 15:if(!cn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&YC(r,e,s),i=i.next}while(i!==n)}Ms(t,e,r);break;case 1:if(!cn&&(ku(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Gt(r,e,a)}Ms(t,e,r);break;case 21:Ms(t,e,r);break;case 22:r.mode&1?(cn=(n=cn)||r.memoizedState!==null,Ms(t,e,r),cn=n):Ms(t,e,r);break;default:Ms(t,e,r)}}function f2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Pee),e.forEach(function(n){var i=Fee.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Bi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Lr=a.stateNode,qi=!1;break e;case 3:Lr=a.stateNode.containerInfo,qi=!0;break e;case 4:Lr=a.stateNode.containerInfo,qi=!0;break e}a=a.return}if(Lr===null)throw Error(Y(160));V5(o,s,i),Lr=null,qi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)W5(e,t),e=e.sibling}function W5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bi(e,t),mo(t),n&4){try{wp(3,t,t.return),hw(3,t)}catch(y){Gt(t,t.return,y)}try{wp(5,t,t.return)}catch(y){Gt(t,t.return,y)}}break;case 1:Bi(e,t),mo(t),n&512&&r!==null&&ku(r,r.return);break;case 5:if(Bi(e,t),mo(t),n&512&&r!==null&&ku(r,r.return),t.flags&32){var i=t.stateNode;try{Jp(i,"")}catch(y){Gt(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&u6(i,o),wC(a,s);var c=wC(a,o);for(s=0;s<l.length;s+=2){var u=l[s],f=l[s+1];u==="style"?m6(i,f):u==="dangerouslySetInnerHTML"?h6(i,f):u==="children"?Jp(i,f):pN(i,u,f,c)}switch(a){case"input":gC(i,o);break;case"textarea":f6(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?zu(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?zu(i,!!o.multiple,o.defaultValue,!0):zu(i,!!o.multiple,o.multiple?[]:"",!1))}i[am]=o}catch(y){Gt(t,t.return,y)}}break;case 6:if(Bi(e,t),mo(t),n&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){Gt(t,t.return,y)}}break;case 3:if(Bi(e,t),mo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{rm(e.containerInfo)}catch(y){Gt(t,t.return,y)}break;case 4:Bi(e,t),mo(t);break;case 13:Bi(e,t),mo(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(HN=Xt())),n&4&&f2(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(cn=(c=cn)||u,Bi(e,t),cn=c):Bi(e,t),mo(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ae=t,u=t.child;u!==null;){for(f=ae=u;ae!==null;){switch(h=ae,p=h.child,h.tag){case 0:case 11:case 14:case 15:wp(4,h,h.return);break;case 1:ku(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Gt(n,r,y)}}break;case 5:ku(h,h.return);break;case 22:if(h.memoizedState!==null){h2(f);continue}}p!==null?(p.return=h,ae=p):h2(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=p6("display",s))}catch(y){Gt(t,t.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Gt(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bi(e,t),mo(t),n&4&&f2(t);break;case 21:break;default:Bi(e,t),mo(t)}}function mo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(U5(r)){var n=r;break e}r=r.return}throw Error(Y(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Jp(i,""),n.flags&=-33);var o=u2(t);JC(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=u2(t);XC(t,a,s);break;default:throw Error(Y(161))}}catch(l){Gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nee(t,e,r){ae=t,z5(t)}function z5(t,e,r){for(var n=(t.mode&1)!==0;ae!==null;){var i=ae,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||yv;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||cn;a=yv;var c=cn;if(yv=s,(cn=l)&&!c)for(ae=i;ae!==null;)s=ae,l=s.child,s.tag===22&&s.memoizedState!==null?p2(i):l!==null?(l.return=s,ae=l):p2(i);for(;o!==null;)ae=o,z5(o),o=o.sibling;ae=i,yv=a,cn=c}d2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ae=o):d2(t)}}function d2(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||hw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!cn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Wi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Y$(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Y$(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&rm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}cn||e.flags&512&&QC(e)}catch(h){Gt(e,e.return,h)}}if(e===t){ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,ae=r;break}ae=e.return}}function h2(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ae=r;break}ae=e.return}}function p2(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{hw(4,e)}catch(l){Gt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Gt(e,i,l)}}var o=e.return;try{QC(e)}catch(l){Gt(e,o,l)}break;case 5:var s=e.return;try{QC(e)}catch(l){Gt(e,s,l)}}}catch(l){Gt(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var kee=Math.ceil,xb=ks.ReactCurrentDispatcher,GN=ks.ReactCurrentOwner,Ii=ks.ReactCurrentBatchConfig,Je=0,Ir=null,rr=null,Hr=0,qn=0,Ou=el(0),fr=0,hm=null,xc=0,pw=0,qN=0,Sp=null,On=null,HN=0,Mf=1/0,ns=null,_b=!1,ZC=null,Ta=null,gv=!1,ua=null,wb=0,Ep=0,eT=null,v0=-1,b0=0;function Cn(){return Je&6?Xt():v0!==-1?v0:v0=Xt()}function Pa(t){return t.mode&1?Je&2&&Hr!==0?Hr&-Hr:pee.transition!==null?(b0===0&&(b0=T6()),b0):(t=lt,t!==0||(t=window.event,t=t===void 0?16:j6(t.type)),t):1}function oo(t,e,r,n){if(50<Ep)throw Ep=0,eT=null,Error(Y(185));Hy(t,r,n),(!(Je&2)||t!==Ir)&&(t===Ir&&(!(Je&2)&&(pw|=r),fr===4&&ea(t,Hr)),Ln(t,n),r===1&&Je===0&&!(e.mode&1)&&(Mf=Xt()+500,uw&&tl()))}function Ln(t,e){var r=t.callbackNode;pZ(t,e);var n=ob(t,t===Ir?Hr:0);if(n===0)r!==null&&S$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&S$(r),e===1)t.tag===0?hee(m2.bind(null,t)):Z6(m2.bind(null,t)),cee(function(){!(Je&6)&&tl()}),r=null;else{switch(P6(n)){case 1:r=bN;break;case 4:r=A6;break;case 16:r=ib;break;case 536870912:r=C6;break;default:r=ib}r=J5(r,G5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function G5(t,e){if(v0=-1,b0=0,Je&6)throw Error(Y(327));var r=t.callbackNode;if(Yu()&&t.callbackNode!==r)return null;var n=ob(t,t===Ir?Hr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Sb(t,n);else{e=n;var i=Je;Je|=2;var o=H5();(Ir!==t||Hr!==e)&&(ns=null,Mf=Xt()+500,Jl(t,e));do try{jee();break}catch(a){q5(t,a)}while(1);ON(),xb.current=o,Je=i,rr!==null?e=0:(Ir=null,Hr=0,e=fr)}if(e!==0){if(e===2&&(i=TC(t),i!==0&&(n=i,e=tT(t,i))),e===1)throw r=hm,Jl(t,0),ea(t,n),Ln(t,Xt()),r;if(e===6)ea(t,n);else{if(i=t.current.alternate,!(n&30)&&!Oee(i)&&(e=Sb(t,n),e===2&&(o=TC(t),o!==0&&(n=o,e=tT(t,o))),e===1))throw r=hm,Jl(t,0),ea(t,n),Ln(t,Xt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Y(345));case 2:yl(t,On,ns);break;case 3:if(ea(t,n),(n&130023424)===n&&(e=HN+500-Xt(),10<e)){if(ob(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Cn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$C(yl.bind(null,t,On,ns),e);break}yl(t,On,ns);break;case 4:if(ea(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-io(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kee(n/1960))-n,10<n){t.timeoutHandle=$C(yl.bind(null,t,On,ns),n);break}yl(t,On,ns);break;case 5:yl(t,On,ns);break;default:throw Error(Y(329))}}}return Ln(t,Xt()),t.callbackNode===r?G5.bind(null,t):null}function tT(t,e){var r=Sp;return t.current.memoizedState.isDehydrated&&(Jl(t,e).flags|=256),t=Sb(t,e),t!==2&&(e=On,On=r,e!==null&&rT(e)),t}function rT(t){On===null?On=t:On.push.apply(On,t)}function Oee(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!lo(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ea(t,e){for(e&=~qN,e&=~pw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-io(e),n=1<<r;t[r]=-1,e&=~n}}function m2(t){if(Je&6)throw Error(Y(327));Yu();var e=ob(t,0);if(!(e&1))return Ln(t,Xt()),null;var r=Sb(t,e);if(t.tag!==0&&r===2){var n=TC(t);n!==0&&(e=n,r=tT(t,n))}if(r===1)throw r=hm,Jl(t,0),ea(t,e),Ln(t,Xt()),r;if(r===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yl(t,On,ns),Ln(t,Xt()),null}function KN(t,e){var r=Je;Je|=1;try{return t(e)}finally{Je=r,Je===0&&(Mf=Xt()+500,uw&&tl())}}function _c(t){ua!==null&&ua.tag===0&&!(Je&6)&&Yu();var e=Je;Je|=1;var r=Ii.transition,n=lt;try{if(Ii.transition=null,lt=1,t)return t()}finally{lt=n,Ii.transition=r,Je=e,!(Je&6)&&tl()}}function YN(){qn=Ou.current,Nt(Ou)}function Jl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,lee(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(IN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ub();break;case 3:$f(),Nt(Mn),Nt(pn),FN();break;case 5:MN(n);break;case 4:$f();break;case 13:Nt(Dt);break;case 19:Nt(Dt);break;case 10:RN(n.type._context);break;case 22:case 23:YN()}r=r.return}if(Ir=t,rr=t=Ia(t.current,null),Hr=qn=e,fr=0,hm=null,qN=pw=xc=0,On=Sp=null,Rl!==null){for(e=0;e<Rl.length;e++)if(r=Rl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Rl=null}return t}function q5(t,e){do{var r=rr;try{if(ON(),m0.current=bb,vb){for(var n=Lt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}vb=!1}if(bc=0,Pr=ar=Lt=null,_p=!1,um=0,GN.current=null,r===null||r.return===null){fr=1,hm=e,rr=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=Hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=r2(s);if(p!==null){p.flags&=-257,n2(p,s,a,o,e),p.mode&1&&t2(o,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){t2(o,c,e),QN();break e}l=Error(Y(426))}}else if(Ot&&a.mode&1){var g=r2(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),n2(g,s,a,o,e),NN(Df(l,a));break e}}o=l=Df(l,a),fr!==4&&(fr=2),Sp===null?Sp=[o]:Sp.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=I5(o,l,e);K$(o,b);break e;case 1:a=l;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ta===null||!Ta.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=N5(o,a,e);K$(o,S);break e}}o=o.return}while(o!==null)}Y5(r)}catch(_){e=_,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(1)}function H5(){var t=xb.current;return xb.current=bb,t===null?bb:t}function QN(){(fr===0||fr===3||fr===2)&&(fr=4),Ir===null||!(xc&268435455)&&!(pw&268435455)||ea(Ir,Hr)}function Sb(t,e){var r=Je;Je|=2;var n=H5();(Ir!==t||Hr!==e)&&(ns=null,Jl(t,e));do try{Ree();break}catch(i){q5(t,i)}while(1);if(ON(),Je=r,xb.current=n,rr!==null)throw Error(Y(261));return Ir=null,Hr=0,fr}function Ree(){for(;rr!==null;)K5(rr)}function jee(){for(;rr!==null&&!oZ();)K5(rr)}function K5(t){var e=X5(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?Y5(t):rr=e,GN.current=null}function Y5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Tee(r,e),r!==null){r.flags&=32767,rr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fr=6,rr=null;return}}else if(r=Cee(r,e,qn),r!==null){rr=r;return}if(e=e.sibling,e!==null){rr=e;return}rr=e=t}while(e!==null);fr===0&&(fr=5)}function yl(t,e,r){var n=lt,i=Ii.transition;try{Ii.transition=null,lt=1,$ee(t,e,r,n)}finally{Ii.transition=i,lt=n}return null}function $ee(t,e,r,n){do Yu();while(ua!==null);if(Je&6)throw Error(Y(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(mZ(t,o),t===Ir&&(rr=Ir=null,Hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gv||(gv=!0,J5(ib,function(){return Yu(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ii.transition,Ii.transition=null;var s=lt;lt=1;var a=Je;Je|=4,GN.current=null,Iee(t,r),W5(r,t),tee(RC),sb=!!OC,RC=OC=null,t.current=r,Nee(r),sZ(),Je=a,lt=s,Ii.transition=o}else t.current=r;if(gv&&(gv=!1,ua=t,wb=i),o=t.pendingLanes,o===0&&(Ta=null),cZ(r.stateNode),Ln(t,Xt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(_b)throw _b=!1,t=ZC,ZC=null,t;return wb&1&&t.tag!==0&&Yu(),o=t.pendingLanes,o&1?t===eT?Ep++:(Ep=0,eT=t):Ep=0,tl(),null}function Yu(){if(ua!==null){var t=P6(wb),e=Ii.transition,r=lt;try{if(Ii.transition=null,lt=16>t?16:t,ua===null)var n=!1;else{if(t=ua,ua=null,wb=0,Je&6)throw Error(Y(331));var i=Je;for(Je|=4,ae=t.current;ae!==null;){var o=ae,s=o.child;if(ae.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var u=ae;switch(u.tag){case 0:case 11:case 15:wp(8,u,o)}var f=u.child;if(f!==null)f.return=u,ae=f;else for(;ae!==null;){u=ae;var h=u.sibling,p=u.return;if(B5(u),u===c){ae=null;break}if(h!==null){h.return=p,ae=h;break}ae=p}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}ae=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ae=s;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wp(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ae=b;break e}ae=o.return}}var v=t.current;for(ae=v;ae!==null;){s=ae;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ae=x;else e:for(s=v;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hw(9,a)}}catch(_){Gt(a,a.return,_)}if(a===s){ae=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ae=S;break e}ae=a.return}}if(Je=i,tl(),Mo&&typeof Mo.onPostCommitFiberRoot=="function")try{Mo.onPostCommitFiberRoot(ow,t)}catch{}n=!0}return n}finally{lt=r,Ii.transition=e}}return!1}function y2(t,e,r){e=Df(r,e),e=I5(t,e,1),t=Ca(t,e,1),e=Cn(),t!==null&&(Hy(t,1,e),Ln(t,e))}function Gt(t,e,r){if(t.tag===3)y2(t,t,r);else for(;e!==null;){if(e.tag===3){y2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ta===null||!Ta.has(n))){t=Df(r,t),t=N5(e,t,1),e=Ca(e,t,1),t=Cn(),e!==null&&(Hy(e,1,t),Ln(e,t));break}}e=e.return}}function Dee(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&r,Ir===t&&(Hr&r)===r&&(fr===4||fr===3&&(Hr&130023424)===Hr&&500>Xt()-HN?Jl(t,0):qN|=r),Ln(t,e)}function Q5(t,e){e===0&&(t.mode&1?(e=av,av<<=1,!(av&130023424)&&(av=4194304)):e=1);var r=Cn();t=_s(t,e),t!==null&&(Hy(t,e,r),Ln(t,r))}function Mee(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Q5(t,r)}function Fee(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(e),Q5(t,r)}var X5;X5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)jn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return jn=!1,Aee(t,e,r);jn=!!(t.flags&131072)}else jn=!1,Ot&&e.flags&1048576&&e5(e,hb,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;g0(t,e),t=e.pendingProps;var i=Of(e,pn.current);Ku(e,r),i=BN(null,e,n,t,i,r);var o=UN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(n)?(o=!0,fb(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$N(e),i.updater=fw,e.stateNode=i,i._reactInternals=e,VC(e,n,t,r),e=GC(null,e,n,!0,o,r)):(e.tag=0,Ot&&o&&PN(e),xn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(g0(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Bee(n),t=Wi(n,t),i){case 0:e=zC(null,e,n,t,r);break e;case 1:e=s2(null,e,n,t,r);break e;case 11:e=i2(null,e,n,t,r);break e;case 14:e=o2(null,e,n,Wi(n.type,t),r);break e}throw Error(Y(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),zC(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),s2(t,e,n,i,r);case 3:e:{if(j5(e),t===null)throw Error(Y(387));n=e.pendingProps,o=e.memoizedState,i=o.element,i5(t,e),yb(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Df(Error(Y(423)),e),e=a2(t,e,n,r,i);break e}else if(n!==i){i=Df(Error(Y(424)),e),e=a2(t,e,n,r,i);break e}else for(Qn=Aa(e.stateNode.containerInfo.firstChild),ei=e,Ot=!0,Yi=null,r=l5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rf(),n===i){e=ws(t,e,r);break e}xn(t,e,n,r)}e=e.child}return e;case 5:return c5(e),t===null&&LC(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,jC(n,i)?s=null:o!==null&&jC(n,o)&&(e.flags|=32),R5(t,e),xn(t,e,s,r),e.child;case 6:return t===null&&LC(e),null;case 13:return $5(t,e,r);case 4:return DN(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=jf(e,null,n,r):xn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),i2(t,e,n,i,r);case 7:return xn(t,e,e.pendingProps,r),e.child;case 8:return xn(t,e,e.pendingProps.children,r),e.child;case 12:return xn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,At(pb,n._currentValue),n._currentValue=s,o!==null)if(lo(o.value,s)){if(o.children===i.children&&!Mn.current){e=ws(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=ps(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),BC(o.return,r,e),a.lanes|=r;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Y(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),BC(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}xn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ku(e,r),i=ji(i),n=n(i),e.flags|=1,xn(t,e,n,r),e.child;case 14:return n=e.type,i=Wi(n,e.pendingProps),i=Wi(n.type,i),o2(t,e,n,i,r);case 15:return k5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),g0(t,e),e.tag=1,Fn(n)?(t=!0,fb(e)):t=!1,Ku(e,r),s5(e,n,i),VC(e,n,i,r),GC(null,e,n,!0,t,r);case 19:return D5(t,e,r);case 22:return O5(t,e,r)}throw Error(Y(156,e.tag))};function J5(t,e){return E6(t,e)}function Lee(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(t,e,r,n){return new Lee(t,e,r,n)}function XN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bee(t){if(typeof t=="function")return XN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yN)return 11;if(t===gN)return 14}return 2}function Ia(t,e){var r=t.alternate;return r===null?(r=Ai(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function x0(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")XN(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case wu:return Zl(r.children,i,o,e);case mN:s=8,i|=8;break;case dC:return t=Ai(12,r,e,i|2),t.elementType=dC,t.lanes=o,t;case hC:return t=Ai(13,r,e,i),t.elementType=hC,t.lanes=o,t;case pC:return t=Ai(19,r,e,i),t.elementType=pC,t.lanes=o,t;case a6:return mw(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o6:s=10;break e;case s6:s=9;break e;case yN:s=11;break e;case gN:s=14;break e;case Hs:s=16,n=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Ai(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Zl(t,e,r,n){return t=Ai(7,t,n,e),t.lanes=r,t}function mw(t,e,r,n){return t=Ai(22,t,n,e),t.elementType=a6,t.lanes=r,t.stateNode={isHidden:!1},t}function eE(t,e,r){return t=Ai(6,t,null,e),t.lanes=r,t}function tE(t,e,r){return e=Ai(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uee(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$S(0),this.expirationTimes=$S(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$S(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JN(t,e,r,n,i,o,s,a,l){return t=new Uee(t,e,r,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ai(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$N(o),t}function Vee(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_u,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Z5(t){if(!t)return Ua;t=t._reactInternals;e:{if($c(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var r=t.type;if(Fn(r))return J6(t,r,e)}return e}function eW(t,e,r,n,i,o,s,a,l){return t=JN(r,n,!0,t,i,o,s,a,l),t.context=Z5(null),r=t.current,n=Cn(),i=Pa(r),o=ps(n,i),o.callback=e??null,Ca(r,o,i),t.current.lanes=i,Hy(t,i,n),Ln(t,n),t}function yw(t,e,r,n){var i=e.current,o=Cn(),s=Pa(i);return r=Z5(r),e.context===null?e.context=r:e.pendingContext=r,e=ps(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ca(i,e,s),t!==null&&(oo(t,i,s,o),p0(t,i,s)),s}function Eb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function g2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ZN(t,e){g2(t,e),(t=t.alternate)&&g2(t,e)}function Wee(){return null}var tW=typeof reportError=="function"?reportError:function(t){console.error(t)};function ek(t){this._internalRoot=t}gw.prototype.render=ek.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));yw(t,e,null,null)};gw.prototype.unmount=ek.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_c(function(){yw(null,t,null,null)}),e[xs]=null}};function gw(t){this._internalRoot=t}gw.prototype.unstable_scheduleHydration=function(t){if(t){var e=k6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Zs.length&&e!==0&&e<Zs[r].priority;r++);Zs.splice(r,0,t),r===0&&R6(t)}};function tk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v2(){}function zee(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=Eb(s);o.call(c)}}var s=eW(e,n,t,0,null,!1,!1,"",v2);return t._reactRootContainer=s,t[xs]=s.current,om(t.nodeType===8?t.parentNode:t),_c(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Eb(l);a.call(c)}}var l=JN(t,0,!1,null,null,!1,!1,"",v2);return t._reactRootContainer=l,t[xs]=l.current,om(t.nodeType===8?t.parentNode:t),_c(function(){yw(e,l,r,n)}),l}function bw(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Eb(s);a.call(l)}}yw(e,s,t,i)}else s=zee(r,e,t,i,n);return Eb(s)}I6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xh(e.pendingLanes);r!==0&&(xN(e,r|1),Ln(e,Xt()),!(Je&6)&&(Mf=Xt()+500,tl()))}break;case 13:_c(function(){var n=_s(t,1);if(n!==null){var i=Cn();oo(n,t,1,i)}}),ZN(t,1)}};_N=function(t){if(t.tag===13){var e=_s(t,134217728);if(e!==null){var r=Cn();oo(e,t,134217728,r)}ZN(t,134217728)}};N6=function(t){if(t.tag===13){var e=Pa(t),r=_s(t,e);if(r!==null){var n=Cn();oo(r,t,e,n)}ZN(t,e)}};k6=function(){return lt};O6=function(t,e){var r=lt;try{return lt=t,e()}finally{lt=r}};EC=function(t,e,r){switch(e){case"input":if(gC(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=cw(n);if(!i)throw Error(Y(90));c6(n),gC(n,i)}}}break;case"textarea":f6(t,r);break;case"select":e=r.value,e!=null&&zu(t,!!r.multiple,e,!1)}};v6=KN;b6=_c;var Gee={usingClientEntryPoint:!1,Events:[Yy,Cu,cw,y6,g6,KN]},_h={findFiberByHostInstance:Ol,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},qee={bundleType:_h.bundleType,version:_h.version,rendererPackageName:_h.rendererPackageName,rendererConfig:_h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=w6(t),t===null?null:t.stateNode},findFiberByHostInstance:_h.findFiberByHostInstance||Wee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{ow=vv.inject(qee),Mo=vv}catch{}}si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gee;si.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tk(e))throw Error(Y(200));return Vee(t,e,null,r)};si.createRoot=function(t,e){if(!tk(t))throw Error(Y(299));var r=!1,n="",i=tW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=JN(t,1,!1,null,null,r,!1,n,i),t[xs]=e.current,om(t.nodeType===8?t.parentNode:t),new ek(e)};si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=w6(e),t=t===null?null:t.stateNode,t};si.flushSync=function(t){return _c(t)};si.hydrate=function(t,e,r){if(!vw(e))throw Error(Y(200));return bw(null,t,e,!0,r)};si.hydrateRoot=function(t,e,r){if(!tk(t))throw Error(Y(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=tW;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=eW(e,null,t,1,r??null,i,!1,o,s),t[xs]=e.current,om(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new gw(e)};si.render=function(t,e,r){if(!vw(e))throw Error(Y(200));return bw(null,t,e,!1,r)};si.unmountComponentAtNode=function(t){if(!vw(t))throw Error(Y(40));return t._reactRootContainer?(_c(function(){bw(null,null,t,!1,function(){t._reactRootContainer=null,t[xs]=null})}),!0):!1};si.unstable_batchedUpdates=KN;si.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vw(r))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return bw(t,e,r,!1,n)};si.version="18.2.0-next-9e3b772b8-20220608";function rW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rW)}catch(t){console.error(t)}}rW(),e6.exports=si;var Xy=e6.exports;const Hee=ot(Xy);var b2=Xy;uC.createRoot=b2.createRoot,uC.hydrateRoot=b2.hydrateRoot;var nW={exports:{}},iW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff=E;function Kee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yee=typeof Object.is=="function"?Object.is:Kee,Qee=Ff.useState,Xee=Ff.useEffect,Jee=Ff.useLayoutEffect,Zee=Ff.useDebugValue;function ete(t,e){var r=e(),n=Qee({inst:{value:r,getSnapshot:e}}),i=n[0].inst,o=n[1];return Jee(function(){i.value=r,i.getSnapshot=e,rE(i)&&o({inst:i})},[t,r,e]),Xee(function(){return rE(i)&&o({inst:i}),t(function(){rE(i)&&o({inst:i})})},[t]),Zee(r),r}function rE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Yee(t,r)}catch{return!0}}function tte(t,e){return e()}var rte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tte:ete;iW.useSyncExternalStore=Ff.useSyncExternalStore!==void 0?Ff.useSyncExternalStore:rte;nW.exports=iW;var rk=nW.exports;const{useEffect:nte,useLayoutEffect:ite,useRef:ote,useInsertionEffect:ste}=MJ,ate=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lte=ate?ite:nte,cte=ste||lte,oW=t=>{const e=ote([t,(...r)=>e[0](...r)]).current;return cte(()=>{e[0]=t}),e[1]},ute=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",fte=(t,e="")=>t[0]==="~"?t.slice(1):e+t,dte="popstate",nk="pushState",ik="replaceState",hte="hashchange",x2=[dte,nk,ik,hte],pte=t=>{for(const e of x2)addEventListener(e,t);return()=>{for(const e of x2)removeEventListener(e,t)}},mte=(t,e)=>rk.useSyncExternalStore(pte,t,e),_2=()=>location.pathname,yte=({ssrPath:t}={})=>mte(_2,t?()=>t:_2),gte=(t,{replace:e=!1}={})=>history[e?ik:nk](null,"",t),vte=(t={})=>[ute(t.base,yte(t)),oW((e,r)=>gte(fte(e,t.base),r))];if(typeof history<"u")for(const t of[nk,ik]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}function bte(t=_te){let e={};const r=n=>e[n]||(e[n]=t(n));return(n,i)=>{const{regexp:o,keys:s}=r(n||""),a=o.exec(i);return a?[!0,s.reduce((c,u,f)=>(c[u.name]=a[f+1],c),{})]:[!1,null]}}const w2=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),xte=(t,e,r)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&r&&(n="(?:\\/"+n+")"),n+(e?"?":"")},_te=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let r=null,n=0,i=[],o="";for(;(r=e.exec(t))!==null;){const[s,a,l]=r,c=l==="+"||l==="*",u=l==="?"||l==="*",f=u&&t[r.index-1]==="/"?1:0,h=t.substring(n,r.index-f);i.push({name:a}),n=e.lastIndex,o+=w2(h)+xte(c,u,f)}return o+=w2(t.substring(n)),{keys:i,regexp:new RegExp("^"+o+"(?:\\/)?$","i")}},wte={hook:vte,matcher:bte(),base:""},Ste=E.createContext(wte),xw=()=>E.useContext(Ste),_w=t=>t.hook(t),Ete=()=>_w(xw()),Ate=t=>{const e=xw(),[r]=_w(e);return e.matcher(t,r)},sW=E.createContext({params:{}}),Cte=()=>E.useContext(sW).params,S2=(t,e)=>E.createElement(sW.Provider,{value:{params:t},children:e}),at=({path:t,match:e,component:r,children:n})=>{const i=Ate(t),[o,s]=e||i;return o?r?S2(s,E.createElement(r,{params:s})):S2(s,typeof n=="function"?n(s):n):null};E.forwardRef((t,e)=>{const r=xw(),[,n]=_w(r),{to:i,href:o=i,children:s,onClick:a}=t,l=oW(f=>{f.ctrlKey||f.metaKey||f.altKey||f.shiftKey||f.button!==0||(a&&a(f),f.defaultPrevented||(f.preventDefault(),n(i||o,t)))}),c={href:o[0]==="~"?o.slice(1):r.base+o,onClick:l,to:null,ref:e},u=E.isValidElement(s)?s:E.createElement("a",t);return E.cloneElement(u,c)});const nT=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===E.Fragment?nT(e.props.children):nT(e))):[t],Tte=({children:t,location:e})=>{const r=xw(),n=r.matcher,[i]=_w(r);for(const o of nT(t)){let s=0;if(E.isValidElement(o)&&(s=o.props.path?n(o.props.path,e||i):[!0,{}])[0])return E.cloneElement(o,{match:s})}return null};const Pte="modulepreload",Ite=function(t){return"/"+t},E2={},aW=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=Ite(o),o in E2)return;E2[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Pte,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Nte=t=>{t&&t instanceof Function&&aW(()=>import("./web-vitals-9f4c2f45.js"),[]).then(({getCLS:e,getFID:r,getFCP:n,getLCP:i,getTTFB:o})=>{e(t),r(t),n(t),i(t),o(t)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(t,e){if(!t)throw Md(e)},Md=function(t){return new Error("Firebase Database ("+lW.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},kte=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],s=t[r++],a=t[r++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ok={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,f=(o&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,s||(h=64)),n.push(r[u],r[f],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kte(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||f==null)throw new Ote;const h=o<<2|a>>4;if(n.push(h),c!==64){const p=a<<4&240|c>>2;if(n.push(p),f!==64){const m=c<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ote extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uW=function(t){const e=cW(t);return ok.encodeByteArray(e,!0)},Ab=function(t){return uW(t).replace(/\./g,"")},iT=function(t){try{return ok.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rte(t){return fW(void 0,t)}function fW(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!jte(r)||(t[r]=fW(t[r],e[r]));return t}function jte(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte=()=>$te().__FIREBASE_DEFAULTS__,Mte=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Fte=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iT(t[1]);return e&&JSON.parse(e)},sk=()=>{try{return Dte()||Mte()||Fte()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lte=t=>{var e,r;return(r=(e=sk())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},ak=t=>{const e=Lte(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},dW=()=>{var t;return(t=sk())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ab(JSON.stringify(r)),Ab(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bte(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bte())}function Ute(){var t;const e=(t=sk())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vte(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pW(){return lW.NODE_ADMIN===!0}function Wte(){try{return typeof indexedDB=="object"}catch{return!1}}function zte(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gte="FirebaseError";class Dc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Gte,Object.setPrototypeOf(this,Dc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mW.prototype.create)}}class mW{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?qte(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Dc(i,a,n)}}function qte(t,e){return t.replace(Hte,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Hte=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return JSON.parse(t)}function cr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW=function(t){let e={},r={},n={},i="";try{const o=t.split(".");e=pm(iT(o[0])||""),r=pm(iT(o[1])||""),i=o[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:i}},Kte=function(t){const e=yW(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},Yte=function(t){const e=yW(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function A2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cb(t,e,r){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}function oT(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],s=e[i];if(C2(o)&&C2(s)){if(!oT(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function C2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qte(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xte{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)n[f]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let f=0;f<16;f++)n[f]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let f=16;f<80;f++){const h=n[f-3]^n[f-8]^n[f-14]^n[f-16];n[f]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let f=0;f<80;f++){f<40?f<20?(c=a^o&(s^a),u=1518500249):(c=o^s^a,u=1859775393):f<60?(c=o&s|a&(o|s),u=2400959708):(c=o^s^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+n[f]&4294967295;l=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<r;){if(s===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<r;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<r;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[n]=this.chain_[i]>>o&255,++n;return e}}function Zy(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jte=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i>=55296&&i<=56319){const o=i-55296;n++,X(n<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(n)-56320;i=65536+(o<<10)+s}i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):i<65536?(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},ww=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){return t&&t._delegate?t._delegate:t}class wc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zte=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Jy;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tre(e))try{this.getOrInitializeService({instanceIdentifier:gl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=gl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gl){return this.instances.has(e)}getOptions(e=gl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ere(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=gl){return this.component?this.component.multipleInstances?e:gl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ere(t){return t===gl?void 0:t}function tre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Zte(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const nre={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},ire=Qe.INFO,ore={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},sre=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=ore[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ck{constructor(e){this.name=e,this._logLevel=ire,this._logHandler=sre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const are=(t,e)=>e.some(r=>t instanceof r);let T2,P2;function lre(){return T2||(T2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cre(){return P2||(P2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gW=new WeakMap,sT=new WeakMap,vW=new WeakMap,nE=new WeakMap,uk=new WeakMap;function ure(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(Na(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&gW.set(r,t)}).catch(()=>{}),uk.set(e,t),e}function fre(t){if(sT.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sT.set(t,e)}let aT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vW.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Na(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dre(t){aT=t(aT)}function hre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(iE(this),e,...r);return vW.set(n,e.sort?e.sort():[e]),Na(n)}:cre().includes(t)?function(...e){return t.apply(iE(this),e),Na(gW.get(this))}:function(...e){return Na(t.apply(iE(this),e))}}function pre(t){return typeof t=="function"?hre(t):(t instanceof IDBTransaction&&fre(t),are(t,lre())?new Proxy(t,aT):t)}function Na(t){if(t instanceof IDBRequest)return ure(t);if(nE.has(t))return nE.get(t);const e=pre(t);return e!==t&&(nE.set(t,e),uk.set(e,t)),e}const iE=t=>uk.get(t);function mre(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Na(s);return n&&s.addEventListener("upgradeneeded",l=>{n(Na(s.result),l.oldVersion,l.newVersion,Na(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const yre=["get","getKey","getAll","getAllKeys","count"],gre=["put","add","delete","clear"],oE=new Map;function I2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oE.get(e))return oE.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=gre.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||yre.includes(r)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),i&&l.done]))[0]};return oE.set(e,o),o}dre(t=>({...t,get:(e,r,n)=>I2(e,r)||t.get(e,r,n),has:(e,r)=>!!I2(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(bre(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function bre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lT="@firebase/app",N2="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new ck("@firebase/app"),xre="@firebase/app-compat",_re="@firebase/analytics-compat",wre="@firebase/analytics",Sre="@firebase/app-check-compat",Ere="@firebase/app-check",Are="@firebase/auth",Cre="@firebase/auth-compat",Tre="@firebase/database",Pre="@firebase/database-compat",Ire="@firebase/functions",Nre="@firebase/functions-compat",kre="@firebase/installations",Ore="@firebase/installations-compat",Rre="@firebase/messaging",jre="@firebase/messaging-compat",$re="@firebase/performance",Dre="@firebase/performance-compat",Mre="@firebase/remote-config",Fre="@firebase/remote-config-compat",Lre="@firebase/storage",Bre="@firebase/storage-compat",Ure="@firebase/firestore",Vre="@firebase/firestore-compat",Wre="firebase",zre="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="[DEFAULT]",Gre={[lT]:"fire-core",[xre]:"fire-core-compat",[wre]:"fire-analytics",[_re]:"fire-analytics-compat",[Ere]:"fire-app-check",[Sre]:"fire-app-check-compat",[Are]:"fire-auth",[Cre]:"fire-auth-compat",[Tre]:"fire-rtdb",[Pre]:"fire-rtdb-compat",[Ire]:"fire-fn",[Nre]:"fire-fn-compat",[kre]:"fire-iid",[Ore]:"fire-iid-compat",[Rre]:"fire-fcm",[jre]:"fire-fcm-compat",[$re]:"fire-perf",[Dre]:"fire-perf-compat",[Mre]:"fire-rc",[Fre]:"fire-rc-compat",[Lre]:"fire-gcs",[Bre]:"fire-gcs-compat",[Ure]:"fire-fst",[Vre]:"fire-fst-compat","fire-js":"fire-js",[Wre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new Map,uT=new Map;function qre(t,e){try{t.container.addComponent(e)}catch(r){Sc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Bf(t){const e=t.name;if(uT.has(e))return Sc.debug(`There were multiple attempts to register component ${e}.`),!1;uT.set(e,t);for(const r of Tb.values())qre(r,t);return!0}function fk(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ka=new mW("app","Firebase",Hre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kre{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=zre;function bW(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:cT,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ka.create("bad-app-name",{appName:String(i)});if(r||(r=dW()),!r)throw ka.create("no-options");const o=Tb.get(i);if(o){if(oT(r,o.options)&&oT(n,o.config))return o;throw ka.create("duplicate-app",{appName:i})}const s=new rre(i);for(const l of uT.values())s.addComponent(l);const a=new Kre(r,n,s);return Tb.set(i,a),a}function hk(t=cT){const e=Tb.get(t);if(!e&&t===cT&&dW())return bW();if(!e)throw ka.create("no-app",{appName:t});return e}function Lo(t,e,r){var n;let i=(n=Gre[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sc.warn(a.join(" "));return}Bf(new wc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yre="firebase-heartbeat-database",Qre=1,mm="firebase-heartbeat-store";let sE=null;function xW(){return sE||(sE=mre(Yre,Qre,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(mm)}}}).catch(t=>{throw ka.create("idb-open",{originalErrorMessage:t.message})})),sE}async function Xre(t){try{return await(await xW()).transaction(mm).objectStore(mm).get(_W(t))}catch(e){if(e instanceof Dc)Sc.warn(e.message);else{const r=ka.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sc.warn(r.message)}}}async function k2(t,e){try{const n=(await xW()).transaction(mm,"readwrite");await n.objectStore(mm).put(e,_W(t)),await n.done}catch(r){if(r instanceof Dc)Sc.warn(r.message);else{const n=ka.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Sc.warn(n.message)}}}function _W(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jre=1024,Zre=30*24*60*60*1e3;class ene{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new rne(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=O2();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=Zre}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=O2(),{heartbeatsToSend:r,unsentEntries:n}=tne(this._heartbeatsCache.heartbeats),i=Ab(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function O2(){return new Date().toISOString().substring(0,10)}function tne(t,e=Jre){const r=[];let n=t.slice();for(const i of t){const o=r.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),R2(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),R2(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class rne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wte()?zte().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Xre(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return k2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return k2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function R2(t){return Ab(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nne(t){Bf(new wc("platform-logger",e=>new vre(e),"PRIVATE")),Bf(new wc("heartbeat",e=>new ene(e),"PRIVATE")),Lo(lT,N2,t),Lo(lT,N2,"esm2017"),Lo("fire-js","")}nne("");const j2="@firebase/database",$2="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wW="";function ine(t){wW=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class one{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cr(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:pm(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Yo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new one(e)}}catch{}return new sne},$l=SW("localStorage"),fT=SW("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new ck("@firebase/database"),ane=function(){let t=1;return function(){return t++}}(),EW=function(t){const e=Jte(t),r=new Xte;r.update(e);const n=r.digest();return ok.encodeByteArray(n)},eg=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=eg.apply(null,n):typeof n=="object"?e+=cr(n):e+=n,e+=" "}return e};let ec=null,D2=!0;const lne=function(t,e){X(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Qu.logLevel=Qe.VERBOSE,ec=Qu.log.bind(Qu),e&&fT.set("logging_enabled",!0)):typeof t=="function"?ec=t:(ec=null,fT.remove("logging_enabled"))},Ur=function(...t){if(D2===!0&&(D2=!1,ec===null&&fT.get("logging_enabled")===!0&&lne(!0)),ec){const e=eg.apply(null,t);ec(e)}},tg=function(t){return function(...e){Ur(t,...e)}},dT=function(...t){const e="FIREBASE INTERNAL ERROR: "+eg(...t);Qu.error(e)},Ss=function(...t){const e=`FIREBASE FATAL ERROR: ${eg(...t)}`;throw Qu.error(e),new Error(e)},Tn=function(...t){const e="FIREBASE WARNING: "+eg(...t);Qu.warn(e)},cne=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},une=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Ec="[MIN_NAME]",Va="[MAX_NAME]",Mc=function(t,e){if(t===e)return 0;if(t===Ec||e===Va)return-1;if(e===Ec||t===Va)return 1;{const r=M2(t),n=M2(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},fne=function(t,e){return t===e?0:t<e?-1:1},wh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+cr(e))},mk=function(t){if(typeof t!="object"||t===null)return cr(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=cr(e[n]),r+=":",r+=mk(t[e[n]]);return r+="}",r},AW=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let i=0;i<r;i+=e)i+e>r?n.push(t.substring(i,r)):n.push(t.substring(i,i+e));return n};function Jr(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const CW=function(t){X(!pk(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let i,o,s,a,l;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=a+n,s=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(o=0,s=Math.round(t/Math.pow(2,1-n-r))));const c=[];for(l=r;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const u=c.join("");let f="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),f=f+h}return f.toLowerCase()},dne=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},hne=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function pne(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const mne=new RegExp("^-?(0*)\\d{1,10}$"),yne=-2147483648,gne=2147483647,M2=function(t){if(mne.test(t)){const e=Number(t);if(e>=yne&&e<=gne)return e}return null},Fd=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Tn("Exception was thrown by user callback.",r),e},Math.floor(0))}},vne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ap=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bne{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}}class Xu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="5",TW="v",PW="s",IW="r",NW="f",kW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,OW="ls",RW="p",hT="ac",jW="websocket",$W="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,r,n,i,o=!1,s="",a=!1,l=!1){this.secure=r,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$l.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$l.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function _ne(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function MW(t,e,r){X(typeof e=="string","typeof type must == string"),X(typeof r=="object","typeof params must == object");let n;if(e===jW)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$W)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_ne(t)&&(r.ns=t.namespace);const i=[];return Jr(r,(o,s)=>{i.push(o+"="+s)}),n+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(){this.counters_={}}incrementCounter(e,r=1){Yo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return Rte(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={},lE={};function gk(t){const e=t.toString();return aE[e]||(aE[e]=new wne),aE[e]}function Sne(t,e){const r=t.toString();return lE[r]||(lE[r]=e()),lE[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&Fd(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="start",Ane="close",Cne="pLPCommand",Tne="pRTLPCB",FW="id",LW="pw",BW="ser",Pne="cb",Ine="seg",Nne="ts",kne="d",One="dframe",UW=1870,VW=30,Rne=UW-VW,jne=25e3,$ne=3e4;class Ru{constructor(e,r,n,i,o,s,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tg(e),this.stats_=gk(r),this.urlFn=l=>(this.appCheckToken&&(l[hT]=this.appCheckToken),MW(r,$W,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Ene(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($ne)),une(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vk((...o)=>{const[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===F2)this.id=a,this.password=l;else if(s===Ane)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[F2]="t",n[BW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Pne]=this.scriptTagHolder.uniqueCallbackIdentifier),n[TW]=yk,this.transportSessionId&&(n[PW]=this.transportSessionId),this.lastSessionId&&(n[OW]=this.lastSessionId),this.applicationId&&(n[RW]=this.applicationId),this.appCheckToken&&(n[hT]=this.appCheckToken),typeof location<"u"&&location.hostname&&kW.test(location.hostname)&&(n[IW]=NW);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ru.forceAllow_=!0}static forceDisallow(){Ru.forceDisallow_=!0}static isAvailable(){return Ru.forceAllow_?!0:!Ru.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!dne()&&!hne()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=cr(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=uW(r),i=AW(n,Rne);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[One]="t",n[FW]=e,n[LW]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=cr(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class vk{constructor(e,r,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ane(),window[Cne+this.uniqueCallbackIdentifier]=e,window[Tne+this.uniqueCallbackIdentifier]=r,this.myIFrame=vk.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ur("frame writing exception"),a.stack&&Ur(a.stack),Ur(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ur("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[FW]=this.myID,e[LW]=this.myPW,e[BW]=this.currentSerial;let r=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+VW+n.length<=UW;){const s=this.pendingSegs.shift();n=n+"&"+Ine+i+"="+s.seg+"&"+Nne+i+"="+s.ts+"&"+kne+i+"="+s.d,i++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},i=setTimeout(n,Math.floor(jne)),o=()=>{clearTimeout(i),n()};this.addTag(e,o)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Ur("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dne=16384,Mne=45e3;let Pb=null;typeof MozWebSocket<"u"?Pb=MozWebSocket:typeof WebSocket<"u"&&(Pb=WebSocket);class Xi{constructor(e,r,n,i,o,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tg(this.connId),this.stats_=gk(r),this.connURL=Xi.connectionURL_(r,s,a,i,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,i,o){const s={};return s[TW]=yk,typeof location<"u"&&location.hostname&&kW.test(location.hostname)&&(s[IW]=NW),r&&(s[PW]=r),n&&(s[OW]=n),i&&(s[hT]=i),o&&(s[RW]=o),MW(e,jW,s)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$l.set("previous_websocket_failure",!0);try{let n;pW(),this.mySock=new Pb(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Xi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Pb!==null&&!Xi.forceDisallow_}static previouslyFailed(){return $l.isInMemoryStorage||$l.get("previous_websocket_failure")===!0}markConnectionHealthy(){$l.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=pm(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=cr(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=AW(r,Dne);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Mne))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xi.responsesRequiredToBeHealthy=2;Xi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ru,Xi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=Xi&&Xi.isAvailable();let n=r&&!Xi.previouslyFailed();if(e.webSocketOnly&&(r||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Xi];else{const i=this.transports_=[];for(const o of ym.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);ym.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ym.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fne=6e4,Lne=5e3,Bne=10*1024,Une=100*1024,cE="t",L2="d",Vne="s",B2="r",Wne="e",U2="o",V2="a",W2="n",z2="p",zne="h";class Gne{constructor(e,r,n,i,o,s,a,l,c,u){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tg("c:"+this.id+":"),this.transportManager_=new ym(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ap(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Une?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Bne?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(cE in e){const r=e[cE];r===V2?this.upgradeIfSecondaryHealthy_():r===B2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===U2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=wh("t",e),n=wh("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:z2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:V2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:W2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=wh("t",e),n=wh("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=wh(cE,e);if(L2 in e){const n=e[L2];if(r===zne){const i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(r===W2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===Vne?this.onConnectionShutdown_(n):r===B2?this.onReset_(n):r===Wne?dT("Server Error: "+n):r===U2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dT("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),yk!==n&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Ap(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Fne))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ap(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Lne))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:z2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{put(e,r,n,i){}merge(e,r,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const i=this.getInitialEvent(e);i&&r.apply(n,i)}off(e,r,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===r&&(!n||n===i[o].context)){i.splice(o,1);return}}validateEventType_(e){X(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib extends zW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hW()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ib}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=32,q2=768;let ut=class{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}};function et(){return new ut("")}function je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Wa(t){return t.pieces_.length-t.pieceNum_}function Et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ut(t.pieces_,e)}function bk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qne(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function gm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function GW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new ut(e,0)}function Ht(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof ut)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&r.push(n[i])}return new ut(r,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function Sn(t,e){const r=je(t),n=je(e);if(r===null)return e;if(r===n)return Sn(Et(t),Et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Hne(t,e){const r=gm(t,0),n=gm(e,0);for(let i=0;i<r.length&&i<n.length;i++){const o=Mc(r[i],n[i]);if(o!==0)return o}return r.length===n.length?0:r.length<n.length?-1:1}function xk(t,e){if(Wa(t)!==Wa(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function Ci(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(Wa(t)>Wa(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class Kne{constructor(e,r){this.errorPrefix_=r,this.parts_=gm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=ww(this.parts_[n]);qW(this)}}function Yne(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ww(e),qW(t)}function Qne(t){const e=t.parts_.pop();t.byteLength_-=ww(e),t.parts_.length>0&&(t.byteLength_-=1)}function qW(t){if(t.byteLength_>q2)throw new Error(t.errorPrefix_+"has a key path longer than "+q2+" bytes ("+t.byteLength_+").");if(t.parts_.length>G2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+G2+") or object contains a cycle "+vl(t))}function vl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends zW{constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new _k}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=1e3,Xne=60*5*1e3,H2=30*1e3,Jne=1.3,Zne=3e4,eie="server_kill",K2=3;class ms extends WW{constructor(e,r,n,i,o,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ms.nextPersistentConnectionId_++,this.log_=tg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sh,this.maxReconnectDelay_=Xne,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!pW())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_k.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ib.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const i=++this.requestNumber_,o={r:i,a:e,b:r};this.log_(cr(o)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const r=new Jy,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(e,r,n,i){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:r,query:e,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+n+" for "+i);const o={p:n},s="q";e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,a=>{const l=a.d,c=a.s;ms.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Yo(e,"w")){const n=Lf(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Yte(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=H2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=Kte(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,i=>{const o=i.s,s=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,r)}sendUnlisten_(e,r,n,i){this.log_("Unlisten on "+e+" for "+r);const o={p:e},s="n";i&&(o.q=n,o.t=i),this.sendRequest(s,o)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,i){const o={p:r,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{i&&setTimeout(()=>{i(s.s,s.d)},Math.floor(0))})}put(e,r,n,i){this.putInternal("p",e,r,n,i)}merge(e,r,n,i){this.putInternal("m",e,r,n,i)}putInternal(e,r,n,i,o){this.initConnection_();const s={p:r,d:n};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const o=n.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+cr(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):dT("Unrecognized action received from server: "+cr(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Sh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Zne&&(this.reconnectDelay_=Sh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Jne)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ms.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(f){X(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Ur("getToken() completed but was canceled"):(Ur("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,a=new Gne(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,p=>{Tn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(eie)},o))}catch(f){this.log_("Failed to get token: "+f),s||(this.repoInfo_.nodeAdmin&&Tn(f),l())}}}interrupt(e){Ur("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ur("Resuming connection for reason: "+e),delete this.interruptReasons_[e],A2(this.interruptReasons_)&&(this.reconnectDelay_=Sh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(o=>mk(o)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,r){const n=new ut(e).toString();let i;if(this.listens.has(n)){const o=this.listens.get(n);i=o.get(r),o.delete(r),o.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,r){Ur("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=K2&&(this.reconnectDelay_=H2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Ur("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=K2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+wW.replace(/\./g,"-")]=1,hW()?e["framework.cordova"]=1:Vte()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ib.getInstance().currentlyOnline();return A2(this.interruptReasons_)&&e}}ms.nextPersistentConnectionId_=0;ms.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new De(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new De(Ec,e),i=new De(Ec,r);return this.compare(n,i)!==0}minPost(){return De.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bv;class HW extends Sw{static get __EMPTY_NODE(){return bv}static set __EMPTY_NODE(e){bv=e}compare(e,r){return Mc(e.name,r.name)}isDefinedOn(e){throw Md("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return De.MIN}maxPost(){return new De(Va,bv)}makePost(e,r){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new De(e,bv)}toString(){return".key"}}const tc=new HW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv=class{constructor(e,r,n,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=r?n(e.key,r):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Hn=class Zh{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Zh.RED,this.left=i??Po.EMPTY_NODE,this.right=o??Po.EMPTY_NODE}copy(e,r,n,i,o){return new Zh(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i=i.copy(null,r,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Po.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,i;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return Po.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Hn.RED=!0;Hn.BLACK=!1;class tie{copy(e,r,n,i,o){return this}insert(e,r,n){return new Hn(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Po=class _0{constructor(e,r=_0.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new _0(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Hn.BLACK,null,null))}remove(e){return new _0(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hn.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,i=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new xv(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new xv(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new xv(this.root_,null,this.comparator_,!0,e)}};Po.EMPTY_NODE=new tie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rie(t,e){return Mc(t.name,e.name)}function wk(t,e){return Mc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pT;function nie(t){pT=t}const KW=function(t){return typeof t=="number"?"number:"+CW(t):"string:"+t},YW=function(t){if(t.isLeafNode()){const e=t.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yo(e,".sv"),"Priority must be a string or number.")}else X(t===pT||t.isEmpty(),"priority of unexpected type.");X(t===pT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y2;class Sr{constructor(e,r=Sr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),YW(this.priorityNode_)}static set __childrenNodeConstructor(e){Y2=e}static get __childrenNodeConstructor(){return Y2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Sr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Sr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:je(e)===".priority"?this.priorityNode_:Sr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Sr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=je(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(X(n!==".priority"||Wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Sr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Et(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+KW(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=CW(this.value_):e+=this.value_,this.lazyHash_=EW(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Sr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Sr.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,i=Sr.VALUE_TYPE_ORDER.indexOf(r),o=Sr.VALUE_TYPE_ORDER.indexOf(n);return X(i>=0,"Unknown leaf type: "+r),X(o>=0,"Unknown leaf type: "+n),i===o?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Sr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QW,XW;function iie(t){QW=t}function oie(t){XW=t}class sie extends Sw{compare(e,r){const n=e.node.getPriority(),i=r.node.getPriority(),o=n.compareTo(i);return o===0?Mc(e.name,r.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return De.MIN}maxPost(){return new De(Va,new Sr("[PRIORITY-POST]",XW))}makePost(e,r){const n=QW(e);return new De(r,new Sr("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ft=new sie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aie=Math.log(2);class lie{constructor(e){const r=o=>parseInt(Math.log(o)/aie,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Nb=function(t,e,r,n){t.sort(e);const i=function(l,c){const u=c-l;let f,h;if(u===0)return null;if(u===1)return f=t[l],h=r?r(f):f,new Hn(h,f.node,Hn.BLACK,null,null);{const p=parseInt(u/2,10)+l,m=i(l,p),y=i(p+1,c);return f=t[p],h=r?r(f):f,new Hn(h,f.node,Hn.BLACK,m,y)}},o=function(l){let c=null,u=null,f=t.length;const h=function(m,y){const g=f-m,b=f;f-=m;const v=i(g+1,b),x=t[g],S=r?r(x):x;p(new Hn(S,x.node,y,null,v))},p=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<l.count;++m){const y=l.nextBitIsOne(),g=Math.pow(2,l.count-(m+1));y?h(g,Hn.BLACK):(h(g,Hn.BLACK),h(g,Hn.RED))}return u},s=new lie(t.length),a=o(s);return new Po(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uE;const Kc={};class ls{constructor(e,r){this.indexes_=e,this.indexSet_=r}static get Default(){return X(Kc&&Ft,"ChildrenNode.ts has not been loaded"),uE=uE||new ls({".priority":Kc},{".priority":Ft}),uE}get(e){const r=Lf(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Po?r:null}hasIndex(e){return Yo(this.indexSet_,e.toString())}addIndex(e,r){X(e!==tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const o=r.getIterator(De.Wrap);let s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),n.push(s),s=o.getNext();let a;i?a=Nb(n,e.getCompare()):a=Kc;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ls(u,c)}addToIndexes(e,r){const n=Cb(this.indexes_,(i,o)=>{const s=Lf(this.indexSet_,o);if(X(s,"Missing index implementation for "+o),i===Kc)if(s.isDefinedOn(e.node)){const a=[],l=r.getIterator(De.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Nb(a,s.getCompare())}else return Kc;else{const a=r.get(e.name);let l=i;return a&&(l=l.remove(new De(e.name,a))),l.insert(e,e.node)}});return new ls(n,this.indexSet_)}removeFromIndexes(e,r){const n=Cb(this.indexes_,i=>{if(i===Kc)return i;{const o=r.get(e.name);return o?i.remove(new De(e.name,o)):i}});return new ls(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh;class _e{constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&YW(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Eh||(Eh=new _e(new Po(wk),null,ls.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Eh}updatePriority(e){return this.children_.isEmpty()?this:new _e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Eh:r}}getChild(e){const r=je(e);return r===null?this:this.getImmediateChild(r).getChild(Et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(X(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new De(e,r);let i,o;r.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,r),o=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?Eh:this.priorityNode_;return new _e(i,s,o)}}updateChild(e,r){const n=je(e);if(n===null)return r;{X(je(e)!==".priority"||Wa(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Et(e),r);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,i=0,o=!0;if(this.forEachChild(Ft,(s,a)=>{r[s]=a.val(e),n++,o&&_e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*n){const s=[];for(const a in r)s[a]=r[a];return s}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+KW(this.getPriority().val())+":"),this.forEachChild(Ft,(r,n)=>{const i=n.hash();i!==""&&(e+=":"+r+":"+i)}),this.lazyHash_=e===""?"":EW(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const i=this.resolveIndex_(n);if(i){const o=i.getPredecessorKey(new De(e,r));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new De(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new De(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>r(i.name,i.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,De.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,De.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rg?-1:0}withIndex(e){if(e===tc||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new _e(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===tc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(Ft),i=r.getIterator(Ft);let o=n.getNext(),s=i.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=n.getNext(),s=i.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===tc?null:this.indexMap_.get(e.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class cie extends _e{constructor(){super(new Po(wk),_e.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}}const rg=new cie;Object.defineProperties(De,{MIN:{value:new De(Ec,_e.EMPTY_NODE)},MAX:{value:new De(Va,rg)}});HW.__EMPTY_NODE=_e.EMPTY_NODE;Sr.__childrenNodeConstructor=_e;nie(rg);oie(rg);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uie=!0;function lr(t,e=null){if(t===null)return _e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Sr(r,lr(e))}if(!(t instanceof Array)&&uie){const r=[];let n=!1;if(Jr(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=lr(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new De(s,l)))}}),r.length===0)return _e.EMPTY_NODE;const o=Nb(r,rie,s=>s.name,wk);if(n){const s=Nb(r,Ft.getCompare());return new _e(o,lr(e),new ls({".priority":s},{".priority":Ft}))}else return new _e(o,lr(e),ls.Default)}else{let r=_e.EMPTY_NODE;return Jr(t,(n,i)=>{if(Yo(t,n)&&n.substring(0,1)!=="."){const o=lr(i);(o.isLeafNode()||!o.isEmpty())&&(r=r.updateImmediateChild(n,o))}}),r.updatePriority(lr(e))}}iie(lr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk extends Sw{constructor(e){super(),this.indexPath_=e,X(!$e(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),i=this.extractChild(r.node),o=n.compareTo(i);return o===0?Mc(e.name,r.name):o}makePost(e,r){const n=lr(e),i=_e.EMPTY_NODE.updateChild(this.indexPath_,n);return new De(r,i)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,rg);return new De(Va,e)}toString(){return gm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fie extends Sw{compare(e,r){const n=e.node.compareTo(r.node);return n===0?Mc(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,r){const n=lr(e);return new De(r,n)}toString(){return".value"}}const JW=new fie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(t){return{type:"value",snapshotNode:t}}function Uf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vm(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function bm(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function die(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.index_=e}updateChild(e,r,n,i,o,s){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(r)?s.trackChildChange(vm(r,a)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Uf(r,n)):s.trackChildChange(bm(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Ft,(i,o)=>{r.hasChild(i)||n.trackChildChange(vm(i,o))}),r.isLeafNode()||r.forEachChild(Ft,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||n.trackChildChange(bm(i,o,s))}else n.trackChildChange(Uf(i,o))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?_e.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.indexedFilter_=new Ek(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xm.getStartPost_(e),this.endPost_=xm.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,i,o,s){return this.matches(new De(r,n))||(n=_e.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,i,o,s)}updateFullNode(e,r,n){r.isLeafNode()&&(r=_e.EMPTY_NODE);let i=r.withIndex(this.index_);i=i.updatePriority(_e.EMPTY_NODE);const o=this;return r.forEachChild(Ft,(s,a)=>{o.matches(new De(s,a))||(i=i.updateImmediateChild(s,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new xm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,i,o,s){return this.rangedFilter_.matches(new De(r,n))||(n=_e.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,i,o,s):this.fullLimitUpdateChild_(e,r,n,o,s)}updateFullNode(e,r,n){let i;if(r.isLeafNode()||r.isEmpty())i=_e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){i=_e.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=r.withIndex(this.index_),i=i.updatePriority(_e.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,i,o){let s;if(this.reverse_){const f=this.index_.getCompare();s=(h,p)=>f(p,h)}else s=this.index_.getCompare();const a=e;X(a.numChildren()===this.limit_,"");const l=new De(r,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(r)){const f=a.getImmediateChild(r);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===r||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:s(h,l);if(u&&!n.isEmpty()&&p>=0)return o!=null&&o.trackChildChange(bm(r,n,f)),a.updateImmediateChild(r,n);{o!=null&&o.trackChildChange(vm(r,f));const y=a.updateImmediateChild(r,_e.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o!=null&&o.trackChildChange(Uf(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return n.isEmpty()?e:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(vm(c.name,c.node)),o.trackChildChange(Uf(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(c.name,_e.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ec}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Va}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){const e=new Ak;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function pie(t){return t.loadsAllData()?new Ek(t.getIndex()):t.hasLimit()?new hie(t):new xm(t)}function mie(t,e){const r=t.copy();return r.limitSet_=!0,r.limit_=e,r.viewFrom_="r",r}function yie(t,e,r){const n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,r!=null?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function gie(t,e,r){const n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,r!==void 0?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function vie(t,e){const r=t.copy();return r.index_=e,r}function Q2(t){const e={};if(t.isDefault())return e;let r;if(t.index_===Ft?r="$priority":t.index_===JW?r="$value":t.index_===tc?r="$key":(X(t.index_ instanceof Sk,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=cr(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=cr(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+cr(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=cr(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+cr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function X2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==Ft&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends WW{constructor(e,r,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=tg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,r,n,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=kb.getListenId_(e,n),a={};this.listens_[s]=a;const l=Q2(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let f=u;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(o,f,!1,n),Lf(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,r){const n=kb.getListenId_(e,r);delete this.listens_[n]}get(e){const r=Q2(e._queryParams),n=e._path.toString(),i=new Jy;return this.restRequest_(n+".json",r,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(n,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(r.auth=i.accessToken),o&&o.token&&(r.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qte(r);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=pm(a.responseText)}catch{Tn("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Tn("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bie{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(){return{value:null,children:new Map}}function e8(t,e,r){if($e(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=je(e);t.children.has(n)||t.children.set(n,Ob());const i=t.children.get(n);e=Et(e),e8(i,e,r)}}function mT(t,e,r){t.value!==null?r(e,t.value):xie(t,(n,i)=>{const o=new ut(e.toString()+"/"+n);mT(i,o,r)})}function xie(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&Jr(this.last_,(n,i)=>{r[n]=r[n]-i}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=10*1e3,wie=30*1e3,Sie=5*60*1e3;class Eie{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new _ie(e);const n=J2+(wie-J2)*Math.random();Ap(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;Jr(e,(i,o)=>{o>0&&Yo(this.statsToReport_,i)&&(r[i]=o,n=!0)}),n&&this.server_.reportStats(r),Ap(this.reportStats_.bind(this),Math.floor(Math.random()*2*Sie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(eo||(eo={}));function Ck(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=eo.ACK_USER_WRITE,this.source=Ck()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ut(e));return new Rb(et(),r,this.revert)}}else return X(je(this.path)===e,"operationForChild called for unrelated child."),new Rb(Et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,r){this.source=e,this.path=r,this.type=eo.LISTEN_COMPLETE}operationForChild(e){return $e(this.path)?new _m(this.source,et()):new _m(this.source,Et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=eo.OVERWRITE}operationForChild(e){return $e(this.path)?new Ac(this.source,et(),this.snap.getImmediateChild(e)):new Ac(this.source,Et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=eo.MERGE}operationForChild(e){if($e(this.path)){const r=this.children.subtree(new ut(e));return r.isEmpty()?null:r.value?new Ac(this.source,et(),r.value):new Vf(this.source,et(),r)}else return X(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vf(this.source,Et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const r=je(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Cie(t,e,r,n){const i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(die(s.childName,s.snapshotNode))}),Ah(t,i,"child_removed",e,n,r),Ah(t,i,"child_added",e,n,r),Ah(t,i,"child_moved",o,n,r),Ah(t,i,"child_changed",e,n,r),Ah(t,i,"value",e,n,r),i}function Ah(t,e,r,n,i,o){const s=n.filter(a=>a.type===r);s.sort((a,l)=>Pie(t,a,l)),s.forEach(a=>{const l=Tie(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Tie(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Pie(t,e,r){if(e.childName==null||r.childName==null)throw Md("Should only compare child_ events.");const n=new De(e.childName,e.snapshotNode),i=new De(r.childName,r.snapshotNode);return t.index_.compare(n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e){return{eventCache:t,serverCache:e}}function Cp(t,e,r,n){return Ew(new za(e,r,n),t.serverCache)}function t8(t,e,r,n){return Ew(t.eventCache,new za(e,r,n))}function jb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Cc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fE;const Iie=()=>(fE||(fE=new Po(fne)),fE);class wt{constructor(e,r=Iie()){this.value=e,this.children=r}static fromObject(e){let r=new wt(null);return Jr(e,(n,i)=>{r=r.set(new ut(n),i)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:et(),value:this.value};if($e(e))return null;{const n=je(e),i=this.children.get(n);if(i!==null){const o=i.findRootMostMatchingPathAndValue(Et(e),r);return o!=null?{path:Ht(new ut(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const r=je(e),n=this.children.get(r);return n!==null?n.subtree(Et(e)):new wt(null)}}set(e,r){if($e(e))return new wt(r,this.children);{const n=je(e),o=(this.children.get(n)||new wt(null)).set(Et(e),r),s=this.children.insert(n,o);return new wt(this.value,s)}}remove(e){if($e(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const r=je(e),n=this.children.get(r);if(n){const i=n.remove(Et(e));let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),this.value===null&&o.isEmpty()?new wt(null):new wt(this.value,o)}else return this}}get(e){if($e(e))return this.value;{const r=je(e),n=this.children.get(r);return n?n.get(Et(e)):null}}setTree(e,r){if($e(e))return r;{const n=je(e),o=(this.children.get(n)||new wt(null)).setTree(Et(e),r);let s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),new wt(this.value,s)}}fold(e){return this.fold_(et(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((i,o)=>{n[i]=o.fold_(Ht(e,i),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,et(),r)}findOnPath_(e,r,n){const i=this.value?n(r,this.value):!1;if(i)return i;if($e(e))return null;{const o=je(e),s=this.children.get(o);return s?s.findOnPath_(Et(e),Ht(r,o),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,et(),r)}foreachOnPath_(e,r,n){if($e(e))return this;{this.value&&n(r,this.value);const i=je(e),o=this.children.get(i);return o?o.foreachOnPath_(Et(e),Ht(r,i),n):new wt(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,r){this.children.inorderTraversal((n,i)=>{i.foreach_(Ht(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.writeTree_=e}static empty(){return new so(new wt(null))}}function Tp(t,e,r){if($e(e))return new so(new wt(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let o=n.value;const s=Sn(i,e);return o=o.updateChild(s,r),new so(t.writeTree_.set(i,o))}else{const i=new wt(r),o=t.writeTree_.setTree(e,i);return new so(o)}}}function yT(t,e,r){let n=t;return Jr(r,(i,o)=>{n=Tp(n,Ht(e,i),o)}),n}function Z2(t,e){if($e(e))return so.empty();{const r=t.writeTree_.setTree(e,new wt(null));return new so(r)}}function gT(t,e){return Fc(t,e)!=null}function Fc(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(Sn(r.path,e)):null}function eD(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ft,(n,i)=>{e.push(new De(n,i))}):t.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new De(n,i.value))}),e}function Oa(t,e){if($e(e))return t;{const r=Fc(t,e);return r!=null?new so(new wt(r)):new so(t.writeTree_.subtree(e))}}function vT(t){return t.writeTree_.isEmpty()}function Wf(t,e){return r8(et(),t.writeTree_,e)}function r8(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(X(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):r=r8(Ht(t,i),o,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Ht(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){return s8(e,t)}function Nie(t,e,r,n,i){X(n>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:i}),i&&(t.visibleWrites=Tp(t.visibleWrites,e,r)),t.lastWriteId=n}function kie(t,e,r,n){X(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=yT(t.visibleWrites,e,r),t.lastWriteId=n}function Oie(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function Rie(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);X(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let i=n.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=r&&jie(a,n.path)?i=!1:Ci(n.path,a.path)&&(o=!0)),s--}if(i){if(o)return $ie(t),!0;if(n.snap)t.visibleWrites=Z2(t.visibleWrites,n.path);else{const a=n.children;Jr(a,l=>{t.visibleWrites=Z2(t.visibleWrites,Ht(n.path,l))})}return!0}else return!1}function jie(t,e){if(t.snap)return Ci(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&Ci(Ht(t.path,r),e))return!0;return!1}function $ie(t){t.visibleWrites=n8(t.allWrites,Die,et()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Die(t){return t.visible}function n8(t,e,r){let n=so.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Ci(r,s)?(a=Sn(r,s),n=Tp(n,a,o.snap)):Ci(s,r)&&(a=Sn(s,r),n=Tp(n,et(),o.snap.getChild(a)));else if(o.children){if(Ci(r,s))a=Sn(r,s),n=yT(n,a,o.children);else if(Ci(s,r))if(a=Sn(s,r),$e(a))n=yT(n,et(),o.children);else{const l=Lf(o.children,je(a));if(l){const c=l.getChild(Et(a));n=Tp(n,et(),c)}}}else throw Md("WriteRecord should have .snap or .children")}}return n}function i8(t,e,r,n,i){if(!n&&!i){const o=Fc(t.visibleWrites,e);if(o!=null)return o;{const s=Oa(t.visibleWrites,e);if(vT(s))return r;if(r==null&&!gT(s,et()))return null;{const a=r||_e.EMPTY_NODE;return Wf(s,a)}}}else{const o=Oa(t.visibleWrites,e);if(!i&&vT(o))return r;if(!i&&r==null&&!gT(o,et()))return null;{const s=function(c){return(c.visible||i)&&(!n||!~n.indexOf(c.writeId))&&(Ci(c.path,e)||Ci(e,c.path))},a=n8(t.allWrites,s,e),l=r||_e.EMPTY_NODE;return Wf(a,l)}}}function Mie(t,e,r){let n=_e.EMPTY_NODE;const i=Fc(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ft,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(r){const o=Oa(t.visibleWrites,e);return r.forEachChild(Ft,(s,a)=>{const l=Wf(Oa(o,new ut(s)),a);n=n.updateImmediateChild(s,l)}),eD(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{const o=Oa(t.visibleWrites,e);return eD(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function Fie(t,e,r,n,i){X(n||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ht(e,r);if(gT(t.visibleWrites,o))return null;{const s=Oa(t.visibleWrites,o);return vT(s)?i.getChild(r):Wf(s,i.getChild(r))}}function Lie(t,e,r,n){const i=Ht(e,r),o=Fc(t.visibleWrites,i);if(o!=null)return o;if(n.isCompleteForChild(r)){const s=Oa(t.visibleWrites,i);return Wf(s,n.getNode().getImmediateChild(r))}else return null}function Bie(t,e){return Fc(t.visibleWrites,e)}function Uie(t,e,r,n,i,o,s){let a;const l=Oa(t.visibleWrites,e),c=Fc(l,et());if(c!=null)a=c;else if(r!=null)a=Wf(l,r);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const u=[],f=s.getCompare(),h=o?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let p=h.getNext();for(;p&&u.length<i;)f(p,n)!==0&&u.push(p),p=h.getNext();return u}else return[]}function Vie(){return{visibleWrites:so.empty(),allWrites:[],lastWriteId:-1}}function $b(t,e,r,n){return i8(t.writeTree,t.treePath,e,r,n)}function Ik(t,e){return Mie(t.writeTree,t.treePath,e)}function tD(t,e,r,n){return Fie(t.writeTree,t.treePath,e,r,n)}function Db(t,e){return Bie(t.writeTree,Ht(t.treePath,e))}function Wie(t,e,r,n,i,o){return Uie(t.writeTree,t.treePath,e,r,n,i,o)}function Nk(t,e,r){return Lie(t.writeTree,t.treePath,e,r)}function o8(t,e){return s8(Ht(t.treePath,e),t.writeTree)}function s8(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zie{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;X(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),X(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const o=i.type;if(r==="child_added"&&o==="child_removed")this.changeMap.set(n,bm(n,e.snapshotNode,i.snapshotNode));else if(r==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&o==="child_changed")this.changeMap.set(n,vm(n,i.oldSnap));else if(r==="child_changed"&&o==="child_added")this.changeMap.set(n,Uf(n,e.snapshotNode));else if(r==="child_changed"&&o==="child_changed")this.changeMap.set(n,bm(n,e.snapshotNode,i.oldSnap));else throw Md("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gie{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const a8=new Gie;class kk{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new za(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nk(this.writes_,e,n)}}getChildAfterChild(e,r,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cc(this.viewCache_),o=Wie(this.writes_,i,r,1,n,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qie(t){return{filter:t}}function Hie(t,e){X(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Kie(t,e,r,n,i){const o=new zie;let s,a;if(r.type===eo.OVERWRITE){const c=r;c.source.fromUser?s=bT(t,e,c.path,c.snap,n,i,o):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),s=Mb(t,e,c.path,c.snap,n,i,a,o))}else if(r.type===eo.MERGE){const c=r;c.source.fromUser?s=Qie(t,e,c.path,c.children,n,i,o):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=xT(t,e,c.path,c.children,n,i,a,o))}else if(r.type===eo.ACK_USER_WRITE){const c=r;c.revert?s=Zie(t,e,c.path,n,i,o):s=Xie(t,e,c.path,c.affectedTree,n,i,o)}else if(r.type===eo.LISTEN_COMPLETE)s=Jie(t,e,r.path,n,o);else throw Md("Unknown operation type: "+r.type);const l=o.getChanges();return Yie(e,s,l),{viewCache:s,changes:l}}function Yie(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=jb(t);(r.length>0||!t.eventCache.isFullyInitialized()||i&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&r.push(ZW(jb(e)))}}function l8(t,e,r,n,i,o){const s=e.eventCache;if(Db(n,r)!=null)return e;{let a,l;if($e(r))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Cc(e),u=c instanceof _e?c:_e.EMPTY_NODE,f=Ik(n,u);a=t.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const c=$b(n,Cc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=je(r);if(c===".priority"){X(Wa(r)===1,"Can't have a priority with additional path components");const u=s.getNode();l=e.serverCache.getNode();const f=tD(n,r,u,l);f!=null?a=t.filter.updatePriority(u,f):a=s.getNode()}else{const u=Et(r);let f;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const h=tD(n,r,s.getNode(),l);h!=null?f=s.getNode().getImmediateChild(c).updateChild(u,h):f=s.getNode().getImmediateChild(c)}else f=Nk(n,c,e.serverCache);f!=null?a=t.filter.updateChild(s.getNode(),c,f,u,i,o):a=s.getNode()}}return Cp(e,a,s.isFullyInitialized()||$e(r),t.filter.filtersNodes())}}function Mb(t,e,r,n,i,o,s,a){const l=e.serverCache;let c;const u=s?t.filter:t.filter.getIndexedFilter();if($e(r))c=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(r,n);c=u.updateFullNode(l.getNode(),p,null)}else{const p=je(r);if(!l.isCompleteForPath(r)&&Wa(r)>1)return e;const m=Et(r),g=l.getNode().getImmediateChild(p).updateChild(m,n);p===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),p,g,m,a8,null)}const f=t8(e,c,l.isFullyInitialized()||$e(r),u.filtersNodes()),h=new kk(i,f,o);return l8(t,f,r,i,h,a)}function bT(t,e,r,n,i,o,s){const a=e.eventCache;let l,c;const u=new kk(i,e,o);if($e(r))c=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=Cp(e,c,!0,t.filter.filtersNodes());else{const f=je(r);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),n),l=Cp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Et(r),p=a.getNode().getImmediateChild(f);let m;if($e(h))m=n;else{const y=u.getCompleteChild(f);y!=null?bk(h)===".priority"&&y.getChild(GW(h)).isEmpty()?m=y:m=y.updateChild(h,n):m=_e.EMPTY_NODE}if(p.equals(m))l=e;else{const y=t.filter.updateChild(a.getNode(),f,m,h,u,s);l=Cp(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function rD(t,e){return t.eventCache.isCompleteForChild(e)}function Qie(t,e,r,n,i,o,s){let a=e;return n.foreach((l,c)=>{const u=Ht(r,l);rD(e,je(u))&&(a=bT(t,a,u,c,i,o,s))}),n.foreach((l,c)=>{const u=Ht(r,l);rD(e,je(u))||(a=bT(t,a,u,c,i,o,s))}),a}function nD(t,e,r){return r.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function xT(t,e,r,n,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(r)?c=n:c=new wt(null).setTree(r,n);const u=e.serverCache.getNode();return c.children.inorderTraversal((f,h)=>{if(u.hasChild(f)){const p=e.serverCache.getNode().getImmediateChild(f),m=nD(t,p,h);l=Mb(t,l,new ut(f),m,i,o,s,a)}}),c.children.inorderTraversal((f,h)=>{const p=!e.serverCache.isCompleteForChild(f)&&h.value===null;if(!u.hasChild(f)&&!p){const m=e.serverCache.getNode().getImmediateChild(f),y=nD(t,m,h);l=Mb(t,l,new ut(f),y,i,o,s,a)}}),l}function Xie(t,e,r,n,i,o,s){if(Db(i,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if($e(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return Mb(t,e,r,l.getNode().getChild(r),i,o,a,s);if($e(r)){let c=new wt(null);return l.getNode().forEachChild(tc,(u,f)=>{c=c.set(new ut(u),f)}),xT(t,e,r,c,i,o,a,s)}else return e}else{let c=new wt(null);return n.foreach((u,f)=>{const h=Ht(r,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),xT(t,e,r,c,i,o,a,s)}}function Jie(t,e,r,n,i){const o=e.serverCache,s=t8(e,o.getNode(),o.isFullyInitialized()||$e(r),o.isFiltered());return l8(t,s,r,n,a8,i)}function Zie(t,e,r,n,i,o){let s;if(Db(n,r)!=null)return e;{const a=new kk(n,e,i),l=e.eventCache.getNode();let c;if($e(r)||je(r)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=$b(n,Cc(e));else{const f=e.serverCache.getNode();X(f instanceof _e,"serverChildren would be complete if leaf node"),u=Ik(n,f)}u=u,c=t.filter.updateFullNode(l,u,o)}else{const u=je(r);let f=Nk(n,u,e.serverCache);f==null&&e.serverCache.isCompleteForChild(u)&&(f=l.getImmediateChild(u)),f!=null?c=t.filter.updateChild(l,u,f,Et(r),a,o):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,_e.EMPTY_NODE,Et(r),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=$b(n,Cc(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Db(n,et())!=null,Cp(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eoe{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Ek(n.getIndex()),o=pie(n);this.processor_=qie(o);const s=r.serverCache,a=r.eventCache,l=i.updateFullNode(_e.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(_e.EMPTY_NODE,a.getNode(),null),u=new za(l,s.isFullyInitialized(),i.filtersNodes()),f=new za(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ew(f,u),this.eventGenerator_=new Aie(this.query_)}get query(){return this.query_}}function toe(t){return t.viewCache_.serverCache.getNode()}function roe(t){return jb(t.viewCache_)}function noe(t,e){const r=Cc(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!$e(e)&&!r.getImmediateChild(je(e)).isEmpty())?r.getChild(e):null}function iD(t){return t.eventRegistrations_.length===0}function ioe(t,e){t.eventRegistrations_.push(e)}function oD(t,e,r){const n=[];if(r){X(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(r,i);s&&n.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return n}function sD(t,e,r,n){e.type===eo.MERGE&&e.source.queryId!==null&&(X(Cc(t.viewCache_),"We should always have a full cache before handling merges"),X(jb(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=Kie(t.processor_,i,e,r,n);return Hie(t.processor_,o.viewCache),X(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,c8(t,o.changes,o.viewCache.eventCache.getNode(),null)}function ooe(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ft,(o,s)=>{n.push(Uf(o,s))}),r.isFullyInitialized()&&n.push(ZW(r.getNode())),c8(t,n,r.getNode(),e)}function c8(t,e,r,n){const i=n?[n]:t.eventRegistrations_;return Cie(t.eventGenerator_,e,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fb;class u8{constructor(){this.views=new Map}}function soe(t){X(!Fb,"__referenceConstructor has already been defined"),Fb=t}function aoe(){return X(Fb,"Reference.ts has not been loaded"),Fb}function loe(t){return t.views.size===0}function Ok(t,e,r,n){const i=e.source.queryId;if(i!==null){const o=t.views.get(i);return X(o!=null,"SyncTree gave us an op for an invalid query."),sD(o,e,r,n)}else{let o=[];for(const s of t.views.values())o=o.concat(sD(s,e,r,n));return o}}function f8(t,e,r,n,i){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=$b(r,i?n:null),l=!1;a?l=!0:n instanceof _e?(a=Ik(r,n),l=!1):(a=_e.EMPTY_NODE,l=!1);const c=Ew(new za(a,l,!1),new za(n,i,!1));return new eoe(e,c)}return s}function coe(t,e,r,n,i,o){const s=f8(t,e,n,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),ioe(s,r),ooe(s,r)}function uoe(t,e,r,n){const i=e._queryIdentifier,o=[];let s=[];const a=Ga(t);if(i==="default")for(const[l,c]of t.views.entries())s=s.concat(oD(c,r,n)),iD(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(oD(l,r,n)),iD(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Ga(t)&&o.push(new(aoe())(e._repo,e._path)),{removed:o,events:s}}function d8(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function Ra(t,e){let r=null;for(const n of t.views.values())r=r||noe(n,e);return r}function h8(t,e){if(e._queryParams.loadsAllData())return Cw(t);{const n=e._queryIdentifier;return t.views.get(n)}}function p8(t,e){return h8(t,e)!=null}function Ga(t){return Cw(t)!=null}function Cw(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lb;function foe(t){X(!Lb,"__referenceConstructor has already been defined"),Lb=t}function doe(){return X(Lb,"Reference.ts has not been loaded"),Lb}let hoe=1;class aD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=Vie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function m8(t,e,r,n,i){return Nie(t.pendingWriteTree_,e,r,n,i),i?Ld(t,new Ac(Ck(),e,r)):[]}function poe(t,e,r,n){kie(t.pendingWriteTree_,e,r,n);const i=wt.fromObject(r);return Ld(t,new Vf(Ck(),e,i))}function fa(t,e,r=!1){const n=Oie(t.pendingWriteTree_,e);if(Rie(t.pendingWriteTree_,e)){let o=new wt(null);return n.snap!=null?o=o.set(et(),!0):Jr(n.children,s=>{o=o.set(new ut(s),!0)}),Ld(t,new Rb(n.path,o,r))}else return[]}function ng(t,e,r){return Ld(t,new Ac(Tk(),e,r))}function moe(t,e,r){const n=wt.fromObject(r);return Ld(t,new Vf(Tk(),e,n))}function yoe(t,e){return Ld(t,new _m(Tk(),e))}function goe(t,e,r){const n=jk(t,r);if(n){const i=$k(n),o=i.path,s=i.queryId,a=Sn(o,e),l=new _m(Pk(s),a);return Dk(t,o,l)}else return[]}function Bb(t,e,r,n,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&(e._queryIdentifier==="default"||p8(s,e))){const l=uoe(s,e,r,n);loe(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(o,(h,p)=>Ga(p));if(u&&!f){const h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){const p=xoe(h);for(let m=0;m<p.length;++m){const y=p[m],g=y.query,b=b8(t,y);t.listenProvider_.startListening(Pp(g),wm(t,g),b.hashFn,b.onComplete)}}}!f&&c.length>0&&!n&&(u?t.listenProvider_.stopListening(Pp(e),null):c.forEach(h=>{const p=t.queryToTagMap.get(Tw(h));t.listenProvider_.stopListening(Pp(h),p)}))}_oe(t,c)}return a}function y8(t,e,r,n){const i=jk(t,n);if(i!=null){const o=$k(i),s=o.path,a=o.queryId,l=Sn(s,e),c=new Ac(Pk(a),l,r);return Dk(t,s,c)}else return[]}function voe(t,e,r,n){const i=jk(t,n);if(i){const o=$k(i),s=o.path,a=o.queryId,l=Sn(s,e),c=wt.fromObject(r),u=new Vf(Pk(a),l,c);return Dk(t,s,u)}else return[]}function _T(t,e,r,n=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,p)=>{const m=Sn(h,i);o=o||Ra(p,m),s=s||Ga(p)});let a=t.syncPointTree_.get(i);a?(s=s||Ga(a),o=o||Ra(a,et())):(a=new u8,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=_e.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const y=Ra(m,et());y&&(o=o.updateImmediateChild(p,y))}));const c=p8(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Tw(e);X(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=woe();t.queryToTagMap.set(h,p),t.tagToQueryMap.set(p,h)}const u=Aw(t.pendingWriteTree_,i);let f=coe(a,e,r,u,o,l);if(!c&&!s&&!n){const h=h8(a,e);f=f.concat(Soe(t,e,h))}return f}function Rk(t,e,r){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=Sn(s,e),c=Ra(a,l);if(c)return c});return i8(i,e,o,r,!0)}function boe(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(c,u)=>{const f=Sn(c,r);n=n||Ra(u,f)});let i=t.syncPointTree_.get(r);i?n=n||Ra(i,et()):(i=new u8,t.syncPointTree_=t.syncPointTree_.set(r,i));const o=n!=null,s=o?new za(n,!0,!1):null,a=Aw(t.pendingWriteTree_,e._path),l=f8(i,e,a,o?s.getNode():_e.EMPTY_NODE,o);return roe(l)}function Ld(t,e){return g8(e,t.syncPointTree_,null,Aw(t.pendingWriteTree_,et()))}function g8(t,e,r,n){if($e(t.path))return v8(t,e,r,n);{const i=e.get(et());r==null&&i!=null&&(r=Ra(i,et()));let o=[];const s=je(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=r?r.getImmediateChild(s):null,u=o8(n,s);o=o.concat(g8(a,l,c,u))}return i&&(o=o.concat(Ok(i,t,n,r))),o}}function v8(t,e,r,n){const i=e.get(et());r==null&&i!=null&&(r=Ra(i,et()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=r?r.getImmediateChild(s):null,c=o8(n,s),u=t.operationForChild(s);u&&(o=o.concat(v8(u,a,l,c)))}),i&&(o=o.concat(Ok(i,t,n,r))),o}function b8(t,e){const r=e.query,n=wm(t,r);return{hashFn:()=>(toe(e)||_e.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return n?goe(t,r._path,n):yoe(t,r._path);{const o=pne(i,r);return Bb(t,r,null,o)}}}}function wm(t,e){const r=Tw(e);return t.queryToTagMap.get(r)}function Tw(t){return t._path.toString()+"$"+t._queryIdentifier}function jk(t,e){return t.tagToQueryMap.get(e)}function $k(t){const e=t.indexOf("$");return X(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}}function Dk(t,e,r){const n=t.syncPointTree_.get(e);X(n,"Missing sync point for query tag that we're tracking");const i=Aw(t.pendingWriteTree_,e);return Ok(n,r,i,null)}function xoe(t){return t.fold((e,r,n)=>{if(r&&Ga(r))return[Cw(r)];{let i=[];return r&&(i=d8(r)),Jr(n,(o,s)=>{i=i.concat(s)}),i}})}function Pp(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(doe())(t._repo,t._path):t}function _oe(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const i=Tw(n),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function woe(){return hoe++}function Soe(t,e,r){const n=e._path,i=wm(t,e),o=b8(t,r),s=t.listenProvider_.startListening(Pp(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(n);if(i)X(!Ga(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,f)=>{if(!$e(c)&&u&&Ga(u))return[Cw(u).query];{let h=[];return u&&(h=h.concat(d8(u).map(p=>p.query))),Jr(f,(p,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Pp(u),wm(t,u))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new Mk(r)}node(){return this.node_}}class Fk{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Ht(this.path_,e);return new Fk(this.syncTree_,r)}node(){return Rk(this.syncTree_,this.path_)}}const Eoe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},lD=function(t,e,r){if(!t||typeof t!="object")return t;if(X(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Aoe(t[".sv"],e,r);if(typeof t[".sv"]=="object")return Coe(t[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Aoe=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:X(!1,"Unexpected server value: "+t)}},Coe=function(t,e,r){t.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&X(!1,"Unexpected increment value: "+n);const i=e.node();if(X(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const s=i.getValue();return typeof s!="number"?n:s+n},x8=function(t,e,r,n){return Lk(e,new Fk(r,t),n)},_8=function(t,e,r){return Lk(t,new Mk(e),r)};function Lk(t,e,r){const n=t.getPriority().val(),i=lD(n,e.getImmediateChild(".priority"),r);let o;if(t.isLeafNode()){const s=t,a=lD(s.getValue(),e,r);return a!==s.getValue()||i!==s.getPriority().val()?new Sr(a,lr(i)):t}else{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Sr(i))),s.forEachChild(Ft,(a,l)=>{const c=Lk(l,e.getImmediateChild(a),r);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function Uk(t,e){let r=e instanceof ut?e:new ut(e),n=t,i=je(r);for(;i!==null;){const o=Lf(n.node.children,i)||{children:{},childCount:0};n=new Bk(i,n,o),r=Et(r),i=je(r)}return n}function Bd(t){return t.node.value}function w8(t,e){t.node.value=e,wT(t)}function S8(t){return t.node.childCount>0}function Toe(t){return Bd(t)===void 0&&!S8(t)}function Pw(t,e){Jr(t.node.children,(r,n)=>{e(new Bk(r,t,n))})}function E8(t,e,r,n){r&&!n&&e(t),Pw(t,i=>{E8(i,e,!0,n)}),r&&n&&e(t)}function Poe(t,e,r){let n=r?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function ig(t){return new ut(t.parent===null?t.name:ig(t.parent)+"/"+t.name)}function wT(t){t.parent!==null&&Ioe(t.parent,t.name,t)}function Ioe(t,e,r){const n=Toe(r),i=Yo(t.node.children,e);n&&i?(delete t.node.children[e],t.node.childCount--,wT(t)):!n&&!i&&(t.node.children[e]=r.node,t.node.childCount++,wT(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Noe=/[\[\].#$\/\u0000-\u001F\u007F]/,koe=/[\[\].#$\u0000-\u001F\u007F]/,dE=10*1024*1024,Iw=function(t){return typeof t=="string"&&t.length!==0&&!Noe.test(t)},A8=function(t){return typeof t=="string"&&t.length!==0&&!koe.test(t)},Ooe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),A8(t)},ST=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!pk(t)||t&&typeof t=="object"&&Yo(t,".sv")},og=function(t,e,r,n){n&&e===void 0||Nw(Zy(t,"value"),e,r)},Nw=function(t,e,r){const n=r instanceof ut?new Kne(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+vl(n));if(typeof e=="function")throw new Error(t+"contains a function "+vl(n)+" with contents = "+e.toString());if(pk(e))throw new Error(t+"contains "+e.toString()+" "+vl(n));if(typeof e=="string"&&e.length>dE/3&&ww(e)>dE)throw new Error(t+"contains a string greater than "+dE+" utf8 bytes "+vl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Jr(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Iw(s)))throw new Error(t+" contains an invalid key ("+s+") "+vl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Yne(n,s),Nw(t,a,n),Qne(n)}),i&&o)throw new Error(t+' contains ".value" child '+vl(n)+" in addition to actual children.")}},Roe=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const o=gm(n);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!Iw(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Hne);let i=null;for(r=0;r<e.length;r++){if(n=e[r],i!==null&&Ci(i,n))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},joe=function(t,e,r,n){if(n&&e===void 0)return;const i=Zy(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Jr(e,(s,a)=>{const l=new ut(s);if(Nw(i,a,Ht(r,l)),bk(l)===".priority"&&!ST(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),Roe(i,o)},$oe=function(t,e,r,n){if(!(n&&r===void 0)&&!Iw(r))throw new Error(Zy(t,e)+'was an invalid key = "'+r+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Vk=function(t,e,r,n){if(!(n&&r===void 0)&&!A8(r))throw new Error(Zy(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Doe=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Vk(t,e,r,n)},C8=function(t,e){if(je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Moe=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Iw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!Ooe(r))throw new Error(Zy(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Foe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kw(t,e){let r=null;for(let n=0;n<e.length;n++){const i=e[n],o=i.getPath();r!==null&&!xk(o,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:o}),r.events.push(i)}r&&t.eventLists_.push(r)}function T8(t,e,r){kw(t,r),P8(t,n=>xk(n,e))}function Di(t,e,r){kw(t,r),P8(t,n=>Ci(n,e)||Ci(e,n))}function P8(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const i=t.eventLists_[n];if(i){const o=i.path;e(o)?(Loe(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function Loe(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();ec&&Ur("event: "+r.toString()),Fd(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Boe="repo_interrupt",Uoe=25;class Voe{constructor(e,r,n,i){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Foe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ob(),this.transactionQueueTree_=new Bk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Woe(t,e,r){if(t.stats_=gk(t.repoInfo_),t.forceRestClient_||vne())t.server_=new kb(t.repoInfo_,(n,i,o,s)=>{cD(t,n,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>uD(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cr(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new ms(t.repoInfo_,e,(n,i,o,s)=>{cD(t,n,i,o,s)},n=>{uD(t,n)},n=>{zoe(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=Sne(t.repoInfo_,()=>new Eie(t.stats_,t.server_)),t.infoData_=new bie,t.infoSyncTree_=new aD({startListening:(n,i,o,s)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=ng(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Wk(t,"connected",!1),t.serverSyncTree_=new aD({startListening:(n,i,o,s)=>(t.server_.listen(n,o,i,(a,l)=>{const c=s(a,l);Di(t.eventQueue_,n._path,c)}),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function I8(t){const r=t.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Ow(t){return Eoe({timestamp:I8(t)})}function cD(t,e,r,n,i){t.dataUpdateCount++;const o=new ut(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let s=[];if(i)if(n){const l=Cb(r,c=>lr(c));s=voe(t.serverSyncTree_,o,l,i)}else{const l=lr(r);s=y8(t.serverSyncTree_,o,l,i)}else if(n){const l=Cb(r,c=>lr(c));s=moe(t.serverSyncTree_,o,l)}else{const l=lr(r);s=ng(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=zf(t,o)),Di(t.eventQueue_,a,s)}function uD(t,e){Wk(t,"connected",e),e===!1&&Koe(t)}function zoe(t,e){Jr(e,(r,n)=>{Wk(t,r,n)})}function Wk(t,e,r){const n=new ut("/.info/"+e),i=lr(r);t.infoData_.updateSnapshot(n,i);const o=ng(t.infoSyncTree_,n,i);Di(t.eventQueue_,n,o)}function zk(t){return t.nextWriteId_++}function Goe(t,e,r){const n=boe(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(i=>{const o=lr(i).withIndex(e._queryParams.getIndex());_T(t.serverSyncTree_,e,r,!0);let s;if(e._queryParams.loadsAllData())s=ng(t.serverSyncTree_,e._path,o);else{const a=wm(t.serverSyncTree_,e);s=y8(t.serverSyncTree_,e._path,o,a)}return Di(t.eventQueue_,e._path,s),Bb(t.serverSyncTree_,e,r,null,!0),o},i=>(sg(t,"get for query "+cr(e)+" failed: "+i),Promise.reject(new Error(i))))}function qoe(t,e,r,n,i){sg(t,"set",{path:e.toString(),value:r,priority:n});const o=Ow(t),s=lr(r,n),a=Rk(t.serverSyncTree_,e),l=_8(s,a,o),c=zk(t),u=m8(t.serverSyncTree_,e,l,c,!0);kw(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(h,p)=>{const m=h==="ok";m||Tn("set at "+e+" failed: "+h);const y=fa(t.serverSyncTree_,c,!m);Di(t.eventQueue_,e,y),ET(t,i,h,p)});const f=qk(t,e);zf(t,f),Di(t.eventQueue_,f,[])}function Hoe(t,e,r,n){sg(t,"update",{path:e.toString(),value:r});let i=!0;const o=Ow(t),s={};if(Jr(r,(a,l)=>{i=!1,s[a]=x8(Ht(e,a),lr(l),t.serverSyncTree_,o)}),i)Ur("update() called with empty data.  Don't do anything."),ET(t,n,"ok",void 0);else{const a=zk(t),l=poe(t.serverSyncTree_,e,s,a);kw(t.eventQueue_,l),t.server_.merge(e.toString(),r,(c,u)=>{const f=c==="ok";f||Tn("update at "+e+" failed: "+c);const h=fa(t.serverSyncTree_,a,!f),p=h.length>0?zf(t,e):e;Di(t.eventQueue_,p,h),ET(t,n,c,u)}),Jr(r,c=>{const u=qk(t,Ht(e,c));zf(t,u)}),Di(t.eventQueue_,e,[])}}function Koe(t){sg(t,"onDisconnectEvents");const e=Ow(t),r=Ob();mT(t.onDisconnect_,et(),(i,o)=>{const s=x8(i,o,t.serverSyncTree_,e);e8(r,i,s)});let n=[];mT(r,et(),(i,o)=>{n=n.concat(ng(t.serverSyncTree_,i,o));const s=qk(t,i);zf(t,s)}),t.onDisconnect_=Ob(),Di(t.eventQueue_,et(),n)}function Yoe(t,e,r){let n;je(e._path)===".info"?n=_T(t.infoSyncTree_,e,r):n=_T(t.serverSyncTree_,e,r),T8(t.eventQueue_,e._path,n)}function fD(t,e,r){let n;je(e._path)===".info"?n=Bb(t.infoSyncTree_,e,r):n=Bb(t.serverSyncTree_,e,r),T8(t.eventQueue_,e._path,n)}function Qoe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Boe)}function sg(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ur(r,...e)}function ET(t,e,r,n){e&&Fd(()=>{if(r==="ok")e(null);else{const i=(r||"error").toUpperCase();let o=i;n&&(o+=": "+n);const s=new Error(o);s.code=i,e(s)}})}function N8(t,e,r){return Rk(t.serverSyncTree_,e,r)||_e.EMPTY_NODE}function Gk(t,e=t.transactionQueueTree_){if(e||Rw(t,e),Bd(e)){const r=O8(t,e);X(r.length>0,"Sending zero length transaction queue"),r.every(i=>i.status===0)&&Xoe(t,ig(e),r)}else S8(e)&&Pw(e,r=>{Gk(t,r)})}function Xoe(t,e,r){const n=r.map(c=>c.currentWriteId),i=N8(t,e,n);let o=i;const s=i.hash();for(let c=0;c<r.length;c++){const u=r[c];X(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const f=Sn(e,u.path);o=o.updateChild(f,u.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{sg(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const f=[];for(let h=0;h<r.length;h++)r[h].status=2,u=u.concat(fa(t.serverSyncTree_,r[h].currentWriteId)),r[h].onComplete&&f.push(()=>r[h].onComplete(null,!0,r[h].currentOutputSnapshotResolved)),r[h].unwatcher();Rw(t,Uk(t.transactionQueueTree_,e)),Gk(t,t.transactionQueueTree_),Di(t.eventQueue_,e,u);for(let h=0;h<f.length;h++)Fd(f[h])}else{if(c==="datastale")for(let f=0;f<r.length;f++)r[f].status===3?r[f].status=4:r[f].status=0;else{Tn("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<r.length;f++)r[f].status=4,r[f].abortReason=c}zf(t,e)}},s)}function zf(t,e){const r=k8(t,e),n=ig(r),i=O8(t,r);return Joe(t,i,n),n}function Joe(t,e,r){if(e.length===0)return;const n=[];let i=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Sn(r,l.path);let u=!1,f;if(X(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,f=l.abortReason,i=i.concat(fa(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Uoe)u=!0,f="maxretry",i=i.concat(fa(t.serverSyncTree_,l.currentWriteId,!0));else{const h=N8(t,l.path,s);l.currentInputSnapshot=h;const p=e[a].update(h.val());if(p!==void 0){Nw("transaction failed: Data returned ",p,l.path);let m=lr(p);typeof p=="object"&&p!=null&&Yo(p,".priority")||(m=m.updatePriority(h.getPriority()));const g=l.currentWriteId,b=Ow(t),v=_8(m,h,b);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=v,l.currentWriteId=zk(t),s.splice(s.indexOf(g),1),i=i.concat(m8(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(fa(t.serverSyncTree_,g,!0))}else u=!0,f="nodata",i=i.concat(fa(t.serverSyncTree_,l.currentWriteId,!0))}Di(t.eventQueue_,r,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(f),!1,null))))}Rw(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Fd(n[a]);Gk(t,t.transactionQueueTree_)}function k8(t,e){let r,n=t.transactionQueueTree_;for(r=je(e);r!==null&&Bd(n)===void 0;)n=Uk(n,r),e=Et(e),r=je(e);return n}function O8(t,e){const r=[];return R8(t,e,r),r.sort((n,i)=>n.order-i.order),r}function R8(t,e,r){const n=Bd(e);if(n)for(let i=0;i<n.length;i++)r.push(n[i]);Pw(e,i=>{R8(t,i,r)})}function Rw(t,e){const r=Bd(e);if(r){let n=0;for(let i=0;i<r.length;i++)r[i].status!==2&&(r[n]=r[i],n++);r.length=n,w8(e,r.length>0?r:void 0)}Pw(e,n=>{Rw(t,n)})}function qk(t,e){const r=ig(k8(t,e)),n=Uk(t.transactionQueueTree_,e);return Poe(n,i=>{hE(t,i)}),hE(t,n),E8(n,i=>{hE(t,i)}),r}function hE(t,e){const r=Bd(e);if(r){const n=[];let i=[],o=-1;for(let s=0;s<r.length;s++)r[s].status===3||(r[s].status===1?(X(o===s-1,"All SENT items should be at beginning of queue."),o=s,r[s].status=3,r[s].abortReason="set"):(X(r[s].status===0,"Unexpected transaction status in abort"),r[s].unwatcher(),i=i.concat(fa(t.serverSyncTree_,r[s].currentWriteId,!0)),r[s].onComplete&&n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?w8(e,void 0):r.length=o+1,Di(t.eventQueue_,ig(e),i);for(let s=0;s<n.length;s++)Fd(n[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zoe(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let i=r[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function ese(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Tn(`Invalid query segment '${r}' in query '${t}'`)}return e}const dD=function(t,e){const r=tse(t),n=r.namespace;r.domain==="firebase.com"&&Ss(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Ss("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||cne();const i=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new DW(r.host,r.secure,n,i,e,"",n!==r.subdomain),path:new ut(r.pathString)}},tse=function(t){let e="",r="",n="",i="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(u,f)),u<f&&(i=Zoe(t.substring(u,f)));const h=ese(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")r="localhost";else if(p.split(".").length<=2)r=p;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),r=e.substring(m+1),o=n}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",rse=function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=hD.charAt(r%64),r=Math.floor(r/64);X(r===0,"Cannot push at time == 0");let s=o.join("");if(n){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=hD.charAt(e[i]);return X(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,r,n,i){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+cr(this.snapshot.exportVal())}}class $8{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,r,n,i){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=i}get key(){return $e(this._path)?null:bk(this._path)}get ref(){return new Qo(this._repo,this._path)}get _queryIdentifier(){const e=X2(this._queryParams),r=mk(e);return r==="{}"?"default":r}get _queryObject(){return X2(this._queryParams)}isEqual(e){if(e=Xr(e),!(e instanceof Lc))return!1;const r=this._repo===e._repo,n=xk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return r&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+qne(this._path)}}function nse(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hk(t){let e=null,r=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===tc){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ec)throw new Error(n);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Va)throw new Error(n);if(typeof r!="string")throw new Error(i)}}else if(t.getIndex()===Ft){if(e!=null&&!ST(e)||r!=null&&!ST(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(X(t.getIndex()instanceof Sk||t.getIndex()===JW,"unknown index type."),e!=null&&typeof e=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function M8(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Qo extends Lc{constructor(e,r){super(e,r,new Ak,!1)}get parent(){const e=GW(this._path);return e===null?null:new Qo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Gf{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new ut(e),n=qf(this.ref,e);return new Gf(this._node.getChild(r),n,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,i)=>e(new Gf(i,qf(this.ref,n),Ft)))}hasChild(e){const r=new ut(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ep(t,e){return t=Xr(t),t._checkNotDeleted("ref"),e!==void 0?qf(t._root,e):t._root}function qf(t,e){return t=Xr(t),je(t._path)===null?Doe("child","path",e,!1):Vk("child","path",e,!1),new Qo(t._repo,Ht(t._path,e))}function F8(t,e){t=Xr(t),C8("push",t._path),og("push",e,t._path,!0);const r=I8(t._repo),n=rse(r),i=qf(t,n),o=qf(t,n);let s;return e!=null?s=Kk(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Kk(t,e){t=Xr(t),C8("set",t._path),og("set",e,t._path,!1);const r=new Jy;return qoe(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}function L8(t,e){joe("update",e,t._path,!1);const r=new Jy;return Hoe(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function B8(t){t=Xr(t);const e=new D8(()=>{}),r=new jw(e);return Goe(t._repo,t,r).then(n=>new Gf(n,new Qo(t._repo,t._path),t._queryParams.getIndex()))}class jw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new j8("value",this,new Gf(e.snapshotNode,new Qo(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new $8(this,e,r):null}matches(e){return e instanceof jw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Yk{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new $8(this,e,r):null}createEvent(e,r){X(e.childName!=null,"Child events should have a childName.");const n=qf(new Qo(r._repo,r._path),e.childName),i=r._queryParams.getIndex();return new j8(e.type,this,new Gf(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Yk?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function ise(t,e,r,n,i){let o;if(typeof n=="object"&&(o=void 0,i=n),typeof n=="function"&&(o=n),i&&i.onlyOnce){const l=r,c=(u,f)=>{fD(t._repo,t,a),l(u,f)};c.userCallback=r.userCallback,c.context=r.context,r=c}const s=new D8(r,o||void 0),a=e==="value"?new jw(s):new Yk(e,s);return Yoe(t._repo,t,a),()=>fD(t._repo,t,a)}function ose(t,e,r,n){return ise(t,"value",e,r,n)}class ag{}class sse extends ag{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){og("endAt",this._value,e._path,!0);const r=gie(e._queryParams,this._value,this._key);if(M8(r),Hk(r),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lc(e._repo,e._path,r,e._orderByCalled)}}class ase extends ag{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){og("startAt",this._value,e._path,!0);const r=yie(e._queryParams,this._value,this._key);if(M8(r),Hk(r),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Lc(e._repo,e._path,r,e._orderByCalled)}}class lse extends ag{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lc(e._repo,e._path,mie(e._queryParams,this._limit),e._orderByCalled)}}function cse(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lse(t)}class use extends ag{constructor(e){super(),this._path=e}_apply(e){nse(e,"orderByChild");const r=new ut(this._path);if($e(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Sk(r),i=vie(e._queryParams,n);return Hk(i),new Lc(e._repo,e._path,i,!0)}}function fse(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vk("orderByChild","path",t,!1),new use(t)}class dse extends ag{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){if(og("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new sse(this._value,this._key)._apply(new ase(this._value,this._key)._apply(e))}}function hse(t,e){return $oe("equalTo","key",e,!0),new dse(t,e)}function pse(t,...e){let r=Xr(t);for(const n of e)r=n._apply(r);return r}soe(Qo);foe(Qo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mse="FIREBASE_DATABASE_EMULATOR_HOST",AT={};let yse=!1;function gse(t,e,r,n){t.repoInfo_=new DW(`${e}:${r}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function vse(t,e,r,n,i){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||Ss("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ur("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=dD(o,i),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[mse]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=dD(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const u=i&&l?new Xu(Xu.OWNER):new xne(t.name,t.options,e);Moe("Invalid Firebase Database URL",s),$e(s.path)||Ss("Database URL must point to the root of a Firebase Database (not including a child path).");const f=xse(a,t,u,new bne(t.name,r));return new _se(f,t)}function bse(t,e){const r=AT[e];(!r||r[t.key]!==t)&&Ss(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Qoe(t),delete r[t.key]}function xse(t,e,r,n){let i=AT[e.name];i||(i={},AT[e.name]=i);let o=i[t.toURLString()];return o&&Ss("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Voe(t,yse,r,n),i[t.toURLString()]=o,o}class _se{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Woe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qo(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(bse(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ss("Cannot call "+e+" on a deleted database.")}}function wse(t=hk(),e){const r=fk(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=ak("database");n&&Sse(r,...n)}return r}function Sse(t,e,r,n={}){t=Xr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ss("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&Ss('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Xu(Xu.OWNER);else if(n.mockUserToken){const s=typeof n.mockUserToken=="string"?n.mockUserToken:lk(n.mockUserToken,t.app.options.projectId);o=new Xu(s)}gse(i,e,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ese(t){ine(dk),Bf(new wc("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return vse(n,i,o,r)},"PUBLIC").setMultipleInstances(!0)),Lo(j2,$2,t),Lo(j2,$2,"esm2017")}ms.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ms.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Ese();var pD=Object.prototype.toString,U8=function(e){var r=pD.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&pD.call(e.callee)==="[object Function]"),n},pE,mD;function Ase(){if(mD)return pE;mD=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=U8,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var p=h.constructor;return p&&p.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!u)return l(h);try{return l(h)}catch{return!1}};t=function(p){var m=p!==null&&typeof p=="object",y=r.call(p)==="[object Function]",g=n(p),b=m&&r.call(p)==="[object String]",v=[];if(!m&&!y&&!g)throw new TypeError("Object.keys called on a non-object");var x=s&&y;if(b&&p.length>0&&!e.call(p,0))for(var S=0;S<p.length;++S)v.push(String(S));if(g&&p.length>0)for(var _=0;_<p.length;++_)v.push(String(_));else for(var w in p)!(x&&w==="prototype")&&e.call(p,w)&&v.push(String(w));if(o)for(var A=f(p),C=0;C<a.length;++C)!(A&&a[C]==="constructor")&&e.call(p,a[C])&&v.push(a[C]);return v}}return pE=t,pE}var Cse=Array.prototype.slice,Tse=U8,yD=Object.keys,w0=yD?function(e){return yD(e)}:Ase(),gD=Object.keys;w0.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Tse(n)?gD(Cse.call(n)):gD(n)})}else Object.keys=w0;return Object.keys||w0};var $w=w0,mE,vD;function Dw(){return vD||(vD=1,mE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),mE}var bD=typeof Symbol<"u"&&Symbol,Pse=Dw(),rl=function(){return typeof bD!="function"||typeof Symbol!="function"||typeof bD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Pse()},Ise="Function.prototype.bind called on incompatible ",yE=Array.prototype.slice,Nse=Object.prototype.toString,kse="[object Function]",Ose=function(e){var r=this;if(typeof r!="function"||Nse.call(r)!==kse)throw new TypeError(Ise+r);for(var n=yE.call(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,n.concat(yE.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,n.concat(yE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Rse=Ose,Qk=Function.prototype.bind||Rse,jse=Qk,Xk=jse.call(Function.call,Object.prototype.hasOwnProperty),Ke,Hf=SyntaxError,V8=Function,Ju=TypeError,gE=function(t){try{return V8('"use strict"; return ('+t+").constructor;")()}catch{}},rc=Object.getOwnPropertyDescriptor;if(rc)try{rc({},"")}catch{rc=null}var vE=function(){throw new Ju},$se=rc?function(){try{return arguments.callee,vE}catch{try{return rc(arguments,"callee").get}catch{return vE}}}():vE,Yc=rl(),Ys=Object.getPrototypeOf||function(t){return t.__proto__},cu={},Dse=typeof Uint8Array>"u"?Ke:Ys(Uint8Array),Zu={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Yc?Ys([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":cu,"%AsyncGenerator%":cu,"%AsyncGeneratorFunction%":cu,"%AsyncIteratorPrototype%":cu,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":V8,"%GeneratorFunction%":cu,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yc?Ys(Ys([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Yc?Ke:Ys(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Yc?Ke:Ys(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yc?Ys(""[Symbol.iterator]()):Ke,"%Symbol%":Yc?Symbol:Ke,"%SyntaxError%":Hf,"%ThrowTypeError%":$se,"%TypedArray%":Dse,"%TypeError%":Ju,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet},Mse=function t(e){var r;if(e==="%AsyncFunction%")r=gE("async function () {}");else if(e==="%GeneratorFunction%")r=gE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=gE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Ys(i.prototype))}return Zu[e]=r,r},xD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},lg=Qk,Ub=Xk,Fse=lg.call(Function.call,Array.prototype.concat),Lse=lg.call(Function.apply,Array.prototype.splice),_D=lg.call(Function.call,String.prototype.replace),Vb=lg.call(Function.call,String.prototype.slice),Bse=lg.call(Function.call,RegExp.prototype.exec),Use=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Vse=/\\(\\)?/g,Wse=function(e){var r=Vb(e,0,1),n=Vb(e,-1);if(r==="%"&&n!=="%")throw new Hf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Hf("invalid intrinsic syntax, expected opening `%`");var i=[];return _D(e,Use,function(o,s,a,l){i[i.length]=a?_D(l,Vse,"$1"):s||o}),i},zse=function(e,r){var n=e,i;if(Ub(xD,n)&&(i=xD[n],n="%"+i[0]+"%"),Ub(Zu,n)){var o=Zu[n];if(o===cu&&(o=Mse(n)),typeof o>"u"&&!r)throw new Ju("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Hf("intrinsic "+e+" does not exist!")},Os=function(e,r){if(typeof e!="string"||e.length===0)throw new Ju("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ju('"allowMissing" argument must be a boolean');if(Bse(/^%?[^%]*%?$/,e)===null)throw new Hf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Wse(e),i=n.length>0?n[0]:"",o=zse("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Lse(n,Fse([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=Vb(h,0,1),m=Vb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Hf("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,s="%"+i+"%",Ub(Zu,s))a=Zu[s];else if(a!=null){if(!(h in a)){if(!r)throw new Ju("base intrinsic for "+e+" exists, but the property is not available.");return}if(rc&&u+1>=n.length){var y=rc(a,h);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else f=Ub(a,h),a=a[h];f&&!l&&(Zu[s]=a)}}return a},Gse=Os,CT=Gse("%Object.defineProperty%",!0),TT=function(){if(CT)try{return CT({},"a",{value:1}),!0}catch{return!1}return!1};TT.hasArrayLengthDefineBug=function(){if(!TT())return null;try{return CT([],"length",{value:1}).length!==1}catch{return!0}};var cg=TT,qse=$w,Hse=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Kse=Object.prototype.toString,Yse=Array.prototype.concat,W8=Object.defineProperty,Qse=function(t){return typeof t=="function"&&Kse.call(t)==="[object Function]"},Xse=cg(),z8=W8&&Xse,Jse=function(t,e,r,n){e in t&&(!Qse(n)||!n())||(z8?W8(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},G8=function(t,e){var r=arguments.length>2?arguments[2]:{},n=qse(e);Hse&&(n=Yse.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Jse(t,n[i],e[n[i]],r[n[i]])};G8.supportsDescriptors=!!z8;var Mw=G8,q8={exports:{}};(function(t){var e=Qk,r=Os,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(f){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,f.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(q8);var ug=q8.exports,H8=Os,K8=ug,Zse=K8(H8("String.prototype.indexOf")),fo=function(e,r){var n=H8(e,!!r);return typeof n=="function"&&Zse(e,".prototype.")>-1?K8(n):n},eae=$w,Y8=Dw()(),Q8=fo,wD=Object,tae=Q8("Array.prototype.push"),SD=Q8("Object.prototype.propertyIsEnumerable"),rae=Y8?Object.getOwnPropertySymbols:null,X8=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=wD(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=wD(arguments[i]),s=eae(o),a=Y8&&(Object.getOwnPropertySymbols||rae);if(a)for(var l=a(o),c=0;c<l.length;++c){var u=l[c];SD(o,u)&&tae(s,u)}for(var f=0;f<s.length;++f){var h=s[f];if(SD(o,h)){var p=o[h];n[h]=p}}}return n},bE=X8,nae=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return t!==o},iae=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},J8=function(){return!Object.assign||nae()||iae()?bE:Object.assign},oae=Mw,sae=J8,aae=function(){var e=sae();return oae(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},lae=Mw,cae=ug,uae=X8,Z8=J8,fae=aae,dae=cae.apply(Z8()),ez=function(e,r){return dae(Object,arguments)};lae(ez,{getPolyfill:Z8,implementation:uae,shim:fae});var hae=ez,ED={foo:{}},pae=Object,Fw=function(){return{__proto__:ED}.foo===ED.foo&&!({__proto__:null}instanceof pae)},mae="Function.prototype.bind called on incompatible ",yae=Object.prototype.toString,gae=Math.max,vae="[object Function]",AD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},bae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},xae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},_ae=function(e){var r=this;if(typeof r!="function"||yae.apply(r)!==vae)throw new TypeError(mae+r);for(var n=bae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,AD(n,arguments));return Object(u)===u?u:this}return r.apply(e,AD(n,arguments))},s=gae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+xae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},wae=_ae,tz=Function.prototype.bind||wae,Sae="Function.prototype.bind called on incompatible ",Eae=Object.prototype.toString,Aae=Math.max,Cae="[object Function]",CD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Tae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Pae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Iae=function(e){var r=this;if(typeof r!="function"||Eae.apply(r)!==Cae)throw new TypeError(Sae+r);for(var n=Tae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,CD(n,arguments));return Object(u)===u?u:this}return r.apply(e,CD(n,arguments))},s=Aae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Pae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Nae=Iae,kae=Function.prototype.bind||Nae,Oae=Function.prototype.call,Rae=Object.prototype.hasOwnProperty,jae=kae,Lw=jae.call(Oae,Rae),Fe,Kf=SyntaxError,rz=Function,ef=TypeError,xE=function(t){try{return rz('"use strict"; return ('+t+").constructor;")()}catch{}},nc=Object.getOwnPropertyDescriptor;if(nc)try{nc({},"")}catch{nc=null}var _E=function(){throw new ef},$ae=nc?function(){try{return arguments.callee,_E}catch{try{return nc(arguments,"callee").get}catch{return _E}}}():_E,Qc=rl(),Dae=Fw(),br=Object.getPrototypeOf||(Dae?function(t){return t.__proto__}:null),uu={},Mae=typeof Uint8Array>"u"||!br?Fe:br(Uint8Array),ic={"%AggregateError%":typeof AggregateError>"u"?Fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Fe:ArrayBuffer,"%ArrayIteratorPrototype%":Qc&&br?br([][Symbol.iterator]()):Fe,"%AsyncFromSyncIteratorPrototype%":Fe,"%AsyncFunction%":uu,"%AsyncGenerator%":uu,"%AsyncGeneratorFunction%":uu,"%AsyncIteratorPrototype%":uu,"%Atomics%":typeof Atomics>"u"?Fe:Atomics,"%BigInt%":typeof BigInt>"u"?Fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Fe:FinalizationRegistry,"%Function%":rz,"%GeneratorFunction%":uu,"%Int8Array%":typeof Int8Array>"u"?Fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qc&&br?br(br([][Symbol.iterator]())):Fe,"%JSON%":typeof JSON=="object"?JSON:Fe,"%Map%":typeof Map>"u"?Fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Qc||!br?Fe:br(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Fe:Promise,"%Proxy%":typeof Proxy>"u"?Fe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Qc||!br?Fe:br(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qc&&br?br(""[Symbol.iterator]()):Fe,"%Symbol%":Qc?Symbol:Fe,"%SyntaxError%":Kf,"%ThrowTypeError%":$ae,"%TypedArray%":Mae,"%TypeError%":ef,"%Uint8Array%":typeof Uint8Array>"u"?Fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Fe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Fe:WeakSet};if(br)try{null.error}catch(t){var Fae=br(br(t));ic["%Error.prototype%"]=Fae}var Lae=function t(e){var r;if(e==="%AsyncFunction%")r=xE("async function () {}");else if(e==="%GeneratorFunction%")r=xE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=xE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&br&&(r=br(i.prototype))}return ic[e]=r,r},TD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fg=tz,Wb=Lw,Bae=fg.call(Function.call,Array.prototype.concat),Uae=fg.call(Function.apply,Array.prototype.splice),PD=fg.call(Function.call,String.prototype.replace),zb=fg.call(Function.call,String.prototype.slice),Vae=fg.call(Function.call,RegExp.prototype.exec),Wae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zae=/\\(\\)?/g,Gae=function(e){var r=zb(e,0,1),n=zb(e,-1);if(r==="%"&&n!=="%")throw new Kf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Kf("invalid intrinsic syntax, expected opening `%`");var i=[];return PD(e,Wae,function(o,s,a,l){i[i.length]=a?PD(l,zae,"$1"):s||o}),i},qae=function(e,r){var n=e,i;if(Wb(TD,n)&&(i=TD[n],n="%"+i[0]+"%"),Wb(ic,n)){var o=ic[n];if(o===uu&&(o=Lae(n)),typeof o>"u"&&!r)throw new ef("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Kf("intrinsic "+e+" does not exist!")},Bw=function(e,r){if(typeof e!="string"||e.length===0)throw new ef("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ef('"allowMissing" argument must be a boolean');if(Vae(/^%?[^%]*%?$/,e)===null)throw new Kf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Gae(e),i=n.length>0?n[0]:"",o=qae("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Uae(n,Bae([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=zb(h,0,1),m=zb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Kf("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,s="%"+i+"%",Wb(ic,s))a=ic[s];else if(a!=null){if(!(h in a)){if(!r)throw new ef("base intrinsic for "+e+" exists, but the property is not available.");return}if(nc&&u+1>=n.length){var y=nc(a,h);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else f=Wb(a,h),a=a[h];f&&!l&&(ic[s]=a)}}return a},nz={exports:{}},Hae="Function.prototype.bind called on incompatible ",Kae=Object.prototype.toString,Yae=Math.max,Qae="[object Function]",ID=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Xae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Jae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Zae=function(e){var r=this;if(typeof r!="function"||Kae.apply(r)!==Qae)throw new TypeError(Hae+r);for(var n=Xae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,ID(n,arguments));return Object(u)===u?u:this}return r.apply(e,ID(n,arguments))},s=Yae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Jae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},ele=Zae,tle=Function.prototype.bind||ele,Le,Yf=SyntaxError,iz=Function,tf=TypeError,wE=function(t){try{return iz('"use strict"; return ('+t+").constructor;")()}catch{}},oc=Object.getOwnPropertyDescriptor;if(oc)try{oc({},"")}catch{oc=null}var SE=function(){throw new tf},rle=oc?function(){try{return arguments.callee,SE}catch{try{return oc(arguments,"callee").get}catch{return SE}}}():SE,Xc=rl(),nle=Fw(),xr=Object.getPrototypeOf||(nle?function(t){return t.__proto__}:null),fu={},ile=typeof Uint8Array>"u"||!xr?Le:xr(Uint8Array),sc={"%AggregateError%":typeof AggregateError>"u"?Le:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Le:ArrayBuffer,"%ArrayIteratorPrototype%":Xc&&xr?xr([][Symbol.iterator]()):Le,"%AsyncFromSyncIteratorPrototype%":Le,"%AsyncFunction%":fu,"%AsyncGenerator%":fu,"%AsyncGeneratorFunction%":fu,"%AsyncIteratorPrototype%":fu,"%Atomics%":typeof Atomics>"u"?Le:Atomics,"%BigInt%":typeof BigInt>"u"?Le:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Le:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Le:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Le:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Le:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Le:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Le:FinalizationRegistry,"%Function%":iz,"%GeneratorFunction%":fu,"%Int8Array%":typeof Int8Array>"u"?Le:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Le:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Le:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xc&&xr?xr(xr([][Symbol.iterator]())):Le,"%JSON%":typeof JSON=="object"?JSON:Le,"%Map%":typeof Map>"u"?Le:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xc||!xr?Le:xr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Le:Promise,"%Proxy%":typeof Proxy>"u"?Le:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Le:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Le:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xc||!xr?Le:xr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Le:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xc&&xr?xr(""[Symbol.iterator]()):Le,"%Symbol%":Xc?Symbol:Le,"%SyntaxError%":Yf,"%ThrowTypeError%":rle,"%TypedArray%":ile,"%TypeError%":tf,"%Uint8Array%":typeof Uint8Array>"u"?Le:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Le:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Le:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Le:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Le:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Le:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Le:WeakSet};if(xr)try{null.error}catch(t){var ole=xr(xr(t));sc["%Error.prototype%"]=ole}var sle=function t(e){var r;if(e==="%AsyncFunction%")r=wE("async function () {}");else if(e==="%GeneratorFunction%")r=wE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=wE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&xr&&(r=xr(i.prototype))}return sc[e]=r,r},ND={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},dg=tle,Gb=Lw,ale=dg.call(Function.call,Array.prototype.concat),lle=dg.call(Function.apply,Array.prototype.splice),kD=dg.call(Function.call,String.prototype.replace),qb=dg.call(Function.call,String.prototype.slice),cle=dg.call(Function.call,RegExp.prototype.exec),ule=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fle=/\\(\\)?/g,dle=function(e){var r=qb(e,0,1),n=qb(e,-1);if(r==="%"&&n!=="%")throw new Yf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Yf("invalid intrinsic syntax, expected opening `%`");var i=[];return kD(e,ule,function(o,s,a,l){i[i.length]=a?kD(l,fle,"$1"):s||o}),i},hle=function(e,r){var n=e,i;if(Gb(ND,n)&&(i=ND[n],n="%"+i[0]+"%"),Gb(sc,n)){var o=sc[n];if(o===fu&&(o=sle(n)),typeof o>"u"&&!r)throw new tf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Yf("intrinsic "+e+" does not exist!")},ple=function(e,r){if(typeof e!="string"||e.length===0)throw new tf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new tf('"allowMissing" argument must be a boolean');if(cle(/^%?[^%]*%?$/,e)===null)throw new Yf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=dle(e),i=n.length>0?n[0]:"",o=hle("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],lle(n,ale([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=qb(h,0,1),m=qb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Yf("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,s="%"+i+"%",Gb(sc,s))a=sc[s];else if(a!=null){if(!(h in a)){if(!r)throw new tf("base intrinsic for "+e+" exists, but the property is not available.");return}if(oc&&u+1>=n.length){var y=oc(a,h);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else f=Gb(a,h),a=a[h];f&&!l&&(sc[s]=a)}}return a},mle="Function.prototype.bind called on incompatible ",yle=Object.prototype.toString,gle=Math.max,vle="[object Function]",OD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},ble=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},xle=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},_le=function(e){var r=this;if(typeof r!="function"||yle.apply(r)!==vle)throw new TypeError(mle+r);for(var n=ble(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,OD(n,arguments));return Object(u)===u?u:this}return r.apply(e,OD(n,arguments))},s=gle(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+xle(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},wle=_le,Sle=Function.prototype.bind||wle,Be,Qf=SyntaxError,oz=Function,rf=TypeError,EE=function(t){try{return oz('"use strict"; return ('+t+").constructor;")()}catch{}},ac=Object.getOwnPropertyDescriptor;if(ac)try{ac({},"")}catch{ac=null}var AE=function(){throw new rf},Ele=ac?function(){try{return arguments.callee,AE}catch{try{return ac(arguments,"callee").get}catch{return AE}}}():AE,Jc=rl(),Ale=Fw(),_r=Object.getPrototypeOf||(Ale?function(t){return t.__proto__}:null),du={},Cle=typeof Uint8Array>"u"||!_r?Be:_r(Uint8Array),lc={"%AggregateError%":typeof AggregateError>"u"?Be:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Be:ArrayBuffer,"%ArrayIteratorPrototype%":Jc&&_r?_r([][Symbol.iterator]()):Be,"%AsyncFromSyncIteratorPrototype%":Be,"%AsyncFunction%":du,"%AsyncGenerator%":du,"%AsyncGeneratorFunction%":du,"%AsyncIteratorPrototype%":du,"%Atomics%":typeof Atomics>"u"?Be:Atomics,"%BigInt%":typeof BigInt>"u"?Be:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Be:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Be:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Be:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Be:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Be:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Be:FinalizationRegistry,"%Function%":oz,"%GeneratorFunction%":du,"%Int8Array%":typeof Int8Array>"u"?Be:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Be:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Be:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jc&&_r?_r(_r([][Symbol.iterator]())):Be,"%JSON%":typeof JSON=="object"?JSON:Be,"%Map%":typeof Map>"u"?Be:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jc||!_r?Be:_r(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Be:Promise,"%Proxy%":typeof Proxy>"u"?Be:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Be:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Be:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jc||!_r?Be:_r(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Be:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jc&&_r?_r(""[Symbol.iterator]()):Be,"%Symbol%":Jc?Symbol:Be,"%SyntaxError%":Qf,"%ThrowTypeError%":Ele,"%TypedArray%":Cle,"%TypeError%":rf,"%Uint8Array%":typeof Uint8Array>"u"?Be:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Be:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Be:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Be:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Be:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Be:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Be:WeakSet};if(_r)try{null.error}catch(t){var Tle=_r(_r(t));lc["%Error.prototype%"]=Tle}var Ple=function t(e){var r;if(e==="%AsyncFunction%")r=EE("async function () {}");else if(e==="%GeneratorFunction%")r=EE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=EE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_r&&(r=_r(i.prototype))}return lc[e]=r,r},RD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hg=Sle,Hb=Lw,Ile=hg.call(Function.call,Array.prototype.concat),Nle=hg.call(Function.apply,Array.prototype.splice),jD=hg.call(Function.call,String.prototype.replace),Kb=hg.call(Function.call,String.prototype.slice),kle=hg.call(Function.call,RegExp.prototype.exec),Ole=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rle=/\\(\\)?/g,jle=function(e){var r=Kb(e,0,1),n=Kb(e,-1);if(r==="%"&&n!=="%")throw new Qf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Qf("invalid intrinsic syntax, expected opening `%`");var i=[];return jD(e,Ole,function(o,s,a,l){i[i.length]=a?jD(l,Rle,"$1"):s||o}),i},$le=function(e,r){var n=e,i;if(Hb(RD,n)&&(i=RD[n],n="%"+i[0]+"%"),Hb(lc,n)){var o=lc[n];if(o===du&&(o=Ple(n)),typeof o>"u"&&!r)throw new rf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Qf("intrinsic "+e+" does not exist!")},Dle=function(e,r){if(typeof e!="string"||e.length===0)throw new rf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new rf('"allowMissing" argument must be a boolean');if(kle(/^%?[^%]*%?$/,e)===null)throw new Qf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=jle(e),i=n.length>0?n[0]:"",o=$le("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Nle(n,Ile([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=Kb(h,0,1),m=Kb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Qf("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,s="%"+i+"%",Hb(lc,s))a=lc[s];else if(a!=null){if(!(h in a)){if(!r)throw new rf("base intrinsic for "+e+" exists, but the property is not available.");return}if(ac&&u+1>=n.length){var y=ac(a,h);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else f=Hb(a,h),a=a[h];f&&!l&&(lc[s]=a)}}return a},Mle=Os,S0=Mle("%Object.getOwnPropertyDescriptor%",!0);if(S0)try{S0([],"length")}catch{S0=null}var Uw=S0,Fle=cg(),Jk=Dle,Ip=Fle&&Jk("%Object.defineProperty%",!0);if(Ip)try{Ip({},"a",{value:1})}catch{Ip=!1}var Lle=Jk("%SyntaxError%"),Zc=Jk("%TypeError%"),$D=Uw,Zk=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Zc("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Zc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Zc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Zc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Zc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Zc("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!$D&&$D(e,r);if(Ip)Ip(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(a||!i&&!o&&!s)e[r]=n;else throw new Lle("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},sz=ple,DD=Zk,Ble=cg(),MD=Uw,FD=sz("%TypeError%"),Ule=sz("%Math.floor%"),az=function(e,r){if(typeof e!="function")throw new FD("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Ule(r)!==r)throw new FD("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&MD){var s=MD(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(Ble?DD(e,"length",r,!0,!0):DD(e,"length",r)),e};(function(t){var e=tz,r=Bw,n=az,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(nz);var Vle=nz.exports,lz=Bw,cz=Vle,Wle=cz(lz("String.prototype.indexOf")),zle=function(e,r){var n=lz(e,!!r);return typeof n=="function"&&Wle(e,".prototype.")>-1?cz(n):n},Gle=$w,qle=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Hle=Object.prototype.toString,Kle=Array.prototype.concat,LD=Zk,Yle=function(t){return typeof t=="function"&&Hle.call(t)==="[object Function]"},uz=cg(),Qle=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Yle(n)||!n())return}uz?LD(t,e,r,!0):LD(t,e,r)},fz=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Gle(e);qle&&(n=Kle.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Qle(t,n[i],e[n[i]],r[n[i]])};fz.supportsDescriptors=!!uz;var eO=fz,Sm=function(){return typeof(function(){}).name=="string"},Np=Object.getOwnPropertyDescriptor;if(Np)try{Np([],"length")}catch{Np=null}Sm.functionsHaveConfigurableNames=function(){if(!Sm()||!Np)return!1;var e=Np(function(){},"name");return!!e&&!!e.configurable};var Xle=Function.prototype.bind;Sm.boundFunctionsHaveNames=function(){return Sm()&&typeof Xle=="function"&&(function(){}).bind().name!==""};var Jle=Sm,BD=Zk,Zle=cg(),ece=Jle.functionsHaveConfigurableNames(),tce=TypeError,rce=function(e,r){if(typeof e!="function")throw new tce("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||ece)&&(Zle?BD(e,"name",r,!0,!0):BD(e,"name",r)),e},nce=rce,ice=Object,oce=TypeError,dz=nce(function(){if(this!=null&&this!==ice(this))throw new oce("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),sce=dz,ace=eO.supportsDescriptors,lce=Object.getOwnPropertyDescriptor,hz=function(){if(ace&&/a/mig.flags==="gim"){var e=lce(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return sce},cce=eO.supportsDescriptors,uce=hz,fce=Object.getOwnPropertyDescriptor,dce=Object.defineProperty,hce=TypeError,UD=Object.getPrototypeOf,pce=/a/,mce=function(){if(!cce||!UD)throw new hce("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=uce(),r=UD(pce),n=fce(r,"flags");return(!n||n.get!==e)&&dce(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},yce=eO,gce=ug,vce=dz,pz=hz,bce=mce,mz=gce(pz());yce(mz,{getPolyfill:pz,implementation:vce,shim:bce});var xce=mz,E0={exports:{}},_ce=Dw(),nl=function(){return _ce()&&!!Symbol.toStringTag},wce=nl(),Sce=fo,PT=Sce("Object.prototype.toString"),Vw=function(e){return wce&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:PT(e)==="[object Arguments]"},yz=function(e){return Vw(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&PT(e)!=="[object Array]"&&PT(e.callee)==="[object Function]"},Ece=function(){return Vw(arguments)}();Vw.isLegacyArguments=yz;var gz=Ece?Vw:yz;const Ace={},Cce=Object.freeze(Object.defineProperty({__proto__:null,default:Ace},Symbol.toStringTag,{value:"Module"})),Tce=_J(Cce);var tO=typeof Map=="function"&&Map.prototype,CE=Object.getOwnPropertyDescriptor&&tO?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Yb=tO&&CE&&typeof CE.get=="function"?CE.get:null,Pce=tO&&Map.prototype.forEach,rO=typeof Set=="function"&&Set.prototype,TE=Object.getOwnPropertyDescriptor&&rO?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Qb=rO&&TE&&typeof TE.get=="function"?TE.get:null,Ice=rO&&Set.prototype.forEach,Nce=typeof WeakMap=="function"&&WeakMap.prototype,kp=Nce?WeakMap.prototype.has:null,kce=typeof WeakSet=="function"&&WeakSet.prototype,Op=kce?WeakSet.prototype.has:null,Oce=typeof WeakRef=="function"&&WeakRef.prototype,VD=Oce?WeakRef.prototype.deref:null,Rce=Boolean.prototype.valueOf,jce=Object.prototype.toString,$ce=Function.prototype.toString,Dce=String.prototype.match,nO=String.prototype.slice,da=String.prototype.replace,Mce=String.prototype.toUpperCase,WD=String.prototype.toLowerCase,vz=RegExp.prototype.test,zD=Array.prototype.concat,wo=Array.prototype.join,Fce=Array.prototype.slice,GD=Math.floor,IT=typeof BigInt=="function"?BigInt.prototype.valueOf:null,PE=Object.getOwnPropertySymbols,NT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",mn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Xf||"symbol")?Symbol.toStringTag:null,bz=Object.prototype.propertyIsEnumerable,qD=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function HD(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||vz.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-GD(-t):GD(t);if(n!==t){var i=String(n),o=nO.call(e,i.length+1);return da.call(i,r,"$&_")+"."+da.call(da.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return da.call(e,r,"$&_")}var kT=Tce,KD=kT.custom,YD=_z(KD)?KD:null,Lce=function t(e,r,n,i){var o=r||{};if(Qs(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Qs(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Qs(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Qs(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Qs(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Sz(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?HD(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?HD(e,c):c}var u=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return OT(e)?"[Array]":"[Object]";var f=nue(o,n);if(typeof i>"u")i=[];else if(wz(i,e)>=0)return"[Circular]";function h(N,R,B){if(R&&(i=Fce.call(i),i.push(R)),B){var V={depth:o.depth};return Qs(o,"quoteStyle")&&(V.quoteStyle=o.quoteStyle),t(N,V,n+1,i)}return t(N,o,n+1,i)}if(typeof e=="function"&&!QD(e)){var p=Kce(e),m=_v(e,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+wo.call(m,", ")+" }":"")}if(_z(e)){var y=Xf?da.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):NT.call(e);return typeof e=="object"&&!Xf?Ch(y):y}if(eue(e)){for(var g="<"+WD.call(String(e.nodeName)),b=e.attributes||[],v=0;v<b.length;v++)g+=" "+b[v].name+"="+xz(Bce(b[v].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+WD.call(String(e.nodeName))+">",g}if(OT(e)){if(e.length===0)return"[]";var x=_v(e,h);return f&&!rue(x)?"["+RT(x,f)+"]":"[ "+wo.call(x,", ")+" ]"}if(Vce(e)){var S=_v(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!bz.call(e,"cause")?"{ ["+String(e)+"] "+wo.call(zD.call("[cause]: "+h(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+wo.call(S,", ")+" }"}if(typeof e=="object"&&s){if(YD&&typeof e[YD]=="function"&&kT)return kT(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Yce(e)){var _=[];return Pce.call(e,function(N,R){_.push(h(R,e,!0)+" => "+h(N,e))}),XD("Map",Yb.call(e),_,f)}if(Jce(e)){var w=[];return Ice.call(e,function(N){w.push(h(N,e))}),XD("Set",Qb.call(e),w,f)}if(Qce(e))return IE("WeakMap");if(Zce(e))return IE("WeakSet");if(Xce(e))return IE("WeakRef");if(zce(e))return Ch(h(Number(e)));if(qce(e))return Ch(h(IT.call(e)));if(Gce(e))return Ch(Rce.call(e));if(Wce(e))return Ch(h(String(e)));if(!Uce(e)&&!QD(e)){var A=_v(e,h),C=qD?qD(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",T=!C&&mn&&Object(e)===e&&mn in e?nO.call(il(e),8,-1):I?"Object":"",P=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",O=P+(T||I?"["+wo.call(zD.call([],T||[],I||[]),": ")+"] ":"");return A.length===0?O+"{}":f?O+"{"+RT(A,f)+"}":O+"{ "+wo.call(A,", ")+" }"}return String(e)};function xz(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Bce(t){return da.call(String(t),/"/g,"&quot;")}function OT(t){return il(t)==="[object Array]"&&(!mn||!(typeof t=="object"&&mn in t))}function Uce(t){return il(t)==="[object Date]"&&(!mn||!(typeof t=="object"&&mn in t))}function QD(t){return il(t)==="[object RegExp]"&&(!mn||!(typeof t=="object"&&mn in t))}function Vce(t){return il(t)==="[object Error]"&&(!mn||!(typeof t=="object"&&mn in t))}function Wce(t){return il(t)==="[object String]"&&(!mn||!(typeof t=="object"&&mn in t))}function zce(t){return il(t)==="[object Number]"&&(!mn||!(typeof t=="object"&&mn in t))}function Gce(t){return il(t)==="[object Boolean]"&&(!mn||!(typeof t=="object"&&mn in t))}function _z(t){if(Xf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!NT)return!1;try{return NT.call(t),!0}catch{}return!1}function qce(t){if(!t||typeof t!="object"||!IT)return!1;try{return IT.call(t),!0}catch{}return!1}var Hce=Object.prototype.hasOwnProperty||function(t){return t in this};function Qs(t,e){return Hce.call(t,e)}function il(t){return jce.call(t)}function Kce(t){if(t.name)return t.name;var e=Dce.call($ce.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function wz(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Yce(t){if(!Yb||!t||typeof t!="object")return!1;try{Yb.call(t);try{Qb.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Qce(t){if(!kp||!t||typeof t!="object")return!1;try{kp.call(t,kp);try{Op.call(t,Op)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Xce(t){if(!VD||!t||typeof t!="object")return!1;try{return VD.call(t),!0}catch{}return!1}function Jce(t){if(!Qb||!t||typeof t!="object")return!1;try{Qb.call(t);try{Yb.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Zce(t){if(!Op||!t||typeof t!="object")return!1;try{Op.call(t,Op);try{kp.call(t,kp)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function eue(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Sz(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Sz(nO.call(t,0,e.maxStringLength),e)+n}var i=da.call(da.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,tue);return xz(i,"single",e)}function tue(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Mce.call(e.toString(16))}function Ch(t){return"Object("+t+")"}function IE(t){return t+" { ? }"}function XD(t,e,r,n){var i=n?RT(r,n):wo.call(r,", ");return t+" ("+e+") {"+i+"}"}function rue(t){for(var e=0;e<t.length;e++)if(wz(t[e],`
`)>=0)return!1;return!0}function nue(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=wo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:wo.call(Array(e+1),r)}}function RT(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+wo.call(t,","+r)+`
`+e.prev}function _v(t,e){var r=OT(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Qs(t,i)?e(t[i],t):""}var o=typeof PE=="function"?PE(t):[],s;if(Xf){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)Qs(t,l)&&(r&&String(Number(l))===l&&l<t.length||Xf&&s["$"+l]instanceof Symbol||(vz.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof PE=="function")for(var c=0;c<o.length;c++)bz.call(t,o[c])&&n.push("["+e(o[c])+"]: "+e(t[o[c]],t));return n}var iO=Os,Ud=fo,iue=Lce,oue=iO("%TypeError%"),wv=iO("%WeakMap%",!0),Sv=iO("%Map%",!0),sue=Ud("WeakMap.prototype.get",!0),aue=Ud("WeakMap.prototype.set",!0),lue=Ud("WeakMap.prototype.has",!0),cue=Ud("Map.prototype.get",!0),uue=Ud("Map.prototype.set",!0),fue=Ud("Map.prototype.has",!0),oO=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},due=function(t,e){var r=oO(t,e);return r&&r.value},hue=function(t,e,r){var n=oO(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},pue=function(t,e){return!!oO(t,e)},Ez=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new oue("Side channel does not contain "+iue(o))},get:function(o){if(wv&&o&&(typeof o=="object"||typeof o=="function")){if(e)return sue(e,o)}else if(Sv){if(r)return cue(r,o)}else if(n)return due(n,o)},has:function(o){if(wv&&o&&(typeof o=="object"||typeof o=="function")){if(e)return lue(e,o)}else if(Sv){if(r)return fue(r,o)}else if(n)return pue(n,o);return!1},set:function(o,s){wv&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new wv),aue(e,o,s)):Sv?(r||(r=new Sv),uue(r,o,s)):(n||(n={key:{},next:null}),hue(n,o,s))}};return i},mue=Os,yue=Xk,Th=Ez(),es=mue("%TypeError%"),sO={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");if(Th.assert(t),!sO.has(t,e))throw new es("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");var r=Th.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");var r=Th.get(t);return!!r&&yue(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");var n=Th.get(t);n||(n={},Th.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(sO);var gue=sO,Ph=gue,vue=SyntaxError,JD=typeof StopIteration=="object"?StopIteration:null,bue=function(e){if(!JD)throw new vue("this environment lacks StopIteration");Ph.set(e,"[[Done]]",!1);var r={next:function(){var i=Ph.get(this,"[[Iterator]]"),o=Ph.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(Ph.set(i,"[[Done]]",!0),s!==JD)throw s;return{done:!0,value:void 0}}}};return Ph.set(r,"[[Iterator]]",e),r},xue={}.toString,Az=Array.isArray||function(t){return xue.call(t)=="[object Array]"},_ue=String.prototype.valueOf,wue=function(e){try{return _ue.call(e),!0}catch{return!1}},Sue=Object.prototype.toString,Eue="[object String]",Aue=nl(),Cz=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:Aue?wue(e):Sue.call(e)===Eue},aO=typeof Map=="function"&&Map.prototype?Map:null,Cue=typeof Set=="function"&&Set.prototype?Set:null,Xb;aO||(Xb=function(e){return!1});var Tz=aO?Map.prototype.has:null,ZD=Cue?Set.prototype.has:null;!Xb&&!Tz&&(Xb=function(e){return!1});var Pz=Xb||function(e){if(!e||typeof e!="object")return!1;try{if(Tz.call(e),ZD)try{ZD.call(e)}catch{return!0}return e instanceof aO}catch{}return!1},Tue=typeof Map=="function"&&Map.prototype?Map:null,lO=typeof Set=="function"&&Set.prototype?Set:null,Jb;lO||(Jb=function(e){return!1});var eM=Tue?Map.prototype.has:null,Iz=lO?Set.prototype.has:null;!Jb&&!Iz&&(Jb=function(e){return!1});var Nz=Jb||function(e){if(!e||typeof e!="object")return!1;try{if(Iz.call(e),eM)try{eM.call(e)}catch{return!0}return e instanceof lO}catch{}return!1},tM=gz,rM=bue;if(rl()||Dw()()){var NE=Symbol.iterator;E0.exports=function(e){if(e!=null&&typeof e[NE]<"u")return e[NE]();if(tM(e))return Array.prototype[NE].call(e)}}else{var Pue=Az,Iue=Cz,nM=Os,Nue=nM("%Map%",!0),kue=nM("%Set%",!0),Ui=fo,iM=Ui("Array.prototype.push"),oM=Ui("String.prototype.charCodeAt"),Oue=Ui("String.prototype.slice"),Rue=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=oM(e,r);if(i<55296||i>56319)return r+1;var o=oM(e,r+1);return o<56320||o>57343?r+1:r+2},kE=function(e){var r=0;return{next:function(){var i=r>=e.length,o;return i||(o=e[r],r+=1),{done:i,value:o}}}},sM=function(e,r){if(Pue(e)||tM(e))return kE(e);if(Iue(e)){var n=0;return{next:function(){var o=Rue(e,n),s=Oue(e,n,o);return n=o,{done:o>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!Nue&&!kue)E0.exports=function(e){if(e!=null)return sM(e,!0)};else{var jue=Pz,$ue=Nz,aM=Ui("Map.prototype.forEach",!0),lM=Ui("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var cM=Ui("Map.prototype.iterator",!0),uM=Ui("Set.prototype.iterator",!0);var fM=Ui("Map.prototype.@@iterator",!0)||Ui("Map.prototype._es6-shim iterator_",!0),dM=Ui("Set.prototype.@@iterator",!0)||Ui("Set.prototype._es6-shim iterator_",!0),Due=function(e){if(jue(e)){if(cM)return rM(cM(e));if(fM)return fM(e);if(aM){var r=[];return aM(e,function(i,o){iM(r,[o,i])}),kE(r)}}if($ue(e)){if(uM)return rM(uM(e));if(dM)return dM(e);if(lM){var n=[];return lM(e,function(i){iM(n,i)}),kE(n)}}};E0.exports=function(e){return Due(e)||sM(e)}}}var Mue=E0.exports,hM=function(t){return t!==t},kz=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||hM(e)&&hM(r))},Fue=kz,Oz=function(){return typeof Object.is=="function"?Object.is:Fue},Lue=Oz,Bue=Mw,Uue=function(){var e=Lue();return Bue(Object,{is:e},{is:function(){return Object.is!==e}}),e},Vue=Mw,Wue=ug,zue=kz,Rz=Oz,Gue=Uue,jz=Wue(Rz(),Object);Vue(jz,{getPolyfill:Rz,implementation:zue,shim:Gue});var que=jz,$z={exports:{}},Hue="Function.prototype.bind called on incompatible ",OE=Array.prototype.slice,Kue=Object.prototype.toString,Yue="[object Function]",Que=function(e){var r=this;if(typeof r!="function"||Kue.call(r)!==Yue)throw new TypeError(Hue+r);for(var n=OE.call(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,n.concat(OE.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,n.concat(OE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Xue=Que,Dz=Function.prototype.bind||Xue,Ye,Jf=SyntaxError,Mz=Function,nf=TypeError,RE=function(t){try{return Mz('"use strict"; return ('+t+").constructor;")()}catch{}},cc=Object.getOwnPropertyDescriptor;if(cc)try{cc({},"")}catch{cc=null}var jE=function(){throw new nf},Jue=cc?function(){try{return arguments.callee,jE}catch{try{return cc(arguments,"callee").get}catch{return jE}}}():jE,eu=rl(),Xs=Object.getPrototypeOf||function(t){return t.__proto__},hu={},Zue=typeof Uint8Array>"u"?Ye:Xs(Uint8Array),of={"%AggregateError%":typeof AggregateError>"u"?Ye:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ye:ArrayBuffer,"%ArrayIteratorPrototype%":eu?Xs([][Symbol.iterator]()):Ye,"%AsyncFromSyncIteratorPrototype%":Ye,"%AsyncFunction%":hu,"%AsyncGenerator%":hu,"%AsyncGeneratorFunction%":hu,"%AsyncIteratorPrototype%":hu,"%Atomics%":typeof Atomics>"u"?Ye:Atomics,"%BigInt%":typeof BigInt>"u"?Ye:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ye:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ye:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ye:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ye:FinalizationRegistry,"%Function%":Mz,"%GeneratorFunction%":hu,"%Int8Array%":typeof Int8Array>"u"?Ye:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ye:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ye:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":eu?Xs(Xs([][Symbol.iterator]())):Ye,"%JSON%":typeof JSON=="object"?JSON:Ye,"%Map%":typeof Map>"u"?Ye:Map,"%MapIteratorPrototype%":typeof Map>"u"||!eu?Ye:Xs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ye:Promise,"%Proxy%":typeof Proxy>"u"?Ye:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ye:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ye:Set,"%SetIteratorPrototype%":typeof Set>"u"||!eu?Ye:Xs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ye:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":eu?Xs(""[Symbol.iterator]()):Ye,"%Symbol%":eu?Symbol:Ye,"%SyntaxError%":Jf,"%ThrowTypeError%":Jue,"%TypedArray%":Zue,"%TypeError%":nf,"%Uint8Array%":typeof Uint8Array>"u"?Ye:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ye:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ye:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ye:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ye:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ye:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ye:WeakSet},efe=function t(e){var r;if(e==="%AsyncFunction%")r=RE("async function () {}");else if(e==="%GeneratorFunction%")r=RE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=RE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Xs(i.prototype))}return of[e]=r,r},pM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pg=Dz,Zb=Xk,tfe=pg.call(Function.call,Array.prototype.concat),rfe=pg.call(Function.apply,Array.prototype.splice),mM=pg.call(Function.call,String.prototype.replace),ex=pg.call(Function.call,String.prototype.slice),nfe=pg.call(Function.call,RegExp.prototype.exec),ife=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ofe=/\\(\\)?/g,sfe=function(e){var r=ex(e,0,1),n=ex(e,-1);if(r==="%"&&n!=="%")throw new Jf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Jf("invalid intrinsic syntax, expected opening `%`");var i=[];return mM(e,ife,function(o,s,a,l){i[i.length]=a?mM(l,ofe,"$1"):s||o}),i},afe=function(e,r){var n=e,i;if(Zb(pM,n)&&(i=pM[n],n="%"+i[0]+"%"),Zb(of,n)){var o=of[n];if(o===hu&&(o=efe(n)),typeof o>"u"&&!r)throw new nf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Jf("intrinsic "+e+" does not exist!")},Fz=function(e,r){if(typeof e!="string"||e.length===0)throw new nf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new nf('"allowMissing" argument must be a boolean');if(nfe(/^%?[^%]*%?$/,e)===null)throw new Jf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=sfe(e),i=n.length>0?n[0]:"",o=afe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],rfe(n,tfe([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=ex(h,0,1),m=ex(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Jf("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,s="%"+i+"%",Zb(of,s))a=of[s];else if(a!=null){if(!(h in a)){if(!r)throw new nf("base intrinsic for "+e+" exists, but the property is not available.");return}if(cc&&u+1>=n.length){var y=cc(a,h);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else f=Zb(a,h),a=a[h];f&&!l&&(of[s]=a)}}return a};(function(t){var e=Dz,r=Fz,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(f){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,f.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})($z);var Lz=$z.exports,Bz=Fz,Uz=Lz,lfe=Uz(Bz("String.prototype.indexOf")),cfe=function(e,r){var n=Bz(e,!!r);return typeof n=="function"&&lfe(e,".prototype.")>-1?Uz(n):n},Vz=Function.prototype.toString,ju=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,jT,A0;if(typeof ju=="function"&&typeof Object.defineProperty=="function")try{jT=Object.defineProperty({},"length",{get:function(){throw A0}}),A0={},ju(function(){throw 42},null,jT)}catch(t){t!==A0&&(ju=null)}else ju=null;var ufe=/^\s*class\b/,$T=function(e){try{var r=Vz.call(e);return ufe.test(r)}catch{return!1}},$E=function(e){try{return $T(e)?!1:(Vz.call(e),!0)}catch{return!1}},C0=Object.prototype.toString,ffe="[object Object]",dfe="[object Function]",hfe="[object GeneratorFunction]",pfe="[object HTMLAllCollection]",mfe="[object HTML document.all class]",yfe="[object HTMLCollection]",gfe=typeof Symbol=="function"&&!!Symbol.toStringTag,vfe=!(0 in[,]),DT=function(){return!1};if(typeof document=="object"){var bfe=document.all;C0.call(bfe)===C0.call(document.all)&&(DT=function(e){if((vfe||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=C0.call(e);return(r===pfe||r===mfe||r===yfe||r===ffe)&&e("")==null}catch{}return!1})}var xfe=ju?function(e){if(DT(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{ju(e,null,jT)}catch(r){if(r!==A0)return!1}return!$T(e)&&$E(e)}:function(e){if(DT(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(gfe)return $E(e);if($T(e))return!1;var r=C0.call(e);return r!==dfe&&r!==hfe&&!/^\[object HTML/.test(r)?!1:$E(e)},_fe=xfe,wfe=Object.prototype.toString,Wz=Object.prototype.hasOwnProperty,Sfe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)Wz.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Efe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Afe=function(e,r,n){for(var i in e)Wz.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Cfe=function(e,r,n){if(!_fe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),wfe.call(e)==="[object Array]"?Sfe(e,r,i):typeof e=="string"?Efe(e,r,i):Afe(e,r,i)},zz=Cfe,DE=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Tfe=typeof globalThis>"u"?kl:globalThis,Gz=function(){for(var e=[],r=0;r<DE.length;r++)typeof Tfe[DE[r]]=="function"&&(e[e.length]=DE[r]);return e},qz=zz,Pfe=Gz,cO=fo,Ife=cO("Object.prototype.toString"),Hz=nl(),T0=Uw,Nfe=typeof globalThis>"u"?kl:globalThis,Kz=Pfe(),kfe=cO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Ofe=cO("String.prototype.slice"),Yz={},ME=Object.getPrototypeOf;Hz&&T0&&ME&&qz(Kz,function(t){var e=new Nfe[t];if(Symbol.toStringTag in e){var r=ME(e),n=T0(r,Symbol.toStringTag);if(!n){var i=ME(r);n=T0(i,Symbol.toStringTag)}Yz[t]=n.get}});var Rfe=function(e){var r=!1;return qz(Yz,function(n,i){if(!r)try{r=n.call(e)===i}catch{}}),r},Qz=function(e){if(!e||typeof e!="object")return!1;if(!Hz||!(Symbol.toStringTag in e)){var r=Ofe(Ife(e),8,-1);return kfe(Kz,r)>-1}return T0?Rfe(e):!1},jfe=Lz,$fe=cfe,Xz=Bw,Dfe=Qz,yM=Xz("ArrayBuffer",!0),gM=Xz("Float32Array",!0),P0=$fe("ArrayBuffer.prototype.byteLength",!0),vM=yM&&!P0&&new yM().slice,bM=vM&&jfe(vM),Mfe=P0||bM?function(e){if(!e||typeof e!="object")return!1;try{return P0?P0(e):bM(e,0),!0}catch{return!1}}:gM?function(e){try{return new gM(e).buffer===e&&!Dfe(e)}catch(r){return typeof e=="object"&&r.name==="RangeError"}}:function(e){return!1},Ffe=Date.prototype.getDay,Lfe=function(e){try{return Ffe.call(e),!0}catch{return!1}},Bfe=Object.prototype.toString,Ufe="[object Date]",Vfe=nl(),Wfe=function(e){return typeof e!="object"||e===null?!1:Vfe?Lfe(e):Bfe.call(e)===Ufe},MT=fo,Jz=nl(),Zz,e9,FT,LT;if(Jz){Zz=MT("Object.prototype.hasOwnProperty"),e9=MT("RegExp.prototype.exec"),FT={};var FE=function(){throw FT};LT={toString:FE,valueOf:FE},typeof Symbol.toPrimitive=="symbol"&&(LT[Symbol.toPrimitive]=FE)}var zfe=MT("Object.prototype.toString"),Gfe=Object.getOwnPropertyDescriptor,qfe="[object RegExp]",Hfe=Jz?function(e){if(!e||typeof e!="object")return!1;var r=Gfe(e,"lastIndex"),n=r&&Zz(r,"value");if(!n)return!1;try{e9(e,LT)}catch(i){return i===FT}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:zfe(e)===qfe},Kfe=fo,xM=Kfe("SharedArrayBuffer.prototype.byteLength",!0),Yfe=xM?function(e){if(!e||typeof e!="object")return!1;try{return xM(e),!0}catch{return!1}}:function(e){return!1},Qfe=Number.prototype.toString,Xfe=function(e){try{return Qfe.call(e),!0}catch{return!1}},Jfe=Object.prototype.toString,Zfe="[object Number]",ede=nl(),tde=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:ede?Xfe(e):Jfe.call(e)===Zfe},t9=fo,rde=t9("Boolean.prototype.toString"),nde=t9("Object.prototype.toString"),ide=function(e){try{return rde(e),!0}catch{return!1}},ode="[object Boolean]",sde=nl(),ade=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:sde&&Symbol.toStringTag in e?ide(e):nde(e)===ode},BT={exports:{}},lde=Object.prototype.toString,cde=rl();if(cde){var ude=Symbol.prototype.toString,fde=/^Symbol\(.*\)$/,dde=function(e){return typeof e.valueOf()!="symbol"?!1:fde.test(ude.call(e))};BT.exports=function(e){if(typeof e=="symbol")return!0;if(lde.call(e)!=="[object Symbol]")return!1;try{return dde(e)}catch{return!1}}}else BT.exports=function(e){return!1};var hde=BT.exports,UT={exports:{}},_M=typeof BigInt<"u"&&BigInt,pde=function(){return typeof _M=="function"&&typeof BigInt=="function"&&typeof _M(42)=="bigint"&&typeof BigInt(42)=="bigint"},mde=pde();if(mde){var yde=BigInt.prototype.valueOf,gde=function(e){try{return yde.call(e),!0}catch{}return!1};UT.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:gde(e)}}else UT.exports=function(e){return!1};var vde=UT.exports,bde=Cz,xde=tde,_de=ade,wde=hde,Sde=vde,Ede=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(bde(e))return"String";if(xde(e))return"Number";if(_de(e))return"Boolean";if(wde(e))return"Symbol";if(Sde(e))return"BigInt"},tx=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,wM=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,rx;tx||(rx=function(e){return!1});var VT=tx?tx.prototype.has:null,LE=wM?wM.prototype.has:null;!rx&&!VT&&(rx=function(e){return!1});var Ade=rx||function(e){if(!e||typeof e!="object")return!1;try{if(VT.call(e,VT),LE)try{LE.call(e,LE)}catch{return!0}return e instanceof tx}catch{}return!1},WT={exports:{}},Cde=Os,r9=fo,Tde=Cde("%WeakSet%",!0),BE=r9("WeakSet.prototype.has",!0);if(BE){var UE=r9("WeakMap.prototype.has",!0);WT.exports=function(e){if(!e||typeof e!="object")return!1;try{if(BE(e,BE),UE)try{UE(e,UE)}catch{return!0}return e instanceof Tde}catch{}return!1}}else WT.exports=function(e){return!1};var Pde=WT.exports,Ide=Pz,Nde=Nz,kde=Ade,Ode=Pde,Rde=function(e){if(e&&typeof e=="object"){if(Ide(e))return"Map";if(Nde(e))return"Set";if(kde(e))return"WeakMap";if(Ode(e))return"WeakSet"}return!1},n9={exports:{}},jde="Function.prototype.bind called on incompatible ",$de=Object.prototype.toString,Dde=Math.max,Mde="[object Function]",SM=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Fde=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Lde=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Bde=function(e){var r=this;if(typeof r!="function"||$de.apply(r)!==Mde)throw new TypeError(jde+r);for(var n=Fde(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,SM(n,arguments));return Object(u)===u?u:this}return r.apply(e,SM(n,arguments))},s=Dde(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Lde(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Ude=Bde,i9=Function.prototype.bind||Ude,Ue,Zf=SyntaxError,o9=Function,sf=TypeError,VE=function(t){try{return o9('"use strict"; return ('+t+").constructor;")()}catch{}},uc=Object.getOwnPropertyDescriptor;if(uc)try{uc({},"")}catch{uc=null}var WE=function(){throw new sf},Vde=uc?function(){try{return arguments.callee,WE}catch{try{return uc(arguments,"callee").get}catch{return WE}}}():WE,tu=rl(),Wde=Fw(),wr=Object.getPrototypeOf||(Wde?function(t){return t.__proto__}:null),pu={},zde=typeof Uint8Array>"u"||!wr?Ue:wr(Uint8Array),fc={"%AggregateError%":typeof AggregateError>"u"?Ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ue:ArrayBuffer,"%ArrayIteratorPrototype%":tu&&wr?wr([][Symbol.iterator]()):Ue,"%AsyncFromSyncIteratorPrototype%":Ue,"%AsyncFunction%":pu,"%AsyncGenerator%":pu,"%AsyncGeneratorFunction%":pu,"%AsyncIteratorPrototype%":pu,"%Atomics%":typeof Atomics>"u"?Ue:Atomics,"%BigInt%":typeof BigInt>"u"?Ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ue:FinalizationRegistry,"%Function%":o9,"%GeneratorFunction%":pu,"%Int8Array%":typeof Int8Array>"u"?Ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tu&&wr?wr(wr([][Symbol.iterator]())):Ue,"%JSON%":typeof JSON=="object"?JSON:Ue,"%Map%":typeof Map>"u"?Ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!tu||!wr?Ue:wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ue:Promise,"%Proxy%":typeof Proxy>"u"?Ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!tu||!wr?Ue:wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":tu&&wr?wr(""[Symbol.iterator]()):Ue,"%Symbol%":tu?Symbol:Ue,"%SyntaxError%":Zf,"%ThrowTypeError%":Vde,"%TypedArray%":zde,"%TypeError%":sf,"%Uint8Array%":typeof Uint8Array>"u"?Ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ue:WeakSet};if(wr)try{null.error}catch(t){var Gde=wr(wr(t));fc["%Error.prototype%"]=Gde}var qde=function t(e){var r;if(e==="%AsyncFunction%")r=VE("async function () {}");else if(e==="%GeneratorFunction%")r=VE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=VE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&wr&&(r=wr(i.prototype))}return fc[e]=r,r},EM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},mg=i9,nx=Lw,Hde=mg.call(Function.call,Array.prototype.concat),Kde=mg.call(Function.apply,Array.prototype.splice),AM=mg.call(Function.call,String.prototype.replace),ix=mg.call(Function.call,String.prototype.slice),Yde=mg.call(Function.call,RegExp.prototype.exec),Qde=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Xde=/\\(\\)?/g,Jde=function(e){var r=ix(e,0,1),n=ix(e,-1);if(r==="%"&&n!=="%")throw new Zf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Zf("invalid intrinsic syntax, expected opening `%`");var i=[];return AM(e,Qde,function(o,s,a,l){i[i.length]=a?AM(l,Xde,"$1"):s||o}),i},Zde=function(e,r){var n=e,i;if(nx(EM,n)&&(i=EM[n],n="%"+i[0]+"%"),nx(fc,n)){var o=fc[n];if(o===pu&&(o=qde(n)),typeof o>"u"&&!r)throw new sf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Zf("intrinsic "+e+" does not exist!")},s9=function(e,r){if(typeof e!="string"||e.length===0)throw new sf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new sf('"allowMissing" argument must be a boolean');if(Yde(/^%?[^%]*%?$/,e)===null)throw new Zf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Jde(e),i=n.length>0?n[0]:"",o=Zde("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Kde(n,Hde([0,1],c)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=ix(h,0,1),m=ix(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Zf("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,s="%"+i+"%",nx(fc,s))a=fc[s];else if(a!=null){if(!(h in a)){if(!r)throw new sf("base intrinsic for "+e+" exists, but the property is not available.");return}if(uc&&u+1>=n.length){var y=uc(a,h);f=!!y,f&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else f=nx(a,h),a=a[h];f&&!l&&(fc[s]=a)}}return a};(function(t){var e=i9,r=s9,n=az,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(n9);var a9=n9.exports,l9=s9,c9=a9,ehe=c9(l9("String.prototype.indexOf")),the=function(e,r){var n=l9(e,!!r);return typeof n=="function"&&ehe(e,".prototype.")>-1?c9(n):n},ox=zz,rhe=Gz,CM=a9,uO=the,I0=Uw,nhe=uO("Object.prototype.toString"),u9=nl(),TM=typeof globalThis>"u"?kl:globalThis,zT=rhe(),fO=uO("String.prototype.slice"),zE=Object.getPrototypeOf,ihe=uO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},sx={__proto__:null};u9&&I0&&zE?ox(zT,function(t){var e=new TM[t];if(Symbol.toStringTag in e){var r=zE(e),n=I0(r,Symbol.toStringTag);if(!n){var i=zE(r);n=I0(i,Symbol.toStringTag)}sx["$"+t]=CM(n.get)}}):ox(zT,function(t){var e=new TM[t],r=e.slice||e.set;r&&(sx["$"+t]=CM(r))});var ohe=function(e){var r=!1;return ox(sx,function(n,i){if(!r)try{"$"+n(e)===i&&(r=fO(i,1))}catch{}}),r},she=function(e){var r=!1;return ox(sx,function(n,i){if(!r)try{n(e),r=fO(i,1)}catch{}}),r},ahe=function(e){if(!e||typeof e!="object")return!1;if(!u9){var r=fO(nhe(e),8,-1);return ihe(zT,r)>-1?r:r!=="Object"?!1:she(e)}return I0?ohe(e):null},GE,PM;function lhe(){if(PM)return GE;PM=1;var t=ug,e=fo,r=Os,n=Qz,i=r("ArrayBuffer",!0),o=r("Float32Array",!0),s=e("ArrayBuffer.prototype.byteLength",!0),a=i&&!s&&new i().slice,l=a&&t(a);return GE=s||l?function(u){if(!u||typeof u!="object")return!1;try{return s?s(u):l(u,0),!0}catch{return!1}}:o?function(u){try{return new o(u).buffer===u&&!n(u)}catch{return!1}}:function(u){return!1},GE}var che=fo,IM=che("ArrayBuffer.prototype.byteLength",!0),uhe=lhe(),fhe=function(e){return uhe(e)?IM?IM(e):e.byteLength:NaN},f9=hae,Xo=zle,NM=xce,dhe=Bw,ed=Mue,hhe=Ez,kM=que,OM=gz,RM=Az,jM=Mfe,$M=Wfe,DM=Hfe,MM=Yfe,FM=$w,LM=Ede,BM=Rde,UM=ahe,VM=fhe,WM=Xo("SharedArrayBuffer.prototype.byteLength",!0),zM=Xo("Date.prototype.getTime"),qE=Object.getPrototypeOf,GM=Xo("Object.prototype.toString"),ax=dhe("%Set%",!0),GT=Xo("Map.prototype.has",!0),lx=Xo("Map.prototype.get",!0),qM=Xo("Map.prototype.size",!0),cx=Xo("Set.prototype.add",!0),d9=Xo("Set.prototype.delete",!0),ux=Xo("Set.prototype.has",!0),N0=Xo("Set.prototype.size",!0);function HM(t,e,r,n){for(var i=ed(t),o;(o=i.next())&&!o.done;)if(ao(e,o.value,r,n))return d9(t,o.value),!0;return!1}function h9(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function phe(t,e,r,n,i,o){var s=h9(r);if(s!=null)return s;var a=lx(e,s),l=f9({},i,{strict:!1});return typeof a>"u"&&!GT(e,s)||!ao(n,a,l,o)?!1:!GT(t,s)&&ao(n,a,l,o)}function mhe(t,e,r){var n=h9(r);return n??(ux(e,n)&&!ux(t,n))}function KM(t,e,r,n,i,o){for(var s=ed(t),a,l;(a=s.next())&&!a.done;)if(l=a.value,ao(r,l,i,o)&&ao(n,lx(e,l),i,o))return d9(t,l),!0;return!1}function ao(t,e,r,n){var i=r||{};if(i.strict?kM(t,e):t===e)return!0;var o=LM(t),s=LM(e);if(o!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?kM(t,e):t==e;var a=n.has(t),l=n.has(e),c;if(a&&l){if(n.get(t)===n.get(e))return!0}else c={};return a||n.set(t,c),l||n.set(e,c),vhe(t,e,i,n)}function YM(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function yhe(t,e,r,n){if(N0(t)!==N0(e))return!1;for(var i=ed(t),o=ed(e),s,a,l;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new ax),cx(l,s.value);else if(!ux(e,s.value)){if(r.strict||!mhe(t,e,s.value))return!1;l||(l=new ax),cx(l,s.value)}if(l){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!HM(l,a.value,r.strict,n))return!1}else if(!r.strict&&!ux(t,a.value)&&!HM(l,a.value,r.strict,n))return!1;return N0(l)===0}return!0}function ghe(t,e,r,n){if(qM(t)!==qM(e))return!1;for(var i=ed(t),o=ed(e),s,a,l,c,u,f;(s=i.next())&&!s.done;)if(c=s.value[0],u=s.value[1],c&&typeof c=="object")l||(l=new ax),cx(l,c);else if(f=lx(e,c),typeof f>"u"&&!GT(e,c)||!ao(u,f,r,n)){if(r.strict||!phe(t,e,c,u,r,n))return!1;l||(l=new ax),cx(l,c)}if(l){for(;(a=o.next())&&!a.done;)if(c=a.value[0],f=a.value[1],c&&typeof c=="object"){if(!KM(l,t,c,f,r,n))return!1}else if(!r.strict&&(!t.has(c)||!ao(lx(t,c),f,r,n))&&!KM(l,t,c,f,f9({},r,{strict:!1}),n))return!1;return N0(l)===0}return!0}function vhe(t,e,r,n){var i,o;if(typeof t!=typeof e||t==null||e==null||GM(t)!==GM(e)||OM(t)!==OM(e))return!1;var s=RM(t),a=RM(e);if(s!==a)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var u=DM(t),f=DM(e);if(u!==f||(u||f)&&(t.source!==e.source||NM(t)!==NM(e)))return!1;var h=$M(t),p=$M(e);if(h!==p||(h||p)&&zM(t)!==zM(e)||r.strict&&qE&&qE(t)!==qE(e))return!1;var m=UM(t),y=UM(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var g=YM(t),b=YM(e);if(g!==b)return!1;if(g||b){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=jM(t),x=jM(e);if(v!==x)return!1;if(v||x)return VM(t)!==VM(e)?!1:typeof Uint8Array=="function"&&ao(new Uint8Array(t),new Uint8Array(e),r,n);var S=MM(t),_=MM(e);if(S!==_)return!1;if(S||_)return WM(t)!==WM(e)?!1:typeof Uint8Array=="function"&&ao(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var w=FM(t),A=FM(e);if(w.length!==A.length)return!1;for(w.sort(),A.sort(),i=w.length-1;i>=0;i--)if(w[i]!=A[i])return!1;for(i=w.length-1;i>=0;i--)if(o=w[i],!ao(t[o],e[o],r,n))return!1;var C=BM(t),I=BM(e);return C!==I?!1:C==="Set"||I==="Set"?yhe(t,e,r,n):C==="Map"?ghe(t,e,r,n):!0}var bhe=function(e,r,n){return ao(e,r,n,hhe())};const xhe=ot(bhe),_he=(t,e)=>xhe(t,e);var whe="firebase",She="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo(whe,She,"app");const Ehe={apiKey:"AIzaSyCa4jaiAOgH5H8B6hSo4DU49WnkpGPeavA",authDomain:"hkmjbs-streaming.firebaseapp.com",databaseURL:"https://hkmjbs-streaming-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hkmjbs-streaming",storageBucket:"hkmjbs-streaming.appspot.com",messagingSenderId:"537815456325",appId:"1:537815456325:web:c387796326f9db2726a12c"},dO=bW(Ehe),Ih=wse(dO),p9={database:Ih,get:t=>{const e=ep(Ih,t);return B8(e).then(r=>{if(r.exists())return r.val()}).catch(r=>{throw console.error(r),r})},set:(t,e)=>{const r=ep(Ih,t);return Kk(r,e).catch(n=>{throw console.error(n),n})},update:(t,e)=>{const r=ep(Ih,t);return L8(r,e).catch(n=>{throw console.error(n),n})},push:(t,e)=>{const r=ep(Ih,t);return F8(r,e).catch(n=>{throw console.error(n),n})}},hO=E.createContext(p9);function Ahe({children:t}){return d.jsx(hO.Provider,{value:p9,children:t})}const m9=()=>E.useContext(hO),Zr=(t,e)=>{const{database:r}=E.useContext(hO),n=E.useMemo(()=>ep(r,t),[r,t]),[i,o]=E.useState(),[s,a]=E.useState(e),l=E.useCallback(h=>Kk(n,h),[n]),c=E.useCallback(h=>L8(n,h),[n]),u=E.useCallback(h=>F8(n,h),[n]);return E.useEffect(()=>{_he(e,s)||a(e)},[s,e]),E.useEffect(()=>{const h=[];s!=null&&s.order&&s.order.byChild&&h.push(fse(s.order.byChild)),s!=null&&s.filter&&(typeof s.filter.equalTo<"u"&&h.push(hse(s.filter.equalTo)),typeof s.filter.limitToLast<"u"&&h.push(cse(s.filter.limitToLast)));const p=h.length>0?pse(n,...h):n;s!=null&&s.onlyOnce?B8(p).then(m=>{m.exists()&&o(m.val())}):ose(p,m=>{o(m.val())},s??{})},[s,n]),{data:E.useMemo(()=>i,[i]),set:l,update:c,push:u}};var yg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},td=typeof window>"u"||"Deno"in window;function gi(){}function Che(t,e){return typeof t=="function"?t(e):t}function qT(t){return typeof t=="number"&&t>=0&&t!==1/0}function y9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function QM(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(n){if(e.queryHash!==pO(s,e.options))return!1}else if(!Am(e.queryKey,s))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||o&&!o(e))}function XM(t,e){const{exact:r,status:n,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Em(e.options.mutationKey)!==Em(o))return!1}else if(!Am(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function pO(t,e){return((e==null?void 0:e.queryKeyHashFn)||Em)(t)}function Em(t){return JSON.stringify(t,(e,r)=>KT(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Am(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Am(t[r],e[r])):!1}function g9(t,e){if(t===e)return t;const r=JM(t)&&JM(e);if(r||KT(t)&&KT(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),o=i.length,s=r?[]:{};let a=0;for(let l=0;l<o;l++){const c=r?l:i[l];s[c]=g9(t[c],e[c]),s[c]===t[c]&&a++}return n===o&&a===n?t:s}return e}function HT(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function JM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function KT(t){if(!ZM(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!ZM(r)||!r.hasOwnProperty("isPrototypeOf"))}function ZM(t){return Object.prototype.toString.call(t)==="[object Object]"}function v9(t){return new Promise(e=>{setTimeout(e,t)})}function eF(t){v9(0).then(t)}function YT(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?g9(t,e):e}function The(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Phe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Wl,ra,yf,$V,Ihe=($V=class extends yg{constructor(){super();de(this,Wl,void 0);de(this,ra,void 0);de(this,yf,void 0);oe(this,yf,e=>{if(!td&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){D(this,ra)||this.setEventListener(D(this,yf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,ra))==null||e.call(this),oe(this,ra,void 0))}setEventListener(e){var r;oe(this,yf,e),(r=D(this,ra))==null||r.call(this),oe(this,ra,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,Wl)!==e&&(oe(this,Wl,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof D(this,Wl)=="boolean"?D(this,Wl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wl=new WeakMap,ra=new WeakMap,yf=new WeakMap,$V),fx=new Ihe,gf,na,vf,DV,Nhe=(DV=class extends yg{constructor(){super();de(this,gf,!0);de(this,na,void 0);de(this,vf,void 0);oe(this,vf,e=>{if(!td&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,na)||this.setEventListener(D(this,vf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,na))==null||e.call(this),oe(this,na,void 0))}setEventListener(e){var r;oe(this,vf,e),(r=D(this,na))==null||r.call(this),oe(this,na,e(this.setOnline.bind(this)))}setOnline(e){D(this,gf)!==e&&(oe(this,gf,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,gf)}},gf=new WeakMap,na=new WeakMap,vf=new WeakMap,DV),dx=new Nhe;function khe(t){return Math.min(1e3*2**t,3e4)}function Ww(t){return(t??"online")==="online"?dx.isOnline():!0}var b9=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function HE(t){return t instanceof b9}function x9(t){let e=!1,r=0,n=!1,i,o,s;const a=new Promise((g,b)=>{o=g,s=b}),l=g=>{var b;n||(p(new b9(g)),(b=t.abort)==null||b.call(t))},c=()=>{e=!0},u=()=>{e=!1},f=()=>!fx.isFocused()||t.networkMode!=="always"&&!dx.isOnline(),h=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),i==null||i(),o(g))},p=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),i==null||i(),s(g))},m=()=>new Promise(g=>{var b;i=v=>{const x=n||!f();return x&&g(v),x},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),y=()=>{if(n)return;let g;try{g=t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var w;if(n)return;const v=t.retry??(td?0:3),x=t.retryDelay??khe,S=typeof x=="function"?x(r,b):x,_=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(e||!_){p(b);return}r++,(w=t.onFail)==null||w.call(t,r,b),v9(S).then(()=>{if(f())return m()}).then(()=>{e?p(b):y()})})};return Ww(t.networkMode)?y():m().then(y),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:u}}function Ohe(){let t=[],e=0,r=u=>{u()},n=u=>{u()};const i=u=>{let f;e++;try{f=u()}finally{e--,e||a()}return f},o=u=>{e?t.push(u):eF(()=>{r(u)})},s=u=>(...f)=>{o(()=>{u(...f)})},a=()=>{const u=t;t=[],u.length&&eF(()=>{n(()=>{u.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:s,schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u}}}var Vr=Ohe(),zl,MV,_9=(MV=class{constructor(){de(this,zl,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qT(this.gcTime)&&oe(this,zl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(td?1/0:5*60*1e3))}clearGcTimeout(){D(this,zl)&&(clearTimeout(D(this,zl)),oe(this,zl,void 0))}},zl=new WeakMap,MV),bf,xf,pi,ia,mi,gr,$y,Gl,_f,k0,Gi,rs,FV,Rhe=(FV=class extends _9{constructor(r){super();de(this,_f);de(this,Gi);de(this,bf,void 0);de(this,xf,void 0);de(this,pi,void 0);de(this,ia,void 0);de(this,mi,void 0);de(this,gr,void 0);de(this,$y,void 0);de(this,Gl,void 0);oe(this,Gl,!1),oe(this,$y,r.defaultOptions),Oe(this,_f,k0).call(this,r.options),oe(this,gr,[]),oe(this,pi,r.cache),this.queryKey=r.queryKey,this.queryHash=r.queryHash,oe(this,bf,r.state||jhe(this.options)),this.state=D(this,bf),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!D(this,gr).length&&this.state.fetchStatus==="idle"&&D(this,pi).remove(this)}setData(r,n){const i=YT(this.state.data,r,this.options);return Oe(this,Gi,rs).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(r,n){Oe(this,Gi,rs).call(this,{type:"setState",state:r,setStateOptions:n})}cancel(r){var i;const n=D(this,ia);return(i=D(this,mi))==null||i.cancel(r),n?n.then(gi).catch(gi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,bf))}isActive(){return D(this,gr).some(r=>r.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||D(this,gr).some(r=>r.getCurrentResult().isStale)}isStaleByTime(r=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!y9(this.state.dataUpdatedAt,r)}onFocus(){var n;const r=D(this,gr).find(i=>i.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,mi))==null||n.continue()}onOnline(){var n;const r=D(this,gr).find(i=>i.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,mi))==null||n.continue()}addObserver(r){D(this,gr).includes(r)||(D(this,gr).push(r),this.clearGcTimeout(),D(this,pi).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){D(this,gr).includes(r)&&(oe(this,gr,D(this,gr).filter(n=>n!==r)),D(this,gr).length||(D(this,mi)&&(D(this,Gl)?D(this,mi).cancel({revert:!0}):D(this,mi).cancelRetry()),this.scheduleGc()),D(this,pi).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return D(this,gr).length}invalidate(){this.state.isInvalidated||Oe(this,Gi,rs).call(this,{type:"invalidate"})}fetch(r,n){var u,f,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,ia))return(u=D(this,mi))==null||u.continueRetry(),D(this,ia)}if(r&&Oe(this,_f,k0).call(this,r),!this.options.queryFn){const m=D(this,gr).find(y=>y.options.queryFn);m&&Oe(this,_f,k0).call(this,m.options)}const i=new AbortController,o={queryKey:this.queryKey,meta:this.meta},s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(oe(this,Gl,!0),i.signal)})};s(o);const a=()=>this.options.queryFn?(oe(this,Gl,!1),this.options.persister?this.options.persister(this.options.queryFn,o,this):this.options.queryFn(o)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),(f=this.options.behavior)==null||f.onFetch(l,this),oe(this,xf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Oe(this,Gi,rs).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var y,g,b,v;HE(m)&&m.silent||Oe(this,Gi,rs).call(this,{type:"error",error:m}),HE(m)||((g=(y=D(this,pi).config).onError)==null||g.call(y,m,this),(v=(b=D(this,pi).config).onSettled)==null||v.call(b,this.state.data,m,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return oe(this,mi,x9({fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var y,g,b,v;if(typeof m>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(m),(g=(y=D(this,pi).config).onSuccess)==null||g.call(y,m,this),(v=(b=D(this,pi).config).onSettled)==null||v.call(b,m,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(m,y)=>{Oe(this,Gi,rs).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Oe(this,Gi,rs).call(this,{type:"pause"})},onContinue:()=>{Oe(this,Gi,rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),oe(this,ia,D(this,mi).promise),D(this,ia)}},bf=new WeakMap,xf=new WeakMap,pi=new WeakMap,ia=new WeakMap,mi=new WeakMap,gr=new WeakMap,$y=new WeakMap,Gl=new WeakMap,_f=new WeakSet,k0=function(r){this.options={...D(this,$y),...r},this.updateGcTime(this.options.gcTime)},Gi=new WeakSet,rs=function(r){const n=i=>{switch(r.type){case"failed":return{...i,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:r.meta??null,fetchStatus:Ww(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...i,data:r.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=r.error;return HE(o)&&o.revert&&D(this,xf)?{...D(this,xf),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...r.state}}};this.state=n(this.state),Vr.batch(()=>{D(this,gr).forEach(i=>{i.onQueryUpdate()}),D(this,pi).notify({query:this,type:"updated",action:r})})},FV);function jhe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var vo,LV,$he=(LV=class extends yg{constructor(e={}){super();de(this,vo,void 0);this.config=e,oe(this,vo,new Map)}build(e,r,n){const i=r.queryKey,o=r.queryHash??pO(i,r);let s=this.get(o);return s||(s=new Rhe({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){D(this,vo).has(e.queryHash)||(D(this,vo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=D(this,vo).get(e.queryHash);r&&(e.destroy(),r===e&&D(this,vo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,vo).get(e)}getAll(){return[...D(this,vo).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>QM(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>QM(e,n)):r}notify(e){Vr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vo=new WeakMap,LV),bo,Dy,Gn,wf,xo,Vs,BV,Dhe=(BV=class extends _9{constructor(r){super();de(this,xo);de(this,bo,void 0);de(this,Dy,void 0);de(this,Gn,void 0);de(this,wf,void 0);this.mutationId=r.mutationId,oe(this,Dy,r.defaultOptions),oe(this,Gn,r.mutationCache),oe(this,bo,[]),this.state=r.state||Mhe(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options={...D(this,Dy),...r},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){D(this,bo).includes(r)||(D(this,bo).push(r),this.clearGcTimeout(),D(this,Gn).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){oe(this,bo,D(this,bo).filter(n=>n!==r)),this.scheduleGc(),D(this,Gn).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){D(this,bo).length||(this.state.status==="pending"?this.scheduleGc():D(this,Gn).remove(this))}continue(){var r;return((r=D(this,wf))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var o,s,a,l,c,u,f,h,p,m,y,g,b,v,x,S,_,w,A,C;const n=()=>(oe(this,wf,x9({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(I,T)=>{Oe(this,xo,Vs).call(this,{type:"failed",failureCount:I,error:T})},onPause:()=>{Oe(this,xo,Vs).call(this,{type:"pause"})},onContinue:()=>{Oe(this,xo,Vs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),D(this,wf).promise),i=this.state.status==="pending";try{if(!i){Oe(this,xo,Vs).call(this,{type:"pending",variables:r}),await((s=(o=D(this,Gn).config).onMutate)==null?void 0:s.call(o,r,this));const T=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,r));T!==this.state.context&&Oe(this,xo,Vs).call(this,{type:"pending",context:T,variables:r})}const I=await n();return await((u=(c=D(this,Gn).config).onSuccess)==null?void 0:u.call(c,I,r,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,I,r,this.state.context)),await((m=(p=D(this,Gn).config).onSettled)==null?void 0:m.call(p,I,null,this.state.variables,this.state.context,this)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,I,null,r,this.state.context)),Oe(this,xo,Vs).call(this,{type:"success",data:I}),I}catch(I){try{throw await((v=(b=D(this,Gn).config).onError)==null?void 0:v.call(b,I,r,this.state.context,this)),await((S=(x=this.options).onError)==null?void 0:S.call(x,I,r,this.state.context)),await((w=(_=D(this,Gn).config).onSettled)==null?void 0:w.call(_,void 0,I,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,void 0,I,r,this.state.context)),I}finally{Oe(this,xo,Vs).call(this,{type:"error",error:I})}}}},bo=new WeakMap,Dy=new WeakMap,Gn=new WeakMap,wf=new WeakMap,xo=new WeakSet,Vs=function(r){const n=i=>{switch(r.type){case"failed":return{...i,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Ww(this.options.networkMode),status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...i,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:r.error,failureCount:i.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Vr.batch(()=>{D(this,bo).forEach(i=>{i.onMutationUpdate(r)}),D(this,Gn).notify({mutation:this,type:"updated",action:r})})},BV);function Mhe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yi,My,ql,UV,Fhe=(UV=class extends yg{constructor(e={}){super();de(this,yi,void 0);de(this,My,void 0);de(this,ql,void 0);this.config=e,oe(this,yi,[]),oe(this,My,0)}build(e,r,n){const i=new Dhe({mutationCache:this,mutationId:++tv(this,My)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){D(this,yi).push(e),this.notify({type:"added",mutation:e})}remove(e){oe(this,yi,D(this,yi).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){Vr.batch(()=>{D(this,yi).forEach(e=>{this.remove(e)})})}getAll(){return D(this,yi)}find(e){const r={exact:!0,...e};return D(this,yi).find(n=>XM(r,n))}findAll(e={}){return D(this,yi).filter(r=>XM(e,r))}notify(e){Vr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return oe(this,ql,(D(this,ql)??Promise.resolve()).then(()=>{const e=D(this,yi).filter(r=>r.state.isPaused);return Vr.batch(()=>e.reduce((r,n)=>r.then(()=>n.continue().catch(gi)),Promise.resolve()))}).then(()=>{oe(this,ql,void 0)})),D(this,ql)}},yi=new WeakMap,My=new WeakMap,ql=new WeakMap,UV);function Lhe(t){return{onFetch:(e,r)=>{const n=async()=>{var m,y,g,b,v;const i=e.options,o=(g=(y=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,s=((b=e.state.data)==null?void 0:b.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let c=!1;const u=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},f=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),h=async(x,S,_)=>{if(c)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const w={queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};u(w);const A=await f(w),{maxPages:C}=e.options,I=_?Phe:The;return{pages:I(x.pages,A,C),pageParams:I(x.pageParams,S,C)}};let p;if(o&&s.length){const x=o==="backward",S=x?Bhe:tF,_={pages:s,pageParams:a},w=S(i,_);p=await h(_,w,x)}else{p=await h(l,a[0]??i.initialPageParam);const x=t??s.length;for(let S=1;S<x;S++){const _=tF(i,p);p=await h(p,_)}}return p};e.options.persister?e.fetchFn=()=>{var i,o;return(o=(i=e.options).persister)==null?void 0:o.call(i,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=n}}}function tF(t,{pages:e,pageParams:r}){const n=e.length-1;return t.getNextPageParam(e[n],e,r[n],r)}function Bhe(t,{pages:e,pageParams:r}){var n;return(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r)}var sr,oa,sa,Sf,Ef,aa,Af,Cf,VV,Uhe=(VV=class{constructor(t={}){de(this,sr,void 0);de(this,oa,void 0);de(this,sa,void 0);de(this,Sf,void 0);de(this,Ef,void 0);de(this,aa,void 0);de(this,Af,void 0);de(this,Cf,void 0);oe(this,sr,t.queryCache||new $he),oe(this,oa,t.mutationCache||new Fhe),oe(this,sa,t.defaultOptions||{}),oe(this,Sf,new Map),oe(this,Ef,new Map),oe(this,aa,0)}mount(){tv(this,aa)._++,D(this,aa)===1&&(oe(this,Af,fx.subscribe(()=>{fx.isFocused()&&(this.resumePausedMutations(),D(this,sr).onFocus())})),oe(this,Cf,dx.subscribe(()=>{dx.isOnline()&&(this.resumePausedMutations(),D(this,sr).onOnline())})))}unmount(){var t,e;tv(this,aa)._--,D(this,aa)===0&&((t=D(this,Af))==null||t.call(this),oe(this,Af,void 0),(e=D(this,Cf))==null||e.call(this),oe(this,Cf,void 0))}isFetching(t){return D(this,sr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,oa).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=D(this,sr).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=D(this,sr).find({queryKey:t}),i=n==null?void 0:n.state.data,o=Che(e,i);if(typeof o>"u")return;const s=this.defaultQueryOptions({queryKey:t});return D(this,sr).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Vr.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var e;return(e=D(this,sr).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=D(this,sr);Vr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=D(this,sr),n={type:"active",...t};return Vr.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Vr.batch(()=>D(this,sr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(gi).catch(gi)}invalidateQueries(t={},e={}){return Vr.batch(()=>{if(D(this,sr).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Vr.batch(()=>D(this,sr).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(gi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(gi)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=D(this,sr).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gi).catch(gi)}fetchInfiniteQuery(t){return t.behavior=Lhe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gi).catch(gi)}resumePausedMutations(){return D(this,oa).resumePausedMutations()}getQueryCache(){return D(this,sr)}getMutationCache(){return D(this,oa)}getDefaultOptions(){return D(this,sa)}setDefaultOptions(t){oe(this,sa,t)}setQueryDefaults(t,e){D(this,Sf).set(Em(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Sf).values()];let r={};return e.forEach(n=>{Am(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){D(this,Ef).set(Em(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,Ef).values()];let r={};return e.forEach(n=>{Am(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...D(this,sa).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=pO(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,sa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,sr).clear(),D(this,oa).clear()}},sr=new WeakMap,oa=new WeakMap,sa=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,aa=new WeakMap,Af=new WeakMap,Cf=new WeakMap,VV),kn,xt,Tf,on,Hl,Pf,_o,Fy,If,Nf,Kl,Yl,la,Ql,Xl,tp,Ly,QT,By,XT,Uy,JT,Vy,ZT,Wy,eP,zy,tP,Gy,rP,nw,w9,WV,Vhe=(WV=class extends yg{constructor(e,r){super();de(this,Xl);de(this,Ly);de(this,By);de(this,Uy);de(this,Vy);de(this,Wy);de(this,zy);de(this,Gy);de(this,nw);de(this,kn,void 0);de(this,xt,void 0);de(this,Tf,void 0);de(this,on,void 0);de(this,Hl,void 0);de(this,Pf,void 0);de(this,_o,void 0);de(this,Fy,void 0);de(this,If,void 0);de(this,Nf,void 0);de(this,Kl,void 0);de(this,Yl,void 0);de(this,la,void 0);de(this,Ql,void 0);oe(this,xt,void 0),oe(this,Tf,void 0),oe(this,on,void 0),oe(this,Ql,new Set),oe(this,kn,e),this.options=r,oe(this,_o,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,xt).addObserver(this),rF(D(this,xt),this.options)?Oe(this,Xl,tp).call(this):this.updateResult(),Oe(this,Vy,ZT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nP(D(this,xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nP(D(this,xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,Wy,eP).call(this),Oe(this,zy,tP).call(this),D(this,xt).removeObserver(this)}setOptions(e,r){const n=this.options,i=D(this,xt);if(this.options=D(this,kn).defaultQueryOptions(e),HT(n,this.options)||D(this,kn).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,xt),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),Oe(this,Gy,rP).call(this);const o=this.hasListeners();o&&nF(D(this,xt),i,this.options,n)&&Oe(this,Xl,tp).call(this),this.updateResult(r),o&&(D(this,xt)!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Oe(this,Ly,QT).call(this);const s=Oe(this,By,XT).call(this);o&&(D(this,xt)!==i||this.options.enabled!==n.enabled||s!==D(this,la))&&Oe(this,Uy,JT).call(this,s)}getOptimisticResult(e){const r=D(this,kn).getQueryCache().build(D(this,kn),e),n=this.createResult(r,e);return zhe(this,n)&&(oe(this,on,n),oe(this,Pf,this.options),oe(this,Hl,D(this,xt).state)),n}getCurrentResult(){return D(this,on)}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(D(this,Ql).add(n),e[n])})}),r}getCurrentQuery(){return D(this,xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=D(this,kn).defaultQueryOptions(e),n=D(this,kn).getQueryCache().build(D(this,kn),r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Oe(this,Xl,tp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,on)))}createResult(e,r){var w;const n=D(this,xt),i=this.options,o=D(this,on),s=D(this,Hl),a=D(this,Pf),c=e!==n?e.state:D(this,Tf),{state:u}=e;let{error:f,errorUpdatedAt:h,fetchStatus:p,status:m}=u,y=!1,g;if(r._optimisticResults){const A=this.hasListeners(),C=!A&&rF(e,r),I=A&&nF(e,n,r,i);(C||I)&&(p=Ww(e.options.networkMode)?"fetching":"paused",u.dataUpdatedAt||(m="pending")),r._optimisticResults==="isRestoring"&&(p="idle")}if(r.select&&typeof u.data<"u")if(o&&u.data===(s==null?void 0:s.data)&&r.select===D(this,Fy))g=D(this,If);else try{oe(this,Fy,r.select),g=r.select(u.data),g=YT(o==null?void 0:o.data,g,r),oe(this,If,g),oe(this,_o,null)}catch(A){oe(this,_o,A)}else g=u.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&m==="pending"){let A;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))A=o.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((w=D(this,Nf))==null?void 0:w.state.data,D(this,Nf)):r.placeholderData,r.select&&typeof A<"u")try{A=r.select(A),oe(this,_o,null)}catch(C){oe(this,_o,C)}typeof A<"u"&&(m="success",g=YT(o==null?void 0:o.data,A,r),y=!0)}D(this,_o)&&(f=D(this,_o),g=D(this,If),h=Date.now(),m="error");const b=p==="fetching",v=m==="pending",x=m==="error",S=v&&b;return{status:m,fetchStatus:p,isPending:v,isSuccess:m==="success",isError:x,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:h,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:x&&u.dataUpdatedAt===0,isPaused:p==="paused",isPlaceholderData:y,isRefetchError:x&&u.dataUpdatedAt!==0,isStale:mO(e,r),refetch:this.refetch}}updateResult(e){const r=D(this,on),n=this.createResult(D(this,xt),this.options);if(oe(this,Hl,D(this,xt).state),oe(this,Pf,this.options),D(this,Hl).data!==void 0&&oe(this,Nf,D(this,xt)),HT(n,r))return;oe(this,on,n);const i={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!D(this,Ql).size)return!0;const l=new Set(a??D(this,Ql));return this.options.throwOnError&&l.add("error"),Object.keys(D(this,on)).some(c=>{const u=c;return D(this,on)[u]!==r[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),Oe(this,nw,w9).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,Vy,ZT).call(this)}},kn=new WeakMap,xt=new WeakMap,Tf=new WeakMap,on=new WeakMap,Hl=new WeakMap,Pf=new WeakMap,_o=new WeakMap,Fy=new WeakMap,If=new WeakMap,Nf=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,la=new WeakMap,Ql=new WeakMap,Xl=new WeakSet,tp=function(e){Oe(this,Gy,rP).call(this);let r=D(this,xt).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(gi)),r},Ly=new WeakSet,QT=function(){if(Oe(this,Wy,eP).call(this),td||D(this,on).isStale||!qT(this.options.staleTime))return;const r=y9(D(this,on).dataUpdatedAt,this.options.staleTime)+1;oe(this,Kl,setTimeout(()=>{D(this,on).isStale||this.updateResult()},r))},By=new WeakSet,XT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,xt)):this.options.refetchInterval)??!1},Uy=new WeakSet,JT=function(e){Oe(this,zy,tP).call(this),oe(this,la,e),!(td||this.options.enabled===!1||!qT(D(this,la))||D(this,la)===0)&&oe(this,Yl,setInterval(()=>{(this.options.refetchIntervalInBackground||fx.isFocused())&&Oe(this,Xl,tp).call(this)},D(this,la)))},Vy=new WeakSet,ZT=function(){Oe(this,Ly,QT).call(this),Oe(this,Uy,JT).call(this,Oe(this,By,XT).call(this))},Wy=new WeakSet,eP=function(){D(this,Kl)&&(clearTimeout(D(this,Kl)),oe(this,Kl,void 0))},zy=new WeakSet,tP=function(){D(this,Yl)&&(clearInterval(D(this,Yl)),oe(this,Yl,void 0))},Gy=new WeakSet,rP=function(){const e=D(this,kn).getQueryCache().build(D(this,kn),this.options);if(e===D(this,xt))return;const r=D(this,xt);oe(this,xt,e),oe(this,Tf,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},nw=new WeakSet,w9=function(e){Vr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(D(this,on))}),D(this,kn).getQueryCache().notify({query:D(this,xt),type:"observerResultsUpdated"})})},WV);function Whe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function rF(t,e){return Whe(t,e)||t.state.dataUpdatedAt>0&&nP(t,e,e.refetchOnMount)}function nP(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&mO(t,e)}return!1}function nF(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&mO(t,r)}function mO(t,e){return t.isStaleByTime(e.staleTime)}function zhe(t,e){return!HT(t.getCurrentResult(),e)}var S9=E.createContext(void 0),Ghe=t=>{const e=E.useContext(S9);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qhe=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.createElement(S9.Provider,{value:t},e)),E9=E.createContext(!1),Hhe=()=>E.useContext(E9);E9.Provider;function Khe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Yhe=E.createContext(Khe()),Qhe=()=>E.useContext(Yhe);function Xhe(t,e){return typeof t=="function"?t(...e):!!t}var Jhe=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},Zhe=t=>{E.useEffect(()=>{t.clearReset()},[t])},epe=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&Xhe(r,[t.error,n]),tpe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},rpe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,npe=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function ipe(t,e,r){const n=Ghe(r),i=Hhe(),o=Qhe(),s=n.defaultQueryOptions(t);s._optimisticResults=i?"isRestoring":"optimistic",tpe(s),Jhe(s,o),Zhe(o);const[a]=E.useState(()=>new e(n,s)),l=a.getOptimisticResult(s);if(E.useSyncExternalStore(E.useCallback(c=>{const u=i?()=>{}:a.subscribe(Vr.batchCalls(c));return a.updateResult(),u},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),E.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),rpe(s,l))throw a.setOptions(s,{listeners:!1}),npe(s,a,o);if(epe({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:a.getCurrentQuery()}))throw l.error;return s.notifyOnChangeProps?l:a.trackResult(l)}function qa(t,e){return ipe(t,Vhe,e)}function A9(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=A9(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ope(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=A9(t))&&(n&&(n+=" "),n+=e);return n}const iF=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,oF=ope,C9=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return oF(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(c=>{const u=r==null?void 0:r[c],f=o==null?void 0:o[c];if(u===null)return null;const h=iF(u)||iF(f);return i[c][h]}),a=r&&Object.entries(r).reduce((c,u)=>{let[f,h]=u;return h===void 0||(c[f]=h),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(m=>{let[y,g]=m;return Array.isArray(g)?g.includes({...o,...a}[y]):{...o,...a}[y]===g})?[...c,f,h]:c},[]);return oF(t,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},spe=C9(["font-semibold"],{variants:{variant:{contained:["border","rounded"],text:[],icon:["hover:enabled:bg-opacity-50 leading-4"]},color:{primary:[],secondary:[],success:[],danger:[],inverted:[]},size:{small:["text-sm"],medium:["text-base"],large:["text-md"],xlarge:["text-2xl"]},disabled:{true:["cursor-not-allowed opacity-30"]},loading:{true:["cursor-wait opacity-30"]}},compoundVariants:[{variant:"contained",size:"small",className:"py-1 px-2"},{variant:"contained",size:"medium",className:"py-2 px-4"},{variant:"contained",size:"large",className:"py-2 px-4"},{variant:"contained",size:"xlarge",className:"py-4 px-4"},{color:"primary",variant:"contained",className:"bg-teal-800 text-white border-transparent hover:enabled:bg-teal-700"},{color:"secondary",variant:"contained",className:"bg-white text-gray-800 border-gray-400 hover:enabled:bg-gray-100"},{color:"success",variant:"contained",className:"bg-green-100 text-green-500 border-green-400 hover:enabled:bg-green-200"},{color:"danger",variant:"contained",className:"bg-red-100 text-red-500 border-red-400 hover:enabled:bg-red-200"},{color:"primary",variant:"text",className:"text-teal-800 hover:enabled:text-teal-700"},{color:"secondary",variant:"text",className:"text-gray-800 hover:enabled:text-gray-700"},{color:"success",variant:"text",className:"text-green-800 hover:enabled:text-green-700"},{color:"danger",variant:"text",className:"text-red-800 hover:enabled:text-red-700"},{color:"inverted",variant:"text",className:"text-gray-100 hover:enabled:text-gray-0"},{color:"primary",variant:"icon",className:"text-teal-800 hover:enabled:text-teal-700 hover:enabled:bg-teal-100"},{color:"secondary",variant:"icon",className:"text-gray-800 hover:enabled:text-gray-700 hover:enabled:bg-gray-100"},{color:"success",variant:"icon",className:"text-green-800 hover:enabled:text-green-700 hover:enabled:bg-green-100"},{color:"danger",variant:"icon",className:"text-red-800 hover:enabled:text-red-700 hover:enabled:bg-red-100"},{color:"primary",size:"medium",className:"uppercase"}],defaultVariants:{color:"primary",size:"medium",variant:"contained"}});function Re({color:t,size:e,variant:r,className:n,type:i="button",loading:o,...s}){const a=E.useMemo(()=>spe({color:t,size:e,variant:r,disabled:s.disabled,loading:o,className:n}),[t,e,r,s.disabled,o,n]);return d.jsx("button",{type:i,className:a,disabled:s.disabled||o,...s})}const ape=typeof navigator>"u"?!1:navigator.product==="ReactNative",T9={timeout:ape?6e4:12e4},lpe=function(e){const r={...T9,...typeof e=="string"?{url:e}:e},{searchParams:n}=new URL(r.url,"http://localhost");if(r.timeout=P9(r.timeout),r.query){for(const[s,a]of Object.entries(r.query))if(a!==void 0)if(Array.isArray(a))for(const l of a)n.append(s,l);else n.append(s,a)}const[i]=r.url.split("?"),o=n.toString();return o&&(r.url="".concat(i,"?").concat(o)),r.method=r.body&&!r.method?"POST":(r.method||"GET").toUpperCase(),r};function P9(t){if(t===!1||t===0)return!1;if(t.connect||t.socket)return t;const e=Number(t);return isNaN(e)?P9(T9.timeout):{connect:e,socket:e}}const cpe=/^https?:\/\//i,upe=function(e){if(!cpe.test(e.url))throw new Error('"'.concat(e.url,'" is not a valid URL'))};var KE=function(t){return t.replace(/^\s+|\s+$/g,"")},fpe=function(t){return Object.prototype.toString.call(t)==="[object Array]"},dpe=function(t){if(!t)return{};for(var e={},r=KE(t).split(`
`),n=0;n<r.length;n++){var i=r[n],o=i.indexOf(":"),s=KE(i.slice(0,o)).toLowerCase(),a=KE(i.slice(o+1));typeof e[s]>"u"?e[s]=a:fpe(e[s])?e[s].push(a):e[s]=[e[s],a]}return e};const hpe=ot(dpe),ppe=t=>function(r,n){const i=r==="onError";let o=n;for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];for(let c=0;c<t[r].length;c++){const u=t[r][c];if(o=u(o,...a),i&&!o)break}return o};function mpe(){const t=Object.create(null);let e=0;function r(i){const o=e++;return t[o]=i,function(){delete t[o]}}function n(i){for(const o in t)t[o](i)}return{publish:n,subscribe:r}}const ype=["request","response","progress","error","abort"],sF=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function I9(t,e){const r=[],n=sF.reduce((o,s)=>(o[s]=o[s]||[],o),{processOptions:[lpe],validateOptions:[upe]});function i(o){const s=(m,y,g)=>{let b=m,v=y;if(!b)try{v=l("onResponse",y,g)}catch(x){v=null,b=x}b=b&&l("onError",b,g),b?a.error.publish(b):v&&a.response.publish(v)},a=ype.reduce((m,y)=>(m[y]=mpe(),m),{}),l=ppe(n),c=l("processOptions",o);l("validateOptions",c);const u={options:c,channels:a,applyMiddleware:l};let f;const h=a.request.subscribe(m=>{f=e(m,(y,g)=>s(y,g,m))});a.abort.subscribe(()=>{h(),f&&f.abort()});const p=l("onReturn",a,u);return p===a&&a.request.publish(u),p}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return sF.forEach(a=>{s[a]&&n[a].push(s[a])}),r.push(s),i},i.clone=()=>I9(r,e),t.forEach(i.use),i}var N9=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ci=(t,e,r)=>(N9(t,e,"read from private field"),r?r.call(t):e.get(t)),dl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Fs=(t,e,r,n)=>(N9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),O0,R0,mu,j0,Ws,$0,D0;class k9{constructor(){this.readyState=0,this.responseType="",dl(this,O0,void 0),dl(this,R0,void 0),dl(this,mu,void 0),dl(this,j0,{}),dl(this,Ws,void 0),dl(this,$0,{}),dl(this,D0,void 0)}open(e,r,n){Fs(this,O0,e),Fs(this,R0,r),Fs(this,mu,""),this.readyState=1,this.onreadystatechange(),Fs(this,Ws,void 0)}abort(){ci(this,Ws)&&ci(this,Ws).abort()}getAllResponseHeaders(){return ci(this,mu)}setRequestHeader(e,r){ci(this,j0)[e]=r}setInit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Fs(this,$0,e),Fs(this,D0,r)}send(e){const r=this.responseType!=="arraybuffer",n={...ci(this,$0),method:ci(this,O0),headers:ci(this,j0),body:e};typeof AbortController=="function"&&ci(this,D0)&&(Fs(this,Ws,new AbortController),typeof EventTarget<"u"&&ci(this,Ws).signal instanceof EventTarget&&(n.signal=ci(this,Ws).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(ci(this,R0),n).then(i=>(i.headers.forEach((o,s)=>{Fs(this,mu,ci(this,mu)+"".concat(s,": ").concat(o,`\r
`))}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,r?i.text():i.arrayBuffer())).then(i=>{typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,this.onreadystatechange()}).catch(i=>{var o;if(i.name==="AbortError"){this.onabort();return}(o=this.onerror)==null||o.call(this,i)})}}O0=new WeakMap;R0=new WeakMap;mu=new WeakMap;j0=new WeakMap;Ws=new WeakMap;$0=new WeakMap;D0=new WeakMap;const iP=typeof XMLHttpRequest=="function"?"xhr":"fetch",gpe=iP==="xhr"?XMLHttpRequest:k9,vpe=(t,e)=>{var r;const n=t.options,i=t.applyMiddleware("finalizeOptions",n),o={},s=t.applyMiddleware("interceptRequest",void 0,{adapter:iP,context:t});if(s){const S=setTimeout(e,0,null,s);return{abort:()=>clearTimeout(S)}}let a=new gpe;a instanceof k9&&typeof i.fetch=="object"&&a.setInit(i.fetch,(r=i.useAbortSignal)!=null?r:!0);const l=i.headers,c=i.timeout;let u=!1,f=!1,h=!1;if(a.onerror=S=>{b(new Error("Request error while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.ontimeout=S=>{b(new Error("Request timeout while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.onabort=()=>{g(!0),u=!0},a.onreadystatechange=()=>{y(),!(u||a.readyState!==4)&&a.status!==0&&x()},a.open(i.method,i.url,!0),a.withCredentials=!!i.withCredentials,l&&a.setRequestHeader)for(const S in l)l.hasOwnProperty(S)&&a.setRequestHeader(S,l[S]);return i.rawBody&&(a.responseType="arraybuffer"),t.applyMiddleware("onRequest",{options:i,adapter:iP,request:a,context:t}),a.send(i.body||null),c&&(o.connect=setTimeout(()=>m("ETIMEDOUT"),c.connect)),{abort:p};function p(){u=!0,a&&a.abort()}function m(S){h=!0,a.abort();const _=new Error(S==="ESOCKETTIMEDOUT"?"Socket timed out on request to ".concat(i.url):"Connection timed out on request to ".concat(i.url));_.code=S,t.channels.error.publish(_)}function y(){c&&(g(),o.socket=setTimeout(()=>m("ESOCKETTIMEDOUT"),c.socket))}function g(S){(S||u||a.readyState>=2&&o.connect)&&clearTimeout(o.connect),o.socket&&clearTimeout(o.socket)}function b(S){if(f)return;g(!0),f=!0,a=null;const _=S||new Error("Network error while attempting to reach ".concat(i.url));_.isNetworkError=!0,_.request=i,e(_)}function v(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:i.url,method:i.method,headers:hpe(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function x(){if(!(u||f||h)){if(a.status===0){b(new Error("Unknown XHR error"));return}g(),f=!0,e(null,v())}}},bpe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vpe;return I9(t,e)};var aF={exports:{}},YE,lF;function xpe(){if(lF)return YE;lF=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,o=n*365.25;YE=function(u,f){f=f||{};var h=typeof u;if(h==="string"&&u.length>0)return s(u);if(h==="number"&&isFinite(u))return f.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var h=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var f=Math.abs(u);return f>=n?Math.round(u/n)+"d":f>=r?Math.round(u/r)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=n?c(u,f,n,"day"):f>=r?c(u,f,r,"hour"):f>=e?c(u,f,e,"minute"):f>=t?c(u,f,t,"second"):u+" ms"}function c(u,f,h,p){var m=f>=h*1.5;return Math.round(u/h)+" "+p+(m?"s":"")}return YE}function _pe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=xpe(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,h=null,p,m;function y(...g){if(!y.enabled)return;const b=y,v=Number(new Date),x=v-(f||v);b.diff=x,b.prev=f,b.curr=v,f=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let S=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,A)=>{if(w==="%%")return"%";S++;const C=r.formatters[A];if(typeof C=="function"){const I=g[S];w=C.call(b,I),g.splice(S,1),S--}return w}),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(u)),m),set:g=>{h=g}}),typeof r.init=="function"&&r.init(y),y}function n(u,f){const h=r(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f;const h=(typeof u=="string"?u:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){const u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(u))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var wpe=_pe;(function(t,e){e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=s(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,f=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(f=u))}),l.splice(f,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function s(){try{return localStorage}catch{}}t.exports=wpe(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(aF,aF.exports);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function cF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Spe(t){var e,r;return cF(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(cF(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}const Epe=typeof Buffer>"u"?()=>!1:t=>Buffer.isBuffer(t),Ape=["boolean","string","number"];function Cpe(){return{processOptions:t=>{const e=t.body;return!e||!(!(typeof e.pipe=="function")&&!Epe(e)&&(Ape.indexOf(typeof e)!==-1||Array.isArray(e)||Spe(e)))?t:Object.assign({},t,{body:JSON.stringify(t.body),headers:Object.assign({},t.headers,{"Content-Type":"application/json"})})}}}function Tpe(t){return{onResponse:r=>{const n=r.headers["content-type"]||"",i=t&&t.force||n.indexOf("application/json")!==-1;return!r.body||!n||!i?r:Object.assign({},r,{body:e(r.body)})},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function e(r){try{return JSON.parse(r)}catch(n){throw n.message="Failed to parsed response body as JSON: ".concat(n.message),n}}}let rp={};typeof globalThis<"u"?rp=globalThis:typeof window<"u"?rp=window:typeof global<"u"?rp=global:typeof self<"u"&&(rp=self);var Ppe=rp;function Ipe(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).implementation||Ppe.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new e(i=>(r.error.subscribe(o=>i.error(o)),r.progress.subscribe(o=>i.next(Object.assign({type:"progress"},o))),r.response.subscribe(o=>{i.next(Object.assign({type:"response"},o)),i.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function Npe(){return{onRequest:t=>{if(t.adapter!=="xhr")return;const e=t.request,r=t.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"));function n(i){return o=>{const s=o.lengthComputable?o.loaded/o.total*100:-1;r.channels.progress.publish({stage:i,percent:s,total:o.total,loaded:o.loaded,lengthComputable:o.lengthComputable})}}}}}class kpe{constructor(e){this.__CANCEL__=!0,this.message=e}toString(){return"Cancel".concat(this.message?": ".concat(this.message):"")}}const uF=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r=null;this.promise=new Promise(n=>{r=n}),e(n=>{this.reason||(this.reason=new kpe(n),r(this.reason))})}};uF.source=()=>{let t;return{token:new uF(r=>{t=r}),cancel:t}};var O9=(t,e,r)=>r.method!=="GET"&&r.method!=="HEAD"?!1:t.isNetworkError||!1;const Ope=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";var Rpe=t=>{const e=t.maxRetries||5,r=t.retryDelay||jpe,n=t.shouldRetry;return{onError:(i,o)=>{const s=o.options,a=s.maxRetries||e,l=s.shouldRetry||n,c=s.attemptNumber||0;if(Ope(s.body)||!l(i,c,s)||c>=a)return i;const u=Object.assign({},o,{options:Object.assign({},s,{attemptNumber:c+1})});return setTimeout(()=>o.channels.request.publish(u),r(c)),null}}};function jpe(t){return 100*Math.pow(2,t)+Math.random()*100}const yO=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rpe({shouldRetry:O9,...t})};yO.shouldRetry=O9;var oP=function(t,e){return oP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},oP(t,e)};function gO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oP(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var hx=function(){return hx=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},hx.apply(this,arguments)};function fF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function px(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function mx(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Bo(t){return typeof t=="function"}function R9(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var QE=R9(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function dF(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var vO=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=fF(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(Bo(u))try{u()}catch(y){o=y instanceof QE?y.errors:[y]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=fF(f),p=h.next();!p.done;p=h.next()){var m=p.value;try{hF(m)}catch(y){o=o??[],y instanceof QE?o=mx(mx([],px(o)),px(y.errors)):o.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new QE(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)hF(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&dF(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&dF(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();vO.EMPTY;function j9(t){return t instanceof vO||t&&"closed"in t&&Bo(t.remove)&&Bo(t.add)&&Bo(t.unsubscribe)}function hF(t){Bo(t)?t():t.unsubscribe()}var $9={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},sP={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=sP.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,mx([t,e],px(r))):setTimeout.apply(void 0,mx([t,e],px(r)))},clearTimeout:function(t){var e=sP.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function $pe(t){sP.setTimeout(function(){throw t})}function pF(){}function Dpe(t){t()}var bO=function(t){gO(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,j9(r)&&r.add(n)):n.destination=Bpe,n}return e.create=function(r,n,i){return new aP(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(vO),Mpe=Function.prototype.bind;function XE(t,e){return Mpe.call(t,e)}var Fpe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Ev(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Ev(n)}else Ev(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Ev(r)}},t}(),aP=function(t){gO(e,t);function e(r,n,i){var o=t.call(this)||this,s;if(Bo(r)||!r)s={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;o&&$9.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},s={next:r.next&&XE(r.next,a),error:r.error&&XE(r.error,a),complete:r.complete&&XE(r.complete,a)}):s=r}return o.destination=new Fpe(s),o}return e}(bO);function Ev(t){$pe(t)}function Lpe(t){throw t}var Bpe={closed:!0,next:pF,error:Lpe,complete:pF},Upe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Vpe(t){return t}function Wpe(t){return t.length===0?Vpe:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Cm=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=Gpe(e)?e:new aP(e,r,n);return Dpe(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=mF(r),new r(function(i,o){var s=new aP({next:function(a){try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Upe]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Wpe(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=mF(e),new e(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function mF(t){var e;return(e=t??$9.Promise)!==null&&e!==void 0?e:Promise}function zpe(t){return t&&Bo(t.next)&&Bo(t.error)&&Bo(t.complete)}function Gpe(t){return t&&t instanceof bO||zpe(t)&&j9(t)}function qpe(t){return Bo(t==null?void 0:t.lift)}function D9(t){return function(e){if(qpe(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function M9(t,e,r,n,i){return new Hpe(t,e,r,n,i)}var Hpe=function(t){gO(e,t);function e(r,n,i,o,s,a){var l=t.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(u){r.error(u)}}:t.prototype._next,l._error=o?function(c){try{o(c)}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(bO),Kpe=R9(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Er(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=!1,s;t.subscribe({next:function(a){s=a,o=!0},error:i,complete:function(){o?n(s):r?n(e.defaultValue):i(new Kpe)}})})}function Tc(t,e){return D9(function(r,n){var i=0;r.subscribe(M9(n,function(o){n.next(t.call(e,o,i++))}))})}function gg(t,e){return D9(function(r,n){var i=0;r.subscribe(M9(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}const JE=5;class Ype extends Error{constructor(e){const r=F9(e);super(r.message),this.statusCode=400,Object.assign(this,r)}}class Qpe extends Error{constructor(e){const r=F9(e);super(r.message),this.statusCode=500,Object.assign(this,r)}}function F9(t){const e=t.body,r={response:t,statusCode:t.statusCode,responseBody:Zpe(e,t),message:"",details:void 0};if(e.error&&e.message)return r.message="".concat(e.error," - ").concat(e.message),r;if(Xpe(e)){const n=e.error.items||[],i=n.slice(0,JE).map(s=>{var a;return(a=s.error)==null?void 0:a.description}).filter(Boolean);let o=i.length?`:
- `.concat(i.join(`
- `)):"";return n.length>JE&&(o+=`
...and `.concat(n.length-JE," more")),r.message="".concat(e.error.description).concat(o),r.details=e.error,r}return e.error&&e.error.description?(r.message=e.error.description,r.details=e.error,r):(r.message=e.error||e.message||Jpe(t),r)}function Xpe(t){return yF(t)&&yF(t.error)&&t.error.type==="mutationError"&&typeof t.error.description=="string"}function yF(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Jpe(t){const e=t.statusMessage?" ".concat(t.statusMessage):"";return"".concat(t.method,"-request to ").concat(t.url," resulted in HTTP ").concat(t.statusCode).concat(e)}function Zpe(t,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(t,null,2):t}const eme={onResponse:t=>{if(t.statusCode>=500)throw new Qpe(t);if(t.statusCode>=400)throw new Ype(t);return t}},tme={onResponse:t=>{const e=t.headers["x-sanity-warning"];return(Array.isArray(e)?e:[e]).filter(Boolean).forEach(n=>console.warn(n)),t}};function gF(t,e){let{maxRetries:r=5,retryDelay:n}=e;const i=bpe([r>0?yO({retryDelay:n,maxRetries:r,shouldRetry:rme}):{},...t,tme,Cpe(),Tpe(),Npe(),eme,Ipe({implementation:Cm})]);function o(s){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:i)({maxRedirects:0,...s})}return o.defaultRequester=i,o}function rme(t,e,r){const n=r.method==="GET"||r.method==="HEAD",o=(r.uri||r.url).startsWith("/data/query"),s=t.response&&(t.response.statusCode===429||t.response.statusCode===502||t.response.statusCode===503);return(n||o)&&s?!0:yO.shouldRetry(t,e,r)}function L9(t){if(typeof t=="string"||Array.isArray(t))return{id:t};if(typeof t=="object"&&t!==null&&"query"in t&&typeof t.query=="string")return"params"in t&&typeof t.params=="object"&&t.params!==null?{query:t.query,params:t.params}:{query:t.query};const e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

`.concat(e))}const vF=["image","file"],bF=["before","after","replace"],B9=t=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},nme=t=>{if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},ime=t=>{if(vF.indexOf(t)===-1)throw new Error("Invalid asset type: ".concat(t,". Must be one of ").concat(vF.join(", ")))},Rp=(t,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error("".concat(t,"() takes an object of properties"))},U9=(t,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error("".concat(t,'(): "').concat(e,'" is not a valid document ID'))},yx=(t,e)=>{if(!e._id)throw new Error("".concat(t,'() requires that the document contains an ID ("_id" property)'));U9(t,e._id)},ome=(t,e,r)=>{const n="insert(at, selector, items)";if(bF.indexOf(t)===-1){const i=bF.map(o=>'"'.concat(o,'"')).join(", ");throw new Error("".concat(n,' takes an "at"-argument which is one of: ').concat(i))}if(typeof e!="string")throw new Error("".concat(n,' takes a "selector"-argument which must be a string'));if(!Array.isArray(r))throw new Error("".concat(n,' takes an "items"-argument which must be an array'))},V9=t=>{if(!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset||""},W9=t=>{if(typeof t!="string"||!/^[a-z0-9._-]{1,75}$/i.test(t))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return t};var z9=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},af=(t,e,r)=>(z9(t,e,"read from private field"),r?r.call(t):e.get(t)),G9=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},q9=(t,e,r,n)=>(z9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),yu,gu;class H9{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.selection=e,this.operations=r}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return Rp("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,r,n){return ome(e,r,n),this._assign("insert",{[e]:r,items:n})}append(e,r){return this.insert("after","".concat(e,"[-1]"),r)}prepend(e,r){return this.insert("before","".concat(e,"[0]"),r)}splice(e,r,n,i){const o=typeof n>"u"||n===-1,s=r<0?r-1:r,a=o?-1:Math.max(0,r+n),l=s<0&&a>=0?"":a,c="".concat(e,"[").concat(s,":").concat(l,"]");return this.insert("replace",c,i||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...L9(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Rp(e,r),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},n&&this.operations[e]||{},r)}),this}_set(e,r){return this._assign(e,r,!1)}}const sme=class K9 extends H9{constructor(e,r,n){super(e,r),G9(this,yu,void 0),q9(this,yu,n)}clone(){return new K9(this.selection,{...this.operations},af(this,yu))}commit(e){if(!af(this,yu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return af(this,yu).mutate({patch:this.serialize()},n)}};yu=new WeakMap;let jp=sme;const ame=class Y9 extends H9{constructor(e,r,n){super(e,r),G9(this,gu,void 0),q9(this,gu,n)}clone(){return new Y9(this.selection,{...this.operations},af(this,gu))}commit(e){if(!af(this,gu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return af(this,gu).mutate({patch:this.serialize()},n)}};gu=new WeakMap;let $p=ame;var Q9=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ha=(t,e,r)=>(Q9(t,e,"read from private field"),r?r.call(t):e.get(t)),X9=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},J9=(t,e,r,n)=>(Q9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),bl,xl;const Z9={returnDocuments:!1};class eG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;this.operations=e,this.trxId=r}create(e){return Rp("create",e),this._add({create:e})}createIfNotExists(e){const r="createIfNotExists";return Rp(r,e),yx(r,e),this._add({[r]:e})}createOrReplace(e){const r="createOrReplace";return Rp(r,e),yx(r,e),this._add({[r]:e})}delete(e){return U9("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}const lme=class tG extends eG{constructor(e,r,n){super(e,n),X9(this,bl,void 0),J9(this,bl,r)}clone(){return new tG([...this.operations],ha(this,bl),this.trxId)}commit(e){if(!ha(this,bl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ha(this,bl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Z9,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof $p)return this._add({patch:e.serialize()});if(n){const o=r(new $p(e,{},ha(this,bl)));if(!(o instanceof $p))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};bl=new WeakMap;let rG=lme;const cme=class nG extends eG{constructor(e,r,n){super(e,n),X9(this,xl,void 0),J9(this,xl,r)}clone(){return new nG([...this.operations],ha(this,xl),this.trxId)}commit(e){if(!ha(this,xl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return ha(this,xl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Z9,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof jp)return this._add({patch:e.serialize()});if(n){const o=r(new jp(e,{},ha(this,xl)));if(!(o instanceof jp))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};xl=new WeakMap;let iG=cme;const ume="https://www.sanity.io/help/";function xO(t){return ume+t}function fme(t){let e=!1,r;return function(){return e||(r=t(...arguments),e=!0),r}}const zw=t=>fme(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return console.warn(t.join(" "),...r)}),dme=zw(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),hme=zw(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),pme=zw(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(xO("js-client-browser-token")," for more information and how to hide this warning.")]),mme=zw(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(xO("js-client-api-version"))]),yme="apicdn.sanity.io",gx={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0},gme=["localhost","127.0.0.1","0.0.0.0"],vme=t=>gme.indexOf(t)!==-1,bme=function(e){if(e==="1"||e==="X")return;const r=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&r instanceof Date&&r.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")},oG=function(e){switch(e){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},sG=(t,e)=>{const r=Object.assign({},e,t);r.apiVersion||mme();const n=Object.assign({},gx,r),i=n.useProjectHostname;if(typeof Promise>"u"){const f=xO("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(f))}if(i&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&oG(n.perspective),"encodeSourceMapAtPath"in n||"encodeSourceMap"in n||"studioUrl"in n||"logger"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.");if("stega"in n&&n.stega!==void 0&&n.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'createClient' to 'false'.");const o=typeof window<"u"&&window.location&&window.location.hostname,s=o&&vme(window.location.hostname);o&&s&&n.token&&n.ignoreBrowserTokenWarning!==!0?pme():typeof n.useCdn>"u"&&dme(),i&&nme(n.projectId),n.dataset&&B9(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?W9(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion="".concat(n.apiVersion).replace(/^v/,""),n.isDefaultApi=n.apiHost===gx.apiHost,n.useCdn=n.useCdn!==!1&&!n.withCredentials,bme(n.apiVersion);const a=n.apiHost.split("://",2),l=a[0],c=a[1],u=n.isDefaultApi?yme:c;return n.useProjectHostname?(n.url="".concat(l,"://").concat(n.projectId,".").concat(c,"/v").concat(n.apiVersion),n.cdnUrl="".concat(l,"://").concat(n.projectId,".").concat(u,"/v").concat(n.apiVersion)):(n.url="".concat(n.apiHost,"/v").concat(n.apiVersion),n.cdnUrl=n.url),n},xme="X-Sanity-Project-ID";function _me(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r={},n=e.token||t.token;n&&(r.Authorization="Bearer ".concat(n)),!e.useGlobalApi&&!t.useProjectHostname&&t.projectId&&(r[xme]=t.projectId);const i=!!(typeof e.withCredentials>"u"?t.token||t.withCredentials:e.withCredentials),o=typeof e.timeout>"u"?t.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},r,e.headers||{}),timeout:typeof o>"u"?5*60*1e3:o,proxy:e.proxy||t.proxy,json:!0,withCredentials:i,fetch:typeof e.fetch=="object"&&typeof t.fetch=="object"?{...t.fetch,...e.fetch}:e.fetch||t.fetch})}const aG=t=>{let{query:e,params:r={},options:n={}}=t;const i=new URLSearchParams,{tag:o,...s}=n;o&&i.append("tag",o),i.append("query",e);for(const[a,l]of Object.entries(r))i.append("$".concat(a),JSON.stringify(l));for(const[a,l]of Object.entries(s))l&&i.append(a,"".concat(l));return"?".concat(i)},wme=(t,e)=>t===!1?void 0:typeof t>"u"?e:t,Sme=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{dryRun:t.dryRun,returnIds:!0,returnDocuments:wme(t.returnDocuments,!0),visibility:t.visibility||"sync",autoGenerateArrayKeys:t.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:t.skipCrossDatasetReferenceValidation}},_O=t=>t.type==="response",Eme=t=>t.body,Ame=(t,e)=>t.reduce((r,n)=>(r[e(n)]=n,r),Object.create(null)),Cme=11264;function lG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=i.filterResponse===!1?u=>u:u=>u.result,{cache:s,next:a,...l}={useAbortSignal:typeof i.signal<"u",...i},c=typeof s<"u"||typeof a<"u"?{...l,fetch:{cache:s,next:a}}:l;return vg(t,e,"query",{query:r,params:n},c).pipe(Tc(o))}function cG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:Vd(t,"doc",r),json:!0,tag:n.tag};return bg(t,e,i).pipe(gg(_O),Tc(o=>o.body.documents&&o.body.documents[0]))}function uG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:Vd(t,"doc",r.join(",")),json:!0,tag:n.tag};return bg(t,e,i).pipe(gg(_O),Tc(o=>{const s=Ame(o.body.documents||[],a=>a._id);return r.map(a=>s[a]||null)}))}function fG(t,e,r,n){return yx("createIfNotExists",r),Gw(t,e,r,"createIfNotExists",n)}function dG(t,e,r,n){return yx("createOrReplace",r),Gw(t,e,r,"createOrReplace",n)}function hG(t,e,r,n){return vg(t,e,"mutate",{mutations:[{delete:L9(r)}]},n)}function pG(t,e,r,n){let i;r instanceof $p||r instanceof jp?i={patch:r.serialize()}:r instanceof rG||r instanceof iG?i=r.serialize():i=r;const o=Array.isArray(i)?i:[i],s=n&&n.transactionId||void 0;return vg(t,e,"mutate",{mutations:o,transactionId:s},n)}function vg(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=r==="mutate",s=r==="query",a=o?"":aG(n),l=!o&&a.length<Cme,c=l?a:"",u=i.returnFirst,{timeout:f,token:h,tag:p,headers:m}=i,y=Vd(t,r,c),g={method:l?"GET":"POST",uri:y,json:!0,body:l?void 0:n,query:o&&Sme(i),timeout:f,headers:m,token:h,tag:p,perspective:i.perspective,resultSourceMap:i.resultSourceMap,canUseCdn:s,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal};return bg(t,e,g).pipe(gg(_O),Tc(Eme),Tc(b=>{if(!o)return b;const v=b.results||[];if(i.returnDocuments)return u?v[0]&&v[0].document:v.map(_=>_.document);const x=u?"documentId":"documentIds",S=u?v[0]&&v[0].id:v.map(_=>_.id);return{transactionId:b.transactionId,results:v,[x]:S}}))}function Gw(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o={[n]:r},s=Object.assign({returnFirst:!0,returnDocuments:!0},i);return vg(t,e,"mutate",{mutations:[o]},s)}function bg(t,e,r){var n;const i=r.url||r.uri,o=t.config(),s=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&i.indexOf("/data/")===0:r.canUseCdn;let a=o.useCdn&&s;const l=r.tag&&o.requestTagPrefix?[o.requestTagPrefix,r.tag].join("."):r.tag||o.requestTagPrefix;if(l&&r.tag!==null&&(r.query={tag:W9(l),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&i.indexOf("/data/query/")===0){const f=(n=r.resultSourceMap)!=null?n:o.resultSourceMap;f!==void 0&&f!==!1&&(r.query={resultSourceMap:f,...r.query});const h=r.perspective||o.perspective;typeof h=="string"&&h!=="raw"&&(oG(h),r.query={perspective:h,...r.query},h==="previewDrafts"&&a&&(a=!1,hme()))}const c=_me(o,Object.assign({},r,{url:wO(t,i,a)})),u=new Cm(f=>e(c,o.requester).subscribe(f));return r.signal?u.pipe(Tme(r.signal)):u}function co(t,e,r){return bg(t,e,r).pipe(gg(i=>i.type==="response"),Tc(i=>i.body))}function Vd(t,e,r){const n=t.config(),i=V9(n),o="/".concat(e,"/").concat(i),s=r?"".concat(o,"/").concat(r):o;return"/data".concat(s).replace(/\/($|\?)/,"$1")}function wO(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{url:n,cdnUrl:i}=t.config(),o=r?i:n;return"".concat(o,"/").concat(e.replace(/^\//,""))}function Tme(t){return e=>new Cm(r=>{const n=()=>r.error(Ime(t));if(t&&t.aborted){n();return}const i=e.subscribe(r);return t.addEventListener("abort",n),()=>{t.removeEventListener("abort",n),i.unsubscribe()}})}const Pme=!!globalThis.DOMException;function Ime(t){var e,r;if(Pme)return new DOMException((e=t==null?void 0:t.reason)!=null?e:"The operation was aborted.","AbortError");const n=new Error((r=t==null?void 0:t.reason)!=null?r:"The operation was aborted.");return n.name="AbortError",n}var mG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},vx=(t,e,r)=>(mG(t,e,"read from private field"),r?r.call(t):e.get(t)),bx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},xx=(t,e,r,n)=>(mG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),M0,F0,L0,B0;class Nme{constructor(e,r){bx(this,M0,void 0),bx(this,F0,void 0),xx(this,M0,e),xx(this,F0,r)}upload(e,r,n){return yG(vx(this,M0),vx(this,F0),e,r,n)}}M0=new WeakMap;F0=new WeakMap;class kme{constructor(e,r){bx(this,L0,void 0),bx(this,B0,void 0),xx(this,L0,e),xx(this,B0,r)}upload(e,r,n){const i=yG(vx(this,L0),vx(this,B0),e,r,n);return Er(i.pipe(gg(o=>o.type==="response"),Tc(o=>o.body.document)))}}L0=new WeakMap;B0=new WeakMap;function yG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};ime(r);let o=i.extract||void 0;o&&!o.length&&(o=["none"]);const s=V9(t.config()),a=r==="image"?"images":"files",l=Ome(i,n),{tag:c,label:u,title:f,description:h,creditLine:p,filename:m,source:y}=l,g={label:u,title:f,description:h,filename:m,meta:o,creditLine:p};return y&&(g.sourceId=y.id,g.sourceName=y.name,g.sourceUrl=y.url),bg(t,e,{tag:c,method:"POST",timeout:l.timeout||0,uri:"/assets/".concat(a,"/").concat(s),headers:l.contentType?{"Content-Type":l.contentType}:{},query:g,body:n})}function Ome(t,e){return typeof File>"u"||!(e instanceof File)?t:Object.assign({filename:t.preserveFilename===!1?void 0:e.name,contentType:e.type},t)}var Rme=(t,e)=>Object.keys(e).concat(Object.keys(t)).reduce((r,n)=>(r[n]=typeof t[n]>"u"?e[n]:t[n],r),{});const jme=(t,e)=>e.reduce((r,n)=>(typeof t[n]>"u"||(r[n]=t[n]),r),{}),$me=16e3-1200,Dme=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],Mme={includeResult:!0};function gG(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{url:n,token:i,withCredentials:o,requestTagPrefix:s}=this.config(),a=r.tag&&s?[s,r.tag].join("."):r.tag,l={...Rme(r,Mme),tag:a},c=jme(l,Dme),u=aG({query:t,params:e,options:{tag:a,...c}}),f="".concat(n).concat(Vd(this,"listen",u));if(f.length>$me)return new Cm(y=>y.error(new Error("Query too large for listener")));const h=l.events?l.events:["mutation"],p=h.indexOf("reconnect")!==-1,m={};return(i||o)&&(m.withCredentials=!0),i&&(m.headers={Authorization:"Bearer ".concat(i)}),new Cm(y=>{let g;I().then(O=>{g=O}).catch(O=>{y.error(O),P()});let b,v=!1;function x(){v||(C(),!v&&g.readyState===g.CLOSED&&(A(),clearTimeout(b),b=setTimeout(T,100)))}function S(O){y.error(Fme(O))}function _(O){const N=vG(O);return N instanceof Error?y.error(N):y.next(N)}function w(){v=!0,A(),y.complete()}function A(){g&&(g.removeEventListener("error",x),g.removeEventListener("channelError",S),g.removeEventListener("disconnect",w),h.forEach(O=>g.removeEventListener(O,_)),g.close())}function C(){p&&y.next({type:"reconnect"})}async function I(){const{default:O}=await aW(()=>import("./browser-14720e8e.js").then(R=>R.b),[]),N=new O(f,m);return N.addEventListener("error",x),N.addEventListener("channelError",S),N.addEventListener("disconnect",w),h.forEach(R=>N.addEventListener(R,_)),N}function T(){I().then(O=>{g=O}).catch(O=>{y.error(O),P()})}function P(){v=!0,A()}return P})}function vG(t){try{const e=t.data&&JSON.parse(t.data)||{};return Object.assign({type:t.type},e)}catch(e){return e}}function Fme(t){if(t instanceof Error)return t;const e=vG(t);return e instanceof Error?e:new Error(Lme(e))}function Lme(t){return t.error?t.error.description?t.error.description:typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2):t.message||"Unknown listener error"}var bG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},an=(t,e,r)=>(bG(t,e,"read from private field"),r?r.call(t):e.get(t)),_x=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},wx=(t,e,r,n)=>(bG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_l,wl,Sl,El;class Bme{constructor(e,r){_x(this,_l,void 0),_x(this,wl,void 0),wx(this,_l,e),wx(this,wl,r)}create(e,r){return lf(an(this,_l),an(this,wl),"PUT",e,r)}edit(e,r){return lf(an(this,_l),an(this,wl),"PATCH",e,r)}delete(e){return lf(an(this,_l),an(this,wl),"DELETE",e)}list(){return co(an(this,_l),an(this,wl),{uri:"/datasets",tag:null})}}_l=new WeakMap;wl=new WeakMap;class Ume{constructor(e,r){_x(this,Sl,void 0),_x(this,El,void 0),wx(this,Sl,e),wx(this,El,r)}create(e,r){return Er(lf(an(this,Sl),an(this,El),"PUT",e,r))}edit(e,r){return Er(lf(an(this,Sl),an(this,El),"PATCH",e,r))}delete(e){return Er(lf(an(this,Sl),an(this,El),"DELETE",e))}list(){return Er(co(an(this,Sl),an(this,El),{uri:"/datasets",tag:null}))}}Sl=new WeakMap;El=new WeakMap;function lf(t,e,r,n,i){return B9(n),co(t,e,{method:r,uri:"/datasets/".concat(n),body:i,tag:null})}var xG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},pa=(t,e,r)=>(xG(t,e,"read from private field"),r?r.call(t):e.get(t)),Sx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ex=(t,e,r,n)=>(xG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),np,ip,op,sp;class Vme{constructor(e,r){Sx(this,np,void 0),Sx(this,ip,void 0),Ex(this,np,e),Ex(this,ip,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return co(pa(this,np),pa(this,ip),{uri:r})}getById(e){return co(pa(this,np),pa(this,ip),{uri:"/projects/".concat(e)})}}np=new WeakMap;ip=new WeakMap;class Wme{constructor(e,r){Sx(this,op,void 0),Sx(this,sp,void 0),Ex(this,op,e),Ex(this,sp,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return Er(co(pa(this,op),pa(this,sp),{uri:r}))}getById(e){return Er(co(pa(this,op),pa(this,sp),{uri:"/projects/".concat(e)}))}}op=new WeakMap;sp=new WeakMap;var _G=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ax=(t,e,r)=>(_G(t,e,"read from private field"),r?r.call(t):e.get(t)),Cx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Tx=(t,e,r,n)=>(_G(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),U0,V0,W0,z0;class zme{constructor(e,r){Cx(this,U0,void 0),Cx(this,V0,void 0),Tx(this,U0,e),Tx(this,V0,r)}getById(e){return co(Ax(this,U0),Ax(this,V0),{uri:"/users/".concat(e)})}}U0=new WeakMap;V0=new WeakMap;class Gme{constructor(e,r){Cx(this,W0,void 0),Cx(this,z0,void 0),Tx(this,W0,e),Tx(this,z0,r)}getById(e){return Er(co(Ax(this,W0),Ax(this,z0),{uri:"/users/".concat(e)}))}}W0=new WeakMap;z0=new WeakMap;var wG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ne=(t,e,r)=>(wG(t,e,"read from private field"),r?r.call(t):e.get(t)),Px=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ix=(t,e,r,n)=>(wG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Al,yr,Cl,ir;const qme=class lP{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gx;Px(this,Al,void 0),Px(this,yr,void 0),this.listen=gG,this.config(r),Ix(this,yr,e),this.assets=new Nme(this,Ne(this,yr)),this.datasets=new Bme(this,Ne(this,yr)),this.projects=new Vme(this,Ne(this,yr)),this.users=new zme(this,Ne(this,yr))}clone(){return new lP(Ne(this,yr),this.config())}config(e){if(e===void 0)return{...Ne(this,Al)};if(Ne(this,Al)&&Ne(this,Al).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return Ix(this,Al,sG(e,Ne(this,Al)||{})),this}withConfig(e){return new lP(Ne(this,yr),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return lG(this,Ne(this,yr),e,r,n)}getDocument(e,r){return cG(this,Ne(this,yr),e,r)}getDocuments(e,r){return uG(this,Ne(this,yr),e,r)}create(e,r){return Gw(this,Ne(this,yr),e,"create",r)}createIfNotExists(e,r){return fG(this,Ne(this,yr),e,r)}createOrReplace(e,r){return dG(this,Ne(this,yr),e,r)}delete(e,r){return hG(this,Ne(this,yr),e,r)}mutate(e,r){return pG(this,Ne(this,yr),e,r)}patch(e,r){return new jp(e,r,this)}transaction(e){return new iG(e,this)}request(e){return co(this,Ne(this,yr),e)}getUrl(e,r){return wO(this,e,r)}getDataUrl(e,r){return Vd(this,e,r)}};Al=new WeakMap;yr=new WeakMap;let Hme=qme;const Kme=class cP{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gx;Px(this,Cl,void 0),Px(this,ir,void 0),this.listen=gG,this.config(r),Ix(this,ir,e),this.assets=new kme(this,Ne(this,ir)),this.datasets=new Ume(this,Ne(this,ir)),this.projects=new Wme(this,Ne(this,ir)),this.users=new Gme(this,Ne(this,ir)),this.observable=new Hme(e,r)}clone(){return new cP(Ne(this,ir),this.config())}config(e){if(e===void 0)return{...Ne(this,Cl)};if(Ne(this,Cl)&&Ne(this,Cl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),Ix(this,Cl,sG(e,Ne(this,Cl)||{})),this}withConfig(e){return new cP(Ne(this,ir),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Er(lG(this,Ne(this,ir),e,r,n))}getDocument(e,r){return Er(cG(this,Ne(this,ir),e,r))}getDocuments(e,r){return Er(uG(this,Ne(this,ir),e,r))}create(e,r){return Er(Gw(this,Ne(this,ir),e,"create",r))}createIfNotExists(e,r){return Er(fG(this,Ne(this,ir),e,r))}createOrReplace(e,r){return Er(dG(this,Ne(this,ir),e,r))}delete(e,r){return Er(hG(this,Ne(this,ir),e,r))}mutate(e,r){return Er(pG(this,Ne(this,ir),e,r))}patch(e,r){return new $p(e,r,this)}transaction(e){return new rG(e,this)}request(e){return Er(co(this,Ne(this,ir),e))}dataRequest(e,r,n){return Er(vg(this,Ne(this,ir),e,r,n))}getUrl(e,r){return wO(this,e,r)}getDataUrl(e,r){return Vd(this,e,r)}};Cl=new WeakMap;ir=new WeakMap;let Yme=Kme;function Qme(t,e){return{requester:gF(t,{}).defaultRequester,createClient:o=>new e(gF(t,{maxRetries:o.maxRetries,retryDelay:o.retryDelay}),o)}}var Xme=[];const Jme=Qme(Xme,Yme),Zme=Jme.createClient,SO='_id, name, nickname, designation, "portraitImage": portraitImage.asset->url',Io='_id, "slug": slug.current, name, secondaryName, thirdName, "squareLogoImage": squareLogoImage.asset->url, "color": color.hex, description',ma=`team->{${Io}}, player->{${SO}}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url`,Wd=Zme({projectId:"0a9a4r26",dataset:"production",useCdn:!0,apiVersion:"2023-05-03",token:{}.VITE_DATABASE_API_KEY}),eye=async(t,e)=>{const r=await Wd.fetch(`*[_type == "teamPlayer" && team._ref in [${t.map(i=>`"${i}"`).join(",")}]] | { "teamId": team._ref, player->{${SO}, "statistics": statistics[_key=="${e}"][0] } }`),n={};for(let i=0;i<r.length;i++){const o=r[i];n[o.teamId]||(n[o.teamId]=[]),n[o.teamId].push(No(null,o))}return n},tye=()=>Wd.fetch(`*[_type == "match" && !(_id in path("drafts.**")) && (status == "initialized" || status == "streaming")] | order(startAt asc)[0...10]{ _id, name, playerEast->{${ma}}, playerSouth->{${ma}}, playerWest->{${ma}}, playerNorth->{${ma}}, playerEastTeam->{${Io}}, playerSouthTeam->{${Io}}, playerWestTeam->{${Io}}, playerNorthTeam->{${Io}}, startAt, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax}}`).then(t=>t.map(e=>{const{playerEast:r,playerEastTeam:n,playerSouth:i,playerSouthTeam:o,playerWest:s,playerWestTeam:a,playerNorth:l,playerNorthTeam:c,...u}=e,f={...u,playerEast:No(n,r),playerSouth:No(o,i),playerWest:No(a,s),playerNorth:No(c,l),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(r&&n&&i&&o&&s&&a&&l&&c){const h={[r.team._id]:"playerEast",[i.team._id]:"playerSouth",[s.team._id]:"playerWest",[l.team._id]:"playerNorth"};f._order=[h[n._id],h[o._id],h[a._id],h[c._id]]}return f})),EO=async(t,e)=>{const r=await Wd.fetch(`*[_type == "match" && _id == "${t}"]{ _id, name, playerEast->{${ma}}, playerSouth->{${ma}}, playerWest->{${ma}}, playerNorth->{${ma}}, playerEastTeam->{${Io}}, playerSouthTeam->{${Io}}, playerWestTeam->{${Io}}, playerNorthTeam->{${Io}}, startAt, youtubeUrl, bilibiliUrl, result, rounds, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax, teams[]{ "_id": team._ref, matchCount, ranking, point }}}`).then(n=>{const{playerEast:i,playerEastTeam:o,playerSouth:s,playerSouthTeam:a,playerWest:l,playerWestTeam:c,playerNorth:u,playerNorthTeam:f,...h}=n[0],p={...h,playerEast:No(o,i),playerSouth:No(a,s),playerWest:No(c,l),playerNorth:No(f,u),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(i&&o&&s&&a&&l&&c&&u&&f){const m={[i.team._id]:"playerEast",[s.team._id]:"playerSouth",[l.team._id]:"playerWest",[u.team._id]:"playerNorth"};p._order=[m[o._id],m[a._id],m[c._id],m[f._id]]}return p});if(e){const n=[r.playerEast.playerId,r.playerSouth.playerId,r.playerWest.playerId,r.playerNorth.playerId].filter(i=>i!=="");if(n.length>0){const i=await rye(n,r.tournament._id);r.playerEast.playerStatistic=i[r.playerEast.playerId],r.playerSouth.playerStatistic=i[r.playerSouth.playerId],r.playerWest.playerStatistic=i[r.playerWest.playerId],r.playerNorth.playerStatistic=i[r.playerNorth.playerId]}r.playerEast.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerEast.teamId)||null,r.playerSouth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerSouth.teamId)||null,r.playerWest.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerWest.teamId)||null,r.playerNorth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerNorth.teamId)||null}return r},rye=async(t,e)=>Wd.fetch(`*[_type=="player" && _id in [${t.map(r=>`"${r}"`).join(",")}]]{ _id, "statistics": statistics[_key=="${e}"][0] }`).then(r=>r.reduce((n,i)=>{if(!i.statistics||i.statistics.matchCount<=0)return n;const o={point:i.statistics.point,matchCount:i.statistics.matchCount,nonFourthP:1-i.statistics.fourthCount/i.statistics.matchCount,firstAndSecondP:(i.statistics.firstCount+i.statistics.secondCount)/i.statistics.matchCount,riichiP:i.statistics.riichiCount/i.statistics.roundCount,ronP:i.statistics.ronCount/i.statistics.roundCount,chuckP:i.statistics.chuckCount/i.statistics.roundCount,revealP:i.statistics.revealCount/i.statistics.roundCount,ronPureScoreAvg:i.statistics.ronPureScoreAvg,chuckPureScoreAvg:i.statistics.chuckPureScoreAvg};return n[i._id]=o,n},{})),ap=t=>{const e=`${t.playerPortraitImageUrl}?w=360&h=500`,r=`${t.teamLogoImageUrl}?w=500&h=500`,n=`${t.teamLogoImageUrl}?w=1000&h=1000`,i=t.playerDesignation,o=t.playerName,s=t.color;return{name:o,nickname:t.playerNickname,color:s,title:i,teamPicUrl:r,largeTeamPicUrl:n,proPicUrl:e}},No=(t,e)=>{const r={playerId:"",playerName:"",playerNickname:"",playerDesignation:"",playerPortraitImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png",playerFullname:"",playerStatistic:null,teamId:"",teamName:"",teamSecondaryName:"",teamThirdName:"",teamFullname:"",teamStatistic:null,color:"#000000",teamLogoImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png"};if(e){if(e.player){r.playerId=e.player._id,r.playerName=e.player.name,e.player.nickname&&(r.playerNickname=e.player.nickname),e.player.designation&&(r.playerDesignation=e.player.designation),e.player.portraitImage&&(r.playerPortraitImageUrl=e.player.portraitImage);const n=e.player.statistics;r.playerStatistic=n&&n.matchCount>0?{point:n.point,matchCount:n.matchCount,nonFourthP:1-n.fourthCount/n.matchCount,firstAndSecondP:(n.firstCount+n.secondCount)/n.matchCount,riichiP:n.riichiCount/n.roundCount,ronP:n.ronCount/n.roundCount,chuckP:n.chuckCount/n.roundCount,revealP:n.revealCount/n.roundCount,ronPureScoreAvg:n.ronPureScoreAvg,chuckPureScoreAvg:n.chuckPureScoreAvg}:null}e.team&&(r.teamId=e.team._id,r.teamName=e.team.name,r.teamSecondaryName=e.team.secondaryName,r.teamThirdName=e.team.thirdName,r.color=e.team.color,e.team.squareLogoImage&&(r.teamLogoImageUrl=e.team.squareLogoImage)),r.playerFullname=r.playerName+(r.playerNickname?` (${r.playerNickname})`:""),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "),r.playerDesignation=r.teamFullname,e.overridedDesignation&&(r.playerDesignation=e.overridedDesignation),e.overridedName&&(r.playerName=e.overridedName),e.overridedNickname&&(r.playerNickname=e.overridedNickname),e.overridedColor&&(r.color=e.overridedColor),e.overridedPortraitImage&&(r.playerPortraitImageUrl=e.overridedPortraitImage)}else t&&(r.teamId=t._id,r.teamName=t.name,r.teamSecondaryName=t.secondaryName,r.teamThirdName=t.thirdName,r.color=t.color,t.squareLogoImage&&(r.teamLogoImageUrl=t.squareLogoImage),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "));return r},AO=async t=>await Wd.fetch(`*[_type == "matchTournament" && _id == "${t}"][0]{..., "logoUrl": logo.asset->url, teams[]{..., team->{${Io}}}}`),nye=async t=>await Wd.fetch(`*[_type=="teamPlayer" && !(_id in path("drafts.**")) && defined(player->statistics[_key=="${t}"])]{"teamId": team._ref, player->{${SO}, "statistics": statistics[_key=="${t}"][0]}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url}`);AO("b6908027-9179-485a-8bce-822c42114371");const xF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function iye(){const t=E.useCallback(()=>{window.navigator.clipboard.writeText(xF)},[]);return d.jsx("div",{className:"flex items-center justify-center gap-x-8",children:d.jsxs("div",{children:[d.jsx("p",{children:"1. 打開OBS"}),d.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),d.jsxs("p",{children:["- 網址 = ",d.jsx("strong",{children:"上述網址"}),d.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",d.jsx("br",{})," - 自訂CSS ="," ",d.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[d.jsx("pre",{children:xF}),d.jsx("div",{className:"absolute top-2 right-2",children:d.jsx("button",{type:"button",onClick:t,children:d.jsx("i",{className:"bi bi-copy"})})})]}),d.jsx("br",{}),"其餘默認即可。"]}),d.jsx("p",{children:"4. 確定"})]})})}let oye=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const cs=(t=12)=>oye(t),sye=()=>{const t=new Date;return`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`},uP=t=>`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${t}`,CO=t=>{let e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);e=Math.round(e*1.25),r=Math.round(r*1.25),n=Math.round(n*1.25),e=e<255?e:255,r=r<255?r:255,n=n<255?n:255,e=Math.round(e),r=Math.round(r),n=Math.round(n);const i=e.toString(16).length===1?`0${e.toString(16)}`:e.toString(16),o=r.toString(16).length===1?`0${r.toString(16)}`:r.toString(16),s=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16);return`#${i}${o}${s}`},aye=t=>{switch(t){case"12":return"三倍滿 (12翻)";case"13":return"累計役滿 (13翻)"}return"(未知)"},lye=t=>{switch(t){case"13":return"單倍役滿";case"26":return"雙倍役滿";case"39":return"三倍役滿";case"130":return"無上限"}return"(未知)"},ya=t=>typeof t>"u"||t===null?"-":t>=0?`+${t.toFixed(1)}`:`▲${Math.abs(t).toFixed(1)}`,rd=t=>typeof t>"u"||t===null?"-":t===1||t==="1"?"1st":t===2||t==="2"?"2nd":t===3||t==="3"?"3rd":`${t}th`,Ls=t=>typeof t>"u"||t===null?"-":t.toFixed(2),Av=t=>t===0?t.toLocaleString("en-US"):t>0?`${Math.floor(t).toLocaleString("en-US")}`:Math.floor(t).toLocaleString("en-US"),Bs=({teamPlayer:t})=>{const e=`${t.playerPortraitImageUrl}?w=64&h=64&fit=crop&crop=top`,r=`${t.teamLogoImageUrl}?w=64&h=64`,n=t.playerDesignation,i=t.playerName,o=t.color;return d.jsxs("div",{className:"flex justify-start items-center gap-x-1 border-l-4 pl-2",style:{borderColor:o},children:[d.jsx("div",{className:"w-8 h-8",children:r&&d.jsx("img",{src:r,alt:n})}),d.jsx("div",{className:"w-8 h-8",children:e&&d.jsx("img",{src:e,alt:i})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm text-neutral-600",children:n}),d.jsx("p",{className:"font-bold",children:i})]})]})};function cye(){const{data:t,refetch:e}=qa({queryKey:["matches"],queryFn:tye}),{data:r,set:n}=Zr("obs/1");E.useCallback(o=>{const s=o.currentTarget.getAttribute("data-id");s&&confirm(`請確定上一局對局已經結束才開始新的直播！！
確定要開始直播新的對局嗎？`)&&n({matchId:s})},[n]);const i=E.useMemo(()=>t==null?void 0:t.find(o=>o._id===(r==null?void 0:r.matchId)),[t,r==null?void 0:r.matchId]);return d.jsx("div",{className:"container mx-auto",children:d.jsxs("div",{className:"h-screen flex flex-col py-16 gap-y-12",children:[d.jsx("div",{className:"shrink-0",children:d.jsxs("h1",{className:"text-4xl font-bold text-center",children:[d.jsx("img",{src:"/images/master-logo.jpeg",className:"inline-block w-16",alt:"HKMSCA"})," ",d.jsx("span",{children:"日麻比賽直播系統 (牌藝攻防)"})]})}),d.jsxs("div",{className:"shrink-0 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-x-4",children:[d.jsx("div",{children:d.jsxs("div",{className:"px-8 py-4 bg-green-300 border-2 border-green-600 text-center space-y-4",children:[d.jsx("p",{className:"text-3xl font-bold text-green-900",children:"OBS設定"}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:d.jsx("a",{href:`${location.origin}/obs/1/weekly-summary`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"一週結算"})}),d.jsxs("div",{className:"bg-white rounded p-4 space-y-4",children:[!i&&d.jsx("p",{className:"text-center",children:"請在下方表格直播一場新的賽事"}),i&&d.jsx("p",{className:"text-center font-bold text-red-500",children:"LIVE 直播中"}),i&&d.jsx("div",{children:d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx(Bs,{teamPlayer:i.playerEast}),d.jsx(Bs,{teamPlayer:i.playerSouth}),d.jsx(Bs,{teamPlayer:i.playerWest}),d.jsx(Bs,{teamPlayer:i.playerNorth})]})}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("p",{children:"開始前倒數"}),d.jsx("a",{href:`${location.origin}/obs/1/forecast?m=5`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"5分鐘"}),d.jsx("a",{href:`${location.origin}/obs/1/forecast?m=10`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"10分鐘"}),d.jsx("a",{href:`${location.origin}/obs/1/forecast?m=15`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"15分鐘"}),d.jsx("a",{href:`${location.origin}/obs/1/forecast?m=20`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"20分鐘"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx("a",{href:`${location.origin}/obs/1/introduction`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"賽前介紹"}),d.jsx("a",{href:`${location.origin}/obs/1`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"直播頁面"}),d.jsx("a",{href:`${location.origin}/obs/1/summary`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"賽後結果"})]})]}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:d.jsx("a",{href:`${location.origin}/obs/1/end`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"今日賽事已完結"})}),d.jsx("div",{className:"text-left",children:d.jsx(iye,{})})]})}),d.jsx("div",{children:d.jsxs("div",{className:"px-8 py-4 bg-blue-300 border-2 border-blue-600 text-center space-y-4",children:[d.jsx("p",{className:"text-3xl font-bold text-blue-900",children:"主播"}),d.jsxs("p",{className:"text-2xl",children:["固定的紀錄頁面：",d.jsxs("a",{href:`${location.origin}/obs/1/stat`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/stat"]})]}),d.jsxs("p",{className:"text-2xl",children:["固定的Overlay頁面：",d.jsxs("a",{href:`${location.origin}/obs/1/stat`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/overlay"]})]}),d.jsx("div",{className:"pt-16",children:d.jsx("img",{className:"mx-auto block w-64 h-64",src:uP(`${location.origin}/obs/1/stat`),alt:""})})]})}),d.jsx("div",{children:d.jsxs("div",{className:"px-8 py-4 bg-yellow-300 border-2 border-yellow-600 text-center space-y-4",children:[d.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:"控制台"}),d.jsxs("p",{className:"text-2xl",children:["固定的控制台頁面：",d.jsxs("a",{href:`${location.origin}/obs/1/control`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/control"]})]}),d.jsx("div",{className:"pt-16",children:d.jsx("img",{className:"mx-auto block w-64 h-64",src:uP(`${location.origin}/obs/1/control`),alt:""})})]})})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-right mb-2",children:d.jsxs(Re,{color:"secondary",onClick:()=>e(),children:[d.jsx("i",{className:"bi bi-arrow-repeat"})," 刷新"]})}),d.jsxs("table",{className:"data-table w-full text-left",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"對局"}),d.jsx("th",{children:"東"}),d.jsx("th",{children:"南"}),d.jsx("th",{children:"西"}),d.jsx("th",{children:"北"}),d.jsx("th",{className:"text-right",children:"操作"})]})}),d.jsx("tbody",{children:t==null?void 0:t.map(o=>d.jsxs("tr",{children:[d.jsxs("th",{children:[d.jsx("p",{children:o.name}),d.jsx("p",{className:"font-normal text-sm text-neutral-600",children:o.tournament.name})]}),d.jsx("td",{children:d.jsx(Bs,{teamPlayer:o.playerEast})}),d.jsx("td",{children:d.jsx(Bs,{teamPlayer:o.playerSouth})}),d.jsx("td",{children:d.jsx(Bs,{teamPlayer:o.playerWest})}),d.jsx("td",{children:d.jsx(Bs,{teamPlayer:o.playerNorth})}),d.jsxs("td",{className:"space-x-2 text-right",children:[d.jsxs("div",{className:"space-x-2",children:[d.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/square`,target:"_blank",children:[d.jsx("i",{className:"bi bi-card-image"})," 出Post圖"]}),d.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/thumbnail`,target:"_blank",children:[d.jsx("i",{className:"bi bi-youtube"})," YT Thumbnail"]}),d.jsxs("a",{href:`/match/${o._id}/nameplates`,target:"_blank",children:[d.jsx("i",{className:"bi bi-person-badge"})," 名牌"]})]}),d.jsxs("div",{className:"space-x-2",children:[d.jsxs("a",{href:`/match/${o._id}/forecast?startAt=${o.name.endsWith("2")?"21":"19"}:30`,target:"_blank",children:[d.jsx("i",{className:"bi bi-bell"})," 倒數"]}),d.jsxs("a",{href:`/match/${o._id}/introduction`,target:"_blank",children:[d.jsx("i",{className:"bi bi-person-vcard"})," 介紹"]}),d.jsxs("a",{href:`/match/${o._id}/summary`,target:"_blank",children:[d.jsx("i",{className:"bi bi-trophy"})," 結果"]}),o._id===(r==null?void 0:r.matchId)?d.jsxs("span",{className:"bg-red-600 px-2 py-1 rounded text-white",children:[d.jsx("i",{className:"bi bi-record-circle"})," LIVE 直播中"]}):d.jsxs("a",{href:`/match/${o._id}/control`,target:"_blank",className:"text-red-600",children:[d.jsx("i",{className:"bi bi-record-circle"})," 直播"]})]})]})]},o._id))})]})]}),d.jsx("div",{children:d.jsx("div",{className:"text-center space-x-4",children:d.jsx("a",{href:"https://hkmjbs.sanity.studio/",target:"_blank",children:d.jsxs(Re,{color:"secondary",children:["資料庫 ",d.jsx("i",{className:"bi bi-box-arrow-up-right"})]})})})}),d.jsx("div",{className:"flex gap-x-4"})]})]})})}const uye=t=>{const e={};for(let r=0;r<t.length;r+=1)e[r.toString()]=t[r];return e},_F=t=>{if(t.length!==0)return t[t.length-1]},Jo=t=>{const{data:e,update:r}=Zr(`/matches/${t}`),{data:n,update:i,push:o}=Zr("matchRounds",{order:{byChild:"matchId"},filter:{equalTo:t}}),s=E.useMemo(()=>_F(Object.values(n??{}))??void 0,[n]),a=E.useMemo(()=>Object.values((s==null?void 0:s.doras)??{}),[s]),l=E.useCallback((b,v)=>{const x=n==null?void 0:n[b];x&&i({[b]:{...x,...v}})},[n,i]),c=E.useCallback(b=>{const v=_F(Object.keys(n??{}));v&&i({[v]:{...s,...b}})},[s,n,i]),u=E.useCallback(b=>{c({doras:uye(b)})},[c]),f=E.useCallback(b=>{r({name:b})},[r]),h=E.useCallback(b=>{r({players:b})},[r]),p=E.useCallback(b=>{r({activeResultDetail:b})},[r]),m=E.useCallback(b=>{r({showPoints:b})},[r]),y=E.useCallback(b=>{r({hideHeader:b})},[r]),g=E.useCallback(b=>{i({[b]:{...n==null?void 0:n[b],hasBroadcasted:!0}})},[n,i]);return{match:e,matchRounds:n,matchCurrentRound:s,matchCurrentRoundDoras:a,setMatchName:f,setMatchPlayers:h,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchActiveResultDetail:p,setMatchRoundHasBroadcastedToTrue:g,setCurrentRoundDoras:u,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:o}};var Ve=(t=>(t[t.Unknown=0]="Unknown",t[t.Exhausted=-1]="Exhausted",t[t.Ron=1]="Ron",t[t.SelfDrawn=2]="SelfDrawn",t[t.Hotfix=-2]="Hotfix",t))(Ve||{}),bt=(t=>(t[t.Unknown=0]="Unknown",t[t.NextRound=1]="NextRound",t[t.Extended=2]="Extended",t[t.NextRoundAndExtended=3]="NextRoundAndExtended",t[t.Hotfix=-2]="Hotfix",t[t.End=-1]="End",t))(bt||{}),yt=(t=>(t[t.Win=1]="Win",t[t.Lose=-1]="Lose",t[t.None=0]="None",t))(yt||{}),$n=(t=>(t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North",t))($n||{});const ZE=[$n.East,$n.South,$n.West,$n.North],wF=["0","1","2","3"],fye=t=>parseInt(t,10),Bc=(t,e)=>ZE[(4+fye(t)-(e-1)%ZE.length)%ZE.length],Xn=(t,e)=>Bc(t,e)===$n.East,SG=(t,e)=>Bc(t,e)===$n.South,EG=(t,e)=>Bc(t,e)===$n.West,AG=(t,e)=>Bc(t,e)===$n.North,CG=t=>t>=1&&t<=4,TG=t=>t>=5&&t<=8,PG=t=>t>=9&&t<=12,IG=t=>t>=13&&t<=16,ru={"1h20f":{ne:200,e:400,ner:1e3,er:1500},"1h25f":{ne:200,e:400,ner:1e3,er:1500},"1h30f":{ne:300,e:500,ner:1e3,er:1500},"1h40f":{ne:400,e:700,ner:1300,er:2e3},"1h50f":{ne:400,e:800,ner:1600,er:2400},"1h60f":{ne:500,e:1e3,ner:2e3,er:2900},"1h70f":{ne:600,e:1200,ner:2300,er:3400},"1h80f":{ne:700,e:1300,ner:2600,er:3900},"1h90f":{ne:800,e:1500,ner:2900,er:4400},"1h100f":{ne:800,e:1600,ner:3200,er:4800},"1h110f":{ne:900,e:1800,ner:3600,er:5300},"2h20f":{ne:400,e:700,ner:1500,er:2100},"2h25f":{ne:400,e:800,ner:1600,er:2400},"2h30f":{ne:500,e:1e3,ner:2e3,er:2900},"2h40f":{ne:700,e:1300,ner:2600,er:3900},"2h50f":{ne:800,e:1600,ner:3200,er:4800},"2h60f":{ne:1e3,e:2e3,ner:3900,er:5800},"2h70f":{ne:1200,e:2300,ner:4500,er:6800},"2h80f":{ne:1300,e:2600,ner:5200,er:7700},"2h90f":{ne:1500,e:2900,ner:5800,er:8700},"2h100f":{ne:1600,e:3200,ner:6400,er:9600},"2h110f":{ne:1800,e:3600,ner:7100,er:10600},"3h20f":{ne:700,e:1300,ner:2600,er:3900},"3h25f":{ne:800,e:1600,ner:3200,er:4800},"3h30f":{ne:1e3,e:2e3,ner:3900,er:5800},"3h40f":{ne:1300,e:2600,ner:5200,er:7700},"3h50f":{ne:1600,e:3200,ner:6400,er:9600},"3h60f":{ne:2e3,e:3900,ner:7700,er:11600},"4h20f":{ne:1300,e:2600,ner:5200,er:7700},"4h25f":{ne:1600,e:3200,ner:6400,er:9600},"4h30f":{ne:2e3,e:3900,ner:7700,er:11600},"5h":{ne:2e3,e:4e3,ner:8e3,er:12e3},"6h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"7h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"8h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"9h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"10h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"11h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"12h":{ne:6e3,e:12e3,ner:24e3,er:36e3}},dye=(t,e,r)=>{let n;const i=parseInt(t,10);if(Number.isNaN(i))throw new Error(`han "${t}" is NaN`);const o=parseInt(e,10);if(Number.isNaN(o))throw new Error(`fu "${e}" is NaN`);return i>=13?n=ru["12h"]:i>=5?n=ru[`${i}h`]:i>=4&&o>=(r!=null&&r.roundUp?30:40)||i>=3&&o>=(r!=null&&r.roundUp?60:70)?n=ru["5h"]:n=ru[`${i}h${o}f`],n||ru["1h30f"]},hye=(t=1)=>({ne:8e3*t,e:16e3*t,ner:32e3*t,er:48e3*t}),SF=(t,e,r,n,i,o)=>{const s=r>0?hye(Math.min(RG((o==null?void 0:o.yakumanMax)??"130"),r)):dye(t,e,o);return n?i?{win:s.er,target:s.er}:{win:s.e*3,all:s.e}:i?{win:s.ner,target:s.ner}:{win:s.e+2*s.ne,east:s.e,others:s.ne}},pye=t=>t.all||t.east?Ve.SelfDrawn:t.target?Ve.Ron:Ve.Unknown,EF=t=>wF[(t-1)%wF.length],mye=t=>({0:{beforeScore:t[0].afterScore,afterScore:t[0].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[0].isYellowCarded||!1,isRedCarded:t[0].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[0].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:t[1].afterScore,afterScore:t[1].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[1].isYellowCarded||!1,isRedCarded:t[1].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[1].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:t[2].afterScore,afterScore:t[2].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[2].isYellowCarded||!1,isRedCarded:t[2].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[2].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:t[3].afterScore,afterScore:t[3].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[3].isYellowCarded||!1,isRedCarded:t[3].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[3].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}}),AF=t=>mye({0:t[0],1:t[1],2:t[2],3:t[3]}),yye=()=>`${sye()}-${cs(6)}`,Nx=(t,e,r)=>`${t}-${e}.${r}`,gye={1:"東 1 局",2:"東 2 局",3:"東 3 局",4:"東 4 局",5:"南 1 局",6:"南 2 局",7:"南 3 局",8:"南 4 局",9:"西 1 局",10:"西 2 局",11:"西 3 局",12:"西 4 局",13:"北 1 局",14:"北 2 局",15:"北 3 局",16:"北 4 局"},vye=(t,e,r=8)=>{try{const n=gye[Math.min(t,r)];if(!n)throw new Error(`Unable to parse round=${t} in MJMatchCounterSpan`);return e&&e!==0?`${n}${e}本場`:n}catch(n){return console.error(n),`${t}.${e??0}`}},NG=t=>{switch(t){case"0":return"3";case"1":return"0";case"2":return"1";case"3":return"2"}},kG=t=>{switch(t){case"0":return"1";case"1":return"2";case"2":return"3";case"3":return"0"}},OG=t=>{switch(t){case"0":return"2";case"1":return"3";case"2":return"0";case"3":return"1"}},RG=t=>{switch(t){case"13":return 1;case"26":return 2;case"39":return 3;case"130":return 10}},bye={[Ve.Ron]:"ron",[Ve.SelfDrawn]:"tsumo",[Ve.Exhausted]:"exhausted",[Ve.Hotfix]:"hotfix",[Ve.Unknown]:"unknown"},xye={[$n.East]:"east",[$n.South]:"south",[$n.West]:"west",[$n.North]:"north"},_ye={[yt.None]:"none",[yt.Win]:"win",[yt.Lose]:"lose"},Cv=(t,e)=>{var r,n,i,o,s,a,l,c,u;return{position:xye[Bc(e,t.roundCount)],type:_ye[t.playerResults[e].type],status:t.playerResults[e].isRiichi||(r=t.playerResults[e].detail)!=null&&r.isRiichied?"isRiichied":t.playerResults[e].isRevealed||(n=t.playerResults[e].detail)!=null&&n.isRevealed?"isRevealed":"none",isWaited:!!t.playerResults[e].waitingTiles&&t.playerResults[e].waitingTiles.length>0,beforeScore:t.playerResults[e].beforeScore,afterScore:t.playerResults[e].afterScore,dora:(i=t.playerResults[e].detail)==null?void 0:i.dora,redDora:(o=t.playerResults[e].detail)==null?void 0:o.redDora,innerDora:(s=t.playerResults[e].detail)==null?void 0:s.innerDora,han:(a=t.playerResults[e].detail)==null?void 0:a.han,fu:(l=t.playerResults[e].detail)==null?void 0:l.fu,yaku:(u=(c=t.playerResults[e].detail)==null?void 0:c.yakus)==null?void 0:u.map(({label:f})=>f).join(" "),pureScore:0}},jG=t=>{const e=t.at(-1),r=[{index:"0",score:e.playerResults[0].afterScore},{index:"1",score:e.playerResults[1].afterScore},{index:"2",score:e.playerResults[2].afterScore},{index:"3",score:e.playerResults[3].afterScore}].sort((s,a)=>s.score===a.score?s.index<a.index?-1:1:a.score-s.score),n={0:(r.findIndex(s=>s.index==="0")+1).toString(),1:(r.findIndex(s=>s.index==="1")+1).toString(),2:(r.findIndex(s=>s.index==="2")+1).toString(),3:(r.findIndex(s=>s.index==="3")+1).toString()},i={1:50,2:10,3:-10,4:-30};return{result:{playerEast:{score:e.playerResults[0].afterScore,ranking:n[0],point:(e.playerResults[0].afterScore-3e4)/1e3+i[n[0]],penalty:e.playerResults[0].isRedCarded?-30:0,penaltyReason:e.playerResults[0].isRedCarded?"紅牌":""},playerSouth:{score:e.playerResults[1].afterScore,ranking:n[1],point:(e.playerResults[1].afterScore-3e4)/1e3+i[n[1]],penalty:e.playerResults[1].isRedCarded?-30:0,penaltyReason:e.playerResults[1].isRedCarded?"紅牌":""},playerWest:{score:e.playerResults[2].afterScore,ranking:n[2],point:(e.playerResults[2].afterScore-3e4)/1e3+i[n[2]],penalty:e.playerResults[2].isRedCarded?-30:0,penaltyReason:e.playerResults[2].isRedCarded?"紅牌":""},playerNorth:{score:e.playerResults[3].afterScore,ranking:n[3],point:(e.playerResults[3].afterScore-3e4)/1e3+i[n[3]],penalty:e.playerResults[3].isRedCarded?-30:0,penaltyReason:e.playerResults[3].isRedCarded?"紅牌":""}},rounds:t.map(s=>({_key:cs(),type:bye[s.resultType],code:`${s.roundCount}.${s.extendedRoundCount}`,playerEast:Cv(s,"0"),playerSouth:Cv(s,"1"),playerWest:Cv(s,"2"),playerNorth:Cv(s,"3")}))}};function Mt({signed:t,className:e,positiveClassName:r,negativeClassName:n,value:i,animated:o,hideZero:s,title:a}){const[l,c]=E.useState(i),u=E.useRef(null),f=E.useCallback(m=>m===0?s?"":m.toLocaleString("en-US"):m>0?`${t?"+":""}${Math.floor(m).toLocaleString("en-US")}`:Math.floor(m).toLocaleString("en-US"),[s,t]),h=E.useMemo(()=>f(l),[f,l]),p=E.useMemo(()=>i>0?`${e??""} ${r??""}`:i<0?`${e??""} ${n??""}`:e,[e,n,r,i]);return E.useEffect(()=>{if(l!==i)if(o){for(let g=16;g<1e3;g+=16)setTimeout(()=>{u.current&&(u.current.innerText=Math.floor(l-(l-i)*(g/1e3)).toLocaleString("en-US"))},g);setTimeout(()=>{c(i)},1e3+16)}else c(i)},[o,l,i]),E.useEffect(()=>{u.current&&(u.current.innerText=h)},[h]),d.jsx("span",{title:a,ref:u,className:p})}const CF={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function ko({className:t,children:e,...r}){const n=E.useMemo(()=>CF[e==null?void 0:e.toString()]??CF.default,[e]);return d.jsx("div",{className:`mahjong-tile ${n} ${t}`,...r})}function Ha({player:t,playerIndex:e,score:r,scoreChanges:n=[],point:i,ranking:o,isEast:s,isRiichi:a,isYellowCarded:l,isRedCarded:c,waitingTiles:u,onClickWaitingTiles:f,showPointAndRanking:h,className:p,...m}){const[y,g]=E.useState(r),[b,v]=E.useState(null),x=E.useMemo(()=>CO(t.color??"#000000"),[t.color]),S=E.useMemo(()=>!!b,[b]);return E.useEffect(()=>{r!==y&&(v(n),setTimeout(()=>{g(r)},2550),setTimeout(()=>{v(null)},3e3))},[r,n,y]),d.jsxs("div",{className:"relative min-w-[5.35em] mx-auto [&_.hide-if-changing]:transition-opacity [&_.hide-if-changing]:data-[score-changing='1']:opacity-0 overflow-visible","data-score-changing":S?"1":"0",children:[d.jsxs("div",{className:"absolute top-[0.05em] bottom-[0.15em] -left-[0.1em] -right-[0.1em] rounded-[0.1em] overflow-hidden -z-50",children:[l&&d.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[yellowPenaltyAni_8s_ease-in-out_1]"}),c&&d.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[redPenaltyAni_8s_ease-in-out_1]"})]}),l&&d.jsx("div",{className:"absolute -top-[0.4em] left-0 h-[0.5em] w-[0.37em] bg-[#ffe100] rounded-[0.05em]"}),c&&d.jsx("div",{className:"absolute -top-[0.4em] left-[0.45em] h-[0.5em] w-[0.37em] bg-[#ff1900] rounded-[0.05em]"}),d.jsxs("div",{className:"flex items-end gap-x-[0.1em]",children:[d.jsxs("div",{className:"shrink-0 w-[1.75em] h-full relative -bottom-[0.085em] -left-[0.085em]",children:[d.jsx("div",{className:"absolute w-full h-full bg-[#d1b571] overflow-hidden rounded-[0.1em]",style:{opacity:a?1:0},children:d.jsx("div",{className:"origin-bottom w-[200%] h-[100%] bg-[#d1291d] animate-[riichi_8s_ease-in-out_infinite]"})}),d.jsx("div",{className:"relative z-10 w-full aspect-[90/125] p-[0.085em]",children:d.jsxs("div",{className:"w-full h-full bg-white rounded-[0.08em] overflow-hidden",style:{background:`linear-gradient(180deg, ${t.color}, ${x})`},children:[t.teamPicUrl&&d.jsx("div",{className:"absolute inset-[0.085em] overflow-hidden",children:d.jsx("img",{className:"absolute max-w-[none] h-[2.2em] w-[2.2em] opacity-30 animate-[scrollFromRightToLeft_12s_linear_infinite]",src:t.teamPicUrl,alt:t.name})}),t.proPicUrl&&d.jsx("img",{className:"relative z-10 w-full h-full rounded-[0.08em]",src:t.proPicUrl,alt:t.name}),t.nickname&&d.jsx("div",{className:"absolute bottom-[0.085em] left-[0.085em] right-[0.085em] rounded-b-[0.08em] bg-[linear-gradient(to_top,#00000060,#00000050_70%,transparent)] text-white z-20",children:d.jsx("p",{className:"text-center text-[0.25em] font-semibold pb-[0.25em] pt-[0.5em]",children:t.nickname})})]})})]}),d.jsxs("div",{className:"flex-1 flex flex-col gap-y-[0.125em] items-start justify-end",children:[d.jsxs("div",{className:"bg-black bg-opacity-60 rounded text-[0.5em] flex gap-x-[0.2em] p-[0.1em] pl-[0.2em] pr-[0.2em] opacity-0 transition-opacity data-[has-waiting-tiles='1']:opacity-100 hide-if-changing cursor-pointer","data-has-waiting-tiles":u&&u.length>0||f?"1":"0",onClick:f,"data-player-index":e,children:[d.jsx("div",{className:"flex-1 leading-none min-h-[1.19em] flex flex-wrap gap-[0.15em]",children:u==null?void 0:u.map(_=>d.jsx(ko,{className:"inline-block align-bottom w-[0.85em] animate-[fadeInFromLeft_1s_ease-in-out]",children:_},_))}),d.jsx("div",{className:"bg-[#FFFFFF] w-[4px]"}),d.jsxs("div",{className:"text-[#FFFFFF] text-[0.4em] leading-[1.3em] flex items-center",children:["待",d.jsx("br",{}),"牌"]})]}),d.jsxs("div",{className:`relative w-full text-left bg-white px-[0.1em] pb-[0.05em] pt-[0.08em] ${p}`,...m,style:{background:`linear-gradient(260deg, transparent, transparent 22px, ${x} 23px, ${t.color} 100%`,textShadow:"#00000048 2px 2px 3px, #00000048 -2px -2px 3px, #00000048 -2px 2px 3px, #00000048 2px -2px 3px, #00000048 0 0 6px"},children:[d.jsxs("div",{className:"flex flex-col justify-center gap-y-[0.075em] mt-[0.04em]",children:[d.jsx("div",{className:"text-[0.1875em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",children:t.title||"　"}),d.jsx("div",{className:"text-[0.3125em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",style:{transformOrigin:"left",transform:(t.name||"").length>=17?"scaleX(0.9)":"scaleX(1)"},children:t.name})]}),b&&d.jsx("div",{className:"absolute bottom-[2.75em] pr-[0.125em] left-0 text-[0.5625em] leading-none animate-[drop_3s_ease-in-out] font-numeric",children:b.map(_=>d.jsx("div",{children:d.jsx(Mt,{signed:!0,value:_,positiveClassName:"text-[#09eb09]",negativeClassName:"text-[#eb0000]"})}))}),d.jsxs("div",{className:"relative mt-[0.12em] mb-[0.03em]",children:[d.jsx("p",{className:"relative text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:h?0:1,bottom:h?"1em":0},children:d.jsx(Mt,{animated:!0,value:y})}),d.jsxs("p",{className:"absolute left-0 right-[0.25em] text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:h?1:0,bottom:h?0:"-1em"},children:[ya(i),d.jsx("span",{className:"text-[0.8em]",children:"pt"}),d.jsx("span",{className:"absolute right-0 bottom-0 text-[0.75em]",children:rd(o)})]})]})]})]})]}),d.jsx("div",{className:`mt-[0.2em] h-[0.075em] rounded-full ${s&&"bg-red-500"}`})]})}function us({roundCount:t,extendedRoundCount:e,max:r=16,...n}){const i=E.useMemo(()=>vye(t,e??0,r),[t,r,e]);return d.jsx("span",{...n,children:i})}us.defaultProps={extendedRoundCount:0};const Tv=({player:t})=>d.jsxs("div",{className:"border-b-4 pb-1",style:{borderColor:t.color},children:[d.jsx("p",{className:"text-sm text-neutral-600",children:t.title}),d.jsx("p",{className:"font-bold",children:t.name})]});function Pv({value:t}){return d.jsx(Mt,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const Iv=({matchRound:t,playerIndex:e})=>d.jsxs("span",{children:[t.playerResults[e].isRiichi&&d.jsx("span",{className:"text-xs",children:"立"}),t.resultType===Ve.Ron&&t.playerResults[e].type===yt.Lose&&d.jsx("span",{className:"text-xs",children:"統"}),t.resultType===Ve.Ron&&t.playerResults[e].type===yt.Win&&d.jsx("span",{className:"text-xs",children:"和"}),t.resultType===Ve.SelfDrawn&&t.playerResults[e].type===yt.Win&&d.jsx("span",{className:"text-xs",children:"摸"}),t.resultType===Ve.Exhausted&&t.playerResults[e].type===yt.Win&&d.jsx("span",{className:"text-xs",children:"聽"})]});function xg({players:t,matchRounds:e,...r}){const n=E.useMemo(()=>Object.entries(e??{}),[e]);return d.jsxs("table",{...r,children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[d.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),d.jsx("th",{className:"w-1/4",children:d.jsx(Tv,{player:t[0]})}),d.jsx("th",{className:"w-1/4",children:d.jsx(Tv,{player:t[1]})}),d.jsx("th",{className:"w-1/4",children:d.jsx(Tv,{player:t[2]})}),d.jsx("th",{className:"w-1/4",children:d.jsx(Tv,{player:t[3]})})]})}),d.jsxs("tbody",{children:[n[0]&&d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center"}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:n[0][1].playerResults[0].beforeScore})}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:n[0][1].playerResults[1].beforeScore})}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:n[0][1].playerResults[2].beforeScore})}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:n[0][1].playerResults[3].beforeScore})})]}),n.map(([i,o])=>o.resultType===Ve.Hotfix?d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),d.jsx("td",{className:"text-center",children:o.playerResults[0].afterScore}),d.jsx("td",{className:"text-center",children:o.playerResults[1].afterScore}),d.jsx("td",{className:"text-center",children:o.playerResults[2].afterScore}),d.jsx("td",{className:"text-center",children:o.playerResults[3].afterScore})]},i):d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center whitespace-nowrap",children:d.jsx(us,{roundCount:o.roundCount,extendedRoundCount:o.extendedRoundCount,max:8,className:"px-4"})}),d.jsxs("td",{className:"text-center",children:[d.jsx(Pv,{value:o.playerResults[0].afterScore-o.playerResults[0].beforeScore})," ",d.jsx(Iv,{matchRound:o,playerIndex:"0"})]}),d.jsxs("td",{className:"text-center",children:[d.jsx(Pv,{value:o.playerResults[1].afterScore-o.playerResults[1].beforeScore})," ",d.jsx(Iv,{matchRound:o,playerIndex:"1"})]}),d.jsxs("td",{className:"text-center",children:[d.jsx(Pv,{value:o.playerResults[2].afterScore-o.playerResults[2].beforeScore})," ",d.jsx(Iv,{matchRound:o,playerIndex:"2"})]}),d.jsxs("td",{className:"text-center",children:[d.jsx(Pv,{value:o.playerResults[3].afterScore-o.playerResults[3].beforeScore})," ",d.jsx(Iv,{matchRound:o,playerIndex:"3"})]})]},i)),n[n.length-1]&&d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center whitespace-nowrap px-16"}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:n[n.length-1][1].playerResults[0].afterScore})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:n[n.length-1][1].playerResults[1].afterScore})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:n[n.length-1][1].playerResults[2].afterScore})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:n[n.length-1][1].playerResults[3].afterScore})})]})]})]})}function wye({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n,matchCurrentRoundDoras:i}=Jo(t);return!e||!n?d.jsx("div",{children:"對局讀取失敗。"}):d.jsx("div",{children:d.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[d.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[d.jsxs("div",{className:"shrink-0 rounded-[1rem] bg-black bg-opacity-50 p-2 flex items-stretch gap-x-4",children:[d.jsx("div",{className:"text-[2.5rem] leading-none border-[.25rem] rounded-[.75rem] pb-[0.3em] pt-[0.2em] px-4 border-current flex items-center justify-center",children:d.jsx(us,{roundCount:n.roundCount,max:8})}),d.jsxs("div",{className:"flex flex-col justify-around",children:[d.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-4"})}),d.jsx("div",{children:n.extendedRoundCount??0})]}),d.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-4"})}),d.jsx("div",{children:n.cumulatedThousands??0})]})]}),d.jsx("div",{className:"flex items-center gap-x-2",children:i.map((o,s)=>d.jsx(ko,{className:"w-9 cursor-pointer","data-index":s,children:o},o))})]}),d.jsx("div",{className:"flex-1"})]}),d.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(o=>d.jsx("div",{className:"flex gap-x-2 items-center",children:d.jsx("div",{className:"flex-1 text-[2.5rem]",children:d.jsx(Ha,{player:e.players[o],score:n.playerResults[o].beforeScore,scoreChanges:n.playerResults[o].prevScoreChanges,isEast:Xn(o,n.roundCount),isRiichi:n.playerResults[o].isRiichi,isYellowCarded:n.playerResults[o].isYellowCarded,isRedCarded:n.playerResults[o].isRedCarded})})}))}),d.jsx(xg,{players:e.players,matchRounds:r,className:"w-full table-auto"})]})})}const TF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function Sye({matchId:t}){const e=E.useMemo(()=>`${window.location.origin}/match/${t}/control`,[t]),r=E.useCallback(()=>{window.navigator.clipboard.writeText(TF)},[]);return d.jsxs("div",{className:"flex items-center justify-center gap-x-8",children:[d.jsxs("div",{children:[d.jsx("p",{children:"1. 打開OBS"}),d.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),d.jsxs("p",{children:["- 網址 = 此頁的網址 ",d.jsx("strong",{children:window.location.href}),d.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",d.jsx("br",{})," - 自訂CSS ="," ",d.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[d.jsx("pre",{children:TF}),d.jsx("div",{className:"absolute top-2 right-2",children:d.jsx("button",{type:"button",onClick:r,children:d.jsx("i",{className:"bi bi-copy"})})})]})]})]}),d.jsxs("div",{children:[d.jsx("p",{children:'3. 在管理後台點擊右上角的 "開始OBS" '}),d.jsx("p",{children:"4. 確定"})]}),d.jsx("div",{className:"shrink-0",children:d.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-center underline",children:[d.jsx("img",{className:"block w-32 h-32",src:uP(e),alt:""}),d.jsx("p",{children:"管理後台"})]})})]})}function Eye({han:t,fu:e,yakumanCount:r,...n}){const i=E.useMemo(()=>{if(r&&r>0)return r===1?"役滿":r===2?"兩倍役滿":r===3?"三倍役滿":r===4?"四倍役滿":`${r}倍役滿`;if(t>=11)return"三倍滿";if(t>=8)return"倍滿";if(t>=6)return"跳滿";if(t>=5)return"滿貫";if(t>=4&&typeof e<"u"&&e>=40)return"滿貫";if(t>=3&&typeof e<"u"&&e>=70)return"滿貫";if(typeof e<"u")return},[r,t,e]);return i?d.jsx("div",{...n,children:i}):d.jsxs("div",{...n,children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:t}),d.jsx("span",{children:"飜"})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:e}),d.jsx("span",{children:"符"})]})]})}const Aye=({active:t,color:e="#000000",largeTeamPicUrl:r})=>d.jsxs(d.Fragment,{children:[d.jsx("img",{src:"/images/r.png",className:"w-0 h-0 opacity-0"}),d.jsx("img",{src:"/images/e.png",className:"w-0 h-0 opacity-0"}),d.jsx("img",{src:"/images/a.png",className:"w-0 h-0 opacity-0"}),d.jsx("img",{src:"/images/c.png",className:"w-0 h-0 opacity-0"}),d.jsx("img",{src:"/images/h.png",className:"w-0 h-0 opacity-0"}),d.jsx("img",{src:"/images/score-thousand.png",className:"w-0 h-0 opacity-0"}),t&&d.jsxs("div",{className:"reach-animation",children:[d.jsx("div",{className:"reach-background",style:{background:`linear-gradient(to bottom, transparent, ${e}80 40%, ${e}80 60%, transparent)`}}),d.jsx("div",{className:"reach-animation-logo",style:{backgroundImage:`url("${r}")`}}),d.jsx("div",{className:"reach-animation-bar",style:{backgroundImage:'url("/images/score-thousand.png")'}}),d.jsxs("div",{className:"reach-animation-text",children:[d.jsx("div",{className:"reach-animation-text-character c1",style:{backgroundImage:'url("/images/r.png")'}}),d.jsx("div",{className:"reach-animation-text-character c2",style:{backgroundImage:'url("/images/e.png")'}}),d.jsx("div",{className:"reach-animation-text-character c3",style:{backgroundImage:'url("/images/a.png")'}}),d.jsx("div",{className:"reach-animation-text-character c4",style:{backgroundImage:'url("/images/c.png")'}}),d.jsx("div",{className:"reach-animation-text-character c5",style:{backgroundImage:'url("/images/h.png")'}})]})]})]});function $G({params:{matchId:t}}){const{match:e,matchCurrentRound:r,matchCurrentRoundDoras:n}=Jo(t),i=E.useMemo(()=>{if(!e||!r)return[];const f=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],h=Object.entries(r.playerResults).map(([p,m])=>({playerIndex:p,score:m.afterScore})).sort((p,m)=>m.score-p.score).map((p,m)=>({playerIndex:p.playerIndex,...f[m],point:(p.score-3e4)/1e3+f[m].point})).reduce((p,m)=>(p[m.playerIndex]={point:m.point,ranking:m.ranking},p),{});return["0","1","2","3"].map(p=>({...e.players[p],color:e.players[p].color,currentStatus:{...r.playerResults[p],isEast:Xn(p,r.roundCount),...h[p]}}))},[e,r]),[o,s]=E.useState(null),[a,l]=E.useState(),[c,u]=E.useState({0:!1,1:!1,2:!1,3:!1});return E.useEffect(()=>{["0","1","2","3"].forEach(f=>{typeof(r==null?void 0:r.playerResults[f].isRiichi)<"u"&&r.playerResults[f].isRiichi!==c[f]&&(r.playerResults[f].isRiichi===!0&&(s(f),setTimeout(()=>{s(null)},2800)),u(h=>({...h,[f]:r.playerResults[f].isRiichi})))})},[r==null?void 0:r.playerResults,c]),E.useEffect(()=>{a!==(r==null?void 0:r.code)&&(l(r==null?void 0:r.code),u({0:!1,1:!1,2:!1,3:!1}))},[r==null?void 0:r.code,a]),!e||!r?d.jsx("div",{className:"text-current",children:"對局讀取失敗。"}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"relativew-screen h-screen mx-auto py-8 overflow-hidden text-[4.8rem] transition-opacity",style:{background:"linear-gradient(transparent, transparent 73%, rgba(0, 0, 0, 0.4))",opacity:o!==null?0:1},children:[d.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[d.jsxs("div",{className:"relative text-[0.6em] p-2 pl-10 pr-[1em] flex items-center gap-x-8",style:{transition:"width 0.3s, left 1.5s, opacity 1.5s",left:e.hideHeader?"-100%":"0",opacity:e.hideHeader?"0":"1",background:"linear-gradient(280deg, transparent, transparent 0.5em, #00000080 0.5em, #00000080 100%)"},children:[d.jsxs("div",{className:"",children:[d.jsx("div",{className:"text-[0.5em]",children:e.name}),d.jsxs("div",{className:"flex gap-x-8 items-center",children:[d.jsx("div",{className:"min-w-[3.5em]",children:d.jsx(us,{roundCount:r.roundCount,max:8})}),d.jsxs("div",{className:"flex flex-col justify-around gap-2",children:[d.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-[0.25em] mt-[0.1em]"})}),d.jsx("div",{className:"text-[0.45em] leading-none",children:r.extendedRoundCount??0})]}),d.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-[0.25em] mt-[0.1em]"})}),d.jsx("div",{className:"text-[0.45em] leading-none",children:r.cumulatedThousands??0})]})]})]})]}),d.jsx("div",{className:"flex items-center gap-x-2",children:n.map(f=>d.jsx(ko,{className:"w-[1.4em] animate-[fadeInFromLeft_0.5s_ease-in-out]",children:f},f))})]}),d.jsx("div",{className:"flex-1"})]}),d.jsx("div",{className:"flex items-center justify-center mt-20",children:d.jsx("div",{className:"body-hidden mx-20 text-[16px]",children:d.jsx(Sye,{matchId:t})})}),d.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 items-end gap-x-8 text-white animate-[fadeInFromBottom_1s_ease-in-out]",style:{opacity:e.activeResultDetail?0:1,bottom:e.activeResultDetail?"-150px":0,transition:"opacity 0.5s, bottom 0.5s"},children:i.map(f=>d.jsxs("div",{className:"w-[5.35em]",children:[d.jsx(Ha,{player:f,score:f.currentStatus.afterScore,scoreChanges:f.currentStatus.scoreChanges,isEast:f.currentStatus.isEast,isRiichi:f.currentStatus.isRiichi&&r.resultType===Ve.Unknown,waitingTiles:r.resultType===Ve.Unknown?f.currentStatus.waitingTiles:[],isYellowCarded:f.currentStatus.isYellowCarded,isRedCarded:f.currentStatus.isRedCarded,ranking:f.currentStatus.ranking,point:f.currentStatus.point,showPointAndRanking:!!e.showPoints}),d.jsx("img",{src:f.largeTeamPicUrl,className:"w-0 h-0"})]},f.name))}),e.activeResultDetail&&d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 gap-x-8 text-white transition-opacity animate-[fadeInFromBottom_1s_ease-in-out]",children:[d.jsx("div",{className:"w-[5.35em]",children:d.jsx(Ha,{player:e.players[e.activeResultDetail.winnerPlayerIndex],score:r.playerResults[e.activeResultDetail.winnerPlayerIndex].afterScore})}),d.jsxs("div",{className:"col-span-3 bg-black bg-opacity-50 py-6 px-8 text-[0.5em] flex items-stretch gap-x-4",children:[d.jsx("div",{className:`flex-1 flex flex-wrap gap-x-[0.75em] ${e.activeResultDetail.yakumanCount>0?"self-center justify-center":""}`,children:e.activeResultDetail.yakus.map(({label:f})=>d.jsx("span",{children:f},f))}),d.jsx("div",{className:"shrink-0 w-px bg-neutral-200"}),d.jsx("div",{className:"shrink-0 min-w-[3em] self-center text-green-400 text-[1.4em] text-center",children:d.jsx(Eye,{han:e.activeResultDetail.han,fu:e.activeResultDetail.fu,yakumanCount:e.activeResultDetail.yakumanCount})})]})]})]}),d.jsx("div",{className:"fixed inset-0 pointer-events-none",children:d.jsx(Aye,{active:o!==null,color:o&&i[o].color,largeTeamPicUrl:o&&i[o].largeTeamPicUrl})})]})}function Kn({open:t,title:e,children:r,onClose:n,hideCloseButton:i}){const o=E.useRef(null);E.useEffect(()=>{if(o!=null&&o.current&&t){o.current.showModal();const{current:a}=o;return()=>{a.close()}}},[t]);const s=E.useCallback(()=>{n==null||n()},[n]);return d.jsx("dialog",{ref:o,onClose:s,children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex mb-4",children:[d.jsx("div",{className:"flex-1 items-center font-bold text-lg",children:e}),!i&&d.jsx("div",{className:"shrink-0",children:d.jsx("button",{type:"button",className:"absolute top-4 right-4",onClick:s,children:d.jsx("i",{className:"bi bi-x"})})})]}),r]})})}const TO=()=>d.jsx("div",{className:"inline-block w-4 h-4 border-2 border-neutral-800 border-l-transparent rounded-full animate-spin"});function Cye({title:t,children:e,okButtonText:r="確認",cancelButtonText:n="取消",onClickOk:i,onClickCancel:o,...s}){const[a,l]=E.useState(!1),c=E.useCallback(()=>{i&&(l(!0),i().finally(()=>{l(!1)}))},[i]);return d.jsxs(Kn,{title:t,...s,children:[d.jsx("div",{className:"mb-4",children:e}),d.jsxs("div",{className:"flex gap-x-4",children:[d.jsx("div",{className:"flex-1",children:d.jsx(Re,{type:"button",color:"secondary",className:"w-full",onClick:o,disabled:a,children:n})}),d.jsx("div",{className:"flex-1",children:d.jsx(Re,{type:"button",color:"danger",className:"w-full",onClick:c,disabled:a,children:a?d.jsx(TO,{}):r})})]})]})}const Tye={isShowConfirmDialog:!1,setIsShowConfirmDialog:()=>{},confirmDialogOptions:{title:"警告"},setConfirmDialogOptions:()=>{}},DG=E.createContext(Tye);function Pye({children:t}){const[e,r]=E.useState(!1),[n,i]=E.useState({title:"警告"}),o=E.useMemo(()=>({isShowConfirmDialog:e,setIsShowConfirmDialog:r,confirmDialogOptions:n,setConfirmDialogOptions:i}),[n,e]),s=E.useCallback(()=>{r(!1)},[]);return d.jsxs(DG.Provider,{value:o,children:[t,d.jsx(Cye,{open:e,okButtonText:n.okButtonText,cancelButtonText:n.cancelButtonText,onClickOk:n.onClickOk,onClickCancel:n.onClickCancel,onClose:s,...n,hideCloseButton:!0,children:n.content})]})}const Iye=()=>{const t=E.useContext(DG);return{showConfirmDialog:E.useCallback(r=>{const n=async()=>(r.onClickOk??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)}),i=async()=>(r.onClickCancel??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)});t.setConfirmDialogOptions({...r,onClickOk:n,onClickCancel:i}),t.setIsShowConfirmDialog(!0)},[t])}};function MG(){var t=E.useRef(!1),e=E.useCallback(function(){return t.current},[]);return E.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e}function qw(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={loading:!1});var n=E.useRef(0),i=MG(),o=E.useState(r),s=o[0],a=o[1],l=E.useCallback(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var f=++n.current;return s.loading||a(function(h){return hx(hx({},h),{loading:!0})}),t.apply(void 0,c).then(function(h){return i()&&f===n.current&&a({value:h,loading:!1}),h},function(h){return i()&&f===n.current&&a({error:h,loading:!1}),h})},e);return[s,l]}function Nye(t,e){e===void 0&&(e=[]);var r=qw(t,e,{loading:!0}),n=r[0],i=r[1];return E.useEffect(function(){i()},[i]),n}var eA=function(){};function tA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function rA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var kye=typeof window<"u",Oye=function(t,e){return typeof e=="boolean"?e:!t},Rye=function(t){return E.useReducer(Oye,t)};const Eo=Rye;var jye=function(t,e){return function(r,n){var i=r.getData("text/uri-list");if(i){(t.onUri||eA)(i,n);return}if(r.files&&r.files.length){(t.onFiles||eA)(Array.from(r.files),n);return}r.items&&r.items.length&&r.items[0].getAsString(function(o){e&&(t.onText||eA)(o,n)})}},$ye=function(t,e){return{onDragOver:function(r){r.preventDefault()},onDragEnter:function(r){r.preventDefault(),e(!0)},onDragLeave:function(){e(!1)},onDrop:function(r){r.preventDefault(),r.persist(),e(!1),t(r.dataTransfer,r)},onPaste:function(r){r.persist(),t(r.clipboardData,r)}}},Dye=function(t){t===void 0&&(t={});var e=t.onFiles,r=t.onText,n=t.onUri,i=MG(),o=E.useState(!1),s=o[0],a=o[1],l=E.useMemo(function(){return jye(t,i())},[e,r,n]),c=E.useMemo(function(){return $ye(l,a)},[l,a]);return[c,{over:s}]};const Mye=Dye;var Fye=function(t,e){var r=E.useRef(function(){});E.useEffect(function(){r.current=t}),E.useEffect(function(){if(e!==null){var n=setInterval(function(){return r.current()},e||0);return function(){return clearInterval(n)}}},[e])};const Lye=Fye;var PF=function(t,e){return new URLSearchParams(t).get(e)},Bye=function(t){var e=window.location,r=E.useState(function(){return PF(e.search,t)}),n=r[0],i=r[1];return E.useEffect(function(){var o=function(){i(PF(e.search,t))};return tA(window,"popstate",o),tA(window,"pushstate",o),tA(window,"replacestate",o),function(){rA(window,"popstate",o),rA(window,"pushstate",o),rA(window,"replacestate",o)}},[]),n},Uye=function(){return null};const IF=kye?Bye:Uye,Vye=[["1m","2m","3m","4m","5m","6m","7m","8m","9m","0m"],["1p","2p","3p","4p","5p","6p","7p","8p","9p","0p"],["1s","2s","3s","4s","5s","6s","7s","8s","9s","0s"],["1z","2z","3z","4z","5z","6z","7z"]],NF={m:0,p:1,s:2,z:3},Wye=(t,e)=>{const[r,n]=[t[0],t[1]],[i,o]=[e[0],e[1]];return n!==o?NF[n]-NF[o]:parseInt(r,10)-parseInt(i,10)};function kF({onSubmit:t,onRemove:e,canRemove:r,hideRedTiles:n,multiple:i,defaultValue:o}){const[s,a]=E.useState([]),l=E.useCallback(f=>{var p;const h=(p=f.currentTarget)==null?void 0:p.getAttribute("data-key");h&&a(i?m=>{const y=m.indexOf(h);if(y===-1)return[...m,h].sort(Wye);const g=[...m];return g.splice(y,1),g}:[h])},[i]),c=E.useCallback(()=>{s&&t&&(t==null||t(s),a([]))},[t,s]),u=E.useCallback(()=>{r&&(e==null||e(),a([]))},[r,e]);return E.useEffect(()=>{a(o??[])},[o]),d.jsxs("div",{children:[d.jsx("div",{className:`mb-4 grid ${n?"grid-cols-9":"grid-cols-10"} gap-1 lg:gap-x-2 lg:gap-y-4 items-center text-center`,children:Vye.map(f=>f.map(h=>(!h.startsWith("0")||!n)&&d.jsx("button",{type:"button",onClick:l,"data-key":h,className:`${s.indexOf(h)!==-1?"bg-blue-400":"bg-black bg-opacity-20"} rounded p-1 lg:p-2`,children:d.jsx(ko,{children:h})})))}),d.jsxs("div",{className:"flex gap-x-4",children:[r&&d.jsx("div",{className:"flex-1",children:d.jsx(Re,{className:"w-full",type:"button",color:"secondary",onClick:u,children:"移除"})}),d.jsx("div",{className:"flex-1",children:d.jsx(Re,{className:"w-full",type:"button",color:"primary",onClick:c,disabled:s.length===0,children:"確定"})})]})]})}const Nv=({teamPlayer:t})=>d.jsx(Ha,{player:ap(t),score:25e3}),zye=({matchDTO:t})=>{const e=m9(),r=E.useCallback(async()=>{if(!confirm("確定資料都正確了嗎？要開始對局了嗎？"))return;const n={code:t._id,name:t.name,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:{startingScore:t.tournament.startingScore,isManganRoundUp:t.tournament.startingScore?"1":"0",yakuMax:t.tournament.yakuMax,yakumanMax:t.tournament.yakumanMax},players:{0:ap(t.playerEast),1:ap(t.playerSouth),2:ap(t.playerWest),3:ap(t.playerNorth)},activeResultDetail:null};await e.set(`matches/${t._id}`,n);const i=parseInt(t.tournament.startingScore),o={matchId:t._id,code:Nx(t._id,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await e.push("matchRounds",o),await e.set("obs/1",{matchId:t._id})},[t._id,t.name,t.playerEast,t.playerNorth,t.playerSouth,t.playerWest,t.tournament.startingScore,t.tournament.yakuMax,t.tournament.yakumanMax,e]);return d.jsx("div",{className:"container mx-auto max-w-screen-md py-16",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-red-500 p-4 text-white space-y-2",children:[d.jsx("div",{className:"text-center text-6xl",children:d.jsx("i",{className:"bi bi-exclamation-triangle"})}),d.jsxs("p",{className:"text-center text-xl",children:["這是開始直播前的最後機會，請檢查以下內容是否完全正確。",d.jsx("br",{}),"一旦對局開始，要修改內容就很麻煩。",d.jsx("br",{}),d.jsx("br",{}),"如果要修改，請在資料庫修改後，刷新此頁面。"]})]}),d.jsxs("h4",{className:"text-3xl",children:[d.jsx("span",{className:"text-neutral-600",children:"對局名稱:"})," ",d.jsx("span",{className:"font-bold",children:t.name})]}),d.jsxs("div",{className:"grid grid-cols-10 gap-x-2",children:[d.jsxs("div",{className:"col-span-4 col-start-4",children:[d.jsx("div",{className:"text-[48px]",children:d.jsx(Nv,{teamPlayer:t.playerWest})}),d.jsx("p",{className:"text-center text-4xl",children:"西"})]}),d.jsxs("div",{className:"col-span-4 col-start-1 flex items-center gap-x-2",children:[d.jsx("div",{className:"flex-1 text-[48px]",children:d.jsx(Nv,{teamPlayer:t.playerNorth})}),d.jsx("div",{className:"shrink-0 text-4xl",children:"北"})]}),d.jsx("div",{className:"col-span-2"}),d.jsxs("div",{className:"col-span-4 flex items-center gap-x-2",children:[d.jsx("div",{className:"shrink-0 text-4xl",children:"南"}),d.jsx("div",{className:"flex-1 text-[48px]",children:d.jsx(Nv,{teamPlayer:t.playerSouth})})]}),d.jsxs("div",{className:"col-span-4 col-start-4",children:[d.jsx("p",{className:"text-center text-4xl",children:"東"}),d.jsx("div",{className:"text-[48px]",children:d.jsx(Nv,{teamPlayer:t.playerEast})})]})]}),d.jsxs("div",{className:"text-2xl",children:[d.jsx("span",{className:"text-neutral-600",children:"聯賽:"})," ",d.jsx("span",{className:"font-bold",children:t.tournament.name})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[d.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"起始點數"}),d.jsx("p",{className:"text-4xl",children:t.tournament.startingScore})]}),d.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[d.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"切上滿貫"}),d.jsx("p",{className:"text-4xl",children:t.tournament.isManganRoundUp?"有":"沒有"})]}),d.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[d.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"翻數上限"}),d.jsx("p",{className:"text-4xl",children:aye(t.tournament.yakuMax)})]}),d.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[d.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"役滿上限"}),d.jsx("p",{className:"text-4xl",children:lye(t.tournament.yakumanMax)})]})]}),d.jsx("div",{className:"pt-8",children:d.jsx(Re,{className:"w-full",size:"xlarge",variant:"contained",color:"success",onClick:r,children:"確認以上內容無誤，開始對局"})})]})})},Gye=({players:t,currentRound:e,onAction:r})=>{const n=E.useCallback(i=>{const o=i.currentTarget.getAttribute("data-player-index"),s=i.currentTarget.getAttribute("data-action");r(o,s)},[r]);return d.jsx("div",{className:"space-y-2",children:["0","1","2","3"].map(i=>{var o,s;return d.jsx("table",{className:"w-full border border-black ring-2 ring-transparent data-[east='1']:ring-red-500 bg-white","data-east":Xn(i,e.roundCount)?"1":"0",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsxs("td",{className:"p-1 text-white w-32 relative",style:{background:t[i].color},children:[d.jsx("button",{className:"absolute text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ffe100",width:"2rem",height:"2.5rem",top:"0rem",left:"-2.5rem",opacity:e.playerResults[i].isYellowCarded?1:.35},"data-player-index":i,"data-action":"yellow-card",onClick:n,children:"黃牌"}),d.jsx("button",{className:"absolute text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ff1900",width:"2rem",height:"2.5rem",top:"2.7rem",left:"-2.5rem",opacity:e.playerResults[i].isRedCarded?1:.35},"data-player-index":i,"data-action":"red-card",onClick:n,children:"紅牌"}),d.jsxs("div",{className:"flex gap-x-1 items-center w-32",children:[d.jsx("img",{className:"shrink-0 w-8 h-8 inline-block",src:t[i].teamPicUrl,alt:t[i].title}),d.jsx("img",{className:"shrink-0 w-[1.44rem] h-8 inline-block",src:t[i].proPicUrl,alt:t[i].name}),d.jsxs("div",{className:"flex-1 align-middle overflow-hidden",children:[d.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].title}),d.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].nickname||t[i].name})]})]})]}),d.jsx("td",{className:"px-2 border-b border-black",colSpan:2,children:d.jsxs("button",{className:"py-2 text-left block","data-player-index":i,"data-action":"waitingTile",onClick:n,children:[d.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),d.jsx("div",{className:"inline-block space-x-1",children:(o=e.playerResults[i].waitingTiles)==null?void 0:o.map(a=>d.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:a},a))})]})}),d.jsxs("td",{className:"whitespace-nowrap w-0 space-y-1 pr-1",rowSpan:2,children:[d.jsxs("div",{className:"space-x-1",children:[d.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"reveal",onClick:n,"data-active":e.playerResults[i].isRevealed?"1":"0",disabled:e.playerResults[i].isRiichi,children:"副露"}),d.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-before",onClick:n,children:["和",t[NG(i)].nickname||"上家"]})]}),d.jsxs("div",{className:"space-x-1",children:[d.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"riichi",onClick:n,"data-active":e.playerResults[i].isRiichi?"1":"0",disabled:e.playerResults[i].isRevealed,children:"立直"}),d.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-opposite",onClick:n,children:["和",t[OG(i)].nickname||"對家"]})]}),d.jsxs("div",{className:"space-x-1",children:[d.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-self",onClick:n,children:"自摸"}),d.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-after",onClick:n,children:["和",t[kG(i)].nickname||"下家"]})]})]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"p-1 space-x-1 text-white text-4xl",style:{background:t[i].color},children:e.playerResults[i].afterScore}),d.jsx("td",{className:"px-2",children:d.jsxs("button",{className:"py-2 text-left text-xl","data-player-index":i,"data-action":"yaku",onClick:n,children:[d.jsx("span",{className:"mr-2 text-xl",children:"役"}),d.jsx("div",{className:"inline-block space-x-1",children:(s=e.playerResults[i].detail.yakus)==null?void 0:s.map(({label:a})=>d.jsx("span",{children:a},a))})]})}),d.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[i].detail.dora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-minus",onClick:n,children:"-"}),"寶",e.playerResults[i].detail.dora,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-plus",onClick:n,children:"+"})]}),d.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[i].detail.redDora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-minus",onClick:n,children:"-"}),"赤",e.playerResults[i].detail.redDora??0,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-plus",onClick:n,children:"+"})]})]})})]})]})},i)})})},qye=[["0","3","1","2"],["3","2","0","1"],["2","1","3","0"],["1","0","2","3"]],Hye=({players:t,currentRound:e,onAction:r})=>{var l,c,u,f;const[n,i]=E.useState(0),o=E.useMemo(()=>qye[n],[n]),s=E.useCallback(h=>{const p=h.currentTarget.getAttribute("data-player-index"),m=h.currentTarget.getAttribute("data-action");r(p,m)},[r]),a=E.useCallback(()=>{i(h=>(h+1)%4)},[]);return d.jsxs("div",{children:[d.jsx("div",{className:"text-center mb-4",children:d.jsxs(Re,{size:"small",onClick:a,children:["逆時針旋轉 ",d.jsx("i",{className:"bi bi-arrow-counterclockwise"})]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx("table",{className:"w-full border border-black",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[0]].color},children:[d.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[0]].teamPicUrl,alt:t[o[0]].title}),d.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[0]].proPicUrl,alt:t[o[0]].name}),d.jsxs("div",{className:"inline-block align-middle",children:[d.jsx("p",{children:t[o[0]].title}),d.jsx("p",{children:t[o[0]].name})]})]}),d.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[0]].color},children:e.playerResults[o[0]].afterScore})]}),d.jsx("tr",{children:d.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:d.jsxs("button",{className:"py-2 text-left block","data-player-index":o[0],"data-action":"waitingTile",onClick:s,children:[d.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),d.jsx("div",{className:"inline-block space-x-1",children:(l=e.playerResults[o[0]].waitingTiles)==null?void 0:l.map(h=>d.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-full px-2",children:d.jsx("span",{children:"役"})}),d.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[0]].detail.dora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[0]].detail.dora,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),d.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[0]].detail.redDora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[0]].detail.redDora??0,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),d.jsx("tr",{children:d.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:d.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[0]].isRevealed?"1":"0",disabled:e.playerResults[o[0]].isRiichi,children:"副露"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-self",onClick:s,children:"自摸"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-before",onClick:s,children:"和上家←"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[0]].isRiichi?"1":"0",disabled:e.playerResults[o[0]].isRevealed,children:"立直"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-after",onClick:s,children:"和下家↑"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-opposite",onClick:s,children:"和對家↖"})]})})})]})}),d.jsx("table",{className:"w-full border border-black",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[1]].color},children:[d.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[1]].teamPicUrl,alt:t[o[1]].title}),d.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[1]].proPicUrl,alt:t[o[1]].name}),d.jsxs("div",{className:"inline-block align-middle",children:[d.jsx("p",{children:t[o[1]].title}),d.jsx("p",{children:t[o[1]].name})]})]}),d.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[1]].color},children:e.playerResults[o[1]].afterScore})]}),d.jsx("tr",{children:d.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:d.jsxs("button",{className:"py-2 text-left block","data-player-index":o[1],"data-action":"waitingTile",onClick:s,children:[d.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),d.jsx("div",{className:"inline-block space-x-1",children:(c=e.playerResults[o[1]].waitingTiles)==null?void 0:c.map(h=>d.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-full px-2",children:d.jsx("span",{children:"役"})}),d.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[1]].detail.dora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[1]].detail.dora,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),d.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[1]].detail.redDora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[1]].detail.redDora??0,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),d.jsx("tr",{children:d.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:d.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-after",onClick:s,children:"→和下家"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-self",onClick:s,children:"自摸"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[1]].isRevealed?"1":"0",disabled:e.playerResults[o[1]].isRiichi,children:"副露"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-opposite",onClick:s,children:"↗和對家"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-before",onClick:s,children:"↑和上家"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[1]].isRiichi?"1":"0",disabled:e.playerResults[o[1]].isRevealed,children:"立直"})]})})})]})}),d.jsx("table",{className:"w-full border border-black",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:d.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[2]].isRiichi?"1":"0",disabled:e.playerResults[o[2]].isRevealed,children:"立直"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-before",onClick:s,children:"和上家↓"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-opposite",onClick:s,children:"和對家↙"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[2]].isRevealed?"1":"0",disabled:e.playerResults[o[2]].isRiichi,children:"副露"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-self",onClick:s,children:"自摸"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-after",onClick:s,children:"和下家←"})]})})}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-full px-2",children:d.jsx("span",{children:"役"})}),d.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[2]].detail.dora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[2]].detail.dora,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),d.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[2]].detail.redDora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[2]].detail.redDora??0,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),d.jsx("tr",{children:d.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:d.jsxs("button",{className:"py-2 text-left block","data-player-index":o[2],"data-action":"waitingTile",onClick:s,children:[d.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),d.jsx("div",{className:"inline-block space-x-1",children:(u=e.playerResults[o[2]].waitingTiles)==null?void 0:u.map(h=>d.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),d.jsxs("tr",{children:[d.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[2]].color},children:[d.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[2]].teamPicUrl,alt:t[o[2]].title}),d.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[2]].proPicUrl,alt:t[o[2]].name}),d.jsxs("div",{className:"inline-block align-middle",children:[d.jsx("p",{children:t[o[2]].title}),d.jsx("p",{children:t[o[2]].name})]})]}),d.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[2]].color},children:e.playerResults[o[2]].afterScore})]})]})}),d.jsx("table",{className:"w-full border border-black",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:d.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-opposite",onClick:s,children:"↘和對家"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-after",onClick:s,children:"↓和下家"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[3]].isRiichi?"1":"0",disabled:e.playerResults[o[3]].isRevealed,children:"立直"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-before",onClick:s,children:"→和上家"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-self",onClick:s,children:"自摸"}),d.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[3]].isRevealed?"1":"0",disabled:e.playerResults[o[3]].isRiichi,children:"副露"})]})})}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-full px-2",children:d.jsx("span",{children:"役"})}),d.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[3]].detail.dora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[3]].detail.dora,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),d.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[3]].detail.redDora>0?"1":"0",children:[d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[3]].detail.redDora,d.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),d.jsx("tr",{children:d.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:d.jsxs("button",{className:"py-2 text-left block","data-player-index":o[3],"data-action":"waitingTile",onClick:s,children:[d.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),d.jsx("div",{className:"inline-block space-x-1",children:(f=e.playerResults[o[3]].waitingTiles)==null?void 0:f.map(h=>d.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),d.jsxs("tr",{children:[d.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[3]].color},children:[d.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[3]].teamPicUrl,alt:t[o[3]].title}),d.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[3]].proPicUrl,alt:t[o[3]].name}),d.jsxs("div",{className:"inline-block align-middle",children:[d.jsx("p",{children:t[o[3]].title}),d.jsx("p",{children:t[o[3]].name})]})]}),d.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[3]].color},children:e.playerResults[o[3]].afterScore})]})]})})]})]})},Kye=({tabs:t,onChangeValue:e,defaultValue:r})=>{const[n,i]=E.useState(r),o=E.useCallback(s=>{const a=s.currentTarget.getAttribute("data-value");i(a),e==null||e(a)},[e]);return d.jsx("div",{className:"border-b border-neutral-400",children:t.map(s=>d.jsx("button",{className:"py-2 px-4 border-b-2 border-transparent hover:bg-neutral-200 rounded-t data-[active='1']:border-teal-600 data-[active='1']:text-teal-800 data-[active='1']:bg-teal-100","data-value":s.value,"data-active":n===s.value?"1":"0",onClick:o,children:s.label},s.value))})};function FG({onChange:t,onChangeChecked:e,className:r,...n}){const i=E.useCallback(o=>{t==null||t(o),e==null||e(o.currentTarget.checked)},[t,e]);return d.jsx("input",{className:"mt-[0.3rem] mr-2 h-3.5 w-8 appearance-none rounded-[0.4375rem] bg-neutral-300 dark:bg-neutral-600 before:pointer-events-none before:absolute before:h-3.5 before:w-3.5 before:rounded-full before:bg-transparent before:content-[''] after:absolute after:z-[2] after:-mt-[0.1875rem] after:h-5 after:w-5 after:rounded-full after:border-none after:bg-neutral-100 dark:after:bg-neutral-400 after:shadow-[0_0px_3px_0_rgb(0_0_0_/_7%),_0_2px_2px_0_rgb(0_0_0_/_4%)] after:transition-[background-color_0.2s,transform_0.2s] after:content-[''] checked:bg-blue-600 dark:checked:bg-blue-600 checked:after:absolute checked:after:z-[2] checked:after:-mt-[3px] checked:after:ml-[1.0625rem] checked:after:h-5 checked:after:w-5 checked:after:rounded-full checked:after:border-none checked:after:bg-blue-600 dark:checked:after:bg-blue-600 checked:after:shadow-[0_3px_1px_-2px_rgba(0,0,0,0.2),_0_2px_2px_0_rgba(0,0,0,0.14),_0_1px_5px_0_rgba(0,0,0,0.12)] checked:after:transition-[background-color_0.2s,transform_0.2s] checked:after:content-[''] hover:cursor-pointer focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[3px_-1px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-5 focus:after:w-5 focus:after:rounded-full focus:after:content-[''] checked:focus:border-blue-600 checked:focus:bg-blue-600 checked:focus:before:ml-[1.0625rem] checked:focus:before:scale-100 checked:focus:before:shadow-[3px_-1px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s]",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:i,...n})}function kx({han:t,fu:e,yakumanCount:r,yakumanCountMax:n=10,raw:i,isManganRoundUp:o,...s}){const a=E.useMemo(()=>{if(r&&r>0){const l=Math.min(n,r);return l===1?"役滿":l===2?"兩倍役滿":l===3?"三倍役滿":l===4?"四倍役滿":`${l}倍役滿`}return i?typeof e<"u"&&t<=4?`${t}飜${e}符`:`${t}飜`:t>=11?"三倍滿":t>=8?"倍滿":t>=6?"跳滿":t>=5||t>=4&&typeof e<"u"&&(e>=40||o&&e>=30)||t>=3&&typeof e<"u"&&(e>=70||o&&e>=60)?"滿貫":typeof e<"u"?`${t}飜${e}符`:`${t}飜`},[r,i,t,e,o,n]);return d.jsx("div",{...s,children:a})}const kv=({options:t,value:e,onChange:r,disabled:n})=>{const[i,o]=E.useState(0),s=E.useMemo(()=>t[i],[i,t]),a=E.useCallback(()=>{const c=Math.max(0,i-1);o(c),r==null||r(t[c].value)},[i,r,t]),l=E.useCallback(()=>{const c=Math.min(t.length-1,i+1);o(c),r==null||r(t[c].value)},[i,r,t]);return E.useEffect(()=>{if(typeof e<"u"&&e!==s.value){const c=t.findIndex(u=>u.value===e);c!==-1&&o(c)}},[s.value,t,e]),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:a,disabled:n||i===0,children:d.jsx("i",{className:"bi bi-dash-circle"})})}),d.jsx("div",{className:"flex-1 text-center text-2xl",children:s.label}),d.jsx("div",{className:"shrink-0",children:d.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:l,disabled:n||i===t.length-1,children:d.jsx("i",{className:"bi bi-plus-circle"})})})]})},$u=[{id:"riichi",label:"立直",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e["double-riichi"],group:"riichi"},{id:"double-riichi",label:"雙立直",han:2,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e.riichi,group:"riichi"},{id:"ippatsu",label:"一發",han:1,hanIfOpened:0,disableFn:({raw:t})=>!(t.riichi||t["double-riichi"])||!!t.chankan,group:"riichi"},{id:"menzenchin-tsumohou",label:"門前清自摸和",han:1,hanIfOpened:0,hidden:!0,group:"menzenchin-tsumohou"},{id:"tanyao",label:"斷么九",han:1,hanIfOpened:1,disableFn:({raw:t})=>!!t.chantaiyao||!!t["junchan-taiyao"]||!!t["yakuhai-east"]||!!t["yakuhai-south"]||!!t["yakuhai-west"]||!!t["yakuhai-north"]||!!t["yakuhai-haku"]||!!t["yakuhai-hatsu"]||!!t["yakuhai-chun"]||!!t.honroutou||!!t.honitsu||!!t.ittsu,group:"common"},{id:"pinfu",label:"平和",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.chiitoitsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"]||!!e.toitoi,group:"common"},{id:"yakuhai-east",label:"東",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!Xn(e,t)&&!CG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-east",label:"雙東",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-south",label:"南",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!SG(e,t)&&!TG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-south",label:"雙南",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-west",label:"西",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!EG(e,t)&&!PG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-west",label:"雙西",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-north",label:"北",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!AG(e,t)&&!IG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-north",label:"雙北",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-haku",label:"白",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-hatsu",label:"發",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-chun",label:"中",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"shousangen",label:"小三元",han:2,hanIfOpened:2,disableFn:({raw:t})=>[t["yakuhai-haku"],t["yakuhai-hatsu"],t["yakuhai-chun"]].filter(e=>!!e).length!==2,group:"yakuhai"},{id:"haitei-raoyue",label:"海底撈月",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e["rinshan-kaihou"],hiddenIfDisabled:!0,group:"luck"},{id:"houtei-raoyui",label:"河底撈魚",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"rinshan-kaihou",label:"嶺上開花",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e.pinfu||!!e.chiitoitsu||!!e.ryanpeikou||!!e["haitei-raoyue"],hiddenIfDisabled:!0,group:"luck"},{id:"chankan",label:"搶槓",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"chiitoitsu",label:"七對子",han:2,hanIfOpened:0,overrideFu:25,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.ryanpeikou||!!e.pinfu||!!e["sanshku-doujun"]||!!e.ittsu||!!e.chantaiyao||!!e["junchan-taiyao"]||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["rinshan-kaihou"],group:"peikou"},{id:"iipeikou",label:"一盃口",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.ryanpeikou||!!e.chiitoitsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu,group:"peikou"},{id:"ryanpeikou",label:"二盃口",han:3,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.chiitoitsu||!!e["rinshan-kaihou"]||!!e["sanshku-doujun"]||!!e.ittsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"],group:"peikou"},{id:"sanshku-doujun",label:"三色同順",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.ittsu||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chinitsu||!!t.honitsu||!!t.toitoi,group:"row"},{id:"ittsu",label:"一氣通貫",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.tanyao||!!t["sanshku-doujun"]||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.toitoi,group:"row"},{id:"honitsu",label:"混一色",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.chinitsu||!!t.tanyao||!!t["junchan-taiyao"]||!!t["sanshku-doujun"]||!!t["sanshku-doukou"],group:"itsu"},{id:"chinitsu",label:"清一色",han:6,hanIfOpened:5,disableFn:({raw:t})=>!!t.honitsu||!!t.honroutou||!!t.chantaiyao||!!t["sanshku-doukou"],group:"itsu"},{id:"chantaiyao",label:"混全帶么九",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t.tanyao||!!t["junchan-taiyao"]||!!t.honroutou||!!t.chiitoitsu||!!t.chinitsu||!!t.ittsu||!!t.toitoi,group:"taiyao"},{id:"junchan-taiyao",label:"純全帶么九",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t.honroutou||!!t.chiitoitsu||!!t.ittsu||!!t.honitsu||!!t.toitoi,group:"taiyao"},{id:"honroutou",label:"混老頭",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou,group:"taiyao"},{id:"toitoi",label:"對對和",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sanshku-doukou",label:"三色同刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou||!!t.honitsu,group:"column"},{id:"sanankou",label:"三暗刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sankantsu",label:"三槓子",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"kokushi-musou",label:"國士無雙",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou-jsuan-men"],group:"kokushi-musou"},{id:"kokushi-musou-jsuan-men",label:"國士無雙十三面",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou"],group:"kokushi-musou"},{id:"daisangen",label:"大三元",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"shousuushii",label:"小四喜",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"daisuushii",label:"大四喜",han:26,hanIfOpened:26,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.shousuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"chinroutou",label:"清老頭",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"ryuuiisou",label:"綠一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tsuuiisou,group:"ryuuiisou"},{id:"tsuuiisou",label:"字一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"combo"},{id:"suuankou",label:"四暗刻",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e["suuankou-dannki"],group:"combo"},{id:"suuankou-dannki",label:"四暗刻單騎",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e.suuankou,group:"combo"},{id:"suukantsu",label:"四槓子",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tenhou||!!t.chiihou||!!t.ronhou,group:"combo"},{id:"chuuren-poutou",label:"九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["pure-chuuren-poutou"],group:"chuuren-poutou"},{id:"pure-chuuren-poutou",label:"純正九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["chuuren-poutou"],group:"chuuren-poutou"},{id:"tenhou",label:"天和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!Xn(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"chiihou",label:"地和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!Xn(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"ronhou",label:"人和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!Xn(r,e)||n==="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"}],OF=$u.filter(({yakumanCount:t,hidden:e})=>!t&&!e),Yye=OF.map(t=>t.group).filter((t,e)=>OF.findIndex(({group:r})=>t===r)===e),RF=$u.filter(({yakumanCount:t,hidden:e})=>typeof t<"u"&&t>0&&!e),Qye=RF.map(t=>t.group).filter((t,e)=>RF.findIndex(({group:r})=>t===r)===e),jF=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12",value:"12"},{label:"13",value:"13"},{label:"14",value:"14"},{label:"15",value:"15"},{label:"16",value:"16"},{label:"17",value:"17"},{label:"18",value:"18"}],Xye=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],Jye=[{label:"30符",value:"30"},{label:"40符",value:"40"},{label:"50符",value:"50"},{label:"60符",value:"60"},{label:"70符",value:"70"},{label:"80符",value:"80"},{label:"90符",value:"90"},{label:"100符",value:"100"},{label:"110符",value:"110"},{label:"20符",value:"20"},{label:"25符",value:"25"}],$F=({yaku:t,active:e,isRevealed:r,disabled:n,onClick:i,hiddenIfDisabled:o})=>n&&o?d.jsx(d.Fragment,{}):d.jsx("button",{"data-id":t.id,"data-han":r?t.hanIfOpened:t.han,"data-active":e?"1":"0",disabled:n,className:"text-xl text-center px-3 border border-neutral-300 text-neutral-800 cursor-pointer hover:opacity-80 data-[han='0']:cursor-not-allowed disabled:opacity-20 disabled:hover:opacity-20 data-[active='1']:enabled:border-teal-800 data-[active='1']:enabled:text-white data-[active='1']:enabled:bg-teal-800 disabled:cursor-not-allowed",onClick:i,children:t.label},t.id),LG=({round:t,activePlayerIndex:e,targetPlayerIndex:r,onChange:n,value:i})=>{const[o,s]=E.useState({}),[a,l]=Eo(!1),[c,u]=Eo(!1),[f,h]=E.useState("0"),[p,m]=E.useState("0"),[y,g]=E.useState("0"),[b,v]=E.useState("30"),x=E.useCallback(A=>{const C=A.currentTarget.getAttribute("data-id");!C||!$u.find(({id:T})=>T===C)||s(T=>({...T,[C]:!T[C]}))},[]),S=E.useCallback(()=>{s({}),l(!1),h("0"),m("0"),g("0"),v("30")},[l]),_=E.useMemo(()=>({activePlayerIndex:e,targetPlayerIndex:r,round:t,isRevealed:a,raw:o}),[e,a,t,r,o]),w=E.useMemo(()=>{let A=parseInt(b),C=!1;const I=[],T={...o};r==="-1"&&!a&&(T["menzenchin-tsumohou"]=!0),T["yakuhai-east"]&&CG(t)&&Xn(e,t)?(T["yakuhai-east"]=!1,T["yakuhai-double-east"]=!0):T["yakuhai-south"]&&TG(t)&&SG(e,t)?(T["yakuhai-south"]=!1,T["yakuhai-double-south"]=!0):T["yakuhai-west"]&&PG(t)&&EG(e,t)?(T["yakuhai-west"]=!1,T["yakuhai-double-west"]=!0):T["yakuhai-north"]&&IG(t)&&AG(e,t)&&(T["yakuhai-north"]=!1,T["yakuhai-double-north"]=!0),T["yakuhai-haku"]&&T["yakuhai-hatsu"]&&T["yakuhai-chun"]&&(T.daisangen=!0);const P=$u.filter(({id:N,disableFn:R})=>!!T[N]&&!(R!=null&&R(_))),O=P.filter(({yakumanCount:N})=>typeof N<"u"&&N>0);if(O.length>0)for(const N of O)N.yakumanCount&&N.yakumanCount>0&&I.push({id:N.id,label:N.label,han:0,yakumanCount:N.yakumanCount});else if(P.length>0){for(const N of P){const R=a?N.hanIfOpened:N.han;R!==0&&I.push({id:N.id,label:N.label,han:R,yakumanCount:0})}I.findIndex(({id:N})=>N==="chiitoitsu")!==-1?(C=!0,A=25):I.findIndex(({id:N})=>N==="pinfu")!==-1&&(C=!0,A=r==="-1"?20:30),f!=="0"&&I.push({id:`dora-${f}`,label:`寶牌${f}`,han:parseInt(f),yakumanCount:0}),p!=="0"&&I.push({id:`dora-${p}`,label:`赤寶牌${p}`,han:parseInt(p),yakumanCount:0}),y!=="0"&&I.push({id:`dora-${y}`,label:`裡寶牌${y}`,han:parseInt(y),yakumanCount:0})}return{han:I.reduce((N,{han:R})=>N+R,0),fu:A,yakumanCount:I.reduce((N,{yakumanCount:R})=>N+R,0),yakus:I,isFuOverrided:C,raw:o,dora:parseInt(f),redDora:parseInt(p),innerDora:parseInt(y),isRevealed:a,isRiichied:!!o.riichi}},[b,o,r,a,t,f,p,y,_]);return E.useEffect(()=>{n&&n(w)},[w,n]),E.useEffect(()=>{i&&(s(i.raw??{}),h(i.dora.toString()),m(i.redDora.toString()),g("0"),l(i.isRevealed))},[l,i]),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsxs("div",{children:[d.jsx(FG,{checked:a,onChangeChecked:l})," ","有副露？"]}),d.jsxs("div",{className:"space-x-4",children:[d.jsx("button",{className:"text-sm text-teal-700 underline",onClick:u,children:c?"一般役":"役滿役"}),d.jsx("button",{className:"text-sm text-teal-700 underline",onClick:S,children:"重置"})]})]}),!c&&d.jsxs("div",{children:[d.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:Yye.map(A=>d.jsx("div",{className:"flex flex-wrap gap-2",children:$u.filter(({group:C})=>C===A).map(C=>{var I;return d.jsx($F,{yaku:C,isRevealed:a,active:o[C.id],disabled:(I=C.disableFn)==null?void 0:I.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))}),d.jsx("table",{className:"w-full mt-2",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"w-20 bg-yellow-400 px-1 border-yellow-100 border-t border-b",children:"寶牌"}),d.jsx("td",{className:"w-36 py-1 px-2 bg-yellow-200 data-[active='1']:text-red-600","data-active":f!=="0"?"1":"0",children:d.jsx(kv,{value:f,onChange:h,options:jF})}),d.jsx("td",{className:"w-2"}),d.jsx("th",{className:"w-20 bg-red-400 px-1 border-neutral-100 border-t border-b",children:"赤寶牌"}),d.jsx("td",{className:"w-36 py-1 px-2 bg-red-200 data-[active='1']:text-red-600","data-active":p!=="0"?"1":"0",children:d.jsx(kv,{value:p,onChange:m,options:Xye})}),d.jsx("td",{className:"w-2"}),d.jsx("th",{className:"w-20 bg-blue-400 px-1 border-neutral-100 border-t border-b",children:"裡寶牌"}),d.jsx("td",{className:"w-36 py-1 px-2 bg-blue-200 data-[active='1']:text-red-600","data-active":y!=="0"?"1":"0",children:d.jsx(kv,{value:y,onChange:g,options:jF})}),d.jsx("td",{className:"w-2"}),d.jsx("th",{className:"w-20 bg-neutral-400 px-1 border-neutral-100 border-t border-b",children:"符數"}),d.jsx("td",{className:"w-36 py-1 px-2 bg-neutral-200",children:d.jsx(kv,{value:w.isFuOverrided?w.fu.toString():b,onChange:v,options:Jye,disabled:w.isFuOverrided})})]})})})]}),c&&d.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:Qye.map(A=>d.jsx("div",{className:"flex flex-wrap gap-2",children:$u.filter(({group:C})=>C===A).map(C=>{var I;return d.jsx($F,{yaku:C,isRevealed:a,active:o[C.id],disabled:(I=C.disableFn)==null?void 0:I.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))})]})},Zye=({result:t,matchSetting:e})=>{var r;return d.jsx("div",{children:d.jsx("table",{className:"w-full mt-2 bg-teal-100",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"w-16 bg-teal-400 py-2 px-1",children:"結算"}),d.jsx("td",{className:"flex flex-wrap gap-2 p-2 align-middle",children:(r=t.yakus)==null?void 0:r.map(({label:n})=>d.jsx("span",{children:n},n))}),d.jsxs("td",{className:"w-32 bg-teal-400 text-center",children:[d.jsx(kx,{han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",yakumanCountMax:RG(e.yakumanMax)}),d.jsx(kx,{className:"text-xs text-neutral-600",han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",raw:!0})]})]})})})})},ege=({onSubmit:t,defaultValue:e,open:r,onClose:n,...i})=>{const[o,s]=E.useState(),a=E.useCallback(()=>{o&&t(o)},[t,o]);return E.useEffect(()=>{s(e)},[e]),d.jsxs(Kn,{open:r,onClose:n,children:[d.jsx(LG,{...i,onChange:s,value:e}),d.jsx("div",{className:"mt-4",children:d.jsx(Re,{className:"w-full",onClick:a,children:"儲存"})})]})};function os({className:t,onChange:e,onChangeValue:r,...n}){const i=E.useMemo(()=>`block w-full rounded-md border-0 px-1 py-[9px] text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 ${t}`,[t]),o=E.useCallback(s=>{e==null||e(s),r==null||r(s.currentTarget.value)},[e,r]);return d.jsx("select",{className:i,onChange:o,...n})}function tge({score:t,...e}){const r=E.useMemo(()=>t?t.target?t.target:t.all?`${t.all} ALL`:`${t.others},${t.east}`:"(錯誤)",[t]);return d.jsx("div",{...e,children:r})}function wn({children:t,label:e,action:r,...n}){return d.jsx("div",{...n,children:d.jsxs("label",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("p",{className:"text-sm text-gray-800 font-bold",children:e}),d.jsx("div",{children:r})]}),d.jsx("div",{children:t})]})})}function BG({match:t,currentMatchRound:e,initialActivePlayerIndex:r="0",initialTargetPlayerIndex:n="-1",submitNode:i=d.jsxs("span",{children:[d.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:o}){const[s,a]=E.useState({han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}),l=E.useMemo(()=>Object.keys(t.players).map(P=>({index:P.toString(),name:`${t.players[P].name} (${t.players[P].nickname})`,position:Bc(P,e.roundCount)})),[t.players,e.roundCount]),[c,u]=E.useState(r??"0"),f=E.useMemo(()=>typeof c<"u"?l==null?void 0:l.find(({index:T})=>T===c):void 0,[c,l]),[h,p]=E.useState(n),m=E.useMemo(()=>{const T=SF(s.han,s.fu,s.yakumanCount,(f==null?void 0:f.position)===$n.East,h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});return e.extendedRoundCount>0&&(T.win+=e.extendedRoundCount*300,T.target&&(T.target+=e.extendedRoundCount*300),T.all&&(T.all+=e.extendedRoundCount*100),T.east&&(T.east+=e.extendedRoundCount*100),T.others&&(T.others+=e.extendedRoundCount*100)),e.cumulatedThousands>0&&(T.win+=e.cumulatedThousands*1e3),T},[s.han,s.fu,s.yakumanCount,f==null?void 0:f.position,h,t.setting.isManganRoundUp,t.setting.yakumanMax,e.extendedRoundCount,e.cumulatedThousands]),y=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:T})=>T==="daisangen")!==-1,[s.isRevealed,s.yakus]),[g,b]=E.useState("-1"),v=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:T})=>T==="daisuushii")!==-1,[s.isRevealed,s.yakus]),[x,S]=E.useState("-1"),_=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:T})=>T==="suukantsu")!==-1,[s.isRevealed,s.yakus]),[w,A]=E.useState("-1"),C=E.useMemo(()=>{const T=Object.keys(e.playerResults),P={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].scoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].scoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].scoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].scoreChanges??[]}};if(c===h)return P;for(let N=0;N<T.length;N+=1){const R=T[N];R===c?(P[R].afterScore+=m.win,P[R].type=yt.Win,P[R].scoreChanges=[m.win]):m.target&&R===h?(P[R].afterScore-=m.target,P[R].type=yt.Lose,P[R].scoreChanges=[-m.target]):m.all?(P[R].afterScore-=m.all,P[R].type=yt.Lose,P[R].scoreChanges=[-m.all]):m.east&&m.others&&(Xn(R,e.roundCount)?(P[R].afterScore-=m.east,P[R].type=yt.Lose,P[R].scoreChanges=[-m.east]):(P[R].afterScore-=m.others,P[R].type=yt.Lose,P[R].scoreChanges=[-m.others]))}[{bool:y,triggeredPlayerIndex:g,yakuId:"daisangen"},{bool:v,triggeredPlayerIndex:x,yakuId:"daisuushii"},{bool:_,triggeredPlayerIndex:w,yakuId:"suukantsu"}].forEach(({bool:N,triggeredPlayerIndex:R,yakuId:B})=>{var V;if(N&&R!=="-1"&&R!==c&&R!==h){const F=(V=s.yakus)==null?void 0:V.find(({id:$})=>B===$);if(F){const $=SF(1,30,F.yakumanCount,Xn(c,e.roundCount),h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});if($.target){const L=Math.round($.target/2);P[h].afterScore+=L,P[h].scoreChanges[0]+=L,P[h].scoreChanges[0]===0&&P[h].scoreChanges.splice(0,1),P[R].afterScore-=L,typeof P[R].scoreChanges[0]>"u"?P[R].scoreChanges.push(-L):P[R].scoreChanges[0]-=L}else if($.all)for(let L=0;L<T.length;L+=1){const z=$.all;T[L]!==c&&T[L]!==R&&(P[T[L]].afterScore+=z,P[T[L]].scoreChanges[0]+=z,P[T[L]].scoreChanges[0]===0&&P[T[L]].scoreChanges.splice(0,1),P[R].afterScore-=z,typeof P[R].scoreChanges[0]>"u"?P[R].scoreChanges.push(-z):P[R].scoreChanges[0]-=z)}else if($.east&&$.others){for(let L=0;L<T.length;L+=1)if(T[L]!==c&&T[L]!==R){const z=Xn(T[L],e.roundCount)?$.east:$.others;P[T[L]].afterScore+=z,P[T[L]].scoreChanges[0]+=z,P[T[L]].scoreChanges[0]===0&&P[T[L]].scoreChanges.splice(0,1),P[R].afterScore-=z,typeof P[R].scoreChanges[0]>"u"?P[R].scoreChanges.push(-z):P[R].scoreChanges[0]-=z}}}}},[]);let O=0;for(let N=0;N<T.length;N+=1){const R=T[N];R!==c&&P[R].isRiichi&&(P[R].afterScore-=1e3,P[R].scoreChanges.unshift(-1e3),O+=1e3)}return c&&O>0&&(P[c].afterScore+=O,P[c].scoreChanges.unshift(O)),P[c].detail=s,P},[c,m.all,m.east,m.others,m.target,m.win,e.playerResults,e.roundCount,y,v,_,t.setting.isManganRoundUp,t.setting.yakumanMax,h,s,g,x,w]),I=E.useCallback(()=>{if(!o||!s)return;const T={...e,resultType:pye(m),playerResults:C,nextRoundCumulatedThousands:0,resultDetail:{winnerPlayerIndex:c,...s,yakus:s.yakus??[]}};o(T)},[c,m,e,o,C,s]);return E.useEffect(()=>{u(r),p(n),a(e.playerResults[r].detail)},[e.playerResults,r,n]),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"flex gap-x-4 items-center",children:[d.jsx("div",{className:"flex-1",children:d.jsx(os,{value:c,onChangeValue:u,children:l.map(({index:T,name:P})=>d.jsx("option",{value:T,children:P},T))})}),d.jsx("div",{className:"text-xs text-gray-500",children:"和了"}),d.jsx("div",{className:"flex-1",children:d.jsxs(os,{value:h,onChangeValue:p,children:[d.jsx("option",{value:"-1",children:"自摸"}),l.map(({index:T,name:P})=>d.jsx("option",{value:T,children:P},T))]})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h5",{className:"font-bold",children:"役種"}),d.jsxs("div",{children:[d.jsx(LG,{round:e.roundCount,activePlayerIndex:c,targetPlayerIndex:h,onChange:a,value:e.playerResults[c].detail}),d.jsx(Zye,{result:s,matchSetting:t.setting}),d.jsx("div",{className:"text-3xl font-bold text-center bg-teal-400 py-2",children:d.jsx(tge,{score:m})})]})]}),(y||v||_)&&d.jsxs("div",{className:"space-y-2 bg-yellow-200 p-4",children:[d.jsx("h5",{className:"font-bold",children:"包牌"}),d.jsxs("p",{children:["當某家打出的牌被鳴牌後，導致役滿確定時（大三元、大四喜、四槓子），便會觸發「包牌」。",d.jsx("br",{}),"- 如自摸，包牌者需支付該役種全部點數",d.jsx("br",{}),"- 如他家放銃，包牌者需支付該役種一半點數"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y&&d.jsx(wn,{label:"大三元包牌者",children:d.jsxs(os,{value:g,onChangeValue:b,children:[d.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:T,name:P})=>d.jsx("option",{value:T,children:P},T))]})}),v&&d.jsx(wn,{label:"大四喜包牌者",children:d.jsxs(os,{value:x,onChangeValue:S,children:[d.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:T,name:P})=>d.jsx("option",{value:T,children:P},T))]})}),_&&d.jsx(wn,{label:"四槓子包牌者",children:d.jsxs(os,{value:w,onChangeValue:A,children:[d.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:T,name:P})=>d.jsx("option",{value:T,children:P},T))]})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h5",{className:"font-bold",children:"分數變動"}),d.jsxs("table",{className:"data-table w-full text-lg",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"玩家"}),d.jsx("th",{children:"目前分數"}),d.jsx("th",{children:"變動"}),d.jsx("th",{children:"最新分數"})]})}),d.jsx("tbody",{children:Object.keys(t.players).map(T=>d.jsxs("tr",{children:[d.jsx("th",{className:"text-white py-1",style:{background:t.players[T].color},children:t.players[T].name}),d.jsx("td",{className:"px-2 text-center w-32",children:C[T].beforeScore}),d.jsx("td",{className:"text-center w-32",children:d.jsx(Mt,{signed:!0,value:C[T].afterScore-C[T].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),d.jsx("td",{className:"text-center w-32",children:C[T].afterScore})]},T))})]})]}),d.jsx("div",{className:"space-y-2",children:d.jsx(Re,{onClick:I,className:"w-full",disabled:!(s!=null&&s.yakus)||s.yakus.length<=0,children:i})})]})}function UG({match:t,currentMatchRound:e,submitNode:r=d.jsxs("span",{children:[d.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:n}){const[i,o]=E.useState({0:!1,1:!1,2:!1,3:!1}),s=E.useCallback(c=>{var h,p;const u=(h=c.currentTarget)==null?void 0:h.checked,f=(p=c.currentTarget)==null?void 0:p.getAttribute("data-player-index");typeof u>"u"||!f||o(m=>({...m,[f]:u}))},[]),a=E.useMemo(()=>{const c=Object.keys(e.playerResults),u={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].prevScoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].prevScoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].prevScoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].prevScoreChanges??[]}};let f=0,h=0;const p=Object.values(i).filter(m=>!!m).length;p===1?(f=3e3,h=1e3):p===2?(f=1500,h=1500):p===3&&(f=1e3,h=3e3);for(let m=0;m<c.length;m+=1){const y=c[m];f&&h&&(i[y]?(u[y].afterScore+=f,u[y].type=yt.Win,u[y].scoreChanges=[f]):(u[y].afterScore-=h,u[y].type=yt.Lose,u[y].scoreChanges=[-h])),u[y].isRiichi&&(u[y].afterScore-=1e3,u[y].scoreChanges.unshift(-1e3))}return u},[e.playerResults,i]),l=E.useCallback(()=>{if(!n)return;const c={...e,resultType:Ve.Exhausted,playerResults:a,nextRoundCumulatedThousands:e.cumulatedThousands+Object.values(a).filter(({isRiichi:u})=>!!u).length};n(c)},[e,n,a]);return E.useEffect(()=>{var c,u,f,h;o({0:!!e.playerResults[0].waitingTiles&&((c=e.playerResults[0].waitingTiles)==null?void 0:c.length)>0,1:!!e.playerResults[1].waitingTiles&&((u=e.playerResults[1].waitingTiles)==null?void 0:u.length)>0,2:!!e.playerResults[2].waitingTiles&&((f=e.playerResults[2].waitingTiles)==null?void 0:f.length)>0,3:!!e.playerResults[3].waitingTiles&&((h=e.playerResults[3].waitingTiles)==null?void 0:h.length)>0})},[e.playerResults]),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h5",{className:"font-bold",children:"分數變動"}),d.jsxs("table",{className:"data-table w-full text-lg",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"玩家"}),d.jsx("th",{className:"!bg-yellow-200",children:"聽牌？"}),d.jsx("th",{className:"w-32",children:"目前分數"}),d.jsx("th",{className:"w-32",children:"變動"}),d.jsx("th",{className:"w-32",children:"最新分數"})]})}),d.jsx("tbody",{children:Object.keys(t.players).map(c=>d.jsxs("tr",{children:[d.jsx("th",{className:"text-white py-1",style:{background:t.players[c].color},children:t.players[c].name}),d.jsx("td",{className:"text-center !bg-yellow-200",children:d.jsx(FG,{checked:i[c],onChange:s,"data-player-index":c})}),d.jsx("td",{className:"text-center",children:a[c].beforeScore}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{signed:!0,value:a[c].afterScore-a[c].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),d.jsx("td",{className:"text-center",children:a[c].afterScore})]},c))})]})]}),d.jsx("div",{className:"space-y-2",children:d.jsx(Re,{onClick:l,className:"w-full",children:r})})]})}var _g=t=>t.type==="checkbox",Du=t=>t instanceof Date,_n=t=>t==null;const VG=t=>typeof t=="object";var pr=t=>!_n(t)&&!Array.isArray(t)&&VG(t)&&!Du(t),WG=t=>pr(t)&&t.target?_g(t.target)?t.target.checked:t.target.value:t,rge=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,zG=(t,e)=>t.has(rge(e)),nge=t=>{const e=t.constructor&&t.constructor.prototype;return pr(e)&&e.hasOwnProperty("isPrototypeOf")},PO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zi(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(PO&&(t instanceof Blob||t instanceof FileList))&&(r||pr(t)))if(e=r?[]:{},!r&&!nge(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=zi(t[n]));else return t;return e}var wg=t=>Array.isArray(t)?t.filter(Boolean):[],qt=t=>t===void 0,se=(t,e,r)=>{if(!e||!pr(t))return r;const n=wg(e.split(/[,[\].]+?/)).reduce((i,o)=>_n(i)?i:i[o],t);return qt(n)||n===t?qt(t[e])?r:t[e]:n},Ao=t=>typeof t=="boolean";const Ox={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ts={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ige=k.createContext(null),IO=()=>k.useContext(ige);var GG=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const s=o;return e._proxyFormState[s]!==Ji.all&&(e._proxyFormState[s]=!n||Ji.all),r&&(r[s]=!0),t[s]}});return i},vi=t=>pr(t)&&!Object.keys(t).length,qG=(t,e,r,n)=>{r(t);const{name:i,...o}=t;return vi(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(s=>e[s]===(!n||Ji.all))},G0=t=>Array.isArray(t)?t:[t],HG=(t,e,r)=>!t||!e||t===e||G0(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function NO(t){const e=k.useRef(t);e.current=t,k.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function oge(t){const e=IO(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=k.useState(r._formState),l=k.useRef(!0),c=k.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=k.useRef(i);return u.current=i,NO({disabled:n,next:f=>l.current&&HG(u.current,f.name,o)&&qG(f,c.current,r._updateFormState)&&a({...r._formState,...f}),subject:r._subjects.state}),k.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),GG(s,r,c.current,!1)}var Oo=t=>typeof t=="string",KG=(t,e,r,n,i)=>Oo(t)?(n&&e.watch.add(t),se(r,t,i)):Array.isArray(t)?t.map(o=>(n&&e.watch.add(o),se(r,o))):(n&&(e.watchAll=!0),r);function Ka(t){const e=IO(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=k.useRef(n);a.current=n,NO({disabled:o,subject:r._subjects.values,next:u=>{HG(a.current,u.name,s)&&c(zi(KG(a.current,r._names,u.values||r._formValues,!1,i)))}});const[l,c]=k.useState(r._getWatch(n,i));return k.useEffect(()=>r._removeUnmounted()),l}var kO=t=>/^\w*$/.test(t),YG=t=>wg(t.replace(/["|']|\]/g,"").split(/\.|\[/));function _t(t,e,r){let n=-1;const i=kO(e)?[e]:YG(e),o=i.length,s=o-1;for(;++n<o;){const a=i[n];let l=r;if(n!==s){const c=t[a];l=pr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}t[a]=l,t=t[a]}return t}function sge(t){const e=IO(),{name:r,disabled:n,control:i=e.control,shouldUnregister:o}=t,s=zG(i._names.array,r),a=Ka({control:i,name:r,defaultValue:se(i._formValues,r,se(i._defaultValues,r,t.defaultValue)),exact:!0}),l=oge({control:i,name:r}),c=k.useRef(i.register(r,{...t.rules,value:a}));return c.current=i.register(r,t.rules),k.useEffect(()=>{const u=i._options.shouldUnregister||o,f=(h,p)=>{const m=se(i._fields,h);m&&(m._f.mount=p)};if(f(r,!0),u){const h=zi(se(i._options.defaultValues,r));_t(i._defaultValues,r,h),qt(se(i._formValues,r))&&_t(i._formValues,r,h)}return()=>{(s?u&&!i._state.action:u)?i.unregister(r):f(r,!1)}},[r,i,s,o]),k.useEffect(()=>{se(i._fields,r)&&i._updateDisabledField({disabled:n,fields:i._fields,name:r,value:se(i._fields,r)._f.value})},[n,r,i]),{field:{name:r,value:a,...Ao(n)||Ao(l.disabled)?{disabled:l.disabled||n}:{},onChange:k.useCallback(u=>c.current.onChange({target:{value:WG(u),name:r},type:Ox.CHANGE}),[r]),onBlur:k.useCallback(()=>c.current.onBlur({target:{value:se(i._formValues,r),name:r},type:Ox.BLUR}),[r,i]),ref:u=>{const f=se(i._fields,r);f&&u&&(f._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:h=>u.setCustomValidity(h),reportValidity:()=>u.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!se(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!se(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!se(l.touchedFields,r)},error:{enumerable:!0,get:()=>se(l.errors,r)}})}}const Rn=t=>t.render(sge(t));var age=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},DF=t=>({isOnSubmit:!t||t===Ji.onSubmit,isOnBlur:t===Ji.onBlur,isOnChange:t===Ji.onChange,isOnAll:t===Ji.all,isOnTouch:t===Ji.onTouched}),MF=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const q0=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const o=se(t,i);if(o){const{_f:s,...a}=o;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],i)&&!n)break;if(s.ref&&e(s.ref,s.name)&&!n)break}else pr(a)&&q0(a,e)}}};var lge=(t,e,r)=>{const n=wg(se(t,r));return _t(n,"root",e[r]),_t(t,r,n),t},OO=t=>t.type==="file",ga=t=>typeof t=="function",Rx=t=>{if(!PO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},H0=t=>Oo(t),RO=t=>t.type==="radio",jx=t=>t instanceof RegExp;const FF={value:!1,isValid:!1},LF={value:!0,isValid:!0};var QG=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!qt(t[0].attributes.value)?qt(t[0].value)||t[0].value===""?LF:{value:t[0].value,isValid:!0}:LF:FF}return FF};const BF={isValid:!1,value:null};var XG=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,BF):BF;function UF(t,e,r="validate"){if(H0(t)||Array.isArray(t)&&t.every(H0)||Ao(t)&&!t)return{type:r,message:H0(t)?t:"",ref:e}}var nu=t=>pr(t)&&!jx(t)?t:{value:t,message:""},VF=async(t,e,r,n,i)=>{const{ref:o,refs:s,required:a,maxLength:l,minLength:c,min:u,max:f,pattern:h,validate:p,name:m,valueAsNumber:y,mount:g,disabled:b}=t._f,v=se(e,m);if(!g||b)return{};const x=s?s[0]:o,S=O=>{n&&x.reportValidity&&(x.setCustomValidity(Ao(O)?"":O||""),x.reportValidity())},_={},w=RO(o),A=_g(o),C=w||A,I=(y||OO(o))&&qt(o.value)&&qt(v)||Rx(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,T=age.bind(null,m,r,_),P=(O,N,R,B=ts.maxLength,V=ts.minLength)=>{const F=O?N:R;_[m]={type:O?B:V,message:F,ref:o,...T(O?B:V,F)}};if(i?!Array.isArray(v)||!v.length:a&&(!C&&(I||_n(v))||Ao(v)&&!v||A&&!QG(s).isValid||w&&!XG(s).isValid)){const{value:O,message:N}=H0(a)?{value:!!a,message:a}:nu(a);if(O&&(_[m]={type:ts.required,message:N,ref:x,...T(ts.required,N)},!r))return S(N),_}if(!I&&(!_n(u)||!_n(f))){let O,N;const R=nu(f),B=nu(u);if(!_n(v)&&!isNaN(v)){const V=o.valueAsNumber||v&&+v;_n(R.value)||(O=V>R.value),_n(B.value)||(N=V<B.value)}else{const V=o.valueAsDate||new Date(v),F=z=>new Date(new Date().toDateString()+" "+z),$=o.type=="time",L=o.type=="week";Oo(R.value)&&v&&(O=$?F(v)>F(R.value):L?v>R.value:V>new Date(R.value)),Oo(B.value)&&v&&(N=$?F(v)<F(B.value):L?v<B.value:V<new Date(B.value))}if((O||N)&&(P(!!O,R.message,B.message,ts.max,ts.min),!r))return S(_[m].message),_}if((l||c)&&!I&&(Oo(v)||i&&Array.isArray(v))){const O=nu(l),N=nu(c),R=!_n(O.value)&&v.length>+O.value,B=!_n(N.value)&&v.length<+N.value;if((R||B)&&(P(R,O.message,N.message),!r))return S(_[m].message),_}if(h&&!I&&Oo(v)){const{value:O,message:N}=nu(h);if(jx(O)&&!v.match(O)&&(_[m]={type:ts.pattern,message:N,ref:o,...T(ts.pattern,N)},!r))return S(N),_}if(p){if(ga(p)){const O=await p(v,e),N=UF(O,x);if(N&&(_[m]={...N,...T(ts.validate,N.message)},!r))return S(N.message),_}else if(pr(p)){let O={};for(const N in p){if(!vi(O)&&!r)break;const R=UF(await p[N](v,e),x,N);R&&(O={...R,...T(N,R.message)},S(R.message),r&&(_[m]=O))}if(!vi(O)&&(_[m]={ref:x,...O},!r))return _}}return S(!0),_};function cge(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=qt(t)?n++:t[e[n++]];return t}function uge(t){for(const e in t)if(t.hasOwnProperty(e)&&!qt(t[e]))return!1;return!0}function Mr(t,e){const r=Array.isArray(e)?e:kO(e)?[e]:YG(e),n=r.length===1?t:cge(t,r),i=r.length-1,o=r[i];return n&&delete n[o],i!==0&&(pr(n)&&vi(n)||Array.isArray(n)&&uge(n))&&Mr(t,r.slice(0,-1)),t}function nA(){let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}}var $x=t=>_n(t)||!VG(t);function Dl(t,e){if($x(t)||$x(e))return t===e;if(Du(t)&&Du(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const s=e[i];if(Du(o)&&Du(s)||pr(o)&&pr(s)||Array.isArray(o)&&Array.isArray(s)?!Dl(o,s):o!==s)return!1}}return!0}var JG=t=>t.type==="select-multiple",fge=t=>RO(t)||_g(t),iA=t=>Rx(t)&&t.isConnected,ZG=t=>{for(const e in t)if(ga(t[e]))return!0;return!1};function Dx(t,e={}){const r=Array.isArray(t);if(pr(t)||r)for(const n in t)Array.isArray(t[n])||pr(t[n])&&!ZG(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Dx(t[n],e[n])):_n(t[n])||(e[n]=!0);return e}function eq(t,e,r){const n=Array.isArray(t);if(pr(t)||n)for(const i in t)Array.isArray(t[i])||pr(t[i])&&!ZG(t[i])?qt(e)||$x(r[i])?r[i]=Array.isArray(t[i])?Dx(t[i],[]):{...Dx(t[i])}:eq(t[i],_n(e)?{}:e[i],r[i]):r[i]=!Dl(t[i],e[i]);return r}var oA=(t,e)=>eq(t,e,Dx(e)),tq=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>qt(t)?t:e?t===""?NaN:t&&+t:r&&Oo(t)?new Date(t):n?n(t):t;function sA(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return OO(e)?e.files:RO(e)?XG(t.refs).value:JG(e)?[...e.selectedOptions].map(({value:r})=>r):_g(e)?QG(t.refs).value:tq(qt(e.value)?t.ref.value:e.value,t)}var dge=(t,e,r,n)=>{const i={};for(const o of t){const s=se(e,o);s&&_t(i,o,s._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Nh=t=>qt(t)?t:jx(t)?t.source:pr(t)?jx(t.value)?t.value.source:t.value:t,hge=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function WF(t,e,r){const n=se(t,r);if(n||kO(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),s=se(e,o),a=se(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var pge=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,mge=(t,e)=>!wg(se(t,e)).length&&Mr(t,e);const yge={mode:Ji.onSubmit,reValidateMode:Ji.onChange,shouldFocusError:!0};function gge(t={},e){let r={...yge,...t},n={submitCount:0,isDirty:!1,isLoading:ga(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},i={},o=pr(r.defaultValues)||pr(r.values)?zi(r.defaultValues||r.values)||{}:{},s=r.shouldUnregister?{}:zi(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:nA(),array:nA(),state:nA()},p=t.resetOptions&&t.resetOptions.keepDirtyValues,m=DF(r.mode),y=DF(r.reValidateMode),g=r.criteriaMode===Ji.all,b=j=>U=>{clearTimeout(u),u=setTimeout(j,U)},v=async j=>{if(f.isValid||j){const U=r.resolver?vi((await I()).errors):await P(i,!0);U!==n.isValid&&h.state.next({isValid:U})}},x=j=>f.isValidating&&h.state.next({isValidating:j}),S=(j,U=[],W,re,Z=!0,Q=!0)=>{if(re&&W){if(a.action=!0,Q&&Array.isArray(se(i,j))){const pe=W(se(i,j),re.argA,re.argB);Z&&_t(i,j,pe)}if(Q&&Array.isArray(se(n.errors,j))){const pe=W(se(n.errors,j),re.argA,re.argB);Z&&_t(n.errors,j,pe),mge(n.errors,j)}if(f.touchedFields&&Q&&Array.isArray(se(n.touchedFields,j))){const pe=W(se(n.touchedFields,j),re.argA,re.argB);Z&&_t(n.touchedFields,j,pe)}f.dirtyFields&&(n.dirtyFields=oA(o,s)),h.state.next({name:j,isDirty:N(j,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _t(s,j,U)},_=(j,U)=>{_t(n.errors,j,U),h.state.next({errors:n.errors})},w=(j,U,W,re)=>{const Z=se(i,j);if(Z){const Q=se(s,j,qt(W)?se(o,j):W);qt(Q)||re&&re.defaultChecked||U?_t(s,j,U?Q:sA(Z._f)):V(j,Q),a.mount&&v()}},A=(j,U,W,re,Z)=>{let Q=!1,pe=!1;const nt={name:j};if(!W||re){f.isDirty&&(pe=n.isDirty,n.isDirty=nt.isDirty=N(),Q=pe!==nt.isDirty);const Wt=Dl(se(o,j),U);pe=se(n.dirtyFields,j),Wt?Mr(n.dirtyFields,j):_t(n.dirtyFields,j,!0),nt.dirtyFields=n.dirtyFields,Q=Q||f.dirtyFields&&pe!==!Wt}if(W){const Wt=se(n.touchedFields,j);Wt||(_t(n.touchedFields,j,W),nt.touchedFields=n.touchedFields,Q=Q||f.touchedFields&&Wt!==W)}return Q&&Z&&h.state.next(nt),Q?nt:{}},C=(j,U,W,re)=>{const Z=se(n.errors,j),Q=f.isValid&&Ao(U)&&n.isValid!==U;if(t.delayError&&W?(c=b(()=>_(j,W)),c(t.delayError)):(clearTimeout(u),c=null,W?_t(n.errors,j,W):Mr(n.errors,j)),(W?!Dl(Z,W):Z)||!vi(re)||Q){const pe={...re,...Q&&Ao(U)?{isValid:U}:{},errors:n.errors,name:j};n={...n,...pe},h.state.next(pe)}x(!1)},I=async j=>r.resolver(s,r.context,dge(j||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation)),T=async j=>{const{errors:U}=await I(j);if(j)for(const W of j){const re=se(U,W);re?_t(n.errors,W,re):Mr(n.errors,W)}else n.errors=U;return U},P=async(j,U,W={valid:!0})=>{for(const re in j){const Z=j[re];if(Z){const{_f:Q,...pe}=Z;if(Q){const nt=l.array.has(Q.name),Wt=await VF(Z,s,g,r.shouldUseNativeValidation&&!U,nt);if(Wt[Q.name]&&(W.valid=!1,U))break;!U&&(se(Wt,Q.name)?nt?lge(n.errors,Wt,Q.name):_t(n.errors,Q.name,Wt[Q.name]):Mr(n.errors,Q.name))}pe&&await P(pe,U,W)}}return W.valid},O=()=>{for(const j of l.unMount){const U=se(i,j);U&&(U._f.refs?U._f.refs.every(W=>!iA(W)):!iA(U._f.ref))&&pt(j)}l.unMount=new Set},N=(j,U)=>(j&&U&&_t(s,j,U),!Dl(te(),o)),R=(j,U,W)=>KG(j,l,{...a.mount?s:qt(U)?o:Oo(j)?{[j]:U}:U},W,U),B=j=>wg(se(a.mount?s:o,j,t.shouldUnregister?se(o,j,[]):[])),V=(j,U,W={})=>{const re=se(i,j);let Z=U;if(re){const Q=re._f;Q&&(!Q.disabled&&_t(s,j,tq(U,Q)),Z=Rx(Q.ref)&&_n(U)?"":U,JG(Q.ref)?[...Q.ref.options].forEach(pe=>pe.selected=Z.includes(pe.value)):Q.refs?_g(Q.ref)?Q.refs.length>1?Q.refs.forEach(pe=>(!pe.defaultChecked||!pe.disabled)&&(pe.checked=Array.isArray(Z)?!!Z.find(nt=>nt===pe.value):Z===pe.value)):Q.refs[0]&&(Q.refs[0].checked=!!Z):Q.refs.forEach(pe=>pe.checked=pe.value===Z):OO(Q.ref)?Q.ref.value="":(Q.ref.value=Z,Q.ref.type||h.values.next({name:j,values:{...s}})))}(W.shouldDirty||W.shouldTouch)&&A(j,Z,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&ce(j)},F=(j,U,W)=>{for(const re in U){const Z=U[re],Q=`${j}.${re}`,pe=se(i,Q);(l.array.has(j)||!$x(Z)||pe&&!pe._f)&&!Du(Z)?F(Q,Z,W):V(Q,Z,W)}},$=(j,U,W={})=>{const re=se(i,j),Z=l.array.has(j),Q=zi(U);_t(s,j,Q),Z?(h.array.next({name:j,values:{...s}}),(f.isDirty||f.dirtyFields)&&W.shouldDirty&&h.state.next({name:j,dirtyFields:oA(o,s),isDirty:N(j,Q)})):re&&!re._f&&!_n(Q)?F(j,Q,W):V(j,Q,W),MF(j,l)&&h.state.next({...n}),h.values.next({name:j,values:{...s}}),!a.mount&&e()},L=async j=>{const U=j.target;let W=U.name,re=!0;const Z=se(i,W),Q=()=>U.type?sA(Z._f):WG(j),pe=nt=>{re=Number.isNaN(nt)||nt===se(s,W,nt)};if(Z){let nt,Wt;const Dr=Q(),po=j.type===Ox.BLUR||j.type===Ox.FOCUS_OUT,TS=!hge(Z._f)&&!r.resolver&&!se(n.errors,W)&&!Z._f.deps||pge(po,se(n.touchedFields,W),n.isSubmitted,y,m),dh=MF(W,l,po);_t(s,W,Dr),po?(Z._f.onBlur&&Z._f.onBlur(j),c&&c(0)):Z._f.onChange&&Z._f.onChange(j);const hh=A(W,Dr,po,!1),Jg=!vi(hh)||dh;if(!po&&h.values.next({name:W,type:j.type,values:{...s}}),TS)return f.isValid&&v(),Jg&&h.state.next({name:W,...dh?{}:hh});if(!po&&dh&&h.state.next({...n}),x(!0),r.resolver){const{errors:Zg}=await I([W]);if(pe(Dr),re){const PS=WF(n.errors,i,W),ev=WF(Zg,i,PS.name||W);nt=ev.error,W=ev.name,Wt=vi(Zg)}}else nt=(await VF(Z,s,g,r.shouldUseNativeValidation))[W],pe(Dr),re&&(nt?Wt=!1:f.isValid&&(Wt=await P(i,!0)));re&&(Z._f.deps&&ce(Z._f.deps),C(W,Wt,nt,hh))}},z=(j,U)=>{if(se(n.errors,U)&&j.focus)return j.focus(),1},ce=async(j,U={})=>{let W,re;const Z=G0(j);if(x(!0),r.resolver){const Q=await T(qt(j)?j:Z);W=vi(Q),re=j?!Z.some(pe=>se(Q,pe)):W}else j?(re=(await Promise.all(Z.map(async Q=>{const pe=se(i,Q);return await P(pe&&pe._f?{[Q]:pe}:pe)}))).every(Boolean),!(!re&&!n.isValid)&&v()):re=W=await P(i);return h.state.next({...!Oo(j)||f.isValid&&W!==n.isValid?{}:{name:j},...r.resolver||!j?{isValid:W}:{},errors:n.errors,isValidating:!1}),U.shouldFocus&&!re&&q0(i,z,j?Z:l.mount),re},te=j=>{const U={...o,...a.mount?s:{}};return qt(j)?U:Oo(j)?se(U,j):j.map(W=>se(U,W))},be=(j,U)=>({invalid:!!se((U||n).errors,j),isDirty:!!se((U||n).dirtyFields,j),isTouched:!!se((U||n).touchedFields,j),error:se((U||n).errors,j)}),st=j=>{j&&G0(j).forEach(U=>Mr(n.errors,U)),h.state.next({errors:j?n.errors:{}})},rt=(j,U,W)=>{const re=(se(i,j,{_f:{}})._f||{}).ref;_t(n.errors,j,{...U,ref:re}),h.state.next({name:j,errors:n.errors,isValid:!1}),W&&W.shouldFocus&&re&&re.focus&&re.focus()},Vt=(j,U)=>ga(j)?h.values.subscribe({next:W=>j(R(void 0,U),W)}):R(j,U,!0),pt=(j,U={})=>{for(const W of j?G0(j):l.mount)l.mount.delete(W),l.array.delete(W),U.keepValue||(Mr(i,W),Mr(s,W)),!U.keepError&&Mr(n.errors,W),!U.keepDirty&&Mr(n.dirtyFields,W),!U.keepTouched&&Mr(n.touchedFields,W),!r.shouldUnregister&&!U.keepDefaultValue&&Mr(o,W);h.values.next({values:{...s}}),h.state.next({...n,...U.keepDirty?{isDirty:N()}:{}}),!U.keepIsValid&&v()},Zt=({disabled:j,name:U,field:W,fields:re,value:Z})=>{if(Ao(j)){const Q=j?void 0:qt(Z)?sA(W?W._f:se(re,U)._f):Z;_t(s,U,Q),A(U,Q,!1,!1,!0)}},ee=(j,U={})=>{let W=se(i,j);const re=Ao(U.disabled);return _t(i,j,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:j}},name:j,mount:!0,...U}}),l.mount.add(j),W?Zt({field:W,disabled:U.disabled,name:j}):w(j,!0,U.value),{...re?{disabled:U.disabled}:{},...r.progressive?{required:!!U.required,min:Nh(U.min),max:Nh(U.max),minLength:Nh(U.minLength),maxLength:Nh(U.maxLength),pattern:Nh(U.pattern)}:{},name:j,onChange:L,onBlur:L,ref:Z=>{if(Z){ee(j,U),W=se(i,j);const Q=qt(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,pe=fge(Q),nt=W._f.refs||[];if(pe?nt.find(Wt=>Wt===Q):Q===W._f.ref)return;_t(i,j,{_f:{...W._f,...pe?{refs:[...nt.filter(iA),Q,...Array.isArray(se(o,j))?[{}]:[]],ref:{type:Q.type,name:j}}:{ref:Q}}}),w(j,!1,void 0,Q)}else W=se(i,j,{}),W._f&&(W._f.mount=!1),(r.shouldUnregister||U.shouldUnregister)&&!(zG(l.array,j)&&a.action)&&l.unMount.add(j)}}},xe=()=>r.shouldFocusError&&q0(i,z,l.mount),Ee=j=>{Ao(j)&&(h.state.next({disabled:j}),q0(i,U=>{U.disabled=j},0,!1))},q=(j,U)=>async W=>{W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let re=zi(s);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:Z,values:Q}=await I();n.errors=Z,re=Q}else await P(i);Mr(n.errors,"root"),vi(n.errors)?(h.state.next({errors:{}}),await j(re,W)):(U&&await U({...n.errors},W),xe(),setTimeout(xe)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vi(n.errors),submitCount:n.submitCount+1,errors:n.errors})},Ze=(j,U={})=>{se(i,j)&&(qt(U.defaultValue)?$(j,se(o,j)):($(j,U.defaultValue),_t(o,j,U.defaultValue)),U.keepTouched||Mr(n.touchedFields,j),U.keepDirty||(Mr(n.dirtyFields,j),n.isDirty=U.defaultValue?N(j,se(o,j)):N()),U.keepError||(Mr(n.errors,j),f.isValid&&v()),h.state.next({...n}))},ke=(j,U={})=>{const W=j?zi(j):o,re=zi(W),Z=j&&!vi(j)?re:o;if(U.keepDefaultValues||(o=W),!U.keepValues){if(U.keepDirtyValues||p)for(const Q of l.mount)se(n.dirtyFields,Q)?_t(Z,Q,se(s,Q)):$(Q,se(Z,Q));else{if(PO&&qt(j))for(const Q of l.mount){const pe=se(i,Q);if(pe&&pe._f){const nt=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if(Rx(nt)){const Wt=nt.closest("form");if(Wt){Wt.reset();break}}}}i={}}s=t.shouldUnregister?U.keepDefaultValues?zi(o):{}:zi(Z),h.array.next({values:{...Z}}),h.values.next({values:{...Z}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!f.isValid||!!U.keepIsValid,a.watch=!!t.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Dl(j,o)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:U.keepDirtyValues?n.dirtyFields:U.keepDefaultValues&&j?oA(o,j):{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},vt=(j,U)=>ke(ga(j)?j(s):j,U);return{control:{register:ee,unregister:pt,getFieldState:be,handleSubmit:q,setError:rt,_executeSchema:I,_getWatch:R,_getDirty:N,_updateValid:v,_removeUnmounted:O,_updateFieldArray:S,_updateDisabledField:Zt,_getFieldArray:B,_reset:ke,_resetDefaultValues:()=>ga(r.defaultValues)&&r.defaultValues().then(j=>{vt(j,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:j=>{n={...n,...j}},_disableForm:Ee,_subjects:h,_proxyFormState:f,get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state(j){a=j},get _defaultValues(){return o},get _names(){return l},set _names(j){l=j},get _formState(){return n},set _formState(j){n=j},get _options(){return r},set _options(j){r={...r,...j}}},trigger:ce,register:ee,handleSubmit:q,watch:Vt,setValue:$,getValues:te,reset:vt,resetField:Ze,clearErrors:st,unregister:pt,setError:rt,setFocus:(j,U={})=>{const W=se(i,j),re=W&&W._f;if(re){const Z=re.refs?re.refs[0]:re.ref;Z.focus&&(Z.focus(),U.shouldSelect&&Z.select())}},getFieldState:be}}function zd(t={}){const e=k.useRef(),r=k.useRef(),[n,i]=k.useState({isDirty:!1,isValidating:!1,isLoading:ga(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:ga(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...gge(t,()=>i(s=>({...s}))),formState:n});const o=e.current.control;return o._options=t,NO({subject:o._subjects.state,next:s=>{qG(s,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),k.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),k.useEffect(()=>{if(o._proxyFormState.isDirty){const s=o._getDirty();s!==n.isDirty&&o._subjects.state.next({isDirty:s})}},[o,n.isDirty]),k.useEffect(()=>{t.values&&!Dl(t.values,r.current)?(o._reset(t.values,o._options.resetOptions),r.current=t.values):o._resetDefaultValues()},[t.values,o]),k.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=GG(n,o),e.current}function rq({player:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return d.jsxs("div",{className:"relative flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{backgroundColor:t.color??"#115e59"},...n,children:[t.teamPicUrl&&d.jsx("div",{className:"absolute inset-0 opacity-10 bg-center bg-no-repeat bg-cover",style:{backgroundImage:`url(${t.teamPicUrl})`}}),d.jsx("div",{className:"relative z-10 shrink-0",children:d.jsx("div",{className:"w-14 h-14 bg-center bg-contain bg-no-repeat rounded",style:{backgroundImage:`url(${t.proPicUrl||"/images/portrait-placeholder.jpeg"})`}})}),d.jsxs("div",{className:"flex-1 relative z-10 ",children:[d.jsx("div",{children:t.title??"(無頭銜)"}),d.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})]}),e&&d.jsx("div",{className:"shrink-0",children:d.jsx(Re,{variant:"icon",color:"inverted",type:"button",onClick:i,children:d.jsx("i",{className:"bi bi-pencil"})})})]})}const vge=C9(["block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"]);function va({className:t,...e}){const r=E.useMemo(()=>vge({className:t}),[t]);return d.jsx("input",{className:r,...e})}function bge({match:t,currentMatchRound:e,onSubmit:r}){const{reset:n,handleSubmit:i,control:o}=zd({defaultValues:{player_0:0,player_1:0,player_2:0,player_3:0,cumulatedThousands:0,roundCount:0,extendedRoundCount:0}}),s=E.useMemo(()=>Object.keys(t.players).map(c=>({...t.players[c],index:c.toString(),position:Bc(c,e.roundCount)})),[t.players,e.roundCount]),a=E.useMemo(()=>i(l=>{if(!r)return;const c={...e,resultType:Ve.Hotfix,playerResults:{0:{...e.playerResults[0],afterScore:parseInt(l.player_0,10)},1:{...e.playerResults[1],afterScore:parseInt(l.player_1,10)},2:{...e.playerResults[2],afterScore:parseInt(l.player_2,10)},3:{...e.playerResults[3],afterScore:parseInt(l.player_3,10)}},cumulatedThousands:parseInt(l.cumulatedThousands,10),roundCount:parseInt(l.roundCount,10),extendedRoundCount:parseInt(l.extendedRoundCount,10)};r(c)}),[e,i,r]);return E.useEffect(()=>{n({player_0:e.playerResults[0].beforeScore,player_1:e.playerResults[1].beforeScore,player_2:e.playerResults[2].beforeScore,player_3:e.playerResults[3].beforeScore,cumulatedThousands:e.cumulatedThousands,roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount})},[e.cumulatedThousands,e.extendedRoundCount,e.playerResults,e.roundCount,n]),d.jsxs("div",{className:"space-y-8",children:[d.jsx("div",{className:"space-y-2",children:d.jsxs("table",{className:"data-table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"w-1/2",children:"玩家"}),d.jsx("th",{className:"w-1/4",children:"現在分數"}),d.jsx("th",{className:"w-1/4",children:"新的分數"})]})}),d.jsxs("tbody",{children:[s.map(l=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:d.jsx(rq,{player:l})}),d.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.playerResults[l.index].beforeScore}),d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:d.jsx(Rn,{name:`player_${l.index}`,control:o,rules:{required:!0},render:({field:c})=>d.jsx(va,{className:"text-center",type:"number",...c})})})]},l.index)),d.jsxs("tr",{children:[d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"供托"}),d.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.cumulatedThousands}),d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:d.jsx(Rn,{name:"cumulatedThousands",control:o,rules:{required:!0},render:({field:l})=>d.jsx(va,{className:"text-center",type:"number",...l})})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"局數(東1局=1, 東2局=2, ...)"}),d.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.roundCount}),d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:d.jsx(Rn,{name:"roundCount",control:o,rules:{required:!0},render:({field:l})=>d.jsx(va,{className:"text-center",type:"number",...l})})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"本場數"}),d.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.extendedRoundCount}),d.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:d.jsx(Rn,{name:"extendedRoundCount",control:o,rules:{required:!0},render:({field:l})=>d.jsx(va,{className:"text-center",type:"number",...l})})})]})]})]})}),d.jsx("div",{className:"space-y-2",children:d.jsx(Re,{onClick:a,className:"w-full",children:"提交並更新直播畫面"})})]})}const xge=({match:t,matchRound:e,onSubmit:r})=>{const{control:n,register:i,reset:o}=zd(),s=Ka({name:"_playerResults",control:n}),a=Ka({name:"_resultType",control:n}),l=E.useMemo(()=>!e||!s?null:{...e,playerResults:{0:{...e.playerResults[0],isRiichi:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed",detail:{...e.playerResults[0].detail,isRiichied:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed"}},1:{...e.playerResults[1],isRiichi:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed",detail:{...e.playerResults[1].detail,isRiichied:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed"}},2:{...e.playerResults[2],isRiichi:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed",detail:{...e.playerResults[2].detail,isRiichied:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed"}},3:{...e.playerResults[3],isRiichi:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed",detail:{...e.playerResults[3].detail,isRiichied:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed"}}}},[e,s]),c=E.useMemo(()=>{var h,p;return l?{match:t,currentMatchRound:l,initialActivePlayerIndex:l.resultType===Ve.Ron||l.resultType===Ve.SelfDrawn?((h=Object.entries(l.playerResults).find(([,m])=>m.type===yt.Win))==null?void 0:h[0])??"0":"0",initialTargetPlayerIndex:l.resultType===Ve.Ron?((p=Object.entries(l.playerResults).find(([,m])=>m.type===yt.Lose))==null?void 0:p[0])??"-1":"-1"}:null},[t,l]),u=E.useMemo(()=>l?{match:t,currentMatchRound:l}:null,[t,l]),f=E.useCallback(h=>{r==null||r(h)},[r]);return E.useEffect(()=>{e&&o({_resultType:e.resultType===Ve.Ron||e.resultType===Ve.SelfDrawn?"ron":"exhausted",_playerResults:{0:{status:e.playerResults[0].isRevealed?"isRevealed":e.playerResults[0].isRiichi?"isRiichied":"none"},1:{status:e.playerResults[1].isRevealed?"isRevealed":e.playerResults[1].isRiichi?"isRiichied":"none"},2:{status:e.playerResults[2].isRevealed?"isRevealed":e.playerResults[2].isRiichi?"isRiichied":"none"},3:{status:e.playerResults[3].isRevealed?"isRevealed":e.playerResults[3].isRiichi?"isRiichied":"none"}}})},[e,e==null?void 0:e.playerResults,e==null?void 0:e.resultType,o]),d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-bold",children:"各玩家終局狀態"}),d.jsxs("table",{className:"w-full data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{}),d.jsx("th",{children:"立直/副露？"})]})}),d.jsx("tbody",{children:["0","1","2","3"].map(h=>d.jsxs("tr",{children:[d.jsx("td",{children:t.players[h].nickname}),d.jsx("td",{children:d.jsxs("select",{...i(`_playerResults.${h}.status`),children:[d.jsx("option",{value:"none",children:"-"}),d.jsx("option",{value:"isRiichied",children:"立直"}),d.jsx("option",{value:"isRevealed",children:"副露"})]})})]},h))})]}),d.jsx("hr",{}),d.jsxs("h2",{className:"text-xl font-bold",children:[d.jsx("span",{children:"對局結果："}),d.jsxs("select",{...i("_resultType"),children:[d.jsx("option",{value:"ron",children:"和了"}),d.jsx("option",{value:"exhausted",children:"流局"})]})]}),a==="ron"&&!!c&&d.jsx(BG,{...c,submitNode:"提交修改",onSubmit:f}),a==="exhausted"&&!!u&&d.jsx(UG,{...u,submitNode:"提交修改",onSubmit:f})]})};function Tm(t){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(t)}function _ge(t,e){if(Tm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Tm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wge(t){var e=_ge(t,"string");return Tm(e)==="symbol"?e:String(e)}function Sge(t,e,r){return e=wge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(r),!0).forEach(function(n){Sge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var qF=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),aA=function(){return Math.random().toString(36).substring(7).split("").join(".")},HF={INIT:"@@redux/INIT"+aA(),REPLACE:"@@redux/REPLACE"+aA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aA()}};function Ege(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function nq(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Nn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Nn(1));return r(nq)(t,e)}if(typeof t!="function")throw new Error(Nn(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Nn(3));return o}function f(y){if(typeof y!="function")throw new Error(Nn(4));if(l)throw new Error(Nn(5));var g=!0;return c(),a.push(y),function(){if(g){if(l)throw new Error(Nn(6));g=!1,c();var v=a.indexOf(y);a.splice(v,1),s=null}}}function h(y){if(!Ege(y))throw new Error(Nn(7));if(typeof y.type>"u")throw new Error(Nn(8));if(l)throw new Error(Nn(9));try{l=!0,o=i(o,y)}finally{l=!1}for(var g=s=a,b=0;b<g.length;b++){var v=g[b];v()}return y}function p(y){if(typeof y!="function")throw new Error(Nn(10));i=y,h({type:HF.REPLACE})}function m(){var y,g=f;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Nn(11));function x(){v.next&&v.next(u())}x();var S=g(x);return{unsubscribe:S}}},y[qF]=function(){return this},y}return h({type:HF.INIT}),n={dispatch:h,subscribe:f,getState:u,replaceReducer:p},n[qF]=m,n}function KF(t,e){return function(){return e(t.apply(this,arguments))}}function YF(t,e){if(typeof t=="function")return KF(t,e);if(typeof t!="object"||t===null)throw new Error(Nn(16));var r={};for(var n in t){var i=t[n];typeof i=="function"&&(r[n]=KF(i,e))}return r}function iq(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function Age(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error(Nn(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=iq.apply(void 0,a)(i.dispatch),GF(GF({},i),{},{dispatch:o})}}}var Cge={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw=E,Tge=rk;function Pge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ige=typeof Object.is=="function"?Object.is:Pge,Nge=Tge.useSyncExternalStore,kge=Hw.useRef,Oge=Hw.useEffect,Rge=Hw.useMemo,jge=Hw.useDebugValue;Cge.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var o=kge(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Rge(function(){function l(p){if(!c){if(c=!0,u=p,p=n(p),i!==void 0&&s.hasValue){var m=s.value;if(i(m,p))return f=m}return f=p}if(m=f,Ige(u,p))return m;var y=n(p);return i!==void 0&&i(m,y)?m:(u=p,f=y)}var c=!1,u,f,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var a=Nge(t,o[0],o[1]);return Oge(function(){s.hasValue=!0,s.value=a},[a]),jge(a),a};function $ge(t){t()}let oq=$ge;const Dge=t=>oq=t,Mge=()=>oq,QF=Symbol.for("react-redux-context"),XF=typeof globalThis<"u"?globalThis:{};function Fge(){var t;if(!E.createContext)return{};const e=(t=XF[QF])!=null?t:XF[QF]=new Map;let r=e.get(E.createContext);return r||(r=E.createContext(null),e.set(E.createContext,r)),r}const sq=Fge(),Lge=()=>{throw new Error("uSES not initialized!")};function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cf.apply(this,arguments)}function aq(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var lq={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=typeof Symbol=="function"&&Symbol.for,jO=Rr?Symbol.for("react.element"):60103,$O=Rr?Symbol.for("react.portal"):60106,Kw=Rr?Symbol.for("react.fragment"):60107,Yw=Rr?Symbol.for("react.strict_mode"):60108,Qw=Rr?Symbol.for("react.profiler"):60114,Xw=Rr?Symbol.for("react.provider"):60109,Jw=Rr?Symbol.for("react.context"):60110,DO=Rr?Symbol.for("react.async_mode"):60111,Zw=Rr?Symbol.for("react.concurrent_mode"):60111,e1=Rr?Symbol.for("react.forward_ref"):60112,t1=Rr?Symbol.for("react.suspense"):60113,Bge=Rr?Symbol.for("react.suspense_list"):60120,r1=Rr?Symbol.for("react.memo"):60115,n1=Rr?Symbol.for("react.lazy"):60116,Uge=Rr?Symbol.for("react.block"):60121,Vge=Rr?Symbol.for("react.fundamental"):60117,Wge=Rr?Symbol.for("react.responder"):60118,zge=Rr?Symbol.for("react.scope"):60119;function li(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jO:switch(t=t.type,t){case DO:case Zw:case Kw:case Qw:case Yw:case t1:return t;default:switch(t=t&&t.$$typeof,t){case Jw:case e1:case n1:case r1:case Xw:return t;default:return e}}case $O:return e}}}function cq(t){return li(t)===Zw}dt.AsyncMode=DO;dt.ConcurrentMode=Zw;dt.ContextConsumer=Jw;dt.ContextProvider=Xw;dt.Element=jO;dt.ForwardRef=e1;dt.Fragment=Kw;dt.Lazy=n1;dt.Memo=r1;dt.Portal=$O;dt.Profiler=Qw;dt.StrictMode=Yw;dt.Suspense=t1;dt.isAsyncMode=function(t){return cq(t)||li(t)===DO};dt.isConcurrentMode=cq;dt.isContextConsumer=function(t){return li(t)===Jw};dt.isContextProvider=function(t){return li(t)===Xw};dt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jO};dt.isForwardRef=function(t){return li(t)===e1};dt.isFragment=function(t){return li(t)===Kw};dt.isLazy=function(t){return li(t)===n1};dt.isMemo=function(t){return li(t)===r1};dt.isPortal=function(t){return li(t)===$O};dt.isProfiler=function(t){return li(t)===Qw};dt.isStrictMode=function(t){return li(t)===Yw};dt.isSuspense=function(t){return li(t)===t1};dt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kw||t===Zw||t===Qw||t===Yw||t===t1||t===Bge||typeof t=="object"&&t!==null&&(t.$$typeof===n1||t.$$typeof===r1||t.$$typeof===Xw||t.$$typeof===Jw||t.$$typeof===e1||t.$$typeof===Vge||t.$$typeof===Wge||t.$$typeof===zge||t.$$typeof===Uge)};dt.typeOf=li;lq.exports=dt;var Mx=lq.exports,MO=Mx,Gge={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qge={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Hge={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FO={};FO[MO.ForwardRef]=Hge;FO[MO.Memo]=uq;function JF(t){return MO.isMemo(t)?uq:FO[t.$$typeof]||Gge}var Kge=Object.defineProperty,Yge=Object.getOwnPropertyNames,ZF=Object.getOwnPropertySymbols,Qge=Object.getOwnPropertyDescriptor,Xge=Object.getPrototypeOf,eL=Object.prototype;function fq(t,e,r){if(typeof e!="string"){if(eL){var n=Xge(e);n&&n!==eL&&fq(t,n,r)}var i=Yge(e);ZF&&(i=i.concat(ZF(e)));for(var o=JF(t),s=JF(e),a=0;a<i.length;++a){var l=i[a];if(!qge[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var c=Qge(e,l);try{Kge(t,l,c)}catch{}}}}return t}var Jge=fq;const tL=ot(Jge);var dq={exports:{}},ht={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO=Symbol.for("react.element"),BO=Symbol.for("react.portal"),i1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),s1=Symbol.for("react.profiler"),a1=Symbol.for("react.provider"),l1=Symbol.for("react.context"),Zge=Symbol.for("react.server_context"),c1=Symbol.for("react.forward_ref"),u1=Symbol.for("react.suspense"),f1=Symbol.for("react.suspense_list"),d1=Symbol.for("react.memo"),h1=Symbol.for("react.lazy"),eve=Symbol.for("react.offscreen"),hq;hq=Symbol.for("react.module.reference");function Fi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case LO:switch(t=t.type,t){case i1:case s1:case o1:case u1:case f1:return t;default:switch(t=t&&t.$$typeof,t){case Zge:case l1:case c1:case h1:case d1:case a1:return t;default:return e}}case BO:return e}}}ht.ContextConsumer=l1;ht.ContextProvider=a1;ht.Element=LO;ht.ForwardRef=c1;ht.Fragment=i1;ht.Lazy=h1;ht.Memo=d1;ht.Portal=BO;ht.Profiler=s1;ht.StrictMode=o1;ht.Suspense=u1;ht.SuspenseList=f1;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(t){return Fi(t)===l1};ht.isContextProvider=function(t){return Fi(t)===a1};ht.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===LO};ht.isForwardRef=function(t){return Fi(t)===c1};ht.isFragment=function(t){return Fi(t)===i1};ht.isLazy=function(t){return Fi(t)===h1};ht.isMemo=function(t){return Fi(t)===d1};ht.isPortal=function(t){return Fi(t)===BO};ht.isProfiler=function(t){return Fi(t)===s1};ht.isStrictMode=function(t){return Fi(t)===o1};ht.isSuspense=function(t){return Fi(t)===u1};ht.isSuspenseList=function(t){return Fi(t)===f1};ht.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===i1||t===s1||t===o1||t===u1||t===f1||t===eve||typeof t=="object"&&t!==null&&(t.$$typeof===h1||t.$$typeof===d1||t.$$typeof===a1||t.$$typeof===l1||t.$$typeof===c1||t.$$typeof===hq||t.getModuleId!==void 0)};ht.typeOf=Fi;dq.exports=ht;var tve=dq.exports;const rve=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function nve(t,e,r,n,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a=!1,l,c,u,f,h;function p(v,x){return l=v,c=x,u=t(l,c),f=e(n,c),h=r(u,f,c),a=!0,h}function m(){return u=t(l,c),e.dependsOnOwnProps&&(f=e(n,c)),h=r(u,f,c),h}function y(){return t.dependsOnOwnProps&&(u=t(l,c)),e.dependsOnOwnProps&&(f=e(n,c)),h=r(u,f,c),h}function g(){const v=t(l,c),x=!s(v,u);return u=v,x&&(h=r(u,f,c)),h}function b(v,x){const S=!o(x,c),_=!i(v,l,x,c);return l=v,c=x,S&&_?m():S?y():_?g():h}return function(x,S){return a?b(x,S):p(x,S)}}function ive(t,e){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=e,o=aq(e,rve);const s=r(t,o),a=n(t,o),l=i(t,o);return nve(s,a,l,t,o)}function ove(t,e){const r={};for(const n in t){const i=t[n];typeof i=="function"&&(r[n]=(...o)=>e(i(...o)))}return r}function fP(t){return function(r){const n=t(r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function rL(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function pq(t,e){return function(n,{displayName:i}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=t,o.dependsOnOwnProps=rL(t);let c=o(a,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=rL(c),c=o(a,l)),c},o}}function UO(t,e){return(r,n)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${n.wrappedComponentName}.`)}}function sve(t){return t&&typeof t=="object"?fP(e=>ove(t,e)):t?typeof t=="function"?pq(t):UO(t,"mapDispatchToProps"):fP(e=>({dispatch:e}))}function ave(t){return t?typeof t=="function"?pq(t):UO(t,"mapStateToProps"):fP(()=>({}))}function lve(t,e,r){return cf({},r,t,e)}function cve(t){return function(r,{displayName:n,areMergedPropsEqual:i}){let o=!1,s;return function(l,c,u){const f=t(l,c,u);return o?i(f,s)||(s=f):(o=!0,s=f),s}}}function uve(t){return t?typeof t=="function"?cve(t):UO(t,"mergeProps"):()=>lve}function fve(){const t=Mge();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const nL={notify(){},get:()=>[]};function mq(t,e){let r,n=nL,i=0,o=!1;function s(y){u();const g=n.subscribe(y);let b=!1;return()=>{b||(b=!0,g(),f())}}function a(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return o}function u(){i++,r||(r=e?e.addNestedSub(l):t.subscribe(l),n=fve())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=nL)}function h(){o||(o=!0,u())}function p(){o&&(o=!1,f())}const m={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return m}const dve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fx=dve?E.useLayoutEffect:E.useEffect;function iL(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function lA(t,e){if(iL(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!iL(t[r[i]],e[r[i]]))return!1;return!0}const hve=["reactReduxForwardedRef"];let yq=Lge;const pve=t=>{yq=t},mve=[null,null];function yve(t,e,r){Fx(()=>t(...e),r)}function gve(t,e,r,n,i,o){t.current=n,r.current=!1,i.current&&(i.current=null,o())}function vve(t,e,r,n,i,o,s,a,l,c,u){if(!t)return()=>{};let f=!1,h=null;const p=()=>{if(f||!a.current)return;const y=e.getState();let g,b;try{g=n(y,i.current)}catch(v){b=v,h=v}b||(h=null),g===o.current?s.current||c():(o.current=g,l.current=g,s.current=!0,u())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function bve(t,e){return t===e}function gq(t,e,r,{pure:n,areStatesEqual:i=bve,areOwnPropsEqual:o=lA,areStatePropsEqual:s=lA,areMergedPropsEqual:a=lA,forwardRef:l=!1,context:c=sq}={}){const u=c,f=ave(t),h=sve(e),p=uve(r),m=!!t;return g=>{const b=g.displayName||g.name||"Component",v=`Connect(${b})`,x={shouldHandleStateChanges:m,displayName:v,wrappedComponentName:b,WrappedComponent:g,initMapStateToProps:f,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function S(A){const[C,I,T]=E.useMemo(()=>{const{reactReduxForwardedRef:q}=A,Ze=aq(A,hve);return[A.context,q,Ze]},[A]),P=E.useMemo(()=>C&&C.Consumer&&tve.isContextConsumer(E.createElement(C.Consumer,null))?C:u,[C,u]),O=E.useContext(P),N=!!A.store&&!!A.store.getState&&!!A.store.dispatch,R=!!O&&!!O.store,B=N?A.store:O.store,V=R?O.getServerState:B.getState,F=E.useMemo(()=>ive(B.dispatch,x),[B]),[$,L]=E.useMemo(()=>{if(!m)return mve;const q=mq(B,N?void 0:O.subscription),Ze=q.notifyNestedSubs.bind(q);return[q,Ze]},[B,N,O]),z=E.useMemo(()=>N?O:cf({},O,{subscription:$}),[N,O,$]),ce=E.useRef(),te=E.useRef(T),be=E.useRef(),st=E.useRef(!1);E.useRef(!1);const rt=E.useRef(!1),Vt=E.useRef();Fx(()=>(rt.current=!0,()=>{rt.current=!1}),[]);const pt=E.useMemo(()=>()=>be.current&&T===te.current?be.current:F(B.getState(),T),[B,T]),Zt=E.useMemo(()=>Ze=>$?vve(m,B,$,F,te,ce,st,rt,be,L,Ze):()=>{},[$]);yve(gve,[te,ce,st,T,be,L]);let ee;try{ee=yq(Zt,pt,V?()=>F(V(),T):pt)}catch(q){throw Vt.current&&(q.message+=`
The error may be correlated with this previous error:
${Vt.current.stack}

`),q}Fx(()=>{Vt.current=void 0,be.current=void 0,ce.current=ee});const xe=E.useMemo(()=>E.createElement(g,cf({},ee,{ref:I})),[I,g,ee]);return E.useMemo(()=>m?E.createElement(P.Provider,{value:z},xe):xe,[P,xe,z])}const w=E.memo(S);if(w.WrappedComponent=g,w.displayName=S.displayName=v,l){const C=E.forwardRef(function(T,P){return E.createElement(w,cf({},T,{reactReduxForwardedRef:P}))});return C.displayName=v,C.WrappedComponent=g,tL(C,g)}return tL(w,g)}}function xve({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:o="once"}){const s=E.useMemo(()=>{const c=mq(t);return{store:t,subscription:c,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:o}},[t,n,i,o]),a=E.useMemo(()=>t.getState(),[t]);Fx(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=e||sq;return E.createElement(l.Provider,{value:s},r)}pve(rk.useSyncExternalStore);Dge(Xy.unstable_batchedUpdates);function _ve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function vq(t,e){var r=E.useState(function(){return{inputs:e,result:t()}})[0],n=E.useRef(!0),i=E.useRef(r),o=n.current||!!(e&&i.current.inputs&&_ve(e,i.current.inputs)),s=o?i.current:{inputs:e,result:t()};return E.useEffect(function(){n.current=!1,i.current=s},[s]),s.result}function wve(t,e){return vq(function(){return t},e)}var Ge=vq,he=wve,Sve=!0,cA="Invariant failed";function bq(t,e){if(!t){if(Sve)throw new Error(cA);var r=typeof e=="function"?e():e,n=r?"".concat(cA,": ").concat(r):cA;throw new Error(n)}}var to=function(e){var r=e.top,n=e.right,i=e.bottom,o=e.left,s=n-o,a=i-r,l={top:r,right:n,bottom:i,left:o,width:s,height:a,x:o,y:r,center:{x:(n+o)/2,y:(i+r)/2}};return l},VO=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},oL=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},Eve=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},uA={top:0,right:0,bottom:0,left:0},WO=function(e){var r=e.borderBox,n=e.margin,i=n===void 0?uA:n,o=e.border,s=o===void 0?uA:o,a=e.padding,l=a===void 0?uA:a,c=to(VO(r,i)),u=to(oL(r,s)),f=to(oL(u,l));return{marginBox:c,borderBox:to(r),paddingBox:u,contentBox:f,margin:i,border:s,padding:l}},ui=function(e){var r=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var i=Number(r);return isNaN(i)&&bq(!1),i},Ave=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Lx=function(e,r){var n=e.borderBox,i=e.border,o=e.margin,s=e.padding,a=Eve(n,r);return WO({borderBox:a,border:i,margin:o,padding:s})},Bx=function(e,r){return r===void 0&&(r=Ave()),Lx(e,r)},xq=function(e,r){var n={top:ui(r.marginTop),right:ui(r.marginRight),bottom:ui(r.marginBottom),left:ui(r.marginLeft)},i={top:ui(r.paddingTop),right:ui(r.paddingRight),bottom:ui(r.paddingBottom),left:ui(r.paddingLeft)},o={top:ui(r.borderTopWidth),right:ui(r.borderRightWidth),bottom:ui(r.borderBottomWidth),left:ui(r.borderLeftWidth)};return WO({borderBox:e,margin:n,padding:i,border:o})},_q=function(e){var r=e.getBoundingClientRect(),n=window.getComputedStyle(e);return xq(r,n)},sL=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Cve(t,e){return!!(t===e||sL(t)&&sL(e))}function Tve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Cve(t[r],e[r]))return!1;return!0}function Nr(t,e){e===void 0&&(e=Tve);var r=null;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r&&r.lastThis===this&&e(i,r.lastArgs))return r.lastResult;var s=t.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var Pve=function(e){var r=[],n=null,i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};const Pm=Pve;function Ux(){return Ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ux.apply(this,arguments)}function wq(t,e){}wq.bind(null,"warn");wq.bind(null,"error");function ja(){}function Ive(t,e){return{...t,...e}}function Ti(t,e,r){const n=e.map(i=>{const o=Ive(r,i.options);return t.addEventListener(i.eventName,i.fn,o),function(){t.removeEventListener(i.eventName,i.fn,o)}});return function(){n.forEach(o=>{o()})}}const Nve="Invariant failed";class Vx extends Error{}Vx.prototype.toString=function(){return this.message};function J(t,e){if(!t)throw new Vx(Nve)}class kve extends k.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=ja,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof Vx&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Ti(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Vx){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Ove=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Wx=t=>t+1,Rve=t=>`
  You have lifted an item in position ${Wx(t.source.index)}
`,Sq=(t,e)=>{const r=t.droppableId===e.droppableId,n=Wx(t.index),i=Wx(e.index);return r?`
      You have moved the item from position ${n}
      to position ${i}
    `:`
    You have moved the item from position ${n}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},Eq=(t,e,r)=>e.droppableId===r.droppableId?`
      The item ${t}
      has been combined with ${r.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,jve=t=>{const e=t.destination;if(e)return Sq(t.source,e);const r=t.combine;return r?Eq(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},aL=t=>`
  The item has returned to its starting position
  of ${Wx(t.index)}
`,$ve=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${aL(t.source)}
    `;const e=t.destination,r=t.combine;return e?`
      You have dropped the item.
      ${Sq(t.source,e)}
    `:r?`
      You have dropped the item.
      ${Eq(t.draggableId,t.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${aL(t.source)}
  `},Dve={dragHandleUsageInstructions:Ove,onDragStart:Rve,onDragUpdate:jve,onDragEnd:$ve};var K0=Dve;const kr={x:0,y:0},Gr=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),Jn=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),$a=(t,e)=>t.x===e.x&&t.y===e.y,Gd=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),Pc=(t,e,r=0)=>t==="x"?{x:e,y:r}:{x:r,y:e},Im=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),lL=(t,e)=>Math.min(...e.map(r=>Im(t,r))),Aq=t=>e=>({x:t(e.x),y:t(e.y)});var Mve=(t,e)=>{const r=to({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r};const Sg=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),cL=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],Fve={top:0,right:0,bottom:0,left:0},Lve=(t,e)=>e?Sg(t,e.scroll.diff.displacement):t,Bve=(t,e,r)=>r&&r.increasedBy?{...t,[e.end]:t[e.end]+r.increasedBy[e.line]}:t,Uve=(t,e)=>e&&e.shouldClipSubject?Mve(e.pageMarginBox,t):to(t);var nd=({page:t,withPlaceholder:e,axis:r,frame:n})=>{const i=Lve(t.marginBox,n),o=Bve(i,r,e),s=Uve(o,n);return{page:t,withPlaceholder:e,active:s}},zO=(t,e)=>{t.frame||J(!1);const r=t.frame,n=Jn(e,r.scroll.initial),i=Gd(n),o={...r,scroll:{initial:r.scroll.initial,current:e,diff:{value:n,displacement:i},max:r.scroll.max}},s=nd({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:o});return{...t,frame:o,subject:s}};const Cq=Nr(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),Tq=Nr(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),p1=Nr(t=>Object.values(t)),Vve=Nr(t=>Object.values(t));var qd=Nr((t,e)=>Vve(e).filter(n=>t===n.descriptor.droppableId).sort((n,i)=>n.descriptor.index-i.descriptor.index));function GO(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function m1(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var y1=Nr((t,e)=>e.filter(r=>r.descriptor.id!==t.descriptor.id)),Wve=({isMovingForward:t,draggable:e,destination:r,insideDestination:n,previousImpact:i})=>{if(!r.isCombineEnabled||!GO(i))return null;function s(p){const m={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...i,at:m}}const a=i.displaced.all,l=a.length?a[0]:null;if(t)return l?s(l):null;const c=y1(e,n);if(!l){if(!c.length)return null;const p=c[c.length-1];return s(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&J(!1);const f=u-1;if(f<0)return null;const h=c[f];return s(h.descriptor.id)},Hd=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const Pq={point:kr,value:0},Nm={invisible:{},visible:{},all:[]},zve={displaced:Nm,displacedBy:Pq,at:null};var Gve=zve,Ni=(t,e)=>r=>t<=r&&r<=e,Iq=t=>{const e=Ni(t.top,t.bottom),r=Ni(t.left,t.right);return n=>{if(e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=e(n.top)||e(n.bottom),s=r(n.left)||r(n.right);if(o&&s)return!0;const l=n.top<t.top&&n.bottom>t.bottom,c=n.left<t.left&&n.right>t.right;return l&&c?!0:l&&s||c&&o}},qve=t=>{const e=Ni(t.top,t.bottom),r=Ni(t.left,t.right);return n=>e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right)};const qO={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Nq={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Hve=t=>e=>{const r=Ni(e.top,e.bottom),n=Ni(e.left,e.right);return i=>t===qO?r(i.top)&&r(i.bottom):n(i.left)&&n(i.right)};const Kve=(t,e)=>{const r=e.frame?e.frame.scroll.diff.displacement:kr;return Sg(t,r)},Yve=(t,e,r)=>e.subject.active?r(e.subject.active)(t):!1,Qve=(t,e,r)=>r(e)(t),HO=({target:t,destination:e,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:i})=>{const o=n?Kve(t,e):t;return Yve(o,e,i)&&Qve(o,r,i)},Xve=t=>HO({...t,isVisibleThroughFrameFn:Iq}),kq=t=>HO({...t,isVisibleThroughFrameFn:qve}),Jve=t=>HO({...t,isVisibleThroughFrameFn:Hve(t.destination.axis)}),Zve=(t,e,r)=>{if(typeof r=="boolean")return r;if(!e)return!0;const{invisible:n,visible:i}=e;if(n[t])return!1;const o=i[t];return o?o.shouldAnimate:!0};function e0e(t,e){const r=t.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return to(VO(r,n))}function km({afterDragging:t,destination:e,displacedBy:r,viewport:n,forceShouldAnimate:i,last:o}){return t.reduce(function(a,l){const c=e0e(l,r),u=l.descriptor.id;if(a.all.push(u),!Xve({target:c,destination:e,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=Zve(u,o,i),p={draggableId:u,shouldAnimate:h};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function t0e(t,e){if(!t.length)return 0;const r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function uL({insideDestination:t,inHomeList:e,displacedBy:r,destination:n}){const i=t0e(t,{inHomeList:e});return{displaced:Nm,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function zx({draggable:t,insideDestination:e,destination:r,viewport:n,displacedBy:i,last:o,index:s,forceShouldAnimate:a}){const l=Hd(t,r);if(s==null)return uL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const c=e.find(m=>m.descriptor.index===s);if(!c)return uL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const u=y1(t,e),f=e.indexOf(c),h=u.slice(f);return{displaced:km({afterDragging:h,destination:r,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Ya(t,e){return!!e.effected[t]}var r0e=({isMovingForward:t,destination:e,draggables:r,combine:n,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=n.draggableId,a=r[o].descriptor.index;return Ya(o,i)?t?a:a-1:t?a+1:a},n0e=({isMovingForward:t,isInHomeList:e,insideDestination:r,location:n})=>{if(!r.length)return null;const i=n.index,o=t?i+1:i-1,s=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=e?a:a+1;return o<s||o>l?null:o},i0e=({isMovingForward:t,isInHomeList:e,draggable:r,draggables:n,destination:i,insideDestination:o,previousImpact:s,viewport:a,afterCritical:l})=>{const c=s.at;if(c||J(!1),c.type==="REORDER"){const f=n0e({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:o});return f==null?null:zx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:f})}const u=r0e({isMovingForward:t,destination:i,displaced:s.displaced,draggables:n,combine:c.combine,afterCritical:l});return u==null?null:zx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:u})},o0e=({displaced:t,afterCritical:e,combineWith:r,displacedBy:n})=>{const i=!!(t.visible[r]||t.invisible[r]);return Ya(r,e)?i?kr:Gd(n.point):i?n.point:kr},s0e=({afterCritical:t,impact:e,draggables:r})=>{const n=m1(e);n||J(!1);const i=n.draggableId,o=r[i].page.borderBox.center,s=o0e({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return Gr(o,s)};const Oq=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,a0e=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,KO=(t,e,r)=>e[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2,fL=({axis:t,moveRelativeTo:e,isMoving:r})=>Pc(t.line,e.marginBox[t.end]+Oq(t,r),KO(t,e.marginBox,r)),dL=({axis:t,moveRelativeTo:e,isMoving:r})=>Pc(t.line,e.marginBox[t.start]-a0e(t,r),KO(t,e.marginBox,r)),l0e=({axis:t,moveInto:e,isMoving:r})=>Pc(t.line,e.contentBox[t.start]+Oq(t,r),KO(t,e.contentBox,r));var c0e=({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i})=>{const o=qd(n.descriptor.id,r),s=e.page,a=n.axis;if(!o.length)return l0e({axis:a,moveInto:n.page,isMoving:s});const{displaced:l,displacedBy:c}=t,u=l.all[0];if(u){const h=r[u];if(Ya(u,i))return dL({axis:a,moveRelativeTo:h.page,isMoving:s});const p=Lx(h.page,c.point);return dL({axis:a,moveRelativeTo:p,isMoving:s})}const f=o[o.length-1];if(f.descriptor.id===e.descriptor.id)return s.borderBox.center;if(Ya(f.descriptor.id,i)){const h=Lx(f.page,Gd(i.displacedBy.point));return fL({axis:a,moveRelativeTo:h,isMoving:s})}return fL({axis:a,moveRelativeTo:f.page,isMoving:s})},dP=(t,e)=>{const r=t.frame;return r?Gr(e,r.scroll.diff.displacement):e};const u0e=({impact:t,draggable:e,droppable:r,draggables:n,afterCritical:i})=>{const o=e.page.borderBox.center,s=t.at;return!r||!s?o:s.type==="REORDER"?c0e({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i}):s0e({impact:t,draggables:n,afterCritical:i})};var g1=t=>{const e=u0e(t),r=t.droppable;return r?dP(r,e):e},Rq=(t,e)=>{const r=Jn(e,t.scroll.initial),n=Gd(r);return{frame:to({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:n}}}};function hL(t,e){return t.map(r=>e[r])}function f0e(t,e){for(let r=0;r<e.length;r++){const n=e[r].visible[t];if(n)return n}return null}var d0e=({impact:t,viewport:e,destination:r,draggables:n,maxScrollChange:i})=>{const o=Rq(e,Gr(e.scroll.current,i)),s=r.frame?zO(r,Gr(r.frame.scroll.current,i)):r,a=t.displaced,l=km({afterDragging:hL(a.all,n),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),c=km({afterDragging:hL(a.all,n),destination:s,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),u={},f={},h=[a,l,c];return a.all.forEach(m=>{const y=f0e(m,h);if(y){f[m]=y;return}u[m]=!0}),{...t,displaced:{all:a.all,invisible:u,visible:f}}},h0e=(t,e)=>Gr(t.scroll.diff.displacement,e),YO=({pageBorderBoxCenter:t,draggable:e,viewport:r})=>{const n=h0e(r,t),i=Jn(n,e.page.borderBox.center);return Gr(e.client.borderBox.center,i)},jq=({draggable:t,destination:e,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const s=Jn(r,t.page.borderBox.center),l={target:Sg(t.page.borderBox,s),destination:e,withDroppableDisplacement:i,viewport:n};return o?Jve(l):kq(l)},p0e=({isMovingForward:t,draggable:e,destination:r,draggables:n,previousImpact:i,viewport:o,previousPageBorderBoxCenter:s,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const c=qd(r.descriptor.id,n),u=Hd(e,r),f=Wve({isMovingForward:t,draggable:e,destination:r,insideDestination:c,previousImpact:i})||i0e({isMovingForward:t,isInHomeList:u,draggable:e,draggables:n,destination:r,insideDestination:c,previousImpact:i,viewport:o,afterCritical:l});if(!f)return null;const h=g1({impact:f,draggable:e,droppable:r,draggables:n,afterCritical:l});if(jq({draggable:e,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:YO({pageBorderBoxCenter:h,draggable:e,viewport:o}),impact:f,scrollJumpRequest:null};const m=Jn(h,s),y=d0e({impact:f,viewport:o,destination:r,draggables:n,maxScrollChange:m});return{clientSelection:a,impact:y,scrollJumpRequest:m}};const gn=t=>{const e=t.subject.active;return e||J(!1),e};var m0e=({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:n,viewport:i})=>{const o=r.subject.active;if(!o)return null;const s=r.axis,a=Ni(o[s.start],o[s.end]),l=p1(n).filter(u=>u!==r).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>Iq(i.frame)(gn(u))).filter(u=>{const f=gn(u);return t?o[s.crossAxisEnd]<f[s.crossAxisEnd]:f[s.crossAxisStart]<o[s.crossAxisStart]}).filter(u=>{const f=gn(u),h=Ni(f[s.start],f[s.end]);return a(f[s.start])||a(f[s.end])||h(o[s.start])||h(o[s.end])}).sort((u,f)=>{const h=gn(u)[s.crossAxisStart],p=gn(f)[s.crossAxisStart];return t?h-p:p-h}).filter((u,f,h)=>gn(u)[s.crossAxisStart]===gn(h[0])[s.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>Ni(gn(u)[s.start],gn(u)[s.end])(e[s.line]));return c.length===1?c[0]:c.length>1?c.sort((u,f)=>gn(u)[s.start]-gn(f)[s.start])[0]:l.sort((u,f)=>{const h=lL(e,cL(gn(u))),p=lL(e,cL(gn(f)));return h!==p?h-p:gn(u)[s.start]-gn(f)[s.start]})[0]};const pL=(t,e)=>{const r=t.page.borderBox.center;return Ya(t.descriptor.id,e)?Jn(r,e.displacedBy.point):r},y0e=(t,e)=>{const r=t.page.borderBox;return Ya(t.descriptor.id,e)?Sg(r,Gd(e.displacedBy.point)):r};var g0e=({pageBorderBoxCenter:t,viewport:e,destination:r,insideDestination:n,afterCritical:i})=>n.filter(s=>kq({target:y0e(s,i),destination:r,viewport:e.frame,withDroppableDisplacement:!0})).sort((s,a)=>{const l=Im(t,dP(r,pL(s,i))),c=Im(t,dP(r,pL(a,i)));return l<c?-1:c<l?1:s.descriptor.index-a.descriptor.index})[0]||null,Eg=Nr(function(e,r){const n=r[e.line];return{value:n,point:Pc(e.line,n)}});const v0e=(t,e,r)=>{const n=t.axis;if(t.descriptor.mode==="virtual")return Pc(n.line,e[n.line]);const i=t.subject.page.contentBox[n.size],l=qd(t.descriptor.id,r).reduce((c,u)=>c+u.client.marginBox[n.size],0)+e[n.line]-i;return l<=0?null:Pc(n.line,l)},$q=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),Dq=(t,e,r)=>{const n=t.frame;Hd(e,t)&&J(!1),t.subject.withPlaceholder&&J(!1);const i=Eg(t.axis,e.displaceBy).point,o=v0e(t,i,r),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!n){const u=nd({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return{...t,subject:u}}const a=o?Gr(n.scroll.max,o):n.scroll.max,l=$q(n,a),c=nd({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},b0e=t=>{const e=t.subject.withPlaceholder;e||J(!1);const r=t.frame;if(!r){const s=nd({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:s}}const n=e.oldFrameMaxScroll;n||J(!1);const i=$q(r,n),o=nd({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:o,frame:i}};var x0e=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:r,draggable:n,draggables:i,destination:o,viewport:s,afterCritical:a})=>{if(!e){if(r.length)return null;const f={displaced:Nm,displacedBy:Pq,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=g1({impact:f,draggable:n,droppable:o,draggables:i,afterCritical:a}),p=Hd(n,o)?o:Dq(o,n,i);return jq({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const l=t[o.axis.line]<=e.page.borderBox.center[o.axis.line],c=(()=>{const f=e.descriptor.index;return e.descriptor.id===n.descriptor.id||l?f:f+1})(),u=Eg(o.axis,n.displaceBy);return zx({draggable:n,insideDestination:r,destination:o,viewport:s,displacedBy:u,last:Nm,index:c})},_0e=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:r,isOver:n,draggables:i,droppables:o,viewport:s,afterCritical:a})=>{const l=m0e({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:o,viewport:s});if(!l)return null;const c=qd(l.descriptor.id,i),u=g0e({pageBorderBoxCenter:e,viewport:s,destination:l,insideDestination:c,afterCritical:a}),f=x0e({previousPageBorderBoxCenter:e,destination:l,draggable:r,draggables:i,moveRelativeTo:u,insideDestination:c,viewport:s,afterCritical:a});if(!f)return null;const h=g1({impact:f,draggable:r,droppable:l,draggables:i,afterCritical:a});return{clientSelection:YO({pageBorderBoxCenter:h,draggable:r,viewport:s}),impact:f,scrollJumpRequest:null}},ti=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const w0e=(t,e)=>{const r=ti(t);return r?e[r]:null};var S0e=({state:t,type:e})=>{const r=w0e(t.impact,t.dimensions.droppables),n=!!r,i=t.dimensions.droppables[t.critical.droppable.id],o=r||i,s=o.axis.direction,a=s==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||s==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!n)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:f,droppables:h}=t.dimensions;return a?p0e({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):_0e({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:o,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Tl(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Mq(t){const e=Ni(t.top,t.bottom),r=Ni(t.left,t.right);return function(i){return e(i.y)&&r(i.x)}}function E0e(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function A0e({pageBorderBox:t,draggable:e,candidates:r}){const n=e.page.borderBox.center,i=r.map(o=>{const s=o.axis,a=Pc(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Im(n,a)}}).sort((o,s)=>s.distance-o.distance);return i[0]?i[0].id:null}function C0e({pageBorderBox:t,draggable:e,droppables:r}){const n=p1(r).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!E0e(t,o))return!1;if(Mq(o)(t.center))return!0;const s=i.axis,a=o.center[s.crossAxisLine],l=t[s.crossAxisStart],c=t[s.crossAxisEnd],u=Ni(o[s.crossAxisStart],o[s.crossAxisEnd]),f=u(l),h=u(c);return!f&&!h?!0:f?l<a:c>a});return n.length?n.length===1?n[0].descriptor.id:A0e({pageBorderBox:t,draggable:e,candidates:n}):null}const Fq=(t,e)=>to(Sg(t,e));var T0e=(t,e)=>{const r=t.frame;return r?Fq(e,r.scroll.diff.value):e};function Lq({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function P0e({draggable:t,closest:e,inHomeList:r}){return e?r&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var I0e=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:r,insideDestination:n,last:i,viewport:o,afterCritical:s})=>{const a=r.axis,l=Eg(r.axis,e.displaceBy),c=l.value,u=t[a.start],f=t[a.end],p=y1(e,n).find(y=>{const g=y.descriptor.id,b=y.page.borderBox.center[a.line],v=Ya(g,s),x=Lq({displaced:i,id:g});return v?x?f<=b:u<b-c:x?f<=b+c:u<b})||null,m=P0e({draggable:e,closest:p,inHomeList:Hd(e,r)});return zx({draggable:e,insideDestination:n,destination:r,viewport:o,last:i,displacedBy:l,index:m})};const N0e=4;var k0e=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:r,destination:n,insideDestination:i,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const s=n.axis,a=Eg(n.axis,t.displaceBy),l=a.value,c=e[s.start],u=e[s.end],h=y1(t,i).find(m=>{const y=m.descriptor.id,g=m.page.borderBox,v=g[s.size]/N0e,x=Ya(y,o),S=Lq({displaced:r.displaced,id:y});return x?S?u>g[s.start]+v&&u<g[s.end]-v:c>g[s.start]-l+v&&c<g[s.end]-l-v:S?u>g[s.start]+l+v&&u<g[s.end]+l-v:c>g[s.start]+v&&c<g[s.end]-v});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Bq=({pageOffset:t,draggable:e,draggables:r,droppables:n,previousImpact:i,viewport:o,afterCritical:s})=>{const a=Fq(e.page.borderBox,t),l=C0e({pageBorderBox:a,draggable:e,droppables:n});if(!l)return Gve;const c=n[l],u=qd(c.descriptor.id,r),f=T0e(c,a);return k0e({pageBorderBoxWithDroppableScroll:f,draggable:e,previousImpact:i,destination:c,insideDestination:u,afterCritical:s})||I0e({pageBorderBoxWithDroppableScroll:f,draggable:e,destination:c,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},QO=(t,e)=>({...t,[e.descriptor.id]:e});const O0e=({previousImpact:t,impact:e,droppables:r})=>{const n=ti(t),i=ti(e);if(!n||n===i)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const s=b0e(o);return QO(r,s)};var R0e=({draggable:t,draggables:e,droppables:r,previousImpact:n,impact:i})=>{const o=O0e({previousImpact:n,impact:i,droppables:r}),s=ti(i);if(!s)return o;const a=r[s];if(Hd(t,a)||a.subject.withPlaceholder)return o;const l=Dq(a,t,e);return QO(o,l)},Dp=({state:t,clientSelection:e,dimensions:r,viewport:n,impact:i,scrollJumpRequest:o})=>{const s=n||t.viewport,a=r||t.dimensions,l=e||t.current.client.selection,c=Jn(l,t.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:Gr(t.initial.client.borderBoxCenter,c)},f={selection:Gr(u.selection,s.scroll.current),borderBoxCenter:Gr(u.borderBoxCenter,s.scroll.current),offset:Gr(u.offset,s.scroll.diff.value)},h={client:u,page:f};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:s,current:h};const p=a.draggables[t.critical.draggable.id],m=i||Bq({pageOffset:f.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),y=R0e({draggable:p,impact:m,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:y},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function j0e(t,e){return t.map(r=>e[r])}var Uq=({impact:t,viewport:e,draggables:r,destination:n,forceShouldAnimate:i})=>{const o=t.displaced,s=j0e(o.all,r),a=km({afterDragging:s,destination:n,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...t,displaced:a}},Vq=({impact:t,draggable:e,droppable:r,draggables:n,viewport:i,afterCritical:o})=>{const s=g1({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:o});return YO({pageBorderBoxCenter:s,draggable:e,viewport:i})},Wq=({state:t,dimensions:e,viewport:r})=>{t.movementMode!=="SNAP"&&J(!1);const n=t.impact,i=r||t.viewport,o=e||t.dimensions,{draggables:s,droppables:a}=o,l=s[t.critical.draggable.id],c=ti(n);c||J(!1);const u=a[c],f=Uq({impact:n,viewport:i,destination:u,draggables:s}),h=Vq({impact:f,draggable:l,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return Dp({impact:f,clientSelection:h,state:t,dimensions:o,viewport:i})},$0e=t=>({index:t.index,droppableId:t.droppableId}),zq=({draggable:t,home:e,draggables:r,viewport:n})=>{const i=Eg(e.axis,t.displaceBy),o=qd(e.descriptor.id,r),s=o.indexOf(t);s===-1&&J(!1);const a=o.slice(s+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:l};return{impact:{displaced:km({afterDragging:a,destination:e,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:$0e(t.descriptor)}},afterCritical:c}},D0e=(t,e)=>({draggables:t.draggables,droppables:QO(t.droppables,e)}),M0e=({draggable:t,offset:e,initialWindowScroll:r})=>{const n=Lx(t.client,e),i=Bx(n,r);return{...t,placeholder:{...t.placeholder,client:n},client:n,page:i}},F0e=t=>{const e=t.frame;return e||J(!1),e},L0e=({additions:t,updatedDroppables:e,viewport:r})=>{const n=r.scroll.diff.value;return t.map(i=>{const o=i.descriptor.droppableId,s=e[o],l=F0e(s).scroll.diff.value,c=Gr(n,l);return M0e({draggable:i,offset:c,initialWindowScroll:r.scroll.initial})})},B0e=({state:t,published:e})=>{const r=e.modified.map(b=>{const v=t.dimensions.droppables[b.droppableId];return zO(v,b.scroll)}),n={...t.dimensions.droppables,...Cq(r)},i=Tq(L0e({additions:e.additions,updatedDroppables:n,viewport:t.viewport})),o={...t.dimensions.draggables,...i};e.removals.forEach(b=>{delete o[b]});const s={droppables:n,draggables:o},a=ti(t.impact),l=a?s.droppables[a]:null,c=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],{impact:f,afterCritical:h}=zq({draggable:c,home:u,draggables:o,viewport:t.viewport}),p=l&&l.isCombineEnabled?t.impact:f,m=Bq({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),y={...t,phase:"DRAGGING",impact:m,onLiftImpact:f,dimensions:s,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const hP=t=>t.movementMode==="SNAP",fA=(t,e,r)=>{const n=D0e(t.dimensions,e);return!hP(t)||r?Dp({state:t,dimensions:n}):Wq({state:t,dimensions:n})};function dA(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const mL={phase:"IDLE",completed:null,shouldFlush:!1};var U0e=(t=mL,e)=>{if(e.type==="FLUSH")return{...mL,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&J(!1);const{critical:r,clientSelection:n,viewport:i,dimensions:o,movementMode:s}=e.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],c={selection:n,borderBoxCenter:a.client.borderBox.center,offset:kr},u={client:c,page:{selection:Gr(c.selection,i.scroll.initial),borderBoxCenter:Gr(c.selection,i.scroll.initial),offset:Gr(c.selection,i.scroll.diff.value)}},f=p1(o.droppables).every(y=>!y.isFixedOnPage),{impact:h,afterCritical:p}=zq({draggable:a,home:l,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:f,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&J(!1),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||J(!1),B0e({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Tl(t)||J(!1);const{client:r}=e.payload;return $a(r,t.current.client.selection)?t:Dp({state:t,clientSelection:r,impact:hP(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return dA(t);Tl(t)||J(!1);const{id:r,newScroll:n}=e.payload,i=t.dimensions.droppables[r];if(!i)return t;const o=zO(i,n);return fA(t,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Tl(t)||J(!1);const{id:r,isEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||J(!1),i.isEnabled===n&&J(!1);const o={...i,isEnabled:n};return fA(t,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Tl(t)||J(!1);const{id:r,isCombineEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||J(!1),i.isCombineEnabled===n&&J(!1);const o={...i,isCombineEnabled:n};return fA(t,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Tl(t)||J(!1),t.isWindowScrollAllowed||J(!1);const r=e.payload.newScroll;if($a(t.viewport.scroll.current,r))return dA(t);const n=Rq(t.viewport,r);return hP(t)?Wq({state:t,viewport:n}):Dp({state:t,viewport:n})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Tl(t))return t;const r=e.payload.maxScroll;if($a(r,t.viewport.scroll.max))return t;const n={...t.viewport,scroll:{...t.viewport.scroll,max:r}};return{...t,viewport:n}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&J(!1);const r=S0e({state:t,type:e.type});return r?Dp({state:t,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const r=e.payload.reason;return t.phase!=="COLLECTING"&&J(!1),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(e.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||J(!1),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:r}=e.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return t};const V0e=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),W0e=t=>({type:"LIFT",payload:t}),z0e=t=>({type:"INITIAL_PUBLISH",payload:t}),G0e=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),q0e=()=>({type:"COLLECTION_STARTING",payload:null}),H0e=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),K0e=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),Y0e=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),Gq=t=>({type:"MOVE",payload:t}),Q0e=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),X0e=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),J0e=()=>({type:"MOVE_UP",payload:null}),Z0e=()=>({type:"MOVE_DOWN",payload:null}),ebe=()=>({type:"MOVE_RIGHT",payload:null}),tbe=()=>({type:"MOVE_LEFT",payload:null}),XO=()=>({type:"FLUSH",payload:null}),rbe=t=>({type:"DROP_ANIMATE",payload:t}),JO=t=>({type:"DROP_COMPLETE",payload:t}),qq=t=>({type:"DROP",payload:t}),nbe=t=>({type:"DROP_PENDING",payload:t}),Hq=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ibe=t=>({getState:e,dispatch:r})=>n=>i=>{if(i.type!=="LIFT"){n(i);return}const{id:o,clientSelection:s,movementMode:a}=i.payload,l=e();l.phase==="DROP_ANIMATING"&&r(JO({completed:l.completed})),e().phase!=="IDLE"&&J(!1),r(XO()),r(V0e({draggableId:o,movementMode:a}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:f,dimensions:h,viewport:p}=t.startPublishing(u);r(z0e({critical:f,dimensions:h,clientSelection:s,movementMode:a,viewport:p}))},obe=t=>()=>e=>r=>{r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)};const ZO={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Om={opacity:{drop:0,combining:.7},scale:{drop:.75}},Kq={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hl=`${Kq.outOfTheWay}s ${ZO.outOfTheWay}`,Mp={fluid:`opacity ${hl}`,snap:`transform ${hl}, opacity ${hl}`,drop:t=>{const e=`${t}s ${ZO.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${hl}`,placeholder:`height ${hl}, width ${hl}, margin ${hl}`},yL=t=>$a(t,kr)?void 0:`translate(${t.x}px, ${t.y}px)`,pP={moveTo:yL,drop:(t,e)=>{const r=yL(t);if(r)return e?`${r} scale(${Om.scale.drop})`:r}},{minDropTime:mP,maxDropTime:Yq}=Kq,sbe=Yq-mP,gL=1500,abe=.6;var lbe=({current:t,destination:e,reason:r})=>{const n=Im(t,e);if(n<=0)return mP;if(n>=gL)return Yq;const i=n/gL,o=mP+sbe*i,s=r==="CANCEL"?o*abe:o;return Number(s.toFixed(2))},cbe=({impact:t,draggable:e,dimensions:r,viewport:n,afterCritical:i})=>{const{draggables:o,droppables:s}=r,a=ti(t),l=a?s[a]:null,c=s[e.descriptor.droppableId],u=Vq({impact:t,draggable:e,draggables:o,afterCritical:i,droppable:l||c,viewport:n});return Jn(u,e.client.borderBox.center)},ube=({draggables:t,reason:e,lastImpact:r,home:n,viewport:i,onLiftImpact:o})=>!r.at||e!=="DROP"?{impact:Uq({draggables:t,impact:o,destination:n,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:Nm},didDropInsideDroppable:!0};const fbe=({getState:t,dispatch:e})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const i=t(),o=n.payload.reason;if(i.phase==="COLLECTING"){e(nbe({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&J(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||J(!1);const a=i.critical,l=i.dimensions,c=l.draggables[i.critical.draggable.id],{impact:u,didDropInsideDroppable:f}=ube({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=f?GO(u):null,p=f?m1(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},y={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:h,combine:p},g=cbe({impact:u,draggable:c,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:u};if(!(!$a(i.current.client.offset,g)||!!y.combine)){e(JO({completed:b}));return}const x=lbe({current:i.current.client.offset,destination:g,reason:o});e(rbe({newHomeClientOffset:g,dropDuration:x,completed:b}))};var dbe=fbe,Qq=()=>({x:window.pageXOffset,y:window.pageYOffset});function hbe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function pbe({onWindowScroll:t}){function e(){t(Qq())}const r=Pm(e),n=hbe(r);let i=ja;function o(){return i!==ja}function s(){o()&&J(!1),i=Ti(window,[n])}function a(){o()||J(!1),r.cancel(),i(),i=ja}return{start:s,stop:a,isActive:o}}const mbe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",ybe=t=>{const e=pbe({onWindowScroll:r=>{t.dispatch(Q0e({newScroll:r}))}});return r=>n=>{!e.isActive()&&n.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&mbe(n)&&e.stop(),r(n)}};var gbe=ybe,vbe=t=>{let e=!1,r=!1;const n=setTimeout(()=>{r=!0}),i=o=>{e||r||(e=!0,t(o),clearTimeout(n))};return i.wasCalled=()=>e,i},bbe=()=>{const t=[],e=i=>{const o=t.findIndex(a=>a.timerId===i);o===-1&&J(!1);const[s]=t.splice(o,1);s.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),s={timerId:o,callback:i};t.push(s)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const xbe=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,_be=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,wbe=(t,e)=>{if(t===e)return!0;const r=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,n=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return r&&n},kh=(t,e)=>{e()},Ov=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function hA(t,e,r,n){if(!t){r(n(e));return}const i=vbe(r);t(e,{announce:i}),i.wasCalled()||r(n(e))}var Sbe=(t,e)=>{const r=bbe();let n=null;const i=(f,h)=>{n&&J(!1),kh("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:f,mode:h})})},o=(f,h)=>{n&&J(!1),kh("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Ov(f,h))})},s=(f,h)=>{n&&J(!1);const p=Ov(f,h);n={mode:h,lastCritical:f,lastLocation:p.source,lastCombine:null},r.add(()=>{kh("onDragStart",()=>hA(t().onDragStart,p,e,K0.onDragStart))})},a=(f,h)=>{const p=GO(h),m=m1(h);n||J(!1);const y=!wbe(f,n.lastCritical);y&&(n.lastCritical=f);const g=!xbe(n.lastLocation,p);g&&(n.lastLocation=p);const b=!_be(n.lastCombine,m);if(b&&(n.lastCombine=m),!y&&!g&&!b)return;const v={...Ov(f,n.mode),combine:m,destination:p};r.add(()=>{kh("onDragUpdate",()=>hA(t().onDragUpdate,v,e,K0.onDragUpdate))})},l=()=>{n||J(!1),r.flush()},c=f=>{n||J(!1),n=null,kh("onDragEnd",()=>hA(t().onDragEnd,f,e,K0.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:s,update:a,flush:l,drop:c,abort:()=>{if(!n)return;const f={...Ov(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};c(f)}}},Ebe=(t,e)=>{const r=Sbe(t,e);return n=>i=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),i(o),r.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const a=o.payload.completed.result;r.flush(),i(o),r.drop(a);return}if(i(o),o.type==="FLUSH"){r.abort();return}const s=n.getState();s.phase==="DRAGGING"&&r.update(s.critical,s.impact)}};const Abe=t=>e=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}const n=t.getState();n.phase!=="DROP_ANIMATING"&&J(!1),t.dispatch(JO({completed:n.completed}))};var Cbe=Abe;const Tbe=t=>{let e=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return i=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),i(o),o.type!=="DROP_ANIMATE")return;const s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(Hq())}};r=requestAnimationFrame(()=>{r=null,e=Ti(window,[s])})}};var Pbe=Tbe,Ibe=t=>()=>e=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)},Nbe=t=>{let e=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!e){if(n.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){e=!1;const i=n.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const kbe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var Obe=t=>e=>r=>n=>{if(kbe(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const i=e.getState();i.phase!=="DRAGGING"&&J(!1),t.start(i);return}r(n),t.scroll(e.getState())};const Rbe=t=>e=>r=>{if(e(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(qq({reason:n.reason})))};var jbe=Rbe;const $be=iq;var Dbe=({dimensionMarshal:t,focusMarshal:e,styleMarshal:r,getResponders:n,announce:i,autoScroller:o})=>nq(U0e,$be(Age(obe(r),Ibe(t),ibe(t),dbe,Cbe,Pbe,jbe,Obe(o),gbe,Nbe(e),Ebe(n,i))));const pA=()=>({additions:{},removals:{},modified:{}});function Mbe({registry:t,callbacks:e}){let r=pA(),n=null;const i=()=>{n||(e.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:c,modified:u}=r,f=Object.keys(l).map(m=>t.draggable.getById(m).getDimension(kr)).sort((m,y)=>m.descriptor.index-y.descriptor.index),h=Object.keys(u).map(m=>{const g=t.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:g}}),p={additions:f,removals:Object.keys(c),modified:h};r=pA(),e.publish(p)}))};return{add:l=>{const c=l.descriptor.id;r.additions[c]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[c]&&delete r.removals[c],i()},remove:l=>{const c=l.descriptor;r.removals[c.id]=!0,r.modified[c.droppableId]=!0,r.additions[c.id]&&delete r.additions[c.id],i()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=pA())}}}var Xq=({scrollHeight:t,scrollWidth:e,height:r,width:n})=>{const i=Jn({x:e,y:t},{x:n,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},Jq=()=>{const t=document.documentElement;return t||J(!1),t},Zq=()=>{const t=Jq();return Xq({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Fbe=()=>{const t=Qq(),e=Zq(),r=t.y,n=t.x,i=Jq(),o=i.clientWidth,s=i.clientHeight,a=n+o,l=r+s;return{frame:to({top:r,left:n,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:kr,displacement:kr}}}},Lbe=({critical:t,scrollOptions:e,registry:r})=>{const n=Fbe(),i=n.scroll.current,o=t.droppable,s=r.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(i,e)),a=r.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(i));return{dimensions:{draggables:Tq(a),droppables:Cq(s)},critical:t,viewport:n}};function vL(t,e,r){return!(r.descriptor.id===e.id||r.descriptor.type!==e.type||t.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var Bbe=(t,e)=>{let r=null;const n=Mbe({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||J(!1),r&&e.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(t.droppable.exists(h)||J(!1),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},s=(h,p)=>{r&&(t.droppable.exists(h)||J(!1),e.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&t.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},c=h=>{r||J(!1);const p=r.critical.draggable;h.type==="ADDITION"&&vL(t,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&vL(t,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:s,startPublishing:h=>{r&&J(!1);const p=t.draggable.getById(h.draggableId),m=t.droppable.getById(p.descriptor.droppableId),y={draggable:p.descriptor,droppable:m.descriptor},g=t.subscribe(c);return r={critical:y,unsubscribe:g},Lbe({critical:y,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},eH=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",Ube=t=>{window.scrollBy(t.x,t.y)};const Vbe=Nr(t=>p1(t).filter(e=>!(!e.isEnabled||!e.frame))),Wbe=(t,e)=>Vbe(e).find(n=>(n.frame||J(!1),Mq(n.frame.pageMarginBox)(t)))||null;var zbe=({center:t,destination:e,droppables:r})=>{if(e){const i=r[e];return i.frame?i:null}return Wbe(t,r)};const Rm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Gbe=(t,e,r=()=>Rm)=>{const n=r(),i=t[e.size]*n.startFromPercentage,o=t[e.size]*n.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},tH=({startOfRange:t,endOfRange:e,current:r})=>{const n=e-t;return n===0?0:(r-t)/n},eR=1,qbe=(t,e,r=()=>Rm)=>{const n=r();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return n.maxPixelScroll;if(t===e.startScrollingFrom)return eR;const o=1-tH({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),s=n.maxPixelScroll*n.ease(o);return Math.ceil(s)},Hbe=(t,e,r)=>{const n=r(),i=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,s=e,a=o,c=Date.now()-s;if(c>=o)return t;if(c<i)return eR;const u=tH({startOfRange:i,endOfRange:a,current:c}),f=t*n.ease(u);return Math.ceil(f)},bL=({distanceToEdge:t,thresholds:e,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=qbe(t,e,i);return o===0?0:n?Math.max(Hbe(o,r,i),eR):o},xL=({container:t,distanceToEdges:e,dragStartTime:r,axis:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=Gbe(t,n,o);return e[n.end]<e[n.start]?bL({distanceToEdge:e[n.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*bL({distanceToEdge:e[n.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},Kbe=({container:t,subject:e,proposedScroll:r})=>{const n=e.height>t.height,i=e.width>t.width;return!i&&!n?r:i&&n?null:{x:i?0:r.x,y:n?0:r.y}};const Ybe=Aq(t=>t===0?0:t);var rH=({dragStartTime:t,container:e,subject:r,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s={top:n.y-e.top,right:e.right-n.x,bottom:e.bottom-n.y,left:n.x-e.left},a=xL({container:e,distanceToEdges:s,dragStartTime:t,axis:qO,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),l=xL({container:e,distanceToEdges:s,dragStartTime:t,axis:Nq,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),c=Ybe({x:l,y:a});if($a(c,kr))return null;const u=Kbe({container:e,subject:r,proposedScroll:c});return u?$a(u,kr)?null:u:null};const Qbe=Aq(t=>t===0?0:t>0?1:-1),tR=(()=>{const t=(e,r)=>e<0?e:e>r?e-r:0;return({current:e,max:r,change:n})=>{const i=Gr(e,n),o={x:t(i.x,r.x),y:t(i.y,r.y)};return $a(o,kr)?null:o}})(),nH=({max:t,current:e,change:r})=>{const n={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=Qbe(r),o=tR({max:n,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},rR=(t,e)=>nH({current:t.scroll.current,max:t.scroll.max,change:e}),Xbe=(t,e)=>{if(!rR(t,e))return null;const r=t.scroll.max,n=t.scroll.current;return tR({current:n,max:r,change:e})},nR=(t,e)=>{const r=t.frame;return r?nH({current:r.scroll.current,max:r.scroll.max,change:e}):!1},Jbe=(t,e)=>{const r=t.frame;return!r||!nR(t,e)?null:tR({current:r.scroll.current,max:r.scroll.max,change:e})};var Zbe=({viewport:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=rH({dragStartTime:n,container:t.frame,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return s&&rR(t,s)?s:null},exe=({droppable:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=t.frame;if(!s)return null;const a=rH({dragStartTime:n,container:s.pageMarginBox,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return a&&nR(t,a)?a:null},_L=({state:t,dragStartTime:e,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:i,getAutoScrollerOptions:o})=>{const s=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const f=t.viewport,h=Zbe({dragStartTime:e,viewport:f,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const c=zbe({center:s,destination:ti(t.impact),droppables:t.dimensions.droppables});if(!c)return;const u=exe({dragStartTime:e,droppable:c,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});u&&i(c.descriptor.id,u)},txe=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r=()=>Rm})=>{const n=Pm(t),i=Pm(e);let o=null;const s=c=>{o||J(!1);const{shouldUseTimeDampening:u,dragStartTime:f}=o;_L({state:c,scrollWindow:n,scrollDroppable:i,dragStartTime:f,shouldUseTimeDampening:u,getAutoScrollerOptions:r})};return{start:c=>{o&&J(!1);const u=Date.now();let f=!1;const h=()=>{f=!0};_L({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:u,shouldUseTimeDampening:f},f&&s(c)},stop:()=>{o&&(n.cancel(),i.cancel(),o=null)},scroll:s}},rxe=({move:t,scrollDroppable:e,scrollWindow:r})=>{const n=(a,l)=>{const c=Gr(a.current.client.selection,l);t({client:c})},i=(a,l)=>{if(!nR(a,l))return l;const c=Jbe(a,l);if(!c)return e(a.descriptor.id,l),null;const u=Jn(l,c);return e(a.descriptor.id,u),Jn(l,u)},o=(a,l,c)=>{if(!a||!rR(l,c))return c;const u=Xbe(l,c);if(!u)return r(c),null;const f=Jn(c,u);return r(f),Jn(c,f)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=ti(a.impact);c||J(!1);const u=i(a.dimensions.droppables[c],l);if(!u)return;const f=a.viewport,h=o(a.isWindowScrollAllowed,f,u);h&&n(a,h)}},nxe=({scrollDroppable:t,scrollWindow:e,move:r,getAutoScrollerOptions:n})=>{const i=txe({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n}),o=rxe({move:r,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:i.start,stop:i.stop}};const id="data-rfd",od=(()=>{const t=`${id}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),yP=(()=>{const t=`${id}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),ixe=(()=>{const t=`${id}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),wL={contextId:`${id}-scroll-container-context-id`},oxe=t=>e=>`[${e}="${t}"]`,Oh=(t,e)=>t.map(r=>{const n=r.styles[e];return n?`${r.selector} { ${n} }`:""}).join(" "),sxe="pointer-events: none;";var axe=t=>{const e=oxe(t),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(od.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:sxe,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${Mp.outOfTheWay};
    `;return{selector:e(yP.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:e(ixe.contextId),styles:{always:"overflow-anchor: none;"}},s=[n,r,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Oh(s,"always"),resting:Oh(s,"resting"),dragging:Oh(s,"dragging"),dropAnimating:Oh(s,"dropAnimating"),userCancel:Oh(s,"userCancel")}};const lxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect;var ri=lxe;const mA=()=>{const t=document.querySelector("head");return t||J(!1),t},SL=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function cxe(t,e){const r=Ge(()=>axe(t),[t]),n=E.useRef(null),i=E.useRef(null),o=he(Nr(f=>{const h=i.current;h||J(!1),h.textContent=f}),[]),s=he(f=>{const h=n.current;h||J(!1),h.textContent=f},[]);ri(()=>{!n.current&&!i.current||J(!1);const f=SL(e),h=SL(e);return n.current=f,i.current=h,f.setAttribute(`${id}-always`,t),h.setAttribute(`${id}-dynamic`,t),mA().appendChild(f),mA().appendChild(h),s(r.always),o(r.resting),()=>{const p=m=>{const y=m.current;y||J(!1),mA().removeChild(y),m.current=null};p(n),p(i)}},[e,s,o,r.always,r.resting,t]);const a=he(()=>o(r.dragging),[o,r.dragging]),l=he(f=>{if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),c=he(()=>{i.current&&o(r.resting)},[o,r.resting]);return Ge(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function iH(t,e){return Array.from(t.querySelectorAll(e))}var oH=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function v1(t){return t instanceof oH(t).HTMLElement}function uxe(t,e){const r=`[${od.contextId}="${t}"]`,n=iH(document,r);if(!n.length)return null;const i=n.find(o=>o.getAttribute(od.draggableId)===e);return!i||!v1(i)?null:i}function fxe(t){const e=E.useRef({}),r=E.useRef(null),n=E.useRef(null),i=E.useRef(!1),o=he(function(h,p){const m={id:h,focus:p};return e.current[h]=m,function(){const g=e.current;g[h]!==m&&delete g[h]}},[]),s=he(function(h){const p=uxe(t,h);p&&p!==document.activeElement&&p.focus()},[t]),a=he(function(h,p){r.current===h&&(r.current=p)},[]),l=he(function(){n.current||i.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&s(h)}))},[s]),c=he(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute(od.draggableId)===h&&(r.current=h)},[]);return ri(()=>(i.current=!0,function(){i.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),Ge(()=>({register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,c,l,a])}function dxe(){const t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){const p=e.indexOf(f);p!==-1&&e.splice(p,1)}}function n(f){e.length&&e.forEach(h=>h(f))}function i(f){return t.draggables[f]||null}function o(f){const h=i(f);return h||J(!1),h}const s={register:f=>{t.draggables[f.descriptor.id]=f,n({type:"ADDITION",value:f})},update:(f,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:f=>{const h=f.descriptor.id,p=i(h);p&&f.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[f.descriptor.droppableId]&&n({type:"REMOVAL",value:f}))},getById:o,findById:i,exists:f=>!!i(f),getAllByType:f=>Object.values(t.draggables).filter(h=>h.descriptor.type===f)};function a(f){return t.droppables[f]||null}function l(f){const h=a(f);return h||J(!1),h}const c={register:f=>{t.droppables[f.descriptor.id]=f},unregister:f=>{const h=a(f.descriptor.id);h&&f.uniqueId===h.uniqueId&&delete t.droppables[f.descriptor.id]},getById:l,findById:a,exists:f=>!!a(f),getAllByType:f=>Object.values(t.droppables).filter(h=>h.descriptor.type===f)};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:s,droppable:c,subscribe:r,clean:u}}function hxe(){const t=Ge(dxe,[]);return E.useEffect(()=>function(){k.version.startsWith("16")||k.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var iR=k.createContext(null),Gx=()=>{const t=document.body;return t||J(!1),t};const pxe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var mxe=pxe;const yxe=t=>`rfd-announcement-${t}`;function gxe(t){const e=Ge(()=>yxe(t),[t]),r=E.useRef(null);return E.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Ux(o.style,mxe),Gx().appendChild(o),function(){setTimeout(function(){const l=Gx();l.contains(o)&&l.removeChild(o),o===r.current&&(r.current=null)})}},[e]),he(i=>{const o=r.current;if(o){o.textContent=i;return}},[])}let vxe=0;const sH={separator:"::"};function bxe(t,e=sH){return Ge(()=>`${t}${e.separator}${vxe++}`,[e.separator,t])}function xxe(t,e=sH){const r=k.useId();return Ge(()=>`${t}${e.separator}${r}`,[e.separator,t,r])}var oR="useId"in k?xxe:bxe;function _xe({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function wxe({contextId:t,text:e}){const r=oR("hidden-text",{separator:"-"}),n=Ge(()=>_xe({contextId:t,uniqueId:r}),[r,t]);return E.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=e,o.style.display="none",Gx().appendChild(o),function(){const a=Gx();a.contains(o)&&a.removeChild(o)}},[n,e]),n}var b1=k.createContext(null);function aH(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),e}function Sxe(){let t=null;function e(){return!!t}function r(s){return s===t}function n(s){t&&J(!1);const a={abandon:s};return t=a,a}function i(){t||J(!1),t=null}function o(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:r,claim:n,release:i,tryAbandon:o}}function jm(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Exe=9,Axe=13,sR=27,lH=32,Cxe=33,Txe=34,Pxe=35,Ixe=36,Nxe=37,kxe=38,Oxe=39,Rxe=40,jxe={[Axe]:!0,[Exe]:!0};var cH=t=>{jxe[t.keyCode]&&t.preventDefault()};const $xe=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(n=>`on${n}`in document)||t})();var x1=$xe;const uH=0,EL=5;function Dxe(t,e){return Math.abs(e.x-t.x)>=EL||Math.abs(e.y-t.y)>=EL}const AL={type:"IDLE"};function Mxe({cancel:t,completed:e,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:s,clientY:a}=i;if(o!==uH)return;const l={x:s,y:a},c=r();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&J(!1);const u=c.point;if(!Dxe(u,l))return;i.preventDefault();const f=c.actions.fluidLift(l);n({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:i=>{const o=r();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{r().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(r().type==="PENDING"){t();return}if(i.keyCode===sR){i.preventDefault(),t();return}cH(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=r();if(o.type==="IDLE"&&J(!1),o.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:x1,fn:t}]}function Fxe(t){const e=E.useRef(AL),r=E.useRef(ja),n=Ge(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==uH||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const h=t.findClosestDraggableId(f);if(!h)return;const p=t.tryGetLock(h,s,{sourceEvent:f});if(!p)return;f.preventDefault();const m={x:f.clientX,y:f.clientY};r.current(),c(p,m)}}),[t]),i=Ge(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const f=t.findClosestDraggableId(u);if(!f)return;const h=t.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||t.canGetLock(f)&&u.preventDefault())}}),[t]),o=he(function(){const f={passive:!1,capture:!0};r.current=Ti(window,[i,n],f)},[i,n]),s=he(()=>{e.current.type!=="IDLE"&&(e.current=AL,r.current(),o())},[o]),a=he(()=>{const u=e.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),l=he(function(){const f={capture:!0,passive:!1},h=Mxe({cancel:a,completed:s,getPhase:()=>e.current,setPhase:p=>{e.current=p}});r.current=Ti(window,h,f)},[a,s]),c=he(function(f,h){e.current.type!=="IDLE"&&J(!1),e.current={type:"PENDING",point:h,actions:f},l()},[l]);ri(function(){return o(),function(){r.current()}},[o])}function Lxe(){}const Bxe={[Txe]:!0,[Cxe]:!0,[Ixe]:!0,[Pxe]:!0};function Uxe(t,e){function r(){e(),t.cancel()}function n(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===sR){i.preventDefault(),r();return}if(i.keyCode===lH){i.preventDefault(),n();return}if(i.keyCode===Rxe){i.preventDefault(),t.moveDown();return}if(i.keyCode===kxe){i.preventDefault(),t.moveUp();return}if(i.keyCode===Oxe){i.preventDefault(),t.moveRight();return}if(i.keyCode===Nxe){i.preventDefault(),t.moveLeft();return}if(Bxe[i.keyCode]){i.preventDefault();return}cH(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:x1,fn:r}]}function Vxe(t){const e=E.useRef(Lxe),r=Ge(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==lH)return;const s=t.findClosestDraggableId(o);if(!s)return;const a=t.tryGetLock(s,u,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const c=a.snapLift();e.current();function u(){l||J(!1),l=!1,e.current(),n()}e.current=Ti(window,Uxe(c,u),{capture:!0,passive:!1})}}),[t]),n=he(function(){const o={passive:!1,capture:!0};e.current=Ti(window,[r],o)},[r]);ri(function(){return n(),function(){e.current()}},[n])}const yA={type:"IDLE"},Wxe=120,zxe=.15;function Gxe({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(e().type!=="DRAGGING"){t();return}r.keyCode===sR&&r.preventDefault(),t()}},{eventName:x1,fn:t}]}function qxe({cancel:t,completed:e,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:o,clientY:s}=n.touches[0],a={x:o,y:s};n.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){t();return}n.preventDefault(),t()}},{eventName:"touchforcechange",fn:n=>{const i=r();i.type==="IDLE"&&J(!1);const o=n.touches[0];if(!o||!(o.force>=zxe))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&t();return}if(a){if(i.hasMoved){n.preventDefault();return}t();return}n.preventDefault()}},{eventName:x1,fn:t}]}function Hxe(t){const e=E.useRef(yA),r=E.useRef(ja),n=he(function(){return e.current},[]),i=he(function(p){e.current=p},[]),o=Ge(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const m=t.findClosestDraggableId(p);if(!m)return;const y=t.tryGetLock(m,a,{sourceEvent:p});if(!y)return;const g=p.touches[0],{clientX:b,clientY:v}=g,x={x:b,y:v};r.current(),f(y,x)}}),[t]),s=he(function(){const p={capture:!0,passive:!1};r.current=Ti(window,[o],p)},[o]),a=he(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(yA),r.current(),s())},[s,i]),l=he(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=he(function(){const p={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:n},y=Ti(window,qxe(m),p),g=Ti(window,Gxe(m),p);r.current=function(){y(),g()}},[l,n,a]),u=he(function(){const p=n();p.type!=="PENDING"&&J(!1);const m=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[n,i]),f=he(function(p,m){n().type!=="IDLE"&&J(!1);const y=setTimeout(u,Wxe);i({type:"PENDING",point:m,actions:p,longPressTimerId:y}),c()},[c,n,i,u]);ri(function(){return s(),function(){r.current();const m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(yA))}},[n,s,i]),ri(function(){return Ti(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Kxe=["input","button","textarea","select","option","optgroup","video","audio"];function fH(t,e){if(e==null)return!1;if(Kxe.includes(e.tagName.toLowerCase()))return!0;const n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===t?!1:fH(t,e.parentElement)}function Yxe(t,e){const r=e.target;return v1(r)?fH(t,r):!1}var Qxe=t=>to(t.getBoundingClientRect()).center;function Xxe(t){return t instanceof oH(t).Element}const Jxe=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||t})();function dH(t,e){return t==null?null:t[Jxe](e)?t:dH(t.parentElement,e)}function Zxe(t,e){return t.closest?t.closest(e):dH(t,e)}function e_e(t){return`[${od.contextId}="${t}"]`}function t_e(t,e){const r=e.target;if(!Xxe(r))return null;const n=e_e(t),i=Zxe(r,n);return!i||!v1(i)?null:i}function r_e(t,e){const r=t_e(t,e);return r?r.getAttribute(od.draggableId):null}function n_e(t,e){const r=`[${yP.contextId}="${t}"]`,i=iH(document,r).find(o=>o.getAttribute(yP.id)===e);return!i||!v1(i)?null:i}function i_e(t){t.preventDefault()}function Rv({expected:t,phase:e,isLockActive:r,shouldWarn:n}){return!(!r()||t!==e)}function hH({lockAPI:t,store:e,registry:r,draggableId:n}){if(t.isClaimed())return!1;const i=r.draggable.findById(n);return!(!i||!i.options.isEnabled||!eH(e.getState(),n))}function o_e({lockAPI:t,contextId:e,store:r,registry:n,draggableId:i,forceSensorStop:o,sourceEvent:s}){if(!hH({lockAPI:t,store:r,registry:n,draggableId:i}))return null;const l=n.draggable.getById(i),c=n_e(e,l.descriptor.id);if(!c||s&&!l.options.canDragInteractiveElements&&Yxe(c,s))return null;const u=t.claim(o||ja);let f="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return t.isActive(u)}function m(_,w){Rv({expected:_,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(w())}const y=m.bind(null,"DRAGGING");function g(_){function w(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(w(),J(!1)),r.dispatch(W0e(_.liftActionArgs)),f="DRAGGING";function A(C,I={shouldBlockNextClick:!1}){if(_.cleanup(),I.shouldBlockNextClick){const T=Ti(window,[{eventName:"click",fn:i_e,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}w(),r.dispatch(qq({reason:C}))}return{isActive:()=>Rv({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>A("DROP",C),cancel:C=>A("CANCEL",C),..._.actions}}function b(_){const w=Pm(C=>{y(()=>Gq({client:C}))});return{...g({liftActionArgs:{id:i,clientSelection:_,movementMode:"FLUID"},cleanup:()=>w.cancel(),actions:{move:w}}),move:w}}function v(){const _={moveUp:()=>y(J0e),moveRight:()=>y(ebe),moveDown:()=>y(Z0e),moveLeft:()=>y(tbe)};return g({liftActionArgs:{id:i,clientSelection:Qxe(c),movementMode:"SNAP"},cleanup:ja,actions:_})}function x(){Rv({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>Rv({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:v,abort:x}}const s_e=[Fxe,Vxe,Hxe];function a_e({contextId:t,store:e,registry:r,customSensors:n,enableDefaultSensors:i}){const o=[...i?s_e:[],...n||[]],s=E.useState(()=>Sxe())[0],a=he(function(g,b){jm(g)&&!jm(b)&&s.tryAbandon()},[s]);ri(function(){let g=e.getState();return e.subscribe(()=>{const v=e.getState();a(g,v),g=v})},[s,e,a]),ri(()=>s.tryAbandon,[s.tryAbandon]);const l=he(y=>hH({lockAPI:s,registry:r,store:e,draggableId:y}),[s,r,e]),c=he((y,g,b)=>o_e({lockAPI:s,registry:r,contextId:t,store:e,draggableId:y,forceSensorStop:g||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[t,s,r,e]),u=he(y=>r_e(t,y),[t]),f=he(y=>{const g=r.draggable.findById(y);return g?g.options:null},[r.draggable]),h=he(function(){s.isClaimed()&&(s.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(XO()))},[s,e]),p=he(()=>s.isClaimed(),[s]),m=Ge(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:p}),[l,c,u,f,h,p]);for(let y=0;y<o.length;y++)o[y](m)}const l_e=t=>({onBeforeCapture:e=>{const r=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};k.version.startsWith("16")||k.version.startsWith("17")?r():Xy.flushSync(r)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),c_e=t=>({...Rm,...t.autoScrollerOptions,durationDampening:{...Rm.durationDampening,...t.autoScrollerOptions}});function Rh(t){return t.current||J(!1),t.current}function u_e(t){const{contextId:e,setCallbacks:r,sensors:n,nonce:i,dragHandleUsageInstructions:o}=t,s=E.useRef(null),a=aH(t),l=he(()=>l_e(a.current),[a]),c=he(()=>c_e(a.current),[a]),u=gxe(e),f=wxe({contextId:e,text:o}),h=cxe(e,i),p=he(T=>{Rh(s).dispatch(T)},[]),m=Ge(()=>YF({publishWhileDragging:G0e,updateDroppableScroll:H0e,updateDroppableIsEnabled:K0e,updateDroppableIsCombineEnabled:Y0e,collectionStarting:q0e},p),[p]),y=hxe(),g=Ge(()=>Bbe(y,m),[y,m]),b=Ge(()=>nxe({scrollWindow:Ube,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:c,...YF({move:Gq},p)}),[g.scrollDroppable,p,c]),v=fxe(e),x=Ge(()=>Dbe({announce:u,autoScroller:b,dimensionMarshal:g,focusMarshal:v,getResponders:l,styleMarshal:h}),[u,b,g,v,l,h]);s.current=x;const S=he(()=>{const T=Rh(s);T.getState().phase!=="IDLE"&&T.dispatch(XO())},[]),_=he(()=>{const T=Rh(s).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),w=Ge(()=>({isDragging:_,tryAbort:S}),[_,S]);r(w);const A=he(T=>eH(Rh(s).getState(),T),[]),C=he(()=>Tl(Rh(s).getState()),[]),I=Ge(()=>({marshal:g,focus:v,contextId:e,canLift:A,isMovementAllowed:C,dragHandleUsageInstructionsId:f,registry:y}),[e,g,f,v,A,C,y]);return a_e({contextId:e,store:x,registry:y,customSensors:n||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),E.useEffect(()=>S,[S]),k.createElement(b1.Provider,{value:I},k.createElement(xve,{context:iR,store:x},t.children))}let f_e=0;function d_e(){return Ge(()=>`${f_e++}`,[])}function h_e(){return k.useId()}var p_e="useId"in k?h_e:d_e;function m_e(t){const e=p_e(),r=t.dragHandleUsageInstructions||K0.dragHandleUsageInstructions;return k.createElement(kve,null,n=>k.createElement(u_e,{nonce:t.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const CL={dragging:5e3,dropAnimating:4500},y_e=(t,e)=>e?Mp.drop(e.duration):t?Mp.snap:Mp.fluid,g_e=(t,e)=>{if(t)return e?Om.opacity.drop:Om.opacity.combining},v_e=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function b_e(t){const r=t.dimension.client,{offset:n,combineWith:i,dropping:o}=t,s=!!i,a=v_e(t),l=!!o,c=l?pP.drop(n,s):pP.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:y_e(a,o),transform:c,opacity:g_e(s,l),zIndex:l?CL.dropAnimating:CL.dragging,pointerEvents:"none"}}function x_e(t){return{transform:pP.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function __e(t){return t.type==="DRAGGING"?b_e(t):x_e(t)}function w_e(t,e,r=kr){const n=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=xq(i,n),s=Bx(o,r),a={client:o,tagName:e.tagName.toLowerCase(),display:n.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:o,page:s}}function S_e(t){const e=oR("draggable"),{descriptor:r,registry:n,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}=t,l=Ge(()=>({canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}),[o,a,s]),c=he(p=>{const m=i();return m||J(!1),w_e(r,m,p)},[r,i]),u=Ge(()=>({uniqueId:e,descriptor:r,options:l,getDimension:c}),[r,c,l,e]),f=E.useRef(u),h=E.useRef(!0);ri(()=>(n.draggable.register(f.current),()=>n.draggable.unregister(f.current)),[n.draggable]),ri(()=>{if(h.current){h.current=!1;return}const p=f.current;f.current=u,n.draggable.update(u,p)},[u,n.draggable])}var aR=k.createContext(null);function qx(t){const e=E.useContext(t);return e||J(!1),e}function E_e(t){t.preventDefault()}const A_e=t=>{const e=E.useRef(null),r=he((w=null)=>{e.current=w},[]),n=he(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:s}=qx(b1),{type:a,droppableId:l}=qx(aR),c=Ge(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:u,draggableId:f,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:y,mapped:g,dropAnimationFinished:b}=t;if(!y){const w=Ge(()=>({descriptor:c,registry:s,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:h}),[c,s,n,m,p,h]);S_e(w)}const v=Ge(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:E_e}:null,[i,o,f,h]),x=he(w=>{g.type==="DRAGGING"&&g.dropping&&w.propertyName==="transform"&&(k.version.startsWith("16")||k.version.startsWith("17")?b():Xy.flushSync(b))},[b,g]),S=Ge(()=>{const w=__e(g),A=g.type==="DRAGGING"&&g.dropping?x:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":f,style:w,onTransitionEnd:A},dragHandleProps:v}},[i,v,f,g,x,r]),_=Ge(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return k.createElement(k.Fragment,null,u(S,g.snapshot,_))};var C_e=A_e,pH=(t,e)=>t===e,mH=t=>{const{combine:e,destination:r}=t;return r?r.droppableId:e?e.droppableId:null};const T_e=t=>t.combine?t.combine.draggableId:null,P_e=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function I_e(){const t=Nr((i,o)=>({x:i,y:o})),e=Nr((i,o,s=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:s,combineWith:a,combineTargetFor:null})),r=Nr((i,o,s,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:i,dimension:s,forceShouldAnimate:u,snapshot:e(o,a,l,c,null)}}));return(i,o)=>{if(jm(i)){if(i.critical.draggable.id!==o.draggableId)return null;const s=i.current.client.offset,a=i.dimensions.draggables[o.draggableId],l=ti(i.impact),c=P_e(i.impact),u=i.forceShouldAnimate;return r(t(s.x,s.y),i.movementMode,a,o.isClone,l,c,u)}if(i.phase==="DROP_ANIMATING"){const s=i.completed;if(s.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=i.dimensions.draggables[o.draggableId],c=s.result,u=c.mode,f=mH(c),h=T_e(c),m={duration:i.dropDuration,curve:ZO.drop,moveTo:i.newHomeClientOffset,opacity:h?Om.opacity.drop:null,scale:h?Om.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:l,dropping:m,draggingOver:f,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:e(u,a,f,h,m)}}}return null}}function yH(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const N_e={mapped:{type:"SECONDARY",offset:kr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:yH(null)}};function k_e(){const t=Nr((s,a)=>({x:s,y:a})),e=Nr(yH),r=Nr((s,a=null,l)=>({mapped:{type:"SECONDARY",offset:s,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),n=s=>s?r(kr,s,!0):null,i=(s,a,l,c)=>{const u=l.displaced.visible[s],f=!!(c.inVirtualList&&c.effected[s]),h=m1(l),p=h&&h.draggableId===s?a:null;if(!u){if(!f)return n(p);if(l.displaced.invisible[s])return null;const g=Gd(c.displacedBy.point),b=t(g.x,g.y);return r(b,p,!0)}if(f)return n(p);const m=l.displacedBy.point,y=t(m.x,m.y);return r(y,p,u.shouldAnimate)};return(s,a)=>{if(jm(s))return s.critical.draggable.id===a.draggableId?null:i(a.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){const l=s.completed;return l.result.draggableId===a.draggableId?null:i(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const O_e=()=>{const t=I_e(),e=k_e();return(n,i)=>t(n,i)||e(n,i)||N_e},R_e={dropAnimationFinished:Hq},j_e=gq(O_e,R_e,null,{context:iR,areStatePropsEqual:pH})(C_e);var $_e=j_e;function gH(t){return qx(aR).isUsingCloneFor===t.draggableId&&!t.isClone?null:k.createElement($_e,t)}function D_e(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return k.createElement(gH,Ux({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const vH=t=>e=>t===e,M_e=vH("scroll"),F_e=vH("auto"),TL=(t,e)=>e(t.overflowX)||e(t.overflowY),L_e=t=>{const e=window.getComputedStyle(t),r={overflowX:e.overflowX,overflowY:e.overflowY};return TL(r,M_e)||TL(r,F_e)},B_e=()=>!1,bH=t=>t==null?null:t===document.body?B_e()?t:null:t===document.documentElement?null:L_e(t)?t:bH(t.parentElement);var U_e=bH,gP=t=>({x:t.scrollLeft,y:t.scrollTop});const xH=t=>t?window.getComputedStyle(t).position==="fixed"?!0:xH(t.parentElement):!1;var V_e=t=>{const e=U_e(t),r=xH(t);return{closestScrollable:e,isFixedOnPage:r}},W_e=({descriptor:t,isEnabled:e,isCombineEnabled:r,isFixedOnPage:n,direction:i,client:o,page:s,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,m=Xq({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:kr,displacement:kr}}}})(),c=i==="vertical"?qO:Nq,u=nd({page:s,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:e,client:o,page:s,frame:l,subject:u}};const z_e=(t,e)=>{const r=_q(t);if(!e||t!==e)return r;const n=r.paddingBox.top-e.scrollTop,i=r.paddingBox.left-e.scrollLeft,o=n+e.scrollHeight,s=i+e.scrollWidth,l=VO({top:n,right:s,bottom:o,left:i},r.border);return WO({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var G_e=({ref:t,descriptor:e,env:r,windowScroll:n,direction:i,isDropDisabled:o,isCombineEnabled:s,shouldClipSubject:a})=>{const l=r.closestScrollable,c=z_e(t,l),u=Bx(c,n),f=(()=>{if(!l)return null;const p=_q(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:Bx(p,n),scroll:gP(l),scrollSize:m,shouldClipSubject:a}})();return W_e({descriptor:e,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:c,page:u,closest:f})};const q_e={passive:!1},H_e={passive:!0};var PL=t=>t.shouldPublishImmediately?q_e:H_e;const jv=t=>t&&t.env.closestScrollable||null;function K_e(t){const e=E.useRef(null),r=qx(b1),n=oR("droppable"),{registry:i,marshal:o}=r,s=aH(t),a=Ge(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=E.useRef(a),c=Ge(()=>Nr((S,_)=>{e.current||J(!1);const w={x:S,y:_};o.updateDroppableScroll(a.id,w)}),[a.id,o]),u=he(()=>{const S=e.current;return!S||!S.env.closestScrollable?kr:gP(S.env.closestScrollable)},[]),f=he(()=>{const S=u();c(S.x,S.y)},[u,c]),h=Ge(()=>Pm(f),[f]),p=he(()=>{const S=e.current,_=jv(S);if(S&&_||J(!1),S.scrollOptions.shouldPublishImmediately){f();return}h()},[h,f]),m=he((S,_)=>{e.current&&J(!1);const w=s.current,A=w.getDroppableRef();A||J(!1);const C=V_e(A),I={ref:A,descriptor:a,env:C,scrollOptions:_};e.current=I;const T=G_e({ref:A,descriptor:a,env:C,windowScroll:S,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),P=C.closestScrollable;return P&&(P.setAttribute(wL.contextId,r.contextId),P.addEventListener("scroll",p,PL(I.scrollOptions))),T},[r.contextId,a,p,s]),y=he(()=>{const S=e.current,_=jv(S);return S&&_||J(!1),gP(_)},[]),g=he(()=>{const S=e.current;S||J(!1);const _=jv(S);e.current=null,_&&(h.cancel(),_.removeAttribute(wL.contextId),_.removeEventListener("scroll",p,PL(S.scrollOptions)))},[p,h]),b=he(S=>{const _=e.current;_||J(!1);const w=jv(_);w||J(!1),w.scrollTop+=S.y,w.scrollLeft+=S.x},[]),v=Ge(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:y,dragStopped:g,scroll:b}),[g,m,y,b]),x=Ge(()=>({uniqueId:n,descriptor:a,callbacks:v}),[v,a,n]);ri(()=>(l.current=x.descriptor,i.droppable.register(x),()=>{e.current&&g(),i.droppable.unregister(x)}),[v,a,g,x,o,i.droppable]),ri(()=>{e.current&&o.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,o]),ri(()=>{e.current&&o.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,o])}function gA(){}const IL={width:0,height:0,margin:Fve},Y_e=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>t||r==="close"?IL:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},Q_e=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>{const n=Y_e({isAnimatingOpenOnMount:t,placeholder:e,animate:r});return{display:e.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Mp.placeholder:null}},X_e=t=>{const e=E.useRef(null),r=he(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:n,onTransitionEnd:i,onClose:o,contextId:s}=t,[a,l]=E.useState(t.animate==="open");E.useEffect(()=>a?n!=="open"?(r(),l(!1),gA):e.current?gA:(e.current=setTimeout(()=>{e.current=null,l(!1)}),r):gA,[n,a,r]);const c=he(f=>{f.propertyName==="height"&&(i(),n==="close"&&o())},[n,o,i]),u=Q_e({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return k.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":s,onTransitionEnd:c,ref:t.innerRef})};var J_e=k.memo(X_e);class Z_e extends k.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,r){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const ewe=t=>{const e=E.useContext(b1);e||J(!1);const{contextId:r,isMovementAllowed:n}=e,i=E.useRef(null),o=E.useRef(null),{children:s,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:f,isDropDisabled:h,isCombineEnabled:p,snapshot:m,useClone:y,updateViewportMaxScroll:g,getContainerForClone:b}=t,v=he(()=>i.current,[]),x=he((P=null)=>{i.current=P},[]);he(()=>o.current,[]);const S=he((P=null)=>{o.current=P},[]),_=he(()=>{n()&&g({maxScroll:Zq()})},[n,g]);K_e({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:v});const w=Ge(()=>k.createElement(Z_e,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:P,data:O,animate:N})=>k.createElement(J_e,{placeholder:O,onClose:P,innerRef:S,animate:N,contextId:r,onTransitionEnd:_})),[r,_,t.placeholder,t.shouldAnimatePlaceholder,S]),A=Ge(()=>({innerRef:x,placeholder:w,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,w,x]),C=y?y.dragging.draggableId:null,I=Ge(()=>({droppableId:a,type:l,isUsingCloneFor:C}),[a,C,l]);function T(){if(!y)return null;const{dragging:P,render:O}=y,N=k.createElement(gH,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(R,B)=>O(R,B,P));return Hee.createPortal(N,b())}return k.createElement(aR.Provider,{value:I},s(A,m),T())};var twe=ewe;function rwe(){return document.body||J(!1),document.body}const NL={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:rwe},_H=t=>{let e={...t},r;for(r in NL)t[r]===void 0&&(e={...e,[r]:NL[r]});return e},vA=(t,e)=>t===e.droppable.type,kL=(t,e)=>e.draggables[t.draggable.id],nwe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},r=Nr(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=Nr((o,s,a,l,c,u)=>{const f=c.descriptor.id;if(c.descriptor.droppableId===o){const m=u?{render:u,dragging:r(c.descriptor)}:null,y={isDraggingOver:a,draggingOverWith:a?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:m}}if(!s)return e;if(!l)return t;const p={isDraggingOver:a,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,s)=>{const a=_H(s),l=a.droppableId,c=a.type,u=!a.isDropDisabled,f=a.renderClone;if(jm(o)){const h=o.critical;if(!vA(c,h))return e;const p=kL(h,o.dimensions),m=ti(o.impact)===l;return n(l,u,m,m,p,f)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!vA(c,h.critical))return e;const p=kL(h.critical,o.dimensions);return n(l,u,mH(h.result)===l,ti(h.impact)===l,p,f)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!vA(c,h.critical))return e;const p=ti(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),y=h.critical.droppable.id===l;return p?m?t:e:y?t:e}return e}},iwe={updateViewportMaxScroll:X0e},owe=gq(nwe,iwe,(t,e,r)=>({..._H(r),...t,...e}),{context:iR,areStatePropsEqual:pH})(twe);var swe=owe;const awe=["0","1","2","3"],lwe=({defaultPlayers:t,onSubmit:e})=>{const{register:r,reset:n,control:i,getValues:o,setValue:s}=zd({defaultValues:t}),a=Ka({control:i,name:["0.proPicUrl","0.teamPicUrl","1.proPicUrl","1.teamPicUrl","2.proPicUrl","2.teamPicUrl","3.proPicUrl","3.teamPicUrl"]}),l=Ka({control:i,name:["0.color","1.color","2.color","3.color"]}),c=E.useCallback(p=>{if(!p.destination)return;const m=["0","1","2","3"],[y]=m.splice(p.source.index,1);m.splice(p.destination.index,0,y),n({0:o(m[0]),1:o(m[1]),2:o(m[2]),3:o(m[3])})},[o,n]),u=E.useCallback(p=>{const m=p.currentTarget.getAttribute("data-index"),y=p.currentTarget.getAttribute("data-type"),g=o(`${m}.${y}`),b=prompt("新的圖片網址",g??"");b!==null&&s(`${m}.${y}`,b)},[o,s]),f=E.useCallback(()=>{n()},[n]),h=E.useCallback(()=>{e==null||e(o())},[o,e]);return E.useEffect(()=>{n({0:{...t[0]},1:{...t[1]},2:{...t[2]},3:{...t[3]}})},[t,n]),d.jsxs("div",{children:[d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"w-8"}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"flex font-semibold gap-2 text-center",children:[d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"flex-[2]",children:"圖片"}),d.jsx("div",{className:"flex-[2]",children:"隊伍"}),d.jsx("div",{className:"flex-[5]",children:"隊伍名稱／稱號"}),d.jsx("div",{className:"flex-[5]",children:"名稱"}),d.jsx("div",{className:"flex-[3]",children:"暱稱"}),d.jsx("div",{className:"flex-[3]",children:"顏色"})]})})]}),d.jsxs("div",{className:"flex",children:[d.jsxs("div",{className:"w-8 flex flex-col justify-around font-semibold",children:[d.jsx("div",{children:"東"}),d.jsx("div",{children:"南"}),d.jsx("div",{children:"西"}),d.jsx("div",{children:"北"})]}),d.jsx("div",{className:"flex-1",children:d.jsx(m_e,{onDragEnd:c,children:d.jsx(swe,{droppableId:"droppable",children:p=>d.jsxs("div",{...p.droppableProps,ref:p.innerRef,children:[awe.map((m,y)=>d.jsx(D_e,{draggableId:m,index:y,children:g=>d.jsx("div",{ref:g.innerRef,...g.draggableProps,children:d.jsxs("div",{className:"flex gap-2 py-1 items-center",children:[d.jsx("div",{className:"flex-1",children:d.jsx("div",{className:"text-2xl",...g.dragHandleProps,children:d.jsx("i",{className:"bi bi-grip-vertical"})})}),d.jsx("div",{className:"flex-[2] border border-neutral-400",children:d.jsx("img",{className:"aspect-[18/25] w-full cursor-pointer",src:a[2*y],onClick:u,"data-type":"proPicUrl","data-index":y,alt:""})}),d.jsx("div",{className:"flex-[2] border border-neutral-400",children:d.jsx("img",{className:"aspect-square w-full cursor-pointer",src:a[2*y+1],onClick:u,"data-type":"teamPicUrl","data-index":y,alt:""})}),d.jsx("div",{className:"flex-[5]",children:d.jsx("input",{className:"w-full",...r(`${m}.title`)})}),d.jsx("div",{className:"flex-[5]",children:d.jsx("input",{className:"w-full",...r(`${m}.name`)})}),d.jsx("div",{className:"flex-[3]",children:d.jsx("input",{className:"w-full",...r(`${m}.nickname`)})}),d.jsx("div",{className:"flex-[3]",children:d.jsx("input",{className:"w-full text-white",...r(`${m}.color`),style:{background:l[y]}})})]})})},m)),p.placeholder]})})})})]}),d.jsxs("div",{className:"flex mt-8",children:[d.jsx(Re,{className:"flex-1",variant:"text",color:"secondary",onClick:f,children:"重置"}),d.jsx(Re,{className:"flex-1",onClick:h,children:"儲存"})]})]})},bA=[{label:d.jsxs("span",{children:[d.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(舊版)"]}),value:"listView-old"},{label:d.jsxs("span",{children:[d.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(新版)"]}),value:"listView-new"},{label:d.jsxs("span",{children:[d.jsx("i",{className:"bi-grid-fill"})," 2x2"]}),value:"gridView"}];function $v({value:t}){return d.jsx(Mt,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const Dv=({match:t,matchRound:e,playerIndex:r})=>{var n;return d.jsxs("div",{className:"text-xs",children:[d.jsxs("p",{children:[e.playerResults[r].isRiichi&&d.jsx("span",{children:"立"}),e.resultType===Ve.Ron&&e.playerResults[r].type===yt.Lose&&d.jsx("span",{children:"統"}),e.resultType===Ve.Ron&&e.playerResults[r].type===yt.Win&&d.jsx("span",{children:"和"}),e.resultType===Ve.SelfDrawn&&e.playerResults[r].type===yt.Win&&d.jsx("span",{children:"摸"}),e.resultType===Ve.Exhausted&&e.playerResults[r].type===yt.Win&&d.jsx("span",{children:"聽"})]}),(e.resultType===Ve.Ron||e.resultType===Ve.SelfDrawn)&&e.playerResults[r].type===yt.Win&&d.jsxs("div",{className:"bg-black bg-opacity-10 rounded py-1 px-2 mx-auto inline-block",children:[d.jsx("p",{className:"font-bold",children:d.jsx(kx,{className:"text-xs text-neutral-600",han:e.playerResults[r].detail.han,fu:e.playerResults[r].detail.fu,yakumanCount:e.playerResults[r].detail.yakumanCount,isManganRoundUp:t.setting.isManganRoundUp==="1"})}),d.jsx("p",{children:(n=e.playerResults[r].detail.yakus)==null?void 0:n.map(({label:i})=>i).join(" ")})]})]})};function wH({params:{matchId:t}}){const{data:e,set:r}=Zr("obs/1"),{data:n}=qa({queryKey:["matches",t],queryFn:({queryKey:M})=>EO(M[1])}),{match:i,matchRounds:o,matchCurrentRound:s,matchCurrentRoundDoras:a,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:u,setCurrentRoundDoras:f,setMatchName:h,setMatchPlayers:p,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchActiveResultDetail:g,setMatchRoundHasBroadcastedToTrue:b}=Jo(t),v=E.useMemo(()=>Object.entries(o??{}).map(([M,fe])=>({id:M,...fe}))??[],[o]),x=E.useMemo(()=>v.filter(({resultDetail:M,hasBroadcasted:fe})=>!!M&&!fe),[v]),[S,_]=E.useState(void 0),[w,A]=E.useState(bA[0].value),[C,I]=Eo(!1),[T,P]=E.useState({initialActivePlayerIndex:"0",initialTargetPlayerIndex:"-1"}),O=Iye(),[N,R]=Eo(!1),[B,V]=Eo(!1),F=E.useCallback(()=>{V(!0)},[V]),$=E.useCallback(M=>{p(M),V(!1)},[p,V]),[L,z]=Eo(!1),[ce,te]=Eo(!1),[be,st]=E.useState({id:null,matchRound:null}),rt=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-matchRoundId");if(!fe)return;const Te=o==null?void 0:o[fe];Te&&(st({id:fe,matchRound:Te}),te(!0))},[o,te]),Vt=E.useCallback(M=>{if(!v||!be.id)return;const fe=v.findIndex(({id:zt})=>zt===be.id);if(fe===-1)return;l(be.id,M);let Te=M;for(let zt=fe+1;zt<v.length;zt++){const{id:bJ,...Vn}=v[zt],u$={...Vn,playerResults:{0:{...Vn.playerResults[0],beforeScore:Te.playerResults[0].afterScore,afterScore:Te.playerResults[0].afterScore+(Vn.playerResults[0].afterScore-Vn.playerResults[0].beforeScore)},1:{...Vn.playerResults[1],beforeScore:Te.playerResults[1].afterScore,afterScore:Te.playerResults[1].afterScore+(Vn.playerResults[1].afterScore-Vn.playerResults[1].beforeScore)},2:{...Vn.playerResults[2],beforeScore:Te.playerResults[2].afterScore,afterScore:Te.playerResults[2].afterScore+(Vn.playerResults[2].afterScore-Vn.playerResults[2].beforeScore)},3:{...Vn.playerResults[3],beforeScore:Te.playerResults[3].afterScore,afterScore:Te.playerResults[3].afterScore+(Vn.playerResults[3].afterScore-Vn.playerResults[3].beforeScore)}}};l(bJ,u$),Te=u$}te(!1),setTimeout(()=>{alert("「下次小心d喇屌 :)」")},0)},[be.id,v,te,l]),[,pt]=E.useState(null),Zt=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-player-index");if(!fe)return;const Te=i==null?void 0:i.players[fe];if(!Te)return;const zt=!(s!=null&&s.playerResults[fe].isRiichi);O.showConfirmDialog({title:zt?"確定要立直嗎？":"取消立直？",content:zt?`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Te.name}！`:`你是否想取消 ${Te.name} 的立直？`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[fe]:{...s==null?void 0:s.playerResults[fe],isRiichi:!(s!=null&&s.playerResults[fe].isRiichi)}}})}})},[O,i==null?void 0:i.players,s==null?void 0:s.playerResults,c]),ee=E.useCallback(M=>{var Te;const fe=parseInt((Te=M.currentTarget)==null?void 0:Te.getAttribute("data-index"),10);typeof fe<"u"&&!Number.isNaN(fe)&&_(fe)},[]),xe=E.useCallback(M=>{if(typeof S<"u"){const fe=M[0];if(!fe)return;const Te=[...a];S===-1?Te.push(fe):Te[S]=fe,f(Te),_(void 0)}},[S,a,f]),Ee=E.useCallback(()=>{if(typeof S<"u"){const M=[...a];S>-1&&(M.splice(S,1),f(M),_(void 0))}},[S,a,f]),q=E.useCallback(()=>{_(void 0)},[]),Ze=E.useCallback(M=>{const fe=M==null?void 0:M.currentTarget.getAttribute("data-player-index");fe&&(P({initialActivePlayerIndex:fe}),I())},[I]),ke=E.useCallback(()=>{R(!0)},[R]),vt=E.useCallback(()=>{z(!0)},[z]),$t=E.useCallback((M,fe)=>{if(console.log(M,fe),!i||!s)return;const Te=i.players[M],zt=s.playerResults[M];switch(fe){case"reveal":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],isRevealed:!s.playerResults[M].isRevealed,detail:{...s.playerResults[M].detail,isRevealed:!s.playerResults[M].isRevealed}}}});case"riichi":return O.showConfirmDialog({title:zt.isRiichi?"取消立直？":"確定要立直嗎？",content:zt.isRiichi?`你是否想取消 ${Te.name} 的立直？`:`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Te.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isRiichi:!(s!=null&&s.playerResults[M].isRiichi),detail:{...s.playerResults[M].detail,isRiichied:!s.playerResults[M].isRiichi,raw:{...s.playerResults[M].detail.raw,riichi:!s.playerResults[M].isRiichi}}}}}),zt.isRiichi||(pt("立直動畫"),setTimeout(()=>{pt(null)},2e3))}});case"ron-self":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!(s!=null&&s.playerResults[M].detail.isRevealed)}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:"-1"}),I();return;case"ron-before":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:NG(M)}),I();return;case"ron-after":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:kG(M)}),I();return;case"ron-opposite":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:OG(M)}),I();return;case"dora-normal-plus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,dora:s.playerResults[M].detail.dora+1}}}});case"dora-normal-minus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,dora:Math.max(s.playerResults[M].detail.dora-1,0)}}}});case"dora-red-plus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,redDora:s.playerResults[M].detail.redDora+1}}}});case"dora-red-minus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,redDora:Math.max(s.playerResults[M].detail.redDora-1,0)}}}});case"waitingTile":return Z({index:M,tiles:(s==null?void 0:s.playerResults[M].waitingTiles)??[]});case"yaku":return po({index:M});case"yellow-card":return O.showConfirmDialog({title:zt.isYellowCarded?"取消黃牌？":"確定要給予這名玩家黃牌嗎？",content:zt.isYellowCarded?`你是否想取消 ${Te.name} 的黃牌？`:`一旦點擊確定，就會播出黃牌動畫，請確定要黃牌的是 ${Te.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isYellowCarded:!(s!=null&&s.playerResults[M].isYellowCarded)}}})}});case"red-card":return O.showConfirmDialog({title:zt.isRedCarded?"取消紅牌？":"確定要給予這名玩家紅牌嗎？",content:zt.isRedCarded?`你是否想取消 ${Te.name} 的紅牌？`:`一旦點擊確定，就會播出紅牌動畫，請確定要紅牌的是 ${Te.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isRedCarded:!(s!=null&&s.playerResults[M].isRedCarded)}}})}})}},[O,i,s,I,c]),en=E.useCallback(M=>{try{const fe=EF(M.roundCount),Te=M.playerResults[fe].type===yt.Win,zt=!Te&&M.roundCount>=8;zt&&alert("對局結束。"),c({...M,nextRoundType:zt?bt.End:Te?bt.Extended:bt.NextRound}),I(!1),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3)}catch(fe){console.error(fe)}},[I,c]),Un=E.useCallback(M=>{try{const fe=EF(M.roundCount),Te=M.playerResults[fe].type!==yt.Win,zt=Te&&M.roundCount>=8;zt&&alert("對局結束。"),c({...M,nextRoundType:zt?bt.End:Te?bt.NextRoundAndExtended:bt.Extended}),R(!1),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3)}catch(fe){console.error(fe)}},[R,c]),j=E.useCallback(M=>{try{c({playerResults:M.playerResults,resultType:Ve.Hotfix});const fe={matchId:t,code:Nx(t,M.roundCount,M.extendedRoundCount),roundCount:M.roundCount,extendedRoundCount:M.extendedRoundCount,cumulatedThousands:M.cumulatedThousands,nextRoundCumulatedThousands:0,resultType:Ve.Unknown,nextRoundType:bt.Unknown,playerResults:AF(M.playerResults),doras:(s==null?void 0:s.doras)??[]};u(fe),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3),z(!1)}catch(fe){console.error(fe)}},[s==null?void 0:s.doras,t,u,z,c]),U=E.useCallback(()=>{if(!s)return;const M=s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,fe=s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0,Te={matchId:t,code:Nx(t,M,fe),roundCount:M,extendedRoundCount:fe,cumulatedThousands:s.nextRoundCumulatedThousands,nextRoundCumulatedThousands:0,resultType:Ve.Unknown,nextRoundType:bt.Unknown,playerResults:AF(s.playerResults),doras:{}};u(Te)},[s,t,u]),W=E.useCallback(()=>{r({matchId:t})},[t,r]),[re,Z]=E.useState(null),Q=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-player-index");typeof fe>"u"||!(s!=null&&s.playerResults[fe])||Z({index:fe,tiles:(s==null?void 0:s.playerResults[fe].waitingTiles)??[]})},[s==null?void 0:s.playerResults]),pe=E.useCallback(()=>{Z(null)},[]),nt=E.useCallback(M=>{re&&(c({playerResults:{...s==null?void 0:s.playerResults,[re.index]:{...s==null?void 0:s.playerResults[re.index],waitingTiles:M}}}),Z(null))},[re,s==null?void 0:s.playerResults,c]),Wt=E.useCallback(()=>{re&&(c({playerResults:{...s==null?void 0:s.playerResults,[re.index]:{...s==null?void 0:s.playerResults[re.index],waitingTiles:[]}}}),Z(null))},[re,s==null?void 0:s.playerResults,c]),[Dr,po]=E.useState(null),TS=E.useCallback(()=>{po(null)},[]),dh=E.useCallback(M=>{!s||!Dr||(c({playerResults:{...s.playerResults,[Dr.index]:{...s.playerResults[Dr.index],detail:{...s.playerResults[Dr.index].detail,...M}}}}),po(null))},[Dr,s,c]),hh=E.useCallback(M=>{if(M.preventDefault(),!i)return;const fe=prompt("對局名稱",i.name);fe&&h(fe)},[i,h]),Jg=E.useCallback(M=>{if(!o)return;const fe=M.currentTarget.getAttribute("data-match-round-id");if(!fe)return;const Te=o[fe].resultDetail;Te&&(g(Te),b(fe),pt("播放和牌中…"),setTimeout(()=>{g(null),pt(null)},2e4))},[o,g,b]),Zg=E.useCallback(()=>{g(null)},[g]),PS=E.useCallback(()=>{m(!0)},[m]),ev=E.useCallback(()=>{m(!1)},[m]),gJ=E.useCallback(()=>{y(!0)},[y]),vJ=E.useCallback(()=>{y(!1)},[y]);return E.useEffect(()=>{s&&a.length===0&&_(-1)},[s,a.length]),(!i||!s)&&n?d.jsx(zye,{matchDTO:n}):!i||!s?d.jsx("div",{children:"對局讀取失敗。"}):d.jsxs("div",{children:[d.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-24 pb-48",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-row items-center gap-x-4 text-white",children:[d.jsxs("div",{className:"p-2 pl-4 pr-10 flex items-center gap-x-8 transition-[width] text-[4rem]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[d.jsxs("div",{className:"text-[0.5em] relative",children:[d.jsx("div",{className:"text-[0.5em]",children:d.jsxs("button",{type:"button",onClick:hh,children:[i.name," ",d.jsx("i",{className:"bi bi-pencil"})]})}),d.jsxs("div",{className:"flex gap-x-8 items-center",children:[d.jsx("div",{children:d.jsx(us,{roundCount:s.roundCount,max:8})}),d.jsxs("div",{className:"flex flex-col justify-around",children:[d.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2"})}),d.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.extendedRoundCount??0})]}),d.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[d.jsx("div",{className:"flex-1",children:d.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2"})}),d.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.cumulatedThousands??0})]})]})]}),i.hideHeader&&d.jsx("div",{className:"absolute inset-0 opacity-100 bg-red-800 text-center",children:"隱藏中"})]}),d.jsxs("div",{className:"flex items-center gap-x-2",children:[a.map((M,fe)=>d.jsx("button",{"data-index":fe,onClick:ee,className:"hover:opacity-80",children:d.jsx(ko,{className:"w-12 animate-[fadeInFromLeft_0.5s_ease-in-out]",children:M},M)})),d.jsx(Re,{type:"button",color:a.length===0?"danger":"secondary",className:`${a.length===0&&"animate-bounce"}`,"data-index":"-1",onClick:ee,children:"+懸賞"})]})]}),d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"shrink-0",children:(e==null?void 0:e.matchId)!==t&&d.jsx(Re,{color:"success",type:"button",className:"animate-pulse",onClick:W,children:"開始OBS"})})]}),d.jsxs("div",{className:"flex justify-between gap-x-8 ",children:[d.jsx("div",{className:"flex-1",children:d.jsx(Kye,{tabs:bA,defaultValue:bA[0].value,onChangeValue:A})}),d.jsxs("div",{className:"text-right space-x-4",children:[i.activeResultDetail&&d.jsxs(Re,{color:"secondary",type:"button",onClick:Zg,children:["結束播放中的和牌詳情",d.jsx("br",{}),d.jsx("span",{className:"text-xs",children:"(或最多20秒後自動結束)"})]}),s.nextRoundType!==bt.Unknown&&s.nextRoundType!==bt.End&&d.jsxs(Re,{color:"success",type:"button",className:"animate-pulse",onClick:U,children:["進入",d.jsx(us,{roundCount:s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0})]}),d.jsx(Re,{color:"secondary",type:"button",onClick:ke,children:"流局"})]})]}),w==="listView-old"&&d.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(M=>d.jsxs("div",{className:"flex gap-x-2 items-center",children:[d.jsx("div",{className:"flex-1 text-[2.5rem]",children:d.jsx(Ha,{player:i.players[M],playerIndex:M,score:s.playerResults[M].afterScore,scoreChanges:s.playerResults[M].scoreChanges,isEast:Xn(M,s.roundCount),isRiichi:s.playerResults[M].isRiichi,waitingTiles:s.playerResults[M].waitingTiles,onClickWaitingTiles:Q,isYellowCarded:s.playerResults[M].isYellowCarded,isRedCarded:s.playerResults[M].isRedCarded,showPointAndRanking:i.showPoints})}),d.jsx("div",{children:d.jsx("button",{type:"button",className:`${s.playerResults[M].isRiichi?"bg-orange-600 text-white":"bg-white text-orange-600 opacity-30"} h-16 w-16 border-2 border-orange-600  rounded-full text-lg`,onClick:Zt,"data-player-index":M,children:s.playerResults[M].isRiichi?"已立直":"立直?"})}),d.jsx("div",{className:"pl-6",children:d.jsx(Re,{color:"danger",type:"button",onClick:Ze,"data-player-index":M,children:"和了"})})]}))}),w==="listView-new"&&d.jsx(Gye,{players:i.players,currentRound:s,onAction:$t}),w==="gridView"&&d.jsx(Hye,{players:i.players,currentRound:s,onAction:$t}),d.jsx("div",{children:d.jsxs(Re,{size:"small",color:"secondary",onClick:F,children:[d.jsx("i",{className:"bi bi-people"})," 修改玩家"]})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("h4",{className:"text-3xl",children:[d.jsx("i",{className:"bi bi-bar-chart-steps"})," 紀錄"," ",d.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[d.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),d.jsx("th",{children:i.players[0].nickname}),d.jsx("th",{children:i.players[1].nickname}),d.jsx("th",{children:i.players[2].nickname}),d.jsx("th",{children:i.players[3].nickname}),d.jsx("th",{className:"text-right",children:"操作"})]})}),d.jsxs("tbody",{children:[v[0]&&d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center"}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:v[0].playerResults[0].beforeScore})}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:v[0].playerResults[1].beforeScore})}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:v[0].playerResults[2].beforeScore})}),d.jsx("td",{className:"text-center",children:d.jsx(Mt,{value:v[0].playerResults[3].beforeScore})}),d.jsx("td",{})]}),v.map(M=>M.resultType===Ve.Hotfix?d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),d.jsx("td",{className:"text-center",children:M.playerResults[0].afterScore}),d.jsx("td",{className:"text-center",children:M.playerResults[1].afterScore}),d.jsx("td",{className:"text-center",children:M.playerResults[2].afterScore}),d.jsx("td",{className:"text-center",children:M.playerResults[3].afterScore}),d.jsx("td",{})]},M.id):d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center whitespace-nowrap",children:d.jsx(us,{roundCount:M.roundCount,extendedRoundCount:M.extendedRoundCount,max:8,className:"px-4"})}),d.jsxs("td",{className:"text-center",children:[d.jsx($v,{value:M.playerResults[0].afterScore-M.playerResults[0].beforeScore}),d.jsx(Dv,{match:i,matchRound:M,playerIndex:"0"})]}),d.jsxs("td",{className:"text-center",children:[d.jsx($v,{value:M.playerResults[1].afterScore-M.playerResults[1].beforeScore}),d.jsx(Dv,{match:i,matchRound:M,playerIndex:"1"})]}),d.jsxs("td",{className:"text-center",children:[d.jsx($v,{value:M.playerResults[2].afterScore-M.playerResults[2].beforeScore}),d.jsx(Dv,{match:i,matchRound:M,playerIndex:"2"})]}),d.jsxs("td",{className:"text-center",children:[d.jsx($v,{value:M.playerResults[3].afterScore-M.playerResults[3].beforeScore}),d.jsx(Dv,{match:i,matchRound:M,playerIndex:"3"})]}),d.jsxs("td",{className:"text-right space-x-2",children:[(M.resultType===Ve.Ron||M.resultType===Ve.SelfDrawn)&&d.jsxs(Re,{color:M.hasBroadcasted?"secondary":"success",type:"button",variant:"text",className:M.hasBroadcasted?"opacity-50":"",onClick:Jg,"data-match-round-id":M.id,children:[d.jsx("i",{className:"bi bi-camera-reels"})," ",M.hasBroadcasted?"已播放過":"播放和牌詳情"]}),M.resultType!==Ve.Unknown&&d.jsxs(Re,{variant:"text",color:"danger","data-matchRoundId":M.id,onClick:rt,children:[d.jsx("i",{className:"bi bi-pencil"})," 修改"]})]})]},M.id)),v[v.length-1]&&d.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[d.jsx("td",{className:"text-center whitespace-nowrap px-16",children:d.jsxs(Re,{onClick:vt,size:"small",color:"secondary",children:[d.jsx("i",{className:"bi bi-pencil"})," 手動調整分數"]})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:v[v.length-1].playerResults[0].afterScore})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:v[v.length-1].playerResults[1].afterScore})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:v[v.length-1].playerResults[2].afterScore})}),d.jsx("td",{className:"text-center font-bold text-lg",children:d.jsx(Mt,{value:v[v.length-1].playerResults[3].afterScore})}),d.jsx("td",{})]})]})]})]})]}),d.jsx(Kn,{open:typeof S<"u",title:"選擇懸賞",onClose:q,children:d.jsx(kF,{hideRedTiles:!0,onSubmit:xe,onRemove:Ee,canRemove:typeof S<"u"&&S>0,defaultValue:typeof S<"u"?[a[S]]:void 0})}),d.jsx(Kn,{open:!!re,title:"選擇待牌",onClose:pe,children:d.jsx(kF,{hideRedTiles:!0,onSubmit:nt,onRemove:Wt,defaultValue:re==null?void 0:re.tiles,multiple:!0,canRemove:!0})}),d.jsx(ege,{round:s.roundCount,activePlayerIndex:(Dr==null?void 0:Dr.index)??"0",targetPlayerIndex:"-1",open:!!Dr,onClose:TS,onSubmit:dh,defaultValue:s.playerResults[(Dr==null?void 0:Dr.index)??"0"].detail}),d.jsx(Kn,{title:"和了",open:C,onClose:()=>I(!1),children:d.jsx(BG,{match:i,currentMatchRound:s,onSubmit:en,...T})}),d.jsx(Kn,{title:"流局",open:N,onClose:()=>R(!1),children:d.jsx(UG,{match:i,currentMatchRound:s,onSubmit:Un,...T})}),d.jsx(Kn,{title:"修改玩家",open:B,onClose:()=>V(!1),children:d.jsx(lwe,{defaultPlayers:i.players,onSubmit:$})}),d.jsx(Kn,{title:"手動調整分數",open:L,onClose:()=>z(!1),children:d.jsx(bge,{match:i,currentMatchRound:s,onSubmit:j,...T})}),d.jsx(Kn,{title:"修改局數",open:ce,onClose:()=>te(!1),children:d.jsx(xge,{match:i,matchRound:be.matchRound,onSubmit:Vt})}),d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 pl-6 pr-6 pb-6 z-50 flex justify-between items-end bg-gradient-to-b from-transparent to-[#00000080]",children:[d.jsx("div",{className:"text-left"}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-right mb-4",children:[s.nextRoundType!==bt.Unknown&&s.nextRoundType!==bt.End&&d.jsxs("button",{className:"text-6xl p-4 text-green-800 bg-green-400 border-4 border-green-600 rounded-lg",onClick:U,children:["進入",d.jsx(us,{roundCount:s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0})," ",d.jsx("i",{className:"bi bi-play-fill"})]}),s.nextRoundType===bt.End&&d.jsx("a",{href:`/match/${t}/export`,target:"_blank",children:d.jsxs("button",{className:"text-6xl p-4 text-yellow-800 bg-yellow-400 border-4 border-yellow-600 rounded-lg",children:["上傳成績",d.jsx("i",{className:"bi bi-cloud-upload"})]})})]}),d.jsxs("div",{className:"flex gap-x-6 items-end justify-end",children:[!i.hideHeader&&d.jsxs("button",{onClick:gJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[d.jsx("i",{className:"bi bi-eye"})," 標題：顯示中"]}),i.hideHeader&&d.jsxs("button",{onClick:vJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-600 border border-red-500 leading-6 text-white",children:[d.jsx("i",{className:"bi bi-eye-slash"})," 標題：隱藏中"]}),!i.showPoints&&d.jsxs("button",{onClick:PS,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[d.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),i.showPoints&&d.jsxs("button",{onClick:ev,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-green-300 border border-green-300 leading-6 text-green-800",children:[d.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),x.map(M=>d.jsx("button",{onClick:Jg,"data-match-round-id":M.id,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-200 border border-red-300 leading-6 text-red-800 animate-bounce",children:d.jsxs("p",{children:[d.jsx("i",{className:"bi bi-trophy"})," ",M.roundCount,".",M.extendedRoundCount," 和牌動畫：待播放"]})}))]})]})]})]})}function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ye.apply(this,arguments)}function Rs(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var vP=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t),Mu=255,ba=100,lp=t=>{var{r:e,g:r,b:n,a:i}=t,o=Math.max(e,r,n),s=o-Math.min(e,r,n),a=s?o===e?(r-n)/s:o===r?2+(n-e)/s:4+(e-r)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*ba:0,v:o/Mu*ba,a:i}},SH=t=>{var{h:e,s:r,l:n,a:i}=EH(t);return"hsla("+e+", "+r+"%, "+n+"%, "+i+")"},EH=t=>{var{h:e,s:r,v:n,a:i}=t,o=(200-r)*n/ba;return{h:e,s:o>0&&o<200?r*n/ba/(o<=ba?o:200-o)*ba:0,l:o/2,a:i}},AH=t=>{var{r:e,g:r,b:n}=t,i=e<<16|r<<8|n;return"#"+(o=>new Array(7-o.length).join("0")+o)(i.toString(16))},cwe=t=>{var{r:e,g:r,b:n,a:i}=t,o=typeof i=="number"&&(i*255|256).toString(16).slice(1);return""+AH({r:e,g:r,b:n,a:i})+(o||"")},$m=t=>lp(uwe(t)),uwe=t=>{var e=t.replace("#","");/^#?/.test(t)&&e.length===3&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var r=new RegExp("[A-Za-z0-9]{2}","g"),[n,i,o=0,s]=t.match(r).map(a=>parseInt(a,16));return{r:n,g:i,b:o,a:(s??255)/Mu}},_1=t=>{var{h:e,s:r,v:n,a:i}=t,o=e/60,s=r/ba,a=n/ba,l=Math.floor(o)%6,c=o-Math.floor(o),u=Mu*a*(1-s),f=Mu*a*(1-s*c),h=Mu*a*(1-s*(1-c));a*=Mu;var p={};switch(l){case 0:p.r=a,p.g=h,p.b=u;break;case 1:p.r=f,p.g=a,p.b=u;break;case 2:p.r=u,p.g=a,p.b=h;break;case 3:p.r=u,p.g=f,p.b=a;break;case 4:p.r=h,p.g=u,p.b=a;break;case 5:p.r=a,p.g=u,p.b=f;break}return p.r=Math.round(p.r),p.g=Math.round(p.g),p.b=Math.round(p.b),ye({},p,{a:i})},fwe=t=>{var{r:e,g:r,b:n,a:i}=_1(t);return"rgba("+e+", "+r+", "+n+", "+i+")"},dwe=t=>{var{r:e,g:r,b:n}=t;return{r:e,g:r,b:n}},hwe=t=>{var{h:e,s:r,l:n}=t;return{h:e,s:r,l:n}},bP=t=>AH(_1(t)),pwe=t=>{var{h:e,s:r,v:n}=t;return{h:e,s:r,v:n}},Fu=t=>{var e,r,n,i,o,s,a,l;return typeof t=="string"&&vP(t)?(s=$m(t),a=t):typeof t!="string"&&(s=t),s&&(n=pwe(s),o=EH(s),i=_1(s),l=cwe(i),a=bP(s),r=hwe(o),e=dwe(i)),{rgb:e,hsl:r,hsv:n,rgba:i,hsla:o,hsva:s,hex:a,hexa:l}};function OL(t){var e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useCallback((r,n)=>e.current&&e.current(r,n),[])}var Fp=t=>"touches"in t,RL=t=>{!Fp(t)&&t.preventDefault&&t.preventDefault()},jL=function(e,r,n){return r===void 0&&(r=0),n===void 0&&(n=1),e>n?n:e<r?r:e},$L=(t,e)=>{var r=t.getBoundingClientRect(),n=Fp(e)?e.touches[0]:e;return{left:jL((n.pageX-(r.left+window.pageXOffset))/r.width),top:jL((n.pageY-(r.top+window.pageYOffset))/r.height),width:r.width,height:r.height,x:n.pageX-(r.left+window.pageXOffset),y:n.pageY-(r.top+window.pageYOffset)}},mwe=["prefixCls","className","onMove","onDown"],CH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-interactive",className:n,onMove:i,onDown:o}=t,s=Rs(t,mwe),a=E.useRef(null),l=E.useRef(!1),[c,u]=E.useState(!1),f=OL(i),h=OL(o),p=v=>l.current&&!Fp(v)?!1:(l.current=Fp(v),!0),m=E.useCallback(v=>{RL(v);var x=Fp(v)?v.touches.length>0:v.buttons>0;x&&a.current?f&&f($L(a.current,v),v):u(!1)},[f]),y=E.useCallback(()=>u(!1),[]),g=E.useCallback(v=>{var x=v?window.addEventListener:window.removeEventListener;x(l.current?"touchmove":"mousemove",m),x(l.current?"touchend":"mouseup",y)},[]);E.useEffect(()=>(g(c),()=>{c&&g(!1)}),[c,g]);var b=E.useCallback(v=>{RL(v.nativeEvent),p(v.nativeEvent)&&(h&&h($L(a.current,v.nativeEvent),v.nativeEvent),u(!0))},[h]);return d.jsx("div",ye({},s,{className:[r,n||""].filter(Boolean).join(" "),style:ye({},s.style,{touchAction:"none"}),ref:a,tabIndex:0,onMouseDown:b,onTouchStart:b}))});CH.displayName="Interactive";const TH=CH;var ywe=t=>{var{className:e,color:r,left:n,top:i,prefixCls:o}=t,s={position:"absolute",top:i,left:n},a={"--saturation-pointer-box-shadow":"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",width:6,height:6,transform:"translate(-3px, -3px)",boxShadow:"var(--saturation-pointer-box-shadow)",borderRadius:"50%",backgroundColor:r};return E.useMemo(()=>d.jsx("div",{className:o+"-pointer "+(e||""),style:s,children:d.jsx("div",{className:o+"-fill",style:a})}),[i,n,r,e,o])},gwe=["prefixCls","radius","pointer","className","hue","style","hsva","onChange"],PH=k.forwardRef((t,e)=>{var r,{prefixCls:n="w-color-saturation",radius:i=0,pointer:o,className:s,hue:a=0,style:l,hsva:c,onChange:u}=t,f=Rs(t,gwe),h=ye({width:200,height:200,borderRadius:i},l,{position:"relative"}),p=(y,g)=>{u&&c&&u({h:c.h,s:y.left*100,v:(1-y.top)*100,a:c.a})},m=E.useMemo(()=>{if(!c)return null;var y={top:100-c.v+"%",left:c.s+"%",color:SH(c)};return o&&typeof o=="function"?o(ye({prefixCls:n},y)):d.jsx(ywe,ye({prefixCls:n},y))},[c,o,n]);return d.jsx(TH,ye({className:[n,s||""].filter(Boolean).join(" ")},f,{style:ye({position:"absolute",inset:0,cursor:"crosshair",backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsl("+((r=c==null?void 0:c.h)!=null?r:a)+", 100%, 50%))"},h),ref:e,onMove:p,onDown:p,children:m}))});PH.displayName="Saturation";const vwe=PH;var bwe=["className","prefixCls","left","top","style","fillProps"],xwe=t=>{var{className:e,prefixCls:r,left:n,top:i,style:o,fillProps:s}=t,a=Rs(t,bwe),l=ye({},o,{position:"absolute",left:n,top:i}),c=ye({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},s==null?void 0:s.style,{transform:n?"translate(-9px, -1px)":"translate(-1px, -9px)"});return d.jsx("div",ye({className:r+"-pointer "+(e||""),style:l},a,{children:d.jsx("div",ye({className:r+"-fill"},s,{style:c}))}))},_we=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],wwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==",IH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-alpha",className:n,hsva:i,background:o,bgProps:s={},innerProps:a={},pointerProps:l={},radius:c=0,width:u,height:f=16,direction:h="horizontal",style:p,onChange:m,pointer:y}=t,g=Rs(t,_we),b=A=>{m&&m(ye({},i,{a:h==="horizontal"?A.left:A.top}),A)},v=SH(Object.assign({},i,{a:1})),x="linear-gradient(to "+(h==="horizontal"?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+v+" 100%)",S={};h==="horizontal"?S.left=i.a*100+"%":S.top=i.a*100+"%";var _=ye({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:c,background:"url("+wwe+") left center",backgroundColor:"var(--alpha-background-color)"},p,{position:"relative"},{width:u,height:f}),w=y&&typeof y=="function"?y(ye({prefixCls:r},l,S)):d.jsx(xwe,ye({},l,{prefixCls:r},S));return d.jsxs("div",ye({},g,{className:[r,r+"-"+h,n||""].filter(Boolean).join(" "),style:_,ref:e,children:[d.jsx("div",ye({},s,{style:ye({inset:0,position:"absolute",background:o||x,borderRadius:c},s.style)})),d.jsx(TH,ye({},a,{style:ye({},a.style,{inset:0,zIndex:1,position:"absolute"}),onMove:b,onDown:b,children:w}))]}))});IH.displayName="Alpha";const xP=IH;var Swe=["prefixCls","placement","label","value","className","style","labelStyle","inputStyle","onChange","onBlur"],Ewe=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t),Awe=t=>Number(String(t).replace(/%/g,"")),NH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input",placement:n="bottom",label:i,value:o,className:s,style:a,labelStyle:l,inputStyle:c,onChange:u,onBlur:f}=t,h=Rs(t,Swe),[p,m]=E.useState(o),y=E.useRef(!1);E.useEffect(()=>{t.value!==p&&(y.current||m(t.value))},[t.value]);function g(_,w){var A=(w||_.target.value).trim().replace(/^#/,"");Ewe(A)&&u&&u(_,A);var C=Awe(A);isNaN(C)||u&&u(_,C),m(A)}function b(_){y.current=!1,m(t.value),f&&f(_)}var v={};n==="bottom"&&(v.flexDirection="column"),n==="top"&&(v.flexDirection="column-reverse"),n==="left"&&(v.flexDirection="row-reverse");var x=ye({"--editable-input-label-color":"rgb(153, 153, 153)","--editable-input-box-shadow":"rgb(204 204 204) 0px 0px 0px 1px inset","--editable-input-color":"#666",position:"relative",alignItems:"center",display:"flex",fontSize:11},v,a),S=ye({width:"100%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,fontSize:11,background:"transparent",boxSizing:"border-box",border:"none",color:"var(--editable-input-color)",boxShadow:"var(--editable-input-box-shadow)"},c);return d.jsxs("div",{className:[r,s||""].filter(Boolean).join(" "),style:x,children:[d.jsx("input",ye({ref:e,value:p,onChange:g,onBlur:b,autoComplete:"off",onFocus:()=>y.current=!0},h,{style:S})),i&&d.jsx("span",{style:ye({color:"var(--editable-input-label-color)",textTransform:"capitalize"},l),children:i})]})});NH.displayName="EditableInput";const cp=NH;var Cwe=["prefixCls","hsva","placement","rProps","gProps","bProps","aProps","className","style","onChange"],kH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input-rgba",hsva:n,placement:i="bottom",rProps:o={},gProps:s={},bProps:a={},aProps:l={},className:c,style:u,onChange:f}=t,h=Rs(t,Cwe),p=n?_1(n):{};function m(g){var b=Number(g.target.value);b&&b>255&&(g.target.value="255"),b&&b<0&&(g.target.value="0")}var y=(g,b,v)=>{typeof g=="number"&&(b==="a"&&(g<0&&(g=0),g>100&&(g=100),f&&f(Fu(lp(ye({},p,{a:g/100}))))),g>255&&(g=255,v.target.value="255"),g<0&&(g=0,v.target.value="0"),b==="r"&&f&&f(Fu(lp(ye({},p,{r:g})))),b==="g"&&f&&f(Fu(lp(ye({},p,{g})))),b==="b"&&f&&f(Fu(lp(ye({},p,{b:g})))))};return d.jsxs("div",ye({ref:e,className:[r,c||""].filter(Boolean).join(" ")},h,{style:ye({fontSize:11,display:"flex"},u),children:[d.jsx(cp,ye({label:"R",value:p.r||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"r",g)},o,{style:ye({},o.style)})),d.jsx(cp,ye({label:"G",value:p.g||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"g",g)},s,{style:ye({marginLeft:5},o.style)})),d.jsx(cp,ye({label:"B",value:p.b||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"b",g)},a,{style:ye({marginLeft:5},a.style)})),l&&d.jsx(cp,ye({label:"A",value:p.a?parseInt(String(p.a*100),10):0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"a",g)},l,{style:ye({marginLeft:5},l.style)}))]}))});kH.displayName="EditableInputRGBA";const Twe=kH;var Pwe=["prefixCls","className","hue","onChange","direction"],OH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-hue",className:n,hue:i=0,onChange:o,direction:s="horizontal"}=t,a=Rs(t,Pwe);return d.jsx(xP,ye({ref:e,className:r+" "+(n||"")},a,{direction:s,background:"linear-gradient(to "+(s==="horizontal"?"right":"bottom")+", rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)",hsva:{h:i,s:100,v:100,a:i/360},onChange:(l,c)=>{o&&o({h:s==="horizontal"?360*c.left:360*c.top})}}))});OH.displayName="Hue";const Iwe=OH;var Nwe=["prefixCls","className","color","colors","style","rectProps","onChange","addonAfter","addonBefore","rectRender"],RH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-swatch",className:n,color:i,colors:o=[],style:s,rectProps:a={},onChange:l,addonAfter:c,addonBefore:u,rectRender:f}=t,h=Rs(t,Nwe),p=ye({"--swatch-background-color":"rgb(144, 19, 254)",background:"var(--swatch-background-color)",height:15,width:15,marginRight:5,marginBottom:5,cursor:"pointer",position:"relative",outline:"none",borderRadius:2},a.style),m=(y,g)=>{l&&l($m(y),Fu($m(y)),g)};return d.jsxs("div",ye({ref:e},h,{className:[r,n||""].filter(Boolean).join(" "),style:ye({display:"flex",flexWrap:"wrap",position:"relative"},s),children:[u&&k.isValidElement(u)&&u,o&&Array.isArray(o)&&o.map((y,g)=>{var b="",v="";typeof y=="string"&&(b=y,v=y),typeof y=="object"&&y.color&&(b=y.title||y.color,v=y.color);var x=i&&i.toLocaleLowerCase()===v.toLocaleLowerCase(),S=f&&f({key:g,title:b,color:v,checked:!!x,style:ye({},p,{background:v}),onClick:w=>m(v,w)});if(S)return S;var _=a.children&&k.isValidElement(a.children)?k.cloneElement(a.children,{color:v,checked:x}):null;return d.jsx("div",ye({tabIndex:0,title:b,onClick:w=>m(v,w)},a,{children:_,style:ye({},p,{background:v})}),g)}),c&&k.isValidElement(c)&&c]}))});RH.displayName="Swatch";const kwe=RH;var Owe=["prefixCls","className","onChange","width","presetColors","color","editableDisable","disableAlpha","style"],Rwe=["#D0021B","#F5A623","#f8e61b","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],DL=t=>d.jsx("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:4,top:1,bottom:1,left:t.left,borderRadius:1,position:"absolute",backgroundColor:"#fff"}}),jH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-sketch",className:n,onChange:i,width:o=218,presetColors:s=Rwe,color:a,editableDisable:l=!0,disableAlpha:c=!1,style:u}=t,f=Rs(t,Owe),[h,p]=E.useState({h:209,s:36,v:90,a:1});E.useEffect(()=>{typeof a=="string"&&vP(a)&&p($m(a)),typeof a=="object"&&p(a)},[a]);var m=w=>{p(w),i&&i(Fu(w))},y=(w,A)=>{typeof w=="string"&&vP(w)&&/(3|6)/.test(String(w.length))&&m($m(w))},g=w=>m(ye({},h,{a:w.a})),b=w=>m(ye({},h,w,{a:h.a})),v=ye({"--sketch-background":"rgb(255, 255, 255)","--sketch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px","--sketch-swatch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset","--sketch-alpha-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset, rgb(0 0 0 / 25%) 0px 0px 4px inset","--sketch-swatch-border-top":"1px solid rgb(238, 238, 238)",background:"var(--sketch-background)",borderRadius:4,boxShadow:"var(--sketch-box-shadow)",width:o},u),x={borderRadius:2,background:fwe(h),boxShadow:"var(--sketch-alpha-box-shadow)"},S={borderTop:"var(--sketch-swatch-border-top)",paddingTop:10,paddingLeft:10},_={marginRight:10,marginBottom:10,borderRadius:3,boxShadow:"var(--sketch-swatch-box-shadow)"};return d.jsxs("div",ye({},f,{className:r+" "+(n||""),ref:e,style:v,children:[d.jsxs("div",{style:{padding:"10px 10px 8px"},children:[d.jsx(vwe,{hsva:h,style:{width:"auto",height:150},onChange:b}),d.jsxs("div",{style:{display:"flex",marginTop:4},children:[d.jsxs("div",{style:{flex:1},children:[d.jsx(Iwe,{width:"auto",height:10,hue:h.h,pointer:DL,innerProps:{style:{marginLeft:1,marginRight:5}},onChange:w=>m(ye({},h,w))}),!c&&d.jsx(xP,{width:"auto",height:10,hsva:h,pointer:DL,style:{marginTop:4},innerProps:{style:{marginLeft:1,marginRight:5}},onChange:g})]}),!c&&d.jsx(xP,{width:24,height:24,hsva:h,radius:2,style:{marginLeft:4},bgProps:{style:{background:"transparent"}},innerProps:{style:x},pointer:()=>d.jsx(E.Fragment,{})})]})]}),l&&d.jsxs("div",{style:{display:"flex",margin:"0 10px 3px 10px"},children:[d.jsx(cp,{label:"Hex",value:bP(h).replace(/^#/,"").toLocaleUpperCase(),onChange:(w,A)=>y(A),style:{minWidth:58}}),d.jsx(Twe,{hsva:h,style:{marginLeft:6},aProps:c?!1:{},onChange:w=>m(w.hsva)})]}),s&&s.length>0&&d.jsx(kwe,{style:S,colors:s,color:bP(h),onChange:w=>m(w),rectProps:{style:_}})]}))});jH.displayName="Sketch";const jwe=jH;function $H({value:t,onChange:e,onBlur:r}){const n=E.useCallback(i=>{e==null||e(i.hex)},[e]);return d.jsx(jwe,{disableAlpha:!0,onChange:n,onBlur:r,color:t})}const $we=async()=>new Promise(t=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.addEventListener("change",r=>{var i;const n=(i=r.target.files)==null?void 0:i[0];n&&t(n)}),e.click()}),ML=({children:t,helperText:e,onChangeFile:r=async()=>{},...n})=>{const i=E.useMemo(()=>t||d.jsxs("div",{className:"space-y-2 text-center text-xs",children:[d.jsx("p",{children:d.jsx("i",{className:"bi bi-upload"})}),d.jsx("p",{children:"拖拉檔案上傳 ／ 點擊上傳"}),d.jsx("p",{children:e})]}),[t,e]),[{loading:o},s]=qw(r),a=E.useCallback(()=>{$we().then(s)},[s]),l=E.useMemo(()=>({onFiles:u=>{const f=u.find(h=>!!h);f&&s(f)}}),[s]),[c]=Mye(l);return d.jsxs("div",{className:"relative",children:[d.jsx("div",{...n,className:"bg-neutral-50 border border-neutral-200 border-dashed p-1 cursor-pointer hover:border-neutral-400 text-neutral-400",onClick:a,...c,children:i}),o&&d.jsx("div",{className:"absolute z-10 cursor-not-allowed inset-0 bg-neutral-300 text-white flex gap-x-1 items-center justify-center",children:d.jsx(TO,{})})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH="firebasestorage.googleapis.com",MH="storageBucket",Dwe=2*60*1e3,Mwe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Dc{constructor(e,r,n=0){super(xA(e),`Firebase Storage: ${r} (${xA(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function xA(t){return"storage/"+t}function lR(){const t="An unknown error occurred, please check the error payload for server response.";return new Qt(Kt.UNKNOWN,t)}function Fwe(t){return new Qt(Kt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Lwe(t){return new Qt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bwe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qt(Kt.UNAUTHENTICATED,t)}function Uwe(){return new Qt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Vwe(t){return new Qt(Kt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Wwe(){return new Qt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zwe(){return new Qt(Kt.CANCELED,"User canceled the upload/download.")}function Gwe(t){return new Qt(Kt.INVALID_URL,"Invalid URL '"+t+"'.")}function qwe(t){return new Qt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hwe(){return new Qt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MH+"' property when initializing the app?")}function Kwe(){return new Qt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ywe(){return new Qt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Qwe(t){return new Qt(Kt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _P(t){return new Qt(Kt.INVALID_ARGUMENT,t)}function FH(){return new Qt(Kt.APP_DELETED,"The Firebase app was deleted.")}function Xwe(t){return new Qt(Kt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lp(t,e){return new Qt(Kt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function jh(t){throw new Qt(Kt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Zn.makeFromUrl(e,r)}catch{return new Zn(e,"")}if(n.path==="")return n;throw qwe(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${u}/b/${i}/o${h}`,"i"),m={bucket:1,path:3},y=r===DH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${g}`,"i"),x=[{regex:a,indices:l,postModify:o},{regex:p,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<x.length;S++){const _=x[S],w=_.regex.exec(e);if(w){const A=w[_.indices.bucket];let C=w[_.indices.path];C||(C=""),n=new Zn(A,C),_.postModify(n);break}}if(n==null)throw Gwe(e);return n}}class Jwe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zwe(t,e,r){let n=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,t(p,l())},g)}function h(){o&&clearTimeout(o)}function p(g,...b){if(c){h();return}if(g){h(),u.call(null,g,...b);return}if(l()||s){h(),u.call(null,g,...b);return}n<64&&(n*=2);let x;a===1?(a=2,x=0):x=(n+Math.random())*1e3,f(x)}let m=!1;function y(g){m||(m=!0,h(),!c&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,y(!0)},r),y}function e1e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1e(t){return t!==void 0}function r1e(t){return typeof t=="object"&&!Array.isArray(t)}function cR(t){return typeof t=="string"||t instanceof String}function FL(t){return uR()&&t instanceof Blob}function uR(){return typeof Blob<"u"&&!Ute()}function LL(t,e,r,n){if(n<e)throw _P(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw _P(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function LH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(dc||(dc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1e(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1e{constructor(e,r,n,i,o,s,a,l,c,u,f,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Mv(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===dc.NO_ERROR,l=o.getStatus();if(!a||n1e(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===dc.ABORT;n(!1,new Mv(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Mv(c,o))})},r=(n,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());t1e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=lR();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?FH():zwe();s(l)}else{const l=Wwe();s(l)}};this.canceled_?r(!1,new Mv(!1,null,!0)):this.backoffId_=Zwe(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function o1e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function s1e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a1e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function l1e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c1e(t,e,r,n,i,o,s=!0){const a=LH(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return a1e(c,e),o1e(c,r),s1e(c,o),l1e(c,n),new i1e(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function f1e(...t){const e=u1e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(uR())return new Blob(t);throw new Qt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function d1e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1e(t){if(typeof atob>"u")throw Qwe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _A{constructor(e,r){this.data=e,this.contentType=r||null}}function p1e(t,e){switch(t){case Ro.RAW:return new _A(BH(e));case Ro.BASE64:case Ro.BASE64URL:return new _A(UH(t,e));case Ro.DATA_URL:return new _A(y1e(e),g1e(e))}throw lR()}function BH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=n,s=t.charCodeAt(++r);n=65536|(o&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function m1e(t){let e;try{e=decodeURIComponent(t)}catch{throw Lp(Ro.DATA_URL,"Malformed data URL.")}return BH(e)}function UH(t,e){switch(t){case Ro.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Lp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ro.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Lp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=h1e(e)}catch(i){throw i.message.includes("polyfill")?i:Lp(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class VH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Lp(Ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=v1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function y1e(t){const e=new VH(t);return e.base64?UH(Ro.BASE64,e.rest):m1e(e.rest)}function g1e(t){return new VH(t).contentType}function v1e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,r){let n=0,i="";FL(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(FL(this.data_)){const n=this.data_,i=d1e(n,e,r);return i===null?null:new ta(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new ta(n,!0)}}static getBlob(...e){if(uR()){const r=e.map(n=>n instanceof ta?n.data_:n);return new ta(f1e.apply(null,r))}else{const r=e.map(s=>cR(s)?p1e(Ro.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let o=0;return r.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ta(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(t){let e;try{e=JSON.parse(t)}catch{return null}return r1e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function x1e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function zH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1e(t,e){return e}class vn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||_1e}}let Fv=null;function w1e(t){return!cR(t)||t.length<2?t:zH(t)}function GH(){if(Fv)return Fv;const t=[];t.push(new vn("bucket")),t.push(new vn("generation")),t.push(new vn("metageneration")),t.push(new vn("name","fullPath",!0));function e(o,s){return w1e(s)}const r=new vn("name");r.xform=e,t.push(r);function n(o,s){return s!==void 0?Number(s):s}const i=new vn("size");return i.xform=n,t.push(i),t.push(new vn("timeCreated")),t.push(new vn("updated")),t.push(new vn("md5Hash",null,!0)),t.push(new vn("cacheControl",null,!0)),t.push(new vn("contentDisposition",null,!0)),t.push(new vn("contentEncoding",null,!0)),t.push(new vn("contentLanguage",null,!0)),t.push(new vn("contentType",null,!0)),t.push(new vn("metadata","customMetadata",!0)),Fv=t,Fv}function S1e(t,e){function r(){const n=t.bucket,i=t.fullPath,o=new Zn(n,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function E1e(t,e,r){const n={};n.type="file";const i=r.length;for(let o=0;o<i;o++){const s=r[o];n[s.local]=s.xform(n,e[s.server])}return S1e(n,t),n}function qH(t,e,r){const n=WH(e);return n===null?null:E1e(t,n,r)}function A1e(t,e,r,n){const i=WH(e);if(i===null||!cR(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const u=t.bucket,f=t.fullPath,h="/b/"+s(u)+"/o/"+s(f),p=fR(h,r,n),m=LH({alt:"media",token:c});return p+m})[0]}function C1e(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const o=e[i];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class HH{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t){if(!t)throw lR()}function T1e(t,e){function r(n,i){const o=qH(t,i,e);return KH(o!==null),o}return r}function P1e(t,e){function r(n,i){const o=qH(t,i,e);return KH(o!==null),A1e(o,i,t.host,t._protocol)}return r}function YH(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=Uwe():i=Bwe():r.getStatus()===402?i=Lwe(t.bucket):r.getStatus()===403?i=Vwe(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function I1e(t){const e=YH(t);function r(n,i){let o=e(n,i);return n.getStatus()===404&&(o=Fwe(t.path)),o.serverResponse=i.serverResponse,o}return r}function N1e(t,e,r){const n=e.fullServerUrl(),i=fR(n,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new HH(i,o,P1e(t,r),s);return a.errorHandler=I1e(e),a}function k1e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function O1e(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=k1e(null,e)),n}function R1e(t,e,r,n,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let S=0;S<2;S++)x=x+Math.random().toString().slice(2);return x}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=O1e(e,n,i),u=C1e(c,r),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=ta.getBlob(f,n,h);if(p===null)throw Kwe();const m={name:c.fullPath},y=fR(o,t.host,t._protocol),g="POST",b=t.maxUploadRetryTime,v=new HH(y,g,T1e(t,r),b);return v.urlParams=m,v.headers=s,v.body=p.uploadData(),v.errorHandler=YH(e),v}class j1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw jh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $1e extends j1e{initXhr(){this.xhr_.responseType="text"}}function QH(){return new $1e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r){this._service=e,r instanceof Zn?this._location=r:this._location=Zn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ic(e,r)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zH(this._location.path)}get storage(){return this._service}get parent(){const e=b1e(this._location.path);if(e===null)return null;const r=new Zn(this._location.bucket,e);return new Ic(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Xwe(e)}}function D1e(t,e,r){t._throwIfRoot("uploadBytes");const n=R1e(t.storage,t._location,GH(),new ta(e,!0),r);return t.storage.makeRequestWithTokens(n,QH).then(i=>({metadata:i,ref:t}))}function M1e(t){t._throwIfRoot("getDownloadURL");const e=N1e(t.storage,t._location,GH());return t.storage.makeRequestWithTokens(e,QH).then(r=>{if(r===null)throw Ywe();return r})}function F1e(t,e){const r=x1e(t._location.path,e),n=new Zn(t._location.bucket,r);return new Ic(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1e(t){return/^[A-Za-z]+:\/\//.test(t)}function B1e(t,e){return new Ic(t,e)}function XH(t,e){if(t instanceof dR){const r=t;if(r._bucket==null)throw Hwe();const n=new Ic(r,r._bucket);return e!=null?XH(n,e):n}else return e!==void 0?F1e(t,e):t}function U1e(t,e){if(e&&L1e(e)){if(t instanceof dR)return B1e(t,e);throw _P("To use ref(service, url), the first argument must be a Storage instance.")}else return XH(t,e)}function BL(t,e){const r=e==null?void 0:e[MH];return r==null?null:Zn.makeFromBucketSpec(r,t)}function V1e(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:lk(i,t.app.options.projectId))}class dR{constructor(e,r,n,i,o){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=DH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Dwe,this._maxUploadRetryTime=Mwe,this._requests=new Set,i!=null?this._bucket=Zn.makeFromBucketSpec(i,this._host):this._bucket=BL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=BL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ic(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new Jwe(FH());{const s=c1e(e,this._appId,n,i,r,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const UL="@firebase/storage",VL="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH="storage";function W1e(t,e,r){return t=Xr(t),D1e(t,e,r)}function z1e(t){return t=Xr(t),M1e(t)}function G1e(t,e){return t=Xr(t),U1e(t,e)}function q1e(t=hk(),e){t=Xr(t);const n=fk(t,JH).getImmediate({identifier:e}),i=ak("storage");return i&&H1e(n,...i),n}function H1e(t,e,r,n={}){V1e(t,e,r,n)}function K1e(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new dR(r,n,i,e,dk)}function Y1e(){Bf(new wc(JH,K1e,"PUBLIC").setMultipleInstances(!0)),Lo(UL,VL,""),Lo(UL,VL,"esm2017")}Y1e();const Q1e=q1e(dO),WL=(t,e)=>{const r=e??`images/uploads/ungroup/image_${cs()}`,n=G1e(Q1e,r);return W1e(n,t).then(async i=>({url:await z1e(i.ref)}))},zL={title:"",name:"新的玩家",color:"#FF0000",proPicUrl:""};function ZH({defaultValue:t,onSubmit:e}){const{reset:r,setValue:n,control:i,handleSubmit:o}=zd({defaultValues:zL}),[{loading:s},a]=qw(e,[e]),l=E.useMemo(()=>o(m=>{a(m)}),[a,o]),c=Ka({control:i}),u=E.useCallback(m=>WL(m).then(({url:y})=>{n("proPicUrl",y)}),[n]),f=E.useCallback(()=>{n("proPicUrl",null)},[n]),h=E.useCallback(m=>WL(m).then(({url:y})=>{n("teamPicUrl",y)}),[n]),p=E.useCallback(()=>{n("teamPicUrl",null)},[n]);return E.useEffect(()=>{r(t??zL)},[t,r]),d.jsxs("form",{onSubmit:l,className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-x-6",children:[d.jsx("div",{className:"shrink-0",children:d.jsx(wn,{label:"顏色",children:d.jsx(Rn,{name:"color",control:i,render:({field:m})=>d.jsx($H,{...m}),disabled:s})})}),d.jsxs("div",{className:"flex-1 space-y-6",children:[d.jsx(wn,{label:"稱號",children:d.jsx(Rn,{name:"title",control:i,render:({field:m})=>d.jsx(va,{type:"text",...m,placeholder:"例：天鳳鳳位、雀魂x段",disabled:s})})}),d.jsx(wn,{className:"mb-6",label:"名字",children:d.jsx(Rn,{name:"name",control:i,rules:{required:!0},render:({field:m})=>d.jsx(va,{...m}),disabled:s})}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-6",children:[d.jsx(wn,{className:"mb-6",label:"玩家圖片",action:c.proPicUrl&&d.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:f,children:"移除"}),children:d.jsx(ML,{helperText:"建議大小 360px * 500px (18:25)",onChangeFile:u,children:c.proPicUrl&&d.jsx("img",{className:"aspect-[18/25]",src:c.proPicUrl})})}),d.jsx(wn,{className:"mb-6",label:"隊伍圖片",action:c.teamPicUrl&&d.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:p,children:"移除"}),children:d.jsx(ML,{helperText:"建議大小 500px * 500px (1:1)",onChangeFile:h,children:c.teamPicUrl&&d.jsx("img",{className:"aspect-square",src:c.teamPicUrl})})})]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"mb-2",children:"預覽"}),d.jsx("div",{className:"text-[4rem] p-4 bg-gray-800 text-white",children:d.jsx(Ha,{player:c,score:25e3,waitingTiles:["5m","6m","7m"],isRiichi:!0,isEast:!0})})]}),d.jsx("div",{children:d.jsx(Re,{type:"submit",loading:s,children:"儲存"})})]})}var X1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,hR=hR||{},Se=X1e||self;function w1(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ag(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function J1e(t){return Object.prototype.hasOwnProperty.call(t,wA)&&t[wA]||(t[wA]=++Z1e)}var wA="closure_uid_"+(1e9*Math.random()>>>0),Z1e=0;function eSe(t,e,r){return t.call.apply(t.bind,arguments)}function tSe(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function dn(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?dn=eSe:dn=tSe,dn.apply(null,arguments)}function Lv(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function jr(t,e){function r(){}r.prototype=e.prototype,t.$=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.ac=function(n,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(n,s)}}function ol(){this.s=this.s,this.o=this.o}var rSe=0;ol.prototype.s=!1;ol.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),rSe!=0)&&J1e(this)};ol.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const e7=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function pR(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function GL(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(w1(n)){const i=t.length||0,o=n.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=n[s]}else t.push(n)}}function hn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var nSe=function(){if(!Se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Se.addEventListener("test",()=>{},e),Se.removeEventListener("test",()=>{},e)}catch{}return t}();function Dm(t){return/^[\s\xa0]*$/.test(t)}function S1(){var t=Se.navigator;return t&&(t=t.userAgent)?t:""}function Co(t){return S1().indexOf(t)!=-1}function mR(t){return mR[" "](t),t}mR[" "]=function(){};function iSe(t,e){var r=QSe;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}var oSe=Co("Opera"),sd=Co("Trident")||Co("MSIE"),t7=Co("Edge"),wP=t7||sd,r7=Co("Gecko")&&!(S1().toLowerCase().indexOf("webkit")!=-1&&!Co("Edge"))&&!(Co("Trident")||Co("MSIE"))&&!Co("Edge"),sSe=S1().toLowerCase().indexOf("webkit")!=-1&&!Co("Edge");function n7(){var t=Se.document;return t?t.documentMode:void 0}var SP;e:{var SA="",EA=function(){var t=S1();if(r7)return/rv:([^\);]+)(\)|;)/.exec(t);if(t7)return/Edge\/([\d\.]+)/.exec(t);if(sd)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sSe)return/WebKit\/(\S+)/.exec(t);if(oSe)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(EA&&(SA=EA?EA[1]:""),sd){var AA=n7();if(AA!=null&&AA>parseFloat(SA)){SP=String(AA);break e}}SP=SA}var EP;if(Se.document&&sd){var qL=n7();EP=qL||parseInt(SP,10)||void 0}else EP=void 0;var aSe=EP;function Mm(t,e){if(hn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(r7){e:{try{mR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:lSe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Mm.$.h.call(this)}}jr(Mm,hn);var lSe={2:"touch",3:"pen",4:"mouse"};Mm.prototype.h=function(){Mm.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cg="closure_listenable_"+(1e6*Math.random()|0),cSe=0;function uSe(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.la=i,this.key=++cSe,this.fa=this.ia=!1}function E1(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function yR(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function fSe(t,e){for(const r in t)e.call(void 0,t[r],r,t)}function i7(t){const e={};for(const r in t)e[r]=t[r];return e}const HL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function o7(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let o=0;o<HL.length;o++)r=HL[o],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function A1(t){this.src=t,this.g={},this.h=0}A1.prototype.add=function(t,e,r,n,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=CP(t,e,n,i);return-1<s?(e=t[s],r||(e.ia=!1)):(e=new uSe(e,this.src,o,!!n,i),e.ia=r,t.push(e)),e};function AP(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=e7(n,e),o;(o=0<=i)&&Array.prototype.splice.call(n,i,1),o&&(E1(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function CP(t,e,r,n){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!r&&o.la==n)return i}return-1}var gR="closure_lm_"+(1e6*Math.random()|0),CA={};function s7(t,e,r,n,i){if(n&&n.once)return l7(t,e,r,n,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)s7(t,e[o],r,n,i);return null}return r=xR(r),t&&t[Cg]?t.O(e,r,Ag(n)?!!n.capture:!!n,i):a7(t,e,r,!1,n,i)}function a7(t,e,r,n,i,o){if(!e)throw Error("Invalid event type");var s=Ag(i)?!!i.capture:!!i,a=bR(t);if(a||(t[gR]=a=new A1(t)),r=a.add(e,r,n,s,o),r.proxy)return r;if(n=dSe(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)nSe||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(u7(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function dSe(){function t(r){return e.call(t.src,t.listener,r)}const e=hSe;return t}function l7(t,e,r,n,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)l7(t,e[o],r,n,i);return null}return r=xR(r),t&&t[Cg]?t.P(e,r,Ag(n)?!!n.capture:!!n,i):a7(t,e,r,!0,n,i)}function c7(t,e,r,n,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)c7(t,e[o],r,n,i);else n=Ag(n)?!!n.capture:!!n,r=xR(r),t&&t[Cg]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],r=CP(o,r,n,i),-1<r&&(E1(o[r]),Array.prototype.splice.call(o,r,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=bR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=CP(e,r,n,i)),(r=-1<t?e[t]:null)&&vR(r))}function vR(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cg])AP(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(u7(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=bR(e))?(AP(r,t),r.h==0&&(r.src=null,e[gR]=null)):E1(t)}}}function u7(t){return t in CA?CA[t]:CA[t]="on"+t}function hSe(t,e){if(t.fa)t=!0;else{e=new Mm(e,this);var r=t.listener,n=t.la||t.src;t.ia&&vR(t),t=r.call(n,e)}return t}function bR(t){return t=t[gR],t instanceof A1?t:null}var TA="__closure_events_fn_"+(1e9*Math.random()>>>0);function xR(t){return typeof t=="function"?t:(t[TA]||(t[TA]=function(e){return t.handleEvent(e)}),t[TA])}function Or(){ol.call(this),this.i=new A1(this),this.S=this,this.J=null}jr(Or,ol);Or.prototype[Cg]=!0;Or.prototype.removeEventListener=function(t,e,r,n){c7(this,t,e,r,n)};function Kr(t,e){var r,n=t.J;if(n)for(r=[];n;n=n.J)r.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new hn(e,t);else if(e instanceof hn)e.target=e.target||t;else{var i=e;e=new hn(n,t),o7(e,i)}if(i=!0,r)for(var o=r.length-1;0<=o;o--){var s=e.g=r[o];i=Bv(s,n,!0,e)&&i}if(s=e.g=t,i=Bv(s,n,!0,e)&&i,i=Bv(s,n,!1,e)&&i,r)for(o=0;o<r.length;o++)s=e.g=r[o],i=Bv(s,n,!1,e)&&i}Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)E1(r[n]);delete t.g[e],t.h--}}this.J=null};Or.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};Or.prototype.P=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Bv(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==r){var a=s.listener,l=s.la||s.src;s.ia&&AP(t.i,s),i=a.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var _R=Se.JSON.stringify;class pSe{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function mSe(){var t=wR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class ySe{constructor(){this.h=this.g=null}add(e,r){const n=f7.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var f7=new pSe(()=>new gSe,t=>t.reset());class gSe{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function vSe(t){var e=1;t=t.split(":");const r=[];for(;0<e&&t.length;)r.push(t.shift()),e--;return t.length&&r.push(t.join(":")),r}function bSe(t){Se.setTimeout(()=>{throw t},0)}let Fm,Lm=!1,wR=new ySe,d7=()=>{const t=Se.Promise.resolve(void 0);Fm=()=>{t.then(xSe)}};var xSe=()=>{for(var t;t=mSe();){try{t.h.call(t.g)}catch(r){bSe(r)}var e=f7;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Lm=!1};function C1(t,e){Or.call(this),this.h=t||1,this.g=e||Se,this.j=dn(this.qb,this),this.l=Date.now()}jr(C1,Or);ie=C1.prototype;ie.ga=!1;ie.T=null;ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Kr(this,"tick"),this.ga&&(SR(this),this.start()))}};ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function SR(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ie.N=function(){C1.$.N.call(this),SR(this),delete this.g};function ER(t,e,r){if(typeof t=="function")r&&(t=dn(t,r));else if(t&&typeof t.handleEvent=="function")t=dn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Se.setTimeout(t,e||0)}function h7(t){t.g=ER(()=>{t.g=null,t.i&&(t.i=!1,h7(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class _Se extends ol{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:h7(this)}N(){super.N(),this.g&&(Se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bm(t){ol.call(this),this.h=t,this.g={}}jr(Bm,ol);var KL=[];function p7(t,e,r,n){Array.isArray(r)||(r&&(KL[0]=r.toString()),r=KL);for(var i=0;i<r.length;i++){var o=s7(e,r[i],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function m7(t){yR(t.g,function(e,r){this.g.hasOwnProperty(r)&&vR(e)},t),t.g={}}Bm.prototype.N=function(){Bm.$.N.call(this),m7(this)};Bm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function T1(){this.g=!0}T1.prototype.Ea=function(){this.g=!1};function wSe(t,e,r,n,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");s=2<=f.length&&f[1]=="type"?s+(u+"="+c+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function SSe(t,e,r,n,i,o,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+o+" "+s})}function Lu(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+ASe(t,r)+(n?" "+n:"")})}function ESe(t,e){t.info(function(){return"TIMEOUT: "+e})}T1.prototype.info=function(){};function ASe(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return _R(r)}catch{return e}}var Uc={},YL=null;function P1(){return YL=YL||new Or}Uc.Ta="serverreachability";function y7(t){hn.call(this,Uc.Ta,t)}jr(y7,hn);function Um(t){const e=P1();Kr(e,new y7(e))}Uc.STAT_EVENT="statevent";function g7(t,e){hn.call(this,Uc.STAT_EVENT,t),this.stat=e}jr(g7,hn);function En(t){const e=P1();Kr(e,new g7(e,t))}Uc.Ua="timingevent";function v7(t,e){hn.call(this,Uc.Ua,t),this.size=e}jr(v7,hn);function Tg(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Se.setTimeout(function(){t()},e)}var I1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},b7={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function AR(){}AR.prototype.h=null;function QL(t){return t.h||(t.h=t.i())}function x7(){}var Pg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function CR(){hn.call(this,"d")}jr(CR,hn);function TR(){hn.call(this,"c")}jr(TR,hn);var TP;function N1(){}jr(N1,AR);N1.prototype.g=function(){return new XMLHttpRequest};N1.prototype.i=function(){return{}};TP=new N1;function Ig(t,e,r,n){this.l=t,this.j=e,this.m=r,this.W=n||1,this.U=new Bm(this),this.P=CSe,t=wP?125:void 0,this.V=new C1(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _7}function _7(){this.i=null,this.g="",this.h=!1}var CSe=45e3,PP={},Hx={};ie=Ig.prototype;ie.setTimeout=function(t){this.P=t};function IP(t,e,r){t.L=1,t.v=O1(Es(e)),t.s=r,t.S=!0,w7(t,null)}function w7(t,e){t.G=Date.now(),Ng(t),t.A=Es(t.v);var r=t.A,n=t.W;Array.isArray(n)||(n=[String(n)]),N7(r.i,"t",n),t.C=0,r=t.l.J,t.h=new _7,t.g=X7(t.l,r?e:null,!t.s),0<t.O&&(t.M=new _Se(dn(t.Pa,t,t.g),t.O)),p7(t.U,t.g,"readystatechange",t.nb),e=t.I?i7(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Um(),wSe(t.j,t.u,t.A,t.m,t.W,t.s)}ie.nb=function(t){t=t.target;const e=this.M;e&&jo(t)==3?e.l():this.Pa(t)};ie.Pa=function(t){try{if(t==this.g)e:{const u=jo(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||wP||this.g&&(this.h.h||this.g.ja()||e3(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?Um(3):Um(2)),k1(this);var r=this.g.da();this.ca=r;t:if(S7(this)){var n=e3(this.g);t="";var i=n.length,o=jo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ml(this),Bp(this);var s="";break t}this.h.i=new Se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=r==200,SSe(this.j,this.u,this.A,this.m,this.W,u,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dm(a)){var c=a;break t}}c=null}if(r=c)Lu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,NP(this,r);else{this.i=!1,this.o=3,En(12),Ml(this),Bp(this);break e}}this.S?(E7(this,u,s),wP&&this.i&&u==3&&(p7(this.U,this.V,"tick",this.mb),this.V.start())):(Lu(this.j,this.m,s,null),NP(this,s)),u==4&&Ml(this),this.i&&!this.J&&(u==4?H7(this.l,this):(this.i=!1,Ng(this)))}else HSe(this.g),r==400&&0<s.indexOf("Unknown SID")?(this.o=3,En(12)):(this.o=0,En(13)),Ml(this),Bp(this)}}}catch{}finally{}};function S7(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function E7(t,e,r){let n=!0,i;for(;!t.J&&t.C<r.length;)if(i=TSe(t,r),i==Hx){e==4&&(t.o=4,En(14),n=!1),Lu(t.j,t.m,null,"[Incomplete Response]");break}else if(i==PP){t.o=4,En(15),Lu(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else Lu(t.j,t.m,i,null),NP(t,i);S7(t)&&i!=Hx&&i!=PP&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,En(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),RR(e),e.M=!0,En(11))):(Lu(t.j,t.m,r,"[Invalid Chunked Response]"),Ml(t),Bp(t))}ie.mb=function(){if(this.g){var t=jo(this.g),e=this.g.ja();this.C<e.length&&(k1(this),E7(this,t,e),this.i&&t!=4&&Ng(this))}};function TSe(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Hx:(r=Number(e.substring(r,n)),isNaN(r)?PP:(n+=1,n+r>e.length?Hx:(e=e.slice(n,n+r),t.C=n+r,e)))}ie.cancel=function(){this.J=!0,Ml(this)};function Ng(t){t.Y=Date.now()+t.P,A7(t,t.P)}function A7(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Tg(dn(t.lb,t),e)}function k1(t){t.B&&(Se.clearTimeout(t.B),t.B=null)}ie.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(ESe(this.j,this.A),this.L!=2&&(Um(),En(17)),Ml(this),this.o=2,Bp(this)):A7(this,this.Y-t)};function Bp(t){t.l.H==0||t.J||H7(t.l,t)}function Ml(t){k1(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,SR(t.V),m7(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function NP(t,e){try{var r=t.l;if(r.H!=0&&(r.g==t||kP(r.i,t))){if(!t.K&&kP(r.i,t)&&r.H==3){try{var n=r.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<t.G)Qx(r),$1(r);else break e;OR(r),En(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=Tg(dn(r.ib,r),6e3));if(1>=R7(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Fl(r,11)}else if((t.K||r.g==t)&&Qx(r),!Dm(e))for(i=r.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(r.V=c[0],c=c[1],r.H==2)if(c[0]=="c"){r.K=c[1],r.pa=c[2];const u=c[3];u!=null&&(r.ra=u,r.l.info("VER="+r.ra));const f=c[4];f!=null&&(r.Ga=f,r.l.info("SVER="+r.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const p=t.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=n.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(PR(o,o.h),o.h=null))}if(n.F){const y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(n.Da=y,It(n.I,n.F,y))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-t.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var s=t;if(n.wa=Q7(n,n.J?n.pa:null,n.Y),s.K){j7(n.i,s);var a=s,l=n.L;l&&a.setTimeout(l),a.B&&(k1(a),Ng(a)),n.g=s}else G7(n);0<r.j.length&&D1(r)}else c[0]!="stop"&&c[0]!="close"||Fl(r,7);else r.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Fl(r,7):kR(r):c[0]!="noop"&&r.h&&r.h.Aa(c),r.A=0)}}Um(4)}catch{}}function PSe(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(w1(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function ISe(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(w1(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function C7(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(w1(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=ISe(t),n=PSe(t),i=n.length,o=0;o<i;o++)e.call(void 0,n[o],r&&r[o],t)}var T7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NSe(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var o=t[r].substring(0,n);i=t[r].substring(n+1)}else o=t[r];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function hc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof hc){this.h=t.h,Kx(this,t.j),this.s=t.s,this.g=t.g,Yx(this,t.m),this.l=t.l;var e=t.i,r=new Vm;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),XL(this,r),this.o=t.o}else t&&(e=String(t).match(T7))?(this.h=!1,Kx(this,e[1]||"",!0),this.s=up(e[2]||""),this.g=up(e[3]||"",!0),Yx(this,e[4]),this.l=up(e[5]||"",!0),XL(this,e[6]||"",!0),this.o=up(e[7]||"")):(this.h=!1,this.i=new Vm(null,this.h))}hc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fp(e,JL,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(fp(e,JL,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(fp(r,r.charAt(0)=="/"?RSe:OSe,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",fp(r,$Se)),t.join("")};function Es(t){return new hc(t)}function Kx(t,e,r){t.j=r?up(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yx(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function XL(t,e,r){e instanceof Vm?(t.i=e,DSe(t.i,t.h)):(r||(e=fp(e,jSe)),t.i=new Vm(e,t.h))}function It(t,e,r){t.i.set(e,r)}function O1(t){return It(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function up(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fp(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,kSe),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kSe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var JL=/[#\/\?@]/g,OSe=/[#\?:]/g,RSe=/[#\?]/g,jSe=/[#\?@]/g,$Se=/#/g;function Vm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sl(t){t.g||(t.g=new Map,t.h=0,t.i&&NSe(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}ie=Vm.prototype;ie.add=function(t,e){sl(this),this.i=null,t=Kd(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function P7(t,e){sl(t),e=Kd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function I7(t,e){return sl(t),e=Kd(t,e),t.g.has(e)}ie.forEach=function(t,e){sl(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};ie.ta=function(){sl(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let o=0;o<i.length;o++)r.push(e[n])}return r};ie.Z=function(t){sl(this);let e=[];if(typeof t=="string")I7(this,t)&&(e=e.concat(this.g.get(Kd(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};ie.set=function(t,e){return sl(this),this.i=null,t=Kd(this,t),I7(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function N7(t,e,r){P7(t,e),0<r.length&&(t.i=null,t.g.set(Kd(t,e),pR(r)),t.h+=r.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var i=o;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function Kd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function DSe(t,e){e&&!t.j&&(sl(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(P7(this,n),N7(this,i,r))},t)),t.j=e}var MSe=class{constructor(t,e){this.g=t,this.map=e}};function k7(t){this.l=t||FSe,Se.PerformanceNavigationTiming?(t=Se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Se.g&&Se.g.Ka&&Se.g.Ka()&&Se.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var FSe=10;function O7(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function R7(t){return t.h?1:t.g?t.g.size:0}function kP(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function PR(t,e){t.g?t.g.add(e):t.h=e}function j7(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}k7.prototype.cancel=function(){if(this.i=$7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $7(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.F);return e}return pR(t.i)}var LSe=class{stringify(t){return Se.JSON.stringify(t,void 0)}parse(t){return Se.JSON.parse(t,void 0)}};function BSe(){this.g=new LSe}function USe(t,e,r){const n=r||"";try{C7(t,function(i,o){let s=i;Ag(i)&&(s=_R(i)),e.push(n+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function VSe(t,e){const r=new T1;if(Se.Image){const n=new Image;n.onload=Lv(Uv,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Lv(Uv,r,n,"TestLoadImage: error",!1,e),n.onabort=Lv(Uv,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Lv(Uv,r,n,"TestLoadImage: timeout",!1,e),Se.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Uv(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function kg(t){this.l=t.ec||null,this.j=t.ob||!1}jr(kg,AR);kg.prototype.g=function(){return new R1(this.l,this.j)};kg.prototype.i=function(t){return function(){return t}}({});function R1(t,e){Or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=IR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jr(R1,Or);var IR=0;ie=R1.prototype;ie.open=function(t,e){if(this.readyState!=IR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wm(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Og(this)),this.readyState=IR};ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wm(this)),this.g&&(this.readyState=3,Wm(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;D7(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function D7(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Og(this):Wm(this),this.readyState==3&&D7(this)}};ie.Za=function(t){this.g&&(this.response=this.responseText=t,Og(this))};ie.Ya=function(t){this.g&&(this.response=t,Og(this))};ie.ka=function(){this.g&&Og(this)};function Og(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wm(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function Wm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(R1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var WSe=Se.JSON.parse;function Yt(t){Or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=M7,this.L=this.M=!1}jr(Yt,Or);var M7="",zSe=/^https?$/i,GSe=["POST","PUT"];ie=Yt.prototype;ie.Oa=function(t){this.M=t};ie.ha=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():TP.g(),this.C=this.u?QL(this.u):QL(TP),this.g.onreadystatechange=dn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){ZL(this,o);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const o of n.keys())r.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(o=>o.toLowerCase()=="content-type"),i=Se.FormData&&t instanceof Se.FormData,!(0<=e7(GSe,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of r)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{B7(this),0<this.B&&((this.L=qSe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dn(this.ua,this)):this.A=ER(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ZL(this,o)}};function qSe(t){return sd&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.ua=function(){typeof hR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))};function ZL(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,F7(t),j1(t)}function F7(t){t.F||(t.F=!0,Kr(t,"complete"),Kr(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Kr(this,"complete"),Kr(this,"abort"),j1(this))};ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),j1(this,!0)),Yt.$.N.call(this)};ie.La=function(){this.s||(this.G||this.v||this.l?L7(this):this.kb())};ie.kb=function(){L7(this)};function L7(t){if(t.h&&typeof hR<"u"&&(!t.C[1]||jo(t)!=4||t.da()!=2)){if(t.v&&jo(t)==4)ER(t.La,0,t);else if(Kr(t,"readystatechange"),jo(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=s===0){var i=String(t.I).match(T7)[1]||null;!i&&Se.self&&Se.self.location&&(i=Se.self.location.protocol.slice(0,-1)),n=!zSe.test(i?i.toLowerCase():"")}r=n}if(r)Kr(t,"complete"),Kr(t,"success");else{t.m=6;try{var o=2<jo(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",F7(t)}}finally{j1(t)}}}}function j1(t,e){if(t.g){B7(t);const r=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Kr(t,"ready");try{r.onreadystatechange=n}catch{}}}function B7(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Se.clearTimeout(t.A),t.A=null)}ie.isActive=function(){return!!this.g};function jo(t){return t.g?t.g.readyState:0}ie.da=function(){try{return 2<jo(this)?this.g.status:-1}catch{return-1}};ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),WSe(e)}};function e3(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case M7:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function HSe(t){const e={};t=(t.g&&2<=jo(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(Dm(t[n]))continue;var r=vSe(t[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const o=e[i]||[];e[i]=o,o.push(r)}fSe(e,function(n){return n.join(", ")})}ie.Ia=function(){return this.m};ie.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function U7(t){let e="";return yR(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function NR(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=U7(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):It(t,e,r))}function $h(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function V7(t){this.Ga=0,this.j=[],this.l=new T1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$h("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$h("baseRetryDelayMs",5e3,t),this.hb=$h("retryDelaySeedMs",1e4,t),this.eb=$h("forwardChannelMaxRetries",2,t),this.xa=$h("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new k7(t&&t.concurrentRequestLimit),this.Ja=new BSe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ie=V7.prototype;ie.ra=8;ie.H=1;function kR(t){if(W7(t),t.H==3){var e=t.W++,r=Es(t.I);if(It(r,"SID",t.K),It(r,"RID",e),It(r,"TYPE","terminate"),Rg(t,r),e=new Ig(t,t.l,e),e.L=2,e.v=O1(Es(r)),r=!1,Se.navigator&&Se.navigator.sendBeacon)try{r=Se.navigator.sendBeacon(e.v.toString(),"")}catch{}!r&&Se.Image&&(new Image().src=e.v,r=!0),r||(e.g=X7(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ng(e)}Y7(t)}function $1(t){t.g&&(RR(t),t.g.cancel(),t.g=null)}function W7(t){$1(t),t.u&&(Se.clearTimeout(t.u),t.u=null),Qx(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Se.clearTimeout(t.m),t.m=null)}function D1(t){if(!O7(t.i)&&!t.m){t.m=!0;var e=t.Na;Fm||d7(),Lm||(Fm(),Lm=!0),wR.add(e,t),t.C=0}}function KSe(t,e){return R7(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Tg(dn(t.Na,t,e),K7(t,t.C)),t.C++,!0)}ie.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ig(this,this.l,t);let o=this.s;if(this.U&&(o?(o=i7(o),o7(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=z7(this,i,e),r=Es(this.I),It(r,"RID",t),It(r,"CVER",22),this.F&&It(r,"X-HTTP-Session-Id",this.F),Rg(this,r),o&&(this.O?e="headers="+encodeURIComponent(String(U7(o)))+"&"+e:this.o&&NR(r,this.o,o)),PR(this.i,i),this.bb&&It(r,"TYPE","init"),this.P?(It(r,"$req",e),It(r,"SID","null"),i.aa=!0,IP(i,r,null)):IP(i,r,e),this.H=2}}else this.H==3&&(t?t3(this,t):this.j.length==0||O7(this.i)||t3(this))};function t3(t,e){var r;e?r=e.m:r=t.W++;const n=Es(t.I);It(n,"SID",t.K),It(n,"RID",r),It(n,"AID",t.V),Rg(t,n),t.o&&t.s&&NR(n,t.o,t.s),r=new Ig(t,t.l,r,t.C+1),t.o===null&&(r.I=t.s),e&&(t.j=e.F.concat(t.j)),e=z7(t,r,1e3),r.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),PR(t.i,r),IP(r,n,e)}function Rg(t,e){t.na&&yR(t.na,function(r,n){It(e,n,r)}),t.h&&C7({},function(r,n){It(e,n,r)})}function z7(t,e,r){r=Math.min(t.j.length,r);var n=t.h?dn(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+r];o==-1?0<r?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<r;l++){let c=i[l].g;const u=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{USe(u,s,"req"+c+"_")}catch{n&&n(u)}}if(a){n=s.join("&");break e}}}return t=t.j.splice(0,r),e.F=t,n}function G7(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fm||d7(),Lm||(Fm(),Lm=!0),wR.add(e,t),t.A=0}}function OR(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Tg(dn(t.Ma,t),K7(t,t.A)),t.A++,!0)}ie.Ma=function(){if(this.u=null,q7(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Tg(dn(this.jb,this),t)}};ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,En(10),$1(this),q7(this))};function RR(t){t.B!=null&&(Se.clearTimeout(t.B),t.B=null)}function q7(t){t.g=new Ig(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Es(t.wa);It(e,"RID","rpc"),It(e,"SID",t.K),It(e,"AID",t.V),It(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&It(e,"TO",t.qa),It(e,"TYPE","xmlhttp"),Rg(t,e),t.o&&t.s&&NR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var r=t.g;t=t.pa,r.L=1,r.v=O1(Es(e)),r.s=null,r.S=!0,w7(r,t)}ie.ib=function(){this.v!=null&&(this.v=null,$1(this),OR(this),En(19))};function Qx(t){t.v!=null&&(Se.clearTimeout(t.v),t.v=null)}function H7(t,e){var r=null;if(t.g==e){Qx(t),RR(t),t.g=null;var n=2}else if(kP(t.i,e))r=e.F,j7(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;n=P1(),Kr(n,new v7(n,r)),D1(t)}else G7(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(n==1&&KSe(t,e)||n==2&&OR(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:Fl(t,5);break;case 4:Fl(t,10);break;case 3:Fl(t,6);break;default:Fl(t,2)}}}function K7(t,e){let r=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(r*=2),r*e}function Fl(t,e){if(t.l.info("Error code "+e),e==2){var r=null;t.h&&(r=null);var n=dn(t.pb,t);r||(r=new hc("//www.google.com/images/cleardot.gif"),Se.location&&Se.location.protocol=="http"||Kx(r,"https"),O1(r)),VSe(r.toString(),n)}else En(2);t.H=0,t.h&&t.h.za(e),Y7(t),W7(t)}ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),En(2)):(this.l.info("Failed to ping google.com"),En(1))};function Y7(t){if(t.H=0,t.ma=[],t.h){const e=$7(t.i);(e.length!=0||t.j.length!=0)&&(GL(t.ma,e),GL(t.ma,t.j),t.i.i.length=0,pR(t.j),t.j.length=0),t.h.ya()}}function Q7(t,e,r){var n=r instanceof hc?Es(r):new hc(r);if(n.g!="")e&&(n.g=e+"."+n.g),Yx(n,n.m);else{var i=Se.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new hc(null);n&&Kx(o,n),e&&(o.g=e),i&&Yx(o,i),r&&(o.l=r),n=o}return r=t.F,e=t.Da,r&&e&&It(n,r,e),It(n,"VER",t.ra),Rg(t,n),n}function X7(t,e,r){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ha&&!t.va?new Yt(new kg({ob:!0})):new Yt(t.va),e.Oa(t.J),e}ie.isActive=function(){return!!this.h&&this.h.isActive(this)};function J7(){}ie=J7.prototype;ie.Ba=function(){};ie.Aa=function(){};ie.za=function(){};ie.ya=function(){};ie.isActive=function(){return!0};ie.Va=function(){};function Xx(){if(sd&&!(10<=Number(aSe)))throw Error("Environmental error: no available transport.")}Xx.prototype.g=function(t,e){return new ii(t,e)};function ii(t,e){Or.call(this),this.g=new V7(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Dm(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dm(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Yd(this)}jr(ii,Or);ii.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,r=this.h||void 0;En(0),t.Y=e,t.na=r||{},t.G=t.aa,t.I=Q7(t,null,t.Y),D1(t)};ii.prototype.close=function(){kR(this.g)};ii.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=_R(t),t=r);e.j.push(new MSe(e.fb++,t)),e.H==3&&D1(e)};ii.prototype.N=function(){this.g.h=null,delete this.j,kR(this.g),delete this.g,ii.$.N.call(this)};function Z7(t){CR.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}jr(Z7,CR);function eK(){TR.call(this),this.status=1}jr(eK,TR);function Yd(t){this.g=t}jr(Yd,J7);Yd.prototype.Ba=function(){Kr(this.g,"a")};Yd.prototype.Aa=function(t){Kr(this.g,new Z7(t))};Yd.prototype.za=function(t){Kr(this.g,new eK)};Yd.prototype.ya=function(){Kr(this.g,"b")};function YSe(){this.blockSize=-1}function uo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}jr(uo,YSe);uo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function PA(t,e,r){r||(r=0);var n=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)n[i]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;e=t.g[0],r=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^r&(i^o))+n[0]+3614090360&4294967295;e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[3]+3250441966&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[4]+4118548399&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[7]+4249261313&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[8]+1770035416&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[11]+2304563134&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[12]+1804603682&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[15]+1236535329&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(r^i))+n[1]+4129170786&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[0]+3921069994&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[5]+3593408605&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[4]+3889429448&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[9]+568446438&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[8]+1163531501&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[13]+2850285829&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[12]+2368359562&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(r^i^o)+n[5]+4294588738&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[14]+4259657740&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[1]+2763975236&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[10]+3200236656&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[13]+681279174&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[6]+76029189&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[9]+3654602809&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[2]+3299628645&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(i^(r|~o))+n[0]+4096336452&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[5]+4237533241&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[12]+1700485571&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[1]+2240044497&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[8]+1873313359&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[13]+1309151649&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[4]+4149444226&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}uo.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var r=e-this.blockSize,n=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=r;)PA(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(n[i++]=t.charCodeAt(o++),i==this.blockSize){PA(this,n),i=0;break}}else for(;o<e;)if(n[i++]=t[o++],i==this.blockSize){PA(this,n),i=0;break}}this.h=i,this.i+=e};uo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var r=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=r&255,r/=256;for(this.j(t),t=Array(16),e=r=0;4>e;++e)for(var n=0;32>n;n+=8)t[r++]=this.g[e]>>>n&255;return t};function ft(t,e){this.h=e;for(var r=[],n=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;n&&o==e||(r[i]=o,n=!1)}this.g=r}var QSe={};function jR(t){return-128<=t&&128>t?iSe(t,function(e){return new ft([e|0],0>e?-1:0)}):new ft([t|0],0>t?-1:0)}function $o(t){if(isNaN(t)||!isFinite(t))return uf;if(0>t)return Wr($o(-t));for(var e=[],r=1,n=0;t>=r;n++)e[n]=t/r|0,r*=OP;return new ft(e,0)}function tK(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Wr(tK(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$o(Math.pow(e,8)),n=uf,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=$o(Math.pow(e,o)),n=n.R(o).add($o(s))):(n=n.R(r),n=n.add($o(s)))}return n}var OP=4294967296,uf=jR(0),RP=jR(1),r3=jR(16777216);ie=ft.prototype;ie.ea=function(){if(Si(this))return-Wr(this).ea();for(var t=0,e=1,r=0;r<this.g.length;r++){var n=this.D(r);t+=(0<=n?n:OP+n)*e,e*=OP}return t};ie.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(fs(this))return"0";if(Si(this))return"-"+Wr(this).toString(t);for(var e=$o(Math.pow(t,6)),r=this,n="";;){var i=Zx(r,e).g;r=Jx(r,i.R(e));var o=((0<r.g.length?r.g[0]:r.h)>>>0).toString(t);if(r=i,fs(r))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function fs(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Si(t){return t.h==-1}ie.X=function(t){return t=Jx(this,t),Si(t)?-1:fs(t)?0:1};function Wr(t){for(var e=t.g.length,r=[],n=0;n<e;n++)r[n]=~t.g[n];return new ft(r,~t.h).add(RP)}ie.abs=function(){return Si(this)?Wr(this):this};ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0,i=0;i<=e;i++){var o=n+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);n=s>>>16,o&=65535,s&=65535,r[i]=s<<16|o}return new ft(r,r[r.length-1]&-2147483648?-1:0)};function Jx(t,e){return t.add(Wr(e))}ie.R=function(t){if(fs(this)||fs(t))return uf;if(Si(this))return Si(t)?Wr(this).R(Wr(t)):Wr(Wr(this).R(t));if(Si(t))return Wr(this.R(Wr(t)));if(0>this.X(r3)&&0>t.X(r3))return $o(this.ea()*t.ea());for(var e=this.g.length+t.g.length,r=[],n=0;n<2*e;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<t.g.length;i++){var o=this.D(n)>>>16,s=this.D(n)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;r[2*n+2*i]+=s*l,Vv(r,2*n+2*i),r[2*n+2*i+1]+=o*l,Vv(r,2*n+2*i+1),r[2*n+2*i+1]+=s*a,Vv(r,2*n+2*i+1),r[2*n+2*i+2]+=o*a,Vv(r,2*n+2*i+2)}for(n=0;n<e;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=e;n<2*e;n++)r[n]=0;return new ft(r,0)};function Vv(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Dh(t,e){this.g=t,this.h=e}function Zx(t,e){if(fs(e))throw Error("division by zero");if(fs(t))return new Dh(uf,uf);if(Si(t))return e=Zx(Wr(t),e),new Dh(Wr(e.g),Wr(e.h));if(Si(e))return e=Zx(t,Wr(e)),new Dh(Wr(e.g),e.h);if(30<t.g.length){if(Si(t)||Si(e))throw Error("slowDivide_ only works with positive integers.");for(var r=RP,n=e;0>=n.X(t);)r=n3(r),n=n3(n);var i=iu(r,1),o=iu(n,1);for(n=iu(n,2),r=iu(r,2);!fs(n);){var s=o.add(n);0>=s.X(t)&&(i=i.add(r),o=s),n=iu(n,1),r=iu(r,1)}return e=Jx(t,i.R(e)),new Dh(i,e)}for(i=uf;0<=t.X(e);){for(r=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=$o(r),s=o.R(e);Si(s)||0<s.X(t);)r-=n,o=$o(r),s=o.R(e);fs(o)&&(o=RP),i=i.add(o),t=Jx(t,s)}return new Dh(i,t)}ie.gb=function(t){return Zx(this,t).h};ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)&t.D(n);return new ft(r,this.h&t.h)};ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)|t.D(n);return new ft(r,this.h|t.h)};ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)^t.D(n);return new ft(r,this.h^t.h)};function n3(t){for(var e=t.g.length+1,r=[],n=0;n<e;n++)r[n]=t.D(n)<<1|t.D(n-1)>>>31;return new ft(r,t.h)}function iu(t,e){var r=e>>5;e%=32;for(var n=t.g.length-r,i=[],o=0;o<n;o++)i[o]=0<e?t.D(o+r)>>>e|t.D(o+r+1)<<32-e:t.D(o+r);return new ft(i,t.h)}Xx.prototype.createWebChannel=Xx.prototype.g;ii.prototype.send=ii.prototype.u;ii.prototype.open=ii.prototype.m;ii.prototype.close=ii.prototype.close;I1.NO_ERROR=0;I1.TIMEOUT=8;I1.HTTP_ERROR=6;b7.COMPLETE="complete";x7.EventType=Pg;Pg.OPEN="a";Pg.CLOSE="b";Pg.ERROR="c";Pg.MESSAGE="d";Or.prototype.listen=Or.prototype.O;Yt.prototype.listenOnce=Yt.prototype.P;Yt.prototype.getLastError=Yt.prototype.Sa;Yt.prototype.getLastErrorCode=Yt.prototype.Ia;Yt.prototype.getStatus=Yt.prototype.da;Yt.prototype.getResponseJson=Yt.prototype.Wa;Yt.prototype.getResponseText=Yt.prototype.ja;Yt.prototype.send=Yt.prototype.ha;Yt.prototype.setWithCredentials=Yt.prototype.Oa;uo.prototype.digest=uo.prototype.l;uo.prototype.reset=uo.prototype.reset;uo.prototype.update=uo.prototype.j;ft.prototype.add=ft.prototype.add;ft.prototype.multiply=ft.prototype.R;ft.prototype.modulo=ft.prototype.gb;ft.prototype.compare=ft.prototype.X;ft.prototype.toNumber=ft.prototype.ea;ft.prototype.toString=ft.prototype.toString;ft.prototype.getBits=ft.prototype.D;ft.fromNumber=$o;ft.fromString=tK;var XSe=function(){return new Xx},JSe=function(){return P1()},IA=I1,ZSe=b7,eEe=Uc,i3={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tEe=kg,Wv=x7,rEe=Yt,nEe=uo,ff=ft;const o3="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new ck("@firebase/firestore");function Mh(){return Nc.logLevel}function ue(t,...e){if(Nc.logLevel<=Qe.DEBUG){const r=e.map($R);Nc.debug(`Firestore (${Qd}): ${t}`,...r)}}function As(t,...e){if(Nc.logLevel<=Qe.ERROR){const r=e.map($R);Nc.error(`Firestore (${Qd}): ${t}`,...r)}}function ad(t,...e){if(Nc.logLevel<=Qe.WARN){const r=e.map($R);Nc.warn(`Firestore (${Qd}): ${t}`,...r)}}function $R(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Qd}) INTERNAL ASSERTION FAILED: `+t;throw As(e),new Error(e)}function kt(t,e){t||we()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Dc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ln.UNAUTHENTICATED))}shutdown(){}}class oEe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sEe{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let o=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Da,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Da)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string"),new rK(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string"),new ln(e)}}class aEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new aEe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cEe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uEe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(kt(typeof r.token=="string"),this.R=r.token,new cEe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nK{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=fEe(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function it(t,e){return t<e?-1:t>e?1:0}function ld(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ge(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ge(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ge(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new hr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new hr(0,0))}static max(){return new Ae(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,r,n){r===void 0?r=0:r>e.length&&we(),n===void 0?n=e.length-r:n>e.length-r&&we(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return zm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof zm?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),s=r.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Rt extends zm{construct(e,r,n){return new Rt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ge(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Rt(r)}static emptyPath(){return new Rt([])}}const dEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends zm{construct(e,r,n){return new zr(e,r,n)}static isValidIdentifier(e){return dEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new ge(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new ge(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(r)}static emptyPath(){return new zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Rt.fromString(e))}static fromName(e){return new ve(Rt.fromString(e).popFirst(5))}static empty(){return new ve(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Rt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Rt(e.slice()))}}function hEe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(n===1e9?new hr(r+1,0):new hr(r,n));return new Qa(i,ve.empty(),e)}function pEe(t){return new Qa(t.readTime,t.key,-1)}class Qa{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Qa(Ae.min(),ve.empty(),-1)}static max(){return new Qa(Ae.max(),ve.empty(),-1)}}function mEe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ve.comparator(t.documentKey,e.documentKey),r!==0?r:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yEe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==yEe)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new H((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof H?r:H.resolve(r)}catch(r){return H.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):H.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):H.reject(r)}static resolve(e){return new H((r,n)=>{r(e)})}static reject(e){return new H((r,n)=>{n(e)})}static waitFor(e){return new H((r,n)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&r()},l=>n(l))}),s=!0,o===i&&r()})}static or(e){let r=H.resolve(!1);for(const n of e)r=r.next(i=>i?H.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new H((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;r(e[c]).next(u=>{s[c]=u,++a,a===o&&n(s)},u=>i(u))}})}static doWhile(e,r){return new H((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function $g(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.se(n),this.oe=n=>r.writeSequenceNumber(n))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}DR._e=-1;function M1(t){return t==null}function e_(t){return t===0&&1/t==-1/0}function vEe(t){return typeof t=="number"&&Number.isInteger(t)&&!e_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Xd(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function iK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,r){this.comparator=e,this.root=r||Br.EMPTY}insert(e,r){return new Ut(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zv(this.root,e,this.comparator,!1)}getReverseIterator(){return new zv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zv(this.root,e,this.comparator,!0)}}class zv{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Br.RED,this.left=i??Br.EMPTY,this.right=o??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new Br(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Br.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1;Br.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,r,n,i,o){return this}insert(e,r,n){return new Br(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new a3(this.data.getIterator())}getIteratorFrom(e){return new a3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yr(this.comparator);return r.data=e,r}}class a3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new ro([])}unionWith(e){let r=new Yr(zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ro(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ld(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new oK("Invalid base64 string: "+o):o}}(e);return new yn(r)}static fromUint8Array(e){const r=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new yn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const bEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xa(t){if(kt(!!t),typeof t=="string"){let e=0;const r=bEe.exec(t);if(kt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:tr(t.seconds),nanos:tr(t.nanos)}}function tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kc(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function FR(t){const e=t.mapValue.fields.__previous_value__;return MR(e)?FR(e):e}function Gm(t){const e=Xa(t.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xEe{constructor(e,r,n,i,o,s,a,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class qm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?MR(t)?4:_Ee(t)?9007199254740991:10:we()}function qo(t,e){if(t===e)return!0;const r=Oc(t);if(r!==Oc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gm(t).isEqual(Gm(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Xa(i.timestampValue),a=Xa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return kc(i.bytesValue).isEqual(kc(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return tr(i.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tr(i.integerValue)===tr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=tr(i.doubleValue),a=tr(o.doubleValue);return s===a?e_(s)===e_(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ld(t.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(s3(s)!==s3(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!qo(s[l],a[l])))return!1;return!0}(t,e);default:return we()}}function Hm(t,e){return(t.values||[]).find(r=>qo(r,e))!==void 0}function cd(t,e){if(t===e)return 0;const r=Oc(t),n=Oc(e);if(r!==n)return it(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=tr(o.integerValue||o.doubleValue),l=tr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return l3(t.timestampValue,e.timestampValue);case 4:return l3(Gm(t),Gm(e));case 5:return it(t.stringValue,e.stringValue);case 6:return function(o,s){const a=kc(o),l=kc(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=it(a[c],l[c]);if(u!==0)return u}return it(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=it(tr(o.latitude),tr(s.latitude));return a!==0?a:it(tr(o.longitude),tr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=cd(a[c],l[c]);if(u)return u}return it(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Gv.mapValue&&s===Gv.mapValue)return 0;if(o===Gv.mapValue)return 1;if(s===Gv.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=it(l[f],u[f]);if(h!==0)return h;const p=cd(a[l[f]],c[u[f]]);if(p!==0)return p}return it(l.length,u.length)}(t.mapValue,e.mapValue);default:throw we()}}function l3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const r=Xa(t),n=Xa(e),i=it(r.seconds,n.seconds);return i!==0?i:it(r.nanos,n.nanos)}function ud(t){return jP(t)}function jP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Xa(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return kc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ve.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=jP(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${jP(r.fields[s])}`;return i+"}"}(t.mapValue):we()}function $P(t){return!!t&&"integerValue"in t}function LR(t){return!!t&&"arrayValue"in t}function c3(t){return!!t&&"nullValue"in t}function u3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Y0(t){return!!t&&"mapValue"in t}function Up(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xd(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Up(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Up(t.arrayValue.values[r]);return e}return Object.assign({},t)}function _Ee(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Y0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Up(r)}setAll(e){let r=zr.emptyPath(),n={},i=[];e.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=a.popLast()}s?n[a.lastSegment()]=Up(s):i.push(a.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());Y0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Y0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Xd(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Ei(Up(this.value))}}function sK(t){const e=[];return Xd(t.fields,(r,n)=>{const i=new zr([r]);if(Y0(n)){const o=sK(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ro(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,r,n,i,o,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Ae.min(),Ae.min(),Ae.min(),Ei.empty(),0)}static newFoundDocument(e,r,n,i){return new un(e,1,r,Ae.min(),n,i,0)}static newNoDocument(e,r){return new un(e,2,r,Ae.min(),Ae.min(),Ei.empty(),0)}static newUnknownDocument(e,r){return new un(e,3,r,Ae.min(),Ae.min(),Ei.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,r){this.position=e,this.inclusive=r}}function f3(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?n=ve.comparator(ve.fromName(s.referenceValue),r.key):n=cd(s,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function d3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!qo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,r="asc"){this.field=e,this.dir=r}}function wEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{}class ur extends aK{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new EEe(e,r,n):r==="array-contains"?new TEe(e,n):r==="in"?new PEe(e,n):r==="not-in"?new IEe(e,n):r==="array-contains-any"?new NEe(e,n):new ur(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new AEe(e,n):new CEe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(cd(r,this.value)):r!==null&&Oc(this.value)===Oc(r)&&this.matchesComparison(cd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ho extends aK{constructor(e,r){super(),this.filters=e,this.op=r,this.ue=null}static create(e,r){return new Ho(e,r)}matches(e){return lK(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function lK(t){return t.op==="and"}function cK(t){return SEe(t)&&lK(t)}function SEe(t){for(const e of t.filters)if(e instanceof Ho)return!1;return!0}function DP(t){if(t instanceof ur)return t.field.canonicalString()+t.op.toString()+ud(t.value);if(cK(t))return t.filters.map(e=>DP(e)).join(",");{const e=t.filters.map(r=>DP(r)).join(",");return`${t.op}(${e})`}}function uK(t,e){return t instanceof ur?function(n,i){return i instanceof ur&&n.op===i.op&&n.field.isEqual(i.field)&&qo(n.value,i.value)}(t,e):t instanceof Ho?function(n,i){return i instanceof Ho&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&uK(s,i.filters[a]),!0):!1}(t,e):void we()}function fK(t){return t instanceof ur?function(r){return`${r.field.canonicalString()} ${r.op} ${ud(r.value)}`}(t):t instanceof Ho?function(r){return r.op.toString()+" {"+r.getFilters().map(fK).join(" ,")+"}"}(t):"Filter"}class EEe extends ur{constructor(e,r,n){super(e,r,n),this.key=ve.fromName(n.referenceValue)}matches(e){const r=ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class AEe extends ur{constructor(e,r){super(e,"in",r),this.keys=dK("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class CEe extends ur{constructor(e,r){super(e,"not-in",r),this.keys=dK("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function dK(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ve.fromName(n.referenceValue))}class TEe extends ur{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return LR(r)&&Hm(r.arrayValue,this.value)}}class PEe extends ur{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Hm(this.value.arrayValue,r)}}class IEe extends ur{constructor(e,r){super(e,"not-in",r)}matches(e){if(Hm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Hm(this.value.arrayValue,r)}}class NEe extends ur{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!LR(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Hm(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kEe{constructor(e,r=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function h3(t,e=null,r=[],n=[],i=null,o=null,s=null){return new kEe(t,e,r,n,i,o,s)}function BR(t){const e=Ce(t);if(e.ce===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>DP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),M1(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ud(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ud(n)).join(",")),e.ce=r}return e.ce}function UR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!wEe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!uK(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d3(t.startAt,e.startAt)&&d3(t.endAt,e.endAt)}function MP(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,r=null,n=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function OEe(t,e,r,n,i,o,s,a){return new F1(t,e,r,n,i,o,s,a)}function hK(t){return new F1(t)}function p3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function REe(t){return t.collectionGroup!==null}function Vp(t){const e=Ce(t);if(e.le===null){e.le=[];const r=new Set;for(const o of e.explicitOrderBy)e.le.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Yr(zr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.le.push(new r_(o,n))}),r.has(zr.keyField().canonicalString())||e.le.push(new r_(zr.keyField(),n))}return e.le}function Uo(t){const e=Ce(t);return e.he||(e.he=jEe(e,Vp(t))),e.he}function jEe(t,e){if(t.limitType==="F")return h3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new r_(i.field,o)});const r=t.endAt?new t_(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new t_(t.startAt.position,t.startAt.inclusive):null;return h3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function FP(t,e,r){return new F1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function L1(t,e){return UR(Uo(t),Uo(e))&&t.limitType===e.limitType}function pK(t){return`${BR(Uo(t))}|lt:${t.limitType}`}function vu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>fK(i)).join(", ")}]`),M1(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>ud(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>ud(i)).join(",")),`Target(${n})`}(Uo(t))}; limitType=${t.limitType})`}function B1(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ve.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of Vp(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,a,l){const c=f3(s,a,l);return s.inclusive?c<=0:c<0}(n.startAt,Vp(n),i)||n.endAt&&!function(s,a,l){const c=f3(s,a,l);return s.inclusive?c>=0:c>0}(n.endAt,Vp(n),i))}(t,e)}function $Ee(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mK(t){return(e,r)=>{let n=!1;for(const i of Vp(t)){const o=DEe(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function DEe(t,e,r){const n=t.field.isKeyField()?ve.comparator(e.key,r.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?cd(l,c):we()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xd(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return iK(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MEe=new Ut(ve.comparator);function Cs(){return MEe}const yK=new Ut(ve.comparator);function dp(...t){let e=yK;for(const r of t)e=e.insert(r.key,r);return e}function gK(t){let e=yK;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ll(){return Wp()}function vK(){return Wp()}function Wp(){return new Jd(t=>t.toString(),(t,e)=>t.isEqual(e))}const FEe=new Ut(ve.comparator),LEe=new Yr(ve.comparator);function We(...t){let e=LEe;for(const r of t)e=e.add(r);return e}const BEe=new Yr(it);function UEe(){return BEe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e_(e)?"-0":e}}function xK(t){return{integerValue:""+t}}function VEe(t,e){return vEe(e)?xK(e):bK(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this._=void 0}}function WEe(t,e,r){return t instanceof n_?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&MR(o)&&(o=FR(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(r,e):t instanceof Km?wK(t,e):t instanceof Ym?SK(t,e):function(i,o){const s=_K(i,o),a=m3(s)+m3(i.Ie);return $P(s)&&$P(i.Ie)?xK(a):bK(i.serializer,a)}(t,e)}function zEe(t,e,r){return t instanceof Km?wK(t,e):t instanceof Ym?SK(t,e):r}function _K(t,e){return t instanceof i_?function(n){return $P(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class n_ extends U1{}class Km extends U1{constructor(e){super(),this.elements=e}}function wK(t,e){const r=EK(e);for(const n of t.elements)r.some(i=>qo(i,n))||r.push(n);return{arrayValue:{values:r}}}class Ym extends U1{constructor(e){super(),this.elements=e}}function SK(t,e){let r=EK(e);for(const n of t.elements)r=r.filter(i=>!qo(i,n));return{arrayValue:{values:r}}}class i_ extends U1{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function m3(t){return tr(t.integerValue||t.doubleValue)}function EK(t){return LR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function GEe(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Km&&i instanceof Km||n instanceof Ym&&i instanceof Ym?ld(n.elements,i.elements,qo):n instanceof i_&&i instanceof i_?qo(n.Ie,i.Ie):n instanceof n_&&i instanceof n_}(t.transform,e.transform)}class qEe{constructor(e,r){this.version=e,this.transformResults=r}}class Vo{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Vo}static exists(e){return new Vo(void 0,e)}static updateTime(e){return new Vo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Q0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class V1{}function AK(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VR(t.key,Vo.none()):new Dg(t.key,t.data,Vo.none());{const r=t.data,n=Ei.empty();let i=new Yr(zr.comparator);for(let o of e.fields)if(!i.has(o)){let s=r.field(o);s===null&&o.length>1&&(o=o.popLast(),s=r.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Vc(t.key,n,new ro(i.toArray()),Vo.none())}}function HEe(t,e,r){t instanceof Dg?function(i,o,s){const a=i.value.clone(),l=g3(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Vc?function(i,o,s){if(!Q0(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=g3(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(CK(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function zp(t,e,r,n){return t instanceof Dg?function(o,s,a,l){if(!Q0(o.precondition,s))return a;const c=o.value.clone(),u=v3(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Vc?function(o,s,a,l){if(!Q0(o.precondition,s))return a;const c=v3(o.fieldTransforms,l,s),u=s.data;return u.setAll(CK(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(o,s,a){return Q0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function KEe(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=_K(n.transform,i||null);o!=null&&(r===null&&(r=Ei.empty()),r.set(n.field,o))}return r||null}function y3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ld(n,i,(o,s)=>GEe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dg extends V1{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vc extends V1{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function CK(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function g3(t,e,r){const n=new Map;kt(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,zEe(s,a,r[i]))}return n}function v3(t,e,r){const n=new Map;for(const i of t){const o=i.transform,s=r.data.field(i.field);n.set(i.field,WEe(o,s,e))}return n}class VR extends V1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YEe extends V1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QEe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&HEe(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=zp(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=zp(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=vK();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=r.has(i.key)?null:a;const l=AK(s,a);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ae.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),We())}isEqual(e){return this.batchId===e.batchId&&ld(this.mutations,e.mutations,(r,n)=>y3(r,n))&&ld(this.baseMutations,e.baseMutations,(r,n)=>y3(r,n))}}class WR{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){kt(e.mutations.length===n.length);let i=function(){return FEe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new WR(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XEe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JEe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er,He;function ZEe(t){switch(t){default:return we();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function TK(t){if(t===void 0)return As("GRPC error has no .code"),K.UNKNOWN;switch(t){case er.OK:return K.OK;case er.CANCELLED:return K.CANCELLED;case er.UNKNOWN:return K.UNKNOWN;case er.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case er.INTERNAL:return K.INTERNAL;case er.UNAVAILABLE:return K.UNAVAILABLE;case er.UNAUTHENTICATED:return K.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case er.NOT_FOUND:return K.NOT_FOUND;case er.ALREADY_EXISTS:return K.ALREADY_EXISTS;case er.PERMISSION_DENIED:return K.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case er.ABORTED:return K.ABORTED;case er.OUT_OF_RANGE:return K.OUT_OF_RANGE;case er.UNIMPLEMENTED:return K.UNIMPLEMENTED;case er.DATA_LOSS:return K.DATA_LOSS;default:return we()}}(He=er||(er={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eAe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tAe=new ff([4294967295,4294967295],0);function b3(t){const e=eAe().encode(t),r=new nEe;return r.update(e),new Uint8Array(r.digest())}function x3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ff([r,n],0),new ff([i,o],0)]}class zR{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new hp(`Invalid padding: ${r}`);if(n<0)throw new hp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new hp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new hp(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ee=ff.fromNumber(this.Te)}de(e,r,n){let i=e.add(r.multiply(ff.fromNumber(n)));return i.compare(tAe)===1&&(i=new ff([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const r=b3(e),[n,i]=x3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);if(!this.Ae(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new zR(o,i,r);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const r=b3(e),[n,i]=x3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);this.Re(s)}}Re(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class hp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Mg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new W1(Ae.min(),i,new Ut(it),Cs(),We())}}class Mg{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Mg(n,r,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,r,n,i){this.Ve=e,this.removedTargetIds=r,this.key=n,this.me=i}}class PK{constructor(e,r){this.targetId=e,this.fe=r}}class IK{constructor(e,r,n=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class _3{constructor(){this.ge=0,this.pe=S3(),this.ye=yn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=We(),r=We(),n=We();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:we()}}),new Mg(this.ye,this.we,e,r,n)}Fe(){this.Se=!1,this.pe=S3()}Me(e,r){this.Se=!0,this.pe=this.pe.insert(e,r)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class rAe{constructor(e){this.Le=e,this.ke=new Map,this.qe=Cs(),this.Qe=w3(),this.Ke=new Ut(it)}$e(e){for(const r of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me);for(const r of e.removedTargetIds)this.We(r,e.key,e.me)}Ge(e){this.forEachTarget(e,r=>{const n=this.ze(r);switch(e.state){case 0:this.je(r)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(r);break;case 3:this.je(r)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),n.Ce(e.resumeToken));break;default:we()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ke.forEach((n,i)=>{this.je(i)&&r(i)})}Je(e){const r=e.targetId,n=e.fe.count,i=this.Ye(r);if(i){const o=i.target;if(MP(o))if(n===0){const s=new ve(o.path);this.We(r,s,un.newNoDocument(s,Ae.min()))}else kt(n===1);else{const s=this.Ze(r);if(s!==n){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,c)}}}}}Xe(e){const r=e.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let s,a;try{s=kc(n).toUint8Array()}catch(l){if(l instanceof oK)return ad("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zR(s,i,o)}catch(l){return ad(l instanceof hp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,r,n){return r.fe.count===n-this.rt(e,r.targetId)?0:2}rt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(r,o,null),i++)}),i}it(e){const r=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&MP(a.target)){const l=new ve(a.target.path);this.qe.get(l)!==null||this.st(s,l)||this.We(s,l,un.newNoDocument(l,e))}o.De&&(r.set(s,o.ve()),o.Fe())}});let n=We();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new W1(e,r,this.Ke,this.qe,n);return this.qe=Cs(),this.Qe=w3(),this.Ke=new Ut(it),i}Ue(e,r){if(!this.je(e))return;const n=this.st(e,r.key)?2:0;this.ze(e).Me(r.key,n),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(e))}We(e,r,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,r)?i.Me(r,1):i.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(e)),n&&(this.qe=this.qe.insert(r,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let r=this.ke.get(e);return r||(r=new _3,this.ke.set(e,r)),r}ot(e){let r=this.Qe.get(e);return r||(r=new Yr(it),this.Qe=this.Qe.insert(e,r)),r}je(e){const r=this.Ye(e)!==null;return r||ue("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){const r=this.ke.get(e);return r&&r.be?null:this.Le._t(e)}He(e){this.ke.set(e,new _3),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}st(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function w3(){return new Ut(ve.comparator)}function S3(){return new Ut(ve.comparator)}const nAe=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),iAe=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),oAe=(()=>({and:"AND",or:"OR"}))();class sAe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function LP(t,e){return t.useProto3Json||M1(e)?e:{value:e}}function o_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aAe(t,e){return o_(t,e.toTimestamp())}function Wo(t){return kt(!!t),Ae.fromTimestamp(function(r){const n=Xa(r);return new hr(n.seconds,n.nanos)}(t))}function GR(t,e){return function(n){return new Rt(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function kK(t){const e=Rt.fromString(t);return kt($K(e)),e}function BP(t,e){return GR(t.databaseId,e.path)}function NA(t,e){const r=kK(e);if(r.get(1)!==t.databaseId.projectId)throw new ge(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ge(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ve(OK(r))}function UP(t,e){return GR(t.databaseId,e)}function lAe(t){const e=kK(t);return e.length===4?Rt.emptyPath():OK(e)}function VP(t){return new Rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OK(t){return kt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function E3(t,e,r){return{name:BP(t,e),fields:r.value.mapValue.fields}}function cAe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(kt(u===void 0||typeof u=="string"),yn.fromBase64String(u||"")):(kt(u===void 0||u instanceof Uint8Array),yn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=c.code===void 0?K.UNKNOWN:TK(c.code);return new ge(u,c.message||"")}(s);r=new IK(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=NA(t,n.document.name),o=Wo(n.document.updateTime),s=n.document.createTime?Wo(n.document.createTime):Ae.min(),a=new Ei({mapValue:{fields:n.document.fields}}),l=un.newFoundDocument(i,o,s,a),c=n.targetIds||[],u=n.removedTargetIds||[];r=new X0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=NA(t,n.document),o=n.readTime?Wo(n.readTime):Ae.min(),s=un.newNoDocument(i,o),a=n.removedTargetIds||[];r=new X0([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=NA(t,n.document),o=n.removedTargetIds||[];r=new X0([],o,i,null)}else{if(!("filter"in e))return we();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new JEe(i,o),a=n.targetId;r=new PK(a,s)}}return r}function uAe(t,e){let r;if(e instanceof Dg)r={update:E3(t,e.key,e.value)};else if(e instanceof VR)r={delete:BP(t,e.key)};else if(e instanceof Vc)r={update:E3(t,e.key,e.data),updateMask:bAe(e.fieldMask)};else{if(!(e instanceof YEe))return we();r={verify:BP(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,s){const a=s.transform;if(a instanceof n_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Km)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ym)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof i_)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw we()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aAe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we()}(t,e.precondition)),r}function fAe(t,e){return t&&t.length>0?(kt(e!==void 0),t.map(r=>function(i,o){let s=i.updateTime?Wo(i.updateTime):Wo(o);return s.isEqual(Ae.min())&&(s=Wo(o)),new qEe(s,i.transformResults||[])}(r,e))):[]}function dAe(t,e){return{documents:[UP(t,e.path)]}}function hAe(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=UP(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=UP(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(l){if(l.length!==0)return jK(Ho.create(l,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:bu(f.field),direction:yAe(f.dir)}}(c))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const s=LP(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),r}function pAe(t){let e=lAe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){kt(n===1);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];r.where&&(o=function(f){const h=RK(f);return h instanceof Ho&&cK(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(f){return f.map(h=>function(m){return new r_(xu(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let a=null;r.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,M1(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new t_(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const h=!f.before,p=f.values||[];return new t_(p,h)}(r.endAt)),OEe(e,i,s,o,a,"F",l,c)}function mAe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function RK(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=xu(r.unaryFilter.field);return ur.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=xu(r.unaryFilter.field);return ur.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xu(r.unaryFilter.field);return ur.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xu(r.unaryFilter.field);return ur.create(s,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(r){return ur.create(xu(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ho.create(r.compositeFilter.filters.map(n=>RK(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(r.compositeFilter.op))}(t):we()}function yAe(t){return nAe[t]}function gAe(t){return iAe[t]}function vAe(t){return oAe[t]}function bu(t){return{fieldPath:t.canonicalString()}}function xu(t){return zr.fromServerFormat(t.fieldPath)}function jK(t){return t instanceof ur?function(r){if(r.op==="=="){if(u3(r.value))return{unaryFilter:{field:bu(r.field),op:"IS_NAN"}};if(c3(r.value))return{unaryFilter:{field:bu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(u3(r.value))return{unaryFilter:{field:bu(r.field),op:"IS_NOT_NAN"}};if(c3(r.value))return{unaryFilter:{field:bu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bu(r.field),op:gAe(r.op),value:r.value}}}(t):t instanceof Ho?function(r){const n=r.getFilters().map(i=>jK(i));return n.length===1?n[0]:{compositeFilter:{op:vAe(r.op),filters:n}}}(t):we()}function bAe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function $K(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,r,n,i,o=Ae.min(),s=Ae.min(),a=yn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xAe{constructor(e){this.ut=e}}function _Ae(t){const e=pAe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?FP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wAe{constructor(){this.on=new SAe}addToCollectionParentIndex(e,r){return this.on.add(r),H.resolve()}getCollectionParents(e,r){return H.resolve(this.on.getEntries(r))}addFieldIndex(e,r){return H.resolve()}deleteFieldIndex(e,r){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,r){return H.resolve()}getDocumentsMatchingTarget(e,r){return H.resolve(null)}getIndexType(e,r){return H.resolve(0)}getFieldIndexes(e,r){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,r){return H.resolve(Qa.min())}getMinOffsetFromCollectionGroup(e,r){return H.resolve(Qa.min())}updateCollectionGroup(e,r,n){return H.resolve()}updateIndexEntries(e,r){return H.resolve()}}class SAe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Yr(Rt.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yr(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new fd(0)}static Nn(){return new fd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EAe{constructor(){this.changes=new Jd(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?H.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AAe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CAe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&zp(n.mutation,i,ro.empty(),hr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,We()).next(()=>n))}getLocalViewOfDocuments(e,r,n=We()){const i=Ll();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let s=dp();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Ll();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,We()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{r.set(s,a)})})}computeViews(e,r,n,i){let o=Cs();const s=Wp(),a=function(){return Wp()}();return r.forEach((l,c)=>{const u=n.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Vc)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),zp(u.mutation,c,u.mutation.getFieldMask(),hr.now())):s.set(c.key,ro.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),r.forEach((c,u)=>{var f;return a.set(c,new AAe(u,(f=s.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,r){const n=Wp();let i=new Ut((s,a)=>s-a),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||ro.empty();u=a.applyToLocalView(c,u),n.set(l,u);const f=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=vK();u.forEach(h=>{if(!o.has(h)){const p=AK(r.get(h),n.get(h));p!==null&&f.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,f))}return H.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):REe(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):H.resolve(Ll());let a=-1,l=o;return s.next(c=>H.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,We())).next(u=>({batchId:a,changes:gK(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ve(r)).next(n=>{let i=dp();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let s=dp();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,l=>{const c=function(f,h){return new F1(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(u=>{u.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,un.newInvalidDocument(u)))});let a=dp();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&zp(u.mutation,c,ro.empty(),hr.now()),B1(r,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TAe{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,r){return H.resolve(this.ur.get(r))}saveBundleMetadata(e,r){return this.ur.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Wo(i.createTime)}}(r)),H.resolve()}getNamedQuery(e,r){return H.resolve(this.cr.get(r))}saveNamedQuery(e,r){return this.cr.set(r.name,function(i){return{name:i.name,query:_Ae(i.bundledQuery),readTime:Wo(i.readTime)}}(r)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PAe{constructor(){this.overlays=new Ut(ve.comparator),this.lr=new Map}getOverlay(e,r){return H.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ll();return H.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.lt(e,r,o)}),H.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.lr.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(n)),H.resolve()}getOverlaysForCollection(e,r,n){const i=Ll(),o=r.length+1,s=new ve(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>n&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Ut((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=o.get(c.largestBatchId);u===null&&(u=Ll(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ll(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return H.resolve(a)}lt(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new XEe(r,n));let o=this.lr.get(r);o===void 0&&(o=We(),this.lr.set(r,o)),this.lr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.hr=new Yr(Cr.Pr),this.Ir=new Yr(Cr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,r){const n=new Cr(e,r);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.dr(new Cr(e,r))}Ar(e,r){e.forEach(n=>this.removeReference(n,r))}Rr(e){const r=new ve(new Rt([])),n=new Cr(r,e),i=new Cr(r,e+1),o=[];return this.Ir.forEachInRange([n,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const r=new ve(new Rt([])),n=new Cr(r,e),i=new Cr(r,e+1);let o=We();return this.Ir.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(e){const r=new Cr(e,0),n=this.hr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Cr{constructor(e,r){this.key=e,this.gr=r}static Pr(e,r){return ve.comparator(e.key,r.key)||it(e.gr,r.gr)}static Tr(e,r){return it(e.gr,r.gr)||ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.pr=1,this.yr=new Yr(Cr.Pr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new QEe(o,r,n,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new Cr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,r){return H.resolve(this.wr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.Sr(n),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Cr(r,0),i=new Cr(r,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([n,i],s=>{const a=this.wr(s.gr);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yr(it);return r.forEach(i=>{const o=new Cr(i,0),s=new Cr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{n=n.add(a.gr)})}),H.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;ve.isDocumentKey(o)||(o=o.child(""));const s=new Cr(new ve(o),0);let a=new Yr(it);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.gr)),!0)},s),H.resolve(this.br(a))}br(e){const r=[];return e.forEach(n=>{const i=this.wr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){kt(this.Dr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.yr;return H.forEach(r.mutations,i=>{const o=new Cr(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=n})}Fn(e){}containsKey(e,r){const n=new Cr(r,0),i=this.yr.firstAfterOrEqual(n);return H.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Dr(e,r){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const r=this.Sr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NAe{constructor(e){this.Cr=e,this.docs=function(){return new Ut(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,s=this.Cr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return H.resolve(n?n.document.mutableCopy():un.newInvalidDocument(r))}getEntries(e,r){let n=Cs();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():un.newInvalidDocument(i))}),H.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Cs();const s=r.path,a=new ve(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||mEe(pEe(u),n)<=0||(i.has(u.key)||B1(r,u))&&(o=o.insert(u.key,u.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,r,n,i){we()}vr(e,r){return H.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new kAe(this)}getSize(e){return H.resolve(this.size)}}class kAe extends EAe{constructor(e){super(),this._r=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this._r.addEntry(e,i)):this._r.removeEntry(n)}),H.waitFor(r)}getFromCache(e,r){return this._r.getEntry(e,r)}getAllFromCache(e,r){return this._r.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OAe{constructor(e){this.persistence=e,this.Fr=new Jd(r=>BR(r),UR),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Mr=0,this.Or=new qR,this.targetCount=0,this.Nr=fd.On()}forEachTarget(e,r){return this.Fr.forEach((n,i)=>r(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Mr&&(this.Mr=r),H.resolve()}kn(e){this.Fr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Nr=new fd(r),this.highestTargetId=r),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,r){return this.kn(r),this.targetCount+=1,H.resolve()}updateTargetData(e,r){return this.kn(r),H.resolve()}removeTargetData(e,r){return this.Fr.delete(r.target),this.Or.Rr(r.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,r){const n=this.Fr.get(r)||null;return H.resolve(n)}addMatchingKeys(e,r,n){return this.Or.Er(r,n),H.resolve()}removeMatchingKeys(e,r,n){this.Or.Ar(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Or.Rr(r),H.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Or.mr(r);return H.resolve(n)}containsKey(e,r){return H.resolve(this.Or.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RAe{constructor(e,r){this.Br={},this.overlays={},this.Lr=new DR(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new OAe(this),this.indexManager=new wAe,this.remoteDocumentCache=function(i){return new NAe(i)}(n=>this.referenceDelegate.Qr(n)),this.serializer=new xAe(r),this.Kr=new TAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new PAe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Br[e.toKey()];return n||(n=new IAe(r,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,r,n){ue("MemoryPersistence","Starting transaction:",e);const i=new jAe(this.Lr.next());return this.referenceDelegate.$r(),n(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,r){return H.or(Object.values(this.Br).map(n=>()=>n.containsKey(e,r)))}}class jAe extends gEe{constructor(e){super(),this.currentSequenceNumber=e}}class HR{constructor(e){this.persistence=e,this.Gr=new qR,this.zr=null}static jr(e){return new HR(e)}get Hr(){if(this.zr)return this.zr;throw we()}addReference(e,r,n){return this.Gr.addReference(n,r),this.Hr.delete(n.toString()),H.resolve()}removeReference(e,r,n){return this.Gr.removeReference(n,r),this.Hr.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,r){return this.Hr.add(r.toString()),H.resolve()}removeTarget(e,r){this.Gr.Rr(r.targetId).forEach(i=>this.Hr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}$r(){this.zr=new Set}Ur(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Hr,n=>{const i=ve.fromPath(n);return this.Jr(e,i).next(o=>{o||r.removeEntry(i,Ae.min())})}).next(()=>(this.zr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Jr(e,r).next(n=>{n?this.Hr.delete(r.toString()):this.Hr.add(r.toString())})}Qr(e){return 0}Jr(e,r){return H.or([()=>H.resolve(this.Gr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Wr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.ki=n,this.qi=i}static Qi(e,r){let n=We(),i=We();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new KR(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DAe{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,r){this.Gi=e,this.indexManager=r,this.Ki=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.zi(e,r).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,r,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new $Ae;return this.Hi(e,r,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,r,s,a.size)})}).next(()=>o.result)}Ji(e,r,n,i){return n.documentReadCount<this.Ui?(Mh()<=Qe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",vu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),H.resolve()):(Mh()<=Qe.DEBUG&&ue("QueryEngine","Query:",vu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(Mh()<=Qe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",vu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uo(r))):H.resolve())}zi(e,r){if(p3(r))return H.resolve(null);let n=Uo(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=FP(r,null,"F"),n=Uo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const s=We(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Yi(r,a);return this.Zi(r,c,s,l.readTime)?this.zi(e,FP(r,null,"F")):this.Xi(e,c,r,l)}))})))}ji(e,r,n,i){return p3(r)||i.isEqual(Ae.min())?H.resolve(null):this.Gi.getDocuments(e,n).next(o=>{const s=this.Yi(r,o);return this.Zi(r,s,n,i)?H.resolve(null):(Mh()<=Qe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vu(r)),this.Xi(e,s,r,hEe(i,-1)).next(a=>a))})}Yi(e,r){let n=new Yr(mK(e));return r.forEach((i,o)=>{B1(e,o)&&(n=n.add(o))}),n}Zi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,r,n){return Mh()<=Qe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",vu(r)),this.Gi.getDocumentsMatchingQuery(e,r,Qa.min(),n)}Xi(e,r,n,i){return this.Gi.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MAe{constructor(e,r,n,i){this.persistence=e,this.es=r,this.serializer=i,this.ts=new Ut(it),this.ns=new Jd(o=>BR(o),UR),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CAe(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ts))}}function FAe(t,e,r,n){return new MAe(t,e,r,n)}async function DK(t,e){const r=Ce(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.os(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let l=We();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})}function LAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,h=f.keys();let p=H.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(y=>{const g=c.docVersions.get(m);kt(g!==null),y.version.compareTo(g)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=We();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function MK(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.qr.getLastRemoteSnapshotVersion(r))}function BAe(t,e){const r=Ce(t),n=e.snapshotVersion;let i=r.ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=r.ss.newChangeBuffer({trackRemovals:!0});i=r.ts;const a=[];e.targetChanges.forEach((u,f)=>{const h=i.get(f);if(!h)return;a.push(r.qr.removeMatchingKeys(o,u.removedDocuments,f).next(()=>r.qr.addMatchingKeys(o,u.addedDocuments,f)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(yn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(f,p),function(y,g,b){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,u)&&a.push(r.qr.updateTargetData(o,p))});let l=Cs(),c=We();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(UAe(o,s,e.documentUpdates).next(u=>{l=u.us,c=u.cs})),!n.isEqual(Ae.min())){const u=r.qr.getLastRemoteSnapshotVersion(o).next(f=>r.qr.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(u)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(r.ts=i,o))}function UAe(t,e,r){let n=We(),i=We();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=Cs();return r.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ae.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:s,cs:i}})}function VAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function WAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.qr.getTargetData(n,e).next(o=>o?(i=o,H.resolve(i)):r.qr.allocateTargetId(n).next(s=>(i=new xa(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ts=r.ts.insert(n.targetId,n),r.ns.set(e,n.targetId)),n})}async function WP(t,e,r){const n=Ce(t),i=n.ts.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!$g(s))throw s;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.ts=n.ts.remove(e),n.ns.delete(i.target)}function A3(t,e,r){const n=Ce(t);let i=Ae.min(),o=We();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const f=Ce(l),h=f.ns.get(u);return h!==void 0?H.resolve(f.ts.get(h)):f.qr.getTargetData(c,u)}(n,s,Uo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>n.es.getDocumentsMatchingQuery(s,e,r?i:Ae.min(),r?o:We())).next(a=>(zAe(n,$Ee(e),a),{documents:a,ls:o})))}function zAe(t,e,r){let n=t.rs.get(e)||Ae.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.rs.set(e,n)}class C3{constructor(){this.activeTargetIds=UEe()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GAe{constructor(){this.eo=new C3,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,r,n){this.no[e]=r}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new C3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qAe{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qv=null;function kA(){return qv===null?qv=function(){return 268435456+Math.round(2147483648*Math.random())}():qv++,"0x"+qv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HAe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KAe{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class YAe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=n+"://"+r.host,this.fo=`projects/${i}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(r,n,i,o,s){const a=kA(),l=this.So(r,n);ue("RestConnection",`Sending RPC '${r}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,o,s),this.Do(r,l,c,i).then(u=>(ue("RestConnection",`Received RPC '${r}' ${a}: `,u),u),u=>{throw ad("RestConnection",`RPC '${r}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Co(r,n,i,o,s,a){return this.wo(r,n,i,o,s)}bo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>r[s]=o),i&&i.headers.forEach((o,s)=>r[s]=o)}So(r,n){const i=HAe[r];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,r,n,i){const o=kA();return new Promise((s,a)=>{const l=new rEe;l.setWithCredentials(!0),l.listenOnce(ZSe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case IA.NO_ERROR:const u=l.getResponseJson();ue(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case IA.TIMEOUT:ue(nn,`RPC '${e}' ${o} timed out`),a(new ge(K.DEADLINE_EXCEEDED,"Request time out"));break;case IA.HTTP_ERROR:const f=l.getStatus();if(ue(nn,`RPC '${e}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(b)>=0?b:K.UNKNOWN}(p.status);a(new ge(m,p.message))}else a(new ge(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ge(K.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{ue(nn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);ue(nn,`RPC '${e}' ${o} sending request:`,i),l.send(r,"POST",c,n,15)})}vo(e,r,n){const i=kA(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=XSe(),a=JSe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new tEe({})),this.bo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=o.join("");ue(nn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=s.createWebChannel(u,l);let h=!1,p=!1;const m=new KAe({co:g=>{p?ue(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(ue(nn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),ue(nn,`RPC '${e}' stream ${i} sending:`,g),f.send(g))},lo:()=>f.close()}),y=(g,b,v)=>{g.listen(b,x=>{try{v(x)}catch(S){setTimeout(()=>{throw S},0)}})};return y(f,Wv.EventType.OPEN,()=>{p||ue(nn,`RPC '${e}' stream ${i} transport opened.`)}),y(f,Wv.EventType.CLOSE,()=>{p||(p=!0,ue(nn,`RPC '${e}' stream ${i} transport closed`),m.Ro())}),y(f,Wv.EventType.ERROR,g=>{p||(p=!0,ad(nn,`RPC '${e}' stream ${i} transport errored:`,g),m.Ro(new ge(K.UNAVAILABLE,"The operation could not be completed")))}),y(f,Wv.EventType.MESSAGE,g=>{var b;if(!p){const v=g.data[0];kt(!!v);const x=v,S=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(S){ue(nn,`RPC '${e}' stream ${i} received error:`,S);const _=S.status;let w=function(I){const T=er[I];if(T!==void 0)return TK(T)}(_),A=S.message;w===void 0&&(w=K.INTERNAL,A="Unknown error status: "+_+" with message "+S.message),p=!0,m.Ro(new ge(w,A)),f.close()}else ue(nn,`RPC '${e}' stream ${i} received:`,v),m.Vo(v)}}),y(a,eEe.STAT_EVENT,g=>{g.stat===i3.PROXY?ue(nn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===i3.NOPROXY&&ue(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ao()},0),m}}function OA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){return new sAe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,r,n=1e3,i=1.5,o=6e4){this.si=e,this.timerId=r,this.Fo=n,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const r=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,r-n);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(e,r,n,i,o,s,a,l){this.si=e,this.Ko=n,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new FK(e,r)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,r){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():r&&r.code===K.RESOURCE_EXHAUSTED?(As(r.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):r&&r.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(r)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),r=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Uo===r&&this.s_(n,i)},n=>{e(()=>{const i=new ge(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.o_(i)})})}s_(e,r){const n=this.i_(this.Uo);this.stream=this.__(e,r),this.stream.ho(()=>{n(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{n(()=>this.o_(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return r=>{this.si.enqueueAndForget(()=>this.Uo===e?r():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QAe extends LK{constructor(e,r,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}__(e,r){return this.connection.vo("Listen",e,r)}onMessage(e){this.zo.reset();const r=cAe(this.serializer,e),n=function(o){if(!("targetChange"in o))return Ae.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ae.min():s.readTime?Wo(s.readTime):Ae.min()}(e);return this.listener.a_(r,n)}u_(e){const r={};r.database=VP(this.serializer),r.addTarget=function(o,s){let a;const l=s.target;if(a=MP(l)?{documents:dAe(o,l)}:{query:hAe(o,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=NK(o,s.resumeToken);const c=LP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ae.min())>0){a.readTime=o_(o,s.snapshotVersion.toTimestamp());const c=LP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=mAe(this.serializer,e);n&&(r.labels=n),this.e_(r)}c_(e){const r={};r.database=VP(this.serializer),r.removeTarget=e,this.e_(r)}}class XAe extends LK{constructor(e,r,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,r){return this.connection.vo("Write",e,r)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const r=fAe(e.writeResults,e.commitTime),n=Wo(e.commitTime);return this.listener.I_(n,r)}return kt(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=VP(this.serializer),this.e_(e)}P_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>uAe(this.serializer,n))};this.e_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JAe extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ge(K.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,r,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,r,n,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ge(K.UNKNOWN,i.toString())})}Co(e,r,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,r,n,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(K.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class ZAe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(As(r),this.f_=!1):ue("OnlineStateTracker",r)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eCe{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{n.enqueueAndForget(async()=>{Wc(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ce(l);c.C_.add(4),await Fg(c),c.M_.set("Unknown"),c.C_.delete(4),await G1(c)}(this))})}),this.M_=new ZAe(n,i)}}async function G1(t){if(Wc(t))for(const e of t.v_)await e(!0)}async function Fg(t){for(const e of t.v_)await e(!1)}function BK(t,e){const r=Ce(t);r.D_.has(e.targetId)||(r.D_.set(e.targetId,e),XR(r)?QR(r):Zd(r).Ho()&&YR(r,e))}function UK(t,e){const r=Ce(t),n=Zd(r);r.D_.delete(e),n.Ho()&&VK(r,e),r.D_.size===0&&(n.Ho()?n.Zo():Wc(r)&&r.M_.set("Unknown"))}function YR(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Zd(t).u_(e)}function VK(t,e){t.x_.Oe(e),Zd(t).c_(e)}function QR(t){t.x_=new rAe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Zd(t).start(),t.M_.g_()}function XR(t){return Wc(t)&&!Zd(t).jo()&&t.D_.size>0}function Wc(t){return Ce(t).C_.size===0}function WK(t){t.x_=void 0}async function tCe(t){t.D_.forEach((e,r)=>{YR(t,e)})}async function rCe(t,e){WK(t),XR(t)?(t.M_.w_(e),QR(t)):t.M_.set("Unknown")}async function nCe(t,e,r){if(t.M_.set("Online"),e instanceof IK&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.D_.delete(a),i.x_.removeTarget(a))}(t,e)}catch(n){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await s_(t,n)}else if(e instanceof X0?t.x_.$e(e):e instanceof PK?t.x_.Je(e):t.x_.Ge(e),!r.isEqual(Ae.min()))try{const n=await MK(t.localStore);r.compareTo(n)>=0&&await function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.D_.get(c);u&&o.D_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.D_.get(l);if(!u)return;o.D_.set(l,u.withResumeToken(yn.EMPTY_BYTE_STRING,u.snapshotVersion)),VK(o,l);const f=new xa(u.target,l,c,u.sequenceNumber);YR(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ue("RemoteStore","Failed to raise snapshot:",n),await s_(t,n)}}async function s_(t,e,r){if(!$g(e))throw e;t.C_.add(1),await Fg(t),t.M_.set("Offline"),r||(r=()=>MK(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await r(),t.C_.delete(1),await G1(t)})}function zK(t,e){return e().catch(r=>s_(t,r,e))}async function q1(t){const e=Ce(t),r=Ja(e);let n=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;iCe(e);)try{const i=await VAe(e.localStore,n);if(i===null){e.b_.length===0&&r.Zo();break}n=i.batchId,oCe(e,i)}catch(i){await s_(e,i)}GK(e)&&qK(e)}function iCe(t){return Wc(t)&&t.b_.length<10}function oCe(t,e){t.b_.push(e);const r=Ja(t);r.Ho()&&r.h_&&r.P_(e.mutations)}function GK(t){return Wc(t)&&!Ja(t).jo()&&t.b_.length>0}function qK(t){Ja(t).start()}async function sCe(t){Ja(t).E_()}async function aCe(t){const e=Ja(t);for(const r of t.b_)e.P_(r.mutations)}async function lCe(t,e,r){const n=t.b_.shift(),i=WR.from(n,e,r);await zK(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await q1(t)}async function cCe(t,e){e&&Ja(t).h_&&await async function(n,i){if(function(s){return ZEe(s)&&s!==K.ABORTED}(i.code)){const o=n.b_.shift();Ja(n).Yo(),await zK(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await q1(n)}}(t,e),GK(t)&&qK(t)}async function P3(t,e){const r=Ce(t);r.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const n=Wc(r);r.C_.add(3),await Fg(r),n&&r.M_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.C_.delete(3),await G1(r)}async function uCe(t,e){const r=Ce(t);e?(r.C_.delete(2),await G1(r)):e||(r.C_.add(2),await Fg(r),r.M_.set("Unknown"))}function Zd(t){return t.O_||(t.O_=function(r,n,i){const o=Ce(r);return o.A_(),new QAe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:tCe.bind(null,t),Io:rCe.bind(null,t),a_:nCe.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),XR(t)?QR(t):t.M_.set("Unknown")):(await t.O_.stop(),WK(t))})),t.O_}function Ja(t){return t.N_||(t.N_=function(r,n,i){const o=Ce(r);return o.A_(),new XAe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:sCe.bind(null,t),Io:cCe.bind(null,t),T_:aCe.bind(null,t),I_:lCe.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await q1(t)):(await t.N_.stop(),t.b_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const s=Date.now()+n,a=new JR(e,r,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZR(t,e){if(As("AsyncQueue",`${e}: ${t}`),$g(t))return new ge(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ve.comparator(r.key,n.key):(r,n)=>ve.comparator(r.key,n.key),this.keyedMap=dp(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new df(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof df)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new df;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.B_=new Ut(ve.comparator)}track(e){const r=e.doc.key,n=this.B_.get(r);n?e.type!==0&&n.type===3?this.B_=this.B_.insert(r,e):e.type===3&&n.type!==1?this.B_=this.B_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.B_=this.B_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.B_=this.B_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.B_=this.B_.remove(r):e.type===1&&n.type===2?this.B_=this.B_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.B_=this.B_.insert(r,{type:2,doc:e.doc}):we():this.B_=this.B_.insert(r,e)}L_(){const e=[];return this.B_.inorderTraversal((r,n)=>{e.push(n)}),e}}class dd{constructor(e,r,n,i,o,s,a,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,o){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new dd(e,r,df.emptySet(r),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&L1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fCe{constructor(){this.k_=void 0,this.listeners=[]}}class dCe{constructor(){this.queries=new Jd(e=>pK(e),L1),this.onlineState="Unknown",this.q_=new Set}}async function hCe(t,e){const r=Ce(t),n=e.query;let i=!1,o=r.queries.get(n);if(o||(i=!0,o=new fCe),i)try{o.k_=await r.onListen(n)}catch(s){const a=ZR(s,`Initialization of query '${vu(e.query)}' failed`);return void e.onError(a)}r.queries.set(n,o),o.listeners.push(e),e.Q_(r.onlineState),o.k_&&e.K_(o.k_)&&ej(r)}async function pCe(t,e){const r=Ce(t),n=e.query;let i=!1;const o=r.queries.get(n);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function mCe(t,e){const r=Ce(t);let n=!1;for(const i of e){const o=i.query,s=r.queries.get(o);if(s){for(const a of s.listeners)a.K_(i)&&(n=!0);s.k_=i}}n&&ej(r)}function yCe(t,e,r){const n=Ce(t),i=n.queries.get(e);if(i)for(const o of i.listeners)o.onError(r);n.queries.delete(e)}function ej(t){t.q_.forEach(e=>{e.next()})}class gCe{constructor(e,r,n){this.query=e,this.U_=r,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new dd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.W_?this.z_(e)&&(this.U_.next(e),r=!0):this.j_(e,this.onlineState)&&(this.H_(e),r=!0),this.G_=e,r}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let r=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),r=!0),r}j_(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const r=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}H_(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e){this.key=e}}class KK{constructor(e){this.key=e}}class vCe{constructor(e,r){this.query=e,this.ia=r,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=We(),this.mutatedKeys=We(),this._a=mK(e),this.aa=new df(this._a)}get ua(){return this.ia}ca(e,r){const n=r?r.la:new I3,i=r?r.aa:this.aa;let o=r?r.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const h=i.get(u),p=B1(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(n.track({type:3,doc:p}),g=!0):this.ha(h,p)||(n.track({type:2,doc:p}),g=!0,(l&&this._a(p,l)>0||c&&this._a(p,c)<0)&&(a=!0)):!h&&p?(n.track({type:0,doc:p}),g=!0):h&&!p&&(n.track({type:1,doc:h}),g=!0,(l||c)&&(a=!0)),g&&(p?(s=s.add(p),o=y?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),n.track({type:1,doc:u})}return{aa:s,la:n,Zi:a,mutatedKeys:o}}ha(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((c,u)=>function(h,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return m(h)-m(p)}(c.type,u.type)||this._a(c.doc,u.doc)),this.Pa(n);const s=r?this.Ia():[],a=this.oa.size===0&&this.current?1:0,l=a!==this.sa;return this.sa=a,o.length!==0||l?{snapshot:new dd(this.query,e.aa,i,o,e.mutatedKeys,a===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new I3,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(r=>this.ia=this.ia.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.ia=this.ia.delete(r)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=We(),this.aa.forEach(n=>{this.Ea(n.key)&&(this.oa=this.oa.add(n.key))});const r=[];return e.forEach(n=>{this.oa.has(n)||r.push(new KK(n))}),this.oa.forEach(n=>{e.has(n)||r.push(new HK(n))}),r}da(e){this.ia=e.ls,this.oa=We();const r=this.ca(e.documents);return this.applyChanges(r,!0)}Aa(){return dd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class bCe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class xCe{constructor(e){this.key=e,this.Ra=!1}}class _Ce{constructor(e,r,n,i,o,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Jd(a=>pK(a),L1),this.fa=new Map,this.ga=new Set,this.pa=new Ut(ve.comparator),this.ya=new Map,this.wa=new qR,this.Sa={},this.ba=new Map,this.Da=fd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function wCe(t,e){const r=OCe(t);let n,i;const o=r.ma.get(e);if(o)n=o.targetId,r.sharedClientState.addLocalQueryTarget(n),i=o.view.Aa();else{const s=await WAe(r.localStore,Uo(e)),a=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await SCe(r,e,n,a==="current",s.resumeToken),r.isPrimaryClient&&BK(r.remoteStore,s)}return i}async function SCe(t,e,r,n,i){t.va=(f,h,p)=>async function(y,g,b,v){let x=g.view.ca(b);x.Zi&&(x=await A3(y.localStore,g.query,!1).then(({documents:w})=>g.view.ca(w,x)));const S=v&&v.targetChanges.get(g.targetId),_=g.view.applyChanges(x,y.isPrimaryClient,S);return k3(y,g.targetId,_.Ta),_.snapshot}(t,f,h,p);const o=await A3(t.localStore,e,!0),s=new vCe(e,o.ls),a=s.ca(o.documents),l=Mg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);k3(t,r,c.Ta);const u=new bCe(e,r,s);return t.ma.set(e,u),t.fa.has(r)?t.fa.get(r).push(e):t.fa.set(r,[e]),c.snapshot}async function ECe(t,e){const r=Ce(t),n=r.ma.get(e),i=r.fa.get(n.targetId);if(i.length>1)return r.fa.set(n.targetId,i.filter(o=>!L1(o,e))),void r.ma.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await WP(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),UK(r.remoteStore,n.targetId),zP(r,n.targetId)}).catch(jg)):(zP(r,n.targetId),await WP(r.localStore,n.targetId,!0))}async function ACe(t,e,r){const n=RCe(t);try{const i=await function(s,a){const l=Ce(s),c=hr.now(),u=a.reduce((p,m)=>p.add(m.key),We());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Cs(),y=We();return l.ss.getEntries(p,u).next(g=>{m=g,m.forEach((b,v)=>{v.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(g=>{f=g;const b=[];for(const v of a){const x=KEe(v,f.get(v.key).overlayedDocument);x!=null&&b.push(new Vc(v.key,x,sK(x.value.mapValue),Vo.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,a)}).next(g=>{h=g;const b=g.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(p,g.batchId,b)})}).then(()=>({batchId:h.batchId,changes:gK(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Sa[s.currentUser.toKey()];c||(c=new Ut(it)),c=c.insert(a,l),s.Sa[s.currentUser.toKey()]=c}(n,i.batchId,r),await Lg(n,i.changes),await q1(n.remoteStore)}catch(i){const o=ZR(i,"Failed to persist write");r.reject(o)}}async function YK(t,e){const r=Ce(t);try{const n=await BAe(r.localStore,e);e.targetChanges.forEach((i,o)=>{const s=r.ya.get(o);s&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?kt(s.Ra):i.removedDocuments.size>0&&(kt(s.Ra),s.Ra=!1))}),await Lg(r,n,e)}catch(n){await jg(n)}}function N3(t,e,r){const n=Ce(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Ce(s);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.listeners)h.Q_(a)&&(c=!0)}),c&&ej(l)}(n.eventManager,e),i.length&&n.Va.a_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function CCe(t,e,r){const n=Ce(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.ya.get(e),o=i&&i.key;if(o){let s=new Ut(ve.comparator);s=s.insert(o,un.newNoDocument(o,Ae.min()));const a=We().add(o),l=new W1(Ae.min(),new Map,new Ut(it),s,a);await YK(n,l),n.pa=n.pa.remove(o),n.ya.delete(e),tj(n)}else await WP(n.localStore,e,!1).then(()=>zP(n,e,r)).catch(jg)}async function TCe(t,e){const r=Ce(t),n=e.batch.batchId;try{const i=await LAe(r.localStore,e);XK(r,n,null),QK(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Lg(r,i)}catch(i){await jg(i)}}async function PCe(t,e,r){const n=Ce(t);try{const i=await function(s,a){const l=Ce(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(kt(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);XK(n,e,r),QK(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Lg(n,i)}catch(i){await jg(i)}}function QK(t,e){(t.ba.get(e)||[]).forEach(r=>{r.resolve()}),t.ba.delete(e)}function XK(t,e,r){const n=Ce(t);let i=n.Sa[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Sa[n.currentUser.toKey()]=i}}function zP(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.fa.get(e))t.ma.delete(n),r&&t.Va.Fa(n,r);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(n=>{t.wa.containsKey(n)||JK(t,n)})}function JK(t,e){t.ga.delete(e.path.canonicalString());const r=t.pa.get(e);r!==null&&(UK(t.remoteStore,r),t.pa=t.pa.remove(e),t.ya.delete(r),tj(t))}function k3(t,e,r){for(const n of r)n instanceof HK?(t.wa.addReference(n.key,e),ICe(t,n)):n instanceof KK?(ue("SyncEngine","Document no longer in limbo: "+n.key),t.wa.removeReference(n.key,e),t.wa.containsKey(n.key)||JK(t,n.key)):we()}function ICe(t,e){const r=e.key,n=r.path.canonicalString();t.pa.get(r)||t.ga.has(n)||(ue("SyncEngine","New document in limbo: "+r),t.ga.add(n),tj(t))}function tj(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const r=new ve(Rt.fromString(e)),n=t.Da.next();t.ya.set(n,new xCe(r)),t.pa=t.pa.insert(r,n),BK(t.remoteStore,new xa(Uo(hK(r.path)),n,"TargetPurposeLimboResolution",DR._e))}}async function Lg(t,e,r){const n=Ce(t),i=[],o=[],s=[];n.ma.isEmpty()||(n.ma.forEach((a,l)=>{s.push(n.va(l,e,r).then(c=>{if((c||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=KR.Qi(l.targetId,c);o.push(u)}}))}),await Promise.all(s),n.Va.a_(i),await async function(l,c){const u=Ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(c,h=>H.forEach(h.ki,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>H.forEach(h.qi,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!$g(f))throw f;ue("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const p=u.ts.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);u.ts=u.ts.insert(h,y)}}}(n.localStore,o))}async function NCe(t,e){const r=Ce(t);if(!r.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const n=await DK(r.localStore,e);r.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(l=>{l.reject(new ge(K.CANCELLED,s))})}),o.ba.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Lg(r,n._s)}}function kCe(t,e){const r=Ce(t),n=r.ya.get(e);if(n&&n.Ra)return We().add(n.key);{let i=We();const o=r.fa.get(e);if(!o)return i;for(const s of o){const a=r.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function OCe(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kCe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CCe.bind(null,e),e.Va.a_=mCe.bind(null,e.eventManager),e.Va.Fa=yCe.bind(null,e.eventManager),e}function RCe(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TCe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PCe.bind(null,e),e}class O3{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=z1(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return FAe(this.persistence,new DAe,e.initialUser,this.serializer)}createPersistence(e){return new RAe(HR.jr,this.serializer)}createSharedClientState(e){return new GAe}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jCe{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>N3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=NCe.bind(null,this.syncEngine),await uCe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dCe}()}createDatastore(e){const r=z1(e.databaseInfo.databaseId),n=function(o){return new YAe(o)}(e.databaseInfo);return function(o,s,a,l){return new JAe(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,s,a){return new eCe(n,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,r=>N3(this.syncEngine,r,0),function(){return T3.D()?new T3:new qAe}())}createSyncEngine(e,r){return function(i,o,s,a,l,c,u){const f=new _Ce(i,o,s,a,l,c);return u&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(r){const n=Ce(r);ue("RemoteStore","RemoteStore shutting down."),n.C_.add(5),await Fg(n),n.F_.shutdown(),n.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ce{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DCe{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=nK.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async o=>{ue("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ZR(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function RA(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await DK(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function R3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await FCe(t);ue("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>P3(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>P3(e.remoteStore,o)),t._onlineComponents=e}function MCe(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function FCe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await RA(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!MCe(r))throw r;ad("Error using user provided cache. Falling back to memory cache: "+r),await RA(t,new O3)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await RA(t,new O3);return t._offlineComponents}async function ZK(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await R3(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await R3(t,new jCe))),t._onlineComponents}function LCe(t){return ZK(t).then(e=>e.syncEngine)}async function BCe(t){const e=await ZK(t),r=e.eventManager;return r.onListen=wCe.bind(null,e.syncEngine),r.onUnlisten=ECe.bind(null,e.syncEngine),r}function UCe(t,e,r={}){const n=new Da;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const u=new $Ce({next:h=>{s.enqueueAndForget(()=>pCe(o,f)),h.fromCache&&l.source==="server"?c.reject(new ge(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new gCe(a,u,{includeMetadataChanges:!0,J_:!0});return hCe(o,f)}(await BCe(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(t,e,r){if(!r)throw new ge(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VCe(t,e,r,n){if(e===!0&&n===!0)throw new ge(K.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function $3(t){if(!ve.isDocumentKey(t))throw new ge(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D3(t){if(ve.isDocumentKey(t))throw new ge(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function hd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=rj(t);throw new ge(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VCe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eY((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H1{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ge(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M3(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new iEe;switch(n.type){case"firstParty":return new lEe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ge(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=j3.get(r);n&&(ue("ComponentProvider","Removing Datastore"),j3.delete(r),n.terminate())}(this),Promise.resolve()}}function WCe(t,e,r,n={}){var i;const o=(t=hd(t,H1))._getSettings(),s=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ad("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=ln.MOCK_USER;else{a=lk(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ge(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ln(c)}t._authCredentials=new oEe(new rK(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new K1(this.firestore,e,this._query)}}class ki{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ki(this.firestore,e,this._key)}}class Ma extends K1{constructor(e,r,n){super(e,r,hK(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new ve(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function zCe(t,e,...r){if(t=Xr(t),tY("collection","path",e),t instanceof H1){const n=Rt.fromString(e,...r);return D3(n),new Ma(t,null,n)}{if(!(t instanceof ki||t instanceof Ma))throw new ge(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Rt.fromString(e,...r));return D3(n),new Ma(t.firestore,null,n)}}function nj(t,e,...r){if(t=Xr(t),arguments.length===1&&(e=nK.newId()),tY("doc","path",e),t instanceof H1){const n=Rt.fromString(e,...r);return $3(n),new ki(t,null,new ve(n))}{if(!(t instanceof ki||t instanceof Ma))throw new ge(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Rt.fromString(e,...r));return $3(n),new ki(t.firestore,t instanceof Ma?t.converter:null,new ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GCe{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new FK(this,"async_queue_retry"),this.iu=()=>{const r=OA();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.zo.Qo()};const e=OA();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const r=OA();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const r=new Da;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!$g(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const r=this.Ja.then(()=>(this.tu=!0,e().catch(n=>{this.eu=n,this.tu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw As("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.tu=!1,n))));return this.Ja=r,r}enqueueAfterDelay(e,r,n){this.su(),this.ru.indexOf(e)>-1&&(r=0);const i=JR.createAndSchedule(this,e,r,n,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&we()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const r of this.Xa)if(r.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Xa)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const r=this.Xa.indexOf(e);this.Xa.splice(r,1)}}class Y1 extends H1{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new GCe}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nY(this),this._firestoreClient.terminate()}}function qCe(t,e){const r=typeof t=="object"?t:hk(),n=typeof t=="string"?t:e||"(default)",i=fk(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=ak("firestore");o&&WCe(i,...o)}return i}function rY(t){return t._firestoreClient||nY(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nY(t){var e,r,n;const i=t._freezeSettings(),o=function(a,l,c,u){return new xEe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,eY(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new DCe(t._authCredentials,t._appCheckCredentials,t._queue,o),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pd(yn.fromBase64String(e))}catch(r){throw new ge(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new pd(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ge(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ge(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ge(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HCe=/^__.*__$/;class KCe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Vc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Dg(e,this.data,r,this.fieldTransforms)}}function oY(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class sj{constructor(e,r,n,i,o,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new sj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Tu({path:n,du:!1});return i.Au(e),i}Ru(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return a_(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(oY(this.Iu)&&HCe.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class YCe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||z1(e)}pu(e,r,n,i=!1){return new sj({Iu:e,methodName:r,gu:n,path:zr.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QCe(t){const e=t._freezeSettings(),r=z1(t._databaseId);return new YCe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function XCe(t,e,r,n,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,r,i);cY("Data must be an object, but it was:",s,n);const a=aY(n,s);let l,c;if(o.merge)l=new ro(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const f of o.mergeFields){const h=JCe(e,f,r);if(!s.contains(h))throw new ge(K.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);eTe(u,h)||u.push(h)}l=new ro(u),c=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=s.fieldTransforms;return new KCe(new Ei(a),l,c)}function sY(t,e){if(lY(t=Xr(t)))return cY("Unsupported field value:",e,t),aY(t,e);if(t instanceof iY)return function(n,i){if(!oY(i.Iu))throw i.mu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(n,i){const o=[];let s=0;for(const a of n){let l=sY(a,i.Vu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=Xr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return VEe(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=hr.fromDate(n);return{timestampValue:o_(i.serializer,o)}}if(n instanceof hr){const o=new hr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:o_(i.serializer,o)}}if(n instanceof oj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pd)return{bytesValue:NK(i.serializer,n._byteString)};if(n instanceof ki){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GR(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.mu(`Unsupported field value: ${rj(n)}`)}(t,e)}function aY(t,e){const r={};return iK(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xd(t,(n,i)=>{const o=sY(i,e.Eu(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function lY(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof hr||t instanceof oj||t instanceof pd||t instanceof ki||t instanceof iY)}function cY(t,e,r){if(!lY(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=rj(r);throw n==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+n)}}function JCe(t,e,r){if((e=Xr(e))instanceof ij)return e._internalPath;if(typeof e=="string")return uY(t,e);throw a_("Field path arguments must be of type string or ",t,!1,void 0,r)}const ZCe=new RegExp("[~\\*/\\[\\]]");function uY(t,e,r){if(e.search(ZCe)>=0)throw a_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ij(...e.split("."))._internalPath}catch{throw a_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function a_(t,e,r,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new ge(K.INVALID_ARGUMENT,a+t+l)}function eTe(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(dY("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tTe extends fY{data(){return super.data()}}function dY(t,e){return typeof e=="string"?uY(t,e):e instanceof ij?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rTe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nTe{convertValue(e,r="none"){switch(Oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw we()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Xd(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertGeoPoint(e){return new oj(tr(e.latitude),tr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=FR(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Gm(e));default:return null}}convertTimestamp(e){const r=Xa(e);return new hr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Rt.fromString(e);kt($K(n));const i=new qm(n.get(1),n.get(3)),o=new ve(n.popFirst(5));return i.isEqual(r)||As(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iTe(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oTe extends fY{constructor(e,r,n,i,o,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new J0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(dY("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class J0 extends oTe{data(e={}){return super.data(e)}}class sTe{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Hv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new J0(this._firestore,this._userDataWriter,n.key,n,new Hv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ge(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new J0(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new J0(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:aTe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function aTe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class lTe extends nTe{constructor(e){super(),this.firestore=e}convertBytes(e){return new pd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,r)}}function cTe(t){t=hd(t,K1);const e=hd(t.firestore,Y1),r=rY(e),n=new lTe(e);return rTe(t._query),UCe(r,t._query).then(i=>new sTe(e,n,t,i))}function hY(t,e,r){t=hd(t,ki);const n=hd(t.firestore,Y1),i=iTe(t.converter,e,r);return pY(n,[XCe(QCe(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Vo.none())])}function uTe(t){return pY(hd(t.firestore,Y1),[new VR(t._key,Vo.none())])}function pY(t,e){return function(n,i){const o=new Da;return n.asyncQueue.enqueueAndForget(async()=>ACe(await LCe(n),i,o)),o.promise}(rY(t),e)}(function(e,r=!0){(function(i){Qd=i})(dk),Bf(new wc("firestore",(n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new Y1(new sEe(n.getProvider("auth-internal")),new uEe(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ge(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qm(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:r},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Lo(o3,"4.3.2",e),Lo(o3,"4.3.2","esm2017")})();const Q1=qCe(dO),fTe=async()=>await cTe(zCe(Q1,"players")).then(e=>e.docs.map(r=>r.data())).catch(console.log),GP=async t=>{const e={...t,id:cs(),createdAt:new Date().getTime(),updatedAt:new Date().getTime()};return await hY(nj(Q1,"players",e.id),e),e},dTe=async(t,e)=>{const r={...e,updatedAt:new Date().getTime()};return await hY(nj(Q1,"players",r.id),r),r},hTe=async t=>(await uTe(nj(Q1,"players",t)),!0);function pTe({onSelect:t,...e}){const[r,n]=E.useState(""),i=E.useCallback(()=>{n(cs())},[]);return d.jsxs(Kn,{title:"選擇玩家",...e,children:[d.jsx(Re,{onClick:i,color:"secondary",children:"刷新列表"}),d.jsx("div",{className:"mt-4",children:d.jsx(mY,{onClickPlayer:t},r)})]})}const mY=({onClickPlayer:t,onClickClone:e,onClickDelete:r})=>{const{value:n,loading:i}=Nye(fTe),o=E.useCallback(l=>{if(!t||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const u=n.find(f=>f.id===c);u&&t(c,u)},[t,n]),s=E.useCallback(l=>{if(!e||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const u=n.find(p=>p.id===c);if(!u)return;const{id:f,...h}=u;e(h)},[e,n]),a=E.useCallback(l=>{if(!r)return;const c=l.currentTarget.getAttribute("data-id");c&&r(c)},[r]);return d.jsxs(d.Fragment,{children:[i&&d.jsx("div",{className:"w-32 text-center mx-auto my-8",children:d.jsx(TO,{})}),!i&&(n==null?void 0:n.length)===0&&d.jsx("div",{className:"text-gray-500 text-center py-4",children:d.jsx("span",{children:"沒有已儲存的玩家"})}),d.jsx("div",{className:`grid grid-cols-1 gap-2 ${e||r?"":"md:grid-cols-2"}`,children:!i&&(n==null?void 0:n.map(l=>d.jsxs("div",{className:"text-left flex items-center gap-x-2",children:[d.jsx("div",{className:"flex-1 cursor-pointer",onClick:o,"data-id":l.id,children:d.jsx(rq,{player:l})}),e&&d.jsx("div",{className:"shrink-0",children:d.jsx(Re,{color:"primary",variant:"text",onClick:s,"data-id":l.id,children:"複製"})}),r&&d.jsx("div",{className:"shrink-0",children:d.jsx(Re,{color:"danger",variant:"text",onClick:a,"data-id":l.id,children:"刪除"})})]},l.id)))})]})};function mTe(){const[t,e]=E.useState(),[r,n]=E.useState("1"),[i,o]=Eo(!1),s=E.useCallback(()=>o(!1),[o]),a=E.useCallback(()=>{e(void 0),o(!0)},[o]),l=E.useCallback((h,p)=>{e(p),o(!0)},[o]),c=E.useCallback(h=>{GP({...h,name:h.name+"(複製)"}).then(()=>{n(cs())})},[]),u=E.useCallback(h=>{confirm("確定要刪除玩家嗎？")&&hTe(h).then(()=>{n(cs())})},[]),f=E.useCallback(h=>h.id?dTe(h.id,h).then(()=>{n(cs()),o(!1)}):GP(h).then(()=>{n(cs()),o(!1)}),[o]);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-4xl",children:"玩家"})}),d.jsx("div",{children:d.jsx(Re,{onClick:a,children:"新增"})})]}),d.jsx(mY,{onClickPlayer:l,onClickClone:c,onClickDelete:u},r)]}),d.jsx(Kn,{title:"新增／修改玩家",open:i,onClose:s,children:d.jsx("div",{className:"container space-y-6",children:d.jsx(ZH,{onSubmit:f,defaultValue:t})})})]})}const yTe={0:"東",1:"南",2:"西",3:"北"};function gTe({playerIndex:t,...e}){return d.jsx("span",{...e,children:yTe[t]})}const vTe={0:{title:"",name:"玩家A",color:"#6700cf"},1:{title:"",name:"玩家B",color:"#00b5de"},2:{title:"",name:"玩家C",color:"#e3277b"},3:{title:"",name:"玩家D",color:"#03ada5"}},bTe=`${new Date().toISOString().substring(0,10)} 對局`;function xTe(){const t=m9(),[,e]=Ete(),{getValues:r,control:n}=zd({defaultValues:{name:bTe,startingScore:"25000",isManganRoundUp:"1",yakuMax:"12",yakumanMax:"13"}}),i=Ka({name:"startingScore",control:n}),[o,s]=E.useState(vTe),[a,l]=E.useState(),[c,u]=Eo(!1),f=E.useCallback(w=>{const A=w.currentTarget.getAttribute("data-player-index");if(!A)return;const C=o[A];l({index:A,player:C}),u(!0)},[o,u]),h=E.useCallback(async w=>{a&&(s(A=>({...A,[a.index]:{...A[a.index],...w}})),u(!1))},[a,u]),p=E.useCallback(()=>{u(!1)},[u]),[m,y]=E.useState(),g=E.useCallback(w=>{w.preventDefault(),y("choose")},[]),b=E.useCallback(()=>{y(null)},[]),v=E.useCallback((w,A)=>{m==="choose"&&(l(C=>C?{...C,player:A}:void 0),y(null))},[m]),x=E.useCallback(w=>{const A=w.currentTarget;if(!A)return;const C=A.getAttribute("data-player-index");if(!C)return;const I=C==="0"?"1":C==="1"?"2":"3";s(T=>({...T,[C]:T[I],[I]:T[C]}))},[]),[{loading:S},_]=qw(async()=>{const{name:w,...A}=r(),C=await Promise.all(Object.values(o).map(N=>N.id||N.name==="玩家A"||N.name==="玩家B"||N.name==="玩家C"||N.name==="玩家D"?Promise.resolve(N):GP(N))),I={code:yye(),name:w,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:A,players:{0:C[0],1:C[1],2:C[2],3:C[3]},activeResultDetail:null},T=await t.push("matches",I),P=parseInt(A.startingScore),O={matchId:T.key,code:Nx(I.code,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await t.push("matchRounds",O),e(`/match/${O.matchId}/obs`)},[t,r,o,e]);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"container mx-auto max-w-screen-sm",children:d.jsxs("div",{className:"min-h-screen flex flex-col py-16 gap-y-4",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),d.jsx("div",{className:"flex-1",children:d.jsxs("div",{className:"space-y-12",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("h1",{className:"text-4xl",children:"對局"}),d.jsx(wn,{label:"對局名稱",children:d.jsx(Rn,{name:"name",control:n,rules:{required:!0},render:({field:w})=>d.jsx("div",{className:"text-xl",children:d.jsx(va,{...w})})})}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx(wn,{label:"起始點數",children:d.jsx(Rn,{name:"startingScore",control:n,rules:{required:!0},render:({field:w})=>d.jsxs(os,{...w,children:[d.jsx("option",{value:"25000",children:"25000"}),d.jsx("option",{value:"30000",children:"30000"}),d.jsx("option",{value:"35000",children:"35000"}),d.jsx("option",{value:"50000",children:"50000"}),d.jsx("option",{value:"100000",children:"100000"})]})})}),d.jsx(wn,{label:"滿貫切上",children:d.jsx(Rn,{name:"isManganRoundUp",control:n,rules:{required:!0},render:({field:w})=>d.jsxs(os,{...w,children:[d.jsx("option",{value:"0",children:"不切上"}),d.jsx("option",{value:"1",children:"切上 (3翻70符 & 4翻40符 = 滿貫)"})]})})}),d.jsx(wn,{label:"累積翻數上限",children:d.jsx(Rn,{name:"yakuMax",control:n,rules:{required:!0},render:({field:w})=>d.jsxs(os,{...w,children:[d.jsx("option",{value:"12",children:"三倍滿 (12翻)"}),d.jsx("option",{value:"13",children:"累計役滿 (13翻)"})]})})}),d.jsx(wn,{label:"役滿上限",children:d.jsx(Rn,{name:"yakumanMax",control:n,rules:{required:!0},render:({field:w})=>d.jsxs(os,{...w,children:[d.jsx("option",{value:"13",children:"單役滿"}),d.jsx("option",{value:"26",children:"兩倍役滿"}),d.jsx("option",{value:"39",children:"三倍役滿"}),d.jsx("option",{value:"130",children:"無上限"})]})})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h1",{className:"text-4xl",children:"玩家"}),d.jsx("div",{children:["0","1","2","3"].map(w=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-x-4",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("div",{className:"h-14 w-14 border-4 rounded border-black text-[40px] flex items-center justify-center pb-1",children:d.jsx(gTe,{playerIndex:w})})}),d.jsx("div",{className:"flex-1 text-[48px] cursor-pointer hover:scale-105","data-player-index":w,onClick:f,children:d.jsx(Ha,{player:o[w],score:i})})]},w),w!=="3"&&d.jsx("div",{className:"text-center",children:d.jsx(Re,{variant:"icon",color:"secondary",type:"button","data-player-index":w,onClick:x,children:d.jsx("i",{className:"bi bi-arrow-down-up"})})})]}))})]})]})}),d.jsx("div",{className:"shrink-0 space-y-4",children:d.jsx(Re,{size:"xlarge",className:"w-full",onClick:_,loading:S,type:"submit",children:"開始對局"})})]})}),d.jsx(Kn,{title:d.jsxs("div",{className:"space-x-4",children:[d.jsx("span",{children:"修改玩家"}),d.jsxs("a",{href:"#",className:"text-xs underline font-normal text-teal-600 hover:text-teal-500 align-middle",onClick:g,children:[d.jsx("i",{className:"bi bi-search"}),"搜尋玩家"]})]}),open:c,onClose:p,children:d.jsxs("div",{className:"container space-y-6",children:[!!(a!=null&&a.player.id)&&d.jsxs("div",{className:"py-2 px-3 bg-yellow-200 text-yellow-800 rounded",children:["注意：在這裡的修改不會儲存到玩家列表的資料庫。假如你想保留這些修改，請在"," ",d.jsxs("a",{href:"/players",target:"_blank",className:"text-teal-600 underline",children:["玩家列表 ",d.jsx("i",{className:"bi bi-box-arrow-up-right"})]})," ","中修改。"]}),d.jsx(ZH,{onSubmit:h,defaultValue:a==null?void 0:a.player})]})}),d.jsx(pTe,{open:m==="choose",onSelect:v,onClose:b})]})}function _Te({team:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return d.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[d.jsx("div",{className:"flex-1",children:d.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})}),e&&d.jsx("div",{className:"shrink-0",children:d.jsx(Re,{variant:"icon",color:"inverted",type:"button",onClick:i,children:d.jsx("i",{className:"bi bi-pencil"})})})]})}function wTe(){const{data:t,update:e,push:r}=Zr("teams"),n=E.useMemo(()=>Object.entries(t??{}).reverse().map(([b,v])=>({...v,_id:b})),[t]),[i,o]=Eo(!1),{register:s,reset:a,handleSubmit:l,control:c}=zd({defaultValues:{_id:void 0,name:"新的隊伍",color:"#000000"}}),u=Ka({control:c}),f=E.useMemo(()=>({name:"隊員名字",title:u.name??"",color:u.color??"#000000"}),[u.color,u.name]),h=E.useRef(null),p=E.useCallback(()=>o(!1),[o]),m=E.useCallback(()=>{a({_id:"",name:"新的隊伍",color:"#000000"}),o(!0)},[a,o]),y=E.useCallback(b=>{a({...b}),o(!0)},[a,o]),g=E.useMemo(()=>l(b=>{b._id?e({[b._id]:b}):r(b),o(!1)}),[l,r,o,e]);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("div",{children:d.jsx("h1",{className:"text-4xl",children:"隊伍"})}),d.jsx("div",{children:d.jsx(Re,{onClick:m,children:"新增"})})]}),d.jsx("div",{className:"space-y-2",children:n.map(b=>d.jsx(_Te,{team:b,onClickEdit:y},b._id))})]}),d.jsx(Kn,{title:"新增／修改隊伍",open:i,onClose:p,children:d.jsx("div",{className:"container",children:d.jsxs("form",{ref:h,onSubmit:g,children:[d.jsx("input",{type:"hidden",...s("_id")}),d.jsxs("div",{children:[d.jsx(wn,{className:"mb-6",label:"名字",children:d.jsx(Rn,{name:"name",control:c,rules:{required:!0},render:({field:b})=>d.jsx(va,{...b})})}),d.jsx(wn,{className:"mb-6",label:"顏色（務必選能看清楚白字的深色）",children:d.jsx(Rn,{name:"color",control:c,rules:{required:!0},render:({field:b})=>d.jsx($H,{...b})})})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"mb-2",children:"預覽"}),d.jsx("div",{className:"text-[4rem] px-4 pt-6 pb-1 bg-gray-800 text-white relative",children:d.jsx(Ha,{player:f,score:25e3})})]}),d.jsxs("div",{className:"flex gap-x-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(Re,{className:"w-full",color:"secondary",type:"button",onClick:p,children:"取消"})}),d.jsx("div",{className:"flex-1",children:d.jsx(Re,{className:"w-full",type:"submit",children:"儲存"})})]})]})})})]})}function STe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx($G,{params:r})}function ETe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=Jo((e==null?void 0:e.matchId)??"");return!r||!i?d.jsx("div",{children:"對局讀取失敗。"}):d.jsx("div",{children:d.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:d.jsx(xg,{players:r.players,matchRounds:n,className:"w-full table-auto"})})})}function ATe(){const{data:t}=Zr("matches"),e=E.useMemo(()=>Object.entries(t??{}).reverse().map(([r,n])=>({...n,_id:r})),[t]);return console.log(e),d.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[d.jsx("div",{className:"shrink-0",children:d.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),d.jsx("div",{className:"flex justify-between items-center",children:d.jsx("div",{children:d.jsx("h1",{className:"text-4xl",children:"對局"})})}),d.jsxs("table",{className:"data-table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"對局"}),d.jsx("th",{children:"東家"}),d.jsx("th",{children:"南家"}),d.jsx("th",{children:"西家"}),d.jsx("th",{children:"北家"})]})}),d.jsx("tbody",{children:e.map(r=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("a",{href:`/match/${r._id}`,target:"_blank",children:r.name})}),d.jsx("td",{children:r.players[0].name}),d.jsx("td",{children:r.players[1].name}),d.jsx("td",{children:r.players[2].name}),d.jsx("td",{children:r.players[3].name})]},r._id))})]})]})}function CTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchCurrentRound:n}=Jo((e==null?void 0:e.matchId)??"");return!r||!n?d.jsx("div",{children:"對局讀取失敗。"}):d.jsx("div",{children:d.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6"})})}function TTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=Jo((e==null?void 0:e.matchId)??""),[o,s]=E.useState(0);return E.useEffect(()=>{const l=setInterval(()=>{s(c=>1-c)},8e3);return()=>{clearInterval(l)}},[]),!r||!i?d.jsx("div",{children:"對局讀取失敗。"}):d.jsxs("div",{children:[d.jsx("div",{className:o===0?"block":"hidden",children:d.jsx(xg,{players:r.players,matchRounds:n,className:"w-full table-auto"})}),d.jsx("div",{className:o===1?"block":"hidden"})]})}function PTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(wH,{params:r})}const Kv=({teamPlayer:t})=>{const e=E.useMemo(()=>CO(t.color),[t.color]);return d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("table",{className:"w-full",children:d.jsxs("tbody",{children:[d.jsxs("tr",{style:{background:t.color},children:[d.jsx("td",{className:"w-[8mm] h-[8mm]"}),d.jsx("td",{className:"w-[2mm] border-r border-white"}),d.jsx("td",{}),d.jsx("td",{className:"w-[2mm] border-l border-white"}),d.jsx("td",{className:"w-[8mm] h-[8mm]"})]}),d.jsxs("tr",{style:{background:t.color},children:[d.jsx("td",{className:"h-[2mm] border-b border-white"}),d.jsx("td",{}),d.jsx("td",{}),d.jsx("td",{}),d.jsx("td",{className:"h-[2mm] border-b border-white"})]}),d.jsxs("tr",{style:{background:`linear-gradient(180deg, ${t.color}, ${e})`},children:[d.jsx("td",{}),d.jsx("td",{}),d.jsx("td",{className:"w-[150mm] h-[40mm]"}),d.jsx("td",{}),d.jsx("td",{})]}),d.jsxs("tr",{style:{background:e},children:[d.jsx("td",{className:"h-[2mm] border-t border-white"}),d.jsx("td",{}),d.jsx("td",{}),d.jsx("td",{}),d.jsx("td",{className:"h-[2mm] border-t border-white"})]}),d.jsxs("tr",{style:{background:e},children:[d.jsx("td",{className:"w-[8mm] h-[8mm]"}),d.jsx("td",{className:"w-[2mm] border-r border-white"}),d.jsx("td",{}),d.jsx("td",{className:"w-[2mm] border-l border-white"}),d.jsx("td",{className:"w-[8mm] h-[8mm]"})]})]})}),d.jsx("div",{className:"absolute left-[0] top-[2.5mm] w-[55mm] h-[55mm] bg-contain opacity-50",style:{backgroundImage:`url(${t.teamLogoImageUrl+"?w=500&h=500"})`}}),d.jsxs("div",{className:"absolute top-[10mm] bottom-[10mm] left-[25mm] right-[12mm] flex flex-col items-center justify-center",children:[d.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold mb-[3mm]",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerName}),d.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerNickname})]})]})},ITe=()=>{const{matchId:t}=Cte(),{data:e}=qa({queryKey:["matches",t],queryFn:({queryKey:r})=>EO(r[1]),enabled:!!t});return e?d.jsxs("div",{className:"pt-16",children:[d.jsxs("div",{className:"w-[170mm] mx-auto mb-8 print:hidden",children:[d.jsx("p",{children:"右鍵「列印」，設定如下："}),d.jsxs("ul",{children:[d.jsxs("li",{children:["紙張大小：",d.jsx("strong",{children:"A4"})]}),d.jsxs("li",{children:["邊界：",d.jsx("strong",{children:"無邊界"})]}),d.jsxs("li",{children:["選項：",d.jsx("strong",{children:"打勾「背景圖片」"})]})]})]}),d.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:d.jsx(Kv,{teamPlayer:e==null?void 0:e.playerEast})}),d.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:d.jsx(Kv,{teamPlayer:e==null?void 0:e.playerSouth})}),d.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:d.jsx(Kv,{teamPlayer:e==null?void 0:e.playerWest})}),d.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:d.jsx(Kv,{teamPlayer:e==null?void 0:e.playerNorth})})]}):d.jsx(d.Fragment,{})},yY=({params:{matchId:t}})=>{const{match:e,matchRounds:r}=Jo(t),n=E.useMemo(()=>Object.entries(r??{}).filter(([,i])=>!!i.resultDetail).map(([i,o])=>({id:i,...o}))??[],[r]);return!e||!r?d.jsx(d.Fragment,{}):d.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-8",children:[d.jsx("h1",{className:"text-4xl text-center",children:e.name}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("h4",{className:"text-3xl",children:[d.jsx("i",{className:"bi bi-bar-chart-steps"})," 分數"," ",d.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),d.jsx(xg,{players:e.players,matchRounds:r??{},className:"w-full table-auto"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("h4",{className:"text-3xl",children:[d.jsx("i",{className:"bi bi-clock-history"})," 和牌記錄"]}),d.jsxs("table",{className:"data-table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"局數"}),d.jsx("th",{children:"玩家"}),d.jsx("th",{children:"分數"}),d.jsx("th",{children:"役種"})]})}),d.jsx("tbody",{children:n.map(i=>d.jsxs("tr",{className:"odd:bg-neutral-200",children:[d.jsx("td",{className:"text-center py-1",children:d.jsx(us,{roundCount:i.roundCount,extendedRoundCount:i.extendedRoundCount})}),d.jsx("td",{className:"text-center py-1",style:{background:e.players[i.resultDetail.winnerPlayerIndex].color},children:e.players[i.resultDetail.winnerPlayerIndex].name}),d.jsx("td",{className:"text-center py-1 text-xl",children:d.jsx(Mt,{value:i.playerResults[i.resultDetail.winnerPlayerIndex].afterScore-i.playerResults[i.resultDetail.winnerPlayerIndex].beforeScore,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}),d.jsxs("td",{className:"text-center py-1",children:[d.jsx("p",{children:i.resultDetail.yakus.map(({label:o})=>o).join(" ")}),d.jsx("p",{children:d.jsx(kx,{han:i.resultDetail.han,fu:i.resultDetail.fu,yakumanCount:i.resultDetail.yakumanCount,isManganRoundUp:e.setting.isManganRoundUp==="1"})})]})]},i.id))})]})]})]})};function NTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(yY,{params:r})}function gY({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n}=Jo(t),[i,o]=E.useState(!1),[s,a]=E.useState(!1),l=E.useCallback(()=>{if(!e||!r)return;const c={_id:t,...jG(Object.values(r))};a(!0),fetch(`https://hkleague2024.hkmahjong.org/api/match/${c._id}/result`,{method:"PATCH",body:JSON.stringify(c),headers:{Accept:"application/json"}}).then(()=>{o(!0),a(!1),alert("上傳完畢，請在資料庫上查看。")})},[e,t,r]);return!e||!n?d.jsx("div",{children:"對局讀取失敗。"}):d.jsx("div",{children:d.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h6",{className:"text-center text-sm",children:t}),d.jsx("h3",{className:"text-2xl text-center",children:e.name})]}),d.jsx(xg,{players:e.players,matchRounds:r,className:"w-full table-auto"}),d.jsxs("div",{className:"text-center",children:[!i&&d.jsx(Re,{disabled:s,onClick:l,children:s?"上傳中…":"上傳成績"}),i&&d.jsx("a",{href:`https://hkmjbs.sanity.studio/structure/general-list-matches-past;${t}`,children:d.jsx(Re,{color:"secondary",children:"在資料庫上查看"})})]})]})})}const kTe=({queryKey:t})=>EO(t[1],t[2]),aj=(t,e)=>qa({queryKey:["matches",t,e],queryFn:kTe,enabled:!!t}),OTe=({initialMinutes:t})=>{const[e,r]=E.useState(0),[n,i]=E.useMemo(()=>[Math.floor(e/60).toString().padStart(2,"0"),(e%60).toString().padStart(2,"0")],[e]);return E.useEffect(()=>{r(t*60)},[t]),Lye(()=>{r(o=>o-1)},e>0?1e3:null),d.jsxs("span",{children:[n,":",i]})},vY=({params:{matchId:t}})=>{const{data:e}=aj(t),r=E.useMemo(()=>e?[e[e._order[0]],e[e._order[1]],e[e._order[2]],e[e._order[3]]]:[],[e]),n=IF("startAt"),i=IF("m"),o=E.useMemo(()=>{if(i)return parseInt(i);try{const[s,a]=n.split(":").map(u=>parseInt(u)),l=new Date;l.setHours(s),l.setMinutes(a);const c=new Date;return Math.max(0,(l.getTime()-c.getTime())/6e4)}catch{return 15}},[i,n]);return d.jsxs("div",{className:"fixed inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:[d.jsxs("div",{className:"w-[80vw]",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),d.jsx("div",{children:d.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),d.jsxs("div",{className:"flex justify-between items-center mb-[10vh]",children:[d.jsxs("div",{style:{paddingBottom:"25vh"},children:[d.jsx("p",{className:"text-left text-[80px] leading-3",children:"下一場賽事"}),d.jsx("p",{className:"text-left text-[120px] scale-[200%] origin-top-left font-numeric",children:d.jsx(OTe,{initialMinutes:o})})]}),d.jsx("div",{className:"grid grid-cols-2 gap-[2vw]",children:r.map(s=>d.jsx("img",{className:"w-[16vw] aspect-square",src:s.teamLogoImageUrl+"?w=500&h=500"}))})]})]}),d.jsxs("div",{className:"fixed bottom-[5vh] left-[10vw]",children:[d.jsx("div",{children:d.jsx("img",{src:"/images/homepage-qr.png",className:"w-[8vw]",alt:""})}),d.jsxs("p",{className:"text-[32px]",children:["聯賽官網: ",d.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})]})]})]})};function RTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(vY,{params:r})}function jTe(){return d.jsx("div",{className:"fixed inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:d.jsxs("div",{className:"w-[80vw]",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),d.jsx("div",{children:d.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),d.jsxs("div",{className:"flex flex-col justify-center items-center h-[70vh]",children:[d.jsx("p",{className:"text-[100px] text-center",children:"今天賽事已結束，感謝各位收看！"}),d.jsx("div",{className:"text-center mt-[5vh]",children:d.jsx("img",{src:"/images/homepage-qr.png",className:"w-[12vw] mx-auto",alt:""})}),d.jsx("p",{className:"text-[48px] text-center",children:d.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})}),d.jsx("p",{className:"text-[48px] text-center",children:"賽程、賽事重溫、隊伍介紹、新手教程"})]})]})})}var bY={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,n(a)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(bY);var $Te=bY.exports;const Ar=ot($Te),F3=({teamPlayer:t,team:e,fadeIn:r,fadeOut:n,delay:i})=>{const o=CO(e.color);return d.jsxs("div",{className:Ar("relative aspect-[18/25] rounded-[1em] overflow-hidden",{"mi-team-player-in":r,"mi-team-player-out":n}),style:{background:`linear-gradient(180deg, ${e.color}, ${o})`,animationDelay:i+"s"},children:[d.jsx("div",{className:"absolute inset-0",style:{background:`url(${e.teamLogoImageUrl+"?w=500&h=500&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.2}}),d.jsx("img",{className:"relative z-10 block mx-auto w-full",src:t.playerPortraitImageUrl+"?h=500&w=360&auto=format&fit=crop&crop=top",alt:t.playerName}),d.jsx("div",{className:"absolute z-20 bottom-0 left-0 right-0 text-center py-[0.25em]",style:{background:"linear-gradient(to top, #00000090 80%, transparent"},children:d.jsxs("div",{children:[d.jsx("p",{className:"text-[1.5em] leading-[1em] font-semibold",children:t.playerNickname}),d.jsx("p",{className:"text-[0.8em]",children:t.playerName})]})})]},t.playerName)},DTe=({slide:t,status:e,subslide:r})=>{var n,i,o,s,a,l,c,u,f,h,p,m;return t.type==="teams"?d.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:t.teams.map((y,g)=>d.jsxs("div",{className:Ar("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?g*.25+"s":"0s"},children:[d.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${y.color})`,opacity:.5}},y.teamId),d.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${y.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),d.jsxs("div",{className:Ar("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[d.jsx("img",{src:y.teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),d.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:y.teamName}),d.jsx("h3",{className:"text-[1em] font-semibold text-center",children:y.teamSecondaryName})]}),d.jsxs("div",{className:Ar("absolute inset-0 opacity-0",{"mi-teams-player-in":e>=0&&r>=1,"mi-teams-player-out":e>0}),style:{animationDelay:e===0?g*.25+"s":"0s"},children:[d.jsx("img",{src:y.playerPortraitImageUrl+"?w=360&h=500&auto=format",className:"aspect-[18/25] w-full",alt:""}),d.jsxs("div",{className:"font-semibold text-center",children:[d.jsx("p",{className:"text-[1em]",children:y.playerNickname}),d.jsx("p",{className:"text-[.8em]",children:y.playerName})]})]})]},y.teamId))})]}):t.type==="team"?d.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[d.jsx("div",{className:Ar("absolute inset-0 -z-10",{"mi-team-colorBackground-in":e===0,"mi-team-colorBackground-out":e>0}),style:{background:`linear-gradient(to bottom, transparent 60%, ${t.team.color})`,opacity:.5}}),d.jsx("div",{className:Ar("absolute inset-0 -z-10",{"mi-team-logoBackground-in":e===0,"mi-team-logoBackground-out":e>0}),style:{background:`url(${t.team.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.125}}),d.jsxs("div",{className:Ar("text-right mb-[.5em]",{"mi-team-team-in":e===0,"mi-team-team-out":e>0}),children:[d.jsxs("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:[d.jsxs("div",{className:"text-left space-y-[.5em]",children:[d.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[d.jsx("p",{children:"隊伍積分"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:ya((n=t.team.teamStatistic)==null?void 0:n.point)})})]}),d.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[d.jsx("p",{children:"隊伍排名"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:rd((i=t.team.teamStatistic)==null?void 0:i.ranking)})})]})]}),d.jsx("img",{src:t.team.teamLogoImageUrl+"?w=512&h=512&auto=format",alt:t.team.teamFullname,className:"aspect-square",style:{width:256,height:256}})]}),d.jsx("h3",{className:"inline-block font-semibold text-right text-[1.5em]",children:t.team.teamFullname})]}),d.jsxs("div",{className:"flex-[2] relative",children:[d.jsx("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e===0&&r>=0&&r<1?1:0},children:t.teamPlayers.map((y,g)=>d.jsx(F3,{team:t.team,teamPlayer:y,fadeIn:e===0&&r<=0,fadeOut:e===0&&r>0,delay:(r<=0?1.7:0)+g*.25},y.playerName))}),d.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e>=0&&e<1&&r>=1&&r<2?1:0},children:[d.jsx(F3,{team:t.team,teamPlayer:t.team,fadeIn:e===0&&r===1,fadeOut:e>0,delay:0}),d.jsx("div",{className:"col-span-3",children:d.jsxs("div",{className:Ar({"mi-team-activePlayerStat-in":e===0&&r===1,"mi-team-activePlayerStat-out":e>0}),children:[d.jsxs("div",{className:"flex justify-between mb-[1em]",children:[d.jsxs("p",{className:"text-[2em]",children:["個人總分"," ",d.jsx("span",{className:"font-numeric",children:ya((o=t.team.playerStatistic)==null?void 0:o.point)})]}),d.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",d.jsx("span",{className:"font-numeric",children:((s=t.team.playerStatistic)==null?void 0:s.matchCount)??"-"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em]",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((a=t.team.playerStatistic)==null?void 0:a.nonFourthP)})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"連對率"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((l=t.team.playerStatistic)==null?void 0:l.firstAndSecondP)})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"立直率"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((c=t.team.playerStatistic)==null?void 0:c.riichiP)})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"和了率"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((u=t.team.playerStatistic)==null?void 0:u.ronP)})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"銃和率"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((f=t.team.playerStatistic)==null?void 0:f.chuckP)})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"副露率"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((h=t.team.playerStatistic)==null?void 0:h.revealP)})})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.8em]",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"和了平均打點"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((p=t.team.playerStatistic)==null?void 0:p.ronPureScoreAvg)})})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("p",{className:"text-[.9em]",children:"銃和平均打點"}),d.jsx("p",{children:d.jsx("span",{className:"font-numeric",children:Ls((m=t.team.playerStatistic)==null?void 0:m.chuckPureScoreAvg)})})]})]})]})})]})]})]}):d.jsx(d.Fragment,{})},xY=({params:{matchId:t}})=>{var h;const{data:e}=aj(t,!0),r=E.useMemo(()=>e?[e==null?void 0:e.playerEast.teamId,e==null?void 0:e.playerSouth.teamId,e==null?void 0:e.playerWest.teamId,e==null?void 0:e.playerNorth.teamId]:null,[e]),{data:n}=qa({queryKey:["match",t,"groupedPlayers"],queryFn:()=>eye(r,e==null?void 0:e.tournament._id),enabled:!!e&&!!r}),i=E.useMemo(()=>!e||!n?[{type:"empty",_id:"empty",subslide:0}]:[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:[e.playerEast,e.playerSouth,e.playerWest,e.playerNorth],subslide:1},{_id:"team_playerEast",type:"team",team:e.playerEast,teamPlayers:n[e.playerEast.teamId],subslide:2},{_id:"team_playerSouth",type:"team",team:e.playerSouth,teamPlayers:n[e.playerSouth.teamId],subslide:2},{_id:"team_playerWest",type:"team",team:e.playerWest,teamPlayers:n[e.playerWest.teamId],subslide:2},{_id:"team_playerNorth",type:"team",team:e.playerNorth,teamPlayers:n[e.playerNorth.teamId],subslide:2}],[e,n]),[o,s]=E.useState(0),[a,l]=E.useState(0),[c,u]=E.useState(!1),f=E.useCallback(()=>{if(c)return;const p=i[o];if(!p){s(1);return}p.type==="empty"?s(m=>m+1):a>=p.subslide-1?(s(m=>m+.5),u(!0),setTimeout(()=>{s(m=>Math.ceil(m)),l(0),u(!1)},1200)):(l(m=>m+.5),u(!0),setTimeout(()=>{l(m=>Math.ceil(m)),u(!1)},1200))},[c,o,i,a]);return!e||!n?d.jsx(d.Fragment,{}):d.jsxs("div",{className:"match-introduction fixed inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:f,children:[d.jsx("div",{className:"absolute py-16 px-24 inset-0",children:d.jsxs("div",{className:"flex gap-x-[0.25em] mi-title-in",children:[d.jsx("div",{children:d.jsx("img",{src:e.tournament.logoUrl+"?w=280&h=280&auto=format",alt:e.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:e.tournament.name}),d.jsxs("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:["常規賽 ",(h=e.startAt)==null?void 0:h.substring(0,10)]})]})]})}),i.map((p,m)=>d.jsx(DTe,{slide:p,status:o-m,subslide:a},p._id))]})},Yv=({player:t})=>d.jsx("div",{className:"relative w-full h-full border-[.5em]",style:{borderColor:t.color},children:d.jsxs("div",{className:"absolute top-0 left-0 flex gap-x-8 pr-1 rounded-br-lg text-[1.5em] font-semibold text-white",style:{backgroundColor:t.color},children:[d.jsxs("p",{children:[t.name," (",t.nickname,")"]}),d.jsx("p",{children:t.currentStatus.afterScore})]})}),_Y=({params:{matchId:t}})=>{const{match:e,matchCurrentRound:r}=Jo(t),n=E.useMemo(()=>{if(!e||!r)return[];const i=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],o=Object.entries(r.playerResults).map(([s,a])=>({playerIndex:s,score:a.afterScore})).sort((s,a)=>a.score-s.score).map((s,a)=>({playerIndex:s.playerIndex,...i[a],point:(s.score-3e4)/1e3+i[a].point})).reduce((s,a)=>(s[a.playerIndex]={point:a.point,ranking:a.ranking},s),{});return["0","1","2","3"].map(s=>({...e.players[s],color:e.players[s].color,currentStatus:{...r.playerResults[s],isEast:Xn(s,r.roundCount),...o[s]}}))},[e,r]);return!e||n.length===0?d.jsx(d.Fragment,{}):d.jsxs("div",{className:"fixed inset-0 grid grid-cols-8",children:[d.jsx("div",{className:"col-span-5",children:d.jsx(Yv,{player:n[0]})}),d.jsx("div",{className:"col-span-1"}),d.jsx("div",{className:"col-span-2"}),d.jsx("div",{className:"col-span-5",children:d.jsx(Yv,{player:n[1]})}),d.jsx("div",{className:"col-span-1"}),d.jsx("div",{className:"col-span-1"}),d.jsx("div",{className:"col-span-1"}),d.jsx("div",{className:"col-span-5",children:d.jsx(Yv,{player:n[2]})}),d.jsx("div",{className:"col-span-3 row-span-2"}),d.jsx("div",{className:"col-span-5",children:d.jsx(Yv,{player:n[3]})})]})};function MTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(_Y,{params:r})}function FTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(gY,{params:r})}const ou="b6908027-9179-485a-8bce-822c42114371",Fh=(t,e,r,n,i,o)=>t.map(s=>({player:No(e[s.teamId],{...s,team:e[s.teamId]}),value:r(s.player.statistics),tieBreakValue:n(s.player.statistics)})).sort((s,a)=>s.value===a.value?(s.tieBreakValue-a.tieBreakValue)*(o==="asc"?1:-1):(s.value-a.value)*(i==="asc"?1:-1)).slice(0,6),L3=({params:{week:t}})=>{const[e,r]=E.useState(0),n=E.useCallback(()=>{e===2?(r(h=>h+.5),setTimeout(()=>{r(3)},1e3)):e<2&&r(h=>h+1)},[e]),{data:i}=qa({queryKey:["tournament",ou],queryFn:()=>AO(ou).then(h=>({...h,teams:h.teams.sort((p,m)=>m.point-p.point)})),enabled:!!ou}),{data:o}=qa({queryKey:["tournament",ou,"players"],queryFn:()=>nye(ou),enabled:!!ou}),s=E.useMemo(()=>i?i.teams.reduce((h,{team:p})=>(h[p._id]=p,h),{}):{},[i]),[a,l,c,u,f]=E.useMemo(()=>{if(!o||!s)return[[],[],[],[],[]];const h=o.filter(p=>p.player.statistics.matchCount>0);return[Fh(h,s,p=>p.point,p=>p.matchCount,"desc","asc"),Fh(h,s,p=>p.ronCount/p.roundCount,p=>p.roundCount,"desc","desc"),Fh(h,s,p=>p.ronPureScoreAvg,p=>p.roundCount,"desc","desc"),Fh(h,s,p=>p.chuckCount/p.roundCount,p=>p.roundCount,"asc","desc"),Fh(h,s,p=>p.scoreMax,p=>p.roundCount,"desc","desc")]},[o,s]);return console.log(a,l,c,u),i?d.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:n,children:d.jsxs("div",{className:"absolute inset-0 tournament-weekly-report text-white text-[36px] flex py-[1em] px-[1em] gap-x-[1em]","data-active":e>=1,children:[d.jsxs("div",{className:"twr-title flex flex-col justify-between items-center","data-active":e>=1,children:[d.jsx("div",{children:d.jsx("img",{src:i.logoUrl+"?w=280&h=280&auto=format",alt:i.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),d.jsxs("p",{style:{fontSize:"3em",writingMode:"vertical-rl",textOrientation:"upright"},children:["第",d.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:"1"}),"週結算"]}),d.jsxs("p",{style:{fontSize:"1.2em",writingMode:"vertical-rl",textOrientation:"upright"},children:[d.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:"9/1"}),"~",d.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:"11/1"})]})]}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsxs("div",{className:"absolute inset-0 flex flex-col twr-team-ranking","data-active":e===2,children:[d.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6 twr-team-ranking-row",children:[d.jsx("p",{className:"flex-1 text-center",children:"排名"}),d.jsx("p",{className:"flex-[5]",children:"隊伍"}),d.jsx("p",{className:"flex-1 text-center",children:"積分"}),d.jsx("p",{className:"flex-1 text-center",children:"與前名差距"}),d.jsx("p",{className:"flex-1 text-center",children:"半莊數"})]}),i.teams.map((h,p)=>d.jsxs("div",{className:"relative flex-1 flex items-center gap-6 overflow-hidden twr-team-ranking-row",style:{background:`linear-gradient(to right, ${h.team.color}C0, transparent 105%)`,animationDelay:`${p*.05}s`},children:[d.jsx("img",{src:h.team.squareLogoImage+"?w=320&h=320",alt:h.team._id,className:"absolute left-0 opacity-25 -z-10"}),d.jsx("p",{className:"flex-1 text-center",children:rd(h.ranking)}),d.jsxs("p",{className:"flex-[5]",children:[h.team.name," ",h.team.secondaryName]}),d.jsx("p",{className:"flex-1 text-center",children:ya(h.point)}),d.jsx("p",{className:"flex-1 text-center",children:p>0?(i.teams[p-1].point-h.point).toFixed(1):"-"}),d.jsxs("p",{className:"flex-1 text-center",children:[h.matchCount,d.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},h._id))]}),d.jsxs("div",{className:"absolute inset-0 flex twr-player-ranking gap-[1em] items-stretch twr-player-ranking","data-active":e===3,children:[d.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[d.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-player-ranking-row",children:"MVP"}),d.jsx("p",{className:"text-center twr-player-ranking-row",children:"積分最高選手"}),d.jsx("div",{className:"flex-1 flex flex-col",children:a.map(({player:h,value:p,tieBreakValue:m},y)=>d.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center twr-player-ranking-row",style:{background:`linear-gradient(to right, ${h.color}C0, transparent 105%)`,animationDelay:`${y*.05}s`},children:[d.jsx("img",{src:h.teamLogoImageUrl+"?w=320&h=320",alt:h.teamName,className:"absolute left-[3em] opacity-25 -z-10"}),d.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em]",children:[d.jsx("div",{className:"w-[2.2em]",children:rd(y+1)}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-[1.5em] leading-[1em]",children:h.playerNickname}),d.jsx("p",{className:"text-[.75em] leading-[1em]",children:h.playerName})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[1.5em] leading-[1em] font-numeric",children:p.toFixed(1)}),d.jsxs("p",{className:"text-[.75em] leading-[1em] opacity-80",children:["(半莊數: ",m,")"]})]})]})]},h.playerId))})]}),d.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-[1em] twr-player-ranking-row",style:{animationDelay:"1.5s"},children:[d.jsxs("div",{className:"space-y-[.5em]",children:[d.jsx("p",{className:"text-center",children:"和了率"}),d.jsx("div",{className:"flex-1 flex flex-col",children:l.map(({player:h,value:p})=>d.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${h.color}20`},children:[d.jsx("img",{src:h.teamLogoImageUrl+"?w=320&h=320",alt:h.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),d.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:"leading-[1.2em]",children:h.playerNickname})}),d.jsx("div",{className:"text-right",children:d.jsx("p",{className:"leading-[1.2em]",children:p.toFixed(2)})})]})]},h.playerId))})]}),d.jsxs("div",{className:"space-y-[.5em]",children:[d.jsx("p",{className:"text-center",children:"平均打點"}),d.jsx("div",{className:"flex-1 flex flex-col",children:c.map(({player:h,value:p})=>d.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${h.color}20`},children:[d.jsx("img",{src:h.teamLogoImageUrl+"?w=320&h=320",alt:h.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),d.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:"leading-[1.2em]",children:h.playerNickname})}),d.jsx("div",{className:"text-right",children:d.jsx("p",{className:"leading-[1.2em]",children:p.toFixed(2)})})]})]},h.playerId))})]}),d.jsxs("div",{className:"space-y-[.5em]",children:[d.jsx("p",{className:"text-center",children:"銃和率"}),d.jsx("div",{className:"flex-1 flex flex-col",children:u.map(({player:h,value:p})=>d.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${h.color}20`},children:[d.jsx("img",{src:h.teamLogoImageUrl+"?w=320&h=320",alt:h.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),d.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:"leading-[1.2em]",children:h.playerNickname})}),d.jsx("div",{className:"text-right",children:d.jsx("p",{className:"leading-[1.2em]",children:p.toFixed(2)})})]})]},h.playerId))})]}),d.jsxs("div",{className:"space-y-[.5em]",children:[d.jsx("p",{className:"text-center",children:"最高得點"}),d.jsx("div",{className:"flex-1 flex flex-col",children:f.map(({player:h,value:p})=>d.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${h.color}20`},children:[d.jsx("img",{src:h.teamLogoImageUrl+"?w=320&h=320",alt:h.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),d.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:"leading-[1.2em]",children:h.playerNickname})}),d.jsx("div",{className:"text-right",children:d.jsx("p",{className:"leading-[1.2em]",children:p.toFixed(0)})})]})]},h.playerId))})]})]})]})]})]})}):d.jsx(d.Fragment,{})};function LTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(xY,{params:r})}function wY(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=wY(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ct(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=wY(t))&&(n&&(n+=" "),n+=e);return n}var BTe=Array.isArray,Bn=BTe,UTe=typeof kl=="object"&&kl&&kl.Object===Object&&kl,SY=UTe,VTe=SY,WTe=typeof self=="object"&&self&&self.Object===Object&&self,zTe=VTe||WTe||Function("return this")(),Zo=zTe,GTe=Zo,qTe=GTe.Symbol,Bg=qTe,B3=Bg,EY=Object.prototype,HTe=EY.hasOwnProperty,KTe=EY.toString,Lh=B3?B3.toStringTag:void 0;function YTe(t){var e=HTe.call(t,Lh),r=t[Lh];try{t[Lh]=void 0;var n=!0}catch{}var i=KTe.call(t);return n&&(e?t[Lh]=r:delete t[Lh]),i}var QTe=YTe,XTe=Object.prototype,JTe=XTe.toString;function ZTe(t){return JTe.call(t)}var ePe=ZTe,U3=Bg,tPe=QTe,rPe=ePe,nPe="[object Null]",iPe="[object Undefined]",V3=U3?U3.toStringTag:void 0;function oPe(t){return t==null?t===void 0?iPe:nPe:V3&&V3 in Object(t)?tPe(t):rPe(t)}var js=oPe;function sPe(t){return t!=null&&typeof t=="object"}var $s=sPe,aPe=js,lPe=$s,cPe="[object Symbol]";function uPe(t){return typeof t=="symbol"||lPe(t)&&aPe(t)==cPe}var eh=uPe,fPe=Bn,dPe=eh,hPe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pPe=/^\w*$/;function mPe(t,e){if(fPe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||dPe(t)?!0:pPe.test(t)||!hPe.test(t)||e!=null&&t in Object(e)}var lj=mPe;function yPe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var al=yPe;const th=ot(al);var gPe=js,vPe=al,bPe="[object AsyncFunction]",xPe="[object Function]",_Pe="[object GeneratorFunction]",wPe="[object Proxy]";function SPe(t){if(!vPe(t))return!1;var e=gPe(t);return e==xPe||e==_Pe||e==bPe||e==wPe}var cj=SPe;const Me=ot(cj);var EPe=Zo,APe=EPe["__core-js_shared__"],CPe=APe,jA=CPe,W3=function(){var t=/[^.]+$/.exec(jA&&jA.keys&&jA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function TPe(t){return!!W3&&W3 in t}var PPe=TPe,IPe=Function.prototype,NPe=IPe.toString;function kPe(t){if(t!=null){try{return NPe.call(t)}catch{}try{return t+""}catch{}}return""}var AY=kPe,OPe=cj,RPe=PPe,jPe=al,$Pe=AY,DPe=/[\\^$.*+?()[\]{}|]/g,MPe=/^\[object .+?Constructor\]$/,FPe=Function.prototype,LPe=Object.prototype,BPe=FPe.toString,UPe=LPe.hasOwnProperty,VPe=RegExp("^"+BPe.call(UPe).replace(DPe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WPe(t){if(!jPe(t)||RPe(t))return!1;var e=OPe(t)?VPe:MPe;return e.test($Pe(t))}var zPe=WPe;function GPe(t,e){return t==null?void 0:t[e]}var qPe=GPe,HPe=zPe,KPe=qPe;function YPe(t,e){var r=KPe(t,e);return HPe(r)?r:void 0}var zc=YPe,QPe=zc,XPe=QPe(Object,"create"),X1=XPe,z3=X1;function JPe(){this.__data__=z3?z3(null):{},this.size=0}var ZPe=JPe;function eIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tIe=eIe,rIe=X1,nIe="__lodash_hash_undefined__",iIe=Object.prototype,oIe=iIe.hasOwnProperty;function sIe(t){var e=this.__data__;if(rIe){var r=e[t];return r===nIe?void 0:r}return oIe.call(e,t)?e[t]:void 0}var aIe=sIe,lIe=X1,cIe=Object.prototype,uIe=cIe.hasOwnProperty;function fIe(t){var e=this.__data__;return lIe?e[t]!==void 0:uIe.call(e,t)}var dIe=fIe,hIe=X1,pIe="__lodash_hash_undefined__";function mIe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hIe&&e===void 0?pIe:e,this}var yIe=mIe,gIe=ZPe,vIe=tIe,bIe=aIe,xIe=dIe,_Ie=yIe;function rh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rh.prototype.clear=gIe;rh.prototype.delete=vIe;rh.prototype.get=bIe;rh.prototype.has=xIe;rh.prototype.set=_Ie;var wIe=rh;function SIe(){this.__data__=[],this.size=0}var EIe=SIe;function AIe(t,e){return t===e||t!==t&&e!==e}var uj=AIe,CIe=uj;function TIe(t,e){for(var r=t.length;r--;)if(CIe(t[r][0],e))return r;return-1}var J1=TIe,PIe=J1,IIe=Array.prototype,NIe=IIe.splice;function kIe(t){var e=this.__data__,r=PIe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():NIe.call(e,r,1),--this.size,!0}var OIe=kIe,RIe=J1;function jIe(t){var e=this.__data__,r=RIe(e,t);return r<0?void 0:e[r][1]}var $Ie=jIe,DIe=J1;function MIe(t){return DIe(this.__data__,t)>-1}var FIe=MIe,LIe=J1;function BIe(t,e){var r=this.__data__,n=LIe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var UIe=BIe,VIe=EIe,WIe=OIe,zIe=$Ie,GIe=FIe,qIe=UIe;function nh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nh.prototype.clear=VIe;nh.prototype.delete=WIe;nh.prototype.get=zIe;nh.prototype.has=GIe;nh.prototype.set=qIe;var Z1=nh,HIe=zc,KIe=Zo,YIe=HIe(KIe,"Map"),fj=YIe,G3=wIe,QIe=Z1,XIe=fj;function JIe(){this.size=0,this.__data__={hash:new G3,map:new(XIe||QIe),string:new G3}}var ZIe=JIe;function eNe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var tNe=eNe,rNe=tNe;function nNe(t,e){var r=t.__data__;return rNe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var eS=nNe,iNe=eS;function oNe(t){var e=iNe(this,t).delete(t);return this.size-=e?1:0,e}var sNe=oNe,aNe=eS;function lNe(t){return aNe(this,t).get(t)}var cNe=lNe,uNe=eS;function fNe(t){return uNe(this,t).has(t)}var dNe=fNe,hNe=eS;function pNe(t,e){var r=hNe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var mNe=pNe,yNe=ZIe,gNe=sNe,vNe=cNe,bNe=dNe,xNe=mNe;function ih(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ih.prototype.clear=yNe;ih.prototype.delete=gNe;ih.prototype.get=vNe;ih.prototype.has=bNe;ih.prototype.set=xNe;var dj=ih,CY=dj,_Ne="Expected a function";function hj(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_Ne);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(hj.Cache||CY),r}hj.Cache=CY;var wNe=hj,SNe=wNe,ENe=500;function ANe(t){var e=SNe(t,function(n){return r.size===ENe&&r.clear(),n}),r=e.cache;return e}var CNe=ANe,TNe=CNe,PNe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,INe=/\\(\\)?/g,NNe=TNe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(PNe,function(r,n,i,o){e.push(i?o.replace(INe,"$1"):n||r)}),e}),kNe=NNe;function ONe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var pj=ONe,q3=Bg,RNe=pj,jNe=Bn,$Ne=eh,DNe=1/0,H3=q3?q3.prototype:void 0,K3=H3?H3.toString:void 0;function TY(t){if(typeof t=="string")return t;if(jNe(t))return RNe(t,TY)+"";if($Ne(t))return K3?K3.call(t):"";var e=t+"";return e=="0"&&1/t==-DNe?"-0":e}var MNe=TY,FNe=MNe;function LNe(t){return t==null?"":FNe(t)}var PY=LNe,BNe=Bn,UNe=lj,VNe=kNe,WNe=PY;function zNe(t,e){return BNe(t)?t:UNe(t,e)?[t]:VNe(WNe(t))}var IY=zNe,GNe=eh,qNe=1/0;function HNe(t){if(typeof t=="string"||GNe(t))return t;var e=t+"";return e=="0"&&1/t==-qNe?"-0":e}var tS=HNe,KNe=IY,YNe=tS;function QNe(t,e){e=KNe(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[YNe(e[r++])];return r&&r==n?t:void 0}var mj=QNe,XNe=mj;function JNe(t,e,r){var n=t==null?void 0:XNe(t,e);return n===void 0?r:n}var NY=JNe;const Oi=ot(NY);function ZNe(t){return t==null}var eke=ZNe;const Xe=ot(eke);var tke=js,rke=Bn,nke=$s,ike="[object String]";function oke(t){return typeof t=="string"||!rke(t)&&nke(t)&&tke(t)==ike}var ske=oke;const Ug=ot(ske);var ake=js,lke=$s,cke="[object Number]";function uke(t){return typeof t=="number"||lke(t)&&ake(t)==cke}var kY=uke;const fke=ot(kY);var dke=kY;function hke(t){return dke(t)&&t!=+t}var pke=hke;const Vg=ot(pke);var no=function(e){return e===0?0:e>0?1:-1},Bl=function(e){return Ug(e)&&e.indexOf("%")===e.length-1},ne=function(e){return fke(e)&&!Vg(e)},dr=function(e){return ne(e)||Ug(e)},mke=0,Wg=function(e){var r=++mke;return"".concat(e||"").concat(r)},md=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(e)&&!Ug(e))return n;var o;if(Bl(e)){var s=e.indexOf("%");o=r*parseFloat(e.slice(0,s))/100}else o=+e;return Vg(o)&&(o=n),i&&o>r&&(o=r),o},zs=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},yke=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Qi=function(e,r){return ne(e)&&ne(r)?function(n){return e+n*(r-e)}:function(){return r}};function l_(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Oi(n,e))===r})}function hf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function qP(t){"@babel/helpers - typeof";return qP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qP(t)}var gke=["viewBox","children"],vke=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Y3=["points","pathLength"],$A={svg:gke,polygon:Y3,polyline:Y3},yj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c_=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),!th(n))return null;var i={};return Object.keys(n).forEach(function(o){yj.includes(o)&&(i[o]=r||function(s){return n[o](n,s)})}),i},bke=function(e,r,n){return function(i){return e(r,n,i),null}},u_=function(e,r,n){if(!th(e)||qP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];yj.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=bke(s,r,n))}),i},xke=["children"],_ke=["children"];function Q3(t,e){if(t==null)return{};var r=wke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function HP(t){"@babel/helpers - typeof";return HP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HP(t)}var X3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},ys=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},J3=null,DA=null,gj=function t(e){if(e===J3&&Array.isArray(DA))return DA;var r=[];return E.Children.forEach(e,function(n){Xe(n)||(Mx.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),DA=r,J3=e,r};function Ri(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return ys(i)}):n=[ys(e)],gj(t).forEach(function(i){var o=Oi(i,"type.displayName")||Oi(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function To(t,e){var r=Ri(t,e);return r&&r[0]}var Z3=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!ne(n)||n<=0||!ne(i)||i<=0)},Ske=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Eke=function(e){return e&&e.type&&Ug(e.type)&&Ske.indexOf(e.type)>=0},Ake=function(e){return e&&HP(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},Cke=function(e,r,n,i){var o,s=(o=$A==null?void 0:$A[i])!==null&&o!==void 0?o:[];return!Me(e)&&(i&&s.includes(r)||vke.includes(r))||n&&yj.includes(r)},qe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!th(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;Cke((a=i)===null||a===void 0?void 0:a[s],s,r,n)&&(o[s]=i[s])}),o},OY=function t(e,r){if(e===r)return!0;var n=E.Children.count(e);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return eB(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=e[i],s=r[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!eB(o,s))return!1}return!0},eB=function(e,r){if(Xe(e)&&Xe(r))return!0;if(!Xe(e)&&!Xe(r)){var n=e.props||{},i=n.children,o=Q3(n,xke),s=r.props||{},a=s.children,l=Q3(s,_ke);return i&&a?hf(o,l)&&OY(i,a):!i&&!a?hf(o,l):!1}return!1},tB=function(e,r){var n=[],i={};return gj(e).forEach(function(o,s){if(Eke(o))n.push(o);else if(o){var a=ys(o.type),l=r[a]||{},c=l.handler,u=l.once;if(c&&(!u||!i[a])){var f=c(o,a,s);n.push(f),i[a]=!0}}}),n},Tke=function(e){var r=e&&e.type;return r&&X3[r]?X3[r]:null},Pke=function(e,r){return gj(r).indexOf(e)},Ike=["children","width","height","viewBox","className","style","title","desc"];function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KP.apply(this,arguments)}function Nke(t,e){if(t==null)return{};var r=kke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function YP(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,c=Nke(t,Ike),u=i||{width:r,height:n,x:0,y:0},f=ct("recharts-surface",o);return k.createElement("svg",KP({},qe(c,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),k.createElement("title",null,a),k.createElement("desc",null,l),e)}var Oke=["children","className"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QP.apply(this,arguments)}function Rke(t,e){if(t==null)return{};var r=jke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Jt=k.forwardRef(function(t,e){var r=t.children,n=t.className,i=Rke(t,Oke),o=ct("recharts-layer",n);return k.createElement("g",QP({className:o},qe(i,!0),{ref:e}),r)}),pc=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function $ke(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var Dke=$ke,Mke=Dke;function Fke(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Mke(t,e,r)}var Lke=Fke,Bke="\\ud800-\\udfff",Uke="\\u0300-\\u036f",Vke="\\ufe20-\\ufe2f",Wke="\\u20d0-\\u20ff",zke=Uke+Vke+Wke,Gke="\\ufe0e\\ufe0f",qke="\\u200d",Hke=RegExp("["+qke+Bke+zke+Gke+"]");function Kke(t){return Hke.test(t)}var RY=Kke;function Yke(t){return t.split("")}var Qke=Yke,jY="\\ud800-\\udfff",Xke="\\u0300-\\u036f",Jke="\\ufe20-\\ufe2f",Zke="\\u20d0-\\u20ff",eOe=Xke+Jke+Zke,tOe="\\ufe0e\\ufe0f",rOe="["+jY+"]",XP="["+eOe+"]",JP="\\ud83c[\\udffb-\\udfff]",nOe="(?:"+XP+"|"+JP+")",$Y="[^"+jY+"]",DY="(?:\\ud83c[\\udde6-\\uddff]){2}",MY="[\\ud800-\\udbff][\\udc00-\\udfff]",iOe="\\u200d",FY=nOe+"?",LY="["+tOe+"]?",oOe="(?:"+iOe+"(?:"+[$Y,DY,MY].join("|")+")"+LY+FY+")*",sOe=LY+FY+oOe,aOe="(?:"+[$Y+XP+"?",XP,DY,MY,rOe].join("|")+")",lOe=RegExp(JP+"(?="+JP+")|"+aOe+sOe,"g");function cOe(t){return t.match(lOe)||[]}var uOe=cOe,fOe=Qke,dOe=RY,hOe=uOe;function pOe(t){return dOe(t)?hOe(t):fOe(t)}var mOe=pOe,yOe=Lke,gOe=RY,vOe=mOe,bOe=PY;function xOe(t){return function(e){e=bOe(e);var r=gOe(e)?vOe(e):void 0,n=r?r[0]:e.charAt(0),i=r?yOe(r,1).join(""):e.slice(1);return n[t]()+i}}var _Oe=xOe,wOe=_Oe,SOe=wOe("toUpperCase"),EOe=SOe;const rS=ot(EOe);function St(t){return function(){return t}}const BY=Math.cos,f_=Math.sin,ho=Math.sqrt,d_=Math.PI,nS=2*d_,ZP=Math.PI,eI=2*ZP,Pl=1e-6,AOe=eI-Pl;function UY(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function COe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return UY;const r=10**e;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class TOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?UY:COe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,o,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,r,n,i,o){if(e=+e,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=n-e,c=i-r,u=s-e,f=a-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Pl)if(!(Math.abs(f*l-c*u)>Pl)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-s,m=i-a,y=l*l+c*c,g=p*p+m*m,b=Math.sqrt(y),v=Math.sqrt(h),x=o*Math.tan((ZP-Math.acos((y+h-g)/(2*b*v)))/2),S=x/v,_=x/b;Math.abs(S-1)>Pl&&this._append`L${e+S*u},${r+S*f}`,this._append`A${o},${o},0,0,${+(f*p>u*m)},${this._x1=e+_*l},${this._y1=r+_*c}`}}arc(e,r,n,i,o,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=e+a,u=r+l,f=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Pl||Math.abs(this._y1-u)>Pl)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%eI+eI),h>AOe?this._append`A${n},${n},0,1,${f},${e-a},${r-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=u}`:h>Pl&&this._append`A${n},${n},0,${+(h>=ZP)},${f},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function vj(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new TOe(e)}function bj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function VY(t){this._context=t}VY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function iS(t){return new VY(t)}function WY(t){return t[0]}function zY(t){return t[1]}function GY(t,e){var r=St(!0),n=null,i=iS,o=null,s=vj(a);t=typeof t=="function"?t:t===void 0?WY:St(t),e=typeof e=="function"?e:e===void 0?zY:St(e);function a(l){var c,u=(l=bj(l)).length,f,h=!1,p;for(n==null&&(o=i(p=s())),c=0;c<=u;++c)!(c<u&&r(f=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,l),+e(f,c,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:St(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:St(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:St(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(o=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=o=null:o=i(n=l),a):n},a}function Qv(t,e,r){var n=null,i=St(!0),o=null,s=iS,a=null,l=vj(c);t=typeof t=="function"?t:t===void 0?WY:St(+t),e=typeof e=="function"?e:St(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?zY:St(+r);function c(f){var h,p,m,y=(f=bj(f)).length,g,b=!1,v,x=new Array(y),S=new Array(y);for(o==null&&(a=s(v=l())),h=0;h<=y;++h){if(!(h<y&&i(g=f[h],h,f))===b)if(b=!b)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=h-1;m>=p;--m)a.point(x[m],S[m]);a.lineEnd(),a.areaEnd()}b&&(x[h]=+t(g,h,f),S[h]=+e(g,h,f),a.point(n?+n(g,h,f):x[h],r?+r(g,h,f):S[h]))}if(v)return a=null,v+""||null}function u(){return GY().defined(i).curve(s).context(o)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:St(+f),n=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:St(+f),c):t},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:St(+f),c):n},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:St(+f),r=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:St(+f),c):e},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:St(+f),c):r},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(r)},c.lineX1=function(){return u().x(n).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:St(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),c):s},c.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),c):o},c}class qY{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function POe(t){return new qY(t,!0)}function IOe(t){return new qY(t,!1)}const xj={draw(t,e){const r=ho(e/d_);t.moveTo(r,0),t.arc(0,0,r,0,nS)}},NOe={draw(t,e){const r=ho(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},HY=ho(1/3),kOe=HY*2,OOe={draw(t,e){const r=ho(e/kOe),n=r*HY;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},ROe={draw(t,e){const r=ho(e),n=-r/2;t.rect(n,n,r,r)}},jOe=.8908130915292852,KY=f_(d_/10)/f_(7*d_/10),$Oe=f_(nS/10)*KY,DOe=-BY(nS/10)*KY,MOe={draw(t,e){const r=ho(e*jOe),n=$Oe*r,i=DOe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let o=1;o<5;++o){const s=nS*o/5,a=BY(s),l=f_(s);t.lineTo(l*r,-a*r),t.lineTo(a*n-l*i,l*n+a*i)}t.closePath()}},MA=ho(3),FOe={draw(t,e){const r=-ho(e/(MA*3));t.moveTo(0,r*2),t.lineTo(-MA*r,-r),t.lineTo(MA*r,-r),t.closePath()}},fi=-.5,di=ho(3)/2,tI=1/ho(12),LOe=(tI/2+1)*3,BOe={draw(t,e){const r=ho(e/LOe),n=r/2,i=r*tI,o=n,s=r*tI+r,a=-o,l=s;t.moveTo(n,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(fi*n-di*i,di*n+fi*i),t.lineTo(fi*o-di*s,di*o+fi*s),t.lineTo(fi*a-di*l,di*a+fi*l),t.lineTo(fi*n+di*i,fi*i-di*n),t.lineTo(fi*o+di*s,fi*s-di*o),t.lineTo(fi*a+di*l,fi*l-di*a),t.closePath()}};function UOe(t,e){let r=null,n=vj(i);t=typeof t=="function"?t:St(t||xj),e=typeof e=="function"?e:St(e===void 0?64:+e);function i(){let o;if(r||(r=o=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:St(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:St(+o),i):e},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function h_(){}function p_(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function YY(t){this._context=t}YY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VOe(t){return new YY(t)}function QY(t){this._context=t}QY.prototype={areaStart:h_,areaEnd:h_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:p_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WOe(t){return new QY(t)}function XY(t){this._context=t}XY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:p_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zOe(t){return new XY(t)}function JY(t){this._context=t}JY.prototype={areaStart:h_,areaEnd:h_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function GOe(t){return new JY(t)}function rB(t){return t<0?-1:1}function nB(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(rB(o)+rB(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function iB(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function FA(t,e,r){var n=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-n)/3;t._context.bezierCurveTo(n+a,i+a*e,o-a,s-a*r,o,s)}function m_(t){this._context=t}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FA(this,this._t0,iB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,FA(this,iB(this,r=nB(this,t,e)),r);break;default:FA(this,this._t0,r=nB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function ZY(t){this._context=new eQ(t)}(ZY.prototype=Object.create(m_.prototype)).point=function(t,e){m_.prototype.point.call(this,e,t)};function eQ(t){this._context=t}eQ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}};function qOe(t){return new m_(t)}function HOe(t){return new ZY(t)}function tQ(t){this._context=t}tQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=oB(t),i=oB(e),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function oB(t){var e,r=t.length-1,n,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function KOe(t){return new tQ(t)}function oS(t,e){this._context=t,this._t=e}oS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function YOe(t){return new oS(t,.5)}function QOe(t){return new oS(t,0)}function XOe(t){return new oS(t,1)}function yd(t,e){if((s=t.length)>1)for(var r=1,n,i,o=t[e[0]],s,a=o.length;r<s;++r)for(i=o,o=t[e[r]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function rI(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function JOe(t,e){return t[e]}function ZOe(t){const e=[];return e.key=t,e}function eRe(){var t=St([]),e=rI,r=yd,n=JOe;function i(o){var s=Array.from(t.apply(this,arguments),ZOe),a,l=s.length,c=-1,u;for(const f of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+n(f,s[a].key,c,o)]).data=f;for(a=0,u=bj(e(s));a<l;++a)s[u[a]].index=a;return r(s,u),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:St(Array.from(o)),i):t},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:St(+o),i):n},i.order=function(o){return arguments.length?(e=o==null?rI:typeof o=="function"?o:St(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(r=o??yd,i):r},i}function tRe(t,e){if((n=t.length)>0){for(var r,n,i=0,o=t[0].length,s;i<o;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}yd(t,e)}}function rRe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,o=n.length;r<o;++r){for(var s=0,a=0;s<i;++s)a+=t[s][r][1]||0;n[r][1]+=n[r][0]=-a/2}yd(t,e)}}function nRe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,o,s;n<o;++n){for(var a=0,l=0,c=0;a<s;++a){for(var u=t[e[a]],f=u[n][1]||0,h=u[n-1][1]||0,p=(f-h)/2,m=0;m<a;++m){var y=t[e[m]],g=y[n][1]||0,b=y[n-1][1]||0;p+=g-b}l+=f,c+=p*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,yd(t,e)}}function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}var iRe=["type","size","sizeType"];function nI(){return nI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nI.apply(this,arguments)}function sB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(r),!0).forEach(function(n){oRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oRe(t,e,r){return e=sRe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sRe(t){var e=aRe(t,"string");return Qm(e)==="symbol"?e:String(e)}function aRe(t,e){if(Qm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lRe(t,e){if(t==null)return{};var r=cRe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cRe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var rQ={symbolCircle:xj,symbolCross:NOe,symbolDiamond:OOe,symbolSquare:ROe,symbolStar:MOe,symbolTriangle:FOe,symbolWye:BOe},uRe=Math.PI/180,fRe=function(e){var r="symbol".concat(rS(e));return rQ[r]||xj},dRe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*uRe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hRe=function(e,r){rQ["symbol".concat(rS(e))]=r},_j=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=lRe(e,iRe),c=aB(aB({},l),{},{type:n,size:o,sizeType:a}),u=function(){var g=fRe(n),b=UOe().type(g).size(dRe(o,a,n));return b()},f=c.className,h=c.cx,p=c.cy,m=qe(c,!0);return h===+h&&p===+p&&o===+o?k.createElement("path",nI({},m,{className:ct("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};_j.registerSymbol=hRe;function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iI.apply(this,arguments)}function lB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pRe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(r),!0).forEach(function(n){Xm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nQ(n.key),n)}}function yRe(t,e,r){return e&&cB(t.prototype,e),r&&cB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oI(t,e)}function vRe(t){var e=_Re();return function(){var n=y_(t),i;if(e){var o=y_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bRe(this,i)}}function bRe(t,e){if(e&&(gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xRe(t)}function xRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y_(t){return y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y_(t)}function Xm(t,e,r){return e=nQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nQ(t){var e=wRe(t,"string");return gd(e)==="symbol"?e:String(e)}function wRe(t,e){if(gd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(gd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hi=32,wj=function(t){gRe(r,t);var e=vRe(r);function r(){return mRe(this,r),e.apply(this,arguments)}return yRe(r,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,s=hi/2,a=hi/6,l=hi/3,c=i.inactive?o:i.color;if(i.type==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:hi,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(hi,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return k.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(hi/8,"h").concat(hi,"v").concat(hi*3/4,"h").concat(-hi,"z"),className:"recharts-legend-icon"});if(k.isValidElement(i.legendIcon)){var u=pRe({},i);return delete u.legendIcon,k.cloneElement(i.legendIcon,u)}return k.createElement(_j,{fill:c,cx:s,cy:s,size:hi,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,s=o.payload,a=o.iconSize,l=o.layout,c=o.formatter,u=o.inactiveColor,f={x:0,y:0,width:hi,height:hi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,y){var g,b=m.formatter||c,v=ct((g={"recharts-legend-item":!0},Xm(g,"legend-item-".concat(y),!0),Xm(g,"inactive",m.inactive),g));if(m.type==="none")return null;var x=Me(m.value)?null:m.value;pc(!Me(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=m.inactive?u:m.color;return k.createElement("li",iI({className:v,style:h,key:"legend-item-".concat(y)},u_(i.props,m,y)),k.createElement(YP,{width:a,height:a,viewBox:f,style:p},i.renderIcon(m)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},b?b(x,m,y):x))})}},{key:"render",value:function(){var i=this.props,o=i.payload,s=i.layout,a=i.align;if(!o||!o.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),r}(E.PureComponent);Xm(wj,"displayName","Legend");Xm(wj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var SRe=Z1;function ERe(){this.__data__=new SRe,this.size=0}var ARe=ERe;function CRe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var TRe=CRe;function PRe(t){return this.__data__.get(t)}var IRe=PRe;function NRe(t){return this.__data__.has(t)}var kRe=NRe,ORe=Z1,RRe=fj,jRe=dj,$Re=200;function DRe(t,e){var r=this.__data__;if(r instanceof ORe){var n=r.__data__;if(!RRe||n.length<$Re-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new jRe(n)}return r.set(t,e),this.size=r.size,this}var MRe=DRe,FRe=Z1,LRe=ARe,BRe=TRe,URe=IRe,VRe=kRe,WRe=MRe;function oh(t){var e=this.__data__=new FRe(t);this.size=e.size}oh.prototype.clear=LRe;oh.prototype.delete=BRe;oh.prototype.get=URe;oh.prototype.has=VRe;oh.prototype.set=WRe;var iQ=oh,zRe="__lodash_hash_undefined__";function GRe(t){return this.__data__.set(t,zRe),this}var qRe=GRe;function HRe(t){return this.__data__.has(t)}var KRe=HRe,YRe=dj,QRe=qRe,XRe=KRe;function g_(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new YRe;++e<r;)this.add(t[e])}g_.prototype.add=g_.prototype.push=QRe;g_.prototype.has=XRe;var oQ=g_;function JRe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var sQ=JRe;function ZRe(t,e){return t.has(e)}var aQ=ZRe,eje=oQ,tje=sQ,rje=aQ,nje=1,ije=2;function oje(t,e,r,n,i,o){var s=r&nje,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,p=r&ije?new eje:void 0;for(o.set(t,e),o.set(e,t);++f<a;){var m=t[f],y=e[f];if(n)var g=s?n(y,m,f,e,t,o):n(m,y,f,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!tje(e,function(b,v){if(!rje(p,v)&&(m===b||i(m,b,r,n,o)))return p.push(v)})){h=!1;break}}else if(!(m===y||i(m,y,r,n,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var lQ=oje,sje=Zo,aje=sje.Uint8Array,lje=aje;function cje(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var uje=cje;function fje(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Sj=fje,uB=Bg,fB=lje,dje=uj,hje=lQ,pje=uje,mje=Sj,yje=1,gje=2,vje="[object Boolean]",bje="[object Date]",xje="[object Error]",_je="[object Map]",wje="[object Number]",Sje="[object RegExp]",Eje="[object Set]",Aje="[object String]",Cje="[object Symbol]",Tje="[object ArrayBuffer]",Pje="[object DataView]",dB=uB?uB.prototype:void 0,LA=dB?dB.valueOf:void 0;function Ije(t,e,r,n,i,o,s){switch(r){case Pje:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Tje:return!(t.byteLength!=e.byteLength||!o(new fB(t),new fB(e)));case vje:case bje:case wje:return dje(+t,+e);case xje:return t.name==e.name&&t.message==e.message;case Sje:case Aje:return t==e+"";case _je:var a=pje;case Eje:var l=n&yje;if(a||(a=mje),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=gje,s.set(t,e);var u=hje(a(t),a(e),n,i,o,s);return s.delete(t),u;case Cje:if(LA)return LA.call(t)==LA.call(e)}return!1}var Nje=Ije;function kje(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var cQ=kje,Oje=cQ,Rje=Bn;function jje(t,e,r){var n=e(t);return Rje(t)?n:Oje(n,r(t))}var $je=jje;function Dje(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Mje=Dje;function Fje(){return[]}var Lje=Fje,Bje=Mje,Uje=Lje,Vje=Object.prototype,Wje=Vje.propertyIsEnumerable,hB=Object.getOwnPropertySymbols,zje=hB?function(t){return t==null?[]:(t=Object(t),Bje(hB(t),function(e){return Wje.call(t,e)}))}:Uje,Gje=zje;function qje(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Hje=qje,Kje=js,Yje=$s,Qje="[object Arguments]";function Xje(t){return Yje(t)&&Kje(t)==Qje}var Jje=Xje,pB=Jje,Zje=$s,uQ=Object.prototype,e$e=uQ.hasOwnProperty,t$e=uQ.propertyIsEnumerable,r$e=pB(function(){return arguments}())?pB:function(t){return Zje(t)&&e$e.call(t,"callee")&&!t$e.call(t,"callee")},Ej=r$e,v_={exports:{}};function n$e(){return!1}var i$e=n$e;v_.exports;(function(t,e){var r=Zo,n=i$e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?r.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;t.exports=c})(v_,v_.exports);var fQ=v_.exports,o$e=9007199254740991,s$e=/^(?:0|[1-9]\d*)$/;function a$e(t,e){var r=typeof t;return e=e??o$e,!!e&&(r=="number"||r!="symbol"&&s$e.test(t))&&t>-1&&t%1==0&&t<e}var Aj=a$e,l$e=9007199254740991;function c$e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=l$e}var Cj=c$e,u$e=js,f$e=Cj,d$e=$s,h$e="[object Arguments]",p$e="[object Array]",m$e="[object Boolean]",y$e="[object Date]",g$e="[object Error]",v$e="[object Function]",b$e="[object Map]",x$e="[object Number]",_$e="[object Object]",w$e="[object RegExp]",S$e="[object Set]",E$e="[object String]",A$e="[object WeakMap]",C$e="[object ArrayBuffer]",T$e="[object DataView]",P$e="[object Float32Array]",I$e="[object Float64Array]",N$e="[object Int8Array]",k$e="[object Int16Array]",O$e="[object Int32Array]",R$e="[object Uint8Array]",j$e="[object Uint8ClampedArray]",$$e="[object Uint16Array]",D$e="[object Uint32Array]",Tt={};Tt[P$e]=Tt[I$e]=Tt[N$e]=Tt[k$e]=Tt[O$e]=Tt[R$e]=Tt[j$e]=Tt[$$e]=Tt[D$e]=!0;Tt[h$e]=Tt[p$e]=Tt[C$e]=Tt[m$e]=Tt[T$e]=Tt[y$e]=Tt[g$e]=Tt[v$e]=Tt[b$e]=Tt[x$e]=Tt[_$e]=Tt[w$e]=Tt[S$e]=Tt[E$e]=Tt[A$e]=!1;function M$e(t){return d$e(t)&&f$e(t.length)&&!!Tt[u$e(t)]}var F$e=M$e;function L$e(t){return function(e){return t(e)}}var dQ=L$e,b_={exports:{}};b_.exports;(function(t,e){var r=SY,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,s=o&&r.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(b_,b_.exports);var B$e=b_.exports,U$e=F$e,V$e=dQ,mB=B$e,yB=mB&&mB.isTypedArray,W$e=yB?V$e(yB):U$e,hQ=W$e,z$e=Hje,G$e=Ej,q$e=Bn,H$e=fQ,K$e=Aj,Y$e=hQ,Q$e=Object.prototype,X$e=Q$e.hasOwnProperty;function J$e(t,e){var r=q$e(t),n=!r&&G$e(t),i=!r&&!n&&H$e(t),o=!r&&!n&&!i&&Y$e(t),s=r||n||i||o,a=s?z$e(t.length,String):[],l=a.length;for(var c in t)(e||X$e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||K$e(c,l)))&&a.push(c);return a}var Z$e=J$e,e2e=Object.prototype;function t2e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||e2e;return t===r}var r2e=t2e;function n2e(t,e){return function(r){return t(e(r))}}var pQ=n2e,i2e=pQ,o2e=i2e(Object.keys,Object),s2e=o2e,a2e=r2e,l2e=s2e,c2e=Object.prototype,u2e=c2e.hasOwnProperty;function f2e(t){if(!a2e(t))return l2e(t);var e=[];for(var r in Object(t))u2e.call(t,r)&&r!="constructor"&&e.push(r);return e}var d2e=f2e,h2e=cj,p2e=Cj;function m2e(t){return t!=null&&p2e(t.length)&&!h2e(t)}var zg=m2e,y2e=Z$e,g2e=d2e,v2e=zg;function b2e(t){return v2e(t)?y2e(t):g2e(t)}var sS=b2e,x2e=$je,_2e=Gje,w2e=sS;function S2e(t){return x2e(t,w2e,_2e)}var E2e=S2e,gB=E2e,A2e=1,C2e=Object.prototype,T2e=C2e.hasOwnProperty;function P2e(t,e,r,n,i,o){var s=r&A2e,a=gB(t),l=a.length,c=gB(e),u=c.length;if(l!=u&&!s)return!1;for(var f=l;f--;){var h=a[f];if(!(s?h in e:T2e.call(e,h)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=s;++f<l;){h=a[f];var b=t[h],v=e[h];if(n)var x=s?n(v,b,h,e,t,o):n(b,v,h,t,e,o);if(!(x===void 0?b===v||i(b,v,r,n,o):x)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var S=t.constructor,_=e.constructor;S!=_&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return o.delete(t),o.delete(e),y}var I2e=P2e,N2e=zc,k2e=Zo,O2e=N2e(k2e,"DataView"),R2e=O2e,j2e=zc,$2e=Zo,D2e=j2e($2e,"Promise"),M2e=D2e,F2e=zc,L2e=Zo,B2e=F2e(L2e,"Set"),mQ=B2e,U2e=zc,V2e=Zo,W2e=U2e(V2e,"WeakMap"),z2e=W2e,sI=R2e,aI=fj,lI=M2e,cI=mQ,uI=z2e,yQ=js,sh=AY,vB="[object Map]",G2e="[object Object]",bB="[object Promise]",xB="[object Set]",_B="[object WeakMap]",wB="[object DataView]",q2e=sh(sI),H2e=sh(aI),K2e=sh(lI),Y2e=sh(cI),Q2e=sh(uI),Il=yQ;(sI&&Il(new sI(new ArrayBuffer(1)))!=wB||aI&&Il(new aI)!=vB||lI&&Il(lI.resolve())!=bB||cI&&Il(new cI)!=xB||uI&&Il(new uI)!=_B)&&(Il=function(t){var e=yQ(t),r=e==G2e?t.constructor:void 0,n=r?sh(r):"";if(n)switch(n){case q2e:return wB;case H2e:return vB;case K2e:return bB;case Y2e:return xB;case Q2e:return _B}return e});var X2e=Il,BA=iQ,J2e=lQ,Z2e=Nje,eDe=I2e,SB=X2e,EB=Bn,AB=fQ,tDe=hQ,rDe=1,CB="[object Arguments]",TB="[object Array]",Xv="[object Object]",nDe=Object.prototype,PB=nDe.hasOwnProperty;function iDe(t,e,r,n,i,o){var s=EB(t),a=EB(e),l=s?TB:SB(t),c=a?TB:SB(e);l=l==CB?Xv:l,c=c==CB?Xv:c;var u=l==Xv,f=c==Xv,h=l==c;if(h&&AB(t)){if(!AB(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new BA),s||tDe(t)?J2e(t,e,r,n,i,o):Z2e(t,e,l,r,n,i,o);if(!(r&rDe)){var p=u&&PB.call(t,"__wrapped__"),m=f&&PB.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,g=m?e.value():e;return o||(o=new BA),i(y,g,r,n,o)}}return h?(o||(o=new BA),eDe(t,e,r,n,i,o)):!1}var oDe=iDe,sDe=oDe,IB=$s;function gQ(t,e,r,n,i){return t===e?!0:t==null||e==null||!IB(t)&&!IB(e)?t!==t&&e!==e:sDe(t,e,r,n,gQ,i)}var Tj=gQ,aDe=iQ,lDe=Tj,cDe=1,uDe=2;function fDe(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=r[i];var l=a[0],c=t[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var f=new aDe;if(n)var h=n(c,u,l,t,e,f);if(!(h===void 0?lDe(u,c,cDe|uDe,n,f):h))return!1}}return!0}var dDe=fDe,hDe=al;function pDe(t){return t===t&&!hDe(t)}var vQ=pDe,mDe=vQ,yDe=sS;function gDe(t){for(var e=yDe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,mDe(i)]}return e}var vDe=gDe;function bDe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var bQ=bDe,xDe=dDe,_De=vDe,wDe=bQ;function SDe(t){var e=_De(t);return e.length==1&&e[0][2]?wDe(e[0][0],e[0][1]):function(r){return r===t||xDe(r,t,e)}}var EDe=SDe;function ADe(t,e){return t!=null&&e in Object(t)}var CDe=ADe,TDe=IY,PDe=Ej,IDe=Bn,NDe=Aj,kDe=Cj,ODe=tS;function RDe(t,e,r){e=TDe(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=ODe(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&kDe(i)&&NDe(s,i)&&(IDe(t)||PDe(t)))}var jDe=RDe,$De=CDe,DDe=jDe;function MDe(t,e){return t!=null&&DDe(t,e,$De)}var FDe=MDe,LDe=Tj,BDe=NY,UDe=FDe,VDe=lj,WDe=vQ,zDe=bQ,GDe=tS,qDe=1,HDe=2;function KDe(t,e){return VDe(t)&&WDe(e)?zDe(GDe(t),e):function(r){var n=BDe(r,t);return n===void 0&&n===e?UDe(r,t):LDe(e,n,qDe|HDe)}}var YDe=KDe;function QDe(t){return t}var ah=QDe;function XDe(t){return function(e){return e==null?void 0:e[t]}}var JDe=XDe,ZDe=mj;function eMe(t){return function(e){return ZDe(e,t)}}var tMe=eMe,rMe=JDe,nMe=tMe,iMe=lj,oMe=tS;function sMe(t){return iMe(t)?rMe(oMe(t)):nMe(t)}var aMe=sMe,lMe=EDe,cMe=YDe,uMe=ah,fMe=Bn,dMe=aMe;function hMe(t){return typeof t=="function"?t:t==null?uMe:typeof t=="object"?fMe(t)?cMe(t[0],t[1]):lMe(t):dMe(t)}var ll=hMe;function pMe(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var xQ=pMe;function mMe(t){return t!==t}var yMe=mMe;function gMe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var vMe=gMe,bMe=xQ,xMe=yMe,_Me=vMe;function wMe(t,e,r){return e===e?_Me(t,e,r):bMe(t,xMe,r)}var SMe=wMe,EMe=SMe;function AMe(t,e){var r=t==null?0:t.length;return!!r&&EMe(t,e,0)>-1}var CMe=AMe;function TMe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var PMe=TMe;function IMe(){}var NMe=IMe,UA=mQ,kMe=NMe,OMe=Sj,RMe=1/0,jMe=UA&&1/OMe(new UA([,-0]))[1]==RMe?function(t){return new UA(t)}:kMe,$Me=jMe,DMe=oQ,MMe=CMe,FMe=PMe,LMe=aQ,BMe=$Me,UMe=Sj,VMe=200;function WMe(t,e,r){var n=-1,i=MMe,o=t.length,s=!0,a=[],l=a;if(r)s=!1,i=FMe;else if(o>=VMe){var c=e?null:BMe(t);if(c)return UMe(c);s=!1,i=LMe,l=new DMe}else l=e?[]:a;e:for(;++n<o;){var u=t[n],f=e?e(u):u;if(u=r||u!==0?u:0,s&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),a.push(u)}else i(l,f,r)||(l!==a&&l.push(f),a.push(u))}return a}var zMe=WMe,GMe=ll,qMe=zMe;function HMe(t,e){return t&&t.length?qMe(t,GMe(e)):[]}var KMe=HMe;const NB=ot(KMe);function _Q(t,e,r){return e===!0?NB(t,r):Me(e)?NB(t,e):t}function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}var YMe=["ref"];function kB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kB(Object(r),!0).forEach(function(n){aS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SQ(n.key),n)}}function XMe(t,e,r){return e&&OB(t.prototype,e),r&&OB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function JMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fI(t,e)}function ZMe(t){var e=tFe();return function(){var n=x_(t),i;if(e){var o=x_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return eFe(this,i)}}function eFe(t,e){if(e&&(vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wQ(t)}function wQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x_(t){return x_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x_(t)}function aS(t,e,r){return e=SQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SQ(t){var e=rFe(t,"string");return vd(e)==="symbol"?e:String(e)}function rFe(t,e){if(vd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nFe(t,e){if(t==null)return{};var r=iFe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iFe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function oFe(t){return t.value}function sFe(t,e){if(k.isValidElement(t))return k.cloneElement(t,e);if(typeof t=="function")return k.createElement(t,e);e.ref;var r=nFe(e,YMe);return k.createElement(wj,r)}var RB=1,Jm=function(t){JMe(r,t);var e=ZMe(r);function r(){var n;QMe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),aS(wQ(n),"lastBoundingBox",{width:-1,height:-1}),n}return XMe(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.lastBoundingBox.width)>RB||Math.abs(o.height-this.lastBoundingBox.height)>RB)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o))}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?pl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,s=o.layout,a=o.align,l=o.verticalAlign,c=o.margin,u=o.chartWidth,f=o.chartHeight,h,p;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();p={top:((f||0)-y.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return pl(pl({},h),p)}},{key:"render",value:function(){var i=this,o=this.props,s=o.content,a=o.width,l=o.height,c=o.wrapperStyle,u=o.payloadUniqBy,f=o.payload,h=pl(pl({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return k.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){i.wrapperNode=m}},sFe(s,pl(pl({},this.props),{},{payload:_Q(f,u,oFe)})))}}],[{key:"getWithHeight",value:function(i,o){var s=i.props.layout;return s==="vertical"&&ne(i.props.height)?{height:i.props.height}:s==="horizontal"?{width:i.props.width||o}:null}}]),r}(E.PureComponent);aS(Jm,"displayName","Legend");aS(Jm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var jB=Bg,aFe=Ej,lFe=Bn,$B=jB?jB.isConcatSpreadable:void 0;function cFe(t){return lFe(t)||aFe(t)||!!($B&&t&&t[$B])}var uFe=cFe,fFe=cQ,dFe=uFe;function EQ(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=dFe),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?EQ(a,e-1,r,n,i):fFe(i,a):n||(i[i.length]=a)}return i}var AQ=EQ;function hFe(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++i];if(r(o[l],l,o)===!1)break}return e}}var pFe=hFe,mFe=pFe,yFe=mFe(),gFe=yFe,vFe=gFe,bFe=sS;function xFe(t,e){return t&&vFe(t,e,bFe)}var CQ=xFe,_Fe=zg;function wFe(t,e){return function(r,n){if(r==null)return r;if(!_Fe(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var SFe=wFe,EFe=CQ,AFe=SFe,CFe=AFe(EFe),Pj=CFe,TFe=Pj,PFe=zg;function IFe(t,e){var r=-1,n=PFe(t)?Array(t.length):[];return TFe(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var TQ=IFe;function NFe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var kFe=NFe,DB=eh;function OFe(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=DB(t),s=e!==void 0,a=e===null,l=e===e,c=DB(e);if(!a&&!c&&!o&&t>e||o&&s&&l&&!a&&!c||n&&s&&l||!r&&l||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!l)return-1}return 0}var RFe=OFe,jFe=RFe;function $Fe(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;++n<s;){var l=jFe(i[n],o[n]);if(l){if(n>=a)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return t.index-e.index}var DFe=$Fe,VA=pj,MFe=mj,FFe=ll,LFe=TQ,BFe=kFe,UFe=dQ,VFe=DFe,WFe=ah,zFe=Bn;function GFe(t,e,r){e.length?e=VA(e,function(o){return zFe(o)?function(s){return MFe(s,o.length===1?o[0]:o)}:o}):e=[WFe];var n=-1;e=VA(e,UFe(FFe));var i=LFe(t,function(o,s,a){var l=VA(e,function(c){return c(o)});return{criteria:l,index:++n,value:o}});return BFe(i,function(o,s){return VFe(o,s,r)})}var qFe=GFe;function HFe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var KFe=HFe,YFe=KFe,MB=Math.max;function QFe(t,e,r){return e=MB(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=MB(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),YFe(t,this,a)}}var XFe=QFe;function JFe(t){return function(){return t}}var ZFe=JFe,eLe=zc,tLe=function(){try{var t=eLe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),PQ=tLe,rLe=ZFe,FB=PQ,nLe=ah,iLe=FB?function(t,e){return FB(t,"toString",{configurable:!0,enumerable:!1,value:rLe(e),writable:!0})}:nLe,oLe=iLe,sLe=800,aLe=16,lLe=Date.now;function cLe(t){var e=0,r=0;return function(){var n=lLe(),i=aLe-(n-r);if(r=n,i>0){if(++e>=sLe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var uLe=cLe,fLe=oLe,dLe=uLe,hLe=dLe(fLe),pLe=hLe,mLe=ah,yLe=XFe,gLe=pLe;function vLe(t,e){return gLe(yLe(t,e,mLe),t+"")}var bLe=vLe,xLe=uj,_Le=zg,wLe=Aj,SLe=al;function ELe(t,e,r){if(!SLe(r))return!1;var n=typeof e;return(n=="number"?_Le(r)&&wLe(e,r.length):n=="string"&&e in r)?xLe(r[e],t):!1}var lS=ELe,ALe=AQ,CLe=qFe,TLe=bLe,LB=lS,PLe=TLe(function(t,e){if(t==null)return[];var r=e.length;return r>1&&LB(t,e[0],e[1])?e=[]:r>2&&LB(e[0],e[1],e[2])&&(e=[e[0]]),CLe(t,ALe(e,1),[])}),ILe=PLe;const Ij=ot(ILe);function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function NLe(t,e){return jLe(t)||RLe(t,e)||OLe(t,e)||kLe()}function kLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OLe(t,e){if(t){if(typeof t=="string")return BB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BB(t,e)}}function BB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RLe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function jLe(t){if(Array.isArray(t))return t}function UB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(r),!0).forEach(function(n){$Le(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Le(t,e,r){return e=DLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DLe(t){var e=MLe(t,"string");return Zm(e)==="symbol"?e:String(e)}function MLe(t,e){if(Zm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FLe(t){return Array.isArray(t)&&dr(t[0])&&dr(t[1])?t.join(" ~ "):t}var LLe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,y=e.label,g=e.labelFormatter,b=function(){if(u&&u.length){var I={padding:0,margin:0},T=(h?Ij(u,h):u).map(function(P,O){if(P.type==="none")return null;var N=WA({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},a),R=P.formatter||f||FLe,B=P.value,V=P.name,F=B,$=V;if(R&&F!=null&&$!=null){var L=R(B,V,P,O,u);if(Array.isArray(L)){var z=NLe(L,2);F=z[0],$=z[1]}else F=L}return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:N},dr($)?k.createElement("span",{className:"recharts-tooltip-item-name"},$):null,dr($)?k.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,k.createElement("span",{className:"recharts-tooltip-item-value"},F),k.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:I},T)}return null},v=WA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=WA({margin:0},c),S=!Xe(y),_=S?y:"",w=ct("recharts-default-tooltip",p),A=ct("recharts-tooltip-label",m);return S&&g&&u!==void 0&&u!==null&&(_=g(y,u)),k.createElement("div",{className:w,style:v},k.createElement("p",{className:A,style:x},k.isValidElement(_)?_:"".concat(_)),b())},IQ={exports:{}},BLe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ULe=BLe,VLe=ULe;function NQ(){}function kQ(){}kQ.resetWarningCache=NQ;var WLe=function(){function t(n,i,o,s,a,l){if(l!==VLe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:kQ,resetWarningCache:NQ};return r.PropTypes=r,r};IQ.exports=WLe();var zLe=IQ.exports;const Pe=ot(zLe);var GLe=Object.getOwnPropertyNames,qLe=Object.getOwnPropertySymbols,HLe=Object.prototype.hasOwnProperty;function VB(t,e){return function(n,i,o){return t(n,i,o)&&e(n,i,o)}}function Jv(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var o=i.cache,s=o.get(r),a=o.get(n);if(s&&a)return s===n&&a===r;o.set(r,n),o.set(n,r);var l=t(r,n,i);return o.delete(r),o.delete(n),l}}function WB(t){return GLe(t).concat(qLe(t))}var OQ=Object.hasOwn||function(t,e){return HLe.call(t,e)};function lh(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var RQ="_owner",zB=Object.getOwnPropertyDescriptor,GB=Object.keys;function KLe(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function YLe(t,e){return lh(t.getTime(),e.getTime())}function qB(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),c=!1,u=0;(a=l.next())&&!a.done;){var f=s.value,h=f[0],p=f[1],m=a.value,y=m[0],g=m[1];!c&&!n[u]&&(c=r.equals(h,y,o,u,t,e,r)&&r.equals(p,g,h,y,t,e,r))&&(n[u]=!0),u++}if(!c)return!1;o++}return!0}function QLe(t,e,r){var n=GB(t),i=n.length;if(GB(e).length!==i)return!1;for(var o;i-- >0;)if(o=n[i],o===RQ&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!OQ(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Bh(t,e,r){var n=WB(t),i=n.length;if(WB(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=n[i],o===RQ&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!OQ(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(s=zB(t,o),a=zB(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function XLe(t,e){return lh(t.valueOf(),e.valueOf())}function JLe(t,e){return t.source===e.source&&t.flags===e.flags}function HB(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,c=0;(s=a.next())&&!s.done;)!l&&!n[c]&&(l=r.equals(o.value,s.value,o.value,s.value,t,e,r))&&(n[c]=!0),c++;if(!l)return!1}return!0}function ZLe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var e3e="[object Arguments]",t3e="[object Boolean]",r3e="[object Date]",n3e="[object Map]",i3e="[object Number]",o3e="[object Object]",s3e="[object RegExp]",a3e="[object Set]",l3e="[object String]",c3e=Array.isArray,KB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,YB=Object.assign,u3e=Object.prototype.toString.call.bind(Object.prototype.toString);function f3e(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,f,h){if(u===f)return!0;if(u==null||f==null||typeof u!="object"||typeof f!="object")return u!==u&&f!==f;var p=u.constructor;if(p!==f.constructor)return!1;if(p===Object)return i(u,f,h);if(c3e(u))return e(u,f,h);if(KB!=null&&KB(u))return l(u,f,h);if(p===Date)return r(u,f,h);if(p===RegExp)return s(u,f,h);if(p===Map)return n(u,f,h);if(p===Set)return a(u,f,h);var m=u3e(u);return m===r3e?r(u,f,h):m===s3e?s(u,f,h):m===n3e?n(u,f,h):m===a3e?a(u,f,h):m===o3e?typeof u.then!="function"&&typeof f.then!="function"&&i(u,f,h):m===e3e?i(u,f,h):m===t3e||m===i3e||m===l3e?o(u,f,h):!1}}function d3e(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Bh:KLe,areDatesEqual:YLe,areMapsEqual:n?VB(qB,Bh):qB,areObjectsEqual:n?Bh:QLe,arePrimitiveWrappersEqual:XLe,areRegExpsEqual:JLe,areSetsEqual:n?VB(HB,Bh):HB,areTypedArraysEqual:n?Bh:ZLe};if(r&&(i=YB({},i,r(i))),e){var o=Jv(i.areArraysEqual),s=Jv(i.areMapsEqual),a=Jv(i.areObjectsEqual),l=Jv(i.areSetsEqual);i=YB({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function h3e(t){return function(e,r,n,i,o,s,a){return t(e,r,a)}}function p3e(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,o=t.strict;if(n)return function(l,c){var u=n(),f=u.cache,h=f===void 0?e?new WeakMap:void 0:f,p=u.meta;return r(l,c,{cache:h,equals:i,meta:p,strict:o})};if(e)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return r(l,c,s)}}var m3e=cl();cl({strict:!0});cl({circular:!0});cl({circular:!0,strict:!0});cl({createInternalComparator:function(){return lh}});cl({strict:!0,createInternalComparator:function(){return lh}});cl({circular:!0,createInternalComparator:function(){return lh}});cl({circular:!0,createInternalComparator:function(){return lh},strict:!0});function cl(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=d3e(t),l=f3e(a),c=n?n(l):h3e(l);return p3e({circular:r,comparator:l,createState:i,equals:c,strict:s})}function y3e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function QB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>e?(t(o),r=-1):y3e(i)};requestAnimationFrame(n)}function dI(t){"@babel/helpers - typeof";return dI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dI(t)}function g3e(t){return _3e(t)||x3e(t)||b3e(t)||v3e()}function v3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b3e(t,e){if(t){if(typeof t=="string")return XB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XB(t,e)}}function XB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _3e(t){if(Array.isArray(t))return t}function w3e(){var t={},e=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,a=g3e(s),l=a[0],c=a.slice(1);if(typeof l=="number"){QB(i.bind(null,c),l);return}i(l),QB(i.bind(null,c));return}dI(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}function JB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(r),!0).forEach(function(n){__(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function __(t,e,r){return e=S3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S3e(t){var e=E3e(t,"string");return ey(e)==="symbol"?e:String(e)}function E3e(t,e){if(ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A3e=["Webkit","Moz","O","ms"],C3e=["-webkit-","-moz-","-o-","-ms-"],T3e=["transform","transformOrigin","transition"],P3e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},I3e=function(e){return e},N3e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},k3e=function(e,r){if(T3e.indexOf(e)===-1)return __({},e,Number.isNaN(r)?0:r);var n=e==="transition",i=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=r;return A3e.reduce(function(s,a,l){return n&&(o=r.replace(/(transform|transform-origin)/gim,"".concat(C3e[l],"$1"))),bd(bd({},s),{},__({},a+i,o))},{})},Gp=function(e,r){return Object.keys(r).reduce(function(n,i){return bd(bd({},n),{},__({},i,e(i,r[i])))},{})},Nj=function(e){return Object.keys(e).reduce(function(r,n){return bd(bd({},r),k3e(n,r[n]))},e)},ZB=function(e,r,n){return e.map(function(i){return"".concat(N3e(i)," ").concat(r,"ms ").concat(n)}).join(",")};function O3e(t,e){return $3e(t)||j3e(t,e)||jQ(t,e)||R3e()}function R3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function $3e(t){if(Array.isArray(t))return t}function D3e(t){return L3e(t)||F3e(t)||jQ(t)||M3e()}function M3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jQ(t,e){if(t){if(typeof t=="string")return hI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hI(t,e)}}function F3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L3e(t){if(Array.isArray(t))return hI(t)}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var w_=1e-4,$Q=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},DQ=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},e4=function(e,r){return function(n){var i=$Q(e,r);return DQ(i,n)}},B3e=function(e,r){return function(n){var i=$Q(e,r),o=[].concat(D3e(i.map(function(s,a){return s*a}).slice(1)),[0]);return DQ(o,n)}},t4=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],o=r[1],s=r[2],a=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=O3e(c,4);i=u[0],o=u[1],s=u[2],a=u[3]}}}var f=e4(i,s),h=e4(o,a),p=B3e(i,s),m=function(b){return b>1?1:b<0?0:b},y=function(b){for(var v=b>1?1:b,x=v,S=0;S<8;++S){var _=f(x)-v,w=p(x);if(Math.abs(_-v)<w_||w<w_)return h(x);x=m(x-_/w)}return h(x)};return y.isStepper=!1,y},U3e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(u,f,h){var p=-(u-f)*n,m=h*o,y=h+(p-m)*a/1e3,g=h*a/1e3+u;return Math.abs(g-f)<w_&&Math.abs(y)<w_?[f,0]:[g,y]};return l.isStepper=!0,l.dt=a,l},V3e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return t4(i);case"spring":return U3e();default:if(i.split("(")[0]==="cubic-bezier")return t4(i)}return typeof i=="function"?i:null};function ty(t){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(t)}function r4(t){return G3e(t)||z3e(t)||MQ(t)||W3e()}function W3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G3e(t){if(Array.isArray(t))return mI(t)}function n4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n4(Object(r),!0).forEach(function(n){pI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pI(t,e,r){return e=q3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q3e(t){var e=H3e(t,"string");return ty(e)==="symbol"?e:String(e)}function H3e(t,e){if(ty(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ty(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K3e(t,e){return X3e(t)||Q3e(t,e)||MQ(t,e)||Y3e()}function Y3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(t,e){if(t){if(typeof t=="string")return mI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mI(t,e)}}function mI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function X3e(t){if(Array.isArray(t))return t}var S_=function(e,r,n){return e+(r-e)*n},yI=function(e){var r=e.from,n=e.to;return r!==n},J3e=function t(e,r,n){var i=Gp(function(o,s){if(yI(s)){var a=e(s.from,s.to,s.velocity),l=K3e(a,2),c=l[0],u=l[1];return Fr(Fr({},s),{},{from:c,velocity:u})}return s},r);return n<1?Gp(function(o,s){return yI(s)?Fr(Fr({},s),{},{velocity:S_(s.velocity,i[o].velocity,n),from:S_(s.from,i[o].from,n)}):s},r):t(e,i,n-1)};const Z3e=function(t,e,r,n,i){var o=P3e(t,e),s=o.reduce(function(g,b){return Fr(Fr({},g),{},pI({},b,[t[b],e[b]]))},{}),a=o.reduce(function(g,b){return Fr(Fr({},g),{},pI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,c,u,f=function(){return null},h=function(){return Gp(function(b,v){return v.from},a)},p=function(){return!Object.values(a).filter(yI).length},m=function(b){c||(c=b);var v=b-c,x=v/r.dt;a=J3e(r,a,x),i(Fr(Fr(Fr({},t),e),h())),c=b,p()||(l=requestAnimationFrame(f))},y=function(b){u||(u=b);var v=(b-u)/n,x=Gp(function(_,w){return S_.apply(void 0,r4(w).concat([r(v)]))},s);if(i(Fr(Fr(Fr({},t),e),x)),v<1)l=requestAnimationFrame(f);else{var S=Gp(function(_,w){return S_.apply(void 0,r4(w).concat([r(1)]))},s);i(Fr(Fr(Fr({},t),e),S))}};return f=r.isStepper?m:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}var eBe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function tBe(t,e){if(t==null)return{};var r=rBe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rBe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function zA(t){return sBe(t)||oBe(t)||iBe(t)||nBe()}function nBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iBe(t,e){if(t){if(typeof t=="string")return gI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gI(t,e)}}function oBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sBe(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(r),!0).forEach(function(n){pp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pp(t,e,r){return e=FQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FQ(n.key),n)}}function lBe(t,e,r){return e&&o4(t.prototype,e),r&&o4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function FQ(t){var e=cBe(t,"string");return xd(e)==="symbol"?e:String(e)}function cBe(t,e){if(xd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(xd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}function vI(t,e){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vI(t,e)}function fBe(t){var e=dBe();return function(){var n=E_(t),i;if(e){var o=E_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bI(this,i)}}function bI(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xI(t)}function xI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E_(t){return E_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E_(t)}var Ts=function(t){uBe(r,t);var e=fBe(r);function r(n,i){var o;aBe(this,r),o=e.call(this,n,i);var s=o.props,a=s.isActive,l=s.attributeName,c=s.from,u=s.to,f=s.steps,h=s.children,p=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(xI(o)),o.changeStyle=o.changeStyle.bind(xI(o)),!a||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),bI(o);if(f&&f.length)o.state={style:f[0].style};else if(c){if(typeof h=="function")return o.state={style:c},bI(o);o.state={style:l?pp({},l,c):c}}else o.state={style:{}};return o}return lBe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,f=o.from,h=this.state.style;if(a){if(!s){var p={style:l?pp({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(m3e(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||c?f:i.to;if(this.state&&h){var g={style:l?pp({},l,y):y};(l&&[l]!==y||!l&&h!==y)&&this.setState(g)}this.runAnimation(Vi(Vi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=Z3e(s,a,V3e(c),l,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([h,u,m,l,f])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,f=c.duration,h=f===void 0?0:f,p=function(y,g,b){if(b===0)return y;var v=g.duration,x=g.easing,S=x===void 0?"ease":x,_=g.style,w=g.properties,A=g.onAnimationEnd,C=b>0?s[b-1]:g,I=w||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(zA(y),[o.runJSAnimation.bind(o,{from:C.style,to:_,duration:v,easing:S}),v]);var T=ZB(I,v,S),P=Vi(Vi(Vi({},C.style),_),{},{transition:T});return[].concat(zA(y),[P,v,A]).filter(I3e)};return this.manager.start([l].concat(zA(s.reduce(p,[u,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=w3e());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=a?pp({},a,l):l,g=ZB(Object.keys(y),s,c);m.start([u,o,Vi(Vi({},y),{},{transition:g}),s,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=tBe(i,eBe),c=E.Children.count(o),u=Nj(this.state.style);if(typeof o=="function")return o(u);if(!a||c===0||s<=0)return o;var f=function(p){var m=p.props,y=m.style,g=y===void 0?{}:y,b=m.className,v=E.cloneElement(p,Vi(Vi({},l),{},{style:Vi(Vi({},g),u),className:b}));return v};return c===1?f(E.Children.only(o)):k.createElement("div",null,E.Children.map(o,function(h){return f(h)}))}}]),r}(E.PureComponent);Ts.displayName="Animate";Ts.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ts.propTypes={from:Pe.oneOfType([Pe.object,Pe.string]),to:Pe.oneOfType([Pe.object,Pe.string]),attributeName:Pe.string,duration:Pe.number,begin:Pe.number,easing:Pe.oneOfType([Pe.string,Pe.func]),steps:Pe.arrayOf(Pe.shape({duration:Pe.number.isRequired,style:Pe.object.isRequired,easing:Pe.oneOfType([Pe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pe.func]),properties:Pe.arrayOf("string"),onAnimationEnd:Pe.func})),children:Pe.oneOfType([Pe.node,Pe.func]),isActive:Pe.bool,canBegin:Pe.bool,onAnimationEnd:Pe.func,shouldReAnimate:Pe.bool,onAnimationStart:Pe.func,onAnimationReStart:Pe.func};Number.isFinite===void 0&&(Number.isFinite=function(t){return typeof t=="number"&&isFinite(t)});Pe.object,Pe.object,Pe.object,Pe.element;Pe.object,Pe.object,Pe.object,Pe.oneOfType([Pe.array,Pe.element]),Pe.any;function ry(t){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(t)}function Zv(t,e,r){return e=hBe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hBe(t){var e=pBe(t,"string");return ry(e)==="symbol"?e:String(e)}function pBe(t,e){if(ry(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ry(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uh="recharts-tooltip-wrapper",mBe={visibility:"hidden"};function yBe(t){var e,r=t.coordinate,n=t.translateX,i=t.translateY;return ct(Uh,(e={},Zv(e,"".concat(Uh,"-right"),ne(n)&&r&&ne(r.x)&&n>=r.x),Zv(e,"".concat(Uh,"-left"),ne(n)&&r&&ne(r.x)&&n<r.x),Zv(e,"".concat(Uh,"-bottom"),ne(i)&&r&&ne(r.y)&&i>=r.y),Zv(e,"".concat(Uh,"-top"),ne(i)&&r&&ne(r.y)&&i<r.y),e))}function s4(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&ne(o[n]))return o[n];var u=r[n]-a-i,f=r[n]+i;if(e[n])return s[n]?u:f;if(s[n]){var h=u,p=l[n];return h<p?Math.max(f,l[n]):Math.max(u,l[n])}var m=f+a,y=l[n]+c;return m>y?Math.max(u,l[n]):Math.max(f,l[n])}function gBe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return Nj({transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")})}function vBe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,f;return s.height>0&&s.width>0&&r?(u=s4({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=s4({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=gBe({translateX:u,translateY:f,useTranslate3d:a})):c=mBe,{cssProperties:c,cssClasses:yBe({translateX:u,translateY:f,coordinate:r})}}function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function a4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(r),!0).forEach(function(n){eb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function xBe(t,e,r){return e&&l4(t.prototype,e),r&&l4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Be(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_I(t,e)}function _I(t,e){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_I(t,e)}function wBe(t){var e=EBe();return function(){var n=A_(t),i;if(e){var o=A_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return SBe(this,i)}}function SBe(t,e){if(e&&(_d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z0(t)}function Z0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A_(t){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A_(t)}function eb(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=ABe(t,"string");return _d(e)==="symbol"?e:String(e)}function ABe(t,e){if(_d(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c4=1,CBe=function(t){_Be(r,t);var e=wBe(r);function r(){var n;bBe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),eb(Z0(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),eb(Z0(n),"lastBoundingBox",{width:-1,height:-1}),eb(Z0(n),"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return xBe(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.lastBoundingBox.width)>c4||Math.abs(i.height-this.lastBoundingBox.height)>c4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,s=o.active,a=o.allowEscapeViewBox,l=o.animationDuration,c=o.animationEasing,u=o.children,f=o.coordinate,h=o.hasPayload,p=o.isAnimationActive,m=o.offset,y=o.position,g=o.reverseDirection,b=o.useTranslate3d,v=o.viewBox,x=o.wrapperStyle,S=vBe({allowEscapeViewBox:a,coordinate:f,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:b,viewBox:v}),_=S.cssClasses,w=S.cssProperties,A=GA(GA(GA({},p&&s&&Nj({transition:"transform ".concat(l,"ms ").concat(c)})),w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return k.createElement("div",{tabIndex:-1,role:"dialog",className:_,style:A,ref:function(I){i.wrapperNode=I}},u)}}]),r}(E.PureComponent),TBe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},gs={isSsr:TBe(),get:function(e){return gs[e]},set:function(e,r){if(typeof e=="string")gs[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){gs[i]=e[i]})}}};function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function u4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function f4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u4(Object(r),!0).forEach(function(n){kj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BQ(n.key),n)}}function IBe(t,e,r){return e&&d4(t.prototype,e),r&&d4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function NBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wI(t,e)}function kBe(t){var e=jBe();return function(){var n=C_(t),i;if(e){var o=C_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return OBe(this,i)}}function OBe(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RBe(t)}function RBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C_(t){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C_(t)}function kj(t,e,r){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BQ(t){var e=$Be(t,"string");return wd(e)==="symbol"?e:String(e)}function $Be(t,e){if(wd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DBe(t){return t.dataKey}function MBe(t,e){return k.isValidElement(t)?k.cloneElement(t,e):typeof t=="function"?k.createElement(t,e):k.createElement(LLe,e)}var Bu=function(t){NBe(r,t);var e=kBe(r);function r(){return PBe(this,r),e.apply(this,arguments)}return IBe(r,[{key:"render",value:function(){var i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,y=i.payloadUniqBy,g=i.position,b=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,S=i.wrapperStyle,_=m??[];f&&_.length&&(_=_Q(m.filter(function(A){return A.value!=null}),y,DBe));var w=_.length>0;return k.createElement(CBe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:w,offset:p,position:g,reverseDirection:b,useTranslate3d:v,viewBox:x,wrapperStyle:S},MBe(c,f4(f4({},this.props),{},{payload:_})))}}]),r}(E.PureComponent);kj(Bu,"displayName","Tooltip");kj(Bu,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var FBe=Zo,LBe=function(){return FBe.Date.now()},BBe=LBe,UBe=/\s/;function VBe(t){for(var e=t.length;e--&&UBe.test(t.charAt(e)););return e}var WBe=VBe,zBe=WBe,GBe=/^\s+/;function qBe(t){return t&&t.slice(0,zBe(t)+1).replace(GBe,"")}var HBe=qBe,KBe=HBe,h4=al,YBe=eh,p4=0/0,QBe=/^[-+]0x[0-9a-f]+$/i,XBe=/^0b[01]+$/i,JBe=/^0o[0-7]+$/i,ZBe=parseInt;function e4e(t){if(typeof t=="number")return t;if(YBe(t))return p4;if(h4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=h4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=KBe(t);var r=XBe.test(t);return r||JBe.test(t)?ZBe(t.slice(2),r?2:8):QBe.test(t)?p4:+t}var UQ=e4e,t4e=al,qA=BBe,m4=UQ,r4e="Expected a function",n4e=Math.max,i4e=Math.min;function o4e(t,e,r){var n,i,o,s,a,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(r4e);e=m4(e)||0,t4e(r)&&(u=!!r.leading,f="maxWait"in r,o=f?n4e(m4(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function p(w){var A=n,C=i;return n=i=void 0,c=w,s=t.apply(C,A),s}function m(w){return c=w,a=setTimeout(b,e),u?p(w):s}function y(w){var A=w-l,C=w-c,I=e-A;return f?i4e(I,o-C):I}function g(w){var A=w-l,C=w-c;return l===void 0||A>=e||A<0||f&&C>=o}function b(){var w=qA();if(g(w))return v(w);a=setTimeout(b,y(w))}function v(w){return a=void 0,h&&n?p(w):(n=i=void 0,s)}function x(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function S(){return a===void 0?s:v(qA())}function _(){var w=qA(),A=g(w);if(n=arguments,i=this,l=w,A){if(a===void 0)return m(l);if(f)return clearTimeout(a),a=setTimeout(b,e),p(l)}return a===void 0&&(a=setTimeout(b,e)),s}return _.cancel=x,_.flush=S,_}var s4e=o4e,a4e=s4e,l4e=al,c4e="Expected a function";function u4e(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(c4e);return l4e(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),a4e(t,e,{leading:n,maxWait:e,trailing:i})}var f4e=u4e;const VQ=ot(f4e);function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(t)}function y4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(r),!0).forEach(function(n){d4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d4e(t,e,r){return e=h4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h4e(t){var e=p4e(t,"string");return ny(e)==="symbol"?e:String(e)}function p4e(t,e){if(ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m4e(t,e){return b4e(t)||v4e(t,e)||g4e(t,e)||y4e()}function y4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g4e(t,e){if(t){if(typeof t=="string")return g4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g4(t,e)}}function g4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function b4e(t){if(Array.isArray(t))return t}var x4e=E.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,y=m===void 0?0:m,g=t.id,b=t.className,v=t.onResize,x=t.style,S=x===void 0?{}:x,_=E.useRef(null),w=E.useRef();w.current=v,E.useImperativeHandle(e,function(){return Object.assign(_.current,{get current(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current}})});var A=E.useState({containerWidth:i.width,containerHeight:i.height}),C=m4e(A,2),I=C[0],T=C[1],P=E.useCallback(function(N,R){T(function(B){var V=Math.round(N),F=Math.round(R);return B.containerWidth===V&&B.containerHeight===F?B:{containerWidth:V,containerHeight:F}})},[]);E.useEffect(function(){var N=function(L){var z,ce=L[0].contentRect,te=ce.width,be=ce.height;P(te,be),(z=w.current)===null||z===void 0||z.call(w,te,be)};y>0&&(N=VQ(N,y,{trailing:!0,leading:!1}));var R=new ResizeObserver(N),B=_.current.getBoundingClientRect(),V=B.width,F=B.height;return P(V,F),R.observe(_.current),function(){R.disconnect()}},[P,y]);var O=E.useMemo(function(){var N=I.containerWidth,R=I.containerHeight;if(N<0||R<0)return null;pc(Bl(s)||Bl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),pc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=Bl(s)?N:s,V=Bl(l)?R:l;r&&r>0&&(B?V=B/r:V&&(B=V*r),h&&V>h&&(V=h)),pc(B>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,V,s,l,u,f,r);var F=!Array.isArray(p)&&Mx.isElement(p)&&ys(p.type).endsWith("Chart");return k.Children.map(p,function($){return Mx.isElement($)?E.cloneElement($,e0({width:B,height:V},F?{style:e0({height:"100%",width:"100%",maxHeight:V,maxWidth:B},$.props.style)}:{})):$})},[r,p,l,h,f,u,I,s]);return k.createElement("div",{id:g?"".concat(g):void 0,className:ct("recharts-responsive-container",b),style:e0(e0({},S),{},{width:s,height:l,minWidth:u,minHeight:f,maxHeight:h}),ref:_},O)}),WQ=function(e){return null};WQ.displayName="Cell";function iy(t){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(t)}function v4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v4(Object(r),!0).forEach(function(n){_4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _4e(t,e,r){return e=w4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w4e(t){var e=S4e(t,"string");return iy(e)==="symbol"?e:String(e)}function S4e(t,e){if(iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var su={widthCache:{},cacheCount:0},E4e=2e3,A4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},b4="recharts_measurement_span";function C4e(t){var e=SI({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var qp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||gs.isSsr)return{width:0,height:0};var n=C4e(r),i=JSON.stringify({text:e,copyStyle:n});if(su.widthCache[i])return su.widthCache[i];try{var o=document.getElementById(b4);o||(o=document.createElement("span"),o.setAttribute("id",b4),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=SI(SI({},A4e),n);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return su.widthCache[i]=l,++su.cacheCount>E4e&&(su.cacheCount=0,su.widthCache={}),l}catch{return{width:0,height:0}}},T4e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function oy(t){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oy(t)}function T_(t,e){return k4e(t)||N4e(t,e)||I4e(t,e)||P4e()}function P4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I4e(t,e){if(t){if(typeof t=="string")return x4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x4(t,e)}}function x4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function k4e(t){if(Array.isArray(t))return t}function O4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j4e(n.key),n)}}function R4e(t,e,r){return e&&_4(t.prototype,e),r&&_4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function j4e(t){var e=$4e(t,"string");return oy(e)==="symbol"?e:String(e)}function $4e(t,e){if(oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,S4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,D4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,M4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},F4e=Object.keys(zQ),Uu="NaN";function L4e(t,e){return t*zQ[e]}var t0=function(){function t(e,r){O4e(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!D4e.test(r)&&(this.num=NaN,this.unit=""),F4e.includes(r)&&(this.num=L4e(e,r),this.unit="px")}return R4e(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=M4e.exec(r))!==null&&n!==void 0?n:[],o=T_(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function GQ(t){if(t.includes(Uu))return Uu;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=w4.exec(e))!==null&&r!==void 0?r:[],i=T_(n,4),o=i[1],s=i[2],a=i[3],l=t0.parse(o??""),c=t0.parse(a??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Uu;e=e.replace(w4,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=S4.exec(e))!==null&&f!==void 0?f:[],p=T_(h,4),m=p[1],y=p[2],g=p[3],b=t0.parse(m??""),v=t0.parse(g??""),x=y==="+"?b.add(v):b.subtract(v);if(x.isNaN())return Uu;e=e.replace(S4,x.toString())}return e}var E4=/\(([^()]*)\)/;function B4e(t){for(var e=t;e.includes("(");){var r=E4.exec(e),n=T_(r,2),i=n[1];e=e.replace(E4,GQ(i))}return e}function U4e(t){var e=t.replace(/\s+/g,"");return e=B4e(e),e=GQ(e),e}function V4e(t){try{return U4e(t)}catch{return Uu}}function HA(t){var e=V4e(t.slice(5,-1));return e===Uu?"":e}var W4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],z4e=["dx","dy","angle","className","breakAll"];function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EI.apply(this,arguments)}function A4(t,e){if(t==null)return{};var r=G4e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G4e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function C4(t,e){return Y4e(t)||K4e(t,e)||H4e(t,e)||q4e()}function q4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H4e(t,e){if(t){if(typeof t=="string")return T4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T4(t,e)}}function T4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Y4e(t){if(Array.isArray(t))return t}var qQ=/[ \f\n\r\t\v\u2028\u2029]+/,HQ=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var o=[];Xe(r)||(n?o=r.toString().split(""):o=r.toString().split(qQ));var s=o.map(function(l){return{word:l,width:qp(l,i).width}}),a=n?0:qp(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},Q4e=function(e,r,n,i,o){var s=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=ne(s),f=a,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(V,F){var $=F.word,L=F.width,z=V[V.length-1];if(z&&(i==null||o||z.width+L+n<Number(i)))z.words.push($),z.width+=L+n;else{var ce={words:[$],width:L};V.push(ce)}return V},[])},p=h(r),m=function(B){return B.reduce(function(V,F){return V.width>F.width?V:F})};if(!u)return p;for(var y="…",g=function(B){var V=f.slice(0,B),F=HQ({breakAll:c,style:l,children:V+y}).wordsWithComputedWidth,$=h(F),L=$.length>s||m($).width>Number(i);return[L,$]},b=0,v=f.length-1,x=0,S;b<=v&&x<=f.length-1;){var _=Math.floor((b+v)/2),w=_-1,A=g(w),C=C4(A,2),I=C[0],T=C[1],P=g(_),O=C4(P,1),N=O[0];if(!I&&!N&&(b=_+1),I&&N&&(v=_-1),!I&&N){S=T;break}x++}return S||p},P4=function(e){var r=Xe(e)?[]:e.toString().split(qQ);return[{words:r}]},X4e=function(e){var r=e.width,n=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((r||n)&&!gs.isSsr){var l,c,u=HQ({breakAll:s,children:i,style:o});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;l=f,c=h}else return P4(i);return Q4e({breakAll:s,children:i,maxLines:a,style:o},l,c,r,n)}return P4(i)},I4="#808080",P_=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,y=m===void 0?"end":m,g=e.fill,b=g===void 0?I4:g,v=A4(e,W4e),x=E.useMemo(function(){return X4e({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),S=v.dx,_=v.dy,w=v.angle,A=v.className,C=v.breakAll,I=A4(v,z4e);if(!dr(n)||!dr(o))return null;var T=n+(ne(S)?S:0),P=o+(ne(_)?_:0),O;switch(y){case"start":O=HA("calc(".concat(c,")"));break;case"middle":O=HA("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:O=HA("calc(".concat(x.length-1," * -").concat(a,")"));break}var N=[];if(f){var R=x[0].width,B=v.width;N.push("scale(".concat((ne(B)?B/R:1)/R,")"))}return w&&N.push("rotate(".concat(w,", ").concat(T,", ").concat(P,")")),N.length&&(I.transform=N.join(" ")),k.createElement("text",EI({},qe(I,!0),{x:T,y:P,className:ct("recharts-text",A),textAnchor:p,fill:b.includes("url")?I4:b}),x.map(function(V,F){var $=V.words.join(C?"":" ");return k.createElement("tspan",{x:T,dy:F===0?O:a,key:$},$)}))};function Fa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function J4e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Oj(t){let e,r,n;t.length!==2?(e=Fa,r=(a,l)=>Fa(t(a),l),n=(a,l)=>t(a)-l):(e=t===Fa||t===J4e?t:Z4e,r=t,n=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;r(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;r(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&n(a[f-1],l)>-n(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function Z4e(){return 0}function KQ(t){return t===null?NaN:+t}function*eUe(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}const tUe=Oj(Fa),rUe=tUe.right;Oj(KQ).center;const Gg=rUe;class N4 extends Map{constructor(e,r=oUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(k4(this,e))}has(e){return super.has(k4(this,e))}set(e,r){return super.set(nUe(this,e),r)}delete(e){return super.delete(iUe(this,e))}}function k4({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function nUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function iUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function oUe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function sUe(t=Fa){if(t===Fa)return YQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function YQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const aUe=Math.sqrt(50),lUe=Math.sqrt(10),cUe=Math.sqrt(2);function I_(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=aUe?10:o>=lUe?5:o>=cUe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=r&&r<2?I_(t,e,r*2):[a,l,c]}function AI(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,o,s]=n?I_(e,t,r):I_(t,e,r);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(n)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function CI(t,e,r){return e=+e,t=+t,r=+r,I_(t,e,r)[2]}function TI(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?CI(e,t,r):CI(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function O4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function R4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function QQ(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?YQ:sUe(i);n>r;){if(n-r>600){const l=n-r+1,c=e-r+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(e-c*f/l+h)),m=Math.min(n,Math.floor(e+(l-c)*f/l+h));QQ(t,e,p,m,i)}const o=t[e];let s=r,a=n;for(Vh(t,r,e),i(t[n],o)>0&&Vh(t,r,n);s<a;){for(Vh(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[r],o)===0?Vh(t,r,a):(++a,Vh(t,a,n)),a<=e&&(r=a+1),e<=a&&(n=a-1)}return t}function Vh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function uUe(t,e,r){if(t=Float64Array.from(eUe(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return R4(t);if(e>=1)return O4(t);var n,i=(n-1)*e,o=Math.floor(i),s=O4(QQ(t,o).subarray(0,o+1)),a=R4(t.subarray(o+1));return s+(a-s)*(i-o)}}function fUe(t,e,r=KQ){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),s=+r(t[o],o,t),a=+r(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function dUe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}function Li(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ds(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const PI=Symbol("implicit");function Rj(){var t=new N4,e=[],r=[],n=PI;function i(o){let s=t.get(o);if(s===void 0){if(n!==PI)return n;t.set(o,s=e.push(o)-1)}return r[s%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new N4;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Rj(e,r).unknown(n)},Li.apply(i,arguments),i}function sy(){var t=Rj().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,p=i<n,m=p?i:n,y=p?n:i;o=(y-m)/Math.max(1,h-l+c*2),a&&(o=Math.floor(o)),m+=(y-m-o*(h-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var g=dUe(h).map(function(b){return m+o*b});return r(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,f()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return sy(e(),[n,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Li.apply(f(),arguments)}function XQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return XQ(e())},t}function Hp(){return XQ(sy.apply(null,arguments).paddingInner(1))}function jj(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function JQ(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function qg(){}var ay=.7,N_=1/ay,pf="\\s*([+-]?\\d+)\\s*",ly="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hUe=/^#([0-9a-f]{3,8})$/,pUe=new RegExp(`^rgb\\(${pf},${pf},${pf}\\)$`),mUe=new RegExp(`^rgb\\(${zo},${zo},${zo}\\)$`),yUe=new RegExp(`^rgba\\(${pf},${pf},${pf},${ly}\\)$`),gUe=new RegExp(`^rgba\\(${zo},${zo},${zo},${ly}\\)$`),vUe=new RegExp(`^hsl\\(${ly},${zo},${zo}\\)$`),bUe=new RegExp(`^hsla\\(${ly},${zo},${zo},${ly}\\)$`),j4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jj(qg,cy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$4,formatHex:$4,formatHex8:xUe,formatHsl:_Ue,formatRgb:D4,toString:D4});function $4(){return this.rgb().formatHex()}function xUe(){return this.rgb().formatHex8()}function _Ue(){return ZQ(this).formatHsl()}function D4(){return this.rgb().formatRgb()}function cy(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=hUe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?M4(e):r===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?r0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?r0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pUe.exec(t))?new Dn(e[1],e[2],e[3],1):(e=mUe.exec(t))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yUe.exec(t))?r0(e[1],e[2],e[3],e[4]):(e=gUe.exec(t))?r0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vUe.exec(t))?B4(e[1],e[2]/100,e[3]/100,1):(e=bUe.exec(t))?B4(e[1],e[2]/100,e[3]/100,e[4]):j4.hasOwnProperty(t)?M4(j4[t]):t==="transparent"?new Dn(NaN,NaN,NaN,0):null}function M4(t){return new Dn(t>>16&255,t>>8&255,t&255,1)}function r0(t,e,r,n){return n<=0&&(t=e=r=NaN),new Dn(t,e,r,n)}function wUe(t){return t instanceof qg||(t=cy(t)),t?(t=t.rgb(),new Dn(t.r,t.g,t.b,t.opacity)):new Dn}function II(t,e,r,n){return arguments.length===1?wUe(t):new Dn(t,e,r,n??1)}function Dn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}jj(Dn,II,JQ(qg,{brighter(t){return t=t==null?N_:Math.pow(N_,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ay:Math.pow(ay,t),new Dn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dn(mc(this.r),mc(this.g),mc(this.b),k_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F4,formatHex:F4,formatHex8:SUe,formatRgb:L4,toString:L4}));function F4(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}`}function SUe(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}${Ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function L4(){const t=k_(this.opacity);return`${t===1?"rgb(":"rgba("}${mc(this.r)}, ${mc(this.g)}, ${mc(this.b)}${t===1?")":`, ${t})`}`}function k_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ul(t){return t=mc(t),(t<16?"0":"")+t.toString(16)}function B4(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Zi(t,e,r,n)}function ZQ(t){if(t instanceof Zi)return new Zi(t.h,t.s,t.l,t.opacity);if(t instanceof qg||(t=cy(t)),!t)return new Zi;if(t instanceof Zi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-e)/a+2:s=(e-r)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Zi(s,a,l,t.opacity)}function EUe(t,e,r,n){return arguments.length===1?ZQ(t):new Zi(t,e,r,n??1)}function Zi(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}jj(Zi,EUe,JQ(qg,{brighter(t){return t=t==null?N_:Math.pow(N_,t),new Zi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ay:Math.pow(ay,t),new Zi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Dn(KA(t>=240?t-240:t+120,i,n),KA(t,i,n),KA(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Zi(U4(this.h),n0(this.s),n0(this.l),k_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=k_(this.opacity);return`${t===1?"hsl(":"hsla("}${U4(this.h)}, ${n0(this.s)*100}%, ${n0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function U4(t){return t=(t||0)%360,t<0?t+360:t}function n0(t){return Math.max(0,Math.min(1,t||0))}function KA(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const $j=t=>()=>t;function AUe(t,e){return function(r){return t+r*e}}function CUe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function TUe(t){return(t=+t)==1?eX:function(e,r){return r-e?CUe(e,r,t):$j(isNaN(e)?r:e)}}function eX(t,e){var r=e-t;return r?AUe(t,r):$j(isNaN(t)?e:t)}const V4=function t(e){var r=TUe(e);function n(i,o){var s=r((i=II(i)).r,(o=II(o)).r),a=r(i.g,o.g),l=r(i.b,o.b),c=eX(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return n.gamma=t,n}(1);function PUe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function IUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function NUe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=ch(t[s],e[s]);for(;s<r;++s)o[s]=e[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function kUe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function O_(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function OUe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=ch(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var NI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YA=new RegExp(NI.source,"g");function RUe(t){return function(){return t}}function jUe(t){return function(e){return t(e)+""}}function $Ue(t,e){var r=NI.lastIndex=YA.lastIndex=0,n,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(n=NI.exec(t))&&(i=YA.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:O_(n,i)})),r=YA.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?jUe(l[0].x):RUe(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function ch(t,e){var r=typeof e,n;return e==null||r==="boolean"?$j(e):(r==="number"?O_:r==="string"?(n=cy(e))?(e=n,V4):$Ue:e instanceof cy?V4:e instanceof Date?kUe:IUe(e)?PUe:Array.isArray(e)?NUe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?OUe:O_)(t,e)}function Dj(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function DUe(t,e){e===void 0&&(e=t,t=ch);for(var r=0,n=e.length-1,i=e[0],o=new Array(n<0?0:n);r<n;)o[r]=t(i,i=e[++r]);return function(s){var a=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return o[a](s-a)}}function MUe(t){return function(){return t}}function R_(t){return+t}var W4=[0,1];function An(t){return t}function kI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:MUe(isNaN(e)?NaN:.5)}function FUe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function LUe(t,e,r){var n=t[0],i=t[1],o=e[0],s=e[1];return i<n?(n=kI(i,n),o=r(s,o)):(n=kI(n,i),o=r(o,s)),function(a){return o(n(a))}}function BUe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=kI(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(a){var l=Gg(t,a,1,n)-1;return o[l](i[l](a))}}function Hg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cS(){var t=W4,e=W4,r=ch,n,i,o,s=An,a,l,c;function u(){var h=Math.min(t.length,e.length);return s!==An&&(s=FUe(t[0],t[h-1])),a=h>2?BUe:LUe,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(n),e,r)))(n(s(h)))}return f.invert=function(h){return s(i((c||(c=a(e,t.map(n),O_)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,R_),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=Dj,u()},f.clamp=function(h){return arguments.length?(s=h?!0:An,u()):s!==An},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return n=h,i=p,u()}}function Mj(){return cS()(An,An)}function UUe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function j_(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Sd(t){return t=j_(Math.abs(t)),t?t[1]:NaN}function VUe(t,e){return function(r,n){for(var i=r.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),o.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function WUe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var zUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uy(t){if(!(e=zUe.exec(t)))throw new Error("invalid format: "+t);var e;return new Fj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uy.prototype=Fj.prototype;function Fj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Fj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GUe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var tX;function qUe(t,e){var r=j_(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(tX=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+j_(t,Math.max(0,e+o-1))[0]}function z4(t,e){var r=j_(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const G4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:UUe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>z4(t*100,e),r:z4,s:qUe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function q4(t){return t}var H4=Array.prototype.map,K4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function HUe(t){var e=t.grouping===void 0||t.thousands===void 0?q4:VUe(H4.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?q4:WUe(H4.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=uy(f);var h=f.fill,p=f.align,m=f.sign,y=f.symbol,g=f.zero,b=f.width,v=f.comma,x=f.precision,S=f.trim,_=f.type;_==="n"?(v=!0,_="g"):G4[_]||(x===void 0&&(x=12),S=!0,_="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var w=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=y==="$"?n:/[%p]/.test(_)?s:"",C=G4[_],I=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function T(P){var O=w,N=A,R,B,V;if(_==="c")N=C(P)+N,P="";else{P=+P;var F=P<0||1/P<0;if(P=isNaN(P)?l:C(Math.abs(P),x),S&&(P=GUe(P)),F&&+P==0&&m!=="+"&&(F=!1),O=(F?m==="("?m:a:m==="-"||m==="("?"":m)+O,N=(_==="s"?K4[8+tX/3]:"")+N+(F&&m==="("?")":""),I){for(R=-1,B=P.length;++R<B;)if(V=P.charCodeAt(R),48>V||V>57){N=(V===46?i+P.slice(R+1):P.slice(R))+N,P=P.slice(0,R);break}}}v&&!g&&(P=e(P,1/0));var $=O.length+P.length+N.length,L=$<b?new Array(b-$+1).join(h):"";switch(v&&g&&(P=e(L+P,L.length?b-N.length:1/0),L=""),p){case"<":P=O+P+N+L;break;case"=":P=O+L+P+N;break;case"^":P=L.slice(0,$=L.length>>1)+O+P+N+L.slice($);break;default:P=L+O+P+N;break}return o(P)}return T.toString=function(){return f+""},T}function u(f,h){var p=c((f=uy(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Sd(h)/3)))*3,y=Math.pow(10,-m),g=K4[8+m/3];return function(b){return p(y*b)+g}}return{format:c,formatPrefix:u}}var i0,Lj,rX;KUe({thousands:",",grouping:[3],currency:["$",""]});function KUe(t){return i0=HUe(t),Lj=i0.format,rX=i0.formatPrefix,i0}function YUe(t){return Math.max(0,-Sd(Math.abs(t)))}function QUe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sd(e)/3)))*3-Sd(Math.abs(t)))}function XUe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sd(e)-Sd(t))+1}function nX(t,e,r,n){var i=TI(t,e,r),o;switch(n=uy(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=QUe(i,s))&&(n.precision=o),rX(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=XUe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=YUe(i))&&(n.precision=o-(n.type==="%")*2);break}}return Lj(n)}function ul(t){var e=t.domain;return t.ticks=function(r){var n=e();return AI(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return nX(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,s=n[i],a=n[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=CI(s,a,r),c===l)return n[i]=s,n[o]=a,e(n);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function $_(){var t=Mj();return t.copy=function(){return Hg(t,$_())},Li.apply(t,arguments),ul(t)}function iX(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,R_),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return iX(t).unknown(e)},t=arguments.length?Array.from(t,R_):[0,1],ul(r)}function oX(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),t[r]=e.floor(i),t[n]=e.ceil(o),t}function Y4(t){return Math.log(t)}function Q4(t){return Math.exp(t)}function JUe(t){return-Math.log(-t)}function ZUe(t){return-Math.exp(-t)}function eVe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function tVe(t){return t===10?eVe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function rVe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function X4(t){return(e,r)=>-t(-e,r)}function Bj(t){const e=t(Y4,Q4),r=e.domain;let n=10,i,o;function s(){return i=rVe(n),o=tVe(n),r()[0]<0?(i=X4(i),o=X4(o),t(JUe,ZUe)):t(Y4,Q4),e}return e.base=function(a){return arguments.length?(n=+a,s()):n},e.domain=function(a){return arguments.length?(r(a),s()):r()},e.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),p=i(u),m,y;const g=a==null?10:+a;let b=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<n;++m)if(y=h<0?m/o(-h):m*o(h),!(y<c)){if(y>u)break;b.push(y)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(y=h>0?m/o(-h):m*o(h),!(y<c)){if(y>u)break;b.push(y)}b.length*2<g&&(b=AI(c,u,g))}else b=AI(h,p,Math.min(p-h,g)).map(o);return f?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=uy(l)).precision==null&&(l.trim=!0),l=Lj(l)),a===1/0)return l;const c=Math.max(1,n*a/e.ticks().length);return u=>{let f=u/o(Math.round(i(u)));return f*n<n-.5&&(f*=n),f<=c?l(u):""}},e.nice=()=>r(oX(r(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function sX(){const t=Bj(cS()).domain([1,10]);return t.copy=()=>Hg(t,sX()).base(t.base()),Li.apply(t,arguments),t}function J4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Z4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Uj(t){var e=1,r=t(J4(e),Z4(e));return r.constant=function(n){return arguments.length?t(J4(e=+n),Z4(e)):e},ul(r)}function aX(){var t=Uj(cS());return t.copy=function(){return Hg(t,aX()).constant(t.constant())},Li.apply(t,arguments)}function eU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function nVe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function iVe(t){return t<0?-t*t:t*t}function Vj(t){var e=t(An,An),r=1;function n(){return r===1?t(An,An):r===.5?t(nVe,iVe):t(eU(r),eU(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ul(e)}function Wj(){var t=Vj(cS());return t.copy=function(){return Hg(t,Wj()).exponent(t.exponent())},Li.apply(t,arguments),t}function oVe(){return Wj.apply(null,arguments).exponent(.5)}function tU(t){return Math.sign(t)*t*t}function sVe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function lX(){var t=Mj(),e=[0,1],r=!1,n;function i(o){var s=sVe(t(o));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(o){return t.invert(tU(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,R_)).map(tU)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return lX(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Li.apply(i,arguments),ul(i)}function cX(){var t=[],e=[],r=[],n;function i(){var s=0,a=Math.max(1,e.length);for(r=new Array(a-1);++s<a;)r[s-1]=fUe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?n:e[Gg(r,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Fa),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return cX().domain(t).range(e).unknown(n)},Li.apply(o,arguments)}function uX(){var t=0,e=1,r=1,n=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Gg(n,l,0,r)]:o}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,n[0]]:c>=r?[n[r-1],e]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return uX().domain([t,e]).range(i).unknown(o)},Li.apply(ul(s),arguments)}function fX(){var t=[.5],e=[0,1],r,n=1;function i(o){return o!=null&&o<=o?e[Gg(t,o,0,n)]:r}return i.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return fX().domain(t).range(e).unknown(r)},Li.apply(i,arguments)}const QA=new Date,XA=new Date;function mr(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=o=>mr(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),r&&(i.count=(o,s)=>(QA.setTime(+o),XA.setTime(+s),t(QA),t(XA),Math.floor(r(QA,XA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?s=>n(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const D_=mr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);D_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?mr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):D_);D_.range;const ds=1e3,Pi=ds*60,hs=Pi*60,Ps=hs*24,zj=Ps*7,rU=Ps*30,JA=Ps*365,Vl=mr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ds)},(t,e)=>(e-t)/ds,t=>t.getUTCSeconds());Vl.range;const Gj=mr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ds)},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getMinutes());Gj.range;const qj=mr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getUTCMinutes());qj.range;const Hj=mr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ds-t.getMinutes()*Pi)},(t,e)=>{t.setTime(+t+e*hs)},(t,e)=>(e-t)/hs,t=>t.getHours());Hj.range;const Kj=mr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*hs)},(t,e)=>(e-t)/hs,t=>t.getUTCHours());Kj.range;const Kg=mr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pi)/Ps,t=>t.getDate()-1);Kg.range;const uS=mr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ps,t=>t.getUTCDate()-1);uS.range;const dX=mr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ps,t=>Math.floor(t/Ps));dX.range;function Gc(t){return mr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Pi)/zj)}const fS=Gc(0),M_=Gc(1),aVe=Gc(2),lVe=Gc(3),Ed=Gc(4),cVe=Gc(5),uVe=Gc(6);fS.range;M_.range;aVe.range;lVe.range;Ed.range;cVe.range;uVe.range;function qc(t){return mr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/zj)}const dS=qc(0),F_=qc(1),fVe=qc(2),dVe=qc(3),Ad=qc(4),hVe=qc(5),pVe=qc(6);dS.range;F_.range;fVe.range;dVe.range;Ad.range;hVe.range;pVe.range;const Yj=mr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Yj.range;const Qj=mr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Qj.range;const Is=mr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Is.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:mr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Is.range;const Ns=mr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ns.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:mr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ns.range;function hX(t,e,r,n,i,o){const s=[[Vl,1,ds],[Vl,5,5*ds],[Vl,15,15*ds],[Vl,30,30*ds],[o,1,Pi],[o,5,5*Pi],[o,15,15*Pi],[o,30,30*Pi],[i,1,hs],[i,3,3*hs],[i,6,6*hs],[i,12,12*hs],[n,1,Ps],[n,2,2*Ps],[r,1,zj],[e,1,rU],[e,3,3*rU],[t,1,JA]];function a(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const p=f&&typeof f.range=="function"?f:l(c,u,f),m=p?p.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,f){const h=Math.abs(u-c)/f,p=Oj(([,,g])=>g).right(s,h);if(p===s.length)return t.every(TI(c/JA,u/JA,f));if(p===0)return D_.every(Math.max(TI(c,u,f),1));const[m,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return m.every(y)}return[a,l]}const[mVe,yVe]=hX(Ns,Qj,dS,dX,Kj,qj),[gVe,vVe]=hX(Is,Yj,fS,Kg,Hj,Gj);function ZA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function eC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wh(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function bVe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=zh(i),u=Gh(i),f=zh(o),h=Gh(o),p=zh(s),m=Gh(s),y=zh(a),g=Gh(a),b=zh(l),v=Gh(l),x={a:F,A:$,b:L,B:z,c:null,d:lU,e:lU,f:VVe,g:JVe,G:e6e,H:LVe,I:BVe,j:UVe,L:pX,m:WVe,M:zVe,p:ce,q:te,Q:fU,s:dU,S:GVe,u:qVe,U:HVe,V:KVe,w:YVe,W:QVe,x:null,X:null,y:XVe,Y:ZVe,Z:t6e,"%":uU},S={a:be,A:st,b:rt,B:Vt,c:null,d:cU,e:cU,f:o6e,g:m6e,G:g6e,H:r6e,I:n6e,j:i6e,L:yX,m:s6e,M:a6e,p:pt,q:Zt,Q:fU,s:dU,S:l6e,u:c6e,U:u6e,V:f6e,w:d6e,W:h6e,x:null,X:null,y:p6e,Y:y6e,Z:v6e,"%":uU},_={a:T,A:P,b:O,B:N,c:R,d:sU,e:sU,f:$Ve,g:oU,G:iU,H:aU,I:aU,j:kVe,L:jVe,m:NVe,M:OVe,p:I,q:IVe,Q:MVe,s:FVe,S:RVe,u:EVe,U:AVe,V:CVe,w:SVe,W:TVe,x:B,X:V,y:oU,Y:iU,Z:PVe,"%":DVe};x.x=w(r,x),x.X=w(n,x),x.c=w(e,x),S.x=w(r,S),S.X=w(n,S),S.c=w(e,S);function w(ee,xe){return function(Ee){var q=[],Ze=-1,ke=0,vt=ee.length,$t,en,Un;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ze<vt;)ee.charCodeAt(Ze)===37&&(q.push(ee.slice(ke,Ze)),(en=nU[$t=ee.charAt(++Ze)])!=null?$t=ee.charAt(++Ze):en=$t==="e"?" ":"0",(Un=xe[$t])&&($t=Un(Ee,en)),q.push($t),ke=Ze+1);return q.push(ee.slice(ke,Ze)),q.join("")}}function A(ee,xe){return function(Ee){var q=Wh(1900,void 0,1),Ze=C(q,ee,Ee+="",0),ke,vt;if(Ze!=Ee.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(xe&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(ke=eC(Wh(q.y,0,1)),vt=ke.getUTCDay(),ke=vt>4||vt===0?F_.ceil(ke):F_(ke),ke=uS.offset(ke,(q.V-1)*7),q.y=ke.getUTCFullYear(),q.m=ke.getUTCMonth(),q.d=ke.getUTCDate()+(q.w+6)%7):(ke=ZA(Wh(q.y,0,1)),vt=ke.getDay(),ke=vt>4||vt===0?M_.ceil(ke):M_(ke),ke=Kg.offset(ke,(q.V-1)*7),q.y=ke.getFullYear(),q.m=ke.getMonth(),q.d=ke.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),vt="Z"in q?eC(Wh(q.y,0,1)).getUTCDay():ZA(Wh(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(vt+5)%7:q.w+q.U*7-(vt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,eC(q)):ZA(q)}}function C(ee,xe,Ee,q){for(var Ze=0,ke=xe.length,vt=Ee.length,$t,en;Ze<ke;){if(q>=vt)return-1;if($t=xe.charCodeAt(Ze++),$t===37){if($t=xe.charAt(Ze++),en=_[$t in nU?xe.charAt(Ze++):$t],!en||(q=en(ee,Ee,q))<0)return-1}else if($t!=Ee.charCodeAt(q++))return-1}return q}function I(ee,xe,Ee){var q=c.exec(xe.slice(Ee));return q?(ee.p=u.get(q[0].toLowerCase()),Ee+q[0].length):-1}function T(ee,xe,Ee){var q=p.exec(xe.slice(Ee));return q?(ee.w=m.get(q[0].toLowerCase()),Ee+q[0].length):-1}function P(ee,xe,Ee){var q=f.exec(xe.slice(Ee));return q?(ee.w=h.get(q[0].toLowerCase()),Ee+q[0].length):-1}function O(ee,xe,Ee){var q=b.exec(xe.slice(Ee));return q?(ee.m=v.get(q[0].toLowerCase()),Ee+q[0].length):-1}function N(ee,xe,Ee){var q=y.exec(xe.slice(Ee));return q?(ee.m=g.get(q[0].toLowerCase()),Ee+q[0].length):-1}function R(ee,xe,Ee){return C(ee,e,xe,Ee)}function B(ee,xe,Ee){return C(ee,r,xe,Ee)}function V(ee,xe,Ee){return C(ee,n,xe,Ee)}function F(ee){return s[ee.getDay()]}function $(ee){return o[ee.getDay()]}function L(ee){return l[ee.getMonth()]}function z(ee){return a[ee.getMonth()]}function ce(ee){return i[+(ee.getHours()>=12)]}function te(ee){return 1+~~(ee.getMonth()/3)}function be(ee){return s[ee.getUTCDay()]}function st(ee){return o[ee.getUTCDay()]}function rt(ee){return l[ee.getUTCMonth()]}function Vt(ee){return a[ee.getUTCMonth()]}function pt(ee){return i[+(ee.getUTCHours()>=12)]}function Zt(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var xe=w(ee+="",x);return xe.toString=function(){return ee},xe},parse:function(ee){var xe=A(ee+="",!1);return xe.toString=function(){return ee},xe},utcFormat:function(ee){var xe=w(ee+="",S);return xe.toString=function(){return ee},xe},utcParse:function(ee){var xe=A(ee+="",!0);return xe.toString=function(){return ee},xe}}}var nU={"-":"",_:" ",0:"0"},$r=/^\s*\d+/,xVe=/^%/,_Ve=/[\\^$*+?|[\]().{}]/g;function tt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function wVe(t){return t.replace(_Ve,"\\$&")}function zh(t){return new RegExp("^(?:"+t.map(wVe).join("|")+")","i")}function Gh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function SVe(t,e,r){var n=$r.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function EVe(t,e,r){var n=$r.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function AVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function CVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function TVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function iU(t,e,r){var n=$r.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function oU(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function PVe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function IVe(t,e,r){var n=$r.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function NVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function sU(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function kVe(t,e,r){var n=$r.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function aU(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function OVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function RVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function jVe(t,e,r){var n=$r.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function $Ve(t,e,r){var n=$r.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DVe(t,e,r){var n=xVe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function MVe(t,e,r){var n=$r.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function FVe(t,e,r){var n=$r.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function lU(t,e){return tt(t.getDate(),e,2)}function LVe(t,e){return tt(t.getHours(),e,2)}function BVe(t,e){return tt(t.getHours()%12||12,e,2)}function UVe(t,e){return tt(1+Kg.count(Is(t),t),e,3)}function pX(t,e){return tt(t.getMilliseconds(),e,3)}function VVe(t,e){return pX(t,e)+"000"}function WVe(t,e){return tt(t.getMonth()+1,e,2)}function zVe(t,e){return tt(t.getMinutes(),e,2)}function GVe(t,e){return tt(t.getSeconds(),e,2)}function qVe(t){var e=t.getDay();return e===0?7:e}function HVe(t,e){return tt(fS.count(Is(t)-1,t),e,2)}function mX(t){var e=t.getDay();return e>=4||e===0?Ed(t):Ed.ceil(t)}function KVe(t,e){return t=mX(t),tt(Ed.count(Is(t),t)+(Is(t).getDay()===4),e,2)}function YVe(t){return t.getDay()}function QVe(t,e){return tt(M_.count(Is(t)-1,t),e,2)}function XVe(t,e){return tt(t.getFullYear()%100,e,2)}function JVe(t,e){return t=mX(t),tt(t.getFullYear()%100,e,2)}function ZVe(t,e){return tt(t.getFullYear()%1e4,e,4)}function e6e(t,e){var r=t.getDay();return t=r>=4||r===0?Ed(t):Ed.ceil(t),tt(t.getFullYear()%1e4,e,4)}function t6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function cU(t,e){return tt(t.getUTCDate(),e,2)}function r6e(t,e){return tt(t.getUTCHours(),e,2)}function n6e(t,e){return tt(t.getUTCHours()%12||12,e,2)}function i6e(t,e){return tt(1+uS.count(Ns(t),t),e,3)}function yX(t,e){return tt(t.getUTCMilliseconds(),e,3)}function o6e(t,e){return yX(t,e)+"000"}function s6e(t,e){return tt(t.getUTCMonth()+1,e,2)}function a6e(t,e){return tt(t.getUTCMinutes(),e,2)}function l6e(t,e){return tt(t.getUTCSeconds(),e,2)}function c6e(t){var e=t.getUTCDay();return e===0?7:e}function u6e(t,e){return tt(dS.count(Ns(t)-1,t),e,2)}function gX(t){var e=t.getUTCDay();return e>=4||e===0?Ad(t):Ad.ceil(t)}function f6e(t,e){return t=gX(t),tt(Ad.count(Ns(t),t)+(Ns(t).getUTCDay()===4),e,2)}function d6e(t){return t.getUTCDay()}function h6e(t,e){return tt(F_.count(Ns(t)-1,t),e,2)}function p6e(t,e){return tt(t.getUTCFullYear()%100,e,2)}function m6e(t,e){return t=gX(t),tt(t.getUTCFullYear()%100,e,2)}function y6e(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function g6e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Ad(t):Ad.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function v6e(){return"+0000"}function uU(){return"%"}function fU(t){return+t}function dU(t){return Math.floor(+t/1e3)}var au,vX,bX;b6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function b6e(t){return au=bVe(t),vX=au.format,au.parse,bX=au.utcFormat,au.utcParse,au}function x6e(t){return new Date(t)}function _6e(t){return t instanceof Date?+t:+new Date(+t)}function Xj(t,e,r,n,i,o,s,a,l,c){var u=Mj(),f=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),y=c("%I:%M"),g=c("%I %p"),b=c("%a %d"),v=c("%b %d"),x=c("%B"),S=c("%Y");function _(w){return(l(w)<w?p:a(w)<w?m:s(w)<w?y:o(w)<w?g:n(w)<w?i(w)<w?b:v:r(w)<w?x:S)(w)}return u.invert=function(w){return new Date(f(w))},u.domain=function(w){return arguments.length?h(Array.from(w,_6e)):h().map(x6e)},u.ticks=function(w){var A=h();return t(A[0],A[A.length-1],w??10)},u.tickFormat=function(w,A){return A==null?_:c(A)},u.nice=function(w){var A=h();return(!w||typeof w.range!="function")&&(w=e(A[0],A[A.length-1],w??10)),w?h(oX(A,w)):u},u.copy=function(){return Hg(u,Xj(t,e,r,n,i,o,s,a,l,c))},u}function w6e(){return Li.apply(Xj(gVe,vVe,Is,Yj,fS,Kg,Hj,Gj,Vl,vX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function S6e(){return Li.apply(Xj(mVe,yVe,Ns,Qj,dS,uS,Kj,qj,Vl,bX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hS(){var t=0,e=1,r,n,i,o,s=An,a=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-r)*i,a?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,r=o(t=+t),n=o(e=+e),i=r===n?0:1/(n-r),c):[t,e]},c.clamp=function(f){return arguments.length?(a=!!f,c):a},c.interpolator=function(f){return arguments.length?(s=f,c):s};function u(f){return function(h){var p,m;return arguments.length?([p,m]=h,s=f(p,m),c):[s(0),s(1)]}}return c.range=u(ch),c.rangeRound=u(Dj),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return o=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),c}}function fl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xX(){var t=ul(hS()(An));return t.copy=function(){return fl(t,xX())},Ds.apply(t,arguments)}function _X(){var t=Bj(hS()).domain([1,10]);return t.copy=function(){return fl(t,_X()).base(t.base())},Ds.apply(t,arguments)}function wX(){var t=Uj(hS());return t.copy=function(){return fl(t,wX()).constant(t.constant())},Ds.apply(t,arguments)}function Jj(){var t=Vj(hS());return t.copy=function(){return fl(t,Jj()).exponent(t.exponent())},Ds.apply(t,arguments)}function E6e(){return Jj.apply(null,arguments).exponent(.5)}function SX(){var t=[],e=An;function r(n){if(n!=null&&!isNaN(n=+n))return e((Gg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fa),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>uUe(t,o/n))},r.copy=function(){return SX(e).domain(t)},Ds.apply(r,arguments)}function pS(){var t=0,e=.5,r=1,n=1,i,o,s,a,l,c=An,u,f=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-o)*(n*y<n*o?a:l),c(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=u(t=+t),o=u(e=+e),s=u(r=+r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(c=y,p):c};function m(y){return function(g){var b,v,x;return arguments.length?([b,v,x]=g,c=DUe(y,[b,v,x]),p):[c(0),c(.5),c(1)]}}return p.range=m(ch),p.rangeRound=m(Dj),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return u=y,i=y(t),o=y(e),s=y(r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p}}function EX(){var t=ul(pS()(An));return t.copy=function(){return fl(t,EX())},Ds.apply(t,arguments)}function AX(){var t=Bj(pS()).domain([.1,1,10]);return t.copy=function(){return fl(t,AX()).base(t.base())},Ds.apply(t,arguments)}function CX(){var t=Uj(pS());return t.copy=function(){return fl(t,CX()).constant(t.constant())},Ds.apply(t,arguments)}function Zj(){var t=Vj(pS());return t.copy=function(){return fl(t,Zj()).exponent(t.exponent())},Ds.apply(t,arguments)}function A6e(){return Zj.apply(null,arguments).exponent(.5)}const hU=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sy,scaleDiverging:EX,scaleDivergingLog:AX,scaleDivergingPow:Zj,scaleDivergingSqrt:A6e,scaleDivergingSymlog:CX,scaleIdentity:iX,scaleImplicit:PI,scaleLinear:$_,scaleLog:sX,scaleOrdinal:Rj,scalePoint:Hp,scalePow:Wj,scaleQuantile:cX,scaleQuantize:uX,scaleRadial:lX,scaleSequential:xX,scaleSequentialLog:_X,scaleSequentialPow:Jj,scaleSequentialQuantile:SX,scaleSequentialSqrt:E6e,scaleSequentialSymlog:wX,scaleSqrt:oVe,scaleSymlog:aX,scaleThreshold:fX,scaleTime:w6e,scaleUtc:S6e,tickFormat:nX},Symbol.toStringTag,{value:"Module"}));var C6e=eh;function T6e(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(a===void 0?s===s&&!C6e(s):r(s,a)))var a=s,l=o}return l}var TX=T6e;function P6e(t,e){return t>e}var I6e=P6e,N6e=TX,k6e=I6e,O6e=ah;function R6e(t){return t&&t.length?N6e(t,O6e,k6e):void 0}var j6e=R6e;const mS=ot(j6e);function $6e(t,e){return t<e}var D6e=$6e,M6e=TX,F6e=D6e,L6e=ah;function B6e(t){return t&&t.length?M6e(t,L6e,F6e):void 0}var U6e=B6e;const yS=ot(U6e);var V6e=pj,W6e=ll,z6e=TQ,G6e=Bn;function q6e(t,e){var r=G6e(t)?V6e:z6e;return r(t,W6e(e))}var H6e=q6e,K6e=AQ,Y6e=H6e;function Q6e(t,e){return K6e(Y6e(t,e),1)}var X6e=Q6e;const J6e=ot(X6e);var Z6e=Tj;function e5e(t,e){return Z6e(t,e)}var t5e=e5e;const gS=ot(t5e);var uh=1e9,r5e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},t$,jt=!0,Mi="[DecimalError] ",yc=Mi+"Invalid argument: ",e$=Mi+"Exponent out of range: ",fh=Math.floor,Nl=Math.pow,n5e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yn,Tr=1e7,Pt=7,PX=9007199254740991,L_=fh(PX/Pt),le={};le.absoluteValue=le.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};le.comparedTo=le.cmp=function(t){var e,r,n,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};le.decimalPlaces=le.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Pt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};le.dividedBy=le.div=function(t){return vs(this,new this.constructor(t))};le.dividedToIntegerBy=le.idiv=function(t){var e=this,r=e.constructor;return gt(vs(e,new r(t),0,1),r.precision)};le.equals=le.eq=function(t){return!this.cmp(t)};le.exponent=function(){return nr(this)};le.greaterThan=le.gt=function(t){return this.cmp(t)>0};le.greaterThanOrEqualTo=le.gte=function(t){return this.cmp(t)>=0};le.isInteger=le.isint=function(){return this.e>this.d.length-2};le.isNegative=le.isneg=function(){return this.s<0};le.isPositive=le.ispos=function(){return this.s>0};le.isZero=function(){return this.s===0};le.lessThan=le.lt=function(t){return this.cmp(t)<0};le.lessThanOrEqualTo=le.lte=function(t){return this.cmp(t)<1};le.logarithm=le.log=function(t){var e,r=this,n=r.constructor,i=n.precision,o=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Yn))throw Error(Mi+"NaN");if(r.s<1)throw Error(Mi+(r.s?"NaN":"-Infinity"));return r.eq(Yn)?new n(0):(jt=!1,e=vs(fy(r,o),fy(t,o),o),jt=!0,gt(e,i))};le.minus=le.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?kX(e,t):IX(e,(t.s=-t.s,t))};le.modulo=le.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Mi+"NaN");return r.s?(jt=!1,e=vs(r,t,0,1).times(t),jt=!0,r.minus(e)):gt(new n(r),i)};le.naturalExponential=le.exp=function(){return NX(this)};le.naturalLogarithm=le.ln=function(){return fy(this)};le.negated=le.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};le.plus=le.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?IX(e,t):kX(e,(t.s=-t.s,t))};le.precision=le.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yc+t);if(e=nr(i)+1,n=i.d.length-1,r=n*Pt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};le.squareRoot=le.sqrt=function(){var t,e,r,n,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Mi+"NaN")}for(t=nr(a),jt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Do(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=fh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(o=n,n=o.plus(vs(a,o,s+2)).times(.5),Do(o.d).slice(0,s)===(e=Do(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(gt(o,r+1,0),o.times(o).eq(a)){n=o;break}}else if(e!="9999")break;s+=4}return jt=!0,gt(n,r)};le.times=le.mul=function(t){var e,r,n,i,o,s,a,l,c,u=this,f=u.constructor,h=u.d,p=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,r=u.e+t.e,l=h.length,c=p.length,l<c&&(o=h,h=p,p=o,s=l,l=c,c=s),o=[],s=l+c,n=s;n--;)o.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)a=o[i]+p[n]*h[i-n-1]+e,o[i--]=a%Tr|0,e=a/Tr|0;o[i]=(o[i]+e)%Tr|0}for(;!o[--s];)o.pop();return e?++r:o.shift(),t.d=o,t.e=r,jt?gt(t,f.precision):t};le.toDecimalPlaces=le.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Ko(t,0,uh),e===void 0?e=n.rounding:Ko(e,0,8),gt(r,t+nr(r)+1,e))};le.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Rc(n,!0):(Ko(t,0,uh),e===void 0?e=i.rounding:Ko(e,0,8),n=gt(new i(n),t+1,e),r=Rc(n,!0,t+1)),r};le.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?Rc(i):(Ko(t,0,uh),e===void 0?e=o.rounding:Ko(e,0,8),n=gt(new o(i),t+nr(i)+1,e),r=Rc(n.abs(),!1,t+nr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};le.toInteger=le.toint=function(){var t=this,e=t.constructor;return gt(new e(t),nr(t)+1,e.rounding)};le.toNumber=function(){return+this};le.toPower=le.pow=function(t){var e,r,n,i,o,s,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Yn);if(a=new l(a),!a.s){if(t.s<1)throw Error(Mi+"Infinity");return a}if(a.eq(Yn))return a;if(n=l.precision,t.eq(Yn))return gt(a,n);if(e=t.e,r=t.d.length-1,s=e>=r,o=a.s,s){if((r=u<0?-u:u)<=PX){for(i=new l(Yn),e=Math.ceil(n/Pt+4),jt=!1;r%2&&(i=i.times(a),mU(i.d,e)),r=fh(r/2),r!==0;)a=a.times(a),mU(a.d,e);return jt=!0,t.s<0?new l(Yn).div(i):gt(i,n)}}else if(o<0)throw Error(Mi+"NaN");return o=o<0&&t.d[Math.max(e,r)]&1?-1:1,a.s=1,jt=!1,i=t.times(fy(a,n+c)),jt=!0,i=NX(i),i.s=o,i};le.toPrecision=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?(r=nr(i),n=Rc(i,r<=o.toExpNeg||r>=o.toExpPos)):(Ko(t,1,uh),e===void 0?e=o.rounding:Ko(e,0,8),i=gt(new o(i),t,e),r=nr(i),n=Rc(i,t<=r||r<=o.toExpNeg,t)),n};le.toSignificantDigits=le.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Ko(t,1,uh),e===void 0?e=n.rounding:Ko(e,0,8)),gt(new n(r),t,e)};le.toString=le.valueOf=le.val=le.toJSON=le[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=nr(t),r=t.constructor;return Rc(t,e<=r.toExpNeg||e>=r.toExpPos)};function IX(t,e){var r,n,i,o,s,a,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),jt?gt(e,f):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(n=l,o=-o,a=c.length):(n=c,i=s,a=l.length),s=Math.ceil(f/Pt),a=s>a?s+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=l.length,o=c.length,a-o<0&&(o=a,n=c,c=l,l=n),r=0;o;)r=(l[--o]=l[o]+c[o]+r)/Tr|0,l[o]%=Tr;for(r&&(l.unshift(r),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,jt?gt(e,f):e}function Ko(t,e,r){if(t!==~~t||t<e||t>r)throw Error(yc+t)}function Do(t){var e,r,n,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)n=t[e]+"",r=Pt-n.length,r&&(o+=Js(r)),o+=n;s=t[e],n=s+"",r=Pt-n.length,r&&(o+=Js(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var vs=function(){function t(n,i){var o,s=0,a=n.length;for(n=n.slice();a--;)o=n[a]*i+s,n[a]=o%Tr|0,s=o/Tr|0;return s&&n.unshift(s),n}function e(n,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function r(n,i,o){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*Tr+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,s){var a,l,c,u,f,h,p,m,y,g,b,v,x,S,_,w,A,C,I=n.constructor,T=n.s==i.s?1:-1,P=n.d,O=i.d;if(!n.s)return new I(n);if(!i.s)throw Error(Mi+"Division by zero");for(l=n.e-i.e,A=O.length,_=P.length,p=new I(T),m=p.d=[],c=0;O[c]==(P[c]||0);)++c;if(O[c]>(P[c]||0)&&--l,o==null?v=o=I.precision:s?v=o+(nr(n)-nr(i))+1:v=o,v<0)return new I(0);if(v=v/Pt+2|0,c=0,A==1)for(u=0,O=O[0],v++;(c<_||u)&&v--;c++)x=u*Tr+(P[c]||0),m[c]=x/O|0,u=x%O|0;else{for(u=Tr/(O[0]+1)|0,u>1&&(O=t(O,u),P=t(P,u),A=O.length,_=P.length),S=A,y=P.slice(0,A),g=y.length;g<A;)y[g++]=0;C=O.slice(),C.unshift(0),w=O[0],O[1]>=Tr/2&&++w;do u=0,a=e(O,y,A,g),a<0?(b=y[0],A!=g&&(b=b*Tr+(y[1]||0)),u=b/w|0,u>1?(u>=Tr&&(u=Tr-1),f=t(O,u),h=f.length,g=y.length,a=e(f,y,h,g),a==1&&(u--,r(f,A<h?C:O,h))):(u==0&&(a=u=1),f=O.slice()),h=f.length,h<g&&f.unshift(0),r(y,f,g),a==-1&&(g=y.length,a=e(O,y,A,g),a<1&&(u++,r(y,A<g?C:O,g))),g=y.length):a===0&&(u++,y=[0]),m[c++]=u,a&&y[0]?y[g++]=P[S]||0:(y=[P[S]],g=1);while((S++<_||y[0]!==void 0)&&v--)}return m[0]||m.shift(),p.e=l,gt(p,s?o+nr(p)+1:o)}}();function NX(t,e){var r,n,i,o,s,a,l=0,c=0,u=t.constructor,f=u.precision;if(nr(t)>16)throw Error(e$+nr(t));if(!t.s)return new u(Yn);for(e==null?(jt=!1,a=f):a=e,s=new u(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(n=Math.log(Nl(2,c))/Math.LN10*2+5|0,a+=n,r=i=o=new u(Yn),u.precision=a;;){if(i=gt(i.times(t),a),r=r.times(++l),s=o.plus(vs(i,r,a)),Do(s.d).slice(0,a)===Do(o.d).slice(0,a)){for(;c--;)o=gt(o.times(o),a);return u.precision=f,e==null?(jt=!0,gt(o,f)):o}o=s}}function nr(t){for(var e=t.e*Pt,r=t.d[0];r>=10;r/=10)e++;return e}function tC(t,e,r){if(e>t.LN10.sd())throw jt=!0,r&&(t.precision=r),Error(Mi+"LN10 precision limit exceeded");return gt(new t(t.LN10),e)}function Js(t){for(var e="";t--;)e+="0";return e}function fy(t,e){var r,n,i,o,s,a,l,c,u,f=1,h=10,p=t,m=p.d,y=p.constructor,g=y.precision;if(p.s<1)throw Error(Mi+(p.s?"NaN":"-Infinity"));if(p.eq(Yn))return new y(0);if(e==null?(jt=!1,c=g):c=e,p.eq(10))return e==null&&(jt=!0),tC(y,c);if(c+=h,y.precision=c,r=Do(m),n=r.charAt(0),o=nr(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Do(p.d),n=r.charAt(0),f++;o=nr(p),n>1?(p=new y("0."+r),o++):p=new y(n+"."+r.slice(1))}else return l=tC(y,c+2,g).times(o+""),p=fy(new y(n+"."+r.slice(1)),c-h).plus(l),y.precision=g,e==null?(jt=!0,gt(p,g)):p;for(a=s=p=vs(p.minus(Yn),p.plus(Yn),c),u=gt(p.times(p),c),i=3;;){if(s=gt(s.times(u),c),l=a.plus(vs(s,new y(i),c)),Do(l.d).slice(0,c)===Do(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(tC(y,c+2,g).times(o+""))),a=vs(a,new y(f),c),y.precision=g,e==null?(jt=!0,gt(a,g)):a;a=l,i+=2}}function pU(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=fh(r/Pt),t.d=[],n=(r+1)%Pt,r<0&&(n+=Pt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Pt;n<i;)t.d.push(+e.slice(n,n+=Pt));e=e.slice(n),n=Pt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),jt&&(t.e>L_||t.e<-L_))throw Error(e$+r)}else t.s=0,t.e=0,t.d=[0];return t}function gt(t,e,r){var n,i,o,s,a,l,c,u,f=t.d;for(s=1,o=f[0];o>=10;o/=10)s++;if(n=e-s,n<0)n+=Pt,i=e,c=f[u=0];else{if(u=Math.ceil((n+1)/Pt),o=f.length,u>=o)return t;for(c=o=f[u],s=1;o>=10;o/=10)s++;n%=Pt,i=n-Pt+s}if(r!==void 0&&(o=Nl(10,s-i-1),a=c/o%10|0,l=e<0||f[u+1]!==void 0||c%o,l=r<4?(a||l)&&(r==0||r==(t.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?i>0?c/Nl(10,s-i):0:f[u-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return l?(o=nr(t),f.length=1,e=e-o-1,f[0]=Nl(10,(Pt-e%Pt)%Pt),t.e=fh(-e/Pt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=u,o=1,u--):(f.length=u+1,o=Nl(10,Pt-n),f[u]=i>0?(c/Nl(10,s-i)%Nl(10,i)|0)*o:0),l)for(;;)if(u==0){(f[0]+=o)==Tr&&(f[0]=1,++t.e);break}else{if(f[u]+=o,f[u]!=Tr)break;f[u--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(jt&&(t.e>L_||t.e<-L_))throw Error(e$+nr(t));return t}function kX(t,e){var r,n,i,o,s,a,l,c,u,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),jt?gt(e,p):e;if(l=t.d,f=e.d,n=e.e,c=t.e,l=l.slice(),s=c-n,s){for(u=s<0,u?(r=l,s=-s,a=f.length):(r=f,n=c,a=l.length),i=Math.max(Math.ceil(p/Pt),a)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,a=f.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}s=0}for(u&&(r=l,l=f,f=r,e.s=-e.s),a=l.length,i=f.length-a;i>0;--i)l[a++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(o=i;o&&l[--o]===0;)l[o]=Tr-1;--l[o],l[i]+=Tr}l[i]-=f[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,jt?gt(e,p):e):new h(0)}function Rc(t,e,r){var n,i=nr(t),o=Do(t.d),s=o.length;return e?(r&&(n=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+Js(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Js(-i-1)+o,r&&(n=r-s)>0&&(o+=Js(n))):i>=s?(o+=Js(i+1-s),r&&(n=r-i-1)>0&&(o=o+"."+Js(n))):((n=i+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(o+="."),o+=Js(n))),t.s<0?"-"+o:o}function mU(t,e){if(t.length>e)return t.length=e,!0}function OX(t){var e,r,n;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(yc+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return pU(s,o.toString())}else if(typeof o!="string")throw Error(yc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,n5e.test(o))pU(s,o);else throw Error(yc+o)}if(i.prototype=le,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=OX,i.config=i.set=i5e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function i5e(t){if(!t||typeof t!="object")throw Error(Mi+"Object expected");var e,r,n,i=["precision",1,uh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(fh(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(yc+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(yc+r+": "+n);return this}var t$=OX(r5e);Yn=new t$(1);const mt=t$;function o5e(t){return c5e(t)||l5e(t)||a5e(t)||s5e()}function s5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a5e(t,e){if(t){if(typeof t=="string")return OI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OI(t,e)}}function l5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function c5e(t){if(Array.isArray(t))return OI(t)}function OI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u5e=function(e){return e},RX={"@@functional/placeholder":!0},jX=function(e){return e===RX},yU=function(e){return function r(){return arguments.length===0||arguments.length===1&&jX(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},f5e=function t(e,r){return e===1?r:yU(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==RX}).length;return s>=e?r.apply(void 0,i):t(e-s,yU(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(function(f){return jX(f)?l.shift():f});return r.apply(void 0,o5e(u).concat(l))}))})},vS=function(e){return f5e(e.length,e)},RI=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},d5e=vS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),h5e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return u5e;var i=r.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},jI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},$X=function(e){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r&&o.every(function(a,l){return a===r[l]})||(r=o,n=e.apply(void 0,o)),n}};function p5e(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function m5e(t,e,r){for(var n=new mt(t),i=0,o=[];n.lt(e)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var y5e=vS(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),g5e=vS(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),v5e=vS(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const bS={rangeStep:m5e,getDigitCount:p5e,interpolateNumber:y5e,uninterpolateNumber:g5e,uninterpolateTruncation:v5e};function $I(t){return _5e(t)||x5e(t)||DX(t)||b5e()}function b5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _5e(t){if(Array.isArray(t))return DI(t)}function dy(t,e){return E5e(t)||S5e(t,e)||DX(t,e)||w5e()}function w5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DX(t,e){if(t){if(typeof t=="string")return DI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DI(t,e)}}function DI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S5e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function E5e(t){if(Array.isArray(t))return t}function MX(t){var e=dy(t,2),r=e[0],n=e[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function FX(t,e,r){if(t.lte(0))return new mt(0);var n=bS.getDigitCount(t.toNumber()),i=new mt(10).pow(n),o=t.div(i),s=n!==1?.05:.1,a=new mt(Math.ceil(o.div(s).toNumber())).add(r).mul(s),l=a.mul(i);return e?l:new mt(Math.ceil(l))}function A5e(t,e,r){var n=1,i=new mt(t);if(!i.isint()&&r){var o=Math.abs(t);o<1?(n=new mt(10).pow(bS.getDigitCount(t)-1),i=new mt(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):r||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),a=h5e(d5e(function(l){return i.add(new mt(l-s).mul(n)).toNumber()}),RI);return a(0,e)}function LX(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var o=FX(new mt(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new mt(e).sub(s).div(o).toNumber()),c=a+l+1;return c>r?LX(t,e,r,n,i+1):(c<r&&(l=e>0?l+(r-c):l,a=e>0?a:a+(r-c)),{step:o,tickMin:s.sub(new mt(a).mul(o)),tickMax:s.add(new mt(l).mul(o))})}function C5e(t){var e=dy(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=MX([r,n]),l=dy(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat($I(RI(0,i-1).map(function(){return 1/0}))):[].concat($I(RI(0,i-1).map(function(){return-1/0})),[u]);return r>n?jI(f):f}if(c===u)return A5e(c,i,o);var h=LX(c,u,s,o),p=h.step,m=h.tickMin,y=h.tickMax,g=bS.rangeStep(m,y.add(new mt(.1).mul(p)),p);return r>n?jI(g):g}function T5e(t,e){var r=dy(t,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=MX([n,i]),a=dy(s,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var u=Math.max(e,2),f=FX(new mt(c).sub(l).div(u-1),o,0),h=[].concat($I(bS.rangeStep(new mt(l),new mt(c).sub(new mt(.99).mul(f)),f)),[c]);return n>i?jI(h):h}var P5e=$X(C5e),I5e=$X(T5e),N5e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function B_(){return B_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B_.apply(this,arguments)}function k5e(t,e){return $5e(t)||j5e(t,e)||R5e(t,e)||O5e()}function O5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R5e(t,e){if(t){if(typeof t=="string")return gU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gU(t,e)}}function gU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function $5e(t){if(Array.isArray(t))return t}function D5e(t,e){if(t==null)return{};var r=M5e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function M5e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Yg(t){var e=t.offset,r=t.layout,n=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,c=D5e(t,N5e),u=qe(c),f=o.map(function(h){var p=s(h,i),m=p.x,y=p.y,g=p.value,b=p.errorVal;if(!b)return null;var v=[],x,S;if(Array.isArray(b)){var _=k5e(b,2);x=_[0],S=_[1]}else x=S=b;if(r==="vertical"){var w=a.scale,A=y+e,C=A+n,I=A-n,T=w(g-x),P=w(g+S);v.push({x1:P,y1:C,x2:P,y2:I}),v.push({x1:T,y1:A,x2:P,y2:A}),v.push({x1:T,y1:C,x2:T,y2:I})}else if(r==="horizontal"){var O=l.scale,N=m+e,R=N-n,B=N+n,V=O(g-x),F=O(g+S);v.push({x1:R,y1:F,x2:B,y2:F}),v.push({x1:N,y1:V,x2:N,y2:F}),v.push({x1:R,y1:V,x2:B,y2:V})}return k.createElement(Jt,B_({className:"recharts-errorBar",key:"bar-".concat(v.map(function($){return"".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))},u),v.map(function($){return k.createElement("line",B_({},$,{key:"line-".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))}))});return k.createElement(Jt,{className:"recharts-errorBars"},f)}Yg.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};Yg.displayName="ErrorBar";function hy(t){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(t)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){F5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F5e(t,e,r){return e=L5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L5e(t){var e=B5e(t,"string");return hy(e)==="symbol"?e:String(e)}function B5e(t,e){if(hy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BX=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=To(r,Jm);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(n||[]).reduce(function(l,c){var u=c.item,f=c.props,h=f.sectors||f.data||[];return l.concat(h.map(function(p){return{type:s.props.iconType||u.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):a=(n||[]).map(function(l){var c=l.item,u=c.props,f=u.dataKey,h=u.name,p=u.legendType,m=u.hide;return{inactive:m,dataKey:f,type:s.props.iconType||p||"square",color:r$(c),value:h||f,payload:c.props}}),rC(rC(rC({},s.props),Jm.getWithHeight(s,i)),{},{payload:a,item:s})};function py(t){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(t)}function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){mf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mf(t,e,r){return e=U5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U5e(t){var e=V5e(t,"string");return py(e)==="symbol"?e:String(e)}function V5e(t,e){if(py(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xU(t){return q5e(t)||G5e(t)||z5e(t)||W5e()}function W5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z5e(t,e){if(t){if(typeof t=="string")return MI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MI(t,e)}}function G5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q5e(t){if(Array.isArray(t))return MI(t)}function MI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oi(t,e,r){return Xe(t)||Xe(e)?r:dr(e)?Oi(t,e,r):Me(e)?e(t):r}function Kp(t,e,r,n){var i=J6e(t,function(a){return oi(a,e)});if(r==="number"){var o=i.filter(function(a){return ne(a)||parseFloat(a)});return o.length?[yS(o),mS(o)]:[1/0,-1/0]}var s=n?i.filter(function(a){return!Xe(a)}):i;return s.map(function(a){return dr(a)||a instanceof Date?a:""})}var H5e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<a;c++){var u=c>0?i[c-1].coordinate:i[a-1].coordinate,f=i[c].coordinate,h=c>=a-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(no(f-u)!==no(h-f)){var m=[];if(no(h-f)===no(l[1]-l[0])){p=h;var y=f+l[1]-l[0];m[0]=Math.min(y,(y+u)/2),m[1]=Math.max(y,(y+u)/2)}else{p=u;var g=h+l[1]-l[0];m[0]=Math.min(f,(g+f)/2),m[1]=Math.max(f,(g+f)/2)}var b=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){s=i[c].index;break}}else{var v=Math.min(u,h),x=Math.max(u,h);if(e>(v+f)/2&&e<=(x+f)/2){s=i[c].index;break}}}else for(var S=0;S<a;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},r$=function(e){var r=e,n=r.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(n){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},K5e=function(e){var r=e.barSize,n=e.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var o={},s=Object.keys(i),a=0,l=s.length;a<l;a++)for(var c=i[s[a]].stackGroups,u=Object.keys(c),f=0,h=u.length;f<h;f++){var p=c[u[f]],m=p.items,y=p.cateAxisId,g=m.filter(function(x){return ys(x.type).indexOf("Bar")>=0});if(g&&g.length){var b=g[0].props.barSize,v=g[0].props[y];o[v]||(o[v]=[]),o[v].push({item:g[0],stackList:g.slice(1),barSize:Xe(b)?r:b})}}return o},Y5e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var c=md(r,i,0,!0),u,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/l,m=s.reduce(function(S,_){return S+_.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&p>0&&(h=!0,p*=.9,m=l*p);var y=(i-m)/2>>0,g={offset:y-c,size:0};u=s.reduce(function(S,_){var w={item:_.item,position:{offset:g.offset+g.size+c,size:h?p:_.barSize}},A=[].concat(xU(S),[w]);return g=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:g})}),A},f)}else{var b=md(n,i,0,!0);i-2*b-(l-1)*c<=0&&(c=0);var v=(i-2*b-(l-1)*c)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;u=s.reduce(function(S,_,w){var A=[].concat(xU(S),[{item:_.item,position:{offset:b+(v+c)*w+(v-x)/2,size:x}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:A[A.length-1].position})}),A},f)}return u},Q5e=function(e,r,n,i){var o=n.children,s=n.width,a=n.margin,l=s-(a.left||0)-(a.right||0),c=BX({children:o,legendWidth:l});if(c){var u=i||{},f=u.width,h=u.height,p=c.align,m=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&ne(e[p]))return wi(wi({},e),{},mf({},p,e[p]+(f||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&ne(e[m]))return wi(wi({},e),{},mf({},m,e[m]+(h||0)))}return e},X5e=function(e,r,n){return Xe(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},UX=function(e,r,n,i,o){var s=r.props.children,a=Ri(s,Yg).filter(function(c){return X5e(i,o,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=oi(u,n,0),h=Array.isArray(f)?[yS(f),mS(f)]:[f,f],p=l.reduce(function(m,y){var g=oi(u,y,0),b=h[0]-Math.abs(Array.isArray(g)?g[0]:g),v=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},J5e=function(e,r,n,i,o){var s=r.map(function(a){return UX(e,a,n,o,i)}).filter(function(a){return!Xe(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},VX=function(e,r,n,i,o){var s=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&UX(e,l,c,i)||Kp(e,c,n,o)});if(n==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},WX=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},_U=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(s=!0),l.coordinate});return o||a.push(r),s||a.push(n),a},Gs=function(e,r,n){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?no(a[0]-a[1])*2*c:c,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+c,value:f,offset:c}});return u.filter(function(f){return!Vg(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+c,value:f,index:h,offset:c}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,h){return{coordinate:i(f)+c,value:o?o[f]:f,index:h,offset:c}})},nC=new WeakMap,o0=function(e,r){if(typeof r!="function")return e;nC.has(e)||nC.set(e,new WeakMap);var n=nC.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},Z5e=function(e,r,n){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:sy(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:$_(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Hp(),realScaleType:"point"}:o==="category"?{scale:sy(),realScaleType:"band"}:{scale:$_(),realScaleType:"linear"};if(Ug(i)){var l="scale".concat(rS(i));return{scale:(hU[l]||Hp)(),realScaleType:hU[l]?l:"point"}}return Me(i)?{scale:i}:{scale:Hp(),realScaleType:"point"}},wU=1e-4,eWe=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),o=Math.min(i[0],i[1])-wU,s=Math.max(i[0],i[1])+wU,a=e(r[0]),l=e(r[n-1]);(a<o||a>s||l<o||l>s)&&e.domain([r[0],r[n-1]])}},tWe=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},rWe=function(e,r){if(!r||r.length!==2||!ne(r[0])||!ne(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[e[0],e[1]];return(!ne(e[0])||e[0]<n)&&(o[0]=n),(!ne(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},nWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0,a=0;a<r;++a){var l=Vg(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=o,e[a][n][1]=o+l,o=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+l,s=e[a][n][1])}},iWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0;s<r;++s){var a=Vg(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},oWe={sign:nWe,expand:tRe,none:yd,silhouette:rRe,wiggle:nRe,positive:iWe},sWe=function(e,r,n){var i=r.map(function(a){return a.props.dataKey}),o=oWe[n],s=eRe().keys(i).value(function(a,l){return+oi(a,l,0)}).order(rI).offset(o);return s(e)},aWe=function(e,r,n,i,o,s){if(!e)return null;var a=s?r.reverse():r,l={},c=a.reduce(function(f,h){var p=h.props,m=p.stackId,y=p.hide;if(y)return f;var g=h.props[n],b=f[g]||{hasStack:!1,stackGroups:{}};if(dr(m)){var v=b.stackGroups[m]||{numericAxisId:n,cateAxisId:i,items:[]};v.items.push(h),b.hasStack=!0,b.stackGroups[m]=v}else b.stackGroups[Wg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return wi(wi({},f),{},mf({},g,b))},l),u={};return Object.keys(c).reduce(function(f,h){var p=c[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,g){var b=p.stackGroups[g];return wi(wi({},y),{},mf({},g,{numericAxisId:n,cateAxisId:i,items:b.items,stackedData:sWe(e,b.items,o)}))},m)}return wi(wi({},f),{},mf({},h,p))},u)},lWe=function(e,r){var n=r.realScaleType,i=r.type,o=r.tickCount,s=r.originalDomain,a=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=P5e(c,o,a);return e.domain([yS(u),mS(u)]),{niceTicks:u}}if(o&&i==="number"){var f=e.domain(),h=I5e(f,o,a);return{niceTicks:h}}return null},SU=function(e){var r=e.axis,n=e.ticks,i=e.bandSize,o=e.entry,s=e.index,a=e.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Xe(o[r.dataKey])){var l=l_(n,"value",o[r.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=oi(o,Xe(a)?r.dataKey:a);return Xe(c)?null:r.scale(c)},EU=function(e){var r=e.axis,n=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(r.type==="category")return n[a]?n[a].coordinate+i:null;var l=oi(s,r.dataKey,r.domain[a]);return Xe(l)?null:r.scale(l)-o/2+i},cWe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},uWe=function(e,r){var n=e.props.stackId;if(dr(n)){var i=r[n];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},fWe=function(e){return e.reduce(function(r,n){return[yS(n.concat([r[0]]).filter(ne)),mS(n.concat([r[1]]).filter(ne))]},[1/0,-1/0])},zX=function(e,r,n){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(c,u){var f=fWe(u.slice(r,n+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},AU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FI=function(e,r,n){if(Me(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(ne(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(AU.test(e[0])){var o=+AU.exec(e[0])[1];i[0]=r[0]-o}else Me(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(ne(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(CU.test(e[1])){var s=+CU.exec(e[1])[1];i[1]=r[1]+s}else Me(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},U_=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var o=Ij(r,function(f){return f.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],u=o[a-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},TU=function(e,r,n){return!e||!e.length||gS(e,Oi(n,"type.defaultProps.domain"))?r:e},GX=function(e,r){var n=e.props,i=n.dataKey,o=n.name,s=n.unit,a=n.formatter,l=n.tooltipType,c=n.chartType;return wi(wi({},qe(e)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:r$(e),value:oi(r,i),type:l,payload:r,chartType:c})};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){dWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dWe(t,e,r){return e=hWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hWe(t){var e=pWe(t,"string");return my(e)==="symbol"?e:String(e)}function pWe(t,e){if(my(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(my(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V_=Math.PI/180,mWe=function(e){return e*180/Math.PI},qr=function(e,r,n,i){return{x:e+Math.cos(-V_*i)*n,y:r+Math.sin(-V_*i)*n}},yWe=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-s,2))},gWe=function(e,r){var n=e.x,i=e.y,o=r.cx,s=r.cy,a=yWe({x:n,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(n-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:mWe(c),angleInRadian:c}},vWe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),s=Math.min(i,o);return{startAngle:r-s*360,endAngle:n-s*360}},bWe=function(e,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},NU=function(e,r){var n=e.x,i=e.y,o=gWe({x:n,y:i},r),s=o.radius,a=o.angle,l=r.innerRadius,c=r.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=vWe(r),f=u.startAngle,h=u.endAngle,p=a,m;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}return m?IU(IU({},r),{},{radius:s,angle:bWe(p,r)}):null};function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}var xWe=["offset"];function _We(t){return AWe(t)||EWe(t)||SWe(t)||wWe()}function wWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SWe(t,e){if(t){if(typeof t=="string")return LI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LI(t,e)}}function EWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AWe(t){if(Array.isArray(t))return LI(t)}function LI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CWe(t,e){if(t==null)return{};var r=TWe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function TWe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function kU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(r),!0).forEach(function(n){PWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PWe(t,e,r){return e=IWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IWe(t){var e=NWe(t,"string");return yy(e)==="symbol"?e:String(e)}function NWe(t,e){if(yy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(yy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gy.apply(this,arguments)}var kWe=function(e){var r=e.value,n=e.formatter,i=Xe(e.children)?r:e.children;return Me(n)?n(i):i},OWe=function(e,r){var n=no(r-e),i=Math.min(Math.abs(r-e),360);return n*i},RWe=function(e,r,n){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,c=l.cx,u=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,y=l.clockWise,g=(f+h)/2,b=OWe(p,m),v=b>=0?1:-1,x,S;i==="insideStart"?(x=p+v*s,S=y):i==="insideEnd"?(x=m-v*s,S=!y):i==="end"&&(x=m+v*s,S=y),S=b<=0?S:!S;var _=qr(c,u,g,x),w=qr(c,u,g,x+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),C=Xe(e.id)?Wg("recharts-radial-line-"):e.id;return k.createElement("text",gy({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",a)}),k.createElement("defs",null,k.createElement("path",{id:C,d:A})),k.createElement("textPath",{xlinkHref:"#".concat(C)},r))},jWe=function(e){var r=e.viewBox,n=e.offset,i=e.position,o=r,s=o.cx,a=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,f=o.endAngle,h=(u+f)/2;if(i==="outside"){var p=qr(s,a,c+n,h),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,b=qr(s,a,g,h),v=b.x,x=b.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},$We=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,o=e.position,s=r,a=s.x,l=s.y,c=s.width,u=s.height,f=u>=0?1:-1,h=f*i,p=f>0?"end":"start",m=f>0?"start":"end",y=c>=0?1:-1,g=y*i,b=y>0?"end":"start",v=y>0?"start":"end";if(o==="top"){var x={x:a+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:p};return or(or({},x),n?{height:Math.max(l-n.y,0),width:c}:{})}if(o==="bottom"){var S={x:a+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return or(or({},S),n?{height:Math.max(n.y+n.height-(l+u),0),width:c}:{})}if(o==="left"){var _={x:a-g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return or(or({},_),n?{width:Math.max(_.x-n.x,0),height:u}:{})}if(o==="right"){var w={x:a+c+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return or(or({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:u}:{})}var A=n?{width:c,height:u}:{};return o==="insideLeft"?or({x:a+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},A):o==="insideRight"?or({x:a+c-g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},A):o==="insideTop"?or({x:a+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},A):o==="insideBottom"?or({x:a+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},A):o==="insideTopLeft"?or({x:a+g,y:l+h,textAnchor:v,verticalAnchor:m},A):o==="insideTopRight"?or({x:a+c-g,y:l+h,textAnchor:b,verticalAnchor:m},A):o==="insideBottomLeft"?or({x:a+g,y:l+u-h,textAnchor:v,verticalAnchor:p},A):o==="insideBottomRight"?or({x:a+c-g,y:l+u-h,textAnchor:b,verticalAnchor:p},A):th(o)&&(ne(o.x)||Bl(o.x))&&(ne(o.y)||Bl(o.y))?or({x:a+md(o.x,c),y:l+md(o.y,u),textAnchor:"end",verticalAnchor:"end"},A):or({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},DWe=function(e){return"cx"in e&&ne(e.cx)};function fn(t){var e=t.offset,r=e===void 0?5:e,n=CWe(t,xWe),i=or({offset:r},n),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,h=i.textBreakAll;if(!o||Xe(a)&&Xe(l)&&!E.isValidElement(c)&&!Me(c))return null;if(E.isValidElement(c))return E.cloneElement(c,i);var p;if(Me(c)){if(p=E.createElement(c,i),E.isValidElement(p))return p}else p=kWe(i);var m=DWe(o),y=qe(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return RWe(i,p,y);var g=m?jWe(i):$We(i);return k.createElement(P_,gy({className:ct("recharts-label",f)},y,g,{breakAll:h}),p)}fn.displayName="Label";var qX=function(e){var r=e.cx,n=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,h=e.y,p=e.top,m=e.left,y=e.width,g=e.height,b=e.clockWise,v=e.labelViewBox;if(v)return v;if(ne(y)&&ne(g)){if(ne(f)&&ne(h))return{x:f,y:h,width:y,height:g};if(ne(p)&&ne(m))return{x:p,y:m,width:y,height:g}}return ne(f)&&ne(h)?{x:f,y:h,width:0,height:0}:ne(r)&&ne(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:b}:e.viewBox?e.viewBox:{}},MWe=function(e,r){return e?e===!0?k.createElement(fn,{key:"label-implicit",viewBox:r}):dr(e)?k.createElement(fn,{key:"label-implicit",viewBox:r,value:e}):E.isValidElement(e)?e.type===fn?E.cloneElement(e,{key:"label-implicit",viewBox:r}):k.createElement(fn,{key:"label-implicit",content:e,viewBox:r}):Me(e)?k.createElement(fn,{key:"label-implicit",content:e,viewBox:r}):th(e)?k.createElement(fn,gy({viewBox:r},e,{key:"label-implicit"})):null:null},FWe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=qX(e),s=Ri(i,fn).map(function(l,c){return E.cloneElement(l,{viewBox:r||o,key:"label-".concat(c)})});if(!n)return s;var a=MWe(e.label,r||o);return[a].concat(_We(s))};fn.parseViewBox=qX;fn.renderCallByParent=FWe;function LWe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var BWe=LWe;const UWe=ot(BWe);function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}var VWe=["valueAccessor"],WWe=["data","dataKey","clockWise","id","textBreakAll"];function zWe(t){return KWe(t)||HWe(t)||qWe(t)||GWe()}function GWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qWe(t,e){if(t){if(typeof t=="string")return BI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(t,e)}}function HWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KWe(t){if(Array.isArray(t))return BI(t)}function BI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function W_(){return W_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},W_.apply(this,arguments)}function OU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(r),!0).forEach(function(n){YWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YWe(t,e,r){return e=QWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QWe(t){var e=XWe(t,"string");return vy(e)==="symbol"?e:String(e)}function XWe(t,e){if(vy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jU(t,e){if(t==null)return{};var r=JWe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function JWe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var ZWe=function(e){return Array.isArray(e.value)?UWe(e.value):e.value};function La(t){var e=t.valueAccessor,r=e===void 0?ZWe:e,n=jU(t,VWe),i=n.data,o=n.dataKey,s=n.clockWise,a=n.id,l=n.textBreakAll,c=jU(n,WWe);return!i||!i.length?null:k.createElement(Jt,{className:"recharts-label-list"},i.map(function(u,f){var h=Xe(o)?r(u,f):oi(u&&u.payload,o),p=Xe(a)?{}:{id:"".concat(a,"-").concat(f)};return k.createElement(fn,W_({},qe(u,!0),c,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:fn.parseViewBox(Xe(s)?u:RU(RU({},u),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}La.displayName="LabelList";function e8e(t,e){return t?t===!0?k.createElement(La,{key:"labelList-implicit",data:e}):k.isValidElement(t)||Me(t)?k.createElement(La,{key:"labelList-implicit",data:e,content:t}):th(t)?k.createElement(La,W_({data:e},t,{key:"labelList-implicit"})):null:null}function t8e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Ri(n,La).map(function(s,a){return E.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!r)return i;var o=e8e(t.label,e);return[o].concat(zWe(i))}La.renderCallByParent=t8e;function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UI.apply(this,arguments)}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(n){r8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r8e(t,e,r){return e=n8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n8e(t){var e=i8e(t,"string");return by(e)==="symbol"?e:String(e)}function i8e(t,e){if(by(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(by(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o8e=function(e,r){var n=no(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},s0=function(e){var r=e.cx,n=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+i,f=Math.asin(l/u)/V_,h=c?o:o+s*f,p=qr(r,n,u,h),m=qr(r,n,i,h),y=c?o-s*f:o,g=qr(r,n,u*Math.cos(f*V_),y);return{center:p,circleTangency:m,lineTangency:g,theta:f}},HX=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=o8e(s,a),c=s+l,u=qr(r,n,o,s),f=qr(r,n,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=qr(r,n,i,s),m=qr(r,n,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},s8e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=no(u-c),h=s0({cx:r,cy:n,radius:o,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,y=h.theta,g=s0({cx:r,cy:n,radius:o,angle:u,sign:-f,cornerRadius:s,cornerIsExternal:l}),b=g.circleTangency,v=g.lineTangency,x=g.theta,S=l?Math.abs(c-u):Math.abs(c-u)-y-x;if(S<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):HX({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var w=s0({cx:r,cy:n,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=w.circleTangency,C=w.lineTangency,I=w.theta,T=s0({cx:r,cy:n,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),P=T.circleTangency,O=T.lineTangency,N=T.theta,R=l?Math.abs(c-u):Math.abs(c-u)-I-N;if(R<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},a8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KX=function(e){var r=DU(DU({},a8e),e),n=r.cx,i=r.cy,o=r.innerRadius,s=r.outerRadius,a=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,h=r.className;if(s<o||u===f)return null;var p=ct("recharts-sector",h),m=s-o,y=md(a,m,0,!0),g;return y>0&&Math.abs(u-f)<360?g=s8e({cx:n,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(y,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):g=HX({cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:f}),k.createElement("path",UI({},qe(r,!0),{className:p,d:g,role:"img"}))};function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VI.apply(this,arguments)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){l8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l8e(t,e,r){return e=c8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c8e(t){var e=u8e(t,"string");return xy(e)==="symbol"?e:String(e)}function u8e(t,e){if(xy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(xy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LU={curveBasisClosed:WOe,curveBasisOpen:zOe,curveBasis:VOe,curveBumpX:POe,curveBumpY:IOe,curveLinearClosed:GOe,curveLinear:iS,curveMonotoneX:qOe,curveMonotoneY:HOe,curveNatural:KOe,curveStep:YOe,curveStepAfter:XOe,curveStepBefore:QOe},a0=function(e){return e.x===+e.x&&e.y===+e.y},qh=function(e){return e.x},Hh=function(e){return e.y},f8e=function(e,r){if(Me(e))return e;var n="curve".concat(rS(e));return(n==="curveMonotone"||n==="curveBump")&&r?LU["".concat(n).concat(r==="vertical"?"Y":"X")]:LU[n]||iS},d8e=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=f8e(n,a),f=c?o.filter(function(y){return a0(y)}):o,h;if(Array.isArray(s)){var p=c?s.filter(function(y){return a0(y)}):s,m=f.map(function(y,g){return FU(FU({},y),{},{base:p[g]})});return a==="vertical"?h=Qv().y(Hh).x1(qh).x0(function(y){return y.base.x}):h=Qv().x(qh).y1(Hh).y0(function(y){return y.base.y}),h.defined(a0).curve(u),h(m)}return a==="vertical"&&ne(s)?h=Qv().y(Hh).x1(qh).x0(s):ne(s)?h=Qv().x(qh).y1(Hh).y0(s):h=GY().x(qh).y(Hh),h.defined(a0).curve(u),h(f)},WI=function(e){var r=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?d8e(e):i;return k.createElement("path",VI({},qe(e),c_(e),{className:ct("recharts-curve",r),d:s,ref:o}))};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function z_(){return z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},z_.apply(this,arguments)}function h8e(t,e){return g8e(t)||y8e(t,e)||m8e(t,e)||p8e()}function p8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m8e(t,e){if(t){if(typeof t=="string")return BU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BU(t,e)}}function BU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y8e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function g8e(t){if(Array.isArray(t))return t}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function VU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){v8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function v8e(t,e,r){return e=b8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b8e(t){var e=x8e(t,"string");return _y(e)==="symbol"?e:String(e)}function x8e(t,e){if(_y(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_y(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WU=function(e,r,n,i,o){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,u;if(s>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=o[h]>s?s:o[h];u="M".concat(e,",").concat(r+a*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(r)),u+="L ".concat(e+n-l*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(r+a*f[1])),u+="L ".concat(e+n,",").concat(r+i-a*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+n-l*f[2],",").concat(r+i)),u+="L ".concat(e+l*f[3],",").concat(r+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(r+i-a*f[3])),u+="Z"}else if(s>0&&o===+o&&o>0){var m=Math.min(s,o);u="M ".concat(e,",").concat(r+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(r,`
            L `).concat(e+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n,",").concat(r+a*m,`
            L `).concat(e+n,",").concat(r+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n-l*m,",").concat(r+i,`
            L `).concat(e+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(r+i-a*m," Z")}else u="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return u},_8e=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,o=r.x,s=r.y,a=r.width,l=r.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(o,o+a),u=Math.max(o,o+a),f=Math.min(s,s+l),h=Math.max(s,s+l);return n>=c&&n<=u&&i>=f&&i<=h}return!1},w8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},n$=function(e){var r=VU(VU({},w8e),e),n=E.useRef(),i=E.useState(-1),o=h8e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&a(S)}catch{}},[]);var l=r.x,c=r.y,u=r.width,f=r.height,h=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,v=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var x=ct("recharts-rectangle",p);return v?k.createElement(Ts,{canBegin:s>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:y,animationEasing:m,isActive:v},function(S){var _=S.width,w=S.height,A=S.x,C=S.y;return k.createElement(Ts,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:b,easing:m},k.createElement("path",z_({},qe(r,!0),{className:x,d:WU(A,C,_,w,h),ref:n})))}):k.createElement("path",z_({},qe(r,!0),{className:x,d:WU(l,c,u,f,h)}))};function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zI.apply(this,arguments)}var i$=function(e){var r=e.cx,n=e.cy,i=e.r,o=e.className,s=ct("recharts-dot",o);return r===+r&&n===+n&&i===+i?k.createElement("circle",zI({},qe(e),c_(e),{className:s,cx:r,cy:n,r:i})):null};function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}var S8e=["x","y","top","left","width","height","className"];function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GI.apply(this,arguments)}function zU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function E8e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(r),!0).forEach(function(n){A8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A8e(t,e,r){return e=C8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C8e(t){var e=T8e(t,"string");return wy(e)==="symbol"?e:String(e)}function T8e(t,e){if(wy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P8e(t,e){if(t==null)return{};var r=I8e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function I8e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var N8e=function(e,r,n,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},k8e=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,h=e.height,p=h===void 0?0:h,m=e.className,y=P8e(e,S8e),g=E8e({x:n,y:o,top:a,left:c,width:f,height:p},y);return!ne(n)||!ne(o)||!ne(f)||!ne(p)||!ne(a)||!ne(c)?null:k.createElement("path",GI({},qe(g,!0),{className:ct("recharts-cross",m),d:N8e(n,o,f,p,a,c)}))},O8e=pQ,R8e=O8e(Object.getPrototypeOf,Object),j8e=R8e,$8e=js,D8e=j8e,M8e=$s,F8e="[object Object]",L8e=Function.prototype,B8e=Object.prototype,YX=L8e.toString,U8e=B8e.hasOwnProperty,V8e=YX.call(Object);function W8e(t){if(!M8e(t)||$8e(t)!=F8e)return!1;var e=D8e(t);if(e===null)return!0;var r=U8e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&YX.call(r)==V8e}var z8e=W8e;const G8e=ot(z8e);var q8e=js,H8e=$s,K8e="[object Boolean]";function Y8e(t){return t===!0||t===!1||H8e(t)&&q8e(t)==K8e}var Q8e=Y8e;const X8e=ot(Q8e);function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G_.apply(this,arguments)}function J8e(t,e){return rze(t)||tze(t,e)||eze(t,e)||Z8e()}function Z8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eze(t,e){if(t){if(typeof t=="string")return GU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GU(t,e)}}function GU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tze(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function rze(t){if(Array.isArray(t))return t}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){nze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nze(t,e,r){return e=ize(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ize(t){var e=oze(t,"string");return Sy(e)==="symbol"?e:String(e)}function oze(t,e){if(Sy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KU=function(e,r,n,i,o){var s=n-i,a;return a="M ".concat(e,",").concat(r),a+="L ".concat(e+n,",").concat(r),a+="L ".concat(e+n-s/2,",").concat(r+o),a+="L ".concat(e+n-s/2-i,",").concat(r+o),a+="L ".concat(e,",").concat(r," Z"),a},sze={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aze=function(e){var r=HU(HU({},sze),e),n=E.useRef(),i=E.useState(-1),o=J8e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&a(x)}catch{}},[]);var l=r.x,c=r.y,u=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var v=ct("recharts-trapezoid",p);return b?k.createElement(Ts,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:h,x:l,y:c},duration:y,animationEasing:m,isActive:b},function(x){var S=x.upperWidth,_=x.lowerWidth,w=x.height,A=x.x,C=x.y;return k.createElement(Ts,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:m},k.createElement("path",G_({},qe(r,!0),{className:v,d:KU(A,C,S,_,w),ref:n})))}):k.createElement("g",null,k.createElement("path",G_({},qe(r,!0),{className:v,d:KU(l,c,u,f,h)})))},lze=["option","shapeType","propTransformer","activeClassName","isActive"];function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function cze(t,e){if(t==null)return{};var r=uze(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uze(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function YU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function q_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(r),!0).forEach(function(n){fze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fze(t,e,r){return e=dze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dze(t){var e=hze(t,"string");return Ey(e)==="symbol"?e:String(e)}function hze(t,e){if(Ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pze(t,e){return q_(q_({},e),t)}function mze(t,e){return t==="symbols"}function QU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return k.createElement(n$,r);case"trapezoid":return k.createElement(aze,r);case"sector":return k.createElement(KX,r);case"symbols":if(mze(e))return k.createElement(_j,r);break;default:return null}}function yze(t){return E.isValidElement(t)?t.props:t}function gze(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?pze:n,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=cze(t,lze),c;if(E.isValidElement(e))c=E.cloneElement(e,q_(q_({},l),yze(e)));else if(Me(e))c=e(l);else if(G8e(e)&&!X8e(e)){var u=i(e,l);c=k.createElement(QU,{shapeType:r,elementProps:u})}else{var f=l;c=k.createElement(QU,{shapeType:r,elementProps:f})}return a?k.createElement(Jt,{className:s},c):c}function xS(t,e){return e!=null&&"trapezoids"in t.props}function _S(t,e){return e!=null&&"sectors"in t.props}function Ay(t,e){return e!=null&&"points"in t.props}function vze(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,o=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&o}function bze(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function xze(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function _ze(t,e){var r;return xS(t,e)?r=vze:_S(t,e)?r=bze:Ay(t,e)&&(r=xze),r}function wze(t,e){var r;return xS(t,e)?r="trapezoids":_S(t,e)?r="sectors":Ay(t,e)&&(r="points"),r}function Sze(t,e){if(xS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(_S(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ay(t,e)?e.payload:{}}function Eze(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=wze(r,e),o=Sze(r,e),s=n.filter(function(l,c){var u=gS(o,l),f=r.props[i].filter(function(m){var y=_ze(r,e);return y(m,e)}),h=r.props[i].indexOf(f[f.length-1]),p=c===h;return u&&p}),a=n.indexOf(s[s.length-1]);return a}var Aze=Math.ceil,Cze=Math.max;function Tze(t,e,r,n){for(var i=-1,o=Cze(Aze((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var Pze=Tze,Ize=UQ,XU=1/0,Nze=17976931348623157e292;function kze(t){if(!t)return t===0?t:0;if(t=Ize(t),t===XU||t===-XU){var e=t<0?-1:1;return e*Nze}return t===t?t:0}var QX=kze,Oze=Pze,Rze=lS,iC=QX;function jze(t){return function(e,r,n){return n&&typeof n!="number"&&Rze(e,r,n)&&(r=n=void 0),e=iC(e),r===void 0?(r=e,e=0):r=iC(r),n=n===void 0?e<r?1:-1:iC(n),Oze(e,r,n,t)}}var $ze=jze,Dze=$ze,Mze=Dze(),Fze=Mze;const H_=ot(Fze);function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function JU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(r),!0).forEach(function(n){XX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XX(t,e,r){return e=Lze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lze(t){var e=Bze(t,"string");return Cy(e)==="symbol"?e:String(e)}function Bze(t,e){if(Cy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uze=["Webkit","Moz","O","ms"],Vze=function(e,r){if(!e)return null;var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Uze.reduce(function(o,s){return ZU(ZU({},o),{},XX({},s+n,r))},{});return i[e]=r,i};function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function K_(){return K_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},K_.apply(this,arguments)}function eV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eV(Object(r),!0).forEach(function(n){zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JX(n.key),n)}}function zze(t,e,r){return e&&tV(t.prototype,e),r&&tV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}function qI(t,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qI(t,e)}function qze(t){var e=Kze();return function(){var n=Y_(t),i;if(e){var o=Y_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Hze(this,i)}}function Hze(t,e){if(e&&(Cd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yo(t)}function yo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Y_(t){return Y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y_(t)}function zn(t,e,r){return e=JX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JX(t){var e=Yze(t,"string");return Cd(e)==="symbol"?e:String(e)}function Yze(t,e){if(Cd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qze=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=Hp().domain(H_(0,l)).range([o,o+s-a]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:u}},rV=function(e){return e.changedTouches&&!!e.changedTouches.length},Td=function(t){Gze(r,t);var e=qze(r);function r(n){var i;return Wze(this,r),i=e.call(this,n),zn(yo(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),zn(yo(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),zn(yo(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,s=o.endIndex,a=o.onDragEnd,l=o.startIndex;a==null||a({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),zn(yo(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),zn(yo(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),zn(yo(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),zn(yo(i),"handleSlideDragStart",function(o){var s=rV(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(yo(i),"startX"),endX:i.handleTravellerDragStart.bind(yo(i),"endX")},i.state={},i}return zze(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,s=i.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,h=Math.min(o,s),p=Math.max(o,s),m=r.getIndexInRange(a,h),y=r.getIndexInRange(a,p);return{startIndex:m-m%c,endIndex:y===f?f:y-y%c}}},{key:"getTextOfTick",value:function(i){var o=this.props,s=o.data,a=o.tickFormatter,l=o.dataKey,c=oi(s[i],l,i);return Me(a)?a(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,s=o.slideMoveStartX,a=o.startX,l=o.endX,c=this.props,u=c.x,f=c.width,h=c.travellerWidth,p=c.startIndex,m=c.endIndex,y=c.onChange,g=i.pageX-s;g>0?g=Math.min(g,u+f-h-l,u+f-h-a):g<0&&(g=Math.max(g,u-a,u-l));var b=this.getIndex({startX:a+g,endX:l+g});(b.startIndex!==p||b.endIndex!==m)&&y&&y(b),this.setState({startX:a+g,endX:l+g,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var s=rV(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,s=this.state,a=s.brushMoveStartX,l=s.movingTravellerId,c=s.endX,u=s.startX,f=this.state[l],h=this.props,p=h.x,m=h.width,y=h.travellerWidth,g=h.onChange,b=h.gap,v=h.data,x={startX:this.state.startX,endX:this.state.endX},S=i.pageX-a;S>0?S=Math.min(S,p+m-y-f):S<0&&(S=Math.max(S,p-f)),x[l]=f+S;var _=this.getIndex(x),w=_.startIndex,A=_.endIndex,C=function(){var T=v.length-1;return l==="startX"&&(c>u?w%b===0:A%b===0)||c<u&&A===T||l==="endX"&&(c>u?A%b===0:w%b===0)||c>u&&A===T};this.setState((o={},zn(o,l,f+S),zn(o,"brushMoveStartX",i.pageX),o),function(){g&&C()&&g(_)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,f=this.state[o],h=l.indexOf(f);if(h!==-1){var p=h+i;if(!(p===-1||p>=l.length)){var m=l[p];o==="startX"&&m>=u||o==="endX"&&m<=c||this.setState(zn({},o,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.fill,u=i.stroke;return k.createElement("rect",{stroke:u,fill:c,x:o,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.data,u=i.children,f=i.padding,h=E.Children.only(u);return h?k.cloneElement(h,{x:o,y:s,width:a,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,o){var s=this,a=this.props,l=a.y,c=a.travellerWidth,u=a.height,f=a.traveller,h=a.ariaLabel,p=a.data,m=a.startIndex,y=a.endIndex,g=Math.max(i,this.props.x),b=oC(oC({},qe(this.props)),{},{x:g,y:l,width:c,height:u}),v=h||"Min value: ".concat(p[m].name,", Max value: ").concat(p[y].name);return k.createElement(Jt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,o))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(f,b))}},{key:"renderSlide",value:function(i,o){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(i,o)+u,h=Math.max(Math.abs(o-i)-u,0);return k.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:a,width:h,height:l})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,s=i.endIndex,a=i.y,l=i.height,c=i.travellerWidth,u=i.stroke,f=this.state,h=f.startX,p=f.endX,m=5,y={pointerEvents:"none",fill:u};return k.createElement(Jt,{className:"recharts-brush-texts"},k.createElement(P_,K_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-m,y:a+l/2},y),this.getTextOfTick(o)),k.createElement(P_,K_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+m,y:a+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,o=i.data,s=i.className,a=i.children,l=i.x,c=i.y,u=i.width,f=i.height,h=i.alwaysShowText,p=this.state,m=p.startX,y=p.endX,g=p.isTextActive,b=p.isSlideMoving,v=p.isTravellerMoving,x=p.isTravellerFocused;if(!o||!o.length||!ne(l)||!ne(c)||!ne(u)||!ne(f)||u<=0||f<=0)return null;var S=ct("recharts-brush",s),_=k.Children.count(a)===1,w=Vze("userSelect","none");return k.createElement(Jt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||b||v||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,s=i.y,a=i.width,l=i.height,c=i.stroke,u=Math.floor(s+l/2)-1;return k.createElement(k.Fragment,null,k.createElement("rect",{x:o,y:s,width:a,height:l,fill:c,stroke:"none"}),k.createElement("line",{x1:o+1,y1:u,x2:o+a-1,y2:u,fill:"none",stroke:"#fff"}),k.createElement("line",{x1:o+1,y1:u+2,x2:o+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var s;return k.isValidElement(i)?s=k.cloneElement(i,o):Me(i)?s=i(o):s=r.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(i,o){var s=i.data,a=i.width,l=i.x,c=i.travellerWidth,u=i.updateId,f=i.startIndex,h=i.endIndex;if(s!==o.prevData||u!==o.prevUpdateId)return oC({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?Qze({data:s,width:a,x:l,travellerWidth:c,startIndex:f,endIndex:h}):{scale:null,scaleValues:null});if(o.scale&&(a!==o.prevWidth||l!==o.prevX||c!==o.prevTravellerWidth)){o.scale.range([l,l+a-c]);var p=o.scale.domain().map(function(m){return o.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(i,o){for(var s=i.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);i[c]>o?l=c:a=c}return o>=i[l]?l:a}}]),r}(E.PureComponent);zn(Td,"displayName","Brush");zn(Td,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Xze=Pj;function Jze(t,e){var r;return Xze(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var Zze=Jze,e9e=sQ,t9e=ll,r9e=Zze,n9e=Bn,i9e=lS;function o9e(t,e,r){var n=n9e(t)?e9e:r9e;return r&&i9e(t,e,r)&&(e=void 0),n(t,t9e(e))}var s9e=o9e;const a9e=ot(s9e);var Go=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},nV=PQ;function l9e(t,e,r){e=="__proto__"&&nV?nV(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var c9e=l9e,u9e=c9e,f9e=CQ,d9e=ll;function h9e(t,e){var r={};return e=d9e(e),f9e(t,function(n,i,o){u9e(r,i,e(n,i,o))}),r}var p9e=h9e;const m9e=ot(p9e);function y9e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var g9e=y9e,v9e=Pj;function b9e(t,e){var r=!0;return v9e(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var x9e=b9e,_9e=g9e,w9e=x9e,S9e=ll,E9e=Bn,A9e=lS;function C9e(t,e,r){var n=E9e(t)?_9e:w9e;return r&&A9e(t,e,r)&&(e=void 0),n(t,S9e(e))}var T9e=C9e;const ZX=ot(T9e);function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}var P9e=["x","y"];function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HI.apply(this,arguments)}function iV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(r),!0).forEach(function(n){I9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I9e(t,e,r){return e=N9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N9e(t){var e=k9e(t,"string");return Ty(e)==="symbol"?e:String(e)}function k9e(t,e){if(Ty(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ty(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O9e(t,e){if(t==null)return{};var r=R9e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R9e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function j9e(t,e){var r=t.x,n=t.y,i=O9e(t,P9e),o="".concat(r),s=parseInt(o,10),a="".concat(n),l=parseInt(a,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Kh(Kh(Kh(Kh(Kh({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function oV(t){return k.createElement(gze,HI({shapeType:"rectangle",propTransformer:j9e,activeClassName:"recharts-active-bar"},t))}var $9e=["value","background"];function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(t)}function D9e(t,e){if(t==null)return{};var r=M9e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function M9e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Q_(){return Q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q_.apply(this,arguments)}function sV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(r),!0).forEach(function(n){_a(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eJ(n.key),n)}}function L9e(t,e,r){return e&&aV(t.prototype,e),r&&aV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KI(t,e)}function KI(t,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KI(t,e)}function U9e(t){var e=W9e();return function(){var n=X_(t),i;if(e){var o=X_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return V9e(this,i)}}function V9e(t,e){if(e&&(Pd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mp(t)}function mp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X_(t){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X_(t)}function _a(t,e,r){return e=eJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eJ(t){var e=z9e(t,"string");return Pd(e)==="symbol"?e:String(e)}function z9e(t,e){if(Pd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Pd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wS=function(t){B9e(r,t);var e=U9e(r);function r(){var n;F9e(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),_a(mp(n),"state",{isAnimationFinished:!1}),_a(mp(n),"id",Wg("recharts-bar-")),_a(mp(n),"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),_a(mp(n),"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return L9e(r,[{key:"renderRectanglesStatically",value:function(i){var o=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=qe(this.props);return i&&i.map(function(h,p){var m=p===c,y=m?u:a,g=vr(vr(vr({},f),h),{},{isActive:m,option:y,index:p,dataKey:l,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return k.createElement(Jt,Q_({className:"recharts-bar-rectangle"},u_(o.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value)}),k.createElement(oV,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,s=o.data,a=o.layout,l=o.isAnimationActive,c=o.animationBegin,u=o.animationDuration,f=o.animationEasing,h=o.animationId,p=this.state.prevData;return k.createElement(Ts,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=s.map(function(b,v){var x=p&&p[v];if(x){var S=Qi(x.x,b.x),_=Qi(x.y,b.y),w=Qi(x.width,b.width),A=Qi(x.height,b.height);return vr(vr({},b),{},{x:S(y),y:_(y),width:w(y),height:A(y)})}if(a==="horizontal"){var C=Qi(0,b.height),I=C(y);return vr(vr({},b),{},{y:b.y+b.height-I,height:I})}var T=Qi(0,b.width),P=T(y);return vr(vr({},b),{},{width:P})});return k.createElement(Jt,null,i.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,s=i.isAnimationActive,a=this.state.prevData;return s&&o&&o.length&&(!a||!gS(a,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,s=o.data,a=o.dataKey,l=o.activeIndex,c=qe(this.props.background);return s.map(function(u,f){u.value;var h=u.background,p=D9e(u,$9e);if(!h)return null;var m=vr(vr(vr(vr(vr({},p),{},{fill:"#eee"},h),c),u_(i.props,u,f)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:a,index:f,key:"background-bar-".concat(f),className:"recharts-bar-background-rectangle"});return k.createElement(oV,Q_({option:i.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,h=Ri(f,Yg);if(!h)return null;var p=u==="vertical"?a[0].height/2:a[0].width/2,m=function(b,v){var x=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:x,errorVal:oi(b,v)}},y={clipPath:i?"url(#clipPath-".concat(o,")"):null};return k.createElement(Jt,y,h.map(function(g){return k.cloneElement(g,{key:"error-bar-".concat(o,"-").concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,s=i.data,a=i.className,l=i.xAxis,c=i.yAxis,u=i.left,f=i.top,h=i.width,p=i.height,m=i.isAnimationActive,y=i.background,g=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,v=ct("recharts-bar",a),x=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,_=x||S,w=Xe(g)?this.id:g;return k.createElement(Jt,{className:v},x||S?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(w)},k.createElement("rect",{x:x?u:u-h/2,y:S?f:f-p/2,width:x?h:h*2,height:S?p:p*2}))):null,k.createElement(Jt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!m||b)&&La.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}]),r}(E.PureComponent);_a(wS,"displayName","Bar");_a(wS,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!gs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_a(wS,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,h=t.offset,p=tWe(n,r);if(!p)return null;var m=e.layout,y=r.props,g=y.dataKey,b=y.children,v=y.minPointSize,x=m==="horizontal"?s:o,S=c?x.scale.domain():null,_=cWe({numericAxis:x}),w=Ri(b,WQ),A=f.map(function(C,I){var T,P,O,N,R,B;if(c?T=rWe(c[u+I],S):(T=oi(C,g),Array.isArray(T)||(T=[_,T])),m==="horizontal"){var V,F=[s.scale(T[0]),s.scale(T[1])],$=F[0],L=F[1];P=EU({axis:o,ticks:a,bandSize:i,offset:p.offset,entry:C,index:I}),O=(V=L??$)!==null&&V!==void 0?V:void 0,N=p.size;var z=$-L;if(R=Number.isNaN(z)?0:z,B={x:P,y:s.y,width:N,height:s.height},Math.abs(v)>0&&Math.abs(R)<Math.abs(v)){var ce=no(R||v)*(Math.abs(v)-Math.abs(R));O-=ce,R+=ce}}else{var te=[o.scale(T[0]),o.scale(T[1])],be=te[0],st=te[1];if(P=be,O=EU({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:C,index:I}),N=st-be,R=p.size,B={x:o.x,y:O,width:o.width,height:R},Math.abs(v)>0&&Math.abs(N)<Math.abs(v)){var rt=no(N||v)*(Math.abs(v)-Math.abs(N));N+=rt}}return vr(vr(vr({},C),{},{x:P,y:O,width:N,height:R,value:c?T:T[1],payload:C,background:B},w&&w[I]&&w[I].props),{},{tooltipPayload:[GX(r,C)],tooltipPosition:{x:P+N/2,y:O+R/2}})});return vr({data:A,layout:m},h)});function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function G9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tJ(n.key),n)}}function q9e(t,e,r){return e&&lV(t.prototype,e),r&&lV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(r),!0).forEach(function(n){SS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SS(t,e,r){return e=tJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tJ(t){var e=H9e(t,"string");return Py(e)==="symbol"?e:String(e)}function H9e(t,e){if(Py(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K9e=function(e,r,n,i,o){var s=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},h=!!To(c,wS);return u.reduce(function(p,m){var y=r[m],g=y.orientation,b=y.domain,v=y.padding,x=v===void 0?{}:v,S=y.mirror,_=y.reversed,w="".concat(g).concat(S?"Mirror":""),A,C,I,T,P;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=b[1]-b[0],N=1/0,R=y.categoricalDomain.sort();R.forEach(function(st,rt){rt>0&&(N=Math.min((st||0)-(R[rt-1]||0),N))});var B=N/O,V=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(A=B*V/2),y.padding==="no-gap"){var F=md(e.barCategoryGap,B*V),$=B*V/2;A=$-F-($-F)/V*F}}i==="xAxis"?C=[n.left+(x.left||0)+(A||0),n.left+n.width-(x.right||0)-(A||0)]:i==="yAxis"?C=l==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(A||0),n.top+n.height-(x.bottom||0)-(A||0)]:C=y.range,_&&(C=[C[1],C[0]]);var L=Z5e(y,o,h),z=L.scale,ce=L.realScaleType;z.domain(b).range(C),eWe(z);var te=lWe(z,Hi(Hi({},y),{},{realScaleType:ce}));i==="xAxis"?(P=g==="top"&&!S||g==="bottom"&&S,I=n.left,T=f[w]-P*y.height):i==="yAxis"&&(P=g==="left"&&!S||g==="right"&&S,I=f[w]-P*y.width,T=n.top);var be=Hi(Hi(Hi({},y),te),{},{realScaleType:ce,x:I,y:T,scale:z,width:i==="xAxis"?n.width:y.width,height:i==="yAxis"?n.height:y.height});return be.bandSize=U_(be,te),!y.hide&&i==="xAxis"?f[w]+=(P?-1:1)*be.height:y.hide||(f[w]+=(P?-1:1)*be.width),Hi(Hi({},p),{},SS({},m,be))},{})},rJ=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return{x:Math.min(n,o),y:Math.min(i,s),width:Math.abs(o-n),height:Math.abs(s-i)}},Y9e=function(e){var r=e.x1,n=e.y1,i=e.x2,o=e.y2;return rJ({x:r,y:n},{x:i,y:o})},nJ=function(){function t(e){G9e(this,t),this.scale=e}return q9e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(r)+a}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}]),t}();SS(nJ,"EPS",1e-4);var o$=function(e){var r=Object.keys(e).reduce(function(n,i){return Hi(Hi({},n),{},SS({},i,nJ.create(e[i])))},{});return Hi(Hi({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return m9e(i,function(l,c){return r[c].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return ZX(i,function(o,s){return r[s].isInRange(o)})}})};function Q9e(t){return(t%180+180)%180}var X9e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Q9e(i),s=o*Math.PI/180,a=Math.atan(n/r),l=s>a&&s<Math.PI-a?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)};function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function uV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(r),!0).forEach(function(n){J9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J9e(t,e,r){return e=Z9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z9e(t){var e=eGe(t,"string");return Iy(e)==="symbol"?e:String(e)}function eGe(t,e){if(Iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tGe(t,e){return oGe(t)||iGe(t,e)||nGe(t,e)||rGe()}function rGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nGe(t,e){if(t){if(typeof t=="string")return dV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dV(t,e)}}function dV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iGe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function oGe(t){if(Array.isArray(t))return t}function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YI.apply(this,arguments)}var sGe=function(e,r){var n;return k.isValidElement(e)?n=k.cloneElement(e,r):Me(e)?n=e(r):n=k.createElement("line",YI({},r,{className:"recharts-reference-line-line"})),n},aGe=function(e,r,n,i,o){var s=o.viewBox,a=s.x,l=s.y,c=s.width,u=s.height,f=o.position;if(n){var h=o.y,p=o.yAxis.orientation,m=e.y.apply(h,{position:f});if(Go(o,"discard")&&!e.y.isInRange(m))return null;var y=[{x:a+c,y:m},{x:a,y:m}];return p==="left"?y.reverse():y}if(r){var g=o.x,b=o.xAxis.orientation,v=e.x.apply(g,{position:f});if(Go(o,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:l+u},{x:v,y:l}];return b==="top"?x.reverse():x}if(i){var S=o.segment,_=S.map(function(w){return e.apply(w,{position:f})});return Go(o,"discard")&&a9e(_,function(w){return!e.isInRange(w)})?null:_}return null};function s$(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxis,o=t.yAxis,s=t.shape,a=t.className,l=t.alwaysShow,c=t.clipPathId;pc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=o$({x:i.scale,y:o.scale}),f=dr(e),h=dr(r),p=n&&n.length===2,m=aGe(u,f,h,p,t);if(!m)return null;var y=tGe(m,2),g=y[0],b=g.x,v=g.y,x=y[1],S=x.x,_=x.y,w=Go(t,"hidden")?"url(#".concat(c,")"):void 0,A=fV(fV({clipPath:w},qe(t,!0)),{},{x1:b,y1:v,x2:S,y2:_});return k.createElement(Jt,{className:ct("recharts-reference-line",a)},sGe(s,A),fn.renderCallByParent(t,Y9e({x1:b,y1:v,x2:S,y2:_})))}s$.displayName="ReferenceLine";s$.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QI.apply(this,arguments)}function hV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(r),!0).forEach(function(n){lGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lGe(t,e,r){return e=cGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cGe(t){var e=uGe(t,"string");return Ny(e)==="symbol"?e:String(e)}function uGe(t,e){if(Ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fGe=function(e){var r=e.x,n=e.y,i=e.xAxis,o=e.yAxis,s=o$({x:i.scale,y:o.scale}),a=s.apply({x:r,y:n},{bandAware:!0});return Go(e,"discard")&&!s.isInRange(a)?null:a};function Qg(t){var e=t.x,r=t.y,n=t.r,i=t.alwaysShow,o=t.clipPathId,s=dr(e),a=dr(r);if(pc(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=fGe(t);if(!l)return null;var c=l.x,u=l.y,f=t.shape,h=t.className,p=Go(t,"hidden")?"url(#".concat(o,")"):void 0,m=pV(pV({clipPath:p},qe(t,!0)),{},{cx:c,cy:u});return k.createElement(Jt,{className:ct("recharts-reference-dot",h)},Qg.renderDot(f,m),fn.renderCallByParent(t,{x:c-n,y:u-n,width:2*n,height:2*n}))}Qg.displayName="ReferenceDot";Qg.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};Qg.renderDot=function(t,e){var r;return k.isValidElement(t)?r=k.cloneElement(t,e):Me(t)?r=t(e):r=k.createElement(i$,QI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XI.apply(this,arguments)}function mV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(r),!0).forEach(function(n){dGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dGe(t,e,r){return e=hGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hGe(t){var e=pGe(t,"string");return ky(e)==="symbol"?e:String(e)}function pGe(t,e){if(ky(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ky(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mGe=function(e,r,n,i,o){var s=o.x1,a=o.x2,l=o.y1,c=o.y2,u=o.xAxis,f=o.yAxis;if(!u||!f)return null;var h=o$({x:u.scale,y:f.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Go(o,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:rJ(p,m)};function Xg(t){var e=t.x1,r=t.x2,n=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;pc(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=dr(e),c=dr(r),u=dr(n),f=dr(i),h=t.shape;if(!l&&!c&&!u&&!f&&!h)return null;var p=mGe(l,c,u,f,t);if(!p&&!h)return null;var m=Go(t,"hidden")?"url(#".concat(a,")"):void 0;return k.createElement(Jt,{className:ct("recharts-reference-area",o)},Xg.renderRect(h,yV(yV({clipPath:m},qe(t,!0)),p)),fn.renderCallByParent(t,p))}Xg.displayName="ReferenceArea";Xg.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};Xg.renderRect=function(t,e){var r;return k.isValidElement(t)?r=k.cloneElement(t,e):Me(t)?r=t(e):r=k.createElement(n$,XI({},e,{className:"recharts-reference-area-rect"})),r};function iJ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)if(r===void 0||r(t[i])===!0)n.push(t[i]);else return;return n}function yGe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return X9e(n,r)}function gGe(t,e,r){var n=r==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:n?i:o,end:n?i+s:o+a}:{start:n?i+s:o+a,end:n?i:o}}function J_(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function vGe(t,e){return iJ(t,e+1)}function bGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=e.start,a=e.end,l=0,c=1,u=s,f=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:iJ(n,c)};var y=l,g,b=function(){return g===void 0&&(g=r(m,y)),g},v=m.coordinate,x=l===0||J_(t,v,b,u,a);x||(l=0,u=s,c+=1),x&&(u=v+t*(b()/2+i),l+=c)},h;c<=o.length;)if(h=f(),h)return h.v;return[]}function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function gV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(r),!0).forEach(function(n){xGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xGe(t,e,r){return e=_Ge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Ge(t){var e=wGe(t,"string");return Oy(e)==="symbol"?e:String(e)}function wGe(t,e){if(Oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=o.length,a=e.start,l=e.end,c=function(h){var p=o[h],m,y=function(){return m===void 0&&(m=r(p,h)),m};if(h===s-1){var g=t*(p.coordinate+t*y()/2-l);o[h]=p=sn(sn({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else o[h]=p=sn(sn({},p),{},{tickCoord:p.coordinate});var b=J_(t,p.tickCoord,y,a,l);b&&(l=p.tickCoord-t*(y()/2+i),o[h]=sn(sn({},p),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return o}function EGe(t,e,r,n,i,o){var s=(n||[]).slice(),a=s.length,l=e.start,c=e.end;if(o){var u=n[a-1],f=r(u,a-1),h=t*(u.coordinate+t*f/2-c);s[a-1]=u=sn(sn({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var p=J_(t,u.tickCoord,function(){return f},l,c);p&&(c=u.tickCoord-t*(f/2+i),s[a-1]=sn(sn({},u),{},{isShow:!0}))}for(var m=o?a-1:a,y=function(v){var x=s[v],S,_=function(){return S===void 0&&(S=r(x,v)),S};if(v===0){var w=t*(x.coordinate-t*_()/2-l);s[v]=x=sn(sn({},x),{},{tickCoord:w<0?x.coordinate-w*t:x.coordinate})}else s[v]=x=sn(sn({},x),{},{tickCoord:x.coordinate});var A=J_(t,x.tickCoord,_,l,c);A&&(l=x.tickCoord+t*(_()/2+i),s[v]=sn(sn({},x),{},{isShow:!0}))},g=0;g<m;g++)y(g);return s}function JI(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!n)return[];if(ne(l)||gs.isSsr)return vGe(i,typeof l=="number"&&ne(l)?l:0);var h=[],p=a==="top"||a==="bottom"?"width":"height",m=u&&p==="width"?qp(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},y=function(x,S){var _=Me(c)?c(x.value,S):x.value;return p==="width"?yGe(qp(_,{fontSize:e,letterSpacing:r}),m,f):qp(_,{fontSize:e,letterSpacing:r})[p]},g=i.length>=2?no(i[1].coordinate-i[0].coordinate):1,b=gGe(o,g,p);return l==="equidistantPreserveStart"?bGe(g,b,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?h=EGe(g,b,y,i,s,l==="preserveStartEnd"):h=SGe(g,b,y,i,s),h.filter(function(v){return v.isShow}))}var AGe=["viewBox"],CGe=["viewBox"],TGe=["ticks"];function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(t)}function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vu.apply(this,arguments)}function vV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(r),!0).forEach(function(n){a$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sC(t,e){if(t==null)return{};var r=PGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function PGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function IGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oJ(n.key),n)}}function NGe(t,e,r){return e&&bV(t.prototype,e),r&&bV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZI(t,e)}function ZI(t,e){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ZI(t,e)}function OGe(t){var e=$Ge();return function(){var n=Z_(t),i;if(e){var o=Z_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return RGe(this,i)}}function RGe(t,e){if(e&&(Id(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jGe(t)}function jGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Ge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z_(t)}function a$(t,e,r){return e=oJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oJ(t){var e=DGe(t,"string");return Id(e)==="symbol"?e:String(e)}function DGe(t,e){if(Id(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Id(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yp=function(t){kGe(r,t);var e=OGe(r);function r(n){var i;return IGe(this,r),i=e.call(this,n),i.state={fontSize:"",letterSpacing:""},i}return NGe(r,[{key:"shouldComponentUpdate",value:function(i,o){var s=i.viewBox,a=sC(i,AGe),l=this.props,c=l.viewBox,u=sC(l,CGe);return!hf(s,c)||!hf(a,u)||!hf(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,s=o.x,a=o.y,l=o.width,c=o.height,u=o.orientation,f=o.tickSize,h=o.mirror,p=o.tickMargin,m,y,g,b,v,x,S=h?-1:1,_=i.tickSize||f,w=ne(i.tickCoord)?i.tickCoord:i.coordinate;switch(u){case"top":m=y=i.coordinate,b=a+ +!h*c,g=b-S*_,x=g-S*p,v=w;break;case"left":g=b=i.coordinate,y=s+ +!h*l,m=y-S*_,v=m-S*p,x=w;break;case"right":g=b=i.coordinate,y=s+ +h*l,m=y+S*_,v=m+S*p,x=w;break;default:m=y=i.coordinate,b=a+ +h*c,g=b+S*_,x=g+S*p,v=w;break}return{line:{x1:m,y1:g,x2:y,y2:b},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a;switch(o){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a="end";switch(o){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.orientation,u=i.mirror,f=i.axisLine,h=bn(bn(bn({},qe(this.props)),qe(f)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);h=bn(bn({},h),{},{x1:o,y1:s+p*l,x2:o+a,y2:s+p*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=bn(bn({},h),{},{x1:o+m*a,y1:s,x2:o+m*a,y2:s+l})}return k.createElement("line",Vu({},h,{className:ct("recharts-cartesian-axis-line",Oi(f,"className"))}))}},{key:"renderTicks",value:function(i,o,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,h=l.tickFormatter,p=l.unit,m=JI(bn(bn({},this.props),{},{ticks:i}),o,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=qe(this.props),v=qe(f),x=bn(bn({},b),{},{fill:"none"},qe(c)),S=m.map(function(_,w){var A=a.getTickLineCoord(_),C=A.line,I=A.tick,T=bn(bn(bn(bn({textAnchor:y,verticalAnchor:g},b),{},{stroke:"none",fill:u},v),I),{},{index:w,payload:_,visibleTicksCount:m.length,tickFormatter:h});return k.createElement(Jt,Vu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},u_(a.props,_,w)),c&&k.createElement("line",Vu({},x,C,{className:ct("recharts-cartesian-axis-tick-line",Oi(c,"className"))})),f&&r.renderTickItem(f,T,"".concat(Me(h)?h(_.value,w):_.value).concat(p||"")))});return k.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var i=this,o=this.props,s=o.axisLine,a=o.width,l=o.height,c=o.ticksGenerator,u=o.className,f=o.hide;if(f)return null;var h=this.props,p=h.ticks,m=sC(h,TGe),y=p;return Me(c)&&(y=p&&p.length>0?c(this.props):c(m)),a<=0||l<=0||!y||!y.length?null:k.createElement(Jt,{className:ct("recharts-cartesian-axis",u),ref:function(b){i.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),fn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,s){var a;return k.isValidElement(i)?a=k.cloneElement(i,o):Me(i)?a=i(o):a=k.createElement(P_,Vu({},o,{className:"recharts-cartesian-axis-tick-value"}),s),a}}]),r}(E.Component);a$(Yp,"displayName","CartesianAxis");a$(Yp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var MGe=["x1","y1","x2","y2","key"],FGe=["offset"];function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function eN(){return eN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eN.apply(this,arguments)}function xV(t,e){if(t==null)return{};var r=LGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function LGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function _V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Us(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_V(Object(r),!0).forEach(function(n){l$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_V(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sJ(n.key),n)}}function UGe(t,e,r){return e&&wV(t.prototype,e),r&&wV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function VGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tN(t,e)}function tN(t,e){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tN(t,e)}function WGe(t){var e=qGe();return function(){var n=ew(t),i;if(e){var o=ew(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return zGe(this,i)}}function zGe(t,e){if(e&&(Nd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GGe(t)}function GGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ew(t){return ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ew(t)}function l$(t,e,r){return e=sJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sJ(t){var e=HGe(t,"string");return Nd(e)==="symbol"?e:String(e)}function HGe(t,e){if(Nd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Nd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c$=function(t){VGe(r,t);var e=WGe(r);function r(){return BGe(this,r),e.apply(this,arguments)}return UGe(r,[{key:"renderHorizontal",value:function(i){var o=this,s=this.props,a=s.x,l=s.width,c=s.horizontal;if(!i||!i.length)return null;var u=i.map(function(f,h){var p=Us(Us({},o.props),{},{x1:a,y1:f,x2:a+l,y2:f,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}},{key:"renderVertical",value:function(i){var o=this,s=this.props,a=s.y,l=s.height,c=s.vertical;if(!i||!i.length)return null;var u=i.map(function(f,h){var p=Us(Us({},o.props),{},{x1:f,y1:a,x2:f,y2:a+l,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,u=s.width,f=s.height,h=i.map(function(m){return Math.round(m+l-l)}).sort(function(m,y){return m-y});l!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?l+u-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return k.createElement("rect",{key:"react-".concat(y),x:m,y:c,width:b,height:f,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,u=s.width,f=s.height,h=i.map(function(m){return Math.round(m+c-c)}).sort(function(m,y){return m-y});c!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?c+f-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return k.createElement("rect",{key:"react-".concat(y),y:m,x:l,height:b,width:u,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,s=o.fillOpacity,a=o.x,l=o.y,c=o.width,u=o.height;return k.createElement("rect",{x:a,y:l,width:c,height:u,stroke:"none",fill:i,fillOpacity:s,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.horizontal,u=i.vertical,f=i.horizontalCoordinatesGenerator,h=i.verticalCoordinatesGenerator,p=i.xAxis,m=i.yAxis,y=i.offset,g=i.chartWidth,b=i.chartHeight,v=i.syncWithTicks,x=i.horizontalValues,S=i.verticalValues;if(!ne(a)||a<=0||!ne(l)||l<=0||!ne(o)||o!==+o||!ne(s)||s!==+s)return null;var _=this.props,w=_.horizontalPoints,A=_.verticalPoints;if((!w||!w.length)&&Me(f)){var C=x&&x.length;w=f({yAxis:m?Us(Us({},m),{},{ticks:C?x:m.ticks}):void 0,width:g,height:b,offset:y},C?!0:v)}if((!A||!A.length)&&Me(h)){var I=S&&S.length;A=h({xAxis:p?Us(Us({},p),{},{ticks:I?S:p.ticks}):void 0,width:g,height:b,offset:y},I?!0:v)}return k.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),c&&this.renderHorizontal(w),u&&this.renderVertical(A),c&&this.renderHorizontalStripes(w),u&&this.renderVerticalStripes(A))}}],[{key:"renderLineItem",value:function(i,o){var s;if(k.isValidElement(i))s=k.cloneElement(i,o);else if(Me(i))s=i(o);else{var a=o.x1,l=o.y1,c=o.x2,u=o.y2,f=o.key,h=xV(o,MGe),p=qe(h);p.offset;var m=xV(p,FGe);s=k.createElement("line",eN({},m,{x1:a,y1:l,x2:c,y2:u,fill:"none",key:f}))}return s}}]),r}(E.PureComponent);l$(c$,"displayName","CartesianGrid");l$(c$,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var KGe=["type","layout","connectNulls","ref"];function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function YGe(t,e){if(t==null)return{};var r=QGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function QGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Qp(){return Qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qp.apply(this,arguments)}function SV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(r),!0).forEach(function(n){Ki(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lu(t){return eqe(t)||ZGe(t)||JGe(t)||XGe()}function XGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JGe(t,e){if(t){if(typeof t=="string")return rN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rN(t,e)}}function ZGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eqe(t){if(Array.isArray(t))return rN(t)}function rN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aJ(n.key),n)}}function rqe(t,e,r){return e&&EV(t.prototype,e),r&&EV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nN(t,e)}function nN(t,e){return nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nN(t,e)}function iqe(t){var e=sqe();return function(){var n=tw(t),i;if(e){var o=tw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return oqe(this,i)}}function oqe(t,e){if(e&&(kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qs(t)}function qs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tw(t){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tw(t)}function Ki(t,e,r){return e=aJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aJ(t){var e=aqe(t,"string");return kd(e)==="symbol"?e:String(e)}function aqe(t,e){if(kd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(kd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bi=function(t){nqe(r,t);var e=iqe(r);function r(){var n;tqe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),Ki(qs(n),"state",{isAnimationFinished:!0,totalLength:0}),Ki(qs(n),"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Ki(qs(n),"getStrokeDasharray",function(a,l,c){var u=c.reduce(function(v,x){return v+x});if(!u)return n.generateSimpleStrokeDasharray(l,a);for(var f=Math.floor(a/u),h=a%u,p=l-a,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>h){m=[].concat(lu(c.slice(0,y)),[h-g]);break}var b=m.length%2===0?[0,p]:[p];return[].concat(lu(r.repeat(c,f)),lu(m),b).map(function(v){return"".concat(v,"px")}).join(", ")}),Ki(qs(n),"id",Wg("recharts-line-")),Ki(qs(n),"pathRef",function(a){n.mainCurve=a}),Ki(qs(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ki(qs(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return rqe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,h=Ri(f,Yg);if(!h)return null;var p=function(g,b){return{x:g.x,y:g.y,value:g.value,errorVal:oi(g.payload,b)}},m={clipPath:i?"url(#clipPath-".concat(o,")"):null};return k.createElement(Jt,m,h.map(function(y){return k.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(i,o,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,h=qe(this.props),p=qe(c,!0),m=u.map(function(g,b){var v=Wn(Wn(Wn({key:"dot-".concat(b),r:3},h),p),{},{value:g.value,dataKey:f,cx:g.x,cy:g.y,index:b,payload:g.payload});return r.renderDotItem(c,v)}),y={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(s,")"):null};return k.createElement(Jt,Qp({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(i,o,s,a){var l=this.props,c=l.type,u=l.layout,f=l.connectNulls;l.ref;var h=YGe(l,KGe),p=Wn(Wn(Wn({},qe(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(s,")"):null,points:i},a),{},{type:c,layout:u,connectNulls:f});return k.createElement(WI,Qp({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,u=a.isAnimationActive,f=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=a.animateNewValues,g=a.width,b=a.height,v=this.state,x=v.prevPoints,S=v.totalLength;return k.createElement(Ts,{begin:f,duration:h,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(x){var A=x.length/l.length,C=l.map(function(N,R){var B=Math.floor(R*A);if(x[B]){var V=x[B],F=Qi(V.x,N.x),$=Qi(V.y,N.y);return Wn(Wn({},N),{},{x:F(w),y:$(w)})}if(y){var L=Qi(g*2,N.x),z=Qi(b/2,N.y);return Wn(Wn({},N),{},{x:L(w),y:z(w)})}return Wn(Wn({},N),{},{x:N.x,y:N.y})});return s.renderCurveStatically(C,i,o)}var I=Qi(0,S),T=I(w),P;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});P=s.getStrokeDasharray(T,S,O)}else P=s.generateSimpleStrokeDasharray(S,T);return s.renderCurveStatically(l,i,o,{strokeDasharray:P})})}},{key:"renderCurve",value:function(i,o){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return l&&a&&a.length&&(!u&&f>0||!gS(u,a))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(a,i,o)}},{key:"render",value:function(){var i,o=this.props,s=o.hide,a=o.dot,l=o.points,c=o.className,u=o.xAxis,f=o.yAxis,h=o.top,p=o.left,m=o.width,y=o.height,g=o.isAnimationActive,b=o.id;if(s||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,S=ct("recharts-line",c),_=u&&u.allowDataOverflow,w=f&&f.allowDataOverflow,A=_||w,C=Xe(b)?this.id:b,I=(i=qe(a))!==null&&i!==void 0?i:{r:3,strokeWidth:2},T=I.r,P=T===void 0?3:T,O=I.strokeWidth,N=O===void 0?2:O,R=Ake(a)?a:{},B=R.clipDot,V=B===void 0?!0:B,F=P*2+N;return k.createElement(Jt,{className:S},_||w?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(C)},k.createElement("rect",{x:_?p:p-m/2,y:w?h:h-y/2,width:_?m:m*2,height:w?y:y*2})),!V&&k.createElement("clipPath",{id:"clipPath-dots-".concat(C)},k.createElement("rect",{x:p-F/2,y:h-F/2,width:m+F,height:y+F}))):null,!x&&this.renderCurve(A,C),this.renderErrorBar(A,C),(x||a)&&this.renderDots(A,V,C),(!g||v)&&La.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var s=i.length%2!==0?[].concat(lu(i),[0]):i,a=[],l=0;l<o;++l)a=[].concat(lu(a),lu(s));return a}},{key:"renderDotItem",value:function(i,o){var s;if(k.isValidElement(i))s=k.cloneElement(i,o);else if(Me(i))s=i(o);else{var a=ct("recharts-line-dot",i?i.className:"");s=k.createElement(i$,Qp({},o,{className:a}))}return s}}]),r}(E.PureComponent);Ki(bi,"displayName","Line");Ki(bi,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!gs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ki(bi,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,f=l.map(function(h,p){var m=oi(h,s);return u==="horizontal"?{x:SU({axis:r,ticks:i,bandSize:a,entry:h,index:p}),y:Xe(m)?null:n.scale(m),value:m,payload:h}:{x:Xe(m)?null:r.scale(m),y:SU({axis:n,ticks:o,bandSize:a,entry:h,index:p}),value:m,payload:h}});return Wn({points:f,layout:u},c)});var ES=function(){return null};ES.displayName="XAxis";ES.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var AS=function(){return null};AS.displayName="YAxis";AS.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var lqe=ll,cqe=zg,uqe=sS;function fqe(t){return function(e,r,n){var i=Object(e);if(!cqe(e)){var o=lqe(r);e=uqe(e),r=function(a){return o(i[a],a,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:void 0}}var dqe=fqe,hqe=QX;function pqe(t){var e=hqe(t),r=e%1;return e===e?r?e-r:e:0}var mqe=pqe,yqe=xQ,gqe=ll,vqe=mqe,bqe=Math.max;function xqe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:vqe(r);return i<0&&(i=bqe(n+i,0)),yqe(t,gqe(e),i)}var _qe=xqe,wqe=dqe,Sqe=_qe,Eqe=wqe(Sqe),Aqe=Eqe;const Cqe=ot(Aqe);function AV(t){return Nqe(t)||Iqe(t)||Pqe(t)||Tqe()}function Tqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pqe(t,e){if(t){if(typeof t=="string")return iN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iN(t,e)}}function Iqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nqe(t){if(Array.isArray(t))return iN(t)}function iN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var oN=function(e,r,n,i,o){var s=Ri(e,s$),a=Ri(e,Qg),l=[].concat(AV(s),AV(a)),c=Ri(e,Xg),u="".concat(i,"Id"),f=i[0],h=r;if(l.length&&(h=l.reduce(function(y,g){if(g.props[u]===n&&Go(g.props,"extendDomain")&&ne(g.props[f])){var b=g.props[f];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},h)),c.length){var p="".concat(f,"1"),m="".concat(f,"2");h=c.reduce(function(y,g){if(g.props[u]===n&&Go(g.props,"extendDomain")&&ne(g.props[p])&&ne(g.props[m])){var b=g.props[p],v=g.props[m];return[Math.min(y[0],b,v),Math.max(y[1],b,v)]}return y},h)}return o&&o.length&&(h=o.reduce(function(y,g){return ne(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},h)),h},lJ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,f||l,h),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=r?r+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},a.prototype.listenerCount=function(c){var u=r?r+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,h,p,m){var y=r?r+c:c;if(!this._events[y])return!1;var g=this._events[y],b=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,p),!0;case 6:return g.fn.call(g.context,u,f,h,p,m),!0}for(x=1,v=new Array(b-1);x<b;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var S=g.length,_;for(x=0;x<S;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),b){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,u);break;case 3:g[x].fn.call(g[x].context,u,f);break;case 4:g[x].fn.call(g[x].context,u,f,h);break;default:if(!v)for(_=1,v=new Array(b-1);_<b;_++)v[_-1]=arguments[_];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,u,f){return o(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return o(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,h){var p=r?r+c:c;if(!this._events[p])return this;if(!u)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!f||m.context===f)&&s(this,p);else{for(var y=0,g=[],b=m.length;y<b;y++)(m[y].fn!==u||h&&!m[y].once||f&&m[y].context!==f)&&g.push(m[y]);g.length?this._events[p]=g.length===1?g[0]:g:s(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(lJ);var kqe=lJ.exports;const Oqe=ot(kqe);var aC=new Oqe,lC="recharts.syncMouseEvents";function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function Rqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cJ(n.key),n)}}function jqe(t,e,r){return e&&CV(t.prototype,e),r&&CV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cC(t,e,r){return e=cJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cJ(t){var e=$qe(t,"string");return Ry(e)==="symbol"?e:String(e)}function $qe(t,e){if(Ry(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ry(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dqe=function(){function t(){Rqe(this,t),cC(this,"activeIndex",0),cC(this,"coordinateList",[]),cC(this,"layout","horizontal")}return jqe(t,[{key:"setDetails",value:function(r){var n=r.coordinateList,i=n===void 0?[]:n,o=r.container,s=o===void 0?null:o,a=r.layout,l=a===void 0?null:a,c=r.offset,u=c===void 0?null:c,f=r.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=i??this.coordinateList,this.container=s??this.container,this.layout=l??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+l+c,h=s+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}]),t}();function Mqe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&ne(n)&&ne(i))return!0}return!1}function Fqe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function uJ(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,o=t.endAngle,s=qr(e,r,n,i),a=qr(e,r,n,o);return{points:[s,a],cx:e,cy:r,radius:n,startAngle:i,endAngle:o}}function Lqe(t,e,r){var n,i,o,s;if(t==="horizontal")n=e.x,o=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,o=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,h=qr(a,l,c,f),p=qr(a,l,u,f);n=h.x,i=h.y,o=p.x,s=p.y}else return uJ(e);return[{x:n,y:i},{x:o,y:s}]}function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function TV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function l0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TV(Object(r),!0).forEach(function(n){Bqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bqe(t,e,r){return e=Uqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uqe(t){var e=Vqe(t,"string");return jy(e)==="symbol"?e:String(e)}function Vqe(t,e){if(jy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wqe(t){var e=t.element,r=t.tooltipEventType,n=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,c=t.layout,u=t.chartName;if(!e||!e.props.cursor||!n||!i||u!=="ScatterChart"&&r!=="axis")return null;var f,h=WI;if(u==="ScatterChart")f=i,h=k8e;else if(u==="BarChart")f=Fqe(c,i,s,l),h=n$;else if(c==="radial"){var p=uJ(i),m=p.cx,y=p.cy,g=p.radius,b=p.startAngle,v=p.endAngle;f={cx:m,cy:y,startAngle:b,endAngle:v,innerRadius:g,outerRadius:g},h=KX}else f={points:Lqe(c,i,s)},h=WI;var x=l0(l0(l0(l0({stroke:"#ccc",pointerEvents:"none"},s),f),qe(e.props.cursor)),{},{payload:o,payloadIndex:a,className:"recharts-tooltip-cursor"});return E.isValidElement(e.props.cursor)?E.cloneElement(e.props.cursor,x):E.createElement(h,x)}var zqe=["item"],Gqe=["children","className","width","height","style","compact","title","desc"];function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}function PV(t,e){return Kqe(t)||Hqe(t,e)||fJ(t,e)||qqe()}function qqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Kqe(t){if(Array.isArray(t))return t}function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wu.apply(this,arguments)}function IV(t,e){if(t==null)return{};var r=Yqe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yqe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Qqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dJ(n.key),n)}}function Xqe(t,e,r){return e&&NV(t.prototype,e),r&&NV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sN(t,e)}function sN(t,e){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sN(t,e)}function Zqe(t){var e=tHe();return function(){var n=rw(t),i;if(e){var o=rw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return eHe(this,i)}}function eHe(t,e){if(e&&(Od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(t)}function Ie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rw(t){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rw(t)}function Rd(t){return iHe(t)||nHe(t)||fJ(t)||rHe()}function rHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fJ(t,e){if(t){if(typeof t=="string")return aN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aN(t,e)}}function nHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iHe(t){if(Array.isArray(t))return aN(t)}function aN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(r),!0).forEach(function(n){me(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function me(t,e,r){return e=dJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dJ(t){var e=oHe(t,"string");return Od(e)==="symbol"?e:String(e)}function oHe(t,e){if(Od(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Od(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sHe={xAxis:["bottom","top"],yAxis:["left","right"]},aHe={width:"100%",height:"100%"},hJ={x:0,y:0},lHe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},cHe=function(e,r,n,i){var o=r.find(function(u){return u&&u.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return G(G(G({},i),qr(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,c=i.angle;return G(G(G({},i),qr(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return hJ},CS=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,s=(n??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(Rd(a),Rd(c)):a},[]);return s.length>0?s:e&&e.length&&ne(i)&&ne(o)?e.slice(i,o+1):[]};function pJ(t){return t==="number"?[0,"auto"]:void 0}var mJ=function(e,r,n,i){var o=e.graphicalItems,s=e.tooltipAxis,a=CS(r,e);return n<0||!o||!o.length||n>=a.length?null:o.reduce(function(l,c){var u,f=c.props.hide;if(f)return l;var h=(u=c.props.data)!==null&&u!==void 0?u:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var m=h===void 0?a:h;p=l_(m,s.dataKey,i)}else p=h&&h[n]||a[n];return p?[].concat(Rd(l),[GX(c,p)]):l},[])},OV=function(e,r,n,i){var o=i||{x:e.chartX,y:e.chartY},s=lHe(o,n),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=H5e(s,a,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,h=mJ(e,r,u,f),p=cHe(n,a,u,o);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},uHe=function(e,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.layout,f=e.children,h=e.stackOffset,p=WX(u,o);return n.reduce(function(m,y){var g,b=y.props,v=b.type,x=b.dataKey,S=b.allowDataOverflow,_=b.allowDuplicatedCategory,w=b.scale,A=b.ticks,C=b.includeHidden,I=y.props[s];if(m[I])return m;var T=CS(e.data,{graphicalItems:i.filter(function(te){return te.props[s]===I}),dataStartIndex:l,dataEndIndex:c}),P=T.length,O,N,R;Mqe(y.props.domain,S,v)&&(O=FI(y.props.domain,null,S),p&&(v==="number"||w!=="auto")&&(R=Kp(T,x,"category")));var B=pJ(v);if(!O||O.length===0){var V,F=(V=y.props.domain)!==null&&V!==void 0?V:B;if(x){if(O=Kp(T,x,v),v==="category"&&p){var $=yke(O);_&&$?(N=O,O=H_(0,P)):_||(O=TU(F,O,y).reduce(function(te,be){return te.indexOf(be)>=0?te:[].concat(Rd(te),[be])},[]))}else if(v==="category")_?O=O.filter(function(te){return te!==""&&!Xe(te)}):O=TU(F,O,y).reduce(function(te,be){return te.indexOf(be)>=0||be===""||Xe(be)?te:[].concat(Rd(te),[be])},[]);else if(v==="number"){var L=J5e(T,i.filter(function(te){return te.props[s]===I&&(C||!te.props.hide)}),x,o,u);L&&(O=L)}p&&(v==="number"||w!=="auto")&&(R=Kp(T,x,"category"))}else p?O=H_(0,P):a&&a[I]&&a[I].hasStack&&v==="number"?O=h==="expand"?[0,1]:zX(a[I].stackGroups,l,c):O=VX(T,i.filter(function(te){return te.props[s]===I&&(C||!te.props.hide)}),v,u,!0);if(v==="number")O=oN(f,O,I,o,A),F&&(O=FI(F,O,S));else if(v==="category"&&F){var z=F,ce=O.every(function(te){return z.indexOf(te)>=0});ce&&(O=z)}}return G(G({},m),{},me({},I,G(G({},y.props),{},{axisType:o,domain:O,categoricalDomain:R,duplicateDomain:N,originalDomain:(g=y.props.domain)!==null&&g!==void 0?g:B,isCategorical:p,layout:u})))},{})},fHe=function(e,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.layout,f=e.children,h=CS(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=h.length,m=WX(u,o),y=-1;return n.reduce(function(g,b){var v=b.props[s],x=pJ("number");if(!g[v]){y++;var S;return m?S=H_(0,p):a&&a[v]&&a[v].hasStack?(S=zX(a[v].stackGroups,l,c),S=oN(f,S,v,o)):(S=FI(x,VX(h,n.filter(function(_){return _.props[s]===v&&!_.props.hide}),"number",u),i.defaultProps.allowDataOverflow),S=oN(f,S,v,o)),G(G({},g),{},me({},v,G(G({axisType:o},i.defaultProps),{},{hide:!0,orientation:Oi(sHe,"".concat(o,".").concat(y%2),null),domain:S,originalDomain:x,isCategorical:m,layout:u})))}return g},{})},dHe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,s=r.graphicalItems,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.children,f="".concat(i,"Id"),h=Ri(u,o),p={};return h&&h.length?p=uHe(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(p=fHe(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),p},hHe=function(e){var r=zs(e),n=Gs(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Ij(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:U_(r,n)}},RV=function(e){var r=e.children,n=e.defaultShowTooltip,i=To(r,Td),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},pHe=function(e){return!e||!e.length?!1:e.some(function(r){var n=ys(r&&r.type);return n&&n.indexOf("Bar")>=0})},jV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mHe=function(e,r){var n=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,c=n.width,u=n.height,f=n.children,h=n.margin||{},p=To(f,Td),m=To(f,Jm),y=Object.keys(l).reduce(function(_,w){var A=l[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},me({},C,_[C]+A.width)):_},{left:h.left||0,right:h.right||0}),g=Object.keys(s).reduce(function(_,w){var A=s[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},me({},C,Oi(_,"".concat(C))+A.height)):_},{top:h.top||0,bottom:h.bottom||0}),b=G(G({},g),y),v=b.bottom;p&&(b.bottom+=p.props.height||Td.defaultProps.height),m&&r&&(b=Q5e(b,i,n,r));var x=c-b.left-b.right,S=u-b.top-b.bottom;return G(G({brushBottom:v},b),{},{width:Math.max(x,0),height:Math.max(S,0)})},yHe=function(e){var r,n=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,h=e.defaultProps,p=function(g,b){var v=b.graphicalItems,x=b.stackGroups,S=b.offset,_=b.updateId,w=b.dataStartIndex,A=b.dataEndIndex,C=g.barSize,I=g.layout,T=g.barGap,P=g.barCategoryGap,O=g.maxBarSize,N=jV(I),R=N.numericAxisName,B=N.cateAxisName,V=pHe(v),F=V&&K5e({barSize:C,stackGroups:x}),$=[];return v.forEach(function(L,z){var ce=CS(g.data,{graphicalItems:[L],dataStartIndex:w,dataEndIndex:A}),te=L.props,be=te.dataKey,st=te.maxBarSize,rt=L.props["".concat(R,"Id")],Vt=L.props["".concat(B,"Id")],pt={},Zt=c.reduce(function(W,re){var Z,Q=b["".concat(re.axisType,"Map")],pe=L.props["".concat(re.axisType,"Id")];Q&&Q[pe]||re.axisType==="zAxis"||bq(!1);var nt=Q[pe];return G(G({},W),{},(Z={},me(Z,re.axisType,nt),me(Z,"".concat(re.axisType,"Ticks"),Gs(nt)),Z))},pt),ee=Zt[B],xe=Zt["".concat(B,"Ticks")],Ee=x&&x[rt]&&x[rt].hasStack&&uWe(L,x[rt].stackGroups),q=ys(L.type).indexOf("Bar")>=0,Ze=U_(ee,xe),ke=[];if(q){var vt,$t,en=Xe(st)?O:st,Un=(vt=($t=U_(ee,xe,!0))!==null&&$t!==void 0?$t:en)!==null&&vt!==void 0?vt:0;ke=Y5e({barGap:T,barCategoryGap:P,bandSize:Un!==Ze?Un:Ze,sizeList:F[Vt],maxBarSize:en}),Un!==Ze&&(ke=ke.map(function(W){return G(G({},W),{},{position:G(G({},W.position),{},{offset:W.position.offset-Un/2})})}))}var j=L&&L.type&&L.type.getComposedData;if(j){var U;$.push({props:G(G({},j(G(G({},Zt),{},{displayedData:ce,props:g,dataKey:be,item:L,bandSize:Ze,barPosition:ke,offset:S,stackedData:Ee,layout:I,dataStartIndex:w,dataEndIndex:A}))),{},(U={key:L.key||"item-".concat(z)},me(U,R,Zt[R]),me(U,B,Zt[B]),me(U,"animationId",_),U)),childIndex:Pke(L,g.children),item:L})}}),$},m=function(g,b){var v=g.props,x=g.dataStartIndex,S=g.dataEndIndex,_=g.updateId;if(!Z3({props:v}))return null;var w=v.children,A=v.layout,C=v.stackOffset,I=v.data,T=v.reverseStackOrder,P=jV(A),O=P.numericAxisName,N=P.cateAxisName,R=Ri(w,i),B=aWe(I,R,"".concat(O,"Id"),"".concat(N,"Id"),C,T),V=c.reduce(function(ce,te){var be="".concat(te.axisType,"Map");return G(G({},ce),{},me({},be,dHe(v,G(G({},te),{},{graphicalItems:R,stackGroups:te.axisType===O&&B,dataStartIndex:x,dataEndIndex:S}))))},{}),F=mHe(G(G({},V),{},{props:v,graphicalItems:R}),b==null?void 0:b.legendBBox);Object.keys(V).forEach(function(ce){V[ce]=f(v,V[ce],F,ce.replace("Map",""),n)});var $=V["".concat(N,"Map")],L=hHe($),z=p(v,G(G({},V),{},{dataStartIndex:x,dataEndIndex:S,updateId:_,graphicalItems:R,stackGroups:B,offset:F}));return G(G({formattedGraphicalItems:z,graphicalItems:R,offset:F,stackGroups:B},L),V)};return r=function(y){Jqe(b,y);var g=Zqe(b);function b(v){var x,S,_;return Qqe(this,b),_=g.call(this,v),me(Ie(_),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),me(Ie(_),"accessibilityManager",new Dqe),me(Ie(_),"handleLegendBBoxUpdate",function(w){if(w){var A=_.state,C=A.dataStartIndex,I=A.dataEndIndex,T=A.updateId;_.setState(G({legendBBox:w},m({props:_.props,dataStartIndex:C,dataEndIndex:I,updateId:T},G(G({},_.state),{},{legendBBox:w}))))}}),me(Ie(_),"handleReceiveSyncEvent",function(w,A,C){if(_.props.syncId===w){if(C===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),me(Ie(_),"handleBrushChange",function(w){var A=w.startIndex,C=w.endIndex;if(A!==_.state.dataStartIndex||C!==_.state.dataEndIndex){var I=_.state.updateId;_.setState(function(){return G({dataStartIndex:A,dataEndIndex:C},m({props:_.props,dataStartIndex:A,dataEndIndex:C,updateId:I},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:C})}}),me(Ie(_),"handleMouseEnter",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var I=_.props.onMouseEnter;Me(I)&&I(C,w)}}),me(Ie(_),"triggeredAfterMouseMove",function(w){var A=_.getMouseInfo(w),C=A?G(G({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(C),_.triggerSyncEvent(C);var I=_.props.onMouseMove;Me(I)&&I(C,w)}),me(Ie(_),"handleItemMouseEnter",function(w){_.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),me(Ie(_),"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),me(Ie(_),"handleMouseMove",function(w){w.persist(),_.throttleTriggeredAfterMouseMove(w)}),me(Ie(_),"handleMouseLeave",function(w){var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var C=_.props.onMouseLeave;Me(C)&&C(A,w)}),me(Ie(_),"handleOuterEvent",function(w){var A=Tke(w),C=Oi(_.props,"".concat(A));if(A&&Me(C)){var I,T;/.*touch.*/i.test(A)?T=_.getMouseInfo(w.changedTouches[0]):T=_.getMouseInfo(w),C((I=T)!==null&&I!==void 0?I:{},w)}}),me(Ie(_),"handleClick",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var I=_.props.onClick;Me(I)&&I(C,w)}}),me(Ie(_),"handleMouseDown",function(w){var A=_.props.onMouseDown;if(Me(A)){var C=_.getMouseInfo(w);A(C,w)}}),me(Ie(_),"handleMouseUp",function(w){var A=_.props.onMouseUp;if(Me(A)){var C=_.getMouseInfo(w);A(C,w)}}),me(Ie(_),"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),me(Ie(_),"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseDown(w.changedTouches[0])}),me(Ie(_),"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseUp(w.changedTouches[0])}),me(Ie(_),"triggerSyncEvent",function(w){_.props.syncId!==void 0&&aC.emit(lC,_.props.syncId,w,_.eventEmitterSymbol)}),me(Ie(_),"applySyncEvent",function(w){var A=_.props,C=A.layout,I=A.syncMethod,T=_.state.updateId,P=w.dataStartIndex,O=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)_.setState(G({dataStartIndex:P,dataEndIndex:O},m({props:_.props,dataStartIndex:P,dataEndIndex:O,updateId:T},_.state)));else if(w.activeTooltipIndex!==void 0){var N=w.chartX,R=w.chartY,B=w.activeTooltipIndex,V=_.state,F=V.offset,$=V.tooltipTicks;if(!F)return;if(typeof I=="function")B=I($,w);else if(I==="value"){B=-1;for(var L=0;L<$.length;L++)if($[L].value===w.activeLabel){B=L;break}}var z=G(G({},F),{},{x:F.left,y:F.top}),ce=Math.min(N,z.x+z.width),te=Math.min(R,z.y+z.height),be=$[B]&&$[B].value,st=mJ(_.state,_.props.data,B),rt=$[B]?{x:C==="horizontal"?$[B].coordinate:ce,y:C==="horizontal"?te:$[B].coordinate}:hJ;_.setState(G(G({},w),{},{activeLabel:be,activeCoordinate:rt,activePayload:st,activeTooltipIndex:B}))}else _.setState(w)}),me(Ie(_),"verticalCoordinatesGenerator",function(w,A){var C=w.xAxis,I=w.width,T=w.height,P=w.offset;return _U(JI(G(G(G({},Yp.defaultProps),C),{},{ticks:Gs(C,!0),viewBox:{x:0,y:0,width:I,height:T}})),P.left,P.left+P.width,A)}),me(Ie(_),"horizontalCoordinatesGenerator",function(w,A){var C=w.yAxis,I=w.width,T=w.height,P=w.offset;return _U(JI(G(G(G({},Yp.defaultProps),C),{},{ticks:Gs(C,!0),viewBox:{x:0,y:0,width:I,height:T}})),P.top,P.top+P.height,A)}),me(Ie(_),"axesTicksGenerator",function(w){return Gs(w,!0)}),me(Ie(_),"renderCursor",function(w){var A,C=_.state,I=C.isTooltipActive,T=C.activeCoordinate,P=C.activePayload,O=C.offset,N=C.activeTooltipIndex,R=C.tooltipAxisBandSize,B=_.getTooltipEventType(),V=(A=w.props.active)!==null&&A!==void 0?A:I,F=_.props.layout,$=w.key||"_recharts-cursor";return k.createElement(Wqe,{key:$,activeCoordinate:T,activePayload:P,activeTooltipIndex:N,chartName:n,element:w,isActive:V,layout:F,offset:O,tooltipAxisBandSize:R,tooltipEventType:B})}),me(Ie(_),"renderPolarAxis",function(w,A,C){var I=Oi(w,"type.axisType"),T=Oi(_.state,"".concat(I,"Map")),P=T&&T[w.props["".concat(I,"Id")]];return E.cloneElement(w,G(G({},P),{},{className:I,key:w.key||"".concat(A,"-").concat(C),ticks:Gs(P,!0)}))}),me(Ie(_),"renderXAxis",function(w,A,C){var I=_.state.xAxisMap,T=I[w.props.xAxisId];return _.renderAxis(T,w,A,C)}),me(Ie(_),"renderYAxis",function(w,A,C){var I=_.state.yAxisMap,T=I[w.props.yAxisId];return _.renderAxis(T,w,A,C)}),me(Ie(_),"renderGrid",function(w){var A=_.state,C=A.xAxisMap,I=A.yAxisMap,T=A.offset,P=_.props,O=P.width,N=P.height,R=zs(C),B=Cqe(I,function($){return ZX($.domain,Number.isFinite)}),V=B||zs(I),F=w.props||{};return E.cloneElement(w,{key:w.key||"grid",x:ne(F.x)?F.x:T.left,y:ne(F.y)?F.y:T.top,width:ne(F.width)?F.width:T.width,height:ne(F.height)?F.height:T.height,xAxis:R,yAxis:V,offset:T,chartWidth:O,chartHeight:N,verticalCoordinatesGenerator:F.verticalCoordinatesGenerator||_.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:F.horizontalCoordinatesGenerator||_.horizontalCoordinatesGenerator})}),me(Ie(_),"renderPolarGrid",function(w){var A=w.props,C=A.radialLines,I=A.polarAngles,T=A.polarRadius,P=_.state,O=P.radiusAxisMap,N=P.angleAxisMap,R=zs(O),B=zs(N),V=B.cx,F=B.cy,$=B.innerRadius,L=B.outerRadius;return E.cloneElement(w,{polarAngles:Array.isArray(I)?I:Gs(B,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(T)?T:Gs(R,!0).map(function(z){return z.coordinate}),cx:V,cy:F,innerRadius:$,outerRadius:L,key:w.key||"polar-grid",radialLines:C})}),me(Ie(_),"renderLegend",function(){var w=_.state.formattedGraphicalItems,A=_.props,C=A.children,I=A.width,T=A.height,P=_.props.margin||{},O=I-(P.left||0)-(P.right||0),N=BX({children:C,formattedGraphicalItems:w,legendWidth:O,legendContent:u});if(!N)return null;var R=N.item,B=IV(N,zqe);return E.cloneElement(R,G(G({},B),{},{chartWidth:I,chartHeight:T,margin:P,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),me(Ie(_),"renderTooltip",function(){var w,A=_.props.children,C=To(A,Bu);if(!C)return null;var I=_.state,T=I.isTooltipActive,P=I.activeCoordinate,O=I.activePayload,N=I.activeLabel,R=I.offset,B=(w=C.props.active)!==null&&w!==void 0?w:T;return E.cloneElement(C,{viewBox:G(G({},R),{},{x:R.left,y:R.top}),active:B,label:N,payload:B?O:[],coordinate:P})}),me(Ie(_),"renderBrush",function(w){var A=_.props,C=A.margin,I=A.data,T=_.state,P=T.offset,O=T.dataStartIndex,N=T.dataEndIndex,R=T.updateId;return E.cloneElement(w,{key:w.key||"_recharts-brush",onChange:o0(_.handleBrushChange,w.props.onChange),data:I,x:ne(w.props.x)?w.props.x:P.left,y:ne(w.props.y)?w.props.y:P.top+P.height+P.brushBottom-(C.bottom||0),width:ne(w.props.width)?w.props.width:P.width,startIndex:O,endIndex:N,updateId:"brush-".concat(R)})}),me(Ie(_),"renderReferenceElement",function(w,A,C){if(!w)return null;var I=Ie(_),T=I.clipPathId,P=_.state,O=P.xAxisMap,N=P.yAxisMap,R=P.offset,B=w.props,V=B.xAxisId,F=B.yAxisId;return E.cloneElement(w,{key:w.key||"".concat(A,"-").concat(C),xAxis:O[V],yAxis:N[F],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:T})}),me(Ie(_),"renderActivePoints",function(w){var A=w.item,C=w.activePoint,I=w.basePoint,T=w.childIndex,P=w.isRange,O=[],N=A.props.key,R=A.item.props,B=R.activeDot,V=R.dataKey,F=G(G({index:T,dataKey:V,cx:C.x,cy:C.y,r:4,fill:r$(A.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value,key:"".concat(N,"-activePoint-").concat(T)},qe(B)),c_(B));return O.push(b.renderActiveDot(B,F)),I?O.push(b.renderActiveDot(B,G(G({},F),{},{cx:I.x,cy:I.y,key:"".concat(N,"-basePoint-").concat(T)}))):P&&O.push(null),O}),me(Ie(_),"renderGraphicChild",function(w,A,C){var I=_.filterFormatItem(w,A,C);if(!I)return null;var T=_.getTooltipEventType(),P=_.state,O=P.isTooltipActive,N=P.tooltipAxis,R=P.activeTooltipIndex,B=P.activeLabel,V=_.props.children,F=To(V,Bu),$=I.props,L=$.points,z=$.isRange,ce=$.baseLine,te=I.item.props,be=te.activeDot,st=te.hide,rt=te.activeBar,Vt=te.activeShape,pt=!!(!st&&O&&F&&(be||rt||Vt)),Zt={};T!=="axis"&&F&&F.props.trigger==="click"?Zt={onClick:o0(_.handleItemMouseEnter,w.props.onClick)}:T!=="axis"&&(Zt={onMouseLeave:o0(_.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:o0(_.handleItemMouseEnter,w.props.onMouseEnter)});var ee=E.cloneElement(w,G(G({},I.props),Zt));function xe(re){return typeof N.dataKey=="function"?N.dataKey(re.payload):null}if(pt)if(R>=0){var Ee,q;if(N.dataKey&&!N.allowDuplicatedCategory){var Ze=typeof N.dataKey=="function"?xe:"payload.".concat(N.dataKey.toString());Ee=l_(L,Ze,B),q=z&&ce&&l_(ce,Ze,B)}else Ee=L==null?void 0:L[R],q=z&&ce&&ce[R];if(Vt||rt){var ke=w.props.activeIndex!==void 0?w.props.activeIndex:R;return[E.cloneElement(w,G(G(G({},I.props),Zt),{},{activeIndex:ke})),null,null]}if(!Xe(Ee))return[ee].concat(Rd(_.renderActivePoints({item:I,activePoint:Ee,basePoint:q,childIndex:R,isRange:z})))}else{var vt,$t=(vt=_.getItemByXY(_.state.activeCoordinate))!==null&&vt!==void 0?vt:{graphicalItem:ee},en=$t.graphicalItem,Un=en.item,j=Un===void 0?w:Un,U=en.childIndex,W=G(G(G({},I.props),Zt),{},{activeIndex:U});return[E.cloneElement(j,W),null,null]}return z?[ee,null,null]:[ee,null]}),me(Ie(_),"renderCustomized",function(w,A,C){return E.cloneElement(w,G(G({key:"recharts-customized-".concat(C)},_.props),_.state))}),me(Ie(_),"renderMap",{CartesianGrid:{handler:_.renderGrid,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:_.renderReferenceElement},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:_.renderXAxis},YAxis:{handler:_.renderYAxis},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:Wg("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=VQ(_.triggeredAfterMouseMove,(S=v.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return Xqe(b,[{key:"componentDidMount",value:function(){var x,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(x,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=To(this.props.children,Bu);if(x&&typeof x.props.shared=="boolean"){var S=x.props.shared?"axis":"item";return l.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),w=T4e(_),A={chartX:Math.round(x.pageX-w.left),chartY:Math.round(x.pageY-w.top)},C=_.width/S.offsetWidth||1,I=this.inRange(A.chartX,A.chartY,C);if(!I)return null;var T=this.state,P=T.xAxisMap,O=T.yAxisMap,N=this.getTooltipEventType();if(N!=="axis"&&P&&O){var R=zs(P).scale,B=zs(O).scale,V=R&&R.invert?R.invert(A.chartX):null,F=B&&B.invert?B.invert(A.chartY):null;return G(G({},A),{},{xValue:V,yValue:F})}var $=OV(this.state,this.props.data,this.props.layout,I);return $?G(G({},A),$):null}},{key:"inRange",value:function(x,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,A=x/_,C=S/_;if(w==="horizontal"||w==="vertical"){var I=this.state.offset,T=A>=I.left&&A<=I.left+I.width&&C>=I.top&&C<=I.top+I.height;return T?{x:A,y:C}:null}var P=this.state,O=P.angleAxisMap,N=P.radiusAxisMap;if(O&&N){var R=zs(O);return NU({x:A,y:C},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,S=this.getTooltipEventType(),_=To(x,Bu),w={};_&&S==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var A=c_(this.props,this.handleOuterEvent);return G(G({},A),w)}},{key:"addListener",value:function(){aC.on(lC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aC.removeListener(lC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,S,_){for(var w=this.state.formattedGraphicalItems,A=0,C=w.length;A<C;A++){var I=w[A];if(I.item===x||I.props.key===x.key||S===ys(I.item.type)&&_===I.childIndex)return I}return null}},{key:"renderAxis",value:function(x,S,_,w){var A=this.props,C=A.width,I=A.height;return k.createElement(Yp,Wu({},x,{className:ct("recharts-".concat(x.axisType," ").concat(x.axisType),x.className),key:S.key||"".concat(_,"-").concat(w),viewBox:{x:0,y:0,width:C,height:I},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var x=this.clipPathId,S=this.state.offset,_=S.left,w=S.top,A=S.height,C=S.width;return k.createElement("defs",null,k.createElement("clipPath",{id:x},k.createElement("rect",{x:_,y:w,height:A,width:C})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=PV(_,2),A=w[0],C=w[1];return G(G({},S),{},me({},A,C.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=PV(_,2),A=w[0],C=w[1];return G(G({},S),{},me({},A,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var S=this.state,_=S.formattedGraphicalItems,w=S.activeItem;if(_&&_.length)for(var A=0,C=_.length;A<C;A++){var I=_[A],T=I.props,P=I.item,O=ys(P.type);if(O==="Bar"){var N=(T.data||[]).find(function(F){return _8e(x,F)});if(N)return{graphicalItem:I,payload:N}}else if(O==="RadialBar"){var R=(T.data||[]).find(function(F){return NU(x,F)});if(R)return{graphicalItem:I,payload:R}}else if(xS(I,w)||_S(I,w)||Ay(I,w)){var B=Eze({graphicalItem:I,activeTooltipItem:w,itemData:P.props.data}),V=P.props.activeIndex===void 0?B:P.props.activeIndex;return{graphicalItem:G(G({},I),{},{childIndex:V}),payload:Ay(I,w)?P.props.data[B]:I.props.data[B]}}}return null}},{key:"render",value:function(){var x=this;if(!Z3(this))return null;var S=this.props,_=S.children,w=S.className,A=S.width,C=S.height,I=S.style,T=S.compact,P=S.title,O=S.desc,N=IV(S,Gqe),R=qe(N);if(T)return k.createElement(YP,Wu({},R,{width:A,height:C,title:P,desc:O}),this.renderClipPath(),tB(_,this.renderMap));if(this.props.accessibilityLayer){var B,V;R.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,R.role=(V=this.props.role)!==null&&V!==void 0?V:"img",R.onKeyDown=function($){x.accessibilityManager.keyboardEvent($)},R.onFocus=function(){x.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return k.createElement("div",Wu({className:ct("recharts-wrapper",w),style:G({position:"relative",cursor:"default",width:A,height:C},I)},F,{ref:function(L){x.container=L},role:"region"}),k.createElement(YP,Wu({},R,{width:A,height:C,title:P,desc:O,style:aHe}),this.renderClipPath(),tB(_,this.renderMap)),this.renderLegend(),this.renderTooltip())}}]),b}(E.Component),me(r,"displayName",n),me(r,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),me(r,"getDerivedStateFromProps",function(y,g){var b=y.dataKey,v=y.data,x=y.children,S=y.width,_=y.height,w=y.layout,A=y.stackOffset,C=y.margin,I=g.dataStartIndex,T=g.dataEndIndex;if(g.updateId===void 0){var P=RV(y);return G(G(G({},P),{},{updateId:0},m(G(G({props:y},P),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(b!==g.prevDataKey||v!==g.prevData||S!==g.prevWidth||_!==g.prevHeight||w!==g.prevLayout||A!==g.prevStackOffset||!hf(C,g.prevMargin)){var O=RV(y),N={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},R=G(G({},OV(g,v,w)),{},{updateId:g.updateId+1}),B=G(G(G({},O),N),R);return G(G(G({},B),m(G({props:y},B),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(!OY(x,g.prevChildren)){var V,F,$,L,z=To(x,Td),ce=z&&(V=(F=z.props)===null||F===void 0?void 0:F.startIndex)!==null&&V!==void 0?V:I,te=z&&($=(L=z.props)===null||L===void 0?void 0:L.endIndex)!==null&&$!==void 0?$:T,be=ce!==I||te!==T,st=!Xe(v),rt=st&&!be?g.updateId:g.updateId+1;return G(G({updateId:rt},m(G(G({props:y},g),{},{updateId:rt,dataStartIndex:ce,dataEndIndex:te}),g)),{},{prevChildren:x,dataStartIndex:ce,dataEndIndex:te})}return null}),me(r,"renderActiveDot",function(y,g){var b;return E.isValidElement(y)?b=E.cloneElement(y,g):Me(y)?b=y(g):b=k.createElement(i$,g),k.createElement(Jt,{className:"recharts-active-dot",key:g.key},b)}),r},gHe=yHe({chartName:"LineChart",GraphicalChild:bi,axisComponents:[{axisType:"xAxis",AxisComp:ES},{axisType:"yAxis",AxisComp:AS}],formatAxisMap:K9e});function vHe({players:t,rounds:e}){return d.jsx(x4e,{width:"100%",height:"100%",children:d.jsxs(gHe,{data:e,children:[d.jsx(c$,{strokeDasharray:"3 3"}),d.jsx(ES,{tick:{fill:"white"},dataKey:"name"}),d.jsx(AS,{tick:{fill:"white"},width:120,allowDecimals:!1,tickCount:5}),d.jsx(bi,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerEast"}),d.jsx(bi,{type:"linear",stroke:t.playerEast.color,strokeWidth:8,isAnimationActive:!1,name:t.playerEast.name,dataKey:"playerEast"}),d.jsx(bi,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerSouth"}),d.jsx(bi,{type:"linear",stroke:t.playerSouth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerSouth.name,dataKey:"playerSouth"}),d.jsx(bi,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerWest"}),d.jsx(bi,{type:"linear",stroke:t.playerWest.color,strokeWidth:8,isAnimationActive:!1,name:t.playerWest.name,dataKey:"playerWest"}),d.jsx(bi,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerNorth"}),d.jsx(bi,{type:"linear",stroke:t.playerNorth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerNorth.name,dataKey:"playerNorth"})]})})}const bHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?d.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:["playerEast","playerSouth","playerWest","playerNorth"].map((n,i)=>d.jsxs("div",{className:Ar("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s",filter:t.teams[n].ranking!=="1"?"grayscale(1)":"grayscale(0)"},children:[d.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${t.teams[n].color})`,opacity:.5}}),d.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),d.jsxs("div",{className:Ar("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[d.jsx("img",{src:t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),d.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:t.teams[n].teamName}),d.jsx("h3",{className:"text-[1em] h-[2em] font-semibold text-center",children:t.teams[n].teamSecondaryName}),d.jsxs("h3",{className:"text-[1.5em] font-semibold text-center flex justify-between px-[.5em]",children:[d.jsx("span",{children:rd(t.teams[n].ranking)}),d.jsx("span",{children:ya(t.teams[n].point)})]})]})]},n))})]}):t.type==="players"?d.jsxs("div",{className:"absolute px-24 pb-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[d.jsx("div",{className:"flex-1"}),d.jsxs("div",{className:"flex-[3] flex flex-col items-stretch",children:[d.jsxs("div",{className:Ar("flex gap-x-[1em] pl-[1em] mb-[.5em]",{"mi-teams-in":e===0,"mi-teams-out":e>0}),children:[d.jsx("div",{className:"flex-[5]"}),d.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"分數"}),d.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"立直次數"}),d.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"和了次數"}),d.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"放銃次數"})]}),t.teamPlayers.map((n,i)=>d.jsxs("div",{className:Ar("relative overflow-hidden flex-1",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s"},children:[d.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to left, transparent, ${n.color})`,opacity:.5}},n.teamName),d.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${n.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),d.jsxs("div",{className:Ar("absolute inset-0 flex gap-x-[1em] items-center pl-[1em]",{"mi-teams-team-out":e>=0&&r>0}),children:[d.jsxs("div",{className:"text-left flex-[5]",children:[d.jsxs("h3",{className:"text-[1.5em] font-semibold",children:[n.playerName," (",n.playerNickname,")"]}),d.jsx("h3",{className:"text-[.8em] font-semibold",children:n.teamName})]}),d.jsxs("div",{className:"flex-1 text-right",children:[d.jsx("p",{className:"text-[1.5em] leading-[1em]",children:Av(n.result.score)}),d.jsx("p",{children:ya(n.result.point)})]}),d.jsxs("div",{className:"flex-1 text-right",children:[d.jsx("span",{className:"text-[1.5em]",children:Av(n.result.riichiCount)}),"回"]}),d.jsxs("div",{className:"flex-1 text-right",children:[d.jsx("span",{className:"text-[1.5em]",children:Av(n.result.ronCount)}),"回"]}),d.jsxs("div",{className:"flex-1 text-right",children:[d.jsx("span",{className:"text-[1.5em]",children:Av(n.result.chuckCount)}),"回"]})]})]},n.teamName))]})]}):t.type==="chart"?d.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[d.jsx("div",{className:"flex-1"}),d.jsxs("div",{className:"flex-[3] flex items-stretch gap-x-[1em]",children:[d.jsx("div",{className:Ar("flex-[3]",{"mi-chart-chart-in":e===0,"mi-chart-chart-out":e>0}),children:d.jsx(vHe,{rounds:t.rounds,players:t.players})}),d.jsx("div",{className:"flex-1 flex flex-col pb-[1em]",children:[0,1,2,3].map(n=>d.jsxs("div",{className:Ar("relative overflow-hidden flex-1 pl-[.5em] flex flex-col justify-center",{"mi-chart-player-in":e===0,"mi-chart-player-out":e>0}),style:{background:`linear-gradient(to left, transparent, ${t.teamPlayers[n].color}C0)`,animationDelay:e===0?n*.25+"s":"0s"},children:[d.jsx("img",{src:t.teamPlayers[n].teamLogoImageUrl+"?w=320&h=320",alt:t.teamPlayers[n].teamId,className:"absolute left-0 opacity-10 -z-10"}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].playerNickname}),d.jsx("p",{className:"text-[.75em]",children:t.teamPlayers[n].teamName})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].result.score}),d.jsx("p",{className:"text-[.75em]",children:ya(t.teamPlayers[n].result.point)})]})]})]}))})]})]}):t.type==="ranking"?d.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[d.jsx("div",{className:"flex-1"}),d.jsxs("div",{className:Ar("flex-[5] flex flex-col",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),children:[d.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6",children:[d.jsx("p",{className:"flex-1 text-center",children:"排名"}),d.jsx("p",{className:"flex-[5]",children:"隊伍"}),d.jsx("p",{className:"flex-1 text-center",children:"積分"}),d.jsx("p",{className:"flex-1 text-center",children:"與前名差距"}),d.jsx("p",{className:"flex-1 text-center",children:"半莊數"})]}),t.teams.map((n,i)=>{var o,s;return d.jsxs("div",{className:Ar("relative flex-1 flex items-center gap-6 overflow-hidden",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`,opacity:n.newResult?1:.3},children:[d.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-25 -z-10"}),d.jsxs("div",{className:"absolute left-[.5em]",children:[n.ranking>i+1&&d.jsx("span",{children:d.jsx("i",{className:"bi bi-caret-up-fill text-green-500"})}),n.ranking<i+1&&d.jsx("span",{children:d.jsx("i",{className:"bi bi-caret-down-fill text-red-500"})})]}),d.jsx("p",{className:"flex-1 text-center space-x-1",children:d.jsx("span",{children:rd(i+1)})}),d.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),d.jsx("p",{className:Ar("flex-1 text-center",{"text-green-500":n.newResult&&n.newResult.point>n.point,"text-red-500":n.newResult&&n.newResult.point<n.point}),children:ya(((o=n.newResult)==null?void 0:o.point)||n.point)}),d.jsx("p",{className:"flex-1 text-center",children:i>0?(t.teams[i-1].point-n.point).toFixed(1):"-"}),d.jsxs("p",{className:"flex-1 text-center",children:[((s=n.newResult)==null?void 0:s.matchCount)||n.matchCount,d.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id)})]})]}):d.jsx(d.Fragment,{}),yJ=({params:{matchId:t}})=>{var p;const{match:e,matchRounds:r}=Jo(t),{data:n}=aj(t),{data:i}=qa({queryKey:["tournament",n==null?void 0:n.tournament._id],queryFn:()=>AO(n==null?void 0:n.tournament._id).then(m=>({...m,teams:m.teams.sort((y,g)=>g.point-y.point)})),enabled:!!(n!=null&&n.tournament._id)}),o=E.useMemo(()=>{var _,w,A,C,I,T,P,O,N,R,B,V;if(!e||!r||!n||!i)return[{type:"empty",_id:"empty",subslide:0}];const m=jG(Object.values(r)),y=[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:{playerEast:{...n.playerEast,point:m.result.playerEast.point,ranking:m.result.playerEast.ranking},playerSouth:{...n.playerSouth,point:m.result.playerSouth.point,ranking:m.result.playerSouth.ranking},playerWest:{...n.playerWest,point:m.result.playerWest.point,ranking:m.result.playerWest.ranking},playerNorth:{...n.playerNorth,point:m.result.playerNorth.point,ranking:m.result.playerNorth.ranking}},subslide:1}],g={playerEast:{score:((_=m.result.playerEast)==null?void 0:_.score)??25e3,point:((w=m.result.playerEast)==null?void 0:w.point)??0,ranking:((A=m.result.playerEast)==null?void 0:A.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerSouth:{score:((C=m.result.playerSouth)==null?void 0:C.score)??25e3,point:((I=m.result.playerSouth)==null?void 0:I.point)??0,ranking:((T=m.result.playerSouth)==null?void 0:T.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerWest:{score:((P=m.result.playerWest)==null?void 0:P.score)??25e3,point:((O=m.result.playerWest)==null?void 0:O.point)??0,ranking:((N=m.result.playerWest)==null?void 0:N.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerNorth:{score:((R=m.result.playerNorth)==null?void 0:R.score)??25e3,point:((B=m.result.playerNorth)==null?void 0:B.point)??0,ranking:((V=m.result.playerNorth)==null?void 0:V.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]}};for(const F of m.rounds)g.playerEast.scores.push(F.playerEast.afterScore),g.playerSouth.scores.push(F.playerSouth.afterScore),g.playerWest.scores.push(F.playerWest.afterScore),g.playerNorth.scores.push(F.playerNorth.afterScore),F.playerEast.status==="isRiichied"&&(g.playerEast.riichiCount+=1),F.playerSouth.status==="isRiichied"&&(g.playerSouth.riichiCount+=1),F.playerWest.status==="isRiichied"&&(g.playerWest.riichiCount+=1),F.playerNorth.status==="isRiichied"&&(g.playerNorth.riichiCount+=1),(F.type==="ron"||F.type==="tsumo")&&(F.playerEast.type==="win"&&(g.playerEast.ronCount+=1),F.playerSouth.type==="win"&&(g.playerSouth.ronCount+=1),F.playerWest.type==="win"&&(g.playerWest.ronCount+=1),F.playerNorth.type==="win"&&(g.playerNorth.ronCount+=1)),F.type==="ron"&&(F.playerEast.type==="lose"&&(g.playerEast.chuckCount+=1),F.playerSouth.type==="lose"&&(g.playerSouth.chuckCount+=1),F.playerWest.type==="lose"&&(g.playerWest.chuckCount+=1),F.playerNorth.type==="lose"&&(g.playerNorth.chuckCount+=1));const b=[{...n.playerEast,result:g.playerEast},{...n.playerSouth,result:g.playerSouth},{...n.playerWest,result:g.playerWest},{...n.playerNorth,result:g.playerNorth}].sort((F,$)=>$.result.score-F.result.score);y.push({type:"players",_id:"players",teamPlayers:b,subslide:1});const v=m.rounds.findIndex(F=>F.code.startsWith("5."));y.push({type:"chart",_id:"chart",rounds:[{name:"",playerEast:25e3,playerSouth:25e3,playerWest:25e3,playerNorth:25e3},...m.rounds.map((F,$)=>({name:$===0?"東":$===v?"南":"",playerEast:F.playerEast.afterScore,playerSouth:F.playerSouth.afterScore,playerWest:F.playerWest.afterScore,playerNorth:F.playerNorth.afterScore}))],players:{playerEast:{name:n.playerEast.playerNickname,color:n.playerEast.color},playerSouth:{name:n.playerSouth.playerNickname,color:n.playerSouth.color},playerWest:{name:n.playerWest.playerNickname,color:n.playerWest.color},playerNorth:{name:n.playerNorth.playerNickname,color:n.playerNorth.color}},teamPlayers:b,subslide:1});const x=["playerEast","playerSouth","playerWest","playerNorth"],S=[...i.teams].map(F=>{for(const $ of x)if(F.team._id===n[$].teamId)return{...F,newResult:{point:F.point+m.result[$].point+m.result[$].penalty,matchCount:F.matchCount+1}};return F});return y.push({_id:"ranking",type:"ranking",teams:S.sort((F,$)=>{var L,z;return(((L=$.newResult)==null?void 0:L.point)||$.point)-(((z=F.newResult)==null?void 0:z.point)||F.point)}),subslide:1}),y},[e,n,r,i]),[s,a]=E.useState(0),[l,c]=E.useState(0),[u,f]=E.useState(!1),h=E.useCallback(()=>{if(u)return;const m=o[s];if(!m){a(1);return}m.type==="empty"?a(y=>y+1):l>=m.subslide-1?(a(y=>y+.5),f(!0),setTimeout(()=>{a(y=>Math.ceil(y)),c(0),f(!1)},1200)):(c(y=>y+.5),f(!0),setTimeout(()=>{c(y=>Math.ceil(y)),f(!1)},1200))},[u,s,o,l]);return!e||!r||!n||!i?d.jsx(d.Fragment,{}):d.jsxs("div",{className:"match-introduction fixed inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:h,children:[d.jsx("div",{className:"absolute py-16 px-24 inset-0",children:d.jsxs("div",{className:"flex items-end gap-x-[0.25em] mi-title-in",children:[d.jsx("div",{children:d.jsx("img",{src:n.tournament.logoUrl+"?w=280&h=280&auto=format",alt:n.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:n.tournament.name}),d.jsxs("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:["常規賽 ",(p=n.startAt)==null?void 0:p.substring(0,10)]})]}),d.jsx("div",{children:d.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:"對局結果"})})]})}),o.map((m,y)=>d.jsx(bHe,{slide:m,status:s-y,subslide:l},m._id))]})};function xHe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?d.jsx(d.Fragment,{children:"讀取中…"}):d.jsx(yJ,{params:r})}const _He=new Uhe({defaultOptions:{queries:{retry:2,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,staleTime:1/0}}});uC.createRoot(document.getElementById("root")).render(d.jsx(k.StrictMode,{children:d.jsx(qhe,{client:_He,children:d.jsx(Ahe,{children:d.jsx(Pye,{children:d.jsxs(Tte,{children:[d.jsx(at,{path:"/",component:cye}),d.jsx(at,{path:"/create-match",component:xTe}),d.jsx(at,{path:"/match/:matchId",component:wye}),d.jsx(at,{path:"/match/:matchId/obs",component:$G}),d.jsx(at,{path:"/match/:matchId/overlay",component:_Y}),d.jsx(at,{path:"/match/:matchId/control",component:wH}),d.jsx(at,{path:"/match/:matchId/export",component:gY}),d.jsx(at,{path:"/match/:matchId/forecast",component:vY}),d.jsx(at,{path:"/match/:matchId/introduction",component:xY}),d.jsx(at,{path:"/match/:matchId/summary",component:yJ}),d.jsx(at,{path:"/match/:matchId/nameplates",component:ITe}),d.jsx(at,{path:"/match/:matchId/stat",component:yY}),d.jsx(at,{path:"/obs/:obsRoomId",component:STe}),d.jsx(at,{path:"/obs/:obsRoomId/overlay",component:MTe}),d.jsx(at,{path:"/obs/:obsRoomId/control",component:PTe}),d.jsx(at,{path:"/obs/:obsRoomId/export",component:FTe}),d.jsx(at,{path:"/obs/:obsRoomId/forecast",component:RTe}),d.jsx(at,{path:"/obs/:obsRoomId/introduction",component:LTe}),d.jsx(at,{path:"/obs/:obsRoomId/summary",component:xHe}),d.jsx(at,{path:"/obs/:obsRoomId/weekly-summary",component:L3}),d.jsx(at,{path:"/obs/:obsRoomId/end",component:jTe}),d.jsx(at,{path:"/obs/:obsRoomId/score",component:ETe}),d.jsx(at,{path:"/obs/:obsRoomId/chart",component:CTe}),d.jsx(at,{path:"/obs/:obsRoomId/carousel",component:TTe}),d.jsx(at,{path:"/obs/:obsRoomId/stat",component:NTe}),d.jsx(at,{path:"/players",component:mTe}),d.jsx(at,{path:"/teams",component:wTe}),d.jsx(at,{path:"/matches",component:ATe}),d.jsx(at,{path:"/weekly-summary/:week",component:L3})]})})})})}));Nte();export{kl as c,ot as g};
