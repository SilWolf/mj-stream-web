var NS=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var D=(t,e,r)=>(NS(t,e,"read from private field"),r?r.call(t):e.get(t)),de=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},oe=(t,e,r,n)=>(NS(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var nv=(t,e,r,n)=>({set _(i){oe(t,e,i,r)},get _(){return D(t,e,n)}}),Oe=(t,e,r)=>(NS(t,e,"access private method"),r);function wJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function SJ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var VV={exports:{}},sw={},WV={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=Symbol.for("react.element"),EJ=Symbol.for("react.portal"),AJ=Symbol.for("react.fragment"),CJ=Symbol.for("react.strict_mode"),TJ=Symbol.for("react.profiler"),PJ=Symbol.for("react.provider"),IJ=Symbol.for("react.context"),NJ=Symbol.for("react.forward_ref"),kJ=Symbol.for("react.suspense"),OJ=Symbol.for("react.memo"),RJ=Symbol.for("react.lazy"),u$=Symbol.iterator;function jJ(t){return t===null||typeof t!="object"?null:(t=u$&&t[u$]||t["@@iterator"],typeof t=="function"?t:null)}var zV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GV=Object.assign,qV={};function $d(t,e,r){this.props=t,this.context=e,this.refs=qV,this.updater=r||zV}$d.prototype.isReactComponent={};$d.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$d.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HV(){}HV.prototype=$d.prototype;function lN(t,e,r){this.props=t,this.context=e,this.refs=qV,this.updater=r||zV}var cN=lN.prototype=new HV;cN.constructor=lN;GV(cN,$d.prototype);cN.isPureReactComponent=!0;var f$=Array.isArray,KV=Object.prototype.hasOwnProperty,uN={current:null},YV={key:!0,ref:!0,__self:!0,__source:!0};function QV(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)KV.call(e,n)&&!YV.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:qy,type:t,key:o,ref:s,props:i,_owner:uN.current}}function $J(t,e){return{$$typeof:qy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fN(t){return typeof t=="object"&&t!==null&&t.$$typeof===qy}function DJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var d$=/\/+/g;function kS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DJ(""+t.key):e.toString(36)}function f0(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qy:case EJ:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+kS(s,0):n,f$(i)?(r="",t!=null&&(r=t.replace(d$,"$&/")+"/"),f0(i,e,r,"",function(c){return c})):i!=null&&(fN(i)&&(i=$J(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(d$,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",f$(t))for(var a=0;a<t.length;a++){o=t[a];var l=n+kS(o,a);s+=f0(o,e,r,l,i)}else if(l=jJ(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=n+kS(o,a++),s+=f0(o,e,r,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function iv(t,e,r){if(t==null)return t;var n=[],i=0;return f0(t,n,"","",function(o){return e.call(r,o,i++)}),n}function MJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},d0={transition:null},FJ={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:d0,ReactCurrentOwner:uN};ze.Children={map:iv,forEach:function(t,e,r){iv(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return iv(t,function(){e++}),e},toArray:function(t){return iv(t,function(e){return e})||[]},only:function(t){if(!fN(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=$d;ze.Fragment=AJ;ze.Profiler=TJ;ze.PureComponent=lN;ze.StrictMode=CJ;ze.Suspense=kJ;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FJ;ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=GV({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=uN.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)KV.call(e,l)&&!YV.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:qy,type:t.type,key:i,ref:o,props:n,_owner:s}};ze.createContext=function(t){return t={$$typeof:IJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PJ,_context:t},t.Consumer=t};ze.createElement=QV;ze.createFactory=function(t){var e=QV.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:NJ,render:t}};ze.isValidElement=fN;ze.lazy=function(t){return{$$typeof:RJ,_payload:{_status:-1,_result:t},_init:MJ}};ze.memo=function(t,e){return{$$typeof:OJ,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=d0.transition;d0.transition={};try{t()}finally{d0.transition=e}};ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.useCallback=function(t,e){return Pn.current.useCallback(t,e)};ze.useContext=function(t){return Pn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Pn.current.useEffect(t,e)};ze.useId=function(){return Pn.current.useId()};ze.useImperativeHandle=function(t,e,r){return Pn.current.useImperativeHandle(t,e,r)};ze.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Pn.current.useMemo(t,e)};ze.useReducer=function(t,e,r){return Pn.current.useReducer(t,e,r)};ze.useRef=function(t){return Pn.current.useRef(t)};ze.useState=function(t){return Pn.current.useState(t)};ze.useSyncExternalStore=function(t,e,r){return Pn.current.useSyncExternalStore(t,e,r)};ze.useTransition=function(){return Pn.current.useTransition()};ze.version="18.2.0";WV.exports=ze;var E=WV.exports;const k=ot(E),LJ=wJ({__proto__:null,default:k},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BJ=E,UJ=Symbol.for("react.element"),VJ=Symbol.for("react.fragment"),WJ=Object.prototype.hasOwnProperty,zJ=BJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GJ={key:!0,ref:!0,__self:!0,__source:!0};function XV(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)WJ.call(e,n)&&!GJ.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:UJ,type:t,key:o,ref:s,props:i,_owner:zJ.current}}sw.Fragment=VJ;sw.jsx=XV;sw.jsxs=XV;VV.exports=sw;var f=VV.exports,uC={},JV={exports:{}},ai={},ZV={exports:{}},e6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var z=R.length;R.push(F);e:for(;0<z;){var ae=z-1>>>1,te=R[ae];if(0<i(te,F))R[ae]=F,R[z]=te,z=ae;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var F=R[0],z=R.pop();if(z!==F){R[0]=z;e:for(var ae=0,te=R.length,be=te>>>1;ae<be;){var at=2*(ae+1)-1,rt=R[at],Vt=at+1,pt=R[Vt];if(0>i(rt,z))Vt<te&&0>i(pt,rt)?(R[ae]=pt,R[Vt]=z,ae=Vt):(R[ae]=rt,R[at]=z,ae=at);else if(Vt<te&&0>i(pt,z))R[ae]=pt,R[Vt]=z,ae=Vt;else break e}}return F}function i(R,F){var z=R.sortIndex-F.sortIndex;return z!==0?z:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var F=r(c);F!==null;){if(F.callback===null)n(c);else if(F.startTime<=R)n(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=r(c)}}function S(R){if(y=!1,x(R),!m)if(r(l)!==null)m=!0,U(_);else{var F=r(c);F!==null&&V(S,F.startTime-R)}}function _(R,F){m=!1,y&&(y=!1,b(C),C=-1),p=!0;var z=h;try{for(x(F),d=r(l);d!==null&&(!(d.expirationTime>F)||R&&!P());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,h=d.priorityLevel;var te=ae(d.expirationTime<=F);F=t.unstable_now(),typeof te=="function"?d.callback=te:d===r(l)&&n(l),x(F)}else n(l);d=r(l)}if(d!==null)var be=!0;else{var at=r(c);at!==null&&V(S,at.startTime-F),be=!1}return be}finally{d=null,h=z,p=!1}}var w=!1,A=null,C=-1,I=5,T=-1;function P(){return!(t.unstable_now()-T<I)}function O(){if(A!==null){var R=t.unstable_now();T=R;var F=!0;try{F=A(!0,R)}finally{F?N():(w=!1,A=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,L=j.port2;j.port1.onmessage=O,N=function(){L.postMessage(null)}}else N=function(){g(O,0)};function U(R){A=R,w||(w=!0,N())}function V(R,F){C=g(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,U(_))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var z=h;h=F;try{return R()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=h;h=R;try{return F()}finally{h=z}},t.unstable_scheduleCallback=function(R,F,z){var ae=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ae+z:ae):z=ae,R){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=z+te,R={id:u++,callback:F,priorityLevel:R,startTime:z,expirationTime:te,sortIndex:-1},z>ae?(R.sortIndex=z,e(c,R),r(l)===null&&R===r(c)&&(y?(b(C),C=-1):y=!0,V(S,z-ae))):(R.sortIndex=te,e(l,R),m||p||(m=!0,U(_))),R},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(R){var F=h;return function(){var z=h;h=F;try{return R.apply(this,arguments)}finally{h=z}}}})(e6);ZV.exports=e6;var qJ=ZV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=E,ii=qJ;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r6=new Set,Xp={};function jc(t,e){Of(t,e),Of(t+"Capture",e)}function Of(t,e){for(Xp[t]=e,t=0;t<e.length;t++)r6.add(e[t])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fC=Object.prototype.hasOwnProperty,HJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h$={},p$={};function KJ(t){return fC.call(p$,t)?!0:fC.call(h$,t)?!1:HJ.test(t)?p$[t]=!0:(h$[t]=!0,!1)}function YJ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QJ(t,e,r,n){if(e===null||typeof e>"u"||YJ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qr[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qr[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qr[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qr[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qr[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qr[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qr[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qr[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qr[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var dN=/[\-:]([a-z])/g;function hN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dN,hN);Qr[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dN,hN);Qr[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dN,hN);Qr[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qr[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});Qr.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qr[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function pN(t,e,r,n){var i=Qr.hasOwnProperty(e)?Qr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QJ(e,r,i,n)&&(r=null),n||i===null?KJ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Os=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ov=Symbol.for("react.element"),wu=Symbol.for("react.portal"),Su=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),dC=Symbol.for("react.profiler"),n6=Symbol.for("react.provider"),i6=Symbol.for("react.context"),yN=Symbol.for("react.forward_ref"),hC=Symbol.for("react.suspense"),pC=Symbol.for("react.suspense_list"),gN=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),o6=Symbol.for("react.offscreen"),m$=Symbol.iterator;function mh(t){return t===null||typeof t!="object"?null:(t=m$&&t[m$]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,OS;function Yh(t){if(OS===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);OS=e&&e[1]||""}return`
`+OS+t}var RS=!1;function jS(t,e){if(!t||RS)return"";RS=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{RS=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Yh(t):""}function XJ(t){switch(t.tag){case 5:return Yh(t.type);case 16:return Yh("Lazy");case 13:return Yh("Suspense");case 19:return Yh("SuspenseList");case 0:case 2:case 15:return t=jS(t.type,!1),t;case 11:return t=jS(t.type.render,!1),t;case 1:return t=jS(t.type,!0),t;default:return""}}function mC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Su:return"Fragment";case wu:return"Portal";case dC:return"Profiler";case mN:return"StrictMode";case hC:return"Suspense";case pC:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case i6:return(t.displayName||"Context")+".Consumer";case n6:return(t._context.displayName||"Context")+".Provider";case yN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gN:return e=t.displayName||null,e!==null?e:mC(t.type)||"Memo";case Ks:e=t._payload,t=t._init;try{return mC(t(e))}catch{}}return null}function JJ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mC(e);case 8:return e===mN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function s6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZJ(t){var e=s6(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sv(t){t._valueTracker||(t._valueTracker=ZJ(t))}function a6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=s6(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function nb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yC(t,e){var r=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function y$(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ba(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l6(t,e){e=e.checked,e!=null&&pN(t,"checked",e,!1)}function gC(t,e){l6(t,e);var r=Ba(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vC(t,e.type,r):e.hasOwnProperty("defaultValue")&&vC(t,e.type,Ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g$(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vC(t,e,r){(e!=="number"||nb(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Qh=Array.isArray;function Gu(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ba(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bC(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function v$(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Y(92));if(Qh(r)){if(1<r.length)throw Error(Y(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ba(r)}}function c6(t,e){var r=Ba(e.value),n=Ba(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function b$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xC(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var av,f6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(av=av||document.createElement("div"),av.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=av.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jp(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var yp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eZ=["Webkit","ms","Moz","O"];Object.keys(yp).forEach(function(t){eZ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yp[e]=yp[t]})});function d6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||yp.hasOwnProperty(t)&&yp[t]?(""+e).trim():e+"px"}function h6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=d6(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var tZ=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _C(t,e){if(e){if(tZ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function wC(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SC=null;function vN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var EC=null,qu=null,Hu=null;function x$(t){if(t=Yy(t)){if(typeof EC!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=fw(e),EC(t.stateNode,t.type,e))}}function p6(t){qu?Hu?Hu.push(t):Hu=[t]:qu=t}function m6(){if(qu){var t=qu,e=Hu;if(Hu=qu=null,x$(t),e)for(t=0;t<e.length;t++)x$(e[t])}}function y6(t,e){return t(e)}function g6(){}var $S=!1;function v6(t,e,r){if($S)return t(e,r);$S=!0;try{return y6(t,e,r)}finally{$S=!1,(qu!==null||Hu!==null)&&(g6(),m6())}}function Zp(t,e){var r=t.stateNode;if(r===null)return null;var n=fw(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Y(231,e,typeof r));return r}var AC=!1;if(xs)try{var yh={};Object.defineProperty(yh,"passive",{get:function(){AC=!0}}),window.addEventListener("test",yh,yh),window.removeEventListener("test",yh,yh)}catch{AC=!1}function rZ(t,e,r,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var gp=!1,ib=null,ob=!1,CC=null,nZ={onError:function(t){gp=!0,ib=t}};function iZ(t,e,r,n,i,o,s,a,l){gp=!1,ib=null,rZ.apply(nZ,arguments)}function oZ(t,e,r,n,i,o,s,a,l){if(iZ.apply(this,arguments),gp){if(gp){var c=ib;gp=!1,ib=null}else throw Error(Y(198));ob||(ob=!0,CC=c)}}function $c(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function b6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _$(t){if($c(t)!==t)throw Error(Y(188))}function sZ(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return _$(i),t;if(o===n)return _$(i),e;o=o.sibling}throw Error(Y(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error(Y(189))}}if(r.alternate!==n)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?t:e}function x6(t){return t=sZ(t),t!==null?_6(t):null}function _6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_6(t);if(e!==null)return e;t=t.sibling}return null}var w6=ii.unstable_scheduleCallback,w$=ii.unstable_cancelCallback,aZ=ii.unstable_shouldYield,lZ=ii.unstable_requestPaint,Xt=ii.unstable_now,cZ=ii.unstable_getCurrentPriorityLevel,bN=ii.unstable_ImmediatePriority,S6=ii.unstable_UserBlockingPriority,sb=ii.unstable_NormalPriority,uZ=ii.unstable_LowPriority,E6=ii.unstable_IdlePriority,aw=null,Mo=null;function fZ(t){if(Mo&&typeof Mo.onCommitFiberRoot=="function")try{Mo.onCommitFiberRoot(aw,t,void 0,(t.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:pZ,dZ=Math.log,hZ=Math.LN2;function pZ(t){return t>>>=0,t===0?32:31-(dZ(t)/hZ|0)|0}var lv=64,cv=4194304;function Xh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ab(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=Xh(a):(o&=s,o!==0&&(n=Xh(o)))}else s=r&~i,s!==0?n=Xh(s):o!==0&&(n=Xh(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-io(e),i=1<<r,n|=t[r],e&=~i;return n}function mZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yZ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-io(o),a=1<<s,l=i[s];l===-1?(!(a&r)||a&n)&&(i[s]=mZ(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function TC(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A6(){var t=lv;return lv<<=1,!(lv&4194240)&&(lv=64),t}function DS(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hy(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-io(e),t[e]=r}function gZ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-io(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function xN(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-io(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var lt=0;function C6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var T6,_N,P6,I6,N6,PC=!1,uv=[],wa=null,Sa=null,Ea=null,em=new Map,tm=new Map,ea=[],vZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function S$(t,e){switch(t){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":em.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tm.delete(e.pointerId)}}function gh(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Yy(e),e!==null&&_N(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bZ(t,e,r,n,i){switch(e){case"focusin":return wa=gh(wa,t,e,r,n,i),!0;case"dragenter":return Sa=gh(Sa,t,e,r,n,i),!0;case"mouseover":return Ea=gh(Ea,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return em.set(o,gh(em.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,tm.set(o,gh(tm.get(o)||null,t,e,r,n,i)),!0}return!1}function k6(t){var e=Ol(t.target);if(e!==null){var r=$c(e);if(r!==null){if(e=r.tag,e===13){if(e=b6(r),e!==null){t.blockedOn=e,N6(t.priority,function(){P6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function h0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=IC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);SC=n,r.target.dispatchEvent(n),SC=null}else return e=Yy(r),e!==null&&_N(e),t.blockedOn=r,!1;e.shift()}return!0}function E$(t,e,r){h0(t)&&r.delete(e)}function xZ(){PC=!1,wa!==null&&h0(wa)&&(wa=null),Sa!==null&&h0(Sa)&&(Sa=null),Ea!==null&&h0(Ea)&&(Ea=null),em.forEach(E$),tm.forEach(E$)}function vh(t,e){t.blockedOn===e&&(t.blockedOn=null,PC||(PC=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,xZ)))}function rm(t){function e(i){return vh(i,t)}if(0<uv.length){vh(uv[0],t);for(var r=1;r<uv.length;r++){var n=uv[r];n.blockedOn===t&&(n.blockedOn=null)}}for(wa!==null&&vh(wa,t),Sa!==null&&vh(Sa,t),Ea!==null&&vh(Ea,t),em.forEach(e),tm.forEach(e),r=0;r<ea.length;r++)n=ea[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ea.length&&(r=ea[0],r.blockedOn===null);)k6(r),r.blockedOn===null&&ea.shift()}var Ku=Os.ReactCurrentBatchConfig,lb=!0;function _Z(t,e,r,n){var i=lt,o=Ku.transition;Ku.transition=null;try{lt=1,wN(t,e,r,n)}finally{lt=i,Ku.transition=o}}function wZ(t,e,r,n){var i=lt,o=Ku.transition;Ku.transition=null;try{lt=4,wN(t,e,r,n)}finally{lt=i,Ku.transition=o}}function wN(t,e,r,n){if(lb){var i=IC(t,e,r,n);if(i===null)qS(t,e,n,cb,r),S$(t,n);else if(bZ(i,t,e,r,n))n.stopPropagation();else if(S$(t,n),e&4&&-1<vZ.indexOf(t)){for(;i!==null;){var o=Yy(i);if(o!==null&&T6(o),o=IC(t,e,r,n),o===null&&qS(t,e,n,cb,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else qS(t,e,n,null,r)}}var cb=null;function IC(t,e,r,n){if(cb=null,t=vN(n),t=Ol(t),t!==null)if(e=$c(t),e===null)t=null;else if(r=e.tag,r===13){if(t=b6(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cb=t,null}function O6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cZ()){case bN:return 1;case S6:return 4;case sb:case uZ:return 16;case E6:return 536870912;default:return 16}default:return 16}}var ua=null,SN=null,p0=null;function R6(){if(p0)return p0;var t,e=SN,r=e.length,n,i="value"in ua?ua.value:ua.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return p0=i.slice(t,1<n?1-n:void 0)}function m0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fv(){return!0}function A$(){return!1}function li(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fv:A$,this.isPropagationStopped=A$,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fv)},persist:function(){},isPersistent:fv}),e}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EN=li(Dd),Ky=Bt({},Dd,{view:0,detail:0}),SZ=li(Ky),MS,FS,bh,lw=Bt({},Ky,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:AN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bh&&(bh&&t.type==="mousemove"?(MS=t.screenX-bh.screenX,FS=t.screenY-bh.screenY):FS=MS=0,bh=t),MS)},movementY:function(t){return"movementY"in t?t.movementY:FS}}),C$=li(lw),EZ=Bt({},lw,{dataTransfer:0}),AZ=li(EZ),CZ=Bt({},Ky,{relatedTarget:0}),LS=li(CZ),TZ=Bt({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),PZ=li(TZ),IZ=Bt({},Dd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NZ=li(IZ),kZ=Bt({},Dd,{data:0}),T$=li(kZ),OZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $Z(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jZ[t])?!!e[t]:!1}function AN(){return $Z}var DZ=Bt({},Ky,{key:function(t){if(t.key){var e=OZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=m0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:AN,charCode:function(t){return t.type==="keypress"?m0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?m0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MZ=li(DZ),FZ=Bt({},lw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P$=li(FZ),LZ=Bt({},Ky,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:AN}),BZ=li(LZ),UZ=Bt({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),VZ=li(UZ),WZ=Bt({},lw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zZ=li(WZ),GZ=[9,13,27,32],CN=xs&&"CompositionEvent"in window,vp=null;xs&&"documentMode"in document&&(vp=document.documentMode);var qZ=xs&&"TextEvent"in window&&!vp,j6=xs&&(!CN||vp&&8<vp&&11>=vp),I$=String.fromCharCode(32),N$=!1;function $6(t,e){switch(t){case"keyup":return GZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eu=!1;function HZ(t,e){switch(t){case"compositionend":return D6(e);case"keypress":return e.which!==32?null:(N$=!0,I$);case"textInput":return t=e.data,t===I$&&N$?null:t;default:return null}}function KZ(t,e){if(Eu)return t==="compositionend"||!CN&&$6(t,e)?(t=R6(),p0=SN=ua=null,Eu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j6&&e.locale!=="ko"?null:e.data;default:return null}}var YZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YZ[t.type]:e==="textarea"}function M6(t,e,r,n){p6(n),e=ub(e,"onChange"),0<e.length&&(r=new EN("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var bp=null,nm=null;function QZ(t){K6(t,0)}function cw(t){var e=Tu(t);if(a6(e))return t}function XZ(t,e){if(t==="change")return e}var F6=!1;if(xs){var BS;if(xs){var US="oninput"in document;if(!US){var O$=document.createElement("div");O$.setAttribute("oninput","return;"),US=typeof O$.oninput=="function"}BS=US}else BS=!1;F6=BS&&(!document.documentMode||9<document.documentMode)}function R$(){bp&&(bp.detachEvent("onpropertychange",L6),nm=bp=null)}function L6(t){if(t.propertyName==="value"&&cw(nm)){var e=[];M6(e,nm,t,vN(t)),v6(QZ,e)}}function JZ(t,e,r){t==="focusin"?(R$(),bp=e,nm=r,bp.attachEvent("onpropertychange",L6)):t==="focusout"&&R$()}function ZZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cw(nm)}function eee(t,e){if(t==="click")return cw(e)}function tee(t,e){if(t==="input"||t==="change")return cw(e)}function ree(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lo=typeof Object.is=="function"?Object.is:ree;function im(t,e){if(lo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!fC.call(e,i)||!lo(t[i],e[i]))return!1}return!0}function j$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $$(t,e){var r=j$(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=j$(r)}}function B6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U6(){for(var t=window,e=nb();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=nb(t.document)}return e}function TN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nee(t){var e=U6(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&B6(r.ownerDocument.documentElement,r)){if(n!==null&&TN(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=$$(r,o);var s=$$(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iee=xs&&"documentMode"in document&&11>=document.documentMode,Au=null,NC=null,xp=null,kC=!1;function D$(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;kC||Au==null||Au!==nb(n)||(n=Au,"selectionStart"in n&&TN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xp&&im(xp,n)||(xp=n,n=ub(NC,"onSelect"),0<n.length&&(e=new EN("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Au)))}function dv(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Cu={animationend:dv("Animation","AnimationEnd"),animationiteration:dv("Animation","AnimationIteration"),animationstart:dv("Animation","AnimationStart"),transitionend:dv("Transition","TransitionEnd")},VS={},V6={};xs&&(V6=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function uw(t){if(VS[t])return VS[t];if(!Cu[t])return t;var e=Cu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in V6)return VS[t]=e[r];return t}var W6=uw("animationend"),z6=uw("animationiteration"),G6=uw("animationstart"),q6=uw("transitionend"),H6=new Map,M$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(t,e){H6.set(t,e),jc(e,[t])}for(var WS=0;WS<M$.length;WS++){var zS=M$[WS],oee=zS.toLowerCase(),see=zS[0].toUpperCase()+zS.slice(1);Za(oee,"on"+see)}Za(W6,"onAnimationEnd");Za(z6,"onAnimationIteration");Za(G6,"onAnimationStart");Za("dblclick","onDoubleClick");Za("focusin","onFocus");Za("focusout","onBlur");Za(q6,"onTransitionEnd");Of("onMouseEnter",["mouseout","mouseover"]);Of("onMouseLeave",["mouseout","mouseover"]);Of("onPointerEnter",["pointerout","pointerover"]);Of("onPointerLeave",["pointerout","pointerover"]);jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aee=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jh));function F$(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,oZ(n,e,void 0,t),t.currentTarget=null}function K6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;F$(i,a,c),o=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;F$(i,a,c),o=l}}}if(ob)throw t=CC,ob=!1,CC=null,t}function Ct(t,e){var r=e[DC];r===void 0&&(r=e[DC]=new Set);var n=t+"__bubble";r.has(n)||(Y6(e,t,2,!1),r.add(n))}function GS(t,e,r){var n=0;e&&(n|=4),Y6(r,t,n,e)}var hv="_reactListening"+Math.random().toString(36).slice(2);function om(t){if(!t[hv]){t[hv]=!0,r6.forEach(function(r){r!=="selectionchange"&&(aee.has(r)||GS(r,!1,t),GS(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hv]||(e[hv]=!0,GS("selectionchange",!1,e))}}function Y6(t,e,r,n){switch(O6(e)){case 1:var i=_Z;break;case 4:i=wZ;break;default:i=wN}r=i.bind(null,e,r,t),i=void 0,!AC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function qS(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ol(a),s===null)return;if(l=s.tag,l===5||l===6){n=o=s;continue e}a=a.parentNode}}n=n.return}v6(function(){var c=o,u=vN(r),d=[];e:{var h=H6.get(t);if(h!==void 0){var p=EN,m=t;switch(t){case"keypress":if(m0(r)===0)break e;case"keydown":case"keyup":p=MZ;break;case"focusin":m="focus",p=LS;break;case"focusout":m="blur",p=LS;break;case"beforeblur":case"afterblur":p=LS;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=C$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=AZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=BZ;break;case W6:case z6:case G6:p=PZ;break;case q6:p=VZ;break;case"scroll":p=SZ;break;case"wheel":p=zZ;break;case"copy":case"cut":case"paste":p=NZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=P$}var y=(e&4)!==0,g=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var v=c,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,b!==null&&(S=Zp(v,b),S!=null&&y.push(sm(v,S,x)))),g)break;v=v.return}0<y.length&&(h=new p(h,m,null,r,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==SC&&(m=r.relatedTarget||r.fromElement)&&(Ol(m)||m[_s]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Ol(m):null,m!==null&&(g=$c(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=C$,S="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=P$,S="onPointerLeave",b="onPointerEnter",v="pointer"),g=p==null?h:Tu(p),x=m==null?h:Tu(m),h=new y(S,v+"leave",p,r,u),h.target=g,h.relatedTarget=x,S=null,Ol(u)===c&&(y=new y(b,v+"enter",m,r,u),y.target=x,y.relatedTarget=g,S=y),g=S,p&&m)t:{for(y=p,b=m,v=0,x=y;x;x=Hc(x))v++;for(x=0,S=b;S;S=Hc(S))x++;for(;0<v-x;)y=Hc(y),v--;for(;0<x-v;)b=Hc(b),x--;for(;v--;){if(y===b||b!==null&&y===b.alternate)break t;y=Hc(y),b=Hc(b)}y=null}else y=null;p!==null&&L$(d,h,p,y,!1),m!==null&&g!==null&&L$(d,g,m,y,!0)}}e:{if(h=c?Tu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=XZ;else if(k$(h))if(F6)_=tee;else{_=ZZ;var w=JZ}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=eee);if(_&&(_=_(t,c))){M6(d,_,r,u);break e}w&&w(t,h,c),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&vC(h,"number",h.value)}switch(w=c?Tu(c):window,t){case"focusin":(k$(w)||w.contentEditable==="true")&&(Au=w,NC=c,xp=null);break;case"focusout":xp=NC=Au=null;break;case"mousedown":kC=!0;break;case"contextmenu":case"mouseup":case"dragend":kC=!1,D$(d,r,u);break;case"selectionchange":if(iee)break;case"keydown":case"keyup":D$(d,r,u)}var A;if(CN)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Eu?$6(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(j6&&r.locale!=="ko"&&(Eu||C!=="onCompositionStart"?C==="onCompositionEnd"&&Eu&&(A=R6()):(ua=u,SN="value"in ua?ua.value:ua.textContent,Eu=!0)),w=ub(c,C),0<w.length&&(C=new T$(C,t,null,r,u),d.push({event:C,listeners:w}),A?C.data=A:(A=D6(r),A!==null&&(C.data=A)))),(A=qZ?HZ(t,r):KZ(t,r))&&(c=ub(c,"onBeforeInput"),0<c.length&&(u=new T$("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=A))}K6(d,e)})}function sm(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ub(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Zp(t,r),o!=null&&n.unshift(sm(t,o,i)),o=Zp(t,e),o!=null&&n.push(sm(t,o,i))),t=t.return}return n}function Hc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L$(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Zp(r,o),l!=null&&s.unshift(sm(r,l,a))):i||(l=Zp(r,o),l!=null&&s.push(sm(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var lee=/\r\n?/g,cee=/\u0000|\uFFFD/g;function B$(t){return(typeof t=="string"?t:""+t).replace(lee,`
`).replace(cee,"")}function pv(t,e,r){if(e=B$(e),B$(t)!==e&&r)throw Error(Y(425))}function fb(){}var OC=null,RC=null;function jC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $C=typeof setTimeout=="function"?setTimeout:void 0,uee=typeof clearTimeout=="function"?clearTimeout:void 0,U$=typeof Promise=="function"?Promise:void 0,fee=typeof queueMicrotask=="function"?queueMicrotask:typeof U$<"u"?function(t){return U$.resolve(null).then(t).catch(dee)}:$C;function dee(t){setTimeout(function(){throw t})}function HS(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),rm(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);rm(e)}function Aa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Md=Math.random().toString(36).slice(2),So="__reactFiber$"+Md,am="__reactProps$"+Md,_s="__reactContainer$"+Md,DC="__reactEvents$"+Md,hee="__reactListeners$"+Md,pee="__reactHandles$"+Md;function Ol(t){var e=t[So];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_s]||r[So]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=V$(t);t!==null;){if(r=t[So])return r;t=V$(t)}return e}t=r,r=t.parentNode}return null}function Yy(t){return t=t[So]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function fw(t){return t[am]||null}var MC=[],Pu=-1;function el(t){return{current:t}}function Nt(t){0>Pu||(t.current=MC[Pu],MC[Pu]=null,Pu--)}function At(t,e){Pu++,MC[Pu]=t.current,t.current=e}var Ua={},pn=el(Ua),Fn=el(!1),gc=Ua;function Rf(t,e){var r=t.type.contextTypes;if(!r)return Ua;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ln(t){return t=t.childContextTypes,t!=null}function db(){Nt(Fn),Nt(pn)}function W$(t,e,r){if(pn.current!==Ua)throw Error(Y(168));At(pn,e),At(Fn,r)}function Q6(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Y(108,JJ(t)||"Unknown",i));return Bt({},r,n)}function hb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ua,gc=pn.current,At(pn,t),At(Fn,Fn.current),!0}function z$(t,e,r){var n=t.stateNode;if(!n)throw Error(Y(169));r?(t=Q6(t,e,gc),n.__reactInternalMemoizedMergedChildContext=t,Nt(Fn),Nt(pn),At(pn,t)):Nt(Fn),At(Fn,r)}var is=null,dw=!1,KS=!1;function X6(t){is===null?is=[t]:is.push(t)}function mee(t){dw=!0,X6(t)}function tl(){if(!KS&&is!==null){KS=!0;var t=0,e=lt;try{var r=is;for(lt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}is=null,dw=!1}catch(i){throw is!==null&&(is=is.slice(t+1)),w6(bN,tl),i}finally{lt=e,KS=!1}}return null}var Iu=[],Nu=0,pb=null,mb=0,xi=[],_i=0,vc=null,ss=1,as="";function ml(t,e){Iu[Nu++]=mb,Iu[Nu++]=pb,pb=t,mb=e}function J6(t,e,r){xi[_i++]=ss,xi[_i++]=as,xi[_i++]=vc,vc=t;var n=ss;t=as;var i=32-io(n)-1;n&=~(1<<i),r+=1;var o=32-io(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,ss=1<<32-io(e)+i|r<<i|n,as=o+t}else ss=1<<o|r<<i|n,as=t}function PN(t){t.return!==null&&(ml(t,1),J6(t,1,0))}function IN(t){for(;t===pb;)pb=Iu[--Nu],Iu[Nu]=null,mb=Iu[--Nu],Iu[Nu]=null;for(;t===vc;)vc=xi[--_i],xi[_i]=null,as=xi[--_i],xi[_i]=null,ss=xi[--_i],xi[_i]=null}var ti=null,Xn=null,Ot=!1,Yi=null;function Z6(t,e){var r=Ai(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function G$(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ti=t,Xn=Aa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ti=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=vc!==null?{id:ss,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ai(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ti=t,Xn=null,!0):!1;default:return!1}}function FC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function LC(t){if(Ot){var e=Xn;if(e){var r=e;if(!G$(t,e)){if(FC(t))throw Error(Y(418));e=Aa(r.nextSibling);var n=ti;e&&G$(t,e)?Z6(n,r):(t.flags=t.flags&-4097|2,Ot=!1,ti=t)}}else{if(FC(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ot=!1,ti=t}}}function q$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ti=t}function mv(t){if(t!==ti)return!1;if(!Ot)return q$(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jC(t.type,t.memoizedProps)),e&&(e=Xn)){if(FC(t))throw e5(),Error(Y(418));for(;e;)Z6(t,e),e=Aa(e.nextSibling)}if(q$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Xn=Aa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=ti?Aa(t.stateNode.nextSibling):null;return!0}function e5(){for(var t=Xn;t;)t=Aa(t.nextSibling)}function jf(){Xn=ti=null,Ot=!1}function NN(t){Yi===null?Yi=[t]:Yi.push(t)}var yee=Os.ReactCurrentBatchConfig;function Wi(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var yb=el(null),gb=null,ku=null,kN=null;function ON(){kN=ku=gb=null}function RN(t){var e=yb.current;Nt(yb),t._currentValue=e}function BC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yu(t,e){gb=t,kN=ku=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function ji(t){var e=t._currentValue;if(kN!==t)if(t={context:t,memoizedValue:e,next:null},ku===null){if(gb===null)throw Error(Y(308));ku=t,gb.dependencies={lanes:0,firstContext:t}}else ku=ku.next=t;return e}var Rl=null;function jN(t){Rl===null?Rl=[t]:Rl.push(t)}function t5(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,jN(e)):(r.next=i.next,i.next=r),e.interleaved=r,ws(t,n)}function ws(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ys=!1;function $N(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,ws(t,r)}return i=n.interleaved,i===null?(e.next=e,jN(n)):(e.next=i.next,i.next=e),n.interleaved=e,ws(t,r)}function y0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xN(t,r)}}function H$(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function vb(t,e,r,n){var i=t.updateQueue;Ys=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=Bt({},d,h);break e;case 2:Ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);xc|=s,t.lanes=s,t.memoizedState=d}}function K$(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Y(191,i));i.call(n)}}}var n5=new t6.Component().refs;function UC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Bt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hw={isMounted:function(t){return(t=t._reactInternals)?$c(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Pa(t),o=ms(n,i);o.payload=e,r!=null&&(o.callback=r),e=Ca(t,o,i),e!==null&&(oo(e,t,i,n),y0(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Cn(),i=Pa(t),o=ms(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Ca(t,o,i),e!==null&&(oo(e,t,i,n),y0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cn(),n=Pa(t),i=ms(r,n);i.tag=2,e!=null&&(i.callback=e),e=Ca(t,i,n),e!==null&&(oo(e,t,n,r),y0(e,t,n))}};function Y$(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!im(r,n)||!im(i,o):!0}function i5(t,e,r){var n=!1,i=Ua,o=e.contextType;return typeof o=="object"&&o!==null?o=ji(o):(i=Ln(e)?gc:pn.current,n=e.contextTypes,o=(n=n!=null)?Rf(t,i):Ua),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hw,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Q$(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&hw.enqueueReplaceState(e,e.state,null)}function VC(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=n5,$N(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ji(o):(o=Ln(e)?gc:pn.current,i.context=Rf(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(UC(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hw.enqueueReplaceState(i,i.state,null),vb(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var n=r.stateNode}if(!n)throw Error(Y(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===n5&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,t))}return t}function yv(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X$(t){var e=t._init;return e(t._payload)}function o5(t){function e(b,v){if(t){var x=b.deletions;x===null?(b.deletions=[v],b.flags|=16):x.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=Ia(b,v),b.index=0,b.sibling=null,b}function o(b,v,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<v?(b.flags|=2,v):x):(b.flags|=2,v)):(b.flags|=1048576,v)}function s(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,x,S){return v===null||v.tag!==6?(v=tE(x,b.mode,S),v.return=b,v):(v=i(v,x),v.return=b,v)}function l(b,v,x,S){var _=x.type;return _===Su?u(b,v,x.props.children,S,x.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ks&&X$(_)===v.type)?(S=i(v,x.props),S.ref=xh(b,v,x),S.return=b,S):(S=w0(x.type,x.key,x.props,null,b.mode,S),S.ref=xh(b,v,x),S.return=b,S)}function c(b,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=rE(x,b.mode,S),v.return=b,v):(v=i(v,x.children||[]),v.return=b,v)}function u(b,v,x,S,_){return v===null||v.tag!==7?(v=Zl(x,b.mode,S,_),v.return=b,v):(v=i(v,x),v.return=b,v)}function d(b,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=tE(""+v,b.mode,x),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ov:return x=w0(v.type,v.key,v.props,null,b.mode,x),x.ref=xh(b,null,v),x.return=b,x;case wu:return v=rE(v,b.mode,x),v.return=b,v;case Ks:var S=v._init;return d(b,S(v._payload),x)}if(Qh(v)||mh(v))return v=Zl(v,b.mode,x,null),v.return=b,v;yv(b,v)}return null}function h(b,v,x,S){var _=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(b,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ov:return x.key===_?l(b,v,x,S):null;case wu:return x.key===_?c(b,v,x,S):null;case Ks:return _=x._init,h(b,v,_(x._payload),S)}if(Qh(x)||mh(x))return _!==null?null:u(b,v,x,S,null);yv(b,x)}return null}function p(b,v,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(x)||null,a(v,b,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ov:return b=b.get(S.key===null?x:S.key)||null,l(v,b,S,_);case wu:return b=b.get(S.key===null?x:S.key)||null,c(v,b,S,_);case Ks:var w=S._init;return p(b,v,x,w(S._payload),_)}if(Qh(S)||mh(S))return b=b.get(x)||null,u(v,b,S,_,null);yv(v,S)}return null}function m(b,v,x,S){for(var _=null,w=null,A=v,C=v=0,I=null;A!==null&&C<x.length;C++){A.index>C?(I=A,A=null):I=A.sibling;var T=h(b,A,x[C],S);if(T===null){A===null&&(A=I);break}t&&A&&T.alternate===null&&e(b,A),v=o(T,v,C),w===null?_=T:w.sibling=T,w=T,A=I}if(C===x.length)return r(b,A),Ot&&ml(b,C),_;if(A===null){for(;C<x.length;C++)A=d(b,x[C],S),A!==null&&(v=o(A,v,C),w===null?_=A:w.sibling=A,w=A);return Ot&&ml(b,C),_}for(A=n(b,A);C<x.length;C++)I=p(A,b,C,x[C],S),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?C:I.key),v=o(I,v,C),w===null?_=I:w.sibling=I,w=I);return t&&A.forEach(function(P){return e(b,P)}),Ot&&ml(b,C),_}function y(b,v,x,S){var _=mh(x);if(typeof _!="function")throw Error(Y(150));if(x=_.call(x),x==null)throw Error(Y(151));for(var w=_=null,A=v,C=v=0,I=null,T=x.next();A!==null&&!T.done;C++,T=x.next()){A.index>C?(I=A,A=null):I=A.sibling;var P=h(b,A,T.value,S);if(P===null){A===null&&(A=I);break}t&&A&&P.alternate===null&&e(b,A),v=o(P,v,C),w===null?_=P:w.sibling=P,w=P,A=I}if(T.done)return r(b,A),Ot&&ml(b,C),_;if(A===null){for(;!T.done;C++,T=x.next())T=d(b,T.value,S),T!==null&&(v=o(T,v,C),w===null?_=T:w.sibling=T,w=T);return Ot&&ml(b,C),_}for(A=n(b,A);!T.done;C++,T=x.next())T=p(A,b,C,T.value,S),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?C:T.key),v=o(T,v,C),w===null?_=T:w.sibling=T,w=T);return t&&A.forEach(function(O){return e(b,O)}),Ot&&ml(b,C),_}function g(b,v,x,S){if(typeof x=="object"&&x!==null&&x.type===Su&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ov:e:{for(var _=x.key,w=v;w!==null;){if(w.key===_){if(_=x.type,_===Su){if(w.tag===7){r(b,w.sibling),v=i(w,x.props.children),v.return=b,b=v;break e}}else if(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ks&&X$(_)===w.type){r(b,w.sibling),v=i(w,x.props),v.ref=xh(b,w,x),v.return=b,b=v;break e}r(b,w);break}else e(b,w);w=w.sibling}x.type===Su?(v=Zl(x.props.children,b.mode,S,x.key),v.return=b,b=v):(S=w0(x.type,x.key,x.props,null,b.mode,S),S.ref=xh(b,v,x),S.return=b,b=S)}return s(b);case wu:e:{for(w=x.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(b,v.sibling),v=i(v,x.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=rE(x,b.mode,S),v.return=b,b=v}return s(b);case Ks:return w=x._init,g(b,v,w(x._payload),S)}if(Qh(x))return m(b,v,x,S);if(mh(x))return y(b,v,x,S);yv(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(b,v.sibling),v=i(v,x),v.return=b,b=v):(r(b,v),v=tE(x,b.mode,S),v.return=b,b=v),s(b)):r(b,v)}return g}var $f=o5(!0),s5=o5(!1),Qy={},Fo=el(Qy),lm=el(Qy),cm=el(Qy);function jl(t){if(t===Qy)throw Error(Y(174));return t}function DN(t,e){switch(At(cm,e),At(lm,t),At(Fo,Qy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xC(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xC(e,t)}Nt(Fo),At(Fo,e)}function Df(){Nt(Fo),Nt(lm),Nt(cm)}function a5(t){jl(cm.current);var e=jl(Fo.current),r=xC(e,t.type);e!==r&&(At(lm,t),At(Fo,r))}function MN(t){lm.current===t&&(Nt(Fo),Nt(lm))}var Dt=el(0);function bb(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var YS=[];function FN(){for(var t=0;t<YS.length;t++)YS[t]._workInProgressVersionPrimary=null;YS.length=0}var g0=Os.ReactCurrentDispatcher,QS=Os.ReactCurrentBatchConfig,bc=0,Lt=null,ar=null,Pr=null,xb=!1,_p=!1,um=0,gee=0;function tn(){throw Error(Y(321))}function LN(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!lo(t[r],e[r]))return!1;return!0}function BN(t,e,r,n,i,o){if(bc=o,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,g0.current=t===null||t.memoizedState===null?_ee:wee,t=r(n,i),_p){o=0;do{if(_p=!1,um=0,25<=o)throw Error(Y(301));o+=1,Pr=ar=null,e.updateQueue=null,g0.current=See,t=r(n,i)}while(_p)}if(g0.current=_b,e=ar!==null&&ar.next!==null,bc=0,Pr=ar=Lt=null,xb=!1,e)throw Error(Y(300));return t}function UN(){var t=um!==0;return um=0,t}function go(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?Lt.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function $i(){if(ar===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=ar.next;var e=Pr===null?Lt.memoizedState:Pr.next;if(e!==null)Pr=e,ar=t;else{if(t===null)throw Error(Y(310));ar=t,t={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},Pr===null?Lt.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function fm(t,e){return typeof e=="function"?e(t):e}function XS(t){var e=$i(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var n=ar,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((bc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=n):l=l.next=d,Lt.lanes|=u,xc|=u}c=c.next}while(c!==null&&c!==o);l===null?s=n:l.next=a,lo(n,e.memoizedState)||($n=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Lt.lanes|=o,xc|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function JS(t){var e=$i(),r=e.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);lo(o,e.memoizedState)||($n=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function l5(){}function c5(t,e){var r=Lt,n=$i(),i=e(),o=!lo(n.memoizedState,i);if(o&&(n.memoizedState=i,$n=!0),n=n.queue,VN(d5.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Pr!==null&&Pr.memoizedState.tag&1){if(r.flags|=2048,dm(9,f5.bind(null,r,n,i,e),void 0,null),Ir===null)throw Error(Y(349));bc&30||u5(r,e,i)}return i}function u5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function f5(t,e,r,n){e.value=r,e.getSnapshot=n,h5(e)&&p5(t)}function d5(t,e,r){return r(function(){h5(e)&&p5(t)})}function h5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!lo(t,r)}catch{return!0}}function p5(t){var e=ws(t,1);e!==null&&oo(e,t,1,-1)}function J$(t){var e=go();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:t},e.queue=t,t=t.dispatch=xee.bind(null,Lt,t),[e.memoizedState,t]}function dm(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function m5(){return $i().memoizedState}function v0(t,e,r,n){var i=go();Lt.flags|=t,i.memoizedState=dm(1|e,r,void 0,n===void 0?null:n)}function pw(t,e,r,n){var i=$i();n=n===void 0?null:n;var o=void 0;if(ar!==null){var s=ar.memoizedState;if(o=s.destroy,n!==null&&LN(n,s.deps)){i.memoizedState=dm(e,r,o,n);return}}Lt.flags|=t,i.memoizedState=dm(1|e,r,o,n)}function Z$(t,e){return v0(8390656,8,t,e)}function VN(t,e){return pw(2048,8,t,e)}function y5(t,e){return pw(4,2,t,e)}function g5(t,e){return pw(4,4,t,e)}function v5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b5(t,e,r){return r=r!=null?r.concat([t]):null,pw(4,4,v5.bind(null,e,t),r)}function WN(){}function x5(t,e){var r=$i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LN(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function _5(t,e){var r=$i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&LN(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function w5(t,e,r){return bc&21?(lo(r,e)||(r=A6(),Lt.lanes|=r,xc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=r)}function vee(t,e){var r=lt;lt=r!==0&&4>r?r:4,t(!0);var n=QS.transition;QS.transition={};try{t(!1),e()}finally{lt=r,QS.transition=n}}function S5(){return $i().memoizedState}function bee(t,e,r){var n=Pa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},E5(t))A5(e,r);else if(r=t5(t,e,r,n),r!==null){var i=Cn();oo(r,t,n,i),C5(r,e,n)}}function xee(t,e,r){var n=Pa(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(E5(t))A5(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,lo(a,s)){var l=e.interleaved;l===null?(i.next=i,jN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=t5(t,e,i,n),r!==null&&(i=Cn(),oo(r,t,n,i),C5(r,e,n))}}function E5(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function A5(t,e){_p=xb=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function C5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xN(t,r)}}var _b={readContext:ji,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},_ee={readContext:ji,useCallback:function(t,e){return go().memoizedState=[t,e===void 0?null:e],t},useContext:ji,useEffect:Z$,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,v0(4194308,4,v5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return v0(4194308,4,t,e)},useInsertionEffect:function(t,e){return v0(4,2,t,e)},useMemo:function(t,e){var r=go();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=go();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=bee.bind(null,Lt,t),[n.memoizedState,t]},useRef:function(t){var e=go();return t={current:t},e.memoizedState=t},useState:J$,useDebugValue:WN,useDeferredValue:function(t){return go().memoizedState=t},useTransition:function(){var t=J$(!1),e=t[0];return t=vee.bind(null,t[1]),go().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Lt,i=go();if(Ot){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=e(),Ir===null)throw Error(Y(349));bc&30||u5(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,Z$(d5.bind(null,n,o,t),[t]),n.flags|=2048,dm(9,f5.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=go(),e=Ir.identifierPrefix;if(Ot){var r=as,n=ss;r=(n&~(1<<32-io(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=um++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=gee++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wee={readContext:ji,useCallback:x5,useContext:ji,useEffect:VN,useImperativeHandle:b5,useInsertionEffect:y5,useLayoutEffect:g5,useMemo:_5,useReducer:XS,useRef:m5,useState:function(){return XS(fm)},useDebugValue:WN,useDeferredValue:function(t){var e=$i();return w5(e,ar.memoizedState,t)},useTransition:function(){var t=XS(fm)[0],e=$i().memoizedState;return[t,e]},useMutableSource:l5,useSyncExternalStore:c5,useId:S5,unstable_isNewReconciler:!1},See={readContext:ji,useCallback:x5,useContext:ji,useEffect:VN,useImperativeHandle:b5,useInsertionEffect:y5,useLayoutEffect:g5,useMemo:_5,useReducer:JS,useRef:m5,useState:function(){return JS(fm)},useDebugValue:WN,useDeferredValue:function(t){var e=$i();return ar===null?e.memoizedState=t:w5(e,ar.memoizedState,t)},useTransition:function(){var t=JS(fm)[0],e=$i().memoizedState;return[t,e]},useMutableSource:l5,useSyncExternalStore:c5,useId:S5,unstable_isNewReconciler:!1};function Mf(t,e){try{var r="",n=e;do r+=XJ(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ZS(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function WC(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Eee=typeof WeakMap=="function"?WeakMap:Map;function T5(t,e,r){r=ms(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Sb||(Sb=!0,ZC=n),WC(t,e)},r}function P5(t,e,r){r=ms(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){WC(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){WC(t,e),typeof n!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function e2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Eee;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Fee.bind(null,t,e,r),e.then(t,t))}function t2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function r2(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ms(-1,1),e.tag=2,Ca(r,e,1))),r.lanes|=1),t)}var Aee=Os.ReactCurrentOwner,$n=!1;function xn(t,e,r,n){e.child=t===null?s5(e,null,r,n):$f(e,t.child,r,n)}function n2(t,e,r,n,i){r=r.render;var o=e.ref;return Yu(e,i),n=BN(t,e,r,n,o,i),r=UN(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Ot&&r&&PN(e),e.flags|=1,xn(t,e,n,i),e.child)}function i2(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!XN(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,I5(t,e,o,n,i)):(t=w0(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:im,r(s,n)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=Ia(o,n),t.ref=e.ref,t.return=e,e.child=t}function I5(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(im(o,n)&&t.ref===e.ref)if($n=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return zC(t,e,r,n,i)}function N5(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Ru,Hn),Hn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Ru,Hn),Hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,At(Ru,Hn),Hn|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,At(Ru,Hn),Hn|=n;return xn(t,e,i,r),e.child}function k5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zC(t,e,r,n,i){var o=Ln(r)?gc:pn.current;return o=Rf(e,o),Yu(e,i),r=BN(t,e,r,n,o,i),n=UN(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Ot&&n&&PN(e),e.flags|=1,xn(t,e,r,i),e.child)}function o2(t,e,r,n,i){if(Ln(r)){var o=!0;hb(e)}else o=!1;if(Yu(e,i),e.stateNode===null)b0(t,e),i5(e,r,n),VC(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=ji(c):(c=Ln(r)?gc:pn.current,c=Rf(e,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&Q$(e,s,n,c),Ys=!1;var h=e.memoizedState;s.state=h,vb(e,n,s,i),l=e.memoizedState,a!==n||h!==l||Fn.current||Ys?(typeof u=="function"&&(UC(e,r,u,n),l=e.memoizedState),(a=Ys||Y$(e,r,a,n,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,r5(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Wi(e.type,a),s.props=c,d=e.pendingProps,h=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ji(l):(l=Ln(r)?gc:pn.current,l=Rf(e,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Q$(e,s,n,l),Ys=!1,h=e.memoizedState,s.state=h,vb(e,n,s,i);var m=e.memoizedState;a!==d||h!==m||Fn.current||Ys?(typeof p=="function"&&(UC(e,r,p,n),m=e.memoizedState),(c=Ys||Y$(e,r,c,n,h,m,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return GC(t,e,r,n,o,i)}function GC(t,e,r,n,i,o){k5(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&z$(e,r,!1),Ss(t,e,o);n=e.stateNode,Aee.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=$f(e,t.child,null,o),e.child=$f(e,null,a,o)):xn(t,e,a,o),e.memoizedState=n.state,i&&z$(e,r,!0),e.child}function O5(t){var e=t.stateNode;e.pendingContext?W$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W$(t,e.context,!1),DN(t,e.containerInfo)}function s2(t,e,r,n,i){return jf(),NN(i),e.flags|=256,xn(t,e,r,n),e.child}var qC={dehydrated:null,treeContext:null,retryLane:0};function HC(t){return{baseLanes:t,cachePool:null,transitions:null}}function R5(t,e,r){var n=e.pendingProps,i=Dt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Dt,i&1),t===null)return LC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=gw(s,n,0,null),t=Zl(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=HC(r),e.memoizedState=qC,t):zN(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Cee(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ia(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ia(a,o):(o=Zl(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?HC(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=qC,n}return o=t.child,t=o.sibling,n=Ia(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zN(t,e){return e=gw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gv(t,e,r,n){return n!==null&&NN(n),$f(e,t.child,null,r),t=zN(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cee(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=ZS(Error(Y(422))),gv(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=gw({mode:"visible",children:n.children},i,0,null),o=Zl(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&$f(e,t.child,null,s),e.child.memoizedState=HC(s),e.memoizedState=qC,o);if(!(e.mode&1))return gv(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Y(419)),n=ZS(o,n,void 0),gv(t,e,s,n)}if(a=(s&t.childLanes)!==0,$n||a){if(n=Ir,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ws(t,i),oo(n,t,i,-1))}return QN(),n=ZS(Error(Y(421))),gv(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Lee.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Xn=Aa(i.nextSibling),ti=e,Ot=!0,Yi=null,t!==null&&(xi[_i++]=ss,xi[_i++]=as,xi[_i++]=vc,ss=t.id,as=t.overflow,vc=e),e=zN(e,n.children),e.flags|=4096,e)}function a2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),BC(t.return,e,r)}function eE(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function j5(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(xn(t,e,n.children,r),n=Dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a2(t,r,e);else if(t.tag===19)a2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(At(Dt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&bb(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),eE(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bb(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}eE(e,!0,r,null,o);break;case"together":eE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function b0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),xc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,r=Ia(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ia(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Tee(t,e,r){switch(e.tag){case 3:O5(e),jf();break;case 5:a5(e);break;case 1:Ln(e.type)&&hb(e);break;case 4:DN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;At(yb,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(At(Dt,Dt.current&1),e.flags|=128,null):r&e.child.childLanes?R5(t,e,r):(At(Dt,Dt.current&1),t=Ss(t,e,r),t!==null?t.sibling:null);At(Dt,Dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return j5(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Dt,Dt.current),n)break;return null;case 22:case 23:return e.lanes=0,N5(t,e,r)}return Ss(t,e,r)}var $5,KC,D5,M5;$5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};KC=function(){};D5=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,jl(Fo.current);var o=null;switch(r){case"input":i=yC(t,i),n=yC(t,n),o=[];break;case"select":i=Bt({},i,{value:void 0}),n=Bt({},n,{value:void 0}),o=[];break;case"textarea":i=bC(t,i),n=bC(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fb)}_C(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xp.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};M5=function(t,e,r,n){r!==n&&(e.flags|=4)};function _h(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Pee(t,e,r){var n=e.pendingProps;switch(IN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Ln(e.type)&&db(),rn(e),null;case 3:return n=e.stateNode,Df(),Nt(Fn),Nt(pn),FN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(mv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yi!==null&&(rT(Yi),Yi=null))),KC(t,e),rn(e),null;case 5:MN(e);var i=jl(cm.current);if(r=e.type,t!==null&&e.stateNode!=null)D5(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Y(166));return rn(e),null}if(t=jl(Fo.current),mv(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[So]=e,n[am]=o,t=(e.mode&1)!==0,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(i=0;i<Jh.length;i++)Ct(Jh[i],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":y$(n,o),Ct("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ct("invalid",n);break;case"textarea":v$(n,o),Ct("invalid",n)}_C(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&pv(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&pv(n.textContent,a,t),i=["children",""+a]):Xp.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ct("scroll",n)}switch(r){case"input":sv(n),g$(n,o,!0);break;case"textarea":sv(n),b$(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=fb)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u6(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[So]=e,t[am]=n,$5(t,e,!1,!1),e.stateNode=t;e:{switch(s=wC(r,n),r){case"dialog":Ct("cancel",t),Ct("close",t),i=n;break;case"iframe":case"object":case"embed":Ct("load",t),i=n;break;case"video":case"audio":for(i=0;i<Jh.length;i++)Ct(Jh[i],t);i=n;break;case"source":Ct("error",t),i=n;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=n;break;case"details":Ct("toggle",t),i=n;break;case"input":y$(t,n),i=yC(t,n),Ct("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Bt({},n,{value:void 0}),Ct("invalid",t);break;case"textarea":v$(t,n),i=bC(t,n),Ct("invalid",t);break;default:i=n}_C(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?h6(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&f6(t,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Jp(t,l):typeof l=="number"&&Jp(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xp.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ct("scroll",t):l!=null&&pN(t,o,l,s))}switch(r){case"input":sv(t),g$(t,n,!1);break;case"textarea":sv(t),b$(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ba(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Gu(t,!!n.multiple,o,!1):n.defaultValue!=null&&Gu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)M5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Y(166));if(r=jl(cm.current),jl(Fo.current),mv(e)){if(n=e.stateNode,r=e.memoizedProps,n[So]=e,(o=n.nodeValue!==r)&&(t=ti,t!==null))switch(t.tag){case 3:pv(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pv(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[So]=e,e.stateNode=n}return rn(e),null;case 13:if(Nt(Dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Xn!==null&&e.mode&1&&!(e.flags&128))e5(),jf(),e.flags|=98560,o=!1;else if(o=mv(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[So]=e}else jf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),o=!1}else Yi!==null&&(rT(Yi),Yi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Dt.current&1?fr===0&&(fr=3):QN())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return Df(),KC(t,e),t===null&&om(e.stateNode.containerInfo),rn(e),null;case 10:return RN(e.type._context),rn(e),null;case 17:return Ln(e.type)&&db(),rn(e),null;case 19:if(Nt(Dt),o=e.memoizedState,o===null)return rn(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)_h(o,!1);else{if(fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=bb(t),s!==null){for(e.flags|=128,_h(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return At(Dt,Dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xt()>Ff&&(e.flags|=128,n=!0,_h(o,!1),e.lanes=4194304)}else{if(!n)if(t=bb(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_h(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ot)return rn(e),null}else 2*Xt()-o.renderingStartTime>Ff&&r!==1073741824&&(e.flags|=128,n=!0,_h(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,r=Dt.current,At(Dt,n?r&1|2:r&1),e):(rn(e),null);case 22:case 23:return YN(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Hn&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Iee(t,e){switch(IN(e),e.tag){case 1:return Ln(e.type)&&db(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Df(),Nt(Fn),Nt(pn),FN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MN(e),null;case 13:if(Nt(Dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));jf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(Dt),null;case 4:return Df(),null;case 10:return RN(e.type._context),null;case 22:case 23:return YN(),null;case 24:return null;default:return null}}var vv=!1,cn=!1,Nee=typeof WeakSet=="function"?WeakSet:Set,le=null;function Ou(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Gt(t,e,n)}else r.current=null}function YC(t,e,r){try{r()}catch(n){Gt(t,e,n)}}var l2=!1;function kee(t,e){if(OC=lb,t=U6(),TN(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(a=s+i),d!==o||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===r&&++c===i&&(a=s),h===o&&++u===n&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(RC={focusedElem:t,selectionRange:r},lb=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,g=m.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:Wi(e.type,y),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(S){Gt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return m=l2,l2=!1,m}function wp(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&YC(e,r,o)}i=i.next}while(i!==n)}}function mw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function QC(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function F5(t){var e=t.alternate;e!==null&&(t.alternate=null,F5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[So],delete e[am],delete e[DC],delete e[hee],delete e[pee])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L5(t){return t.tag===5||t.tag===3||t.tag===4}function c2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function XC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fb));else if(n!==4&&(t=t.child,t!==null))for(XC(t,e,r),t=t.sibling;t!==null;)XC(t,e,r),t=t.sibling}function JC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(JC(t,e,r),t=t.sibling;t!==null;)JC(t,e,r),t=t.sibling}var Lr=null,qi=!1;function Fs(t,e,r){for(r=r.child;r!==null;)B5(t,e,r),r=r.sibling}function B5(t,e,r){if(Mo&&typeof Mo.onCommitFiberUnmount=="function")try{Mo.onCommitFiberUnmount(aw,r)}catch{}switch(r.tag){case 5:cn||Ou(r,e);case 6:var n=Lr,i=qi;Lr=null,Fs(t,e,r),Lr=n,qi=i,Lr!==null&&(qi?(t=Lr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Lr.removeChild(r.stateNode));break;case 18:Lr!==null&&(qi?(t=Lr,r=r.stateNode,t.nodeType===8?HS(t.parentNode,r):t.nodeType===1&&HS(t,r),rm(t)):HS(Lr,r.stateNode));break;case 4:n=Lr,i=qi,Lr=r.stateNode.containerInfo,qi=!0,Fs(t,e,r),Lr=n,qi=i;break;case 0:case 11:case 14:case 15:if(!cn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&YC(r,e,s),i=i.next}while(i!==n)}Fs(t,e,r);break;case 1:if(!cn&&(Ou(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Gt(r,e,a)}Fs(t,e,r);break;case 21:Fs(t,e,r);break;case 22:r.mode&1?(cn=(n=cn)||r.memoizedState!==null,Fs(t,e,r),cn=n):Fs(t,e,r);break;default:Fs(t,e,r)}}function u2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Nee),e.forEach(function(n){var i=Bee.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Bi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Lr=a.stateNode,qi=!1;break e;case 3:Lr=a.stateNode.containerInfo,qi=!0;break e;case 4:Lr=a.stateNode.containerInfo,qi=!0;break e}a=a.return}if(Lr===null)throw Error(Y(160));B5(o,s,i),Lr=null,qi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U5(e,t),e=e.sibling}function U5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bi(e,t),mo(t),n&4){try{wp(3,t,t.return),mw(3,t)}catch(y){Gt(t,t.return,y)}try{wp(5,t,t.return)}catch(y){Gt(t,t.return,y)}}break;case 1:Bi(e,t),mo(t),n&512&&r!==null&&Ou(r,r.return);break;case 5:if(Bi(e,t),mo(t),n&512&&r!==null&&Ou(r,r.return),t.flags&32){var i=t.stateNode;try{Jp(i,"")}catch(y){Gt(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&l6(i,o),wC(a,s);var c=wC(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?h6(i,d):u==="dangerouslySetInnerHTML"?f6(i,d):u==="children"?Jp(i,d):pN(i,u,d,c)}switch(a){case"input":gC(i,o);break;case"textarea":c6(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Gu(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Gu(i,!!o.multiple,o.defaultValue,!0):Gu(i,!!o.multiple,o.multiple?[]:"",!1))}i[am]=o}catch(y){Gt(t,t.return,y)}}break;case 6:if(Bi(e,t),mo(t),n&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(y){Gt(t,t.return,y)}}break;case 3:if(Bi(e,t),mo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{rm(e.containerInfo)}catch(y){Gt(t,t.return,y)}break;case 4:Bi(e,t),mo(t);break;case 13:Bi(e,t),mo(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(HN=Xt())),n&4&&u2(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(cn=(c=cn)||u,Bi(e,t),cn=c):Bi(e,t),mo(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(le=t,u=t.child;u!==null;){for(d=le=u;le!==null;){switch(h=le,p=h.child,h.tag){case 0:case 11:case 14:case 15:wp(4,h,h.return);break;case 1:Ou(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Gt(n,r,y)}}break;case 5:Ou(h,h.return);break;case 22:if(h.memoizedState!==null){d2(d);continue}}p!==null?(p.return=h,le=p):d2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=d6("display",s))}catch(y){Gt(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Gt(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Bi(e,t),mo(t),n&4&&u2(t);break;case 21:break;default:Bi(e,t),mo(t)}}function mo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(L5(r)){var n=r;break e}r=r.return}throw Error(Y(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Jp(i,""),n.flags&=-33);var o=c2(t);JC(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=c2(t);XC(t,a,s);break;default:throw Error(Y(161))}}catch(l){Gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Oee(t,e,r){le=t,V5(t)}function V5(t,e,r){for(var n=(t.mode&1)!==0;le!==null;){var i=le,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||vv;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||cn;a=vv;var c=cn;if(vv=s,(cn=l)&&!c)for(le=i;le!==null;)s=le,l=s.child,s.tag===22&&s.memoizedState!==null?h2(i):l!==null?(l.return=s,le=l):h2(i);for(;o!==null;)le=o,V5(o),o=o.sibling;le=i,vv=a,cn=c}f2(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,le=o):f2(t)}}function f2(t){for(;le!==null;){var e=le;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||mw(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!cn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Wi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&K$(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}K$(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&rm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}cn||e.flags&512&&QC(e)}catch(h){Gt(e,e.return,h)}}if(e===t){le=null;break}if(r=e.sibling,r!==null){r.return=e.return,le=r;break}le=e.return}}function d2(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var r=e.sibling;if(r!==null){r.return=e.return,le=r;break}le=e.return}}function h2(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mw(4,e)}catch(l){Gt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Gt(e,i,l)}}var o=e.return;try{QC(e)}catch(l){Gt(e,o,l)}break;case 5:var s=e.return;try{QC(e)}catch(l){Gt(e,s,l)}}}catch(l){Gt(e,e.return,l)}if(e===t){le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,le=a;break}le=e.return}}var Ree=Math.ceil,wb=Os.ReactCurrentDispatcher,GN=Os.ReactCurrentOwner,Ii=Os.ReactCurrentBatchConfig,Je=0,Ir=null,rr=null,Hr=0,Hn=0,Ru=el(0),fr=0,hm=null,xc=0,yw=0,qN=0,Sp=null,Rn=null,HN=0,Ff=1/0,ns=null,Sb=!1,ZC=null,Ta=null,bv=!1,fa=null,Eb=0,Ep=0,eT=null,x0=-1,_0=0;function Cn(){return Je&6?Xt():x0!==-1?x0:x0=Xt()}function Pa(t){return t.mode&1?Je&2&&Hr!==0?Hr&-Hr:yee.transition!==null?(_0===0&&(_0=A6()),_0):(t=lt,t!==0||(t=window.event,t=t===void 0?16:O6(t.type)),t):1}function oo(t,e,r,n){if(50<Ep)throw Ep=0,eT=null,Error(Y(185));Hy(t,r,n),(!(Je&2)||t!==Ir)&&(t===Ir&&(!(Je&2)&&(yw|=r),fr===4&&ta(t,Hr)),Bn(t,n),r===1&&Je===0&&!(e.mode&1)&&(Ff=Xt()+500,dw&&tl()))}function Bn(t,e){var r=t.callbackNode;yZ(t,e);var n=ab(t,t===Ir?Hr:0);if(n===0)r!==null&&w$(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&w$(r),e===1)t.tag===0?mee(p2.bind(null,t)):X6(p2.bind(null,t)),fee(function(){!(Je&6)&&tl()}),r=null;else{switch(C6(n)){case 1:r=bN;break;case 4:r=S6;break;case 16:r=sb;break;case 536870912:r=E6;break;default:r=sb}r=Q5(r,W5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function W5(t,e){if(x0=-1,_0=0,Je&6)throw Error(Y(327));var r=t.callbackNode;if(Qu()&&t.callbackNode!==r)return null;var n=ab(t,t===Ir?Hr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ab(t,n);else{e=n;var i=Je;Je|=2;var o=G5();(Ir!==t||Hr!==e)&&(ns=null,Ff=Xt()+500,Jl(t,e));do try{Dee();break}catch(a){z5(t,a)}while(1);ON(),wb.current=o,Je=i,rr!==null?e=0:(Ir=null,Hr=0,e=fr)}if(e!==0){if(e===2&&(i=TC(t),i!==0&&(n=i,e=tT(t,i))),e===1)throw r=hm,Jl(t,0),ta(t,n),Bn(t,Xt()),r;if(e===6)ta(t,n);else{if(i=t.current.alternate,!(n&30)&&!jee(i)&&(e=Ab(t,n),e===2&&(o=TC(t),o!==0&&(n=o,e=tT(t,o))),e===1))throw r=hm,Jl(t,0),ta(t,n),Bn(t,Xt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Y(345));case 2:yl(t,Rn,ns);break;case 3:if(ta(t,n),(n&130023424)===n&&(e=HN+500-Xt(),10<e)){if(ab(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Cn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$C(yl.bind(null,t,Rn,ns),e);break}yl(t,Rn,ns);break;case 4:if(ta(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-io(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ree(n/1960))-n,10<n){t.timeoutHandle=$C(yl.bind(null,t,Rn,ns),n);break}yl(t,Rn,ns);break;case 5:yl(t,Rn,ns);break;default:throw Error(Y(329))}}}return Bn(t,Xt()),t.callbackNode===r?W5.bind(null,t):null}function tT(t,e){var r=Sp;return t.current.memoizedState.isDehydrated&&(Jl(t,e).flags|=256),t=Ab(t,e),t!==2&&(e=Rn,Rn=r,e!==null&&rT(e)),t}function rT(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function jee(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!lo(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ta(t,e){for(e&=~qN,e&=~yw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-io(e),n=1<<r;t[r]=-1,e&=~n}}function p2(t){if(Je&6)throw Error(Y(327));Qu();var e=ab(t,0);if(!(e&1))return Bn(t,Xt()),null;var r=Ab(t,e);if(t.tag!==0&&r===2){var n=TC(t);n!==0&&(e=n,r=tT(t,n))}if(r===1)throw r=hm,Jl(t,0),ta(t,e),Bn(t,Xt()),r;if(r===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yl(t,Rn,ns),Bn(t,Xt()),null}function KN(t,e){var r=Je;Je|=1;try{return t(e)}finally{Je=r,Je===0&&(Ff=Xt()+500,dw&&tl())}}function _c(t){fa!==null&&fa.tag===0&&!(Je&6)&&Qu();var e=Je;Je|=1;var r=Ii.transition,n=lt;try{if(Ii.transition=null,lt=1,t)return t()}finally{lt=n,Ii.transition=r,Je=e,!(Je&6)&&tl()}}function YN(){Hn=Ru.current,Nt(Ru)}function Jl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,uee(r)),rr!==null)for(r=rr.return;r!==null;){var n=r;switch(IN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&db();break;case 3:Df(),Nt(Fn),Nt(pn),FN();break;case 5:MN(n);break;case 4:Df();break;case 13:Nt(Dt);break;case 19:Nt(Dt);break;case 10:RN(n.type._context);break;case 22:case 23:YN()}r=r.return}if(Ir=t,rr=t=Ia(t.current,null),Hr=Hn=e,fr=0,hm=null,qN=yw=xc=0,Rn=Sp=null,Rl!==null){for(e=0;e<Rl.length;e++)if(r=Rl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Rl=null}return t}function z5(t,e){do{var r=rr;try{if(ON(),g0.current=_b,xb){for(var n=Lt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}xb=!1}if(bc=0,Pr=ar=Lt=null,_p=!1,um=0,GN.current=null,r===null||r.return===null){fr=1,hm=e,rr=null;break}e:{var o=t,s=r.return,a=r,l=e;if(e=Hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=t2(s);if(p!==null){p.flags&=-257,r2(p,s,a,o,e),p.mode&1&&e2(o,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){e2(o,c,e),QN();break e}l=Error(Y(426))}}else if(Ot&&a.mode&1){var g=t2(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),r2(g,s,a,o,e),NN(Mf(l,a));break e}}o=l=Mf(l,a),fr!==4&&(fr=2),Sp===null?Sp=[o]:Sp.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=T5(o,l,e);H$(o,b);break e;case 1:a=l;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ta===null||!Ta.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=P5(o,a,e);H$(o,S);break e}}o=o.return}while(o!==null)}H5(r)}catch(_){e=_,rr===r&&r!==null&&(rr=r=r.return);continue}break}while(1)}function G5(){var t=wb.current;return wb.current=_b,t===null?_b:t}function QN(){(fr===0||fr===3||fr===2)&&(fr=4),Ir===null||!(xc&268435455)&&!(yw&268435455)||ta(Ir,Hr)}function Ab(t,e){var r=Je;Je|=2;var n=G5();(Ir!==t||Hr!==e)&&(ns=null,Jl(t,e));do try{$ee();break}catch(i){z5(t,i)}while(1);if(ON(),Je=r,wb.current=n,rr!==null)throw Error(Y(261));return Ir=null,Hr=0,fr}function $ee(){for(;rr!==null;)q5(rr)}function Dee(){for(;rr!==null&&!aZ();)q5(rr)}function q5(t){var e=Y5(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?H5(t):rr=e,GN.current=null}function H5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Iee(r,e),r!==null){r.flags&=32767,rr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fr=6,rr=null;return}}else if(r=Pee(r,e,Hn),r!==null){rr=r;return}if(e=e.sibling,e!==null){rr=e;return}rr=e=t}while(e!==null);fr===0&&(fr=5)}function yl(t,e,r){var n=lt,i=Ii.transition;try{Ii.transition=null,lt=1,Mee(t,e,r,n)}finally{Ii.transition=i,lt=n}return null}function Mee(t,e,r,n){do Qu();while(fa!==null);if(Je&6)throw Error(Y(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(gZ(t,o),t===Ir&&(rr=Ir=null,Hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bv||(bv=!0,Q5(sb,function(){return Qu(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ii.transition,Ii.transition=null;var s=lt;lt=1;var a=Je;Je|=4,GN.current=null,kee(t,r),U5(r,t),nee(RC),lb=!!OC,RC=OC=null,t.current=r,Oee(r),lZ(),Je=a,lt=s,Ii.transition=o}else t.current=r;if(bv&&(bv=!1,fa=t,Eb=i),o=t.pendingLanes,o===0&&(Ta=null),fZ(r.stateNode),Bn(t,Xt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Sb)throw Sb=!1,t=ZC,ZC=null,t;return Eb&1&&t.tag!==0&&Qu(),o=t.pendingLanes,o&1?t===eT?Ep++:(Ep=0,eT=t):Ep=0,tl(),null}function Qu(){if(fa!==null){var t=C6(Eb),e=Ii.transition,r=lt;try{if(Ii.transition=null,lt=16>t?16:t,fa===null)var n=!1;else{if(t=fa,fa=null,Eb=0,Je&6)throw Error(Y(331));var i=Je;for(Je|=4,le=t.current;le!==null;){var o=le,s=o.child;if(le.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(le=c;le!==null;){var u=le;switch(u.tag){case 0:case 11:case 15:wp(8,u,o)}var d=u.child;if(d!==null)d.return=u,le=d;else for(;le!==null;){u=le;var h=u.sibling,p=u.return;if(F5(u),u===c){le=null;break}if(h!==null){h.return=p,le=h;break}le=p}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}le=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,le=s;else e:for(;le!==null;){if(o=le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wp(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,le=b;break e}le=o.return}}var v=t.current;for(le=v;le!==null;){s=le;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,le=x;else e:for(s=v;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mw(9,a)}}catch(_){Gt(a,a.return,_)}if(a===s){le=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,le=S;break e}le=a.return}}if(Je=i,tl(),Mo&&typeof Mo.onPostCommitFiberRoot=="function")try{Mo.onPostCommitFiberRoot(aw,t)}catch{}n=!0}return n}finally{lt=r,Ii.transition=e}}return!1}function m2(t,e,r){e=Mf(r,e),e=T5(t,e,1),t=Ca(t,e,1),e=Cn(),t!==null&&(Hy(t,1,e),Bn(t,e))}function Gt(t,e,r){if(t.tag===3)m2(t,t,r);else for(;e!==null;){if(e.tag===3){m2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ta===null||!Ta.has(n))){t=Mf(r,t),t=P5(e,t,1),e=Ca(e,t,1),t=Cn(),e!==null&&(Hy(e,1,t),Bn(e,t));break}}e=e.return}}function Fee(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&r,Ir===t&&(Hr&r)===r&&(fr===4||fr===3&&(Hr&130023424)===Hr&&500>Xt()-HN?Jl(t,0):qN|=r),Bn(t,e)}function K5(t,e){e===0&&(t.mode&1?(e=cv,cv<<=1,!(cv&130023424)&&(cv=4194304)):e=1);var r=Cn();t=ws(t,e),t!==null&&(Hy(t,e,r),Bn(t,r))}function Lee(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),K5(t,r)}function Bee(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(e),K5(t,r)}var Y5;Y5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fn.current)$n=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $n=!1,Tee(t,e,r);$n=!!(t.flags&131072)}else $n=!1,Ot&&e.flags&1048576&&J6(e,mb,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;b0(t,e),t=e.pendingProps;var i=Rf(e,pn.current);Yu(e,r),i=BN(null,e,n,t,i,r);var o=UN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ln(n)?(o=!0,hb(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$N(e),i.updater=hw,e.stateNode=i,i._reactInternals=e,VC(e,n,t,r),e=GC(null,e,n,!0,o,r)):(e.tag=0,Ot&&o&&PN(e),xn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(b0(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Vee(n),t=Wi(n,t),i){case 0:e=zC(null,e,n,t,r);break e;case 1:e=o2(null,e,n,t,r);break e;case 11:e=n2(null,e,n,t,r);break e;case 14:e=i2(null,e,n,Wi(n.type,t),r);break e}throw Error(Y(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),zC(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),o2(t,e,n,i,r);case 3:e:{if(O5(e),t===null)throw Error(Y(387));n=e.pendingProps,o=e.memoizedState,i=o.element,r5(t,e),vb(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Mf(Error(Y(423)),e),e=s2(t,e,n,r,i);break e}else if(n!==i){i=Mf(Error(Y(424)),e),e=s2(t,e,n,r,i);break e}else for(Xn=Aa(e.stateNode.containerInfo.firstChild),ti=e,Ot=!0,Yi=null,r=s5(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(jf(),n===i){e=Ss(t,e,r);break e}xn(t,e,n,r)}e=e.child}return e;case 5:return a5(e),t===null&&LC(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,jC(n,i)?s=null:o!==null&&jC(n,o)&&(e.flags|=32),k5(t,e),xn(t,e,s,r),e.child;case 6:return t===null&&LC(e),null;case 13:return R5(t,e,r);case 4:return DN(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=$f(e,null,n,r):xn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),n2(t,e,n,i,r);case 7:return xn(t,e,e.pendingProps,r),e.child;case 8:return xn(t,e,e.pendingProps.children,r),e.child;case 12:return xn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,At(yb,n._currentValue),n._currentValue=s,o!==null)if(lo(o.value,s)){if(o.children===i.children&&!Fn.current){e=Ss(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=ms(-1,r&-r),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),BC(o.return,r,e),a.lanes|=r;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Y(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),BC(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}xn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Yu(e,r),i=ji(i),n=n(i),e.flags|=1,xn(t,e,n,r),e.child;case 14:return n=e.type,i=Wi(n,e.pendingProps),i=Wi(n.type,i),i2(t,e,n,i,r);case 15:return I5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Wi(n,i),b0(t,e),e.tag=1,Ln(n)?(t=!0,hb(e)):t=!1,Yu(e,r),i5(e,n,i),VC(e,n,i,r),GC(null,e,n,!0,t,r);case 19:return j5(t,e,r);case 22:return N5(t,e,r)}throw Error(Y(156,e.tag))};function Q5(t,e){return w6(t,e)}function Uee(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(t,e,r,n){return new Uee(t,e,r,n)}function XN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vee(t){if(typeof t=="function")return XN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yN)return 11;if(t===gN)return 14}return 2}function Ia(t,e){var r=t.alternate;return r===null?(r=Ai(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function w0(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")XN(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Su:return Zl(r.children,i,o,e);case mN:s=8,i|=8;break;case dC:return t=Ai(12,r,e,i|2),t.elementType=dC,t.lanes=o,t;case hC:return t=Ai(13,r,e,i),t.elementType=hC,t.lanes=o,t;case pC:return t=Ai(19,r,e,i),t.elementType=pC,t.lanes=o,t;case o6:return gw(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n6:s=10;break e;case i6:s=9;break e;case yN:s=11;break e;case gN:s=14;break e;case Ks:s=16,n=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Ai(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Zl(t,e,r,n){return t=Ai(7,t,n,e),t.lanes=r,t}function gw(t,e,r,n){return t=Ai(22,t,n,e),t.elementType=o6,t.lanes=r,t.stateNode={isHidden:!1},t}function tE(t,e,r){return t=Ai(6,t,null,e),t.lanes=r,t}function rE(t,e,r){return e=Ai(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wee(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DS(0),this.expirationTimes=DS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DS(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JN(t,e,r,n,i,o,s,a,l){return t=new Wee(t,e,r,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ai(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$N(o),t}function zee(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function X5(t){if(!t)return Ua;t=t._reactInternals;e:{if($c(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var r=t.type;if(Ln(r))return Q6(t,r,e)}return e}function J5(t,e,r,n,i,o,s,a,l){return t=JN(r,n,!0,t,i,o,s,a,l),t.context=X5(null),r=t.current,n=Cn(),i=Pa(r),o=ms(n,i),o.callback=e??null,Ca(r,o,i),t.current.lanes=i,Hy(t,i,n),Bn(t,n),t}function vw(t,e,r,n){var i=e.current,o=Cn(),s=Pa(i);return r=X5(r),e.context===null?e.context=r:e.pendingContext=r,e=ms(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ca(i,e,s),t!==null&&(oo(t,i,s,o),y0(t,i,s)),s}function Cb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function y2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ZN(t,e){y2(t,e),(t=t.alternate)&&y2(t,e)}function Gee(){return null}var Z5=typeof reportError=="function"?reportError:function(t){console.error(t)};function ek(t){this._internalRoot=t}bw.prototype.render=ek.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));vw(t,e,null,null)};bw.prototype.unmount=ek.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_c(function(){vw(null,t,null,null)}),e[_s]=null}};function bw(t){this._internalRoot=t}bw.prototype.unstable_scheduleHydration=function(t){if(t){var e=I6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ea.length&&e!==0&&e<ea[r].priority;r++);ea.splice(r,0,t),r===0&&k6(t)}};function tk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function g2(){}function qee(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=Cb(s);o.call(c)}}var s=J5(e,n,t,0,null,!1,!1,"",g2);return t._reactRootContainer=s,t[_s]=s.current,om(t.nodeType===8?t.parentNode:t),_c(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Cb(l);a.call(c)}}var l=JN(t,0,!1,null,null,!1,!1,"",g2);return t._reactRootContainer=l,t[_s]=l.current,om(t.nodeType===8?t.parentNode:t),_c(function(){vw(e,l,r,n)}),l}function _w(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Cb(s);a.call(l)}}vw(e,s,t,i)}else s=qee(r,e,t,i,n);return Cb(s)}T6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Xh(e.pendingLanes);r!==0&&(xN(e,r|1),Bn(e,Xt()),!(Je&6)&&(Ff=Xt()+500,tl()))}break;case 13:_c(function(){var n=ws(t,1);if(n!==null){var i=Cn();oo(n,t,1,i)}}),ZN(t,1)}};_N=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var r=Cn();oo(e,t,134217728,r)}ZN(t,134217728)}};P6=function(t){if(t.tag===13){var e=Pa(t),r=ws(t,e);if(r!==null){var n=Cn();oo(r,t,e,n)}ZN(t,e)}};I6=function(){return lt};N6=function(t,e){var r=lt;try{return lt=t,e()}finally{lt=r}};EC=function(t,e,r){switch(e){case"input":if(gC(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=fw(n);if(!i)throw Error(Y(90));a6(n),gC(n,i)}}}break;case"textarea":c6(t,r);break;case"select":e=r.value,e!=null&&Gu(t,!!r.multiple,e,!1)}};y6=KN;g6=_c;var Hee={usingClientEntryPoint:!1,Events:[Yy,Tu,fw,p6,m6,KN]},wh={findFiberByHostInstance:Ol,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Kee={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x6(t),t===null?null:t.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||Gee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xv.isDisabled&&xv.supportsFiber)try{aw=xv.inject(Kee),Mo=xv}catch{}}ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hee;ai.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tk(e))throw Error(Y(200));return zee(t,e,null,r)};ai.createRoot=function(t,e){if(!tk(t))throw Error(Y(299));var r=!1,n="",i=Z5;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=JN(t,1,!1,null,null,r,!1,n,i),t[_s]=e.current,om(t.nodeType===8?t.parentNode:t),new ek(e)};ai.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=x6(e),t=t===null?null:t.stateNode,t};ai.flushSync=function(t){return _c(t)};ai.hydrate=function(t,e,r){if(!xw(e))throw Error(Y(200));return _w(null,t,e,!0,r)};ai.hydrateRoot=function(t,e,r){if(!tk(t))throw Error(Y(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=Z5;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=J5(e,null,t,1,r??null,i,!1,o,s),t[_s]=e.current,om(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new bw(e)};ai.render=function(t,e,r){if(!xw(e))throw Error(Y(200));return _w(null,t,e,!1,r)};ai.unmountComponentAtNode=function(t){if(!xw(t))throw Error(Y(40));return t._reactRootContainer?(_c(function(){_w(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};ai.unstable_batchedUpdates=KN;ai.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!xw(r))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return _w(t,e,r,!1,n)};ai.version="18.2.0-next-9e3b772b8-20220608";function eW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eW)}catch(t){console.error(t)}}eW(),JV.exports=ai;var Xy=JV.exports;const Yee=ot(Xy);var v2=Xy;uC.createRoot=v2.createRoot,uC.hydrateRoot=v2.hydrateRoot;var tW={exports:{}},rW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=E;function Qee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xee=typeof Object.is=="function"?Object.is:Qee,Jee=Lf.useState,Zee=Lf.useEffect,ete=Lf.useLayoutEffect,tte=Lf.useDebugValue;function rte(t,e){var r=e(),n=Jee({inst:{value:r,getSnapshot:e}}),i=n[0].inst,o=n[1];return ete(function(){i.value=r,i.getSnapshot=e,nE(i)&&o({inst:i})},[t,r,e]),Zee(function(){return nE(i)&&o({inst:i}),t(function(){nE(i)&&o({inst:i})})},[t]),tte(r),r}function nE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xee(t,r)}catch{return!0}}function nte(t,e){return e()}var ite=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nte:rte;rW.useSyncExternalStore=Lf.useSyncExternalStore!==void 0?Lf.useSyncExternalStore:ite;tW.exports=rW;var rk=tW.exports;const{useEffect:ote,useLayoutEffect:ste,useRef:ate,useInsertionEffect:lte}=LJ,cte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ute=cte?ste:ote,fte=lte||ute,nW=t=>{const e=ate([t,(...r)=>e[0](...r)]).current;return fte(()=>{e[0]=t}),e[1]},dte=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",hte=(t,e="")=>t[0]==="~"?t.slice(1):e+t,pte="popstate",nk="pushState",ik="replaceState",mte="hashchange",b2=[pte,nk,ik,mte],yte=t=>{for(const e of b2)addEventListener(e,t);return()=>{for(const e of b2)removeEventListener(e,t)}},gte=(t,e)=>rk.useSyncExternalStore(yte,t,e),x2=()=>location.pathname,vte=({ssrPath:t}={})=>gte(x2,t?()=>t:x2),bte=(t,{replace:e=!1}={})=>history[e?ik:nk](null,"",t),xte=(t={})=>[dte(t.base,vte(t)),nW((e,r)=>bte(hte(e,t.base),r))];if(typeof history<"u")for(const t of[nk,ik]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}function _te(t=Ste){let e={};const r=n=>e[n]||(e[n]=t(n));return(n,i)=>{const{regexp:o,keys:s}=r(n||""),a=o.exec(i);return a?[!0,s.reduce((c,u,d)=>(c[u.name]=a[d+1],c),{})]:[!1,null]}}const _2=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),wte=(t,e,r)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&r&&(n="(?:\\/"+n+")"),n+(e?"?":"")},Ste=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let r=null,n=0,i=[],o="";for(;(r=e.exec(t))!==null;){const[s,a,l]=r,c=l==="+"||l==="*",u=l==="?"||l==="*",d=u&&t[r.index-1]==="/"?1:0,h=t.substring(n,r.index-d);i.push({name:a}),n=e.lastIndex,o+=_2(h)+wte(c,u,d)}return o+=_2(t.substring(n)),{keys:i,regexp:new RegExp("^"+o+"(?:\\/)?$","i")}},Ete={hook:xte,matcher:_te(),base:""},Ate=E.createContext(Ete),ww=()=>E.useContext(Ate),Sw=t=>t.hook(t),Cte=()=>Sw(ww()),Tte=t=>{const e=ww(),[r]=Sw(e);return e.matcher(t,r)},iW=E.createContext({params:{}}),Pte=()=>E.useContext(iW).params,w2=(t,e)=>E.createElement(iW.Provider,{value:{params:t},children:e}),st=({path:t,match:e,component:r,children:n})=>{const i=Tte(t),[o,s]=e||i;return o?r?w2(s,E.createElement(r,{params:s})):w2(s,typeof n=="function"?n(s):n):null};E.forwardRef((t,e)=>{const r=ww(),[,n]=Sw(r),{to:i,href:o=i,children:s,onClick:a}=t,l=nW(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(a&&a(d),d.defaultPrevented||(d.preventDefault(),n(i||o,t)))}),c={href:o[0]==="~"?o.slice(1):r.base+o,onClick:l,to:null,ref:e},u=E.isValidElement(s)?s:E.createElement("a",t);return E.cloneElement(u,c)});const nT=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===E.Fragment?nT(e.props.children):nT(e))):[t],Ite=({children:t,location:e})=>{const r=ww(),n=r.matcher,[i]=Sw(r);for(const o of nT(t)){let s=0;if(E.isValidElement(o)&&(s=o.props.path?n(o.props.path,e||i):[!0,{}])[0])return E.cloneElement(o,{match:s})}return null};const Nte="modulepreload",kte=function(t){return"/"+t},S2={},oW=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=kte(o),o in S2)return;S2[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Nte,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Ote=t=>{t&&t instanceof Function&&oW(()=>import("./web-vitals-9f4c2f45.js"),[]).then(({getCLS:e,getFID:r,getFCP:n,getLCP:i,getTTFB:o})=>{e(t),r(t),n(t),i(t),o(t)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(t,e){if(!t)throw Fd(e)},Fd=function(t){return new Error("Firebase Database ("+sW.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Rte=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],s=t[r++],a=t[r++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ok={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,s||(h=64)),n.push(r[u],r[d],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rte(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new jte;const h=o<<2|a>>4;if(n.push(h),c!==64){const p=a<<4&240|c>>2;if(n.push(p),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jte extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lW=function(t){const e=aW(t);return ok.encodeByteArray(e,!0)},Tb=function(t){return lW(t).replace(/\./g,"")},iT=function(t){try{return ok.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $te(t){return cW(void 0,t)}function cW(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!Dte(r)||(t[r]=cW(t[r],e[r]));return t}function Dte(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mte(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fte=()=>Mte().__FIREBASE_DEFAULTS__,Lte=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Bte=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iT(t[1]);return e&&JSON.parse(e)},sk=()=>{try{return Fte()||Lte()||Bte()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ute=t=>{var e,r;return(r=(e=sk())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},ak=t=>{const e=Ute(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},uW=()=>{var t;return(t=sk())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Tb(JSON.stringify(r)),Tb(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vte(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vte())}function Wte(){var t;const e=(t=sk())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zte(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dW(){return sW.NODE_ADMIN===!0}function Gte(){try{return typeof indexedDB=="object"}catch{return!1}}function qte(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte="FirebaseError";class Dc extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Hte,Object.setPrototypeOf(this,Dc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hW.prototype.create)}}class hW{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Kte(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Dc(i,a,n)}}function Kte(t,e){return t.replace(Yte,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Yte=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return JSON.parse(t)}function cr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=function(t){let e={},r={},n={},i="";try{const o=t.split(".");e=pm(iT(o[0])||""),r=pm(iT(o[1])||""),i=o[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:i}},Qte=function(t){const e=pW(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},Xte=function(t){const e=pW(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bf(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function E2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pb(t,e,r){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}function oT(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],s=e[i];if(A2(o)&&A2(s)){if(!oT(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function A2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jte(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zte{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let d=0;d<16;d++)n[d]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let d=16;d<80;d++){const h=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^o&(s^a),u=1518500249):(c=o^s^a,u=1859775393):d<60?(c=o&s|a&(o|s),u=2400959708):(c=o^s^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+n[d]&4294967295;l=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<r;){if(s===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<r;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<r;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[n]=this.chain_[i]>>o&255,++n;return e}}function Zy(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ere=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i>=55296&&i<=56319){const o=i-55296;n++,X(n<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(n)-56320;i=65536+(o<<10)+s}i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):i<65536?(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Ew=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){return t&&t._delegate?t._delegate:t}class wc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tre=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Jy;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nre(e))try{this.getOrInitializeService({instanceIdentifier:gl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=gl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gl){return this.instances.has(e)}getOptions(e=gl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rre(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=gl){return this.component?this.component.multipleInstances?e:gl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rre(t){return t===gl?void 0:t}function nre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new tre(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const ore={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},sre=Qe.INFO,are={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},lre=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=are[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ck{constructor(e){this.name=e,this._logLevel=sre,this._logHandler=lre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ore[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const cre=(t,e)=>e.some(r=>t instanceof r);let C2,T2;function ure(){return C2||(C2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fre(){return T2||(T2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mW=new WeakMap,sT=new WeakMap,yW=new WeakMap,iE=new WeakMap,uk=new WeakMap;function dre(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(Na(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&mW.set(r,t)}).catch(()=>{}),uk.set(e,t),e}function hre(t){if(sT.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sT.set(t,e)}let aT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yW.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Na(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pre(t){aT=t(aT)}function mre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(oE(this),e,...r);return yW.set(n,e.sort?e.sort():[e]),Na(n)}:fre().includes(t)?function(...e){return t.apply(oE(this),e),Na(mW.get(this))}:function(...e){return Na(t.apply(oE(this),e))}}function yre(t){return typeof t=="function"?mre(t):(t instanceof IDBTransaction&&hre(t),cre(t,ure())?new Proxy(t,aT):t)}function Na(t){if(t instanceof IDBRequest)return dre(t);if(iE.has(t))return iE.get(t);const e=yre(t);return e!==t&&(iE.set(t,e),uk.set(e,t)),e}const oE=t=>uk.get(t);function gre(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Na(s);return n&&s.addEventListener("upgradeneeded",l=>{n(Na(s.result),l.oldVersion,l.newVersion,Na(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const vre=["get","getKey","getAll","getAllKeys","count"],bre=["put","add","delete","clear"],sE=new Map;function P2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sE.get(e))return sE.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=bre.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||vre.includes(r)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),i&&l.done]))[0]};return sE.set(e,o),o}pre(t=>({...t,get:(e,r,n)=>P2(e,r)||t.get(e,r,n),has:(e,r)=>!!P2(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(_re(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function _re(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lT="@firebase/app",I2="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new ck("@firebase/app"),wre="@firebase/app-compat",Sre="@firebase/analytics-compat",Ere="@firebase/analytics",Are="@firebase/app-check-compat",Cre="@firebase/app-check",Tre="@firebase/auth",Pre="@firebase/auth-compat",Ire="@firebase/database",Nre="@firebase/database-compat",kre="@firebase/functions",Ore="@firebase/functions-compat",Rre="@firebase/installations",jre="@firebase/installations-compat",$re="@firebase/messaging",Dre="@firebase/messaging-compat",Mre="@firebase/performance",Fre="@firebase/performance-compat",Lre="@firebase/remote-config",Bre="@firebase/remote-config-compat",Ure="@firebase/storage",Vre="@firebase/storage-compat",Wre="@firebase/firestore",zre="@firebase/firestore-compat",Gre="firebase",qre="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="[DEFAULT]",Hre={[lT]:"fire-core",[wre]:"fire-core-compat",[Ere]:"fire-analytics",[Sre]:"fire-analytics-compat",[Cre]:"fire-app-check",[Are]:"fire-app-check-compat",[Tre]:"fire-auth",[Pre]:"fire-auth-compat",[Ire]:"fire-rtdb",[Nre]:"fire-rtdb-compat",[kre]:"fire-fn",[Ore]:"fire-fn-compat",[Rre]:"fire-iid",[jre]:"fire-iid-compat",[$re]:"fire-fcm",[Dre]:"fire-fcm-compat",[Mre]:"fire-perf",[Fre]:"fire-perf-compat",[Lre]:"fire-rc",[Bre]:"fire-rc-compat",[Ure]:"fire-gcs",[Vre]:"fire-gcs-compat",[Wre]:"fire-fst",[zre]:"fire-fst-compat","fire-js":"fire-js",[Gre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Map,uT=new Map;function Kre(t,e){try{t.container.addComponent(e)}catch(r){Sc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Uf(t){const e=t.name;if(uT.has(e))return Sc.debug(`There were multiple attempts to register component ${e}.`),!1;uT.set(e,t);for(const r of Ib.values())Kre(r,t);return!0}function fk(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ka=new hW("app","Firebase",Yre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=qre;function gW(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:cT,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ka.create("bad-app-name",{appName:String(i)});if(r||(r=uW()),!r)throw ka.create("no-options");const o=Ib.get(i);if(o){if(oT(r,o.options)&&oT(n,o.config))return o;throw ka.create("duplicate-app",{appName:i})}const s=new ire(i);for(const l of uT.values())s.addComponent(l);const a=new Qre(r,n,s);return Ib.set(i,a),a}function hk(t=cT){const e=Ib.get(t);if(!e&&t===cT&&uW())return gW();if(!e)throw ka.create("no-app",{appName:t});return e}function Lo(t,e,r){var n;let i=(n=Hre[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sc.warn(a.join(" "));return}Uf(new wc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xre="firebase-heartbeat-database",Jre=1,mm="firebase-heartbeat-store";let aE=null;function vW(){return aE||(aE=gre(Xre,Jre,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(mm)}}}).catch(t=>{throw ka.create("idb-open",{originalErrorMessage:t.message})})),aE}async function Zre(t){try{return await(await vW()).transaction(mm).objectStore(mm).get(bW(t))}catch(e){if(e instanceof Dc)Sc.warn(e.message);else{const r=ka.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sc.warn(r.message)}}}async function N2(t,e){try{const n=(await vW()).transaction(mm,"readwrite");await n.objectStore(mm).put(e,bW(t)),await n.done}catch(r){if(r instanceof Dc)Sc.warn(r.message);else{const n=ka.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Sc.warn(n.message)}}}function bW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ene=1024,tne=30*24*60*60*1e3;class rne{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new ine(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=k2();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=tne}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=k2(),{heartbeatsToSend:r,unsentEntries:n}=nne(this._heartbeatsCache.heartbeats),i=Tb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function k2(){return new Date().toISOString().substring(0,10)}function nne(t,e=ene){const r=[];let n=t.slice();for(const i of t){const o=r.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),O2(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),O2(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class ine{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gte()?qte().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Zre(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return N2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return N2(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function O2(t){return Tb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function one(t){Uf(new wc("platform-logger",e=>new xre(e),"PRIVATE")),Uf(new wc("heartbeat",e=>new rne(e),"PRIVATE")),Lo(lT,I2,t),Lo(lT,I2,"esm2017"),Lo("fire-js","")}one("");const R2="@firebase/database",j2="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xW="";function sne(t){xW=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cr(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:pm(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Yo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ane(e)}}catch{}return new lne},$l=_W("localStorage"),fT=_W("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new ck("@firebase/database"),cne=function(){let t=1;return function(){return t++}}(),wW=function(t){const e=ere(t),r=new Zte;r.update(e);const n=r.digest();return ok.encodeByteArray(n)},eg=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=eg.apply(null,n):typeof n=="object"?e+=cr(n):e+=n,e+=" "}return e};let ec=null,$2=!0;const une=function(t,e){X(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Xu.logLevel=Qe.VERBOSE,ec=Xu.log.bind(Xu),e&&fT.set("logging_enabled",!0)):typeof t=="function"?ec=t:(ec=null,fT.remove("logging_enabled"))},Ur=function(...t){if($2===!0&&($2=!1,ec===null&&fT.get("logging_enabled")===!0&&une(!0)),ec){const e=eg.apply(null,t);ec(e)}},tg=function(t){return function(...e){Ur(t,...e)}},dT=function(...t){const e="FIREBASE INTERNAL ERROR: "+eg(...t);Xu.error(e)},Es=function(...t){const e=`FIREBASE FATAL ERROR: ${eg(...t)}`;throw Xu.error(e),new Error(e)},Tn=function(...t){const e="FIREBASE WARNING: "+eg(...t);Xu.warn(e)},fne=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},dne=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Ec="[MIN_NAME]",Va="[MAX_NAME]",Mc=function(t,e){if(t===e)return 0;if(t===Ec||e===Va)return-1;if(e===Ec||t===Va)return 1;{const r=D2(t),n=D2(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},hne=function(t,e){return t===e?0:t<e?-1:1},Sh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+cr(e))},mk=function(t){if(typeof t!="object"||t===null)return cr(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=cr(e[n]),r+=":",r+=mk(t[e[n]]);return r+="}",r},SW=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let i=0;i<r;i+=e)i+e>r?n.push(t.substring(i,r)):n.push(t.substring(i,i+e));return n};function Jr(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const EW=function(t){X(!pk(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let i,o,s,a,l;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=a+n,s=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(o=0,s=Math.round(t/Math.pow(2,1-n-r))));const c=[];for(l=r;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},pne=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},mne=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function yne(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const gne=new RegExp("^-?(0*)\\d{1,10}$"),vne=-2147483648,bne=2147483647,D2=function(t){if(gne.test(t)){const e=Number(t);if(e>=vne&&e<=bne)return e}return null},Ld=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Tn("Exception was thrown by user callback.",r),e},Math.floor(0))}},xne=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ap=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ne{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}}class Ju{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ju.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="5",AW="v",CW="s",TW="r",PW="f",IW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,NW="ls",kW="p",hT="ac",OW="websocket",RW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(e,r,n,i,o=!1,s="",a=!1,l=!1){this.secure=r,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$l.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$l.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function Sne(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function $W(t,e,r){X(typeof e=="string","typeof type must == string"),X(typeof r=="object","typeof params must == object");let n;if(e===OW)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===RW)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Sne(t)&&(r.ns=t.namespace);const i=[];return Jr(r,(o,s)=>{i.push(o+"="+s)}),n+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{constructor(){this.counters_={}}incrementCounter(e,r=1){Yo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return $te(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={},cE={};function gk(t){const e=t.toString();return lE[e]||(lE[e]=new Ene),lE[e]}function Ane(t,e){const r=t.toString();return cE[r]||(cE[r]=e()),cE[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&Ld(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="start",Tne="close",Pne="pLPCommand",Ine="pRTLPCB",DW="id",MW="pw",FW="ser",Nne="cb",kne="seg",One="ts",Rne="d",jne="dframe",LW=1870,BW=30,$ne=LW-BW,Dne=25e3,Mne=3e4;class ju{constructor(e,r,n,i,o,s,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tg(e),this.stats_=gk(r),this.urlFn=l=>(this.appCheckToken&&(l[hT]=this.appCheckToken),$W(r,RW,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Cne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mne)),dne(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vk((...o)=>{const[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===M2)this.id=a,this.password=l;else if(s===Tne)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[M2]="t",n[FW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Nne]=this.scriptTagHolder.uniqueCallbackIdentifier),n[AW]=yk,this.transportSessionId&&(n[CW]=this.transportSessionId),this.lastSessionId&&(n[NW]=this.lastSessionId),this.applicationId&&(n[kW]=this.applicationId),this.appCheckToken&&(n[hT]=this.appCheckToken),typeof location<"u"&&location.hostname&&IW.test(location.hostname)&&(n[TW]=PW);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ju.forceAllow_=!0}static forceDisallow(){ju.forceDisallow_=!0}static isAvailable(){return ju.forceAllow_?!0:!ju.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pne()&&!mne()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=cr(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=lW(r),i=SW(n,$ne);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[jne]="t",n[DW]=e,n[MW]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=cr(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class vk{constructor(e,r,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=cne(),window[Pne+this.uniqueCallbackIdentifier]=e,window[Ine+this.uniqueCallbackIdentifier]=r,this.myIFrame=vk.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ur("frame writing exception"),a.stack&&Ur(a.stack),Ur(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ur("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[DW]=this.myID,e[MW]=this.myPW,e[FW]=this.currentSerial;let r=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+BW+n.length<=LW;){const s=this.pendingSegs.shift();n=n+"&"+kne+i+"="+s.seg+"&"+One+i+"="+s.ts+"&"+Rne+i+"="+s.d,i++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},i=setTimeout(n,Math.floor(Dne)),o=()=>{clearTimeout(i),n()};this.addTag(e,o)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Ur("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fne=16384,Lne=45e3;let Nb=null;typeof MozWebSocket<"u"?Nb=MozWebSocket:typeof WebSocket<"u"&&(Nb=WebSocket);class Xi{constructor(e,r,n,i,o,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tg(this.connId),this.stats_=gk(r),this.connURL=Xi.connectionURL_(r,s,a,i,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,i,o){const s={};return s[AW]=yk,typeof location<"u"&&location.hostname&&IW.test(location.hostname)&&(s[TW]=PW),r&&(s[CW]=r),n&&(s[NW]=n),i&&(s[hT]=i),o&&(s[kW]=o),$W(e,OW,s)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$l.set("previous_websocket_failure",!0);try{let n;dW(),this.mySock=new Nb(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Xi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Nb!==null&&!Xi.forceDisallow_}static previouslyFailed(){return $l.isInMemoryStorage||$l.get("previous_websocket_failure")===!0}markConnectionHealthy(){$l.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=pm(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=cr(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=SW(r,Fne);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Lne))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xi.responsesRequiredToBeHealthy=2;Xi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ju,Xi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=Xi&&Xi.isAvailable();let n=r&&!Xi.previouslyFailed();if(e.webSocketOnly&&(r||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Xi];else{const i=this.transports_=[];for(const o of ym.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);ym.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ym.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bne=6e4,Une=5e3,Vne=10*1024,Wne=100*1024,uE="t",F2="d",zne="s",L2="r",Gne="e",B2="o",U2="a",V2="n",W2="p",qne="h";class Hne{constructor(e,r,n,i,o,s,a,l,c,u){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tg("c:"+this.id+":"),this.transportManager_=new ym(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ap(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Wne?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Vne?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(uE in e){const r=e[uE];r===U2?this.upgradeIfSecondaryHealthy_():r===L2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===B2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=Sh("t",e),n=Sh("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:W2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:U2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:V2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=Sh("t",e),n=Sh("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=Sh(uE,e);if(F2 in e){const n=e[F2];if(r===qne){const i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(r===V2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===zne?this.onConnectionShutdown_(n):r===L2?this.onReset_(n):r===Gne?dT("Server Error: "+n):r===B2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dT("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),yk!==n&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Ap(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Bne))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ap(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Une))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:W2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{put(e,r,n,i){}merge(e,r,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const i=this.getInitialEvent(e);i&&r.apply(n,i)}off(e,r,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===r&&(!n||n===i[o].context)){i.splice(o,1);return}}validateEventType_(e){X(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends VW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!fW()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kb}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=32,G2=768;let ut=class{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}};function et(){return new ut("")}function je(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Wa(t){return t.pieces_.length-t.pieceNum_}function Et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ut(t.pieces_,e)}function bk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Kne(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function gm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function WW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new ut(e,0)}function Ht(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof ut)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&r.push(n[i])}return new ut(r,0)}function $e(t){return t.pieceNum_>=t.pieces_.length}function Sn(t,e){const r=je(t),n=je(e);if(r===null)return e;if(r===n)return Sn(Et(t),Et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Yne(t,e){const r=gm(t,0),n=gm(e,0);for(let i=0;i<r.length&&i<n.length;i++){const o=Mc(r[i],n[i]);if(o!==0)return o}return r.length===n.length?0:r.length<n.length?-1:1}function xk(t,e){if(Wa(t)!==Wa(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function Ci(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(Wa(t)>Wa(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class Qne{constructor(e,r){this.errorPrefix_=r,this.parts_=gm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Ew(this.parts_[n]);zW(this)}}function Xne(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ew(e),zW(t)}function Jne(t){const e=t.parts_.pop();t.byteLength_-=Ew(e),t.parts_.length>0&&(t.byteLength_-=1)}function zW(t){if(t.byteLength_>G2)throw new Error(t.errorPrefix_+"has a key path longer than "+G2+" bytes ("+t.byteLength_+").");if(t.parts_.length>z2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+z2+") or object contains a cycle "+vl(t))}function vl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends VW{constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new _k}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=1e3,Zne=60*5*1e3,q2=30*1e3,eie=1.3,tie=3e4,rie="server_kill",H2=3;class ys extends UW{constructor(e,r,n,i,o,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ys.nextPersistentConnectionId_++,this.log_=tg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eh,this.maxReconnectDelay_=Zne,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!dW())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_k.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&kb.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const i=++this.requestNumber_,o={r:i,a:e,b:r};this.log_(cr(o)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const r=new Jy,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(e,r,n,i){this.initConnection_();const o=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:r,query:e,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+n+" for "+i);const o={p:n},s="q";e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(s,o,a=>{const l=a.d,c=a.s;ys.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Yo(e,"w")){const n=Bf(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Xte(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=q2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=Qte(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,i=>{const o=i.s,s=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,r)}sendUnlisten_(e,r,n,i){this.log_("Unlisten on "+e+" for "+r);const o={p:e},s="n";i&&(o.q=n,o.t=i),this.sendRequest(s,o)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,i){const o={p:r,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,s=>{i&&setTimeout(()=>{i(s.s,s.d)},Math.floor(0))})}put(e,r,n,i){this.putInternal("p",e,r,n,i)}merge(e,r,n,i){this.putInternal("m",e,r,n,i)}putInternal(e,r,n,i,o){this.initConnection_();const s={p:r,d:n};o!==void 0&&(s.h=o),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const o=n.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+cr(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):dT("Unrecognized action received from server: "+cr(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tie&&(this.reconnectDelay_=Eh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*eie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ys.nextConnectionId_++,o=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(d){X(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Ur("getToken() completed but was canceled"):(Ur("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Hne(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,p=>{Tn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(rie)},o))}catch(d){this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&Tn(d),l())}}}interrupt(e){Ur("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ur("Resuming connection for reason: "+e),delete this.interruptReasons_[e],E2(this.interruptReasons_)&&(this.reconnectDelay_=Eh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(o=>mk(o)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,r){const n=new ut(e).toString();let i;if(this.listens.has(n)){const o=this.listens.get(n);i=o.get(r),o.delete(r),o.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,r){Ur("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=H2&&(this.reconnectDelay_=q2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Ur("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=H2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+xW.replace(/\./g,"-")]=1,fW()?e["framework.cordova"]=1:zte()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=kb.getInstance().currentlyOnline();return E2(this.interruptReasons_)&&e}}ys.nextPersistentConnectionId_=0;ys.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new De(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new De(Ec,e),i=new De(Ec,r);return this.compare(n,i)!==0}minPost(){return De.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v;class GW extends Aw{static get __EMPTY_NODE(){return _v}static set __EMPTY_NODE(e){_v=e}compare(e,r){return Mc(e.name,r.name)}isDefinedOn(e){throw Fd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return De.MIN}maxPost(){return new De(Va,_v)}makePost(e,r){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new De(e,_v)}toString(){return".key"}}const tc=new GW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wv=class{constructor(e,r,n,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=r?n(e.key,r):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Kn=class Zh{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Zh.RED,this.left=i??Po.EMPTY_NODE,this.right=o??Po.EMPTY_NODE}copy(e,r,n,i,o){return new Zh(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i=i.copy(null,r,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Po.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,i;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return Po.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Kn.RED=!0;Kn.BLACK=!1;class nie{copy(e,r,n,i,o){return this}insert(e,r,n){return new Kn(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Po=class S0{constructor(e,r=S0.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new S0(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Kn.BLACK,null,null))}remove(e){return new S0(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kn.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,i=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new wv(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new wv(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new wv(this.root_,null,this.comparator_,!0,e)}};Po.EMPTY_NODE=new nie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iie(t,e){return Mc(t.name,e.name)}function wk(t,e){return Mc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pT;function oie(t){pT=t}const qW=function(t){return typeof t=="number"?"number:"+EW(t):"string:"+t},HW=function(t){if(t.isLeafNode()){const e=t.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yo(e,".sv"),"Priority must be a string or number.")}else X(t===pT||t.isEmpty(),"priority of unexpected type.");X(t===pT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K2;class Sr{constructor(e,r=Sr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),HW(this.priorityNode_)}static set __childrenNodeConstructor(e){K2=e}static get __childrenNodeConstructor(){return K2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Sr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Sr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:je(e)===".priority"?this.priorityNode_:Sr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Sr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=je(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(X(n!==".priority"||Wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Sr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Et(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qW(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=EW(this.value_):e+=this.value_,this.lazyHash_=wW(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Sr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Sr.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,i=Sr.VALUE_TYPE_ORDER.indexOf(r),o=Sr.VALUE_TYPE_ORDER.indexOf(n);return X(i>=0,"Unknown leaf type: "+r),X(o>=0,"Unknown leaf type: "+n),i===o?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Sr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KW,YW;function sie(t){KW=t}function aie(t){YW=t}class lie extends Aw{compare(e,r){const n=e.node.getPriority(),i=r.node.getPriority(),o=n.compareTo(i);return o===0?Mc(e.name,r.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return De.MIN}maxPost(){return new De(Va,new Sr("[PRIORITY-POST]",YW))}makePost(e,r){const n=KW(e);return new De(r,new Sr("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ft=new lie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cie=Math.log(2);class uie{constructor(e){const r=o=>parseInt(Math.log(o)/cie,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ob=function(t,e,r,n){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=r?r(d):d,new Kn(h,d.node,Kn.BLACK,null,null);{const p=parseInt(u/2,10)+l,m=i(l,p),y=i(p+1,c);return d=t[p],h=r?r(d):d,new Kn(h,d.node,Kn.BLACK,m,y)}},o=function(l){let c=null,u=null,d=t.length;const h=function(m,y){const g=d-m,b=d;d-=m;const v=i(g+1,b),x=t[g],S=r?r(x):x;p(new Kn(S,x.node,y,null,v))},p=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<l.count;++m){const y=l.nextBitIsOne(),g=Math.pow(2,l.count-(m+1));y?h(g,Kn.BLACK):(h(g,Kn.BLACK),h(g,Kn.RED))}return u},s=new uie(t.length),a=o(s);return new Po(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fE;const Kc={};class ls{constructor(e,r){this.indexes_=e,this.indexSet_=r}static get Default(){return X(Kc&&Ft,"ChildrenNode.ts has not been loaded"),fE=fE||new ls({".priority":Kc},{".priority":Ft}),fE}get(e){const r=Bf(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Po?r:null}hasIndex(e){return Yo(this.indexSet_,e.toString())}addIndex(e,r){X(e!==tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const o=r.getIterator(De.Wrap);let s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),n.push(s),s=o.getNext();let a;i?a=Ob(n,e.getCompare()):a=Kc;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ls(u,c)}addToIndexes(e,r){const n=Pb(this.indexes_,(i,o)=>{const s=Bf(this.indexSet_,o);if(X(s,"Missing index implementation for "+o),i===Kc)if(s.isDefinedOn(e.node)){const a=[],l=r.getIterator(De.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Ob(a,s.getCompare())}else return Kc;else{const a=r.get(e.name);let l=i;return a&&(l=l.remove(new De(e.name,a))),l.insert(e,e.node)}});return new ls(n,this.indexSet_)}removeFromIndexes(e,r){const n=Pb(this.indexes_,i=>{if(i===Kc)return i;{const o=r.get(e.name);return o?i.remove(new De(e.name,o)):i}});return new ls(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah;class _e{constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&HW(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ah||(Ah=new _e(new Po(wk),null,ls.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ah}updatePriority(e){return this.children_.isEmpty()?this:new _e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?Ah:r}}getChild(e){const r=je(e);return r===null?this:this.getImmediateChild(r).getChild(Et(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(X(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new De(e,r);let i,o;r.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,r),o=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?Ah:this.priorityNode_;return new _e(i,s,o)}}updateChild(e,r){const n=je(e);if(n===null)return r;{X(je(e)!==".priority"||Wa(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Et(e),r);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,i=0,o=!0;if(this.forEachChild(Ft,(s,a)=>{r[s]=a.val(e),n++,o&&_e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*n){const s=[];for(const a in r)s[a]=r[a];return s}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+qW(this.getPriority().val())+":"),this.forEachChild(Ft,(r,n)=>{const i=n.hash();i!==""&&(e+=":"+r+":"+i)}),this.lazyHash_=e===""?"":wW(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const i=this.resolveIndex_(n);if(i){const o=i.getPredecessorKey(new De(e,r));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new De(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new De(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>r(i.name,i.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,De.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,De.Wrap);let o=i.peek();for(;o!=null&&r.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rg?-1:0}withIndex(e){if(e===tc||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new _e(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===tc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(Ft),i=r.getIterator(Ft);let o=n.getNext(),s=i.getNext();for(;o&&s;){if(o.name!==s.name||!o.node.equals(s.node))return!1;o=n.getNext(),s=i.getNext()}return o===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===tc?null:this.indexMap_.get(e.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class fie extends _e{constructor(){super(new Po(wk),_e.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}}const rg=new fie;Object.defineProperties(De,{MIN:{value:new De(Ec,_e.EMPTY_NODE)},MAX:{value:new De(Va,rg)}});GW.__EMPTY_NODE=_e.EMPTY_NODE;Sr.__childrenNodeConstructor=_e;oie(rg);aie(rg);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const die=!0;function lr(t,e=null){if(t===null)return _e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Sr(r,lr(e))}if(!(t instanceof Array)&&die){const r=[];let n=!1;if(Jr(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=lr(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new De(s,l)))}}),r.length===0)return _e.EMPTY_NODE;const o=Ob(r,iie,s=>s.name,wk);if(n){const s=Ob(r,Ft.getCompare());return new _e(o,lr(e),new ls({".priority":s},{".priority":Ft}))}else return new _e(o,lr(e),ls.Default)}else{let r=_e.EMPTY_NODE;return Jr(t,(n,i)=>{if(Yo(t,n)&&n.substring(0,1)!=="."){const o=lr(i);(o.isLeafNode()||!o.isEmpty())&&(r=r.updateImmediateChild(n,o))}}),r.updatePriority(lr(e))}}sie(lr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk extends Aw{constructor(e){super(),this.indexPath_=e,X(!$e(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),i=this.extractChild(r.node),o=n.compareTo(i);return o===0?Mc(e.name,r.name):o}makePost(e,r){const n=lr(e),i=_e.EMPTY_NODE.updateChild(this.indexPath_,n);return new De(r,i)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,rg);return new De(Va,e)}toString(){return gm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie extends Aw{compare(e,r){const n=e.node.compareTo(r.node);return n===0?Mc(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,r){const n=lr(e);return new De(r,n)}toString(){return".value"}}const QW=new hie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t){return{type:"value",snapshotNode:t}}function Vf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vm(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function bm(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function pie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.index_=e}updateChild(e,r,n,i,o,s){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(r)?s.trackChildChange(vm(r,a)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Vf(r,n)):s.trackChildChange(bm(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Ft,(i,o)=>{r.hasChild(i)||n.trackChildChange(vm(i,o))}),r.isLeafNode()||r.forEachChild(Ft,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||n.trackChildChange(bm(i,o,s))}else n.trackChildChange(Vf(i,o))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?_e.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.indexedFilter_=new Ek(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xm.getStartPost_(e),this.endPost_=xm.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,i,o,s){return this.matches(new De(r,n))||(n=_e.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,i,o,s)}updateFullNode(e,r,n){r.isLeafNode()&&(r=_e.EMPTY_NODE);let i=r.withIndex(this.index_);i=i.updatePriority(_e.EMPTY_NODE);const o=this;return r.forEachChild(Ft,(s,a)=>{o.matches(new De(s,a))||(i=i.updateImmediateChild(s,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mie{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new xm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,i,o,s){return this.rangedFilter_.matches(new De(r,n))||(n=_e.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,i,o,s):this.fullLimitUpdateChild_(e,r,n,o,s)}updateFullNode(e,r,n){let i;if(r.isLeafNode()||r.isEmpty())i=_e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){i=_e.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=r.withIndex(this.index_),i=i.updatePriority(_e.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(h,p)=>d(p,h)}else s=this.index_.getCompare();const a=e;X(a.numChildren()===this.limit_,"");const l=new De(r,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(r)){const d=a.getImmediateChild(r);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===r||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:s(h,l);if(u&&!n.isEmpty()&&p>=0)return o!=null&&o.trackChildChange(bm(r,n,d)),a.updateImmediateChild(r,n);{o!=null&&o.trackChildChange(vm(r,d));const y=a.updateImmediateChild(r,_e.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o!=null&&o.trackChildChange(Vf(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return n.isEmpty()?e:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(vm(c.name,c.node)),o.trackChildChange(Vf(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(c.name,_e.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ec}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Va}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){const e=new Ak;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yie(t){return t.loadsAllData()?new Ek(t.getIndex()):t.hasLimit()?new mie(t):new xm(t)}function gie(t,e){const r=t.copy();return r.limitSet_=!0,r.limit_=e,r.viewFrom_="r",r}function vie(t,e,r){const n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,r!=null?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function bie(t,e,r){const n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,r!==void 0?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function xie(t,e){const r=t.copy();return r.index_=e,r}function Y2(t){const e={};if(t.isDefault())return e;let r;if(t.index_===Ft?r="$priority":t.index_===QW?r="$value":t.index_===tc?r="$key":(X(t.index_ instanceof Sk,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=cr(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=cr(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+cr(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=cr(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+cr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Q2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==Ft&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends UW{constructor(e,r,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=tg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,r,n,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Rb.getListenId_(e,n),a={};this.listens_[s]=a;const l=Y2(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,n),Bf(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,r){const n=Rb.getListenId_(e,r);delete this.listens_[n]}get(e){const r=Y2(e._queryParams),n=e._path.toString(),i=new Jy;return this.restRequest_(n+".json",r,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(n,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(r.auth=i.accessToken),o&&o.token&&(r.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jte(r);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=pm(a.responseText)}catch{Tn("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Tn("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return{value:null,children:new Map}}function JW(t,e,r){if($e(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=je(e);t.children.has(n)||t.children.set(n,jb());const i=t.children.get(n);e=Et(e),JW(i,e,r)}}function mT(t,e,r){t.value!==null?r(e,t.value):wie(t,(n,i)=>{const o=new ut(e.toString()+"/"+n);mT(i,o,r)})}function wie(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&Jr(this.last_,(n,i)=>{r[n]=r[n]-i}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=10*1e3,Eie=30*1e3,Aie=5*60*1e3;class Cie{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Sie(e);const n=X2+(Eie-X2)*Math.random();Ap(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;Jr(e,(i,o)=>{o>0&&Yo(this.statsToReport_,i)&&(r[i]=o,n=!0)}),n&&this.server_.reportStats(r),Ap(this.reportStats_.bind(this),Math.floor(Math.random()*2*Aie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(eo||(eo={}));function Ck(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=eo.ACK_USER_WRITE,this.source=Ck()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ut(e));return new $b(et(),r,this.revert)}}else return X(je(this.path)===e,"operationForChild called for unrelated child."),new $b(Et(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,r){this.source=e,this.path=r,this.type=eo.LISTEN_COMPLETE}operationForChild(e){return $e(this.path)?new _m(this.source,et()):new _m(this.source,Et(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=eo.OVERWRITE}operationForChild(e){return $e(this.path)?new Ac(this.source,et(),this.snap.getImmediateChild(e)):new Ac(this.source,Et(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=eo.MERGE}operationForChild(e){if($e(this.path)){const r=this.children.subtree(new ut(e));return r.isEmpty()?null:r.value?new Ac(this.source,et(),r.value):new Wf(this.source,et(),r)}else return X(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wf(this.source,Et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const r=je(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Pie(t,e,r,n){const i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(pie(s.childName,s.snapshotNode))}),Ch(t,i,"child_removed",e,n,r),Ch(t,i,"child_added",e,n,r),Ch(t,i,"child_moved",o,n,r),Ch(t,i,"child_changed",e,n,r),Ch(t,i,"value",e,n,r),i}function Ch(t,e,r,n,i,o){const s=n.filter(a=>a.type===r);s.sort((a,l)=>Nie(t,a,l)),s.forEach(a=>{const l=Iie(t,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Iie(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Nie(t,e,r){if(e.childName==null||r.childName==null)throw Fd("Should only compare child_ events.");const n=new De(e.childName,e.snapshotNode),i=new De(r.childName,r.snapshotNode);return t.index_.compare(n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){return{eventCache:t,serverCache:e}}function Cp(t,e,r,n){return Cw(new za(e,r,n),t.serverCache)}function ZW(t,e,r,n){return Cw(t.eventCache,new za(e,r,n))}function Db(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Cc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dE;const kie=()=>(dE||(dE=new Po(hne)),dE);class wt{constructor(e,r=kie()){this.value=e,this.children=r}static fromObject(e){let r=new wt(null);return Jr(e,(n,i)=>{r=r.set(new ut(n),i)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:et(),value:this.value};if($e(e))return null;{const n=je(e),i=this.children.get(n);if(i!==null){const o=i.findRootMostMatchingPathAndValue(Et(e),r);return o!=null?{path:Ht(new ut(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const r=je(e),n=this.children.get(r);return n!==null?n.subtree(Et(e)):new wt(null)}}set(e,r){if($e(e))return new wt(r,this.children);{const n=je(e),o=(this.children.get(n)||new wt(null)).set(Et(e),r),s=this.children.insert(n,o);return new wt(this.value,s)}}remove(e){if($e(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const r=je(e),n=this.children.get(r);if(n){const i=n.remove(Et(e));let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),this.value===null&&o.isEmpty()?new wt(null):new wt(this.value,o)}else return this}}get(e){if($e(e))return this.value;{const r=je(e),n=this.children.get(r);return n?n.get(Et(e)):null}}setTree(e,r){if($e(e))return r;{const n=je(e),o=(this.children.get(n)||new wt(null)).setTree(Et(e),r);let s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),new wt(this.value,s)}}fold(e){return this.fold_(et(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((i,o)=>{n[i]=o.fold_(Ht(e,i),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,et(),r)}findOnPath_(e,r,n){const i=this.value?n(r,this.value):!1;if(i)return i;if($e(e))return null;{const o=je(e),s=this.children.get(o);return s?s.findOnPath_(Et(e),Ht(r,o),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,et(),r)}foreachOnPath_(e,r,n){if($e(e))return this;{this.value&&n(r,this.value);const i=je(e),o=this.children.get(i);return o?o.foreachOnPath_(Et(e),Ht(r,i),n):new wt(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,r){this.children.inorderTraversal((n,i)=>{i.foreach_(Ht(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.writeTree_=e}static empty(){return new so(new wt(null))}}function Tp(t,e,r){if($e(e))return new so(new wt(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let o=n.value;const s=Sn(i,e);return o=o.updateChild(s,r),new so(t.writeTree_.set(i,o))}else{const i=new wt(r),o=t.writeTree_.setTree(e,i);return new so(o)}}}function yT(t,e,r){let n=t;return Jr(r,(i,o)=>{n=Tp(n,Ht(e,i),o)}),n}function J2(t,e){if($e(e))return so.empty();{const r=t.writeTree_.setTree(e,new wt(null));return new so(r)}}function gT(t,e){return Fc(t,e)!=null}function Fc(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(Sn(r.path,e)):null}function Z2(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ft,(n,i)=>{e.push(new De(n,i))}):t.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new De(n,i.value))}),e}function Oa(t,e){if($e(e))return t;{const r=Fc(t,e);return r!=null?new so(new wt(r)):new so(t.writeTree_.subtree(e))}}function vT(t){return t.writeTree_.isEmpty()}function zf(t,e){return e8(et(),t.writeTree_,e)}function e8(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(X(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):r=e8(Ht(t,i),o,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Ht(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){return i8(e,t)}function Oie(t,e,r,n,i){X(n>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:i}),i&&(t.visibleWrites=Tp(t.visibleWrites,e,r)),t.lastWriteId=n}function Rie(t,e,r,n){X(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=yT(t.visibleWrites,e,r),t.lastWriteId=n}function jie(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function $ie(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);X(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let i=n.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=r&&Die(a,n.path)?i=!1:Ci(n.path,a.path)&&(o=!0)),s--}if(i){if(o)return Mie(t),!0;if(n.snap)t.visibleWrites=J2(t.visibleWrites,n.path);else{const a=n.children;Jr(a,l=>{t.visibleWrites=J2(t.visibleWrites,Ht(n.path,l))})}return!0}else return!1}function Die(t,e){if(t.snap)return Ci(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&Ci(Ht(t.path,r),e))return!0;return!1}function Mie(t){t.visibleWrites=t8(t.allWrites,Fie,et()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Fie(t){return t.visible}function t8(t,e,r){let n=so.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)Ci(r,s)?(a=Sn(r,s),n=Tp(n,a,o.snap)):Ci(s,r)&&(a=Sn(s,r),n=Tp(n,et(),o.snap.getChild(a)));else if(o.children){if(Ci(r,s))a=Sn(r,s),n=yT(n,a,o.children);else if(Ci(s,r))if(a=Sn(s,r),$e(a))n=yT(n,et(),o.children);else{const l=Bf(o.children,je(a));if(l){const c=l.getChild(Et(a));n=Tp(n,et(),c)}}}else throw Fd("WriteRecord should have .snap or .children")}}return n}function r8(t,e,r,n,i){if(!n&&!i){const o=Fc(t.visibleWrites,e);if(o!=null)return o;{const s=Oa(t.visibleWrites,e);if(vT(s))return r;if(r==null&&!gT(s,et()))return null;{const a=r||_e.EMPTY_NODE;return zf(s,a)}}}else{const o=Oa(t.visibleWrites,e);if(!i&&vT(o))return r;if(!i&&r==null&&!gT(o,et()))return null;{const s=function(c){return(c.visible||i)&&(!n||!~n.indexOf(c.writeId))&&(Ci(c.path,e)||Ci(e,c.path))},a=t8(t.allWrites,s,e),l=r||_e.EMPTY_NODE;return zf(a,l)}}}function Lie(t,e,r){let n=_e.EMPTY_NODE;const i=Fc(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ft,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(r){const o=Oa(t.visibleWrites,e);return r.forEachChild(Ft,(s,a)=>{const l=zf(Oa(o,new ut(s)),a);n=n.updateImmediateChild(s,l)}),Z2(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{const o=Oa(t.visibleWrites,e);return Z2(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function Bie(t,e,r,n,i){X(n||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ht(e,r);if(gT(t.visibleWrites,o))return null;{const s=Oa(t.visibleWrites,o);return vT(s)?i.getChild(r):zf(s,i.getChild(r))}}function Uie(t,e,r,n){const i=Ht(e,r),o=Fc(t.visibleWrites,i);if(o!=null)return o;if(n.isCompleteForChild(r)){const s=Oa(t.visibleWrites,i);return zf(s,n.getNode().getImmediateChild(r))}else return null}function Vie(t,e){return Fc(t.visibleWrites,e)}function Wie(t,e,r,n,i,o,s){let a;const l=Oa(t.visibleWrites,e),c=Fc(l,et());if(c!=null)a=c;else if(r!=null)a=zf(l,r);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let p=h.getNext();for(;p&&u.length<i;)d(p,n)!==0&&u.push(p),p=h.getNext();return u}else return[]}function zie(){return{visibleWrites:so.empty(),allWrites:[],lastWriteId:-1}}function Mb(t,e,r,n){return r8(t.writeTree,t.treePath,e,r,n)}function Ik(t,e){return Lie(t.writeTree,t.treePath,e)}function eD(t,e,r,n){return Bie(t.writeTree,t.treePath,e,r,n)}function Fb(t,e){return Vie(t.writeTree,Ht(t.treePath,e))}function Gie(t,e,r,n,i,o){return Wie(t.writeTree,t.treePath,e,r,n,i,o)}function Nk(t,e,r){return Uie(t.writeTree,t.treePath,e,r)}function n8(t,e){return i8(Ht(t.treePath,e),t.writeTree)}function i8(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qie{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;X(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),X(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const o=i.type;if(r==="child_added"&&o==="child_removed")this.changeMap.set(n,bm(n,e.snapshotNode,i.snapshotNode));else if(r==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&o==="child_changed")this.changeMap.set(n,vm(n,i.oldSnap));else if(r==="child_changed"&&o==="child_added")this.changeMap.set(n,Vf(n,e.snapshotNode));else if(r==="child_changed"&&o==="child_changed")this.changeMap.set(n,bm(n,e.snapshotNode,i.oldSnap));else throw Fd("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hie{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const o8=new Hie;class kk{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new za(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nk(this.writes_,e,n)}}getChildAfterChild(e,r,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cc(this.viewCache_),o=Gie(this.writes_,i,r,1,n,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kie(t){return{filter:t}}function Yie(t,e){X(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Qie(t,e,r,n,i){const o=new qie;let s,a;if(r.type===eo.OVERWRITE){const c=r;c.source.fromUser?s=bT(t,e,c.path,c.snap,n,i,o):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!$e(c.path),s=Lb(t,e,c.path,c.snap,n,i,a,o))}else if(r.type===eo.MERGE){const c=r;c.source.fromUser?s=Jie(t,e,c.path,c.children,n,i,o):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=xT(t,e,c.path,c.children,n,i,a,o))}else if(r.type===eo.ACK_USER_WRITE){const c=r;c.revert?s=toe(t,e,c.path,n,i,o):s=Zie(t,e,c.path,c.affectedTree,n,i,o)}else if(r.type===eo.LISTEN_COMPLETE)s=eoe(t,e,r.path,n,o);else throw Fd("Unknown operation type: "+r.type);const l=o.getChanges();return Xie(e,s,l),{viewCache:s,changes:l}}function Xie(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=Db(t);(r.length>0||!t.eventCache.isFullyInitialized()||i&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&r.push(XW(Db(e)))}}function s8(t,e,r,n,i,o){const s=e.eventCache;if(Fb(n,r)!=null)return e;{let a,l;if($e(r))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Cc(e),u=c instanceof _e?c:_e.EMPTY_NODE,d=Ik(n,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const c=Mb(n,Cc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=je(r);if(c===".priority"){X(Wa(r)===1,"Can't have a priority with additional path components");const u=s.getNode();l=e.serverCache.getNode();const d=eD(n,r,u,l);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{const u=Et(r);let d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const h=eD(n,r,s.getNode(),l);h!=null?d=s.getNode().getImmediateChild(c).updateChild(u,h):d=s.getNode().getImmediateChild(c)}else d=Nk(n,c,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),c,d,u,i,o):a=s.getNode()}}return Cp(e,a,s.isFullyInitialized()||$e(r),t.filter.filtersNodes())}}function Lb(t,e,r,n,i,o,s,a){const l=e.serverCache;let c;const u=s?t.filter:t.filter.getIndexedFilter();if($e(r))c=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(r,n);c=u.updateFullNode(l.getNode(),p,null)}else{const p=je(r);if(!l.isCompleteForPath(r)&&Wa(r)>1)return e;const m=Et(r),g=l.getNode().getImmediateChild(p).updateChild(m,n);p===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),p,g,m,o8,null)}const d=ZW(e,c,l.isFullyInitialized()||$e(r),u.filtersNodes()),h=new kk(i,d,o);return s8(t,d,r,i,h,a)}function bT(t,e,r,n,i,o,s){const a=e.eventCache;let l,c;const u=new kk(i,e,o);if($e(r))c=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=Cp(e,c,!0,t.filter.filtersNodes());else{const d=je(r);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),n),l=Cp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Et(r),p=a.getNode().getImmediateChild(d);let m;if($e(h))m=n;else{const y=u.getCompleteChild(d);y!=null?bk(h)===".priority"&&y.getChild(WW(h)).isEmpty()?m=y:m=y.updateChild(h,n):m=_e.EMPTY_NODE}if(p.equals(m))l=e;else{const y=t.filter.updateChild(a.getNode(),d,m,h,u,s);l=Cp(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function tD(t,e){return t.eventCache.isCompleteForChild(e)}function Jie(t,e,r,n,i,o,s){let a=e;return n.foreach((l,c)=>{const u=Ht(r,l);tD(e,je(u))&&(a=bT(t,a,u,c,i,o,s))}),n.foreach((l,c)=>{const u=Ht(r,l);tD(e,je(u))||(a=bT(t,a,u,c,i,o,s))}),a}function rD(t,e,r){return r.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function xT(t,e,r,n,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;$e(r)?c=n:c=new wt(null).setTree(r,n);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),m=rD(t,p,h);l=Lb(t,l,new ut(d),m,i,o,s,a)}}),c.children.inorderTraversal((d,h)=>{const p=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){const m=e.serverCache.getNode().getImmediateChild(d),y=rD(t,m,h);l=Lb(t,l,new ut(d),y,i,o,s,a)}}),l}function Zie(t,e,r,n,i,o,s){if(Fb(i,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if($e(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return Lb(t,e,r,l.getNode().getChild(r),i,o,a,s);if($e(r)){let c=new wt(null);return l.getNode().forEachChild(tc,(u,d)=>{c=c.set(new ut(u),d)}),xT(t,e,r,c,i,o,a,s)}else return e}else{let c=new wt(null);return n.foreach((u,d)=>{const h=Ht(r,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),xT(t,e,r,c,i,o,a,s)}}function eoe(t,e,r,n,i){const o=e.serverCache,s=ZW(e,o.getNode(),o.isFullyInitialized()||$e(r),o.isFiltered());return s8(t,s,r,n,o8,i)}function toe(t,e,r,n,i,o){let s;if(Fb(n,r)!=null)return e;{const a=new kk(n,e,i),l=e.eventCache.getNode();let c;if($e(r)||je(r)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Mb(n,Cc(e));else{const d=e.serverCache.getNode();X(d instanceof _e,"serverChildren would be complete if leaf node"),u=Ik(n,d)}u=u,c=t.filter.updateFullNode(l,u,o)}else{const u=je(r);let d=Nk(n,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,Et(r),a,o):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,_e.EMPTY_NODE,Et(r),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Mb(n,Cc(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Fb(n,et())!=null,Cp(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class roe{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Ek(n.getIndex()),o=yie(n);this.processor_=Kie(o);const s=r.serverCache,a=r.eventCache,l=i.updateFullNode(_e.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(_e.EMPTY_NODE,a.getNode(),null),u=new za(l,s.isFullyInitialized(),i.filtersNodes()),d=new za(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Cw(d,u),this.eventGenerator_=new Tie(this.query_)}get query(){return this.query_}}function noe(t){return t.viewCache_.serverCache.getNode()}function ioe(t){return Db(t.viewCache_)}function ooe(t,e){const r=Cc(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!$e(e)&&!r.getImmediateChild(je(e)).isEmpty())?r.getChild(e):null}function nD(t){return t.eventRegistrations_.length===0}function soe(t,e){t.eventRegistrations_.push(e)}function iD(t,e,r){const n=[];if(r){X(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(r,i);s&&n.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return n}function oD(t,e,r,n){e.type===eo.MERGE&&e.source.queryId!==null&&(X(Cc(t.viewCache_),"We should always have a full cache before handling merges"),X(Db(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=Qie(t.processor_,i,e,r,n);return Yie(t.processor_,o.viewCache),X(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,a8(t,o.changes,o.viewCache.eventCache.getNode(),null)}function aoe(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ft,(o,s)=>{n.push(Vf(o,s))}),r.isFullyInitialized()&&n.push(XW(r.getNode())),a8(t,n,r.getNode(),e)}function a8(t,e,r,n){const i=n?[n]:t.eventRegistrations_;return Pie(t.eventGenerator_,e,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bb;class l8{constructor(){this.views=new Map}}function loe(t){X(!Bb,"__referenceConstructor has already been defined"),Bb=t}function coe(){return X(Bb,"Reference.ts has not been loaded"),Bb}function uoe(t){return t.views.size===0}function Ok(t,e,r,n){const i=e.source.queryId;if(i!==null){const o=t.views.get(i);return X(o!=null,"SyncTree gave us an op for an invalid query."),oD(o,e,r,n)}else{let o=[];for(const s of t.views.values())o=o.concat(oD(s,e,r,n));return o}}function c8(t,e,r,n,i){const o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Mb(r,i?n:null),l=!1;a?l=!0:n instanceof _e?(a=Ik(r,n),l=!1):(a=_e.EMPTY_NODE,l=!1);const c=Cw(new za(a,l,!1),new za(n,i,!1));return new roe(e,c)}return s}function foe(t,e,r,n,i,o){const s=c8(t,e,n,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),soe(s,r),aoe(s,r)}function doe(t,e,r,n){const i=e._queryIdentifier,o=[];let s=[];const a=Ga(t);if(i==="default")for(const[l,c]of t.views.entries())s=s.concat(iD(c,r,n)),nD(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=t.views.get(i);l&&(s=s.concat(iD(l,r,n)),nD(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Ga(t)&&o.push(new(coe())(e._repo,e._path)),{removed:o,events:s}}function u8(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function Ra(t,e){let r=null;for(const n of t.views.values())r=r||ooe(n,e);return r}function f8(t,e){if(e._queryParams.loadsAllData())return Pw(t);{const n=e._queryIdentifier;return t.views.get(n)}}function d8(t,e){return f8(t,e)!=null}function Ga(t){return Pw(t)!=null}function Pw(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ub;function hoe(t){X(!Ub,"__referenceConstructor has already been defined"),Ub=t}function poe(){return X(Ub,"Reference.ts has not been loaded"),Ub}let moe=1;class sD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=zie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function h8(t,e,r,n,i){return Oie(t.pendingWriteTree_,e,r,n,i),i?Bd(t,new Ac(Ck(),e,r)):[]}function yoe(t,e,r,n){Rie(t.pendingWriteTree_,e,r,n);const i=wt.fromObject(r);return Bd(t,new Wf(Ck(),e,i))}function da(t,e,r=!1){const n=jie(t.pendingWriteTree_,e);if($ie(t.pendingWriteTree_,e)){let o=new wt(null);return n.snap!=null?o=o.set(et(),!0):Jr(n.children,s=>{o=o.set(new ut(s),!0)}),Bd(t,new $b(n.path,o,r))}else return[]}function ng(t,e,r){return Bd(t,new Ac(Tk(),e,r))}function goe(t,e,r){const n=wt.fromObject(r);return Bd(t,new Wf(Tk(),e,n))}function voe(t,e){return Bd(t,new _m(Tk(),e))}function boe(t,e,r){const n=jk(t,r);if(n){const i=$k(n),o=i.path,s=i.queryId,a=Sn(o,e),l=new _m(Pk(s),a);return Dk(t,o,l)}else return[]}function Vb(t,e,r,n,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&(e._queryIdentifier==="default"||d8(s,e))){const l=doe(s,e,r,n);uoe(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(h,p)=>Ga(p));if(u&&!d){const h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){const p=woe(h);for(let m=0;m<p.length;++m){const y=p[m],g=y.query,b=g8(t,y);t.listenProvider_.startListening(Pp(g),wm(t,g),b.hashFn,b.onComplete)}}}!d&&c.length>0&&!n&&(u?t.listenProvider_.stopListening(Pp(e),null):c.forEach(h=>{const p=t.queryToTagMap.get(Iw(h));t.listenProvider_.stopListening(Pp(h),p)}))}Soe(t,c)}return a}function p8(t,e,r,n){const i=jk(t,n);if(i!=null){const o=$k(i),s=o.path,a=o.queryId,l=Sn(s,e),c=new Ac(Pk(a),l,r);return Dk(t,s,c)}else return[]}function xoe(t,e,r,n){const i=jk(t,n);if(i){const o=$k(i),s=o.path,a=o.queryId,l=Sn(s,e),c=wt.fromObject(r),u=new Wf(Pk(a),l,c);return Dk(t,s,u)}else return[]}function _T(t,e,r,n=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,p)=>{const m=Sn(h,i);o=o||Ra(p,m),s=s||Ga(p)});let a=t.syncPointTree_.get(i);a?(s=s||Ga(a),o=o||Ra(a,et())):(a=new l8,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=_e.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const y=Ra(m,et());y&&(o=o.updateImmediateChild(p,y))}));const c=d8(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Iw(e);X(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=Eoe();t.queryToTagMap.set(h,p),t.tagToQueryMap.set(p,h)}const u=Tw(t.pendingWriteTree_,i);let d=foe(a,e,r,u,o,l);if(!c&&!s&&!n){const h=f8(a,e);d=d.concat(Aoe(t,e,h))}return d}function Rk(t,e,r){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=Sn(s,e),c=Ra(a,l);if(c)return c});return r8(i,e,o,r,!0)}function _oe(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(c,u)=>{const d=Sn(c,r);n=n||Ra(u,d)});let i=t.syncPointTree_.get(r);i?n=n||Ra(i,et()):(i=new l8,t.syncPointTree_=t.syncPointTree_.set(r,i));const o=n!=null,s=o?new za(n,!0,!1):null,a=Tw(t.pendingWriteTree_,e._path),l=c8(i,e,a,o?s.getNode():_e.EMPTY_NODE,o);return ioe(l)}function Bd(t,e){return m8(e,t.syncPointTree_,null,Tw(t.pendingWriteTree_,et()))}function m8(t,e,r,n){if($e(t.path))return y8(t,e,r,n);{const i=e.get(et());r==null&&i!=null&&(r=Ra(i,et()));let o=[];const s=je(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=r?r.getImmediateChild(s):null,u=n8(n,s);o=o.concat(m8(a,l,c,u))}return i&&(o=o.concat(Ok(i,t,n,r))),o}}function y8(t,e,r,n){const i=e.get(et());r==null&&i!=null&&(r=Ra(i,et()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=r?r.getImmediateChild(s):null,c=n8(n,s),u=t.operationForChild(s);u&&(o=o.concat(y8(u,a,l,c)))}),i&&(o=o.concat(Ok(i,t,n,r))),o}function g8(t,e){const r=e.query,n=wm(t,r);return{hashFn:()=>(noe(e)||_e.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return n?boe(t,r._path,n):voe(t,r._path);{const o=yne(i,r);return Vb(t,r,null,o)}}}}function wm(t,e){const r=Iw(e);return t.queryToTagMap.get(r)}function Iw(t){return t._path.toString()+"$"+t._queryIdentifier}function jk(t,e){return t.tagToQueryMap.get(e)}function $k(t){const e=t.indexOf("$");return X(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ut(t.substr(0,e))}}function Dk(t,e,r){const n=t.syncPointTree_.get(e);X(n,"Missing sync point for query tag that we're tracking");const i=Tw(t.pendingWriteTree_,e);return Ok(n,r,i,null)}function woe(t){return t.fold((e,r,n)=>{if(r&&Ga(r))return[Pw(r)];{let i=[];return r&&(i=u8(r)),Jr(n,(o,s)=>{i=i.concat(s)}),i}})}function Pp(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(poe())(t._repo,t._path):t}function Soe(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const i=Iw(n),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function Eoe(){return moe++}function Aoe(t,e,r){const n=e._path,i=wm(t,e),o=g8(t,r),s=t.listenProvider_.startListening(Pp(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(n);if(i)X(!Ga(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!$e(c)&&u&&Ga(u))return[Pw(u).query];{let h=[];return u&&(h=h.concat(u8(u).map(p=>p.query))),Jr(d,(p,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Pp(u),wm(t,u))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new Mk(r)}node(){return this.node_}}class Fk{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Ht(this.path_,e);return new Fk(this.syncTree_,r)}node(){return Rk(this.syncTree_,this.path_)}}const Coe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},aD=function(t,e,r){if(!t||typeof t!="object")return t;if(X(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Toe(t[".sv"],e,r);if(typeof t[".sv"]=="object")return Poe(t[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Toe=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:X(!1,"Unexpected server value: "+t)}},Poe=function(t,e,r){t.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&X(!1,"Unexpected increment value: "+n);const i=e.node();if(X(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const s=i.getValue();return typeof s!="number"?n:s+n},v8=function(t,e,r,n){return Lk(e,new Fk(r,t),n)},b8=function(t,e,r){return Lk(t,new Mk(e),r)};function Lk(t,e,r){const n=t.getPriority().val(),i=aD(n,e.getImmediateChild(".priority"),r);let o;if(t.isLeafNode()){const s=t,a=aD(s.getValue(),e,r);return a!==s.getValue()||i!==s.getPriority().val()?new Sr(a,lr(i)):t}else{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Sr(i))),s.forEachChild(Ft,(a,l)=>{const c=Lk(l,e.getImmediateChild(a),r);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function Uk(t,e){let r=e instanceof ut?e:new ut(e),n=t,i=je(r);for(;i!==null;){const o=Bf(n.node.children,i)||{children:{},childCount:0};n=new Bk(i,n,o),r=Et(r),i=je(r)}return n}function Ud(t){return t.node.value}function x8(t,e){t.node.value=e,wT(t)}function _8(t){return t.node.childCount>0}function Ioe(t){return Ud(t)===void 0&&!_8(t)}function Nw(t,e){Jr(t.node.children,(r,n)=>{e(new Bk(r,t,n))})}function w8(t,e,r,n){r&&!n&&e(t),Nw(t,i=>{w8(i,e,!0,n)}),r&&n&&e(t)}function Noe(t,e,r){let n=r?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function ig(t){return new ut(t.parent===null?t.name:ig(t.parent)+"/"+t.name)}function wT(t){t.parent!==null&&koe(t.parent,t.name,t)}function koe(t,e,r){const n=Ioe(r),i=Yo(t.node.children,e);n&&i?(delete t.node.children[e],t.node.childCount--,wT(t)):!n&&!i&&(t.node.children[e]=r.node,t.node.childCount++,wT(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ooe=/[\[\].#$\/\u0000-\u001F\u007F]/,Roe=/[\[\].#$\u0000-\u001F\u007F]/,hE=10*1024*1024,kw=function(t){return typeof t=="string"&&t.length!==0&&!Ooe.test(t)},S8=function(t){return typeof t=="string"&&t.length!==0&&!Roe.test(t)},joe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),S8(t)},ST=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!pk(t)||t&&typeof t=="object"&&Yo(t,".sv")},og=function(t,e,r,n){n&&e===void 0||Ow(Zy(t,"value"),e,r)},Ow=function(t,e,r){const n=r instanceof ut?new Qne(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+vl(n));if(typeof e=="function")throw new Error(t+"contains a function "+vl(n)+" with contents = "+e.toString());if(pk(e))throw new Error(t+"contains "+e.toString()+" "+vl(n));if(typeof e=="string"&&e.length>hE/3&&Ew(e)>hE)throw new Error(t+"contains a string greater than "+hE+" utf8 bytes "+vl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Jr(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!kw(s)))throw new Error(t+" contains an invalid key ("+s+") "+vl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xne(n,s),Ow(t,a,n),Jne(n)}),i&&o)throw new Error(t+' contains ".value" child '+vl(n)+" in addition to actual children.")}},$oe=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const o=gm(n);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!kw(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Yne);let i=null;for(r=0;r<e.length;r++){if(n=e[r],i!==null&&Ci(i,n))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},Doe=function(t,e,r,n){if(n&&e===void 0)return;const i=Zy(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Jr(e,(s,a)=>{const l=new ut(s);if(Ow(i,a,Ht(r,l)),bk(l)===".priority"&&!ST(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),$oe(i,o)},Moe=function(t,e,r,n){if(!(n&&r===void 0)&&!kw(r))throw new Error(Zy(t,e)+'was an invalid key = "'+r+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Vk=function(t,e,r,n){if(!(n&&r===void 0)&&!S8(r))throw new Error(Zy(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Foe=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Vk(t,e,r,n)},E8=function(t,e){if(je(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Loe=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!joe(r))throw new Error(Zy(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Boe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rw(t,e){let r=null;for(let n=0;n<e.length;n++){const i=e[n],o=i.getPath();r!==null&&!xk(o,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:o}),r.events.push(i)}r&&t.eventLists_.push(r)}function A8(t,e,r){Rw(t,r),C8(t,n=>xk(n,e))}function Di(t,e,r){Rw(t,r),C8(t,n=>Ci(n,e)||Ci(e,n))}function C8(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const i=t.eventLists_[n];if(i){const o=i.path;e(o)?(Uoe(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function Uoe(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();ec&&Ur("event: "+r.toString()),Ld(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Voe="repo_interrupt",Woe=25;class zoe{constructor(e,r,n,i){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Boe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jb(),this.transactionQueueTree_=new Bk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Goe(t,e,r){if(t.stats_=gk(t.repoInfo_),t.forceRestClient_||xne())t.server_=new Rb(t.repoInfo_,(n,i,o,s)=>{lD(t,n,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>cD(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cr(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new ys(t.repoInfo_,e,(n,i,o,s)=>{lD(t,n,i,o,s)},n=>{cD(t,n)},n=>{qoe(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=Ane(t.repoInfo_,()=>new Cie(t.stats_,t.server_)),t.infoData_=new _ie,t.infoSyncTree_=new sD({startListening:(n,i,o,s)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=ng(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Wk(t,"connected",!1),t.serverSyncTree_=new sD({startListening:(n,i,o,s)=>(t.server_.listen(n,o,i,(a,l)=>{const c=s(a,l);Di(t.eventQueue_,n._path,c)}),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function T8(t){const r=t.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function jw(t){return Coe({timestamp:T8(t)})}function lD(t,e,r,n,i){t.dataUpdateCount++;const o=new ut(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let s=[];if(i)if(n){const l=Pb(r,c=>lr(c));s=xoe(t.serverSyncTree_,o,l,i)}else{const l=lr(r);s=p8(t.serverSyncTree_,o,l,i)}else if(n){const l=Pb(r,c=>lr(c));s=goe(t.serverSyncTree_,o,l)}else{const l=lr(r);s=ng(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Gf(t,o)),Di(t.eventQueue_,a,s)}function cD(t,e){Wk(t,"connected",e),e===!1&&Qoe(t)}function qoe(t,e){Jr(e,(r,n)=>{Wk(t,r,n)})}function Wk(t,e,r){const n=new ut("/.info/"+e),i=lr(r);t.infoData_.updateSnapshot(n,i);const o=ng(t.infoSyncTree_,n,i);Di(t.eventQueue_,n,o)}function zk(t){return t.nextWriteId_++}function Hoe(t,e,r){const n=_oe(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(i=>{const o=lr(i).withIndex(e._queryParams.getIndex());_T(t.serverSyncTree_,e,r,!0);let s;if(e._queryParams.loadsAllData())s=ng(t.serverSyncTree_,e._path,o);else{const a=wm(t.serverSyncTree_,e);s=p8(t.serverSyncTree_,e._path,o,a)}return Di(t.eventQueue_,e._path,s),Vb(t.serverSyncTree_,e,r,null,!0),o},i=>(sg(t,"get for query "+cr(e)+" failed: "+i),Promise.reject(new Error(i))))}function Koe(t,e,r,n,i){sg(t,"set",{path:e.toString(),value:r,priority:n});const o=jw(t),s=lr(r,n),a=Rk(t.serverSyncTree_,e),l=b8(s,a,o),c=zk(t),u=h8(t.serverSyncTree_,e,l,c,!0);Rw(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(h,p)=>{const m=h==="ok";m||Tn("set at "+e+" failed: "+h);const y=da(t.serverSyncTree_,c,!m);Di(t.eventQueue_,e,y),ET(t,i,h,p)});const d=qk(t,e);Gf(t,d),Di(t.eventQueue_,d,[])}function Yoe(t,e,r,n){sg(t,"update",{path:e.toString(),value:r});let i=!0;const o=jw(t),s={};if(Jr(r,(a,l)=>{i=!1,s[a]=v8(Ht(e,a),lr(l),t.serverSyncTree_,o)}),i)Ur("update() called with empty data.  Don't do anything."),ET(t,n,"ok",void 0);else{const a=zk(t),l=yoe(t.serverSyncTree_,e,s,a);Rw(t.eventQueue_,l),t.server_.merge(e.toString(),r,(c,u)=>{const d=c==="ok";d||Tn("update at "+e+" failed: "+c);const h=da(t.serverSyncTree_,a,!d),p=h.length>0?Gf(t,e):e;Di(t.eventQueue_,p,h),ET(t,n,c,u)}),Jr(r,c=>{const u=qk(t,Ht(e,c));Gf(t,u)}),Di(t.eventQueue_,e,[])}}function Qoe(t){sg(t,"onDisconnectEvents");const e=jw(t),r=jb();mT(t.onDisconnect_,et(),(i,o)=>{const s=v8(i,o,t.serverSyncTree_,e);JW(r,i,s)});let n=[];mT(r,et(),(i,o)=>{n=n.concat(ng(t.serverSyncTree_,i,o));const s=qk(t,i);Gf(t,s)}),t.onDisconnect_=jb(),Di(t.eventQueue_,et(),n)}function Xoe(t,e,r){let n;je(e._path)===".info"?n=_T(t.infoSyncTree_,e,r):n=_T(t.serverSyncTree_,e,r),A8(t.eventQueue_,e._path,n)}function uD(t,e,r){let n;je(e._path)===".info"?n=Vb(t.infoSyncTree_,e,r):n=Vb(t.serverSyncTree_,e,r),A8(t.eventQueue_,e._path,n)}function Joe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Voe)}function sg(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ur(r,...e)}function ET(t,e,r,n){e&&Ld(()=>{if(r==="ok")e(null);else{const i=(r||"error").toUpperCase();let o=i;n&&(o+=": "+n);const s=new Error(o);s.code=i,e(s)}})}function P8(t,e,r){return Rk(t.serverSyncTree_,e,r)||_e.EMPTY_NODE}function Gk(t,e=t.transactionQueueTree_){if(e||$w(t,e),Ud(e)){const r=N8(t,e);X(r.length>0,"Sending zero length transaction queue"),r.every(i=>i.status===0)&&Zoe(t,ig(e),r)}else _8(e)&&Nw(e,r=>{Gk(t,r)})}function Zoe(t,e,r){const n=r.map(c=>c.currentWriteId),i=P8(t,e,n);let o=i;const s=i.hash();for(let c=0;c<r.length;c++){const u=r[c];X(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Sn(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{sg(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<r.length;h++)r[h].status=2,u=u.concat(da(t.serverSyncTree_,r[h].currentWriteId)),r[h].onComplete&&d.push(()=>r[h].onComplete(null,!0,r[h].currentOutputSnapshotResolved)),r[h].unwatcher();$w(t,Uk(t.transactionQueueTree_,e)),Gk(t,t.transactionQueueTree_),Di(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Ld(d[h])}else{if(c==="datastale")for(let d=0;d<r.length;d++)r[d].status===3?r[d].status=4:r[d].status=0;else{Tn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<r.length;d++)r[d].status=4,r[d].abortReason=c}Gf(t,e)}},s)}function Gf(t,e){const r=I8(t,e),n=ig(r),i=N8(t,r);return ese(t,i,n),n}function ese(t,e,r){if(e.length===0)return;const n=[];let i=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Sn(r,l.path);let u=!1,d;if(X(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(da(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Woe)u=!0,d="maxretry",i=i.concat(da(t.serverSyncTree_,l.currentWriteId,!0));else{const h=P8(t,l.path,s);l.currentInputSnapshot=h;const p=e[a].update(h.val());if(p!==void 0){Ow("transaction failed: Data returned ",p,l.path);let m=lr(p);typeof p=="object"&&p!=null&&Yo(p,".priority")||(m=m.updatePriority(h.getPriority()));const g=l.currentWriteId,b=jw(t),v=b8(m,h,b);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=v,l.currentWriteId=zk(t),s.splice(s.indexOf(g),1),i=i.concat(h8(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(da(t.serverSyncTree_,g,!0))}else u=!0,d="nodata",i=i.concat(da(t.serverSyncTree_,l.currentWriteId,!0))}Di(t.eventQueue_,r,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(d),!1,null))))}$w(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Ld(n[a]);Gk(t,t.transactionQueueTree_)}function I8(t,e){let r,n=t.transactionQueueTree_;for(r=je(e);r!==null&&Ud(n)===void 0;)n=Uk(n,r),e=Et(e),r=je(e);return n}function N8(t,e){const r=[];return k8(t,e,r),r.sort((n,i)=>n.order-i.order),r}function k8(t,e,r){const n=Ud(e);if(n)for(let i=0;i<n.length;i++)r.push(n[i]);Nw(e,i=>{k8(t,i,r)})}function $w(t,e){const r=Ud(e);if(r){let n=0;for(let i=0;i<r.length;i++)r[i].status!==2&&(r[n]=r[i],n++);r.length=n,x8(e,r.length>0?r:void 0)}Nw(e,n=>{$w(t,n)})}function qk(t,e){const r=ig(I8(t,e)),n=Uk(t.transactionQueueTree_,e);return Noe(n,i=>{pE(t,i)}),pE(t,n),w8(n,i=>{pE(t,i)}),r}function pE(t,e){const r=Ud(e);if(r){const n=[];let i=[],o=-1;for(let s=0;s<r.length;s++)r[s].status===3||(r[s].status===1?(X(o===s-1,"All SENT items should be at beginning of queue."),o=s,r[s].status=3,r[s].abortReason="set"):(X(r[s].status===0,"Unexpected transaction status in abort"),r[s].unwatcher(),i=i.concat(da(t.serverSyncTree_,r[s].currentWriteId,!0)),r[s].onComplete&&n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?x8(e,void 0):r.length=o+1,Di(t.eventQueue_,ig(e),i);for(let s=0;s<n.length;s++)Ld(n[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let i=r[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function rse(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Tn(`Invalid query segment '${r}' in query '${t}'`)}return e}const fD=function(t,e){const r=nse(t),n=r.namespace;r.domain==="firebase.com"&&Es(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||fne();const i=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new jW(r.host,r.secure,n,i,e,"",n!==r.subdomain),path:new ut(r.pathString)}},nse=function(t){let e="",r="",n="",i="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=tse(t.substring(u,d)));const h=rse(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")r="localhost";else if(p.split(".").length<=2)r=p;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),r=e.substring(m+1),o=n}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ise=function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=dD.charAt(r%64),r=Math.floor(r/64);X(r===0,"Cannot push at time == 0");let s=o.join("");if(n){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=dD.charAt(e[i]);return X(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,r,n,i){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+cr(this.snapshot.exportVal())}}class R8{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,r,n,i){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=i}get key(){return $e(this._path)?null:bk(this._path)}get ref(){return new Qo(this._repo,this._path)}get _queryIdentifier(){const e=Q2(this._queryParams),r=mk(e);return r==="{}"?"default":r}get _queryObject(){return Q2(this._queryParams)}isEqual(e){if(e=Xr(e),!(e instanceof Lc))return!1;const r=this._repo===e._repo,n=xk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return r&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Kne(this._path)}}function ose(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Hk(t){let e=null,r=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===tc){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ec)throw new Error(n);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Va)throw new Error(n);if(typeof r!="string")throw new Error(i)}}else if(t.getIndex()===Ft){if(e!=null&&!ST(e)||r!=null&&!ST(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(X(t.getIndex()instanceof Sk||t.getIndex()===QW,"unknown index type."),e!=null&&typeof e=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $8(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Qo extends Lc{constructor(e,r){super(e,r,new Ak,!1)}get parent(){const e=WW(this._path);return e===null?null:new Qo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qf{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new ut(e),n=Hf(this.ref,e);return new qf(this._node.getChild(r),n,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,i)=>e(new qf(i,Hf(this.ref,n),Ft)))}hasChild(e){const r=new ut(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ep(t,e){return t=Xr(t),t._checkNotDeleted("ref"),e!==void 0?Hf(t._root,e):t._root}function Hf(t,e){return t=Xr(t),je(t._path)===null?Foe("child","path",e,!1):Vk("child","path",e,!1),new Qo(t._repo,Ht(t._path,e))}function D8(t,e){t=Xr(t),E8("push",t._path),og("push",e,t._path,!0);const r=T8(t._repo),n=ise(r),i=Hf(t,n),o=Hf(t,n);let s;return e!=null?s=Kk(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function Kk(t,e){t=Xr(t),E8("set",t._path),og("set",e,t._path,!1);const r=new Jy;return Koe(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}function M8(t,e){Doe("update",e,t._path,!1);const r=new Jy;return Yoe(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function F8(t){t=Xr(t);const e=new j8(()=>{}),r=new Dw(e);return Hoe(t._repo,t,r).then(n=>new qf(n,new Qo(t._repo,t._path),t._queryParams.getIndex()))}class Dw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new O8("value",this,new qf(e.snapshotNode,new Qo(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new R8(this,e,r):null}matches(e){return e instanceof Dw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Yk{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new R8(this,e,r):null}createEvent(e,r){X(e.childName!=null,"Child events should have a childName.");const n=Hf(new Qo(r._repo,r._path),e.childName),i=r._queryParams.getIndex();return new O8(e.type,this,new qf(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Yk?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function sse(t,e,r,n,i){let o;if(typeof n=="object"&&(o=void 0,i=n),typeof n=="function"&&(o=n),i&&i.onlyOnce){const l=r,c=(u,d)=>{uD(t._repo,t,a),l(u,d)};c.userCallback=r.userCallback,c.context=r.context,r=c}const s=new j8(r,o||void 0),a=e==="value"?new Dw(s):new Yk(e,s);return Xoe(t._repo,t,a),()=>uD(t._repo,t,a)}function ase(t,e,r,n){return sse(t,"value",e,r,n)}class ag{}class lse extends ag{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){og("endAt",this._value,e._path,!0);const r=bie(e._queryParams,this._value,this._key);if($8(r),Hk(r),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lc(e._repo,e._path,r,e._orderByCalled)}}class cse extends ag{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){og("startAt",this._value,e._path,!0);const r=vie(e._queryParams,this._value,this._key);if($8(r),Hk(r),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Lc(e._repo,e._path,r,e._orderByCalled)}}class use extends ag{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lc(e._repo,e._path,gie(e._queryParams,this._limit),e._orderByCalled)}}function fse(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new use(t)}class dse extends ag{constructor(e){super(),this._path=e}_apply(e){ose(e,"orderByChild");const r=new ut(this._path);if($e(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Sk(r),i=xie(e._queryParams,n);return Hk(i),new Lc(e._repo,e._path,i,!0)}}function hse(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vk("orderByChild","path",t,!1),new dse(t)}class pse extends ag{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){if(og("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lse(this._value,this._key)._apply(new cse(this._value,this._key)._apply(e))}}function mse(t,e){return Moe("equalTo","key",e,!0),new pse(t,e)}function yse(t,...e){let r=Xr(t);for(const n of e)r=n._apply(r);return r}loe(Qo);hoe(Qo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gse="FIREBASE_DATABASE_EMULATOR_HOST",AT={};let vse=!1;function bse(t,e,r,n){t.repoInfo_=new jW(`${e}:${r}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function xse(t,e,r,n,i){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||Es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ur("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=fD(o,i),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[gse]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=fD(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const u=i&&l?new Ju(Ju.OWNER):new wne(t.name,t.options,e);Loe("Invalid Firebase Database URL",s),$e(s.path)||Es("Database URL must point to the root of a Firebase Database (not including a child path).");const d=wse(a,t,u,new _ne(t.name,r));return new Sse(d,t)}function _se(t,e){const r=AT[e];(!r||r[t.key]!==t)&&Es(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Joe(t),delete r[t.key]}function wse(t,e,r,n){let i=AT[e.name];i||(i={},AT[e.name]=i);let o=i[t.toURLString()];return o&&Es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new zoe(t,vse,r,n),i[t.toURLString()]=o,o}class Sse{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Goe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qo(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_se(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Es("Cannot call "+e+" on a deleted database.")}}function Ese(t=hk(),e){const r=fk(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=ak("database");n&&L8(r,...n)}return r}function L8(t,e,r,n={}){t=Xr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Es("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&Es('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ju(Ju.OWNER);else if(n.mockUserToken){const s=typeof n.mockUserToken=="string"?n.mockUserToken:lk(n.mockUserToken,t.app.options.projectId);o=new Ju(s)}bse(i,e,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ase(t){sne(dk),Uf(new wc("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return xse(n,i,o,r)},"PUBLIC").setMultipleInstances(!0)),Lo(R2,j2,t),Lo(R2,j2,"esm2017")}ys.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ys.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Ase();var hD=Object.prototype.toString,B8=function(e){var r=hD.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&hD.call(e.callee)==="[object Function]"),n},mE,pD;function Cse(){if(pD)return mE;pD=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=B8,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var p=h.constructor;return p&&p.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),d=function(h){if(typeof window>"u"||!u)return l(h);try{return l(h)}catch{return!1}};t=function(p){var m=p!==null&&typeof p=="object",y=r.call(p)==="[object Function]",g=n(p),b=m&&r.call(p)==="[object String]",v=[];if(!m&&!y&&!g)throw new TypeError("Object.keys called on a non-object");var x=s&&y;if(b&&p.length>0&&!e.call(p,0))for(var S=0;S<p.length;++S)v.push(String(S));if(g&&p.length>0)for(var _=0;_<p.length;++_)v.push(String(_));else for(var w in p)!(x&&w==="prototype")&&e.call(p,w)&&v.push(String(w));if(o)for(var A=d(p),C=0;C<a.length;++C)!(A&&a[C]==="constructor")&&e.call(p,a[C])&&v.push(a[C]);return v}}return mE=t,mE}var Tse=Array.prototype.slice,Pse=B8,mD=Object.keys,E0=mD?function(e){return mD(e)}:Cse(),yD=Object.keys;E0.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Pse(n)?yD(Tse.call(n)):yD(n)})}else Object.keys=E0;return Object.keys||E0};var Mw=E0,Fw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0},gD=typeof Symbol<"u"&&Symbol,Ise=Fw,rl=function(){return typeof gD!="function"||typeof Symbol!="function"||typeof gD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ise()},Nse="Function.prototype.bind called on incompatible ",yE=Array.prototype.slice,kse=Object.prototype.toString,Ose="[object Function]",Rse=function(e){var r=this;if(typeof r!="function"||kse.call(r)!==Ose)throw new TypeError(Nse+r);for(var n=yE.call(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,n.concat(yE.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,n.concat(yE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},jse=Rse,Qk=Function.prototype.bind||jse,$se=Qk,Xk=$se.call(Function.call,Object.prototype.hasOwnProperty),Ke,Kf=SyntaxError,U8=Function,Zu=TypeError,gE=function(t){try{return U8('"use strict"; return ('+t+").constructor;")()}catch{}},rc=Object.getOwnPropertyDescriptor;if(rc)try{rc({},"")}catch{rc=null}var vE=function(){throw new Zu},Dse=rc?function(){try{return arguments.callee,vE}catch{try{return rc(arguments,"callee").get}catch{return vE}}}():vE,Yc=rl(),Qs=Object.getPrototypeOf||function(t){return t.__proto__},cu={},Mse=typeof Uint8Array>"u"?Ke:Qs(Uint8Array),ef={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Yc?Qs([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":cu,"%AsyncGenerator%":cu,"%AsyncGeneratorFunction%":cu,"%AsyncIteratorPrototype%":cu,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":U8,"%GeneratorFunction%":cu,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yc?Qs(Qs([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Yc?Ke:Qs(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Yc?Ke:Qs(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yc?Qs(""[Symbol.iterator]()):Ke,"%Symbol%":Yc?Symbol:Ke,"%SyntaxError%":Kf,"%ThrowTypeError%":Dse,"%TypedArray%":Mse,"%TypeError%":Zu,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet},Fse=function t(e){var r;if(e==="%AsyncFunction%")r=gE("async function () {}");else if(e==="%GeneratorFunction%")r=gE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=gE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Qs(i.prototype))}return ef[e]=r,r},vD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},lg=Qk,Wb=Xk,Lse=lg.call(Function.call,Array.prototype.concat),Bse=lg.call(Function.apply,Array.prototype.splice),bD=lg.call(Function.call,String.prototype.replace),zb=lg.call(Function.call,String.prototype.slice),Use=lg.call(Function.call,RegExp.prototype.exec),Vse=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Wse=/\\(\\)?/g,zse=function(e){var r=zb(e,0,1),n=zb(e,-1);if(r==="%"&&n!=="%")throw new Kf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Kf("invalid intrinsic syntax, expected opening `%`");var i=[];return bD(e,Vse,function(o,s,a,l){i[i.length]=a?bD(l,Wse,"$1"):s||o}),i},Gse=function(e,r){var n=e,i;if(Wb(vD,n)&&(i=vD[n],n="%"+i[0]+"%"),Wb(ef,n)){var o=ef[n];if(o===cu&&(o=Fse(n)),typeof o>"u"&&!r)throw new Zu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Kf("intrinsic "+e+" does not exist!")},Rs=function(e,r){if(typeof e!="string"||e.length===0)throw new Zu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Zu('"allowMissing" argument must be a boolean');if(Use(/^%?[^%]*%?$/,e)===null)throw new Kf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=zse(e),i=n.length>0?n[0]:"",o=Gse("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Bse(n,Lse([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=zb(h,0,1),m=zb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Kf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Wb(ef,s))a=ef[s];else if(a!=null){if(!(h in a)){if(!r)throw new Zu("base intrinsic for "+e+" exists, but the property is not available.");return}if(rc&&u+1>=n.length){var y=rc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Wb(a,h),a=a[h];d&&!l&&(ef[s]=a)}}return a},qse=Rs,CT=qse("%Object.defineProperty%",!0),TT=function(){if(CT)try{return CT({},"a",{value:1}),!0}catch{return!1}return!1};TT.hasArrayLengthDefineBug=function(){if(!TT())return null;try{return CT([],"length",{value:1}).length!==1}catch{return!0}};var cg=TT,Hse=Mw,Kse=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Yse=Object.prototype.toString,Qse=Array.prototype.concat,V8=Object.defineProperty,Xse=function(t){return typeof t=="function"&&Yse.call(t)==="[object Function]"},Jse=cg(),W8=V8&&Jse,Zse=function(t,e,r,n){e in t&&(!Xse(n)||!n())||(W8?V8(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},z8=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Hse(e);Kse&&(n=Qse.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Zse(t,n[i],e[n[i]],r[n[i]])};z8.supportsDescriptors=!!W8;var Lw=z8,G8={exports:{}};(function(t){var e=Qk,r=Rs,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,d.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(G8);var ug=G8.exports,q8=Rs,H8=ug,eae=H8(q8("String.prototype.indexOf")),fo=function(e,r){var n=q8(e,!!r);return typeof n=="function"&&eae(e,".prototype.")>-1?H8(n):n},tae=Mw,K8=Fw(),Y8=fo,xD=Object,rae=Y8("Array.prototype.push"),_D=Y8("Object.prototype.propertyIsEnumerable"),nae=K8?Object.getOwnPropertySymbols:null,Q8=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=xD(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=xD(arguments[i]),s=tae(o),a=K8&&(Object.getOwnPropertySymbols||nae);if(a)for(var l=a(o),c=0;c<l.length;++c){var u=l[c];_D(o,u)&&rae(s,u)}for(var d=0;d<s.length;++d){var h=s[d];if(_D(o,h)){var p=o[h];n[h]=p}}}return n},bE=Q8,iae=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var s in i)o+=s;return t!==o},oae=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},X8=function(){return!Object.assign||iae()||oae()?bE:Object.assign},sae=Lw,aae=X8,lae=function(){var e=aae();return sae(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},cae=Lw,uae=ug,fae=Q8,J8=X8,dae=lae,hae=uae.apply(J8()),Z8=function(e,r){return hae(Object,arguments)};cae(Z8,{getPolyfill:J8,implementation:fae,shim:dae});var pae=Z8,wD={foo:{}},mae=Object,Bw=function(){return{__proto__:wD}.foo===wD.foo&&!({__proto__:null}instanceof mae)},yae="Function.prototype.bind called on incompatible ",gae=Object.prototype.toString,vae=Math.max,bae="[object Function]",SD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},xae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},_ae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},wae=function(e){var r=this;if(typeof r!="function"||gae.apply(r)!==bae)throw new TypeError(yae+r);for(var n=xae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,SD(n,arguments));return Object(u)===u?u:this}return r.apply(e,SD(n,arguments))},s=vae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+_ae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Sae=wae,ez=Function.prototype.bind||Sae,Eae="Function.prototype.bind called on incompatible ",Aae=Object.prototype.toString,Cae=Math.max,Tae="[object Function]",ED=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Pae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Iae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Nae=function(e){var r=this;if(typeof r!="function"||Aae.apply(r)!==Tae)throw new TypeError(Eae+r);for(var n=Pae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,ED(n,arguments));return Object(u)===u?u:this}return r.apply(e,ED(n,arguments))},s=Cae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Iae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},kae=Nae,Oae=Function.prototype.bind||kae,Rae=Function.prototype.call,jae=Object.prototype.hasOwnProperty,$ae=Oae,Uw=$ae.call(Rae,jae),Fe,Yf=SyntaxError,tz=Function,tf=TypeError,xE=function(t){try{return tz('"use strict"; return ('+t+").constructor;")()}catch{}},nc=Object.getOwnPropertyDescriptor;if(nc)try{nc({},"")}catch{nc=null}var _E=function(){throw new tf},Dae=nc?function(){try{return arguments.callee,_E}catch{try{return nc(arguments,"callee").get}catch{return _E}}}():_E,Qc=rl(),Mae=Bw(),br=Object.getPrototypeOf||(Mae?function(t){return t.__proto__}:null),uu={},Fae=typeof Uint8Array>"u"||!br?Fe:br(Uint8Array),ic={"%AggregateError%":typeof AggregateError>"u"?Fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Fe:ArrayBuffer,"%ArrayIteratorPrototype%":Qc&&br?br([][Symbol.iterator]()):Fe,"%AsyncFromSyncIteratorPrototype%":Fe,"%AsyncFunction%":uu,"%AsyncGenerator%":uu,"%AsyncGeneratorFunction%":uu,"%AsyncIteratorPrototype%":uu,"%Atomics%":typeof Atomics>"u"?Fe:Atomics,"%BigInt%":typeof BigInt>"u"?Fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Fe:FinalizationRegistry,"%Function%":tz,"%GeneratorFunction%":uu,"%Int8Array%":typeof Int8Array>"u"?Fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qc&&br?br(br([][Symbol.iterator]())):Fe,"%JSON%":typeof JSON=="object"?JSON:Fe,"%Map%":typeof Map>"u"?Fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Qc||!br?Fe:br(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Fe:Promise,"%Proxy%":typeof Proxy>"u"?Fe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Qc||!br?Fe:br(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qc&&br?br(""[Symbol.iterator]()):Fe,"%Symbol%":Qc?Symbol:Fe,"%SyntaxError%":Yf,"%ThrowTypeError%":Dae,"%TypedArray%":Fae,"%TypeError%":tf,"%Uint8Array%":typeof Uint8Array>"u"?Fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Fe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Fe:WeakSet};if(br)try{null.error}catch(t){var Lae=br(br(t));ic["%Error.prototype%"]=Lae}var Bae=function t(e){var r;if(e==="%AsyncFunction%")r=xE("async function () {}");else if(e==="%GeneratorFunction%")r=xE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=xE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&br&&(r=br(i.prototype))}return ic[e]=r,r},AD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fg=ez,Gb=Uw,Uae=fg.call(Function.call,Array.prototype.concat),Vae=fg.call(Function.apply,Array.prototype.splice),CD=fg.call(Function.call,String.prototype.replace),qb=fg.call(Function.call,String.prototype.slice),Wae=fg.call(Function.call,RegExp.prototype.exec),zae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Gae=/\\(\\)?/g,qae=function(e){var r=qb(e,0,1),n=qb(e,-1);if(r==="%"&&n!=="%")throw new Yf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Yf("invalid intrinsic syntax, expected opening `%`");var i=[];return CD(e,zae,function(o,s,a,l){i[i.length]=a?CD(l,Gae,"$1"):s||o}),i},Hae=function(e,r){var n=e,i;if(Gb(AD,n)&&(i=AD[n],n="%"+i[0]+"%"),Gb(ic,n)){var o=ic[n];if(o===uu&&(o=Bae(n)),typeof o>"u"&&!r)throw new tf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Yf("intrinsic "+e+" does not exist!")},Vw=function(e,r){if(typeof e!="string"||e.length===0)throw new tf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new tf('"allowMissing" argument must be a boolean');if(Wae(/^%?[^%]*%?$/,e)===null)throw new Yf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=qae(e),i=n.length>0?n[0]:"",o=Hae("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Vae(n,Uae([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=qb(h,0,1),m=qb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Yf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Gb(ic,s))a=ic[s];else if(a!=null){if(!(h in a)){if(!r)throw new tf("base intrinsic for "+e+" exists, but the property is not available.");return}if(nc&&u+1>=n.length){var y=nc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Gb(a,h),a=a[h];d&&!l&&(ic[s]=a)}}return a},rz={exports:{}},Kae="Function.prototype.bind called on incompatible ",Yae=Object.prototype.toString,Qae=Math.max,Xae="[object Function]",TD=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Jae=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Zae=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},ele=function(e){var r=this;if(typeof r!="function"||Yae.apply(r)!==Xae)throw new TypeError(Kae+r);for(var n=Jae(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,TD(n,arguments));return Object(u)===u?u:this}return r.apply(e,TD(n,arguments))},s=Qae(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Zae(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},tle=ele,rle=Function.prototype.bind||tle,Le,Qf=SyntaxError,nz=Function,rf=TypeError,wE=function(t){try{return nz('"use strict"; return ('+t+").constructor;")()}catch{}},oc=Object.getOwnPropertyDescriptor;if(oc)try{oc({},"")}catch{oc=null}var SE=function(){throw new rf},nle=oc?function(){try{return arguments.callee,SE}catch{try{return oc(arguments,"callee").get}catch{return SE}}}():SE,Xc=rl(),ile=Bw(),xr=Object.getPrototypeOf||(ile?function(t){return t.__proto__}:null),fu={},ole=typeof Uint8Array>"u"||!xr?Le:xr(Uint8Array),sc={"%AggregateError%":typeof AggregateError>"u"?Le:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Le:ArrayBuffer,"%ArrayIteratorPrototype%":Xc&&xr?xr([][Symbol.iterator]()):Le,"%AsyncFromSyncIteratorPrototype%":Le,"%AsyncFunction%":fu,"%AsyncGenerator%":fu,"%AsyncGeneratorFunction%":fu,"%AsyncIteratorPrototype%":fu,"%Atomics%":typeof Atomics>"u"?Le:Atomics,"%BigInt%":typeof BigInt>"u"?Le:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Le:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Le:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Le:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Le:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Le:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Le:FinalizationRegistry,"%Function%":nz,"%GeneratorFunction%":fu,"%Int8Array%":typeof Int8Array>"u"?Le:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Le:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Le:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xc&&xr?xr(xr([][Symbol.iterator]())):Le,"%JSON%":typeof JSON=="object"?JSON:Le,"%Map%":typeof Map>"u"?Le:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xc||!xr?Le:xr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Le:Promise,"%Proxy%":typeof Proxy>"u"?Le:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Le:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Le:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xc||!xr?Le:xr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Le:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xc&&xr?xr(""[Symbol.iterator]()):Le,"%Symbol%":Xc?Symbol:Le,"%SyntaxError%":Qf,"%ThrowTypeError%":nle,"%TypedArray%":ole,"%TypeError%":rf,"%Uint8Array%":typeof Uint8Array>"u"?Le:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Le:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Le:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Le:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Le:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Le:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Le:WeakSet};if(xr)try{null.error}catch(t){var sle=xr(xr(t));sc["%Error.prototype%"]=sle}var ale=function t(e){var r;if(e==="%AsyncFunction%")r=wE("async function () {}");else if(e==="%GeneratorFunction%")r=wE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=wE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&xr&&(r=xr(i.prototype))}return sc[e]=r,r},PD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},dg=rle,Hb=Uw,lle=dg.call(Function.call,Array.prototype.concat),cle=dg.call(Function.apply,Array.prototype.splice),ID=dg.call(Function.call,String.prototype.replace),Kb=dg.call(Function.call,String.prototype.slice),ule=dg.call(Function.call,RegExp.prototype.exec),fle=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,dle=/\\(\\)?/g,hle=function(e){var r=Kb(e,0,1),n=Kb(e,-1);if(r==="%"&&n!=="%")throw new Qf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Qf("invalid intrinsic syntax, expected opening `%`");var i=[];return ID(e,fle,function(o,s,a,l){i[i.length]=a?ID(l,dle,"$1"):s||o}),i},ple=function(e,r){var n=e,i;if(Hb(PD,n)&&(i=PD[n],n="%"+i[0]+"%"),Hb(sc,n)){var o=sc[n];if(o===fu&&(o=ale(n)),typeof o>"u"&&!r)throw new rf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Qf("intrinsic "+e+" does not exist!")},mle=function(e,r){if(typeof e!="string"||e.length===0)throw new rf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new rf('"allowMissing" argument must be a boolean');if(ule(/^%?[^%]*%?$/,e)===null)throw new Qf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=hle(e),i=n.length>0?n[0]:"",o=ple("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],cle(n,lle([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=Kb(h,0,1),m=Kb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Qf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Hb(sc,s))a=sc[s];else if(a!=null){if(!(h in a)){if(!r)throw new rf("base intrinsic for "+e+" exists, but the property is not available.");return}if(oc&&u+1>=n.length){var y=oc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Hb(a,h),a=a[h];d&&!l&&(sc[s]=a)}}return a},yle="Function.prototype.bind called on incompatible ",gle=Object.prototype.toString,vle=Math.max,ble="[object Function]",ND=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},xle=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},_le=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},wle=function(e){var r=this;if(typeof r!="function"||gle.apply(r)!==ble)throw new TypeError(yle+r);for(var n=xle(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,ND(n,arguments));return Object(u)===u?u:this}return r.apply(e,ND(n,arguments))},s=vle(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+_le(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Sle=wle,Ele=Function.prototype.bind||Sle,Be,Xf=SyntaxError,iz=Function,nf=TypeError,EE=function(t){try{return iz('"use strict"; return ('+t+").constructor;")()}catch{}},ac=Object.getOwnPropertyDescriptor;if(ac)try{ac({},"")}catch{ac=null}var AE=function(){throw new nf},Ale=ac?function(){try{return arguments.callee,AE}catch{try{return ac(arguments,"callee").get}catch{return AE}}}():AE,Jc=rl(),Cle=Bw(),_r=Object.getPrototypeOf||(Cle?function(t){return t.__proto__}:null),du={},Tle=typeof Uint8Array>"u"||!_r?Be:_r(Uint8Array),lc={"%AggregateError%":typeof AggregateError>"u"?Be:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Be:ArrayBuffer,"%ArrayIteratorPrototype%":Jc&&_r?_r([][Symbol.iterator]()):Be,"%AsyncFromSyncIteratorPrototype%":Be,"%AsyncFunction%":du,"%AsyncGenerator%":du,"%AsyncGeneratorFunction%":du,"%AsyncIteratorPrototype%":du,"%Atomics%":typeof Atomics>"u"?Be:Atomics,"%BigInt%":typeof BigInt>"u"?Be:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Be:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Be:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Be:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Be:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Be:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Be:FinalizationRegistry,"%Function%":iz,"%GeneratorFunction%":du,"%Int8Array%":typeof Int8Array>"u"?Be:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Be:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Be:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jc&&_r?_r(_r([][Symbol.iterator]())):Be,"%JSON%":typeof JSON=="object"?JSON:Be,"%Map%":typeof Map>"u"?Be:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jc||!_r?Be:_r(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Be:Promise,"%Proxy%":typeof Proxy>"u"?Be:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Be:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Be:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jc||!_r?Be:_r(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Be:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jc&&_r?_r(""[Symbol.iterator]()):Be,"%Symbol%":Jc?Symbol:Be,"%SyntaxError%":Xf,"%ThrowTypeError%":Ale,"%TypedArray%":Tle,"%TypeError%":nf,"%Uint8Array%":typeof Uint8Array>"u"?Be:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Be:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Be:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Be:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Be:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Be:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Be:WeakSet};if(_r)try{null.error}catch(t){var Ple=_r(_r(t));lc["%Error.prototype%"]=Ple}var Ile=function t(e){var r;if(e==="%AsyncFunction%")r=EE("async function () {}");else if(e==="%GeneratorFunction%")r=EE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=EE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&_r&&(r=_r(i.prototype))}return lc[e]=r,r},kD={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hg=Ele,Yb=Uw,Nle=hg.call(Function.call,Array.prototype.concat),kle=hg.call(Function.apply,Array.prototype.splice),OD=hg.call(Function.call,String.prototype.replace),Qb=hg.call(Function.call,String.prototype.slice),Ole=hg.call(Function.call,RegExp.prototype.exec),Rle=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,jle=/\\(\\)?/g,$le=function(e){var r=Qb(e,0,1),n=Qb(e,-1);if(r==="%"&&n!=="%")throw new Xf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Xf("invalid intrinsic syntax, expected opening `%`");var i=[];return OD(e,Rle,function(o,s,a,l){i[i.length]=a?OD(l,jle,"$1"):s||o}),i},Dle=function(e,r){var n=e,i;if(Yb(kD,n)&&(i=kD[n],n="%"+i[0]+"%"),Yb(lc,n)){var o=lc[n];if(o===du&&(o=Ile(n)),typeof o>"u"&&!r)throw new nf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Xf("intrinsic "+e+" does not exist!")},Mle=function(e,r){if(typeof e!="string"||e.length===0)throw new nf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new nf('"allowMissing" argument must be a boolean');if(Ole(/^%?[^%]*%?$/,e)===null)throw new Xf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=$le(e),i=n.length>0?n[0]:"",o=Dle("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],kle(n,Nle([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=Qb(h,0,1),m=Qb(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Xf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",Yb(lc,s))a=lc[s];else if(a!=null){if(!(h in a)){if(!r)throw new nf("base intrinsic for "+e+" exists, but the property is not available.");return}if(ac&&u+1>=n.length){var y=ac(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Yb(a,h),a=a[h];d&&!l&&(lc[s]=a)}}return a},Fle=Rs,A0=Fle("%Object.getOwnPropertyDescriptor%",!0);if(A0)try{A0([],"length")}catch{A0=null}var Ww=A0,Lle=cg(),Jk=Mle,Ip=Lle&&Jk("%Object.defineProperty%",!0);if(Ip)try{Ip({},"a",{value:1})}catch{Ip=!1}var Ble=Jk("%SyntaxError%"),Zc=Jk("%TypeError%"),RD=Ww,Zk=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Zc("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Zc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Zc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Zc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Zc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Zc("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!RD&&RD(e,r);if(Ip)Ip(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(a||!i&&!o&&!s)e[r]=n;else throw new Ble("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},oz=mle,jD=Zk,Ule=cg(),$D=Ww,DD=oz("%TypeError%"),Vle=oz("%Math.floor%"),sz=function(e,r){if(typeof e!="function")throw new DD("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Vle(r)!==r)throw new DD("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&$D){var s=$D(e,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(Ule?jD(e,"length",r,!0,!0):jD(e,"length",r)),e};(function(t){var e=ez,r=Vw,n=sz,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(rz);var Wle=rz.exports,az=Vw,lz=Wle,zle=lz(az("String.prototype.indexOf")),Gle=function(e,r){var n=az(e,!!r);return typeof n=="function"&&zle(e,".prototype.")>-1?lz(n):n},qle=Mw,Hle=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Kle=Object.prototype.toString,Yle=Array.prototype.concat,MD=Zk,Qle=function(t){return typeof t=="function"&&Kle.call(t)==="[object Function]"},cz=cg(),Xle=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Qle(n)||!n())return}cz?MD(t,e,r,!0):MD(t,e,r)},uz=function(t,e){var r=arguments.length>2?arguments[2]:{},n=qle(e);Hle&&(n=Yle.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Xle(t,n[i],e[n[i]],r[n[i]])};uz.supportsDescriptors=!!cz;var eO=uz,Sm=function(){return typeof(function(){}).name=="string"},Np=Object.getOwnPropertyDescriptor;if(Np)try{Np([],"length")}catch{Np=null}Sm.functionsHaveConfigurableNames=function(){if(!Sm()||!Np)return!1;var e=Np(function(){},"name");return!!e&&!!e.configurable};var Jle=Function.prototype.bind;Sm.boundFunctionsHaveNames=function(){return Sm()&&typeof Jle=="function"&&(function(){}).bind().name!==""};var Zle=Sm,FD=Zk,ece=cg(),tce=Zle.functionsHaveConfigurableNames(),rce=TypeError,nce=function(e,r){if(typeof e!="function")throw new rce("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||tce)&&(ece?FD(e,"name",r,!0,!0):FD(e,"name",r)),e},ice=nce,oce=Object,sce=TypeError,fz=ice(function(){if(this!=null&&this!==oce(this))throw new sce("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),ace=fz,lce=eO.supportsDescriptors,cce=Object.getOwnPropertyDescriptor,dz=function(){if(lce&&/a/mig.flags==="gim"){var e=cce(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return ace},uce=eO.supportsDescriptors,fce=dz,dce=Object.getOwnPropertyDescriptor,hce=Object.defineProperty,pce=TypeError,LD=Object.getPrototypeOf,mce=/a/,yce=function(){if(!uce||!LD)throw new pce("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=fce(),r=LD(mce),n=dce(r,"flags");return(!n||n.get!==e)&&hce(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},gce=eO,vce=ug,bce=fz,hz=dz,xce=yce,pz=vce(hz());gce(pz,{getPolyfill:hz,implementation:bce,shim:xce});var _ce=pz,C0={exports:{}},wce=Fw,nl=function(){return wce()&&!!Symbol.toStringTag},Sce=nl(),Ece=fo,PT=Ece("Object.prototype.toString"),zw=function(e){return Sce&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:PT(e)==="[object Arguments]"},mz=function(e){return zw(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&PT(e)!=="[object Array]"&&PT(e.callee)==="[object Function]"},Ace=function(){return zw(arguments)}();zw.isLegacyArguments=mz;var yz=Ace?zw:mz;const Cce={},Tce=Object.freeze(Object.defineProperty({__proto__:null,default:Cce},Symbol.toStringTag,{value:"Module"})),Pce=SJ(Tce);var tO=typeof Map=="function"&&Map.prototype,CE=Object.getOwnPropertyDescriptor&&tO?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xb=tO&&CE&&typeof CE.get=="function"?CE.get:null,Ice=tO&&Map.prototype.forEach,rO=typeof Set=="function"&&Set.prototype,TE=Object.getOwnPropertyDescriptor&&rO?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Jb=rO&&TE&&typeof TE.get=="function"?TE.get:null,Nce=rO&&Set.prototype.forEach,kce=typeof WeakMap=="function"&&WeakMap.prototype,kp=kce?WeakMap.prototype.has:null,Oce=typeof WeakSet=="function"&&WeakSet.prototype,Op=Oce?WeakSet.prototype.has:null,Rce=typeof WeakRef=="function"&&WeakRef.prototype,BD=Rce?WeakRef.prototype.deref:null,jce=Boolean.prototype.valueOf,$ce=Object.prototype.toString,Dce=Function.prototype.toString,Mce=String.prototype.match,nO=String.prototype.slice,ha=String.prototype.replace,Fce=String.prototype.toUpperCase,UD=String.prototype.toLowerCase,gz=RegExp.prototype.test,VD=Array.prototype.concat,wo=Array.prototype.join,Lce=Array.prototype.slice,WD=Math.floor,IT=typeof BigInt=="function"?BigInt.prototype.valueOf:null,PE=Object.getOwnPropertySymbols,NT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",mn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Jf||"symbol")?Symbol.toStringTag:null,vz=Object.prototype.propertyIsEnumerable,zD=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function GD(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||gz.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-WD(-t):WD(t);if(n!==t){var i=String(n),o=nO.call(e,i.length+1);return ha.call(i,r,"$&_")+"."+ha.call(ha.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ha.call(e,r,"$&_")}var kT=Pce,qD=kT.custom,HD=xz(qD)?qD:null,Bce=function t(e,r,n,i){var o=r||{};if(Xs(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Xs(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Xs(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Xs(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Xs(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return wz(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?GD(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?GD(e,c):c}var u=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return OT(e)?"[Array]":"[Object]";var d=iue(o,n);if(typeof i>"u")i=[];else if(_z(i,e)>=0)return"[Circular]";function h(N,j,L){if(j&&(i=Lce.call(i),i.push(j)),L){var U={depth:o.depth};return Xs(o,"quoteStyle")&&(U.quoteStyle=o.quoteStyle),t(N,U,n+1,i)}return t(N,o,n+1,i)}if(typeof e=="function"&&!KD(e)){var p=Yce(e),m=Sv(e,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+wo.call(m,", ")+" }":"")}if(xz(e)){var y=Jf?ha.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):NT.call(e);return typeof e=="object"&&!Jf?Th(y):y}if(tue(e)){for(var g="<"+UD.call(String(e.nodeName)),b=e.attributes||[],v=0;v<b.length;v++)g+=" "+b[v].name+"="+bz(Uce(b[v].value),"double",o);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+UD.call(String(e.nodeName))+">",g}if(OT(e)){if(e.length===0)return"[]";var x=Sv(e,h);return d&&!nue(x)?"["+RT(x,d)+"]":"[ "+wo.call(x,", ")+" ]"}if(Wce(e)){var S=Sv(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!vz.call(e,"cause")?"{ ["+String(e)+"] "+wo.call(VD.call("[cause]: "+h(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+wo.call(S,", ")+" }"}if(typeof e=="object"&&s){if(HD&&typeof e[HD]=="function"&&kT)return kT(e,{depth:u-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Qce(e)){var _=[];return Ice.call(e,function(N,j){_.push(h(j,e,!0)+" => "+h(N,e))}),YD("Map",Xb.call(e),_,d)}if(Zce(e)){var w=[];return Nce.call(e,function(N){w.push(h(N,e))}),YD("Set",Jb.call(e),w,d)}if(Xce(e))return IE("WeakMap");if(eue(e))return IE("WeakSet");if(Jce(e))return IE("WeakRef");if(Gce(e))return Th(h(Number(e)));if(Hce(e))return Th(h(IT.call(e)));if(qce(e))return Th(jce.call(e));if(zce(e))return Th(h(String(e)));if(!Vce(e)&&!KD(e)){var A=Sv(e,h),C=zD?zD(e)===Object.prototype:e instanceof Object||e.constructor===Object,I=e instanceof Object?"":"null prototype",T=!C&&mn&&Object(e)===e&&mn in e?nO.call(il(e),8,-1):I?"Object":"",P=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",O=P+(T||I?"["+wo.call(VD.call([],T||[],I||[]),": ")+"] ":"");return A.length===0?O+"{}":d?O+"{"+RT(A,d)+"}":O+"{ "+wo.call(A,", ")+" }"}return String(e)};function bz(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Uce(t){return ha.call(String(t),/"/g,"&quot;")}function OT(t){return il(t)==="[object Array]"&&(!mn||!(typeof t=="object"&&mn in t))}function Vce(t){return il(t)==="[object Date]"&&(!mn||!(typeof t=="object"&&mn in t))}function KD(t){return il(t)==="[object RegExp]"&&(!mn||!(typeof t=="object"&&mn in t))}function Wce(t){return il(t)==="[object Error]"&&(!mn||!(typeof t=="object"&&mn in t))}function zce(t){return il(t)==="[object String]"&&(!mn||!(typeof t=="object"&&mn in t))}function Gce(t){return il(t)==="[object Number]"&&(!mn||!(typeof t=="object"&&mn in t))}function qce(t){return il(t)==="[object Boolean]"&&(!mn||!(typeof t=="object"&&mn in t))}function xz(t){if(Jf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!NT)return!1;try{return NT.call(t),!0}catch{}return!1}function Hce(t){if(!t||typeof t!="object"||!IT)return!1;try{return IT.call(t),!0}catch{}return!1}var Kce=Object.prototype.hasOwnProperty||function(t){return t in this};function Xs(t,e){return Kce.call(t,e)}function il(t){return $ce.call(t)}function Yce(t){if(t.name)return t.name;var e=Mce.call(Dce.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function _z(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Qce(t){if(!Xb||!t||typeof t!="object")return!1;try{Xb.call(t);try{Jb.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Xce(t){if(!kp||!t||typeof t!="object")return!1;try{kp.call(t,kp);try{Op.call(t,Op)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Jce(t){if(!BD||!t||typeof t!="object")return!1;try{return BD.call(t),!0}catch{}return!1}function Zce(t){if(!Jb||!t||typeof t!="object")return!1;try{Jb.call(t);try{Xb.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function eue(t){if(!Op||!t||typeof t!="object")return!1;try{Op.call(t,Op);try{kp.call(t,kp)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function tue(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function wz(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return wz(nO.call(t,0,e.maxStringLength),e)+n}var i=ha.call(ha.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rue);return bz(i,"single",e)}function rue(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Fce.call(e.toString(16))}function Th(t){return"Object("+t+")"}function IE(t){return t+" { ? }"}function YD(t,e,r,n){var i=n?RT(r,n):wo.call(r,", ");return t+" ("+e+") {"+i+"}"}function nue(t){for(var e=0;e<t.length;e++)if(_z(t[e],`
`)>=0)return!1;return!0}function iue(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=wo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:wo.call(Array(e+1),r)}}function RT(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+wo.call(t,","+r)+`
`+e.prev}function Sv(t,e){var r=OT(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Xs(t,i)?e(t[i],t):""}var o=typeof PE=="function"?PE(t):[],s;if(Jf){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)Xs(t,l)&&(r&&String(Number(l))===l&&l<t.length||Jf&&s["$"+l]instanceof Symbol||(gz.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof PE=="function")for(var c=0;c<o.length;c++)vz.call(t,o[c])&&n.push("["+e(o[c])+"]: "+e(t[o[c]],t));return n}var iO=Rs,Vd=fo,oue=Bce,sue=iO("%TypeError%"),Ev=iO("%WeakMap%",!0),Av=iO("%Map%",!0),aue=Vd("WeakMap.prototype.get",!0),lue=Vd("WeakMap.prototype.set",!0),cue=Vd("WeakMap.prototype.has",!0),uue=Vd("Map.prototype.get",!0),fue=Vd("Map.prototype.set",!0),due=Vd("Map.prototype.has",!0),oO=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},hue=function(t,e){var r=oO(t,e);return r&&r.value},pue=function(t,e,r){var n=oO(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},mue=function(t,e){return!!oO(t,e)},Sz=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new sue("Side channel does not contain "+oue(o))},get:function(o){if(Ev&&o&&(typeof o=="object"||typeof o=="function")){if(e)return aue(e,o)}else if(Av){if(r)return uue(r,o)}else if(n)return hue(n,o)},has:function(o){if(Ev&&o&&(typeof o=="object"||typeof o=="function")){if(e)return cue(e,o)}else if(Av){if(r)return due(r,o)}else if(n)return mue(n,o);return!1},set:function(o,s){Ev&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Ev),lue(e,o,s)):Av?(r||(r=new Av),fue(r,o,s)):(n||(n={key:{},next:null}),pue(n,o,s))}};return i},yue=Rs,gue=Xk,Ph=Sz(),es=yue("%TypeError%"),sO={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");if(Ph.assert(t),!sO.has(t,e))throw new es("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");var r=Ph.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");var r=Ph.get(t);return!!r&&gue(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new es("`O` is not an object");if(typeof e!="string")throw new es("`slot` must be a string");var n=Ph.get(t);n||(n={},Ph.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(sO);var vue=sO,Ih=vue,bue=SyntaxError,QD=typeof StopIteration=="object"?StopIteration:null,xue=function(e){if(!QD)throw new bue("this environment lacks StopIteration");Ih.set(e,"[[Done]]",!1);var r={next:function(){var i=Ih.get(this,"[[Iterator]]"),o=Ih.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(Ih.set(i,"[[Done]]",!0),s!==QD)throw s;return{done:!0,value:void 0}}}};return Ih.set(r,"[[Iterator]]",e),r},_ue={}.toString,Ez=Array.isArray||function(t){return _ue.call(t)=="[object Array]"},wue=String.prototype.valueOf,Sue=function(e){try{return wue.call(e),!0}catch{return!1}},Eue=Object.prototype.toString,Aue="[object String]",Cue=nl(),Az=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:Cue?Sue(e):Eue.call(e)===Aue},aO=typeof Map=="function"&&Map.prototype?Map:null,Tue=typeof Set=="function"&&Set.prototype?Set:null,Zb;aO||(Zb=function(e){return!1});var Cz=aO?Map.prototype.has:null,XD=Tue?Set.prototype.has:null;!Zb&&!Cz&&(Zb=function(e){return!1});var Tz=Zb||function(e){if(!e||typeof e!="object")return!1;try{if(Cz.call(e),XD)try{XD.call(e)}catch{return!0}return e instanceof aO}catch{}return!1},Pue=typeof Map=="function"&&Map.prototype?Map:null,lO=typeof Set=="function"&&Set.prototype?Set:null,ex;lO||(ex=function(e){return!1});var JD=Pue?Map.prototype.has:null,Pz=lO?Set.prototype.has:null;!ex&&!Pz&&(ex=function(e){return!1});var Iz=ex||function(e){if(!e||typeof e!="object")return!1;try{if(Pz.call(e),JD)try{JD.call(e)}catch{return!0}return e instanceof lO}catch{}return!1},ZD=yz,eM=xue;if(rl()||Fw()){var NE=Symbol.iterator;C0.exports=function(e){if(e!=null&&typeof e[NE]<"u")return e[NE]();if(ZD(e))return Array.prototype[NE].call(e)}}else{var Iue=Ez,Nue=Az,tM=Rs,kue=tM("%Map%",!0),Oue=tM("%Set%",!0),Ui=fo,rM=Ui("Array.prototype.push"),nM=Ui("String.prototype.charCodeAt"),Rue=Ui("String.prototype.slice"),jue=function(e,r){var n=e.length;if(r+1>=n)return r+1;var i=nM(e,r);if(i<55296||i>56319)return r+1;var o=nM(e,r+1);return o<56320||o>57343?r+1:r+2},kE=function(e){var r=0;return{next:function(){var i=r>=e.length,o;return i||(o=e[r],r+=1),{done:i,value:o}}}},iM=function(e,r){if(Iue(e)||ZD(e))return kE(e);if(Nue(e)){var n=0;return{next:function(){var o=jue(e,n),s=Rue(e,n,o);return n=o,{done:o>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!kue&&!Oue)C0.exports=function(e){if(e!=null)return iM(e,!0)};else{var $ue=Tz,Due=Iz,oM=Ui("Map.prototype.forEach",!0),sM=Ui("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var aM=Ui("Map.prototype.iterator",!0),lM=Ui("Set.prototype.iterator",!0);var cM=Ui("Map.prototype.@@iterator",!0)||Ui("Map.prototype._es6-shim iterator_",!0),uM=Ui("Set.prototype.@@iterator",!0)||Ui("Set.prototype._es6-shim iterator_",!0),Mue=function(e){if($ue(e)){if(aM)return eM(aM(e));if(cM)return cM(e);if(oM){var r=[];return oM(e,function(i,o){rM(r,[o,i])}),kE(r)}}if(Due(e)){if(lM)return eM(lM(e));if(uM)return uM(e);if(sM){var n=[];return sM(e,function(i){rM(n,i)}),kE(n)}}};C0.exports=function(e){return Mue(e)||iM(e)}}}var Fue=C0.exports,fM=function(t){return t!==t},Nz=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||fM(e)&&fM(r))},Lue=Nz,kz=function(){return typeof Object.is=="function"?Object.is:Lue},Bue=kz,Uue=Lw,Vue=function(){var e=Bue();return Uue(Object,{is:e},{is:function(){return Object.is!==e}}),e},Wue=Lw,zue=ug,Gue=Nz,Oz=kz,que=Vue,Rz=zue(Oz(),Object);Wue(Rz,{getPolyfill:Oz,implementation:Gue,shim:que});var Hue=Rz,jz={exports:{}},Kue="Function.prototype.bind called on incompatible ",OE=Array.prototype.slice,Yue=Object.prototype.toString,Que="[object Function]",Xue=function(e){var r=this;if(typeof r!="function"||Yue.call(r)!==Que)throw new TypeError(Kue+r);for(var n=OE.call(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,n.concat(OE.call(arguments)));return Object(u)===u?u:this}else return r.apply(e,n.concat(OE.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Jue=Xue,$z=Function.prototype.bind||Jue,Ye,Zf=SyntaxError,Dz=Function,of=TypeError,RE=function(t){try{return Dz('"use strict"; return ('+t+").constructor;")()}catch{}},cc=Object.getOwnPropertyDescriptor;if(cc)try{cc({},"")}catch{cc=null}var jE=function(){throw new of},Zue=cc?function(){try{return arguments.callee,jE}catch{try{return cc(arguments,"callee").get}catch{return jE}}}():jE,eu=rl(),Js=Object.getPrototypeOf||function(t){return t.__proto__},hu={},efe=typeof Uint8Array>"u"?Ye:Js(Uint8Array),sf={"%AggregateError%":typeof AggregateError>"u"?Ye:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ye:ArrayBuffer,"%ArrayIteratorPrototype%":eu?Js([][Symbol.iterator]()):Ye,"%AsyncFromSyncIteratorPrototype%":Ye,"%AsyncFunction%":hu,"%AsyncGenerator%":hu,"%AsyncGeneratorFunction%":hu,"%AsyncIteratorPrototype%":hu,"%Atomics%":typeof Atomics>"u"?Ye:Atomics,"%BigInt%":typeof BigInt>"u"?Ye:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ye:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ye:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ye:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ye:FinalizationRegistry,"%Function%":Dz,"%GeneratorFunction%":hu,"%Int8Array%":typeof Int8Array>"u"?Ye:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ye:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ye:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":eu?Js(Js([][Symbol.iterator]())):Ye,"%JSON%":typeof JSON=="object"?JSON:Ye,"%Map%":typeof Map>"u"?Ye:Map,"%MapIteratorPrototype%":typeof Map>"u"||!eu?Ye:Js(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ye:Promise,"%Proxy%":typeof Proxy>"u"?Ye:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ye:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ye:Set,"%SetIteratorPrototype%":typeof Set>"u"||!eu?Ye:Js(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ye:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":eu?Js(""[Symbol.iterator]()):Ye,"%Symbol%":eu?Symbol:Ye,"%SyntaxError%":Zf,"%ThrowTypeError%":Zue,"%TypedArray%":efe,"%TypeError%":of,"%Uint8Array%":typeof Uint8Array>"u"?Ye:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ye:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ye:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ye:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ye:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ye:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ye:WeakSet},tfe=function t(e){var r;if(e==="%AsyncFunction%")r=RE("async function () {}");else if(e==="%GeneratorFunction%")r=RE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=RE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(r=Js(i.prototype))}return sf[e]=r,r},dM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pg=$z,tx=Xk,rfe=pg.call(Function.call,Array.prototype.concat),nfe=pg.call(Function.apply,Array.prototype.splice),hM=pg.call(Function.call,String.prototype.replace),rx=pg.call(Function.call,String.prototype.slice),ife=pg.call(Function.call,RegExp.prototype.exec),ofe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,sfe=/\\(\\)?/g,afe=function(e){var r=rx(e,0,1),n=rx(e,-1);if(r==="%"&&n!=="%")throw new Zf("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Zf("invalid intrinsic syntax, expected opening `%`");var i=[];return hM(e,ofe,function(o,s,a,l){i[i.length]=a?hM(l,sfe,"$1"):s||o}),i},lfe=function(e,r){var n=e,i;if(tx(dM,n)&&(i=dM[n],n="%"+i[0]+"%"),tx(sf,n)){var o=sf[n];if(o===hu&&(o=tfe(n)),typeof o>"u"&&!r)throw new of("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Zf("intrinsic "+e+" does not exist!")},Mz=function(e,r){if(typeof e!="string"||e.length===0)throw new of("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new of('"allowMissing" argument must be a boolean');if(ife(/^%?[^%]*%?$/,e)===null)throw new Zf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=afe(e),i=n.length>0?n[0]:"",o=lfe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],nfe(n,rfe([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=rx(h,0,1),m=rx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new Zf("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",tx(sf,s))a=sf[s];else if(a!=null){if(!(h in a)){if(!r)throw new of("base intrinsic for "+e+" exists, but the property is not available.");return}if(cc&&u+1>=n.length){var y=cc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=tx(a,h),a=a[h];d&&!l&&(sf[s]=a)}}return a};(function(t){var e=$z,r=Mz,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var h=o(e,i,arguments);if(s&&a){var p=s(h,"length");p.configurable&&a(h,"length",{value:1+l(0,d.length-(arguments.length-1))})}return h};var c=function(){return o(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(jz);var Fz=jz.exports,Lz=Mz,Bz=Fz,cfe=Bz(Lz("String.prototype.indexOf")),ufe=function(e,r){var n=Lz(e,!!r);return typeof n=="function"&&cfe(e,".prototype.")>-1?Bz(n):n},Uz=Function.prototype.toString,$u=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,jT,T0;if(typeof $u=="function"&&typeof Object.defineProperty=="function")try{jT=Object.defineProperty({},"length",{get:function(){throw T0}}),T0={},$u(function(){throw 42},null,jT)}catch(t){t!==T0&&($u=null)}else $u=null;var ffe=/^\s*class\b/,$T=function(e){try{var r=Uz.call(e);return ffe.test(r)}catch{return!1}},$E=function(e){try{return $T(e)?!1:(Uz.call(e),!0)}catch{return!1}},P0=Object.prototype.toString,dfe="[object Object]",hfe="[object Function]",pfe="[object GeneratorFunction]",mfe="[object HTMLAllCollection]",yfe="[object HTML document.all class]",gfe="[object HTMLCollection]",vfe=typeof Symbol=="function"&&!!Symbol.toStringTag,bfe=!(0 in[,]),DT=function(){return!1};if(typeof document=="object"){var xfe=document.all;P0.call(xfe)===P0.call(document.all)&&(DT=function(e){if((bfe||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=P0.call(e);return(r===mfe||r===yfe||r===gfe||r===dfe)&&e("")==null}catch{}return!1})}var _fe=$u?function(e){if(DT(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{$u(e,null,jT)}catch(r){if(r!==T0)return!1}return!$T(e)&&$E(e)}:function(e){if(DT(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(vfe)return $E(e);if($T(e))return!1;var r=P0.call(e);return r!==hfe&&r!==pfe&&!/^\[object HTML/.test(r)?!1:$E(e)},wfe=_fe,Sfe=Object.prototype.toString,Vz=Object.prototype.hasOwnProperty,Efe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)Vz.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Afe=function(e,r,n){for(var i=0,o=e.length;i<o;i++)n==null?r(e.charAt(i),i,e):r.call(n,e.charAt(i),i,e)},Cfe=function(e,r,n){for(var i in e)Vz.call(e,i)&&(n==null?r(e[i],i,e):r.call(n,e[i],i,e))},Tfe=function(e,r,n){if(!wfe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Sfe.call(e)==="[object Array]"?Efe(e,r,i):typeof e=="string"?Afe(e,r,i):Cfe(e,r,i)},Wz=Tfe,DE=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Pfe=typeof globalThis>"u"?kl:globalThis,zz=function(){for(var e=[],r=0;r<DE.length;r++)typeof Pfe[DE[r]]=="function"&&(e[e.length]=DE[r]);return e},Gz=Wz,Ife=zz,cO=fo,Nfe=cO("Object.prototype.toString"),qz=nl(),I0=Ww,kfe=typeof globalThis>"u"?kl:globalThis,Hz=Ife(),Ofe=cO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Rfe=cO("String.prototype.slice"),Kz={},ME=Object.getPrototypeOf;qz&&I0&&ME&&Gz(Hz,function(t){var e=new kfe[t];if(Symbol.toStringTag in e){var r=ME(e),n=I0(r,Symbol.toStringTag);if(!n){var i=ME(r);n=I0(i,Symbol.toStringTag)}Kz[t]=n.get}});var jfe=function(e){var r=!1;return Gz(Kz,function(n,i){if(!r)try{r=n.call(e)===i}catch{}}),r},Yz=function(e){if(!e||typeof e!="object")return!1;if(!qz||!(Symbol.toStringTag in e)){var r=Rfe(Nfe(e),8,-1);return Ofe(Hz,r)>-1}return I0?jfe(e):!1},$fe=Fz,Dfe=ufe,Qz=Vw,Mfe=Yz,pM=Qz("ArrayBuffer",!0),mM=Qz("Float32Array",!0),N0=Dfe("ArrayBuffer.prototype.byteLength",!0),yM=pM&&!N0&&new pM().slice,gM=yM&&$fe(yM),Ffe=N0||gM?function(e){if(!e||typeof e!="object")return!1;try{return N0?N0(e):gM(e,0),!0}catch{return!1}}:mM?function(e){try{return new mM(e).buffer===e&&!Mfe(e)}catch(r){return typeof e=="object"&&r.name==="RangeError"}}:function(e){return!1},Lfe=Date.prototype.getDay,Bfe=function(e){try{return Lfe.call(e),!0}catch{return!1}},Ufe=Object.prototype.toString,Vfe="[object Date]",Wfe=nl(),zfe=function(e){return typeof e!="object"||e===null?!1:Wfe?Bfe(e):Ufe.call(e)===Vfe},MT=fo,Xz=nl(),Jz,Zz,FT,LT;if(Xz){Jz=MT("Object.prototype.hasOwnProperty"),Zz=MT("RegExp.prototype.exec"),FT={};var FE=function(){throw FT};LT={toString:FE,valueOf:FE},typeof Symbol.toPrimitive=="symbol"&&(LT[Symbol.toPrimitive]=FE)}var Gfe=MT("Object.prototype.toString"),qfe=Object.getOwnPropertyDescriptor,Hfe="[object RegExp]",Kfe=Xz?function(e){if(!e||typeof e!="object")return!1;var r=qfe(e,"lastIndex"),n=r&&Jz(r,"value");if(!n)return!1;try{Zz(e,LT)}catch(i){return i===FT}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Gfe(e)===Hfe},Yfe=fo,vM=Yfe("SharedArrayBuffer.prototype.byteLength",!0),Qfe=vM?function(e){if(!e||typeof e!="object")return!1;try{return vM(e),!0}catch{return!1}}:function(e){return!1},Xfe=Number.prototype.toString,Jfe=function(e){try{return Xfe.call(e),!0}catch{return!1}},Zfe=Object.prototype.toString,ede="[object Number]",tde=nl(),rde=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:tde?Jfe(e):Zfe.call(e)===ede},e9=fo,nde=e9("Boolean.prototype.toString"),ide=e9("Object.prototype.toString"),ode=function(e){try{return nde(e),!0}catch{return!1}},sde="[object Boolean]",ade=nl(),lde=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:ade&&Symbol.toStringTag in e?ode(e):ide(e)===sde},BT={exports:{}},cde=Object.prototype.toString,ude=rl();if(ude){var fde=Symbol.prototype.toString,dde=/^Symbol\(.*\)$/,hde=function(e){return typeof e.valueOf()!="symbol"?!1:dde.test(fde.call(e))};BT.exports=function(e){if(typeof e=="symbol")return!0;if(cde.call(e)!=="[object Symbol]")return!1;try{return hde(e)}catch{return!1}}}else BT.exports=function(e){return!1};var pde=BT.exports,UT={exports:{}},bM=typeof BigInt<"u"&&BigInt,mde=function(){return typeof bM=="function"&&typeof BigInt=="function"&&typeof bM(42)=="bigint"&&typeof BigInt(42)=="bigint"},yde=mde();if(yde){var gde=BigInt.prototype.valueOf,vde=function(e){try{return gde.call(e),!0}catch{}return!1};UT.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:vde(e)}}else UT.exports=function(e){return!1};var bde=UT.exports,xde=Az,_de=rde,wde=lde,Sde=pde,Ede=bde,Ade=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(xde(e))return"String";if(_de(e))return"Number";if(wde(e))return"Boolean";if(Sde(e))return"Symbol";if(Ede(e))return"BigInt"},nx=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,xM=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,ix;nx||(ix=function(e){return!1});var VT=nx?nx.prototype.has:null,LE=xM?xM.prototype.has:null;!ix&&!VT&&(ix=function(e){return!1});var Cde=ix||function(e){if(!e||typeof e!="object")return!1;try{if(VT.call(e,VT),LE)try{LE.call(e,LE)}catch{return!0}return e instanceof nx}catch{}return!1},WT={exports:{}},Tde=Rs,t9=fo,Pde=Tde("%WeakSet%",!0),BE=t9("WeakSet.prototype.has",!0);if(BE){var UE=t9("WeakMap.prototype.has",!0);WT.exports=function(e){if(!e||typeof e!="object")return!1;try{if(BE(e,BE),UE)try{UE(e,UE)}catch{return!0}return e instanceof Pde}catch{}return!1}}else WT.exports=function(e){return!1};var Ide=WT.exports,Nde=Tz,kde=Iz,Ode=Cde,Rde=Ide,jde=function(e){if(e&&typeof e=="object"){if(Nde(e))return"Map";if(kde(e))return"Set";if(Ode(e))return"WeakMap";if(Rde(e))return"WeakSet"}return!1},r9={exports:{}},$de="Function.prototype.bind called on incompatible ",Dde=Object.prototype.toString,Mde=Math.max,Fde="[object Function]",_M=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},Lde=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Bde=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Ude=function(e){var r=this;if(typeof r!="function"||Dde.apply(r)!==Fde)throw new TypeError($de+r);for(var n=Lde(arguments,1),i,o=function(){if(this instanceof i){var u=r.apply(this,_M(n,arguments));return Object(u)===u?u:this}return r.apply(e,_M(n,arguments))},s=Mde(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Bde(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},Vde=Ude,n9=Function.prototype.bind||Vde,Ue,ed=SyntaxError,i9=Function,af=TypeError,VE=function(t){try{return i9('"use strict"; return ('+t+").constructor;")()}catch{}},uc=Object.getOwnPropertyDescriptor;if(uc)try{uc({},"")}catch{uc=null}var WE=function(){throw new af},Wde=uc?function(){try{return arguments.callee,WE}catch{try{return uc(arguments,"callee").get}catch{return WE}}}():WE,tu=rl(),zde=Bw(),wr=Object.getPrototypeOf||(zde?function(t){return t.__proto__}:null),pu={},Gde=typeof Uint8Array>"u"||!wr?Ue:wr(Uint8Array),fc={"%AggregateError%":typeof AggregateError>"u"?Ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ue:ArrayBuffer,"%ArrayIteratorPrototype%":tu&&wr?wr([][Symbol.iterator]()):Ue,"%AsyncFromSyncIteratorPrototype%":Ue,"%AsyncFunction%":pu,"%AsyncGenerator%":pu,"%AsyncGeneratorFunction%":pu,"%AsyncIteratorPrototype%":pu,"%Atomics%":typeof Atomics>"u"?Ue:Atomics,"%BigInt%":typeof BigInt>"u"?Ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ue:FinalizationRegistry,"%Function%":i9,"%GeneratorFunction%":pu,"%Int8Array%":typeof Int8Array>"u"?Ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":tu&&wr?wr(wr([][Symbol.iterator]())):Ue,"%JSON%":typeof JSON=="object"?JSON:Ue,"%Map%":typeof Map>"u"?Ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!tu||!wr?Ue:wr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ue:Promise,"%Proxy%":typeof Proxy>"u"?Ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!tu||!wr?Ue:wr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":tu&&wr?wr(""[Symbol.iterator]()):Ue,"%Symbol%":tu?Symbol:Ue,"%SyntaxError%":ed,"%ThrowTypeError%":Wde,"%TypedArray%":Gde,"%TypeError%":af,"%Uint8Array%":typeof Uint8Array>"u"?Ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ue:WeakSet};if(wr)try{null.error}catch(t){var qde=wr(wr(t));fc["%Error.prototype%"]=qde}var Hde=function t(e){var r;if(e==="%AsyncFunction%")r=VE("async function () {}");else if(e==="%GeneratorFunction%")r=VE("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=VE("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&wr&&(r=wr(i.prototype))}return fc[e]=r,r},wM={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},mg=n9,ox=Uw,Kde=mg.call(Function.call,Array.prototype.concat),Yde=mg.call(Function.apply,Array.prototype.splice),SM=mg.call(Function.call,String.prototype.replace),sx=mg.call(Function.call,String.prototype.slice),Qde=mg.call(Function.call,RegExp.prototype.exec),Xde=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Jde=/\\(\\)?/g,Zde=function(e){var r=sx(e,0,1),n=sx(e,-1);if(r==="%"&&n!=="%")throw new ed("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ed("invalid intrinsic syntax, expected opening `%`");var i=[];return SM(e,Xde,function(o,s,a,l){i[i.length]=a?SM(l,Jde,"$1"):s||o}),i},ehe=function(e,r){var n=e,i;if(ox(wM,n)&&(i=wM[n],n="%"+i[0]+"%"),ox(fc,n)){var o=fc[n];if(o===pu&&(o=Hde(n)),typeof o>"u"&&!r)throw new af("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ed("intrinsic "+e+" does not exist!")},o9=function(e,r){if(typeof e!="string"||e.length===0)throw new af("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new af('"allowMissing" argument must be a boolean');if(Qde(/^%?[^%]*%?$/,e)===null)throw new ed("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Zde(e),i=n.length>0?n[0]:"",o=ehe("%"+i+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],Yde(n,Kde([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],p=sx(h,0,1),m=sx(h,-1);if((p==='"'||p==="'"||p==="`"||m==='"'||m==="'"||m==="`")&&p!==m)throw new ed("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,s="%"+i+"%",ox(fc,s))a=fc[s];else if(a!=null){if(!(h in a)){if(!r)throw new af("base intrinsic for "+e+" exists, but the property is not available.");return}if(uc&&u+1>=n.length){var y=uc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=ox(a,h),a=a[h];d&&!l&&(fc[s]=a)}}return a};(function(t){var e=n9,r=o9,n=sz,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,o),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=a(e,s,arguments);return n(p,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,o,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(r9);var s9=r9.exports,a9=o9,l9=s9,the=l9(a9("String.prototype.indexOf")),rhe=function(e,r){var n=a9(e,!!r);return typeof n=="function"&&the(e,".prototype.")>-1?l9(n):n},ax=Wz,nhe=zz,EM=s9,uO=rhe,k0=Ww,ihe=uO("Object.prototype.toString"),c9=nl(),AM=typeof globalThis>"u"?kl:globalThis,zT=nhe(),fO=uO("String.prototype.slice"),zE=Object.getPrototypeOf,ohe=uO("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},lx={__proto__:null};c9&&k0&&zE?ax(zT,function(t){var e=new AM[t];if(Symbol.toStringTag in e){var r=zE(e),n=k0(r,Symbol.toStringTag);if(!n){var i=zE(r);n=k0(i,Symbol.toStringTag)}lx["$"+t]=EM(n.get)}}):ax(zT,function(t){var e=new AM[t],r=e.slice||e.set;r&&(lx["$"+t]=EM(r))});var she=function(e){var r=!1;return ax(lx,function(n,i){if(!r)try{"$"+n(e)===i&&(r=fO(i,1))}catch{}}),r},ahe=function(e){var r=!1;return ax(lx,function(n,i){if(!r)try{n(e),r=fO(i,1)}catch{}}),r},lhe=function(e){if(!e||typeof e!="object")return!1;if(!c9){var r=fO(ihe(e),8,-1);return ohe(zT,r)>-1?r:r!=="Object"?!1:ahe(e)}return k0?she(e):null},GE,CM;function che(){if(CM)return GE;CM=1;var t=ug,e=fo,r=Rs,n=Yz,i=r("ArrayBuffer",!0),o=r("Float32Array",!0),s=e("ArrayBuffer.prototype.byteLength",!0),a=i&&!s&&new i().slice,l=a&&t(a);return GE=s||l?function(u){if(!u||typeof u!="object")return!1;try{return s?s(u):l(u,0),!0}catch{return!1}}:o?function(u){try{return new o(u).buffer===u&&!n(u)}catch{return!1}}:function(u){return!1},GE}var uhe=fo,TM=uhe("ArrayBuffer.prototype.byteLength",!0),fhe=che(),dhe=function(e){return fhe(e)?TM?TM(e):e.byteLength:NaN},u9=pae,Xo=Gle,PM=_ce,hhe=Vw,td=Fue,phe=Sz,IM=Hue,NM=yz,kM=Ez,OM=Ffe,RM=zfe,jM=Kfe,$M=Qfe,DM=Mw,MM=Ade,FM=jde,LM=lhe,BM=dhe,UM=Xo("SharedArrayBuffer.prototype.byteLength",!0),VM=Xo("Date.prototype.getTime"),qE=Object.getPrototypeOf,WM=Xo("Object.prototype.toString"),cx=hhe("%Set%",!0),GT=Xo("Map.prototype.has",!0),ux=Xo("Map.prototype.get",!0),zM=Xo("Map.prototype.size",!0),fx=Xo("Set.prototype.add",!0),f9=Xo("Set.prototype.delete",!0),dx=Xo("Set.prototype.has",!0),O0=Xo("Set.prototype.size",!0);function GM(t,e,r,n){for(var i=td(t),o;(o=i.next())&&!o.done;)if(ao(e,o.value,r,n))return f9(t,o.value),!0;return!1}function d9(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function mhe(t,e,r,n,i,o){var s=d9(r);if(s!=null)return s;var a=ux(e,s),l=u9({},i,{strict:!1});return typeof a>"u"&&!GT(e,s)||!ao(n,a,l,o)?!1:!GT(t,s)&&ao(n,a,l,o)}function yhe(t,e,r){var n=d9(r);return n??(dx(e,n)&&!dx(t,n))}function qM(t,e,r,n,i,o){for(var s=td(t),a,l;(a=s.next())&&!a.done;)if(l=a.value,ao(r,l,i,o)&&ao(n,ux(e,l),i,o))return f9(t,l),!0;return!1}function ao(t,e,r,n){var i=r||{};if(i.strict?IM(t,e):t===e)return!0;var o=MM(t),s=MM(e);if(o!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return i.strict?IM(t,e):t==e;var a=n.has(t),l=n.has(e),c;if(a&&l){if(n.get(t)===n.get(e))return!0}else c={};return a||n.set(t,c),l||n.set(e,c),bhe(t,e,i,n)}function HM(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function ghe(t,e,r,n){if(O0(t)!==O0(e))return!1;for(var i=td(t),o=td(e),s,a,l;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new cx),fx(l,s.value);else if(!dx(e,s.value)){if(r.strict||!yhe(t,e,s.value))return!1;l||(l=new cx),fx(l,s.value)}if(l){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!GM(l,a.value,r.strict,n))return!1}else if(!r.strict&&!dx(t,a.value)&&!GM(l,a.value,r.strict,n))return!1;return O0(l)===0}return!0}function vhe(t,e,r,n){if(zM(t)!==zM(e))return!1;for(var i=td(t),o=td(e),s,a,l,c,u,d;(s=i.next())&&!s.done;)if(c=s.value[0],u=s.value[1],c&&typeof c=="object")l||(l=new cx),fx(l,c);else if(d=ux(e,c),typeof d>"u"&&!GT(e,c)||!ao(u,d,r,n)){if(r.strict||!mhe(t,e,c,u,r,n))return!1;l||(l=new cx),fx(l,c)}if(l){for(;(a=o.next())&&!a.done;)if(c=a.value[0],d=a.value[1],c&&typeof c=="object"){if(!qM(l,t,c,d,r,n))return!1}else if(!r.strict&&(!t.has(c)||!ao(ux(t,c),d,r,n))&&!qM(l,t,c,d,u9({},r,{strict:!1}),n))return!1;return O0(l)===0}return!0}function bhe(t,e,r,n){var i,o;if(typeof t!=typeof e||t==null||e==null||WM(t)!==WM(e)||NM(t)!==NM(e))return!1;var s=kM(t),a=kM(e);if(s!==a)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var u=jM(t),d=jM(e);if(u!==d||(u||d)&&(t.source!==e.source||PM(t)!==PM(e)))return!1;var h=RM(t),p=RM(e);if(h!==p||(h||p)&&VM(t)!==VM(e)||r.strict&&qE&&qE(t)!==qE(e))return!1;var m=LM(t),y=LM(e);if(m!==y)return!1;if(m||y){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var g=HM(t),b=HM(e);if(g!==b)return!1;if(g||b){if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var v=OM(t),x=OM(e);if(v!==x)return!1;if(v||x)return BM(t)!==BM(e)?!1:typeof Uint8Array=="function"&&ao(new Uint8Array(t),new Uint8Array(e),r,n);var S=$M(t),_=$M(e);if(S!==_)return!1;if(S||_)return UM(t)!==UM(e)?!1:typeof Uint8Array=="function"&&ao(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var w=DM(t),A=DM(e);if(w.length!==A.length)return!1;for(w.sort(),A.sort(),i=w.length-1;i>=0;i--)if(w[i]!=A[i])return!1;for(i=w.length-1;i>=0;i--)if(o=w[i],!ao(t[o],e[o],r,n))return!1;var C=FM(t),I=FM(e);return C!==I?!1:C==="Set"||I==="Set"?ghe(t,e,r,n):C==="Map"?vhe(t,e,r,n):!0}var xhe=function(e,r,n){return ao(e,r,n,phe())};const _he=ot(xhe),whe=(t,e)=>_he(t,e);var She="firebase",Ehe="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo(She,Ehe,"app");const Ahe={apiKey:"AIzaSyCa4jaiAOgH5H8B6hSo4DU49WnkpGPeavA",authDomain:"hkmjbs-streaming.firebaseapp.com",databaseURL:"https://hkmjbs-streaming-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hkmjbs-streaming",storageBucket:"hkmjbs-streaming.appspot.com",messagingSenderId:"537815456325",appId:"1:537815456325:web:c387796326f9db2726a12c"},dO=gW(Ahe),mu=Ese(dO);window.location.hostname==="localhost"&&L8(mu,"localhost",9e3);const h9={database:mu,get:t=>{const e=ep(mu,t);return F8(e).then(r=>{if(r.exists())return r.val()}).catch(r=>{throw console.error(r),r})},set:(t,e)=>{const r=ep(mu,t);return Kk(r,e).catch(n=>{throw console.error(n),n})},update:(t,e)=>{const r=ep(mu,t);return M8(r,e).catch(n=>{throw console.error(n),n})},push:(t,e)=>{const r=ep(mu,t);return D8(r,e).catch(n=>{throw console.error(n),n})}},hO=E.createContext(h9);function Che({children:t}){return f.jsx(hO.Provider,{value:h9,children:t})}const p9=()=>E.useContext(hO),Zr=(t,e)=>{const{database:r}=E.useContext(hO),n=E.useMemo(()=>ep(r,t),[r,t]),[i,o]=E.useState(),[s,a]=E.useState(e),l=E.useCallback(h=>Kk(n,h),[n]),c=E.useCallback(h=>M8(n,h),[n]),u=E.useCallback(h=>D8(n,h),[n]);return E.useEffect(()=>{whe(e,s)||a(e)},[s,e]),E.useEffect(()=>{const h=[];s!=null&&s.order&&s.order.byChild&&h.push(hse(s.order.byChild)),s!=null&&s.filter&&(typeof s.filter.equalTo<"u"&&h.push(mse(s.filter.equalTo)),typeof s.filter.limitToLast<"u"&&h.push(fse(s.filter.limitToLast)));const p=h.length>0?yse(n,...h):n;s!=null&&s.onlyOnce?F8(p).then(m=>{m.exists()&&o(m.val())}):ase(p,m=>{o(m.val())},s??{})},[s,n]),{data:E.useMemo(()=>i,[i]),set:l,update:c,push:u}};var yg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rd=typeof window>"u"||"Deno"in window;function vi(){}function The(t,e){return typeof t=="function"?t(e):t}function qT(t){return typeof t=="number"&&t>=0&&t!==1/0}function m9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function KM(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(n){if(e.queryHash!==pO(s,e.options))return!1}else if(!Am(e.queryKey,s))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||o&&!o(e))}function YM(t,e){const{exact:r,status:n,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Em(e.options.mutationKey)!==Em(o))return!1}else if(!Am(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function pO(t,e){return((e==null?void 0:e.queryKeyHashFn)||Em)(t)}function Em(t){return JSON.stringify(t,(e,r)=>KT(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Am(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Am(t[r],e[r])):!1}function y9(t,e){if(t===e)return t;const r=QM(t)&&QM(e);if(r||KT(t)&&KT(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),o=i.length,s=r?[]:{};let a=0;for(let l=0;l<o;l++){const c=r?l:i[l];s[c]=y9(t[c],e[c]),s[c]===t[c]&&a++}return n===o&&a===n?t:s}return e}function HT(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function QM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function KT(t){if(!XM(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!XM(r)||!r.hasOwnProperty("isPrototypeOf"))}function XM(t){return Object.prototype.toString.call(t)==="[object Object]"}function g9(t){return new Promise(e=>{setTimeout(e,t)})}function JM(t){g9(0).then(t)}function YT(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?y9(t,e):e}function Phe(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Ihe(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Wl,na,gf,RV,Nhe=(RV=class extends yg{constructor(){super();de(this,Wl,void 0);de(this,na,void 0);de(this,gf,void 0);oe(this,gf,e=>{if(!rd&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){D(this,na)||this.setEventListener(D(this,gf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,na))==null||e.call(this),oe(this,na,void 0))}setEventListener(e){var r;oe(this,gf,e),(r=D(this,na))==null||r.call(this),oe(this,na,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,Wl)!==e&&(oe(this,Wl,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof D(this,Wl)=="boolean"?D(this,Wl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wl=new WeakMap,na=new WeakMap,gf=new WeakMap,RV),hx=new Nhe,vf,ia,bf,jV,khe=(jV=class extends yg{constructor(){super();de(this,vf,!0);de(this,ia,void 0);de(this,bf,void 0);oe(this,bf,e=>{if(!rd&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,ia)||this.setEventListener(D(this,bf))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,ia))==null||e.call(this),oe(this,ia,void 0))}setEventListener(e){var r;oe(this,bf,e),(r=D(this,ia))==null||r.call(this),oe(this,ia,e(this.setOnline.bind(this)))}setOnline(e){D(this,vf)!==e&&(oe(this,vf,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,vf)}},vf=new WeakMap,ia=new WeakMap,bf=new WeakMap,jV),px=new khe;function Ohe(t){return Math.min(1e3*2**t,3e4)}function Gw(t){return(t??"online")==="online"?px.isOnline():!0}var v9=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function HE(t){return t instanceof v9}function b9(t){let e=!1,r=0,n=!1,i,o,s;const a=new Promise((g,b)=>{o=g,s=b}),l=g=>{var b;n||(p(new v9(g)),(b=t.abort)==null||b.call(t))},c=()=>{e=!0},u=()=>{e=!1},d=()=>!hx.isFocused()||t.networkMode!=="always"&&!px.isOnline(),h=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),i==null||i(),o(g))},p=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),i==null||i(),s(g))},m=()=>new Promise(g=>{var b;i=v=>{const x=n||!d();return x&&g(v),x},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),y=()=>{if(n)return;let g;try{g=t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var w;if(n)return;const v=t.retry??(rd?0:3),x=t.retryDelay??Ohe,S=typeof x=="function"?x(r,b):x,_=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(e||!_){p(b);return}r++,(w=t.onFail)==null||w.call(t,r,b),g9(S).then(()=>{if(d())return m()}).then(()=>{e?p(b):y()})})};return Gw(t.networkMode)?y():m().then(y),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:u}}function Rhe(){let t=[],e=0,r=u=>{u()},n=u=>{u()};const i=u=>{let d;e++;try{d=u()}finally{e--,e||a()}return d},o=u=>{e?t.push(u):JM(()=>{r(u)})},s=u=>(...d)=>{o(()=>{u(...d)})},a=()=>{const u=t;t=[],u.length&&JM(()=>{n(()=>{u.forEach(d=>{r(d)})})})};return{batch:i,batchCalls:s,schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u}}}var Vr=Rhe(),zl,$V,x9=($V=class{constructor(){de(this,zl,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qT(this.gcTime)&&oe(this,zl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rd?1/0:5*60*1e3))}clearGcTimeout(){D(this,zl)&&(clearTimeout(D(this,zl)),oe(this,zl,void 0))}},zl=new WeakMap,$V),xf,_f,mi,oa,yi,gr,$y,Gl,wf,R0,Gi,rs,DV,jhe=(DV=class extends x9{constructor(r){super();de(this,wf);de(this,Gi);de(this,xf,void 0);de(this,_f,void 0);de(this,mi,void 0);de(this,oa,void 0);de(this,yi,void 0);de(this,gr,void 0);de(this,$y,void 0);de(this,Gl,void 0);oe(this,Gl,!1),oe(this,$y,r.defaultOptions),Oe(this,wf,R0).call(this,r.options),oe(this,gr,[]),oe(this,mi,r.cache),this.queryKey=r.queryKey,this.queryHash=r.queryHash,oe(this,xf,r.state||$he(this.options)),this.state=D(this,xf),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!D(this,gr).length&&this.state.fetchStatus==="idle"&&D(this,mi).remove(this)}setData(r,n){const i=YT(this.state.data,r,this.options);return Oe(this,Gi,rs).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(r,n){Oe(this,Gi,rs).call(this,{type:"setState",state:r,setStateOptions:n})}cancel(r){var i;const n=D(this,oa);return(i=D(this,yi))==null||i.cancel(r),n?n.then(vi).catch(vi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,xf))}isActive(){return D(this,gr).some(r=>r.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||D(this,gr).some(r=>r.getCurrentResult().isStale)}isStaleByTime(r=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!m9(this.state.dataUpdatedAt,r)}onFocus(){var n;const r=D(this,gr).find(i=>i.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,yi))==null||n.continue()}onOnline(){var n;const r=D(this,gr).find(i=>i.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(n=D(this,yi))==null||n.continue()}addObserver(r){D(this,gr).includes(r)||(D(this,gr).push(r),this.clearGcTimeout(),D(this,mi).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){D(this,gr).includes(r)&&(oe(this,gr,D(this,gr).filter(n=>n!==r)),D(this,gr).length||(D(this,yi)&&(D(this,Gl)?D(this,yi).cancel({revert:!0}):D(this,yi).cancelRetry()),this.scheduleGc()),D(this,mi).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return D(this,gr).length}invalidate(){this.state.isInvalidated||Oe(this,Gi,rs).call(this,{type:"invalidate"})}fetch(r,n){var u,d,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,oa))return(u=D(this,yi))==null||u.continueRetry(),D(this,oa)}if(r&&Oe(this,wf,R0).call(this,r),!this.options.queryFn){const m=D(this,gr).find(y=>y.options.queryFn);m&&Oe(this,wf,R0).call(this,m.options)}const i=new AbortController,o={queryKey:this.queryKey,meta:this.meta},s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(oe(this,Gl,!0),i.signal)})};s(o);const a=()=>this.options.queryFn?(oe(this,Gl,!1),this.options.persister?this.options.persister(this.options.queryFn,o,this):this.options.queryFn(o)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),(d=this.options.behavior)==null||d.onFetch(l,this),oe(this,_f,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Oe(this,Gi,rs).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const c=m=>{var y,g,b,v;HE(m)&&m.silent||Oe(this,Gi,rs).call(this,{type:"error",error:m}),HE(m)||((g=(y=D(this,mi).config).onError)==null||g.call(y,m,this),(v=(b=D(this,mi).config).onSettled)==null||v.call(b,this.state.data,m,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return oe(this,yi,b9({fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:m=>{var y,g,b,v;if(typeof m>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(m),(g=(y=D(this,mi).config).onSuccess)==null||g.call(y,m,this),(v=(b=D(this,mi).config).onSettled)==null||v.call(b,m,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(m,y)=>{Oe(this,Gi,rs).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Oe(this,Gi,rs).call(this,{type:"pause"})},onContinue:()=>{Oe(this,Gi,rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),oe(this,oa,D(this,yi).promise),D(this,oa)}},xf=new WeakMap,_f=new WeakMap,mi=new WeakMap,oa=new WeakMap,yi=new WeakMap,gr=new WeakMap,$y=new WeakMap,Gl=new WeakMap,wf=new WeakSet,R0=function(r){this.options={...D(this,$y),...r},this.updateGcTime(this.options.gcTime)},Gi=new WeakSet,rs=function(r){const n=i=>{switch(r.type){case"failed":return{...i,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:r.meta??null,fetchStatus:Gw(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...i,data:r.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=r.error;return HE(o)&&o.revert&&D(this,_f)?{...D(this,_f),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...r.state}}};this.state=n(this.state),Vr.batch(()=>{D(this,gr).forEach(i=>{i.onQueryUpdate()}),D(this,mi).notify({query:this,type:"updated",action:r})})},DV);function $he(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var vo,MV,Dhe=(MV=class extends yg{constructor(e={}){super();de(this,vo,void 0);this.config=e,oe(this,vo,new Map)}build(e,r,n){const i=r.queryKey,o=r.queryHash??pO(i,r);let s=this.get(o);return s||(s=new jhe({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){D(this,vo).has(e.queryHash)||(D(this,vo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=D(this,vo).get(e.queryHash);r&&(e.destroy(),r===e&&D(this,vo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,vo).get(e)}getAll(){return[...D(this,vo).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>KM(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>KM(e,n)):r}notify(e){Vr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vo=new WeakMap,MV),bo,Dy,qn,Sf,xo,Ws,FV,Mhe=(FV=class extends x9{constructor(r){super();de(this,xo);de(this,bo,void 0);de(this,Dy,void 0);de(this,qn,void 0);de(this,Sf,void 0);this.mutationId=r.mutationId,oe(this,Dy,r.defaultOptions),oe(this,qn,r.mutationCache),oe(this,bo,[]),this.state=r.state||Fhe(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options={...D(this,Dy),...r},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){D(this,bo).includes(r)||(D(this,bo).push(r),this.clearGcTimeout(),D(this,qn).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){oe(this,bo,D(this,bo).filter(n=>n!==r)),this.scheduleGc(),D(this,qn).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){D(this,bo).length||(this.state.status==="pending"?this.scheduleGc():D(this,qn).remove(this))}continue(){var r;return((r=D(this,Sf))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var o,s,a,l,c,u,d,h,p,m,y,g,b,v,x,S,_,w,A,C;const n=()=>(oe(this,Sf,b9({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(I,T)=>{Oe(this,xo,Ws).call(this,{type:"failed",failureCount:I,error:T})},onPause:()=>{Oe(this,xo,Ws).call(this,{type:"pause"})},onContinue:()=>{Oe(this,xo,Ws).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),D(this,Sf).promise),i=this.state.status==="pending";try{if(!i){Oe(this,xo,Ws).call(this,{type:"pending",variables:r}),await((s=(o=D(this,qn).config).onMutate)==null?void 0:s.call(o,r,this));const T=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,r));T!==this.state.context&&Oe(this,xo,Ws).call(this,{type:"pending",context:T,variables:r})}const I=await n();return await((u=(c=D(this,qn).config).onSuccess)==null?void 0:u.call(c,I,r,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,r,this.state.context)),await((m=(p=D(this,qn).config).onSettled)==null?void 0:m.call(p,I,null,this.state.variables,this.state.context,this)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,I,null,r,this.state.context)),Oe(this,xo,Ws).call(this,{type:"success",data:I}),I}catch(I){try{throw await((v=(b=D(this,qn).config).onError)==null?void 0:v.call(b,I,r,this.state.context,this)),await((S=(x=this.options).onError)==null?void 0:S.call(x,I,r,this.state.context)),await((w=(_=D(this,qn).config).onSettled)==null?void 0:w.call(_,void 0,I,this.state.variables,this.state.context,this)),await((C=(A=this.options).onSettled)==null?void 0:C.call(A,void 0,I,r,this.state.context)),I}finally{Oe(this,xo,Ws).call(this,{type:"error",error:I})}}}},bo=new WeakMap,Dy=new WeakMap,qn=new WeakMap,Sf=new WeakMap,xo=new WeakSet,Ws=function(r){const n=i=>{switch(r.type){case"failed":return{...i,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Gw(this.options.networkMode),status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...i,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:r.error,failureCount:i.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Vr.batch(()=>{D(this,bo).forEach(i=>{i.onMutationUpdate(r)}),D(this,qn).notify({mutation:this,type:"updated",action:r})})},FV);function Fhe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gi,My,ql,LV,Lhe=(LV=class extends yg{constructor(e={}){super();de(this,gi,void 0);de(this,My,void 0);de(this,ql,void 0);this.config=e,oe(this,gi,[]),oe(this,My,0)}build(e,r,n){const i=new Mhe({mutationCache:this,mutationId:++nv(this,My)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){D(this,gi).push(e),this.notify({type:"added",mutation:e})}remove(e){oe(this,gi,D(this,gi).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){Vr.batch(()=>{D(this,gi).forEach(e=>{this.remove(e)})})}getAll(){return D(this,gi)}find(e){const r={exact:!0,...e};return D(this,gi).find(n=>YM(r,n))}findAll(e={}){return D(this,gi).filter(r=>YM(e,r))}notify(e){Vr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return oe(this,ql,(D(this,ql)??Promise.resolve()).then(()=>{const e=D(this,gi).filter(r=>r.state.isPaused);return Vr.batch(()=>e.reduce((r,n)=>r.then(()=>n.continue().catch(vi)),Promise.resolve()))}).then(()=>{oe(this,ql,void 0)})),D(this,ql)}},gi=new WeakMap,My=new WeakMap,ql=new WeakMap,LV);function Bhe(t){return{onFetch:(e,r)=>{const n=async()=>{var m,y,g,b,v;const i=e.options,o=(g=(y=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:g.direction,s=((b=e.state.data)==null?void 0:b.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let c=!1;const u=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},d=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),h=async(x,S,_)=>{if(c)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const w={queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};u(w);const A=await d(w),{maxPages:C}=e.options,I=_?Ihe:Phe;return{pages:I(x.pages,A,C),pageParams:I(x.pageParams,S,C)}};let p;if(o&&s.length){const x=o==="backward",S=x?Uhe:ZM,_={pages:s,pageParams:a},w=S(i,_);p=await h(_,w,x)}else{p=await h(l,a[0]??i.initialPageParam);const x=t??s.length;for(let S=1;S<x;S++){const _=ZM(i,p);p=await h(p,_)}}return p};e.options.persister?e.fetchFn=()=>{var i,o;return(o=(i=e.options).persister)==null?void 0:o.call(i,n,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=n}}}function ZM(t,{pages:e,pageParams:r}){const n=e.length-1;return t.getNextPageParam(e[n],e,r[n],r)}function Uhe(t,{pages:e,pageParams:r}){var n;return(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r)}var sr,sa,aa,Ef,Af,la,Cf,Tf,BV,Vhe=(BV=class{constructor(t={}){de(this,sr,void 0);de(this,sa,void 0);de(this,aa,void 0);de(this,Ef,void 0);de(this,Af,void 0);de(this,la,void 0);de(this,Cf,void 0);de(this,Tf,void 0);oe(this,sr,t.queryCache||new Dhe),oe(this,sa,t.mutationCache||new Lhe),oe(this,aa,t.defaultOptions||{}),oe(this,Ef,new Map),oe(this,Af,new Map),oe(this,la,0)}mount(){nv(this,la)._++,D(this,la)===1&&(oe(this,Cf,hx.subscribe(()=>{hx.isFocused()&&(this.resumePausedMutations(),D(this,sr).onFocus())})),oe(this,Tf,px.subscribe(()=>{px.isOnline()&&(this.resumePausedMutations(),D(this,sr).onOnline())})))}unmount(){var t,e;nv(this,la)._--,D(this,la)===0&&((t=D(this,Cf))==null||t.call(this),oe(this,Cf,void 0),(e=D(this,Tf))==null||e.call(this),oe(this,Tf,void 0))}isFetching(t){return D(this,sr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,sa).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=D(this,sr).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=D(this,sr).find({queryKey:t}),i=n==null?void 0:n.state.data,o=The(e,i);if(typeof o>"u")return;const s=this.defaultQueryOptions({queryKey:t});return D(this,sr).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Vr.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var e;return(e=D(this,sr).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=D(this,sr);Vr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=D(this,sr),n={type:"active",...t};return Vr.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Vr.batch(()=>D(this,sr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(vi).catch(vi)}invalidateQueries(t={},e={}){return Vr.batch(()=>{if(D(this,sr).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Vr.batch(()=>D(this,sr).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(vi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(vi)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=D(this,sr).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(vi).catch(vi)}fetchInfiniteQuery(t){return t.behavior=Bhe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(vi).catch(vi)}resumePausedMutations(){return D(this,sa).resumePausedMutations()}getQueryCache(){return D(this,sr)}getMutationCache(){return D(this,sa)}getDefaultOptions(){return D(this,aa)}setDefaultOptions(t){oe(this,aa,t)}setQueryDefaults(t,e){D(this,Ef).set(Em(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,Ef).values()];let r={};return e.forEach(n=>{Am(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){D(this,Af).set(Em(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,Af).values()];let r={};return e.forEach(n=>{Am(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...D(this,aa).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=pO(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,aa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,sr).clear(),D(this,sa).clear()}},sr=new WeakMap,sa=new WeakMap,aa=new WeakMap,Ef=new WeakMap,Af=new WeakMap,la=new WeakMap,Cf=new WeakMap,Tf=new WeakMap,BV),kn,xt,Pf,on,Hl,If,_o,Fy,Nf,kf,Kl,Yl,ca,Ql,Xl,tp,Ly,QT,By,XT,Uy,JT,Vy,ZT,Wy,eP,zy,tP,Gy,rP,ow,_9,UV,Whe=(UV=class extends yg{constructor(e,r){super();de(this,Xl);de(this,Ly);de(this,By);de(this,Uy);de(this,Vy);de(this,Wy);de(this,zy);de(this,Gy);de(this,ow);de(this,kn,void 0);de(this,xt,void 0);de(this,Pf,void 0);de(this,on,void 0);de(this,Hl,void 0);de(this,If,void 0);de(this,_o,void 0);de(this,Fy,void 0);de(this,Nf,void 0);de(this,kf,void 0);de(this,Kl,void 0);de(this,Yl,void 0);de(this,ca,void 0);de(this,Ql,void 0);oe(this,xt,void 0),oe(this,Pf,void 0),oe(this,on,void 0),oe(this,Ql,new Set),oe(this,kn,e),this.options=r,oe(this,_o,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,xt).addObserver(this),eF(D(this,xt),this.options)?Oe(this,Xl,tp).call(this):this.updateResult(),Oe(this,Vy,ZT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nP(D(this,xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nP(D(this,xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,Wy,eP).call(this),Oe(this,zy,tP).call(this),D(this,xt).removeObserver(this)}setOptions(e,r){const n=this.options,i=D(this,xt);if(this.options=D(this,kn).defaultQueryOptions(e),HT(n,this.options)||D(this,kn).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,xt),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),Oe(this,Gy,rP).call(this);const o=this.hasListeners();o&&tF(D(this,xt),i,this.options,n)&&Oe(this,Xl,tp).call(this),this.updateResult(r),o&&(D(this,xt)!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Oe(this,Ly,QT).call(this);const s=Oe(this,By,XT).call(this);o&&(D(this,xt)!==i||this.options.enabled!==n.enabled||s!==D(this,ca))&&Oe(this,Uy,JT).call(this,s)}getOptimisticResult(e){const r=D(this,kn).getQueryCache().build(D(this,kn),e),n=this.createResult(r,e);return Ghe(this,n)&&(oe(this,on,n),oe(this,If,this.options),oe(this,Hl,D(this,xt).state)),n}getCurrentResult(){return D(this,on)}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(D(this,Ql).add(n),e[n])})}),r}getCurrentQuery(){return D(this,xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=D(this,kn).defaultQueryOptions(e),n=D(this,kn).getQueryCache().build(D(this,kn),r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Oe(this,Xl,tp).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,on)))}createResult(e,r){var w;const n=D(this,xt),i=this.options,o=D(this,on),s=D(this,Hl),a=D(this,If),c=e!==n?e.state:D(this,Pf),{state:u}=e;let{error:d,errorUpdatedAt:h,fetchStatus:p,status:m}=u,y=!1,g;if(r._optimisticResults){const A=this.hasListeners(),C=!A&&eF(e,r),I=A&&tF(e,n,r,i);(C||I)&&(p=Gw(e.options.networkMode)?"fetching":"paused",u.dataUpdatedAt||(m="pending")),r._optimisticResults==="isRestoring"&&(p="idle")}if(r.select&&typeof u.data<"u")if(o&&u.data===(s==null?void 0:s.data)&&r.select===D(this,Fy))g=D(this,Nf);else try{oe(this,Fy,r.select),g=r.select(u.data),g=YT(o==null?void 0:o.data,g,r),oe(this,Nf,g),oe(this,_o,null)}catch(A){oe(this,_o,A)}else g=u.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&m==="pending"){let A;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))A=o.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((w=D(this,kf))==null?void 0:w.state.data,D(this,kf)):r.placeholderData,r.select&&typeof A<"u")try{A=r.select(A),oe(this,_o,null)}catch(C){oe(this,_o,C)}typeof A<"u"&&(m="success",g=YT(o==null?void 0:o.data,A,r),y=!0)}D(this,_o)&&(d=D(this,_o),g=D(this,Nf),h=Date.now(),m="error");const b=p==="fetching",v=m==="pending",x=m==="error",S=v&&b;return{status:m,fetchStatus:p,isPending:v,isSuccess:m==="success",isError:x,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:u.dataUpdatedAt,error:d,errorUpdatedAt:h,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:x&&u.dataUpdatedAt===0,isPaused:p==="paused",isPlaceholderData:y,isRefetchError:x&&u.dataUpdatedAt!==0,isStale:mO(e,r),refetch:this.refetch}}updateResult(e){const r=D(this,on),n=this.createResult(D(this,xt),this.options);if(oe(this,Hl,D(this,xt).state),oe(this,If,this.options),D(this,Hl).data!==void 0&&oe(this,kf,D(this,xt)),HT(n,r))return;oe(this,on,n);const i={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!D(this,Ql).size)return!0;const l=new Set(a??D(this,Ql));return this.options.throwOnError&&l.add("error"),Object.keys(D(this,on)).some(c=>{const u=c;return D(this,on)[u]!==r[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),Oe(this,ow,_9).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,Vy,ZT).call(this)}},kn=new WeakMap,xt=new WeakMap,Pf=new WeakMap,on=new WeakMap,Hl=new WeakMap,If=new WeakMap,_o=new WeakMap,Fy=new WeakMap,Nf=new WeakMap,kf=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,ca=new WeakMap,Ql=new WeakMap,Xl=new WeakSet,tp=function(e){Oe(this,Gy,rP).call(this);let r=D(this,xt).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(vi)),r},Ly=new WeakSet,QT=function(){if(Oe(this,Wy,eP).call(this),rd||D(this,on).isStale||!qT(this.options.staleTime))return;const r=m9(D(this,on).dataUpdatedAt,this.options.staleTime)+1;oe(this,Kl,setTimeout(()=>{D(this,on).isStale||this.updateResult()},r))},By=new WeakSet,XT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,xt)):this.options.refetchInterval)??!1},Uy=new WeakSet,JT=function(e){Oe(this,zy,tP).call(this),oe(this,ca,e),!(rd||this.options.enabled===!1||!qT(D(this,ca))||D(this,ca)===0)&&oe(this,Yl,setInterval(()=>{(this.options.refetchIntervalInBackground||hx.isFocused())&&Oe(this,Xl,tp).call(this)},D(this,ca)))},Vy=new WeakSet,ZT=function(){Oe(this,Ly,QT).call(this),Oe(this,Uy,JT).call(this,Oe(this,By,XT).call(this))},Wy=new WeakSet,eP=function(){D(this,Kl)&&(clearTimeout(D(this,Kl)),oe(this,Kl,void 0))},zy=new WeakSet,tP=function(){D(this,Yl)&&(clearInterval(D(this,Yl)),oe(this,Yl,void 0))},Gy=new WeakSet,rP=function(){const e=D(this,kn).getQueryCache().build(D(this,kn),this.options);if(e===D(this,xt))return;const r=D(this,xt);oe(this,xt,e),oe(this,Pf,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},ow=new WeakSet,_9=function(e){Vr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(D(this,on))}),D(this,kn).getQueryCache().notify({query:D(this,xt),type:"observerResultsUpdated"})})},UV);function zhe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function eF(t,e){return zhe(t,e)||t.state.dataUpdatedAt>0&&nP(t,e,e.refetchOnMount)}function nP(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&mO(t,e)}return!1}function tF(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&mO(t,r)}function mO(t,e){return t.isStaleByTime(e.staleTime)}function Ghe(t,e){return!HT(t.getCurrentResult(),e)}var w9=E.createContext(void 0),qhe=t=>{const e=E.useContext(w9);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Hhe=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),E.createElement(w9.Provider,{value:t},e)),S9=E.createContext(!1),Khe=()=>E.useContext(S9);S9.Provider;function Yhe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Qhe=E.createContext(Yhe()),Xhe=()=>E.useContext(Qhe);function Jhe(t,e){return typeof t=="function"?t(...e):!!t}var Zhe=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},epe=t=>{E.useEffect(()=>{t.clearReset()},[t])},tpe=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&Jhe(r,[t.error,n]),rpe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},npe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ipe=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function ope(t,e,r){const n=qhe(r),i=Khe(),o=Xhe(),s=n.defaultQueryOptions(t);s._optimisticResults=i?"isRestoring":"optimistic",rpe(s),Zhe(s,o),epe(o);const[a]=E.useState(()=>new e(n,s)),l=a.getOptimisticResult(s);if(E.useSyncExternalStore(E.useCallback(c=>{const u=i?()=>{}:a.subscribe(Vr.batchCalls(c));return a.updateResult(),u},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),E.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),npe(s,l))throw a.setOptions(s,{listeners:!1}),ipe(s,a,o);if(tpe({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:a.getCurrentQuery()}))throw l.error;return s.notifyOnChangeProps?l:a.trackResult(l)}function qa(t,e){return ope(t,Whe,e)}function E9(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=E9(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function spe(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=E9(t))&&(n&&(n+=" "),n+=e);return n}const rF=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,nF=spe,A9=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return nF(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(c=>{const u=r==null?void 0:r[c],d=o==null?void 0:o[c];if(u===null)return null;const h=rF(u)||rF(d);return i[c][h]}),a=r&&Object.entries(r).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(m=>{let[y,g]=m;return Array.isArray(g)?g.includes({...o,...a}[y]):{...o,...a}[y]===g})?[...c,d,h]:c},[]);return nF(t,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},ape=A9(["font-semibold"],{variants:{variant:{contained:["border","rounded"],text:[],icon:["hover:enabled:bg-opacity-50 leading-4"]},color:{primary:[],secondary:[],success:[],danger:[],inverted:[]},size:{small:["text-sm"],medium:["text-base"],large:["text-md"],xlarge:["text-2xl"]},disabled:{true:["cursor-not-allowed opacity-30"]},loading:{true:["cursor-wait opacity-30"]}},compoundVariants:[{variant:"contained",size:"small",className:"py-1 px-2"},{variant:"contained",size:"medium",className:"py-2 px-4"},{variant:"contained",size:"large",className:"py-2 px-4"},{variant:"contained",size:"xlarge",className:"py-4 px-4"},{color:"primary",variant:"contained",className:"bg-teal-800 text-white border-transparent hover:enabled:bg-teal-700"},{color:"secondary",variant:"contained",className:"bg-white text-gray-800 border-gray-400 hover:enabled:bg-gray-100"},{color:"success",variant:"contained",className:"bg-green-100 text-green-500 border-green-400 hover:enabled:bg-green-200"},{color:"danger",variant:"contained",className:"bg-red-100 text-red-500 border-red-400 hover:enabled:bg-red-200"},{color:"primary",variant:"text",className:"text-teal-800 hover:enabled:text-teal-700"},{color:"secondary",variant:"text",className:"text-gray-800 hover:enabled:text-gray-700"},{color:"success",variant:"text",className:"text-green-800 hover:enabled:text-green-700"},{color:"danger",variant:"text",className:"text-red-800 hover:enabled:text-red-700"},{color:"inverted",variant:"text",className:"text-gray-100 hover:enabled:text-gray-0"},{color:"primary",variant:"icon",className:"text-teal-800 hover:enabled:text-teal-700 hover:enabled:bg-teal-100"},{color:"secondary",variant:"icon",className:"text-gray-800 hover:enabled:text-gray-700 hover:enabled:bg-gray-100"},{color:"success",variant:"icon",className:"text-green-800 hover:enabled:text-green-700 hover:enabled:bg-green-100"},{color:"danger",variant:"icon",className:"text-red-800 hover:enabled:text-red-700 hover:enabled:bg-red-100"},{color:"primary",size:"medium",className:"uppercase"}],defaultVariants:{color:"primary",size:"medium",variant:"contained"}});function Re({color:t,size:e,variant:r,className:n,type:i="button",loading:o,...s}){const a=E.useMemo(()=>ape({color:t,size:e,variant:r,disabled:s.disabled,loading:o,className:n}),[t,e,r,s.disabled,o,n]);return f.jsx("button",{type:i,className:a,disabled:s.disabled||o,...s})}const lpe=typeof navigator>"u"?!1:navigator.product==="ReactNative",C9={timeout:lpe?6e4:12e4},cpe=function(e){const r={...C9,...typeof e=="string"?{url:e}:e},{searchParams:n}=new URL(r.url,"http://localhost");if(r.timeout=T9(r.timeout),r.query){for(const[s,a]of Object.entries(r.query))if(a!==void 0)if(Array.isArray(a))for(const l of a)n.append(s,l);else n.append(s,a)}const[i]=r.url.split("?"),o=n.toString();return o&&(r.url="".concat(i,"?").concat(o)),r.method=r.body&&!r.method?"POST":(r.method||"GET").toUpperCase(),r};function T9(t){if(t===!1||t===0)return!1;if(t.connect||t.socket)return t;const e=Number(t);return isNaN(e)?T9(C9.timeout):{connect:e,socket:e}}const upe=/^https?:\/\//i,fpe=function(e){if(!upe.test(e.url))throw new Error('"'.concat(e.url,'" is not a valid URL'))};var KE=function(t){return t.replace(/^\s+|\s+$/g,"")},dpe=function(t){return Object.prototype.toString.call(t)==="[object Array]"},hpe=function(t){if(!t)return{};for(var e={},r=KE(t).split(`
`),n=0;n<r.length;n++){var i=r[n],o=i.indexOf(":"),s=KE(i.slice(0,o)).toLowerCase(),a=KE(i.slice(o+1));typeof e[s]>"u"?e[s]=a:dpe(e[s])?e[s].push(a):e[s]=[e[s],a]}return e};const ppe=ot(hpe),mpe=t=>function(r,n){const i=r==="onError";let o=n;for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];for(let c=0;c<t[r].length;c++){const u=t[r][c];if(o=u(o,...a),i&&!o)break}return o};function ype(){const t=Object.create(null);let e=0;function r(i){const o=e++;return t[o]=i,function(){delete t[o]}}function n(i){for(const o in t)t[o](i)}return{publish:n,subscribe:r}}const gpe=["request","response","progress","error","abort"],iF=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function P9(t,e){const r=[],n=iF.reduce((o,s)=>(o[s]=o[s]||[],o),{processOptions:[cpe],validateOptions:[fpe]});function i(o){const s=(m,y,g)=>{let b=m,v=y;if(!b)try{v=l("onResponse",y,g)}catch(x){v=null,b=x}b=b&&l("onError",b,g),b?a.error.publish(b):v&&a.response.publish(v)},a=gpe.reduce((m,y)=>(m[y]=ype(),m),{}),l=mpe(n),c=l("processOptions",o);l("validateOptions",c);const u={options:c,channels:a,applyMiddleware:l};let d;const h=a.request.subscribe(m=>{d=e(m,(y,g)=>s(y,g,m))});a.abort.subscribe(()=>{h(),d&&d.abort()});const p=l("onReturn",a,u);return p===a&&a.request.publish(u),p}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return iF.forEach(a=>{s[a]&&n[a].push(s[a])}),r.push(s),i},i.clone=()=>P9(r,e),t.forEach(i.use),i}var I9=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ui=(t,e,r)=>(I9(t,e,"read from private field"),r?r.call(t):e.get(t)),dl=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ls=(t,e,r,n)=>(I9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),j0,$0,yu,D0,zs,M0,F0;class N9{constructor(){this.readyState=0,this.responseType="",dl(this,j0,void 0),dl(this,$0,void 0),dl(this,yu,void 0),dl(this,D0,{}),dl(this,zs,void 0),dl(this,M0,{}),dl(this,F0,void 0)}open(e,r,n){Ls(this,j0,e),Ls(this,$0,r),Ls(this,yu,""),this.readyState=1,this.onreadystatechange(),Ls(this,zs,void 0)}abort(){ui(this,zs)&&ui(this,zs).abort()}getAllResponseHeaders(){return ui(this,yu)}setRequestHeader(e,r){ui(this,D0)[e]=r}setInit(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Ls(this,M0,e),Ls(this,F0,r)}send(e){const r=this.responseType!=="arraybuffer",n={...ui(this,M0),method:ui(this,j0),headers:ui(this,D0),body:e};typeof AbortController=="function"&&ui(this,F0)&&(Ls(this,zs,new AbortController),typeof EventTarget<"u"&&ui(this,zs).signal instanceof EventTarget&&(n.signal=ui(this,zs).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(ui(this,$0),n).then(i=>(i.headers.forEach((o,s)=>{Ls(this,yu,ui(this,yu)+"".concat(s,": ").concat(o,`\r
`))}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,r?i.text():i.arrayBuffer())).then(i=>{typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,this.onreadystatechange()}).catch(i=>{var o;if(i.name==="AbortError"){this.onabort();return}(o=this.onerror)==null||o.call(this,i)})}}j0=new WeakMap;$0=new WeakMap;yu=new WeakMap;D0=new WeakMap;zs=new WeakMap;M0=new WeakMap;F0=new WeakMap;const iP=typeof XMLHttpRequest=="function"?"xhr":"fetch",vpe=iP==="xhr"?XMLHttpRequest:N9,bpe=(t,e)=>{var r;const n=t.options,i=t.applyMiddleware("finalizeOptions",n),o={},s=t.applyMiddleware("interceptRequest",void 0,{adapter:iP,context:t});if(s){const S=setTimeout(e,0,null,s);return{abort:()=>clearTimeout(S)}}let a=new vpe;a instanceof N9&&typeof i.fetch=="object"&&a.setInit(i.fetch,(r=i.useAbortSignal)!=null?r:!0);const l=i.headers,c=i.timeout;let u=!1,d=!1,h=!1;if(a.onerror=S=>{b(new Error("Request error while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.ontimeout=S=>{b(new Error("Request timeout while attempting to reach ".concat(i.url).concat(S.lengthComputable?"(".concat(S.loaded," of ").concat(S.total," bytes transferred)"):"")))},a.onabort=()=>{g(!0),u=!0},a.onreadystatechange=()=>{y(),!(u||a.readyState!==4)&&a.status!==0&&x()},a.open(i.method,i.url,!0),a.withCredentials=!!i.withCredentials,l&&a.setRequestHeader)for(const S in l)l.hasOwnProperty(S)&&a.setRequestHeader(S,l[S]);return i.rawBody&&(a.responseType="arraybuffer"),t.applyMiddleware("onRequest",{options:i,adapter:iP,request:a,context:t}),a.send(i.body||null),c&&(o.connect=setTimeout(()=>m("ETIMEDOUT"),c.connect)),{abort:p};function p(){u=!0,a&&a.abort()}function m(S){h=!0,a.abort();const _=new Error(S==="ESOCKETTIMEDOUT"?"Socket timed out on request to ".concat(i.url):"Connection timed out on request to ".concat(i.url));_.code=S,t.channels.error.publish(_)}function y(){c&&(g(),o.socket=setTimeout(()=>m("ESOCKETTIMEDOUT"),c.socket))}function g(S){(S||u||a.readyState>=2&&o.connect)&&clearTimeout(o.connect),o.socket&&clearTimeout(o.socket)}function b(S){if(d)return;g(!0),d=!0,a=null;const _=S||new Error("Network error while attempting to reach ".concat(i.url));_.isNetworkError=!0,_.request=i,e(_)}function v(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:i.url,method:i.method,headers:ppe(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function x(){if(!(u||d||h)){if(a.status===0){b(new Error("Unknown XHR error"));return}g(),d=!0,e(null,v())}}},xpe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bpe;return P9(t,e)};var oF={exports:{}},YE,sF;function _pe(){if(sF)return YE;sF=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,o=n*365.25;YE=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return s(u);if(h==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*o;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var d=Math.abs(u);return d>=n?Math.round(u/n)+"d":d>=r?Math.round(u/r)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=n?c(u,d,n,"day"):d>=r?c(u,d,r,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,h,p){var m=d>=h*1.5;return Math.round(u/h)+" "+p+(m?"s":"")}return YE}function wpe(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=_pe(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,h=null,p,m;function y(...g){if(!y.enabled)return;const b=y,v=Number(new Date),x=v-(d||v);b.diff=x,b.prev=d,b.curr=v,d=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let S=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,A)=>{if(w==="%%")return"%";S++;const C=r.formatters[A];if(typeof C=="function"){const I=g[S];w=C.call(b,I),g.splice(S,1),S--}return w}),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(u)),m),set:g=>{h=g}}),typeof r.init=="function"&&r.init(y),y}function n(u,d){const h=r(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){const u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(u))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Spe=wpe;(function(t,e){e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=s(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),l.splice(d,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function s(){try{return localStorage}catch{}}t.exports=Spe(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(oF,oF.exports);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function aF(t){return Object.prototype.toString.call(t)==="[object Object]"}function Epe(t){var e,r;return aF(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(aF(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}const Ape=typeof Buffer>"u"?()=>!1:t=>Buffer.isBuffer(t),Cpe=["boolean","string","number"];function Tpe(){return{processOptions:t=>{const e=t.body;return!e||!(!(typeof e.pipe=="function")&&!Ape(e)&&(Cpe.indexOf(typeof e)!==-1||Array.isArray(e)||Epe(e)))?t:Object.assign({},t,{body:JSON.stringify(t.body),headers:Object.assign({},t.headers,{"Content-Type":"application/json"})})}}}function Ppe(t){return{onResponse:r=>{const n=r.headers["content-type"]||"",i=t&&t.force||n.indexOf("application/json")!==-1;return!r.body||!n||!i?r:Object.assign({},r,{body:e(r.body)})},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function e(r){try{return JSON.parse(r)}catch(n){throw n.message="Failed to parsed response body as JSON: ".concat(n.message),n}}}let rp={};typeof globalThis<"u"?rp=globalThis:typeof window<"u"?rp=window:typeof global<"u"?rp=global:typeof self<"u"&&(rp=self);var Ipe=rp;function Npe(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).implementation||Ipe.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new e(i=>(r.error.subscribe(o=>i.error(o)),r.progress.subscribe(o=>i.next(Object.assign({type:"progress"},o))),r.response.subscribe(o=>{i.next(Object.assign({type:"response"},o)),i.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function kpe(){return{onRequest:t=>{if(t.adapter!=="xhr")return;const e=t.request,r=t.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"));function n(i){return o=>{const s=o.lengthComputable?o.loaded/o.total*100:-1;r.channels.progress.publish({stage:i,percent:s,total:o.total,loaded:o.loaded,lengthComputable:o.lengthComputable})}}}}}class Ope{constructor(e){this.__CANCEL__=!0,this.message=e}toString(){return"Cancel".concat(this.message?": ".concat(this.message):"")}}const lF=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r=null;this.promise=new Promise(n=>{r=n}),e(n=>{this.reason||(this.reason=new Ope(n),r(this.reason))})}};lF.source=()=>{let t;return{token:new lF(r=>{t=r}),cancel:t}};var k9=(t,e,r)=>r.method!=="GET"&&r.method!=="HEAD"?!1:t.isNetworkError||!1;const Rpe=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";var jpe=t=>{const e=t.maxRetries||5,r=t.retryDelay||$pe,n=t.shouldRetry;return{onError:(i,o)=>{const s=o.options,a=s.maxRetries||e,l=s.shouldRetry||n,c=s.attemptNumber||0;if(Rpe(s.body)||!l(i,c,s)||c>=a)return i;const u=Object.assign({},o,{options:Object.assign({},s,{attemptNumber:c+1})});return setTimeout(()=>o.channels.request.publish(u),r(c)),null}}};function $pe(t){return 100*Math.pow(2,t)+Math.random()*100}const yO=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jpe({shouldRetry:k9,...t})};yO.shouldRetry=k9;var oP=function(t,e){return oP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},oP(t,e)};function gO(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oP(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var mx=function(){return mx=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mx.apply(this,arguments)};function cF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yx(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function gx(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Bo(t){return typeof t=="function"}function O9(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var QE=O9(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function uF(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var vO=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=cF(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(y){e={error:y}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(Bo(u))try{u()}catch(y){o=y instanceof QE?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=cF(d),p=h.next();!p.done;p=h.next()){var m=p.value;try{fF(m)}catch(y){o=o??[],y instanceof QE?o=gx(gx([],yx(o)),yx(y.errors)):o.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new QE(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)fF(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&uF(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&uF(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();vO.EMPTY;function R9(t){return t instanceof vO||t&&"closed"in t&&Bo(t.remove)&&Bo(t.add)&&Bo(t.unsubscribe)}function fF(t){Bo(t)?t():t.unsubscribe()}var j9={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},sP={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=sP.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,gx([t,e],yx(r))):setTimeout.apply(void 0,gx([t,e],yx(r)))},clearTimeout:function(t){var e=sP.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Dpe(t){sP.setTimeout(function(){throw t})}function dF(){}function Mpe(t){t()}var bO=function(t){gO(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,R9(r)&&r.add(n)):n.destination=Upe,n}return e.create=function(r,n,i){return new aP(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(vO),Fpe=Function.prototype.bind;function XE(t,e){return Fpe.call(t,e)}var Lpe=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Cv(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Cv(n)}else Cv(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Cv(r)}},t}(),aP=function(t){gO(e,t);function e(r,n,i){var o=t.call(this)||this,s;if(Bo(r)||!r)s={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;o&&j9.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return o.unsubscribe()},s={next:r.next&&XE(r.next,a),error:r.error&&XE(r.error,a),complete:r.complete&&XE(r.complete,a)}):s=r}return o.destination=new Lpe(s),o}return e}(bO);function Cv(t){Dpe(t)}function Bpe(t){throw t}var Upe={closed:!0,next:dF,error:Bpe,complete:dF},Vpe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Wpe(t){return t}function zpe(t){return t.length===0?Wpe:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Cm=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=qpe(e)?e:new aP(e,r,n);return Mpe(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=hF(r),new r(function(i,o){var s=new aP({next:function(a){try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Vpe]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return zpe(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=hF(e),new e(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},t.create=function(e){return new t(e)},t}();function hF(t){var e;return(e=t??j9.Promise)!==null&&e!==void 0?e:Promise}function Gpe(t){return t&&Bo(t.next)&&Bo(t.error)&&Bo(t.complete)}function qpe(t){return t&&t instanceof bO||Gpe(t)&&R9(t)}function Hpe(t){return Bo(t==null?void 0:t.lift)}function $9(t){return function(e){if(Hpe(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function D9(t,e,r,n,i){return new Kpe(t,e,r,n,i)}var Kpe=function(t){gO(e,t);function e(r,n,i,o,s,a){var l=t.call(this,r)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(u){r.error(u)}}:t.prototype._next,l._error=o?function(c){try{o(c)}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(bO),Ype=O9(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Er(t,e){var r=typeof e=="object";return new Promise(function(n,i){var o=!1,s;t.subscribe({next:function(a){s=a,o=!0},error:i,complete:function(){o?n(s):r?n(e.defaultValue):i(new Ype)}})})}function Tc(t,e){return $9(function(r,n){var i=0;r.subscribe(D9(n,function(o){n.next(t.call(e,o,i++))}))})}function gg(t,e){return $9(function(r,n){var i=0;r.subscribe(D9(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}const JE=5;class Qpe extends Error{constructor(e){const r=M9(e);super(r.message),this.statusCode=400,Object.assign(this,r)}}class Xpe extends Error{constructor(e){const r=M9(e);super(r.message),this.statusCode=500,Object.assign(this,r)}}function M9(t){const e=t.body,r={response:t,statusCode:t.statusCode,responseBody:eme(e,t),message:"",details:void 0};if(e.error&&e.message)return r.message="".concat(e.error," - ").concat(e.message),r;if(Jpe(e)){const n=e.error.items||[],i=n.slice(0,JE).map(s=>{var a;return(a=s.error)==null?void 0:a.description}).filter(Boolean);let o=i.length?`:
- `.concat(i.join(`
- `)):"";return n.length>JE&&(o+=`
...and `.concat(n.length-JE," more")),r.message="".concat(e.error.description).concat(o),r.details=e.error,r}return e.error&&e.error.description?(r.message=e.error.description,r.details=e.error,r):(r.message=e.error||e.message||Zpe(t),r)}function Jpe(t){return pF(t)&&pF(t.error)&&t.error.type==="mutationError"&&typeof t.error.description=="string"}function pF(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Zpe(t){const e=t.statusMessage?" ".concat(t.statusMessage):"";return"".concat(t.method,"-request to ").concat(t.url," resulted in HTTP ").concat(t.statusCode).concat(e)}function eme(t,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(t,null,2):t}const tme={onResponse:t=>{if(t.statusCode>=500)throw new Xpe(t);if(t.statusCode>=400)throw new Qpe(t);return t}},rme={onResponse:t=>{const e=t.headers["x-sanity-warning"];return(Array.isArray(e)?e:[e]).filter(Boolean).forEach(n=>console.warn(n)),t}};function mF(t,e){let{maxRetries:r=5,retryDelay:n}=e;const i=xpe([r>0?yO({retryDelay:n,maxRetries:r,shouldRetry:nme}):{},...t,rme,Tpe(),Ppe(),kpe(),tme,Npe({implementation:Cm})]);function o(s){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:i)({maxRedirects:0,...s})}return o.defaultRequester=i,o}function nme(t,e,r){const n=r.method==="GET"||r.method==="HEAD",o=(r.uri||r.url).startsWith("/data/query"),s=t.response&&(t.response.statusCode===429||t.response.statusCode===502||t.response.statusCode===503);return(n||o)&&s?!0:yO.shouldRetry(t,e,r)}function F9(t){if(typeof t=="string"||Array.isArray(t))return{id:t};if(typeof t=="object"&&t!==null&&"query"in t&&typeof t.query=="string")return"params"in t&&typeof t.params=="object"&&t.params!==null?{query:t.query,params:t.params}:{query:t.query};const e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

`.concat(e))}const yF=["image","file"],gF=["before","after","replace"],L9=t=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},ime=t=>{if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},ome=t=>{if(yF.indexOf(t)===-1)throw new Error("Invalid asset type: ".concat(t,". Must be one of ").concat(yF.join(", ")))},Rp=(t,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error("".concat(t,"() takes an object of properties"))},B9=(t,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error("".concat(t,'(): "').concat(e,'" is not a valid document ID'))},vx=(t,e)=>{if(!e._id)throw new Error("".concat(t,'() requires that the document contains an ID ("_id" property)'));B9(t,e._id)},sme=(t,e,r)=>{const n="insert(at, selector, items)";if(gF.indexOf(t)===-1){const i=gF.map(o=>'"'.concat(o,'"')).join(", ");throw new Error("".concat(n,' takes an "at"-argument which is one of: ').concat(i))}if(typeof e!="string")throw new Error("".concat(n,' takes a "selector"-argument which must be a string'));if(!Array.isArray(r))throw new Error("".concat(n,' takes an "items"-argument which must be an array'))},U9=t=>{if(!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset||""},V9=t=>{if(typeof t!="string"||!/^[a-z0-9._-]{1,75}$/i.test(t))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return t};var W9=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},lf=(t,e,r)=>(W9(t,e,"read from private field"),r?r.call(t):e.get(t)),z9=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},G9=(t,e,r,n)=>(W9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),gu,vu;class q9{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.selection=e,this.operations=r}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return Rp("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,r,n){return sme(e,r,n),this._assign("insert",{[e]:r,items:n})}append(e,r){return this.insert("after","".concat(e,"[-1]"),r)}prepend(e,r){return this.insert("before","".concat(e,"[0]"),r)}splice(e,r,n,i){const o=typeof n>"u"||n===-1,s=r<0?r-1:r,a=o?-1:Math.max(0,r+n),l=s<0&&a>=0?"":a,c="".concat(e,"[").concat(s,":").concat(l,"]");return this.insert("replace",c,i||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...F9(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Rp(e,r),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},n&&this.operations[e]||{},r)}),this}_set(e,r){return this._assign(e,r,!1)}}const ame=class H9 extends q9{constructor(e,r,n){super(e,r),z9(this,gu,void 0),G9(this,gu,n)}clone(){return new H9(this.selection,{...this.operations},lf(this,gu))}commit(e){if(!lf(this,gu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return lf(this,gu).mutate({patch:this.serialize()},n)}};gu=new WeakMap;let jp=ame;const lme=class K9 extends q9{constructor(e,r,n){super(e,r),z9(this,vu,void 0),G9(this,vu,n)}clone(){return new K9(this.selection,{...this.operations},lf(this,vu))}commit(e){if(!lf(this,vu))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return lf(this,vu).mutate({patch:this.serialize()},n)}};vu=new WeakMap;let $p=lme;var Y9=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},pa=(t,e,r)=>(Y9(t,e,"read from private field"),r?r.call(t):e.get(t)),Q9=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},X9=(t,e,r,n)=>(Y9(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),bl,xl;const J9={returnDocuments:!1};class Z9{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;this.operations=e,this.trxId=r}create(e){return Rp("create",e),this._add({create:e})}createIfNotExists(e){const r="createIfNotExists";return Rp(r,e),vx(r,e),this._add({[r]:e})}createOrReplace(e){const r="createOrReplace";return Rp(r,e),vx(r,e),this._add({[r]:e})}delete(e){return B9("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}const cme=class eG extends Z9{constructor(e,r,n){super(e,n),Q9(this,bl,void 0),X9(this,bl,r)}clone(){return new eG([...this.operations],pa(this,bl),this.trxId)}commit(e){if(!pa(this,bl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return pa(this,bl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},J9,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof $p)return this._add({patch:e.serialize()});if(n){const o=r(new $p(e,{},pa(this,bl)));if(!(o instanceof $p))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};bl=new WeakMap;let tG=cme;const ume=class rG extends Z9{constructor(e,r,n){super(e,n),Q9(this,xl,void 0),X9(this,xl,r)}clone(){return new rG([...this.operations],pa(this,xl),this.trxId)}commit(e){if(!pa(this,xl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return pa(this,xl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},J9,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof jp)return this._add({patch:e.serialize()});if(n){const o=r(new jp(e,{},pa(this,xl)));if(!(o instanceof jp))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:o.serialize()})}return this._add({patch:{id:e,...r}})}};xl=new WeakMap;let nG=ume;const fme="https://www.sanity.io/help/";function xO(t){return fme+t}function dme(t){let e=!1,r;return function(){return e||(r=t(...arguments),e=!0),r}}const qw=t=>dme(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return console.warn(t.join(" "),...r)}),hme=qw(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),pme=qw(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),mme=qw(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(xO("js-client-browser-token")," for more information and how to hide this warning.")]),yme=qw(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(xO("js-client-api-version"))]),gme="apicdn.sanity.io",bx={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0},vme=["localhost","127.0.0.1","0.0.0.0"],bme=t=>vme.indexOf(t)!==-1,xme=function(e){if(e==="1"||e==="X")return;const r=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&r instanceof Date&&r.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")},iG=function(e){switch(e){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},oG=(t,e)=>{const r=Object.assign({},e,t);r.apiVersion||yme();const n=Object.assign({},bx,r),i=n.useProjectHostname;if(typeof Promise>"u"){const d=xO("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(d))}if(i&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&iG(n.perspective),"encodeSourceMapAtPath"in n||"encodeSourceMap"in n||"studioUrl"in n||"logger"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.");if("stega"in n&&n.stega!==void 0&&n.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'createClient' to 'false'.");const o=typeof window<"u"&&window.location&&window.location.hostname,s=o&&bme(window.location.hostname);o&&s&&n.token&&n.ignoreBrowserTokenWarning!==!0?mme():typeof n.useCdn>"u"&&hme(),i&&ime(n.projectId),n.dataset&&L9(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?V9(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion="".concat(n.apiVersion).replace(/^v/,""),n.isDefaultApi=n.apiHost===bx.apiHost,n.useCdn=n.useCdn!==!1&&!n.withCredentials,xme(n.apiVersion);const a=n.apiHost.split("://",2),l=a[0],c=a[1],u=n.isDefaultApi?gme:c;return n.useProjectHostname?(n.url="".concat(l,"://").concat(n.projectId,".").concat(c,"/v").concat(n.apiVersion),n.cdnUrl="".concat(l,"://").concat(n.projectId,".").concat(u,"/v").concat(n.apiVersion)):(n.url="".concat(n.apiHost,"/v").concat(n.apiVersion),n.cdnUrl=n.url),n},_me="X-Sanity-Project-ID";function wme(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r={},n=e.token||t.token;n&&(r.Authorization="Bearer ".concat(n)),!e.useGlobalApi&&!t.useProjectHostname&&t.projectId&&(r[_me]=t.projectId);const i=!!(typeof e.withCredentials>"u"?t.token||t.withCredentials:e.withCredentials),o=typeof e.timeout>"u"?t.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},r,e.headers||{}),timeout:typeof o>"u"?5*60*1e3:o,proxy:e.proxy||t.proxy,json:!0,withCredentials:i,fetch:typeof e.fetch=="object"&&typeof t.fetch=="object"?{...t.fetch,...e.fetch}:e.fetch||t.fetch})}const sG=t=>{let{query:e,params:r={},options:n={}}=t;const i=new URLSearchParams,{tag:o,...s}=n;o&&i.append("tag",o),i.append("query",e);for(const[a,l]of Object.entries(r))i.append("$".concat(a),JSON.stringify(l));for(const[a,l]of Object.entries(s))l&&i.append(a,"".concat(l));return"?".concat(i)},Sme=(t,e)=>t===!1?void 0:typeof t>"u"?e:t,Eme=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{dryRun:t.dryRun,returnIds:!0,returnDocuments:Sme(t.returnDocuments,!0),visibility:t.visibility||"sync",autoGenerateArrayKeys:t.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:t.skipCrossDatasetReferenceValidation}},_O=t=>t.type==="response",Ame=t=>t.body,Cme=(t,e)=>t.reduce((r,n)=>(r[e(n)]=n,r),Object.create(null)),Tme=11264;function aG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=i.filterResponse===!1?u=>u:u=>u.result,{cache:s,next:a,...l}={useAbortSignal:typeof i.signal<"u",...i},c=typeof s<"u"||typeof a<"u"?{...l,fetch:{cache:s,next:a}}:l;return vg(t,e,"query",{query:r,params:n},c).pipe(Tc(o))}function lG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:Wd(t,"doc",r),json:!0,tag:n.tag};return bg(t,e,i).pipe(gg(_O),Tc(o=>o.body.documents&&o.body.documents[0]))}function cG(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i={uri:Wd(t,"doc",r.join(",")),json:!0,tag:n.tag};return bg(t,e,i).pipe(gg(_O),Tc(o=>{const s=Cme(o.body.documents||[],a=>a._id);return r.map(a=>s[a]||null)}))}function uG(t,e,r,n){return vx("createIfNotExists",r),Hw(t,e,r,"createIfNotExists",n)}function fG(t,e,r,n){return vx("createOrReplace",r),Hw(t,e,r,"createOrReplace",n)}function dG(t,e,r,n){return vg(t,e,"mutate",{mutations:[{delete:F9(r)}]},n)}function hG(t,e,r,n){let i;r instanceof $p||r instanceof jp?i={patch:r.serialize()}:r instanceof tG||r instanceof nG?i=r.serialize():i=r;const o=Array.isArray(i)?i:[i],s=n&&n.transactionId||void 0;return vg(t,e,"mutate",{mutations:o,transactionId:s},n)}function vg(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=r==="mutate",s=r==="query",a=o?"":sG(n),l=!o&&a.length<Tme,c=l?a:"",u=i.returnFirst,{timeout:d,token:h,tag:p,headers:m}=i,y=Wd(t,r,c),g={method:l?"GET":"POST",uri:y,json:!0,body:l?void 0:n,query:o&&Eme(i),timeout:d,headers:m,token:h,tag:p,perspective:i.perspective,resultSourceMap:i.resultSourceMap,canUseCdn:s,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal};return bg(t,e,g).pipe(gg(_O),Tc(Ame),Tc(b=>{if(!o)return b;const v=b.results||[];if(i.returnDocuments)return u?v[0]&&v[0].document:v.map(_=>_.document);const x=u?"documentId":"documentIds",S=u?v[0]&&v[0].id:v.map(_=>_.id);return{transactionId:b.transactionId,results:v,[x]:S}}))}function Hw(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o={[n]:r},s=Object.assign({returnFirst:!0,returnDocuments:!0},i);return vg(t,e,"mutate",{mutations:[o]},s)}function bg(t,e,r){var n;const i=r.url||r.uri,o=t.config(),s=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&i.indexOf("/data/")===0:r.canUseCdn;let a=o.useCdn&&s;const l=r.tag&&o.requestTagPrefix?[o.requestTagPrefix,r.tag].join("."):r.tag||o.requestTagPrefix;if(l&&r.tag!==null&&(r.query={tag:V9(l),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&i.indexOf("/data/query/")===0){const d=(n=r.resultSourceMap)!=null?n:o.resultSourceMap;d!==void 0&&d!==!1&&(r.query={resultSourceMap:d,...r.query});const h=r.perspective||o.perspective;typeof h=="string"&&h!=="raw"&&(iG(h),r.query={perspective:h,...r.query},h==="previewDrafts"&&a&&(a=!1,pme()))}const c=wme(o,Object.assign({},r,{url:wO(t,i,a)})),u=new Cm(d=>e(c,o.requester).subscribe(d));return r.signal?u.pipe(Pme(r.signal)):u}function co(t,e,r){return bg(t,e,r).pipe(gg(i=>i.type==="response"),Tc(i=>i.body))}function Wd(t,e,r){const n=t.config(),i=U9(n),o="/".concat(e,"/").concat(i),s=r?"".concat(o,"/").concat(r):o;return"/data".concat(s).replace(/\/($|\?)/,"$1")}function wO(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{url:n,cdnUrl:i}=t.config(),o=r?i:n;return"".concat(o,"/").concat(e.replace(/^\//,""))}function Pme(t){return e=>new Cm(r=>{const n=()=>r.error(Nme(t));if(t&&t.aborted){n();return}const i=e.subscribe(r);return t.addEventListener("abort",n),()=>{t.removeEventListener("abort",n),i.unsubscribe()}})}const Ime=!!globalThis.DOMException;function Nme(t){var e,r;if(Ime)return new DOMException((e=t==null?void 0:t.reason)!=null?e:"The operation was aborted.","AbortError");const n=new Error((r=t==null?void 0:t.reason)!=null?r:"The operation was aborted.");return n.name="AbortError",n}var pG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},xx=(t,e,r)=>(pG(t,e,"read from private field"),r?r.call(t):e.get(t)),_x=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},wx=(t,e,r,n)=>(pG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),L0,B0,U0,V0;class kme{constructor(e,r){_x(this,L0,void 0),_x(this,B0,void 0),wx(this,L0,e),wx(this,B0,r)}upload(e,r,n){return mG(xx(this,L0),xx(this,B0),e,r,n)}}L0=new WeakMap;B0=new WeakMap;class Ome{constructor(e,r){_x(this,U0,void 0),_x(this,V0,void 0),wx(this,U0,e),wx(this,V0,r)}upload(e,r,n){const i=mG(xx(this,U0),xx(this,V0),e,r,n);return Er(i.pipe(gg(o=>o.type==="response"),Tc(o=>o.body.document)))}}U0=new WeakMap;V0=new WeakMap;function mG(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};ome(r);let o=i.extract||void 0;o&&!o.length&&(o=["none"]);const s=U9(t.config()),a=r==="image"?"images":"files",l=Rme(i,n),{tag:c,label:u,title:d,description:h,creditLine:p,filename:m,source:y}=l,g={label:u,title:d,description:h,filename:m,meta:o,creditLine:p};return y&&(g.sourceId=y.id,g.sourceName=y.name,g.sourceUrl=y.url),bg(t,e,{tag:c,method:"POST",timeout:l.timeout||0,uri:"/assets/".concat(a,"/").concat(s),headers:l.contentType?{"Content-Type":l.contentType}:{},query:g,body:n})}function Rme(t,e){return typeof File>"u"||!(e instanceof File)?t:Object.assign({filename:t.preserveFilename===!1?void 0:e.name,contentType:e.type},t)}var jme=(t,e)=>Object.keys(e).concat(Object.keys(t)).reduce((r,n)=>(r[n]=typeof t[n]>"u"?e[n]:t[n],r),{});const $me=(t,e)=>e.reduce((r,n)=>(typeof t[n]>"u"||(r[n]=t[n]),r),{}),Dme=16e3-1200,Mme=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],Fme={includeResult:!0};function yG(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{url:n,token:i,withCredentials:o,requestTagPrefix:s}=this.config(),a=r.tag&&s?[s,r.tag].join("."):r.tag,l={...jme(r,Fme),tag:a},c=$me(l,Mme),u=sG({query:t,params:e,options:{tag:a,...c}}),d="".concat(n).concat(Wd(this,"listen",u));if(d.length>Dme)return new Cm(y=>y.error(new Error("Query too large for listener")));const h=l.events?l.events:["mutation"],p=h.indexOf("reconnect")!==-1,m={};return(i||o)&&(m.withCredentials=!0),i&&(m.headers={Authorization:"Bearer ".concat(i)}),new Cm(y=>{let g;I().then(O=>{g=O}).catch(O=>{y.error(O),P()});let b,v=!1;function x(){v||(C(),!v&&g.readyState===g.CLOSED&&(A(),clearTimeout(b),b=setTimeout(T,100)))}function S(O){y.error(Lme(O))}function _(O){const N=gG(O);return N instanceof Error?y.error(N):y.next(N)}function w(){v=!0,A(),y.complete()}function A(){g&&(g.removeEventListener("error",x),g.removeEventListener("channelError",S),g.removeEventListener("disconnect",w),h.forEach(O=>g.removeEventListener(O,_)),g.close())}function C(){p&&y.next({type:"reconnect"})}async function I(){const{default:O}=await oW(()=>import("./browser-39d5db7e.js").then(j=>j.b),[]),N=new O(d,m);return N.addEventListener("error",x),N.addEventListener("channelError",S),N.addEventListener("disconnect",w),h.forEach(j=>N.addEventListener(j,_)),N}function T(){I().then(O=>{g=O}).catch(O=>{y.error(O),P()})}function P(){v=!0,A()}return P})}function gG(t){try{const e=t.data&&JSON.parse(t.data)||{};return Object.assign({type:t.type},e)}catch(e){return e}}function Lme(t){if(t instanceof Error)return t;const e=gG(t);return e instanceof Error?e:new Error(Bme(e))}function Bme(t){return t.error?t.error.description?t.error.description:typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2):t.message||"Unknown listener error"}var vG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},an=(t,e,r)=>(vG(t,e,"read from private field"),r?r.call(t):e.get(t)),Sx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ex=(t,e,r,n)=>(vG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_l,wl,Sl,El;class Ume{constructor(e,r){Sx(this,_l,void 0),Sx(this,wl,void 0),Ex(this,_l,e),Ex(this,wl,r)}create(e,r){return cf(an(this,_l),an(this,wl),"PUT",e,r)}edit(e,r){return cf(an(this,_l),an(this,wl),"PATCH",e,r)}delete(e){return cf(an(this,_l),an(this,wl),"DELETE",e)}list(){return co(an(this,_l),an(this,wl),{uri:"/datasets",tag:null})}}_l=new WeakMap;wl=new WeakMap;class Vme{constructor(e,r){Sx(this,Sl,void 0),Sx(this,El,void 0),Ex(this,Sl,e),Ex(this,El,r)}create(e,r){return Er(cf(an(this,Sl),an(this,El),"PUT",e,r))}edit(e,r){return Er(cf(an(this,Sl),an(this,El),"PATCH",e,r))}delete(e){return Er(cf(an(this,Sl),an(this,El),"DELETE",e))}list(){return Er(co(an(this,Sl),an(this,El),{uri:"/datasets",tag:null}))}}Sl=new WeakMap;El=new WeakMap;function cf(t,e,r,n,i){return L9(n),co(t,e,{method:r,uri:"/datasets/".concat(n),body:i,tag:null})}var bG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ma=(t,e,r)=>(bG(t,e,"read from private field"),r?r.call(t):e.get(t)),Ax=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Cx=(t,e,r,n)=>(bG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),np,ip,op,sp;class Wme{constructor(e,r){Ax(this,np,void 0),Ax(this,ip,void 0),Cx(this,np,e),Cx(this,ip,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return co(ma(this,np),ma(this,ip),{uri:r})}getById(e){return co(ma(this,np),ma(this,ip),{uri:"/projects/".concat(e)})}}np=new WeakMap;ip=new WeakMap;class zme{constructor(e,r){Ax(this,op,void 0),Ax(this,sp,void 0),Cx(this,op,e),Cx(this,sp,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return Er(co(ma(this,op),ma(this,sp),{uri:r}))}getById(e){return Er(co(ma(this,op),ma(this,sp),{uri:"/projects/".concat(e)}))}}op=new WeakMap;sp=new WeakMap;var xG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Tx=(t,e,r)=>(xG(t,e,"read from private field"),r?r.call(t):e.get(t)),Px=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ix=(t,e,r,n)=>(xG(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),W0,z0,G0,q0;class Gme{constructor(e,r){Px(this,W0,void 0),Px(this,z0,void 0),Ix(this,W0,e),Ix(this,z0,r)}getById(e){return co(Tx(this,W0),Tx(this,z0),{uri:"/users/".concat(e)})}}W0=new WeakMap;z0=new WeakMap;class qme{constructor(e,r){Px(this,G0,void 0),Px(this,q0,void 0),Ix(this,G0,e),Ix(this,q0,r)}getById(e){return Er(co(Tx(this,G0),Tx(this,q0),{uri:"/users/".concat(e)}))}}G0=new WeakMap;q0=new WeakMap;var _G=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ne=(t,e,r)=>(_G(t,e,"read from private field"),r?r.call(t):e.get(t)),Nx=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},kx=(t,e,r,n)=>(_G(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Al,yr,Cl,ir;const Hme=class lP{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bx;Nx(this,Al,void 0),Nx(this,yr,void 0),this.listen=yG,this.config(r),kx(this,yr,e),this.assets=new kme(this,Ne(this,yr)),this.datasets=new Ume(this,Ne(this,yr)),this.projects=new Wme(this,Ne(this,yr)),this.users=new Gme(this,Ne(this,yr))}clone(){return new lP(Ne(this,yr),this.config())}config(e){if(e===void 0)return{...Ne(this,Al)};if(Ne(this,Al)&&Ne(this,Al).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return kx(this,Al,oG(e,Ne(this,Al)||{})),this}withConfig(e){return new lP(Ne(this,yr),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return aG(this,Ne(this,yr),e,r,n)}getDocument(e,r){return lG(this,Ne(this,yr),e,r)}getDocuments(e,r){return cG(this,Ne(this,yr),e,r)}create(e,r){return Hw(this,Ne(this,yr),e,"create",r)}createIfNotExists(e,r){return uG(this,Ne(this,yr),e,r)}createOrReplace(e,r){return fG(this,Ne(this,yr),e,r)}delete(e,r){return dG(this,Ne(this,yr),e,r)}mutate(e,r){return hG(this,Ne(this,yr),e,r)}patch(e,r){return new jp(e,r,this)}transaction(e){return new nG(e,this)}request(e){return co(this,Ne(this,yr),e)}getUrl(e,r){return wO(this,e,r)}getDataUrl(e,r){return Wd(this,e,r)}};Al=new WeakMap;yr=new WeakMap;let Kme=Hme;const Yme=class cP{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bx;Nx(this,Cl,void 0),Nx(this,ir,void 0),this.listen=yG,this.config(r),kx(this,ir,e),this.assets=new Ome(this,Ne(this,ir)),this.datasets=new Vme(this,Ne(this,ir)),this.projects=new zme(this,Ne(this,ir)),this.users=new qme(this,Ne(this,ir)),this.observable=new Kme(e,r)}clone(){return new cP(Ne(this,ir),this.config())}config(e){if(e===void 0)return{...Ne(this,Cl)};if(Ne(this,Cl)&&Ne(this,Cl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),kx(this,Cl,oG(e,Ne(this,Cl)||{})),this}withConfig(e){return new cP(Ne(this,ir),{...this.config(),...e})}fetch(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Er(aG(this,Ne(this,ir),e,r,n))}getDocument(e,r){return Er(lG(this,Ne(this,ir),e,r))}getDocuments(e,r){return Er(cG(this,Ne(this,ir),e,r))}create(e,r){return Er(Hw(this,Ne(this,ir),e,"create",r))}createIfNotExists(e,r){return Er(uG(this,Ne(this,ir),e,r))}createOrReplace(e,r){return Er(fG(this,Ne(this,ir),e,r))}delete(e,r){return Er(dG(this,Ne(this,ir),e,r))}mutate(e,r){return Er(hG(this,Ne(this,ir),e,r))}patch(e,r){return new $p(e,r,this)}transaction(e){return new tG(e,this)}request(e){return Er(co(this,Ne(this,ir),e))}dataRequest(e,r,n){return Er(vg(this,Ne(this,ir),e,r,n))}getUrl(e,r){return wO(this,e,r)}getDataUrl(e,r){return Wd(this,e,r)}};Cl=new WeakMap;ir=new WeakMap;let Qme=Yme;function Xme(t,e){return{requester:mF(t,{}).defaultRequester,createClient:o=>new e(mF(t,{maxRetries:o.maxRetries,retryDelay:o.retryDelay}),o)}}var Jme=[];const Zme=Xme(Jme,Qme),eye=Zme.createClient,SO='_id, name, nickname, designation, "portraitImage": portraitImage.asset->url',Io='_id, "slug": slug.current, name, secondaryName, thirdName, "squareLogoImage": squareLogoImage.asset->url, "color": color.hex, description',ya=`team->{${Io}}, player->{${SO}}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url`,zd=eye({projectId:"0a9a4r26",dataset:"production",useCdn:!0,apiVersion:"2023-05-03",token:{}.VITE_DATABASE_API_KEY}),tye=async(t,e)=>{const r=await zd.fetch(`*[_type == "teamPlayer" && team._ref in [${t.map(i=>`"${i}"`).join(",")}]] | { "teamId": team._ref, player->{${SO}, "statistics": statistics[_key=="${e}"][0] } }`),n={};for(let i=0;i<r.length;i++){const o=r[i];n[o.teamId]||(n[o.teamId]=[]),n[o.teamId].push(No(null,o))}return n},rye=()=>zd.fetch(`*[_type == "match" && !(_id in path("drafts.**")) && (status == "initialized" || status == "streaming")] | order(startAt asc)[0...10]{ _id, name, playerEast->{${ya}}, playerSouth->{${ya}}, playerWest->{${ya}}, playerNorth->{${ya}}, playerEastTeam->{${Io}}, playerSouthTeam->{${Io}}, playerWestTeam->{${Io}}, playerNorthTeam->{${Io}}, startAt, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax}}`).then(t=>t.map(e=>{const{playerEast:r,playerEastTeam:n,playerSouth:i,playerSouthTeam:o,playerWest:s,playerWestTeam:a,playerNorth:l,playerNorthTeam:c,...u}=e,d={...u,nameAlt:u.name.startsWith("常規賽 #23Pre")?`常規賽 ${u.startAt.substring(0,10)} 第${u.name[u.name.length-1]}回戰`:u.name,playerEast:No(n,r),playerSouth:No(o,i),playerWest:No(a,s),playerNorth:No(c,l),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(r&&n&&i&&o&&s&&a&&l&&c){const h={[r.team._id]:"playerEast",[i.team._id]:"playerSouth",[s.team._id]:"playerWest",[l.team._id]:"playerNorth"};d._order=[h[n._id],h[o._id],h[a._id],h[c._id]]}return d})),EO=async(t,e)=>{const r=await zd.fetch(`*[_type == "match" && _id == "${t}"]{ _id, name, playerEast->{${ya}}, playerSouth->{${ya}}, playerWest->{${ya}}, playerNorth->{${ya}}, playerEastTeam->{${Io}}, playerSouthTeam->{${Io}}, playerWestTeam->{${Io}}, playerNorthTeam->{${Io}}, startAt, youtubeUrl, bilibiliUrl, result, rounds, tournament->{_id, name, "logoUrl": logo.asset->url, startingScore, isManganRoundUp, yakuMax, yakumanMax, teams[]{ "_id": team._ref, matchCount, ranking, point }}}`).then(n=>{const{playerEast:i,playerEastTeam:o,playerSouth:s,playerSouthTeam:a,playerWest:l,playerWestTeam:c,playerNorth:u,playerNorthTeam:d,...h}=n[0],p={...h,nameAlt:h.name.startsWith("常規賽 #23Pre")?`常規賽 ${h.startAt.substring(0,10)} 第${h.name[h.name.length-1]}回戰`:h.name,playerEast:No(o,i),playerSouth:No(a,s),playerWest:No(c,l),playerNorth:No(d,u),_order:["playerEast","playerSouth","playerWest","playerNorth"]};if(i&&o&&s&&a&&l&&c&&u&&d){const m={[i.team._id]:"playerEast",[s.team._id]:"playerSouth",[l.team._id]:"playerWest",[u.team._id]:"playerNorth"};p._order=[m[o._id],m[a._id],m[c._id],m[d._id]]}return p});if(e){const n=[r.playerEast.playerId,r.playerSouth.playerId,r.playerWest.playerId,r.playerNorth.playerId].filter(i=>i!=="");if(n.length>0){const i=await nye(n,r.tournament._id);r.playerEast.playerStatistic=i[r.playerEast.playerId],r.playerSouth.playerStatistic=i[r.playerSouth.playerId],r.playerWest.playerStatistic=i[r.playerWest.playerId],r.playerNorth.playerStatistic=i[r.playerNorth.playerId]}r.playerEast.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerEast.teamId)||null,r.playerSouth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerSouth.teamId)||null,r.playerWest.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerWest.teamId)||null,r.playerNorth.teamStatistic=r.tournament.teams.find(({_id:i})=>i===r.playerNorth.teamId)||null}return r},nye=async(t,e)=>zd.fetch(`*[_type=="player" && _id in [${t.map(r=>`"${r}"`).join(",")}]]{ _id, "statistics": statistics[_key=="${e}"][0] }`).then(r=>r.reduce((n,i)=>{if(!i.statistics||i.statistics.matchCount<=0)return n;const o={point:i.statistics.point,matchCount:i.statistics.matchCount,nonFourthP:1-i.statistics.fourthCount/i.statistics.matchCount,firstAndSecondP:(i.statistics.firstCount+i.statistics.secondCount)/i.statistics.matchCount,riichiP:i.statistics.riichiCount/i.statistics.roundCount,ronP:i.statistics.ronCount/i.statistics.roundCount,chuckP:i.statistics.chuckCount/i.statistics.roundCount,revealP:i.statistics.revealCount/i.statistics.roundCount,ronPureScoreAvg:i.statistics.ronPureScoreAvg,chuckPureScoreAvg:i.statistics.chuckPureScoreAvg};return n[i._id]=o,n},{})),ap=t=>{const e=`${t.playerPortraitImageUrl}?w=360&h=500`,r=`${t.teamLogoImageUrl}?w=500&h=500`,n=`${t.teamLogoImageUrl}?w=1000&h=1000`,i=t.playerDesignation,o=t.playerName,s=t.color;return{name:o,nickname:t.playerNickname,color:s,title:i,teamPicUrl:r,largeTeamPicUrl:n,proPicUrl:e}},No=(t,e)=>{const r={playerId:"",playerName:"",playerNickname:"",playerDesignation:"",playerPortraitImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png",playerFullname:"",playerStatistic:null,teamId:"",teamName:"",teamSecondaryName:"",teamThirdName:"",teamFullname:"",teamStatistic:null,color:"#000000",teamLogoImageUrl:"https://hkleague2024.hkmahjong.org/images/empty.png"};if(e){if(e.player){r.playerId=e.player._id,r.playerName=e.player.name,e.player.nickname&&(r.playerNickname=e.player.nickname),e.player.designation&&(r.playerDesignation=e.player.designation),e.player.portraitImage&&(r.playerPortraitImageUrl=e.player.portraitImage);const n=e.player.statistics;r.playerStatistic=n&&n.matchCount>0?{point:n.point,matchCount:n.matchCount,nonFourthP:1-n.fourthCount/n.matchCount,firstAndSecondP:(n.firstCount+n.secondCount)/n.matchCount,riichiP:n.riichiCount/n.roundCount,ronP:n.ronCount/n.roundCount,chuckP:n.chuckCount/n.roundCount,revealP:n.revealCount/n.roundCount,ronPureScoreAvg:n.ronPureScoreAvg,chuckPureScoreAvg:n.chuckPureScoreAvg}:null}e.team&&(r.teamId=e.team._id,r.teamName=e.team.name,r.teamSecondaryName=e.team.secondaryName,r.teamThirdName=e.team.thirdName,r.color=e.team.color,e.team.squareLogoImage&&(r.teamLogoImageUrl=e.team.squareLogoImage)),r.playerFullname=r.playerName+(r.playerNickname?` (${r.playerNickname})`:""),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "),r.playerDesignation=r.teamFullname,e.overridedDesignation&&(r.playerDesignation=e.overridedDesignation),e.overridedName&&(r.playerName=e.overridedName),e.overridedNickname&&(r.playerNickname=e.overridedNickname),e.overridedColor&&(r.color=e.overridedColor),e.overridedPortraitImage&&(r.playerPortraitImageUrl=e.overridedPortraitImage)}else t&&(r.teamId=t._id,r.teamName=t.name,r.teamSecondaryName=t.secondaryName,r.teamThirdName=t.thirdName,r.color=t.color,t.squareLogoImage&&(r.teamLogoImageUrl=t.squareLogoImage),r.teamFullname=[r.teamName,r.teamSecondaryName,r.teamThirdName].filter(n=>!!n).join(" "));return r},AO=async t=>await zd.fetch(`*[_type == "matchTournament" && _id == "${t}"][0]{..., "logoUrl": logo.asset->url, teams[]{..., team->{${Io}}}}`),iye=async t=>await zd.fetch(`*[_type=="teamPlayer" && !(_id in path("drafts.**")) && defined(player->statistics[_key=="${t}"])]{"teamId": team._ref, player->{${SO}, "statistics": statistics[_key=="${t}"][0]}, overridedDesignation, overridedName, overridedNickname, "overridedColor": overridedColor.hex, "overridedPortraitImage": overridedPortraitImage.asset->url}`);AO("b6908027-9179-485a-8bce-822c42114371");const vF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function oye(){const t=E.useCallback(()=>{window.navigator.clipboard.writeText(vF)},[]);return f.jsx("div",{className:"flex items-center justify-center gap-x-8",children:f.jsxs("div",{children:[f.jsx("p",{children:"1. 打開OBS"}),f.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),f.jsxs("p",{children:["- 網址 = ",f.jsx("strong",{children:"上述網址"}),f.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",f.jsx("br",{})," - 自訂CSS ="," ",f.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[f.jsx("pre",{children:vF}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx("button",{type:"button",onClick:t,children:f.jsx("i",{className:"bi bi-copy"})})})]}),f.jsx("br",{}),"其餘默認即可。"]}),f.jsx("p",{children:"4. 確定"})]})})}let sye=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const cs=(t=12)=>sye(t),aye=()=>{const t=new Date;return`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`},uP=t=>`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${t}`,CO=t=>{let e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);e=Math.round(e*1.25),r=Math.round(r*1.25),n=Math.round(n*1.25),e=e<255?e:255,r=r<255?r:255,n=n<255?n:255,e=Math.round(e),r=Math.round(r),n=Math.round(n);const i=e.toString(16).length===1?`0${e.toString(16)}`:e.toString(16),o=r.toString(16).length===1?`0${r.toString(16)}`:r.toString(16),s=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16);return`#${i}${o}${s}`},lye=t=>{switch(t){case"12":return"三倍滿 (12翻)";case"13":return"累計役滿 (13翻)"}return"(未知)"},cye=t=>{switch(t){case"13":return"單倍役滿";case"26":return"雙倍役滿";case"39":return"三倍役滿";case"130":return"無上限"}return"(未知)"},us=t=>typeof t>"u"||t===null?"-":t>=0?`+${t.toFixed(1)}`:`▲${Math.abs(t).toFixed(1)}`,nd=t=>typeof t>"u"||t===null?"-":t===1||t==="1"?"1st":t===2||t==="2"?"2nd":t===3||t==="3"?"3rd":`${t}th`,Bs=t=>typeof t>"u"||t===null?"-":t.toFixed(2),Tv=t=>t===0?t.toLocaleString("en-US"):t>0?`${Math.floor(t).toLocaleString("en-US")}`:Math.floor(t).toLocaleString("en-US"),Us=({teamPlayer:t})=>{const e=`${t.playerPortraitImageUrl}?w=64&h=64&fit=crop&crop=top`,r=`${t.teamLogoImageUrl}?w=64&h=64`,n=t.playerDesignation,i=t.playerName,o=t.color;return f.jsxs("div",{className:"flex justify-start items-center gap-x-1 border-l-4 pl-2",style:{borderColor:o},children:[f.jsx("div",{className:"w-8 h-8",children:r&&f.jsx("img",{src:r,alt:n})}),f.jsx("div",{className:"w-8 h-8",children:e&&f.jsx("img",{src:e,alt:i})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm text-neutral-600",children:n}),f.jsx("p",{className:"font-bold",children:i})]})]})};function uye(){const{data:t,refetch:e}=qa({queryKey:["matches"],queryFn:rye}),{data:r,set:n}=Zr("obs/1");E.useCallback(o=>{const s=o.currentTarget.getAttribute("data-id");s&&confirm(`請確定上一局對局已經結束才開始新的直播！！
確定要開始直播新的對局嗎？`)&&n({matchId:s})},[n]);const i=E.useMemo(()=>t==null?void 0:t.find(o=>o._id===(r==null?void 0:r.matchId)),[t,r==null?void 0:r.matchId]);return f.jsx("div",{className:"container mx-auto",children:f.jsxs("div",{className:"h-screen flex flex-col py-16 gap-y-12",children:[f.jsx("div",{className:"shrink-0",children:f.jsxs("h1",{className:"text-4xl font-bold text-center",children:[f.jsx("img",{src:"/images/master-logo.jpeg",className:"inline-block w-16",alt:"HKMSCA"})," ",f.jsx("span",{children:"日麻比賽直播系統 (牌藝攻防)"})]})}),f.jsxs("div",{className:"shrink-0 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-x-4",children:[f.jsx("div",{children:f.jsxs("div",{className:"px-8 py-4 bg-green-300 border-2 border-green-600 text-center space-y-4",children:[f.jsx("p",{className:"text-3xl font-bold text-green-900",children:"OBS設定"}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:f.jsx("a",{href:`${location.origin}/obs/1/weekly-summary`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"一週結算"})}),f.jsxs("div",{className:"bg-white rounded p-4 space-y-4",children:[!i&&f.jsx("p",{className:"text-center",children:"請在下方表格直播一場新的賽事"}),i&&f.jsx("p",{className:"text-center font-bold text-red-500",children:"LIVE 直播中"}),i&&f.jsx("div",{children:f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx(Us,{teamPlayer:i.playerEast}),f.jsx(Us,{teamPlayer:i.playerSouth}),f.jsx(Us,{teamPlayer:i.playerWest}),f.jsx(Us,{teamPlayer:i.playerNorth})]})}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("p",{children:"開始前倒數"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=5`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"5分鐘"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=10`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"10分鐘"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=15`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"15分鐘"}),f.jsx("a",{href:`${location.origin}/obs/1/forecast?m=20`,target:"_blank",className:"text-black bg-red-800 bg-opacity-50 p-2 rounded hover:text-black",children:"20分鐘"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx("a",{href:`${location.origin}/obs/1/introduction`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"賽前介紹"}),f.jsx("a",{href:`${location.origin}/obs/1`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"直播頁面"}),f.jsx("a",{href:`${location.origin}/obs/1/summary`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"賽後結果"})]})]}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:f.jsx("a",{href:`${location.origin}/obs/1/end`,target:"_blank",className:"text-black bg-black bg-opacity-20 p-2 rounded hover:text-black",children:"今日賽事已完結"})}),f.jsx("div",{className:"text-left",children:f.jsx(oye,{})})]})}),f.jsx("div",{children:f.jsxs("div",{className:"px-8 py-4 bg-blue-300 border-2 border-blue-600 text-center space-y-4",children:[f.jsx("p",{className:"text-3xl font-bold text-blue-900",children:"主播"}),f.jsxs("p",{className:"text-2xl",children:["固定的紀錄頁面：",f.jsxs("a",{href:`${location.origin}/obs/1/stat`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/stat"]})]}),f.jsxs("p",{className:"text-2xl",children:["固定的Overlay頁面：",f.jsxs("a",{href:`${location.origin}/obs/1/stat`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/overlay"]})]}),f.jsx("div",{className:"pt-16",children:f.jsx("img",{className:"mx-auto block w-64 h-64",src:uP(`${location.origin}/obs/1/stat`),alt:""})})]})}),f.jsx("div",{children:f.jsxs("div",{className:"px-8 py-4 bg-yellow-300 border-2 border-yellow-600 text-center space-y-4",children:[f.jsx("p",{className:"text-3xl font-bold text-yellow-900",children:"控制台"}),f.jsxs("p",{className:"text-2xl",children:["固定的控制台頁面：",f.jsxs("a",{href:`${location.origin}/obs/1/control`,target:"_blank",className:"text-black",children:[location.origin,"/obs/1/control"]})]}),f.jsx("div",{className:"pt-16",children:f.jsx("img",{className:"mx-auto block w-64 h-64",src:uP(`${location.origin}/obs/1/control`),alt:""})})]})})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-right mb-2",children:f.jsxs(Re,{color:"secondary",onClick:()=>e(),children:[f.jsx("i",{className:"bi bi-arrow-repeat"})," 刷新"]})}),f.jsxs("table",{className:"data-table w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"對局"}),f.jsx("th",{children:"東"}),f.jsx("th",{children:"南"}),f.jsx("th",{children:"西"}),f.jsx("th",{children:"北"}),f.jsx("th",{className:"text-right",children:"操作"})]})}),f.jsx("tbody",{children:t==null?void 0:t.map(o=>f.jsxs("tr",{children:[f.jsxs("th",{children:[f.jsx("p",{children:o.name}),f.jsx("p",{className:"font-normal text-sm text-neutral-600",children:o.tournament.name})]}),f.jsx("td",{children:f.jsx(Us,{teamPlayer:o.playerEast})}),f.jsx("td",{children:f.jsx(Us,{teamPlayer:o.playerSouth})}),f.jsx("td",{children:f.jsx(Us,{teamPlayer:o.playerWest})}),f.jsx("td",{children:f.jsx(Us,{teamPlayer:o.playerNorth})}),f.jsxs("td",{className:"space-x-2 text-right",children:[f.jsxs("div",{className:"space-x-2",children:[f.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/square`,target:"_blank",children:[f.jsx("i",{className:"bi bi-card-image"})," 出Post圖"]}),f.jsxs("a",{href:`https://hkleague2024.hkmahjong.org/api/schedule/${o.startAt.substring(0,10)}/thumbnail`,target:"_blank",children:[f.jsx("i",{className:"bi bi-youtube"})," YT Thumbnail"]}),f.jsxs("a",{href:`/match/${o._id}/nameplates`,target:"_blank",children:[f.jsx("i",{className:"bi bi-person-badge"})," 名牌"]})]}),f.jsxs("div",{className:"space-x-2",children:[f.jsxs("a",{href:`/match/${o._id}/forecast?startAt=${o.name.endsWith("2")?"21":"19"}:30`,target:"_blank",children:[f.jsx("i",{className:"bi bi-bell"})," 倒數"]}),f.jsxs("a",{href:`/match/${o._id}/introduction`,target:"_blank",children:[f.jsx("i",{className:"bi bi-person-vcard"})," 介紹"]}),f.jsxs("a",{href:`/match/${o._id}/summary`,target:"_blank",children:[f.jsx("i",{className:"bi bi-trophy"})," 結果"]}),o._id===(r==null?void 0:r.matchId)?f.jsxs("span",{className:"bg-red-600 px-2 py-1 rounded text-white",children:[f.jsx("i",{className:"bi bi-record-circle"})," LIVE 直播中"]}):f.jsxs("a",{href:`/match/${o._id}/control`,target:"_blank",className:"text-red-600",children:[f.jsx("i",{className:"bi bi-record-circle"})," 直播"]})]})]})]},o._id))})]})]}),f.jsx("div",{children:f.jsx("div",{className:"text-center space-x-4",children:f.jsx("a",{href:"https://hkmjbs.sanity.studio/",target:"_blank",children:f.jsxs(Re,{color:"secondary",children:["資料庫 ",f.jsx("i",{className:"bi bi-box-arrow-up-right"})]})})})}),f.jsx("div",{className:"flex gap-x-4"})]})]})})}const fye=t=>{const e={};for(let r=0;r<t.length;r+=1)e[r.toString()]=t[r];return e},bF=t=>{if(t.length!==0)return t[t.length-1]},Jo=t=>{const{data:e,update:r}=Zr(`/matches/${t}`),{data:n,update:i,push:o}=Zr("matchRounds",{order:{byChild:"matchId"},filter:{equalTo:t}}),s=E.useMemo(()=>bF(Object.values(n??{}))??void 0,[n]),a=E.useMemo(()=>Object.values((s==null?void 0:s.doras)??{}),[s]),l=E.useCallback((b,v)=>{const x=n==null?void 0:n[b];x&&i({[b]:{...x,...v}})},[n,i]),c=E.useCallback(b=>{const v=bF(Object.keys(n??{}));v&&i({[v]:{...s,...b}})},[s,n,i]),u=E.useCallback(b=>{c({doras:fye(b)})},[c]),d=E.useCallback(b=>{r({name:b})},[r]),h=E.useCallback(b=>{r({players:b})},[r]),p=E.useCallback(b=>{r({activeResultDetail:b})},[r]),m=E.useCallback(b=>{r({showPoints:b})},[r]),y=E.useCallback(b=>{r({hideHeader:b})},[r]),g=E.useCallback(b=>{i({[b]:{...n==null?void 0:n[b],hasBroadcasted:!0}})},[n,i]);return{match:e,matchRounds:n,matchCurrentRound:s,matchCurrentRoundDoras:a,setMatchName:d,setMatchPlayers:h,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchActiveResultDetail:p,setMatchRoundHasBroadcastedToTrue:g,setCurrentRoundDoras:u,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:o}};var Ve=(t=>(t[t.Unknown=0]="Unknown",t[t.Exhausted=-1]="Exhausted",t[t.Ron=1]="Ron",t[t.SelfDrawn=2]="SelfDrawn",t[t.Hotfix=-2]="Hotfix",t))(Ve||{}),bt=(t=>(t[t.Unknown=0]="Unknown",t[t.NextRound=1]="NextRound",t[t.Extended=2]="Extended",t[t.NextRoundAndExtended=3]="NextRoundAndExtended",t[t.Hotfix=-2]="Hotfix",t[t.End=-1]="End",t))(bt||{}),yt=(t=>(t[t.Win=1]="Win",t[t.Lose=-1]="Lose",t[t.None=0]="None",t))(yt||{}),Dn=(t=>(t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North",t))(Dn||{});const ZE=[Dn.East,Dn.South,Dn.West,Dn.North],xF=["0","1","2","3"],dye=t=>parseInt(t,10),Bc=(t,e)=>ZE[(4+dye(t)-(e-1)%ZE.length)%ZE.length],Jn=(t,e)=>Bc(t,e)===Dn.East,wG=(t,e)=>Bc(t,e)===Dn.South,SG=(t,e)=>Bc(t,e)===Dn.West,EG=(t,e)=>Bc(t,e)===Dn.North,AG=t=>t>=1&&t<=4,CG=t=>t>=5&&t<=8,TG=t=>t>=9&&t<=12,PG=t=>t>=13&&t<=16,ru={"1h20f":{ne:200,e:400,ner:1e3,er:1500},"1h25f":{ne:200,e:400,ner:1e3,er:1500},"1h30f":{ne:300,e:500,ner:1e3,er:1500},"1h40f":{ne:400,e:700,ner:1300,er:2e3},"1h50f":{ne:400,e:800,ner:1600,er:2400},"1h60f":{ne:500,e:1e3,ner:2e3,er:2900},"1h70f":{ne:600,e:1200,ner:2300,er:3400},"1h80f":{ne:700,e:1300,ner:2600,er:3900},"1h90f":{ne:800,e:1500,ner:2900,er:4400},"1h100f":{ne:800,e:1600,ner:3200,er:4800},"1h110f":{ne:900,e:1800,ner:3600,er:5300},"2h20f":{ne:400,e:700,ner:1500,er:2100},"2h25f":{ne:400,e:800,ner:1600,er:2400},"2h30f":{ne:500,e:1e3,ner:2e3,er:2900},"2h40f":{ne:700,e:1300,ner:2600,er:3900},"2h50f":{ne:800,e:1600,ner:3200,er:4800},"2h60f":{ne:1e3,e:2e3,ner:3900,er:5800},"2h70f":{ne:1200,e:2300,ner:4500,er:6800},"2h80f":{ne:1300,e:2600,ner:5200,er:7700},"2h90f":{ne:1500,e:2900,ner:5800,er:8700},"2h100f":{ne:1600,e:3200,ner:6400,er:9600},"2h110f":{ne:1800,e:3600,ner:7100,er:10600},"3h20f":{ne:700,e:1300,ner:2600,er:3900},"3h25f":{ne:800,e:1600,ner:3200,er:4800},"3h30f":{ne:1e3,e:2e3,ner:3900,er:5800},"3h40f":{ne:1300,e:2600,ner:5200,er:7700},"3h50f":{ne:1600,e:3200,ner:6400,er:9600},"3h60f":{ne:2e3,e:3900,ner:7700,er:11600},"4h20f":{ne:1300,e:2600,ner:5200,er:7700},"4h25f":{ne:1600,e:3200,ner:6400,er:9600},"4h30f":{ne:2e3,e:3900,ner:7700,er:11600},"5h":{ne:2e3,e:4e3,ner:8e3,er:12e3},"6h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"7h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"8h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"9h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"10h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"11h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"12h":{ne:6e3,e:12e3,ner:24e3,er:36e3}},hye=(t,e,r)=>{let n;const i=parseInt(t,10);if(Number.isNaN(i))throw new Error(`han "${t}" is NaN`);const o=parseInt(e,10);if(Number.isNaN(o))throw new Error(`fu "${e}" is NaN`);return i>=13?n=ru["12h"]:i>=5?n=ru[`${i}h`]:i>=4&&o>=(r!=null&&r.roundUp?30:40)||i>=3&&o>=(r!=null&&r.roundUp?60:70)?n=ru["5h"]:n=ru[`${i}h${o}f`],n||ru["1h30f"]},pye=(t=1)=>({ne:8e3*t,e:16e3*t,ner:32e3*t,er:48e3*t}),_F=(t,e,r,n,i,o)=>{const s=r>0?pye(Math.min(OG((o==null?void 0:o.yakumanMax)??"130"),r)):hye(t,e,o);return n?i?{win:s.er,target:s.er}:{win:s.e*3,all:s.e}:i?{win:s.ner,target:s.ner}:{win:s.e+2*s.ne,east:s.e,others:s.ne}},mye=t=>t.all||t.east?Ve.SelfDrawn:t.target?Ve.Ron:Ve.Unknown,wF=t=>xF[(t-1)%xF.length],yye=t=>({0:{beforeScore:t[0].afterScore,afterScore:t[0].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[0].isYellowCarded||!1,isRedCarded:t[0].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[0].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:t[1].afterScore,afterScore:t[1].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[1].isYellowCarded||!1,isRedCarded:t[1].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[1].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:t[2].afterScore,afterScore:t[2].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[2].isYellowCarded||!1,isRedCarded:t[2].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[2].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:t[3].afterScore,afterScore:t[3].afterScore,isRevealed:!1,isRiichi:!1,isYellowCarded:t[3].isYellowCarded||!1,isRedCarded:t[3].isRedCarded||!1,type:yt.None,scoreChanges:[],prevScoreChanges:t[3].scoreChanges??[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}}),SF=t=>yye({0:t[0],1:t[1],2:t[2],3:t[3]}),gye=()=>`${aye()}-${cs(6)}`,Ox=(t,e,r)=>`${t}-${e}.${r}`,vye={1:"東 1 局",2:"東 2 局",3:"東 3 局",4:"東 4 局",5:"南 1 局",6:"南 2 局",7:"南 3 局",8:"南 4 局",9:"西 1 局",10:"西 2 局",11:"西 3 局",12:"西 4 局",13:"北 1 局",14:"北 2 局",15:"北 3 局",16:"北 4 局"},bye=(t,e,r=8)=>{try{const n=vye[Math.min(t,r)];if(!n)throw new Error(`Unable to parse round=${t} in MJMatchCounterSpan`);return e&&e!==0?`${n}${e}本場`:n}catch(n){return console.error(n),`${t}.${e??0}`}},IG=t=>{switch(t){case"0":return"3";case"1":return"0";case"2":return"1";case"3":return"2"}},NG=t=>{switch(t){case"0":return"1";case"1":return"2";case"2":return"3";case"3":return"0"}},kG=t=>{switch(t){case"0":return"2";case"1":return"3";case"2":return"0";case"3":return"1"}},OG=t=>{switch(t){case"13":return 1;case"26":return 2;case"39":return 3;case"130":return 10}},xye={[Ve.Ron]:"ron",[Ve.SelfDrawn]:"tsumo",[Ve.Exhausted]:"exhausted",[Ve.Hotfix]:"hotfix",[Ve.Unknown]:"unknown"},_ye={[Dn.East]:"east",[Dn.South]:"south",[Dn.West]:"west",[Dn.North]:"north"},wye={[yt.None]:"none",[yt.Win]:"win",[yt.Lose]:"lose"},Pv=(t,e)=>{var r,n,i,o,s,a,l,c,u;return{position:_ye[Bc(e,t.roundCount)],type:wye[t.playerResults[e].type],status:t.playerResults[e].isRiichi||(r=t.playerResults[e].detail)!=null&&r.isRiichied?"isRiichied":t.playerResults[e].isRevealed||(n=t.playerResults[e].detail)!=null&&n.isRevealed?"isRevealed":"none",isWaited:!!t.playerResults[e].waitingTiles&&t.playerResults[e].waitingTiles.length>0,beforeScore:t.playerResults[e].beforeScore,afterScore:t.playerResults[e].afterScore,dora:(i=t.playerResults[e].detail)==null?void 0:i.dora,redDora:(o=t.playerResults[e].detail)==null?void 0:o.redDora,innerDora:(s=t.playerResults[e].detail)==null?void 0:s.innerDora,han:(a=t.playerResults[e].detail)==null?void 0:a.han,fu:(l=t.playerResults[e].detail)==null?void 0:l.fu,yaku:(u=(c=t.playerResults[e].detail)==null?void 0:c.yakus)==null?void 0:u.map(({label:d})=>d).join(" "),pureScore:0}},RG=t=>{const e=t.at(-1),r=[{index:0,score:e.playerResults[0].afterScore},{index:1,score:e.playerResults[1].afterScore},{index:2,score:e.playerResults[2].afterScore},{index:3,score:e.playerResults[3].afterScore}].sort((a,l)=>a.score===l.score?a.index<l.index?-1:1:l.score-a.score),n=[r.findIndex(a=>a.index===0),r.findIndex(a=>a.index===1),r.findIndex(a=>a.index===2),r.findIndex(a=>a.index===3)],i=[50,10,-10,-30];if(new Set([r[0].score,r[1].score,r[2].score,r[3].score]).size!==4){let a=0;for(;a<3;){let l=a;for(;l<3&&r[a].score===r[l+1].score;)l+=1;if(a!==l){const c=i.reduce((p,m,y)=>p+(y>=a&&y<=l?m:0),0),u=l-a+1,d=Math.round(c*(u===3&&c%3!==0?.4:1/u)),h=Math.round(c*(u===3&&c%3!==0?.3:1/u));i[a]=d;for(let p=a+1;p<=l;p++)i[p]=h}a=l+1}}return{result:{playerEast:{score:e.playerResults[0].afterScore,ranking:(n[0]+1).toString(),point:(e.playerResults[0].afterScore-3e4)/1e3+i[n[0]],penalty:e.playerResults[0].isRedCarded?-30:0,penaltyReason:e.playerResults[0].isRedCarded?"紅牌":""},playerSouth:{score:e.playerResults[1].afterScore,ranking:(n[1]+1).toString(),point:(e.playerResults[1].afterScore-3e4)/1e3+i[n[1]],penalty:e.playerResults[1].isRedCarded?-30:0,penaltyReason:e.playerResults[1].isRedCarded?"紅牌":""},playerWest:{score:e.playerResults[2].afterScore,ranking:(n[2]+1).toString(),point:(e.playerResults[2].afterScore-3e4)/1e3+i[n[2]],penalty:e.playerResults[2].isRedCarded?-30:0,penaltyReason:e.playerResults[2].isRedCarded?"紅牌":""},playerNorth:{score:e.playerResults[3].afterScore,ranking:(n[3]+1).toString(),point:(e.playerResults[3].afterScore-3e4)/1e3+i[n[3]],penalty:e.playerResults[3].isRedCarded?-30:0,penaltyReason:e.playerResults[3].isRedCarded?"紅牌":""}},rounds:t.map(a=>({_key:cs(),type:xye[a.resultType],code:`${a.roundCount}.${a.extendedRoundCount}`,playerEast:Pv(a,"0"),playerSouth:Pv(a,"1"),playerWest:Pv(a,"2"),playerNorth:Pv(a,"3")}))}};function Mt({signed:t,className:e,positiveClassName:r,negativeClassName:n,value:i,animated:o,hideZero:s,title:a}){const[l,c]=E.useState(i),u=E.useRef(null),d=E.useCallback(m=>m===0?s?"":m.toLocaleString("en-US"):m>0?`${t?"+":""}${Math.floor(m).toLocaleString("en-US")}`:Math.floor(m).toLocaleString("en-US"),[s,t]),h=E.useMemo(()=>d(l),[d,l]),p=E.useMemo(()=>i>0?`${e??""} ${r??""}`:i<0?`${e??""} ${n??""}`:e,[e,n,r,i]);return E.useEffect(()=>{if(l!==i)if(o){for(let g=16;g<1e3;g+=16)setTimeout(()=>{u.current&&(u.current.innerText=Math.floor(l-(l-i)*(g/1e3)).toLocaleString("en-US"))},g);setTimeout(()=>{c(i)},1e3+16)}else c(i)},[o,l,i]),E.useEffect(()=>{u.current&&(u.current.innerText=h)},[h]),f.jsx("span",{title:a,ref:u,className:p})}const EF={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function ko({className:t,children:e,...r}){const n=E.useMemo(()=>EF[e==null?void 0:e.toString()]??EF.default,[e]);return f.jsx("div",{className:`mahjong-tile ${n} ${t}`,...r})}function Ha({player:t,playerIndex:e,score:r,scoreChanges:n=[],point:i,ranking:o,isEast:s,isRiichi:a,isYellowCarded:l,isRedCarded:c,waitingTiles:u,onClickWaitingTiles:d,showPointAndRanking:h,className:p,...m}){const[y,g]=E.useState(r),[b,v]=E.useState(null),x=E.useMemo(()=>CO(t.color??"#000000"),[t.color]),S=E.useMemo(()=>!!b,[b]);return E.useEffect(()=>{r!==y&&(v(n),setTimeout(()=>{g(r)},2550),setTimeout(()=>{v(null)},3e3))},[r,n,y]),f.jsxs("div",{className:"relative min-w-[5.35em] mx-auto [&_.hide-if-changing]:transition-opacity [&_.hide-if-changing]:data-[score-changing='1']:opacity-0 overflow-visible","data-score-changing":S?"1":"0",children:[f.jsxs("div",{className:"absolute top-[0.05em] bottom-[0.15em] -left-[0.1em] -right-[0.1em] rounded-[0.1em] overflow-hidden -z-50",children:[l&&f.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[yellowPenaltyAni_8s_ease-in-out_1]"}),c&&f.jsx("div",{className:"absolute top-0 left-0 w-[200%] aspect-square animate-[redPenaltyAni_8s_ease-in-out_1]"})]}),l&&f.jsx("div",{className:"absolute -top-[0.4em] left-0 h-[0.5em] w-[0.37em] bg-[#ffe100] rounded-[0.05em]"}),c&&f.jsx("div",{className:"absolute -top-[0.4em] left-[0.45em] h-[0.5em] w-[0.37em] bg-[#ff1900] rounded-[0.05em]"}),f.jsxs("div",{className:"flex items-end gap-x-[0.1em]",children:[f.jsxs("div",{className:"shrink-0 w-[1.75em] h-full relative -bottom-[0.085em] -left-[0.085em]",children:[f.jsx("div",{className:"absolute w-full h-full bg-[#d1b571] overflow-hidden rounded-[0.1em]",style:{opacity:a?1:0},children:f.jsx("div",{className:"origin-bottom w-[200%] h-[100%] bg-[#d1291d] animate-[riichi_8s_ease-in-out_infinite]"})}),f.jsx("div",{className:"relative z-10 w-full aspect-[90/125] p-[0.085em]",children:f.jsxs("div",{className:"w-full h-full bg-white rounded-[0.08em] overflow-hidden",style:{background:`linear-gradient(180deg, ${t.color}, ${x})`},children:[t.teamPicUrl&&f.jsx("div",{className:"absolute inset-[0.085em] overflow-hidden",children:f.jsx("img",{className:"absolute max-w-[none] h-[2.2em] w-[2.2em] opacity-30 animate-[scrollFromRightToLeft_12s_linear_infinite]",src:t.teamPicUrl,alt:t.name})}),t.proPicUrl&&f.jsx("img",{className:"relative z-10 w-full h-full rounded-[0.08em]",src:t.proPicUrl,alt:t.name}),t.nickname&&f.jsx("div",{className:"absolute bottom-[0.085em] left-[0.085em] right-[0.085em] rounded-b-[0.08em] bg-[linear-gradient(to_top,#00000060,#00000050_70%,transparent)] text-white z-20",children:f.jsx("p",{className:"text-center text-[0.25em] font-semibold pb-[0.25em] pt-[0.5em]",children:t.nickname})})]})})]}),f.jsxs("div",{className:"flex-1 flex flex-col gap-y-[0.125em] items-start justify-end",children:[f.jsxs("div",{className:"bg-black bg-opacity-60 rounded text-[0.5em] flex gap-x-[0.2em] p-[0.1em] pl-[0.2em] pr-[0.2em] opacity-0 transition-opacity data-[has-waiting-tiles='1']:opacity-100 hide-if-changing cursor-pointer","data-has-waiting-tiles":u&&u.length>0||d?"1":"0",onClick:d,"data-player-index":e,children:[f.jsx("div",{className:"flex-1 leading-none min-h-[1.19em] flex flex-wrap gap-[0.15em]",children:u==null?void 0:u.map(_=>f.jsx(ko,{className:"inline-block align-bottom w-[0.85em] animate-[fadeInFromLeft_1s_ease-in-out]",children:_},_))}),f.jsx("div",{className:"bg-[#FFFFFF] w-[4px]"}),f.jsxs("div",{className:"text-[#FFFFFF] text-[0.4em] leading-[1.3em] flex items-center",children:["待",f.jsx("br",{}),"牌"]})]}),f.jsxs("div",{className:`relative w-full text-left bg-white px-[0.1em] pb-[0.05em] pt-[0.08em] ${p}`,...m,style:{background:`linear-gradient(260deg, transparent, transparent 22px, ${x} 23px, ${t.color} 100%`,textShadow:"#00000048 2px 2px 3px, #00000048 -2px -2px 3px, #00000048 -2px 2px 3px, #00000048 2px -2px 3px, #00000048 0 0 6px"},children:[f.jsxs("div",{className:"flex flex-col justify-center gap-y-[0.075em] mt-[0.04em]",children:[f.jsx("div",{className:"text-[0.1875em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",children:t.title||"　"}),f.jsx("div",{className:"text-[0.3125em] ml-[0.1em] leading-none text-white hide-if-changing font-semibold whitespace-nowrap",style:{transformOrigin:"left",transform:(t.name||"").length>=17?"scaleX(0.9)":"scaleX(1)"},children:t.name})]}),b&&f.jsx("div",{className:"absolute bottom-[2.75em] pr-[0.125em] left-0 text-[0.5625em] leading-none animate-[drop_3s_ease-in-out] font-numeric",children:b.map(_=>f.jsx("div",{children:f.jsx(Mt,{signed:!0,value:_,positiveClassName:"text-[#09eb09]",negativeClassName:"text-[#eb0000]"})}))}),f.jsxs("div",{className:"relative mt-[0.12em] mb-[0.03em]",children:[f.jsx("p",{className:"relative text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:h?0:1,bottom:h?"1em":0},children:f.jsx(Mt,{animated:!0,value:y})}),f.jsxs("p",{className:"absolute left-0 right-[0.25em] text-[0.5625em] flex-1 leading-none text-white font-numeric",style:{transition:"opacity 1s, bottom 1s",opacity:h?1:0,bottom:h?0:"-1em"},children:[us(i),f.jsx("span",{className:"text-[0.8em]",children:"pt"}),f.jsx("span",{className:"absolute right-0 bottom-0 text-[0.75em]",children:nd(o)})]})]})]})]})]}),f.jsx("div",{className:`mt-[0.2em] h-[0.075em] rounded-full ${s&&"bg-red-500"}`})]})}function fs({roundCount:t,extendedRoundCount:e,max:r=16,...n}){const i=E.useMemo(()=>bye(t,e??0,r),[t,r,e]);return f.jsx("span",{...n,children:i})}fs.defaultProps={extendedRoundCount:0};const Iv=({player:t})=>f.jsxs("div",{className:"border-b-4 pb-1",style:{borderColor:t.color},children:[f.jsx("p",{className:"text-sm text-neutral-600",children:t.title}),f.jsx("p",{className:"font-bold",children:t.name})]});function Nv({value:t}){return f.jsx(Mt,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const kv=({matchRound:t,playerIndex:e})=>f.jsxs("span",{children:[t.playerResults[e].isRiichi&&f.jsx("span",{className:"text-xs",children:"立"}),t.resultType===Ve.Ron&&t.playerResults[e].type===yt.Lose&&f.jsx("span",{className:"text-xs",children:"統"}),t.resultType===Ve.Ron&&t.playerResults[e].type===yt.Win&&f.jsx("span",{className:"text-xs",children:"和"}),t.resultType===Ve.SelfDrawn&&t.playerResults[e].type===yt.Win&&f.jsx("span",{className:"text-xs",children:"摸"}),t.resultType===Ve.Exhausted&&t.playerResults[e].type===yt.Win&&f.jsx("span",{className:"text-xs",children:"聽"})]});function xg({players:t,matchRounds:e,...r}){const n=E.useMemo(()=>Object.entries(e??{}),[e]);return f.jsxs("table",{...r,children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[f.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),f.jsx("th",{className:"w-1/4",children:f.jsx(Iv,{player:t[0]})}),f.jsx("th",{className:"w-1/4",children:f.jsx(Iv,{player:t[1]})}),f.jsx("th",{className:"w-1/4",children:f.jsx(Iv,{player:t[2]})}),f.jsx("th",{className:"w-1/4",children:f.jsx(Iv,{player:t[3]})})]})}),f.jsxs("tbody",{children:[n[0]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center"}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:n[0][1].playerResults[0].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:n[0][1].playerResults[1].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:n[0][1].playerResults[2].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:n[0][1].playerResults[3].beforeScore})})]}),n.map(([i,o])=>o.resultType===Ve.Hotfix?f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),f.jsx("td",{className:"text-center",children:o.playerResults[0].afterScore}),f.jsx("td",{className:"text-center",children:o.playerResults[1].afterScore}),f.jsx("td",{className:"text-center",children:o.playerResults[2].afterScore}),f.jsx("td",{className:"text-center",children:o.playerResults[3].afterScore})]},i):f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap",children:f.jsx(fs,{roundCount:o.roundCount,extendedRoundCount:o.extendedRoundCount,max:8,className:"px-4"})}),f.jsxs("td",{className:"text-center",children:[f.jsx(Nv,{value:o.playerResults[0].afterScore-o.playerResults[0].beforeScore})," ",f.jsx(kv,{matchRound:o,playerIndex:"0"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Nv,{value:o.playerResults[1].afterScore-o.playerResults[1].beforeScore})," ",f.jsx(kv,{matchRound:o,playerIndex:"1"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Nv,{value:o.playerResults[2].afterScore-o.playerResults[2].beforeScore})," ",f.jsx(kv,{matchRound:o,playerIndex:"2"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Nv,{value:o.playerResults[3].afterScore-o.playerResults[3].beforeScore})," ",f.jsx(kv,{matchRound:o,playerIndex:"3"})]})]},i)),n[n.length-1]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16"}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:n[n.length-1][1].playerResults[0].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:n[n.length-1][1].playerResults[1].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:n[n.length-1][1].playerResults[2].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:n[n.length-1][1].playerResults[3].afterScore})})]})]})]})}function Sye({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n,matchCurrentRoundDoras:i}=Jo(t);return!e||!n?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[f.jsxs("div",{className:"shrink-0 rounded-[1rem] bg-black bg-opacity-50 p-2 flex items-stretch gap-x-4",children:[f.jsx("div",{className:"text-[2.5rem] leading-none border-[.25rem] rounded-[.75rem] pb-[0.3em] pt-[0.2em] px-4 border-current flex items-center justify-center",children:f.jsx(fs,{roundCount:n.roundCount,max:8})}),f.jsxs("div",{className:"flex flex-col justify-around",children:[f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-4"})}),f.jsx("div",{children:n.extendedRoundCount??0})]}),f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-4"})}),f.jsx("div",{children:n.cumulatedThousands??0})]})]}),f.jsx("div",{className:"flex items-center gap-x-2",children:i.map((o,s)=>f.jsx(ko,{className:"w-9 cursor-pointer","data-index":s,children:o},o))})]}),f.jsx("div",{className:"flex-1"})]}),f.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(o=>f.jsx("div",{className:"flex gap-x-2 items-center",children:f.jsx("div",{className:"flex-1 text-[2.5rem]",children:f.jsx(Ha,{player:e.players[o],score:n.playerResults[o].beforeScore,scoreChanges:n.playerResults[o].prevScoreChanges,isEast:Jn(o,n.roundCount),isRiichi:n.playerResults[o].isRiichi,isYellowCarded:n.playerResults[o].isYellowCarded,isRedCarded:n.playerResults[o].isRedCarded})})}))}),f.jsx(xg,{players:e.players,matchRounds:r,className:"w-full table-auto"})]})})}const AF=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function Eye({matchId:t}){const e=E.useMemo(()=>`${window.location.origin}/match/${t}/control`,[t]),r=E.useCallback(()=>{window.navigator.clipboard.writeText(AF)},[]);return f.jsxs("div",{className:"flex items-center justify-center gap-x-8",children:[f.jsxs("div",{children:[f.jsx("p",{children:"1. 打開OBS"}),f.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),f.jsxs("p",{children:["- 網址 = 此頁的網址 ",f.jsx("strong",{children:window.location.href}),f.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",f.jsx("br",{})," - 自訂CSS ="," ",f.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[f.jsx("pre",{children:AF}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx("button",{type:"button",onClick:r,children:f.jsx("i",{className:"bi bi-copy"})})})]})]})]}),f.jsxs("div",{children:[f.jsx("p",{children:'3. 在管理後台點擊右上角的 "開始OBS" '}),f.jsx("p",{children:"4. 確定"})]}),f.jsx("div",{className:"shrink-0",children:f.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-center underline",children:[f.jsx("img",{className:"block w-32 h-32",src:uP(e),alt:""}),f.jsx("p",{children:"管理後台"})]})})]})}function Aye({han:t,fu:e,yakumanCount:r,...n}){const i=E.useMemo(()=>{if(r&&r>0)return r===1?"役滿":r===2?"兩倍役滿":r===3?"三倍役滿":r===4?"四倍役滿":`${r}倍役滿`;if(t>=11)return"三倍滿";if(t>=8)return"倍滿";if(t>=6)return"跳滿";if(t>=5)return"滿貫";if(t>=4&&typeof e<"u"&&e>=40)return"滿貫";if(t>=3&&typeof e<"u"&&e>=70)return"滿貫";if(typeof e<"u")return},[r,t,e]);return i?f.jsx("div",{...n,children:i}):f.jsxs("div",{...n,children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:t}),f.jsx("span",{children:"飜"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:e}),f.jsx("span",{children:"符"})]})]})}const Cye=({active:t,color:e="#000000",largeTeamPicUrl:r})=>f.jsxs(f.Fragment,{children:[f.jsx("img",{src:"/images/r.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/e.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/a.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/c.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/h.png",className:"w-0 h-0 opacity-0"}),f.jsx("img",{src:"/images/score-thousand.png",className:"w-0 h-0 opacity-0"}),t&&f.jsxs("div",{className:"reach-animation",children:[f.jsx("div",{className:"reach-background",style:{background:`linear-gradient(to bottom, transparent, ${e}80 40%, ${e}80 60%, transparent)`}}),f.jsx("div",{className:"reach-animation-logo",style:{backgroundImage:`url("${r}")`}}),f.jsx("div",{className:"reach-animation-bar",style:{backgroundImage:'url("/images/score-thousand.png")'}}),f.jsxs("div",{className:"reach-animation-text",children:[f.jsx("div",{className:"reach-animation-text-character c1",style:{backgroundImage:'url("/images/r.png")'}}),f.jsx("div",{className:"reach-animation-text-character c2",style:{backgroundImage:'url("/images/e.png")'}}),f.jsx("div",{className:"reach-animation-text-character c3",style:{backgroundImage:'url("/images/a.png")'}}),f.jsx("div",{className:"reach-animation-text-character c4",style:{backgroundImage:'url("/images/c.png")'}}),f.jsx("div",{className:"reach-animation-text-character c5",style:{backgroundImage:'url("/images/h.png")'}})]})]})]});function jG({params:{matchId:t}}){const{match:e,matchCurrentRound:r,matchCurrentRoundDoras:n}=Jo(t),i=E.useMemo(()=>{if(!e||!r)return[];const d=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],h=Object.entries(r.playerResults).map(([p,m])=>({playerIndex:p,score:m.afterScore})).sort((p,m)=>m.score-p.score).map((p,m)=>({playerIndex:p.playerIndex,...d[m],point:(p.score-3e4)/1e3+d[m].point})).reduce((p,m)=>(p[m.playerIndex]={point:m.point,ranking:m.ranking},p),{});return["0","1","2","3"].map(p=>({...e.players[p],color:e.players[p].color,currentStatus:{...r.playerResults[p],isEast:Jn(p,r.roundCount),...h[p]}}))},[e,r]),[o,s]=E.useState(null),[a,l]=E.useState(),[c,u]=E.useState({0:!1,1:!1,2:!1,3:!1});return E.useEffect(()=>{["0","1","2","3"].forEach(d=>{typeof(r==null?void 0:r.playerResults[d].isRiichi)<"u"&&r.playerResults[d].isRiichi!==c[d]&&(r.playerResults[d].isRiichi===!0&&(s(d),setTimeout(()=>{s(null)},2800)),u(h=>({...h,[d]:r.playerResults[d].isRiichi})))})},[r==null?void 0:r.playerResults,c]),E.useEffect(()=>{a!==(r==null?void 0:r.code)&&(l(r==null?void 0:r.code),u({0:!1,1:!1,2:!1,3:!1}))},[r==null?void 0:r.code,a]),!e||!r?f.jsx("div",{className:"text-current",children:"對局讀取失敗。"}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relativew-screen h-screen mx-auto py-8 overflow-hidden text-[4.8rem] transition-opacity",style:{background:"linear-gradient(transparent, transparent 73%, rgba(0, 0, 0, 0.4))",opacity:o!==null?0:1},children:[f.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[f.jsxs("div",{className:"relative text-[0.6em] p-2 pl-10 pr-[1em] flex items-center gap-x-8",style:{transition:"width 0.3s, left 1.5s, opacity 1.5s",left:e.hideHeader?"-100%":"0",opacity:e.hideHeader?"0":"1",background:"linear-gradient(280deg, transparent, transparent 0.5em, #00000080 0.5em, #00000080 100%)"},children:[f.jsxs("div",{className:"",children:[f.jsx("div",{className:"text-[0.5em]",children:e.name}),f.jsxs("div",{className:"flex gap-x-8 items-center",children:[f.jsx("div",{className:"min-w-[3.5em]",children:f.jsx(fs,{roundCount:r.roundCount,max:8})}),f.jsxs("div",{className:"flex flex-col justify-around gap-2",children:[f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-[0.25em] mt-[0.1em]"})}),f.jsx("div",{className:"text-[0.45em] leading-none",children:r.extendedRoundCount??0})]}),f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-[0.25em] mt-[0.1em]"})}),f.jsx("div",{className:"text-[0.45em] leading-none",children:r.cumulatedThousands??0})]})]})]})]}),f.jsx("div",{className:"flex items-center gap-x-2",children:n.map(d=>f.jsx(ko,{className:"w-[1.4em] animate-[fadeInFromLeft_0.5s_ease-in-out]",children:d},d))})]}),f.jsx("div",{className:"flex-1"})]}),f.jsx("div",{className:"flex items-center justify-center mt-20",children:f.jsx("div",{className:"body-hidden mx-20 text-[16px]",children:f.jsx(Eye,{matchId:t})})}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 items-end gap-x-8 text-white animate-[fadeInFromBottom_1s_ease-in-out]",style:{opacity:e.activeResultDetail?0:1,bottom:e.activeResultDetail?"-150px":0,transition:"opacity 0.5s, bottom 0.5s"},children:i.map(d=>f.jsxs("div",{className:"w-[5.35em]",children:[f.jsx(Ha,{player:d,score:d.currentStatus.afterScore,scoreChanges:d.currentStatus.scoreChanges,isEast:d.currentStatus.isEast,isRiichi:d.currentStatus.isRiichi&&r.resultType===Ve.Unknown,waitingTiles:r.resultType===Ve.Unknown?d.currentStatus.waitingTiles:[],isYellowCarded:d.currentStatus.isYellowCarded,isRedCarded:d.currentStatus.isRedCarded,ranking:d.currentStatus.ranking,point:d.currentStatus.point,showPointAndRanking:!!e.showPoints}),f.jsx("img",{src:d.largeTeamPicUrl,className:"w-0 h-0"})]},d.name))}),e.activeResultDetail&&f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 gap-x-8 text-white transition-opacity animate-[fadeInFromBottom_1s_ease-in-out]",children:[f.jsx("div",{className:"w-[5.35em]",children:f.jsx(Ha,{player:e.players[e.activeResultDetail.winnerPlayerIndex],score:r.playerResults[e.activeResultDetail.winnerPlayerIndex].afterScore})}),f.jsxs("div",{className:"col-span-3 bg-black bg-opacity-50 py-6 px-8 text-[0.5em] flex items-stretch gap-x-4",children:[f.jsx("div",{className:`flex-1 flex flex-wrap gap-x-[0.75em] ${e.activeResultDetail.yakumanCount>0?"self-center justify-center":""}`,children:e.activeResultDetail.yakus.map(({label:d})=>f.jsx("span",{children:d},d))}),f.jsx("div",{className:"shrink-0 w-px bg-neutral-200"}),f.jsx("div",{className:"shrink-0 min-w-[3em] self-center text-green-400 text-[1.4em] text-center",children:f.jsx(Aye,{han:e.activeResultDetail.han,fu:e.activeResultDetail.fu,yakumanCount:e.activeResultDetail.yakumanCount})})]})]})]}),f.jsx("div",{className:"fixed inset-0 pointer-events-none",children:f.jsx(Cye,{active:o!==null,color:o&&i[o].color,largeTeamPicUrl:o&&i[o].largeTeamPicUrl})})]})}function Yn({open:t,title:e,children:r,onClose:n,hideCloseButton:i}){const o=E.useRef(null);E.useEffect(()=>{if(o!=null&&o.current&&t){o.current.showModal();const{current:a}=o;return()=>{a.close()}}},[t]);const s=E.useCallback(()=>{n==null||n()},[n]);return f.jsx("dialog",{ref:o,onClose:s,children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex mb-4",children:[f.jsx("div",{className:"flex-1 items-center font-bold text-lg",children:e}),!i&&f.jsx("div",{className:"shrink-0",children:f.jsx("button",{type:"button",className:"absolute top-4 right-4",onClick:s,children:f.jsx("i",{className:"bi bi-x"})})})]}),r]})})}const TO=()=>f.jsx("div",{className:"inline-block w-4 h-4 border-2 border-neutral-800 border-l-transparent rounded-full animate-spin"});function Tye({title:t,children:e,okButtonText:r="確認",cancelButtonText:n="取消",onClickOk:i,onClickCancel:o,...s}){const[a,l]=E.useState(!1),c=E.useCallback(()=>{i&&(l(!0),i().finally(()=>{l(!1)}))},[i]);return f.jsxs(Yn,{title:t,...s,children:[f.jsx("div",{className:"mb-4",children:e}),f.jsxs("div",{className:"flex gap-x-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Re,{type:"button",color:"secondary",className:"w-full",onClick:o,disabled:a,children:n})}),f.jsx("div",{className:"flex-1",children:f.jsx(Re,{type:"button",color:"danger",className:"w-full",onClick:c,disabled:a,children:a?f.jsx(TO,{}):r})})]})]})}const Pye={isShowConfirmDialog:!1,setIsShowConfirmDialog:()=>{},confirmDialogOptions:{title:"警告"},setConfirmDialogOptions:()=>{}},$G=E.createContext(Pye);function Iye({children:t}){const[e,r]=E.useState(!1),[n,i]=E.useState({title:"警告"}),o=E.useMemo(()=>({isShowConfirmDialog:e,setIsShowConfirmDialog:r,confirmDialogOptions:n,setConfirmDialogOptions:i}),[n,e]),s=E.useCallback(()=>{r(!1)},[]);return f.jsxs($G.Provider,{value:o,children:[t,f.jsx(Tye,{open:e,okButtonText:n.okButtonText,cancelButtonText:n.cancelButtonText,onClickOk:n.onClickOk,onClickCancel:n.onClickCancel,onClose:s,...n,hideCloseButton:!0,children:n.content})]})}const Nye=()=>{const t=E.useContext($G);return{showConfirmDialog:E.useCallback(r=>{const n=async()=>(r.onClickOk??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)}),i=async()=>(r.onClickCancel??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)});t.setConfirmDialogOptions({...r,onClickOk:n,onClickCancel:i}),t.setIsShowConfirmDialog(!0)},[t])}};function DG(){var t=E.useRef(!1),e=E.useCallback(function(){return t.current},[]);return E.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e}function Kw(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={loading:!1});var n=E.useRef(0),i=DG(),o=E.useState(r),s=o[0],a=o[1],l=E.useCallback(function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=++n.current;return s.loading||a(function(h){return mx(mx({},h),{loading:!0})}),t.apply(void 0,c).then(function(h){return i()&&d===n.current&&a({value:h,loading:!1}),h},function(h){return i()&&d===n.current&&a({error:h,loading:!1}),h})},e);return[s,l]}function kye(t,e){e===void 0&&(e=[]);var r=Kw(t,e,{loading:!0}),n=r[0],i=r[1];return E.useEffect(function(){i()},[i]),n}var eA=function(){};function tA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function rA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Oye=typeof window<"u",Rye=function(t,e){return typeof e=="boolean"?e:!t},jye=function(t){return E.useReducer(Rye,t)};const Eo=jye;var $ye=function(t,e){return function(r,n){var i=r.getData("text/uri-list");if(i){(t.onUri||eA)(i,n);return}if(r.files&&r.files.length){(t.onFiles||eA)(Array.from(r.files),n);return}r.items&&r.items.length&&r.items[0].getAsString(function(o){e&&(t.onText||eA)(o,n)})}},Dye=function(t,e){return{onDragOver:function(r){r.preventDefault()},onDragEnter:function(r){r.preventDefault(),e(!0)},onDragLeave:function(){e(!1)},onDrop:function(r){r.preventDefault(),r.persist(),e(!1),t(r.dataTransfer,r)},onPaste:function(r){r.persist(),t(r.clipboardData,r)}}},Mye=function(t){t===void 0&&(t={});var e=t.onFiles,r=t.onText,n=t.onUri,i=DG(),o=E.useState(!1),s=o[0],a=o[1],l=E.useMemo(function(){return $ye(t,i())},[e,r,n]),c=E.useMemo(function(){return Dye(l,a)},[l,a]);return[c,{over:s}]};const Fye=Mye;var Lye=function(t,e){var r=E.useRef(function(){});E.useEffect(function(){r.current=t}),E.useEffect(function(){if(e!==null){var n=setInterval(function(){return r.current()},e||0);return function(){return clearInterval(n)}}},[e])};const Bye=Lye;var CF=function(t,e){return new URLSearchParams(t).get(e)},Uye=function(t){var e=window.location,r=E.useState(function(){return CF(e.search,t)}),n=r[0],i=r[1];return E.useEffect(function(){var o=function(){i(CF(e.search,t))};return tA(window,"popstate",o),tA(window,"pushstate",o),tA(window,"replacestate",o),function(){rA(window,"popstate",o),rA(window,"pushstate",o),rA(window,"replacestate",o)}},[]),n},Vye=function(){return null};const TF=Oye?Uye:Vye,Wye=[["1m","2m","3m","4m","5m","6m","7m","8m","9m","0m"],["1p","2p","3p","4p","5p","6p","7p","8p","9p","0p"],["1s","2s","3s","4s","5s","6s","7s","8s","9s","0s"],["1z","2z","3z","4z","5z","6z","7z"]],PF={m:0,p:1,s:2,z:3},zye=(t,e)=>{const[r,n]=[t[0],t[1]],[i,o]=[e[0],e[1]];return n!==o?PF[n]-PF[o]:parseInt(r,10)-parseInt(i,10)};function IF({onSubmit:t,onRemove:e,canRemove:r,hideRedTiles:n,multiple:i,defaultValue:o}){const[s,a]=E.useState([]),l=E.useCallback(d=>{var p;const h=(p=d.currentTarget)==null?void 0:p.getAttribute("data-key");h&&a(i?m=>{const y=m.indexOf(h);if(y===-1)return[...m,h].sort(zye);const g=[...m];return g.splice(y,1),g}:[h])},[i]),c=E.useCallback(()=>{s&&t&&(t==null||t(s),a([]))},[t,s]),u=E.useCallback(()=>{r&&(e==null||e(),a([]))},[r,e]);return E.useEffect(()=>{a(o??[])},[o]),f.jsxs("div",{children:[f.jsx("div",{className:`mb-4 grid ${n?"grid-cols-9":"grid-cols-10"} gap-1 lg:gap-x-2 lg:gap-y-4 items-center text-center`,children:Wye.map(d=>d.map(h=>(!h.startsWith("0")||!n)&&f.jsx("button",{type:"button",onClick:l,"data-key":h,className:`${s.indexOf(h)!==-1?"bg-blue-400":"bg-black bg-opacity-20"} rounded p-1 lg:p-2`,children:f.jsx(ko,{children:h})})))}),f.jsxs("div",{className:"flex gap-x-4",children:[r&&f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",type:"button",color:"secondary",onClick:u,children:"移除"})}),f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",type:"button",color:"primary",onClick:c,disabled:s.length===0,children:"確定"})})]})]})}const Ov=({teamPlayer:t})=>f.jsx(Ha,{player:ap(t),score:25e3}),Gye=({matchDTO:t})=>{const e=p9(),r=E.useCallback(async()=>{if(!confirm("確定資料都正確了嗎？要開始對局了嗎？"))return;const n={code:t._id,name:t.name,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:{startingScore:t.tournament.startingScore,isManganRoundUp:t.tournament.startingScore?"1":"0",yakuMax:t.tournament.yakuMax,yakumanMax:t.tournament.yakumanMax},players:{0:ap(t.playerEast),1:ap(t.playerSouth),2:ap(t.playerWest),3:ap(t.playerNorth)},activeResultDetail:null};await e.set(`matches/${t._id}`,n);const i=parseInt(t.tournament.startingScore),o={matchId:t._id,code:Ox(t._id,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:i,afterScore:i,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await e.push("matchRounds",o),await e.set("obs/1",{matchId:t._id})},[t._id,t.name,t.playerEast,t.playerNorth,t.playerSouth,t.playerWest,t.tournament.startingScore,t.tournament.yakuMax,t.tournament.yakumanMax,e]);return f.jsx("div",{className:"container mx-auto max-w-screen-md py-16",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-red-500 p-4 text-white space-y-2",children:[f.jsx("div",{className:"text-center text-6xl",children:f.jsx("i",{className:"bi bi-exclamation-triangle"})}),f.jsxs("p",{className:"text-center text-xl",children:["這是開始直播前的最後機會，請檢查以下內容是否完全正確。",f.jsx("br",{}),"一旦對局開始，要修改內容就很麻煩。",f.jsx("br",{}),f.jsx("br",{}),"如果要修改，請在資料庫修改後，刷新此頁面。"]})]}),f.jsxs("h4",{className:"text-3xl",children:[f.jsx("span",{className:"text-neutral-600",children:"對局名稱:"})," ",f.jsx("span",{className:"font-bold",children:t.name})]}),f.jsxs("div",{className:"grid grid-cols-10 gap-x-2",children:[f.jsxs("div",{className:"col-span-4 col-start-4",children:[f.jsx("div",{className:"text-[48px]",children:f.jsx(Ov,{teamPlayer:t.playerWest})}),f.jsx("p",{className:"text-center text-4xl",children:"西"})]}),f.jsxs("div",{className:"col-span-4 col-start-1 flex items-center gap-x-2",children:[f.jsx("div",{className:"flex-1 text-[48px]",children:f.jsx(Ov,{teamPlayer:t.playerNorth})}),f.jsx("div",{className:"shrink-0 text-4xl",children:"北"})]}),f.jsx("div",{className:"col-span-2"}),f.jsxs("div",{className:"col-span-4 flex items-center gap-x-2",children:[f.jsx("div",{className:"shrink-0 text-4xl",children:"南"}),f.jsx("div",{className:"flex-1 text-[48px]",children:f.jsx(Ov,{teamPlayer:t.playerSouth})})]}),f.jsxs("div",{className:"col-span-4 col-start-4",children:[f.jsx("p",{className:"text-center text-4xl",children:"東"}),f.jsx("div",{className:"text-[48px]",children:f.jsx(Ov,{teamPlayer:t.playerEast})})]})]}),f.jsxs("div",{className:"text-2xl",children:[f.jsx("span",{className:"text-neutral-600",children:"聯賽:"})," ",f.jsx("span",{className:"font-bold",children:t.tournament.name})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"起始點數"}),f.jsx("p",{className:"text-4xl",children:t.tournament.startingScore})]}),f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"切上滿貫"}),f.jsx("p",{className:"text-4xl",children:t.tournament.isManganRoundUp?"有":"沒有"})]}),f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"翻數上限"}),f.jsx("p",{className:"text-4xl",children:lye(t.tournament.yakuMax)})]}),f.jsxs("div",{className:"border border-neutral-400 pt-2 py-4 rounded text-center bg-white",children:[f.jsx("p",{className:"text-neutral-600 font-bold text-sm",children:"役滿上限"}),f.jsx("p",{className:"text-4xl",children:cye(t.tournament.yakumanMax)})]})]}),f.jsx("div",{className:"pt-8",children:f.jsx(Re,{className:"w-full",size:"xlarge",variant:"contained",color:"success",onClick:r,children:"確認以上內容無誤，開始對局"})})]})})},qye=({players:t,currentRound:e,onAction:r})=>{const n=E.useCallback(i=>{const o=i.currentTarget.getAttribute("data-player-index"),s=i.currentTarget.getAttribute("data-action");r(o,s)},[r]);return f.jsx("div",{className:"space-y-2",children:["0","1","2","3"].map(i=>{var o,s;return f.jsx("table",{className:"w-full border border-black ring-2 ring-transparent data-[east='1']:ring-red-500 bg-white","data-east":Jn(i,e.roundCount)?"1":"0",children:f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 text-white w-32 relative",style:{background:t[i].color},children:[f.jsx("button",{className:"absolute text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ffe100",width:"2rem",height:"2.5rem",top:"0rem",left:"-2.5rem",opacity:e.playerResults[i].isYellowCarded?1:.35},"data-player-index":i,"data-action":"yellow-card",onClick:n,children:"黃牌"}),f.jsx("button",{className:"absolute text-gray-900 text-xs px-1 rounded",style:{backgroundColor:"#ff1900",width:"2rem",height:"2.5rem",top:"2.7rem",left:"-2.5rem",opacity:e.playerResults[i].isRedCarded?1:.35},"data-player-index":i,"data-action":"red-card",onClick:n,children:"紅牌"}),f.jsxs("div",{className:"flex gap-x-1 items-center w-32",children:[f.jsx("img",{className:"shrink-0 w-8 h-8 inline-block",src:t[i].teamPicUrl,alt:t[i].title}),f.jsx("img",{className:"shrink-0 w-[1.44rem] h-8 inline-block",src:t[i].proPicUrl,alt:t[i].name}),f.jsxs("div",{className:"flex-1 align-middle overflow-hidden",children:[f.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].title}),f.jsx("p",{className:"whitespace-nowrap overflow-ellipsis",children:t[i].nickname||t[i].name})]})]})]}),f.jsx("td",{className:"px-2 border-b border-black",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":i,"data-action":"waitingTile",onClick:n,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(o=e.playerResults[i].waitingTiles)==null?void 0:o.map(a=>f.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:a},a))})]})}),f.jsxs("td",{className:"whitespace-nowrap w-0 space-y-1 pr-1",rowSpan:2,children:[f.jsxs("div",{className:"space-x-1",children:[f.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"reveal",onClick:n,"data-active":e.playerResults[i].isRevealed?"1":"0",disabled:e.playerResults[i].isRiichi,children:"副露"}),f.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-before",onClick:n,children:["和",t[IG(i)].nickname||"上家"]})]}),f.jsxs("div",{className:"space-x-1",children:[f.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":i,"data-action":"riichi",onClick:n,"data-active":e.playerResults[i].isRiichi?"1":"0",disabled:e.playerResults[i].isRevealed,children:"立直"}),f.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-opposite",onClick:n,children:["和",t[kG(i)].nickname||"對家"]})]}),f.jsxs("div",{className:"space-x-1",children:[f.jsx("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-self",onClick:n,children:"自摸"}),f.jsxs("button",{className:"px-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":i,"data-action":"ron-after",onClick:n,children:["和",t[NG(i)].nickname||"下家"]})]})]})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl",style:{background:t[i].color},children:e.playerResults[i].afterScore}),f.jsx("td",{className:"px-2",children:f.jsxs("button",{className:"py-2 text-left text-xl","data-player-index":i,"data-action":"yaku",onClick:n,children:[f.jsx("span",{className:"mr-2 text-xl",children:"役"}),f.jsx("div",{className:"inline-block space-x-1",children:(s=e.playerResults[i].detail.yakus)==null?void 0:s.map(({label:a})=>f.jsx("span",{children:a},a))})]})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[i].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-minus",onClick:n,children:"-"}),"寶",e.playerResults[i].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-normal-plus",onClick:n,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[i].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-minus",onClick:n,children:"-"}),"赤",e.playerResults[i].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":i,"data-action":"dora-red-plus",onClick:n,children:"+"})]})]})})]})]})},i)})})},Hye=[["0","3","1","2"],["3","2","0","1"],["2","1","3","0"],["1","0","2","3"]],Kye=({players:t,currentRound:e,onAction:r})=>{var l,c,u,d;const[n,i]=E.useState(0),o=E.useMemo(()=>Hye[n],[n]),s=E.useCallback(h=>{const p=h.currentTarget.getAttribute("data-player-index"),m=h.currentTarget.getAttribute("data-action");r(p,m)},[r]),a=E.useCallback(()=>{i(h=>(h+1)%4)},[]);return f.jsxs("div",{children:[f.jsx("div",{className:"text-center mb-4",children:f.jsxs(Re,{size:"small",onClick:a,children:["逆時針旋轉 ",f.jsx("i",{className:"bi bi-arrow-counterclockwise"})]})}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[0]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[0]].teamPicUrl,alt:t[o[0]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[0]].proPicUrl,alt:t[o[0]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[0]].title}),f.jsx("p",{children:t[o[0]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[0]].color},children:e.playerResults[o[0]].afterScore})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[0],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(l=e.playerResults[o[0]].waitingTiles)==null?void 0:l.map(h=>f.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[0]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[0]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[0]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[0]].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[0],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[0]].isRevealed?"1":"0",disabled:e.playerResults[o[0]].isRiichi,children:"副露"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-before",onClick:s,children:"和上家←"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[0],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[0]].isRiichi?"1":"0",disabled:e.playerResults[o[0]].isRevealed,children:"立直"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-after",onClick:s,children:"和下家↑"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[0],"data-action":"ron-opposite",onClick:s,children:"和對家↖"})]})})})]})}),f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[1]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[1]].teamPicUrl,alt:t[o[1]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[1]].proPicUrl,alt:t[o[1]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[1]].title}),f.jsx("p",{children:t[o[1]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[1]].color},children:e.playerResults[o[1]].afterScore})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[1],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(c=e.playerResults[o[1]].waitingTiles)==null?void 0:c.map(h=>f.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pb-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[1]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[1]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[1]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[1]].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[1],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-after",onClick:s,children:"→和下家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[1]].isRevealed?"1":"0",disabled:e.playerResults[o[1]].isRiichi,children:"副露"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-opposite",onClick:s,children:"↗和對家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[1],"data-action":"ron-before",onClick:s,children:"↑和上家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[1],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[1]].isRiichi?"1":"0",disabled:e.playerResults[o[1]].isRevealed,children:"立直"})]})})})]})}),f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[2]].isRiichi?"1":"0",disabled:e.playerResults[o[2]].isRevealed,children:"立直"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-before",onClick:s,children:"和上家↓"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-opposite",onClick:s,children:"和對家↙"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl mr-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[2],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[2]].isRevealed?"1":"0",disabled:e.playerResults[o[2]].isRiichi,children:"副露"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[2],"data-action":"ron-after",onClick:s,children:"和下家←"})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[2]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[2]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[2]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[2]].detail.redDora??0,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[2],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[2],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(u=e.playerResults[o[2]].waitingTiles)==null?void 0:u.map(h=>f.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[2]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[2]].teamPicUrl,alt:t[o[2]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[2]].proPicUrl,alt:t[o[2]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[2]].title}),f.jsx("p",{children:t[o[2]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[2]].color},children:e.playerResults[o[2]].afterScore})]})]})}),f.jsx("table",{className:"w-full border border-black",children:f.jsxs("tbody",{children:[f.jsx("tr",{children:f.jsx("td",{className:"whitespace-nowrap",colSpan:2,children:f.jsxs("div",{className:" grid grid-cols-3 gap-2 justify-center",children:[f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-opposite",onClick:s,children:"↘和對家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-after",onClick:s,children:"↓和下家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-red-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"riichi",onClick:s,"data-active":e.playerResults[o[3]].isRiichi?"1":"0",disabled:e.playerResults[o[3]].isRevealed,children:"立直"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-before",onClick:s,children:"→和上家"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl","data-player-index":o[3],"data-action":"ron-self",onClick:s,children:"自摸"}),f.jsx("button",{className:"px-1 py-1 bg-neutral-200 border rounded border-neutral-700 text-xl ml-4 disabled:opacity-20 disabled:cursor-not-allowed data-[active='1']:bg-teal-800 data-[active='1']:text-yellow-300","data-player-index":o[3],"data-action":"reveal",onClick:s,"data-active":e.playerResults[o[3]].isRevealed?"1":"0",disabled:e.playerResults[o[3]].isRiichi,children:"副露"})]})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"w-full px-2",children:f.jsx("span",{children:"役"})}),f.jsx("td",{className:"w-0 text-right whitespace-nowrap px-4 pt-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"data-[active='1']:bg-yellow-200","data-active":e.playerResults[o[3]].detail.dora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-minus",onClick:s,children:"-"}),"寶",e.playerResults[o[3]].detail.dora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-normal-plus",onClick:s,children:"+"})]}),f.jsxs("div",{className:"data-[active='1']:bg-red-200","data-active":e.playerResults[o[3]].detail.redDora>0?"1":"0",children:[f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-minus",onClick:s,children:"-"}),"赤",e.playerResults[o[3]].detail.redDora,f.jsx("button",{className:"px-2 text-lg leading-0","data-player-index":o[3],"data-action":"dora-red-plus",onClick:s,children:"+"})]})]})})]}),f.jsx("tr",{children:f.jsx("td",{className:"w-1/2 px-2 h-16",colSpan:2,children:f.jsxs("button",{className:"py-2 text-left block","data-player-index":o[3],"data-action":"waitingTile",onClick:s,children:[f.jsx("span",{className:"mr-2 text-xl",children:"待牌"}),f.jsx("div",{className:"inline-block space-x-1",children:(d=e.playerResults[o[3]].waitingTiles)==null?void 0:d.map(h=>f.jsx(ko,{className:"inline-block align-middle w-8 animate-[fadeInFromLeft_1s_ease-in-out]",children:h},h))})]})})}),f.jsxs("tr",{children:[f.jsxs("td",{className:"p-1 space-x-1 text-white",style:{background:t[o[3]].color},children:[f.jsx("img",{className:"w-8 h-8 inline-block",src:t[o[3]].teamPicUrl,alt:t[o[3]].title}),f.jsx("img",{className:"w-[1.44rem] h-8 inline-block",src:t[o[3]].proPicUrl,alt:t[o[3]].name}),f.jsxs("div",{className:"inline-block align-middle",children:[f.jsx("p",{children:t[o[3]].title}),f.jsx("p",{children:t[o[3]].name})]})]}),f.jsx("td",{className:"p-1 space-x-1 text-white text-4xl text-right pr-2",style:{background:t[o[3]].color},children:e.playerResults[o[3]].afterScore})]})]})})]})]})},Yye=({tabs:t,onChangeValue:e,defaultValue:r})=>{const[n,i]=E.useState(r),o=E.useCallback(s=>{const a=s.currentTarget.getAttribute("data-value");i(a),e==null||e(a)},[e]);return f.jsx("div",{className:"border-b border-neutral-400",children:t.map(s=>f.jsx("button",{className:"py-2 px-4 border-b-2 border-transparent hover:bg-neutral-200 rounded-t data-[active='1']:border-teal-600 data-[active='1']:text-teal-800 data-[active='1']:bg-teal-100","data-value":s.value,"data-active":n===s.value?"1":"0",onClick:o,children:s.label},s.value))})};function MG({onChange:t,onChangeChecked:e,className:r,...n}){const i=E.useCallback(o=>{t==null||t(o),e==null||e(o.currentTarget.checked)},[t,e]);return f.jsx("input",{className:"mt-[0.3rem] mr-2 h-3.5 w-8 appearance-none rounded-[0.4375rem] bg-neutral-300 dark:bg-neutral-600 before:pointer-events-none before:absolute before:h-3.5 before:w-3.5 before:rounded-full before:bg-transparent before:content-[''] after:absolute after:z-[2] after:-mt-[0.1875rem] after:h-5 after:w-5 after:rounded-full after:border-none after:bg-neutral-100 dark:after:bg-neutral-400 after:shadow-[0_0px_3px_0_rgb(0_0_0_/_7%),_0_2px_2px_0_rgb(0_0_0_/_4%)] after:transition-[background-color_0.2s,transform_0.2s] after:content-[''] checked:bg-blue-600 dark:checked:bg-blue-600 checked:after:absolute checked:after:z-[2] checked:after:-mt-[3px] checked:after:ml-[1.0625rem] checked:after:h-5 checked:after:w-5 checked:after:rounded-full checked:after:border-none checked:after:bg-blue-600 dark:checked:after:bg-blue-600 checked:after:shadow-[0_3px_1px_-2px_rgba(0,0,0,0.2),_0_2px_2px_0_rgba(0,0,0,0.14),_0_1px_5px_0_rgba(0,0,0,0.12)] checked:after:transition-[background-color_0.2s,transform_0.2s] checked:after:content-[''] hover:cursor-pointer focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[3px_-1px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-5 focus:after:w-5 focus:after:rounded-full focus:after:content-[''] checked:focus:border-blue-600 checked:focus:bg-blue-600 checked:focus:before:ml-[1.0625rem] checked:focus:before:scale-100 checked:focus:before:shadow-[3px_-1px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s]",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:i,...n})}function Rx({han:t,fu:e,yakumanCount:r,yakumanCountMax:n=10,raw:i,isManganRoundUp:o,...s}){const a=E.useMemo(()=>{if(r&&r>0){const l=Math.min(n,r);return l===1?"役滿":l===2?"兩倍役滿":l===3?"三倍役滿":l===4?"四倍役滿":`${l}倍役滿`}return i?typeof e<"u"&&t<=4?`${t}飜${e}符`:`${t}飜`:t>=11?"三倍滿":t>=8?"倍滿":t>=6?"跳滿":t>=5||t>=4&&typeof e<"u"&&(e>=40||o&&e>=30)||t>=3&&typeof e<"u"&&(e>=70||o&&e>=60)?"滿貫":typeof e<"u"?`${t}飜${e}符`:`${t}飜`},[r,i,t,e,o,n]);return f.jsx("div",{...s,children:a})}const Rv=({options:t,value:e,onChange:r,disabled:n})=>{const[i,o]=E.useState(0),s=E.useMemo(()=>t[i],[i,t]),a=E.useCallback(()=>{const c=Math.max(0,i-1);o(c),r==null||r(t[c].value)},[i,r,t]),l=E.useCallback(()=>{const c=Math.min(t.length-1,i+1);o(c),r==null||r(t[c].value)},[i,r,t]);return E.useEffect(()=>{if(typeof e<"u"&&e!==s.value){const c=t.findIndex(u=>u.value===e);c!==-1&&o(c)}},[s.value,t,e]),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:a,disabled:n||i===0,children:f.jsx("i",{className:"bi bi-dash-circle"})})}),f.jsx("div",{className:"flex-1 text-center text-2xl",children:s.label}),f.jsx("div",{className:"shrink-0",children:f.jsx("button",{className:"w-4 h-4 text-center text-xs disabled:text-transparent",onClick:l,disabled:n||i===t.length-1,children:f.jsx("i",{className:"bi bi-plus-circle"})})})]})},Du=[{id:"riichi",label:"立直",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e["double-riichi"],group:"riichi"},{id:"double-riichi",label:"雙立直",han:2,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||e.riichi,group:"riichi"},{id:"ippatsu",label:"一發",han:1,hanIfOpened:0,disableFn:({raw:t})=>!(t.riichi||t["double-riichi"])||!!t.chankan,group:"riichi"},{id:"menzenchin-tsumohou",label:"門前清自摸和",han:1,hanIfOpened:0,hidden:!0,group:"menzenchin-tsumohou"},{id:"tanyao",label:"斷么九",han:1,hanIfOpened:1,disableFn:({raw:t})=>!!t.chantaiyao||!!t["junchan-taiyao"]||!!t["yakuhai-east"]||!!t["yakuhai-south"]||!!t["yakuhai-west"]||!!t["yakuhai-north"]||!!t["yakuhai-haku"]||!!t["yakuhai-hatsu"]||!!t["yakuhai-chun"]||!!t.honroutou||!!t.honitsu||!!t.ittsu,group:"common"},{id:"pinfu",label:"平和",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.chiitoitsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"]||!!e.toitoi,group:"common"},{id:"yakuhai-east",label:"東",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!Jn(e,t)&&!AG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-east",label:"雙東",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-south",label:"南",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!wG(e,t)&&!CG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-south",label:"雙南",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-west",label:"西",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!SG(e,t)&&!TG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-west",label:"雙西",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-north",label:"北",han:1,hanIfOpened:1,disableFn:({round:t,activePlayerIndex:e,raw:r})=>!EG(e,t)&&!PG(t)||!!r.tanyao||!!r.pinfu||!!r.chiitoitsu||!!r.chinitsu||!!r["junchan-taiyao"]||!!r.ryanpeikou,group:"yakuhai"},{id:"yakuhai-double-north",label:"雙北",han:2,hanIfOpened:2,hidden:!0,group:"yakuhai-special"},{id:"yakuhai-haku",label:"白",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-hatsu",label:"發",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"yakuhai-chun",label:"中",han:1,hanIfOpened:1,group:"yakuhai",disableFn:({raw:t})=>!!t.tanyao||!!t.pinfu||!!t.chiitoitsu||!!t.chinitsu||!!t["junchan-taiyao"]||!!t.ryanpeikou},{id:"shousangen",label:"小三元",han:2,hanIfOpened:2,disableFn:({raw:t})=>[t["yakuhai-haku"],t["yakuhai-hatsu"],t["yakuhai-chun"]].filter(e=>!!e).length!==2,group:"yakuhai"},{id:"haitei-raoyue",label:"海底撈月",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e["rinshan-kaihou"],hiddenIfDisabled:!0,group:"luck"},{id:"houtei-raoyui",label:"河底撈魚",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"rinshan-kaihou",label:"嶺上開花",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t,raw:e})=>t!=="-1"||!!e.pinfu||!!e.chiitoitsu||!!e.ryanpeikou||!!e["haitei-raoyue"],hiddenIfDisabled:!0,group:"luck"},{id:"chankan",label:"搶槓",han:1,hanIfOpened:1,disableFn:({targetPlayerIndex:t})=>t==="-1",hiddenIfDisabled:!0,group:"luck"},{id:"chiitoitsu",label:"七對子",han:2,hanIfOpened:0,overrideFu:25,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.ryanpeikou||!!e.pinfu||!!e["sanshku-doujun"]||!!e.ittsu||!!e.chantaiyao||!!e["junchan-taiyao"]||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["rinshan-kaihou"],group:"peikou"},{id:"iipeikou",label:"一盃口",han:1,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.ryanpeikou||!!e.chiitoitsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu,group:"peikou"},{id:"ryanpeikou",label:"二盃口",han:3,hanIfOpened:0,disableFn:({isRevealed:t,raw:e})=>!!t||!!e.iipeikou||!!e.chiitoitsu||!!e["rinshan-kaihou"]||!!e["sanshku-doujun"]||!!e.ittsu||!!e.honroutou||!!e.toitoi||!!e["sanshku-doukou"]||!!e.sanankou||!!e.sankantsu||!!e["yakuhai-east"]||!!e["yakuhai-south"]||!!e["yakuhai-west"]||!!e["yakuhai-north"]||!!e["yakuhai-haku"]||!!e["yakuhai-hatsu"]||!!e["yakuhai-chun"],group:"peikou"},{id:"sanshku-doujun",label:"三色同順",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.ittsu||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chinitsu||!!t.honitsu||!!t.toitoi,group:"row"},{id:"ittsu",label:"一氣通貫",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t["sanshku-doukou"]||!!t.sanankou||!!t.chiitoitsu||!!t.tanyao||!!t["sanshku-doujun"]||!!t.sankantsu||!!t.ryanpeikou||!!t.honroutou||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.toitoi,group:"row"},{id:"honitsu",label:"混一色",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.chinitsu||!!t.tanyao||!!t["junchan-taiyao"]||!!t["sanshku-doujun"]||!!t["sanshku-doukou"],group:"itsu"},{id:"chinitsu",label:"清一色",han:6,hanIfOpened:5,disableFn:({raw:t})=>!!t.honitsu||!!t.honroutou||!!t.chantaiyao||!!t["sanshku-doukou"],group:"itsu"},{id:"chantaiyao",label:"混全帶么九",han:2,hanIfOpened:1,disableFn:({raw:t})=>!!t.tanyao||!!t["junchan-taiyao"]||!!t.honroutou||!!t.chiitoitsu||!!t.chinitsu||!!t.ittsu||!!t.toitoi,group:"taiyao"},{id:"junchan-taiyao",label:"純全帶么九",han:3,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t.honroutou||!!t.chiitoitsu||!!t.ittsu||!!t.honitsu||!!t.toitoi,group:"taiyao"},{id:"honroutou",label:"混老頭",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t.tanyao||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou,group:"taiyao"},{id:"toitoi",label:"對對和",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.chantaiyao||!!t["junchan-taiyao"]||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sanshku-doukou",label:"三色同刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.chinitsu||!!t.iipeikou||!!t.ryanpeikou||!!t.honitsu,group:"column"},{id:"sanankou",label:"三暗刻",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"sankantsu",label:"三槓子",han:2,hanIfOpened:2,disableFn:({raw:t})=>!!t["sanshku-doujun"]||!!t.chiitoitsu||!!t.ittsu||!!t.iipeikou||!!t.ryanpeikou,group:"column"},{id:"kokushi-musou",label:"國士無雙",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou-jsuan-men"],group:"kokushi-musou"},{id:"kokushi-musou-jsuan-men",label:"國士無雙十三面",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({raw:t,isRevealed:e})=>!!e||!!t.suuankou||!!t["suuankou-dannki"]||!!t.daisangen||!!t.shousuushii||!!t.daisuushii||!!t.tsuuiisou||!!t.chinroutou||!!t.suukantsu||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t["kokushi-musou"],group:"kokushi-musou"},{id:"daisangen",label:"大三元",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"shousuushii",label:"小四喜",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"daisuushii",label:"大四喜",han:26,hanIfOpened:26,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.daisangen||!!t.shousuushii||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"chinroutou",label:"清老頭",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"kan"},{id:"ryuuiisou",label:"綠一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.shousuushii||!!t.daisangen||!!t.daisuushii||!!t.chinroutou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tsuuiisou,group:"ryuuiisou"},{id:"tsuuiisou",label:"字一色",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t.chinroutou||!!t.ryuuiisou||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"],group:"combo"},{id:"suuankou",label:"四暗刻",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e["suuankou-dannki"],group:"combo"},{id:"suuankou-dannki",label:"四暗刻單騎",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e["chuuren-poutou"]||!!e["pure-chuuren-poutou"]||!!e.suuankou,group:"combo"},{id:"suukantsu",label:"四槓子",han:13,hanIfOpened:13,yakumanCount:1,disableFn:({raw:t})=>!!t["kokushi-musou"]||!!t["chuuren-poutou"]||!!t["pure-chuuren-poutou"]||!!t.tenhou||!!t.chiihou||!!t.ronhou,group:"combo"},{id:"chuuren-poutou",label:"九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["pure-chuuren-poutou"],group:"chuuren-poutou"},{id:"pure-chuuren-poutou",label:"純正九連寶燈",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,raw:e})=>!!t||!!e["kokushi-musou"]||!!e.daisangen||!!e.shousuushii||!!e.daisuushii||!!e.chinroutou||!!e.ryuuiisou||!!e.tsuuiisou||!!e.suuankou||!!e["suuankou-dannki"]||!!e.suukantsu||!!e["chuuren-poutou"],group:"chuuren-poutou"},{id:"tenhou",label:"天和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!Jn(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"chiihou",label:"地和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!Jn(r,e)||n!=="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"},{id:"ronhou",label:"人和",han:13,hanIfOpened:0,yakumanCount:1,disableFn:({isRevealed:t,round:e,activePlayerIndex:r,targetPlayerIndex:n,raw:i})=>!!t||!!Jn(r,e)||n==="-1"||!!i.suukantsu,hiddenIfDisabled:!0,group:"hou"}],NF=Du.filter(({yakumanCount:t,hidden:e})=>!t&&!e),Qye=NF.map(t=>t.group).filter((t,e)=>NF.findIndex(({group:r})=>t===r)===e),kF=Du.filter(({yakumanCount:t,hidden:e})=>typeof t<"u"&&t>0&&!e),Xye=kF.map(t=>t.group).filter((t,e)=>kF.findIndex(({group:r})=>t===r)===e),OF=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12",value:"12"},{label:"13",value:"13"},{label:"14",value:"14"},{label:"15",value:"15"},{label:"16",value:"16"},{label:"17",value:"17"},{label:"18",value:"18"}],Jye=[{label:"0",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],Zye=[{label:"30符",value:"30"},{label:"40符",value:"40"},{label:"50符",value:"50"},{label:"60符",value:"60"},{label:"70符",value:"70"},{label:"80符",value:"80"},{label:"90符",value:"90"},{label:"100符",value:"100"},{label:"110符",value:"110"},{label:"20符",value:"20"},{label:"25符",value:"25"}],RF=({yaku:t,active:e,isRevealed:r,disabled:n,onClick:i,hiddenIfDisabled:o})=>n&&o?f.jsx(f.Fragment,{}):f.jsx("button",{"data-id":t.id,"data-han":r?t.hanIfOpened:t.han,"data-active":e?"1":"0",disabled:n,className:"text-xl text-center px-3 border border-neutral-300 text-neutral-800 cursor-pointer hover:opacity-80 data-[han='0']:cursor-not-allowed disabled:opacity-20 disabled:hover:opacity-20 data-[active='1']:enabled:border-teal-800 data-[active='1']:enabled:text-white data-[active='1']:enabled:bg-teal-800 disabled:cursor-not-allowed",onClick:i,children:t.label},t.id),FG=({round:t,activePlayerIndex:e,targetPlayerIndex:r,onChange:n,value:i})=>{const[o,s]=E.useState({}),[a,l]=Eo(!1),[c,u]=Eo(!1),[d,h]=E.useState("0"),[p,m]=E.useState("0"),[y,g]=E.useState("0"),[b,v]=E.useState("30"),x=E.useCallback(A=>{const C=A.currentTarget.getAttribute("data-id");!C||!Du.find(({id:T})=>T===C)||s(T=>({...T,[C]:!T[C]}))},[]),S=E.useCallback(()=>{s({}),l(!1),h("0"),m("0"),g("0"),v("30")},[l]),_=E.useMemo(()=>({activePlayerIndex:e,targetPlayerIndex:r,round:t,isRevealed:a,raw:o}),[e,a,t,r,o]),w=E.useMemo(()=>{let A=parseInt(b),C=!1;const I=[],T={...o};r==="-1"&&!a&&(T["menzenchin-tsumohou"]=!0),T["yakuhai-east"]&&AG(t)&&Jn(e,t)?(T["yakuhai-east"]=!1,T["yakuhai-double-east"]=!0):T["yakuhai-south"]&&CG(t)&&wG(e,t)?(T["yakuhai-south"]=!1,T["yakuhai-double-south"]=!0):T["yakuhai-west"]&&TG(t)&&SG(e,t)?(T["yakuhai-west"]=!1,T["yakuhai-double-west"]=!0):T["yakuhai-north"]&&PG(t)&&EG(e,t)&&(T["yakuhai-north"]=!1,T["yakuhai-double-north"]=!0),T["yakuhai-haku"]&&T["yakuhai-hatsu"]&&T["yakuhai-chun"]&&(T.daisangen=!0);const P=Du.filter(({id:N,disableFn:j})=>!!T[N]&&!(j!=null&&j(_))),O=P.filter(({yakumanCount:N})=>typeof N<"u"&&N>0);if(O.length>0)for(const N of O)N.yakumanCount&&N.yakumanCount>0&&I.push({id:N.id,label:N.label,han:0,yakumanCount:N.yakumanCount});else if(P.length>0){for(const N of P){const j=a?N.hanIfOpened:N.han;j!==0&&I.push({id:N.id,label:N.label,han:j,yakumanCount:0})}I.findIndex(({id:N})=>N==="chiitoitsu")!==-1?(C=!0,A=25):I.findIndex(({id:N})=>N==="pinfu")!==-1&&(C=!0,A=r==="-1"?20:30),d!=="0"&&I.push({id:`dora-${d}`,label:`寶牌${d}`,han:parseInt(d),yakumanCount:0}),p!=="0"&&I.push({id:`dora-${p}`,label:`赤寶牌${p}`,han:parseInt(p),yakumanCount:0}),y!=="0"&&I.push({id:`dora-${y}`,label:`裡寶牌${y}`,han:parseInt(y),yakumanCount:0})}return{han:I.reduce((N,{han:j})=>N+j,0),fu:A,yakumanCount:I.reduce((N,{yakumanCount:j})=>N+j,0),yakus:I,isFuOverrided:C,raw:o,dora:parseInt(d),redDora:parseInt(p),innerDora:parseInt(y),isRevealed:a,isRiichied:!!o.riichi}},[b,o,r,a,t,d,p,y,_]);return E.useEffect(()=>{n&&n(w)},[w,n]),E.useEffect(()=>{i&&(s(i.raw??{}),h(i.dora.toString()),m(i.redDora.toString()),g("0"),l(i.isRevealed))},[l,i]),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between mb-2",children:[f.jsxs("div",{children:[f.jsx(MG,{checked:a,onChangeChecked:l})," ","有副露？"]}),f.jsxs("div",{className:"space-x-4",children:[f.jsx("button",{className:"text-sm text-teal-700 underline",onClick:u,children:c?"一般役":"役滿役"}),f.jsx("button",{className:"text-sm text-teal-700 underline",onClick:S,children:"重置"})]})]}),!c&&f.jsxs("div",{children:[f.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:Qye.map(A=>f.jsx("div",{className:"flex flex-wrap gap-2",children:Du.filter(({group:C})=>C===A).map(C=>{var I;return f.jsx(RF,{yaku:C,isRevealed:a,active:o[C.id],disabled:(I=C.disableFn)==null?void 0:I.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))}),f.jsx("table",{className:"w-full mt-2",children:f.jsx("tbody",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-20 bg-yellow-400 px-1 border-yellow-100 border-t border-b",children:"寶牌"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-yellow-200 data-[active='1']:text-red-600","data-active":d!=="0"?"1":"0",children:f.jsx(Rv,{value:d,onChange:h,options:OF})}),f.jsx("td",{className:"w-2"}),f.jsx("th",{className:"w-20 bg-red-400 px-1 border-neutral-100 border-t border-b",children:"赤寶牌"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-red-200 data-[active='1']:text-red-600","data-active":p!=="0"?"1":"0",children:f.jsx(Rv,{value:p,onChange:m,options:Jye})}),f.jsx("td",{className:"w-2"}),f.jsx("th",{className:"w-20 bg-blue-400 px-1 border-neutral-100 border-t border-b",children:"裡寶牌"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-blue-200 data-[active='1']:text-red-600","data-active":y!=="0"?"1":"0",children:f.jsx(Rv,{value:y,onChange:g,options:OF})}),f.jsx("td",{className:"w-2"}),f.jsx("th",{className:"w-20 bg-neutral-400 px-1 border-neutral-100 border-t border-b",children:"符數"}),f.jsx("td",{className:"w-36 py-1 px-2 bg-neutral-200",children:f.jsx(Rv,{value:w.isFuOverrided?w.fu.toString():b,onChange:v,options:Zye,disabled:w.isFuOverrided})})]})})})]}),c&&f.jsx("div",{className:"flex flex-wrap gap-y-4 gap-x-8",children:Xye.map(A=>f.jsx("div",{className:"flex flex-wrap gap-2",children:Du.filter(({group:C})=>C===A).map(C=>{var I;return f.jsx(RF,{yaku:C,isRevealed:a,active:o[C.id],disabled:(I=C.disableFn)==null?void 0:I.call(C,_),hiddenIfDisabled:C.hiddenIfDisabled,onClick:x,children:C.label},C.id)})},A))})]})},ege=({result:t,matchSetting:e})=>{var r;return f.jsx("div",{children:f.jsx("table",{className:"w-full mt-2 bg-teal-100",children:f.jsx("tbody",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-16 bg-teal-400 py-2 px-1",children:"結算"}),f.jsx("td",{className:"flex flex-wrap gap-2 p-2 align-middle",children:(r=t.yakus)==null?void 0:r.map(({label:n})=>f.jsx("span",{children:n},n))}),f.jsxs("td",{className:"w-32 bg-teal-400 text-center",children:[f.jsx(Rx,{han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",yakumanCountMax:OG(e.yakumanMax)}),f.jsx(Rx,{className:"text-xs text-neutral-600",han:t.han,fu:t.fu,yakumanCount:t.yakumanCount,isManganRoundUp:e.isManganRoundUp==="1",raw:!0})]})]})})})})},tge=({onSubmit:t,defaultValue:e,open:r,onClose:n,...i})=>{const[o,s]=E.useState(),a=E.useCallback(()=>{o&&t(o)},[t,o]);return E.useEffect(()=>{s(e)},[e]),f.jsxs(Yn,{open:r,onClose:n,children:[f.jsx(FG,{...i,onChange:s,value:e}),f.jsx("div",{className:"mt-4",children:f.jsx(Re,{className:"w-full",onClick:a,children:"儲存"})})]})};function os({className:t,onChange:e,onChangeValue:r,...n}){const i=E.useMemo(()=>`block w-full rounded-md border-0 px-1 py-[9px] text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 ${t}`,[t]),o=E.useCallback(s=>{e==null||e(s),r==null||r(s.currentTarget.value)},[e,r]);return f.jsx("select",{className:i,onChange:o,...n})}function rge({score:t,...e}){const r=E.useMemo(()=>t?t.target?t.target:t.all?`${t.all} ALL`:`${t.others},${t.east}`:"(錯誤)",[t]);return f.jsx("div",{...e,children:r})}function wn({children:t,label:e,action:r,...n}){return f.jsx("div",{...n,children:f.jsxs("label",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("p",{className:"text-sm text-gray-800 font-bold",children:e}),f.jsx("div",{children:r})]}),f.jsx("div",{children:t})]})})}function LG({match:t,currentMatchRound:e,initialActivePlayerIndex:r="0",initialTargetPlayerIndex:n="-1",submitNode:i=f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:o}){const[s,a]=E.useState({han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}),l=E.useMemo(()=>Object.keys(t.players).map(P=>({index:P.toString(),name:`${t.players[P].name} (${t.players[P].nickname})`,position:Bc(P,e.roundCount)})),[t.players,e.roundCount]),[c,u]=E.useState(r??"0"),d=E.useMemo(()=>typeof c<"u"?l==null?void 0:l.find(({index:T})=>T===c):void 0,[c,l]),[h,p]=E.useState(n),m=E.useMemo(()=>{const T=_F(s.han,s.fu,s.yakumanCount,(d==null?void 0:d.position)===Dn.East,h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});return e.extendedRoundCount>0&&(T.win+=e.extendedRoundCount*300,T.target&&(T.target+=e.extendedRoundCount*300),T.all&&(T.all+=e.extendedRoundCount*100),T.east&&(T.east+=e.extendedRoundCount*100),T.others&&(T.others+=e.extendedRoundCount*100)),e.cumulatedThousands>0&&(T.win+=e.cumulatedThousands*1e3),T},[s.han,s.fu,s.yakumanCount,d==null?void 0:d.position,h,t.setting.isManganRoundUp,t.setting.yakumanMax,e.extendedRoundCount,e.cumulatedThousands]),y=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:T})=>T==="daisangen")!==-1,[s.isRevealed,s.yakus]),[g,b]=E.useState("-1"),v=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:T})=>T==="daisuushii")!==-1,[s.isRevealed,s.yakus]),[x,S]=E.useState("-1"),_=E.useMemo(()=>s.isRevealed&&s.yakus&&s.yakus.findIndex(({id:T})=>T==="suukantsu")!==-1,[s.isRevealed,s.yakus]),[w,A]=E.useState("-1"),C=E.useMemo(()=>{const T=Object.keys(e.playerResults),P={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].scoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].scoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].scoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].scoreChanges??[]}};if(c===h)return P;for(let N=0;N<T.length;N+=1){const j=T[N];j===c?(P[j].afterScore+=m.win,P[j].type=yt.Win,P[j].scoreChanges=[m.win]):m.target&&j===h?(P[j].afterScore-=m.target,P[j].type=yt.Lose,P[j].scoreChanges=[-m.target]):m.all?(P[j].afterScore-=m.all,P[j].type=yt.Lose,P[j].scoreChanges=[-m.all]):m.east&&m.others&&(Jn(j,e.roundCount)?(P[j].afterScore-=m.east,P[j].type=yt.Lose,P[j].scoreChanges=[-m.east]):(P[j].afterScore-=m.others,P[j].type=yt.Lose,P[j].scoreChanges=[-m.others]))}[{bool:y,triggeredPlayerIndex:g,yakuId:"daisangen"},{bool:v,triggeredPlayerIndex:x,yakuId:"daisuushii"},{bool:_,triggeredPlayerIndex:w,yakuId:"suukantsu"}].forEach(({bool:N,triggeredPlayerIndex:j,yakuId:L})=>{var U;if(N&&j!=="-1"&&j!==c&&j!==h){const V=(U=s.yakus)==null?void 0:U.find(({id:R})=>L===R);if(V){const R=_F(1,30,V.yakumanCount,Jn(c,e.roundCount),h!=="-1",{roundUp:t.setting.isManganRoundUp==="1",yakumanMax:t.setting.yakumanMax});if(R.target){const F=Math.round(R.target/2);P[h].afterScore+=F,P[h].scoreChanges[0]+=F,P[h].scoreChanges[0]===0&&P[h].scoreChanges.splice(0,1),P[j].afterScore-=F,typeof P[j].scoreChanges[0]>"u"?P[j].scoreChanges.push(-F):P[j].scoreChanges[0]-=F}else if(R.all)for(let F=0;F<T.length;F+=1){const z=R.all;T[F]!==c&&T[F]!==j&&(P[T[F]].afterScore+=z,P[T[F]].scoreChanges[0]+=z,P[T[F]].scoreChanges[0]===0&&P[T[F]].scoreChanges.splice(0,1),P[j].afterScore-=z,typeof P[j].scoreChanges[0]>"u"?P[j].scoreChanges.push(-z):P[j].scoreChanges[0]-=z)}else if(R.east&&R.others){for(let F=0;F<T.length;F+=1)if(T[F]!==c&&T[F]!==j){const z=Jn(T[F],e.roundCount)?R.east:R.others;P[T[F]].afterScore+=z,P[T[F]].scoreChanges[0]+=z,P[T[F]].scoreChanges[0]===0&&P[T[F]].scoreChanges.splice(0,1),P[j].afterScore-=z,typeof P[j].scoreChanges[0]>"u"?P[j].scoreChanges.push(-z):P[j].scoreChanges[0]-=z}}}}},[]);let O=0;for(let N=0;N<T.length;N+=1){const j=T[N];j!==c&&P[j].isRiichi&&(P[j].afterScore-=1e3,P[j].scoreChanges.unshift(-1e3),O+=1e3)}return c&&O>0&&(P[c].afterScore+=O,P[c].scoreChanges.unshift(O)),P[c].detail=s,P},[c,m.all,m.east,m.others,m.target,m.win,e.playerResults,e.roundCount,y,v,_,t.setting.isManganRoundUp,t.setting.yakumanMax,h,s,g,x,w]),I=E.useCallback(()=>{if(!o||!s)return;const T={...e,resultType:mye(m),playerResults:C,nextRoundCumulatedThousands:0,resultDetail:{winnerPlayerIndex:c,...s,yakus:s.yakus??[]}};o(T)},[c,m,e,o,C,s]);return E.useEffect(()=>{u(r),p(n),a(e.playerResults[r].detail)},[e.playerResults,r,n]),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"flex gap-x-4 items-center",children:[f.jsx("div",{className:"flex-1",children:f.jsx(os,{value:c,onChangeValue:u,children:l.map(({index:T,name:P})=>f.jsx("option",{value:T,children:P},T))})}),f.jsx("div",{className:"text-xs text-gray-500",children:"和了"}),f.jsx("div",{className:"flex-1",children:f.jsxs(os,{value:h,onChangeValue:p,children:[f.jsx("option",{value:"-1",children:"自摸"}),l.map(({index:T,name:P})=>f.jsx("option",{value:T,children:P},T))]})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-bold",children:"役種"}),f.jsxs("div",{children:[f.jsx(FG,{round:e.roundCount,activePlayerIndex:c,targetPlayerIndex:h,onChange:a,value:e.playerResults[c].detail}),f.jsx(ege,{result:s,matchSetting:t.setting}),f.jsx("div",{className:"text-3xl font-bold text-center bg-teal-400 py-2",children:f.jsx(rge,{score:m})})]})]}),(y||v||_)&&f.jsxs("div",{className:"space-y-2 bg-yellow-200 p-4",children:[f.jsx("h5",{className:"font-bold",children:"包牌"}),f.jsxs("p",{children:["當某家打出的牌被鳴牌後，導致役滿確定時（大三元、大四喜、四槓子），便會觸發「包牌」。",f.jsx("br",{}),"- 如自摸，包牌者需支付該役種全部點數",f.jsx("br",{}),"- 如他家放銃，包牌者需支付該役種一半點數"]}),f.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y&&f.jsx(wn,{label:"大三元包牌者",children:f.jsxs(os,{value:g,onChangeValue:b,children:[f.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:T,name:P})=>f.jsx("option",{value:T,children:P},T))]})}),v&&f.jsx(wn,{label:"大四喜包牌者",children:f.jsxs(os,{value:x,onChangeValue:S,children:[f.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:T,name:P})=>f.jsx("option",{value:T,children:P},T))]})}),_&&f.jsx(wn,{label:"四槓子包牌者",children:f.jsxs(os,{value:w,onChangeValue:A,children:[f.jsx("option",{value:"-1",children:"沒有包牌"}),l.map(({index:T,name:P})=>f.jsx("option",{value:T,children:P},T))]})})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-bold",children:"分數變動"}),f.jsxs("table",{className:"data-table w-full text-lg",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"玩家"}),f.jsx("th",{children:"目前分數"}),f.jsx("th",{children:"變動"}),f.jsx("th",{children:"最新分數"})]})}),f.jsx("tbody",{children:Object.keys(t.players).map(T=>f.jsxs("tr",{children:[f.jsx("th",{className:"text-white py-1",style:{background:t.players[T].color},children:t.players[T].name}),f.jsx("td",{className:"px-2 text-center w-32",children:C[T].beforeScore}),f.jsx("td",{className:"text-center w-32",children:f.jsx(Mt,{signed:!0,value:C[T].afterScore-C[T].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),f.jsx("td",{className:"text-center w-32",children:C[T].afterScore})]},T))})]})]}),f.jsx("div",{className:"space-y-2",children:f.jsx(Re,{onClick:I,className:"w-full",disabled:!(s!=null&&s.yakus)||s.yakus.length<=0,children:i})})]})}function BG({match:t,currentMatchRound:e,submitNode:r=f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-camera-reels-fill"})," 提交並播出分數變動動畫"]}),onSubmit:n}){const[i,o]=E.useState({0:!1,1:!1,2:!1,3:!1}),s=E.useCallback(c=>{var h,p;const u=(h=c.currentTarget)==null?void 0:h.checked,d=(p=c.currentTarget)==null?void 0:p.getAttribute("data-player-index");typeof u>"u"||!d||o(m=>({...m,[d]:u}))},[]),a=E.useMemo(()=>{const c=Object.keys(e.playerResults),u={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].prevScoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].prevScoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].prevScoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].prevScoreChanges??[]}};let d=0,h=0;const p=Object.values(i).filter(m=>!!m).length;p===1?(d=3e3,h=1e3):p===2?(d=1500,h=1500):p===3&&(d=1e3,h=3e3);for(let m=0;m<c.length;m+=1){const y=c[m];d&&h&&(i[y]?(u[y].afterScore+=d,u[y].type=yt.Win,u[y].scoreChanges=[d]):(u[y].afterScore-=h,u[y].type=yt.Lose,u[y].scoreChanges=[-h])),u[y].isRiichi&&(u[y].afterScore-=1e3,u[y].scoreChanges.unshift(-1e3))}return u},[e.playerResults,i]),l=E.useCallback(()=>{if(!n)return;const c={...e,resultType:Ve.Exhausted,playerResults:a,nextRoundCumulatedThousands:e.cumulatedThousands+Object.values(a).filter(({isRiichi:u})=>!!u).length};n(c)},[e,n,a]);return E.useEffect(()=>{var c,u,d,h;o({0:!!e.playerResults[0].waitingTiles&&((c=e.playerResults[0].waitingTiles)==null?void 0:c.length)>0,1:!!e.playerResults[1].waitingTiles&&((u=e.playerResults[1].waitingTiles)==null?void 0:u.length)>0,2:!!e.playerResults[2].waitingTiles&&((d=e.playerResults[2].waitingTiles)==null?void 0:d.length)>0,3:!!e.playerResults[3].waitingTiles&&((h=e.playerResults[3].waitingTiles)==null?void 0:h.length)>0})},[e.playerResults]),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-bold",children:"分數變動"}),f.jsxs("table",{className:"data-table w-full text-lg",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"玩家"}),f.jsx("th",{className:"!bg-yellow-200",children:"聽牌？"}),f.jsx("th",{className:"w-32",children:"目前分數"}),f.jsx("th",{className:"w-32",children:"變動"}),f.jsx("th",{className:"w-32",children:"最新分數"})]})}),f.jsx("tbody",{children:Object.keys(t.players).map(c=>f.jsxs("tr",{children:[f.jsx("th",{className:"text-white py-1",style:{background:t.players[c].color},children:t.players[c].name}),f.jsx("td",{className:"text-center !bg-yellow-200",children:f.jsx(MG,{checked:i[c],onChange:s,"data-player-index":c})}),f.jsx("td",{className:"text-center",children:a[c].beforeScore}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{signed:!0,value:a[c].afterScore-a[c].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),f.jsx("td",{className:"text-center",children:a[c].afterScore})]},c))})]})]}),f.jsx("div",{className:"space-y-2",children:f.jsx(Re,{onClick:l,className:"w-full",children:r})})]})}var _g=t=>t.type==="checkbox",Mu=t=>t instanceof Date,_n=t=>t==null;const UG=t=>typeof t=="object";var pr=t=>!_n(t)&&!Array.isArray(t)&&UG(t)&&!Mu(t),VG=t=>pr(t)&&t.target?_g(t.target)?t.target.checked:t.target.value:t,nge=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,WG=(t,e)=>t.has(nge(e)),ige=t=>{const e=t.constructor&&t.constructor.prototype;return pr(e)&&e.hasOwnProperty("isPrototypeOf")},PO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zi(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(PO&&(t instanceof Blob||t instanceof FileList))&&(r||pr(t)))if(e=r?[]:{},!r&&!ige(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=zi(t[n]));else return t;return e}var wg=t=>Array.isArray(t)?t.filter(Boolean):[],qt=t=>t===void 0,se=(t,e,r)=>{if(!e||!pr(t))return r;const n=wg(e.split(/[,[\].]+?/)).reduce((i,o)=>_n(i)?i:i[o],t);return qt(n)||n===t?qt(t[e])?r:t[e]:n},Ao=t=>typeof t=="boolean";const jx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ts={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},oge=k.createContext(null),IO=()=>k.useContext(oge);var zG=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const s=o;return e._proxyFormState[s]!==Ji.all&&(e._proxyFormState[s]=!n||Ji.all),r&&(r[s]=!0),t[s]}});return i},bi=t=>pr(t)&&!Object.keys(t).length,GG=(t,e,r,n)=>{r(t);const{name:i,...o}=t;return bi(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(s=>e[s]===(!n||Ji.all))},H0=t=>Array.isArray(t)?t:[t],qG=(t,e,r)=>!t||!e||t===e||H0(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function NO(t){const e=k.useRef(t);e.current=t,k.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function sge(t){const e=IO(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=k.useState(r._formState),l=k.useRef(!0),c=k.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=k.useRef(i);return u.current=i,NO({disabled:n,next:d=>l.current&&qG(u.current,d.name,o)&&GG(d,c.current,r._updateFormState)&&a({...r._formState,...d}),subject:r._subjects.state}),k.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),zG(s,r,c.current,!1)}var Oo=t=>typeof t=="string",HG=(t,e,r,n,i)=>Oo(t)?(n&&e.watch.add(t),se(r,t,i)):Array.isArray(t)?t.map(o=>(n&&e.watch.add(o),se(r,o))):(n&&(e.watchAll=!0),r);function Ka(t){const e=IO(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=k.useRef(n);a.current=n,NO({disabled:o,subject:r._subjects.values,next:u=>{qG(a.current,u.name,s)&&c(zi(HG(a.current,r._names,u.values||r._formValues,!1,i)))}});const[l,c]=k.useState(r._getWatch(n,i));return k.useEffect(()=>r._removeUnmounted()),l}var kO=t=>/^\w*$/.test(t),KG=t=>wg(t.replace(/["|']|\]/g,"").split(/\.|\[/));function _t(t,e,r){let n=-1;const i=kO(e)?[e]:KG(e),o=i.length,s=o-1;for(;++n<o;){const a=i[n];let l=r;if(n!==s){const c=t[a];l=pr(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}t[a]=l,t=t[a]}return t}function age(t){const e=IO(),{name:r,disabled:n,control:i=e.control,shouldUnregister:o}=t,s=WG(i._names.array,r),a=Ka({control:i,name:r,defaultValue:se(i._formValues,r,se(i._defaultValues,r,t.defaultValue)),exact:!0}),l=sge({control:i,name:r}),c=k.useRef(i.register(r,{...t.rules,value:a}));return c.current=i.register(r,t.rules),k.useEffect(()=>{const u=i._options.shouldUnregister||o,d=(h,p)=>{const m=se(i._fields,h);m&&(m._f.mount=p)};if(d(r,!0),u){const h=zi(se(i._options.defaultValues,r));_t(i._defaultValues,r,h),qt(se(i._formValues,r))&&_t(i._formValues,r,h)}return()=>{(s?u&&!i._state.action:u)?i.unregister(r):d(r,!1)}},[r,i,s,o]),k.useEffect(()=>{se(i._fields,r)&&i._updateDisabledField({disabled:n,fields:i._fields,name:r,value:se(i._fields,r)._f.value})},[n,r,i]),{field:{name:r,value:a,...Ao(n)||Ao(l.disabled)?{disabled:l.disabled||n}:{},onChange:k.useCallback(u=>c.current.onChange({target:{value:VG(u),name:r},type:jx.CHANGE}),[r]),onBlur:k.useCallback(()=>c.current.onBlur({target:{value:se(i._formValues,r),name:r},type:jx.BLUR}),[r,i]),ref:u=>{const d=se(i._fields,r);d&&u&&(d._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:h=>u.setCustomValidity(h),reportValidity:()=>u.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!se(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!se(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!se(l.touchedFields,r)},error:{enumerable:!0,get:()=>se(l.errors,r)}})}}const jn=t=>t.render(age(t));var lge=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},jF=t=>({isOnSubmit:!t||t===Ji.onSubmit,isOnBlur:t===Ji.onBlur,isOnChange:t===Ji.onChange,isOnAll:t===Ji.all,isOnTouch:t===Ji.onTouched}),$F=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const K0=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const o=se(t,i);if(o){const{_f:s,...a}=o;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],i)&&!n)break;if(s.ref&&e(s.ref,s.name)&&!n)break}else pr(a)&&K0(a,e)}}};var cge=(t,e,r)=>{const n=wg(se(t,r));return _t(n,"root",e[r]),_t(t,r,n),t},OO=t=>t.type==="file",ga=t=>typeof t=="function",$x=t=>{if(!PO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Y0=t=>Oo(t),RO=t=>t.type==="radio",Dx=t=>t instanceof RegExp;const DF={value:!1,isValid:!1},MF={value:!0,isValid:!0};var YG=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!qt(t[0].attributes.value)?qt(t[0].value)||t[0].value===""?MF:{value:t[0].value,isValid:!0}:MF:DF}return DF};const FF={isValid:!1,value:null};var QG=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,FF):FF;function LF(t,e,r="validate"){if(Y0(t)||Array.isArray(t)&&t.every(Y0)||Ao(t)&&!t)return{type:r,message:Y0(t)?t:"",ref:e}}var nu=t=>pr(t)&&!Dx(t)?t:{value:t,message:""},BF=async(t,e,r,n,i)=>{const{ref:o,refs:s,required:a,maxLength:l,minLength:c,min:u,max:d,pattern:h,validate:p,name:m,valueAsNumber:y,mount:g,disabled:b}=t._f,v=se(e,m);if(!g||b)return{};const x=s?s[0]:o,S=O=>{n&&x.reportValidity&&(x.setCustomValidity(Ao(O)?"":O||""),x.reportValidity())},_={},w=RO(o),A=_g(o),C=w||A,I=(y||OO(o))&&qt(o.value)&&qt(v)||$x(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,T=lge.bind(null,m,r,_),P=(O,N,j,L=ts.maxLength,U=ts.minLength)=>{const V=O?N:j;_[m]={type:O?L:U,message:V,ref:o,...T(O?L:U,V)}};if(i?!Array.isArray(v)||!v.length:a&&(!C&&(I||_n(v))||Ao(v)&&!v||A&&!YG(s).isValid||w&&!QG(s).isValid)){const{value:O,message:N}=Y0(a)?{value:!!a,message:a}:nu(a);if(O&&(_[m]={type:ts.required,message:N,ref:x,...T(ts.required,N)},!r))return S(N),_}if(!I&&(!_n(u)||!_n(d))){let O,N;const j=nu(d),L=nu(u);if(!_n(v)&&!isNaN(v)){const U=o.valueAsNumber||v&&+v;_n(j.value)||(O=U>j.value),_n(L.value)||(N=U<L.value)}else{const U=o.valueAsDate||new Date(v),V=z=>new Date(new Date().toDateString()+" "+z),R=o.type=="time",F=o.type=="week";Oo(j.value)&&v&&(O=R?V(v)>V(j.value):F?v>j.value:U>new Date(j.value)),Oo(L.value)&&v&&(N=R?V(v)<V(L.value):F?v<L.value:U<new Date(L.value))}if((O||N)&&(P(!!O,j.message,L.message,ts.max,ts.min),!r))return S(_[m].message),_}if((l||c)&&!I&&(Oo(v)||i&&Array.isArray(v))){const O=nu(l),N=nu(c),j=!_n(O.value)&&v.length>+O.value,L=!_n(N.value)&&v.length<+N.value;if((j||L)&&(P(j,O.message,N.message),!r))return S(_[m].message),_}if(h&&!I&&Oo(v)){const{value:O,message:N}=nu(h);if(Dx(O)&&!v.match(O)&&(_[m]={type:ts.pattern,message:N,ref:o,...T(ts.pattern,N)},!r))return S(N),_}if(p){if(ga(p)){const O=await p(v,e),N=LF(O,x);if(N&&(_[m]={...N,...T(ts.validate,N.message)},!r))return S(N.message),_}else if(pr(p)){let O={};for(const N in p){if(!bi(O)&&!r)break;const j=LF(await p[N](v,e),x,N);j&&(O={...j,...T(N,j.message)},S(j.message),r&&(_[m]=O))}if(!bi(O)&&(_[m]={ref:x,...O},!r))return _}}return S(!0),_};function uge(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=qt(t)?n++:t[e[n++]];return t}function fge(t){for(const e in t)if(t.hasOwnProperty(e)&&!qt(t[e]))return!1;return!0}function Mr(t,e){const r=Array.isArray(e)?e:kO(e)?[e]:KG(e),n=r.length===1?t:uge(t,r),i=r.length-1,o=r[i];return n&&delete n[o],i!==0&&(pr(n)&&bi(n)||Array.isArray(n)&&fge(n))&&Mr(t,r.slice(0,-1)),t}function nA(){let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}}var Mx=t=>_n(t)||!UG(t);function Dl(t,e){if(Mx(t)||Mx(e))return t===e;if(Mu(t)&&Mu(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const s=e[i];if(Mu(o)&&Mu(s)||pr(o)&&pr(s)||Array.isArray(o)&&Array.isArray(s)?!Dl(o,s):o!==s)return!1}}return!0}var XG=t=>t.type==="select-multiple",dge=t=>RO(t)||_g(t),iA=t=>$x(t)&&t.isConnected,JG=t=>{for(const e in t)if(ga(t[e]))return!0;return!1};function Fx(t,e={}){const r=Array.isArray(t);if(pr(t)||r)for(const n in t)Array.isArray(t[n])||pr(t[n])&&!JG(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Fx(t[n],e[n])):_n(t[n])||(e[n]=!0);return e}function ZG(t,e,r){const n=Array.isArray(t);if(pr(t)||n)for(const i in t)Array.isArray(t[i])||pr(t[i])&&!JG(t[i])?qt(e)||Mx(r[i])?r[i]=Array.isArray(t[i])?Fx(t[i],[]):{...Fx(t[i])}:ZG(t[i],_n(e)?{}:e[i],r[i]):r[i]=!Dl(t[i],e[i]);return r}var oA=(t,e)=>ZG(t,e,Fx(e)),eq=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>qt(t)?t:e?t===""?NaN:t&&+t:r&&Oo(t)?new Date(t):n?n(t):t;function sA(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return OO(e)?e.files:RO(e)?QG(t.refs).value:XG(e)?[...e.selectedOptions].map(({value:r})=>r):_g(e)?YG(t.refs).value:eq(qt(e.value)?t.ref.value:e.value,t)}var hge=(t,e,r,n)=>{const i={};for(const o of t){const s=se(e,o);s&&_t(i,o,s._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Nh=t=>qt(t)?t:Dx(t)?t.source:pr(t)?Dx(t.value)?t.value.source:t.value:t,pge=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function UF(t,e,r){const n=se(t,r);if(n||kO(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),s=se(e,o),a=se(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var mge=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,yge=(t,e)=>!wg(se(t,e)).length&&Mr(t,e);const gge={mode:Ji.onSubmit,reValidateMode:Ji.onChange,shouldFocusError:!0};function vge(t={},e){let r={...gge,...t},n={submitCount:0,isDirty:!1,isLoading:ga(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},i={},o=pr(r.defaultValues)||pr(r.values)?zi(r.defaultValues||r.values)||{}:{},s=r.shouldUnregister?{}:zi(o),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:nA(),array:nA(),state:nA()},p=t.resetOptions&&t.resetOptions.keepDirtyValues,m=jF(r.mode),y=jF(r.reValidateMode),g=r.criteriaMode===Ji.all,b=$=>B=>{clearTimeout(u),u=setTimeout($,B)},v=async $=>{if(d.isValid||$){const B=r.resolver?bi((await I()).errors):await P(i,!0);B!==n.isValid&&h.state.next({isValid:B})}},x=$=>d.isValidating&&h.state.next({isValidating:$}),S=($,B=[],W,re,Z=!0,Q=!0)=>{if(re&&W){if(a.action=!0,Q&&Array.isArray(se(i,$))){const pe=W(se(i,$),re.argA,re.argB);Z&&_t(i,$,pe)}if(Q&&Array.isArray(se(n.errors,$))){const pe=W(se(n.errors,$),re.argA,re.argB);Z&&_t(n.errors,$,pe),yge(n.errors,$)}if(d.touchedFields&&Q&&Array.isArray(se(n.touchedFields,$))){const pe=W(se(n.touchedFields,$),re.argA,re.argB);Z&&_t(n.touchedFields,$,pe)}d.dirtyFields&&(n.dirtyFields=oA(o,s)),h.state.next({name:$,isDirty:N($,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _t(s,$,B)},_=($,B)=>{_t(n.errors,$,B),h.state.next({errors:n.errors})},w=($,B,W,re)=>{const Z=se(i,$);if(Z){const Q=se(s,$,qt(W)?se(o,$):W);qt(Q)||re&&re.defaultChecked||B?_t(s,$,B?Q:sA(Z._f)):U($,Q),a.mount&&v()}},A=($,B,W,re,Z)=>{let Q=!1,pe=!1;const nt={name:$};if(!W||re){d.isDirty&&(pe=n.isDirty,n.isDirty=nt.isDirty=N(),Q=pe!==nt.isDirty);const Wt=Dl(se(o,$),B);pe=se(n.dirtyFields,$),Wt?Mr(n.dirtyFields,$):_t(n.dirtyFields,$,!0),nt.dirtyFields=n.dirtyFields,Q=Q||d.dirtyFields&&pe!==!Wt}if(W){const Wt=se(n.touchedFields,$);Wt||(_t(n.touchedFields,$,W),nt.touchedFields=n.touchedFields,Q=Q||d.touchedFields&&Wt!==W)}return Q&&Z&&h.state.next(nt),Q?nt:{}},C=($,B,W,re)=>{const Z=se(n.errors,$),Q=d.isValid&&Ao(B)&&n.isValid!==B;if(t.delayError&&W?(c=b(()=>_($,W)),c(t.delayError)):(clearTimeout(u),c=null,W?_t(n.errors,$,W):Mr(n.errors,$)),(W?!Dl(Z,W):Z)||!bi(re)||Q){const pe={...re,...Q&&Ao(B)?{isValid:B}:{},errors:n.errors,name:$};n={...n,...pe},h.state.next(pe)}x(!1)},I=async $=>r.resolver(s,r.context,hge($||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation)),T=async $=>{const{errors:B}=await I($);if($)for(const W of $){const re=se(B,W);re?_t(n.errors,W,re):Mr(n.errors,W)}else n.errors=B;return B},P=async($,B,W={valid:!0})=>{for(const re in $){const Z=$[re];if(Z){const{_f:Q,...pe}=Z;if(Q){const nt=l.array.has(Q.name),Wt=await BF(Z,s,g,r.shouldUseNativeValidation&&!B,nt);if(Wt[Q.name]&&(W.valid=!1,B))break;!B&&(se(Wt,Q.name)?nt?cge(n.errors,Wt,Q.name):_t(n.errors,Q.name,Wt[Q.name]):Mr(n.errors,Q.name))}pe&&await P(pe,B,W)}}return W.valid},O=()=>{for(const $ of l.unMount){const B=se(i,$);B&&(B._f.refs?B._f.refs.every(W=>!iA(W)):!iA(B._f.ref))&&pt($)}l.unMount=new Set},N=($,B)=>($&&B&&_t(s,$,B),!Dl(te(),o)),j=($,B,W)=>HG($,l,{...a.mount?s:qt(B)?o:Oo($)?{[$]:B}:B},W,B),L=$=>wg(se(a.mount?s:o,$,t.shouldUnregister?se(o,$,[]):[])),U=($,B,W={})=>{const re=se(i,$);let Z=B;if(re){const Q=re._f;Q&&(!Q.disabled&&_t(s,$,eq(B,Q)),Z=$x(Q.ref)&&_n(B)?"":B,XG(Q.ref)?[...Q.ref.options].forEach(pe=>pe.selected=Z.includes(pe.value)):Q.refs?_g(Q.ref)?Q.refs.length>1?Q.refs.forEach(pe=>(!pe.defaultChecked||!pe.disabled)&&(pe.checked=Array.isArray(Z)?!!Z.find(nt=>nt===pe.value):Z===pe.value)):Q.refs[0]&&(Q.refs[0].checked=!!Z):Q.refs.forEach(pe=>pe.checked=pe.value===Z):OO(Q.ref)?Q.ref.value="":(Q.ref.value=Z,Q.ref.type||h.values.next({name:$,values:{...s}})))}(W.shouldDirty||W.shouldTouch)&&A($,Z,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&ae($)},V=($,B,W)=>{for(const re in B){const Z=B[re],Q=`${$}.${re}`,pe=se(i,Q);(l.array.has($)||!Mx(Z)||pe&&!pe._f)&&!Mu(Z)?V(Q,Z,W):U(Q,Z,W)}},R=($,B,W={})=>{const re=se(i,$),Z=l.array.has($),Q=zi(B);_t(s,$,Q),Z?(h.array.next({name:$,values:{...s}}),(d.isDirty||d.dirtyFields)&&W.shouldDirty&&h.state.next({name:$,dirtyFields:oA(o,s),isDirty:N($,Q)})):re&&!re._f&&!_n(Q)?V($,Q,W):U($,Q,W),$F($,l)&&h.state.next({...n}),h.values.next({name:$,values:{...s}}),!a.mount&&e()},F=async $=>{const B=$.target;let W=B.name,re=!0;const Z=se(i,W),Q=()=>B.type?sA(Z._f):VG($),pe=nt=>{re=Number.isNaN(nt)||nt===se(s,W,nt)};if(Z){let nt,Wt;const Dr=Q(),po=$.type===jx.BLUR||$.type===jx.FOCUS_OUT,PS=!pge(Z._f)&&!r.resolver&&!se(n.errors,W)&&!Z._f.deps||mge(po,se(n.touchedFields,W),n.isSubmitted,y,m),hh=$F(W,l,po);_t(s,W,Dr),po?(Z._f.onBlur&&Z._f.onBlur($),c&&c(0)):Z._f.onChange&&Z._f.onChange($);const ph=A(W,Dr,po,!1),ev=!bi(ph)||hh;if(!po&&h.values.next({name:W,type:$.type,values:{...s}}),PS)return d.isValid&&v(),ev&&h.state.next({name:W,...hh?{}:ph});if(!po&&hh&&h.state.next({...n}),x(!0),r.resolver){const{errors:tv}=await I([W]);if(pe(Dr),re){const IS=UF(n.errors,i,W),rv=UF(tv,i,IS.name||W);nt=rv.error,W=rv.name,Wt=bi(tv)}}else nt=(await BF(Z,s,g,r.shouldUseNativeValidation))[W],pe(Dr),re&&(nt?Wt=!1:d.isValid&&(Wt=await P(i,!0)));re&&(Z._f.deps&&ae(Z._f.deps),C(W,Wt,nt,ph))}},z=($,B)=>{if(se(n.errors,B)&&$.focus)return $.focus(),1},ae=async($,B={})=>{let W,re;const Z=H0($);if(x(!0),r.resolver){const Q=await T(qt($)?$:Z);W=bi(Q),re=$?!Z.some(pe=>se(Q,pe)):W}else $?(re=(await Promise.all(Z.map(async Q=>{const pe=se(i,Q);return await P(pe&&pe._f?{[Q]:pe}:pe)}))).every(Boolean),!(!re&&!n.isValid)&&v()):re=W=await P(i);return h.state.next({...!Oo($)||d.isValid&&W!==n.isValid?{}:{name:$},...r.resolver||!$?{isValid:W}:{},errors:n.errors,isValidating:!1}),B.shouldFocus&&!re&&K0(i,z,$?Z:l.mount),re},te=$=>{const B={...o,...a.mount?s:{}};return qt($)?B:Oo($)?se(B,$):$.map(W=>se(B,W))},be=($,B)=>({invalid:!!se((B||n).errors,$),isDirty:!!se((B||n).dirtyFields,$),isTouched:!!se((B||n).touchedFields,$),error:se((B||n).errors,$)}),at=$=>{$&&H0($).forEach(B=>Mr(n.errors,B)),h.state.next({errors:$?n.errors:{}})},rt=($,B,W)=>{const re=(se(i,$,{_f:{}})._f||{}).ref;_t(n.errors,$,{...B,ref:re}),h.state.next({name:$,errors:n.errors,isValid:!1}),W&&W.shouldFocus&&re&&re.focus&&re.focus()},Vt=($,B)=>ga($)?h.values.subscribe({next:W=>$(j(void 0,B),W)}):j($,B,!0),pt=($,B={})=>{for(const W of $?H0($):l.mount)l.mount.delete(W),l.array.delete(W),B.keepValue||(Mr(i,W),Mr(s,W)),!B.keepError&&Mr(n.errors,W),!B.keepDirty&&Mr(n.dirtyFields,W),!B.keepTouched&&Mr(n.touchedFields,W),!r.shouldUnregister&&!B.keepDefaultValue&&Mr(o,W);h.values.next({values:{...s}}),h.state.next({...n,...B.keepDirty?{isDirty:N()}:{}}),!B.keepIsValid&&v()},Zt=({disabled:$,name:B,field:W,fields:re,value:Z})=>{if(Ao($)){const Q=$?void 0:qt(Z)?sA(W?W._f:se(re,B)._f):Z;_t(s,B,Q),A(B,Q,!1,!1,!0)}},ee=($,B={})=>{let W=se(i,$);const re=Ao(B.disabled);return _t(i,$,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:$}},name:$,mount:!0,...B}}),l.mount.add($),W?Zt({field:W,disabled:B.disabled,name:$}):w($,!0,B.value),{...re?{disabled:B.disabled}:{},...r.progressive?{required:!!B.required,min:Nh(B.min),max:Nh(B.max),minLength:Nh(B.minLength),maxLength:Nh(B.maxLength),pattern:Nh(B.pattern)}:{},name:$,onChange:F,onBlur:F,ref:Z=>{if(Z){ee($,B),W=se(i,$);const Q=qt(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,pe=dge(Q),nt=W._f.refs||[];if(pe?nt.find(Wt=>Wt===Q):Q===W._f.ref)return;_t(i,$,{_f:{...W._f,...pe?{refs:[...nt.filter(iA),Q,...Array.isArray(se(o,$))?[{}]:[]],ref:{type:Q.type,name:$}}:{ref:Q}}}),w($,!1,void 0,Q)}else W=se(i,$,{}),W._f&&(W._f.mount=!1),(r.shouldUnregister||B.shouldUnregister)&&!(WG(l.array,$)&&a.action)&&l.unMount.add($)}}},xe=()=>r.shouldFocusError&&K0(i,z,l.mount),Ee=$=>{Ao($)&&(h.state.next({disabled:$}),K0(i,B=>{B.disabled=$},0,!1))},q=($,B)=>async W=>{W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let re=zi(s);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:Z,values:Q}=await I();n.errors=Z,re=Q}else await P(i);Mr(n.errors,"root"),bi(n.errors)?(h.state.next({errors:{}}),await $(re,W)):(B&&await B({...n.errors},W),xe(),setTimeout(xe)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bi(n.errors),submitCount:n.submitCount+1,errors:n.errors})},Ze=($,B={})=>{se(i,$)&&(qt(B.defaultValue)?R($,se(o,$)):(R($,B.defaultValue),_t(o,$,B.defaultValue)),B.keepTouched||Mr(n.touchedFields,$),B.keepDirty||(Mr(n.dirtyFields,$),n.isDirty=B.defaultValue?N($,se(o,$)):N()),B.keepError||(Mr(n.errors,$),d.isValid&&v()),h.state.next({...n}))},ke=($,B={})=>{const W=$?zi($):o,re=zi(W),Z=$&&!bi($)?re:o;if(B.keepDefaultValues||(o=W),!B.keepValues){if(B.keepDirtyValues||p)for(const Q of l.mount)se(n.dirtyFields,Q)?_t(Z,Q,se(s,Q)):R(Q,se(Z,Q));else{if(PO&&qt($))for(const Q of l.mount){const pe=se(i,Q);if(pe&&pe._f){const nt=Array.isArray(pe._f.refs)?pe._f.refs[0]:pe._f.ref;if($x(nt)){const Wt=nt.closest("form");if(Wt){Wt.reset();break}}}}i={}}s=t.shouldUnregister?B.keepDefaultValues?zi(o):{}:zi(Z),h.array.next({values:{...Z}}),h.values.next({values:{...Z}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!B.keepIsValid,a.watch=!!t.shouldUnregister,h.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Dl($,o)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:B.keepDirtyValues?n.dirtyFields:B.keepDefaultValues&&$?oA(o,$):{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},vt=($,B)=>ke(ga($)?$(s):$,B);return{control:{register:ee,unregister:pt,getFieldState:be,handleSubmit:q,setError:rt,_executeSchema:I,_getWatch:j,_getDirty:N,_updateValid:v,_removeUnmounted:O,_updateFieldArray:S,_updateDisabledField:Zt,_getFieldArray:L,_reset:ke,_resetDefaultValues:()=>ga(r.defaultValues)&&r.defaultValues().then($=>{vt($,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:$=>{n={...n,...$}},_disableForm:Ee,_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return s},get _state(){return a},set _state($){a=$},get _defaultValues(){return o},get _names(){return l},set _names($){l=$},get _formState(){return n},set _formState($){n=$},get _options(){return r},set _options($){r={...r,...$}}},trigger:ae,register:ee,handleSubmit:q,watch:Vt,setValue:R,getValues:te,reset:vt,resetField:Ze,clearErrors:at,unregister:pt,setError:rt,setFocus:($,B={})=>{const W=se(i,$),re=W&&W._f;if(re){const Z=re.refs?re.refs[0]:re.ref;Z.focus&&(Z.focus(),B.shouldSelect&&Z.select())}},getFieldState:be}}function Gd(t={}){const e=k.useRef(),r=k.useRef(),[n,i]=k.useState({isDirty:!1,isValidating:!1,isLoading:ga(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:ga(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...vge(t,()=>i(s=>({...s}))),formState:n});const o=e.current.control;return o._options=t,NO({subject:o._subjects.state,next:s=>{GG(s,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),k.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),k.useEffect(()=>{if(o._proxyFormState.isDirty){const s=o._getDirty();s!==n.isDirty&&o._subjects.state.next({isDirty:s})}},[o,n.isDirty]),k.useEffect(()=>{t.values&&!Dl(t.values,r.current)?(o._reset(t.values,o._options.resetOptions),r.current=t.values):o._resetDefaultValues()},[t.values,o]),k.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=zG(n,o),e.current}function tq({player:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return f.jsxs("div",{className:"relative flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{backgroundColor:t.color??"#115e59"},...n,children:[t.teamPicUrl&&f.jsx("div",{className:"absolute inset-0 opacity-10 bg-center bg-no-repeat bg-cover",style:{backgroundImage:`url(${t.teamPicUrl})`}}),f.jsx("div",{className:"relative z-10 shrink-0",children:f.jsx("div",{className:"w-14 h-14 bg-center bg-contain bg-no-repeat rounded",style:{backgroundImage:`url(${t.proPicUrl||"/images/portrait-placeholder.jpeg"})`}})}),f.jsxs("div",{className:"flex-1 relative z-10 ",children:[f.jsx("div",{children:t.title??"(無頭銜)"}),f.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})]}),e&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{variant:"icon",color:"inverted",type:"button",onClick:i,children:f.jsx("i",{className:"bi bi-pencil"})})})]})}const bge=A9(["block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600"]);function va({className:t,...e}){const r=E.useMemo(()=>bge({className:t}),[t]);return f.jsx("input",{className:r,...e})}function xge({match:t,currentMatchRound:e,onSubmit:r}){const{reset:n,handleSubmit:i,control:o}=Gd({defaultValues:{player_0:0,player_1:0,player_2:0,player_3:0,cumulatedThousands:0,roundCount:0,extendedRoundCount:0}}),s=E.useMemo(()=>Object.keys(t.players).map(c=>({...t.players[c],index:c.toString(),position:Bc(c,e.roundCount)})),[t.players,e.roundCount]),a=E.useMemo(()=>i(l=>{if(!r)return;const c={...e,resultType:Ve.Hotfix,playerResults:{0:{...e.playerResults[0],afterScore:parseInt(l.player_0,10)},1:{...e.playerResults[1],afterScore:parseInt(l.player_1,10)},2:{...e.playerResults[2],afterScore:parseInt(l.player_2,10)},3:{...e.playerResults[3],afterScore:parseInt(l.player_3,10)}},cumulatedThousands:parseInt(l.cumulatedThousands,10),roundCount:parseInt(l.roundCount,10),extendedRoundCount:parseInt(l.extendedRoundCount,10)};r(c)}),[e,i,r]);return E.useEffect(()=>{n({player_0:e.playerResults[0].beforeScore,player_1:e.playerResults[1].beforeScore,player_2:e.playerResults[2].beforeScore,player_3:e.playerResults[3].beforeScore,cumulatedThousands:e.cumulatedThousands,roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount})},[e.cumulatedThousands,e.extendedRoundCount,e.playerResults,e.roundCount,n]),f.jsxs("div",{className:"space-y-8",children:[f.jsx("div",{className:"space-y-2",children:f.jsxs("table",{className:"data-table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-1/2",children:"玩家"}),f.jsx("th",{className:"w-1/4",children:"現在分數"}),f.jsx("th",{className:"w-1/4",children:"新的分數"})]})}),f.jsxs("tbody",{children:[s.map(l=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx(tq,{player:l})}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.playerResults[l.index].beforeScore}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx(jn,{name:`player_${l.index}`,control:o,rules:{required:!0},render:({field:c})=>f.jsx(va,{className:"text-center",type:"number",...c})})})]},l.index)),f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"供托"}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.cumulatedThousands}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx(jn,{name:"cumulatedThousands",control:o,rules:{required:!0},render:({field:l})=>f.jsx(va,{className:"text-center",type:"number",...l})})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"局數(東1局=1, 東2局=2, ...)"}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.roundCount}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx(jn,{name:"roundCount",control:o,rules:{required:!0},render:({field:l})=>f.jsx(va,{className:"text-center",type:"number",...l})})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"本場數"}),f.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.extendedRoundCount}),f.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:f.jsx(jn,{name:"extendedRoundCount",control:o,rules:{required:!0},render:({field:l})=>f.jsx(va,{className:"text-center",type:"number",...l})})})]})]})]})}),f.jsx("div",{className:"space-y-2",children:f.jsx(Re,{onClick:a,className:"w-full",children:"提交並更新直播畫面"})})]})}const _ge=({match:t,matchRound:e,onSubmit:r})=>{const{control:n,register:i,reset:o}=Gd(),s=Ka({name:"_playerResults",control:n}),a=Ka({name:"_resultType",control:n}),l=E.useMemo(()=>!e||!s?null:{...e,playerResults:{0:{...e.playerResults[0],isRiichi:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed",detail:{...e.playerResults[0].detail,isRiichied:s[0].status==="isRiichied",isRevealed:s[0].status==="isRevealed"}},1:{...e.playerResults[1],isRiichi:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed",detail:{...e.playerResults[1].detail,isRiichied:s[1].status==="isRiichied",isRevealed:s[1].status==="isRevealed"}},2:{...e.playerResults[2],isRiichi:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed",detail:{...e.playerResults[2].detail,isRiichied:s[2].status==="isRiichied",isRevealed:s[2].status==="isRevealed"}},3:{...e.playerResults[3],isRiichi:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed",detail:{...e.playerResults[3].detail,isRiichied:s[3].status==="isRiichied",isRevealed:s[3].status==="isRevealed"}}}},[e,s]),c=E.useMemo(()=>{var h,p;return l?{match:t,currentMatchRound:l,initialActivePlayerIndex:l.resultType===Ve.Ron||l.resultType===Ve.SelfDrawn?((h=Object.entries(l.playerResults).find(([,m])=>m.type===yt.Win))==null?void 0:h[0])??"0":"0",initialTargetPlayerIndex:l.resultType===Ve.Ron?((p=Object.entries(l.playerResults).find(([,m])=>m.type===yt.Lose))==null?void 0:p[0])??"-1":"-1"}:null},[t,l]),u=E.useMemo(()=>l?{match:t,currentMatchRound:l}:null,[t,l]),d=E.useCallback(h=>{r==null||r(h)},[r]);return E.useEffect(()=>{e&&o({_resultType:e.resultType===Ve.Ron||e.resultType===Ve.SelfDrawn?"ron":"exhausted",_playerResults:{0:{status:e.playerResults[0].isRevealed?"isRevealed":e.playerResults[0].isRiichi?"isRiichied":"none"},1:{status:e.playerResults[1].isRevealed?"isRevealed":e.playerResults[1].isRiichi?"isRiichied":"none"},2:{status:e.playerResults[2].isRevealed?"isRevealed":e.playerResults[2].isRiichi?"isRiichied":"none"},3:{status:e.playerResults[3].isRevealed?"isRevealed":e.playerResults[3].isRiichi?"isRiichied":"none"}}})},[e,e==null?void 0:e.playerResults,e==null?void 0:e.resultType,o]),f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-xl font-bold",children:"各玩家終局狀態"}),f.jsxs("table",{className:"w-full data-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{}),f.jsx("th",{children:"立直/副露？"})]})}),f.jsx("tbody",{children:["0","1","2","3"].map(h=>f.jsxs("tr",{children:[f.jsx("td",{children:t.players[h].nickname}),f.jsx("td",{children:f.jsxs("select",{...i(`_playerResults.${h}.status`),children:[f.jsx("option",{value:"none",children:"-"}),f.jsx("option",{value:"isRiichied",children:"立直"}),f.jsx("option",{value:"isRevealed",children:"副露"})]})})]},h))})]}),f.jsx("hr",{}),f.jsxs("h2",{className:"text-xl font-bold",children:[f.jsx("span",{children:"對局結果："}),f.jsxs("select",{...i("_resultType"),children:[f.jsx("option",{value:"ron",children:"和了"}),f.jsx("option",{value:"exhausted",children:"流局"})]})]}),a==="ron"&&!!c&&f.jsx(LG,{...c,submitNode:"提交修改",onSubmit:d}),a==="exhausted"&&!!u&&f.jsx(BG,{...u,submitNode:"提交修改",onSubmit:d})]})};function Tm(t){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(t)}function wge(t,e){if(Tm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Tm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sge(t){var e=wge(t,"string");return Tm(e)==="symbol"?e:String(e)}function Ege(t,e,r){return e=Sge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(r),!0).forEach(function(n){Ege(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var zF=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),aA=function(){return Math.random().toString(36).substring(7).split("").join(".")},GF={INIT:"@@redux/INIT"+aA(),REPLACE:"@@redux/REPLACE"+aA(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aA()}};function Age(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function rq(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Nn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Nn(1));return r(rq)(t,e)}if(typeof t!="function")throw new Error(Nn(2));var i=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Nn(3));return o}function d(y){if(typeof y!="function")throw new Error(Nn(4));if(l)throw new Error(Nn(5));var g=!0;return c(),a.push(y),function(){if(g){if(l)throw new Error(Nn(6));g=!1,c();var v=a.indexOf(y);a.splice(v,1),s=null}}}function h(y){if(!Age(y))throw new Error(Nn(7));if(typeof y.type>"u")throw new Error(Nn(8));if(l)throw new Error(Nn(9));try{l=!0,o=i(o,y)}finally{l=!1}for(var g=s=a,b=0;b<g.length;b++){var v=g[b];v()}return y}function p(y){if(typeof y!="function")throw new Error(Nn(10));i=y,h({type:GF.REPLACE})}function m(){var y,g=d;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Nn(11));function x(){v.next&&v.next(u())}x();var S=g(x);return{unsubscribe:S}}},y[zF]=function(){return this},y}return h({type:GF.INIT}),n={dispatch:h,subscribe:d,getState:u,replaceReducer:p},n[zF]=m,n}function qF(t,e){return function(){return e(t.apply(this,arguments))}}function HF(t,e){if(typeof t=="function")return qF(t,e);if(typeof t!="object"||t===null)throw new Error(Nn(16));var r={};for(var n in t){var i=t[n];typeof i=="function"&&(r[n]=qF(i,e))}return r}function nq(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function Cge(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error(Nn(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=nq.apply(void 0,a)(i.dispatch),WF(WF({},i),{},{dispatch:o})}}}var Tge={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw=E,Pge=rk;function Ige(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nge=typeof Object.is=="function"?Object.is:Ige,kge=Pge.useSyncExternalStore,Oge=Yw.useRef,Rge=Yw.useEffect,jge=Yw.useMemo,$ge=Yw.useDebugValue;Tge.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var o=Oge(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=jge(function(){function l(p){if(!c){if(c=!0,u=p,p=n(p),i!==void 0&&s.hasValue){var m=s.value;if(i(m,p))return d=m}return d=p}if(m=d,Nge(u,p))return m;var y=n(p);return i!==void 0&&i(m,y)?m:(u=p,d=y)}var c=!1,u,d,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,i]);var a=kge(t,o[0],o[1]);return Rge(function(){s.hasValue=!0,s.value=a},[a]),$ge(a),a};function Dge(t){t()}let iq=Dge;const Mge=t=>iq=t,Fge=()=>iq,KF=Symbol.for("react-redux-context"),YF=typeof globalThis<"u"?globalThis:{};function Lge(){var t;if(!E.createContext)return{};const e=(t=YF[KF])!=null?t:YF[KF]=new Map;let r=e.get(E.createContext);return r||(r=E.createContext(null),e.set(E.createContext,r)),r}const oq=Lge(),Bge=()=>{throw new Error("uSES not initialized!")};function uf(){return uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uf.apply(this,arguments)}function sq(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var aq={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=typeof Symbol=="function"&&Symbol.for,jO=Rr?Symbol.for("react.element"):60103,$O=Rr?Symbol.for("react.portal"):60106,Qw=Rr?Symbol.for("react.fragment"):60107,Xw=Rr?Symbol.for("react.strict_mode"):60108,Jw=Rr?Symbol.for("react.profiler"):60114,Zw=Rr?Symbol.for("react.provider"):60109,e1=Rr?Symbol.for("react.context"):60110,DO=Rr?Symbol.for("react.async_mode"):60111,t1=Rr?Symbol.for("react.concurrent_mode"):60111,r1=Rr?Symbol.for("react.forward_ref"):60112,n1=Rr?Symbol.for("react.suspense"):60113,Uge=Rr?Symbol.for("react.suspense_list"):60120,i1=Rr?Symbol.for("react.memo"):60115,o1=Rr?Symbol.for("react.lazy"):60116,Vge=Rr?Symbol.for("react.block"):60121,Wge=Rr?Symbol.for("react.fundamental"):60117,zge=Rr?Symbol.for("react.responder"):60118,Gge=Rr?Symbol.for("react.scope"):60119;function ci(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jO:switch(t=t.type,t){case DO:case t1:case Qw:case Jw:case Xw:case n1:return t;default:switch(t=t&&t.$$typeof,t){case e1:case r1:case o1:case i1:case Zw:return t;default:return e}}case $O:return e}}}function lq(t){return ci(t)===t1}dt.AsyncMode=DO;dt.ConcurrentMode=t1;dt.ContextConsumer=e1;dt.ContextProvider=Zw;dt.Element=jO;dt.ForwardRef=r1;dt.Fragment=Qw;dt.Lazy=o1;dt.Memo=i1;dt.Portal=$O;dt.Profiler=Jw;dt.StrictMode=Xw;dt.Suspense=n1;dt.isAsyncMode=function(t){return lq(t)||ci(t)===DO};dt.isConcurrentMode=lq;dt.isContextConsumer=function(t){return ci(t)===e1};dt.isContextProvider=function(t){return ci(t)===Zw};dt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jO};dt.isForwardRef=function(t){return ci(t)===r1};dt.isFragment=function(t){return ci(t)===Qw};dt.isLazy=function(t){return ci(t)===o1};dt.isMemo=function(t){return ci(t)===i1};dt.isPortal=function(t){return ci(t)===$O};dt.isProfiler=function(t){return ci(t)===Jw};dt.isStrictMode=function(t){return ci(t)===Xw};dt.isSuspense=function(t){return ci(t)===n1};dt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qw||t===t1||t===Jw||t===Xw||t===n1||t===Uge||typeof t=="object"&&t!==null&&(t.$$typeof===o1||t.$$typeof===i1||t.$$typeof===Zw||t.$$typeof===e1||t.$$typeof===r1||t.$$typeof===Wge||t.$$typeof===zge||t.$$typeof===Gge||t.$$typeof===Vge)};dt.typeOf=ci;aq.exports=dt;var Lx=aq.exports,MO=Lx,qge={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Hge={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kge={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FO={};FO[MO.ForwardRef]=Kge;FO[MO.Memo]=cq;function QF(t){return MO.isMemo(t)?cq:FO[t.$$typeof]||qge}var Yge=Object.defineProperty,Qge=Object.getOwnPropertyNames,XF=Object.getOwnPropertySymbols,Xge=Object.getOwnPropertyDescriptor,Jge=Object.getPrototypeOf,JF=Object.prototype;function uq(t,e,r){if(typeof e!="string"){if(JF){var n=Jge(e);n&&n!==JF&&uq(t,n,r)}var i=Qge(e);XF&&(i=i.concat(XF(e)));for(var o=QF(t),s=QF(e),a=0;a<i.length;++a){var l=i[a];if(!Hge[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var c=Xge(e,l);try{Yge(t,l,c)}catch{}}}}return t}var Zge=uq;const ZF=ot(Zge);var fq={exports:{}},ht={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO=Symbol.for("react.element"),BO=Symbol.for("react.portal"),s1=Symbol.for("react.fragment"),a1=Symbol.for("react.strict_mode"),l1=Symbol.for("react.profiler"),c1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),eve=Symbol.for("react.server_context"),f1=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),h1=Symbol.for("react.suspense_list"),p1=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),tve=Symbol.for("react.offscreen"),dq;dq=Symbol.for("react.module.reference");function Fi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case LO:switch(t=t.type,t){case s1:case l1:case a1:case d1:case h1:return t;default:switch(t=t&&t.$$typeof,t){case eve:case u1:case f1:case m1:case p1:case c1:return t;default:return e}}case BO:return e}}}ht.ContextConsumer=u1;ht.ContextProvider=c1;ht.Element=LO;ht.ForwardRef=f1;ht.Fragment=s1;ht.Lazy=m1;ht.Memo=p1;ht.Portal=BO;ht.Profiler=l1;ht.StrictMode=a1;ht.Suspense=d1;ht.SuspenseList=h1;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(t){return Fi(t)===u1};ht.isContextProvider=function(t){return Fi(t)===c1};ht.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===LO};ht.isForwardRef=function(t){return Fi(t)===f1};ht.isFragment=function(t){return Fi(t)===s1};ht.isLazy=function(t){return Fi(t)===m1};ht.isMemo=function(t){return Fi(t)===p1};ht.isPortal=function(t){return Fi(t)===BO};ht.isProfiler=function(t){return Fi(t)===l1};ht.isStrictMode=function(t){return Fi(t)===a1};ht.isSuspense=function(t){return Fi(t)===d1};ht.isSuspenseList=function(t){return Fi(t)===h1};ht.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===s1||t===l1||t===a1||t===d1||t===h1||t===tve||typeof t=="object"&&t!==null&&(t.$$typeof===m1||t.$$typeof===p1||t.$$typeof===c1||t.$$typeof===u1||t.$$typeof===f1||t.$$typeof===dq||t.getModuleId!==void 0)};ht.typeOf=Fi;fq.exports=ht;var rve=fq.exports;const nve=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ive(t,e,r,n,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a=!1,l,c,u,d,h;function p(v,x){return l=v,c=x,u=t(l,c),d=e(n,c),h=r(u,d,c),a=!0,h}function m(){return u=t(l,c),e.dependsOnOwnProps&&(d=e(n,c)),h=r(u,d,c),h}function y(){return t.dependsOnOwnProps&&(u=t(l,c)),e.dependsOnOwnProps&&(d=e(n,c)),h=r(u,d,c),h}function g(){const v=t(l,c),x=!s(v,u);return u=v,x&&(h=r(u,d,c)),h}function b(v,x){const S=!o(x,c),_=!i(v,l,x,c);return l=v,c=x,S&&_?m():S?y():_?g():h}return function(x,S){return a?b(x,S):p(x,S)}}function ove(t,e){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:i}=e,o=sq(e,nve);const s=r(t,o),a=n(t,o),l=i(t,o);return ive(s,a,l,t,o)}function sve(t,e){const r={};for(const n in t){const i=t[n];typeof i=="function"&&(r[n]=(...o)=>e(i(...o)))}return r}function fP(t){return function(r){const n=t(r);function i(){return n}return i.dependsOnOwnProps=!1,i}}function eL(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function hq(t,e){return function(n,{displayName:i}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=t,o.dependsOnOwnProps=eL(t);let c=o(a,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=eL(c),c=o(a,l)),c},o}}function UO(t,e){return(r,n)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${n.wrappedComponentName}.`)}}function ave(t){return t&&typeof t=="object"?fP(e=>sve(t,e)):t?typeof t=="function"?hq(t):UO(t,"mapDispatchToProps"):fP(e=>({dispatch:e}))}function lve(t){return t?typeof t=="function"?hq(t):UO(t,"mapStateToProps"):fP(()=>({}))}function cve(t,e,r){return uf({},r,t,e)}function uve(t){return function(r,{displayName:n,areMergedPropsEqual:i}){let o=!1,s;return function(l,c,u){const d=t(l,c,u);return o?i(d,s)||(s=d):(o=!0,s=d),s}}}function fve(t){return t?typeof t=="function"?uve(t):UO(t,"mergeProps"):()=>cve}function dve(){const t=Fge();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const tL={notify(){},get:()=>[]};function pq(t,e){let r,n=tL,i=0,o=!1;function s(y){u();const g=n.subscribe(y);let b=!1;return()=>{b||(b=!0,g(),d())}}function a(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return o}function u(){i++,r||(r=e?e.addNestedSub(l):t.subscribe(l),n=dve())}function d(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=tL)}function h(){o||(o=!0,u())}function p(){o&&(o=!1,d())}const m={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return m}const hve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bx=hve?E.useLayoutEffect:E.useEffect;function rL(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function lA(t,e){if(rL(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!rL(t[r[i]],e[r[i]]))return!1;return!0}const pve=["reactReduxForwardedRef"];let mq=Bge;const mve=t=>{mq=t},yve=[null,null];function gve(t,e,r){Bx(()=>t(...e),r)}function vve(t,e,r,n,i,o){t.current=n,r.current=!1,i.current&&(i.current=null,o())}function bve(t,e,r,n,i,o,s,a,l,c,u){if(!t)return()=>{};let d=!1,h=null;const p=()=>{if(d||!a.current)return;const y=e.getState();let g,b;try{g=n(y,i.current)}catch(v){b=v,h=v}b||(h=null),g===o.current?s.current||c():(o.current=g,l.current=g,s.current=!0,u())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h}}function xve(t,e){return t===e}function yq(t,e,r,{pure:n,areStatesEqual:i=xve,areOwnPropsEqual:o=lA,areStatePropsEqual:s=lA,areMergedPropsEqual:a=lA,forwardRef:l=!1,context:c=oq}={}){const u=c,d=lve(t),h=ave(e),p=fve(r),m=!!t;return g=>{const b=g.displayName||g.name||"Component",v=`Connect(${b})`,x={shouldHandleStateChanges:m,displayName:v,wrappedComponentName:b,WrappedComponent:g,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function S(A){const[C,I,T]=E.useMemo(()=>{const{reactReduxForwardedRef:q}=A,Ze=sq(A,pve);return[A.context,q,Ze]},[A]),P=E.useMemo(()=>C&&C.Consumer&&rve.isContextConsumer(E.createElement(C.Consumer,null))?C:u,[C,u]),O=E.useContext(P),N=!!A.store&&!!A.store.getState&&!!A.store.dispatch,j=!!O&&!!O.store,L=N?A.store:O.store,U=j?O.getServerState:L.getState,V=E.useMemo(()=>ove(L.dispatch,x),[L]),[R,F]=E.useMemo(()=>{if(!m)return yve;const q=pq(L,N?void 0:O.subscription),Ze=q.notifyNestedSubs.bind(q);return[q,Ze]},[L,N,O]),z=E.useMemo(()=>N?O:uf({},O,{subscription:R}),[N,O,R]),ae=E.useRef(),te=E.useRef(T),be=E.useRef(),at=E.useRef(!1);E.useRef(!1);const rt=E.useRef(!1),Vt=E.useRef();Bx(()=>(rt.current=!0,()=>{rt.current=!1}),[]);const pt=E.useMemo(()=>()=>be.current&&T===te.current?be.current:V(L.getState(),T),[L,T]),Zt=E.useMemo(()=>Ze=>R?bve(m,L,R,V,te,ae,at,rt,be,F,Ze):()=>{},[R]);gve(vve,[te,ae,at,T,be,F]);let ee;try{ee=mq(Zt,pt,U?()=>V(U(),T):pt)}catch(q){throw Vt.current&&(q.message+=`
The error may be correlated with this previous error:
${Vt.current.stack}

`),q}Bx(()=>{Vt.current=void 0,be.current=void 0,ae.current=ee});const xe=E.useMemo(()=>E.createElement(g,uf({},ee,{ref:I})),[I,g,ee]);return E.useMemo(()=>m?E.createElement(P.Provider,{value:z},xe):xe,[P,xe,z])}const w=E.memo(S);if(w.WrappedComponent=g,w.displayName=S.displayName=v,l){const C=E.forwardRef(function(T,P){return E.createElement(w,uf({},T,{reactReduxForwardedRef:P}))});return C.displayName=v,C.WrappedComponent=g,ZF(C,g)}return ZF(w,g)}}function _ve({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:o="once"}){const s=E.useMemo(()=>{const c=pq(t);return{store:t,subscription:c,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:o}},[t,n,i,o]),a=E.useMemo(()=>t.getState(),[t]);Bx(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=e||oq;return E.createElement(l.Provider,{value:s},r)}mve(rk.useSyncExternalStore);Mge(Xy.unstable_batchedUpdates);function wve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function gq(t,e){var r=E.useState(function(){return{inputs:e,result:t()}})[0],n=E.useRef(!0),i=E.useRef(r),o=n.current||!!(e&&i.current.inputs&&wve(e,i.current.inputs)),s=o?i.current:{inputs:e,result:t()};return E.useEffect(function(){n.current=!1,i.current=s},[s]),s.result}function Sve(t,e){return gq(function(){return t},e)}var Ge=gq,he=Sve,Eve=!0,cA="Invariant failed";function vq(t,e){if(!t){if(Eve)throw new Error(cA);var r=typeof e=="function"?e():e,n=r?"".concat(cA,": ").concat(r):cA;throw new Error(n)}}var to=function(e){var r=e.top,n=e.right,i=e.bottom,o=e.left,s=n-o,a=i-r,l={top:r,right:n,bottom:i,left:o,width:s,height:a,x:o,y:r,center:{x:(n+o)/2,y:(i+r)/2}};return l},VO=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},nL=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},Ave=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},uA={top:0,right:0,bottom:0,left:0},WO=function(e){var r=e.borderBox,n=e.margin,i=n===void 0?uA:n,o=e.border,s=o===void 0?uA:o,a=e.padding,l=a===void 0?uA:a,c=to(VO(r,i)),u=to(nL(r,s)),d=to(nL(u,l));return{marginBox:c,borderBox:to(r),paddingBox:u,contentBox:d,margin:i,border:s,padding:l}},fi=function(e){var r=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var i=Number(r);return isNaN(i)&&vq(!1),i},Cve=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ux=function(e,r){var n=e.borderBox,i=e.border,o=e.margin,s=e.padding,a=Ave(n,r);return WO({borderBox:a,border:i,margin:o,padding:s})},Vx=function(e,r){return r===void 0&&(r=Cve()),Ux(e,r)},bq=function(e,r){var n={top:fi(r.marginTop),right:fi(r.marginRight),bottom:fi(r.marginBottom),left:fi(r.marginLeft)},i={top:fi(r.paddingTop),right:fi(r.paddingRight),bottom:fi(r.paddingBottom),left:fi(r.paddingLeft)},o={top:fi(r.borderTopWidth),right:fi(r.borderRightWidth),bottom:fi(r.borderBottomWidth),left:fi(r.borderLeftWidth)};return WO({borderBox:e,margin:n,padding:i,border:o})},xq=function(e){var r=e.getBoundingClientRect(),n=window.getComputedStyle(e);return bq(r,n)},iL=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Tve(t,e){return!!(t===e||iL(t)&&iL(e))}function Pve(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Tve(t[r],e[r]))return!1;return!0}function Nr(t,e){e===void 0&&(e=Pve);var r=null;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r&&r.lastThis===this&&e(i,r.lastArgs))return r.lastResult;var s=t.apply(this,i);return r={lastResult:s,lastArgs:i,lastThis:this},s}return n.clear=function(){r=null},n}var Ive=function(e){var r=[],n=null,i=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];r=a,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};const Pm=Ive;function Wx(){return Wx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wx.apply(this,arguments)}function _q(t,e){}_q.bind(null,"warn");_q.bind(null,"error");function ja(){}function Nve(t,e){return{...t,...e}}function Ti(t,e,r){const n=e.map(i=>{const o=Nve(r,i.options);return t.addEventListener(i.eventName,i.fn,o),function(){t.removeEventListener(i.eventName,i.fn,o)}});return function(){n.forEach(o=>{o()})}}const kve="Invariant failed";class zx extends Error{}zx.prototype.toString=function(){return this.message};function J(t,e){if(!t)throw new zx(kve)}class Ove extends k.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=ja,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof zx&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Ti(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof zx){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Rve=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Gx=t=>t+1,jve=t=>`
  You have lifted an item in position ${Gx(t.source.index)}
`,wq=(t,e)=>{const r=t.droppableId===e.droppableId,n=Gx(t.index),i=Gx(e.index);return r?`
      You have moved the item from position ${n}
      to position ${i}
    `:`
    You have moved the item from position ${n}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},Sq=(t,e,r)=>e.droppableId===r.droppableId?`
      The item ${t}
      has been combined with ${r.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,$ve=t=>{const e=t.destination;if(e)return wq(t.source,e);const r=t.combine;return r?Sq(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},oL=t=>`
  The item has returned to its starting position
  of ${Gx(t.index)}
`,Dve=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${oL(t.source)}
    `;const e=t.destination,r=t.combine;return e?`
      You have dropped the item.
      ${wq(t.source,e)}
    `:r?`
      You have dropped the item.
      ${Sq(t.draggableId,t.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${oL(t.source)}
  `},Mve={dragHandleUsageInstructions:Rve,onDragStart:jve,onDragUpdate:$ve,onDragEnd:Dve};var Q0=Mve;const kr={x:0,y:0},Gr=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),Zn=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),$a=(t,e)=>t.x===e.x&&t.y===e.y,qd=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),Pc=(t,e,r=0)=>t==="x"?{x:e,y:r}:{x:r,y:e},Im=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),sL=(t,e)=>Math.min(...e.map(r=>Im(t,r))),Eq=t=>e=>({x:t(e.x),y:t(e.y)});var Fve=(t,e)=>{const r=to({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r};const Sg=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),aL=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],Lve={top:0,right:0,bottom:0,left:0},Bve=(t,e)=>e?Sg(t,e.scroll.diff.displacement):t,Uve=(t,e,r)=>r&&r.increasedBy?{...t,[e.end]:t[e.end]+r.increasedBy[e.line]}:t,Vve=(t,e)=>e&&e.shouldClipSubject?Fve(e.pageMarginBox,t):to(t);var id=({page:t,withPlaceholder:e,axis:r,frame:n})=>{const i=Bve(t.marginBox,n),o=Uve(i,r,e),s=Vve(o,n);return{page:t,withPlaceholder:e,active:s}},zO=(t,e)=>{t.frame||J(!1);const r=t.frame,n=Zn(e,r.scroll.initial),i=qd(n),o={...r,scroll:{initial:r.scroll.initial,current:e,diff:{value:n,displacement:i},max:r.scroll.max}},s=id({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:o});return{...t,frame:o,subject:s}};const Aq=Nr(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),Cq=Nr(t=>t.reduce((e,r)=>(e[r.descriptor.id]=r,e),{})),y1=Nr(t=>Object.values(t)),Wve=Nr(t=>Object.values(t));var Hd=Nr((t,e)=>Wve(e).filter(n=>t===n.descriptor.droppableId).sort((n,i)=>n.descriptor.index-i.descriptor.index));function GO(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function g1(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var v1=Nr((t,e)=>e.filter(r=>r.descriptor.id!==t.descriptor.id)),zve=({isMovingForward:t,draggable:e,destination:r,insideDestination:n,previousImpact:i})=>{if(!r.isCombineEnabled||!GO(i))return null;function s(p){const m={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...i,at:m}}const a=i.displaced.all,l=a.length?a[0]:null;if(t)return l?s(l):null;const c=v1(e,n);if(!l){if(!c.length)return null;const p=c[c.length-1];return s(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&J(!1);const d=u-1;if(d<0)return null;const h=c[d];return s(h.descriptor.id)},Kd=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const Tq={point:kr,value:0},Nm={invisible:{},visible:{},all:[]},Gve={displaced:Nm,displacedBy:Tq,at:null};var qve=Gve,Ni=(t,e)=>r=>t<=r&&r<=e,Pq=t=>{const e=Ni(t.top,t.bottom),r=Ni(t.left,t.right);return n=>{if(e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=e(n.top)||e(n.bottom),s=r(n.left)||r(n.right);if(o&&s)return!0;const l=n.top<t.top&&n.bottom>t.bottom,c=n.left<t.left&&n.right>t.right;return l&&c?!0:l&&s||c&&o}},Hve=t=>{const e=Ni(t.top,t.bottom),r=Ni(t.left,t.right);return n=>e(n.top)&&e(n.bottom)&&r(n.left)&&r(n.right)};const qO={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Iq={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Kve=t=>e=>{const r=Ni(e.top,e.bottom),n=Ni(e.left,e.right);return i=>t===qO?r(i.top)&&r(i.bottom):n(i.left)&&n(i.right)};const Yve=(t,e)=>{const r=e.frame?e.frame.scroll.diff.displacement:kr;return Sg(t,r)},Qve=(t,e,r)=>e.subject.active?r(e.subject.active)(t):!1,Xve=(t,e,r)=>r(e)(t),HO=({target:t,destination:e,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:i})=>{const o=n?Yve(t,e):t;return Qve(o,e,i)&&Xve(o,r,i)},Jve=t=>HO({...t,isVisibleThroughFrameFn:Pq}),Nq=t=>HO({...t,isVisibleThroughFrameFn:Hve}),Zve=t=>HO({...t,isVisibleThroughFrameFn:Kve(t.destination.axis)}),e0e=(t,e,r)=>{if(typeof r=="boolean")return r;if(!e)return!0;const{invisible:n,visible:i}=e;if(n[t])return!1;const o=i[t];return o?o.shouldAnimate:!0};function t0e(t,e){const r=t.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return to(VO(r,n))}function km({afterDragging:t,destination:e,displacedBy:r,viewport:n,forceShouldAnimate:i,last:o}){return t.reduce(function(a,l){const c=t0e(l,r),u=l.descriptor.id;if(a.all.push(u),!Jve({target:c,destination:e,viewport:n,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=e0e(u,o,i),p={draggableId:u,shouldAnimate:h};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function r0e(t,e){if(!t.length)return 0;const r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function lL({insideDestination:t,inHomeList:e,displacedBy:r,destination:n}){const i=r0e(t,{inHomeList:e});return{displaced:Nm,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function qx({draggable:t,insideDestination:e,destination:r,viewport:n,displacedBy:i,last:o,index:s,forceShouldAnimate:a}){const l=Kd(t,r);if(s==null)return lL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const c=e.find(m=>m.descriptor.index===s);if(!c)return lL({insideDestination:e,inHomeList:l,displacedBy:i,destination:r});const u=v1(t,e),d=e.indexOf(c),h=u.slice(d);return{displaced:km({afterDragging:h,destination:r,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Ya(t,e){return!!e.effected[t]}var n0e=({isMovingForward:t,destination:e,draggables:r,combine:n,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=n.draggableId,a=r[o].descriptor.index;return Ya(o,i)?t?a:a-1:t?a+1:a},i0e=({isMovingForward:t,isInHomeList:e,insideDestination:r,location:n})=>{if(!r.length)return null;const i=n.index,o=t?i+1:i-1,s=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=e?a:a+1;return o<s||o>l?null:o},o0e=({isMovingForward:t,isInHomeList:e,draggable:r,draggables:n,destination:i,insideDestination:o,previousImpact:s,viewport:a,afterCritical:l})=>{const c=s.at;if(c||J(!1),c.type==="REORDER"){const d=i0e({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:o});return d==null?null:qx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:d})}const u=n0e({isMovingForward:t,destination:i,displaced:s.displaced,draggables:n,combine:c.combine,afterCritical:l});return u==null?null:qx({draggable:r,insideDestination:o,destination:i,viewport:a,last:s.displaced,displacedBy:s.displacedBy,index:u})},s0e=({displaced:t,afterCritical:e,combineWith:r,displacedBy:n})=>{const i=!!(t.visible[r]||t.invisible[r]);return Ya(r,e)?i?kr:qd(n.point):i?n.point:kr},a0e=({afterCritical:t,impact:e,draggables:r})=>{const n=g1(e);n||J(!1);const i=n.draggableId,o=r[i].page.borderBox.center,s=s0e({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return Gr(o,s)};const kq=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,l0e=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,KO=(t,e,r)=>e[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2,cL=({axis:t,moveRelativeTo:e,isMoving:r})=>Pc(t.line,e.marginBox[t.end]+kq(t,r),KO(t,e.marginBox,r)),uL=({axis:t,moveRelativeTo:e,isMoving:r})=>Pc(t.line,e.marginBox[t.start]-l0e(t,r),KO(t,e.marginBox,r)),c0e=({axis:t,moveInto:e,isMoving:r})=>Pc(t.line,e.contentBox[t.start]+kq(t,r),KO(t,e.contentBox,r));var u0e=({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i})=>{const o=Hd(n.descriptor.id,r),s=e.page,a=n.axis;if(!o.length)return c0e({axis:a,moveInto:n.page,isMoving:s});const{displaced:l,displacedBy:c}=t,u=l.all[0];if(u){const h=r[u];if(Ya(u,i))return uL({axis:a,moveRelativeTo:h.page,isMoving:s});const p=Ux(h.page,c.point);return uL({axis:a,moveRelativeTo:p,isMoving:s})}const d=o[o.length-1];if(d.descriptor.id===e.descriptor.id)return s.borderBox.center;if(Ya(d.descriptor.id,i)){const h=Ux(d.page,qd(i.displacedBy.point));return cL({axis:a,moveRelativeTo:h,isMoving:s})}return cL({axis:a,moveRelativeTo:d.page,isMoving:s})},dP=(t,e)=>{const r=t.frame;return r?Gr(e,r.scroll.diff.displacement):e};const f0e=({impact:t,draggable:e,droppable:r,draggables:n,afterCritical:i})=>{const o=e.page.borderBox.center,s=t.at;return!r||!s?o:s.type==="REORDER"?u0e({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i}):a0e({impact:t,draggables:n,afterCritical:i})};var b1=t=>{const e=f0e(t),r=t.droppable;return r?dP(r,e):e},Oq=(t,e)=>{const r=Zn(e,t.scroll.initial),n=qd(r);return{frame:to({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:n}}}};function fL(t,e){return t.map(r=>e[r])}function d0e(t,e){for(let r=0;r<e.length;r++){const n=e[r].visible[t];if(n)return n}return null}var h0e=({impact:t,viewport:e,destination:r,draggables:n,maxScrollChange:i})=>{const o=Oq(e,Gr(e.scroll.current,i)),s=r.frame?zO(r,Gr(r.frame.scroll.current,i)):r,a=t.displaced,l=km({afterDragging:fL(a.all,n),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),c=km({afterDragging:fL(a.all,n),destination:s,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),u={},d={},h=[a,l,c];return a.all.forEach(m=>{const y=d0e(m,h);if(y){d[m]=y;return}u[m]=!0}),{...t,displaced:{all:a.all,invisible:u,visible:d}}},p0e=(t,e)=>Gr(t.scroll.diff.displacement,e),YO=({pageBorderBoxCenter:t,draggable:e,viewport:r})=>{const n=p0e(r,t),i=Zn(n,e.page.borderBox.center);return Gr(e.client.borderBox.center,i)},Rq=({draggable:t,destination:e,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const s=Zn(r,t.page.borderBox.center),l={target:Sg(t.page.borderBox,s),destination:e,withDroppableDisplacement:i,viewport:n};return o?Zve(l):Nq(l)},m0e=({isMovingForward:t,draggable:e,destination:r,draggables:n,previousImpact:i,viewport:o,previousPageBorderBoxCenter:s,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const c=Hd(r.descriptor.id,n),u=Kd(e,r),d=zve({isMovingForward:t,draggable:e,destination:r,insideDestination:c,previousImpact:i})||o0e({isMovingForward:t,isInHomeList:u,draggable:e,draggables:n,destination:r,insideDestination:c,previousImpact:i,viewport:o,afterCritical:l});if(!d)return null;const h=b1({impact:d,draggable:e,droppable:r,draggables:n,afterCritical:l});if(Rq({draggable:e,destination:r,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:YO({pageBorderBoxCenter:h,draggable:e,viewport:o}),impact:d,scrollJumpRequest:null};const m=Zn(h,s),y=h0e({impact:d,viewport:o,destination:r,draggables:n,maxScrollChange:m});return{clientSelection:a,impact:y,scrollJumpRequest:m}};const gn=t=>{const e=t.subject.active;return e||J(!1),e};var y0e=({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:n,viewport:i})=>{const o=r.subject.active;if(!o)return null;const s=r.axis,a=Ni(o[s.start],o[s.end]),l=y1(n).filter(u=>u!==r).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>Pq(i.frame)(gn(u))).filter(u=>{const d=gn(u);return t?o[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<o[s.crossAxisStart]}).filter(u=>{const d=gn(u),h=Ni(d[s.start],d[s.end]);return a(d[s.start])||a(d[s.end])||h(o[s.start])||h(o[s.end])}).sort((u,d)=>{const h=gn(u)[s.crossAxisStart],p=gn(d)[s.crossAxisStart];return t?h-p:p-h}).filter((u,d,h)=>gn(u)[s.crossAxisStart]===gn(h[0])[s.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>Ni(gn(u)[s.start],gn(u)[s.end])(e[s.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>gn(u)[s.start]-gn(d)[s.start])[0]:l.sort((u,d)=>{const h=sL(e,aL(gn(u))),p=sL(e,aL(gn(d)));return h!==p?h-p:gn(u)[s.start]-gn(d)[s.start]})[0]};const dL=(t,e)=>{const r=t.page.borderBox.center;return Ya(t.descriptor.id,e)?Zn(r,e.displacedBy.point):r},g0e=(t,e)=>{const r=t.page.borderBox;return Ya(t.descriptor.id,e)?Sg(r,qd(e.displacedBy.point)):r};var v0e=({pageBorderBoxCenter:t,viewport:e,destination:r,insideDestination:n,afterCritical:i})=>n.filter(s=>Nq({target:g0e(s,i),destination:r,viewport:e.frame,withDroppableDisplacement:!0})).sort((s,a)=>{const l=Im(t,dP(r,dL(s,i))),c=Im(t,dP(r,dL(a,i)));return l<c?-1:c<l?1:s.descriptor.index-a.descriptor.index})[0]||null,Eg=Nr(function(e,r){const n=r[e.line];return{value:n,point:Pc(e.line,n)}});const b0e=(t,e,r)=>{const n=t.axis;if(t.descriptor.mode==="virtual")return Pc(n.line,e[n.line]);const i=t.subject.page.contentBox[n.size],l=Hd(t.descriptor.id,r).reduce((c,u)=>c+u.client.marginBox[n.size],0)+e[n.line]-i;return l<=0?null:Pc(n.line,l)},jq=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),$q=(t,e,r)=>{const n=t.frame;Kd(e,t)&&J(!1),t.subject.withPlaceholder&&J(!1);const i=Eg(t.axis,e.displaceBy).point,o=b0e(t,i,r),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!n){const u=id({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return{...t,subject:u}}const a=o?Gr(n.scroll.max,o):n.scroll.max,l=jq(n,a),c=id({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},x0e=t=>{const e=t.subject.withPlaceholder;e||J(!1);const r=t.frame;if(!r){const s=id({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:s}}const n=e.oldFrameMaxScroll;n||J(!1);const i=jq(r,n),o=id({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:o,frame:i}};var _0e=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:r,draggable:n,draggables:i,destination:o,viewport:s,afterCritical:a})=>{if(!e){if(r.length)return null;const d={displaced:Nm,displacedBy:Tq,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=b1({impact:d,draggable:n,droppable:o,draggables:i,afterCritical:a}),p=Kd(n,o)?o:$q(o,n,i);return Rq({draggable:n,destination:p,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=t[o.axis.line]<=e.page.borderBox.center[o.axis.line],c=(()=>{const d=e.descriptor.index;return e.descriptor.id===n.descriptor.id||l?d:d+1})(),u=Eg(o.axis,n.displaceBy);return qx({draggable:n,insideDestination:r,destination:o,viewport:s,displacedBy:u,last:Nm,index:c})},w0e=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:r,isOver:n,draggables:i,droppables:o,viewport:s,afterCritical:a})=>{const l=y0e({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:o,viewport:s});if(!l)return null;const c=Hd(l.descriptor.id,i),u=v0e({pageBorderBoxCenter:e,viewport:s,destination:l,insideDestination:c,afterCritical:a}),d=_0e({previousPageBorderBoxCenter:e,destination:l,draggable:r,draggables:i,moveRelativeTo:u,insideDestination:c,viewport:s,afterCritical:a});if(!d)return null;const h=b1({impact:d,draggable:r,droppable:l,draggables:i,afterCritical:a});return{clientSelection:YO({pageBorderBoxCenter:h,draggable:r,viewport:s}),impact:d,scrollJumpRequest:null}},ri=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const S0e=(t,e)=>{const r=ri(t);return r?e[r]:null};var E0e=({state:t,type:e})=>{const r=S0e(t.impact,t.dimensions.droppables),n=!!r,i=t.dimensions.droppables[t.critical.droppable.id],o=r||i,s=o.axis.direction,a=s==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||s==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!n)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:d,droppables:h}=t.dimensions;return a?m0e({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:o,draggables:d,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):w0e({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:o,draggables:d,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Tl(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function Dq(t){const e=Ni(t.top,t.bottom),r=Ni(t.left,t.right);return function(i){return e(i.y)&&r(i.x)}}function A0e(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function C0e({pageBorderBox:t,draggable:e,candidates:r}){const n=e.page.borderBox.center,i=r.map(o=>{const s=o.axis,a=Pc(o.axis.line,t.center[s.line],o.page.borderBox.center[s.crossAxisLine]);return{id:o.descriptor.id,distance:Im(n,a)}}).sort((o,s)=>s.distance-o.distance);return i[0]?i[0].id:null}function T0e({pageBorderBox:t,draggable:e,droppables:r}){const n=y1(r).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!A0e(t,o))return!1;if(Dq(o)(t.center))return!0;const s=i.axis,a=o.center[s.crossAxisLine],l=t[s.crossAxisStart],c=t[s.crossAxisEnd],u=Ni(o[s.crossAxisStart],o[s.crossAxisEnd]),d=u(l),h=u(c);return!d&&!h?!0:d?l<a:c>a});return n.length?n.length===1?n[0].descriptor.id:C0e({pageBorderBox:t,draggable:e,candidates:n}):null}const Mq=(t,e)=>to(Sg(t,e));var P0e=(t,e)=>{const r=t.frame;return r?Mq(e,r.scroll.diff.value):e};function Fq({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function I0e({draggable:t,closest:e,inHomeList:r}){return e?r&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var N0e=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:r,insideDestination:n,last:i,viewport:o,afterCritical:s})=>{const a=r.axis,l=Eg(r.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],p=v1(e,n).find(y=>{const g=y.descriptor.id,b=y.page.borderBox.center[a.line],v=Ya(g,s),x=Fq({displaced:i,id:g});return v?x?d<=b:u<b-c:x?d<=b+c:u<b})||null,m=I0e({draggable:e,closest:p,inHomeList:Kd(e,r)});return qx({draggable:e,insideDestination:n,destination:r,viewport:o,last:i,displacedBy:l,index:m})};const k0e=4;var O0e=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:r,destination:n,insideDestination:i,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const s=n.axis,a=Eg(n.axis,t.displaceBy),l=a.value,c=e[s.start],u=e[s.end],h=v1(t,i).find(m=>{const y=m.descriptor.id,g=m.page.borderBox,v=g[s.size]/k0e,x=Ya(y,o),S=Fq({displaced:r.displaced,id:y});return x?S?u>g[s.start]+v&&u<g[s.end]-v:c>g[s.start]-l+v&&c<g[s.end]-l-v:S?u>g[s.start]+l+v&&u<g[s.end]+l-v:c>g[s.start]+v&&c<g[s.end]-v});return h?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:n.descriptor.id}}}:null},Lq=({pageOffset:t,draggable:e,draggables:r,droppables:n,previousImpact:i,viewport:o,afterCritical:s})=>{const a=Mq(e.page.borderBox,t),l=T0e({pageBorderBox:a,draggable:e,droppables:n});if(!l)return qve;const c=n[l],u=Hd(c.descriptor.id,r),d=P0e(c,a);return O0e({pageBorderBoxWithDroppableScroll:d,draggable:e,previousImpact:i,destination:c,insideDestination:u,afterCritical:s})||N0e({pageBorderBoxWithDroppableScroll:d,draggable:e,destination:c,insideDestination:u,last:i.displaced,viewport:o,afterCritical:s})},QO=(t,e)=>({...t,[e.descriptor.id]:e});const R0e=({previousImpact:t,impact:e,droppables:r})=>{const n=ri(t),i=ri(e);if(!n||n===i)return r;const o=r[n];if(!o.subject.withPlaceholder)return r;const s=x0e(o);return QO(r,s)};var j0e=({draggable:t,draggables:e,droppables:r,previousImpact:n,impact:i})=>{const o=R0e({previousImpact:n,impact:i,droppables:r}),s=ri(i);if(!s)return o;const a=r[s];if(Kd(t,a)||a.subject.withPlaceholder)return o;const l=$q(a,t,e);return QO(o,l)},Dp=({state:t,clientSelection:e,dimensions:r,viewport:n,impact:i,scrollJumpRequest:o})=>{const s=n||t.viewport,a=r||t.dimensions,l=e||t.current.client.selection,c=Zn(l,t.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:Gr(t.initial.client.borderBoxCenter,c)},d={selection:Gr(u.selection,s.scroll.current),borderBoxCenter:Gr(u.borderBoxCenter,s.scroll.current),offset:Gr(u.offset,s.scroll.diff.value)},h={client:u,page:d};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:s,current:h};const p=a.draggables[t.critical.draggable.id],m=i||Lq({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),y=j0e({draggable:p,impact:m,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:y},impact:m,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function $0e(t,e){return t.map(r=>e[r])}var Bq=({impact:t,viewport:e,draggables:r,destination:n,forceShouldAnimate:i})=>{const o=t.displaced,s=$0e(o.all,r),a=km({afterDragging:s,destination:n,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...t,displaced:a}},Uq=({impact:t,draggable:e,droppable:r,draggables:n,viewport:i,afterCritical:o})=>{const s=b1({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:o});return YO({pageBorderBoxCenter:s,draggable:e,viewport:i})},Vq=({state:t,dimensions:e,viewport:r})=>{t.movementMode!=="SNAP"&&J(!1);const n=t.impact,i=r||t.viewport,o=e||t.dimensions,{draggables:s,droppables:a}=o,l=s[t.critical.draggable.id],c=ri(n);c||J(!1);const u=a[c],d=Bq({impact:n,viewport:i,destination:u,draggables:s}),h=Uq({impact:d,draggable:l,droppable:u,draggables:s,viewport:i,afterCritical:t.afterCritical});return Dp({impact:d,clientSelection:h,state:t,dimensions:o,viewport:i})},D0e=t=>({index:t.index,droppableId:t.droppableId}),Wq=({draggable:t,home:e,draggables:r,viewport:n})=>{const i=Eg(e.axis,t.displaceBy),o=Hd(e.descriptor.id,r),s=o.indexOf(t);s===-1&&J(!1);const a=o.slice(s+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:l};return{impact:{displaced:km({afterDragging:a,destination:e,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:D0e(t.descriptor)}},afterCritical:c}},M0e=(t,e)=>({draggables:t.draggables,droppables:QO(t.droppables,e)}),F0e=({draggable:t,offset:e,initialWindowScroll:r})=>{const n=Ux(t.client,e),i=Vx(n,r);return{...t,placeholder:{...t.placeholder,client:n},client:n,page:i}},L0e=t=>{const e=t.frame;return e||J(!1),e},B0e=({additions:t,updatedDroppables:e,viewport:r})=>{const n=r.scroll.diff.value;return t.map(i=>{const o=i.descriptor.droppableId,s=e[o],l=L0e(s).scroll.diff.value,c=Gr(n,l);return F0e({draggable:i,offset:c,initialWindowScroll:r.scroll.initial})})},U0e=({state:t,published:e})=>{const r=e.modified.map(b=>{const v=t.dimensions.droppables[b.droppableId];return zO(v,b.scroll)}),n={...t.dimensions.droppables,...Aq(r)},i=Cq(B0e({additions:e.additions,updatedDroppables:n,viewport:t.viewport})),o={...t.dimensions.draggables,...i};e.removals.forEach(b=>{delete o[b]});const s={droppables:n,draggables:o},a=ri(t.impact),l=a?s.droppables[a]:null,c=s.draggables[t.critical.draggable.id],u=s.droppables[t.critical.droppable.id],{impact:d,afterCritical:h}=Wq({draggable:c,home:u,draggables:o,viewport:t.viewport}),p=l&&l.isCombineEnabled?t.impact:d,m=Lq({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),y={...t,phase:"DRAGGING",impact:m,onLiftImpact:d,dimensions:s,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const hP=t=>t.movementMode==="SNAP",fA=(t,e,r)=>{const n=M0e(t.dimensions,e);return!hP(t)||r?Dp({state:t,dimensions:n}):Vq({state:t,dimensions:n})};function dA(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const hL={phase:"IDLE",completed:null,shouldFlush:!1};var V0e=(t=hL,e)=>{if(e.type==="FLUSH")return{...hL,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&J(!1);const{critical:r,clientSelection:n,viewport:i,dimensions:o,movementMode:s}=e.payload,a=o.draggables[r.draggable.id],l=o.droppables[r.droppable.id],c={selection:n,borderBoxCenter:a.client.borderBox.center,offset:kr},u={client:c,page:{selection:Gr(c.selection,i.scroll.initial),borderBoxCenter:Gr(c.selection,i.scroll.initial),offset:Gr(c.selection,i.scroll.diff.value)}},d=y1(o.droppables).every(y=>!y.isFixedOnPage),{impact:h,afterCritical:p}=Wq({draggable:a,home:l,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&J(!1),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||J(!1),U0e({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Tl(t)||J(!1);const{client:r}=e.payload;return $a(r,t.current.client.selection)?t:Dp({state:t,clientSelection:r,impact:hP(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return dA(t);Tl(t)||J(!1);const{id:r,newScroll:n}=e.payload,i=t.dimensions.droppables[r];if(!i)return t;const o=zO(i,n);return fA(t,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Tl(t)||J(!1);const{id:r,isEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||J(!1),i.isEnabled===n&&J(!1);const o={...i,isEnabled:n};return fA(t,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Tl(t)||J(!1);const{id:r,isCombineEnabled:n}=e.payload,i=t.dimensions.droppables[r];i||J(!1),i.isCombineEnabled===n&&J(!1);const o={...i,isCombineEnabled:n};return fA(t,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Tl(t)||J(!1),t.isWindowScrollAllowed||J(!1);const r=e.payload.newScroll;if($a(t.viewport.scroll.current,r))return dA(t);const n=Oq(t.viewport,r);return hP(t)?Vq({state:t,viewport:n}):Dp({state:t,viewport:n})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Tl(t))return t;const r=e.payload.maxScroll;if($a(r,t.viewport.scroll.max))return t;const n={...t.viewport,scroll:{...t.viewport.scroll,max:r}};return{...t,viewport:n}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&J(!1);const r=E0e({state:t,type:e.type});return r?Dp({state:t,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const r=e.payload.reason;return t.phase!=="COLLECTING"&&J(!1),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(e.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||J(!1),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:r}=e.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return t};const W0e=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),z0e=t=>({type:"LIFT",payload:t}),G0e=t=>({type:"INITIAL_PUBLISH",payload:t}),q0e=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),H0e=()=>({type:"COLLECTION_STARTING",payload:null}),K0e=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),Y0e=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),Q0e=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),zq=t=>({type:"MOVE",payload:t}),X0e=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),J0e=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),Z0e=()=>({type:"MOVE_UP",payload:null}),ebe=()=>({type:"MOVE_DOWN",payload:null}),tbe=()=>({type:"MOVE_RIGHT",payload:null}),rbe=()=>({type:"MOVE_LEFT",payload:null}),XO=()=>({type:"FLUSH",payload:null}),nbe=t=>({type:"DROP_ANIMATE",payload:t}),JO=t=>({type:"DROP_COMPLETE",payload:t}),Gq=t=>({type:"DROP",payload:t}),ibe=t=>({type:"DROP_PENDING",payload:t}),qq=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var obe=t=>({getState:e,dispatch:r})=>n=>i=>{if(i.type!=="LIFT"){n(i);return}const{id:o,clientSelection:s,movementMode:a}=i.payload,l=e();l.phase==="DROP_ANIMATING"&&r(JO({completed:l.completed})),e().phase!=="IDLE"&&J(!1),r(XO()),r(W0e({draggableId:o,movementMode:a}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:p}=t.startPublishing(u);r(G0e({critical:d,dimensions:h,clientSelection:s,movementMode:a,viewport:p}))},sbe=t=>()=>e=>r=>{r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)};const ZO={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Om={opacity:{drop:0,combining:.7},scale:{drop:.75}},Hq={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hl=`${Hq.outOfTheWay}s ${ZO.outOfTheWay}`,Mp={fluid:`opacity ${hl}`,snap:`transform ${hl}, opacity ${hl}`,drop:t=>{const e=`${t}s ${ZO.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${hl}`,placeholder:`height ${hl}, width ${hl}, margin ${hl}`},pL=t=>$a(t,kr)?void 0:`translate(${t.x}px, ${t.y}px)`,pP={moveTo:pL,drop:(t,e)=>{const r=pL(t);if(r)return e?`${r} scale(${Om.scale.drop})`:r}},{minDropTime:mP,maxDropTime:Kq}=Hq,abe=Kq-mP,mL=1500,lbe=.6;var cbe=({current:t,destination:e,reason:r})=>{const n=Im(t,e);if(n<=0)return mP;if(n>=mL)return Kq;const i=n/mL,o=mP+abe*i,s=r==="CANCEL"?o*lbe:o;return Number(s.toFixed(2))},ube=({impact:t,draggable:e,dimensions:r,viewport:n,afterCritical:i})=>{const{draggables:o,droppables:s}=r,a=ri(t),l=a?s[a]:null,c=s[e.descriptor.droppableId],u=Uq({impact:t,draggable:e,draggables:o,afterCritical:i,droppable:l||c,viewport:n});return Zn(u,e.client.borderBox.center)},fbe=({draggables:t,reason:e,lastImpact:r,home:n,viewport:i,onLiftImpact:o})=>!r.at||e!=="DROP"?{impact:Bq({draggables:t,impact:o,destination:n,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:Nm},didDropInsideDroppable:!0};const dbe=({getState:t,dispatch:e})=>r=>n=>{if(n.type!=="DROP"){r(n);return}const i=t(),o=n.payload.reason;if(i.phase==="COLLECTING"){e(ibe({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&J(!1),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||J(!1);const a=i.critical,l=i.dimensions,c=l.draggables[i.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=fbe({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=d?GO(u):null,p=d?g1(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},y={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:o,mode:i.movementMode,destination:h,combine:p},g=ube({impact:u,draggable:c,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:y,impact:u};if(!(!$a(i.current.client.offset,g)||!!y.combine)){e(JO({completed:b}));return}const x=cbe({current:i.current.client.offset,destination:g,reason:o});e(nbe({newHomeClientOffset:g,dropDuration:x,completed:b}))};var hbe=dbe,Yq=()=>({x:window.pageXOffset,y:window.pageYOffset});function pbe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function mbe({onWindowScroll:t}){function e(){t(Yq())}const r=Pm(e),n=pbe(r);let i=ja;function o(){return i!==ja}function s(){o()&&J(!1),i=Ti(window,[n])}function a(){o()||J(!1),r.cancel(),i(),i=ja}return{start:s,stop:a,isActive:o}}const ybe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",gbe=t=>{const e=mbe({onWindowScroll:r=>{t.dispatch(X0e({newScroll:r}))}});return r=>n=>{!e.isActive()&&n.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&ybe(n)&&e.stop(),r(n)}};var vbe=gbe,bbe=t=>{let e=!1,r=!1;const n=setTimeout(()=>{r=!0}),i=o=>{e||r||(e=!0,t(o),clearTimeout(n))};return i.wasCalled=()=>e,i},xbe=()=>{const t=[],e=i=>{const o=t.findIndex(a=>a.timerId===i);o===-1&&J(!1);const[s]=t.splice(o,1);s.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),s={timerId:o,callback:i};t.push(s)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const _be=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,wbe=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,Sbe=(t,e)=>{if(t===e)return!0;const r=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,n=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return r&&n},kh=(t,e)=>{e()},jv=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function hA(t,e,r,n){if(!t){r(n(e));return}const i=bbe(r);t(e,{announce:i}),i.wasCalled()||r(n(e))}var Ebe=(t,e)=>{const r=xbe();let n=null;const i=(d,h)=>{n&&J(!1),kh("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:d,mode:h})})},o=(d,h)=>{n&&J(!1),kh("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(jv(d,h))})},s=(d,h)=>{n&&J(!1);const p=jv(d,h);n={mode:h,lastCritical:d,lastLocation:p.source,lastCombine:null},r.add(()=>{kh("onDragStart",()=>hA(t().onDragStart,p,e,Q0.onDragStart))})},a=(d,h)=>{const p=GO(h),m=g1(h);n||J(!1);const y=!Sbe(d,n.lastCritical);y&&(n.lastCritical=d);const g=!_be(n.lastLocation,p);g&&(n.lastLocation=p);const b=!wbe(n.lastCombine,m);if(b&&(n.lastCombine=m),!y&&!g&&!b)return;const v={...jv(d,n.mode),combine:m,destination:p};r.add(()=>{kh("onDragUpdate",()=>hA(t().onDragUpdate,v,e,Q0.onDragUpdate))})},l=()=>{n||J(!1),r.flush()},c=d=>{n||J(!1),n=null,kh("onDragEnd",()=>hA(t().onDragEnd,d,e,Q0.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:s,update:a,flush:l,drop:c,abort:()=>{if(!n)return;const d={...jv(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},Abe=(t,e)=>{const r=Ebe(t,e);return n=>i=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),i(o),r.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const a=o.payload.completed.result;r.flush(),i(o),r.drop(a);return}if(i(o),o.type==="FLUSH"){r.abort();return}const s=n.getState();s.phase==="DRAGGING"&&r.update(s.critical,s.impact)}};const Cbe=t=>e=>r=>{if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}const n=t.getState();n.phase!=="DROP_ANIMATING"&&J(!1),t.dispatch(JO({completed:n.completed}))};var Tbe=Cbe;const Pbe=t=>{let e=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return i=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&n(),i(o),o.type!=="DROP_ANIMATE")return;const s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(qq())}};r=requestAnimationFrame(()=>{r=null,e=Ti(window,[s])})}};var Ibe=Pbe,Nbe=t=>()=>e=>r=>{(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)},kbe=t=>{let e=!1;return()=>r=>n=>{if(n.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!e){if(n.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){e=!1;const i=n.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Obe=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var Rbe=t=>e=>r=>n=>{if(Obe(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);const i=e.getState();i.phase!=="DRAGGING"&&J(!1),t.start(i);return}r(n),t.scroll(e.getState())};const jbe=t=>e=>r=>{if(e(r),r.type!=="PUBLISH_WHILE_DRAGGING")return;const n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(Gq({reason:n.reason})))};var $be=jbe;const Dbe=nq;var Mbe=({dimensionMarshal:t,focusMarshal:e,styleMarshal:r,getResponders:n,announce:i,autoScroller:o})=>rq(V0e,Dbe(Cge(sbe(r),Nbe(t),obe(t),hbe,Tbe,Ibe,$be,Rbe(o),vbe,kbe(e),Abe(n,i))));const pA=()=>({additions:{},removals:{},modified:{}});function Fbe({registry:t,callbacks:e}){let r=pA(),n=null;const i=()=>{n||(e.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:l,removals:c,modified:u}=r,d=Object.keys(l).map(m=>t.draggable.getById(m).getDimension(kr)).sort((m,y)=>m.descriptor.index-y.descriptor.index),h=Object.keys(u).map(m=>{const g=t.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:g}}),p={additions:d,removals:Object.keys(c),modified:h};r=pA(),e.publish(p)}))};return{add:l=>{const c=l.descriptor.id;r.additions[c]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[c]&&delete r.removals[c],i()},remove:l=>{const c=l.descriptor;r.removals[c.id]=!0,r.modified[c.droppableId]=!0,r.additions[c.id]&&delete r.additions[c.id],i()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=pA())}}}var Qq=({scrollHeight:t,scrollWidth:e,height:r,width:n})=>{const i=Zn({x:e,y:t},{x:n,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},Xq=()=>{const t=document.documentElement;return t||J(!1),t},Jq=()=>{const t=Xq();return Qq({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Lbe=()=>{const t=Yq(),e=Jq(),r=t.y,n=t.x,i=Xq(),o=i.clientWidth,s=i.clientHeight,a=n+o,l=r+s;return{frame:to({top:r,left:n,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:kr,displacement:kr}}}},Bbe=({critical:t,scrollOptions:e,registry:r})=>{const n=Lbe(),i=n.scroll.current,o=t.droppable,s=r.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(i,e)),a=r.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(i));return{dimensions:{draggables:Cq(a),droppables:Aq(s)},critical:t,viewport:n}};function yL(t,e,r){return!(r.descriptor.id===e.id||r.descriptor.type!==e.type||t.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var Ube=(t,e)=>{let r=null;const n=Fbe({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||J(!1),r&&e.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{r&&(t.droppable.exists(h)||J(!1),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},s=(h,p)=>{r&&(t.droppable.exists(h)||J(!1),e.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{r&&t.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!r)return;n.stop();const h=r.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},c=h=>{r||J(!1);const p=r.critical.draggable;h.type==="ADDITION"&&yL(t,p,h.value)&&n.add(h.value),h.type==="REMOVAL"&&yL(t,p,h.value)&&n.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:s,startPublishing:h=>{r&&J(!1);const p=t.draggable.getById(h.draggableId),m=t.droppable.getById(p.descriptor.droppableId),y={draggable:p.descriptor,droppable:m.descriptor},g=t.subscribe(c);return r={critical:y,unsubscribe:g},Bbe({critical:y,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},Zq=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",Vbe=t=>{window.scrollBy(t.x,t.y)};const Wbe=Nr(t=>y1(t).filter(e=>!(!e.isEnabled||!e.frame))),zbe=(t,e)=>Wbe(e).find(n=>(n.frame||J(!1),Dq(n.frame.pageMarginBox)(t)))||null;var Gbe=({center:t,destination:e,droppables:r})=>{if(e){const i=r[e];return i.frame?i:null}return zbe(t,r)};const Rm={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var qbe=(t,e,r=()=>Rm)=>{const n=r(),i=t[e.size]*n.startFromPercentage,o=t[e.size]*n.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},eH=({startOfRange:t,endOfRange:e,current:r})=>{const n=e-t;return n===0?0:(r-t)/n},eR=1,Hbe=(t,e,r=()=>Rm)=>{const n=r();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return n.maxPixelScroll;if(t===e.startScrollingFrom)return eR;const o=1-eH({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),s=n.maxPixelScroll*n.ease(o);return Math.ceil(s)},Kbe=(t,e,r)=>{const n=r(),i=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,s=e,a=o,c=Date.now()-s;if(c>=o)return t;if(c<i)return eR;const u=eH({startOfRange:i,endOfRange:a,current:c}),d=t*n.ease(u);return Math.ceil(d)},gL=({distanceToEdge:t,thresholds:e,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=Hbe(t,e,i);return o===0?0:n?Math.max(Kbe(o,r,i),eR):o},vL=({container:t,distanceToEdges:e,dragStartTime:r,axis:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=qbe(t,n,o);return e[n.end]<e[n.start]?gL({distanceToEdge:e[n.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*gL({distanceToEdge:e[n.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},Ybe=({container:t,subject:e,proposedScroll:r})=>{const n=e.height>t.height,i=e.width>t.width;return!i&&!n?r:i&&n?null:{x:i?0:r.x,y:n?0:r.y}};const Qbe=Eq(t=>t===0?0:t);var tH=({dragStartTime:t,container:e,subject:r,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s={top:n.y-e.top,right:e.right-n.x,bottom:e.bottom-n.y,left:n.x-e.left},a=vL({container:e,distanceToEdges:s,dragStartTime:t,axis:qO,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),l=vL({container:e,distanceToEdges:s,dragStartTime:t,axis:Iq,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),c=Qbe({x:l,y:a});if($a(c,kr))return null;const u=Ybe({container:e,subject:r,proposedScroll:c});return u?$a(u,kr)?null:u:null};const Xbe=Eq(t=>t===0?0:t>0?1:-1),tR=(()=>{const t=(e,r)=>e<0?e:e>r?e-r:0;return({current:e,max:r,change:n})=>{const i=Gr(e,n),o={x:t(i.x,r.x),y:t(i.y,r.y)};return $a(o,kr)?null:o}})(),rH=({max:t,current:e,change:r})=>{const n={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=Xbe(r),o=tR({max:n,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},rR=(t,e)=>rH({current:t.scroll.current,max:t.scroll.max,change:e}),Jbe=(t,e)=>{if(!rR(t,e))return null;const r=t.scroll.max,n=t.scroll.current;return tR({current:n,max:r,change:e})},nR=(t,e)=>{const r=t.frame;return r?rH({current:r.scroll.current,max:r.scroll.max,change:e}):!1},Zbe=(t,e)=>{const r=t.frame;return!r||!nR(t,e)?null:tR({current:r.scroll.current,max:r.scroll.max,change:e})};var exe=({viewport:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=tH({dragStartTime:n,container:t.frame,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return s&&rR(t,s)?s:null},txe=({droppable:t,subject:e,center:r,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const s=t.frame;if(!s)return null;const a=tH({dragStartTime:n,container:s.pageMarginBox,subject:e,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return a&&nR(t,a)?a:null},bL=({state:t,dragStartTime:e,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:i,getAutoScrollerOptions:o})=>{const s=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const d=t.viewport,h=exe({dragStartTime:e,viewport:d,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(h){n(h);return}}const c=Gbe({center:s,destination:ri(t.impact),droppables:t.dimensions.droppables});if(!c)return;const u=txe({dragStartTime:e,droppable:c,subject:l,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:o});u&&i(c.descriptor.id,u)},rxe=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r=()=>Rm})=>{const n=Pm(t),i=Pm(e);let o=null;const s=c=>{o||J(!1);const{shouldUseTimeDampening:u,dragStartTime:d}=o;bL({state:c,scrollWindow:n,scrollDroppable:i,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:r})};return{start:c=>{o&&J(!1);const u=Date.now();let d=!1;const h=()=>{d=!0};bL({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:r}),o={dragStartTime:u,shouldUseTimeDampening:d},d&&s(c)},stop:()=>{o&&(n.cancel(),i.cancel(),o=null)},scroll:s}},nxe=({move:t,scrollDroppable:e,scrollWindow:r})=>{const n=(a,l)=>{const c=Gr(a.current.client.selection,l);t({client:c})},i=(a,l)=>{if(!nR(a,l))return l;const c=Zbe(a,l);if(!c)return e(a.descriptor.id,l),null;const u=Zn(l,c);return e(a.descriptor.id,u),Zn(l,u)},o=(a,l,c)=>{if(!a||!rR(l,c))return c;const u=Jbe(l,c);if(!u)return r(c),null;const d=Zn(c,u);return r(d),Zn(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=ri(a.impact);c||J(!1);const u=i(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,h=o(a.isWindowScrollAllowed,d,u);h&&n(a,h)}},ixe=({scrollDroppable:t,scrollWindow:e,move:r,getAutoScrollerOptions:n})=>{const i=rxe({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n}),o=nxe({move:r,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(n().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:i.start,stop:i.stop}};const od="data-rfd",sd=(()=>{const t=`${od}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),yP=(()=>{const t=`${od}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),oxe=(()=>{const t=`${od}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),xL={contextId:`${od}-scroll-container-context-id`},sxe=t=>e=>`[${e}="${t}"]`,Oh=(t,e)=>t.map(r=>{const n=r.styles[e];return n?`${r.selector} { ${n} }`:""}).join(" "),axe="pointer-events: none;";var lxe=t=>{const e=sxe(t),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(sd.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:axe,dropAnimating:a}}})(),n=(()=>{const a=`
      transition: ${Mp.outOfTheWay};
    `;return{selector:e(yP.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:e(oxe.contextId),styles:{always:"overflow-anchor: none;"}},s=[n,r,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Oh(s,"always"),resting:Oh(s,"resting"),dragging:Oh(s,"dragging"),dropAnimating:Oh(s,"dropAnimating"),userCancel:Oh(s,"userCancel")}};const cxe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect;var ni=cxe;const mA=()=>{const t=document.querySelector("head");return t||J(!1),t},_L=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function uxe(t,e){const r=Ge(()=>lxe(t),[t]),n=E.useRef(null),i=E.useRef(null),o=he(Nr(d=>{const h=i.current;h||J(!1),h.textContent=d}),[]),s=he(d=>{const h=n.current;h||J(!1),h.textContent=d},[]);ni(()=>{!n.current&&!i.current||J(!1);const d=_L(e),h=_L(e);return n.current=d,i.current=h,d.setAttribute(`${od}-always`,t),h.setAttribute(`${od}-dynamic`,t),mA().appendChild(d),mA().appendChild(h),s(r.always),o(r.resting),()=>{const p=m=>{const y=m.current;y||J(!1),mA().removeChild(y),m.current=null};p(n),p(i)}},[e,s,o,r.always,r.resting,t]);const a=he(()=>o(r.dragging),[o,r.dragging]),l=he(d=>{if(d==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),c=he(()=>{i.current&&o(r.resting)},[o,r.resting]);return Ge(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function nH(t,e){return Array.from(t.querySelectorAll(e))}var iH=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function x1(t){return t instanceof iH(t).HTMLElement}function fxe(t,e){const r=`[${sd.contextId}="${t}"]`,n=nH(document,r);if(!n.length)return null;const i=n.find(o=>o.getAttribute(sd.draggableId)===e);return!i||!x1(i)?null:i}function dxe(t){const e=E.useRef({}),r=E.useRef(null),n=E.useRef(null),i=E.useRef(!1),o=he(function(h,p){const m={id:h,focus:p};return e.current[h]=m,function(){const g=e.current;g[h]!==m&&delete g[h]}},[]),s=he(function(h){const p=fxe(t,h);p&&p!==document.activeElement&&p.focus()},[t]),a=he(function(h,p){r.current===h&&(r.current=p)},[]),l=he(function(){n.current||i.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const h=r.current;h&&s(h)}))},[s]),c=he(function(h){r.current=null;const p=document.activeElement;p&&p.getAttribute(sd.draggableId)===h&&(r.current=h)},[]);return ni(()=>(i.current=!0,function(){i.current=!1;const h=n.current;h&&cancelAnimationFrame(h)}),[]),Ge(()=>({register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,c,l,a])}function hxe(){const t={draggables:{},droppables:{}},e=[];function r(d){return e.push(d),function(){const p=e.indexOf(d);p!==-1&&e.splice(p,1)}}function n(d){e.length&&e.forEach(h=>h(d))}function i(d){return t.draggables[d]||null}function o(d){const h=i(d);return h||J(!1),h}const s={register:d=>{t.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,p=i(h);p&&d.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:o,findById:i,exists:d=>!!i(d),getAllByType:d=>Object.values(t.draggables).filter(h=>h.descriptor.type===d)};function a(d){return t.droppables[d]||null}function l(d){const h=a(d);return h||J(!1),h}const c={register:d=>{t.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete t.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(t.droppables).filter(h=>h.descriptor.type===d)};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:s,droppable:c,subscribe:r,clean:u}}function pxe(){const t=Ge(hxe,[]);return E.useEffect(()=>function(){k.version.startsWith("16")||k.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var iR=k.createContext(null),Hx=()=>{const t=document.body;return t||J(!1),t};const mxe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var yxe=mxe;const gxe=t=>`rfd-announcement-${t}`;function vxe(t){const e=Ge(()=>gxe(t),[t]),r=E.useRef(null);return E.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Wx(o.style,yxe),Hx().appendChild(o),function(){setTimeout(function(){const l=Hx();l.contains(o)&&l.removeChild(o),o===r.current&&(r.current=null)})}},[e]),he(i=>{const o=r.current;if(o){o.textContent=i;return}},[])}let bxe=0;const oH={separator:"::"};function xxe(t,e=oH){return Ge(()=>`${t}${e.separator}${bxe++}`,[e.separator,t])}function _xe(t,e=oH){const r=k.useId();return Ge(()=>`${t}${e.separator}${r}`,[e.separator,t,r])}var oR="useId"in k?_xe:xxe;function wxe({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function Sxe({contextId:t,text:e}){const r=oR("hidden-text",{separator:"-"}),n=Ge(()=>wxe({contextId:t,uniqueId:r}),[r,t]);return E.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=e,o.style.display="none",Hx().appendChild(o),function(){const a=Hx();a.contains(o)&&a.removeChild(o)}},[n,e]),n}var _1=k.createContext(null);function sH(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),e}function Exe(){let t=null;function e(){return!!t}function r(s){return s===t}function n(s){t&&J(!1);const a={abandon:s};return t=a,a}function i(){t||J(!1),t=null}function o(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:r,claim:n,release:i,tryAbandon:o}}function jm(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Axe=9,Cxe=13,sR=27,aH=32,Txe=33,Pxe=34,Ixe=35,Nxe=36,kxe=37,Oxe=38,Rxe=39,jxe=40,$xe={[Cxe]:!0,[Axe]:!0};var lH=t=>{$xe[t.keyCode]&&t.preventDefault()};const Dxe=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(n=>`on${n}`in document)||t})();var w1=Dxe;const cH=0,wL=5;function Mxe(t,e){return Math.abs(e.x-t.x)>=wL||Math.abs(e.y-t.y)>=wL}const SL={type:"IDLE"};function Fxe({cancel:t,completed:e,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:s,clientY:a}=i;if(o!==cH)return;const l={x:s,y:a},c=r();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&J(!1);const u=c.point;if(!Mxe(u,l))return;i.preventDefault();const d=c.actions.fluidLift(l);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:i=>{const o=r();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{r().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(r().type==="PENDING"){t();return}if(i.keyCode===sR){i.preventDefault(),t();return}lH(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=r();if(o.type==="IDLE"&&J(!1),o.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:w1,fn:t}]}function Lxe(t){const e=E.useRef(SL),r=E.useRef(ja),n=Ge(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==cH||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=t.findClosestDraggableId(d);if(!h)return;const p=t.tryGetLock(h,s,{sourceEvent:d});if(!p)return;d.preventDefault();const m={x:d.clientX,y:d.clientY};r.current(),c(p,m)}}),[t]),i=Ge(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=t.findClosestDraggableId(u);if(!d)return;const h=t.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||t.canGetLock(d)&&u.preventDefault())}}),[t]),o=he(function(){const d={passive:!1,capture:!0};r.current=Ti(window,[i,n],d)},[i,n]),s=he(()=>{e.current.type!=="IDLE"&&(e.current=SL,r.current(),o())},[o]),a=he(()=>{const u=e.current;s(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[s]),l=he(function(){const d={capture:!0,passive:!1},h=Fxe({cancel:a,completed:s,getPhase:()=>e.current,setPhase:p=>{e.current=p}});r.current=Ti(window,h,d)},[a,s]),c=he(function(d,h){e.current.type!=="IDLE"&&J(!1),e.current={type:"PENDING",point:h,actions:d},l()},[l]);ni(function(){return o(),function(){r.current()}},[o])}function Bxe(){}const Uxe={[Pxe]:!0,[Txe]:!0,[Nxe]:!0,[Ixe]:!0};function Vxe(t,e){function r(){e(),t.cancel()}function n(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===sR){i.preventDefault(),r();return}if(i.keyCode===aH){i.preventDefault(),n();return}if(i.keyCode===jxe){i.preventDefault(),t.moveDown();return}if(i.keyCode===Oxe){i.preventDefault(),t.moveUp();return}if(i.keyCode===Rxe){i.preventDefault(),t.moveRight();return}if(i.keyCode===kxe){i.preventDefault(),t.moveLeft();return}if(Uxe[i.keyCode]){i.preventDefault();return}lH(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:w1,fn:r}]}function Wxe(t){const e=E.useRef(Bxe),r=Ge(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==aH)return;const s=t.findClosestDraggableId(o);if(!s)return;const a=t.tryGetLock(s,u,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const c=a.snapLift();e.current();function u(){l||J(!1),l=!1,e.current(),n()}e.current=Ti(window,Vxe(c,u),{capture:!0,passive:!1})}}),[t]),n=he(function(){const o={passive:!1,capture:!0};e.current=Ti(window,[r],o)},[r]);ni(function(){return n(),function(){e.current()}},[n])}const yA={type:"IDLE"},zxe=120,Gxe=.15;function qxe({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(e().type!=="DRAGGING"){t();return}r.keyCode===sR&&r.preventDefault(),t()}},{eventName:w1,fn:t}]}function Hxe({cancel:t,completed:e,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:o,clientY:s}=n.touches[0],a={x:o,y:s};n.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:n=>{const i=r();if(i.type!=="DRAGGING"){t();return}n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){t();return}n.preventDefault(),t()}},{eventName:"touchforcechange",fn:n=>{const i=r();i.type==="IDLE"&&J(!1);const o=n.touches[0];if(!o||!(o.force>=Gxe))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&t();return}if(a){if(i.hasMoved){n.preventDefault();return}t();return}n.preventDefault()}},{eventName:w1,fn:t}]}function Kxe(t){const e=E.useRef(yA),r=E.useRef(ja),n=he(function(){return e.current},[]),i=he(function(p){e.current=p},[]),o=Ge(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const m=t.findClosestDraggableId(p);if(!m)return;const y=t.tryGetLock(m,a,{sourceEvent:p});if(!y)return;const g=p.touches[0],{clientX:b,clientY:v}=g,x={x:b,y:v};r.current(),d(y,x)}}),[t]),s=he(function(){const p={capture:!0,passive:!1};r.current=Ti(window,[o],p)},[o]),a=he(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(yA),r.current(),s())},[s,i]),l=he(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=he(function(){const p={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:n},y=Ti(window,Hxe(m),p),g=Ti(window,qxe(m),p);r.current=function(){y(),g()}},[l,n,a]),u=he(function(){const p=n();p.type!=="PENDING"&&J(!1);const m=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[n,i]),d=he(function(p,m){n().type!=="IDLE"&&J(!1);const y=setTimeout(u,zxe);i({type:"PENDING",point:m,actions:p,longPressTimerId:y}),c()},[c,n,i,u]);ni(function(){return s(),function(){r.current();const m=n();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(yA))}},[n,s,i]),ni(function(){return Ti(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Yxe=["input","button","textarea","select","option","optgroup","video","audio"];function uH(t,e){if(e==null)return!1;if(Yxe.includes(e.tagName.toLowerCase()))return!0;const n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===t?!1:uH(t,e.parentElement)}function Qxe(t,e){const r=e.target;return x1(r)?uH(t,r):!1}var Xxe=t=>to(t.getBoundingClientRect()).center;function Jxe(t){return t instanceof iH(t).Element}const Zxe=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||t})();function fH(t,e){return t==null?null:t[Zxe](e)?t:fH(t.parentElement,e)}function e_e(t,e){return t.closest?t.closest(e):fH(t,e)}function t_e(t){return`[${sd.contextId}="${t}"]`}function r_e(t,e){const r=e.target;if(!Jxe(r))return null;const n=t_e(t),i=e_e(r,n);return!i||!x1(i)?null:i}function n_e(t,e){const r=r_e(t,e);return r?r.getAttribute(sd.draggableId):null}function i_e(t,e){const r=`[${yP.contextId}="${t}"]`,i=nH(document,r).find(o=>o.getAttribute(yP.id)===e);return!i||!x1(i)?null:i}function o_e(t){t.preventDefault()}function $v({expected:t,phase:e,isLockActive:r,shouldWarn:n}){return!(!r()||t!==e)}function dH({lockAPI:t,store:e,registry:r,draggableId:n}){if(t.isClaimed())return!1;const i=r.draggable.findById(n);return!(!i||!i.options.isEnabled||!Zq(e.getState(),n))}function s_e({lockAPI:t,contextId:e,store:r,registry:n,draggableId:i,forceSensorStop:o,sourceEvent:s}){if(!dH({lockAPI:t,store:r,registry:n,draggableId:i}))return null;const l=n.draggable.getById(i),c=i_e(e,l.descriptor.id);if(!c||s&&!l.options.canDragInteractiveElements&&Qxe(c,s))return null;const u=t.claim(o||ja);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return t.isActive(u)}function m(_,w){$v({expected:_,phase:d,isLockActive:p,shouldWarn:!0})&&r.dispatch(w())}const y=m.bind(null,"DRAGGING");function g(_){function w(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(w(),J(!1)),r.dispatch(z0e(_.liftActionArgs)),d="DRAGGING";function A(C,I={shouldBlockNextClick:!1}){if(_.cleanup(),I.shouldBlockNextClick){const T=Ti(window,[{eventName:"click",fn:o_e,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}w(),r.dispatch(Gq({reason:C}))}return{isActive:()=>$v({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>A("DROP",C),cancel:C=>A("CANCEL",C),..._.actions}}function b(_){const w=Pm(C=>{y(()=>zq({client:C}))});return{...g({liftActionArgs:{id:i,clientSelection:_,movementMode:"FLUID"},cleanup:()=>w.cancel(),actions:{move:w}}),move:w}}function v(){const _={moveUp:()=>y(Z0e),moveRight:()=>y(tbe),moveDown:()=>y(ebe),moveLeft:()=>y(rbe)};return g({liftActionArgs:{id:i,clientSelection:Xxe(c),movementMode:"SNAP"},cleanup:ja,actions:_})}function x(){$v({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>$v({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:v,abort:x}}const a_e=[Lxe,Wxe,Kxe];function l_e({contextId:t,store:e,registry:r,customSensors:n,enableDefaultSensors:i}){const o=[...i?a_e:[],...n||[]],s=E.useState(()=>Exe())[0],a=he(function(g,b){jm(g)&&!jm(b)&&s.tryAbandon()},[s]);ni(function(){let g=e.getState();return e.subscribe(()=>{const v=e.getState();a(g,v),g=v})},[s,e,a]),ni(()=>s.tryAbandon,[s.tryAbandon]);const l=he(y=>dH({lockAPI:s,registry:r,store:e,draggableId:y}),[s,r,e]),c=he((y,g,b)=>s_e({lockAPI:s,registry:r,contextId:t,store:e,draggableId:y,forceSensorStop:g||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[t,s,r,e]),u=he(y=>n_e(t,y),[t]),d=he(y=>{const g=r.draggable.findById(y);return g?g.options:null},[r.draggable]),h=he(function(){s.isClaimed()&&(s.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(XO()))},[s,e]),p=he(()=>s.isClaimed(),[s]),m=Ge(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:p}),[l,c,u,d,h,p]);for(let y=0;y<o.length;y++)o[y](m)}const c_e=t=>({onBeforeCapture:e=>{const r=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};k.version.startsWith("16")||k.version.startsWith("17")?r():Xy.flushSync(r)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),u_e=t=>({...Rm,...t.autoScrollerOptions,durationDampening:{...Rm.durationDampening,...t.autoScrollerOptions}});function Rh(t){return t.current||J(!1),t.current}function f_e(t){const{contextId:e,setCallbacks:r,sensors:n,nonce:i,dragHandleUsageInstructions:o}=t,s=E.useRef(null),a=sH(t),l=he(()=>c_e(a.current),[a]),c=he(()=>u_e(a.current),[a]),u=vxe(e),d=Sxe({contextId:e,text:o}),h=uxe(e,i),p=he(T=>{Rh(s).dispatch(T)},[]),m=Ge(()=>HF({publishWhileDragging:q0e,updateDroppableScroll:K0e,updateDroppableIsEnabled:Y0e,updateDroppableIsCombineEnabled:Q0e,collectionStarting:H0e},p),[p]),y=pxe(),g=Ge(()=>Ube(y,m),[y,m]),b=Ge(()=>ixe({scrollWindow:Vbe,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:c,...HF({move:zq},p)}),[g.scrollDroppable,p,c]),v=dxe(e),x=Ge(()=>Mbe({announce:u,autoScroller:b,dimensionMarshal:g,focusMarshal:v,getResponders:l,styleMarshal:h}),[u,b,g,v,l,h]);s.current=x;const S=he(()=>{const T=Rh(s);T.getState().phase!=="IDLE"&&T.dispatch(XO())},[]),_=he(()=>{const T=Rh(s).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),w=Ge(()=>({isDragging:_,tryAbort:S}),[_,S]);r(w);const A=he(T=>Zq(Rh(s).getState(),T),[]),C=he(()=>Tl(Rh(s).getState()),[]),I=Ge(()=>({marshal:g,focus:v,contextId:e,canLift:A,isMovementAllowed:C,dragHandleUsageInstructionsId:d,registry:y}),[e,g,d,v,A,C,y]);return l_e({contextId:e,store:x,registry:y,customSensors:n||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),E.useEffect(()=>S,[S]),k.createElement(_1.Provider,{value:I},k.createElement(_ve,{context:iR,store:x},t.children))}let d_e=0;function h_e(){return Ge(()=>`${d_e++}`,[])}function p_e(){return k.useId()}var m_e="useId"in k?p_e:h_e;function y_e(t){const e=m_e(),r=t.dragHandleUsageInstructions||Q0.dragHandleUsageInstructions;return k.createElement(Ove,null,n=>k.createElement(f_e,{nonce:t.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const EL={dragging:5e3,dropAnimating:4500},g_e=(t,e)=>e?Mp.drop(e.duration):t?Mp.snap:Mp.fluid,v_e=(t,e)=>{if(t)return e?Om.opacity.drop:Om.opacity.combining},b_e=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function x_e(t){const r=t.dimension.client,{offset:n,combineWith:i,dropping:o}=t,s=!!i,a=b_e(t),l=!!o,c=l?pP.drop(n,s):pP.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:g_e(a,o),transform:c,opacity:v_e(s,l),zIndex:l?EL.dropAnimating:EL.dragging,pointerEvents:"none"}}function __e(t){return{transform:pP.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function w_e(t){return t.type==="DRAGGING"?x_e(t):__e(t)}function S_e(t,e,r=kr){const n=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=bq(i,n),s=Vx(o,r),a={client:o,tagName:e.tagName.toLowerCase(),display:n.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:o,page:s}}function E_e(t){const e=oR("draggable"),{descriptor:r,registry:n,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}=t,l=Ge(()=>({canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:a}),[o,a,s]),c=he(p=>{const m=i();return m||J(!1),S_e(r,m,p)},[r,i]),u=Ge(()=>({uniqueId:e,descriptor:r,options:l,getDimension:c}),[r,c,l,e]),d=E.useRef(u),h=E.useRef(!0);ni(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),ni(()=>{if(h.current){h.current=!1;return}const p=d.current;d.current=u,n.draggable.update(u,p)},[u,n.draggable])}var aR=k.createContext(null);function Kx(t){const e=E.useContext(t);return e||J(!1),e}function A_e(t){t.preventDefault()}const C_e=t=>{const e=E.useRef(null),r=he((w=null)=>{e.current=w},[]),n=he(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:s}=Kx(_1),{type:a,droppableId:l}=Kx(aR),c=Ge(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:u,draggableId:d,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:y,mapped:g,dropAnimationFinished:b}=t;if(!y){const w=Ge(()=>({descriptor:c,registry:s,getDraggableRef:n,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:h}),[c,s,n,m,p,h]);E_e(w)}const v=Ge(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:A_e}:null,[i,o,d,h]),x=he(w=>{g.type==="DRAGGING"&&g.dropping&&w.propertyName==="transform"&&(k.version.startsWith("16")||k.version.startsWith("17")?b():Xy.flushSync(b))},[b,g]),S=Ge(()=>{const w=w_e(g),A=g.type==="DRAGGING"&&g.dropping?x:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:w,onTransitionEnd:A},dragHandleProps:v}},[i,v,d,g,x,r]),_=Ge(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return k.createElement(k.Fragment,null,u(S,g.snapshot,_))};var T_e=C_e,hH=(t,e)=>t===e,pH=t=>{const{combine:e,destination:r}=t;return r?r.droppableId:e?e.droppableId:null};const P_e=t=>t.combine?t.combine.draggableId:null,I_e=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function N_e(){const t=Nr((i,o)=>({x:i,y:o})),e=Nr((i,o,s=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:s,combineWith:a,combineTargetFor:null})),r=Nr((i,o,s,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:i,dimension:s,forceShouldAnimate:u,snapshot:e(o,a,l,c,null)}}));return(i,o)=>{if(jm(i)){if(i.critical.draggable.id!==o.draggableId)return null;const s=i.current.client.offset,a=i.dimensions.draggables[o.draggableId],l=ri(i.impact),c=I_e(i.impact),u=i.forceShouldAnimate;return r(t(s.x,s.y),i.movementMode,a,o.isClone,l,c,u)}if(i.phase==="DROP_ANIMATING"){const s=i.completed;if(s.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=i.dimensions.draggables[o.draggableId],c=s.result,u=c.mode,d=pH(c),h=P_e(c),m={duration:i.dropDuration,curve:ZO.drop,moveTo:i.newHomeClientOffset,opacity:h?Om.opacity.drop:null,scale:h?Om.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:l,dropping:m,draggingOver:d,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:e(u,a,d,h,m)}}}return null}}function mH(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const k_e={mapped:{type:"SECONDARY",offset:kr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:mH(null)}};function O_e(){const t=Nr((s,a)=>({x:s,y:a})),e=Nr(mH),r=Nr((s,a=null,l)=>({mapped:{type:"SECONDARY",offset:s,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),n=s=>s?r(kr,s,!0):null,i=(s,a,l,c)=>{const u=l.displaced.visible[s],d=!!(c.inVirtualList&&c.effected[s]),h=g1(l),p=h&&h.draggableId===s?a:null;if(!u){if(!d)return n(p);if(l.displaced.invisible[s])return null;const g=qd(c.displacedBy.point),b=t(g.x,g.y);return r(b,p,!0)}if(d)return n(p);const m=l.displacedBy.point,y=t(m.x,m.y);return r(y,p,u.shouldAnimate)};return(s,a)=>{if(jm(s))return s.critical.draggable.id===a.draggableId?null:i(a.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){const l=s.completed;return l.result.draggableId===a.draggableId?null:i(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const R_e=()=>{const t=N_e(),e=O_e();return(n,i)=>t(n,i)||e(n,i)||k_e},j_e={dropAnimationFinished:qq},$_e=yq(R_e,j_e,null,{context:iR,areStatePropsEqual:hH})(T_e);var D_e=$_e;function yH(t){return Kx(aR).isUsingCloneFor===t.draggableId&&!t.isClone?null:k.createElement(D_e,t)}function M_e(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return k.createElement(yH,Wx({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const gH=t=>e=>t===e,F_e=gH("scroll"),L_e=gH("auto"),AL=(t,e)=>e(t.overflowX)||e(t.overflowY),B_e=t=>{const e=window.getComputedStyle(t),r={overflowX:e.overflowX,overflowY:e.overflowY};return AL(r,F_e)||AL(r,L_e)},U_e=()=>!1,vH=t=>t==null?null:t===document.body?U_e()?t:null:t===document.documentElement?null:B_e(t)?t:vH(t.parentElement);var V_e=vH,gP=t=>({x:t.scrollLeft,y:t.scrollTop});const bH=t=>t?window.getComputedStyle(t).position==="fixed"?!0:bH(t.parentElement):!1;var W_e=t=>{const e=V_e(t),r=bH(t);return{closestScrollable:e,isFixedOnPage:r}},z_e=({descriptor:t,isEnabled:e,isCombineEnabled:r,isFixedOnPage:n,direction:i,client:o,page:s,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,m=Qq({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:kr,displacement:kr}}}})(),c=i==="vertical"?qO:Iq,u=id({page:s,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:e,client:o,page:s,frame:l,subject:u}};const G_e=(t,e)=>{const r=xq(t);if(!e||t!==e)return r;const n=r.paddingBox.top-e.scrollTop,i=r.paddingBox.left-e.scrollLeft,o=n+e.scrollHeight,s=i+e.scrollWidth,l=VO({top:n,right:s,bottom:o,left:i},r.border);return WO({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var q_e=({ref:t,descriptor:e,env:r,windowScroll:n,direction:i,isDropDisabled:o,isCombineEnabled:s,shouldClipSubject:a})=>{const l=r.closestScrollable,c=G_e(t,l),u=Vx(c,n),d=(()=>{if(!l)return null;const p=xq(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:Vx(p,n),scroll:gP(l),scrollSize:m,shouldClipSubject:a}})();return z_e({descriptor:e,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:c,page:u,closest:d})};const H_e={passive:!1},K_e={passive:!0};var CL=t=>t.shouldPublishImmediately?H_e:K_e;const Dv=t=>t&&t.env.closestScrollable||null;function Y_e(t){const e=E.useRef(null),r=Kx(_1),n=oR("droppable"),{registry:i,marshal:o}=r,s=sH(t),a=Ge(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=E.useRef(a),c=Ge(()=>Nr((S,_)=>{e.current||J(!1);const w={x:S,y:_};o.updateDroppableScroll(a.id,w)}),[a.id,o]),u=he(()=>{const S=e.current;return!S||!S.env.closestScrollable?kr:gP(S.env.closestScrollable)},[]),d=he(()=>{const S=u();c(S.x,S.y)},[u,c]),h=Ge(()=>Pm(d),[d]),p=he(()=>{const S=e.current,_=Dv(S);if(S&&_||J(!1),S.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),m=he((S,_)=>{e.current&&J(!1);const w=s.current,A=w.getDroppableRef();A||J(!1);const C=W_e(A),I={ref:A,descriptor:a,env:C,scrollOptions:_};e.current=I;const T=q_e({ref:A,descriptor:a,env:C,windowScroll:S,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),P=C.closestScrollable;return P&&(P.setAttribute(xL.contextId,r.contextId),P.addEventListener("scroll",p,CL(I.scrollOptions))),T},[r.contextId,a,p,s]),y=he(()=>{const S=e.current,_=Dv(S);return S&&_||J(!1),gP(_)},[]),g=he(()=>{const S=e.current;S||J(!1);const _=Dv(S);e.current=null,_&&(h.cancel(),_.removeAttribute(xL.contextId),_.removeEventListener("scroll",p,CL(S.scrollOptions)))},[p,h]),b=he(S=>{const _=e.current;_||J(!1);const w=Dv(_);w||J(!1),w.scrollTop+=S.y,w.scrollLeft+=S.x},[]),v=Ge(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:y,dragStopped:g,scroll:b}),[g,m,y,b]),x=Ge(()=>({uniqueId:n,descriptor:a,callbacks:v}),[v,a,n]);ni(()=>(l.current=x.descriptor,i.droppable.register(x),()=>{e.current&&g(),i.droppable.unregister(x)}),[v,a,g,x,o,i.droppable]),ni(()=>{e.current&&o.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,o]),ni(()=>{e.current&&o.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,o])}function gA(){}const TL={width:0,height:0,margin:Lve},Q_e=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>t||r==="close"?TL:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},X_e=({isAnimatingOpenOnMount:t,placeholder:e,animate:r})=>{const n=Q_e({isAnimatingOpenOnMount:t,placeholder:e,animate:r});return{display:e.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Mp.placeholder:null}},J_e=t=>{const e=E.useRef(null),r=he(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:n,onTransitionEnd:i,onClose:o,contextId:s}=t,[a,l]=E.useState(t.animate==="open");E.useEffect(()=>a?n!=="open"?(r(),l(!1),gA):e.current?gA:(e.current=setTimeout(()=>{e.current=null,l(!1)}),r):gA,[n,a,r]);const c=he(d=>{d.propertyName==="height"&&(i(),n==="close"&&o())},[n,o,i]),u=X_e({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return k.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":s,onTransitionEnd:c,ref:t.innerRef})};var Z_e=k.memo(J_e);class ewe extends k.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,r){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const twe=t=>{const e=E.useContext(_1);e||J(!1);const{contextId:r,isMovementAllowed:n}=e,i=E.useRef(null),o=E.useRef(null),{children:s,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:p,snapshot:m,useClone:y,updateViewportMaxScroll:g,getContainerForClone:b}=t,v=he(()=>i.current,[]),x=he((P=null)=>{i.current=P},[]);he(()=>o.current,[]);const S=he((P=null)=>{o.current=P},[]),_=he(()=>{n()&&g({maxScroll:Jq()})},[n,g]);Y_e({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:v});const w=Ge(()=>k.createElement(ewe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:P,data:O,animate:N})=>k.createElement(Z_e,{placeholder:O,onClose:P,innerRef:S,animate:N,contextId:r,onTransitionEnd:_})),[r,_,t.placeholder,t.shouldAnimatePlaceholder,S]),A=Ge(()=>({innerRef:x,placeholder:w,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,w,x]),C=y?y.dragging.draggableId:null,I=Ge(()=>({droppableId:a,type:l,isUsingCloneFor:C}),[a,C,l]);function T(){if(!y)return null;const{dragging:P,render:O}=y,N=k.createElement(yH,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(j,L)=>O(j,L,P));return Yee.createPortal(N,b())}return k.createElement(aR.Provider,{value:I},s(A,m),T())};var rwe=twe;function nwe(){return document.body||J(!1),document.body}const PL={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:nwe},xH=t=>{let e={...t},r;for(r in PL)t[r]===void 0&&(e={...e,[r]:PL[r]});return e},vA=(t,e)=>t===e.droppable.type,IL=(t,e)=>e.draggables[t.draggable.id],iwe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},r=Nr(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=Nr((o,s,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===o){const m=u?{render:u,dragging:r(c.descriptor)}:null,y={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:m}}if(!s)return e;if(!l)return t;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,s)=>{const a=xH(s),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if(jm(o)){const h=o.critical;if(!vA(c,h))return e;const p=IL(h,o.dimensions),m=ri(o.impact)===l;return n(l,u,m,m,p,d)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!vA(c,h.critical))return e;const p=IL(h.critical,o.dimensions);return n(l,u,pH(h.result)===l,ri(h.impact)===l,p,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!vA(c,h.critical))return e;const p=ri(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),y=h.critical.droppable.id===l;return p?m?t:e:y?t:e}return e}},owe={updateViewportMaxScroll:J0e},swe=yq(iwe,owe,(t,e,r)=>({...xH(r),...t,...e}),{context:iR,areStatePropsEqual:hH})(rwe);var awe=swe;const lwe=["0","1","2","3"],cwe=({defaultPlayers:t,onSubmit:e})=>{const{register:r,reset:n,control:i,getValues:o,setValue:s}=Gd({defaultValues:t}),a=Ka({control:i,name:["0.proPicUrl","0.teamPicUrl","1.proPicUrl","1.teamPicUrl","2.proPicUrl","2.teamPicUrl","3.proPicUrl","3.teamPicUrl"]}),l=Ka({control:i,name:["0.color","1.color","2.color","3.color"]}),c=E.useCallback(p=>{if(!p.destination)return;const m=["0","1","2","3"],[y]=m.splice(p.source.index,1);m.splice(p.destination.index,0,y),n({0:o(m[0]),1:o(m[1]),2:o(m[2]),3:o(m[3])})},[o,n]),u=E.useCallback(p=>{const m=p.currentTarget.getAttribute("data-index"),y=p.currentTarget.getAttribute("data-type"),g=o(`${m}.${y}`),b=prompt("新的圖片網址",g??"");b!==null&&s(`${m}.${y}`,b)},[o,s]),d=E.useCallback(()=>{n()},[n]),h=E.useCallback(()=>{e==null||e(o())},[o,e]);return E.useEffect(()=>{n({0:{...t[0]},1:{...t[1]},2:{...t[2]},3:{...t[3]}})},[t,n]),f.jsxs("div",{children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"w-8"}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"flex font-semibold gap-2 text-center",children:[f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex-[2]",children:"圖片"}),f.jsx("div",{className:"flex-[2]",children:"隊伍"}),f.jsx("div",{className:"flex-[5]",children:"隊伍名稱／稱號"}),f.jsx("div",{className:"flex-[5]",children:"名稱"}),f.jsx("div",{className:"flex-[3]",children:"暱稱"}),f.jsx("div",{className:"flex-[3]",children:"顏色"})]})})]}),f.jsxs("div",{className:"flex",children:[f.jsxs("div",{className:"w-8 flex flex-col justify-around font-semibold",children:[f.jsx("div",{children:"東"}),f.jsx("div",{children:"南"}),f.jsx("div",{children:"西"}),f.jsx("div",{children:"北"})]}),f.jsx("div",{className:"flex-1",children:f.jsx(y_e,{onDragEnd:c,children:f.jsx(awe,{droppableId:"droppable",children:p=>f.jsxs("div",{...p.droppableProps,ref:p.innerRef,children:[lwe.map((m,y)=>f.jsx(M_e,{draggableId:m,index:y,children:g=>f.jsx("div",{ref:g.innerRef,...g.draggableProps,children:f.jsxs("div",{className:"flex gap-2 py-1 items-center",children:[f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:"text-2xl",...g.dragHandleProps,children:f.jsx("i",{className:"bi bi-grip-vertical"})})}),f.jsx("div",{className:"flex-[2] border border-neutral-400",children:f.jsx("img",{className:"aspect-[18/25] w-full cursor-pointer",src:a[2*y],onClick:u,"data-type":"proPicUrl","data-index":y,alt:""})}),f.jsx("div",{className:"flex-[2] border border-neutral-400",children:f.jsx("img",{className:"aspect-square w-full cursor-pointer",src:a[2*y+1],onClick:u,"data-type":"teamPicUrl","data-index":y,alt:""})}),f.jsx("div",{className:"flex-[5]",children:f.jsx("input",{className:"w-full",...r(`${m}.title`)})}),f.jsx("div",{className:"flex-[5]",children:f.jsx("input",{className:"w-full",...r(`${m}.name`)})}),f.jsx("div",{className:"flex-[3]",children:f.jsx("input",{className:"w-full",...r(`${m}.nickname`)})}),f.jsx("div",{className:"flex-[3]",children:f.jsx("input",{className:"w-full text-white",...r(`${m}.color`),style:{background:l[y]}})})]})})},m)),p.placeholder]})})})})]}),f.jsxs("div",{className:"flex mt-8",children:[f.jsx(Re,{className:"flex-1",variant:"text",color:"secondary",onClick:d,children:"重置"}),f.jsx(Re,{className:"flex-1",onClick:h,children:"儲存"})]})]})},bA=[{label:f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(舊版)"]}),value:"listView-old"},{label:f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-hdd-stack-fill"})," 列表(新版)"]}),value:"listView-new"},{label:f.jsxs("span",{children:[f.jsx("i",{className:"bi-grid-fill"})," 2x2"]}),value:"gridView"}];function Mv({value:t}){return f.jsx(Mt,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}const Fv=({match:t,matchRound:e,playerIndex:r})=>{var n;return f.jsxs("div",{className:"text-xs",children:[f.jsxs("p",{children:[e.playerResults[r].isRiichi&&f.jsx("span",{children:"立"}),e.resultType===Ve.Ron&&e.playerResults[r].type===yt.Lose&&f.jsx("span",{children:"統"}),e.resultType===Ve.Ron&&e.playerResults[r].type===yt.Win&&f.jsx("span",{children:"和"}),e.resultType===Ve.SelfDrawn&&e.playerResults[r].type===yt.Win&&f.jsx("span",{children:"摸"}),e.resultType===Ve.Exhausted&&e.playerResults[r].type===yt.Win&&f.jsx("span",{children:"聽"})]}),(e.resultType===Ve.Ron||e.resultType===Ve.SelfDrawn)&&e.playerResults[r].type===yt.Win&&f.jsxs("div",{className:"bg-black bg-opacity-10 rounded py-1 px-2 mx-auto inline-block",children:[f.jsx("p",{className:"font-bold",children:f.jsx(Rx,{className:"text-xs text-neutral-600",han:e.playerResults[r].detail.han,fu:e.playerResults[r].detail.fu,yakumanCount:e.playerResults[r].detail.yakumanCount,isManganRoundUp:t.setting.isManganRoundUp==="1"})}),f.jsx("p",{children:(n=e.playerResults[r].detail.yakus)==null?void 0:n.map(({label:i})=>i).join(" ")})]})]})};function _H({params:{matchId:t}}){const{data:e,set:r}=Zr("obs/1"),{data:n}=qa({queryKey:["matches",t],queryFn:({queryKey:M})=>EO(M[1])}),{match:i,matchRounds:o,matchCurrentRound:s,matchCurrentRoundDoras:a,updateMatchRoundById:l,updateCurrentMatchRound:c,pushMatchRound:u,setCurrentRoundDoras:d,setMatchName:h,setMatchPlayers:p,setMatchPointDisplay:m,setMatchHideHeaderDisplay:y,setMatchActiveResultDetail:g,setMatchRoundHasBroadcastedToTrue:b}=Jo(t),v=E.useMemo(()=>Object.entries(o??{}).map(([M,fe])=>({id:M,...fe}))??[],[o]),x=E.useMemo(()=>v.filter(({resultDetail:M,hasBroadcasted:fe})=>!!M&&!fe),[v]),[S,_]=E.useState(void 0),[w,A]=E.useState(bA[0].value),[C,I]=Eo(!1),[T,P]=E.useState({initialActivePlayerIndex:"0",initialTargetPlayerIndex:"-1"}),O=Nye(),[N,j]=Eo(!1),[L,U]=Eo(!1),V=E.useCallback(()=>{U(!0)},[U]),R=E.useCallback(M=>{p(M),U(!1)},[p,U]),[F,z]=Eo(!1),[ae,te]=Eo(!1),[be,at]=E.useState({id:null,matchRound:null}),rt=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-matchRoundId");if(!fe)return;const Te=o==null?void 0:o[fe];Te&&(at({id:fe,matchRound:Te}),te(!0))},[o,te]),Vt=E.useCallback(M=>{if(!v||!be.id)return;const fe=v.findIndex(({id:zt})=>zt===be.id);if(fe===-1)return;l(be.id,M);let Te=M;for(let zt=fe+1;zt<v.length;zt++){const{id:_J,...Wn}=v[zt],c$={...Wn,playerResults:{0:{...Wn.playerResults[0],beforeScore:Te.playerResults[0].afterScore,afterScore:Te.playerResults[0].afterScore+(Wn.playerResults[0].afterScore-Wn.playerResults[0].beforeScore)},1:{...Wn.playerResults[1],beforeScore:Te.playerResults[1].afterScore,afterScore:Te.playerResults[1].afterScore+(Wn.playerResults[1].afterScore-Wn.playerResults[1].beforeScore)},2:{...Wn.playerResults[2],beforeScore:Te.playerResults[2].afterScore,afterScore:Te.playerResults[2].afterScore+(Wn.playerResults[2].afterScore-Wn.playerResults[2].beforeScore)},3:{...Wn.playerResults[3],beforeScore:Te.playerResults[3].afterScore,afterScore:Te.playerResults[3].afterScore+(Wn.playerResults[3].afterScore-Wn.playerResults[3].beforeScore)}}};l(_J,c$),Te=c$}te(!1),setTimeout(()=>{alert("「下次小心d喇屌 :)」")},0)},[be.id,v,te,l]),[,pt]=E.useState(null),Zt=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-player-index");if(!fe)return;const Te=i==null?void 0:i.players[fe];if(!Te)return;const zt=!(s!=null&&s.playerResults[fe].isRiichi);O.showConfirmDialog({title:zt?"確定要立直嗎？":"取消立直？",content:zt?`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Te.name}！`:`你是否想取消 ${Te.name} 的立直？`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[fe]:{...s==null?void 0:s.playerResults[fe],isRiichi:!(s!=null&&s.playerResults[fe].isRiichi)}}})}})},[O,i==null?void 0:i.players,s==null?void 0:s.playerResults,c]),ee=E.useCallback(M=>{var Te;const fe=parseInt((Te=M.currentTarget)==null?void 0:Te.getAttribute("data-index"),10);typeof fe<"u"&&!Number.isNaN(fe)&&_(fe)},[]),xe=E.useCallback(M=>{if(typeof S<"u"){const fe=M[0];if(!fe)return;const Te=[...a];S===-1?Te.push(fe):Te[S]=fe,d(Te),_(void 0)}},[S,a,d]),Ee=E.useCallback(()=>{if(typeof S<"u"){const M=[...a];S>-1&&(M.splice(S,1),d(M),_(void 0))}},[S,a,d]),q=E.useCallback(()=>{_(void 0)},[]),Ze=E.useCallback(M=>{const fe=M==null?void 0:M.currentTarget.getAttribute("data-player-index");fe&&(P({initialActivePlayerIndex:fe}),I())},[I]),ke=E.useCallback(()=>{j(!0)},[j]),vt=E.useCallback(()=>{z(!0)},[z]),$t=E.useCallback((M,fe)=>{if(console.log(M,fe),!i||!s)return;const Te=i.players[M],zt=s.playerResults[M];switch(fe){case"reveal":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],isRevealed:!s.playerResults[M].isRevealed,detail:{...s.playerResults[M].detail,isRevealed:!s.playerResults[M].isRevealed}}}});case"riichi":return O.showConfirmDialog({title:zt.isRiichi?"取消立直？":"確定要立直嗎？",content:zt.isRiichi?`你是否想取消 ${Te.name} 的立直？`:`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Te.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isRiichi:!(s!=null&&s.playerResults[M].isRiichi),detail:{...s.playerResults[M].detail,isRiichied:!s.playerResults[M].isRiichi,raw:{...s.playerResults[M].detail.raw,riichi:!s.playerResults[M].isRiichi}}}}}),zt.isRiichi||(pt("立直動畫"),setTimeout(()=>{pt(null)},2e3))}});case"ron-self":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!(s!=null&&s.playerResults[M].detail.isRevealed)}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:"-1"}),I();return;case"ron-before":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:IG(M)}),I();return;case"ron-after":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:NG(M)}),I();return;case"ron-opposite":c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],detail:{...s.playerResults[M].detail,raw:{...s.playerResults[M].detail.raw,"menzenchin-tsumohou":!1}}}}}),P({initialActivePlayerIndex:M,initialTargetPlayerIndex:kG(M)}),I();return;case"dora-normal-plus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,dora:s.playerResults[M].detail.dora+1}}}});case"dora-normal-minus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,dora:Math.max(s.playerResults[M].detail.dora-1,0)}}}});case"dora-red-plus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,redDora:s.playerResults[M].detail.redDora+1}}}});case"dora-red-minus":return c({playerResults:{...s.playerResults,[M]:{...s.playerResults[M],detail:{...s.playerResults[M].detail,redDora:Math.max(s.playerResults[M].detail.redDora-1,0)}}}});case"waitingTile":return Z({index:M,tiles:(s==null?void 0:s.playerResults[M].waitingTiles)??[]});case"yaku":return po({index:M});case"yellow-card":return O.showConfirmDialog({title:zt.isYellowCarded?"取消黃牌？":"確定要給予這名玩家黃牌嗎？",content:zt.isYellowCarded?`你是否想取消 ${Te.name} 的黃牌？`:`一旦點擊確定，就會播出黃牌動畫，請確定要黃牌的是 ${Te.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isYellowCarded:!(s!=null&&s.playerResults[M].isYellowCarded)}}})}});case"red-card":return O.showConfirmDialog({title:zt.isRedCarded?"取消紅牌？":"確定要給予這名玩家紅牌嗎？",content:zt.isRedCarded?`你是否想取消 ${Te.name} 的紅牌？`:`一旦點擊確定，就會播出紅牌動畫，請確定要紅牌的是 ${Te.name}！`,onClickOk:async()=>{c({playerResults:{...s==null?void 0:s.playerResults,[M]:{...s==null?void 0:s.playerResults[M],isRedCarded:!(s!=null&&s.playerResults[M].isRedCarded)}}})}})}},[O,i,s,I,c]),en=E.useCallback(M=>{try{const fe=wF(M.roundCount),Te=M.playerResults[fe].type===yt.Win,zt=!Te&&M.roundCount>=8;zt&&alert("對局結束。"),c({...M,nextRoundType:zt?bt.End:Te?bt.Extended:bt.NextRound}),I(!1),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3)}catch(fe){console.error(fe)}},[I,c]),Vn=E.useCallback(M=>{try{const fe=wF(M.roundCount),Te=M.playerResults[fe].type!==yt.Win,zt=Te&&M.roundCount>=8;zt&&alert("對局結束。"),c({...M,nextRoundType:zt?bt.End:Te?bt.NextRoundAndExtended:bt.Extended}),j(!1),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3)}catch(fe){console.error(fe)}},[j,c]),$=E.useCallback(M=>{try{c({playerResults:M.playerResults,resultType:Ve.Hotfix});const fe={matchId:t,code:Ox(t,M.roundCount,M.extendedRoundCount),roundCount:M.roundCount,extendedRoundCount:M.extendedRoundCount,cumulatedThousands:M.cumulatedThousands,nextRoundCumulatedThousands:0,resultType:Ve.Unknown,nextRoundType:bt.Unknown,playerResults:SF(M.playerResults),doras:(s==null?void 0:s.doras)??[]};u(fe),pt("分數變動中…"),setTimeout(()=>{pt(null)},4e3),z(!1)}catch(fe){console.error(fe)}},[s==null?void 0:s.doras,t,u,z,c]),B=E.useCallback(()=>{if(!s)return;const M=s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,fe=s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0,Te={matchId:t,code:Ox(t,M,fe),roundCount:M,extendedRoundCount:fe,cumulatedThousands:s.nextRoundCumulatedThousands,nextRoundCumulatedThousands:0,resultType:Ve.Unknown,nextRoundType:bt.Unknown,playerResults:SF(s.playerResults),doras:{}};u(Te)},[s,t,u]),W=E.useCallback(()=>{r({matchId:t})},[t,r]),[re,Z]=E.useState(null),Q=E.useCallback(M=>{const fe=M.currentTarget.getAttribute("data-player-index");typeof fe>"u"||!(s!=null&&s.playerResults[fe])||Z({index:fe,tiles:(s==null?void 0:s.playerResults[fe].waitingTiles)??[]})},[s==null?void 0:s.playerResults]),pe=E.useCallback(()=>{Z(null)},[]),nt=E.useCallback(M=>{re&&(c({playerResults:{...s==null?void 0:s.playerResults,[re.index]:{...s==null?void 0:s.playerResults[re.index],waitingTiles:M}}}),Z(null))},[re,s==null?void 0:s.playerResults,c]),Wt=E.useCallback(()=>{re&&(c({playerResults:{...s==null?void 0:s.playerResults,[re.index]:{...s==null?void 0:s.playerResults[re.index],waitingTiles:[]}}}),Z(null))},[re,s==null?void 0:s.playerResults,c]),[Dr,po]=E.useState(null),PS=E.useCallback(()=>{po(null)},[]),hh=E.useCallback(M=>{!s||!Dr||(c({playerResults:{...s.playerResults,[Dr.index]:{...s.playerResults[Dr.index],detail:{...s.playerResults[Dr.index].detail,...M}}}}),po(null))},[Dr,s,c]),ph=E.useCallback(M=>{if(M.preventDefault(),!i)return;const fe=prompt("對局名稱",i.name);fe&&h(fe)},[i,h]),ev=E.useCallback(M=>{if(!o)return;const fe=M.currentTarget.getAttribute("data-match-round-id");if(!fe)return;const Te=o[fe].resultDetail;Te&&(g(Te),b(fe),pt("播放和牌中…"),setTimeout(()=>{g(null),pt(null)},2e4))},[o,g,b]),tv=E.useCallback(()=>{g(null)},[g]),IS=E.useCallback(()=>{m(!0)},[m]),rv=E.useCallback(()=>{m(!1)},[m]),bJ=E.useCallback(()=>{y(!0)},[y]),xJ=E.useCallback(()=>{y(!1)},[y]);return E.useEffect(()=>{s&&a.length===0&&_(-1)},[s,a.length]),(!i||!s)&&n?f.jsx(Gye,{matchDTO:n}):!i||!s?f.jsx("div",{children:"對局讀取失敗。"}):f.jsxs("div",{children:[f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-24 pb-48",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-row items-center gap-x-4 text-white",children:[f.jsxs("div",{className:"p-2 pl-4 pr-10 flex items-center gap-x-8 transition-[width] text-[4rem]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[f.jsxs("div",{className:"text-[0.5em] relative",children:[f.jsx("div",{className:"text-[0.5em]",children:f.jsxs("button",{type:"button",onClick:ph,children:[i.name," ",f.jsx("i",{className:"bi bi-pencil"})]})}),f.jsxs("div",{className:"flex gap-x-8 items-center",children:[f.jsx("div",{children:f.jsx(fs,{roundCount:s.roundCount,max:8})}),f.jsxs("div",{className:"flex flex-col justify-around",children:[f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2"})}),f.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.extendedRoundCount??0})]}),f.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[f.jsx("div",{className:"flex-1",children:f.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2"})}),f.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:s.cumulatedThousands??0})]})]})]}),i.hideHeader&&f.jsx("div",{className:"absolute inset-0 opacity-100 bg-red-800 text-center",children:"隱藏中"})]}),f.jsxs("div",{className:"flex items-center gap-x-2",children:[a.map((M,fe)=>f.jsx("button",{"data-index":fe,onClick:ee,className:"hover:opacity-80",children:f.jsx(ko,{className:"w-12 animate-[fadeInFromLeft_0.5s_ease-in-out]",children:M},M)})),f.jsx(Re,{type:"button",color:a.length===0?"danger":"secondary",className:`${a.length===0&&"animate-bounce"}`,"data-index":"-1",onClick:ee,children:"+懸賞"})]})]}),f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"shrink-0",children:(e==null?void 0:e.matchId)!==t&&f.jsx(Re,{color:"success",type:"button",className:"animate-pulse",onClick:W,children:"開始OBS"})})]}),f.jsxs("div",{className:"flex justify-between gap-x-8 ",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Yye,{tabs:bA,defaultValue:bA[0].value,onChangeValue:A})}),f.jsxs("div",{className:"text-right space-x-4",children:[i.activeResultDetail&&f.jsxs(Re,{color:"secondary",type:"button",onClick:tv,children:["結束播放中的和牌詳情",f.jsx("br",{}),f.jsx("span",{className:"text-xs",children:"(或最多20秒後自動結束)"})]}),s.nextRoundType!==bt.Unknown&&s.nextRoundType!==bt.End&&f.jsxs(Re,{color:"success",type:"button",className:"animate-pulse",onClick:B,children:["進入",f.jsx(fs,{roundCount:s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0})]}),f.jsx(Re,{color:"secondary",type:"button",onClick:ke,children:"流局"})]})]}),w==="listView-old"&&f.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(M=>f.jsxs("div",{className:"flex gap-x-2 items-center",children:[f.jsx("div",{className:"flex-1 text-[2.5rem]",children:f.jsx(Ha,{player:i.players[M],playerIndex:M,score:s.playerResults[M].afterScore,scoreChanges:s.playerResults[M].scoreChanges,isEast:Jn(M,s.roundCount),isRiichi:s.playerResults[M].isRiichi,waitingTiles:s.playerResults[M].waitingTiles,onClickWaitingTiles:Q,isYellowCarded:s.playerResults[M].isYellowCarded,isRedCarded:s.playerResults[M].isRedCarded,showPointAndRanking:i.showPoints})}),f.jsx("div",{children:f.jsx("button",{type:"button",className:`${s.playerResults[M].isRiichi?"bg-orange-600 text-white":"bg-white text-orange-600 opacity-30"} h-16 w-16 border-2 border-orange-600  rounded-full text-lg`,onClick:Zt,"data-player-index":M,children:s.playerResults[M].isRiichi?"已立直":"立直?"})}),f.jsx("div",{className:"pl-6",children:f.jsx(Re,{color:"danger",type:"button",onClick:Ze,"data-player-index":M,children:"和了"})})]}))}),w==="listView-new"&&f.jsx(qye,{players:i.players,currentRound:s,onAction:$t}),w==="gridView"&&f.jsx(Kye,{players:i.players,currentRound:s,onAction:$t}),f.jsx("div",{children:f.jsxs(Re,{size:"small",color:"secondary",onClick:V,children:[f.jsx("i",{className:"bi bi-people"})," 修改玩家"]})})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h4",{className:"text-3xl",children:[f.jsx("i",{className:"bi bi-bar-chart-steps"})," 紀錄"," ",f.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[f.jsx("th",{className:"whitespace-nowrap px-16",children:"局數"}),f.jsx("th",{children:i.players[0].nickname}),f.jsx("th",{children:i.players[1].nickname}),f.jsx("th",{children:i.players[2].nickname}),f.jsx("th",{children:i.players[3].nickname}),f.jsx("th",{className:"text-right",children:"操作"})]})}),f.jsxs("tbody",{children:[v[0]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center"}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:v[0].playerResults[0].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:v[0].playerResults[1].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:v[0].playerResults[2].beforeScore})}),f.jsx("td",{className:"text-center",children:f.jsx(Mt,{value:v[0].playerResults[3].beforeScore})}),f.jsx("td",{})]}),v.map(M=>M.resultType===Ve.Hotfix?f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16",children:"手動調整"}),f.jsx("td",{className:"text-center",children:M.playerResults[0].afterScore}),f.jsx("td",{className:"text-center",children:M.playerResults[1].afterScore}),f.jsx("td",{className:"text-center",children:M.playerResults[2].afterScore}),f.jsx("td",{className:"text-center",children:M.playerResults[3].afterScore}),f.jsx("td",{})]},M.id):f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap",children:f.jsx(fs,{roundCount:M.roundCount,extendedRoundCount:M.extendedRoundCount,max:8,className:"px-4"})}),f.jsxs("td",{className:"text-center",children:[f.jsx(Mv,{value:M.playerResults[0].afterScore-M.playerResults[0].beforeScore}),f.jsx(Fv,{match:i,matchRound:M,playerIndex:"0"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Mv,{value:M.playerResults[1].afterScore-M.playerResults[1].beforeScore}),f.jsx(Fv,{match:i,matchRound:M,playerIndex:"1"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Mv,{value:M.playerResults[2].afterScore-M.playerResults[2].beforeScore}),f.jsx(Fv,{match:i,matchRound:M,playerIndex:"2"})]}),f.jsxs("td",{className:"text-center",children:[f.jsx(Mv,{value:M.playerResults[3].afterScore-M.playerResults[3].beforeScore}),f.jsx(Fv,{match:i,matchRound:M,playerIndex:"3"})]}),f.jsxs("td",{className:"text-right space-x-2",children:[(M.resultType===Ve.Ron||M.resultType===Ve.SelfDrawn)&&f.jsxs(Re,{color:M.hasBroadcasted?"secondary":"success",type:"button",variant:"text",className:M.hasBroadcasted?"opacity-50":"",onClick:ev,"data-match-round-id":M.id,children:[f.jsx("i",{className:"bi bi-camera-reels"})," ",M.hasBroadcasted?"已播放過":"播放和牌詳情"]}),M.resultType!==Ve.Unknown&&f.jsxs(Re,{variant:"text",color:"danger","data-matchRoundId":M.id,onClick:rt,children:[f.jsx("i",{className:"bi bi-pencil"})," 修改"]})]})]},M.id)),v[v.length-1]&&f.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[f.jsx("td",{className:"text-center whitespace-nowrap px-16",children:f.jsxs(Re,{onClick:vt,size:"small",color:"secondary",children:[f.jsx("i",{className:"bi bi-pencil"})," 手動調整分數"]})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:v[v.length-1].playerResults[0].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:v[v.length-1].playerResults[1].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:v[v.length-1].playerResults[2].afterScore})}),f.jsx("td",{className:"text-center font-bold text-lg",children:f.jsx(Mt,{value:v[v.length-1].playerResults[3].afterScore})}),f.jsx("td",{})]})]})]})]})]}),f.jsx(Yn,{open:typeof S<"u",title:"選擇懸賞",onClose:q,children:f.jsx(IF,{hideRedTiles:!0,onSubmit:xe,onRemove:Ee,canRemove:typeof S<"u"&&S>0,defaultValue:typeof S<"u"?[a[S]]:void 0})}),f.jsx(Yn,{open:!!re,title:"選擇待牌",onClose:pe,children:f.jsx(IF,{hideRedTiles:!0,onSubmit:nt,onRemove:Wt,defaultValue:re==null?void 0:re.tiles,multiple:!0,canRemove:!0})}),f.jsx(tge,{round:s.roundCount,activePlayerIndex:(Dr==null?void 0:Dr.index)??"0",targetPlayerIndex:"-1",open:!!Dr,onClose:PS,onSubmit:hh,defaultValue:s.playerResults[(Dr==null?void 0:Dr.index)??"0"].detail}),f.jsx(Yn,{title:"和了",open:C,onClose:()=>I(!1),children:f.jsx(LG,{match:i,currentMatchRound:s,onSubmit:en,...T})}),f.jsx(Yn,{title:"流局",open:N,onClose:()=>j(!1),children:f.jsx(BG,{match:i,currentMatchRound:s,onSubmit:Vn,...T})}),f.jsx(Yn,{title:"修改玩家",open:L,onClose:()=>U(!1),children:f.jsx(cwe,{defaultPlayers:i.players,onSubmit:R})}),f.jsx(Yn,{title:"手動調整分數",open:F,onClose:()=>z(!1),children:f.jsx(xge,{match:i,currentMatchRound:s,onSubmit:$,...T})}),f.jsx(Yn,{title:"修改局數",open:ae,onClose:()=>te(!1),children:f.jsx(_ge,{match:i,matchRound:be.matchRound,onSubmit:Vt})}),f.jsxs("div",{className:"fixed bottom-0 left-0 right-0 pl-6 pr-6 pb-6 z-50 flex justify-between items-end bg-gradient-to-b from-transparent to-[#00000080]",children:[f.jsx("div",{className:"text-left"}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-right mb-4",children:[s.nextRoundType!==bt.Unknown&&s.nextRoundType!==bt.End&&f.jsxs("button",{className:"text-6xl p-4 text-green-800 bg-green-400 border-4 border-green-600 rounded-lg",onClick:B,children:["進入",f.jsx(fs,{roundCount:s.nextRoundType===bt.NextRound||s.nextRoundType===bt.NextRoundAndExtended?s.roundCount+1:s.roundCount,extendedRoundCount:s.nextRoundType===bt.Extended||s.nextRoundType===bt.NextRoundAndExtended?s.extendedRoundCount+1:0})," ",f.jsx("i",{className:"bi bi-play-fill"})]}),s.nextRoundType===bt.End&&f.jsx("a",{href:`/match/${t}/export`,target:"_blank",children:f.jsxs("button",{className:"text-6xl p-4 text-yellow-800 bg-yellow-400 border-4 border-yellow-600 rounded-lg",children:["上傳成績",f.jsx("i",{className:"bi bi-cloud-upload"})]})})]}),f.jsxs("div",{className:"flex gap-x-6 items-end justify-end",children:[!i.hideHeader&&f.jsxs("button",{onClick:bJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[f.jsx("i",{className:"bi bi-eye"})," 標題：顯示中"]}),i.hideHeader&&f.jsxs("button",{onClick:xJ,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-600 border border-red-500 leading-6 text-white",children:[f.jsx("i",{className:"bi bi-eye-slash"})," 標題：隱藏中"]}),!i.showPoints&&f.jsxs("button",{onClick:IS,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-neutral-200 border border-neutral-300 leading-6 text-neutral-600",children:[f.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),i.showPoints&&f.jsxs("button",{onClick:rv,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-green-300 border border-green-300 leading-6 text-green-800",children:[f.jsx("i",{className:"bi bi-list-ol"})," 切換播放馬點＆名次"]}),x.map(M=>f.jsx("button",{onClick:ev,"data-match-round-id":M.id,className:"relative rounded-full py-2 px-4 shadow shadow-neutral-700 text-center bg-red-200 border border-red-300 leading-6 text-red-800 animate-bounce",children:f.jsxs("p",{children:[f.jsx("i",{className:"bi bi-trophy"})," ",M.roundCount,".",M.extendedRoundCount," 和牌動畫：待播放"]})}))]})]})]})]})}function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ye.apply(this,arguments)}function js(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var vP=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t),Fu=255,ba=100,lp=t=>{var{r:e,g:r,b:n,a:i}=t,o=Math.max(e,r,n),s=o-Math.min(e,r,n),a=s?o===e?(r-n)/s:o===r?2+(n-e)/s:4+(e-r)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*ba:0,v:o/Fu*ba,a:i}},wH=t=>{var{h:e,s:r,l:n,a:i}=SH(t);return"hsla("+e+", "+r+"%, "+n+"%, "+i+")"},SH=t=>{var{h:e,s:r,v:n,a:i}=t,o=(200-r)*n/ba;return{h:e,s:o>0&&o<200?r*n/ba/(o<=ba?o:200-o)*ba:0,l:o/2,a:i}},EH=t=>{var{r:e,g:r,b:n}=t,i=e<<16|r<<8|n;return"#"+(o=>new Array(7-o.length).join("0")+o)(i.toString(16))},uwe=t=>{var{r:e,g:r,b:n,a:i}=t,o=typeof i=="number"&&(i*255|256).toString(16).slice(1);return""+EH({r:e,g:r,b:n,a:i})+(o||"")},$m=t=>lp(fwe(t)),fwe=t=>{var e=t.replace("#","");/^#?/.test(t)&&e.length===3&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var r=new RegExp("[A-Za-z0-9]{2}","g"),[n,i,o=0,s]=t.match(r).map(a=>parseInt(a,16));return{r:n,g:i,b:o,a:(s??255)/Fu}},S1=t=>{var{h:e,s:r,v:n,a:i}=t,o=e/60,s=r/ba,a=n/ba,l=Math.floor(o)%6,c=o-Math.floor(o),u=Fu*a*(1-s),d=Fu*a*(1-s*c),h=Fu*a*(1-s*(1-c));a*=Fu;var p={};switch(l){case 0:p.r=a,p.g=h,p.b=u;break;case 1:p.r=d,p.g=a,p.b=u;break;case 2:p.r=u,p.g=a,p.b=h;break;case 3:p.r=u,p.g=d,p.b=a;break;case 4:p.r=h,p.g=u,p.b=a;break;case 5:p.r=a,p.g=u,p.b=d;break}return p.r=Math.round(p.r),p.g=Math.round(p.g),p.b=Math.round(p.b),ye({},p,{a:i})},dwe=t=>{var{r:e,g:r,b:n,a:i}=S1(t);return"rgba("+e+", "+r+", "+n+", "+i+")"},hwe=t=>{var{r:e,g:r,b:n}=t;return{r:e,g:r,b:n}},pwe=t=>{var{h:e,s:r,l:n}=t;return{h:e,s:r,l:n}},bP=t=>EH(S1(t)),mwe=t=>{var{h:e,s:r,v:n}=t;return{h:e,s:r,v:n}},Lu=t=>{var e,r,n,i,o,s,a,l;return typeof t=="string"&&vP(t)?(s=$m(t),a=t):typeof t!="string"&&(s=t),s&&(n=mwe(s),o=SH(s),i=S1(s),l=uwe(i),a=bP(s),r=pwe(o),e=hwe(i)),{rgb:e,hsl:r,hsv:n,rgba:i,hsla:o,hsva:s,hex:a,hexa:l}};function NL(t){var e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useCallback((r,n)=>e.current&&e.current(r,n),[])}var Fp=t=>"touches"in t,kL=t=>{!Fp(t)&&t.preventDefault&&t.preventDefault()},OL=function(e,r,n){return r===void 0&&(r=0),n===void 0&&(n=1),e>n?n:e<r?r:e},RL=(t,e)=>{var r=t.getBoundingClientRect(),n=Fp(e)?e.touches[0]:e;return{left:OL((n.pageX-(r.left+window.pageXOffset))/r.width),top:OL((n.pageY-(r.top+window.pageYOffset))/r.height),width:r.width,height:r.height,x:n.pageX-(r.left+window.pageXOffset),y:n.pageY-(r.top+window.pageYOffset)}},ywe=["prefixCls","className","onMove","onDown"],AH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-interactive",className:n,onMove:i,onDown:o}=t,s=js(t,ywe),a=E.useRef(null),l=E.useRef(!1),[c,u]=E.useState(!1),d=NL(i),h=NL(o),p=v=>l.current&&!Fp(v)?!1:(l.current=Fp(v),!0),m=E.useCallback(v=>{kL(v);var x=Fp(v)?v.touches.length>0:v.buttons>0;x&&a.current?d&&d(RL(a.current,v),v):u(!1)},[d]),y=E.useCallback(()=>u(!1),[]),g=E.useCallback(v=>{var x=v?window.addEventListener:window.removeEventListener;x(l.current?"touchmove":"mousemove",m),x(l.current?"touchend":"mouseup",y)},[]);E.useEffect(()=>(g(c),()=>{c&&g(!1)}),[c,g]);var b=E.useCallback(v=>{kL(v.nativeEvent),p(v.nativeEvent)&&(h&&h(RL(a.current,v.nativeEvent),v.nativeEvent),u(!0))},[h]);return f.jsx("div",ye({},s,{className:[r,n||""].filter(Boolean).join(" "),style:ye({},s.style,{touchAction:"none"}),ref:a,tabIndex:0,onMouseDown:b,onTouchStart:b}))});AH.displayName="Interactive";const CH=AH;var gwe=t=>{var{className:e,color:r,left:n,top:i,prefixCls:o}=t,s={position:"absolute",top:i,left:n},a={"--saturation-pointer-box-shadow":"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",width:6,height:6,transform:"translate(-3px, -3px)",boxShadow:"var(--saturation-pointer-box-shadow)",borderRadius:"50%",backgroundColor:r};return E.useMemo(()=>f.jsx("div",{className:o+"-pointer "+(e||""),style:s,children:f.jsx("div",{className:o+"-fill",style:a})}),[i,n,r,e,o])},vwe=["prefixCls","radius","pointer","className","hue","style","hsva","onChange"],TH=k.forwardRef((t,e)=>{var r,{prefixCls:n="w-color-saturation",radius:i=0,pointer:o,className:s,hue:a=0,style:l,hsva:c,onChange:u}=t,d=js(t,vwe),h=ye({width:200,height:200,borderRadius:i},l,{position:"relative"}),p=(y,g)=>{u&&c&&u({h:c.h,s:y.left*100,v:(1-y.top)*100,a:c.a})},m=E.useMemo(()=>{if(!c)return null;var y={top:100-c.v+"%",left:c.s+"%",color:wH(c)};return o&&typeof o=="function"?o(ye({prefixCls:n},y)):f.jsx(gwe,ye({prefixCls:n},y))},[c,o,n]);return f.jsx(CH,ye({className:[n,s||""].filter(Boolean).join(" ")},d,{style:ye({position:"absolute",inset:0,cursor:"crosshair",backgroundImage:"linear-gradient(0deg, #000, transparent), linear-gradient(90deg, #fff, hsl("+((r=c==null?void 0:c.h)!=null?r:a)+", 100%, 50%))"},h),ref:e,onMove:p,onDown:p,children:m}))});TH.displayName="Saturation";const bwe=TH;var xwe=["className","prefixCls","left","top","style","fillProps"],_we=t=>{var{className:e,prefixCls:r,left:n,top:i,style:o,fillProps:s}=t,a=js(t,xwe),l=ye({},o,{position:"absolute",left:n,top:i}),c=ye({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},s==null?void 0:s.style,{transform:n?"translate(-9px, -1px)":"translate(-1px, -9px)"});return f.jsx("div",ye({className:r+"-pointer "+(e||""),style:l},a,{children:f.jsx("div",ye({className:r+"-fill"},s,{style:c}))}))},wwe=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],Swe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==",PH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-alpha",className:n,hsva:i,background:o,bgProps:s={},innerProps:a={},pointerProps:l={},radius:c=0,width:u,height:d=16,direction:h="horizontal",style:p,onChange:m,pointer:y}=t,g=js(t,wwe),b=A=>{m&&m(ye({},i,{a:h==="horizontal"?A.left:A.top}),A)},v=wH(Object.assign({},i,{a:1})),x="linear-gradient(to "+(h==="horizontal"?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+v+" 100%)",S={};h==="horizontal"?S.left=i.a*100+"%":S.top=i.a*100+"%";var _=ye({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:c,background:"url("+Swe+") left center",backgroundColor:"var(--alpha-background-color)"},p,{position:"relative"},{width:u,height:d}),w=y&&typeof y=="function"?y(ye({prefixCls:r},l,S)):f.jsx(_we,ye({},l,{prefixCls:r},S));return f.jsxs("div",ye({},g,{className:[r,r+"-"+h,n||""].filter(Boolean).join(" "),style:_,ref:e,children:[f.jsx("div",ye({},s,{style:ye({inset:0,position:"absolute",background:o||x,borderRadius:c},s.style)})),f.jsx(CH,ye({},a,{style:ye({},a.style,{inset:0,zIndex:1,position:"absolute"}),onMove:b,onDown:b,children:w}))]}))});PH.displayName="Alpha";const xP=PH;var Ewe=["prefixCls","placement","label","value","className","style","labelStyle","inputStyle","onChange","onBlur"],Awe=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t),Cwe=t=>Number(String(t).replace(/%/g,"")),IH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input",placement:n="bottom",label:i,value:o,className:s,style:a,labelStyle:l,inputStyle:c,onChange:u,onBlur:d}=t,h=js(t,Ewe),[p,m]=E.useState(o),y=E.useRef(!1);E.useEffect(()=>{t.value!==p&&(y.current||m(t.value))},[t.value]);function g(_,w){var A=(w||_.target.value).trim().replace(/^#/,"");Awe(A)&&u&&u(_,A);var C=Cwe(A);isNaN(C)||u&&u(_,C),m(A)}function b(_){y.current=!1,m(t.value),d&&d(_)}var v={};n==="bottom"&&(v.flexDirection="column"),n==="top"&&(v.flexDirection="column-reverse"),n==="left"&&(v.flexDirection="row-reverse");var x=ye({"--editable-input-label-color":"rgb(153, 153, 153)","--editable-input-box-shadow":"rgb(204 204 204) 0px 0px 0px 1px inset","--editable-input-color":"#666",position:"relative",alignItems:"center",display:"flex",fontSize:11},v,a),S=ye({width:"100%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,fontSize:11,background:"transparent",boxSizing:"border-box",border:"none",color:"var(--editable-input-color)",boxShadow:"var(--editable-input-box-shadow)"},c);return f.jsxs("div",{className:[r,s||""].filter(Boolean).join(" "),style:x,children:[f.jsx("input",ye({ref:e,value:p,onChange:g,onBlur:b,autoComplete:"off",onFocus:()=>y.current=!0},h,{style:S})),i&&f.jsx("span",{style:ye({color:"var(--editable-input-label-color)",textTransform:"capitalize"},l),children:i})]})});IH.displayName="EditableInput";const cp=IH;var Twe=["prefixCls","hsva","placement","rProps","gProps","bProps","aProps","className","style","onChange"],NH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-editable-input-rgba",hsva:n,placement:i="bottom",rProps:o={},gProps:s={},bProps:a={},aProps:l={},className:c,style:u,onChange:d}=t,h=js(t,Twe),p=n?S1(n):{};function m(g){var b=Number(g.target.value);b&&b>255&&(g.target.value="255"),b&&b<0&&(g.target.value="0")}var y=(g,b,v)=>{typeof g=="number"&&(b==="a"&&(g<0&&(g=0),g>100&&(g=100),d&&d(Lu(lp(ye({},p,{a:g/100}))))),g>255&&(g=255,v.target.value="255"),g<0&&(g=0,v.target.value="0"),b==="r"&&d&&d(Lu(lp(ye({},p,{r:g})))),b==="g"&&d&&d(Lu(lp(ye({},p,{g})))),b==="b"&&d&&d(Lu(lp(ye({},p,{b:g})))))};return f.jsxs("div",ye({ref:e,className:[r,c||""].filter(Boolean).join(" ")},h,{style:ye({fontSize:11,display:"flex"},u),children:[f.jsx(cp,ye({label:"R",value:p.r||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"r",g)},o,{style:ye({},o.style)})),f.jsx(cp,ye({label:"G",value:p.g||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"g",g)},s,{style:ye({marginLeft:5},o.style)})),f.jsx(cp,ye({label:"B",value:p.b||0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"b",g)},a,{style:ye({marginLeft:5},a.style)})),l&&f.jsx(cp,ye({label:"A",value:p.a?parseInt(String(p.a*100),10):0,onBlur:m,placement:i,onChange:(g,b)=>y(b,"a",g)},l,{style:ye({marginLeft:5},l.style)}))]}))});NH.displayName="EditableInputRGBA";const Pwe=NH;var Iwe=["prefixCls","className","hue","onChange","direction"],kH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-hue",className:n,hue:i=0,onChange:o,direction:s="horizontal"}=t,a=js(t,Iwe);return f.jsx(xP,ye({ref:e,className:r+" "+(n||"")},a,{direction:s,background:"linear-gradient(to "+(s==="horizontal"?"right":"bottom")+", rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100%)",hsva:{h:i,s:100,v:100,a:i/360},onChange:(l,c)=>{o&&o({h:s==="horizontal"?360*c.left:360*c.top})}}))});kH.displayName="Hue";const Nwe=kH;var kwe=["prefixCls","className","color","colors","style","rectProps","onChange","addonAfter","addonBefore","rectRender"],OH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-swatch",className:n,color:i,colors:o=[],style:s,rectProps:a={},onChange:l,addonAfter:c,addonBefore:u,rectRender:d}=t,h=js(t,kwe),p=ye({"--swatch-background-color":"rgb(144, 19, 254)",background:"var(--swatch-background-color)",height:15,width:15,marginRight:5,marginBottom:5,cursor:"pointer",position:"relative",outline:"none",borderRadius:2},a.style),m=(y,g)=>{l&&l($m(y),Lu($m(y)),g)};return f.jsxs("div",ye({ref:e},h,{className:[r,n||""].filter(Boolean).join(" "),style:ye({display:"flex",flexWrap:"wrap",position:"relative"},s),children:[u&&k.isValidElement(u)&&u,o&&Array.isArray(o)&&o.map((y,g)=>{var b="",v="";typeof y=="string"&&(b=y,v=y),typeof y=="object"&&y.color&&(b=y.title||y.color,v=y.color);var x=i&&i.toLocaleLowerCase()===v.toLocaleLowerCase(),S=d&&d({key:g,title:b,color:v,checked:!!x,style:ye({},p,{background:v}),onClick:w=>m(v,w)});if(S)return S;var _=a.children&&k.isValidElement(a.children)?k.cloneElement(a.children,{color:v,checked:x}):null;return f.jsx("div",ye({tabIndex:0,title:b,onClick:w=>m(v,w)},a,{children:_,style:ye({},p,{background:v})}),g)}),c&&k.isValidElement(c)&&c]}))});OH.displayName="Swatch";const Owe=OH;var Rwe=["prefixCls","className","onChange","width","presetColors","color","editableDisable","disableAlpha","style"],jwe=["#D0021B","#F5A623","#f8e61b","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"],jL=t=>f.jsx("div",{style:{boxShadow:"rgb(0 0 0 / 60%) 0px 0px 2px",width:4,top:1,bottom:1,left:t.left,borderRadius:1,position:"absolute",backgroundColor:"#fff"}}),RH=k.forwardRef((t,e)=>{var{prefixCls:r="w-color-sketch",className:n,onChange:i,width:o=218,presetColors:s=jwe,color:a,editableDisable:l=!0,disableAlpha:c=!1,style:u}=t,d=js(t,Rwe),[h,p]=E.useState({h:209,s:36,v:90,a:1});E.useEffect(()=>{typeof a=="string"&&vP(a)&&p($m(a)),typeof a=="object"&&p(a)},[a]);var m=w=>{p(w),i&&i(Lu(w))},y=(w,A)=>{typeof w=="string"&&vP(w)&&/(3|6)/.test(String(w.length))&&m($m(w))},g=w=>m(ye({},h,{a:w.a})),b=w=>m(ye({},h,w,{a:h.a})),v=ye({"--sketch-background":"rgb(255, 255, 255)","--sketch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px, rgb(0 0 0 / 15%) 0px 8px 16px","--sketch-swatch-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset","--sketch-alpha-box-shadow":"rgb(0 0 0 / 15%) 0px 0px 0px 1px inset, rgb(0 0 0 / 25%) 0px 0px 4px inset","--sketch-swatch-border-top":"1px solid rgb(238, 238, 238)",background:"var(--sketch-background)",borderRadius:4,boxShadow:"var(--sketch-box-shadow)",width:o},u),x={borderRadius:2,background:dwe(h),boxShadow:"var(--sketch-alpha-box-shadow)"},S={borderTop:"var(--sketch-swatch-border-top)",paddingTop:10,paddingLeft:10},_={marginRight:10,marginBottom:10,borderRadius:3,boxShadow:"var(--sketch-swatch-box-shadow)"};return f.jsxs("div",ye({},d,{className:r+" "+(n||""),ref:e,style:v,children:[f.jsxs("div",{style:{padding:"10px 10px 8px"},children:[f.jsx(bwe,{hsva:h,style:{width:"auto",height:150},onChange:b}),f.jsxs("div",{style:{display:"flex",marginTop:4},children:[f.jsxs("div",{style:{flex:1},children:[f.jsx(Nwe,{width:"auto",height:10,hue:h.h,pointer:jL,innerProps:{style:{marginLeft:1,marginRight:5}},onChange:w=>m(ye({},h,w))}),!c&&f.jsx(xP,{width:"auto",height:10,hsva:h,pointer:jL,style:{marginTop:4},innerProps:{style:{marginLeft:1,marginRight:5}},onChange:g})]}),!c&&f.jsx(xP,{width:24,height:24,hsva:h,radius:2,style:{marginLeft:4},bgProps:{style:{background:"transparent"}},innerProps:{style:x},pointer:()=>f.jsx(E.Fragment,{})})]})]}),l&&f.jsxs("div",{style:{display:"flex",margin:"0 10px 3px 10px"},children:[f.jsx(cp,{label:"Hex",value:bP(h).replace(/^#/,"").toLocaleUpperCase(),onChange:(w,A)=>y(A),style:{minWidth:58}}),f.jsx(Pwe,{hsva:h,style:{marginLeft:6},aProps:c?!1:{},onChange:w=>m(w.hsva)})]}),s&&s.length>0&&f.jsx(Owe,{style:S,colors:s,color:bP(h),onChange:w=>m(w),rectProps:{style:_}})]}))});RH.displayName="Sketch";const $we=RH;function jH({value:t,onChange:e,onBlur:r}){const n=E.useCallback(i=>{e==null||e(i.hex)},[e]);return f.jsx($we,{disableAlpha:!0,onChange:n,onBlur:r,color:t})}const Dwe=async()=>new Promise(t=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.addEventListener("change",r=>{var i;const n=(i=r.target.files)==null?void 0:i[0];n&&t(n)}),e.click()}),$L=({children:t,helperText:e,onChangeFile:r=async()=>{},...n})=>{const i=E.useMemo(()=>t||f.jsxs("div",{className:"space-y-2 text-center text-xs",children:[f.jsx("p",{children:f.jsx("i",{className:"bi bi-upload"})}),f.jsx("p",{children:"拖拉檔案上傳 ／ 點擊上傳"}),f.jsx("p",{children:e})]}),[t,e]),[{loading:o},s]=Kw(r),a=E.useCallback(()=>{Dwe().then(s)},[s]),l=E.useMemo(()=>({onFiles:u=>{const d=u.find(h=>!!h);d&&s(d)}}),[s]),[c]=Fye(l);return f.jsxs("div",{className:"relative",children:[f.jsx("div",{...n,className:"bg-neutral-50 border border-neutral-200 border-dashed p-1 cursor-pointer hover:border-neutral-400 text-neutral-400",onClick:a,...c,children:i}),o&&f.jsx("div",{className:"absolute z-10 cursor-not-allowed inset-0 bg-neutral-300 text-white flex gap-x-1 items-center justify-center",children:f.jsx(TO,{})})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H="firebasestorage.googleapis.com",DH="storageBucket",Mwe=2*60*1e3,Fwe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Dc{constructor(e,r,n=0){super(xA(e),`Firebase Storage: ${r} (${xA(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function xA(t){return"storage/"+t}function lR(){const t="An unknown error occurred, please check the error payload for server response.";return new Qt(Kt.UNKNOWN,t)}function Lwe(t){return new Qt(Kt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Bwe(t){return new Qt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Uwe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qt(Kt.UNAUTHENTICATED,t)}function Vwe(){return new Qt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Wwe(t){return new Qt(Kt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function zwe(){return new Qt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gwe(){return new Qt(Kt.CANCELED,"User canceled the upload/download.")}function qwe(t){return new Qt(Kt.INVALID_URL,"Invalid URL '"+t+"'.")}function Hwe(t){return new Qt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Kwe(){return new Qt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DH+"' property when initializing the app?")}function Ywe(){return new Qt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qwe(){return new Qt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Xwe(t){return new Qt(Kt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _P(t){return new Qt(Kt.INVALID_ARGUMENT,t)}function MH(){return new Qt(Kt.APP_DELETED,"The Firebase app was deleted.")}function Jwe(t){return new Qt(Kt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lp(t,e){return new Qt(Kt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function jh(t){throw new Qt(Kt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ei.makeFromUrl(e,r)}catch{return new ei(e,"")}if(n.path==="")return n;throw Hwe(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),m={bucket:1,path:3},y=r===$H?"(?:storage.googleapis.com|storage.cloud.google.com)":r,g="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${g}`,"i"),x=[{regex:a,indices:l,postModify:o},{regex:p,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<x.length;S++){const _=x[S],w=_.regex.exec(e);if(w){const A=w[_.indices.bucket];let C=w[_.indices.path];C||(C=""),n=new ei(A,C),_.postModify(n);break}}if(n==null)throw qwe(e);return n}}class Zwe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1e(t,e,r){let n=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,t(p,l())},g)}function h(){o&&clearTimeout(o)}function p(g,...b){if(c){h();return}if(g){h(),u.call(null,g,...b);return}if(l()||s){h(),u.call(null,g,...b);return}n<64&&(n*=2);let x;a===1?(a=2,x=0):x=(n+Math.random())*1e3,d(x)}let m=!1;function y(g){m||(m=!0,h(),!c&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,y(!0)},r),y}function t1e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1e(t){return t!==void 0}function n1e(t){return typeof t=="object"&&!Array.isArray(t)}function cR(t){return typeof t=="string"||t instanceof String}function DL(t){return uR()&&t instanceof Blob}function uR(){return typeof Blob<"u"&&!Wte()}function ML(t,e,r,n){if(n<e)throw _P(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw _P(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function FH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(dc||(dc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1e(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1e{constructor(e,r,n,i,o,s,a,l,c,u,d,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Lv(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===dc.NO_ERROR,l=o.getStatus();if(!a||i1e(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===dc.ABORT;n(!1,new Lv(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Lv(c,o))})},r=(n,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());r1e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=lR();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?MH():Gwe();s(l)}else{const l=zwe();s(l)}};this.canceled_?r(!1,new Lv(!1,null,!0)):this.backoffId_=e1e(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t1e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function s1e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function a1e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l1e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function c1e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u1e(t,e,r,n,i,o,s=!0){const a=FH(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return l1e(c,e),s1e(c,r),a1e(c,o),c1e(c,n),new o1e(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function d1e(...t){const e=f1e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(uR())return new Blob(t);throw new Qt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function h1e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1e(t){if(typeof atob>"u")throw Xwe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _A{constructor(e,r){this.data=e,this.contentType=r||null}}function m1e(t,e){switch(t){case Ro.RAW:return new _A(LH(e));case Ro.BASE64:case Ro.BASE64URL:return new _A(BH(t,e));case Ro.DATA_URL:return new _A(g1e(e),v1e(e))}throw lR()}function LH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=n,s=t.charCodeAt(++r);n=65536|(o&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function y1e(t){let e;try{e=decodeURIComponent(t)}catch{throw Lp(Ro.DATA_URL,"Malformed data URL.")}return LH(e)}function BH(t,e){switch(t){case Ro.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Lp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ro.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Lp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=p1e(e)}catch(i){throw i.message.includes("polyfill")?i:Lp(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class UH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Lp(Ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=b1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function g1e(t){const e=new UH(t);return e.base64?BH(Ro.BASE64,e.rest):y1e(e.rest)}function v1e(t){return new UH(t).contentType}function b1e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,r){let n=0,i="";DL(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(DL(this.data_)){const n=this.data_,i=h1e(n,e,r);return i===null?null:new ra(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new ra(n,!0)}}static getBlob(...e){if(uR()){const r=e.map(n=>n instanceof ra?n.data_:n);return new ra(d1e.apply(null,r))}else{const r=e.map(s=>cR(s)?m1e(Ro.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let o=0;return r.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ra(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t){let e;try{e=JSON.parse(t)}catch{return null}return n1e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _1e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function WH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1e(t,e){return e}class vn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||w1e}}let Bv=null;function S1e(t){return!cR(t)||t.length<2?t:WH(t)}function zH(){if(Bv)return Bv;const t=[];t.push(new vn("bucket")),t.push(new vn("generation")),t.push(new vn("metageneration")),t.push(new vn("name","fullPath",!0));function e(o,s){return S1e(s)}const r=new vn("name");r.xform=e,t.push(r);function n(o,s){return s!==void 0?Number(s):s}const i=new vn("size");return i.xform=n,t.push(i),t.push(new vn("timeCreated")),t.push(new vn("updated")),t.push(new vn("md5Hash",null,!0)),t.push(new vn("cacheControl",null,!0)),t.push(new vn("contentDisposition",null,!0)),t.push(new vn("contentEncoding",null,!0)),t.push(new vn("contentLanguage",null,!0)),t.push(new vn("contentType",null,!0)),t.push(new vn("metadata","customMetadata",!0)),Bv=t,Bv}function E1e(t,e){function r(){const n=t.bucket,i=t.fullPath,o=new ei(n,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function A1e(t,e,r){const n={};n.type="file";const i=r.length;for(let o=0;o<i;o++){const s=r[o];n[s.local]=s.xform(n,e[s.server])}return E1e(n,t),n}function GH(t,e,r){const n=VH(e);return n===null?null:A1e(t,n,r)}function C1e(t,e,r,n){const i=VH(e);if(i===null||!cR(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+s(u)+"/o/"+s(d),p=fR(h,r,n),m=FH({alt:"media",token:c});return p+m})[0]}function T1e(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const o=e[i];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class qH{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t){if(!t)throw lR()}function P1e(t,e){function r(n,i){const o=GH(t,i,e);return HH(o!==null),o}return r}function I1e(t,e){function r(n,i){const o=GH(t,i,e);return HH(o!==null),C1e(o,i,t.host,t._protocol)}return r}function KH(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=Vwe():i=Uwe():r.getStatus()===402?i=Bwe(t.bucket):r.getStatus()===403?i=Wwe(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function N1e(t){const e=KH(t);function r(n,i){let o=e(n,i);return n.getStatus()===404&&(o=Lwe(t.path)),o.serverResponse=i.serverResponse,o}return r}function k1e(t,e,r){const n=e.fullServerUrl(),i=fR(n,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new qH(i,o,I1e(t,r),s);return a.errorHandler=N1e(e),a}function O1e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function R1e(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=O1e(null,e)),n}function j1e(t,e,r,n,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let S=0;S<2;S++)x=x+Math.random().toString().slice(2);return x}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const c=R1e(e,n,i),u=T1e(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=ra.getBlob(d,n,h);if(p===null)throw Ywe();const m={name:c.fullPath},y=fR(o,t.host,t._protocol),g="POST",b=t.maxUploadRetryTime,v=new qH(y,g,P1e(t,r),b);return v.urlParams=m,v.headers=s,v.body=p.uploadData(),v.errorHandler=KH(e),v}class $1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw jh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class D1e extends $1e{initXhr(){this.xhr_.responseType="text"}}function YH(){return new D1e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,r){this._service=e,r instanceof ei?this._location=r:this._location=ei.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ic(e,r)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WH(this._location.path)}get storage(){return this._service}get parent(){const e=x1e(this._location.path);if(e===null)return null;const r=new ei(this._location.bucket,e);return new Ic(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Jwe(e)}}function M1e(t,e,r){t._throwIfRoot("uploadBytes");const n=j1e(t.storage,t._location,zH(),new ra(e,!0),r);return t.storage.makeRequestWithTokens(n,YH).then(i=>({metadata:i,ref:t}))}function F1e(t){t._throwIfRoot("getDownloadURL");const e=k1e(t.storage,t._location,zH());return t.storage.makeRequestWithTokens(e,YH).then(r=>{if(r===null)throw Qwe();return r})}function L1e(t,e){const r=_1e(t._location.path,e),n=new ei(t._location.bucket,r);return new Ic(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1e(t){return/^[A-Za-z]+:\/\//.test(t)}function U1e(t,e){return new Ic(t,e)}function QH(t,e){if(t instanceof dR){const r=t;if(r._bucket==null)throw Kwe();const n=new Ic(r,r._bucket);return e!=null?QH(n,e):n}else return e!==void 0?L1e(t,e):t}function V1e(t,e){if(e&&B1e(e)){if(t instanceof dR)return U1e(t,e);throw _P("To use ref(service, url), the first argument must be a Storage instance.")}else return QH(t,e)}function FL(t,e){const r=e==null?void 0:e[DH];return r==null?null:ei.makeFromBucketSpec(r,t)}function W1e(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:lk(i,t.app.options.projectId))}class dR{constructor(e,r,n,i,o){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=$H,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Mwe,this._maxUploadRetryTime=Fwe,this._requests=new Set,i!=null?this._bucket=ei.makeFromBucketSpec(i,this._host):this._bucket=FL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=FL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ML("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ML("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ic(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new Zwe(MH());{const s=u1e(e,this._appId,n,i,r,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const LL="@firebase/storage",BL="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="storage";function z1e(t,e,r){return t=Xr(t),M1e(t,e,r)}function G1e(t){return t=Xr(t),F1e(t)}function q1e(t,e){return t=Xr(t),V1e(t,e)}function H1e(t=hk(),e){t=Xr(t);const n=fk(t,XH).getImmediate({identifier:e}),i=ak("storage");return i&&K1e(n,...i),n}function K1e(t,e,r,n={}){W1e(t,e,r,n)}function Y1e(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new dR(r,n,i,e,dk)}function Q1e(){Uf(new wc(XH,Y1e,"PUBLIC").setMultipleInstances(!0)),Lo(LL,BL,""),Lo(LL,BL,"esm2017")}Q1e();const X1e=H1e(dO),UL=(t,e)=>{const r=e??`images/uploads/ungroup/image_${cs()}`,n=q1e(X1e,r);return z1e(n,t).then(async i=>({url:await G1e(i.ref)}))},VL={title:"",name:"新的玩家",color:"#FF0000",proPicUrl:""};function JH({defaultValue:t,onSubmit:e}){const{reset:r,setValue:n,control:i,handleSubmit:o}=Gd({defaultValues:VL}),[{loading:s},a]=Kw(e,[e]),l=E.useMemo(()=>o(m=>{a(m)}),[a,o]),c=Ka({control:i}),u=E.useCallback(m=>UL(m).then(({url:y})=>{n("proPicUrl",y)}),[n]),d=E.useCallback(()=>{n("proPicUrl",null)},[n]),h=E.useCallback(m=>UL(m).then(({url:y})=>{n("teamPicUrl",y)}),[n]),p=E.useCallback(()=>{n("teamPicUrl",null)},[n]);return E.useEffect(()=>{r(t??VL)},[t,r]),f.jsxs("form",{onSubmit:l,className:"space-y-6",children:[f.jsxs("div",{className:"flex gap-x-6",children:[f.jsx("div",{className:"shrink-0",children:f.jsx(wn,{label:"顏色",children:f.jsx(jn,{name:"color",control:i,render:({field:m})=>f.jsx(jH,{...m}),disabled:s})})}),f.jsxs("div",{className:"flex-1 space-y-6",children:[f.jsx(wn,{label:"稱號",children:f.jsx(jn,{name:"title",control:i,render:({field:m})=>f.jsx(va,{type:"text",...m,placeholder:"例：天鳳鳳位、雀魂x段",disabled:s})})}),f.jsx(wn,{className:"mb-6",label:"名字",children:f.jsx(jn,{name:"name",control:i,rules:{required:!0},render:({field:m})=>f.jsx(va,{...m}),disabled:s})}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-6",children:[f.jsx(wn,{className:"mb-6",label:"玩家圖片",action:c.proPicUrl&&f.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:d,children:"移除"}),children:f.jsx($L,{helperText:"建議大小 360px * 500px (18:25)",onChangeFile:u,children:c.proPicUrl&&f.jsx("img",{className:"aspect-[18/25]",src:c.proPicUrl})})}),f.jsx(wn,{className:"mb-6",label:"隊伍圖片",action:c.teamPicUrl&&f.jsx("a",{href:"#",className:"text-xs underline text-teal-800",onClick:p,children:"移除"}),children:f.jsx($L,{helperText:"建議大小 500px * 500px (1:1)",onChangeFile:h,children:c.teamPicUrl&&f.jsx("img",{className:"aspect-square",src:c.teamPicUrl})})})]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"mb-2",children:"預覽"}),f.jsx("div",{className:"text-[4rem] p-4 bg-gray-800 text-white",children:f.jsx(Ha,{player:c,score:25e3,waitingTiles:["5m","6m","7m"],isRiichi:!0,isEast:!0})})]}),f.jsx("div",{children:f.jsx(Re,{type:"submit",loading:s,children:"儲存"})})]})}var J1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,hR=hR||{},Se=J1e||self;function E1(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ag(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Z1e(t){return Object.prototype.hasOwnProperty.call(t,wA)&&t[wA]||(t[wA]=++eSe)}var wA="closure_uid_"+(1e9*Math.random()>>>0),eSe=0;function tSe(t,e,r){return t.call.apply(t.bind,arguments)}function rSe(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function dn(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?dn=tSe:dn=rSe,dn.apply(null,arguments)}function Uv(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function jr(t,e){function r(){}r.prototype=e.prototype,t.$=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.ac=function(n,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(n,s)}}function ol(){this.s=this.s,this.o=this.o}var nSe=0;ol.prototype.s=!1;ol.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),nSe!=0)&&Z1e(this)};ol.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZH=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function pR(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function WL(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(E1(n)){const i=t.length||0,o=n.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=n[s]}else t.push(n)}}function hn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var iSe=function(){if(!Se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Se.addEventListener("test",()=>{},e),Se.removeEventListener("test",()=>{},e)}catch{}return t}();function Dm(t){return/^[\s\xa0]*$/.test(t)}function A1(){var t=Se.navigator;return t&&(t=t.userAgent)?t:""}function Co(t){return A1().indexOf(t)!=-1}function mR(t){return mR[" "](t),t}mR[" "]=function(){};function oSe(t,e){var r=XSe;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=e(t)}var sSe=Co("Opera"),ad=Co("Trident")||Co("MSIE"),e7=Co("Edge"),wP=e7||ad,t7=Co("Gecko")&&!(A1().toLowerCase().indexOf("webkit")!=-1&&!Co("Edge"))&&!(Co("Trident")||Co("MSIE"))&&!Co("Edge"),aSe=A1().toLowerCase().indexOf("webkit")!=-1&&!Co("Edge");function r7(){var t=Se.document;return t?t.documentMode:void 0}var SP;e:{var SA="",EA=function(){var t=A1();if(t7)return/rv:([^\);]+)(\)|;)/.exec(t);if(e7)return/Edge\/([\d\.]+)/.exec(t);if(ad)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(aSe)return/WebKit\/(\S+)/.exec(t);if(sSe)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(EA&&(SA=EA?EA[1]:""),ad){var AA=r7();if(AA!=null&&AA>parseFloat(SA)){SP=String(AA);break e}}SP=SA}var EP;if(Se.document&&ad){var zL=r7();EP=zL||parseInt(SP,10)||void 0}else EP=void 0;var lSe=EP;function Mm(t,e){if(hn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(t7){e:{try{mR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:cSe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Mm.$.h.call(this)}}jr(Mm,hn);var cSe={2:"touch",3:"pen",4:"mouse"};Mm.prototype.h=function(){Mm.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cg="closure_listenable_"+(1e6*Math.random()|0),uSe=0;function fSe(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.la=i,this.key=++uSe,this.fa=this.ia=!1}function C1(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function yR(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function dSe(t,e){for(const r in t)e.call(void 0,t[r],r,t)}function n7(t){const e={};for(const r in t)e[r]=t[r];return e}const GL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function i7(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let o=0;o<GL.length;o++)r=GL[o],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function T1(t){this.src=t,this.g={},this.h=0}T1.prototype.add=function(t,e,r,n,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=CP(t,e,n,i);return-1<s?(e=t[s],r||(e.ia=!1)):(e=new fSe(e,this.src,o,!!n,i),e.ia=r,t.push(e)),e};function AP(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=ZH(n,e),o;(o=0<=i)&&Array.prototype.splice.call(n,i,1),o&&(C1(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function CP(t,e,r,n){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!r&&o.la==n)return i}return-1}var gR="closure_lm_"+(1e6*Math.random()|0),CA={};function o7(t,e,r,n,i){if(n&&n.once)return a7(t,e,r,n,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)o7(t,e[o],r,n,i);return null}return r=xR(r),t&&t[Cg]?t.O(e,r,Ag(n)?!!n.capture:!!n,i):s7(t,e,r,!1,n,i)}function s7(t,e,r,n,i,o){if(!e)throw Error("Invalid event type");var s=Ag(i)?!!i.capture:!!i,a=bR(t);if(a||(t[gR]=a=new T1(t)),r=a.add(e,r,n,s,o),r.proxy)return r;if(n=hSe(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)iSe||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(c7(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function hSe(){function t(r){return e.call(t.src,t.listener,r)}const e=pSe;return t}function a7(t,e,r,n,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)a7(t,e[o],r,n,i);return null}return r=xR(r),t&&t[Cg]?t.P(e,r,Ag(n)?!!n.capture:!!n,i):s7(t,e,r,!0,n,i)}function l7(t,e,r,n,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)l7(t,e[o],r,n,i);else n=Ag(n)?!!n.capture:!!n,r=xR(r),t&&t[Cg]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],r=CP(o,r,n,i),-1<r&&(C1(o[r]),Array.prototype.splice.call(o,r,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=bR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=CP(e,r,n,i)),(r=-1<t?e[t]:null)&&vR(r))}function vR(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cg])AP(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(c7(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=bR(e))?(AP(r,t),r.h==0&&(r.src=null,e[gR]=null)):C1(t)}}}function c7(t){return t in CA?CA[t]:CA[t]="on"+t}function pSe(t,e){if(t.fa)t=!0;else{e=new Mm(e,this);var r=t.listener,n=t.la||t.src;t.ia&&vR(t),t=r.call(n,e)}return t}function bR(t){return t=t[gR],t instanceof T1?t:null}var TA="__closure_events_fn_"+(1e9*Math.random()>>>0);function xR(t){return typeof t=="function"?t:(t[TA]||(t[TA]=function(e){return t.handleEvent(e)}),t[TA])}function Or(){ol.call(this),this.i=new T1(this),this.S=this,this.J=null}jr(Or,ol);Or.prototype[Cg]=!0;Or.prototype.removeEventListener=function(t,e,r,n){l7(this,t,e,r,n)};function Kr(t,e){var r,n=t.J;if(n)for(r=[];n;n=n.J)r.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new hn(e,t);else if(e instanceof hn)e.target=e.target||t;else{var i=e;e=new hn(n,t),i7(e,i)}if(i=!0,r)for(var o=r.length-1;0<=o;o--){var s=e.g=r[o];i=Vv(s,n,!0,e)&&i}if(s=e.g=t,i=Vv(s,n,!0,e)&&i,i=Vv(s,n,!1,e)&&i,r)for(o=0;o<r.length;o++)s=e.g=r[o],i=Vv(s,n,!1,e)&&i}Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)C1(r[n]);delete t.g[e],t.h--}}this.J=null};Or.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};Or.prototype.P=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Vv(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==r){var a=s.listener,l=s.la||s.src;s.ia&&AP(t.i,s),i=a.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var _R=Se.JSON.stringify;class mSe{constructor(e,r){this.i=e,this.j=r,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ySe(){var t=wR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class gSe{constructor(){this.h=this.g=null}add(e,r){const n=u7.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var u7=new mSe(()=>new vSe,t=>t.reset());class vSe{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function bSe(t){var e=1;t=t.split(":");const r=[];for(;0<e&&t.length;)r.push(t.shift()),e--;return t.length&&r.push(t.join(":")),r}function xSe(t){Se.setTimeout(()=>{throw t},0)}let Fm,Lm=!1,wR=new gSe,f7=()=>{const t=Se.Promise.resolve(void 0);Fm=()=>{t.then(_Se)}};var _Se=()=>{for(var t;t=ySe();){try{t.h.call(t.g)}catch(r){xSe(r)}var e=u7;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Lm=!1};function P1(t,e){Or.call(this),this.h=t||1,this.g=e||Se,this.j=dn(this.qb,this),this.l=Date.now()}jr(P1,Or);ie=P1.prototype;ie.ga=!1;ie.T=null;ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Kr(this,"tick"),this.ga&&(SR(this),this.start()))}};ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function SR(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ie.N=function(){P1.$.N.call(this),SR(this),delete this.g};function ER(t,e,r){if(typeof t=="function")r&&(t=dn(t,r));else if(t&&typeof t.handleEvent=="function")t=dn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Se.setTimeout(t,e||0)}function d7(t){t.g=ER(()=>{t.g=null,t.i&&(t.i=!1,d7(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class wSe extends ol{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:d7(this)}N(){super.N(),this.g&&(Se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bm(t){ol.call(this),this.h=t,this.g={}}jr(Bm,ol);var qL=[];function h7(t,e,r,n){Array.isArray(r)||(r&&(qL[0]=r.toString()),r=qL);for(var i=0;i<r.length;i++){var o=o7(e,r[i],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function p7(t){yR(t.g,function(e,r){this.g.hasOwnProperty(r)&&vR(e)},t),t.g={}}Bm.prototype.N=function(){Bm.$.N.call(this),p7(this)};Bm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function I1(){this.g=!0}I1.prototype.Ea=function(){this.g=!1};function SSe(t,e,r,n,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+c+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function ESe(t,e,r,n,i,o,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+o+" "+s})}function Bu(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+CSe(t,r)+(n?" "+n:"")})}function ASe(t,e){t.info(function(){return"TIMEOUT: "+e})}I1.prototype.info=function(){};function CSe(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return _R(r)}catch{return e}}var Uc={},HL=null;function N1(){return HL=HL||new Or}Uc.Ta="serverreachability";function m7(t){hn.call(this,Uc.Ta,t)}jr(m7,hn);function Um(t){const e=N1();Kr(e,new m7(e))}Uc.STAT_EVENT="statevent";function y7(t,e){hn.call(this,Uc.STAT_EVENT,t),this.stat=e}jr(y7,hn);function En(t){const e=N1();Kr(e,new y7(e,t))}Uc.Ua="timingevent";function g7(t,e){hn.call(this,Uc.Ua,t),this.size=e}jr(g7,hn);function Tg(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Se.setTimeout(function(){t()},e)}var k1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},v7={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function AR(){}AR.prototype.h=null;function KL(t){return t.h||(t.h=t.i())}function b7(){}var Pg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function CR(){hn.call(this,"d")}jr(CR,hn);function TR(){hn.call(this,"c")}jr(TR,hn);var TP;function O1(){}jr(O1,AR);O1.prototype.g=function(){return new XMLHttpRequest};O1.prototype.i=function(){return{}};TP=new O1;function Ig(t,e,r,n){this.l=t,this.j=e,this.m=r,this.W=n||1,this.U=new Bm(this),this.P=TSe,t=wP?125:void 0,this.V=new P1(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new x7}function x7(){this.i=null,this.g="",this.h=!1}var TSe=45e3,PP={},Yx={};ie=Ig.prototype;ie.setTimeout=function(t){this.P=t};function IP(t,e,r){t.L=1,t.v=j1(As(e)),t.s=r,t.S=!0,_7(t,null)}function _7(t,e){t.G=Date.now(),Ng(t),t.A=As(t.v);var r=t.A,n=t.W;Array.isArray(n)||(n=[String(n)]),I7(r.i,"t",n),t.C=0,r=t.l.J,t.h=new x7,t.g=Q7(t.l,r?e:null,!t.s),0<t.O&&(t.M=new wSe(dn(t.Pa,t,t.g),t.O)),h7(t.U,t.g,"readystatechange",t.nb),e=t.I?n7(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Um(),SSe(t.j,t.u,t.A,t.m,t.W,t.s)}ie.nb=function(t){t=t.target;const e=this.M;e&&jo(t)==3?e.l():this.Pa(t)};ie.Pa=function(t){try{if(t==this.g)e:{const u=jo(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(u!=3||wP||this.g&&(this.h.h||this.g.ja()||JL(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Um(3):Um(2)),R1(this);var r=this.g.da();this.ca=r;t:if(w7(this)){var n=JL(this.g);t="";var i=n.length,o=jo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ml(this),Bp(this);var s="";break t}this.h.i=new Se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=r==200,ESe(this.j,this.u,this.A,this.m,this.W,u,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dm(a)){var c=a;break t}}c=null}if(r=c)Bu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,NP(this,r);else{this.i=!1,this.o=3,En(12),Ml(this),Bp(this);break e}}this.S?(S7(this,u,s),wP&&this.i&&u==3&&(h7(this.U,this.V,"tick",this.mb),this.V.start())):(Bu(this.j,this.m,s,null),NP(this,s)),u==4&&Ml(this),this.i&&!this.J&&(u==4?q7(this.l,this):(this.i=!1,Ng(this)))}else KSe(this.g),r==400&&0<s.indexOf("Unknown SID")?(this.o=3,En(12)):(this.o=0,En(13)),Ml(this),Bp(this)}}}catch{}finally{}};function w7(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function S7(t,e,r){let n=!0,i;for(;!t.J&&t.C<r.length;)if(i=PSe(t,r),i==Yx){e==4&&(t.o=4,En(14),n=!1),Bu(t.j,t.m,null,"[Incomplete Response]");break}else if(i==PP){t.o=4,En(15),Bu(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else Bu(t.j,t.m,i,null),NP(t,i);w7(t)&&i!=Yx&&i!=PP&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,En(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),RR(e),e.M=!0,En(11))):(Bu(t.j,t.m,r,"[Invalid Chunked Response]"),Ml(t),Bp(t))}ie.mb=function(){if(this.g){var t=jo(this.g),e=this.g.ja();this.C<e.length&&(R1(this),S7(this,t,e),this.i&&t!=4&&Ng(this))}};function PSe(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Yx:(r=Number(e.substring(r,n)),isNaN(r)?PP:(n+=1,n+r>e.length?Yx:(e=e.slice(n,n+r),t.C=n+r,e)))}ie.cancel=function(){this.J=!0,Ml(this)};function Ng(t){t.Y=Date.now()+t.P,E7(t,t.P)}function E7(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Tg(dn(t.lb,t),e)}function R1(t){t.B&&(Se.clearTimeout(t.B),t.B=null)}ie.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(ASe(this.j,this.A),this.L!=2&&(Um(),En(17)),Ml(this),this.o=2,Bp(this)):E7(this,this.Y-t)};function Bp(t){t.l.H==0||t.J||q7(t.l,t)}function Ml(t){R1(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,SR(t.V),p7(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function NP(t,e){try{var r=t.l;if(r.H!=0&&(r.g==t||kP(r.i,t))){if(!t.K&&kP(r.i,t)&&r.H==3){try{var n=r.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<t.G)Jx(r),M1(r);else break e;OR(r),En(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=Tg(dn(r.ib,r),6e3));if(1>=O7(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Fl(r,11)}else if((t.K||r.g==t)&&Jx(r),!Dm(e))for(i=r.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(r.V=c[0],c=c[1],r.H==2)if(c[0]=="c"){r.K=c[1],r.pa=c[2];const u=c[3];u!=null&&(r.ra=u,r.l.info("VER="+r.ra));const d=c[4];d!=null&&(r.Ga=d,r.l.info("SVER="+r.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.L=n,r.l.info("backChannelRequestTimeoutMs_="+n)),n=r;const p=t.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=n.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(PR(o,o.h),o.h=null))}if(n.F){const y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(n.Da=y,It(n.I,n.F,y))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-t.G,r.l.info("Handshake RTT: "+r.S+"ms")),n=r;var s=t;if(n.wa=Y7(n,n.J?n.pa:null,n.Y),s.K){R7(n.i,s);var a=s,l=n.L;l&&a.setTimeout(l),a.B&&(R1(a),Ng(a)),n.g=s}else z7(n);0<r.j.length&&F1(r)}else c[0]!="stop"&&c[0]!="close"||Fl(r,7);else r.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Fl(r,7):kR(r):c[0]!="noop"&&r.h&&r.h.Aa(c),r.A=0)}}Um(4)}catch{}}function ISe(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(E1(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function NSe(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(E1(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function A7(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(E1(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=NSe(t),n=ISe(t),i=n.length,o=0;o<i;o++)e.call(void 0,n[o],r&&r[o],t)}var C7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kSe(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var o=t[r].substring(0,n);i=t[r].substring(n+1)}else o=t[r];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function hc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof hc){this.h=t.h,Qx(this,t.j),this.s=t.s,this.g=t.g,Xx(this,t.m),this.l=t.l;var e=t.i,r=new Vm;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),YL(this,r),this.o=t.o}else t&&(e=String(t).match(C7))?(this.h=!1,Qx(this,e[1]||"",!0),this.s=up(e[2]||""),this.g=up(e[3]||"",!0),Xx(this,e[4]),this.l=up(e[5]||"",!0),YL(this,e[6]||"",!0),this.o=up(e[7]||"")):(this.h=!1,this.i=new Vm(null,this.h))}hc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fp(e,QL,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(fp(e,QL,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(fp(r,r.charAt(0)=="/"?jSe:RSe,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",fp(r,DSe)),t.join("")};function As(t){return new hc(t)}function Qx(t,e,r){t.j=r?up(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Xx(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YL(t,e,r){e instanceof Vm?(t.i=e,MSe(t.i,t.h)):(r||(e=fp(e,$Se)),t.i=new Vm(e,t.h))}function It(t,e,r){t.i.set(e,r)}function j1(t){return It(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function up(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fp(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,OSe),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function OSe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var QL=/[#\/\?@]/g,RSe=/[#\?:]/g,jSe=/[#\?]/g,$Se=/[#\?@]/g,DSe=/#/g;function Vm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sl(t){t.g||(t.g=new Map,t.h=0,t.i&&kSe(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}ie=Vm.prototype;ie.add=function(t,e){sl(this),this.i=null,t=Yd(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function T7(t,e){sl(t),e=Yd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function P7(t,e){return sl(t),e=Yd(t,e),t.g.has(e)}ie.forEach=function(t,e){sl(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};ie.ta=function(){sl(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let o=0;o<i.length;o++)r.push(e[n])}return r};ie.Z=function(t){sl(this);let e=[];if(typeof t=="string")P7(this,t)&&(e=e.concat(this.g.get(Yd(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};ie.set=function(t,e){return sl(this),this.i=null,t=Yd(this,t),P7(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function I7(t,e,r){T7(t,e),0<r.length&&(t.i=null,t.g.set(Yd(t,e),pR(r)),t.h+=r.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var i=o;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function Yd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function MSe(t,e){e&&!t.j&&(sl(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(T7(this,n),I7(this,i,r))},t)),t.j=e}var FSe=class{constructor(t,e){this.g=t,this.map=e}};function N7(t){this.l=t||LSe,Se.PerformanceNavigationTiming?(t=Se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Se.g&&Se.g.Ka&&Se.g.Ka()&&Se.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var LSe=10;function k7(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function O7(t){return t.h?1:t.g?t.g.size:0}function kP(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function PR(t,e){t.g?t.g.add(e):t.h=e}function R7(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}N7.prototype.cancel=function(){if(this.i=j7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function j7(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.F);return e}return pR(t.i)}var BSe=class{stringify(t){return Se.JSON.stringify(t,void 0)}parse(t){return Se.JSON.parse(t,void 0)}};function USe(){this.g=new BSe}function VSe(t,e,r){const n=r||"";try{A7(t,function(i,o){let s=i;Ag(i)&&(s=_R(i)),e.push(n+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function WSe(t,e){const r=new I1;if(Se.Image){const n=new Image;n.onload=Uv(Wv,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Uv(Wv,r,n,"TestLoadImage: error",!1,e),n.onabort=Uv(Wv,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Uv(Wv,r,n,"TestLoadImage: timeout",!1,e),Se.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Wv(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function kg(t){this.l=t.ec||null,this.j=t.ob||!1}jr(kg,AR);kg.prototype.g=function(){return new $1(this.l,this.j)};kg.prototype.i=function(t){return function(){return t}}({});function $1(t,e){Or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=IR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jr($1,Or);var IR=0;ie=$1.prototype;ie.open=function(t,e){if(this.readyState!=IR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wm(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Og(this)),this.readyState=IR};ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wm(this)),this.g&&(this.readyState=3,Wm(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$7(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $7(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Og(this):Wm(this),this.readyState==3&&$7(this)}};ie.Za=function(t){this.g&&(this.response=this.responseText=t,Og(this))};ie.Ya=function(t){this.g&&(this.response=t,Og(this))};ie.ka=function(){this.g&&Og(this)};function Og(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wm(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function Wm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var zSe=Se.JSON.parse;function Yt(t){Or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=D7,this.L=this.M=!1}jr(Yt,Or);var D7="",GSe=/^https?$/i,qSe=["POST","PUT"];ie=Yt.prototype;ie.Oa=function(t){this.M=t};ie.ha=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():TP.g(),this.C=this.u?KL(this.u):KL(TP),this.g.onreadystatechange=dn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){XL(this,o);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const o of n.keys())r.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(o=>o.toLowerCase()=="content-type"),i=Se.FormData&&t instanceof Se.FormData,!(0<=ZH(qSe,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of r)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{L7(this),0<this.B&&((this.L=HSe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dn(this.ua,this)):this.A=ER(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){XL(this,o)}};function HSe(t){return ad&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.ua=function(){typeof hR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))};function XL(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,M7(t),D1(t)}function M7(t){t.F||(t.F=!0,Kr(t,"complete"),Kr(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Kr(this,"complete"),Kr(this,"abort"),D1(this))};ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),D1(this,!0)),Yt.$.N.call(this)};ie.La=function(){this.s||(this.G||this.v||this.l?F7(this):this.kb())};ie.kb=function(){F7(this)};function F7(t){if(t.h&&typeof hR<"u"&&(!t.C[1]||jo(t)!=4||t.da()!=2)){if(t.v&&jo(t)==4)ER(t.La,0,t);else if(Kr(t,"readystatechange"),jo(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=s===0){var i=String(t.I).match(C7)[1]||null;!i&&Se.self&&Se.self.location&&(i=Se.self.location.protocol.slice(0,-1)),n=!GSe.test(i?i.toLowerCase():"")}r=n}if(r)Kr(t,"complete"),Kr(t,"success");else{t.m=6;try{var o=2<jo(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",M7(t)}}finally{D1(t)}}}}function D1(t,e){if(t.g){L7(t);const r=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Kr(t,"ready");try{r.onreadystatechange=n}catch{}}}function L7(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Se.clearTimeout(t.A),t.A=null)}ie.isActive=function(){return!!this.g};function jo(t){return t.g?t.g.readyState:0}ie.da=function(){try{return 2<jo(this)?this.g.status:-1}catch{return-1}};ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),zSe(e)}};function JL(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case D7:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function KSe(t){const e={};t=(t.g&&2<=jo(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(Dm(t[n]))continue;var r=bSe(t[n]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const o=e[i]||[];e[i]=o,o.push(r)}dSe(e,function(n){return n.join(", ")})}ie.Ia=function(){return this.m};ie.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function B7(t){let e="";return yR(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function NR(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=B7(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):It(t,e,r))}function $h(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function U7(t){this.Ga=0,this.j=[],this.l=new I1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$h("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$h("baseRetryDelayMs",5e3,t),this.hb=$h("retryDelaySeedMs",1e4,t),this.eb=$h("forwardChannelMaxRetries",2,t),this.xa=$h("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new N7(t&&t.concurrentRequestLimit),this.Ja=new USe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ie=U7.prototype;ie.ra=8;ie.H=1;function kR(t){if(V7(t),t.H==3){var e=t.W++,r=As(t.I);if(It(r,"SID",t.K),It(r,"RID",e),It(r,"TYPE","terminate"),Rg(t,r),e=new Ig(t,t.l,e),e.L=2,e.v=j1(As(r)),r=!1,Se.navigator&&Se.navigator.sendBeacon)try{r=Se.navigator.sendBeacon(e.v.toString(),"")}catch{}!r&&Se.Image&&(new Image().src=e.v,r=!0),r||(e.g=Q7(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ng(e)}K7(t)}function M1(t){t.g&&(RR(t),t.g.cancel(),t.g=null)}function V7(t){M1(t),t.u&&(Se.clearTimeout(t.u),t.u=null),Jx(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Se.clearTimeout(t.m),t.m=null)}function F1(t){if(!k7(t.i)&&!t.m){t.m=!0;var e=t.Na;Fm||f7(),Lm||(Fm(),Lm=!0),wR.add(e,t),t.C=0}}function YSe(t,e){return O7(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Tg(dn(t.Na,t,e),H7(t,t.C)),t.C++,!0)}ie.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ig(this,this.l,t);let o=this.s;if(this.U&&(o?(o=n7(o),i7(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,r=0;r<this.j.length;r++){t:{var n=this.j[r];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.j.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=W7(this,i,e),r=As(this.I),It(r,"RID",t),It(r,"CVER",22),this.F&&It(r,"X-HTTP-Session-Id",this.F),Rg(this,r),o&&(this.O?e="headers="+encodeURIComponent(String(B7(o)))+"&"+e:this.o&&NR(r,this.o,o)),PR(this.i,i),this.bb&&It(r,"TYPE","init"),this.P?(It(r,"$req",e),It(r,"SID","null"),i.aa=!0,IP(i,r,null)):IP(i,r,e),this.H=2}}else this.H==3&&(t?ZL(this,t):this.j.length==0||k7(this.i)||ZL(this))};function ZL(t,e){var r;e?r=e.m:r=t.W++;const n=As(t.I);It(n,"SID",t.K),It(n,"RID",r),It(n,"AID",t.V),Rg(t,n),t.o&&t.s&&NR(n,t.o,t.s),r=new Ig(t,t.l,r,t.C+1),t.o===null&&(r.I=t.s),e&&(t.j=e.F.concat(t.j)),e=W7(t,r,1e3),r.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),PR(t.i,r),IP(r,n,e)}function Rg(t,e){t.na&&yR(t.na,function(r,n){It(e,n,r)}),t.h&&A7({},function(r,n){It(e,n,r)})}function W7(t,e,r){r=Math.min(t.j.length,r);var n=t.h?dn(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+r];o==-1?0<r?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<r;l++){let c=i[l].g;const u=i[l].map;if(c-=o,0>c)o=Math.max(0,i[l].g-100),a=!1;else try{VSe(u,s,"req"+c+"_")}catch{n&&n(u)}}if(a){n=s.join("&");break e}}}return t=t.j.splice(0,r),e.F=t,n}function z7(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fm||f7(),Lm||(Fm(),Lm=!0),wR.add(e,t),t.A=0}}function OR(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Tg(dn(t.Ma,t),H7(t,t.A)),t.A++,!0)}ie.Ma=function(){if(this.u=null,G7(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Tg(dn(this.jb,this),t)}};ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,En(10),M1(this),G7(this))};function RR(t){t.B!=null&&(Se.clearTimeout(t.B),t.B=null)}function G7(t){t.g=new Ig(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=As(t.wa);It(e,"RID","rpc"),It(e,"SID",t.K),It(e,"AID",t.V),It(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&It(e,"TO",t.qa),It(e,"TYPE","xmlhttp"),Rg(t,e),t.o&&t.s&&NR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var r=t.g;t=t.pa,r.L=1,r.v=j1(As(e)),r.s=null,r.S=!0,_7(r,t)}ie.ib=function(){this.v!=null&&(this.v=null,M1(this),OR(this),En(19))};function Jx(t){t.v!=null&&(Se.clearTimeout(t.v),t.v=null)}function q7(t,e){var r=null;if(t.g==e){Jx(t),RR(t),t.g=null;var n=2}else if(kP(t.i,e))r=e.F,R7(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;n=N1(),Kr(n,new g7(n,r)),F1(t)}else z7(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(n==1&&YSe(t,e)||n==2&&OR(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:Fl(t,5);break;case 4:Fl(t,10);break;case 3:Fl(t,6);break;default:Fl(t,2)}}}function H7(t,e){let r=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(r*=2),r*e}function Fl(t,e){if(t.l.info("Error code "+e),e==2){var r=null;t.h&&(r=null);var n=dn(t.pb,t);r||(r=new hc("//www.google.com/images/cleardot.gif"),Se.location&&Se.location.protocol=="http"||Qx(r,"https"),j1(r)),WSe(r.toString(),n)}else En(2);t.H=0,t.h&&t.h.za(e),K7(t),V7(t)}ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),En(2)):(this.l.info("Failed to ping google.com"),En(1))};function K7(t){if(t.H=0,t.ma=[],t.h){const e=j7(t.i);(e.length!=0||t.j.length!=0)&&(WL(t.ma,e),WL(t.ma,t.j),t.i.i.length=0,pR(t.j),t.j.length=0),t.h.ya()}}function Y7(t,e,r){var n=r instanceof hc?As(r):new hc(r);if(n.g!="")e&&(n.g=e+"."+n.g),Xx(n,n.m);else{var i=Se.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new hc(null);n&&Qx(o,n),e&&(o.g=e),i&&Xx(o,i),r&&(o.l=r),n=o}return r=t.F,e=t.Da,r&&e&&It(n,r,e),It(n,"VER",t.ra),Rg(t,n),n}function Q7(t,e,r){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ha&&!t.va?new Yt(new kg({ob:!0})):new Yt(t.va),e.Oa(t.J),e}ie.isActive=function(){return!!this.h&&this.h.isActive(this)};function X7(){}ie=X7.prototype;ie.Ba=function(){};ie.Aa=function(){};ie.za=function(){};ie.ya=function(){};ie.isActive=function(){return!0};ie.Va=function(){};function Zx(){if(ad&&!(10<=Number(lSe)))throw Error("Environmental error: no available transport.")}Zx.prototype.g=function(t,e){return new oi(t,e)};function oi(t,e){Or.call(this),this.g=new U7(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Dm(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dm(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Qd(this)}jr(oi,Or);oi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,r=this.h||void 0;En(0),t.Y=e,t.na=r||{},t.G=t.aa,t.I=Y7(t,null,t.Y),F1(t)};oi.prototype.close=function(){kR(this.g)};oi.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=_R(t),t=r);e.j.push(new FSe(e.fb++,t)),e.H==3&&F1(e)};oi.prototype.N=function(){this.g.h=null,delete this.j,kR(this.g),delete this.g,oi.$.N.call(this)};function J7(t){CR.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}jr(J7,CR);function Z7(){TR.call(this),this.status=1}jr(Z7,TR);function Qd(t){this.g=t}jr(Qd,X7);Qd.prototype.Ba=function(){Kr(this.g,"a")};Qd.prototype.Aa=function(t){Kr(this.g,new J7(t))};Qd.prototype.za=function(t){Kr(this.g,new Z7)};Qd.prototype.ya=function(){Kr(this.g,"b")};function QSe(){this.blockSize=-1}function uo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}jr(uo,QSe);uo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function PA(t,e,r){r||(r=0);var n=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)n[i]=e.charCodeAt(r++)|e.charCodeAt(r++)<<8|e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;e=t.g[0],r=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^r&(i^o))+n[0]+3614090360&4294967295;e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[3]+3250441966&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[4]+4118548399&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[7]+4249261313&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[8]+1770035416&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[11]+2304563134&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(o^r&(i^o))+n[12]+1804603682&4294967295,e=r+(s<<7&4294967295|s>>>25),s=o+(i^e&(r^i))+n[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(r^o&(e^r))+n[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=r+(e^i&(o^e))+n[15]+1236535329&4294967295,r=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(r^i))+n[1]+4129170786&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[0]+3921069994&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[5]+3593408605&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[4]+3889429448&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[9]+568446438&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[8]+1163531501&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(r^i))+n[13]+2850285829&4294967295,e=r+(s<<5&4294967295|s>>>27),s=o+(r^i&(e^r))+n[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^r&(o^e))+n[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=r+(o^e&(i^o))+n[12]+2368359562&4294967295,r=i+(s<<20&4294967295|s>>>12),s=e+(r^i^o)+n[5]+4294588738&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[14]+4259657740&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[1]+2763975236&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[10]+3200236656&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[13]+681279174&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[6]+76029189&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(r^i^o)+n[9]+3654602809&4294967295,e=r+(s<<4&4294967295|s>>>28),s=o+(e^r^i)+n[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^r)+n[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=r+(i^o^e)+n[2]+3299628645&4294967295,r=i+(s<<23&4294967295|s>>>9),s=e+(i^(r|~o))+n[0]+4096336452&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[5]+4237533241&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[12]+1700485571&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[1]+2240044497&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[8]+1873313359&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[13]+1309151649&4294967295,r=i+(s<<21&4294967295|s>>>11),s=e+(i^(r|~o))+n[4]+4149444226&4294967295,e=r+(s<<6&4294967295|s>>>26),s=o+(r^(e|~i))+n[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~r))+n[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=r+(o^(i|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}uo.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var r=e-this.blockSize,n=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=r;)PA(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(n[i++]=t.charCodeAt(o++),i==this.blockSize){PA(this,n),i=0;break}}else for(;o<e;)if(n[i++]=t[o++],i==this.blockSize){PA(this,n),i=0;break}}this.h=i,this.i+=e};uo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var r=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=r&255,r/=256;for(this.j(t),t=Array(16),e=r=0;4>e;++e)for(var n=0;32>n;n+=8)t[r++]=this.g[e]>>>n&255;return t};function ft(t,e){this.h=e;for(var r=[],n=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;n&&o==e||(r[i]=o,n=!1)}this.g=r}var XSe={};function jR(t){return-128<=t&&128>t?oSe(t,function(e){return new ft([e|0],0>e?-1:0)}):new ft([t|0],0>t?-1:0)}function $o(t){if(isNaN(t)||!isFinite(t))return ff;if(0>t)return Wr($o(-t));for(var e=[],r=1,n=0;t>=r;n++)e[n]=t/r|0,r*=OP;return new ft(e,0)}function eK(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Wr(eK(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=$o(Math.pow(e,8)),n=ff,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=$o(Math.pow(e,o)),n=n.R(o).add($o(s))):(n=n.R(r),n=n.add($o(s)))}return n}var OP=4294967296,ff=jR(0),RP=jR(1),e3=jR(16777216);ie=ft.prototype;ie.ea=function(){if(Si(this))return-Wr(this).ea();for(var t=0,e=1,r=0;r<this.g.length;r++){var n=this.D(r);t+=(0<=n?n:OP+n)*e,e*=OP}return t};ie.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ds(this))return"0";if(Si(this))return"-"+Wr(this).toString(t);for(var e=$o(Math.pow(t,6)),r=this,n="";;){var i=t_(r,e).g;r=e_(r,i.R(e));var o=((0<r.g.length?r.g[0]:r.h)>>>0).toString(t);if(r=i,ds(r))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ds(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Si(t){return t.h==-1}ie.X=function(t){return t=e_(this,t),Si(t)?-1:ds(t)?0:1};function Wr(t){for(var e=t.g.length,r=[],n=0;n<e;n++)r[n]=~t.g[n];return new ft(r,~t.h).add(RP)}ie.abs=function(){return Si(this)?Wr(this):this};ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0,i=0;i<=e;i++){var o=n+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);n=s>>>16,o&=65535,s&=65535,r[i]=s<<16|o}return new ft(r,r[r.length-1]&-2147483648?-1:0)};function e_(t,e){return t.add(Wr(e))}ie.R=function(t){if(ds(this)||ds(t))return ff;if(Si(this))return Si(t)?Wr(this).R(Wr(t)):Wr(Wr(this).R(t));if(Si(t))return Wr(this.R(Wr(t)));if(0>this.X(e3)&&0>t.X(e3))return $o(this.ea()*t.ea());for(var e=this.g.length+t.g.length,r=[],n=0;n<2*e;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<t.g.length;i++){var o=this.D(n)>>>16,s=this.D(n)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;r[2*n+2*i]+=s*l,zv(r,2*n+2*i),r[2*n+2*i+1]+=o*l,zv(r,2*n+2*i+1),r[2*n+2*i+1]+=s*a,zv(r,2*n+2*i+1),r[2*n+2*i+2]+=o*a,zv(r,2*n+2*i+2)}for(n=0;n<e;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=e;n<2*e;n++)r[n]=0;return new ft(r,0)};function zv(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Dh(t,e){this.g=t,this.h=e}function t_(t,e){if(ds(e))throw Error("division by zero");if(ds(t))return new Dh(ff,ff);if(Si(t))return e=t_(Wr(t),e),new Dh(Wr(e.g),Wr(e.h));if(Si(e))return e=t_(t,Wr(e)),new Dh(Wr(e.g),e.h);if(30<t.g.length){if(Si(t)||Si(e))throw Error("slowDivide_ only works with positive integers.");for(var r=RP,n=e;0>=n.X(t);)r=t3(r),n=t3(n);var i=iu(r,1),o=iu(n,1);for(n=iu(n,2),r=iu(r,2);!ds(n);){var s=o.add(n);0>=s.X(t)&&(i=i.add(r),o=s),n=iu(n,1),r=iu(r,1)}return e=e_(t,i.R(e)),new Dh(i,e)}for(i=ff;0<=t.X(e);){for(r=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(r)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=$o(r),s=o.R(e);Si(s)||0<s.X(t);)r-=n,o=$o(r),s=o.R(e);ds(o)&&(o=RP),i=i.add(o),t=e_(t,s)}return new Dh(i,t)}ie.gb=function(t){return t_(this,t).h};ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)&t.D(n);return new ft(r,this.h&t.h)};ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)|t.D(n);return new ft(r,this.h|t.h)};ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),r=[],n=0;n<e;n++)r[n]=this.D(n)^t.D(n);return new ft(r,this.h^t.h)};function t3(t){for(var e=t.g.length+1,r=[],n=0;n<e;n++)r[n]=t.D(n)<<1|t.D(n-1)>>>31;return new ft(r,t.h)}function iu(t,e){var r=e>>5;e%=32;for(var n=t.g.length-r,i=[],o=0;o<n;o++)i[o]=0<e?t.D(o+r)>>>e|t.D(o+r+1)<<32-e:t.D(o+r);return new ft(i,t.h)}Zx.prototype.createWebChannel=Zx.prototype.g;oi.prototype.send=oi.prototype.u;oi.prototype.open=oi.prototype.m;oi.prototype.close=oi.prototype.close;k1.NO_ERROR=0;k1.TIMEOUT=8;k1.HTTP_ERROR=6;v7.COMPLETE="complete";b7.EventType=Pg;Pg.OPEN="a";Pg.CLOSE="b";Pg.ERROR="c";Pg.MESSAGE="d";Or.prototype.listen=Or.prototype.O;Yt.prototype.listenOnce=Yt.prototype.P;Yt.prototype.getLastError=Yt.prototype.Sa;Yt.prototype.getLastErrorCode=Yt.prototype.Ia;Yt.prototype.getStatus=Yt.prototype.da;Yt.prototype.getResponseJson=Yt.prototype.Wa;Yt.prototype.getResponseText=Yt.prototype.ja;Yt.prototype.send=Yt.prototype.ha;Yt.prototype.setWithCredentials=Yt.prototype.Oa;uo.prototype.digest=uo.prototype.l;uo.prototype.reset=uo.prototype.reset;uo.prototype.update=uo.prototype.j;ft.prototype.add=ft.prototype.add;ft.prototype.multiply=ft.prototype.R;ft.prototype.modulo=ft.prototype.gb;ft.prototype.compare=ft.prototype.X;ft.prototype.toNumber=ft.prototype.ea;ft.prototype.toString=ft.prototype.toString;ft.prototype.getBits=ft.prototype.D;ft.fromNumber=$o;ft.fromString=eK;var JSe=function(){return new Zx},ZSe=function(){return N1()},IA=k1,eEe=v7,tEe=Uc,r3={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rEe=kg,Gv=b7,nEe=Yt,iEe=uo,df=ft;const n3="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new ck("@firebase/firestore");function Mh(){return Nc.logLevel}function ue(t,...e){if(Nc.logLevel<=Qe.DEBUG){const r=e.map($R);Nc.debug(`Firestore (${Xd}): ${t}`,...r)}}function Cs(t,...e){if(Nc.logLevel<=Qe.ERROR){const r=e.map($R);Nc.error(`Firestore (${Xd}): ${t}`,...r)}}function ld(t,...e){if(Nc.logLevel<=Qe.WARN){const r=e.map($R);Nc.warn(`Firestore (${Xd}): ${t}`,...r)}}function $R(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Xd}) INTERNAL ASSERTION FAILED: `+t;throw Cs(e),new Error(e)}function kt(t,e){t||we()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Dc{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ln.UNAUTHENTICATED))}shutdown(){}}class sEe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class aEe{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let o=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Da,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Da)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string"),new tK(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string"),new ln(e)}}class lEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cEe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new lEe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uEe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fEe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(kt(typeof r.token=="string"),this.R=r.token,new uEe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=dEe(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function it(t,e){return t<e?-1:t>e?1:0}function cd(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ge(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ge(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ge(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new hr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new hr(0,0))}static max(){return new Ae(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,r,n){r===void 0?r=0:r>e.length&&we(),n===void 0?n=e.length-r:n>e.length-r&&we(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return zm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof zm?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),s=r.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Rt extends zm{construct(e,r,n){return new Rt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ge(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Rt(r)}static emptyPath(){return new Rt([])}}const hEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends zm{construct(e,r,n){return new zr(e,r,n)}static isValidIdentifier(e){return hEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new ge(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new ge(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(r)}static emptyPath(){return new zr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Rt.fromString(e))}static fromName(e){return new ve(Rt.fromString(e).popFirst(5))}static empty(){return new ve(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Rt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Rt(e.slice()))}}function pEe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(n===1e9?new hr(r+1,0):new hr(r,n));return new Qa(i,ve.empty(),e)}function mEe(t){return new Qa(t.readTime,t.key,-1)}class Qa{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Qa(Ae.min(),ve.empty(),-1)}static max(){return new Qa(Ae.max(),ve.empty(),-1)}}function yEe(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ve.comparator(t.documentKey,e.documentKey),r!==0?r:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gEe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==gEe)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new H((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof H?r:H.resolve(r)}catch(r){return H.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):H.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):H.reject(r)}static resolve(e){return new H((r,n)=>{r(e)})}static reject(e){return new H((r,n)=>{n(e)})}static waitFor(e){return new H((r,n)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&r()},l=>n(l))}),s=!0,o===i&&r()})}static or(e){let r=H.resolve(!1);for(const n of e)r=r.next(i=>i?H.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new H((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const c=l;r(e[c]).next(u=>{s[c]=u,++a,a===o&&n(s)},u=>i(u))}})}static doWhile(e,r){return new H((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function $g(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.se(n),this.oe=n=>r.writeSequenceNumber(n))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}DR._e=-1;function L1(t){return t==null}function r_(t){return t===0&&1/t==-1/0}function bEe(t){return typeof t=="number"&&Number.isInteger(t)&&!r_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Jd(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function nK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,r){this.comparator=e,this.root=r||Br.EMPTY}insert(e,r){return new Ut(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qv(this.root,e,this.comparator,!1)}getReverseIterator(){return new qv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qv(this.root,e,this.comparator,!0)}}class qv{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Br.RED,this.left=i??Br.EMPTY,this.right=o??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new Br(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Br.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1;Br.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,r,n,i,o){return this}insert(e,r,n){return new Br(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new o3(this.data.getIterator())}getIteratorFrom(e){return new o3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yr(this.comparator);return r.data=e,r}}class o3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.fields=e,e.sort(zr.comparator)}static empty(){return new ro([])}unionWith(e){let r=new Yr(zr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ro(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return cd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iK("Invalid base64 string: "+o):o}}(e);return new yn(r)}static fromUint8Array(e){const r=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new yn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const xEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xa(t){if(kt(!!t),typeof t=="string"){let e=0;const r=xEe.exec(t);if(kt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:tr(t.seconds),nanos:tr(t.nanos)}}function tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kc(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function FR(t){const e=t.mapValue.fields.__previous_value__;return MR(e)?FR(e):e}function Gm(t){const e=Xa(t.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ee{constructor(e,r,n,i,o,s,a,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class qm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?MR(t)?4:wEe(t)?9007199254740991:10:we()}function qo(t,e){if(t===e)return!0;const r=Oc(t);if(r!==Oc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gm(t).isEqual(Gm(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Xa(i.timestampValue),a=Xa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return kc(i.bytesValue).isEqual(kc(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return tr(i.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tr(i.integerValue)===tr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=tr(i.doubleValue),a=tr(o.doubleValue);return s===a?r_(s)===r_(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return cd(t.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(i3(s)!==i3(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!qo(s[l],a[l])))return!1;return!0}(t,e);default:return we()}}function Hm(t,e){return(t.values||[]).find(r=>qo(r,e))!==void 0}function ud(t,e){if(t===e)return 0;const r=Oc(t),n=Oc(e);if(r!==n)return it(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=tr(o.integerValue||o.doubleValue),l=tr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return s3(t.timestampValue,e.timestampValue);case 4:return s3(Gm(t),Gm(e));case 5:return it(t.stringValue,e.stringValue);case 6:return function(o,s){const a=kc(o),l=kc(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=it(a[c],l[c]);if(u!==0)return u}return it(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=it(tr(o.latitude),tr(s.latitude));return a!==0?a:it(tr(o.longitude),tr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=ud(a[c],l[c]);if(u)return u}return it(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Hv.mapValue&&s===Hv.mapValue)return 0;if(o===Hv.mapValue)return 1;if(s===Hv.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=it(l[d],u[d]);if(h!==0)return h;const p=ud(a[l[d]],c[u[d]]);if(p!==0)return p}return it(l.length,u.length)}(t.mapValue,e.mapValue);default:throw we()}}function s3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const r=Xa(t),n=Xa(e),i=it(r.seconds,n.seconds);return i!==0?i:it(r.nanos,n.nanos)}function fd(t){return jP(t)}function jP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Xa(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return kc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ve.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=jP(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${jP(r.fields[s])}`;return i+"}"}(t.mapValue):we()}function $P(t){return!!t&&"integerValue"in t}function LR(t){return!!t&&"arrayValue"in t}function a3(t){return!!t&&"nullValue"in t}function l3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function X0(t){return!!t&&"mapValue"in t}function Up(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jd(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Up(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Up(t.arrayValue.values[r]);return e}return Object.assign({},t)}function wEe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!X0(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Up(r)}setAll(e){let r=zr.emptyPath(),n={},i=[];e.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=a.popLast()}s?n[a.lastSegment()]=Up(s):i.push(a.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());X0(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];X0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Jd(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Ei(Up(this.value))}}function oK(t){const e=[];return Jd(t.fields,(r,n)=>{const i=new zr([r]);if(X0(n)){const o=oK(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ro(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,r,n,i,o,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Ae.min(),Ae.min(),Ae.min(),Ei.empty(),0)}static newFoundDocument(e,r,n,i){return new un(e,1,r,Ae.min(),n,i,0)}static newNoDocument(e,r){return new un(e,2,r,Ae.min(),Ae.min(),Ei.empty(),0)}static newUnknownDocument(e,r){return new un(e,3,r,Ae.min(),Ae.min(),Ei.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,r){this.position=e,this.inclusive=r}}function c3(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?n=ve.comparator(ve.fromName(s.referenceValue),r.key):n=ud(s,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function u3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!qo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,r="asc"){this.field=e,this.dir=r}}function SEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{}class ur extends sK{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new AEe(e,r,n):r==="array-contains"?new PEe(e,n):r==="in"?new IEe(e,n):r==="not-in"?new NEe(e,n):r==="array-contains-any"?new kEe(e,n):new ur(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new CEe(e,n):new TEe(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ud(r,this.value)):r!==null&&Oc(this.value)===Oc(r)&&this.matchesComparison(ud(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ho extends sK{constructor(e,r){super(),this.filters=e,this.op=r,this.ue=null}static create(e,r){return new Ho(e,r)}matches(e){return aK(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function aK(t){return t.op==="and"}function lK(t){return EEe(t)&&aK(t)}function EEe(t){for(const e of t.filters)if(e instanceof Ho)return!1;return!0}function DP(t){if(t instanceof ur)return t.field.canonicalString()+t.op.toString()+fd(t.value);if(lK(t))return t.filters.map(e=>DP(e)).join(",");{const e=t.filters.map(r=>DP(r)).join(",");return`${t.op}(${e})`}}function cK(t,e){return t instanceof ur?function(n,i){return i instanceof ur&&n.op===i.op&&n.field.isEqual(i.field)&&qo(n.value,i.value)}(t,e):t instanceof Ho?function(n,i){return i instanceof Ho&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&cK(s,i.filters[a]),!0):!1}(t,e):void we()}function uK(t){return t instanceof ur?function(r){return`${r.field.canonicalString()} ${r.op} ${fd(r.value)}`}(t):t instanceof Ho?function(r){return r.op.toString()+" {"+r.getFilters().map(uK).join(" ,")+"}"}(t):"Filter"}class AEe extends ur{constructor(e,r,n){super(e,r,n),this.key=ve.fromName(n.referenceValue)}matches(e){const r=ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class CEe extends ur{constructor(e,r){super(e,"in",r),this.keys=fK("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class TEe extends ur{constructor(e,r){super(e,"not-in",r),this.keys=fK("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function fK(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ve.fromName(n.referenceValue))}class PEe extends ur{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return LR(r)&&Hm(r.arrayValue,this.value)}}class IEe extends ur{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Hm(this.value.arrayValue,r)}}class NEe extends ur{constructor(e,r){super(e,"not-in",r)}matches(e){if(Hm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Hm(this.value.arrayValue,r)}}class kEe extends ur{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!LR(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Hm(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OEe{constructor(e,r=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function f3(t,e=null,r=[],n=[],i=null,o=null,s=null){return new OEe(t,e,r,n,i,o,s)}function BR(t){const e=Ce(t);if(e.ce===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>DP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),L1(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>fd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>fd(n)).join(",")),e.ce=r}return e.ce}function UR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!SEe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!cK(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!u3(t.startAt,e.startAt)&&u3(t.endAt,e.endAt)}function MP(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,r=null,n=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function REe(t,e,r,n,i,o,s,a){return new B1(t,e,r,n,i,o,s,a)}function dK(t){return new B1(t)}function d3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jEe(t){return t.collectionGroup!==null}function Vp(t){const e=Ce(t);if(e.le===null){e.le=[];const r=new Set;for(const o of e.explicitOrderBy)e.le.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Yr(zr.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.le.push(new i_(o,n))}),r.has(zr.keyField().canonicalString())||e.le.push(new i_(zr.keyField(),n))}return e.le}function Uo(t){const e=Ce(t);return e.he||(e.he=$Ee(e,Vp(t))),e.he}function $Ee(t,e){if(t.limitType==="F")return f3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new i_(i.field,o)});const r=t.endAt?new n_(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new n_(t.startAt.position,t.startAt.inclusive):null;return f3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function FP(t,e,r){return new B1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function U1(t,e){return UR(Uo(t),Uo(e))&&t.limitType===e.limitType}function hK(t){return`${BR(Uo(t))}|lt:${t.limitType}`}function bu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>uK(i)).join(", ")}]`),L1(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>fd(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>fd(i)).join(",")),`Target(${n})`}(Uo(t))}; limitType=${t.limitType})`}function V1(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ve.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of Vp(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,a,l){const c=c3(s,a,l);return s.inclusive?c<=0:c<0}(n.startAt,Vp(n),i)||n.endAt&&!function(s,a,l){const c=c3(s,a,l);return s.inclusive?c>=0:c>0}(n.endAt,Vp(n),i))}(t,e)}function DEe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pK(t){return(e,r)=>{let n=!1;for(const i of Vp(t)){const o=MEe(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function MEe(t,e,r){const n=t.field.isKeyField()?ve.comparator(e.key,r.key):function(o,s,a){const l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?ud(l,c):we()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jd(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return nK(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FEe=new Ut(ve.comparator);function Ts(){return FEe}const mK=new Ut(ve.comparator);function dp(...t){let e=mK;for(const r of t)e=e.insert(r.key,r);return e}function yK(t){let e=mK;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ll(){return Wp()}function gK(){return Wp()}function Wp(){return new Zd(t=>t.toString(),(t,e)=>t.isEqual(e))}const LEe=new Ut(ve.comparator),BEe=new Yr(ve.comparator);function We(...t){let e=BEe;for(const r of t)e=e.add(r);return e}const UEe=new Yr(it);function VEe(){return UEe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:r_(e)?"-0":e}}function bK(t){return{integerValue:""+t}}function WEe(t,e){return bEe(e)?bK(e):vK(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this._=void 0}}function zEe(t,e,r){return t instanceof o_?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&MR(o)&&(o=FR(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(r,e):t instanceof Km?_K(t,e):t instanceof Ym?wK(t,e):function(i,o){const s=xK(i,o),a=h3(s)+h3(i.Ie);return $P(s)&&$P(i.Ie)?bK(a):vK(i.serializer,a)}(t,e)}function GEe(t,e,r){return t instanceof Km?_K(t,e):t instanceof Ym?wK(t,e):r}function xK(t,e){return t instanceof s_?function(n){return $P(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class o_ extends W1{}class Km extends W1{constructor(e){super(),this.elements=e}}function _K(t,e){const r=SK(e);for(const n of t.elements)r.some(i=>qo(i,n))||r.push(n);return{arrayValue:{values:r}}}class Ym extends W1{constructor(e){super(),this.elements=e}}function wK(t,e){let r=SK(e);for(const n of t.elements)r=r.filter(i=>!qo(i,n));return{arrayValue:{values:r}}}class s_ extends W1{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function h3(t){return tr(t.integerValue||t.doubleValue)}function SK(t){return LR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qEe(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Km&&i instanceof Km||n instanceof Ym&&i instanceof Ym?cd(n.elements,i.elements,qo):n instanceof s_&&i instanceof s_?qo(n.Ie,i.Ie):n instanceof o_&&i instanceof o_}(t.transform,e.transform)}class HEe{constructor(e,r){this.version=e,this.transformResults=r}}class Vo{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Vo}static exists(e){return new Vo(void 0,e)}static updateTime(e){return new Vo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function J0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class z1{}function EK(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VR(t.key,Vo.none()):new Dg(t.key,t.data,Vo.none());{const r=t.data,n=Ei.empty();let i=new Yr(zr.comparator);for(let o of e.fields)if(!i.has(o)){let s=r.field(o);s===null&&o.length>1&&(o=o.popLast(),s=r.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Vc(t.key,n,new ro(i.toArray()),Vo.none())}}function KEe(t,e,r){t instanceof Dg?function(i,o,s){const a=i.value.clone(),l=m3(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Vc?function(i,o,s){if(!J0(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=m3(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(AK(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function zp(t,e,r,n){return t instanceof Dg?function(o,s,a,l){if(!J0(o.precondition,s))return a;const c=o.value.clone(),u=y3(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Vc?function(o,s,a,l){if(!J0(o.precondition,s))return a;const c=y3(o.fieldTransforms,l,s),u=s.data;return u.setAll(AK(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(o,s,a){return J0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function YEe(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=xK(n.transform,i||null);o!=null&&(r===null&&(r=Ei.empty()),r.set(n.field,o))}return r||null}function p3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&cd(n,i,(o,s)=>qEe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dg extends z1{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vc extends z1{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AK(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function m3(t,e,r){const n=new Map;kt(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,GEe(s,a,r[i]))}return n}function y3(t,e,r){const n=new Map;for(const i of t){const o=i.transform,s=r.data.field(i.field);n.set(i.field,zEe(o,s,e))}return n}class VR extends z1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QEe extends z1{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XEe{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&KEe(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=zp(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=zp(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=gK();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=r.has(i.key)?null:a;const l=EK(s,a);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ae.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),We())}isEqual(e){return this.batchId===e.batchId&&cd(this.mutations,e.mutations,(r,n)=>p3(r,n))&&cd(this.baseMutations,e.baseMutations,(r,n)=>p3(r,n))}}class WR{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){kt(e.mutations.length===n.length);let i=function(){return LEe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new WR(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JEe{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZEe{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er,He;function eAe(t){switch(t){default:return we();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function CK(t){if(t===void 0)return Cs("GRPC error has no .code"),K.UNKNOWN;switch(t){case er.OK:return K.OK;case er.CANCELLED:return K.CANCELLED;case er.UNKNOWN:return K.UNKNOWN;case er.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case er.INTERNAL:return K.INTERNAL;case er.UNAVAILABLE:return K.UNAVAILABLE;case er.UNAUTHENTICATED:return K.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case er.NOT_FOUND:return K.NOT_FOUND;case er.ALREADY_EXISTS:return K.ALREADY_EXISTS;case er.PERMISSION_DENIED:return K.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case er.ABORTED:return K.ABORTED;case er.OUT_OF_RANGE:return K.OUT_OF_RANGE;case er.UNIMPLEMENTED:return K.UNIMPLEMENTED;case er.DATA_LOSS:return K.DATA_LOSS;default:return we()}}(He=er||(er={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tAe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rAe=new df([4294967295,4294967295],0);function g3(t){const e=tAe().encode(t),r=new iEe;return r.update(e),new Uint8Array(r.digest())}function v3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new df([r,n],0),new df([i,o],0)]}class zR{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new hp(`Invalid padding: ${r}`);if(n<0)throw new hp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new hp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new hp(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*e.length-r,this.Ee=df.fromNumber(this.Te)}de(e,r,n){let i=e.add(r.multiply(df.fromNumber(n)));return i.compare(rAe)===1&&(i=new df([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const r=g3(e),[n,i]=v3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);if(!this.Ae(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new zR(o,i,r);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const r=g3(e),[n,i]=v3(r);for(let o=0;o<this.hashCount;o++){const s=this.de(n,i,o);this.Re(s)}}Re(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class hp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Mg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new G1(Ae.min(),i,new Ut(it),Ts(),We())}}class Mg{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Mg(n,r,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,r,n,i){this.Ve=e,this.removedTargetIds=r,this.key=n,this.me=i}}class TK{constructor(e,r){this.targetId=e,this.fe=r}}class PK{constructor(e,r,n=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class b3{constructor(){this.ge=0,this.pe=_3(),this.ye=yn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=We(),r=We(),n=We();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:we()}}),new Mg(this.ye,this.we,e,r,n)}Fe(){this.Se=!1,this.pe=_3()}Me(e,r){this.Se=!0,this.pe=this.pe.insert(e,r)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class nAe{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ts(),this.Qe=x3(),this.Ke=new Ut(it)}$e(e){for(const r of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me);for(const r of e.removedTargetIds)this.We(r,e.key,e.me)}Ge(e){this.forEachTarget(e,r=>{const n=this.ze(r);switch(e.state){case 0:this.je(r)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(r);break;case 3:this.je(r)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(r)&&(this.He(r),n.Ce(e.resumeToken));break;default:we()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ke.forEach((n,i)=>{this.je(i)&&r(i)})}Je(e){const r=e.targetId,n=e.fe.count,i=this.Ye(r);if(i){const o=i.target;if(MP(o))if(n===0){const s=new ve(o.path);this.We(r,s,un.newNoDocument(s,Ae.min()))}else kt(n===1);else{const s=this.Ze(r);if(s!==n){const a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,c)}}}}}Xe(e){const r=e.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let s,a;try{s=kc(n).toUint8Array()}catch(l){if(l instanceof iK)return ld("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zR(s,i,o)}catch(l){return ld(l instanceof hp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,r,n){return r.fe.count===n-this.rt(e,r.targetId)?0:2}rt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(r,o,null),i++)}),i}it(e){const r=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&MP(a.target)){const l=new ve(a.target.path);this.qe.get(l)!==null||this.st(s,l)||this.We(s,l,un.newNoDocument(l,e))}o.De&&(r.set(s,o.ve()),o.Fe())}});let n=We();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new G1(e,r,this.Ke,this.qe,n);return this.qe=Ts(),this.Qe=x3(),this.Ke=new Ut(it),i}Ue(e,r){if(!this.je(e))return;const n=this.st(e,r.key)?2:0;this.ze(e).Me(r.key,n),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(e))}We(e,r,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,r)?i.Me(r,1):i.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(e)),n&&(this.qe=this.qe.insert(r,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const r=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let r=this.ke.get(e);return r||(r=new b3,this.ke.set(e,r)),r}ot(e){let r=this.Qe.get(e);return r||(r=new Yr(it),this.Qe=this.Qe.insert(e,r)),r}je(e){const r=this.Ye(e)!==null;return r||ue("WatchChangeAggregator","Detected inactive target",e),r}Ye(e){const r=this.ke.get(e);return r&&r.be?null:this.Le._t(e)}He(e){this.ke.set(e,new b3),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.We(e,r,null)})}st(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function x3(){return new Ut(ve.comparator)}function _3(){return new Ut(ve.comparator)}const iAe=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),oAe=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),sAe=(()=>({and:"AND",or:"OR"}))();class aAe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function LP(t,e){return t.useProto3Json||L1(e)?e:{value:e}}function a_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lAe(t,e){return a_(t,e.toTimestamp())}function Wo(t){return kt(!!t),Ae.fromTimestamp(function(r){const n=Xa(r);return new hr(n.seconds,n.nanos)}(t))}function GR(t,e){return function(n){return new Rt(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function NK(t){const e=Rt.fromString(t);return kt(jK(e)),e}function BP(t,e){return GR(t.databaseId,e.path)}function NA(t,e){const r=NK(e);if(r.get(1)!==t.databaseId.projectId)throw new ge(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ge(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ve(kK(r))}function UP(t,e){return GR(t.databaseId,e)}function cAe(t){const e=NK(t);return e.length===4?Rt.emptyPath():kK(e)}function VP(t){return new Rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kK(t){return kt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function w3(t,e,r){return{name:BP(t,e),fields:r.value.mapValue.fields}}function uAe(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(kt(u===void 0||typeof u=="string"),yn.fromBase64String(u||"")):(kt(u===void 0||u instanceof Uint8Array),yn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const u=c.code===void 0?K.UNKNOWN:CK(c.code);return new ge(u,c.message||"")}(s);r=new PK(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=NA(t,n.document.name),o=Wo(n.document.updateTime),s=n.document.createTime?Wo(n.document.createTime):Ae.min(),a=new Ei({mapValue:{fields:n.document.fields}}),l=un.newFoundDocument(i,o,s,a),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Z0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=NA(t,n.document),o=n.readTime?Wo(n.readTime):Ae.min(),s=un.newNoDocument(i,o),a=n.removedTargetIds||[];r=new Z0([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=NA(t,n.document),o=n.removedTargetIds||[];r=new Z0([],o,i,null)}else{if(!("filter"in e))return we();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new ZEe(i,o),a=n.targetId;r=new TK(a,s)}}return r}function fAe(t,e){let r;if(e instanceof Dg)r={update:w3(t,e.key,e.value)};else if(e instanceof VR)r={delete:BP(t,e.key)};else if(e instanceof Vc)r={update:w3(t,e.key,e.data),updateMask:xAe(e.fieldMask)};else{if(!(e instanceof QEe))return we();r={verify:BP(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,s){const a=s.transform;if(a instanceof o_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Km)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ym)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof s_)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw we()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:lAe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we()}(t,e.precondition)),r}function dAe(t,e){return t&&t.length>0?(kt(e!==void 0),t.map(r=>function(i,o){let s=i.updateTime?Wo(i.updateTime):Wo(o);return s.isEqual(Ae.min())&&(s=Wo(o)),new HEe(s,i.transformResults||[])}(r,e))):[]}function hAe(t,e){return{documents:[UP(t,e.path)]}}function pAe(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=UP(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=UP(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(l){if(l.length!==0)return RK(Ho.create(l,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:xu(d.field),direction:gAe(d.dir)}}(c))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const s=LP(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),r}function mAe(t){let e=cAe(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){kt(n===1);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];r.where&&(o=function(d){const h=OK(d);return h instanceof Ho&&lK(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(d){return d.map(h=>function(m){return new i_(_u(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let a=null;r.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,L1(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new n_(p,h)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const h=!d.before,p=d.values||[];return new n_(p,h)}(r.endAt)),REe(e,i,s,o,a,"F",l,c)}function yAe(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function OK(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=_u(r.unaryFilter.field);return ur.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=_u(r.unaryFilter.field);return ur.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_u(r.unaryFilter.field);return ur.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_u(r.unaryFilter.field);return ur.create(s,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(r){return ur.create(_u(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ho.create(r.compositeFilter.filters.map(n=>OK(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(r.compositeFilter.op))}(t):we()}function gAe(t){return iAe[t]}function vAe(t){return oAe[t]}function bAe(t){return sAe[t]}function xu(t){return{fieldPath:t.canonicalString()}}function _u(t){return zr.fromServerFormat(t.fieldPath)}function RK(t){return t instanceof ur?function(r){if(r.op==="=="){if(l3(r.value))return{unaryFilter:{field:xu(r.field),op:"IS_NAN"}};if(a3(r.value))return{unaryFilter:{field:xu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(l3(r.value))return{unaryFilter:{field:xu(r.field),op:"IS_NOT_NAN"}};if(a3(r.value))return{unaryFilter:{field:xu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(r.field),op:vAe(r.op),value:r.value}}}(t):t instanceof Ho?function(r){const n=r.getFilters().map(i=>RK(i));return n.length===1?n[0]:{compositeFilter:{op:bAe(r.op),filters:n}}}(t):we()}function xAe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function jK(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,r,n,i,o=Ae.min(),s=Ae.min(),a=yn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ae{constructor(e){this.ut=e}}function wAe(t){const e=mAe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?FP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SAe{constructor(){this.on=new EAe}addToCollectionParentIndex(e,r){return this.on.add(r),H.resolve()}getCollectionParents(e,r){return H.resolve(this.on.getEntries(r))}addFieldIndex(e,r){return H.resolve()}deleteFieldIndex(e,r){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,r){return H.resolve()}getDocumentsMatchingTarget(e,r){return H.resolve(null)}getIndexType(e,r){return H.resolve(0)}getFieldIndexes(e,r){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,r){return H.resolve(Qa.min())}getMinOffsetFromCollectionGroup(e,r){return H.resolve(Qa.min())}updateCollectionGroup(e,r,n){return H.resolve()}updateIndexEntries(e,r){return H.resolve()}}class EAe{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Yr(Rt.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yr(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new dd(0)}static Nn(){return new dd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AAe{constructor(){this.changes=new Zd(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?H.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CAe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TAe{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&zp(n.mutation,i,ro.empty(),hr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,We()).next(()=>n))}getLocalViewOfDocuments(e,r,n=We()){const i=Ll();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let s=dp();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=Ll();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,We()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{r.set(s,a)})})}computeViews(e,r,n,i){let o=Ts();const s=Wp(),a=function(){return Wp()}();return r.forEach((l,c)=>{const u=n.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Vc)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),zp(u.mutation,c,u.mutation.getFieldMask(),hr.now())):s.set(c.key,ro.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),r.forEach((c,u)=>{var d;return a.set(c,new CAe(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,r){const n=Wp();let i=new Ut((s,a)=>s-a),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||ro.empty();u=a.applyToLocalView(c,u),n.set(l,u);const d=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=gK();u.forEach(h=>{if(!o.has(h)){const p=EK(r.get(h),n.get(h));p!==null&&d.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return H.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):jEe(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):H.resolve(Ll());let a=-1,l=o;return s.next(c=>H.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,We())).next(u=>({batchId:a,changes:yK(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ve(r)).next(n=>{let i=dp();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let s=dp();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,l=>{const c=function(d,h){return new B1(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,n,i).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(s=>{o.forEach((l,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,un.newInvalidDocument(u)))});let a=dp();return s.forEach((l,c)=>{const u=o.get(l);u!==void 0&&zp(u.mutation,c,ro.empty(),hr.now()),V1(r,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PAe{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,r){return H.resolve(this.ur.get(r))}saveBundleMetadata(e,r){return this.ur.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Wo(i.createTime)}}(r)),H.resolve()}getNamedQuery(e,r){return H.resolve(this.cr.get(r))}saveNamedQuery(e,r){return this.cr.set(r.name,function(i){return{name:i.name,query:wAe(i.bundledQuery),readTime:Wo(i.readTime)}}(r)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IAe{constructor(){this.overlays=new Ut(ve.comparator),this.lr=new Map}getOverlay(e,r){return H.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ll();return H.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.lt(e,r,o)}),H.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.lr.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(n)),H.resolve()}getOverlaysForCollection(e,r,n){const i=Ll(),o=r.length+1,s=new ve(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>n&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Ut((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=o.get(c.largestBatchId);u===null&&(u=Ll(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ll(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return H.resolve(a)}lt(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new JEe(r,n));let o=this.lr.get(r);o===void 0&&(o=We(),this.lr.set(r,o)),this.lr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.hr=new Yr(Cr.Pr),this.Ir=new Yr(Cr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,r){const n=new Cr(e,r);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.dr(new Cr(e,r))}Ar(e,r){e.forEach(n=>this.removeReference(n,r))}Rr(e){const r=new ve(new Rt([])),n=new Cr(r,e),i=new Cr(r,e+1),o=[];return this.Ir.forEachInRange([n,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const r=new ve(new Rt([])),n=new Cr(r,e),i=new Cr(r,e+1);let o=We();return this.Ir.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(e){const r=new Cr(e,0),n=this.hr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Cr{constructor(e,r){this.key=e,this.gr=r}static Pr(e,r){return ve.comparator(e.key,r.key)||it(e.gr,r.gr)}static Tr(e,r){return it(e.gr,r.gr)||ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NAe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.pr=1,this.yr=new Yr(Cr.Pr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new XEe(o,r,n,i);this.mutationQueue.push(s);for(const a of i)this.yr=this.yr.add(new Cr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,r){return H.resolve(this.wr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.Sr(n),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Cr(r,0),i=new Cr(r,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([n,i],s=>{const a=this.wr(s.gr);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Yr(it);return r.forEach(i=>{const o=new Cr(i,0),s=new Cr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{n=n.add(a.gr)})}),H.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;ve.isDocumentKey(o)||(o=o.child(""));const s=new Cr(new ve(o),0);let a=new Yr(it);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.gr)),!0)},s),H.resolve(this.br(a))}br(e){const r=[];return e.forEach(n=>{const i=this.wr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){kt(this.Dr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.yr;return H.forEach(r.mutations,i=>{const o=new Cr(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=n})}Fn(e){}containsKey(e,r){const n=new Cr(r,0),i=this.yr.firstAfterOrEqual(n);return H.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Dr(e,r){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const r=this.Sr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kAe{constructor(e){this.Cr=e,this.docs=function(){return new Ut(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,s=this.Cr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return H.resolve(n?n.document.mutableCopy():un.newInvalidDocument(r))}getEntries(e,r){let n=Ts();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():un.newInvalidDocument(i))}),H.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Ts();const s=r.path,a=new ve(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||yEe(mEe(u),n)<=0||(i.has(u.key)||V1(r,u))&&(o=o.insert(u.key,u.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,r,n,i){we()}vr(e,r){return H.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new OAe(this)}getSize(e){return H.resolve(this.size)}}class OAe extends AAe{constructor(e){super(),this._r=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this._r.addEntry(e,i)):this._r.removeEntry(n)}),H.waitFor(r)}getFromCache(e,r){return this._r.getEntry(e,r)}getAllFromCache(e,r){return this._r.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RAe{constructor(e){this.persistence=e,this.Fr=new Zd(r=>BR(r),UR),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Mr=0,this.Or=new qR,this.targetCount=0,this.Nr=dd.On()}forEachTarget(e,r){return this.Fr.forEach((n,i)=>r(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Mr&&(this.Mr=r),H.resolve()}kn(e){this.Fr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Nr=new dd(r),this.highestTargetId=r),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,r){return this.kn(r),this.targetCount+=1,H.resolve()}updateTargetData(e,r){return this.kn(r),H.resolve()}removeTargetData(e,r){return this.Fr.delete(r.target),this.Or.Rr(r.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,r){const n=this.Fr.get(r)||null;return H.resolve(n)}addMatchingKeys(e,r,n){return this.Or.Er(r,n),H.resolve()}removeMatchingKeys(e,r,n){this.Or.Ar(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Or.Rr(r),H.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Or.mr(r);return H.resolve(n)}containsKey(e,r){return H.resolve(this.Or.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jAe{constructor(e,r){this.Br={},this.overlays={},this.Lr=new DR(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new RAe(this),this.indexManager=new SAe,this.remoteDocumentCache=function(i){return new kAe(i)}(n=>this.referenceDelegate.Qr(n)),this.serializer=new _Ae(r),this.Kr=new PAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new IAe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Br[e.toKey()];return n||(n=new NAe(r,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,r,n){ue("MemoryPersistence","Starting transaction:",e);const i=new $Ae(this.Lr.next());return this.referenceDelegate.$r(),n(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,r){return H.or(Object.values(this.Br).map(n=>()=>n.containsKey(e,r)))}}class $Ae extends vEe{constructor(e){super(),this.currentSequenceNumber=e}}class HR{constructor(e){this.persistence=e,this.Gr=new qR,this.zr=null}static jr(e){return new HR(e)}get Hr(){if(this.zr)return this.zr;throw we()}addReference(e,r,n){return this.Gr.addReference(n,r),this.Hr.delete(n.toString()),H.resolve()}removeReference(e,r,n){return this.Gr.removeReference(n,r),this.Hr.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,r){return this.Hr.add(r.toString()),H.resolve()}removeTarget(e,r){this.Gr.Rr(r.targetId).forEach(i=>this.Hr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}$r(){this.zr=new Set}Ur(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Hr,n=>{const i=ve.fromPath(n);return this.Jr(e,i).next(o=>{o||r.removeEntry(i,Ae.min())})}).next(()=>(this.zr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Jr(e,r).next(n=>{n?this.Hr.delete(r.toString()):this.Hr.add(r.toString())})}Qr(e){return 0}Jr(e,r){return H.or([()=>H.resolve(this.Gr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Wr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.ki=n,this.qi=i}static Qi(e,r){let n=We(),i=We();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new KR(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DAe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MAe{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,r){this.Gi=e,this.indexManager=r,this.Ki=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.zi(e,r).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,r,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new DAe;return this.Hi(e,r,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,r,s,a.size)})}).next(()=>o.result)}Ji(e,r,n,i){return n.documentReadCount<this.Ui?(Mh()<=Qe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",bu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),H.resolve()):(Mh()<=Qe.DEBUG&&ue("QueryEngine","Query:",bu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(Mh()<=Qe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",bu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uo(r))):H.resolve())}zi(e,r){if(d3(r))return H.resolve(null);let n=Uo(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=FP(r,null,"F"),n=Uo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const s=We(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Yi(r,a);return this.Zi(r,c,s,l.readTime)?this.zi(e,FP(r,null,"F")):this.Xi(e,c,r,l)}))})))}ji(e,r,n,i){return d3(r)||i.isEqual(Ae.min())?H.resolve(null):this.Gi.getDocuments(e,n).next(o=>{const s=this.Yi(r,o);return this.Zi(r,s,n,i)?H.resolve(null):(Mh()<=Qe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bu(r)),this.Xi(e,s,r,pEe(i,-1)).next(a=>a))})}Yi(e,r){let n=new Yr(pK(e));return r.forEach((i,o)=>{V1(e,o)&&(n=n.add(o))}),n}Zi(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,r,n){return Mh()<=Qe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",bu(r)),this.Gi.getDocumentsMatchingQuery(e,r,Qa.min(),n)}Xi(e,r,n,i){return this.Gi.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FAe{constructor(e,r,n,i){this.persistence=e,this.es=r,this.serializer=i,this.ts=new Ut(it),this.ns=new Zd(o=>BR(o),UR),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TAe(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ts))}}function LAe(t,e,r,n){return new FAe(t,e,r,n)}async function $K(t,e){const r=Ce(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.os(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let l=We();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of o){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})}function BAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let p=H.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(y=>{const g=c.docVersions.get(m);kt(g!==null),y.version.compareTo(g)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=We();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function DK(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.qr.getLastRemoteSnapshotVersion(r))}function UAe(t,e){const r=Ce(t),n=e.snapshotVersion;let i=r.ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=r.ss.newChangeBuffer({trackRemovals:!0});i=r.ts;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(r.qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>r.qr.addMatchingKeys(o,u.addedDocuments,d)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(yn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(d,p),function(y,g,b){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,u)&&a.push(r.qr.updateTargetData(o,p))});let l=Ts(),c=We();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(VAe(o,s,e.documentUpdates).next(u=>{l=u.us,c=u.cs})),!n.isEqual(Ae.min())){const u=r.qr.getLastRemoteSnapshotVersion(o).next(d=>r.qr.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(u)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(r.ts=i,o))}function VAe(t,e,r){let n=We(),i=We();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=Ts();return r.forEach((a,l)=>{const c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ae.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:s,cs:i}})}function WAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function zAe(t,e){const r=Ce(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.qr.getTargetData(n,e).next(o=>o?(i=o,H.resolve(i)):r.qr.allocateTargetId(n).next(s=>(i=new xa(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.qr.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.ts.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ts=r.ts.insert(n.targetId,n),r.ns.set(e,n.targetId)),n})}async function WP(t,e,r){const n=Ce(t),i=n.ts.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!$g(s))throw s;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.ts=n.ts.remove(e),n.ns.delete(i.target)}function S3(t,e,r){const n=Ce(t);let i=Ae.min(),o=We();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){const d=Ce(l),h=d.ns.get(u);return h!==void 0?H.resolve(d.ts.get(h)):d.qr.getTargetData(c,u)}(n,s,Uo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>n.es.getDocumentsMatchingQuery(s,e,r?i:Ae.min(),r?o:We())).next(a=>(GAe(n,DEe(e),a),{documents:a,ls:o})))}function GAe(t,e,r){let n=t.rs.get(e)||Ae.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.rs.set(e,n)}class E3{constructor(){this.activeTargetIds=VEe()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qAe{constructor(){this.eo=new E3,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,r,n){this.no[e]=r}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new E3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HAe{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kv=null;function kA(){return Kv===null?Kv=function(){return 268435456+Math.round(2147483648*Math.random())}():Kv++,"0x"+Kv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KAe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class QAe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=n+"://"+r.host,this.fo=`projects/${i}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(r,n,i,o,s){const a=kA(),l=this.So(r,n);ue("RestConnection",`Sending RPC '${r}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,o,s),this.Do(r,l,c,i).then(u=>(ue("RestConnection",`Received RPC '${r}' ${a}: `,u),u),u=>{throw ld("RestConnection",`RPC '${r}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Co(r,n,i,o,s,a){return this.wo(r,n,i,o,s)}bo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>r[s]=o),i&&i.headers.forEach((o,s)=>r[s]=o)}So(r,n){const i=KAe[r];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,r,n,i){const o=kA();return new Promise((s,a)=>{const l=new nEe;l.setWithCredentials(!0),l.listenOnce(eEe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case IA.NO_ERROR:const u=l.getResponseJson();ue(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case IA.TIMEOUT:ue(nn,`RPC '${e}' ${o} timed out`),a(new ge(K.DEADLINE_EXCEEDED,"Request time out"));break;case IA.HTTP_ERROR:const d=l.getStatus();if(ue(nn,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(b)>=0?b:K.UNKNOWN}(p.status);a(new ge(m,p.message))}else a(new ge(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ge(K.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{ue(nn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);ue(nn,`RPC '${e}' ${o} sending request:`,i),l.send(r,"POST",c,n,15)})}vo(e,r,n){const i=kA(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=JSe(),a=ZSe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new rEe({})),this.bo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=o.join("");ue(nn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);let h=!1,p=!1;const m=new YAe({co:g=>{p?ue(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(h||(ue(nn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),ue(nn,`RPC '${e}' stream ${i} sending:`,g),d.send(g))},lo:()=>d.close()}),y=(g,b,v)=>{g.listen(b,x=>{try{v(x)}catch(S){setTimeout(()=>{throw S},0)}})};return y(d,Gv.EventType.OPEN,()=>{p||ue(nn,`RPC '${e}' stream ${i} transport opened.`)}),y(d,Gv.EventType.CLOSE,()=>{p||(p=!0,ue(nn,`RPC '${e}' stream ${i} transport closed`),m.Ro())}),y(d,Gv.EventType.ERROR,g=>{p||(p=!0,ld(nn,`RPC '${e}' stream ${i} transport errored:`,g),m.Ro(new ge(K.UNAVAILABLE,"The operation could not be completed")))}),y(d,Gv.EventType.MESSAGE,g=>{var b;if(!p){const v=g.data[0];kt(!!v);const x=v,S=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(S){ue(nn,`RPC '${e}' stream ${i} received error:`,S);const _=S.status;let w=function(I){const T=er[I];if(T!==void 0)return CK(T)}(_),A=S.message;w===void 0&&(w=K.INTERNAL,A="Unknown error status: "+_+" with message "+S.message),p=!0,m.Ro(new ge(w,A)),d.close()}else ue(nn,`RPC '${e}' stream ${i} received:`,v),m.Vo(v)}}),y(a,tEe.STAT_EVENT,g=>{g.stat===r3.PROXY?ue(nn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===r3.NOPROXY&&ue(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ao()},0),m}}function OA(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){return new aAe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e,r,n=1e3,i=1.5,o=6e4){this.si=e,this.timerId=r,this.Fo=n,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const r=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,r-n);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,r,n,i,o,s,a,l){this.si=e,this.Ko=n,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new MK(e,r)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,r){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():r&&r.code===K.RESOURCE_EXHAUSTED?(Cs(r.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):r&&r.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(r)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),r=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Uo===r&&this.s_(n,i)},n=>{e(()=>{const i=new ge(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.o_(i)})})}s_(e,r){const n=this.i_(this.Uo);this.stream=this.__(e,r),this.stream.ho(()=>{n(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{n(()=>this.o_(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return r=>{this.si.enqueueAndForget(()=>this.Uo===e?r():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XAe extends FK{constructor(e,r,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}__(e,r){return this.connection.vo("Listen",e,r)}onMessage(e){this.zo.reset();const r=uAe(this.serializer,e),n=function(o){if(!("targetChange"in o))return Ae.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ae.min():s.readTime?Wo(s.readTime):Ae.min()}(e);return this.listener.a_(r,n)}u_(e){const r={};r.database=VP(this.serializer),r.addTarget=function(o,s){let a;const l=s.target;if(a=MP(l)?{documents:hAe(o,l)}:{query:pAe(o,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=IK(o,s.resumeToken);const c=LP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ae.min())>0){a.readTime=a_(o,s.snapshotVersion.toTimestamp());const c=LP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=yAe(this.serializer,e);n&&(r.labels=n),this.e_(r)}c_(e){const r={};r.database=VP(this.serializer),r.removeTarget=e,this.e_(r)}}class JAe extends FK{constructor(e,r,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,r){return this.connection.vo("Write",e,r)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const r=dAe(e.writeResults,e.commitTime),n=Wo(e.commitTime);return this.listener.I_(n,r)}return kt(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=VP(this.serializer),this.e_(e)}P_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>fAe(this.serializer,n))};this.e_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZAe extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ge(K.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,r,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,r,n,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ge(K.UNKNOWN,i.toString())})}Co(e,r,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,r,n,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(K.UNKNOWN,o.toString())})}terminate(){this.d_=!0}}class eCe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Cs(r),this.f_=!1):ue("OnlineStateTracker",r)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tCe{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{n.enqueueAndForget(async()=>{Wc(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ce(l);c.C_.add(4),await Fg(c),c.M_.set("Unknown"),c.C_.delete(4),await H1(c)}(this))})}),this.M_=new eCe(n,i)}}async function H1(t){if(Wc(t))for(const e of t.v_)await e(!0)}async function Fg(t){for(const e of t.v_)await e(!1)}function LK(t,e){const r=Ce(t);r.D_.has(e.targetId)||(r.D_.set(e.targetId,e),XR(r)?QR(r):eh(r).Ho()&&YR(r,e))}function BK(t,e){const r=Ce(t),n=eh(r);r.D_.delete(e),n.Ho()&&UK(r,e),r.D_.size===0&&(n.Ho()?n.Zo():Wc(r)&&r.M_.set("Unknown"))}function YR(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}eh(t).u_(e)}function UK(t,e){t.x_.Oe(e),eh(t).c_(e)}function QR(t){t.x_=new nAe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),eh(t).start(),t.M_.g_()}function XR(t){return Wc(t)&&!eh(t).jo()&&t.D_.size>0}function Wc(t){return Ce(t).C_.size===0}function VK(t){t.x_=void 0}async function rCe(t){t.D_.forEach((e,r)=>{YR(t,e)})}async function nCe(t,e){VK(t),XR(t)?(t.M_.w_(e),QR(t)):t.M_.set("Unknown")}async function iCe(t,e,r){if(t.M_.set("Online"),e instanceof PK&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.D_.delete(a),i.x_.removeTarget(a))}(t,e)}catch(n){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await l_(t,n)}else if(e instanceof Z0?t.x_.$e(e):e instanceof TK?t.x_.Je(e):t.x_.Ge(e),!r.isEqual(Ae.min()))try{const n=await DK(t.localStore);r.compareTo(n)>=0&&await function(o,s){const a=o.x_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.D_.get(c);u&&o.D_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const u=o.D_.get(l);if(!u)return;o.D_.set(l,u.withResumeToken(yn.EMPTY_BYTE_STRING,u.snapshotVersion)),UK(o,l);const d=new xa(u.target,l,c,u.sequenceNumber);YR(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ue("RemoteStore","Failed to raise snapshot:",n),await l_(t,n)}}async function l_(t,e,r){if(!$g(e))throw e;t.C_.add(1),await Fg(t),t.M_.set("Offline"),r||(r=()=>DK(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await r(),t.C_.delete(1),await H1(t)})}function WK(t,e){return e().catch(r=>l_(t,r,e))}async function K1(t){const e=Ce(t),r=Ja(e);let n=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;oCe(e);)try{const i=await WAe(e.localStore,n);if(i===null){e.b_.length===0&&r.Zo();break}n=i.batchId,sCe(e,i)}catch(i){await l_(e,i)}zK(e)&&GK(e)}function oCe(t){return Wc(t)&&t.b_.length<10}function sCe(t,e){t.b_.push(e);const r=Ja(t);r.Ho()&&r.h_&&r.P_(e.mutations)}function zK(t){return Wc(t)&&!Ja(t).jo()&&t.b_.length>0}function GK(t){Ja(t).start()}async function aCe(t){Ja(t).E_()}async function lCe(t){const e=Ja(t);for(const r of t.b_)e.P_(r.mutations)}async function cCe(t,e,r){const n=t.b_.shift(),i=WR.from(n,e,r);await WK(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await K1(t)}async function uCe(t,e){e&&Ja(t).h_&&await async function(n,i){if(function(s){return eAe(s)&&s!==K.ABORTED}(i.code)){const o=n.b_.shift();Ja(n).Yo(),await WK(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await K1(n)}}(t,e),zK(t)&&GK(t)}async function C3(t,e){const r=Ce(t);r.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const n=Wc(r);r.C_.add(3),await Fg(r),n&&r.M_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.C_.delete(3),await H1(r)}async function fCe(t,e){const r=Ce(t);e?(r.C_.delete(2),await H1(r)):e||(r.C_.add(2),await Fg(r),r.M_.set("Unknown"))}function eh(t){return t.O_||(t.O_=function(r,n,i){const o=Ce(r);return o.A_(),new XAe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:rCe.bind(null,t),Io:nCe.bind(null,t),a_:iCe.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),XR(t)?QR(t):t.M_.set("Unknown")):(await t.O_.stop(),VK(t))})),t.O_}function Ja(t){return t.N_||(t.N_=function(r,n,i){const o=Ce(r);return o.A_(),new JAe(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:aCe.bind(null,t),Io:uCe.bind(null,t),T_:lCe.bind(null,t),I_:cCe.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await K1(t)):(await t.N_.stop(),t.b_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const s=Date.now()+n,a=new JR(e,r,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZR(t,e){if(Cs("AsyncQueue",`${e}: ${t}`),$g(t))return new ge(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ve.comparator(r.key,n.key):(r,n)=>ve.comparator(r.key,n.key),this.keyedMap=dp(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new hf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof hf)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new hf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.B_=new Ut(ve.comparator)}track(e){const r=e.doc.key,n=this.B_.get(r);n?e.type!==0&&n.type===3?this.B_=this.B_.insert(r,e):e.type===3&&n.type!==1?this.B_=this.B_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.B_=this.B_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.B_=this.B_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.B_=this.B_.remove(r):e.type===1&&n.type===2?this.B_=this.B_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.B_=this.B_.insert(r,{type:2,doc:e.doc}):we():this.B_=this.B_.insert(r,e)}L_(){const e=[];return this.B_.inorderTraversal((r,n)=>{e.push(n)}),e}}class hd{constructor(e,r,n,i,o,s,a,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,o){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new hd(e,r,hf.emptySet(r),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dCe{constructor(){this.k_=void 0,this.listeners=[]}}class hCe{constructor(){this.queries=new Zd(e=>hK(e),U1),this.onlineState="Unknown",this.q_=new Set}}async function pCe(t,e){const r=Ce(t),n=e.query;let i=!1,o=r.queries.get(n);if(o||(i=!0,o=new dCe),i)try{o.k_=await r.onListen(n)}catch(s){const a=ZR(s,`Initialization of query '${bu(e.query)}' failed`);return void e.onError(a)}r.queries.set(n,o),o.listeners.push(e),e.Q_(r.onlineState),o.k_&&e.K_(o.k_)&&ej(r)}async function mCe(t,e){const r=Ce(t),n=e.query;let i=!1;const o=r.queries.get(n);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function yCe(t,e){const r=Ce(t);let n=!1;for(const i of e){const o=i.query,s=r.queries.get(o);if(s){for(const a of s.listeners)a.K_(i)&&(n=!0);s.k_=i}}n&&ej(r)}function gCe(t,e,r){const n=Ce(t),i=n.queries.get(e);if(i)for(const o of i.listeners)o.onError(r);n.queries.delete(e)}function ej(t){t.q_.forEach(e=>{e.next()})}class vCe{constructor(e,r,n){this.query=e,this.U_=r,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new hd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.W_?this.z_(e)&&(this.U_.next(e),r=!0):this.j_(e,this.onlineState)&&(this.H_(e),r=!0),this.G_=e,r}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let r=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),r=!0),r}j_(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const r=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}H_(e){e=hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e){this.key=e}}class HK{constructor(e){this.key=e}}class bCe{constructor(e,r){this.query=e,this.ia=r,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=We(),this.mutatedKeys=We(),this._a=pK(e),this.aa=new hf(this._a)}get ua(){return this.ia}ca(e,r){const n=r?r.la:new T3,i=r?r.aa:this.aa;let o=r?r.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),p=V1(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(n.track({type:3,doc:p}),g=!0):this.ha(h,p)||(n.track({type:2,doc:p}),g=!0,(l&&this._a(p,l)>0||c&&this._a(p,c)<0)&&(a=!0)):!h&&p?(n.track({type:0,doc:p}),g=!0):h&&!p&&(n.track({type:1,doc:h}),g=!0,(l||c)&&(a=!0)),g&&(p?(s=s.add(p),o=y?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),n.track({type:1,doc:u})}return{aa:s,la:n,Zi:a,mutatedKeys:o}}ha(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((c,u)=>function(h,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return m(h)-m(p)}(c.type,u.type)||this._a(c.doc,u.doc)),this.Pa(n);const s=r?this.Ia():[],a=this.oa.size===0&&this.current?1:0,l=a!==this.sa;return this.sa=a,o.length!==0||l?{snapshot:new hd(this.query,e.aa,i,o,e.mutatedKeys,a===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new T3,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(r=>this.ia=this.ia.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.ia=this.ia.delete(r)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=We(),this.aa.forEach(n=>{this.Ea(n.key)&&(this.oa=this.oa.add(n.key))});const r=[];return e.forEach(n=>{this.oa.has(n)||r.push(new HK(n))}),this.oa.forEach(n=>{e.has(n)||r.push(new qK(n))}),r}da(e){this.ia=e.ls,this.oa=We();const r=this.ca(e.documents);return this.applyChanges(r,!0)}Aa(){return hd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class xCe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class _Ce{constructor(e){this.key=e,this.Ra=!1}}class wCe{constructor(e,r,n,i,o,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Zd(a=>hK(a),U1),this.fa=new Map,this.ga=new Set,this.pa=new Ut(ve.comparator),this.ya=new Map,this.wa=new qR,this.Sa={},this.ba=new Map,this.Da=dd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function SCe(t,e){const r=RCe(t);let n,i;const o=r.ma.get(e);if(o)n=o.targetId,r.sharedClientState.addLocalQueryTarget(n),i=o.view.Aa();else{const s=await zAe(r.localStore,Uo(e)),a=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await ECe(r,e,n,a==="current",s.resumeToken),r.isPrimaryClient&&LK(r.remoteStore,s)}return i}async function ECe(t,e,r,n,i){t.va=(d,h,p)=>async function(y,g,b,v){let x=g.view.ca(b);x.Zi&&(x=await S3(y.localStore,g.query,!1).then(({documents:w})=>g.view.ca(w,x)));const S=v&&v.targetChanges.get(g.targetId),_=g.view.applyChanges(x,y.isPrimaryClient,S);return I3(y,g.targetId,_.Ta),_.snapshot}(t,d,h,p);const o=await S3(t.localStore,e,!0),s=new bCe(e,o.ls),a=s.ca(o.documents),l=Mg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);I3(t,r,c.Ta);const u=new xCe(e,r,s);return t.ma.set(e,u),t.fa.has(r)?t.fa.get(r).push(e):t.fa.set(r,[e]),c.snapshot}async function ACe(t,e){const r=Ce(t),n=r.ma.get(e),i=r.fa.get(n.targetId);if(i.length>1)return r.fa.set(n.targetId,i.filter(o=>!U1(o,e))),void r.ma.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await WP(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),BK(r.remoteStore,n.targetId),zP(r,n.targetId)}).catch(jg)):(zP(r,n.targetId),await WP(r.localStore,n.targetId,!0))}async function CCe(t,e,r){const n=jCe(t);try{const i=await function(s,a){const l=Ce(s),c=hr.now(),u=a.reduce((p,m)=>p.add(m.key),We());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Ts(),y=We();return l.ss.getEntries(p,u).next(g=>{m=g,m.forEach((b,v)=>{v.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(g=>{d=g;const b=[];for(const v of a){const x=YEe(v,d.get(v.key).overlayedDocument);x!=null&&b.push(new Vc(v.key,x,oK(x.value.mapValue),Vo.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,a)}).next(g=>{h=g;const b=g.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,g.batchId,b)})}).then(()=>({batchId:h.batchId,changes:yK(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let c=s.Sa[s.currentUser.toKey()];c||(c=new Ut(it)),c=c.insert(a,l),s.Sa[s.currentUser.toKey()]=c}(n,i.batchId,r),await Lg(n,i.changes),await K1(n.remoteStore)}catch(i){const o=ZR(i,"Failed to persist write");r.reject(o)}}async function KK(t,e){const r=Ce(t);try{const n=await UAe(r.localStore,e);e.targetChanges.forEach((i,o)=>{const s=r.ya.get(o);s&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?kt(s.Ra):i.removedDocuments.size>0&&(kt(s.Ra),s.Ra=!1))}),await Lg(r,n,e)}catch(n){await jg(n)}}function P3(t,e,r){const n=Ce(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ma.forEach((o,s)=>{const a=s.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Ce(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.listeners)h.Q_(a)&&(c=!0)}),c&&ej(l)}(n.eventManager,e),i.length&&n.Va.a_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function TCe(t,e,r){const n=Ce(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.ya.get(e),o=i&&i.key;if(o){let s=new Ut(ve.comparator);s=s.insert(o,un.newNoDocument(o,Ae.min()));const a=We().add(o),l=new G1(Ae.min(),new Map,new Ut(it),s,a);await KK(n,l),n.pa=n.pa.remove(o),n.ya.delete(e),tj(n)}else await WP(n.localStore,e,!1).then(()=>zP(n,e,r)).catch(jg)}async function PCe(t,e){const r=Ce(t),n=e.batch.batchId;try{const i=await BAe(r.localStore,e);QK(r,n,null),YK(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Lg(r,i)}catch(i){await jg(i)}}async function ICe(t,e,r){const n=Ce(t);try{const i=await function(s,a){const l=Ce(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(kt(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);QK(n,e,r),YK(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Lg(n,i)}catch(i){await jg(i)}}function YK(t,e){(t.ba.get(e)||[]).forEach(r=>{r.resolve()}),t.ba.delete(e)}function QK(t,e,r){const n=Ce(t);let i=n.Sa[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Sa[n.currentUser.toKey()]=i}}function zP(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.fa.get(e))t.ma.delete(n),r&&t.Va.Fa(n,r);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(n=>{t.wa.containsKey(n)||XK(t,n)})}function XK(t,e){t.ga.delete(e.path.canonicalString());const r=t.pa.get(e);r!==null&&(BK(t.remoteStore,r),t.pa=t.pa.remove(e),t.ya.delete(r),tj(t))}function I3(t,e,r){for(const n of r)n instanceof qK?(t.wa.addReference(n.key,e),NCe(t,n)):n instanceof HK?(ue("SyncEngine","Document no longer in limbo: "+n.key),t.wa.removeReference(n.key,e),t.wa.containsKey(n.key)||XK(t,n.key)):we()}function NCe(t,e){const r=e.key,n=r.path.canonicalString();t.pa.get(r)||t.ga.has(n)||(ue("SyncEngine","New document in limbo: "+r),t.ga.add(n),tj(t))}function tj(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const r=new ve(Rt.fromString(e)),n=t.Da.next();t.ya.set(n,new _Ce(r)),t.pa=t.pa.insert(r,n),LK(t.remoteStore,new xa(Uo(dK(r.path)),n,"TargetPurposeLimboResolution",DR._e))}}async function Lg(t,e,r){const n=Ce(t),i=[],o=[],s=[];n.ma.isEmpty()||(n.ma.forEach((a,l)=>{s.push(n.va(l,e,r).then(c=>{if((c||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=KR.Qi(l.targetId,c);o.push(u)}}))}),await Promise.all(s),n.Va.a_(i),await async function(l,c){const u=Ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>H.forEach(c,h=>H.forEach(h.ki,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>H.forEach(h.qi,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!$g(d))throw d;ue("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=u.ts.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);u.ts=u.ts.insert(h,y)}}}(n.localStore,o))}async function kCe(t,e){const r=Ce(t);if(!r.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const n=await $K(r.localStore,e);r.currentUser=e,function(o,s){o.ba.forEach(a=>{a.forEach(l=>{l.reject(new ge(K.CANCELLED,s))})}),o.ba.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Lg(r,n._s)}}function OCe(t,e){const r=Ce(t),n=r.ya.get(e);if(n&&n.Ra)return We().add(n.key);{let i=We();const o=r.fa.get(e);if(!o)return i;for(const s of o){const a=r.ma.get(s);i=i.unionWith(a.view.ua)}return i}}function RCe(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OCe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TCe.bind(null,e),e.Va.a_=yCe.bind(null,e.eventManager),e.Va.Fa=gCe.bind(null,e.eventManager),e}function jCe(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PCe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ICe.bind(null,e),e}class N3{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=q1(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return LAe(this.persistence,new MAe,e.initialUser,this.serializer)}createPersistence(e){return new jAe(HR.jr,this.serializer)}createSharedClientState(e){return new qAe}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $Ce{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>P3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=kCe.bind(null,this.syncEngine),await fCe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hCe}()}createDatastore(e){const r=q1(e.databaseInfo.databaseId),n=function(o){return new QAe(o)}(e.databaseInfo);return function(o,s,a,l){return new ZAe(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,s,a){return new tCe(n,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,r=>P3(this.syncEngine,r,0),function(){return A3.D()?new A3:new HAe}())}createSyncEngine(e,r){return function(i,o,s,a,l,c,u){const d=new wCe(i,o,s,a,l,c);return u&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(r){const n=Ce(r);ue("RemoteStore","RemoteStore shutting down."),n.C_.add(5),await Fg(n),n.F_.shutdown(),n.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DCe{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MCe{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=rK.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async o=>{ue("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ZR(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function RA(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await $K(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function k3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await LCe(t);ue("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>C3(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>C3(e.remoteStore,o)),t._onlineComponents=e}function FCe(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function LCe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await RA(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!FCe(r))throw r;ld("Error using user provided cache. Falling back to memory cache: "+r),await RA(t,new N3)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await RA(t,new N3);return t._offlineComponents}async function JK(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await k3(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await k3(t,new $Ce))),t._onlineComponents}function BCe(t){return JK(t).then(e=>e.syncEngine)}async function UCe(t){const e=await JK(t),r=e.eventManager;return r.onListen=SCe.bind(null,e.syncEngine),r.onUnlisten=ACe.bind(null,e.syncEngine),r}function VCe(t,e,r={}){const n=new Da;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,c){const u=new DCe({next:h=>{s.enqueueAndForget(()=>mCe(o,d)),h.fromCache&&l.source==="server"?c.reject(new ge(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new vCe(a,u,{includeMetadataChanges:!0,J_:!0});return pCe(o,d)}(await UCe(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZK(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(t,e,r){if(!r)throw new ge(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WCe(t,e,r,n){if(e===!0&&n===!0)throw new ge(K.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function R3(t){if(!ve.isDocumentKey(t))throw new ge(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function j3(t){if(ve.isDocumentKey(t))throw new ge(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function pd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=rj(t);throw new ge(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WCe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZK((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y1{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ge(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $3(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new oEe;switch(n.type){case"firstParty":return new cEe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ge(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=O3.get(r);n&&(ue("ComponentProvider","Removing Datastore"),O3.delete(r),n.terminate())}(this),Promise.resolve()}}function zCe(t,e,r,n={}){var i;const o=(t=pd(t,Y1))._getSettings(),s=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ld("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=ln.MOCK_USER;else{a=lk(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ge(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ln(c)}t._authCredentials=new sEe(new tK(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Q1(this.firestore,e,this._query)}}class ki{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ki(this.firestore,e,this._key)}}class Ma extends Q1{constructor(e,r,n){super(e,r,dK(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new ve(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function GCe(t,e,...r){if(t=Xr(t),eY("collection","path",e),t instanceof Y1){const n=Rt.fromString(e,...r);return j3(n),new Ma(t,null,n)}{if(!(t instanceof ki||t instanceof Ma))throw new ge(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Rt.fromString(e,...r));return j3(n),new Ma(t.firestore,null,n)}}function nj(t,e,...r){if(t=Xr(t),arguments.length===1&&(e=rK.newId()),eY("doc","path",e),t instanceof Y1){const n=Rt.fromString(e,...r);return R3(n),new ki(t,null,new ve(n))}{if(!(t instanceof ki||t instanceof Ma))throw new ge(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Rt.fromString(e,...r));return R3(n),new ki(t.firestore,t instanceof Ma?t.converter:null,new ve(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qCe{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new MK(this,"async_queue_retry"),this.iu=()=>{const r=OA();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.zo.Qo()};const e=OA();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const r=OA();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const r=new Da;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!$g(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const r=this.Ja.then(()=>(this.tu=!0,e().catch(n=>{this.eu=n,this.tu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Cs("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.tu=!1,n))));return this.Ja=r,r}enqueueAfterDelay(e,r,n){this.su(),this.ru.indexOf(e)>-1&&(r=0);const i=JR.createAndSchedule(this,e,r,n,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&we()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const r of this.Xa)if(r.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Xa)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const r=this.Xa.indexOf(e);this.Xa.splice(r,1)}}class X1 extends Y1{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new qCe}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rY(this),this._firestoreClient.terminate()}}function HCe(t,e){const r=typeof t=="object"?t:hk(),n=typeof t=="string"?t:e||"(default)",i=fk(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=ak("firestore");o&&zCe(i,...o)}return i}function tY(t){return t._firestoreClient||rY(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rY(t){var e,r,n;const i=t._freezeSettings(),o=function(a,l,c,u){return new _Ee(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,ZK(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new MCe(t._authCredentials,t._appCheckCredentials,t._queue,o),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this._byteString=e}static fromBase64String(e){try{return new md(yn.fromBase64String(e))}catch(r){throw new ge(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new md(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ge(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ge(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ge(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KCe=/^__.*__$/;class YCe{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Vc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Dg(e,this.data,r,this.fieldTransforms)}}function iY(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class sj{constructor(e,r,n,i,o,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new sj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Tu({path:n,du:!1});return i.Au(e),i}Ru(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return c_(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(iY(this.Iu)&&KCe.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class QCe{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||q1(e)}pu(e,r,n,i=!1){return new sj({Iu:e,methodName:r,gu:n,path:zr.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XCe(t){const e=t._freezeSettings(),r=q1(t._databaseId);return new QCe(t._databaseId,!!e.ignoreUndefinedProperties,r)}function JCe(t,e,r,n,i,o={}){const s=t.pu(o.merge||o.mergeFields?2:0,e,r,i);lY("Data must be an object, but it was:",s,n);const a=sY(n,s);let l,c;if(o.merge)l=new ro(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const h=ZCe(e,d,r);if(!s.contains(h))throw new ge(K.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);tTe(u,h)||u.push(h)}l=new ro(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new YCe(new Ei(a),l,c)}function oY(t,e){if(aY(t=Xr(t)))return lY("Unsupported field value:",e,t),sY(t,e);if(t instanceof nY)return function(n,i){if(!iY(i.Iu))throw i.mu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(n,i){const o=[];let s=0;for(const a of n){let l=oY(a,i.Vu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=Xr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return WEe(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=hr.fromDate(n);return{timestampValue:a_(i.serializer,o)}}if(n instanceof hr){const o=new hr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:a_(i.serializer,o)}}if(n instanceof oj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof md)return{bytesValue:IK(i.serializer,n._byteString)};if(n instanceof ki){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:GR(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.mu(`Unsupported field value: ${rj(n)}`)}(t,e)}function sY(t,e){const r={};return nK(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jd(t,(n,i)=>{const o=oY(i,e.Eu(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function aY(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof hr||t instanceof oj||t instanceof md||t instanceof ki||t instanceof nY)}function lY(t,e,r){if(!aY(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=rj(r);throw n==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+n)}}function ZCe(t,e,r){if((e=Xr(e))instanceof ij)return e._internalPath;if(typeof e=="string")return cY(t,e);throw c_("Field path arguments must be of type string or ",t,!1,void 0,r)}const eTe=new RegExp("[~\\*/\\[\\]]");function cY(t,e,r){if(e.search(eTe)>=0)throw c_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ij(...e.split("."))._internalPath}catch{throw c_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function c_(t,e,r,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new ge(K.INVALID_ARGUMENT,a+t+l)}function tTe(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(fY("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class rTe extends uY{data(){return super.data()}}function fY(t,e){return typeof e=="string"?cY(t,e):e instanceof ij?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nTe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iTe{convertValue(e,r="none"){switch(Oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw we()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Jd(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertGeoPoint(e){return new oj(tr(e.latitude),tr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=FR(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Gm(e));default:return null}}convertTimestamp(e){const r=Xa(e);return new hr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Rt.fromString(e);kt(jK(n));const i=new qm(n.get(1),n.get(3)),o=new ve(n.popFirst(5));return i.isEqual(r)||Cs(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oTe(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sTe extends uY{constructor(e,r,n,i,o,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new eb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(fY("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class eb extends sTe{data(e={}){return super.data(e)}}class aTe{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Yv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new eb(this._firestore,this._userDataWriter,n.key,n,new Yv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ge(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new eb(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new eb(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yv(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:lTe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function lTe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class cTe extends iTe{constructor(e){super(),this.firestore=e}convertBytes(e){return new md(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,r)}}function uTe(t){t=pd(t,Q1);const e=pd(t.firestore,X1),r=tY(e),n=new cTe(e);return nTe(t._query),VCe(r,t._query).then(i=>new aTe(e,n,t,i))}function dY(t,e,r){t=pd(t,ki);const n=pd(t.firestore,X1),i=oTe(t.converter,e,r);return hY(n,[JCe(XCe(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Vo.none())])}function fTe(t){return hY(pd(t.firestore,X1),[new VR(t._key,Vo.none())])}function hY(t,e){return function(n,i){const o=new Da;return n.asyncQueue.enqueueAndForget(async()=>CCe(await BCe(n),i,o)),o.promise}(tY(t),e)}(function(e,r=!0){(function(i){Xd=i})(dk),Uf(new wc("firestore",(n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new X1(new aEe(n.getProvider("auth-internal")),new fEe(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ge(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qm(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:r},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Lo(n3,"4.3.2",e),Lo(n3,"4.3.2","esm2017")})();const J1=HCe(dO),dTe=async()=>await uTe(GCe(J1,"players")).then(e=>e.docs.map(r=>r.data())).catch(console.log),GP=async t=>{const e={...t,id:cs(),createdAt:new Date().getTime(),updatedAt:new Date().getTime()};return await dY(nj(J1,"players",e.id),e),e},hTe=async(t,e)=>{const r={...e,updatedAt:new Date().getTime()};return await dY(nj(J1,"players",r.id),r),r},pTe=async t=>(await fTe(nj(J1,"players",t)),!0);function mTe({onSelect:t,...e}){const[r,n]=E.useState(""),i=E.useCallback(()=>{n(cs())},[]);return f.jsxs(Yn,{title:"選擇玩家",...e,children:[f.jsx(Re,{onClick:i,color:"secondary",children:"刷新列表"}),f.jsx("div",{className:"mt-4",children:f.jsx(pY,{onClickPlayer:t},r)})]})}const pY=({onClickPlayer:t,onClickClone:e,onClickDelete:r})=>{const{value:n,loading:i}=kye(dTe),o=E.useCallback(l=>{if(!t||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const u=n.find(d=>d.id===c);u&&t(c,u)},[t,n]),s=E.useCallback(l=>{if(!e||!n)return;const c=l.currentTarget.getAttribute("data-id");if(!c)return;const u=n.find(p=>p.id===c);if(!u)return;const{id:d,...h}=u;e(h)},[e,n]),a=E.useCallback(l=>{if(!r)return;const c=l.currentTarget.getAttribute("data-id");c&&r(c)},[r]);return f.jsxs(f.Fragment,{children:[i&&f.jsx("div",{className:"w-32 text-center mx-auto my-8",children:f.jsx(TO,{})}),!i&&(n==null?void 0:n.length)===0&&f.jsx("div",{className:"text-gray-500 text-center py-4",children:f.jsx("span",{children:"沒有已儲存的玩家"})}),f.jsx("div",{className:`grid grid-cols-1 gap-2 ${e||r?"":"md:grid-cols-2"}`,children:!i&&(n==null?void 0:n.map(l=>f.jsxs("div",{className:"text-left flex items-center gap-x-2",children:[f.jsx("div",{className:"flex-1 cursor-pointer",onClick:o,"data-id":l.id,children:f.jsx(tq,{player:l})}),e&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{color:"primary",variant:"text",onClick:s,"data-id":l.id,children:"複製"})}),r&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{color:"danger",variant:"text",onClick:a,"data-id":l.id,children:"刪除"})})]},l.id)))})]})};function yTe(){const[t,e]=E.useState(),[r,n]=E.useState("1"),[i,o]=Eo(!1),s=E.useCallback(()=>o(!1),[o]),a=E.useCallback(()=>{e(void 0),o(!0)},[o]),l=E.useCallback((h,p)=>{e(p),o(!0)},[o]),c=E.useCallback(h=>{GP({...h,name:h.name+"(複製)"}).then(()=>{n(cs())})},[]),u=E.useCallback(h=>{confirm("確定要刪除玩家嗎？")&&pTe(h).then(()=>{n(cs())})},[]),d=E.useCallback(h=>h.id?hTe(h.id,h).then(()=>{n(cs()),o(!1)}):GP(h).then(()=>{n(cs()),o(!1)}),[o]);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-4xl",children:"玩家"})}),f.jsx("div",{children:f.jsx(Re,{onClick:a,children:"新增"})})]}),f.jsx(pY,{onClickPlayer:l,onClickClone:c,onClickDelete:u},r)]}),f.jsx(Yn,{title:"新增／修改玩家",open:i,onClose:s,children:f.jsx("div",{className:"container space-y-6",children:f.jsx(JH,{onSubmit:d,defaultValue:t})})})]})}const gTe={0:"東",1:"南",2:"西",3:"北"};function vTe({playerIndex:t,...e}){return f.jsx("span",{...e,children:gTe[t]})}const bTe={0:{title:"",name:"玩家A",color:"#6700cf"},1:{title:"",name:"玩家B",color:"#00b5de"},2:{title:"",name:"玩家C",color:"#e3277b"},3:{title:"",name:"玩家D",color:"#03ada5"}},xTe=`${new Date().toISOString().substring(0,10)} 對局`;function _Te(){const t=p9(),[,e]=Cte(),{getValues:r,control:n}=Gd({defaultValues:{name:xTe,startingScore:"25000",isManganRoundUp:"1",yakuMax:"12",yakumanMax:"13"}}),i=Ka({name:"startingScore",control:n}),[o,s]=E.useState(bTe),[a,l]=E.useState(),[c,u]=Eo(!1),d=E.useCallback(w=>{const A=w.currentTarget.getAttribute("data-player-index");if(!A)return;const C=o[A];l({index:A,player:C}),u(!0)},[o,u]),h=E.useCallback(async w=>{a&&(s(A=>({...A,[a.index]:{...A[a.index],...w}})),u(!1))},[a,u]),p=E.useCallback(()=>{u(!1)},[u]),[m,y]=E.useState(),g=E.useCallback(w=>{w.preventDefault(),y("choose")},[]),b=E.useCallback(()=>{y(null)},[]),v=E.useCallback((w,A)=>{m==="choose"&&(l(C=>C?{...C,player:A}:void 0),y(null))},[m]),x=E.useCallback(w=>{const A=w.currentTarget;if(!A)return;const C=A.getAttribute("data-player-index");if(!C)return;const I=C==="0"?"1":C==="1"?"2":"3";s(T=>({...T,[C]:T[I],[I]:T[C]}))},[]),[{loading:S},_]=Kw(async()=>{const{name:w,...A}=r(),C=await Promise.all(Object.values(o).map(N=>N.id||N.name==="玩家A"||N.name==="玩家B"||N.name==="玩家C"||N.name==="玩家D"?Promise.resolve(N):GP(N))),I={code:gye(),name:w,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:A,players:{0:C[0],1:C[1],2:C[2],3:C[3]},activeResultDetail:null},T=await t.push("matches",I),P=parseInt(A.startingScore),O={matchId:T.key,code:Ox(I.code,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,nextRoundCumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},1:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},2:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}},3:{beforeScore:P,afterScore:P,type:0,scoreChanges:[],prevScoreChanges:[],detail:{han:1,fu:30,yakumanCount:0,dora:0,redDora:0,innerDora:0,yakus:[],raw:{},isRevealed:!1,isRiichied:!1}}},doras:[]};await t.push("matchRounds",O),e(`/match/${O.matchId}/obs`)},[t,r,o,e]);return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"container mx-auto max-w-screen-sm",children:f.jsxs("div",{className:"min-h-screen flex flex-col py-16 gap-y-4",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"space-y-12",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h1",{className:"text-4xl",children:"對局"}),f.jsx(wn,{label:"對局名稱",children:f.jsx(jn,{name:"name",control:n,rules:{required:!0},render:({field:w})=>f.jsx("div",{className:"text-xl",children:f.jsx(va,{...w})})})}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx(wn,{label:"起始點數",children:f.jsx(jn,{name:"startingScore",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(os,{...w,children:[f.jsx("option",{value:"25000",children:"25000"}),f.jsx("option",{value:"30000",children:"30000"}),f.jsx("option",{value:"35000",children:"35000"}),f.jsx("option",{value:"50000",children:"50000"}),f.jsx("option",{value:"100000",children:"100000"})]})})}),f.jsx(wn,{label:"滿貫切上",children:f.jsx(jn,{name:"isManganRoundUp",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(os,{...w,children:[f.jsx("option",{value:"0",children:"不切上"}),f.jsx("option",{value:"1",children:"切上 (3翻70符 & 4翻40符 = 滿貫)"})]})})}),f.jsx(wn,{label:"累積翻數上限",children:f.jsx(jn,{name:"yakuMax",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(os,{...w,children:[f.jsx("option",{value:"12",children:"三倍滿 (12翻)"}),f.jsx("option",{value:"13",children:"累計役滿 (13翻)"})]})})}),f.jsx(wn,{label:"役滿上限",children:f.jsx(jn,{name:"yakumanMax",control:n,rules:{required:!0},render:({field:w})=>f.jsxs(os,{...w,children:[f.jsx("option",{value:"13",children:"單役滿"}),f.jsx("option",{value:"26",children:"兩倍役滿"}),f.jsx("option",{value:"39",children:"三倍役滿"}),f.jsx("option",{value:"130",children:"無上限"})]})})})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h1",{className:"text-4xl",children:"玩家"}),f.jsx("div",{children:["0","1","2","3"].map(w=>f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-x-4",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("div",{className:"h-14 w-14 border-4 rounded border-black text-[40px] flex items-center justify-center pb-1",children:f.jsx(vTe,{playerIndex:w})})}),f.jsx("div",{className:"flex-1 text-[48px] cursor-pointer hover:scale-105","data-player-index":w,onClick:d,children:f.jsx(Ha,{player:o[w],score:i})})]},w),w!=="3"&&f.jsx("div",{className:"text-center",children:f.jsx(Re,{variant:"icon",color:"secondary",type:"button","data-player-index":w,onClick:x,children:f.jsx("i",{className:"bi bi-arrow-down-up"})})})]}))})]})]})}),f.jsx("div",{className:"shrink-0 space-y-4",children:f.jsx(Re,{size:"xlarge",className:"w-full",onClick:_,loading:S,type:"submit",children:"開始對局"})})]})}),f.jsx(Yn,{title:f.jsxs("div",{className:"space-x-4",children:[f.jsx("span",{children:"修改玩家"}),f.jsxs("a",{href:"#",className:"text-xs underline font-normal text-teal-600 hover:text-teal-500 align-middle",onClick:g,children:[f.jsx("i",{className:"bi bi-search"}),"搜尋玩家"]})]}),open:c,onClose:p,children:f.jsxs("div",{className:"container space-y-6",children:[!!(a!=null&&a.player.id)&&f.jsxs("div",{className:"py-2 px-3 bg-yellow-200 text-yellow-800 rounded",children:["注意：在這裡的修改不會儲存到玩家列表的資料庫。假如你想保留這些修改，請在"," ",f.jsxs("a",{href:"/players",target:"_blank",className:"text-teal-600 underline",children:["玩家列表 ",f.jsx("i",{className:"bi bi-box-arrow-up-right"})]})," ","中修改。"]}),f.jsx(JH,{onSubmit:h,defaultValue:a==null?void 0:a.player})]})}),f.jsx(mTe,{open:m==="choose",onSelect:v,onClose:b})]})}function wTe({team:t,onClickEdit:e,children:r,...n}){const i=E.useCallback(()=>{e==null||e(t)},[e,t]);return f.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[f.jsx("div",{className:"flex-1",children:f.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})}),e&&f.jsx("div",{className:"shrink-0",children:f.jsx(Re,{variant:"icon",color:"inverted",type:"button",onClick:i,children:f.jsx("i",{className:"bi bi-pencil"})})})]})}function STe(){const{data:t,update:e,push:r}=Zr("teams"),n=E.useMemo(()=>Object.entries(t??{}).reverse().map(([b,v])=>({...v,_id:b})),[t]),[i,o]=Eo(!1),{register:s,reset:a,handleSubmit:l,control:c}=Gd({defaultValues:{_id:void 0,name:"新的隊伍",color:"#000000"}}),u=Ka({control:c}),d=E.useMemo(()=>({name:"隊員名字",title:u.name??"",color:u.color??"#000000"}),[u.color,u.name]),h=E.useRef(null),p=E.useCallback(()=>o(!1),[o]),m=E.useCallback(()=>{a({_id:"",name:"新的隊伍",color:"#000000"}),o(!0)},[a,o]),y=E.useCallback(b=>{a({...b}),o(!0)},[a,o]),g=E.useMemo(()=>l(b=>{b._id?e({[b._id]:b}):r(b),o(!1)}),[l,r,o,e]);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("div",{children:f.jsx("h1",{className:"text-4xl",children:"隊伍"})}),f.jsx("div",{children:f.jsx(Re,{onClick:m,children:"新增"})})]}),f.jsx("div",{className:"space-y-2",children:n.map(b=>f.jsx(wTe,{team:b,onClickEdit:y},b._id))})]}),f.jsx(Yn,{title:"新增／修改隊伍",open:i,onClose:p,children:f.jsx("div",{className:"container",children:f.jsxs("form",{ref:h,onSubmit:g,children:[f.jsx("input",{type:"hidden",...s("_id")}),f.jsxs("div",{children:[f.jsx(wn,{className:"mb-6",label:"名字",children:f.jsx(jn,{name:"name",control:c,rules:{required:!0},render:({field:b})=>f.jsx(va,{...b})})}),f.jsx(wn,{className:"mb-6",label:"顏色（務必選能看清楚白字的深色）",children:f.jsx(jn,{name:"color",control:c,rules:{required:!0},render:({field:b})=>f.jsx(jH,{...b})})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"mb-2",children:"預覽"}),f.jsx("div",{className:"text-[4rem] px-4 pt-6 pb-1 bg-gray-800 text-white relative",children:f.jsx(Ha,{player:d,score:25e3})})]}),f.jsxs("div",{className:"flex gap-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",color:"secondary",type:"button",onClick:p,children:"取消"})}),f.jsx("div",{className:"flex-1",children:f.jsx(Re,{className:"w-full",type:"submit",children:"儲存"})})]})]})})})]})}function ETe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(jG,{params:r})}function ATe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=Jo((e==null?void 0:e.matchId)??"");return!r||!i?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:f.jsx(xg,{players:r.players,matchRounds:n,className:"w-full table-auto"})})})}function CTe(){const{data:t}=Zr("matches"),e=E.useMemo(()=>Object.entries(t??{}).reverse().map(([r,n])=>({...n,_id:r})),[t]);return console.log(e),f.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[f.jsx("div",{className:"shrink-0",children:f.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),f.jsx("div",{className:"flex justify-between items-center",children:f.jsx("div",{children:f.jsx("h1",{className:"text-4xl",children:"對局"})})}),f.jsxs("table",{className:"data-table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"對局"}),f.jsx("th",{children:"東家"}),f.jsx("th",{children:"南家"}),f.jsx("th",{children:"西家"}),f.jsx("th",{children:"北家"})]})}),f.jsx("tbody",{children:e.map(r=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx("a",{href:`/match/${r._id}`,target:"_blank",children:r.name})}),f.jsx("td",{children:r.players[0].name}),f.jsx("td",{children:r.players[1].name}),f.jsx("td",{children:r.players[2].name}),f.jsx("td",{children:r.players[3].name})]},r._id))})]})]})}function TTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchCurrentRound:n}=Jo((e==null?void 0:e.matchId)??"");return!r||!n?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6"})})}function PTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:i}=Jo((e==null?void 0:e.matchId)??""),[o,s]=E.useState(0);return E.useEffect(()=>{const l=setInterval(()=>{s(c=>1-c)},8e3);return()=>{clearInterval(l)}},[]),!r||!i?f.jsx("div",{children:"對局讀取失敗。"}):f.jsxs("div",{children:[f.jsx("div",{className:o===0?"block":"hidden",children:f.jsx(xg,{players:r.players,matchRounds:n,className:"w-full table-auto"})}),f.jsx("div",{className:o===1?"block":"hidden"})]})}function ITe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(_H,{params:r})}const Qv=({teamPlayer:t})=>{const e=E.useMemo(()=>CO(t.color),[t.color]);return f.jsxs("div",{className:"relative overflow-hidden",children:[f.jsx("table",{className:"w-full",children:f.jsxs("tbody",{children:[f.jsxs("tr",{style:{background:t.color},children:[f.jsx("td",{className:"w-[8mm] h-[8mm]"}),f.jsx("td",{className:"w-[2mm] border-r border-white"}),f.jsx("td",{}),f.jsx("td",{className:"w-[2mm] border-l border-white"}),f.jsx("td",{className:"w-[8mm] h-[8mm]"})]}),f.jsxs("tr",{style:{background:t.color},children:[f.jsx("td",{className:"h-[2mm] border-b border-white"}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{className:"h-[2mm] border-b border-white"})]}),f.jsxs("tr",{style:{background:`linear-gradient(180deg, ${t.color}, ${e})`},children:[f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{className:"w-[150mm] h-[40mm]"}),f.jsx("td",{}),f.jsx("td",{})]}),f.jsxs("tr",{style:{background:e},children:[f.jsx("td",{className:"h-[2mm] border-t border-white"}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{}),f.jsx("td",{className:"h-[2mm] border-t border-white"})]}),f.jsxs("tr",{style:{background:e},children:[f.jsx("td",{className:"w-[8mm] h-[8mm]"}),f.jsx("td",{className:"w-[2mm] border-r border-white"}),f.jsx("td",{}),f.jsx("td",{className:"w-[2mm] border-l border-white"}),f.jsx("td",{className:"w-[8mm] h-[8mm]"})]})]})}),f.jsx("div",{className:"absolute left-[0] top-[2.5mm] w-[55mm] h-[55mm] bg-contain opacity-50",style:{backgroundImage:`url(${t.teamLogoImageUrl+"?w=500&h=500"})`}}),f.jsxs("div",{className:"absolute top-[10mm] bottom-[10mm] left-[25mm] right-[12mm] flex flex-col items-center justify-center",children:[f.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold mb-[3mm]",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerName}),f.jsx("p",{className:"text-[13mm] text-white leading-none font-semibold",style:{textShadow:"0px 0px 3px #333333B0, 0px 0px 6px #333333B0"},children:t.playerNickname})]})]})},NTe=()=>{const{matchId:t}=Pte(),{data:e}=qa({queryKey:["matches",t],queryFn:({queryKey:r})=>EO(r[1]),enabled:!!t});return e?f.jsxs("div",{className:"pt-16",children:[f.jsxs("div",{className:"w-[170mm] mx-auto mb-8 print:hidden",children:[f.jsx("p",{children:"右鍵「列印」，設定如下："}),f.jsxs("ul",{children:[f.jsxs("li",{children:["紙張大小：",f.jsx("strong",{children:"A4"})]}),f.jsxs("li",{children:["邊界：",f.jsx("strong",{children:"無邊界"})]}),f.jsxs("li",{children:["選項：",f.jsx("strong",{children:"打勾「背景圖片」"})]})]})]}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(Qv,{teamPlayer:e==null?void 0:e.playerEast})}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(Qv,{teamPlayer:e==null?void 0:e.playerSouth})}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(Qv,{teamPlayer:e==null?void 0:e.playerWest})}),f.jsx("div",{className:"w-[170mm] h-[60mm] mx-auto",children:f.jsx(Qv,{teamPlayer:e==null?void 0:e.playerNorth})})]}):f.jsx(f.Fragment,{})},mY=({params:{matchId:t}})=>{const{match:e,matchRounds:r}=Jo(t),n=E.useMemo(()=>Object.entries(r??{}).filter(([,i])=>!!i.resultDetail).map(([i,o])=>({id:i,...o}))??[],[r]);return!e||!r?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-8",children:[f.jsx("h1",{className:"text-4xl text-center",children:e.name}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h4",{className:"text-3xl",children:[f.jsx("i",{className:"bi bi-bar-chart-steps"})," 分數"," ",f.jsx("span",{className:"text-sm",children:"( 立=立直, 和=和牌, 統=出統, 摸=自摸, 聽=聽牌 )"})]}),f.jsx(xg,{players:e.players,matchRounds:r??{},className:"w-full table-auto"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("h4",{className:"text-3xl",children:[f.jsx("i",{className:"bi bi-clock-history"})," 和牌記錄"]}),f.jsxs("table",{className:"data-table w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"局數"}),f.jsx("th",{children:"玩家"}),f.jsx("th",{children:"分數"}),f.jsx("th",{children:"役種"})]})}),f.jsx("tbody",{children:n.map(i=>f.jsxs("tr",{className:"odd:bg-neutral-200",children:[f.jsx("td",{className:"text-center py-1",children:f.jsx(fs,{roundCount:i.roundCount,extendedRoundCount:i.extendedRoundCount})}),f.jsx("td",{className:"text-center py-1",style:{background:e.players[i.resultDetail.winnerPlayerIndex].color},children:e.players[i.resultDetail.winnerPlayerIndex].name}),f.jsx("td",{className:"text-center py-1 text-xl",children:f.jsx(Mt,{value:i.playerResults[i.resultDetail.winnerPlayerIndex].afterScore-i.playerResults[i.resultDetail.winnerPlayerIndex].beforeScore,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}),f.jsxs("td",{className:"text-center py-1",children:[f.jsx("p",{children:i.resultDetail.yakus.map(({label:o})=>o).join(" ")}),f.jsx("p",{children:f.jsx(Rx,{han:i.resultDetail.han,fu:i.resultDetail.fu,yakumanCount:i.resultDetail.yakumanCount,isManganRoundUp:e.setting.isManganRoundUp==="1"})})]})]},i.id))})]})]})]})};function kTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(mY,{params:r})}function yY({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n}=Jo(t),[i,o]=E.useState(!1),[s,a]=E.useState(!1),l=E.useCallback(()=>{if(!e||!r)return;const c={_id:t,...RG(Object.values(r))};a(!0),fetch(`https://hkleague2024.hkmahjong.org/api/match/${c._id}/result`,{method:"PATCH",body:JSON.stringify(c),headers:{Accept:"application/json"}}).then(()=>{o(!0),a(!1),alert("上傳完畢，請在資料庫上查看。")})},[e,t,r]);return!e||!n?f.jsx("div",{children:"對局讀取失敗。"}):f.jsx("div",{children:f.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[f.jsxs("div",{children:[f.jsx("h6",{className:"text-center text-sm",children:t}),f.jsx("h3",{className:"text-2xl text-center",children:e.name})]}),f.jsx(xg,{players:e.players,matchRounds:r,className:"w-full table-auto"}),f.jsxs("div",{className:"text-center",children:[!i&&f.jsx(Re,{disabled:s,onClick:l,children:s?"上傳中…":"上傳成績"}),i&&f.jsx("a",{href:`https://hkmjbs.sanity.studio/structure/general-list-matches-past;${t}`,children:f.jsx(Re,{color:"secondary",children:"在資料庫上查看"})})]})]})})}const OTe=({queryKey:t})=>EO(t[1],t[2]),aj=(t,e)=>qa({queryKey:["matches",t,e],queryFn:OTe,enabled:!!t}),RTe=({initialMinutes:t})=>{const[e,r]=E.useState(0),[n,i]=E.useMemo(()=>[Math.floor(e/60).toString().padStart(2,"0"),(e%60).toString().padStart(2,"0")],[e]);return E.useEffect(()=>{r(t*60)},[t]),Bye(()=>{r(o=>o-1)},e>0?1e3:null),f.jsxs("span",{children:[n,":",i]})},gY=({params:{matchId:t}})=>{const{data:e}=aj(t),r=E.useMemo(()=>e?[e[e._order[0]],e[e._order[1]],e[e._order[2]],e[e._order[3]]]:[],[e]),n=TF("startAt"),i=TF("m"),o=E.useMemo(()=>{if(i)return parseInt(i);try{const[s,a]=n.split(":").map(u=>parseInt(u)),l=new Date;l.setHours(s),l.setMinutes(a);const c=new Date;return Math.max(0,(l.getTime()-c.getTime())/6e4)}catch{return 15}},[i,n]);return f.jsxs("div",{className:"fixed inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:[f.jsxs("div",{className:"w-[80vw]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),f.jsx("div",{children:f.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),f.jsxs("div",{className:"flex justify-between items-center mb-[10vh]",children:[f.jsxs("div",{style:{paddingBottom:"25vh"},children:[f.jsx("p",{className:"text-left text-[80px] leading-3",children:"下一場賽事"}),f.jsx("p",{className:"text-left text-[120px] scale-[200%] origin-top-left font-numeric",children:f.jsx(RTe,{initialMinutes:o})})]}),f.jsx("div",{className:"grid grid-cols-2 gap-[2vw]",children:r.map(s=>f.jsx("img",{className:"w-[16vw] aspect-square",src:s.teamLogoImageUrl+"?w=500&h=500"}))})]})]}),f.jsxs("div",{className:"fixed bottom-[5vh] left-[10vw]",children:[f.jsx("div",{children:f.jsx("img",{src:"/images/homepage-qr.png",className:"w-[8vw]",alt:""})}),f.jsxs("p",{className:"text-[32px]",children:["聯賽官網: ",f.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})]})]})]})};function jTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(gY,{params:r})}function $Te(){return f.jsx("div",{className:"fixed inset-0 text-white flex flex-col justify-center items-center",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},children:f.jsxs("div",{className:"w-[80vw]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("img",{src:"/images/tournament-long-logo.png",className:"w-[50%]",alt:""}),f.jsx("div",{children:f.jsx("img",{src:"/images/logo-hkma.webp",className:"w-[12vw]",alt:""})})]}),f.jsxs("div",{className:"flex flex-col justify-center items-center h-[70vh]",children:[f.jsx("p",{className:"text-[100px] text-center",children:"今天賽事已結束，感謝各位收看！"}),f.jsx("div",{className:"text-center mt-[5vh]",children:f.jsx("img",{src:"/images/homepage-qr.png",className:"w-[12vw] mx-auto",alt:""})}),f.jsx("p",{className:"text-[48px] text-center",children:f.jsx("u",{children:"https://hkleague2024.hkmahjong.org/"})}),f.jsx("p",{className:"text-[48px] text-center",children:"賽程、賽事重溫、隊伍介紹、新手教程"})]})]})})}var vY={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,n(a)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(vY);var DTe=vY.exports;const Ar=ot(DTe),D3=({teamPlayer:t,team:e,fadeIn:r,fadeOut:n,delay:i})=>{const o=CO(e.color);return f.jsxs("div",{className:Ar("relative aspect-[18/25] rounded-[1em] overflow-hidden",{"mi-team-player-in":r,"mi-team-player-out":n}),style:{background:`linear-gradient(180deg, ${e.color}, ${o})`,animationDelay:i+"s"},children:[f.jsx("div",{className:"absolute inset-0",style:{background:`url(${e.teamLogoImageUrl+"?w=500&h=500&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.2}}),f.jsx("img",{className:"relative z-10 block mx-auto w-full",src:t.playerPortraitImageUrl+"?h=500&w=360&auto=format&fit=crop&crop=top",alt:t.playerName}),f.jsx("div",{className:"absolute z-20 bottom-0 left-0 right-0 text-center py-[0.25em]",style:{background:"linear-gradient(to top, #00000090 80%, transparent"},children:f.jsxs("div",{children:[f.jsx("p",{className:"text-[1.5em] leading-[1em] font-semibold",children:t.playerNickname}),f.jsx("p",{className:"text-[0.8em]",children:t.playerName})]})})]},t.playerName)},MTe=({slide:t,status:e,subslide:r})=>{var n,i,o,s,a,l,c,u,d,h,p,m;return t.type==="teams"?f.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:t.teams.map((y,g)=>f.jsxs("div",{className:Ar("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?g*.25+"s":"0s"},children:[f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${y.color})`,opacity:.5}},y.teamId),f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${y.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),f.jsxs("div",{className:Ar("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[f.jsx("img",{src:y.teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),f.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:y.teamName}),f.jsx("h3",{className:"text-[1em] font-semibold text-center",children:y.teamSecondaryName})]}),f.jsxs("div",{className:Ar("absolute inset-0 opacity-0",{"mi-teams-player-in":e>=0&&r>=1,"mi-teams-player-out":e>0}),style:{animationDelay:e===0?g*.25+"s":"0s"},children:[f.jsx("img",{src:y.playerPortraitImageUrl+"?w=360&h=500&auto=format",className:"aspect-[18/25] w-full",alt:""}),f.jsxs("div",{className:"font-semibold text-center",children:[f.jsx("p",{className:"text-[1em]",children:y.playerNickname}),f.jsx("p",{className:"text-[.8em]",children:y.playerName})]})]})]},y.teamId))})]}):t.type==="team"?f.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:Ar("absolute inset-0 -z-10",{"mi-team-colorBackground-in":e===0,"mi-team-colorBackground-out":e>0}),style:{background:`linear-gradient(to bottom, transparent 60%, ${t.team.color})`,opacity:.5}}),f.jsx("div",{className:Ar("absolute inset-0 -z-10",{"mi-team-logoBackground-in":e===0,"mi-team-logoBackground-out":e>0}),style:{background:`url(${t.team.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.125}}),f.jsxs("div",{className:Ar("text-right mb-[.5em]",{"mi-team-team-in":e===0,"mi-team-team-out":e>0}),children:[f.jsxs("div",{className:"flex-1 flex gap-x-[1.5em] items-center justify-end",children:[f.jsxs("div",{className:"text-left space-y-[.5em]",children:[f.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[f.jsx("p",{children:"隊伍積分"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:us((n=t.team.teamStatistic)==null?void 0:n.point)})})]}),f.jsxs("div",{className:"flex justify-start gap-x-[1em]",children:[f.jsx("p",{children:"隊伍排名"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:nd((i=t.team.teamStatistic)==null?void 0:i.ranking)})})]})]}),f.jsx("img",{src:t.team.teamLogoImageUrl+"?w=512&h=512&auto=format",alt:t.team.teamFullname,className:"aspect-square",style:{width:256,height:256}})]}),f.jsx("h3",{className:"inline-block font-semibold text-right text-[1.5em]",children:t.team.teamFullname})]}),f.jsxs("div",{className:"flex-[2] relative",children:[f.jsx("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e===0&&r>=0&&r<1?1:0},children:t.teamPlayers.map((y,g)=>f.jsx(D3,{team:t.team,teamPlayer:y,fadeIn:e===0&&r<=0,fadeOut:e===0&&r>0,delay:(r<=0?1.7:0)+g*.25},y.playerName))}),f.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 items-center gap-16",style:{opacity:e>=0&&e<1&&r>=1&&r<2?1:0},children:[f.jsx(D3,{team:t.team,teamPlayer:t.team,fadeIn:e===0&&r===1,fadeOut:e>0,delay:0}),f.jsx("div",{className:"col-span-3",children:f.jsxs("div",{className:Ar({"mi-team-activePlayerStat-in":e===0&&r===1,"mi-team-activePlayerStat-out":e>0}),children:[f.jsxs("div",{className:"flex justify-between mb-[1em]",children:[f.jsxs("p",{className:"text-[2em]",children:["個人總分"," ",f.jsx("span",{className:"font-numeric",children:us((o=t.team.playerStatistic)==null?void 0:o.point)})]}),f.jsxs("p",{className:"text-[2em]",children:["半莊數"," ",f.jsx("span",{className:"font-numeric",children:((s=t.team.playerStatistic)==null?void 0:s.matchCount)??"-"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"四位迴避率"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((a=t.team.playerStatistic)==null?void 0:a.nonFourthP)})})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"連對率"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((l=t.team.playerStatistic)==null?void 0:l.firstAndSecondP)})})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"立直率"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((c=t.team.playerStatistic)==null?void 0:c.riichiP)})})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"和了率"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((u=t.team.playerStatistic)==null?void 0:u.ronP)})})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"銃和率"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((d=t.team.playerStatistic)==null?void 0:d.chuckP)})})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"副露率"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((h=t.team.playerStatistic)==null?void 0:h.revealP)})})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-[2em] text-[1.5em] mt-[.8em]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"和了平均打點"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((p=t.team.playerStatistic)==null?void 0:p.ronPureScoreAvg)})})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("p",{className:"text-[.9em]",children:"銃和平均打點"}),f.jsx("p",{children:f.jsx("span",{className:"font-numeric",children:Bs((m=t.team.playerStatistic)==null?void 0:m.chuckPureScoreAvg)})})]})]})]})})]})]})]}):f.jsx(f.Fragment,{})},bY=({params:{matchId:t}})=>{var h;const{data:e}=aj(t,!0),r=E.useMemo(()=>e?[e==null?void 0:e.playerEast.teamId,e==null?void 0:e.playerSouth.teamId,e==null?void 0:e.playerWest.teamId,e==null?void 0:e.playerNorth.teamId]:null,[e]),{data:n}=qa({queryKey:["match",t,"groupedPlayers"],queryFn:()=>tye(r,e==null?void 0:e.tournament._id),enabled:!!e&&!!r}),i=E.useMemo(()=>!e||!n?[{type:"empty",_id:"empty",subslide:0}]:[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:[e.playerEast,e.playerSouth,e.playerWest,e.playerNorth],subslide:1},{_id:"team_playerEast",type:"team",team:e.playerEast,teamPlayers:n[e.playerEast.teamId],subslide:2},{_id:"team_playerSouth",type:"team",team:e.playerSouth,teamPlayers:n[e.playerSouth.teamId],subslide:2},{_id:"team_playerWest",type:"team",team:e.playerWest,teamPlayers:n[e.playerWest.teamId],subslide:2},{_id:"team_playerNorth",type:"team",team:e.playerNorth,teamPlayers:n[e.playerNorth.teamId],subslide:2}],[e,n]),[o,s]=E.useState(0),[a,l]=E.useState(0),[c,u]=E.useState(!1),d=E.useCallback(()=>{if(c)return;const p=i[o];if(!p){s(1);return}p.type==="empty"?s(m=>m+1):a>=p.subslide-1?(s(m=>m+.5),u(!0),setTimeout(()=>{s(m=>Math.ceil(m)),l(0),u(!1)},1200)):(l(m=>m+.5),u(!0),setTimeout(()=>{l(m=>Math.ceil(m)),u(!1)},1200))},[c,o,i,a]);return!e||!n?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"match-introduction fixed inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:d,children:[f.jsx("div",{className:"absolute py-16 px-24 inset-0",children:f.jsxs("div",{className:"flex gap-x-[0.25em] mi-title-in",children:[f.jsx("div",{children:f.jsx("img",{src:e.tournament.logoUrl+"?w=280&h=280&auto=format",alt:e.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:e.tournament.name}),f.jsxs("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:["常規賽 ",(h=e.startAt)==null?void 0:h.substring(0,10)]})]})]})}),i.map((p,m)=>f.jsx(MTe,{slide:p,status:o-m,subslide:a},p._id))]})},Xv=({player:t})=>f.jsx("div",{className:"relative w-full h-full border-[.5em]",style:{borderColor:t.color},children:f.jsxs("div",{className:"absolute top-0 left-0 flex gap-x-8 pr-1 rounded-br-lg text-[1.5em] font-semibold text-white",style:{backgroundColor:t.color},children:[f.jsxs("p",{children:[t.name," (",t.nickname,")"]}),f.jsx("p",{children:t.currentStatus.afterScore})]})}),xY=({params:{matchId:t}})=>{const{match:e,matchCurrentRound:r}=Jo(t),n=E.useMemo(()=>{if(!e||!r)return[];const i=[{ranking:1,point:50},{ranking:2,point:10},{ranking:3,point:-10},{ranking:4,point:-30}],o=Object.entries(r.playerResults).map(([s,a])=>({playerIndex:s,score:a.afterScore})).sort((s,a)=>a.score-s.score).map((s,a)=>({playerIndex:s.playerIndex,...i[a],point:(s.score-3e4)/1e3+i[a].point})).reduce((s,a)=>(s[a.playerIndex]={point:a.point,ranking:a.ranking},s),{});return["0","1","2","3"].map(s=>({...e.players[s],color:e.players[s].color,currentStatus:{...r.playerResults[s],isEast:Jn(s,r.roundCount),...o[s]}}))},[e,r]);return!e||n.length===0?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"fixed inset-0 grid grid-cols-8",children:[f.jsx("div",{className:"col-span-5",children:f.jsx(Xv,{player:n[0]})}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-2"}),f.jsx("div",{className:"col-span-5",children:f.jsx(Xv,{player:n[1]})}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-1"}),f.jsx("div",{className:"col-span-5",children:f.jsx(Xv,{player:n[2]})}),f.jsx("div",{className:"col-span-3 row-span-2"}),f.jsx("div",{className:"col-span-5",children:f.jsx(Xv,{player:n[3]})})]})};function FTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(xY,{params:r})}function LTe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(yY,{params:r})}function _Y(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=_Y(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ct(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=_Y(t))&&(n&&(n+=" "),n+=e);return n}var BTe=Array.isArray,Un=BTe,UTe=typeof kl=="object"&&kl&&kl.Object===Object&&kl,wY=UTe,VTe=wY,WTe=typeof self=="object"&&self&&self.Object===Object&&self,zTe=VTe||WTe||Function("return this")(),Zo=zTe,GTe=Zo,qTe=GTe.Symbol,Bg=qTe,M3=Bg,SY=Object.prototype,HTe=SY.hasOwnProperty,KTe=SY.toString,Fh=M3?M3.toStringTag:void 0;function YTe(t){var e=HTe.call(t,Fh),r=t[Fh];try{t[Fh]=void 0;var n=!0}catch{}var i=KTe.call(t);return n&&(e?t[Fh]=r:delete t[Fh]),i}var QTe=YTe,XTe=Object.prototype,JTe=XTe.toString;function ZTe(t){return JTe.call(t)}var ePe=ZTe,F3=Bg,tPe=QTe,rPe=ePe,nPe="[object Null]",iPe="[object Undefined]",L3=F3?F3.toStringTag:void 0;function oPe(t){return t==null?t===void 0?iPe:nPe:L3&&L3 in Object(t)?tPe(t):rPe(t)}var $s=oPe;function sPe(t){return t!=null&&typeof t=="object"}var Ds=sPe,aPe=$s,lPe=Ds,cPe="[object Symbol]";function uPe(t){return typeof t=="symbol"||lPe(t)&&aPe(t)==cPe}var th=uPe,fPe=Un,dPe=th,hPe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pPe=/^\w*$/;function mPe(t,e){if(fPe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||dPe(t)?!0:pPe.test(t)||!hPe.test(t)||e!=null&&t in Object(e)}var lj=mPe;function yPe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var al=yPe;const rh=ot(al);var gPe=$s,vPe=al,bPe="[object AsyncFunction]",xPe="[object Function]",_Pe="[object GeneratorFunction]",wPe="[object Proxy]";function SPe(t){if(!vPe(t))return!1;var e=gPe(t);return e==xPe||e==_Pe||e==bPe||e==wPe}var cj=SPe;const Me=ot(cj);var EPe=Zo,APe=EPe["__core-js_shared__"],CPe=APe,jA=CPe,B3=function(){var t=/[^.]+$/.exec(jA&&jA.keys&&jA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function TPe(t){return!!B3&&B3 in t}var PPe=TPe,IPe=Function.prototype,NPe=IPe.toString;function kPe(t){if(t!=null){try{return NPe.call(t)}catch{}try{return t+""}catch{}}return""}var EY=kPe,OPe=cj,RPe=PPe,jPe=al,$Pe=EY,DPe=/[\\^$.*+?()[\]{}|]/g,MPe=/^\[object .+?Constructor\]$/,FPe=Function.prototype,LPe=Object.prototype,BPe=FPe.toString,UPe=LPe.hasOwnProperty,VPe=RegExp("^"+BPe.call(UPe).replace(DPe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WPe(t){if(!jPe(t)||RPe(t))return!1;var e=OPe(t)?VPe:MPe;return e.test($Pe(t))}var zPe=WPe;function GPe(t,e){return t==null?void 0:t[e]}var qPe=GPe,HPe=zPe,KPe=qPe;function YPe(t,e){var r=KPe(t,e);return HPe(r)?r:void 0}var zc=YPe,QPe=zc,XPe=QPe(Object,"create"),Z1=XPe,U3=Z1;function JPe(){this.__data__=U3?U3(null):{},this.size=0}var ZPe=JPe;function eIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tIe=eIe,rIe=Z1,nIe="__lodash_hash_undefined__",iIe=Object.prototype,oIe=iIe.hasOwnProperty;function sIe(t){var e=this.__data__;if(rIe){var r=e[t];return r===nIe?void 0:r}return oIe.call(e,t)?e[t]:void 0}var aIe=sIe,lIe=Z1,cIe=Object.prototype,uIe=cIe.hasOwnProperty;function fIe(t){var e=this.__data__;return lIe?e[t]!==void 0:uIe.call(e,t)}var dIe=fIe,hIe=Z1,pIe="__lodash_hash_undefined__";function mIe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hIe&&e===void 0?pIe:e,this}var yIe=mIe,gIe=ZPe,vIe=tIe,bIe=aIe,xIe=dIe,_Ie=yIe;function nh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nh.prototype.clear=gIe;nh.prototype.delete=vIe;nh.prototype.get=bIe;nh.prototype.has=xIe;nh.prototype.set=_Ie;var wIe=nh;function SIe(){this.__data__=[],this.size=0}var EIe=SIe;function AIe(t,e){return t===e||t!==t&&e!==e}var uj=AIe,CIe=uj;function TIe(t,e){for(var r=t.length;r--;)if(CIe(t[r][0],e))return r;return-1}var eS=TIe,PIe=eS,IIe=Array.prototype,NIe=IIe.splice;function kIe(t){var e=this.__data__,r=PIe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():NIe.call(e,r,1),--this.size,!0}var OIe=kIe,RIe=eS;function jIe(t){var e=this.__data__,r=RIe(e,t);return r<0?void 0:e[r][1]}var $Ie=jIe,DIe=eS;function MIe(t){return DIe(this.__data__,t)>-1}var FIe=MIe,LIe=eS;function BIe(t,e){var r=this.__data__,n=LIe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var UIe=BIe,VIe=EIe,WIe=OIe,zIe=$Ie,GIe=FIe,qIe=UIe;function ih(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ih.prototype.clear=VIe;ih.prototype.delete=WIe;ih.prototype.get=zIe;ih.prototype.has=GIe;ih.prototype.set=qIe;var tS=ih,HIe=zc,KIe=Zo,YIe=HIe(KIe,"Map"),fj=YIe,V3=wIe,QIe=tS,XIe=fj;function JIe(){this.size=0,this.__data__={hash:new V3,map:new(XIe||QIe),string:new V3}}var ZIe=JIe;function eNe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var tNe=eNe,rNe=tNe;function nNe(t,e){var r=t.__data__;return rNe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var rS=nNe,iNe=rS;function oNe(t){var e=iNe(this,t).delete(t);return this.size-=e?1:0,e}var sNe=oNe,aNe=rS;function lNe(t){return aNe(this,t).get(t)}var cNe=lNe,uNe=rS;function fNe(t){return uNe(this,t).has(t)}var dNe=fNe,hNe=rS;function pNe(t,e){var r=hNe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var mNe=pNe,yNe=ZIe,gNe=sNe,vNe=cNe,bNe=dNe,xNe=mNe;function oh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}oh.prototype.clear=yNe;oh.prototype.delete=gNe;oh.prototype.get=vNe;oh.prototype.has=bNe;oh.prototype.set=xNe;var dj=oh,AY=dj,_Ne="Expected a function";function hj(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_Ne);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(hj.Cache||AY),r}hj.Cache=AY;var wNe=hj,SNe=wNe,ENe=500;function ANe(t){var e=SNe(t,function(n){return r.size===ENe&&r.clear(),n}),r=e.cache;return e}var CNe=ANe,TNe=CNe,PNe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,INe=/\\(\\)?/g,NNe=TNe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(PNe,function(r,n,i,o){e.push(i?o.replace(INe,"$1"):n||r)}),e}),kNe=NNe;function ONe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var pj=ONe,W3=Bg,RNe=pj,jNe=Un,$Ne=th,DNe=1/0,z3=W3?W3.prototype:void 0,G3=z3?z3.toString:void 0;function CY(t){if(typeof t=="string")return t;if(jNe(t))return RNe(t,CY)+"";if($Ne(t))return G3?G3.call(t):"";var e=t+"";return e=="0"&&1/t==-DNe?"-0":e}var MNe=CY,FNe=MNe;function LNe(t){return t==null?"":FNe(t)}var TY=LNe,BNe=Un,UNe=lj,VNe=kNe,WNe=TY;function zNe(t,e){return BNe(t)?t:UNe(t,e)?[t]:VNe(WNe(t))}var PY=zNe,GNe=th,qNe=1/0;function HNe(t){if(typeof t=="string"||GNe(t))return t;var e=t+"";return e=="0"&&1/t==-qNe?"-0":e}var nS=HNe,KNe=PY,YNe=nS;function QNe(t,e){e=KNe(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[YNe(e[r++])];return r&&r==n?t:void 0}var mj=QNe,XNe=mj;function JNe(t,e,r){var n=t==null?void 0:XNe(t,e);return n===void 0?r:n}var IY=JNe;const Oi=ot(IY);function ZNe(t){return t==null}var eke=ZNe;const Xe=ot(eke);var tke=$s,rke=Un,nke=Ds,ike="[object String]";function oke(t){return typeof t=="string"||!rke(t)&&nke(t)&&tke(t)==ike}var ske=oke;const Ug=ot(ske);var ake=$s,lke=Ds,cke="[object Number]";function uke(t){return typeof t=="number"||lke(t)&&ake(t)==cke}var NY=uke;const fke=ot(NY);var dke=NY;function hke(t){return dke(t)&&t!=+t}var pke=hke;const Vg=ot(pke);var no=function(e){return e===0?0:e>0?1:-1},Bl=function(e){return Ug(e)&&e.indexOf("%")===e.length-1},ne=function(e){return fke(e)&&!Vg(e)},dr=function(e){return ne(e)||Ug(e)},mke=0,Wg=function(e){var r=++mke;return"".concat(e||"").concat(r)},yd=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(e)&&!Ug(e))return n;var o;if(Bl(e)){var s=e.indexOf("%");o=r*parseFloat(e.slice(0,s))/100}else o=+e;return Vg(o)&&(o=n),i&&o>r&&(o=r),o},Gs=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},yke=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Qi=function(e,r){return ne(e)&&ne(r)?function(n){return e+n*(r-e)}:function(){return r}};function u_(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Oi(n,e))===r})}function pf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function qP(t){"@babel/helpers - typeof";return qP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qP(t)}var gke=["viewBox","children"],vke=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],q3=["points","pathLength"],$A={svg:gke,polygon:q3,polyline:q3},yj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],f_=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),!rh(n))return null;var i={};return Object.keys(n).forEach(function(o){yj.includes(o)&&(i[o]=r||function(s){return n[o](n,s)})}),i},bke=function(e,r,n){return function(i){return e(r,n,i),null}},d_=function(e,r,n){if(!rh(e)||qP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];yj.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=bke(s,r,n))}),i},xke=["children"],_ke=["children"];function H3(t,e){if(t==null)return{};var r=wke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function HP(t){"@babel/helpers - typeof";return HP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HP(t)}var K3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},gs=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Y3=null,DA=null,gj=function t(e){if(e===Y3&&Array.isArray(DA))return DA;var r=[];return E.Children.forEach(e,function(n){Xe(n)||(Lx.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),DA=r,Y3=e,r};function Ri(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return gs(i)}):n=[gs(e)],gj(t).forEach(function(i){var o=Oi(i,"type.displayName")||Oi(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function To(t,e){var r=Ri(t,e);return r&&r[0]}var Q3=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!ne(n)||n<=0||!ne(i)||i<=0)},Ske=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Eke=function(e){return e&&e.type&&Ug(e.type)&&Ske.indexOf(e.type)>=0},Ake=function(e){return e&&HP(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},Cke=function(e,r,n,i){var o,s=(o=$A==null?void 0:$A[i])!==null&&o!==void 0?o:[];return!Me(e)&&(i&&s.includes(r)||vke.includes(r))||n&&yj.includes(r)},qe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!rh(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;Cke((a=i)===null||a===void 0?void 0:a[s],s,r,n)&&(o[s]=i[s])}),o},kY=function t(e,r){if(e===r)return!0;var n=E.Children.count(e);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return X3(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=e[i],s=r[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!X3(o,s))return!1}return!0},X3=function(e,r){if(Xe(e)&&Xe(r))return!0;if(!Xe(e)&&!Xe(r)){var n=e.props||{},i=n.children,o=H3(n,xke),s=r.props||{},a=s.children,l=H3(s,_ke);return i&&a?pf(o,l)&&kY(i,a):!i&&!a?pf(o,l):!1}return!1},J3=function(e,r){var n=[],i={};return gj(e).forEach(function(o,s){if(Eke(o))n.push(o);else if(o){var a=gs(o.type),l=r[a]||{},c=l.handler,u=l.once;if(c&&(!u||!i[a])){var d=c(o,a,s);n.push(d),i[a]=!0}}}),n},Tke=function(e){var r=e&&e.type;return r&&K3[r]?K3[r]:null},Pke=function(e,r){return gj(r).indexOf(e)},Ike=["children","width","height","viewBox","className","style","title","desc"];function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KP.apply(this,arguments)}function Nke(t,e){if(t==null)return{};var r=kke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function YP(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,c=Nke(t,Ike),u=i||{width:r,height:n,x:0,y:0},d=ct("recharts-surface",o);return k.createElement("svg",KP({},qe(c,!0,"svg"),{className:d,width:r,height:n,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),k.createElement("title",null,a),k.createElement("desc",null,l),e)}var Oke=["children","className"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QP.apply(this,arguments)}function Rke(t,e){if(t==null)return{};var r=jke(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jke(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Jt=k.forwardRef(function(t,e){var r=t.children,n=t.className,i=Rke(t,Oke),o=ct("recharts-layer",n);return k.createElement("g",QP({className:o},qe(i,!0),{ref:e}),r)}),pc=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function $ke(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var Dke=$ke,Mke=Dke;function Fke(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Mke(t,e,r)}var Lke=Fke,Bke="\\ud800-\\udfff",Uke="\\u0300-\\u036f",Vke="\\ufe20-\\ufe2f",Wke="\\u20d0-\\u20ff",zke=Uke+Vke+Wke,Gke="\\ufe0e\\ufe0f",qke="\\u200d",Hke=RegExp("["+qke+Bke+zke+Gke+"]");function Kke(t){return Hke.test(t)}var OY=Kke;function Yke(t){return t.split("")}var Qke=Yke,RY="\\ud800-\\udfff",Xke="\\u0300-\\u036f",Jke="\\ufe20-\\ufe2f",Zke="\\u20d0-\\u20ff",eOe=Xke+Jke+Zke,tOe="\\ufe0e\\ufe0f",rOe="["+RY+"]",XP="["+eOe+"]",JP="\\ud83c[\\udffb-\\udfff]",nOe="(?:"+XP+"|"+JP+")",jY="[^"+RY+"]",$Y="(?:\\ud83c[\\udde6-\\uddff]){2}",DY="[\\ud800-\\udbff][\\udc00-\\udfff]",iOe="\\u200d",MY=nOe+"?",FY="["+tOe+"]?",oOe="(?:"+iOe+"(?:"+[jY,$Y,DY].join("|")+")"+FY+MY+")*",sOe=FY+MY+oOe,aOe="(?:"+[jY+XP+"?",XP,$Y,DY,rOe].join("|")+")",lOe=RegExp(JP+"(?="+JP+")|"+aOe+sOe,"g");function cOe(t){return t.match(lOe)||[]}var uOe=cOe,fOe=Qke,dOe=OY,hOe=uOe;function pOe(t){return dOe(t)?hOe(t):fOe(t)}var mOe=pOe,yOe=Lke,gOe=OY,vOe=mOe,bOe=TY;function xOe(t){return function(e){e=bOe(e);var r=gOe(e)?vOe(e):void 0,n=r?r[0]:e.charAt(0),i=r?yOe(r,1).join(""):e.slice(1);return n[t]()+i}}var _Oe=xOe,wOe=_Oe,SOe=wOe("toUpperCase"),EOe=SOe;const iS=ot(EOe);function St(t){return function(){return t}}const LY=Math.cos,h_=Math.sin,ho=Math.sqrt,p_=Math.PI,oS=2*p_,ZP=Math.PI,eI=2*ZP,Pl=1e-6,AOe=eI-Pl;function BY(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function COe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return BY;const r=10**e;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class TOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?BY:COe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,o,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,r,n,i,o){if(e=+e,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=n-e,c=i-r,u=s-e,d=a-r,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Pl)if(!(Math.abs(d*l-c*u)>Pl)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-s,m=i-a,y=l*l+c*c,g=p*p+m*m,b=Math.sqrt(y),v=Math.sqrt(h),x=o*Math.tan((ZP-Math.acos((y+h-g)/(2*b*v)))/2),S=x/v,_=x/b;Math.abs(S-1)>Pl&&this._append`L${e+S*u},${r+S*d}`,this._append`A${o},${o},0,0,${+(d*p>u*m)},${this._x1=e+_*l},${this._y1=r+_*c}`}}arc(e,r,n,i,o,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),c=e+a,u=r+l,d=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Pl||Math.abs(this._y1-u)>Pl)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%eI+eI),h>AOe?this._append`A${n},${n},0,1,${d},${e-a},${r-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=u}`:h>Pl&&this._append`A${n},${n},0,${+(h>=ZP)},${d},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function vj(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new TOe(e)}function bj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function UY(t){this._context=t}UY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sS(t){return new UY(t)}function VY(t){return t[0]}function WY(t){return t[1]}function zY(t,e){var r=St(!0),n=null,i=sS,o=null,s=vj(a);t=typeof t=="function"?t:t===void 0?VY:St(t),e=typeof e=="function"?e:e===void 0?WY:St(e);function a(l){var c,u=(l=bj(l)).length,d,h=!1,p;for(n==null&&(o=i(p=s())),c=0;c<=u;++c)!(c<u&&r(d=l[c],c,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,c,l),+e(d,c,l));if(p)return o=null,p+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:St(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:St(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:St(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(o=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=o=null:o=i(n=l),a):n},a}function Jv(t,e,r){var n=null,i=St(!0),o=null,s=sS,a=null,l=vj(c);t=typeof t=="function"?t:t===void 0?VY:St(+t),e=typeof e=="function"?e:St(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?WY:St(+r);function c(d){var h,p,m,y=(d=bj(d)).length,g,b=!1,v,x=new Array(y),S=new Array(y);for(o==null&&(a=s(v=l())),h=0;h<=y;++h){if(!(h<y&&i(g=d[h],h,d))===b)if(b=!b)p=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=h-1;m>=p;--m)a.point(x[m],S[m]);a.lineEnd(),a.areaEnd()}b&&(x[h]=+t(g,h,d),S[h]=+e(g,h,d),a.point(n?+n(g,h,d):x[h],r?+r(g,h,d):S[h]))}if(v)return a=null,v+""||null}function u(){return zY().defined(i).curve(s).context(o)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:St(+d),n=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:St(+d),c):t},c.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:St(+d),c):n},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:St(+d),r=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:St(+d),c):e},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:St(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(r)},c.lineX1=function(){return u().x(n).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:St(!!d),c):i},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}class GY{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function POe(t){return new GY(t,!0)}function IOe(t){return new GY(t,!1)}const xj={draw(t,e){const r=ho(e/p_);t.moveTo(r,0),t.arc(0,0,r,0,oS)}},NOe={draw(t,e){const r=ho(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},qY=ho(1/3),kOe=qY*2,OOe={draw(t,e){const r=ho(e/kOe),n=r*qY;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},ROe={draw(t,e){const r=ho(e),n=-r/2;t.rect(n,n,r,r)}},jOe=.8908130915292852,HY=h_(p_/10)/h_(7*p_/10),$Oe=h_(oS/10)*HY,DOe=-LY(oS/10)*HY,MOe={draw(t,e){const r=ho(e*jOe),n=$Oe*r,i=DOe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let o=1;o<5;++o){const s=oS*o/5,a=LY(s),l=h_(s);t.lineTo(l*r,-a*r),t.lineTo(a*n-l*i,l*n+a*i)}t.closePath()}},MA=ho(3),FOe={draw(t,e){const r=-ho(e/(MA*3));t.moveTo(0,r*2),t.lineTo(-MA*r,-r),t.lineTo(MA*r,-r),t.closePath()}},di=-.5,hi=ho(3)/2,tI=1/ho(12),LOe=(tI/2+1)*3,BOe={draw(t,e){const r=ho(e/LOe),n=r/2,i=r*tI,o=n,s=r*tI+r,a=-o,l=s;t.moveTo(n,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(di*n-hi*i,hi*n+di*i),t.lineTo(di*o-hi*s,hi*o+di*s),t.lineTo(di*a-hi*l,hi*a+di*l),t.lineTo(di*n+hi*i,di*i-hi*n),t.lineTo(di*o+hi*s,di*s-hi*o),t.lineTo(di*a+hi*l,di*l-hi*a),t.closePath()}};function UOe(t,e){let r=null,n=vj(i);t=typeof t=="function"?t:St(t||xj),e=typeof e=="function"?e:St(e===void 0?64:+e);function i(){let o;if(r||(r=o=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:St(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:St(+o),i):e},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function m_(){}function y_(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function KY(t){this._context=t}KY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:y_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function VOe(t){return new KY(t)}function YY(t){this._context=t}YY.prototype={areaStart:m_,areaEnd:m_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WOe(t){return new YY(t)}function QY(t){this._context=t}QY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:y_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zOe(t){return new QY(t)}function XY(t){this._context=t}XY.prototype={areaStart:m_,areaEnd:m_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function GOe(t){return new XY(t)}function Z3(t){return t<0?-1:1}function eB(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),a=(o*i+s*n)/(n+i);return(Z3(o)+Z3(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function tB(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function FA(t,e,r){var n=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-n)/3;t._context.bezierCurveTo(n+a,i+a*e,o-a,s-a*r,o,s)}function g_(t){this._context=t}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FA(this,this._t0,tB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,FA(this,tB(this,r=eB(this,t,e)),r);break;default:FA(this,this._t0,r=eB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function JY(t){this._context=new ZY(t)}(JY.prototype=Object.create(g_.prototype)).point=function(t,e){g_.prototype.point.call(this,e,t)};function ZY(t){this._context=t}ZY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}};function qOe(t){return new g_(t)}function HOe(t){return new JY(t)}function eQ(t){this._context=t}eQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=rB(t),i=rB(e),o=0,s=1;s<r;++o,++s)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function rB(t){var e,r=t.length-1,n,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function KOe(t){return new eQ(t)}function aS(t,e){this._context=t,this._t=e}aS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function YOe(t){return new aS(t,.5)}function QOe(t){return new aS(t,0)}function XOe(t){return new aS(t,1)}function gd(t,e){if((s=t.length)>1)for(var r=1,n,i,o=t[e[0]],s,a=o.length;r<s;++r)for(i=o,o=t[e[r]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function rI(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function JOe(t,e){return t[e]}function ZOe(t){const e=[];return e.key=t,e}function eRe(){var t=St([]),e=rI,r=gd,n=JOe;function i(o){var s=Array.from(t.apply(this,arguments),ZOe),a,l=s.length,c=-1,u;for(const d of o)for(a=0,++c;a<l;++a)(s[a][c]=[0,+n(d,s[a].key,c,o)]).data=d;for(a=0,u=bj(e(s));a<l;++a)s[u[a]].index=a;return r(s,u),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:St(Array.from(o)),i):t},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:St(+o),i):n},i.order=function(o){return arguments.length?(e=o==null?rI:typeof o=="function"?o:St(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(r=o??gd,i):r},i}function tRe(t,e){if((n=t.length)>0){for(var r,n,i=0,o=t[0].length,s;i<o;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}gd(t,e)}}function rRe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,o=n.length;r<o;++r){for(var s=0,a=0;s<i;++s)a+=t[s][r][1]||0;n[r][1]+=n[r][0]=-a/2}gd(t,e)}}function nRe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,o,s;n<o;++n){for(var a=0,l=0,c=0;a<s;++a){for(var u=t[e[a]],d=u[n][1]||0,h=u[n-1][1]||0,p=(d-h)/2,m=0;m<a;++m){var y=t[e[m]],g=y[n][1]||0,b=y[n-1][1]||0;p+=g-b}l+=d,c+=p*d}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,gd(t,e)}}function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}var iRe=["type","size","sizeType"];function nI(){return nI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nI.apply(this,arguments)}function nB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(r),!0).forEach(function(n){oRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oRe(t,e,r){return e=sRe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sRe(t){var e=aRe(t,"string");return Qm(e)==="symbol"?e:String(e)}function aRe(t,e){if(Qm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lRe(t,e){if(t==null)return{};var r=cRe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cRe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var tQ={symbolCircle:xj,symbolCross:NOe,symbolDiamond:OOe,symbolSquare:ROe,symbolStar:MOe,symbolTriangle:FOe,symbolWye:BOe},uRe=Math.PI/180,fRe=function(e){var r="symbol".concat(iS(e));return tQ[r]||xj},dRe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*uRe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hRe=function(e,r){tQ["symbol".concat(iS(e))]=r},_j=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=lRe(e,iRe),c=iB(iB({},l),{},{type:n,size:o,sizeType:a}),u=function(){var g=fRe(n),b=UOe().type(g).size(dRe(o,a,n));return b()},d=c.className,h=c.cx,p=c.cy,m=qe(c,!0);return h===+h&&p===+p&&o===+o?k.createElement("path",nI({},m,{className:ct("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};_j.registerSymbol=hRe;function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iI.apply(this,arguments)}function oB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pRe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oB(Object(r),!0).forEach(function(n){Xm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rQ(n.key),n)}}function yRe(t,e,r){return e&&sB(t.prototype,e),r&&sB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oI(t,e)}function vRe(t){var e=_Re();return function(){var n=v_(t),i;if(e){var o=v_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bRe(this,i)}}function bRe(t,e){if(e&&(vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xRe(t)}function xRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v_(t){return v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v_(t)}function Xm(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=wRe(t,"string");return vd(e)==="symbol"?e:String(e)}function wRe(t,e){if(vd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pi=32,wj=function(t){gRe(r,t);var e=vRe(r);function r(){return mRe(this,r),e.apply(this,arguments)}return yRe(r,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,s=pi/2,a=pi/6,l=pi/3,c=i.inactive?o:i.color;if(i.type==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:s,x2:pi,y2:s,className:"recharts-legend-icon"});if(i.type==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(pi,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(i.type==="rect")return k.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(pi/8,"h").concat(pi,"v").concat(pi*3/4,"h").concat(-pi,"z"),className:"recharts-legend-icon"});if(k.isValidElement(i.legendIcon)){var u=pRe({},i);return delete u.legendIcon,k.cloneElement(i.legendIcon,u)}return k.createElement(_j,{fill:c,cx:s,cy:s,size:pi,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,s=o.payload,a=o.iconSize,l=o.layout,c=o.formatter,u=o.inactiveColor,d={x:0,y:0,width:pi,height:pi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,y){var g,b=m.formatter||c,v=ct((g={"recharts-legend-item":!0},Xm(g,"legend-item-".concat(y),!0),Xm(g,"inactive",m.inactive),g));if(m.type==="none")return null;var x=Me(m.value)?null:m.value;pc(!Me(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=m.inactive?u:m.color;return k.createElement("li",iI({className:v,style:h,key:"legend-item-".concat(y)},d_(i.props,m,y)),k.createElement(YP,{width:a,height:a,viewBox:d,style:p},i.renderIcon(m)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},b?b(x,m,y):x))})}},{key:"render",value:function(){var i=this.props,o=i.payload,s=i.layout,a=i.align;if(!o||!o.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),r}(E.PureComponent);Xm(wj,"displayName","Legend");Xm(wj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var SRe=tS;function ERe(){this.__data__=new SRe,this.size=0}var ARe=ERe;function CRe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var TRe=CRe;function PRe(t){return this.__data__.get(t)}var IRe=PRe;function NRe(t){return this.__data__.has(t)}var kRe=NRe,ORe=tS,RRe=fj,jRe=dj,$Re=200;function DRe(t,e){var r=this.__data__;if(r instanceof ORe){var n=r.__data__;if(!RRe||n.length<$Re-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new jRe(n)}return r.set(t,e),this.size=r.size,this}var MRe=DRe,FRe=tS,LRe=ARe,BRe=TRe,URe=IRe,VRe=kRe,WRe=MRe;function sh(t){var e=this.__data__=new FRe(t);this.size=e.size}sh.prototype.clear=LRe;sh.prototype.delete=BRe;sh.prototype.get=URe;sh.prototype.has=VRe;sh.prototype.set=WRe;var nQ=sh,zRe="__lodash_hash_undefined__";function GRe(t){return this.__data__.set(t,zRe),this}var qRe=GRe;function HRe(t){return this.__data__.has(t)}var KRe=HRe,YRe=dj,QRe=qRe,XRe=KRe;function b_(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new YRe;++e<r;)this.add(t[e])}b_.prototype.add=b_.prototype.push=QRe;b_.prototype.has=XRe;var iQ=b_;function JRe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var oQ=JRe;function ZRe(t,e){return t.has(e)}var sQ=ZRe,eje=iQ,tje=oQ,rje=sQ,nje=1,ije=2;function oje(t,e,r,n,i,o){var s=r&nje,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,p=r&ije?new eje:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var m=t[d],y=e[d];if(n)var g=s?n(y,m,d,e,t,o):n(m,y,d,t,e,o);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!tje(e,function(b,v){if(!rje(p,v)&&(m===b||i(m,b,r,n,o)))return p.push(v)})){h=!1;break}}else if(!(m===y||i(m,y,r,n,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var aQ=oje,sje=Zo,aje=sje.Uint8Array,lje=aje;function cje(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var uje=cje;function fje(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Sj=fje,aB=Bg,lB=lje,dje=uj,hje=aQ,pje=uje,mje=Sj,yje=1,gje=2,vje="[object Boolean]",bje="[object Date]",xje="[object Error]",_je="[object Map]",wje="[object Number]",Sje="[object RegExp]",Eje="[object Set]",Aje="[object String]",Cje="[object Symbol]",Tje="[object ArrayBuffer]",Pje="[object DataView]",cB=aB?aB.prototype:void 0,LA=cB?cB.valueOf:void 0;function Ije(t,e,r,n,i,o,s){switch(r){case Pje:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Tje:return!(t.byteLength!=e.byteLength||!o(new lB(t),new lB(e)));case vje:case bje:case wje:return dje(+t,+e);case xje:return t.name==e.name&&t.message==e.message;case Sje:case Aje:return t==e+"";case _je:var a=pje;case Eje:var l=n&yje;if(a||(a=mje),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=gje,s.set(t,e);var u=hje(a(t),a(e),n,i,o,s);return s.delete(t),u;case Cje:if(LA)return LA.call(t)==LA.call(e)}return!1}var Nje=Ije;function kje(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var lQ=kje,Oje=lQ,Rje=Un;function jje(t,e,r){var n=e(t);return Rje(t)?n:Oje(n,r(t))}var $je=jje;function Dje(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Mje=Dje;function Fje(){return[]}var Lje=Fje,Bje=Mje,Uje=Lje,Vje=Object.prototype,Wje=Vje.propertyIsEnumerable,uB=Object.getOwnPropertySymbols,zje=uB?function(t){return t==null?[]:(t=Object(t),Bje(uB(t),function(e){return Wje.call(t,e)}))}:Uje,Gje=zje;function qje(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Hje=qje,Kje=$s,Yje=Ds,Qje="[object Arguments]";function Xje(t){return Yje(t)&&Kje(t)==Qje}var Jje=Xje,fB=Jje,Zje=Ds,cQ=Object.prototype,e$e=cQ.hasOwnProperty,t$e=cQ.propertyIsEnumerable,r$e=fB(function(){return arguments}())?fB:function(t){return Zje(t)&&e$e.call(t,"callee")&&!t$e.call(t,"callee")},Ej=r$e,x_={exports:{}};function n$e(){return!1}var i$e=n$e;x_.exports;(function(t,e){var r=Zo,n=i$e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?r.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;t.exports=c})(x_,x_.exports);var uQ=x_.exports,o$e=9007199254740991,s$e=/^(?:0|[1-9]\d*)$/;function a$e(t,e){var r=typeof t;return e=e??o$e,!!e&&(r=="number"||r!="symbol"&&s$e.test(t))&&t>-1&&t%1==0&&t<e}var Aj=a$e,l$e=9007199254740991;function c$e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=l$e}var Cj=c$e,u$e=$s,f$e=Cj,d$e=Ds,h$e="[object Arguments]",p$e="[object Array]",m$e="[object Boolean]",y$e="[object Date]",g$e="[object Error]",v$e="[object Function]",b$e="[object Map]",x$e="[object Number]",_$e="[object Object]",w$e="[object RegExp]",S$e="[object Set]",E$e="[object String]",A$e="[object WeakMap]",C$e="[object ArrayBuffer]",T$e="[object DataView]",P$e="[object Float32Array]",I$e="[object Float64Array]",N$e="[object Int8Array]",k$e="[object Int16Array]",O$e="[object Int32Array]",R$e="[object Uint8Array]",j$e="[object Uint8ClampedArray]",$$e="[object Uint16Array]",D$e="[object Uint32Array]",Tt={};Tt[P$e]=Tt[I$e]=Tt[N$e]=Tt[k$e]=Tt[O$e]=Tt[R$e]=Tt[j$e]=Tt[$$e]=Tt[D$e]=!0;Tt[h$e]=Tt[p$e]=Tt[C$e]=Tt[m$e]=Tt[T$e]=Tt[y$e]=Tt[g$e]=Tt[v$e]=Tt[b$e]=Tt[x$e]=Tt[_$e]=Tt[w$e]=Tt[S$e]=Tt[E$e]=Tt[A$e]=!1;function M$e(t){return d$e(t)&&f$e(t.length)&&!!Tt[u$e(t)]}var F$e=M$e;function L$e(t){return function(e){return t(e)}}var fQ=L$e,__={exports:{}};__.exports;(function(t,e){var r=wY,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,s=o&&r.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(__,__.exports);var B$e=__.exports,U$e=F$e,V$e=fQ,dB=B$e,hB=dB&&dB.isTypedArray,W$e=hB?V$e(hB):U$e,dQ=W$e,z$e=Hje,G$e=Ej,q$e=Un,H$e=uQ,K$e=Aj,Y$e=dQ,Q$e=Object.prototype,X$e=Q$e.hasOwnProperty;function J$e(t,e){var r=q$e(t),n=!r&&G$e(t),i=!r&&!n&&H$e(t),o=!r&&!n&&!i&&Y$e(t),s=r||n||i||o,a=s?z$e(t.length,String):[],l=a.length;for(var c in t)(e||X$e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||K$e(c,l)))&&a.push(c);return a}var Z$e=J$e,e2e=Object.prototype;function t2e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||e2e;return t===r}var r2e=t2e;function n2e(t,e){return function(r){return t(e(r))}}var hQ=n2e,i2e=hQ,o2e=i2e(Object.keys,Object),s2e=o2e,a2e=r2e,l2e=s2e,c2e=Object.prototype,u2e=c2e.hasOwnProperty;function f2e(t){if(!a2e(t))return l2e(t);var e=[];for(var r in Object(t))u2e.call(t,r)&&r!="constructor"&&e.push(r);return e}var d2e=f2e,h2e=cj,p2e=Cj;function m2e(t){return t!=null&&p2e(t.length)&&!h2e(t)}var zg=m2e,y2e=Z$e,g2e=d2e,v2e=zg;function b2e(t){return v2e(t)?y2e(t):g2e(t)}var lS=b2e,x2e=$je,_2e=Gje,w2e=lS;function S2e(t){return x2e(t,w2e,_2e)}var E2e=S2e,pB=E2e,A2e=1,C2e=Object.prototype,T2e=C2e.hasOwnProperty;function P2e(t,e,r,n,i,o){var s=r&A2e,a=pB(t),l=a.length,c=pB(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var h=a[d];if(!(s?h in e:T2e.call(e,h)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var y=!0;o.set(t,e),o.set(e,t);for(var g=s;++d<l;){h=a[d];var b=t[h],v=e[h];if(n)var x=s?n(v,b,h,e,t,o):n(b,v,h,t,e,o);if(!(x===void 0?b===v||i(b,v,r,n,o):x)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var S=t.constructor,_=e.constructor;S!=_&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return o.delete(t),o.delete(e),y}var I2e=P2e,N2e=zc,k2e=Zo,O2e=N2e(k2e,"DataView"),R2e=O2e,j2e=zc,$2e=Zo,D2e=j2e($2e,"Promise"),M2e=D2e,F2e=zc,L2e=Zo,B2e=F2e(L2e,"Set"),pQ=B2e,U2e=zc,V2e=Zo,W2e=U2e(V2e,"WeakMap"),z2e=W2e,sI=R2e,aI=fj,lI=M2e,cI=pQ,uI=z2e,mQ=$s,ah=EY,mB="[object Map]",G2e="[object Object]",yB="[object Promise]",gB="[object Set]",vB="[object WeakMap]",bB="[object DataView]",q2e=ah(sI),H2e=ah(aI),K2e=ah(lI),Y2e=ah(cI),Q2e=ah(uI),Il=mQ;(sI&&Il(new sI(new ArrayBuffer(1)))!=bB||aI&&Il(new aI)!=mB||lI&&Il(lI.resolve())!=yB||cI&&Il(new cI)!=gB||uI&&Il(new uI)!=vB)&&(Il=function(t){var e=mQ(t),r=e==G2e?t.constructor:void 0,n=r?ah(r):"";if(n)switch(n){case q2e:return bB;case H2e:return mB;case K2e:return yB;case Y2e:return gB;case Q2e:return vB}return e});var X2e=Il,BA=nQ,J2e=aQ,Z2e=Nje,eDe=I2e,xB=X2e,_B=Un,wB=uQ,tDe=dQ,rDe=1,SB="[object Arguments]",EB="[object Array]",Zv="[object Object]",nDe=Object.prototype,AB=nDe.hasOwnProperty;function iDe(t,e,r,n,i,o){var s=_B(t),a=_B(e),l=s?EB:xB(t),c=a?EB:xB(e);l=l==SB?Zv:l,c=c==SB?Zv:c;var u=l==Zv,d=c==Zv,h=l==c;if(h&&wB(t)){if(!wB(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new BA),s||tDe(t)?J2e(t,e,r,n,i,o):Z2e(t,e,l,r,n,i,o);if(!(r&rDe)){var p=u&&AB.call(t,"__wrapped__"),m=d&&AB.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,g=m?e.value():e;return o||(o=new BA),i(y,g,r,n,o)}}return h?(o||(o=new BA),eDe(t,e,r,n,i,o)):!1}var oDe=iDe,sDe=oDe,CB=Ds;function yQ(t,e,r,n,i){return t===e?!0:t==null||e==null||!CB(t)&&!CB(e)?t!==t&&e!==e:sDe(t,e,r,n,yQ,i)}var Tj=yQ,aDe=nQ,lDe=Tj,cDe=1,uDe=2;function fDe(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=r[i];var l=a[0],c=t[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new aDe;if(n)var h=n(c,u,l,t,e,d);if(!(h===void 0?lDe(u,c,cDe|uDe,n,d):h))return!1}}return!0}var dDe=fDe,hDe=al;function pDe(t){return t===t&&!hDe(t)}var gQ=pDe,mDe=gQ,yDe=lS;function gDe(t){for(var e=yDe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,mDe(i)]}return e}var vDe=gDe;function bDe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var vQ=bDe,xDe=dDe,_De=vDe,wDe=vQ;function SDe(t){var e=_De(t);return e.length==1&&e[0][2]?wDe(e[0][0],e[0][1]):function(r){return r===t||xDe(r,t,e)}}var EDe=SDe;function ADe(t,e){return t!=null&&e in Object(t)}var CDe=ADe,TDe=PY,PDe=Ej,IDe=Un,NDe=Aj,kDe=Cj,ODe=nS;function RDe(t,e,r){e=TDe(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=ODe(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&kDe(i)&&NDe(s,i)&&(IDe(t)||PDe(t)))}var jDe=RDe,$De=CDe,DDe=jDe;function MDe(t,e){return t!=null&&DDe(t,e,$De)}var FDe=MDe,LDe=Tj,BDe=IY,UDe=FDe,VDe=lj,WDe=gQ,zDe=vQ,GDe=nS,qDe=1,HDe=2;function KDe(t,e){return VDe(t)&&WDe(e)?zDe(GDe(t),e):function(r){var n=BDe(r,t);return n===void 0&&n===e?UDe(r,t):LDe(e,n,qDe|HDe)}}var YDe=KDe;function QDe(t){return t}var lh=QDe;function XDe(t){return function(e){return e==null?void 0:e[t]}}var JDe=XDe,ZDe=mj;function eMe(t){return function(e){return ZDe(e,t)}}var tMe=eMe,rMe=JDe,nMe=tMe,iMe=lj,oMe=nS;function sMe(t){return iMe(t)?rMe(oMe(t)):nMe(t)}var aMe=sMe,lMe=EDe,cMe=YDe,uMe=lh,fMe=Un,dMe=aMe;function hMe(t){return typeof t=="function"?t:t==null?uMe:typeof t=="object"?fMe(t)?cMe(t[0],t[1]):lMe(t):dMe(t)}var ll=hMe;function pMe(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var bQ=pMe;function mMe(t){return t!==t}var yMe=mMe;function gMe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var vMe=gMe,bMe=bQ,xMe=yMe,_Me=vMe;function wMe(t,e,r){return e===e?_Me(t,e,r):bMe(t,xMe,r)}var SMe=wMe,EMe=SMe;function AMe(t,e){var r=t==null?0:t.length;return!!r&&EMe(t,e,0)>-1}var CMe=AMe;function TMe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var PMe=TMe;function IMe(){}var NMe=IMe,UA=pQ,kMe=NMe,OMe=Sj,RMe=1/0,jMe=UA&&1/OMe(new UA([,-0]))[1]==RMe?function(t){return new UA(t)}:kMe,$Me=jMe,DMe=iQ,MMe=CMe,FMe=PMe,LMe=sQ,BMe=$Me,UMe=Sj,VMe=200;function WMe(t,e,r){var n=-1,i=MMe,o=t.length,s=!0,a=[],l=a;if(r)s=!1,i=FMe;else if(o>=VMe){var c=e?null:BMe(t);if(c)return UMe(c);s=!1,i=LMe,l=new DMe}else l=e?[]:a;e:for(;++n<o;){var u=t[n],d=e?e(u):u;if(u=r||u!==0?u:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,r)||(l!==a&&l.push(d),a.push(u))}return a}var zMe=WMe,GMe=ll,qMe=zMe;function HMe(t,e){return t&&t.length?qMe(t,GMe(e)):[]}var KMe=HMe;const TB=ot(KMe);function xQ(t,e,r){return e===!0?TB(t,r):Me(e)?TB(t,e):t}function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}var YMe=["ref"];function PB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(r),!0).forEach(function(n){cS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wQ(n.key),n)}}function XMe(t,e,r){return e&&IB(t.prototype,e),r&&IB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function JMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fI(t,e)}function ZMe(t){var e=tFe();return function(){var n=w_(t),i;if(e){var o=w_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return eFe(this,i)}}function eFe(t,e){if(e&&(bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Q(t)}function _Q(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w_(t){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w_(t)}function cS(t,e,r){return e=wQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wQ(t){var e=rFe(t,"string");return bd(e)==="symbol"?e:String(e)}function rFe(t,e){if(bd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(bd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nFe(t,e){if(t==null)return{};var r=iFe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iFe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function oFe(t){return t.value}function sFe(t,e){if(k.isValidElement(t))return k.cloneElement(t,e);if(typeof t=="function")return k.createElement(t,e);e.ref;var r=nFe(e,YMe);return k.createElement(wj,r)}var NB=1,Jm=function(t){JMe(r,t);var e=ZMe(r);function r(){var n;QMe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),cS(_Q(n),"lastBoundingBox",{width:-1,height:-1}),n}return XMe(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.lastBoundingBox.width)>NB||Math.abs(o.height-this.lastBoundingBox.height)>NB)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o))}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?pl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,s=o.layout,a=o.align,l=o.verticalAlign,c=o.margin,u=o.chartWidth,d=o.chartHeight,h,p;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();p={top:((d||0)-y.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return pl(pl({},h),p)}},{key:"render",value:function(){var i=this,o=this.props,s=o.content,a=o.width,l=o.height,c=o.wrapperStyle,u=o.payloadUniqBy,d=o.payload,h=pl(pl({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return k.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){i.wrapperNode=m}},sFe(s,pl(pl({},this.props),{},{payload:xQ(d,u,oFe)})))}}],[{key:"getWithHeight",value:function(i,o){var s=i.props.layout;return s==="vertical"&&ne(i.props.height)?{height:i.props.height}:s==="horizontal"?{width:i.props.width||o}:null}}]),r}(E.PureComponent);cS(Jm,"displayName","Legend");cS(Jm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var kB=Bg,aFe=Ej,lFe=Un,OB=kB?kB.isConcatSpreadable:void 0;function cFe(t){return lFe(t)||aFe(t)||!!(OB&&t&&t[OB])}var uFe=cFe,fFe=lQ,dFe=uFe;function SQ(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=dFe),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?SQ(a,e-1,r,n,i):fFe(i,a):n||(i[i.length]=a)}return i}var EQ=SQ;function hFe(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++i];if(r(o[l],l,o)===!1)break}return e}}var pFe=hFe,mFe=pFe,yFe=mFe(),gFe=yFe,vFe=gFe,bFe=lS;function xFe(t,e){return t&&vFe(t,e,bFe)}var AQ=xFe,_Fe=zg;function wFe(t,e){return function(r,n){if(r==null)return r;if(!_Fe(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var SFe=wFe,EFe=AQ,AFe=SFe,CFe=AFe(EFe),Pj=CFe,TFe=Pj,PFe=zg;function IFe(t,e){var r=-1,n=PFe(t)?Array(t.length):[];return TFe(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var CQ=IFe;function NFe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var kFe=NFe,RB=th;function OFe(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=RB(t),s=e!==void 0,a=e===null,l=e===e,c=RB(e);if(!a&&!c&&!o&&t>e||o&&s&&l&&!a&&!c||n&&s&&l||!r&&l||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!l)return-1}return 0}var RFe=OFe,jFe=RFe;function $Fe(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;++n<s;){var l=jFe(i[n],o[n]);if(l){if(n>=a)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return t.index-e.index}var DFe=$Fe,VA=pj,MFe=mj,FFe=ll,LFe=CQ,BFe=kFe,UFe=fQ,VFe=DFe,WFe=lh,zFe=Un;function GFe(t,e,r){e.length?e=VA(e,function(o){return zFe(o)?function(s){return MFe(s,o.length===1?o[0]:o)}:o}):e=[WFe];var n=-1;e=VA(e,UFe(FFe));var i=LFe(t,function(o,s,a){var l=VA(e,function(c){return c(o)});return{criteria:l,index:++n,value:o}});return BFe(i,function(o,s){return VFe(o,s,r)})}var qFe=GFe;function HFe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var KFe=HFe,YFe=KFe,jB=Math.max;function QFe(t,e,r){return e=jB(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=jB(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),YFe(t,this,a)}}var XFe=QFe;function JFe(t){return function(){return t}}var ZFe=JFe,eLe=zc,tLe=function(){try{var t=eLe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),TQ=tLe,rLe=ZFe,$B=TQ,nLe=lh,iLe=$B?function(t,e){return $B(t,"toString",{configurable:!0,enumerable:!1,value:rLe(e),writable:!0})}:nLe,oLe=iLe,sLe=800,aLe=16,lLe=Date.now;function cLe(t){var e=0,r=0;return function(){var n=lLe(),i=aLe-(n-r);if(r=n,i>0){if(++e>=sLe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var uLe=cLe,fLe=oLe,dLe=uLe,hLe=dLe(fLe),pLe=hLe,mLe=lh,yLe=XFe,gLe=pLe;function vLe(t,e){return gLe(yLe(t,e,mLe),t+"")}var bLe=vLe,xLe=uj,_Le=zg,wLe=Aj,SLe=al;function ELe(t,e,r){if(!SLe(r))return!1;var n=typeof e;return(n=="number"?_Le(r)&&wLe(e,r.length):n=="string"&&e in r)?xLe(r[e],t):!1}var uS=ELe,ALe=EQ,CLe=qFe,TLe=bLe,DB=uS,PLe=TLe(function(t,e){if(t==null)return[];var r=e.length;return r>1&&DB(t,e[0],e[1])?e=[]:r>2&&DB(e[0],e[1],e[2])&&(e=[e[0]]),CLe(t,ALe(e,1),[])}),ILe=PLe;const Ij=ot(ILe);function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function NLe(t,e){return jLe(t)||RLe(t,e)||OLe(t,e)||kLe()}function kLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OLe(t,e){if(t){if(typeof t=="string")return MB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MB(t,e)}}function MB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RLe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function jLe(t){if(Array.isArray(t))return t}function FB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FB(Object(r),!0).forEach(function(n){$Le(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Le(t,e,r){return e=DLe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DLe(t){var e=MLe(t,"string");return Zm(e)==="symbol"?e:String(e)}function MLe(t,e){if(Zm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FLe(t){return Array.isArray(t)&&dr(t[0])&&dr(t[1])?t.join(" ~ "):t}var LLe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,y=e.label,g=e.labelFormatter,b=function(){if(u&&u.length){var I={padding:0,margin:0},T=(h?Ij(u,h):u).map(function(P,O){if(P.type==="none")return null;var N=WA({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},a),j=P.formatter||d||FLe,L=P.value,U=P.name,V=L,R=U;if(j&&V!=null&&R!=null){var F=j(L,U,P,O,u);if(Array.isArray(F)){var z=NLe(F,2);V=z[0],R=z[1]}else V=F}return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(O),style:N},dr(R)?k.createElement("span",{className:"recharts-tooltip-item-name"},R):null,dr(R)?k.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,k.createElement("span",{className:"recharts-tooltip-item-value"},V),k.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:I},T)}return null},v=WA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=WA({margin:0},c),S=!Xe(y),_=S?y:"",w=ct("recharts-default-tooltip",p),A=ct("recharts-tooltip-label",m);return S&&g&&u!==void 0&&u!==null&&(_=g(y,u)),k.createElement("div",{className:w,style:v},k.createElement("p",{className:A,style:x},k.isValidElement(_)?_:"".concat(_)),b())},PQ={exports:{}},BLe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ULe=BLe,VLe=ULe;function IQ(){}function NQ(){}NQ.resetWarningCache=IQ;var WLe=function(){function t(n,i,o,s,a,l){if(l!==VLe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:NQ,resetWarningCache:IQ};return r.PropTypes=r,r};PQ.exports=WLe();var zLe=PQ.exports;const Pe=ot(zLe);var GLe=Object.getOwnPropertyNames,qLe=Object.getOwnPropertySymbols,HLe=Object.prototype.hasOwnProperty;function LB(t,e){return function(n,i,o){return t(n,i,o)&&e(n,i,o)}}function e0(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var o=i.cache,s=o.get(r),a=o.get(n);if(s&&a)return s===n&&a===r;o.set(r,n),o.set(n,r);var l=t(r,n,i);return o.delete(r),o.delete(n),l}}function BB(t){return GLe(t).concat(qLe(t))}var kQ=Object.hasOwn||function(t,e){return HLe.call(t,e)};function ch(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var OQ="_owner",UB=Object.getOwnPropertyDescriptor,VB=Object.keys;function KLe(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function YLe(t,e){return ch(t.getTime(),e.getTime())}function WB(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),c=!1,u=0;(a=l.next())&&!a.done;){var d=s.value,h=d[0],p=d[1],m=a.value,y=m[0],g=m[1];!c&&!n[u]&&(c=r.equals(h,y,o,u,t,e,r)&&r.equals(p,g,h,y,t,e,r))&&(n[u]=!0),u++}if(!c)return!1;o++}return!0}function QLe(t,e,r){var n=VB(t),i=n.length;if(VB(e).length!==i)return!1;for(var o;i-- >0;)if(o=n[i],o===OQ&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!kQ(e,o)||!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Lh(t,e,r){var n=BB(t),i=n.length;if(BB(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=n[i],o===OQ&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!kQ(e,o)||!r.equals(t[o],e[o],o,o,t,e,r)||(s=UB(t,o),a=UB(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function XLe(t,e){return ch(t.valueOf(),e.valueOf())}function JLe(t,e){return t.source===e.source&&t.flags===e.flags}function zB(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,c=0;(s=a.next())&&!s.done;)!l&&!n[c]&&(l=r.equals(o.value,s.value,o.value,s.value,t,e,r))&&(n[c]=!0),c++;if(!l)return!1}return!0}function ZLe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var e3e="[object Arguments]",t3e="[object Boolean]",r3e="[object Date]",n3e="[object Map]",i3e="[object Number]",o3e="[object Object]",s3e="[object RegExp]",a3e="[object Set]",l3e="[object String]",c3e=Array.isArray,GB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,qB=Object.assign,u3e=Object.prototype.toString.call.bind(Object.prototype.toString);function f3e(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(u,d,h){if(u===d)return!0;if(u==null||d==null||typeof u!="object"||typeof d!="object")return u!==u&&d!==d;var p=u.constructor;if(p!==d.constructor)return!1;if(p===Object)return i(u,d,h);if(c3e(u))return e(u,d,h);if(GB!=null&&GB(u))return l(u,d,h);if(p===Date)return r(u,d,h);if(p===RegExp)return s(u,d,h);if(p===Map)return n(u,d,h);if(p===Set)return a(u,d,h);var m=u3e(u);return m===r3e?r(u,d,h):m===s3e?s(u,d,h):m===n3e?n(u,d,h):m===a3e?a(u,d,h):m===o3e?typeof u.then!="function"&&typeof d.then!="function"&&i(u,d,h):m===e3e?i(u,d,h):m===t3e||m===i3e||m===l3e?o(u,d,h):!1}}function d3e(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Lh:KLe,areDatesEqual:YLe,areMapsEqual:n?LB(WB,Lh):WB,areObjectsEqual:n?Lh:QLe,arePrimitiveWrappersEqual:XLe,areRegExpsEqual:JLe,areSetsEqual:n?LB(zB,Lh):zB,areTypedArraysEqual:n?Lh:ZLe};if(r&&(i=qB({},i,r(i))),e){var o=e0(i.areArraysEqual),s=e0(i.areMapsEqual),a=e0(i.areObjectsEqual),l=e0(i.areSetsEqual);i=qB({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function h3e(t){return function(e,r,n,i,o,s,a){return t(e,r,a)}}function p3e(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,o=t.strict;if(n)return function(l,c){var u=n(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,p=u.meta;return r(l,c,{cache:h,equals:i,meta:p,strict:o})};if(e)return function(l,c){return r(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return r(l,c,s)}}var m3e=cl();cl({strict:!0});cl({circular:!0});cl({circular:!0,strict:!0});cl({createInternalComparator:function(){return ch}});cl({strict:!0,createInternalComparator:function(){return ch}});cl({circular:!0,createInternalComparator:function(){return ch}});cl({circular:!0,createInternalComparator:function(){return ch},strict:!0});function cl(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=d3e(t),l=f3e(a),c=n?n(l):h3e(l);return p3e({circular:r,comparator:l,createState:i,equals:c,strict:s})}function y3e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function HB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>e?(t(o),r=-1):y3e(i)};requestAnimationFrame(n)}function dI(t){"@babel/helpers - typeof";return dI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dI(t)}function g3e(t){return _3e(t)||x3e(t)||b3e(t)||v3e()}function v3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b3e(t,e){if(t){if(typeof t=="string")return KB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KB(t,e)}}function KB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _3e(t){if(Array.isArray(t))return t}function w3e(){var t={},e=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var s=o,a=g3e(s),l=a[0],c=a.slice(1);if(typeof l=="number"){HB(i.bind(null,c),l);return}i(l),HB(i.bind(null,c));return}dI(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}function YB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(r),!0).forEach(function(n){S_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S_(t,e,r){return e=S3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S3e(t){var e=E3e(t,"string");return ey(e)==="symbol"?e:String(e)}function E3e(t,e){if(ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A3e=["Webkit","Moz","O","ms"],C3e=["-webkit-","-moz-","-o-","-ms-"],T3e=["transform","transformOrigin","transition"],P3e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},I3e=function(e){return e},N3e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},k3e=function(e,r){if(T3e.indexOf(e)===-1)return S_({},e,Number.isNaN(r)?0:r);var n=e==="transition",i=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=r;return A3e.reduce(function(s,a,l){return n&&(o=r.replace(/(transform|transform-origin)/gim,"".concat(C3e[l],"$1"))),xd(xd({},s),{},S_({},a+i,o))},{})},Gp=function(e,r){return Object.keys(r).reduce(function(n,i){return xd(xd({},n),{},S_({},i,e(i,r[i])))},{})},Nj=function(e){return Object.keys(e).reduce(function(r,n){return xd(xd({},r),k3e(n,r[n]))},e)},QB=function(e,r,n){return e.map(function(i){return"".concat(N3e(i)," ").concat(r,"ms ").concat(n)}).join(",")};function O3e(t,e){return $3e(t)||j3e(t,e)||RQ(t,e)||R3e()}function R3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function $3e(t){if(Array.isArray(t))return t}function D3e(t){return L3e(t)||F3e(t)||RQ(t)||M3e()}function M3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RQ(t,e){if(t){if(typeof t=="string")return hI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hI(t,e)}}function F3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L3e(t){if(Array.isArray(t))return hI(t)}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E_=1e-4,jQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},$Q=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},XB=function(e,r){return function(n){var i=jQ(e,r);return $Q(i,n)}},B3e=function(e,r){return function(n){var i=jQ(e,r),o=[].concat(D3e(i.map(function(s,a){return s*a}).slice(1)),[0]);return $Q(o,n)}},JB=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],o=r[1],s=r[2],a=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=O3e(c,4);i=u[0],o=u[1],s=u[2],a=u[3]}}}var d=XB(i,s),h=XB(o,a),p=B3e(i,s),m=function(b){return b>1?1:b<0?0:b},y=function(b){for(var v=b>1?1:b,x=v,S=0;S<8;++S){var _=d(x)-v,w=p(x);if(Math.abs(_-v)<E_||w<E_)return h(x);x=m(x-_/w)}return h(x)};return y.isStepper=!1,y},U3e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(u,d,h){var p=-(u-d)*n,m=h*o,y=h+(p-m)*a/1e3,g=h*a/1e3+u;return Math.abs(g-d)<E_&&Math.abs(y)<E_?[d,0]:[g,y]};return l.isStepper=!0,l.dt=a,l},V3e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JB(i);case"spring":return U3e();default:if(i.split("(")[0]==="cubic-bezier")return JB(i)}return typeof i=="function"?i:null};function ty(t){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(t)}function ZB(t){return G3e(t)||z3e(t)||DQ(t)||W3e()}function W3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G3e(t){if(Array.isArray(t))return mI(t)}function e4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e4(Object(r),!0).forEach(function(n){pI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pI(t,e,r){return e=q3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q3e(t){var e=H3e(t,"string");return ty(e)==="symbol"?e:String(e)}function H3e(t,e){if(ty(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ty(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K3e(t,e){return X3e(t)||Q3e(t,e)||DQ(t,e)||Y3e()}function Y3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DQ(t,e){if(t){if(typeof t=="string")return mI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mI(t,e)}}function mI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function X3e(t){if(Array.isArray(t))return t}var A_=function(e,r,n){return e+(r-e)*n},yI=function(e){var r=e.from,n=e.to;return r!==n},J3e=function t(e,r,n){var i=Gp(function(o,s){if(yI(s)){var a=e(s.from,s.to,s.velocity),l=K3e(a,2),c=l[0],u=l[1];return Fr(Fr({},s),{},{from:c,velocity:u})}return s},r);return n<1?Gp(function(o,s){return yI(s)?Fr(Fr({},s),{},{velocity:A_(s.velocity,i[o].velocity,n),from:A_(s.from,i[o].from,n)}):s},r):t(e,i,n-1)};const Z3e=function(t,e,r,n,i){var o=P3e(t,e),s=o.reduce(function(g,b){return Fr(Fr({},g),{},pI({},b,[t[b],e[b]]))},{}),a=o.reduce(function(g,b){return Fr(Fr({},g),{},pI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return Gp(function(b,v){return v.from},a)},p=function(){return!Object.values(a).filter(yI).length},m=function(b){c||(c=b);var v=b-c,x=v/r.dt;a=J3e(r,a,x),i(Fr(Fr(Fr({},t),e),h())),c=b,p()||(l=requestAnimationFrame(d))},y=function(b){u||(u=b);var v=(b-u)/n,x=Gp(function(_,w){return A_.apply(void 0,ZB(w).concat([r(v)]))},s);if(i(Fr(Fr(Fr({},t),e),x)),v<1)l=requestAnimationFrame(d);else{var S=Gp(function(_,w){return A_.apply(void 0,ZB(w).concat([r(1)]))},s);i(Fr(Fr(Fr({},t),e),S))}};return d=r.isStepper?m:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}var eBe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function tBe(t,e){if(t==null)return{};var r=rBe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rBe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function zA(t){return sBe(t)||oBe(t)||iBe(t)||nBe()}function nBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iBe(t,e){if(t){if(typeof t=="string")return gI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gI(t,e)}}function oBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sBe(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function t4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t4(Object(r),!0).forEach(function(n){pp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pp(t,e,r){return e=MQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MQ(n.key),n)}}function lBe(t,e,r){return e&&r4(t.prototype,e),r&&r4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MQ(t){var e=cBe(t,"string");return _d(e)==="symbol"?e:String(e)}function cBe(t,e){if(_d(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_d(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}function vI(t,e){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vI(t,e)}function fBe(t){var e=dBe();return function(){var n=C_(t),i;if(e){var o=C_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bI(this,i)}}function bI(t,e){if(e&&(_d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xI(t)}function xI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C_(t){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C_(t)}var Ps=function(t){uBe(r,t);var e=fBe(r);function r(n,i){var o;aBe(this,r),o=e.call(this,n,i);var s=o.props,a=s.isActive,l=s.attributeName,c=s.from,u=s.to,d=s.steps,h=s.children,p=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(xI(o)),o.changeStyle=o.changeStyle.bind(xI(o)),!a||p<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:u}),bI(o);if(d&&d.length)o.state={style:d[0].style};else if(c){if(typeof h=="function")return o.state={style:c},bI(o);o.state={style:l?pp({},l,c):c}}else o.state={style:{}};return o}return lBe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,u=o.to,d=o.from,h=this.state.style;if(a){if(!s){var p={style:l?pp({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(p);return}if(!(m3e(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=m||c?d:i.to;if(this.state&&h){var g={style:l?pp({},l,y):y};(l&&[l]!==y||!l&&h!==y)&&this.setState(g)}this.runAnimation(Vi(Vi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=Z3e(s,a,V3e(c),l,this.changeStyle),m=function(){o.stopJSAnimation=p()};this.manager.start([h,u,m,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,d=c.duration,h=d===void 0?0:d,p=function(y,g,b){if(b===0)return y;var v=g.duration,x=g.easing,S=x===void 0?"ease":x,_=g.style,w=g.properties,A=g.onAnimationEnd,C=b>0?s[b-1]:g,I=w||Object.keys(_);if(typeof S=="function"||S==="spring")return[].concat(zA(y),[o.runJSAnimation.bind(o,{from:C.style,to:_,duration:v,easing:S}),v]);var T=QB(I,v,S),P=Vi(Vi(Vi({},C.style),_),{},{transition:T});return[].concat(zA(y),[P,v,A]).filter(I3e)};return this.manager.start([l].concat(zA(s.reduce(p,[u,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=w3e());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=a?pp({},a,l):l,g=QB(Object.keys(y),s,c);m.start([u,o,Vi(Vi({},y),{},{transition:g}),s,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=tBe(i,eBe),c=E.Children.count(o),u=Nj(this.state.style);if(typeof o=="function")return o(u);if(!a||c===0||s<=0)return o;var d=function(p){var m=p.props,y=m.style,g=y===void 0?{}:y,b=m.className,v=E.cloneElement(p,Vi(Vi({},l),{},{style:Vi(Vi({},g),u),className:b}));return v};return c===1?d(E.Children.only(o)):k.createElement("div",null,E.Children.map(o,function(h){return d(h)}))}}]),r}(E.PureComponent);Ps.displayName="Animate";Ps.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ps.propTypes={from:Pe.oneOfType([Pe.object,Pe.string]),to:Pe.oneOfType([Pe.object,Pe.string]),attributeName:Pe.string,duration:Pe.number,begin:Pe.number,easing:Pe.oneOfType([Pe.string,Pe.func]),steps:Pe.arrayOf(Pe.shape({duration:Pe.number.isRequired,style:Pe.object.isRequired,easing:Pe.oneOfType([Pe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pe.func]),properties:Pe.arrayOf("string"),onAnimationEnd:Pe.func})),children:Pe.oneOfType([Pe.node,Pe.func]),isActive:Pe.bool,canBegin:Pe.bool,onAnimationEnd:Pe.func,shouldReAnimate:Pe.bool,onAnimationStart:Pe.func,onAnimationReStart:Pe.func};Number.isFinite===void 0&&(Number.isFinite=function(t){return typeof t=="number"&&isFinite(t)});Pe.object,Pe.object,Pe.object,Pe.element;Pe.object,Pe.object,Pe.object,Pe.oneOfType([Pe.array,Pe.element]),Pe.any;function ry(t){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(t)}function t0(t,e,r){return e=hBe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hBe(t){var e=pBe(t,"string");return ry(e)==="symbol"?e:String(e)}function pBe(t,e){if(ry(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ry(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bh="recharts-tooltip-wrapper",mBe={visibility:"hidden"};function yBe(t){var e,r=t.coordinate,n=t.translateX,i=t.translateY;return ct(Bh,(e={},t0(e,"".concat(Bh,"-right"),ne(n)&&r&&ne(r.x)&&n>=r.x),t0(e,"".concat(Bh,"-left"),ne(n)&&r&&ne(r.x)&&n<r.x),t0(e,"".concat(Bh,"-bottom"),ne(i)&&r&&ne(r.y)&&i>=r.y),t0(e,"".concat(Bh,"-top"),ne(i)&&r&&ne(r.y)&&i<r.y),e))}function n4(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&ne(o[n]))return o[n];var u=r[n]-a-i,d=r[n]+i;if(e[n])return s[n]?u:d;if(s[n]){var h=u,p=l[n];return h<p?Math.max(d,l[n]):Math.max(u,l[n])}var m=d+a,y=l[n]+c;return m>y?Math.max(u,l[n]):Math.max(d,l[n])}function gBe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return Nj({transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")})}function vBe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,d;return s.height>0&&s.width>0&&r?(u=n4({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=n4({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=gBe({translateX:u,translateY:d,useTranslate3d:a})):c=mBe,{cssProperties:c,cssClasses:yBe({translateX:u,translateY:d,coordinate:r})}}function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function i4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(r),!0).forEach(function(n){rb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FQ(n.key),n)}}function xBe(t,e,r){return e&&o4(t.prototype,e),r&&o4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Be(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_I(t,e)}function _I(t,e){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_I(t,e)}function wBe(t){var e=EBe();return function(){var n=T_(t),i;if(e){var o=T_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return SBe(this,i)}}function SBe(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tb(t)}function tb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T_(t){return T_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T_(t)}function rb(t,e,r){return e=FQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FQ(t){var e=ABe(t,"string");return wd(e)==="symbol"?e:String(e)}function ABe(t,e){if(wd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s4=1,CBe=function(t){_Be(r,t);var e=wBe(r);function r(){var n;bBe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),rb(tb(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),rb(tb(n),"lastBoundingBox",{width:-1,height:-1}),rb(tb(n),"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return xBe(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.lastBoundingBox.width)>s4||Math.abs(i.height-this.lastBoundingBox.height)>s4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,s=o.active,a=o.allowEscapeViewBox,l=o.animationDuration,c=o.animationEasing,u=o.children,d=o.coordinate,h=o.hasPayload,p=o.isAnimationActive,m=o.offset,y=o.position,g=o.reverseDirection,b=o.useTranslate3d,v=o.viewBox,x=o.wrapperStyle,S=vBe({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:b,viewBox:v}),_=S.cssClasses,w=S.cssProperties,A=GA(GA(GA({},p&&s&&Nj({transition:"transform ".concat(l,"ms ").concat(c)})),w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return k.createElement("div",{tabIndex:-1,role:"dialog",className:_,style:A,ref:function(I){i.wrapperNode=I}},u)}}]),r}(E.PureComponent),TBe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},vs={isSsr:TBe(),get:function(e){return vs[e]},set:function(e,r){if(typeof e=="string")vs[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){vs[i]=e[i]})}}};function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(t)}function a4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function l4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(r),!0).forEach(function(n){kj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LQ(n.key),n)}}function IBe(t,e,r){return e&&c4(t.prototype,e),r&&c4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function NBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wI(t,e)}function kBe(t){var e=jBe();return function(){var n=P_(t),i;if(e){var o=P_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return OBe(this,i)}}function OBe(t,e){if(e&&(Sd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RBe(t)}function RBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P_(t){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P_(t)}function kj(t,e,r){return e=LQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LQ(t){var e=$Be(t,"string");return Sd(e)==="symbol"?e:String(e)}function $Be(t,e){if(Sd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DBe(t){return t.dataKey}function MBe(t,e){return k.isValidElement(t)?k.cloneElement(t,e):typeof t=="function"?k.createElement(t,e):k.createElement(LLe,e)}var Uu=function(t){NBe(r,t);var e=kBe(r);function r(){return PBe(this,r),e.apply(this,arguments)}return IBe(r,[{key:"render",value:function(){var i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,y=i.payloadUniqBy,g=i.position,b=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,S=i.wrapperStyle,_=m??[];d&&_.length&&(_=xQ(m.filter(function(A){return A.value!=null}),y,DBe));var w=_.length>0;return k.createElement(CBe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:h,active:o,coordinate:u,hasPayload:w,offset:p,position:g,reverseDirection:b,useTranslate3d:v,viewBox:x,wrapperStyle:S},MBe(c,l4(l4({},this.props),{},{payload:_})))}}]),r}(E.PureComponent);kj(Uu,"displayName","Tooltip");kj(Uu,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!vs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var FBe=Zo,LBe=function(){return FBe.Date.now()},BBe=LBe,UBe=/\s/;function VBe(t){for(var e=t.length;e--&&UBe.test(t.charAt(e)););return e}var WBe=VBe,zBe=WBe,GBe=/^\s+/;function qBe(t){return t&&t.slice(0,zBe(t)+1).replace(GBe,"")}var HBe=qBe,KBe=HBe,u4=al,YBe=th,f4=0/0,QBe=/^[-+]0x[0-9a-f]+$/i,XBe=/^0b[01]+$/i,JBe=/^0o[0-7]+$/i,ZBe=parseInt;function e4e(t){if(typeof t=="number")return t;if(YBe(t))return f4;if(u4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=u4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=KBe(t);var r=XBe.test(t);return r||JBe.test(t)?ZBe(t.slice(2),r?2:8):QBe.test(t)?f4:+t}var BQ=e4e,t4e=al,qA=BBe,d4=BQ,r4e="Expected a function",n4e=Math.max,i4e=Math.min;function o4e(t,e,r){var n,i,o,s,a,l,c=0,u=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(r4e);e=d4(e)||0,t4e(r)&&(u=!!r.leading,d="maxWait"in r,o=d?n4e(d4(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function p(w){var A=n,C=i;return n=i=void 0,c=w,s=t.apply(C,A),s}function m(w){return c=w,a=setTimeout(b,e),u?p(w):s}function y(w){var A=w-l,C=w-c,I=e-A;return d?i4e(I,o-C):I}function g(w){var A=w-l,C=w-c;return l===void 0||A>=e||A<0||d&&C>=o}function b(){var w=qA();if(g(w))return v(w);a=setTimeout(b,y(w))}function v(w){return a=void 0,h&&n?p(w):(n=i=void 0,s)}function x(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function S(){return a===void 0?s:v(qA())}function _(){var w=qA(),A=g(w);if(n=arguments,i=this,l=w,A){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(b,e),p(l)}return a===void 0&&(a=setTimeout(b,e)),s}return _.cancel=x,_.flush=S,_}var s4e=o4e,a4e=s4e,l4e=al,c4e="Expected a function";function u4e(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(c4e);return l4e(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),a4e(t,e,{leading:n,maxWait:e,trailing:i})}var f4e=u4e;const UQ=ot(f4e);function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(t)}function h4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function r0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h4(Object(r),!0).forEach(function(n){d4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d4e(t,e,r){return e=h4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h4e(t){var e=p4e(t,"string");return ny(e)==="symbol"?e:String(e)}function p4e(t,e){if(ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m4e(t,e){return b4e(t)||v4e(t,e)||g4e(t,e)||y4e()}function y4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g4e(t,e){if(t){if(typeof t=="string")return p4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(t,e)}}function p4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function b4e(t){if(Array.isArray(t))return t}var VQ=E.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,y=m===void 0?0:m,g=t.id,b=t.className,v=t.onResize,x=t.style,S=x===void 0?{}:x,_=E.useRef(null),w=E.useRef();w.current=v,E.useImperativeHandle(e,function(){return Object.assign(_.current,{get current(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current}})});var A=E.useState({containerWidth:i.width,containerHeight:i.height}),C=m4e(A,2),I=C[0],T=C[1],P=E.useCallback(function(N,j){T(function(L){var U=Math.round(N),V=Math.round(j);return L.containerWidth===U&&L.containerHeight===V?L:{containerWidth:U,containerHeight:V}})},[]);E.useEffect(function(){var N=function(F){var z,ae=F[0].contentRect,te=ae.width,be=ae.height;P(te,be),(z=w.current)===null||z===void 0||z.call(w,te,be)};y>0&&(N=UQ(N,y,{trailing:!0,leading:!1}));var j=new ResizeObserver(N),L=_.current.getBoundingClientRect(),U=L.width,V=L.height;return P(U,V),j.observe(_.current),function(){j.disconnect()}},[P,y]);var O=E.useMemo(function(){var N=I.containerWidth,j=I.containerHeight;if(N<0||j<0)return null;pc(Bl(s)||Bl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),pc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var L=Bl(s)?N:s,U=Bl(l)?j:l;r&&r>0&&(L?U=L/r:U&&(L=U*r),h&&U>h&&(U=h)),pc(L>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,U,s,l,u,d,r);var V=!Array.isArray(p)&&Lx.isElement(p)&&gs(p.type).endsWith("Chart");return k.Children.map(p,function(R){return Lx.isElement(R)?E.cloneElement(R,r0({width:L,height:U},V?{style:r0({height:"100%",width:"100%",maxHeight:U,maxWidth:L},R.props.style)}:{})):R})},[r,p,l,h,d,u,I,s]);return k.createElement("div",{id:g?"".concat(g):void 0,className:ct("recharts-responsive-container",b),style:r0(r0({},S),{},{width:s,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:_},O)}),WQ=function(e){return null};WQ.displayName="Cell";function iy(t){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(t)}function m4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m4(Object(r),!0).forEach(function(n){x4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x4e(t,e,r){return e=_4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _4e(t){var e=w4e(t,"string");return iy(e)==="symbol"?e:String(e)}function w4e(t,e){if(iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ou={widthCache:{},cacheCount:0},S4e=2e3,E4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},y4="recharts_measurement_span";function A4e(t){var e=SI({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var qp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||vs.isSsr)return{width:0,height:0};var n=A4e(r),i=JSON.stringify({text:e,copyStyle:n});if(ou.widthCache[i])return ou.widthCache[i];try{var o=document.getElementById(y4);o||(o=document.createElement("span"),o.setAttribute("id",y4),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=SI(SI({},E4e),n);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return ou.widthCache[i]=l,++ou.cacheCount>S4e&&(ou.cacheCount=0,ou.widthCache={}),l}catch{return{width:0,height:0}}},C4e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function oy(t){"@babel/helpers - typeof";return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oy(t)}function I_(t,e){return N4e(t)||I4e(t,e)||P4e(t,e)||T4e()}function T4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P4e(t,e){if(t){if(typeof t=="string")return g4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g4(t,e)}}function g4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function N4e(t){if(Array.isArray(t))return t}function k4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R4e(n.key),n)}}function O4e(t,e,r){return e&&v4(t.prototype,e),r&&v4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function R4e(t){var e=j4e(t,"string");return oy(e)==="symbol"?e:String(e)}function j4e(t,e){if(oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,D4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},M4e=Object.keys(zQ),Vu="NaN";function F4e(t,e){return t*zQ[e]}var n0=function(){function t(e,r){k4e(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!$4e.test(r)&&(this.num=NaN,this.unit=""),M4e.includes(r)&&(this.num=F4e(e,r),this.unit="px")}return O4e(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=D4e.exec(r))!==null&&n!==void 0?n:[],o=I_(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function GQ(t){if(t.includes(Vu))return Vu;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=b4.exec(e))!==null&&r!==void 0?r:[],i=I_(n,4),o=i[1],s=i[2],a=i[3],l=n0.parse(o??""),c=n0.parse(a??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Vu;e=e.replace(b4,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=x4.exec(e))!==null&&d!==void 0?d:[],p=I_(h,4),m=p[1],y=p[2],g=p[3],b=n0.parse(m??""),v=n0.parse(g??""),x=y==="+"?b.add(v):b.subtract(v);if(x.isNaN())return Vu;e=e.replace(x4,x.toString())}return e}var _4=/\(([^()]*)\)/;function L4e(t){for(var e=t;e.includes("(");){var r=_4.exec(e),n=I_(r,2),i=n[1];e=e.replace(_4,GQ(i))}return e}function B4e(t){var e=t.replace(/\s+/g,"");return e=L4e(e),e=GQ(e),e}function U4e(t){try{return B4e(t)}catch{return Vu}}function HA(t){var e=U4e(t.slice(5,-1));return e===Vu?"":e}var V4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],W4e=["dx","dy","angle","className","breakAll"];function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EI.apply(this,arguments)}function w4(t,e){if(t==null)return{};var r=z4e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z4e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function S4(t,e){return K4e(t)||H4e(t,e)||q4e(t,e)||G4e()}function G4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q4e(t,e){if(t){if(typeof t=="string")return E4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E4(t,e)}}function E4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function H4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function K4e(t){if(Array.isArray(t))return t}var qQ=/[ \f\n\r\t\v\u2028\u2029]+/,HQ=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var o=[];Xe(r)||(n?o=r.toString().split(""):o=r.toString().split(qQ));var s=o.map(function(l){return{word:l,width:qp(l,i).width}}),a=n?0:qp(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},Y4e=function(e,r,n,i,o){var s=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=ne(s),d=a,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(U,V){var R=V.word,F=V.width,z=U[U.length-1];if(z&&(i==null||o||z.width+F+n<Number(i)))z.words.push(R),z.width+=F+n;else{var ae={words:[R],width:F};U.push(ae)}return U},[])},p=h(r),m=function(L){return L.reduce(function(U,V){return U.width>V.width?U:V})};if(!u)return p;for(var y="…",g=function(L){var U=d.slice(0,L),V=HQ({breakAll:c,style:l,children:U+y}).wordsWithComputedWidth,R=h(V),F=R.length>s||m(R).width>Number(i);return[F,R]},b=0,v=d.length-1,x=0,S;b<=v&&x<=d.length-1;){var _=Math.floor((b+v)/2),w=_-1,A=g(w),C=S4(A,2),I=C[0],T=C[1],P=g(_),O=S4(P,1),N=O[0];if(!I&&!N&&(b=_+1),I&&N&&(v=_-1),!I&&N){S=T;break}x++}return S||p},A4=function(e){var r=Xe(e)?[]:e.toString().split(qQ);return[{words:r}]},Q4e=function(e){var r=e.width,n=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((r||n)&&!vs.isSsr){var l,c,u=HQ({breakAll:s,children:i,style:o});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return A4(i);return Y4e({breakAll:s,children:i,maxLines:a,style:o},l,c,r,n)}return A4(i)},C4="#808080",N_=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,y=m===void 0?"end":m,g=e.fill,b=g===void 0?C4:g,v=w4(e,V4e),x=E.useMemo(function(){return Q4e({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),S=v.dx,_=v.dy,w=v.angle,A=v.className,C=v.breakAll,I=w4(v,W4e);if(!dr(n)||!dr(o))return null;var T=n+(ne(S)?S:0),P=o+(ne(_)?_:0),O;switch(y){case"start":O=HA("calc(".concat(c,")"));break;case"middle":O=HA("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:O=HA("calc(".concat(x.length-1," * -").concat(a,")"));break}var N=[];if(d){var j=x[0].width,L=v.width;N.push("scale(".concat((ne(L)?L/j:1)/j,")"))}return w&&N.push("rotate(".concat(w,", ").concat(T,", ").concat(P,")")),N.length&&(I.transform=N.join(" ")),k.createElement("text",EI({},qe(I,!0),{x:T,y:P,className:ct("recharts-text",A),textAnchor:p,fill:b.includes("url")?C4:b}),x.map(function(U,V){var R=U.words.join(C?"":" ");return k.createElement("tspan",{x:T,dy:V===0?O:a,key:R},R)}))};function Fa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function X4e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Oj(t){let e,r,n;t.length!==2?(e=Fa,r=(a,l)=>Fa(t(a),l),n=(a,l)=>t(a)-l):(e=t===Fa||t===X4e?t:J4e,r=t,n=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;r(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;r(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){const d=i(a,l,c,u-1);return d>c&&n(a[d-1],l)>-n(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function J4e(){return 0}function KQ(t){return t===null?NaN:+t}function*Z4e(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}const eUe=Oj(Fa),tUe=eUe.right;Oj(KQ).center;const Gg=tUe;class T4 extends Map{constructor(e,r=iUe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(P4(this,e))}has(e){return super.has(P4(this,e))}set(e,r){return super.set(rUe(this,e),r)}delete(e){return super.delete(nUe(this,e))}}function P4({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function rUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function nUe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function iUe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function oUe(t=Fa){if(t===Fa)return YQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function YQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const sUe=Math.sqrt(50),aUe=Math.sqrt(10),lUe=Math.sqrt(2);function k_(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),s=o>=sUe?10:o>=aUe?5:o>=lUe?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=r&&r<2?k_(t,e,r*2):[a,l,c]}function AI(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,o,s]=n?k_(e,t,r):k_(t,e,r);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(n)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function CI(t,e,r){return e=+e,t=+t,r=+r,k_(t,e,r)[2]}function TI(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?CI(e,t,r):CI(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function I4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function N4(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function QQ(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?YQ:oUe(i);n>r;){if(n-r>600){const l=n-r+1,c=e-r+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(r,Math.floor(e-c*d/l+h)),m=Math.min(n,Math.floor(e+(l-c)*d/l+h));QQ(t,e,p,m,i)}const o=t[e];let s=r,a=n;for(Uh(t,r,e),i(t[n],o)>0&&Uh(t,r,n);s<a;){for(Uh(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[r],o)===0?Uh(t,r,a):(++a,Uh(t,a,n)),a<=e&&(r=a+1),e<=a&&(n=a-1)}return t}function Uh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function cUe(t,e,r){if(t=Float64Array.from(Z4e(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return N4(t);if(e>=1)return I4(t);var n,i=(n-1)*e,o=Math.floor(i),s=I4(QQ(t,o).subarray(0,o+1)),a=N4(t.subarray(o+1));return s+(a-s)*(i-o)}}function uUe(t,e,r=KQ){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),s=+r(t[o],o,t),a=+r(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function fUe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}function Li(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ms(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const PI=Symbol("implicit");function Rj(){var t=new T4,e=[],r=[],n=PI;function i(o){let s=t.get(o);if(s===void 0){if(n!==PI)return n;t.set(o,s=e.push(o)-1)}return r[s%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new T4;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Rj(e,r).unknown(n)},Li.apply(i,arguments),i}function sy(){var t=Rj().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,p=i<n,m=p?i:n,y=p?n:i;o=(y-m)/Math.max(1,h-l+c*2),a&&(o=Math.floor(o)),m+=(y-m-o*(h-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var g=fUe(h).map(function(b){return m+o*b});return r(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return sy(e(),[n,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Li.apply(d(),arguments)}function XQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return XQ(e())},t}function Hp(){return XQ(sy.apply(null,arguments).paddingInner(1))}function jj(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function JQ(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function qg(){}var ay=.7,O_=1/ay,mf="\\s*([+-]?\\d+)\\s*",ly="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dUe=/^#([0-9a-f]{3,8})$/,hUe=new RegExp(`^rgb\\(${mf},${mf},${mf}\\)$`),pUe=new RegExp(`^rgb\\(${zo},${zo},${zo}\\)$`),mUe=new RegExp(`^rgba\\(${mf},${mf},${mf},${ly}\\)$`),yUe=new RegExp(`^rgba\\(${zo},${zo},${zo},${ly}\\)$`),gUe=new RegExp(`^hsl\\(${ly},${zo},${zo}\\)$`),vUe=new RegExp(`^hsla\\(${ly},${zo},${zo},${ly}\\)$`),k4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jj(qg,cy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:O4,formatHex:O4,formatHex8:bUe,formatHsl:xUe,formatRgb:R4,toString:R4});function O4(){return this.rgb().formatHex()}function bUe(){return this.rgb().formatHex8()}function xUe(){return ZQ(this).formatHsl()}function R4(){return this.rgb().formatRgb()}function cy(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=dUe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?j4(e):r===3?new Mn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?i0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?i0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hUe.exec(t))?new Mn(e[1],e[2],e[3],1):(e=pUe.exec(t))?new Mn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mUe.exec(t))?i0(e[1],e[2],e[3],e[4]):(e=yUe.exec(t))?i0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gUe.exec(t))?M4(e[1],e[2]/100,e[3]/100,1):(e=vUe.exec(t))?M4(e[1],e[2]/100,e[3]/100,e[4]):k4.hasOwnProperty(t)?j4(k4[t]):t==="transparent"?new Mn(NaN,NaN,NaN,0):null}function j4(t){return new Mn(t>>16&255,t>>8&255,t&255,1)}function i0(t,e,r,n){return n<=0&&(t=e=r=NaN),new Mn(t,e,r,n)}function _Ue(t){return t instanceof qg||(t=cy(t)),t?(t=t.rgb(),new Mn(t.r,t.g,t.b,t.opacity)):new Mn}function II(t,e,r,n){return arguments.length===1?_Ue(t):new Mn(t,e,r,n??1)}function Mn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}jj(Mn,II,JQ(qg,{brighter(t){return t=t==null?O_:Math.pow(O_,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ay:Math.pow(ay,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mn(mc(this.r),mc(this.g),mc(this.b),R_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$4,formatHex:$4,formatHex8:wUe,formatRgb:D4,toString:D4}));function $4(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}`}function wUe(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}${Ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function D4(){const t=R_(this.opacity);return`${t===1?"rgb(":"rgba("}${mc(this.r)}, ${mc(this.g)}, ${mc(this.b)}${t===1?")":`, ${t})`}`}function R_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ul(t){return t=mc(t),(t<16?"0":"")+t.toString(16)}function M4(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Zi(t,e,r,n)}function ZQ(t){if(t instanceof Zi)return new Zi(t.h,t.s,t.l,t.opacity);if(t instanceof qg||(t=cy(t)),!t)return new Zi;if(t instanceof Zi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(r-n)/a+(r<n)*6:r===o?s=(n-e)/a+2:s=(e-r)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Zi(s,a,l,t.opacity)}function SUe(t,e,r,n){return arguments.length===1?ZQ(t):new Zi(t,e,r,n??1)}function Zi(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}jj(Zi,SUe,JQ(qg,{brighter(t){return t=t==null?O_:Math.pow(O_,t),new Zi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ay:Math.pow(ay,t),new Zi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Mn(KA(t>=240?t-240:t+120,i,n),KA(t,i,n),KA(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Zi(F4(this.h),o0(this.s),o0(this.l),R_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=R_(this.opacity);return`${t===1?"hsl(":"hsla("}${F4(this.h)}, ${o0(this.s)*100}%, ${o0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function F4(t){return t=(t||0)%360,t<0?t+360:t}function o0(t){return Math.max(0,Math.min(1,t||0))}function KA(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const $j=t=>()=>t;function EUe(t,e){return function(r){return t+r*e}}function AUe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function CUe(t){return(t=+t)==1?eX:function(e,r){return r-e?AUe(e,r,t):$j(isNaN(e)?r:e)}}function eX(t,e){var r=e-t;return r?EUe(t,r):$j(isNaN(t)?e:t)}const L4=function t(e){var r=CUe(e);function n(i,o){var s=r((i=II(i)).r,(o=II(o)).r),a=r(i.g,o.g),l=r(i.b,o.b),c=eX(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return n.gamma=t,n}(1);function TUe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function PUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function IUe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),s;for(s=0;s<n;++s)i[s]=uh(t[s],e[s]);for(;s<r;++s)o[s]=e[s];return function(a){for(s=0;s<n;++s)o[s]=i[s](a);return o}}function NUe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function j_(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function kUe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=uh(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var NI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,YA=new RegExp(NI.source,"g");function OUe(t){return function(){return t}}function RUe(t){return function(e){return t(e)+""}}function jUe(t,e){var r=NI.lastIndex=YA.lastIndex=0,n,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(n=NI.exec(t))&&(i=YA.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:j_(n,i)})),r=YA.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?RUe(l[0].x):OUe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function uh(t,e){var r=typeof e,n;return e==null||r==="boolean"?$j(e):(r==="number"?j_:r==="string"?(n=cy(e))?(e=n,L4):jUe:e instanceof cy?L4:e instanceof Date?NUe:PUe(e)?TUe:Array.isArray(e)?IUe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kUe:j_)(t,e)}function Dj(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function $Ue(t,e){e===void 0&&(e=t,t=uh);for(var r=0,n=e.length-1,i=e[0],o=new Array(n<0?0:n);r<n;)o[r]=t(i,i=e[++r]);return function(s){var a=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return o[a](s-a)}}function DUe(t){return function(){return t}}function $_(t){return+t}var B4=[0,1];function An(t){return t}function kI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:DUe(isNaN(e)?NaN:.5)}function MUe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function FUe(t,e,r){var n=t[0],i=t[1],o=e[0],s=e[1];return i<n?(n=kI(i,n),o=r(s,o)):(n=kI(n,i),o=r(o,s)),function(a){return o(n(a))}}function LUe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=kI(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(a){var l=Gg(t,a,1,n)-1;return o[l](i[l](a))}}function Hg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fS(){var t=B4,e=B4,r=uh,n,i,o,s=An,a,l,c;function u(){var h=Math.min(t.length,e.length);return s!==An&&(s=MUe(t[0],t[h-1])),a=h>2?LUe:FUe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(n),e,r)))(n(s(h)))}return d.invert=function(h){return s(i((c||(c=a(e,t.map(n),j_)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,$_),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),r=Dj,u()},d.clamp=function(h){return arguments.length?(s=h?!0:An,u()):s!==An},d.interpolate=function(h){return arguments.length?(r=h,u()):r},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,p){return n=h,i=p,u()}}function Mj(){return fS()(An,An)}function BUe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function D_(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ed(t){return t=D_(Math.abs(t)),t?t[1]:NaN}function UUe(t,e){return function(r,n){for(var i=r.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),o.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function VUe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var WUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uy(t){if(!(e=WUe.exec(t)))throw new Error("invalid format: "+t);var e;return new Fj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uy.prototype=Fj.prototype;function Fj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Fj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zUe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var tX;function GUe(t,e){var r=D_(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(tX=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+D_(t,Math.max(0,e+o-1))[0]}function U4(t,e){var r=D_(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const V4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:BUe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>U4(t*100,e),r:U4,s:GUe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function W4(t){return t}var z4=Array.prototype.map,G4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qUe(t){var e=t.grouping===void 0||t.thousands===void 0?W4:UUe(z4.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?W4:VUe(z4.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=uy(d);var h=d.fill,p=d.align,m=d.sign,y=d.symbol,g=d.zero,b=d.width,v=d.comma,x=d.precision,S=d.trim,_=d.type;_==="n"?(v=!0,_="g"):V4[_]||(x===void 0&&(x=12),S=!0,_="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var w=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=y==="$"?n:/[%p]/.test(_)?s:"",C=V4[_],I=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function T(P){var O=w,N=A,j,L,U;if(_==="c")N=C(P)+N,P="";else{P=+P;var V=P<0||1/P<0;if(P=isNaN(P)?l:C(Math.abs(P),x),S&&(P=zUe(P)),V&&+P==0&&m!=="+"&&(V=!1),O=(V?m==="("?m:a:m==="-"||m==="("?"":m)+O,N=(_==="s"?G4[8+tX/3]:"")+N+(V&&m==="("?")":""),I){for(j=-1,L=P.length;++j<L;)if(U=P.charCodeAt(j),48>U||U>57){N=(U===46?i+P.slice(j+1):P.slice(j))+N,P=P.slice(0,j);break}}}v&&!g&&(P=e(P,1/0));var R=O.length+P.length+N.length,F=R<b?new Array(b-R+1).join(h):"";switch(v&&g&&(P=e(F+P,F.length?b-N.length:1/0),F=""),p){case"<":P=O+P+N+F;break;case"=":P=O+F+P+N;break;case"^":P=F.slice(0,R=F.length>>1)+O+P+N+F.slice(R);break;default:P=F+O+P+N;break}return o(P)}return T.toString=function(){return d+""},T}function u(d,h){var p=c((d=uy(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Ed(h)/3)))*3,y=Math.pow(10,-m),g=G4[8+m/3];return function(b){return p(y*b)+g}}return{format:c,formatPrefix:u}}var s0,Lj,rX;HUe({thousands:",",grouping:[3],currency:["$",""]});function HUe(t){return s0=qUe(t),Lj=s0.format,rX=s0.formatPrefix,s0}function KUe(t){return Math.max(0,-Ed(Math.abs(t)))}function YUe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ed(e)/3)))*3-Ed(Math.abs(t)))}function QUe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ed(e)-Ed(t))+1}function nX(t,e,r,n){var i=TI(t,e,r),o;switch(n=uy(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=YUe(i,s))&&(n.precision=o),rX(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=QUe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=KUe(i))&&(n.precision=o-(n.type==="%")*2);break}}return Lj(n)}function ul(t){var e=t.domain;return t.ticks=function(r){var n=e();return AI(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return nX(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,s=n[i],a=n[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=CI(s,a,r),c===l)return n[i]=s,n[o]=a,e(n);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function M_(){var t=Mj();return t.copy=function(){return Hg(t,M_())},Li.apply(t,arguments),ul(t)}function iX(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,$_),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return iX(t).unknown(e)},t=arguments.length?Array.from(t,$_):[0,1],ul(r)}function oX(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],s;return o<i&&(s=r,r=n,n=s,s=i,i=o,o=s),t[r]=e.floor(i),t[n]=e.ceil(o),t}function q4(t){return Math.log(t)}function H4(t){return Math.exp(t)}function XUe(t){return-Math.log(-t)}function JUe(t){return-Math.exp(-t)}function ZUe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eVe(t){return t===10?ZUe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function tVe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function K4(t){return(e,r)=>-t(-e,r)}function Bj(t){const e=t(q4,H4),r=e.domain;let n=10,i,o;function s(){return i=tVe(n),o=eVe(n),r()[0]<0?(i=K4(i),o=K4(o),t(XUe,JUe)):t(q4,H4),e}return e.base=function(a){return arguments.length?(n=+a,s()):n},e.domain=function(a){return arguments.length?(r(a),s()):r()},e.ticks=a=>{const l=r();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),p=i(u),m,y;const g=a==null?10:+a;let b=[];if(!(n%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1;m<n;++m)if(y=h<0?m/o(-h):m*o(h),!(y<c)){if(y>u)break;b.push(y)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(y=h>0?m/o(-h):m*o(h),!(y<c)){if(y>u)break;b.push(y)}b.length*2<g&&(b=AI(c,u,g))}else b=AI(h,p,Math.min(p-h,g)).map(o);return d?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=uy(l)).precision==null&&(l.trim=!0),l=Lj(l)),a===1/0)return l;const c=Math.max(1,n*a/e.ticks().length);return u=>{let d=u/o(Math.round(i(u)));return d*n<n-.5&&(d*=n),d<=c?l(u):""}},e.nice=()=>r(oX(r(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function sX(){const t=Bj(fS()).domain([1,10]);return t.copy=()=>Hg(t,sX()).base(t.base()),Li.apply(t,arguments),t}function Y4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Q4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Uj(t){var e=1,r=t(Y4(e),Q4(e));return r.constant=function(n){return arguments.length?t(Y4(e=+n),Q4(e)):e},ul(r)}function aX(){var t=Uj(fS());return t.copy=function(){return Hg(t,aX()).constant(t.constant())},Li.apply(t,arguments)}function X4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function rVe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nVe(t){return t<0?-t*t:t*t}function Vj(t){var e=t(An,An),r=1;function n(){return r===1?t(An,An):r===.5?t(rVe,nVe):t(X4(r),X4(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ul(e)}function Wj(){var t=Vj(fS());return t.copy=function(){return Hg(t,Wj()).exponent(t.exponent())},Li.apply(t,arguments),t}function iVe(){return Wj.apply(null,arguments).exponent(.5)}function J4(t){return Math.sign(t)*t*t}function oVe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function lX(){var t=Mj(),e=[0,1],r=!1,n;function i(o){var s=oVe(t(o));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(o){return t.invert(J4(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,$_)).map(J4)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return lX(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Li.apply(i,arguments),ul(i)}function cX(){var t=[],e=[],r=[],n;function i(){var s=0,a=Math.max(1,e.length);for(r=new Array(a-1);++s<a;)r[s-1]=uUe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?n:e[Gg(r,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Fa),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(n=s,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return cX().domain(t).range(e).unknown(n)},Li.apply(o,arguments)}function uX(){var t=0,e=1,r=1,n=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Gg(n,l,0,r)]:o}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,n[0]]:c>=r?[n[r-1],e]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return uX().domain([t,e]).range(i).unknown(o)},Li.apply(ul(s),arguments)}function fX(){var t=[.5],e=[0,1],r,n=1;function i(o){return o!=null&&o<=o?e[Gg(t,o,0,n)]:r}return i.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return fX().domain(t).range(e).unknown(r)},Li.apply(i,arguments)}const QA=new Date,XA=new Date;function mr(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),e(o,a),t(o);while(c<o&&o<s);return l},i.filter=o=>mr(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),r&&(i.count=(o,s)=>(QA.setTime(+o),XA.setTime(+s),t(QA),t(XA),Math.floor(r(QA,XA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?s=>n(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const F_=mr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);F_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?mr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):F_);F_.range;const hs=1e3,Pi=hs*60,ps=Pi*60,Is=ps*24,zj=Is*7,Z4=Is*30,JA=Is*365,Vl=mr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*hs)},(t,e)=>(e-t)/hs,t=>t.getUTCSeconds());Vl.range;const Gj=mr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hs)},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getMinutes());Gj.range;const qj=mr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getUTCMinutes());qj.range;const Hj=mr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hs-t.getMinutes()*Pi)},(t,e)=>{t.setTime(+t+e*ps)},(t,e)=>(e-t)/ps,t=>t.getHours());Hj.range;const Kj=mr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ps)},(t,e)=>(e-t)/ps,t=>t.getUTCHours());Kj.range;const Kg=mr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Pi)/Is,t=>t.getDate()-1);Kg.range;const dS=mr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Is,t=>t.getUTCDate()-1);dS.range;const dX=mr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Is,t=>Math.floor(t/Is));dX.range;function Gc(t){return mr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Pi)/zj)}const hS=Gc(0),L_=Gc(1),sVe=Gc(2),aVe=Gc(3),Ad=Gc(4),lVe=Gc(5),cVe=Gc(6);hS.range;L_.range;sVe.range;aVe.range;Ad.range;lVe.range;cVe.range;function qc(t){return mr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/zj)}const pS=qc(0),B_=qc(1),uVe=qc(2),fVe=qc(3),Cd=qc(4),dVe=qc(5),hVe=qc(6);pS.range;B_.range;uVe.range;fVe.range;Cd.range;dVe.range;hVe.range;const Yj=mr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Yj.range;const Qj=mr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Qj.range;const Ns=mr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ns.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:mr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Ns.range;const ks=mr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ks.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:mr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ks.range;function hX(t,e,r,n,i,o){const s=[[Vl,1,hs],[Vl,5,5*hs],[Vl,15,15*hs],[Vl,30,30*hs],[o,1,Pi],[o,5,5*Pi],[o,15,15*Pi],[o,30,30*Pi],[i,1,ps],[i,3,3*ps],[i,6,6*ps],[i,12,12*ps],[n,1,Is],[n,2,2*Is],[r,1,zj],[e,1,Z4],[e,3,3*Z4],[t,1,JA]];function a(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),m=p?p.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,p=Oj(([,,g])=>g).right(s,h);if(p===s.length)return t.every(TI(c/JA,u/JA,d));if(p===0)return F_.every(Math.max(TI(c,u,d),1));const[m,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return m.every(y)}return[a,l]}const[pVe,mVe]=hX(ks,Qj,pS,dX,Kj,qj),[yVe,gVe]=hX(Ns,Yj,hS,Kg,Hj,Gj);function ZA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function eC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vh(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function vVe(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=Wh(i),u=zh(i),d=Wh(o),h=zh(o),p=Wh(s),m=zh(s),y=Wh(a),g=zh(a),b=Wh(l),v=zh(l),x={a:V,A:R,b:F,B:z,c:null,d:oU,e:oU,f:UVe,g:XVe,G:ZVe,H:FVe,I:LVe,j:BVe,L:pX,m:VVe,M:WVe,p:ae,q:te,Q:lU,s:cU,S:zVe,u:GVe,U:qVe,V:HVe,w:KVe,W:YVe,x:null,X:null,y:QVe,Y:JVe,Z:e6e,"%":aU},S={a:be,A:at,b:rt,B:Vt,c:null,d:sU,e:sU,f:i6e,g:p6e,G:y6e,H:t6e,I:r6e,j:n6e,L:yX,m:o6e,M:s6e,p:pt,q:Zt,Q:lU,s:cU,S:a6e,u:l6e,U:c6e,V:u6e,w:f6e,W:d6e,x:null,X:null,y:h6e,Y:m6e,Z:g6e,"%":aU},_={a:T,A:P,b:O,B:N,c:j,d:nU,e:nU,f:jVe,g:rU,G:tU,H:iU,I:iU,j:NVe,L:RVe,m:IVe,M:kVe,p:I,q:PVe,Q:DVe,s:MVe,S:OVe,u:SVe,U:EVe,V:AVe,w:wVe,W:CVe,x:L,X:U,y:rU,Y:tU,Z:TVe,"%":$Ve};x.x=w(r,x),x.X=w(n,x),x.c=w(e,x),S.x=w(r,S),S.X=w(n,S),S.c=w(e,S);function w(ee,xe){return function(Ee){var q=[],Ze=-1,ke=0,vt=ee.length,$t,en,Vn;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ze<vt;)ee.charCodeAt(Ze)===37&&(q.push(ee.slice(ke,Ze)),(en=eU[$t=ee.charAt(++Ze)])!=null?$t=ee.charAt(++Ze):en=$t==="e"?" ":"0",(Vn=xe[$t])&&($t=Vn(Ee,en)),q.push($t),ke=Ze+1);return q.push(ee.slice(ke,Ze)),q.join("")}}function A(ee,xe){return function(Ee){var q=Vh(1900,void 0,1),Ze=C(q,ee,Ee+="",0),ke,vt;if(Ze!=Ee.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(xe&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(ke=eC(Vh(q.y,0,1)),vt=ke.getUTCDay(),ke=vt>4||vt===0?B_.ceil(ke):B_(ke),ke=dS.offset(ke,(q.V-1)*7),q.y=ke.getUTCFullYear(),q.m=ke.getUTCMonth(),q.d=ke.getUTCDate()+(q.w+6)%7):(ke=ZA(Vh(q.y,0,1)),vt=ke.getDay(),ke=vt>4||vt===0?L_.ceil(ke):L_(ke),ke=Kg.offset(ke,(q.V-1)*7),q.y=ke.getFullYear(),q.m=ke.getMonth(),q.d=ke.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),vt="Z"in q?eC(Vh(q.y,0,1)).getUTCDay():ZA(Vh(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(vt+5)%7:q.w+q.U*7-(vt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,eC(q)):ZA(q)}}function C(ee,xe,Ee,q){for(var Ze=0,ke=xe.length,vt=Ee.length,$t,en;Ze<ke;){if(q>=vt)return-1;if($t=xe.charCodeAt(Ze++),$t===37){if($t=xe.charAt(Ze++),en=_[$t in eU?xe.charAt(Ze++):$t],!en||(q=en(ee,Ee,q))<0)return-1}else if($t!=Ee.charCodeAt(q++))return-1}return q}function I(ee,xe,Ee){var q=c.exec(xe.slice(Ee));return q?(ee.p=u.get(q[0].toLowerCase()),Ee+q[0].length):-1}function T(ee,xe,Ee){var q=p.exec(xe.slice(Ee));return q?(ee.w=m.get(q[0].toLowerCase()),Ee+q[0].length):-1}function P(ee,xe,Ee){var q=d.exec(xe.slice(Ee));return q?(ee.w=h.get(q[0].toLowerCase()),Ee+q[0].length):-1}function O(ee,xe,Ee){var q=b.exec(xe.slice(Ee));return q?(ee.m=v.get(q[0].toLowerCase()),Ee+q[0].length):-1}function N(ee,xe,Ee){var q=y.exec(xe.slice(Ee));return q?(ee.m=g.get(q[0].toLowerCase()),Ee+q[0].length):-1}function j(ee,xe,Ee){return C(ee,e,xe,Ee)}function L(ee,xe,Ee){return C(ee,r,xe,Ee)}function U(ee,xe,Ee){return C(ee,n,xe,Ee)}function V(ee){return s[ee.getDay()]}function R(ee){return o[ee.getDay()]}function F(ee){return l[ee.getMonth()]}function z(ee){return a[ee.getMonth()]}function ae(ee){return i[+(ee.getHours()>=12)]}function te(ee){return 1+~~(ee.getMonth()/3)}function be(ee){return s[ee.getUTCDay()]}function at(ee){return o[ee.getUTCDay()]}function rt(ee){return l[ee.getUTCMonth()]}function Vt(ee){return a[ee.getUTCMonth()]}function pt(ee){return i[+(ee.getUTCHours()>=12)]}function Zt(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var xe=w(ee+="",x);return xe.toString=function(){return ee},xe},parse:function(ee){var xe=A(ee+="",!1);return xe.toString=function(){return ee},xe},utcFormat:function(ee){var xe=w(ee+="",S);return xe.toString=function(){return ee},xe},utcParse:function(ee){var xe=A(ee+="",!0);return xe.toString=function(){return ee},xe}}}var eU={"-":"",_:" ",0:"0"},$r=/^\s*\d+/,bVe=/^%/,xVe=/[\\^$*+?|[\]().{}]/g;function tt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function _Ve(t){return t.replace(xVe,"\\$&")}function Wh(t){return new RegExp("^(?:"+t.map(_Ve).join("|")+")","i")}function zh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function wVe(t,e,r){var n=$r.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function SVe(t,e,r){var n=$r.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function EVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function AVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function CVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function tU(t,e,r){var n=$r.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function rU(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function TVe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function PVe(t,e,r){var n=$r.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function IVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function nU(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function NVe(t,e,r){var n=$r.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function iU(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function kVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function OVe(t,e,r){var n=$r.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function RVe(t,e,r){var n=$r.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function jVe(t,e,r){var n=$r.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function $Ve(t,e,r){var n=bVe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function DVe(t,e,r){var n=$r.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function MVe(t,e,r){var n=$r.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function oU(t,e){return tt(t.getDate(),e,2)}function FVe(t,e){return tt(t.getHours(),e,2)}function LVe(t,e){return tt(t.getHours()%12||12,e,2)}function BVe(t,e){return tt(1+Kg.count(Ns(t),t),e,3)}function pX(t,e){return tt(t.getMilliseconds(),e,3)}function UVe(t,e){return pX(t,e)+"000"}function VVe(t,e){return tt(t.getMonth()+1,e,2)}function WVe(t,e){return tt(t.getMinutes(),e,2)}function zVe(t,e){return tt(t.getSeconds(),e,2)}function GVe(t){var e=t.getDay();return e===0?7:e}function qVe(t,e){return tt(hS.count(Ns(t)-1,t),e,2)}function mX(t){var e=t.getDay();return e>=4||e===0?Ad(t):Ad.ceil(t)}function HVe(t,e){return t=mX(t),tt(Ad.count(Ns(t),t)+(Ns(t).getDay()===4),e,2)}function KVe(t){return t.getDay()}function YVe(t,e){return tt(L_.count(Ns(t)-1,t),e,2)}function QVe(t,e){return tt(t.getFullYear()%100,e,2)}function XVe(t,e){return t=mX(t),tt(t.getFullYear()%100,e,2)}function JVe(t,e){return tt(t.getFullYear()%1e4,e,4)}function ZVe(t,e){var r=t.getDay();return t=r>=4||r===0?Ad(t):Ad.ceil(t),tt(t.getFullYear()%1e4,e,4)}function e6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function sU(t,e){return tt(t.getUTCDate(),e,2)}function t6e(t,e){return tt(t.getUTCHours(),e,2)}function r6e(t,e){return tt(t.getUTCHours()%12||12,e,2)}function n6e(t,e){return tt(1+dS.count(ks(t),t),e,3)}function yX(t,e){return tt(t.getUTCMilliseconds(),e,3)}function i6e(t,e){return yX(t,e)+"000"}function o6e(t,e){return tt(t.getUTCMonth()+1,e,2)}function s6e(t,e){return tt(t.getUTCMinutes(),e,2)}function a6e(t,e){return tt(t.getUTCSeconds(),e,2)}function l6e(t){var e=t.getUTCDay();return e===0?7:e}function c6e(t,e){return tt(pS.count(ks(t)-1,t),e,2)}function gX(t){var e=t.getUTCDay();return e>=4||e===0?Cd(t):Cd.ceil(t)}function u6e(t,e){return t=gX(t),tt(Cd.count(ks(t),t)+(ks(t).getUTCDay()===4),e,2)}function f6e(t){return t.getUTCDay()}function d6e(t,e){return tt(B_.count(ks(t)-1,t),e,2)}function h6e(t,e){return tt(t.getUTCFullYear()%100,e,2)}function p6e(t,e){return t=gX(t),tt(t.getUTCFullYear()%100,e,2)}function m6e(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function y6e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Cd(t):Cd.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function g6e(){return"+0000"}function aU(){return"%"}function lU(t){return+t}function cU(t){return Math.floor(+t/1e3)}var su,vX,bX;v6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function v6e(t){return su=vVe(t),vX=su.format,su.parse,bX=su.utcFormat,su.utcParse,su}function b6e(t){return new Date(t)}function x6e(t){return t instanceof Date?+t:+new Date(+t)}function Xj(t,e,r,n,i,o,s,a,l,c){var u=Mj(),d=u.invert,h=u.domain,p=c(".%L"),m=c(":%S"),y=c("%I:%M"),g=c("%I %p"),b=c("%a %d"),v=c("%b %d"),x=c("%B"),S=c("%Y");function _(w){return(l(w)<w?p:a(w)<w?m:s(w)<w?y:o(w)<w?g:n(w)<w?i(w)<w?b:v:r(w)<w?x:S)(w)}return u.invert=function(w){return new Date(d(w))},u.domain=function(w){return arguments.length?h(Array.from(w,x6e)):h().map(b6e)},u.ticks=function(w){var A=h();return t(A[0],A[A.length-1],w??10)},u.tickFormat=function(w,A){return A==null?_:c(A)},u.nice=function(w){var A=h();return(!w||typeof w.range!="function")&&(w=e(A[0],A[A.length-1],w??10)),w?h(oX(A,w)):u},u.copy=function(){return Hg(u,Xj(t,e,r,n,i,o,s,a,l,c))},u}function _6e(){return Li.apply(Xj(yVe,gVe,Ns,Yj,hS,Kg,Hj,Gj,Vl,vX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function w6e(){return Li.apply(Xj(pVe,mVe,ks,Qj,pS,dS,Kj,qj,Vl,bX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mS(){var t=0,e=1,r,n,i,o,s=An,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-r)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,r=o(t=+t),n=o(e=+e),i=r===n?0:1/(n-r),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s};function u(d){return function(h){var p,m;return arguments.length?([p,m]=h,s=d(p,m),c):[s(0),s(1)]}}return c.range=u(uh),c.rangeRound=u(Dj),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,r=d(t),n=d(e),i=r===n?0:1/(n-r),c}}function fl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xX(){var t=ul(mS()(An));return t.copy=function(){return fl(t,xX())},Ms.apply(t,arguments)}function _X(){var t=Bj(mS()).domain([1,10]);return t.copy=function(){return fl(t,_X()).base(t.base())},Ms.apply(t,arguments)}function wX(){var t=Uj(mS());return t.copy=function(){return fl(t,wX()).constant(t.constant())},Ms.apply(t,arguments)}function Jj(){var t=Vj(mS());return t.copy=function(){return fl(t,Jj()).exponent(t.exponent())},Ms.apply(t,arguments)}function S6e(){return Jj.apply(null,arguments).exponent(.5)}function SX(){var t=[],e=An;function r(n){if(n!=null&&!isNaN(n=+n))return e((Gg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fa),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>cUe(t,o/n))},r.copy=function(){return SX(e).domain(t)},Ms.apply(r,arguments)}function yS(){var t=0,e=.5,r=1,n=1,i,o,s,a,l,c=An,u,d=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-o)*(n*y<n*o?a:l),c(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,r]=y,i=u(t=+t),o=u(e=+e),s=u(r=+r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p):[t,e,r]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(c=y,p):c};function m(y){return function(g){var b,v,x;return arguments.length?([b,v,x]=g,c=$Ue(y,[b,v,x]),p):[c(0),c(.5),c(1)]}}return p.range=m(uh),p.rangeRound=m(Dj),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return u=y,i=y(t),o=y(e),s=y(r),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),n=o<i?-1:1,p}}function EX(){var t=ul(yS()(An));return t.copy=function(){return fl(t,EX())},Ms.apply(t,arguments)}function AX(){var t=Bj(yS()).domain([.1,1,10]);return t.copy=function(){return fl(t,AX()).base(t.base())},Ms.apply(t,arguments)}function CX(){var t=Uj(yS());return t.copy=function(){return fl(t,CX()).constant(t.constant())},Ms.apply(t,arguments)}function Zj(){var t=Vj(yS());return t.copy=function(){return fl(t,Zj()).exponent(t.exponent())},Ms.apply(t,arguments)}function E6e(){return Zj.apply(null,arguments).exponent(.5)}const uU=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:sy,scaleDiverging:EX,scaleDivergingLog:AX,scaleDivergingPow:Zj,scaleDivergingSqrt:E6e,scaleDivergingSymlog:CX,scaleIdentity:iX,scaleImplicit:PI,scaleLinear:M_,scaleLog:sX,scaleOrdinal:Rj,scalePoint:Hp,scalePow:Wj,scaleQuantile:cX,scaleQuantize:uX,scaleRadial:lX,scaleSequential:xX,scaleSequentialLog:_X,scaleSequentialPow:Jj,scaleSequentialQuantile:SX,scaleSequentialSqrt:S6e,scaleSequentialSymlog:wX,scaleSqrt:iVe,scaleSymlog:aX,scaleThreshold:fX,scaleTime:_6e,scaleUtc:w6e,tickFormat:nX},Symbol.toStringTag,{value:"Module"}));var A6e=th;function C6e(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(a===void 0?s===s&&!A6e(s):r(s,a)))var a=s,l=o}return l}var TX=C6e;function T6e(t,e){return t>e}var P6e=T6e,I6e=TX,N6e=P6e,k6e=lh;function O6e(t){return t&&t.length?I6e(t,k6e,N6e):void 0}var R6e=O6e;const gS=ot(R6e);function j6e(t,e){return t<e}var $6e=j6e,D6e=TX,M6e=$6e,F6e=lh;function L6e(t){return t&&t.length?D6e(t,F6e,M6e):void 0}var B6e=L6e;const vS=ot(B6e);var U6e=pj,V6e=ll,W6e=CQ,z6e=Un;function G6e(t,e){var r=z6e(t)?U6e:W6e;return r(t,V6e(e))}var q6e=G6e,H6e=EQ,K6e=q6e;function Y6e(t,e){return H6e(K6e(t,e),1)}var Q6e=Y6e;const X6e=ot(Q6e);var J6e=Tj;function Z6e(t,e){return J6e(t,e)}var e5e=Z6e;const bS=ot(e5e);var fh=1e9,t5e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},t$,jt=!0,Mi="[DecimalError] ",yc=Mi+"Invalid argument: ",e$=Mi+"Exponent out of range: ",dh=Math.floor,Nl=Math.pow,r5e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qn,Tr=1e7,Pt=7,PX=9007199254740991,U_=dh(PX/Pt),ce={};ce.absoluteValue=ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ce.comparedTo=ce.cmp=function(t){var e,r,n,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};ce.decimalPlaces=ce.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Pt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ce.dividedBy=ce.div=function(t){return bs(this,new this.constructor(t))};ce.dividedToIntegerBy=ce.idiv=function(t){var e=this,r=e.constructor;return gt(bs(e,new r(t),0,1),r.precision)};ce.equals=ce.eq=function(t){return!this.cmp(t)};ce.exponent=function(){return nr(this)};ce.greaterThan=ce.gt=function(t){return this.cmp(t)>0};ce.greaterThanOrEqualTo=ce.gte=function(t){return this.cmp(t)>=0};ce.isInteger=ce.isint=function(){return this.e>this.d.length-2};ce.isNegative=ce.isneg=function(){return this.s<0};ce.isPositive=ce.ispos=function(){return this.s>0};ce.isZero=function(){return this.s===0};ce.lessThan=ce.lt=function(t){return this.cmp(t)<0};ce.lessThanOrEqualTo=ce.lte=function(t){return this.cmp(t)<1};ce.logarithm=ce.log=function(t){var e,r=this,n=r.constructor,i=n.precision,o=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Qn))throw Error(Mi+"NaN");if(r.s<1)throw Error(Mi+(r.s?"NaN":"-Infinity"));return r.eq(Qn)?new n(0):(jt=!1,e=bs(fy(r,o),fy(t,o),o),jt=!0,gt(e,i))};ce.minus=ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?kX(e,t):IX(e,(t.s=-t.s,t))};ce.modulo=ce.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Mi+"NaN");return r.s?(jt=!1,e=bs(r,t,0,1).times(t),jt=!0,r.minus(e)):gt(new n(r),i)};ce.naturalExponential=ce.exp=function(){return NX(this)};ce.naturalLogarithm=ce.ln=function(){return fy(this)};ce.negated=ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ce.plus=ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?IX(e,t):kX(e,(t.s=-t.s,t))};ce.precision=ce.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yc+t);if(e=nr(i)+1,n=i.d.length-1,r=n*Pt+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};ce.squareRoot=ce.sqrt=function(){var t,e,r,n,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Mi+"NaN")}for(t=nr(a),jt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Do(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=dh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(o=n,n=o.plus(bs(a,o,s+2)).times(.5),Do(o.d).slice(0,s)===(e=Do(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(gt(o,r+1,0),o.times(o).eq(a)){n=o;break}}else if(e!="9999")break;s+=4}return jt=!0,gt(n,r)};ce.times=ce.mul=function(t){var e,r,n,i,o,s,a,l,c,u=this,d=u.constructor,h=u.d,p=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,r=u.e+t.e,l=h.length,c=p.length,l<c&&(o=h,h=p,p=o,s=l,l=c,c=s),o=[],s=l+c,n=s;n--;)o.push(0);for(n=c;--n>=0;){for(e=0,i=l+n;i>n;)a=o[i]+p[n]*h[i-n-1]+e,o[i--]=a%Tr|0,e=a/Tr|0;o[i]=(o[i]+e)%Tr|0}for(;!o[--s];)o.pop();return e?++r:o.shift(),t.d=o,t.e=r,jt?gt(t,d.precision):t};ce.toDecimalPlaces=ce.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Ko(t,0,fh),e===void 0?e=n.rounding:Ko(e,0,8),gt(r,t+nr(r)+1,e))};ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Rc(n,!0):(Ko(t,0,fh),e===void 0?e=i.rounding:Ko(e,0,8),n=gt(new i(n),t+1,e),r=Rc(n,!0,t+1)),r};ce.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?Rc(i):(Ko(t,0,fh),e===void 0?e=o.rounding:Ko(e,0,8),n=gt(new o(i),t+nr(i)+1,e),r=Rc(n.abs(),!1,t+nr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};ce.toInteger=ce.toint=function(){var t=this,e=t.constructor;return gt(new e(t),nr(t)+1,e.rounding)};ce.toNumber=function(){return+this};ce.toPower=ce.pow=function(t){var e,r,n,i,o,s,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Qn);if(a=new l(a),!a.s){if(t.s<1)throw Error(Mi+"Infinity");return a}if(a.eq(Qn))return a;if(n=l.precision,t.eq(Qn))return gt(a,n);if(e=t.e,r=t.d.length-1,s=e>=r,o=a.s,s){if((r=u<0?-u:u)<=PX){for(i=new l(Qn),e=Math.ceil(n/Pt+4),jt=!1;r%2&&(i=i.times(a),dU(i.d,e)),r=dh(r/2),r!==0;)a=a.times(a),dU(a.d,e);return jt=!0,t.s<0?new l(Qn).div(i):gt(i,n)}}else if(o<0)throw Error(Mi+"NaN");return o=o<0&&t.d[Math.max(e,r)]&1?-1:1,a.s=1,jt=!1,i=t.times(fy(a,n+c)),jt=!0,i=NX(i),i.s=o,i};ce.toPrecision=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?(r=nr(i),n=Rc(i,r<=o.toExpNeg||r>=o.toExpPos)):(Ko(t,1,fh),e===void 0?e=o.rounding:Ko(e,0,8),i=gt(new o(i),t,e),r=nr(i),n=Rc(i,t<=r||r<=o.toExpNeg,t)),n};ce.toSignificantDigits=ce.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Ko(t,1,fh),e===void 0?e=n.rounding:Ko(e,0,8)),gt(new n(r),t,e)};ce.toString=ce.valueOf=ce.val=ce.toJSON=ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=nr(t),r=t.constructor;return Rc(t,e<=r.toExpNeg||e>=r.toExpPos)};function IX(t,e){var r,n,i,o,s,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),jt?gt(e,d):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(n=l,o=-o,a=c.length):(n=c,i=s,a=l.length),s=Math.ceil(d/Pt),a=s>a?s+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=l.length,o=c.length,a-o<0&&(o=a,n=c,c=l,l=n),r=0;o;)r=(l[--o]=l[o]+c[o]+r)/Tr|0,l[o]%=Tr;for(r&&(l.unshift(r),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,jt?gt(e,d):e}function Ko(t,e,r){if(t!==~~t||t<e||t>r)throw Error(yc+t)}function Do(t){var e,r,n,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)n=t[e]+"",r=Pt-n.length,r&&(o+=Zs(r)),o+=n;s=t[e],n=s+"",r=Pt-n.length,r&&(o+=Zs(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var bs=function(){function t(n,i){var o,s=0,a=n.length;for(n=n.slice();a--;)o=n[a]*i+s,n[a]=o%Tr|0,s=o/Tr|0;return s&&n.unshift(s),n}function e(n,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function r(n,i,o){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*Tr+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,s){var a,l,c,u,d,h,p,m,y,g,b,v,x,S,_,w,A,C,I=n.constructor,T=n.s==i.s?1:-1,P=n.d,O=i.d;if(!n.s)return new I(n);if(!i.s)throw Error(Mi+"Division by zero");for(l=n.e-i.e,A=O.length,_=P.length,p=new I(T),m=p.d=[],c=0;O[c]==(P[c]||0);)++c;if(O[c]>(P[c]||0)&&--l,o==null?v=o=I.precision:s?v=o+(nr(n)-nr(i))+1:v=o,v<0)return new I(0);if(v=v/Pt+2|0,c=0,A==1)for(u=0,O=O[0],v++;(c<_||u)&&v--;c++)x=u*Tr+(P[c]||0),m[c]=x/O|0,u=x%O|0;else{for(u=Tr/(O[0]+1)|0,u>1&&(O=t(O,u),P=t(P,u),A=O.length,_=P.length),S=A,y=P.slice(0,A),g=y.length;g<A;)y[g++]=0;C=O.slice(),C.unshift(0),w=O[0],O[1]>=Tr/2&&++w;do u=0,a=e(O,y,A,g),a<0?(b=y[0],A!=g&&(b=b*Tr+(y[1]||0)),u=b/w|0,u>1?(u>=Tr&&(u=Tr-1),d=t(O,u),h=d.length,g=y.length,a=e(d,y,h,g),a==1&&(u--,r(d,A<h?C:O,h))):(u==0&&(a=u=1),d=O.slice()),h=d.length,h<g&&d.unshift(0),r(y,d,g),a==-1&&(g=y.length,a=e(O,y,A,g),a<1&&(u++,r(y,A<g?C:O,g))),g=y.length):a===0&&(u++,y=[0]),m[c++]=u,a&&y[0]?y[g++]=P[S]||0:(y=[P[S]],g=1);while((S++<_||y[0]!==void 0)&&v--)}return m[0]||m.shift(),p.e=l,gt(p,s?o+nr(p)+1:o)}}();function NX(t,e){var r,n,i,o,s,a,l=0,c=0,u=t.constructor,d=u.precision;if(nr(t)>16)throw Error(e$+nr(t));if(!t.s)return new u(Qn);for(e==null?(jt=!1,a=d):a=e,s=new u(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(n=Math.log(Nl(2,c))/Math.LN10*2+5|0,a+=n,r=i=o=new u(Qn),u.precision=a;;){if(i=gt(i.times(t),a),r=r.times(++l),s=o.plus(bs(i,r,a)),Do(s.d).slice(0,a)===Do(o.d).slice(0,a)){for(;c--;)o=gt(o.times(o),a);return u.precision=d,e==null?(jt=!0,gt(o,d)):o}o=s}}function nr(t){for(var e=t.e*Pt,r=t.d[0];r>=10;r/=10)e++;return e}function tC(t,e,r){if(e>t.LN10.sd())throw jt=!0,r&&(t.precision=r),Error(Mi+"LN10 precision limit exceeded");return gt(new t(t.LN10),e)}function Zs(t){for(var e="";t--;)e+="0";return e}function fy(t,e){var r,n,i,o,s,a,l,c,u,d=1,h=10,p=t,m=p.d,y=p.constructor,g=y.precision;if(p.s<1)throw Error(Mi+(p.s?"NaN":"-Infinity"));if(p.eq(Qn))return new y(0);if(e==null?(jt=!1,c=g):c=e,p.eq(10))return e==null&&(jt=!0),tC(y,c);if(c+=h,y.precision=c,r=Do(m),n=r.charAt(0),o=nr(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Do(p.d),n=r.charAt(0),d++;o=nr(p),n>1?(p=new y("0."+r),o++):p=new y(n+"."+r.slice(1))}else return l=tC(y,c+2,g).times(o+""),p=fy(new y(n+"."+r.slice(1)),c-h).plus(l),y.precision=g,e==null?(jt=!0,gt(p,g)):p;for(a=s=p=bs(p.minus(Qn),p.plus(Qn),c),u=gt(p.times(p),c),i=3;;){if(s=gt(s.times(u),c),l=a.plus(bs(s,new y(i),c)),Do(l.d).slice(0,c)===Do(a.d).slice(0,c))return a=a.times(2),o!==0&&(a=a.plus(tC(y,c+2,g).times(o+""))),a=bs(a,new y(d),c),y.precision=g,e==null?(jt=!0,gt(a,g)):a;a=l,i+=2}}function fU(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=dh(r/Pt),t.d=[],n=(r+1)%Pt,r<0&&(n+=Pt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Pt;n<i;)t.d.push(+e.slice(n,n+=Pt));e=e.slice(n),n=Pt-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),jt&&(t.e>U_||t.e<-U_))throw Error(e$+r)}else t.s=0,t.e=0,t.d=[0];return t}function gt(t,e,r){var n,i,o,s,a,l,c,u,d=t.d;for(s=1,o=d[0];o>=10;o/=10)s++;if(n=e-s,n<0)n+=Pt,i=e,c=d[u=0];else{if(u=Math.ceil((n+1)/Pt),o=d.length,u>=o)return t;for(c=o=d[u],s=1;o>=10;o/=10)s++;n%=Pt,i=n-Pt+s}if(r!==void 0&&(o=Nl(10,s-i-1),a=c/o%10|0,l=e<0||d[u+1]!==void 0||c%o,l=r<4?(a||l)&&(r==0||r==(t.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?i>0?c/Nl(10,s-i):0:d[u-1])%10&1||r==(t.s<0?8:7))),e<1||!d[0])return l?(o=nr(t),d.length=1,e=e-o-1,d[0]=Nl(10,(Pt-e%Pt)%Pt),t.e=dh(-e/Pt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(n==0?(d.length=u,o=1,u--):(d.length=u+1,o=Nl(10,Pt-n),d[u]=i>0?(c/Nl(10,s-i)%Nl(10,i)|0)*o:0),l)for(;;)if(u==0){(d[0]+=o)==Tr&&(d[0]=1,++t.e);break}else{if(d[u]+=o,d[u]!=Tr)break;d[u--]=0,o=1}for(n=d.length;d[--n]===0;)d.pop();if(jt&&(t.e>U_||t.e<-U_))throw Error(e$+nr(t));return t}function kX(t,e){var r,n,i,o,s,a,l,c,u,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),jt?gt(e,p):e;if(l=t.d,d=e.d,n=e.e,c=t.e,l=l.slice(),s=c-n,s){for(u=s<0,u?(r=l,s=-s,a=d.length):(r=d,n=c,a=l.length),i=Math.max(Math.ceil(p/Pt),a)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,a=d.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}s=0}for(u&&(r=l,l=d,d=r,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=Tr-1;--l[o],l[i]+=Tr}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,jt?gt(e,p):e):new h(0)}function Rc(t,e,r){var n,i=nr(t),o=Do(t.d),s=o.length;return e?(r&&(n=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+Zs(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Zs(-i-1)+o,r&&(n=r-s)>0&&(o+=Zs(n))):i>=s?(o+=Zs(i+1-s),r&&(n=r-i-1)>0&&(o=o+"."+Zs(n))):((n=i+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(o+="."),o+=Zs(n))),t.s<0?"-"+o:o}function dU(t,e){if(t.length>e)return t.length=e,!0}function OX(t){var e,r,n;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(yc+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return fU(s,o.toString())}else if(typeof o!="string")throw Error(yc+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,r5e.test(o))fU(s,o);else throw Error(yc+o)}if(i.prototype=ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=OX,i.config=i.set=n5e,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function n5e(t){if(!t||typeof t!="object")throw Error(Mi+"Object expected");var e,r,n,i=["precision",1,fh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(dh(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(yc+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(yc+r+": "+n);return this}var t$=OX(t5e);Qn=new t$(1);const mt=t$;function i5e(t){return l5e(t)||a5e(t)||s5e(t)||o5e()}function o5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s5e(t,e){if(t){if(typeof t=="string")return OI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OI(t,e)}}function a5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function l5e(t){if(Array.isArray(t))return OI(t)}function OI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c5e=function(e){return e},RX={"@@functional/placeholder":!0},jX=function(e){return e===RX},hU=function(e){return function r(){return arguments.length===0||arguments.length===1&&jX(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},u5e=function t(e,r){return e===1?r:hU(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==RX}).length;return s>=e?r.apply(void 0,i):t(e-s,hU(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=i.map(function(d){return jX(d)?l.shift():d});return r.apply(void 0,i5e(u).concat(l))}))})},xS=function(e){return u5e(e.length,e)},RI=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},f5e=xS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),d5e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return c5e;var i=r.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},jI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},$X=function(e){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r&&o.every(function(a,l){return a===r[l]})||(r=o,n=e.apply(void 0,o)),n}};function h5e(t){var e;return t===0?e=1:e=Math.floor(new mt(t).abs().log(10).toNumber())+1,e}function p5e(t,e,r){for(var n=new mt(t),i=0,o=[];n.lt(e)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var m5e=xS(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),y5e=xS(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),g5e=xS(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const _S={rangeStep:p5e,getDigitCount:h5e,interpolateNumber:m5e,uninterpolateNumber:y5e,uninterpolateTruncation:g5e};function $I(t){return x5e(t)||b5e(t)||DX(t)||v5e()}function v5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b5e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function x5e(t){if(Array.isArray(t))return DI(t)}function dy(t,e){return S5e(t)||w5e(t,e)||DX(t,e)||_5e()}function _5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DX(t,e){if(t){if(typeof t=="string")return DI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DI(t,e)}}function DI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w5e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}}function S5e(t){if(Array.isArray(t))return t}function MX(t){var e=dy(t,2),r=e[0],n=e[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function FX(t,e,r){if(t.lte(0))return new mt(0);var n=_S.getDigitCount(t.toNumber()),i=new mt(10).pow(n),o=t.div(i),s=n!==1?.05:.1,a=new mt(Math.ceil(o.div(s).toNumber())).add(r).mul(s),l=a.mul(i);return e?l:new mt(Math.ceil(l))}function E5e(t,e,r){var n=1,i=new mt(t);if(!i.isint()&&r){var o=Math.abs(t);o<1?(n=new mt(10).pow(_S.getDigitCount(t)-1),i=new mt(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new mt(Math.floor(t)))}else t===0?i=new mt(Math.floor((e-1)/2)):r||(i=new mt(Math.floor(t)));var s=Math.floor((e-1)/2),a=d5e(f5e(function(l){return i.add(new mt(l-s).mul(n)).toNumber()}),RI);return a(0,e)}function LX(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var o=FX(new mt(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new mt(0):(s=new mt(t).add(e).div(2),s=s.sub(new mt(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new mt(e).sub(s).div(o).toNumber()),c=a+l+1;return c>r?LX(t,e,r,n,i+1):(c<r&&(l=e>0?l+(r-c):l,a=e>0?a:a+(r-c)),{step:o,tickMin:s.sub(new mt(a).mul(o)),tickMax:s.add(new mt(l).mul(o))})}function A5e(t){var e=dy(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=MX([r,n]),l=dy(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat($I(RI(0,i-1).map(function(){return 1/0}))):[].concat($I(RI(0,i-1).map(function(){return-1/0})),[u]);return r>n?jI(d):d}if(c===u)return E5e(c,i,o);var h=LX(c,u,s,o),p=h.step,m=h.tickMin,y=h.tickMax,g=_S.rangeStep(m,y.add(new mt(.1).mul(p)),p);return r>n?jI(g):g}function C5e(t,e){var r=dy(t,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=MX([n,i]),a=dy(s,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var u=Math.max(e,2),d=FX(new mt(c).sub(l).div(u-1),o,0),h=[].concat($I(_S.rangeStep(new mt(l),new mt(c).sub(new mt(.99).mul(d)),d)),[c]);return n>i?jI(h):h}var T5e=$X(A5e),P5e=$X(C5e),I5e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function V_(){return V_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V_.apply(this,arguments)}function N5e(t,e){return j5e(t)||R5e(t,e)||O5e(t,e)||k5e()}function k5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O5e(t,e){if(t){if(typeof t=="string")return pU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pU(t,e)}}function pU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function R5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function j5e(t){if(Array.isArray(t))return t}function $5e(t,e){if(t==null)return{};var r=D5e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D5e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Yg(t){var e=t.offset,r=t.layout,n=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,c=$5e(t,I5e),u=qe(c),d=o.map(function(h){var p=s(h,i),m=p.x,y=p.y,g=p.value,b=p.errorVal;if(!b)return null;var v=[],x,S;if(Array.isArray(b)){var _=N5e(b,2);x=_[0],S=_[1]}else x=S=b;if(r==="vertical"){var w=a.scale,A=y+e,C=A+n,I=A-n,T=w(g-x),P=w(g+S);v.push({x1:P,y1:C,x2:P,y2:I}),v.push({x1:T,y1:A,x2:P,y2:A}),v.push({x1:T,y1:C,x2:T,y2:I})}else if(r==="horizontal"){var O=l.scale,N=m+e,j=N-n,L=N+n,U=O(g-x),V=O(g+S);v.push({x1:j,y1:V,x2:L,y2:V}),v.push({x1:N,y1:U,x2:N,y2:V}),v.push({x1:j,y1:U,x2:L,y2:U})}return k.createElement(Jt,V_({className:"recharts-errorBar",key:"bar-".concat(v.map(function(R){return"".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))},u),v.map(function(R){return k.createElement("line",V_({},R,{key:"line-".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))}))});return k.createElement(Jt,{className:"recharts-errorBars"},d)}Yg.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};Yg.displayName="ErrorBar";function hy(t){"@babel/helpers - typeof";return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(t)}function mU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(r),!0).forEach(function(n){M5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M5e(t,e,r){return e=F5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F5e(t){var e=L5e(t,"string");return hy(e)==="symbol"?e:String(e)}function L5e(t,e){if(hy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BX=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=To(r,Jm);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(n||[]).reduce(function(l,c){var u=c.item,d=c.props,h=d.sectors||d.data||[];return l.concat(h.map(function(p){return{type:s.props.iconType||u.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):a=(n||[]).map(function(l){var c=l.item,u=c.props,d=u.dataKey,h=u.name,p=u.legendType,m=u.hide;return{inactive:m,dataKey:d,type:s.props.iconType||p||"square",color:r$(c),value:h||d,payload:c.props}}),rC(rC(rC({},s.props),Jm.getWithHeight(s,i)),{},{payload:a,item:s})};function py(t){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(t)}function yU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(r),!0).forEach(function(n){yf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yf(t,e,r){return e=B5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B5e(t){var e=U5e(t,"string");return py(e)==="symbol"?e:String(e)}function U5e(t,e){if(py(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gU(t){return G5e(t)||z5e(t)||W5e(t)||V5e()}function V5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W5e(t,e){if(t){if(typeof t=="string")return MI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MI(t,e)}}function z5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G5e(t){if(Array.isArray(t))return MI(t)}function MI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function si(t,e,r){return Xe(t)||Xe(e)?r:dr(e)?Oi(t,e,r):Me(e)?e(t):r}function Kp(t,e,r,n){var i=X6e(t,function(a){return si(a,e)});if(r==="number"){var o=i.filter(function(a){return ne(a)||parseFloat(a)});return o.length?[vS(o),gS(o)]:[1/0,-1/0]}var s=n?i.filter(function(a){return!Xe(a)}):i;return s.map(function(a){return dr(a)||a instanceof Date?a:""})}var q5e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<a;c++){var u=c>0?i[c-1].coordinate:i[a-1].coordinate,d=i[c].coordinate,h=c>=a-1?i[0].coordinate:i[c+1].coordinate,p=void 0;if(no(d-u)!==no(h-d)){var m=[];if(no(h-d)===no(l[1]-l[0])){p=h;var y=d+l[1]-l[0];m[0]=Math.min(y,(y+u)/2),m[1]=Math.max(y,(y+u)/2)}else{p=u;var g=h+l[1]-l[0];m[0]=Math.min(d,(g+d)/2),m[1]=Math.max(d,(g+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>b[0]&&e<=b[1]||e>=m[0]&&e<=m[1]){s=i[c].index;break}}else{var v=Math.min(u,h),x=Math.max(u,h);if(e>(v+d)/2&&e<=(x+d)/2){s=i[c].index;break}}}else for(var S=0;S<a;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===a-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},r$=function(e){var r=e,n=r.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(n){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},H5e=function(e){var r=e.barSize,n=e.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var o={},s=Object.keys(i),a=0,l=s.length;a<l;a++)for(var c=i[s[a]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var p=c[u[d]],m=p.items,y=p.cateAxisId,g=m.filter(function(x){return gs(x.type).indexOf("Bar")>=0});if(g&&g.length){var b=g[0].props.barSize,v=g[0].props[y];o[v]||(o[v]=[]),o[v].push({item:g[0],stackList:g.slice(1),barSize:Xe(b)?r:b})}}return o},K5e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var c=yd(r,i,0,!0),u,d=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/l,m=s.reduce(function(S,_){return S+_.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&p>0&&(h=!0,p*=.9,m=l*p);var y=(i-m)/2>>0,g={offset:y-c,size:0};u=s.reduce(function(S,_){var w={item:_.item,position:{offset:g.offset+g.size+c,size:h?p:_.barSize}},A=[].concat(gU(S),[w]);return g=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:g})}),A},d)}else{var b=yd(n,i,0,!0);i-2*b-(l-1)*c<=0&&(c=0);var v=(i-2*b-(l-1)*c)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;u=s.reduce(function(S,_,w){var A=[].concat(gU(S),[{item:_.item,position:{offset:b+(v+c)*w+(v-x)/2,size:x}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(C){A.push({item:C,position:A[A.length-1].position})}),A},d)}return u},Y5e=function(e,r,n,i){var o=n.children,s=n.width,a=n.margin,l=s-(a.left||0)-(a.right||0),c=BX({children:o,legendWidth:l});if(c){var u=i||{},d=u.width,h=u.height,p=c.align,m=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&m==="middle")&&p!=="center"&&ne(e[p]))return wi(wi({},e),{},yf({},p,e[p]+(d||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&m!=="middle"&&ne(e[m]))return wi(wi({},e),{},yf({},m,e[m]+(h||0)))}return e},Q5e=function(e,r,n){return Xe(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},UX=function(e,r,n,i,o){var s=r.props.children,a=Ri(s,Yg).filter(function(c){return Q5e(i,o,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=si(u,n,0),h=Array.isArray(d)?[vS(d),gS(d)]:[d,d],p=l.reduce(function(m,y){var g=si(u,y,0),b=h[0]-Math.abs(Array.isArray(g)?g[0]:g),v=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,m[0]),Math.max(v,m[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},X5e=function(e,r,n,i,o){var s=r.map(function(a){return UX(e,a,n,o,i)}).filter(function(a){return!Xe(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},VX=function(e,r,n,i,o){var s=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&UX(e,l,c,i)||Kp(e,c,n,o)});if(n==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},WX=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},vU=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(s=!0),l.coordinate});return o||a.push(r),s||a.push(n),a},qs=function(e,r,n){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?no(a[0]-a[1])*2*c:c,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=o?o.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!Vg(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:o?o[d]:d,index:h,offset:c}})},nC=new WeakMap,a0=function(e,r){if(typeof r!="function")return e;nC.has(e)||nC.set(e,new WeakMap);var n=nC.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},J5e=function(e,r,n){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:sy(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:M_(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Hp(),realScaleType:"point"}:o==="category"?{scale:sy(),realScaleType:"band"}:{scale:M_(),realScaleType:"linear"};if(Ug(i)){var l="scale".concat(iS(i));return{scale:(uU[l]||Hp)(),realScaleType:uU[l]?l:"point"}}return Me(i)?{scale:i}:{scale:Hp(),realScaleType:"point"}},bU=1e-4,Z5e=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),o=Math.min(i[0],i[1])-bU,s=Math.max(i[0],i[1])+bU,a=e(r[0]),l=e(r[n-1]);(a<o||a>s||l<o||l>s)&&e.domain([r[0],r[n-1]])}},eWe=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},tWe=function(e,r){if(!r||r.length!==2||!ne(r[0])||!ne(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[e[0],e[1]];return(!ne(e[0])||e[0]<n)&&(o[0]=n),(!ne(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},rWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0,a=0;a<r;++a){var l=Vg(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=o,e[a][n][1]=o+l,o=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+l,s=e[a][n][1])}},nWe=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,s=0;s<r;++s){var a=Vg(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=o,e[s][n][1]=o+a,o=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},iWe={sign:rWe,expand:tRe,none:gd,silhouette:rRe,wiggle:nRe,positive:nWe},oWe=function(e,r,n){var i=r.map(function(a){return a.props.dataKey}),o=iWe[n],s=eRe().keys(i).value(function(a,l){return+si(a,l,0)}).order(rI).offset(o);return s(e)},sWe=function(e,r,n,i,o,s){if(!e)return null;var a=s?r.reverse():r,l={},c=a.reduce(function(d,h){var p=h.props,m=p.stackId,y=p.hide;if(y)return d;var g=h.props[n],b=d[g]||{hasStack:!1,stackGroups:{}};if(dr(m)){var v=b.stackGroups[m]||{numericAxisId:n,cateAxisId:i,items:[]};v.items.push(h),b.hasStack=!0,b.stackGroups[m]=v}else b.stackGroups[Wg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return wi(wi({},d),{},yf({},g,b))},l),u={};return Object.keys(c).reduce(function(d,h){var p=c[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,g){var b=p.stackGroups[g];return wi(wi({},y),{},yf({},g,{numericAxisId:n,cateAxisId:i,items:b.items,stackedData:oWe(e,b.items,o)}))},m)}return wi(wi({},d),{},yf({},h,p))},u)},aWe=function(e,r){var n=r.realScaleType,i=r.type,o=r.tickCount,s=r.originalDomain,a=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=T5e(c,o,a);return e.domain([vS(u),gS(u)]),{niceTicks:u}}if(o&&i==="number"){var d=e.domain(),h=P5e(d,o,a);return{niceTicks:h}}return null},xU=function(e){var r=e.axis,n=e.ticks,i=e.bandSize,o=e.entry,s=e.index,a=e.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Xe(o[r.dataKey])){var l=u_(n,"value",o[r.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=si(o,Xe(a)?r.dataKey:a);return Xe(c)?null:r.scale(c)},_U=function(e){var r=e.axis,n=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(r.type==="category")return n[a]?n[a].coordinate+i:null;var l=si(s,r.dataKey,r.domain[a]);return Xe(l)?null:r.scale(l)-o/2+i},lWe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},cWe=function(e,r){var n=e.props.stackId;if(dr(n)){var i=r[n];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},uWe=function(e){return e.reduce(function(r,n){return[vS(n.concat([r[0]]).filter(ne)),gS(n.concat([r[1]]).filter(ne))]},[1/0,-1/0])},zX=function(e,r,n){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(c,u){var d=uWe(u.slice(r,n+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},wU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FI=function(e,r,n){if(Me(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(ne(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(wU.test(e[0])){var o=+wU.exec(e[0])[1];i[0]=r[0]-o}else Me(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(ne(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(SU.test(e[1])){var s=+SU.exec(e[1])[1];i[1]=r[1]+s}else Me(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},W_=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var o=Ij(r,function(d){return d.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var c=o[a],u=o[a-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},EU=function(e,r,n){return!e||!e.length||bS(e,Oi(n,"type.defaultProps.domain"))?r:e},GX=function(e,r){var n=e.props,i=n.dataKey,o=n.name,s=n.unit,a=n.formatter,l=n.tooltipType,c=n.chartType;return wi(wi({},qe(e)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:r$(e),value:si(r,i),type:l,payload:r,chartType:c})};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function CU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){fWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fWe(t,e,r){return e=dWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dWe(t){var e=hWe(t,"string");return my(e)==="symbol"?e:String(e)}function hWe(t,e){if(my(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(my(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z_=Math.PI/180,pWe=function(e){return e*180/Math.PI},qr=function(e,r,n,i){return{x:e+Math.cos(-z_*i)*n,y:r+Math.sin(-z_*i)*n}},mWe=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-s,2))},yWe=function(e,r){var n=e.x,i=e.y,o=r.cx,s=r.cy,a=mWe({x:n,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(n-o)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:pWe(c),angleInRadian:c}},gWe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),s=Math.min(i,o);return{startAngle:r-s*360,endAngle:n-s*360}},vWe=function(e,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},TU=function(e,r){var n=e.x,i=e.y,o=yWe({x:n,y:i},r),s=o.radius,a=o.angle,l=r.innerRadius,c=r.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=gWe(r),d=u.startAngle,h=u.endAngle,p=a,m;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;m=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=d}return m?CU(CU({},r),{},{radius:s,angle:vWe(p,r)}):null};function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}var bWe=["offset"];function xWe(t){return EWe(t)||SWe(t)||wWe(t)||_We()}function _We(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wWe(t,e){if(t){if(typeof t=="string")return LI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LI(t,e)}}function SWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EWe(t){if(Array.isArray(t))return LI(t)}function LI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function AWe(t,e){if(t==null)return{};var r=CWe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CWe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){TWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TWe(t,e,r){return e=PWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PWe(t){var e=IWe(t,"string");return yy(e)==="symbol"?e:String(e)}function IWe(t,e){if(yy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(yy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gy.apply(this,arguments)}var NWe=function(e){var r=e.value,n=e.formatter,i=Xe(e.children)?r:e.children;return Me(n)?n(i):i},kWe=function(e,r){var n=no(r-e),i=Math.min(Math.abs(r-e),360);return n*i},OWe=function(e,r,n){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,y=l.clockWise,g=(d+h)/2,b=kWe(p,m),v=b>=0?1:-1,x,S;i==="insideStart"?(x=p+v*s,S=y):i==="insideEnd"?(x=m-v*s,S=!y):i==="end"&&(x=m+v*s,S=y),S=b<=0?S:!S;var _=qr(c,u,g,x),w=qr(c,u,g,x+(S?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),C=Xe(e.id)?Wg("recharts-radial-line-"):e.id;return k.createElement("text",gy({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",a)}),k.createElement("defs",null,k.createElement("path",{id:C,d:A})),k.createElement("textPath",{xlinkHref:"#".concat(C)},r))},RWe=function(e){var r=e.viewBox,n=e.offset,i=e.position,o=r,s=o.cx,a=o.cy,l=o.innerRadius,c=o.outerRadius,u=o.startAngle,d=o.endAngle,h=(u+d)/2;if(i==="outside"){var p=qr(s,a,c+n,h),m=p.x,y=p.y;return{x:m,y,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,b=qr(s,a,g,h),v=b.x,x=b.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},jWe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,o=e.position,s=r,a=s.x,l=s.y,c=s.width,u=s.height,d=u>=0?1:-1,h=d*i,p=d>0?"end":"start",m=d>0?"start":"end",y=c>=0?1:-1,g=y*i,b=y>0?"end":"start",v=y>0?"start":"end";if(o==="top"){var x={x:a+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:p};return or(or({},x),n?{height:Math.max(l-n.y,0),width:c}:{})}if(o==="bottom"){var S={x:a+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return or(or({},S),n?{height:Math.max(n.y+n.height-(l+u),0),width:c}:{})}if(o==="left"){var _={x:a-g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"};return or(or({},_),n?{width:Math.max(_.x-n.x,0),height:u}:{})}if(o==="right"){var w={x:a+c+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return or(or({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:u}:{})}var A=n?{width:c,height:u}:{};return o==="insideLeft"?or({x:a+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},A):o==="insideRight"?or({x:a+c-g,y:l+u/2,textAnchor:b,verticalAnchor:"middle"},A):o==="insideTop"?or({x:a+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},A):o==="insideBottom"?or({x:a+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:p},A):o==="insideTopLeft"?or({x:a+g,y:l+h,textAnchor:v,verticalAnchor:m},A):o==="insideTopRight"?or({x:a+c-g,y:l+h,textAnchor:b,verticalAnchor:m},A):o==="insideBottomLeft"?or({x:a+g,y:l+u-h,textAnchor:v,verticalAnchor:p},A):o==="insideBottomRight"?or({x:a+c-g,y:l+u-h,textAnchor:b,verticalAnchor:p},A):rh(o)&&(ne(o.x)||Bl(o.x))&&(ne(o.y)||Bl(o.y))?or({x:a+yd(o.x,c),y:l+yd(o.y,u),textAnchor:"end",verticalAnchor:"end"},A):or({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},$We=function(e){return"cx"in e&&ne(e.cx)};function fn(t){var e=t.offset,r=e===void 0?5:e,n=AWe(t,bWe),i=or({offset:r},n),o=i.viewBox,s=i.position,a=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!o||Xe(a)&&Xe(l)&&!E.isValidElement(c)&&!Me(c))return null;if(E.isValidElement(c))return E.cloneElement(c,i);var p;if(Me(c)){if(p=E.createElement(c,i),E.isValidElement(p))return p}else p=NWe(i);var m=$We(o),y=qe(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return OWe(i,p,y);var g=m?RWe(i):jWe(i);return k.createElement(N_,gy({className:ct("recharts-label",d)},y,g,{breakAll:h}),p)}fn.displayName="Label";var qX=function(e){var r=e.cx,n=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,p=e.top,m=e.left,y=e.width,g=e.height,b=e.clockWise,v=e.labelViewBox;if(v)return v;if(ne(y)&&ne(g)){if(ne(d)&&ne(h))return{x:d,y:h,width:y,height:g};if(ne(p)&&ne(m))return{x:p,y:m,width:y,height:g}}return ne(d)&&ne(h)?{x:d,y:h,width:0,height:0}:ne(r)&&ne(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:b}:e.viewBox?e.viewBox:{}},DWe=function(e,r){return e?e===!0?k.createElement(fn,{key:"label-implicit",viewBox:r}):dr(e)?k.createElement(fn,{key:"label-implicit",viewBox:r,value:e}):E.isValidElement(e)?e.type===fn?E.cloneElement(e,{key:"label-implicit",viewBox:r}):k.createElement(fn,{key:"label-implicit",content:e,viewBox:r}):Me(e)?k.createElement(fn,{key:"label-implicit",content:e,viewBox:r}):rh(e)?k.createElement(fn,gy({viewBox:r},e,{key:"label-implicit"})):null:null},MWe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=qX(e),s=Ri(i,fn).map(function(l,c){return E.cloneElement(l,{viewBox:r||o,key:"label-".concat(c)})});if(!n)return s;var a=DWe(e.label,r||o);return[a].concat(xWe(s))};fn.parseViewBox=qX;fn.renderCallByParent=MWe;function FWe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var LWe=FWe;const BWe=ot(LWe);function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}var UWe=["valueAccessor"],VWe=["data","dataKey","clockWise","id","textBreakAll"];function WWe(t){return HWe(t)||qWe(t)||GWe(t)||zWe()}function zWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GWe(t,e){if(t){if(typeof t=="string")return BI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(t,e)}}function qWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HWe(t){if(Array.isArray(t))return BI(t)}function BI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},G_.apply(this,arguments)}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function NU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){KWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KWe(t,e,r){return e=YWe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YWe(t){var e=QWe(t,"string");return vy(e)==="symbol"?e:String(e)}function QWe(t,e){if(vy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(vy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kU(t,e){if(t==null)return{};var r=XWe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function XWe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var JWe=function(e){return Array.isArray(e.value)?BWe(e.value):e.value};function La(t){var e=t.valueAccessor,r=e===void 0?JWe:e,n=kU(t,UWe),i=n.data,o=n.dataKey,s=n.clockWise,a=n.id,l=n.textBreakAll,c=kU(n,VWe);return!i||!i.length?null:k.createElement(Jt,{className:"recharts-label-list"},i.map(function(u,d){var h=Xe(o)?r(u,d):si(u&&u.payload,o),p=Xe(a)?{}:{id:"".concat(a,"-").concat(d)};return k.createElement(fn,G_({},qe(u,!0),c,p,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:fn.parseViewBox(Xe(s)?u:NU(NU({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}La.displayName="LabelList";function ZWe(t,e){return t?t===!0?k.createElement(La,{key:"labelList-implicit",data:e}):k.isValidElement(t)||Me(t)?k.createElement(La,{key:"labelList-implicit",data:e,content:t}):rh(t)?k.createElement(La,G_({data:e},t,{key:"labelList-implicit"})):null:null}function e8e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Ri(n,La).map(function(s,a){return E.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!r)return i;var o=ZWe(t.label,e);return[o].concat(WWe(i))}La.renderCallByParent=e8e;function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UI.apply(this,arguments)}function OU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(r),!0).forEach(function(n){t8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t8e(t,e,r){return e=r8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r8e(t){var e=n8e(t,"string");return by(e)==="symbol"?e:String(e)}function n8e(t,e){if(by(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(by(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i8e=function(e,r){var n=no(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},l0=function(e){var r=e.cx,n=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+i,d=Math.asin(l/u)/z_,h=c?o:o+s*d,p=qr(r,n,u,h),m=qr(r,n,i,h),y=c?o-s*d:o,g=qr(r,n,u*Math.cos(d*z_),y);return{center:p,circleTangency:m,lineTangency:g,theta:d}},HX=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=i8e(s,a),c=s+l,u=qr(r,n,o,s),d=qr(r,n,o,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=qr(r,n,i,s),m=qr(r,n,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},o8e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=no(u-c),h=l0({cx:r,cy:n,radius:o,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,y=h.theta,g=l0({cx:r,cy:n,radius:o,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),b=g.circleTangency,v=g.lineTangency,x=g.theta,S=l?Math.abs(c-u):Math.abs(c-u)-y-x;if(S<0)return a?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):HX({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u});var _="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var w=l0({cx:r,cy:n,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),A=w.circleTangency,C=w.lineTangency,I=w.theta,T=l0({cx:r,cy:n,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),P=T.circleTangency,O=T.lineTangency,N=T.theta,j=l?Math.abs(c-u):Math.abs(c-u)-I-N;if(j<0&&s===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},s8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KX=function(e){var r=RU(RU({},s8e),e),n=r.cx,i=r.cy,o=r.innerRadius,s=r.outerRadius,a=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,u=r.startAngle,d=r.endAngle,h=r.className;if(s<o||u===d)return null;var p=ct("recharts-sector",h),m=s-o,y=yd(a,m,0,!0),g;return y>0&&Math.abs(u-d)<360?g=o8e({cx:n,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(y,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):g=HX({cx:n,cy:i,innerRadius:o,outerRadius:s,startAngle:u,endAngle:d}),k.createElement("path",UI({},qe(r,!0),{className:p,d:g,role:"img"}))};function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VI.apply(this,arguments)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $U(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){a8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a8e(t,e,r){return e=l8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l8e(t){var e=c8e(t,"string");return xy(e)==="symbol"?e:String(e)}function c8e(t,e){if(xy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(xy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DU={curveBasisClosed:WOe,curveBasisOpen:zOe,curveBasis:VOe,curveBumpX:POe,curveBumpY:IOe,curveLinearClosed:GOe,curveLinear:sS,curveMonotoneX:qOe,curveMonotoneY:HOe,curveNatural:KOe,curveStep:YOe,curveStepAfter:XOe,curveStepBefore:QOe},c0=function(e){return e.x===+e.x&&e.y===+e.y},Gh=function(e){return e.x},qh=function(e){return e.y},u8e=function(e,r){if(Me(e))return e;var n="curve".concat(iS(e));return(n==="curveMonotone"||n==="curveBump")&&r?DU["".concat(n).concat(r==="vertical"?"Y":"X")]:DU[n]||sS},f8e=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=u8e(n,a),d=c?o.filter(function(y){return c0(y)}):o,h;if(Array.isArray(s)){var p=c?s.filter(function(y){return c0(y)}):s,m=d.map(function(y,g){return $U($U({},y),{},{base:p[g]})});return a==="vertical"?h=Jv().y(qh).x1(Gh).x0(function(y){return y.base.x}):h=Jv().x(Gh).y1(qh).y0(function(y){return y.base.y}),h.defined(c0).curve(u),h(m)}return a==="vertical"&&ne(s)?h=Jv().y(qh).x1(Gh).x0(s):ne(s)?h=Jv().x(Gh).y1(qh).y0(s):h=zY().x(Gh).y(qh),h.defined(c0).curve(u),h(d)},WI=function(e){var r=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?f8e(e):i;return k.createElement("path",VI({},qe(e),f_(e),{className:ct("recharts-curve",r),d:s,ref:o}))};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q_.apply(this,arguments)}function d8e(t,e){return y8e(t)||m8e(t,e)||p8e(t,e)||h8e()}function h8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p8e(t,e){if(t){if(typeof t=="string")return MU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MU(t,e)}}function MU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m8e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function y8e(t){if(Array.isArray(t))return t}function FU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(r),!0).forEach(function(n){g8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g8e(t,e,r){return e=v8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v8e(t){var e=b8e(t,"string");return _y(e)==="symbol"?e:String(e)}function b8e(t,e){if(_y(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(_y(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BU=function(e,r,n,i,o){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,u;if(s>0&&o instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=o[h]>s?s:o[h];u="M".concat(e,",").concat(r+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(r)),u+="L ".concat(e+n-l*d[1],",").concat(r),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(r+a*d[1])),u+="L ".concat(e+n,",").concat(r+i-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+n-l*d[2],",").concat(r+i)),u+="L ".concat(e+l*d[3],",").concat(r+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(r+i-a*d[3])),u+="Z"}else if(s>0&&o===+o&&o>0){var m=Math.min(s,o);u="M ".concat(e,",").concat(r+a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(r,`
            L `).concat(e+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n,",").concat(r+a*m,`
            L `).concat(e+n,",").concat(r+i-a*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n-l*m,",").concat(r+i,`
            L `).concat(e+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(r+i-a*m," Z")}else u="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return u},x8e=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,o=r.x,s=r.y,a=r.width,l=r.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(o,o+a),u=Math.max(o,o+a),d=Math.min(s,s+l),h=Math.max(s,s+l);return n>=c&&n<=u&&i>=d&&i<=h}return!1},_8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},n$=function(e){var r=LU(LU({},_8e),e),n=E.useRef(),i=E.useState(-1),o=d8e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&a(S)}catch{}},[]);var l=r.x,c=r.y,u=r.width,d=r.height,h=r.radius,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,v=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var x=ct("recharts-rectangle",p);return v?k.createElement(Ps,{canBegin:s>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:y,animationEasing:m,isActive:v},function(S){var _=S.width,w=S.height,A=S.x,C=S.y;return k.createElement(Ps,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,isActive:b,easing:m},k.createElement("path",q_({},qe(r,!0),{className:x,d:BU(A,C,_,w,h),ref:n})))}):k.createElement("path",q_({},qe(r,!0),{className:x,d:BU(l,c,u,d,h)}))};function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zI.apply(this,arguments)}var i$=function(e){var r=e.cx,n=e.cy,i=e.r,o=e.className,s=ct("recharts-dot",o);return r===+r&&n===+n&&i===+i?k.createElement("circle",zI({},qe(e),f_(e),{className:s,cx:r,cy:n,r:i})):null};function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}var w8e=["x","y","top","left","width","height","className"];function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GI.apply(this,arguments)}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function S8e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){E8e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function E8e(t,e,r){return e=A8e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A8e(t){var e=C8e(t,"string");return wy(e)==="symbol"?e:String(e)}function C8e(t,e){if(wy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T8e(t,e){if(t==null)return{};var r=P8e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P8e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var I8e=function(e,r,n,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},N8e=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,p=h===void 0?0:h,m=e.className,y=T8e(e,w8e),g=S8e({x:n,y:o,top:a,left:c,width:d,height:p},y);return!ne(n)||!ne(o)||!ne(d)||!ne(p)||!ne(a)||!ne(c)?null:k.createElement("path",GI({},qe(g,!0),{className:ct("recharts-cross",m),d:I8e(n,o,d,p,a,c)}))},k8e=hQ,O8e=k8e(Object.getPrototypeOf,Object),R8e=O8e,j8e=$s,$8e=R8e,D8e=Ds,M8e="[object Object]",F8e=Function.prototype,L8e=Object.prototype,YX=F8e.toString,B8e=L8e.hasOwnProperty,U8e=YX.call(Object);function V8e(t){if(!D8e(t)||j8e(t)!=M8e)return!1;var e=$8e(t);if(e===null)return!0;var r=B8e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&YX.call(r)==U8e}var W8e=V8e;const z8e=ot(W8e);var G8e=$s,q8e=Ds,H8e="[object Boolean]";function K8e(t){return t===!0||t===!1||q8e(t)&&G8e(t)==H8e}var Y8e=K8e;const Q8e=ot(Y8e);function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H_.apply(this,arguments)}function X8e(t,e){return tze(t)||eze(t,e)||Z8e(t,e)||J8e()}function J8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z8e(t,e){if(t){if(typeof t=="string")return VU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VU(t,e)}}function VU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eze(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function tze(t){if(Array.isArray(t))return t}function WU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(r),!0).forEach(function(n){rze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rze(t,e,r){return e=nze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nze(t){var e=ize(t,"string");return Sy(e)==="symbol"?e:String(e)}function ize(t,e){if(Sy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GU=function(e,r,n,i,o){var s=n-i,a;return a="M ".concat(e,",").concat(r),a+="L ".concat(e+n,",").concat(r),a+="L ".concat(e+n-s/2,",").concat(r+o),a+="L ".concat(e+n-s/2-i,",").concat(r+o),a+="L ".concat(e,",").concat(r," Z"),a},oze={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sze=function(e){var r=zU(zU({},oze),e),n=E.useRef(),i=E.useState(-1),o=X8e(i,2),s=o[0],a=o[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&a(x)}catch{}},[]);var l=r.x,c=r.y,u=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,y=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var v=ct("recharts-trapezoid",p);return b?k.createElement(Ps,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:y,animationEasing:m,isActive:b},function(x){var S=x.upperWidth,_=x.lowerWidth,w=x.height,A=x.x,C=x.y;return k.createElement(Ps,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:y,easing:m},k.createElement("path",H_({},qe(r,!0),{className:v,d:GU(A,C,S,_,w),ref:n})))}):k.createElement("g",null,k.createElement("path",H_({},qe(r,!0),{className:v,d:GU(l,c,u,d,h)})))},aze=["option","shapeType","propTransformer","activeClassName","isActive"];function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function lze(t,e){if(t==null)return{};var r=cze(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cze(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function K_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){uze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uze(t,e,r){return e=fze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fze(t){var e=dze(t,"string");return Ey(e)==="symbol"?e:String(e)}function dze(t,e){if(Ey(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ey(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hze(t,e){return K_(K_({},e),t)}function pze(t,e){return t==="symbols"}function HU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return k.createElement(n$,r);case"trapezoid":return k.createElement(sze,r);case"sector":return k.createElement(KX,r);case"symbols":if(pze(e))return k.createElement(_j,r);break;default:return null}}function mze(t){return E.isValidElement(t)?t.props:t}function yze(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?hze:n,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=lze(t,aze),c;if(E.isValidElement(e))c=E.cloneElement(e,K_(K_({},l),mze(e)));else if(Me(e))c=e(l);else if(z8e(e)&&!Q8e(e)){var u=i(e,l);c=k.createElement(HU,{shapeType:r,elementProps:u})}else{var d=l;c=k.createElement(HU,{shapeType:r,elementProps:d})}return a?k.createElement(Jt,{className:s},c):c}function wS(t,e){return e!=null&&"trapezoids"in t.props}function SS(t,e){return e!=null&&"sectors"in t.props}function Ay(t,e){return e!=null&&"points"in t.props}function gze(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,o=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&o}function vze(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function bze(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function xze(t,e){var r;return wS(t,e)?r=gze:SS(t,e)?r=vze:Ay(t,e)&&(r=bze),r}function _ze(t,e){var r;return wS(t,e)?r="trapezoids":SS(t,e)?r="sectors":Ay(t,e)&&(r="points"),r}function wze(t,e){if(wS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(SS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ay(t,e)?e.payload:{}}function Sze(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=_ze(r,e),o=wze(r,e),s=n.filter(function(l,c){var u=bS(o,l),d=r.props[i].filter(function(m){var y=xze(r,e);return y(m,e)}),h=r.props[i].indexOf(d[d.length-1]),p=c===h;return u&&p}),a=n.indexOf(s[s.length-1]);return a}var Eze=Math.ceil,Aze=Math.max;function Cze(t,e,r,n){for(var i=-1,o=Aze(Eze((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var Tze=Cze,Pze=BQ,KU=1/0,Ize=17976931348623157e292;function Nze(t){if(!t)return t===0?t:0;if(t=Pze(t),t===KU||t===-KU){var e=t<0?-1:1;return e*Ize}return t===t?t:0}var QX=Nze,kze=Tze,Oze=uS,iC=QX;function Rze(t){return function(e,r,n){return n&&typeof n!="number"&&Oze(e,r,n)&&(r=n=void 0),e=iC(e),r===void 0?(r=e,e=0):r=iC(r),n=n===void 0?e<r?1:-1:iC(n),kze(e,r,n,t)}}var jze=Rze,$ze=jze,Dze=$ze(),Mze=Dze;const Y_=ot(Mze);function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function YU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(r),!0).forEach(function(n){XX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XX(t,e,r){return e=Fze(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fze(t){var e=Lze(t,"string");return Cy(e)==="symbol"?e:String(e)}function Lze(t,e){if(Cy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bze=["Webkit","Moz","O","ms"],Uze=function(e,r){if(!e)return null;var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Bze.reduce(function(o,s){return QU(QU({},o),{},XX({},s+n,r))},{});return i[e]=r,i};function Td(t){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Td(t)}function Q_(){return Q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q_.apply(this,arguments)}function XU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(r),!0).forEach(function(n){Gn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JX(n.key),n)}}function Wze(t,e,r){return e&&JU(t.prototype,e),r&&JU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}function qI(t,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qI(t,e)}function Gze(t){var e=Hze();return function(){var n=X_(t),i;if(e){var o=X_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return qze(this,i)}}function qze(t,e){if(e&&(Td(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yo(t)}function yo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X_(t){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X_(t)}function Gn(t,e,r){return e=JX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JX(t){var e=Kze(t,"string");return Td(e)==="symbol"?e:String(e)}function Kze(t,e){if(Td(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Td(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yze=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=Hp().domain(Y_(0,l)).range([o,o+s-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:u}},ZU=function(e){return e.changedTouches&&!!e.changedTouches.length},Pd=function(t){zze(r,t);var e=Gze(r);function r(n){var i;return Vze(this,r),i=e.call(this,n),Gn(yo(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),Gn(yo(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),Gn(yo(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,s=o.endIndex,a=o.onDragEnd,l=o.startIndex;a==null||a({endIndex:s,startIndex:l})}),i.detachDragEndListener()}),Gn(yo(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Gn(yo(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Gn(yo(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Gn(yo(i),"handleSlideDragStart",function(o){var s=ZU(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(yo(i),"startX"),endX:i.handleTravellerDragStart.bind(yo(i),"endX")},i.state={},i}return Wze(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,s=i.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(o,s),p=Math.max(o,s),m=r.getIndexInRange(a,h),y=r.getIndexInRange(a,p);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(i){var o=this.props,s=o.data,a=o.tickFormatter,l=o.dataKey,c=si(s[i],l,i);return Me(a)?a(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,s=o.slideMoveStartX,a=o.startX,l=o.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,p=c.startIndex,m=c.endIndex,y=c.onChange,g=i.pageX-s;g>0?g=Math.min(g,u+d-h-l,u+d-h-a):g<0&&(g=Math.max(g,u-a,u-l));var b=this.getIndex({startX:a+g,endX:l+g});(b.startIndex!==p||b.endIndex!==m)&&y&&y(b),this.setState({startX:a+g,endX:l+g,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var s=ZU(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,s=this.state,a=s.brushMoveStartX,l=s.movingTravellerId,c=s.endX,u=s.startX,d=this.state[l],h=this.props,p=h.x,m=h.width,y=h.travellerWidth,g=h.onChange,b=h.gap,v=h.data,x={startX:this.state.startX,endX:this.state.endX},S=i.pageX-a;S>0?S=Math.min(S,p+m-y-d):S<0&&(S=Math.max(S,p-d)),x[l]=d+S;var _=this.getIndex(x),w=_.startIndex,A=_.endIndex,C=function(){var T=v.length-1;return l==="startX"&&(c>u?w%b===0:A%b===0)||c<u&&A===T||l==="endX"&&(c>u?A%b===0:w%b===0)||c>u&&A===T};this.setState((o={},Gn(o,l,d+S),Gn(o,"brushMoveStartX",i.pageX),o),function(){g&&C()&&g(_)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,d=this.state[o],h=l.indexOf(d);if(h!==-1){var p=h+i;if(!(p===-1||p>=l.length)){var m=l[p];o==="startX"&&m>=u||o==="endX"&&m<=c||this.setState(Gn({},o,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.fill,u=i.stroke;return k.createElement("rect",{stroke:u,fill:c,x:o,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.data,u=i.children,d=i.padding,h=E.Children.only(u);return h?k.cloneElement(h,{x:o,y:s,width:a,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,o){var s=this,a=this.props,l=a.y,c=a.travellerWidth,u=a.height,d=a.traveller,h=a.ariaLabel,p=a.data,m=a.startIndex,y=a.endIndex,g=Math.max(i,this.props.x),b=oC(oC({},qe(this.props)),{},{x:g,y:l,width:c,height:u}),v=h||"Min value: ".concat(p[m].name,", Max value: ").concat(p[y].name);return k.createElement(Jt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,o))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(d,b))}},{key:"renderSlide",value:function(i,o){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(i,o)+u,h=Math.max(Math.abs(o-i)-u,0);return k.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:h,height:l})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,s=i.endIndex,a=i.y,l=i.height,c=i.travellerWidth,u=i.stroke,d=this.state,h=d.startX,p=d.endX,m=5,y={pointerEvents:"none",fill:u};return k.createElement(Jt,{className:"recharts-brush-texts"},k.createElement(N_,Q_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,p)-m,y:a+l/2},y),this.getTextOfTick(o)),k.createElement(N_,Q_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,p)+c+m,y:a+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var i=this.props,o=i.data,s=i.className,a=i.children,l=i.x,c=i.y,u=i.width,d=i.height,h=i.alwaysShowText,p=this.state,m=p.startX,y=p.endX,g=p.isTextActive,b=p.isSlideMoving,v=p.isTravellerMoving,x=p.isTravellerFocused;if(!o||!o.length||!ne(l)||!ne(c)||!ne(u)||!ne(d)||u<=0||d<=0)return null;var S=ct("recharts-brush",s),_=k.Children.count(a)===1,w=Uze("userSelect","none");return k.createElement(Jt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||b||v||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,s=i.y,a=i.width,l=i.height,c=i.stroke,u=Math.floor(s+l/2)-1;return k.createElement(k.Fragment,null,k.createElement("rect",{x:o,y:s,width:a,height:l,fill:c,stroke:"none"}),k.createElement("line",{x1:o+1,y1:u,x2:o+a-1,y2:u,fill:"none",stroke:"#fff"}),k.createElement("line",{x1:o+1,y1:u+2,x2:o+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var s;return k.isValidElement(i)?s=k.cloneElement(i,o):Me(i)?s=i(o):s=r.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(i,o){var s=i.data,a=i.width,l=i.x,c=i.travellerWidth,u=i.updateId,d=i.startIndex,h=i.endIndex;if(s!==o.prevData||u!==o.prevUpdateId)return oC({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?Yze({data:s,width:a,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(o.scale&&(a!==o.prevWidth||l!==o.prevX||c!==o.prevTravellerWidth)){o.scale.range([l,l+a-c]);var p=o.scale.domain().map(function(m){return o.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(i,o){for(var s=i.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);i[c]>o?l=c:a=c}return o>=i[l]?l:a}}]),r}(E.PureComponent);Gn(Pd,"displayName","Brush");Gn(Pd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Qze=Pj;function Xze(t,e){var r;return Qze(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var Jze=Xze,Zze=oQ,e9e=ll,t9e=Jze,r9e=Un,n9e=uS;function i9e(t,e,r){var n=r9e(t)?Zze:t9e;return r&&n9e(t,e,r)&&(e=void 0),n(t,e9e(e))}var o9e=i9e;const s9e=ot(o9e);var Go=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},eV=TQ;function a9e(t,e,r){e=="__proto__"&&eV?eV(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var l9e=a9e,c9e=l9e,u9e=AQ,f9e=ll;function d9e(t,e){var r={};return e=f9e(e),u9e(t,function(n,i,o){c9e(r,i,e(n,i,o))}),r}var h9e=d9e;const p9e=ot(h9e);function m9e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var y9e=m9e,g9e=Pj;function v9e(t,e){var r=!0;return g9e(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var b9e=v9e,x9e=y9e,_9e=b9e,w9e=ll,S9e=Un,E9e=uS;function A9e(t,e,r){var n=S9e(t)?x9e:_9e;return r&&E9e(t,e,r)&&(e=void 0),n(t,w9e(e))}var C9e=A9e;const ZX=ot(C9e);function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}var T9e=["x","y"];function HI(){return HI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HI.apply(this,arguments)}function tV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(r),!0).forEach(function(n){P9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P9e(t,e,r){return e=I9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I9e(t){var e=N9e(t,"string");return Ty(e)==="symbol"?e:String(e)}function N9e(t,e){if(Ty(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ty(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k9e(t,e){if(t==null)return{};var r=O9e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function O9e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function R9e(t,e){var r=t.x,n=t.y,i=k9e(t,T9e),o="".concat(r),s=parseInt(o,10),a="".concat(n),l=parseInt(a,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Hh(Hh(Hh(Hh(Hh({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function rV(t){return k.createElement(yze,HI({shapeType:"rectangle",propTransformer:R9e,activeClassName:"recharts-active-bar"},t))}var j9e=["value","background"];function Id(t){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Id(t)}function $9e(t,e){if(t==null)return{};var r=D9e(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D9e(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J_.apply(this,arguments)}function nV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nV(Object(r),!0).forEach(function(n){_a(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eJ(n.key),n)}}function F9e(t,e,r){return e&&iV(t.prototype,e),r&&iV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function L9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KI(t,e)}function KI(t,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KI(t,e)}function B9e(t){var e=V9e();return function(){var n=Z_(t),i;if(e){var o=Z_(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return U9e(this,i)}}function U9e(t,e){if(e&&(Id(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mp(t)}function mp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z_(t)}function _a(t,e,r){return e=eJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eJ(t){var e=W9e(t,"string");return Id(e)==="symbol"?e:String(e)}function W9e(t,e){if(Id(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Id(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ES=function(t){L9e(r,t);var e=B9e(r);function r(){var n;M9e(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),_a(mp(n),"state",{isAnimationFinished:!1}),_a(mp(n),"id",Wg("recharts-bar-")),_a(mp(n),"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),_a(mp(n),"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return F9e(r,[{key:"renderRectanglesStatically",value:function(i){var o=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=qe(this.props);return i&&i.map(function(h,p){var m=p===c,y=m?u:a,g=vr(vr(vr({},d),h),{},{isActive:m,option:y,index:p,dataKey:l,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return k.createElement(Jt,J_({className:"recharts-bar-rectangle"},d_(o.props,h,p),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value)}),k.createElement(rV,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,s=o.data,a=o.layout,l=o.isAnimationActive,c=o.animationBegin,u=o.animationDuration,d=o.animationEasing,h=o.animationId,p=this.state.prevData;return k.createElement(Ps,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=s.map(function(b,v){var x=p&&p[v];if(x){var S=Qi(x.x,b.x),_=Qi(x.y,b.y),w=Qi(x.width,b.width),A=Qi(x.height,b.height);return vr(vr({},b),{},{x:S(y),y:_(y),width:w(y),height:A(y)})}if(a==="horizontal"){var C=Qi(0,b.height),I=C(y);return vr(vr({},b),{},{y:b.y+b.height-I,height:I})}var T=Qi(0,b.width),P=T(y);return vr(vr({},b),{},{width:P})});return k.createElement(Jt,null,i.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,s=i.isAnimationActive,a=this.state.prevData;return s&&o&&o.length&&(!a||!bS(a,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,s=o.data,a=o.dataKey,l=o.activeIndex,c=qe(this.props.background);return s.map(function(u,d){u.value;var h=u.background,p=$9e(u,j9e);if(!h)return null;var m=vr(vr(vr(vr(vr({},p),{},{fill:"#eee"},h),c),d_(i.props,u,d)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:a,index:d,key:"background-bar-".concat(d),className:"recharts-bar-background-rectangle"});return k.createElement(rV,J_({option:i.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=Ri(d,Yg);if(!h)return null;var p=u==="vertical"?a[0].height/2:a[0].width/2,m=function(b,v){var x=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:x,errorVal:si(b,v)}},y={clipPath:i?"url(#clipPath-".concat(o,")"):null};return k.createElement(Jt,y,h.map(function(g){return k.cloneElement(g,{key:"error-bar-".concat(o,"-").concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,s=i.data,a=i.className,l=i.xAxis,c=i.yAxis,u=i.left,d=i.top,h=i.width,p=i.height,m=i.isAnimationActive,y=i.background,g=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,v=ct("recharts-bar",a),x=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,_=x||S,w=Xe(g)?this.id:g;return k.createElement(Jt,{className:v},x||S?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(w)},k.createElement("rect",{x:x?u:u-h/2,y:S?d:d-p/2,width:x?h:h*2,height:S?p:p*2}))):null,k.createElement(Jt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!m||b)&&La.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}]),r}(E.PureComponent);_a(ES,"displayName","Bar");_a(ES,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!vs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_a(ES,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,h=t.offset,p=eWe(n,r);if(!p)return null;var m=e.layout,y=r.props,g=y.dataKey,b=y.children,v=y.minPointSize,x=m==="horizontal"?s:o,S=c?x.scale.domain():null,_=lWe({numericAxis:x}),w=Ri(b,WQ),A=d.map(function(C,I){var T,P,O,N,j,L;if(c?T=tWe(c[u+I],S):(T=si(C,g),Array.isArray(T)||(T=[_,T])),m==="horizontal"){var U,V=[s.scale(T[0]),s.scale(T[1])],R=V[0],F=V[1];P=_U({axis:o,ticks:a,bandSize:i,offset:p.offset,entry:C,index:I}),O=(U=F??R)!==null&&U!==void 0?U:void 0,N=p.size;var z=R-F;if(j=Number.isNaN(z)?0:z,L={x:P,y:s.y,width:N,height:s.height},Math.abs(v)>0&&Math.abs(j)<Math.abs(v)){var ae=no(j||v)*(Math.abs(v)-Math.abs(j));O-=ae,j+=ae}}else{var te=[o.scale(T[0]),o.scale(T[1])],be=te[0],at=te[1];if(P=be,O=_U({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:C,index:I}),N=at-be,j=p.size,L={x:o.x,y:O,width:o.width,height:j},Math.abs(v)>0&&Math.abs(N)<Math.abs(v)){var rt=no(N||v)*(Math.abs(v)-Math.abs(N));N+=rt}}return vr(vr(vr({},C),{},{x:P,y:O,width:N,height:j,value:c?T:T[1],payload:C,background:L},w&&w[I]&&w[I].props),{},{tooltipPayload:[GX(r,C)],tooltipPosition:{x:P+N/2,y:O+j/2}})});return vr({data:A,layout:m},h)});function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function z9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tJ(n.key),n)}}function G9e(t,e,r){return e&&oV(t.prototype,e),r&&oV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(r),!0).forEach(function(n){AS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AS(t,e,r){return e=tJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tJ(t){var e=q9e(t,"string");return Py(e)==="symbol"?e:String(e)}function q9e(t,e){if(Py(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Py(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H9e=function(e,r,n,i,o){var s=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(r),d={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},h=!!To(c,ES);return u.reduce(function(p,m){var y=r[m],g=y.orientation,b=y.domain,v=y.padding,x=v===void 0?{}:v,S=y.mirror,_=y.reversed,w="".concat(g).concat(S?"Mirror":""),A,C,I,T,P;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=b[1]-b[0],N=1/0,j=y.categoricalDomain.sort();j.forEach(function(at,rt){rt>0&&(N=Math.min((at||0)-(j[rt-1]||0),N))});var L=N/O,U=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(A=L*U/2),y.padding==="no-gap"){var V=yd(e.barCategoryGap,L*U),R=L*U/2;A=R-V-(R-V)/U*V}}i==="xAxis"?C=[n.left+(x.left||0)+(A||0),n.left+n.width-(x.right||0)-(A||0)]:i==="yAxis"?C=l==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(A||0),n.top+n.height-(x.bottom||0)-(A||0)]:C=y.range,_&&(C=[C[1],C[0]]);var F=J5e(y,o,h),z=F.scale,ae=F.realScaleType;z.domain(b).range(C),Z5e(z);var te=aWe(z,Hi(Hi({},y),{},{realScaleType:ae}));i==="xAxis"?(P=g==="top"&&!S||g==="bottom"&&S,I=n.left,T=d[w]-P*y.height):i==="yAxis"&&(P=g==="left"&&!S||g==="right"&&S,I=d[w]-P*y.width,T=n.top);var be=Hi(Hi(Hi({},y),te),{},{realScaleType:ae,x:I,y:T,scale:z,width:i==="xAxis"?n.width:y.width,height:i==="yAxis"?n.height:y.height});return be.bandSize=W_(be,te),!y.hide&&i==="xAxis"?d[w]+=(P?-1:1)*be.height:y.hide||(d[w]+=(P?-1:1)*be.width),Hi(Hi({},p),{},AS({},m,be))},{})},rJ=function(e,r){var n=e.x,i=e.y,o=r.x,s=r.y;return{x:Math.min(n,o),y:Math.min(i,s),width:Math.abs(o-n),height:Math.abs(s-i)}},K9e=function(e){var r=e.x1,n=e.y1,i=e.x2,o=e.y2;return rJ({x:r,y:n},{x:i,y:o})},nJ=function(){function t(e){z9e(this,t),this.scale=e}return G9e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(r)+a}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}]),t}();AS(nJ,"EPS",1e-4);var o$=function(e){var r=Object.keys(e).reduce(function(n,i){return Hi(Hi({},n),{},AS({},i,nJ.create(e[i])))},{});return Hi(Hi({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return p9e(i,function(l,c){return r[c].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return ZX(i,function(o,s){return r[s].isInRange(o)})}})};function Y9e(t){return(t%180+180)%180}var Q9e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Y9e(i),s=o*Math.PI/180,a=Math.atan(n/r),l=s>a&&s<Math.PI-a?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)};function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function aV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(r),!0).forEach(function(n){X9e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X9e(t,e,r){return e=J9e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J9e(t){var e=Z9e(t,"string");return Iy(e)==="symbol"?e:String(e)}function Z9e(t,e){if(Iy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Iy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eGe(t,e){return iGe(t)||nGe(t,e)||rGe(t,e)||tGe()}function tGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rGe(t,e){if(t){if(typeof t=="string")return cV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cV(t,e)}}function cV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nGe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function iGe(t){if(Array.isArray(t))return t}function YI(){return YI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YI.apply(this,arguments)}var oGe=function(e,r){var n;return k.isValidElement(e)?n=k.cloneElement(e,r):Me(e)?n=e(r):n=k.createElement("line",YI({},r,{className:"recharts-reference-line-line"})),n},sGe=function(e,r,n,i,o){var s=o.viewBox,a=s.x,l=s.y,c=s.width,u=s.height,d=o.position;if(n){var h=o.y,p=o.yAxis.orientation,m=e.y.apply(h,{position:d});if(Go(o,"discard")&&!e.y.isInRange(m))return null;var y=[{x:a+c,y:m},{x:a,y:m}];return p==="left"?y.reverse():y}if(r){var g=o.x,b=o.xAxis.orientation,v=e.x.apply(g,{position:d});if(Go(o,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:l+u},{x:v,y:l}];return b==="top"?x.reverse():x}if(i){var S=o.segment,_=S.map(function(w){return e.apply(w,{position:d})});return Go(o,"discard")&&s9e(_,function(w){return!e.isInRange(w)})?null:_}return null};function s$(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxis,o=t.yAxis,s=t.shape,a=t.className,l=t.alwaysShow,c=t.clipPathId;pc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=o$({x:i.scale,y:o.scale}),d=dr(e),h=dr(r),p=n&&n.length===2,m=sGe(u,d,h,p,t);if(!m)return null;var y=eGe(m,2),g=y[0],b=g.x,v=g.y,x=y[1],S=x.x,_=x.y,w=Go(t,"hidden")?"url(#".concat(c,")"):void 0,A=lV(lV({clipPath:w},qe(t,!0)),{},{x1:b,y1:v,x2:S,y2:_});return k.createElement(Jt,{className:ct("recharts-reference-line",a)},oGe(s,A),fn.renderCallByParent(t,K9e({x1:b,y1:v,x2:S,y2:_})))}s$.displayName="ReferenceLine";s$.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QI.apply(this,arguments)}function uV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(r),!0).forEach(function(n){aGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aGe(t,e,r){return e=lGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lGe(t){var e=cGe(t,"string");return Ny(e)==="symbol"?e:String(e)}function cGe(t,e){if(Ny(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ny(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uGe=function(e){var r=e.x,n=e.y,i=e.xAxis,o=e.yAxis,s=o$({x:i.scale,y:o.scale}),a=s.apply({x:r,y:n},{bandAware:!0});return Go(e,"discard")&&!s.isInRange(a)?null:a};function Qg(t){var e=t.x,r=t.y,n=t.r,i=t.alwaysShow,o=t.clipPathId,s=dr(e),a=dr(r);if(pc(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=uGe(t);if(!l)return null;var c=l.x,u=l.y,d=t.shape,h=t.className,p=Go(t,"hidden")?"url(#".concat(o,")"):void 0,m=fV(fV({clipPath:p},qe(t,!0)),{},{cx:c,cy:u});return k.createElement(Jt,{className:ct("recharts-reference-dot",h)},Qg.renderDot(d,m),fn.renderCallByParent(t,{x:c-n,y:u-n,width:2*n,height:2*n}))}Qg.displayName="ReferenceDot";Qg.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};Qg.renderDot=function(t,e){var r;return k.isValidElement(t)?r=k.cloneElement(t,e):Me(t)?r=t(e):r=k.createElement(i$,QI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XI.apply(this,arguments)}function dV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(r),!0).forEach(function(n){fGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fGe(t,e,r){return e=dGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dGe(t){var e=hGe(t,"string");return ky(e)==="symbol"?e:String(e)}function hGe(t,e){if(ky(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ky(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pGe=function(e,r,n,i,o){var s=o.x1,a=o.x2,l=o.y1,c=o.y2,u=o.xAxis,d=o.yAxis;if(!u||!d)return null;var h=o$({x:u.scale,y:d.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Go(o,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:rJ(p,m)};function Xg(t){var e=t.x1,r=t.x2,n=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;pc(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=dr(e),c=dr(r),u=dr(n),d=dr(i),h=t.shape;if(!l&&!c&&!u&&!d&&!h)return null;var p=pGe(l,c,u,d,t);if(!p&&!h)return null;var m=Go(t,"hidden")?"url(#".concat(a,")"):void 0;return k.createElement(Jt,{className:ct("recharts-reference-area",o)},Xg.renderRect(h,hV(hV({clipPath:m},qe(t,!0)),p)),fn.renderCallByParent(t,p))}Xg.displayName="ReferenceArea";Xg.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};Xg.renderRect=function(t,e){var r;return k.isValidElement(t)?r=k.cloneElement(t,e):Me(t)?r=t(e):r=k.createElement(n$,XI({},e,{className:"recharts-reference-area-rect"})),r};function iJ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)if(r===void 0||r(t[i])===!0)n.push(t[i]);else return;return n}function mGe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Q9e(n,r)}function yGe(t,e,r){var n=r==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:n?i:o,end:n?i+s:o+a}:{start:n?i+s:o+a,end:n?i:o}}function ew(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function gGe(t,e){return iJ(t,e+1)}function vGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=e.start,a=e.end,l=0,c=1,u=s,d=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:iJ(n,c)};var y=l,g,b=function(){return g===void 0&&(g=r(m,y)),g},v=m.coordinate,x=l===0||ew(t,v,b,u,a);x||(l=0,u=s,c+=1),x&&(u=v+t*(b()/2+i),l+=c)},h;c<=o.length;)if(h=d(),h)return h.v;return[]}function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function pV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pV(Object(r),!0).forEach(function(n){bGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bGe(t,e,r){return e=xGe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xGe(t){var e=_Ge(t,"string");return Oy(e)==="symbol"?e:String(e)}function _Ge(t,e){if(Oy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Oy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wGe(t,e,r,n,i){for(var o=(n||[]).slice(),s=o.length,a=e.start,l=e.end,c=function(h){var p=o[h],m,y=function(){return m===void 0&&(m=r(p,h)),m};if(h===s-1){var g=t*(p.coordinate+t*y()/2-l);o[h]=p=sn(sn({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else o[h]=p=sn(sn({},p),{},{tickCoord:p.coordinate});var b=ew(t,p.tickCoord,y,a,l);b&&(l=p.tickCoord-t*(y()/2+i),o[h]=sn(sn({},p),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return o}function SGe(t,e,r,n,i,o){var s=(n||[]).slice(),a=s.length,l=e.start,c=e.end;if(o){var u=n[a-1],d=r(u,a-1),h=t*(u.coordinate+t*d/2-c);s[a-1]=u=sn(sn({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var p=ew(t,u.tickCoord,function(){return d},l,c);p&&(c=u.tickCoord-t*(d/2+i),s[a-1]=sn(sn({},u),{},{isShow:!0}))}for(var m=o?a-1:a,y=function(v){var x=s[v],S,_=function(){return S===void 0&&(S=r(x,v)),S};if(v===0){var w=t*(x.coordinate-t*_()/2-l);s[v]=x=sn(sn({},x),{},{tickCoord:w<0?x.coordinate-w*t:x.coordinate})}else s[v]=x=sn(sn({},x),{},{tickCoord:x.coordinate});var A=ew(t,x.tickCoord,_,l,c);A&&(l=x.tickCoord+t*(_()/2+i),s[v]=sn(sn({},x),{},{isShow:!0}))},g=0;g<m;g++)y(g);return s}function JI(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!i||!i.length||!n)return[];if(ne(l)||vs.isSsr)return gGe(i,typeof l=="number"&&ne(l)?l:0);var h=[],p=a==="top"||a==="bottom"?"width":"height",m=u&&p==="width"?qp(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},y=function(x,S){var _=Me(c)?c(x.value,S):x.value;return p==="width"?mGe(qp(_,{fontSize:e,letterSpacing:r}),m,d):qp(_,{fontSize:e,letterSpacing:r})[p]},g=i.length>=2?no(i[1].coordinate-i[0].coordinate):1,b=yGe(o,g,p);return l==="equidistantPreserveStart"?vGe(g,b,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?h=SGe(g,b,y,i,s,l==="preserveStartEnd"):h=wGe(g,b,y,i,s),h.filter(function(v){return v.isShow}))}var EGe=["viewBox"],AGe=["viewBox"],CGe=["ticks"];function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wu.apply(this,arguments)}function mV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(r),!0).forEach(function(n){a$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sC(t,e){if(t==null)return{};var r=TGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function TGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function PGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oJ(n.key),n)}}function IGe(t,e,r){return e&&yV(t.prototype,e),r&&yV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function NGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZI(t,e)}function ZI(t,e){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ZI(t,e)}function kGe(t){var e=jGe();return function(){var n=tw(t),i;if(e){var o=tw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return OGe(this,i)}}function OGe(t,e){if(e&&(Nd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RGe(t)}function RGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tw(t){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tw(t)}function a$(t,e,r){return e=oJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oJ(t){var e=$Ge(t,"string");return Nd(e)==="symbol"?e:String(e)}function $Ge(t,e){if(Nd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Nd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yp=function(t){NGe(r,t);var e=kGe(r);function r(n){var i;return PGe(this,r),i=e.call(this,n),i.state={fontSize:"",letterSpacing:""},i}return IGe(r,[{key:"shouldComponentUpdate",value:function(i,o){var s=i.viewBox,a=sC(i,EGe),l=this.props,c=l.viewBox,u=sC(l,AGe);return!pf(s,c)||!pf(a,u)||!pf(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,s=o.x,a=o.y,l=o.width,c=o.height,u=o.orientation,d=o.tickSize,h=o.mirror,p=o.tickMargin,m,y,g,b,v,x,S=h?-1:1,_=i.tickSize||d,w=ne(i.tickCoord)?i.tickCoord:i.coordinate;switch(u){case"top":m=y=i.coordinate,b=a+ +!h*c,g=b-S*_,x=g-S*p,v=w;break;case"left":g=b=i.coordinate,y=s+ +!h*l,m=y-S*_,v=m-S*p,x=w;break;case"right":g=b=i.coordinate,y=s+ +h*l,m=y+S*_,v=m+S*p,x=w;break;default:m=y=i.coordinate,b=a+ +h*c,g=b+S*_,x=g+S*p,v=w;break}return{line:{x1:m,y1:g,x2:y,y2:b},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a;switch(o){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,s=i.mirror,a="end";switch(o){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.orientation,u=i.mirror,d=i.axisLine,h=bn(bn(bn({},qe(this.props)),qe(d)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);h=bn(bn({},h),{},{x1:o,y1:s+p*l,x2:o+a,y2:s+p*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=bn(bn({},h),{},{x1:o+m*a,y1:s,x2:o+m*a,y2:s+l})}return k.createElement("line",Wu({},h,{className:ct("recharts-cartesian-axis-line",Oi(d,"className"))}))}},{key:"renderTicks",value:function(i,o,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,p=l.unit,m=JI(bn(bn({},this.props),{},{ticks:i}),o,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=qe(this.props),v=qe(d),x=bn(bn({},b),{},{fill:"none"},qe(c)),S=m.map(function(_,w){var A=a.getTickLineCoord(_),C=A.line,I=A.tick,T=bn(bn(bn(bn({textAnchor:y,verticalAnchor:g},b),{},{stroke:"none",fill:u},v),I),{},{index:w,payload:_,visibleTicksCount:m.length,tickFormatter:h});return k.createElement(Jt,Wu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},d_(a.props,_,w)),c&&k.createElement("line",Wu({},x,C,{className:ct("recharts-cartesian-axis-tick-line",Oi(c,"className"))})),d&&r.renderTickItem(d,T,"".concat(Me(h)?h(_.value,w):_.value).concat(p||"")))});return k.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var i=this,o=this.props,s=o.axisLine,a=o.width,l=o.height,c=o.ticksGenerator,u=o.className,d=o.hide;if(d)return null;var h=this.props,p=h.ticks,m=sC(h,CGe),y=p;return Me(c)&&(y=p&&p.length>0?c(this.props):c(m)),a<=0||l<=0||!y||!y.length?null:k.createElement(Jt,{className:ct("recharts-cartesian-axis",u),ref:function(b){i.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),fn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,s){var a;return k.isValidElement(i)?a=k.cloneElement(i,o):Me(i)?a=i(o):a=k.createElement(N_,Wu({},o,{className:"recharts-cartesian-axis-tick-value"}),s),a}}]),r}(E.Component);a$(Yp,"displayName","CartesianAxis");a$(Yp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DGe=["x1","y1","x2","y2","key"],MGe=["offset"];function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}function eN(){return eN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eN.apply(this,arguments)}function gV(t,e){if(t==null)return{};var r=FGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function vV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(r),!0).forEach(function(n){l$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sJ(n.key),n)}}function BGe(t,e,r){return e&&bV(t.prototype,e),r&&bV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function UGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tN(t,e)}function tN(t,e){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tN(t,e)}function VGe(t){var e=GGe();return function(){var n=rw(t),i;if(e){var o=rw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return WGe(this,i)}}function WGe(t,e){if(e&&(kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zGe(t)}function zGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rw(t){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rw(t)}function l$(t,e,r){return e=sJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sJ(t){var e=qGe(t,"string");return kd(e)==="symbol"?e:String(e)}function qGe(t,e){if(kd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(kd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CS=function(t){UGe(r,t);var e=VGe(r);function r(){return LGe(this,r),e.apply(this,arguments)}return BGe(r,[{key:"renderHorizontal",value:function(i){var o=this,s=this.props,a=s.x,l=s.width,c=s.horizontal;if(!i||!i.length)return null;var u=i.map(function(d,h){var p=Vs(Vs({},o.props),{},{x1:a,y1:d,x2:a+l,y2:d,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}},{key:"renderVertical",value:function(i){var o=this,s=this.props,a=s.y,l=s.height,c=s.vertical;if(!i||!i.length)return null;var u=i.map(function(d,h){var p=Vs(Vs({},o.props),{},{x1:d,y1:a,x2:d,y2:a+l,key:"line-".concat(h),index:h});return r.renderLineItem(c,p)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,u=s.width,d=s.height,h=i.map(function(m){return Math.round(m+l-l)}).sort(function(m,y){return m-y});l!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?l+u-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return k.createElement("rect",{key:"react-".concat(y),x:m,y:c,width:b,height:d,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var s=this.props,a=s.fillOpacity,l=s.x,c=s.y,u=s.width,d=s.height,h=i.map(function(m){return Math.round(m+c-c)}).sort(function(m,y){return m-y});c!==h[0]&&h.unshift(0);var p=h.map(function(m,y){var g=!h[y+1],b=g?c+d-m:h[y+1]-m;if(b<=0)return null;var v=y%o.length;return k.createElement("rect",{key:"react-".concat(y),y:m,x:l,height:b,width:u,stroke:"none",fill:o[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,s=o.fillOpacity,a=o.x,l=o.y,c=o.width,u=o.height;return k.createElement("rect",{x:a,y:l,width:c,height:u,stroke:"none",fill:i,fillOpacity:s,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,c=i.horizontal,u=i.vertical,d=i.horizontalCoordinatesGenerator,h=i.verticalCoordinatesGenerator,p=i.xAxis,m=i.yAxis,y=i.offset,g=i.chartWidth,b=i.chartHeight,v=i.syncWithTicks,x=i.horizontalValues,S=i.verticalValues;if(!ne(a)||a<=0||!ne(l)||l<=0||!ne(o)||o!==+o||!ne(s)||s!==+s)return null;var _=this.props,w=_.horizontalPoints,A=_.verticalPoints;if((!w||!w.length)&&Me(d)){var C=x&&x.length;w=d({yAxis:m?Vs(Vs({},m),{},{ticks:C?x:m.ticks}):void 0,width:g,height:b,offset:y},C?!0:v)}if((!A||!A.length)&&Me(h)){var I=S&&S.length;A=h({xAxis:p?Vs(Vs({},p),{},{ticks:I?S:p.ticks}):void 0,width:g,height:b,offset:y},I?!0:v)}return k.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),c&&this.renderHorizontal(w),u&&this.renderVertical(A),c&&this.renderHorizontalStripes(w),u&&this.renderVerticalStripes(A))}}],[{key:"renderLineItem",value:function(i,o){var s;if(k.isValidElement(i))s=k.cloneElement(i,o);else if(Me(i))s=i(o);else{var a=o.x1,l=o.y1,c=o.x2,u=o.y2,d=o.key,h=gV(o,DGe),p=qe(h);p.offset;var m=gV(p,MGe);s=k.createElement("line",eN({},m,{x1:a,y1:l,x2:c,y2:u,fill:"none",key:d}))}return s}}]),r}(E.PureComponent);l$(CS,"displayName","CartesianGrid");l$(CS,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var HGe=["type","layout","connectNulls","ref"];function Od(t){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(t)}function KGe(t,e){if(t==null)return{};var r=YGe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YGe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Qp(){return Qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qp.apply(this,arguments)}function xV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(r),!0).forEach(function(n){Ki(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function au(t){return ZGe(t)||JGe(t)||XGe(t)||QGe()}function QGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XGe(t,e){if(t){if(typeof t=="string")return rN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rN(t,e)}}function JGe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZGe(t){if(Array.isArray(t))return rN(t)}function rN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _V(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aJ(n.key),n)}}function tqe(t,e,r){return e&&_V(t.prototype,e),r&&_V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nN(t,e)}function nN(t,e){return nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nN(t,e)}function nqe(t){var e=oqe();return function(){var n=nw(t),i;if(e){var o=nw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return iqe(this,i)}}function iqe(t,e){if(e&&(Od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hs(t)}function Hs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oqe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nw(t){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nw(t)}function Ki(t,e,r){return e=aJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aJ(t){var e=sqe(t,"string");return Od(e)==="symbol"?e:String(e)}function sqe(t,e){if(Od(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Od(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var On=function(t){rqe(r,t);var e=nqe(r);function r(){var n;eqe(this,r);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o)),Ki(Hs(n),"state",{isAnimationFinished:!0,totalLength:0}),Ki(Hs(n),"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Ki(Hs(n),"getStrokeDasharray",function(a,l,c){var u=c.reduce(function(v,x){return v+x});if(!u)return n.generateSimpleStrokeDasharray(l,a);for(var d=Math.floor(a/u),h=a%u,p=l-a,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>h){m=[].concat(au(c.slice(0,y)),[h-g]);break}var b=m.length%2===0?[0,p]:[p];return[].concat(au(r.repeat(c,d)),au(m),b).map(function(v){return"".concat(v,"px")}).join(", ")}),Ki(Hs(n),"id",Wg("recharts-line-")),Ki(Hs(n),"pathRef",function(a){n.mainCurve=a}),Ki(Hs(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ki(Hs(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return tqe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=Ri(d,Yg);if(!h)return null;var p=function(g,b){return{x:g.x,y:g.y,value:g.value,errorVal:si(g.payload,b)}},m={clipPath:i?"url(#clipPath-".concat(o,")"):null};return k.createElement(Jt,m,h.map(function(y){return k.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(i,o,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=qe(this.props),p=qe(c,!0),m=u.map(function(g,b){var v=zn(zn(zn({key:"dot-".concat(b),r:3},h),p),{},{value:g.value,dataKey:d,cx:g.x,cy:g.y,index:b,payload:g.payload});return r.renderDotItem(c,v)}),y={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(s,")"):null};return k.createElement(Jt,Qp({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(i,o,s,a){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=KGe(l,HGe),p=zn(zn(zn({},qe(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(s,")"):null,points:i},a),{},{type:c,layout:u,connectNulls:d});return k.createElement(WI,Qp({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,u=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=a.animateNewValues,g=a.width,b=a.height,v=this.state,x=v.prevPoints,S=v.totalLength;return k.createElement(Ps,{begin:d,duration:h,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(x){var A=x.length/l.length,C=l.map(function(N,j){var L=Math.floor(j*A);if(x[L]){var U=x[L],V=Qi(U.x,N.x),R=Qi(U.y,N.y);return zn(zn({},N),{},{x:V(w),y:R(w)})}if(y){var F=Qi(g*2,N.x),z=Qi(b/2,N.y);return zn(zn({},N),{},{x:F(w),y:z(w)})}return zn(zn({},N),{},{x:N.x,y:N.y})});return s.renderCurveStatically(C,i,o)}var I=Qi(0,S),T=I(w),P;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(N){return parseFloat(N)});P=s.getStrokeDasharray(T,S,O)}else P=s.generateSimpleStrokeDasharray(S,T);return s.renderCurveStatically(l,i,o,{strokeDasharray:P})})}},{key:"renderCurve",value:function(i,o){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&a&&a.length&&(!u&&d>0||!bS(u,a))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(a,i,o)}},{key:"render",value:function(){var i,o=this.props,s=o.hide,a=o.dot,l=o.points,c=o.className,u=o.xAxis,d=o.yAxis,h=o.top,p=o.left,m=o.width,y=o.height,g=o.isAnimationActive,b=o.id;if(s||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,S=ct("recharts-line",c),_=u&&u.allowDataOverflow,w=d&&d.allowDataOverflow,A=_||w,C=Xe(b)?this.id:b,I=(i=qe(a))!==null&&i!==void 0?i:{r:3,strokeWidth:2},T=I.r,P=T===void 0?3:T,O=I.strokeWidth,N=O===void 0?2:O,j=Ake(a)?a:{},L=j.clipDot,U=L===void 0?!0:L,V=P*2+N;return k.createElement(Jt,{className:S},_||w?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(C)},k.createElement("rect",{x:_?p:p-m/2,y:w?h:h-y/2,width:_?m:m*2,height:w?y:y*2})),!U&&k.createElement("clipPath",{id:"clipPath-dots-".concat(C)},k.createElement("rect",{x:p-V/2,y:h-V/2,width:m+V,height:y+V}))):null,!x&&this.renderCurve(A,C),this.renderErrorBar(A,C),(x||a)&&this.renderDots(A,U,C),(!g||v)&&La.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var s=i.length%2!==0?[].concat(au(i),[0]):i,a=[],l=0;l<o;++l)a=[].concat(au(a),au(s));return a}},{key:"renderDotItem",value:function(i,o){var s;if(k.isValidElement(i))s=k.cloneElement(i,o);else if(Me(i))s=i(o);else{var a=ct("recharts-line-dot",i?i.className:"");s=k.createElement(i$,Qp({},o,{className:a}))}return s}}]),r}(E.PureComponent);Ki(On,"displayName","Line");Ki(On,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!vs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ki(On,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,d=l.map(function(h,p){var m=si(h,s);return u==="horizontal"?{x:xU({axis:r,ticks:i,bandSize:a,entry:h,index:p}),y:Xe(m)?null:n.scale(m),value:m,payload:h}:{x:Xe(m)?null:r.scale(m),y:xU({axis:n,ticks:o,bandSize:a,entry:h,index:p}),value:m,payload:h}});return zn({points:d,layout:u},c)});var Jg=function(){return null};Jg.displayName="XAxis";Jg.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var Zg=function(){return null};Zg.displayName="YAxis";Zg.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var aqe=ll,lqe=zg,cqe=lS;function uqe(t){return function(e,r,n){var i=Object(e);if(!lqe(e)){var o=aqe(r);e=cqe(e),r=function(a){return o(i[a],a,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:void 0}}var fqe=uqe,dqe=QX;function hqe(t){var e=dqe(t),r=e%1;return e===e?r?e-r:e:0}var pqe=hqe,mqe=bQ,yqe=ll,gqe=pqe,vqe=Math.max;function bqe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:gqe(r);return i<0&&(i=vqe(n+i,0)),mqe(t,yqe(e),i)}var xqe=bqe,_qe=fqe,wqe=xqe,Sqe=_qe(wqe),Eqe=Sqe;const Aqe=ot(Eqe);function wV(t){return Iqe(t)||Pqe(t)||Tqe(t)||Cqe()}function Cqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tqe(t,e){if(t){if(typeof t=="string")return iN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iN(t,e)}}function Pqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Iqe(t){if(Array.isArray(t))return iN(t)}function iN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var oN=function(e,r,n,i,o){var s=Ri(e,s$),a=Ri(e,Qg),l=[].concat(wV(s),wV(a)),c=Ri(e,Xg),u="".concat(i,"Id"),d=i[0],h=r;if(l.length&&(h=l.reduce(function(y,g){if(g.props[u]===n&&Go(g.props,"extendDomain")&&ne(g.props[d])){var b=g.props[d];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},h)),c.length){var p="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(y,g){if(g.props[u]===n&&Go(g.props,"extendDomain")&&ne(g.props[p])&&ne(g.props[m])){var b=g.props[p],v=g.props[m];return[Math.min(y[0],b,v),Math.max(y[1],b,v)]}return y},h)}return o&&o.length&&(h=o.reduce(function(y,g){return ne(g)?[Math.min(y[0],g),Math.max(y[1],g)]:y},h)),h},lJ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,d||l,h),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=r?r+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},a.prototype.listenerCount=function(c){var u=r?r+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,p,m){var y=r?r+c:c;if(!this._events[y])return!1;var g=this._events[y],b=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,h),!0;case 5:return g.fn.call(g.context,u,d,h,p),!0;case 6:return g.fn.call(g.context,u,d,h,p,m),!0}for(x=1,v=new Array(b-1);x<b;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var S=g.length,_;for(x=0;x<S;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),b){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,u);break;case 3:g[x].fn.call(g[x].context,u,d);break;case 4:g[x].fn.call(g[x].context,u,d,h);break;default:if(!v)for(_=1,v=new Array(b-1);_<b;_++)v[_-1]=arguments[_];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,u,d){return o(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return o(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var p=r?r+c:c;if(!this._events[p])return this;if(!u)return s(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&s(this,p);else{for(var y=0,g=[],b=m.length;y<b;y++)(m[y].fn!==u||h&&!m[y].once||d&&m[y].context!==d)&&g.push(m[y]);g.length?this._events[p]=g.length===1?g[0]:g:s(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(lJ);var Nqe=lJ.exports;const kqe=ot(Nqe);var aC=new kqe,lC="recharts.syncMouseEvents";function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function Oqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cJ(n.key),n)}}function Rqe(t,e,r){return e&&SV(t.prototype,e),r&&SV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cC(t,e,r){return e=cJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cJ(t){var e=jqe(t,"string");return Ry(e)==="symbol"?e:String(e)}function jqe(t,e){if(Ry(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ry(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $qe=function(){function t(){Oqe(this,t),cC(this,"activeIndex",0),cC(this,"coordinateList",[]),cC(this,"layout","horizontal")}return Rqe(t,[{key:"setDetails",value:function(r){var n=r.coordinateList,i=n===void 0?[]:n,o=r.container,s=o===void 0?null:o,a=r.layout,l=a===void 0?null:a,c=r.offset,u=c===void 0?null:c,d=r.mouseHandlerCallback,h=d===void 0?null:d;this.coordinateList=i??this.coordinateList,this.container=s??this.container,this.layout=l??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=o+l+c,h=s+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}]),t}();function Dqe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&ne(n)&&ne(i))return!0}return!1}function Mqe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function uJ(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,o=t.endAngle,s=qr(e,r,n,i),a=qr(e,r,n,o);return{points:[s,a],cx:e,cy:r,radius:n,startAngle:i,endAngle:o}}function Fqe(t,e,r){var n,i,o,s;if(t==="horizontal")n=e.x,o=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,o=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=qr(a,l,c,d),p=qr(a,l,u,d);n=h.x,i=h.y,o=p.x,s=p.y}else return uJ(e);return[{x:n,y:i},{x:o,y:s}]}function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function EV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function u0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(r),!0).forEach(function(n){Lqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lqe(t,e,r){return e=Bqe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bqe(t){var e=Uqe(t,"string");return jy(e)==="symbol"?e:String(e)}function Uqe(t,e){if(jy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vqe(t){var e=t.element,r=t.tooltipEventType,n=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,c=t.layout,u=t.chartName;if(!e||!e.props.cursor||!n||!i||u!=="ScatterChart"&&r!=="axis")return null;var d,h=WI;if(u==="ScatterChart")d=i,h=N8e;else if(u==="BarChart")d=Mqe(c,i,s,l),h=n$;else if(c==="radial"){var p=uJ(i),m=p.cx,y=p.cy,g=p.radius,b=p.startAngle,v=p.endAngle;d={cx:m,cy:y,startAngle:b,endAngle:v,innerRadius:g,outerRadius:g},h=KX}else d={points:Fqe(c,i,s)},h=WI;var x=u0(u0(u0(u0({stroke:"#ccc",pointerEvents:"none"},s),d),qe(e.props.cursor)),{},{payload:o,payloadIndex:a,className:"recharts-tooltip-cursor"});return E.isValidElement(e.props.cursor)?E.cloneElement(e.props.cursor,x):E.createElement(h,x)}var Wqe=["item"],zqe=["children","className","width","height","style","compact","title","desc"];function Rd(t){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(t)}function AV(t,e){return Hqe(t)||qqe(t,e)||fJ(t,e)||Gqe()}function Gqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qqe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,a=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Hqe(t){if(Array.isArray(t))return t}function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zu.apply(this,arguments)}function CV(t,e){if(t==null)return{};var r=Kqe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kqe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Yqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dJ(n.key),n)}}function Qqe(t,e,r){return e&&TV(t.prototype,e),r&&TV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sN(t,e)}function sN(t,e){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sN(t,e)}function Jqe(t){var e=eHe();return function(){var n=iw(t),i;if(e){var o=iw(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Zqe(this,i)}}function Zqe(t,e){if(e&&(Rd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(t)}function Ie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iw(t){return iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iw(t)}function jd(t){return nHe(t)||rHe(t)||fJ(t)||tHe()}function tHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fJ(t,e){if(t){if(typeof t=="string")return aN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aN(t,e)}}function rHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nHe(t){if(Array.isArray(t))return aN(t)}function aN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function PV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(r),!0).forEach(function(n){me(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function me(t,e,r){return e=dJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dJ(t){var e=iHe(t,"string");return Rd(e)==="symbol"?e:String(e)}function iHe(t,e){if(Rd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oHe={xAxis:["bottom","top"],yAxis:["left","right"]},sHe={width:"100%",height:"100%"},hJ={x:0,y:0},aHe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},lHe=function(e,r,n,i){var o=r.find(function(u){return u&&u.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return G(G(G({},i),qr(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,c=i.angle;return G(G(G({},i),qr(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return hJ},TS=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,s=(n??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(jd(a),jd(c)):a},[]);return s.length>0?s:e&&e.length&&ne(i)&&ne(o)?e.slice(i,o+1):[]};function pJ(t){return t==="number"?[0,"auto"]:void 0}var mJ=function(e,r,n,i){var o=e.graphicalItems,s=e.tooltipAxis,a=TS(r,e);return n<0||!o||!o.length||n>=a.length?null:o.reduce(function(l,c){var u,d=c.props.hide;if(d)return l;var h=(u=c.props.data)!==null&&u!==void 0?u:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var m=h===void 0?a:h;p=u_(m,s.dataKey,i)}else p=h&&h[n]||a[n];return p?[].concat(jd(l),[GX(c,p)]):l},[])},IV=function(e,r,n,i){var o=i||{x:e.chartX,y:e.chartY},s=aHe(o,n),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=q5e(s,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=mJ(e,r,u,d),p=lHe(n,a,u,o);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},cHe=function(e,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,p=WX(u,o);return n.reduce(function(m,y){var g,b=y.props,v=b.type,x=b.dataKey,S=b.allowDataOverflow,_=b.allowDuplicatedCategory,w=b.scale,A=b.ticks,C=b.includeHidden,I=y.props[s];if(m[I])return m;var T=TS(e.data,{graphicalItems:i.filter(function(te){return te.props[s]===I}),dataStartIndex:l,dataEndIndex:c}),P=T.length,O,N,j;Dqe(y.props.domain,S,v)&&(O=FI(y.props.domain,null,S),p&&(v==="number"||w!=="auto")&&(j=Kp(T,x,"category")));var L=pJ(v);if(!O||O.length===0){var U,V=(U=y.props.domain)!==null&&U!==void 0?U:L;if(x){if(O=Kp(T,x,v),v==="category"&&p){var R=yke(O);_&&R?(N=O,O=Y_(0,P)):_||(O=EU(V,O,y).reduce(function(te,be){return te.indexOf(be)>=0?te:[].concat(jd(te),[be])},[]))}else if(v==="category")_?O=O.filter(function(te){return te!==""&&!Xe(te)}):O=EU(V,O,y).reduce(function(te,be){return te.indexOf(be)>=0||be===""||Xe(be)?te:[].concat(jd(te),[be])},[]);else if(v==="number"){var F=X5e(T,i.filter(function(te){return te.props[s]===I&&(C||!te.props.hide)}),x,o,u);F&&(O=F)}p&&(v==="number"||w!=="auto")&&(j=Kp(T,x,"category"))}else p?O=Y_(0,P):a&&a[I]&&a[I].hasStack&&v==="number"?O=h==="expand"?[0,1]:zX(a[I].stackGroups,l,c):O=VX(T,i.filter(function(te){return te.props[s]===I&&(C||!te.props.hide)}),v,u,!0);if(v==="number")O=oN(d,O,I,o,A),V&&(O=FI(V,O,S));else if(v==="category"&&V){var z=V,ae=O.every(function(te){return z.indexOf(te)>=0});ae&&(O=z)}}return G(G({},m),{},me({},I,G(G({},y.props),{},{axisType:o,domain:O,categoricalDomain:j,duplicateDomain:N,originalDomain:(g=y.props.domain)!==null&&g!==void 0?g:L,isCategorical:p,layout:u})))},{})},uHe=function(e,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,s=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.layout,d=e.children,h=TS(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),p=h.length,m=WX(u,o),y=-1;return n.reduce(function(g,b){var v=b.props[s],x=pJ("number");if(!g[v]){y++;var S;return m?S=Y_(0,p):a&&a[v]&&a[v].hasStack?(S=zX(a[v].stackGroups,l,c),S=oN(d,S,v,o)):(S=FI(x,VX(h,n.filter(function(_){return _.props[s]===v&&!_.props.hide}),"number",u),i.defaultProps.allowDataOverflow),S=oN(d,S,v,o)),G(G({},g),{},me({},v,G(G({axisType:o},i.defaultProps),{},{hide:!0,orientation:Oi(oHe,"".concat(o,".").concat(y%2),null),domain:S,originalDomain:x,isCategorical:m,layout:u})))}return g},{})},fHe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,s=r.graphicalItems,a=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=e.children,d="".concat(i,"Id"),h=Ri(u,o),p={};return h&&h.length?p=cHe(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(p=uHe(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),p},dHe=function(e){var r=Gs(e),n=qs(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Ij(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:W_(r,n)}},NV=function(e){var r=e.children,n=e.defaultShowTooltip,i=To(r,Pd),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},hHe=function(e){return!e||!e.length?!1:e.some(function(r){var n=gs(r&&r.type);return n&&n.indexOf("Bar")>=0})},kV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},pHe=function(e,r){var n=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,c=n.width,u=n.height,d=n.children,h=n.margin||{},p=To(d,Pd),m=To(d,Jm),y=Object.keys(l).reduce(function(_,w){var A=l[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},me({},C,_[C]+A.width)):_},{left:h.left||0,right:h.right||0}),g=Object.keys(s).reduce(function(_,w){var A=s[w],C=A.orientation;return!A.mirror&&!A.hide?G(G({},_),{},me({},C,Oi(_,"".concat(C))+A.height)):_},{top:h.top||0,bottom:h.bottom||0}),b=G(G({},g),y),v=b.bottom;p&&(b.bottom+=p.props.height||Pd.defaultProps.height),m&&r&&(b=Y5e(b,i,n,r));var x=c-b.left-b.right,S=u-b.top-b.bottom;return G(G({brushBottom:v},b),{},{width:Math.max(x,0),height:Math.max(S,0)})},mHe=function(e){var r,n=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,p=function(g,b){var v=b.graphicalItems,x=b.stackGroups,S=b.offset,_=b.updateId,w=b.dataStartIndex,A=b.dataEndIndex,C=g.barSize,I=g.layout,T=g.barGap,P=g.barCategoryGap,O=g.maxBarSize,N=kV(I),j=N.numericAxisName,L=N.cateAxisName,U=hHe(v),V=U&&H5e({barSize:C,stackGroups:x}),R=[];return v.forEach(function(F,z){var ae=TS(g.data,{graphicalItems:[F],dataStartIndex:w,dataEndIndex:A}),te=F.props,be=te.dataKey,at=te.maxBarSize,rt=F.props["".concat(j,"Id")],Vt=F.props["".concat(L,"Id")],pt={},Zt=c.reduce(function(W,re){var Z,Q=b["".concat(re.axisType,"Map")],pe=F.props["".concat(re.axisType,"Id")];Q&&Q[pe]||re.axisType==="zAxis"||vq(!1);var nt=Q[pe];return G(G({},W),{},(Z={},me(Z,re.axisType,nt),me(Z,"".concat(re.axisType,"Ticks"),qs(nt)),Z))},pt),ee=Zt[L],xe=Zt["".concat(L,"Ticks")],Ee=x&&x[rt]&&x[rt].hasStack&&cWe(F,x[rt].stackGroups),q=gs(F.type).indexOf("Bar")>=0,Ze=W_(ee,xe),ke=[];if(q){var vt,$t,en=Xe(at)?O:at,Vn=(vt=($t=W_(ee,xe,!0))!==null&&$t!==void 0?$t:en)!==null&&vt!==void 0?vt:0;ke=K5e({barGap:T,barCategoryGap:P,bandSize:Vn!==Ze?Vn:Ze,sizeList:V[Vt],maxBarSize:en}),Vn!==Ze&&(ke=ke.map(function(W){return G(G({},W),{},{position:G(G({},W.position),{},{offset:W.position.offset-Vn/2})})}))}var $=F&&F.type&&F.type.getComposedData;if($){var B;R.push({props:G(G({},$(G(G({},Zt),{},{displayedData:ae,props:g,dataKey:be,item:F,bandSize:Ze,barPosition:ke,offset:S,stackedData:Ee,layout:I,dataStartIndex:w,dataEndIndex:A}))),{},(B={key:F.key||"item-".concat(z)},me(B,j,Zt[j]),me(B,L,Zt[L]),me(B,"animationId",_),B)),childIndex:Pke(F,g.children),item:F})}}),R},m=function(g,b){var v=g.props,x=g.dataStartIndex,S=g.dataEndIndex,_=g.updateId;if(!Q3({props:v}))return null;var w=v.children,A=v.layout,C=v.stackOffset,I=v.data,T=v.reverseStackOrder,P=kV(A),O=P.numericAxisName,N=P.cateAxisName,j=Ri(w,i),L=sWe(I,j,"".concat(O,"Id"),"".concat(N,"Id"),C,T),U=c.reduce(function(ae,te){var be="".concat(te.axisType,"Map");return G(G({},ae),{},me({},be,fHe(v,G(G({},te),{},{graphicalItems:j,stackGroups:te.axisType===O&&L,dataStartIndex:x,dataEndIndex:S}))))},{}),V=pHe(G(G({},U),{},{props:v,graphicalItems:j}),b==null?void 0:b.legendBBox);Object.keys(U).forEach(function(ae){U[ae]=d(v,U[ae],V,ae.replace("Map",""),n)});var R=U["".concat(N,"Map")],F=dHe(R),z=p(v,G(G({},U),{},{dataStartIndex:x,dataEndIndex:S,updateId:_,graphicalItems:j,stackGroups:L,offset:V}));return G(G({formattedGraphicalItems:z,graphicalItems:j,offset:V,stackGroups:L},F),U)};return r=function(y){Xqe(b,y);var g=Jqe(b);function b(v){var x,S,_;return Yqe(this,b),_=g.call(this,v),me(Ie(_),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),me(Ie(_),"accessibilityManager",new $qe),me(Ie(_),"handleLegendBBoxUpdate",function(w){if(w){var A=_.state,C=A.dataStartIndex,I=A.dataEndIndex,T=A.updateId;_.setState(G({legendBBox:w},m({props:_.props,dataStartIndex:C,dataEndIndex:I,updateId:T},G(G({},_.state),{},{legendBBox:w}))))}}),me(Ie(_),"handleReceiveSyncEvent",function(w,A,C){if(_.props.syncId===w){if(C===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),me(Ie(_),"handleBrushChange",function(w){var A=w.startIndex,C=w.endIndex;if(A!==_.state.dataStartIndex||C!==_.state.dataEndIndex){var I=_.state.updateId;_.setState(function(){return G({dataStartIndex:A,dataEndIndex:C},m({props:_.props,dataStartIndex:A,dataEndIndex:C,updateId:I},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:C})}}),me(Ie(_),"handleMouseEnter",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var I=_.props.onMouseEnter;Me(I)&&I(C,w)}}),me(Ie(_),"triggeredAfterMouseMove",function(w){var A=_.getMouseInfo(w),C=A?G(G({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(C),_.triggerSyncEvent(C);var I=_.props.onMouseMove;Me(I)&&I(C,w)}),me(Ie(_),"handleItemMouseEnter",function(w){_.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),me(Ie(_),"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),me(Ie(_),"handleMouseMove",function(w){w.persist(),_.throttleTriggeredAfterMouseMove(w)}),me(Ie(_),"handleMouseLeave",function(w){var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var C=_.props.onMouseLeave;Me(C)&&C(A,w)}),me(Ie(_),"handleOuterEvent",function(w){var A=Tke(w),C=Oi(_.props,"".concat(A));if(A&&Me(C)){var I,T;/.*touch.*/i.test(A)?T=_.getMouseInfo(w.changedTouches[0]):T=_.getMouseInfo(w),C((I=T)!==null&&I!==void 0?I:{},w)}}),me(Ie(_),"handleClick",function(w){var A=_.getMouseInfo(w);if(A){var C=G(G({},A),{},{isTooltipActive:!0});_.setState(C),_.triggerSyncEvent(C);var I=_.props.onClick;Me(I)&&I(C,w)}}),me(Ie(_),"handleMouseDown",function(w){var A=_.props.onMouseDown;if(Me(A)){var C=_.getMouseInfo(w);A(C,w)}}),me(Ie(_),"handleMouseUp",function(w){var A=_.props.onMouseUp;if(Me(A)){var C=_.getMouseInfo(w);A(C,w)}}),me(Ie(_),"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),me(Ie(_),"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseDown(w.changedTouches[0])}),me(Ie(_),"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&_.handleMouseUp(w.changedTouches[0])}),me(Ie(_),"triggerSyncEvent",function(w){_.props.syncId!==void 0&&aC.emit(lC,_.props.syncId,w,_.eventEmitterSymbol)}),me(Ie(_),"applySyncEvent",function(w){var A=_.props,C=A.layout,I=A.syncMethod,T=_.state.updateId,P=w.dataStartIndex,O=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)_.setState(G({dataStartIndex:P,dataEndIndex:O},m({props:_.props,dataStartIndex:P,dataEndIndex:O,updateId:T},_.state)));else if(w.activeTooltipIndex!==void 0){var N=w.chartX,j=w.chartY,L=w.activeTooltipIndex,U=_.state,V=U.offset,R=U.tooltipTicks;if(!V)return;if(typeof I=="function")L=I(R,w);else if(I==="value"){L=-1;for(var F=0;F<R.length;F++)if(R[F].value===w.activeLabel){L=F;break}}var z=G(G({},V),{},{x:V.left,y:V.top}),ae=Math.min(N,z.x+z.width),te=Math.min(j,z.y+z.height),be=R[L]&&R[L].value,at=mJ(_.state,_.props.data,L),rt=R[L]?{x:C==="horizontal"?R[L].coordinate:ae,y:C==="horizontal"?te:R[L].coordinate}:hJ;_.setState(G(G({},w),{},{activeLabel:be,activeCoordinate:rt,activePayload:at,activeTooltipIndex:L}))}else _.setState(w)}),me(Ie(_),"verticalCoordinatesGenerator",function(w,A){var C=w.xAxis,I=w.width,T=w.height,P=w.offset;return vU(JI(G(G(G({},Yp.defaultProps),C),{},{ticks:qs(C,!0),viewBox:{x:0,y:0,width:I,height:T}})),P.left,P.left+P.width,A)}),me(Ie(_),"horizontalCoordinatesGenerator",function(w,A){var C=w.yAxis,I=w.width,T=w.height,P=w.offset;return vU(JI(G(G(G({},Yp.defaultProps),C),{},{ticks:qs(C,!0),viewBox:{x:0,y:0,width:I,height:T}})),P.top,P.top+P.height,A)}),me(Ie(_),"axesTicksGenerator",function(w){return qs(w,!0)}),me(Ie(_),"renderCursor",function(w){var A,C=_.state,I=C.isTooltipActive,T=C.activeCoordinate,P=C.activePayload,O=C.offset,N=C.activeTooltipIndex,j=C.tooltipAxisBandSize,L=_.getTooltipEventType(),U=(A=w.props.active)!==null&&A!==void 0?A:I,V=_.props.layout,R=w.key||"_recharts-cursor";return k.createElement(Vqe,{key:R,activeCoordinate:T,activePayload:P,activeTooltipIndex:N,chartName:n,element:w,isActive:U,layout:V,offset:O,tooltipAxisBandSize:j,tooltipEventType:L})}),me(Ie(_),"renderPolarAxis",function(w,A,C){var I=Oi(w,"type.axisType"),T=Oi(_.state,"".concat(I,"Map")),P=T&&T[w.props["".concat(I,"Id")]];return E.cloneElement(w,G(G({},P),{},{className:I,key:w.key||"".concat(A,"-").concat(C),ticks:qs(P,!0)}))}),me(Ie(_),"renderXAxis",function(w,A,C){var I=_.state.xAxisMap,T=I[w.props.xAxisId];return _.renderAxis(T,w,A,C)}),me(Ie(_),"renderYAxis",function(w,A,C){var I=_.state.yAxisMap,T=I[w.props.yAxisId];return _.renderAxis(T,w,A,C)}),me(Ie(_),"renderGrid",function(w){var A=_.state,C=A.xAxisMap,I=A.yAxisMap,T=A.offset,P=_.props,O=P.width,N=P.height,j=Gs(C),L=Aqe(I,function(R){return ZX(R.domain,Number.isFinite)}),U=L||Gs(I),V=w.props||{};return E.cloneElement(w,{key:w.key||"grid",x:ne(V.x)?V.x:T.left,y:ne(V.y)?V.y:T.top,width:ne(V.width)?V.width:T.width,height:ne(V.height)?V.height:T.height,xAxis:j,yAxis:U,offset:T,chartWidth:O,chartHeight:N,verticalCoordinatesGenerator:V.verticalCoordinatesGenerator||_.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:V.horizontalCoordinatesGenerator||_.horizontalCoordinatesGenerator})}),me(Ie(_),"renderPolarGrid",function(w){var A=w.props,C=A.radialLines,I=A.polarAngles,T=A.polarRadius,P=_.state,O=P.radiusAxisMap,N=P.angleAxisMap,j=Gs(O),L=Gs(N),U=L.cx,V=L.cy,R=L.innerRadius,F=L.outerRadius;return E.cloneElement(w,{polarAngles:Array.isArray(I)?I:qs(L,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(T)?T:qs(j,!0).map(function(z){return z.coordinate}),cx:U,cy:V,innerRadius:R,outerRadius:F,key:w.key||"polar-grid",radialLines:C})}),me(Ie(_),"renderLegend",function(){var w=_.state.formattedGraphicalItems,A=_.props,C=A.children,I=A.width,T=A.height,P=_.props.margin||{},O=I-(P.left||0)-(P.right||0),N=BX({children:C,formattedGraphicalItems:w,legendWidth:O,legendContent:u});if(!N)return null;var j=N.item,L=CV(N,Wqe);return E.cloneElement(j,G(G({},L),{},{chartWidth:I,chartHeight:T,margin:P,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),me(Ie(_),"renderTooltip",function(){var w,A=_.props.children,C=To(A,Uu);if(!C)return null;var I=_.state,T=I.isTooltipActive,P=I.activeCoordinate,O=I.activePayload,N=I.activeLabel,j=I.offset,L=(w=C.props.active)!==null&&w!==void 0?w:T;return E.cloneElement(C,{viewBox:G(G({},j),{},{x:j.left,y:j.top}),active:L,label:N,payload:L?O:[],coordinate:P})}),me(Ie(_),"renderBrush",function(w){var A=_.props,C=A.margin,I=A.data,T=_.state,P=T.offset,O=T.dataStartIndex,N=T.dataEndIndex,j=T.updateId;return E.cloneElement(w,{key:w.key||"_recharts-brush",onChange:a0(_.handleBrushChange,w.props.onChange),data:I,x:ne(w.props.x)?w.props.x:P.left,y:ne(w.props.y)?w.props.y:P.top+P.height+P.brushBottom-(C.bottom||0),width:ne(w.props.width)?w.props.width:P.width,startIndex:O,endIndex:N,updateId:"brush-".concat(j)})}),me(Ie(_),"renderReferenceElement",function(w,A,C){if(!w)return null;var I=Ie(_),T=I.clipPathId,P=_.state,O=P.xAxisMap,N=P.yAxisMap,j=P.offset,L=w.props,U=L.xAxisId,V=L.yAxisId;return E.cloneElement(w,{key:w.key||"".concat(A,"-").concat(C),xAxis:O[U],yAxis:N[V],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:T})}),me(Ie(_),"renderActivePoints",function(w){var A=w.item,C=w.activePoint,I=w.basePoint,T=w.childIndex,P=w.isRange,O=[],N=A.props.key,j=A.item.props,L=j.activeDot,U=j.dataKey,V=G(G({index:T,dataKey:U,cx:C.x,cy:C.y,r:4,fill:r$(A.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value,key:"".concat(N,"-activePoint-").concat(T)},qe(L)),f_(L));return O.push(b.renderActiveDot(L,V)),I?O.push(b.renderActiveDot(L,G(G({},V),{},{cx:I.x,cy:I.y,key:"".concat(N,"-basePoint-").concat(T)}))):P&&O.push(null),O}),me(Ie(_),"renderGraphicChild",function(w,A,C){var I=_.filterFormatItem(w,A,C);if(!I)return null;var T=_.getTooltipEventType(),P=_.state,O=P.isTooltipActive,N=P.tooltipAxis,j=P.activeTooltipIndex,L=P.activeLabel,U=_.props.children,V=To(U,Uu),R=I.props,F=R.points,z=R.isRange,ae=R.baseLine,te=I.item.props,be=te.activeDot,at=te.hide,rt=te.activeBar,Vt=te.activeShape,pt=!!(!at&&O&&V&&(be||rt||Vt)),Zt={};T!=="axis"&&V&&V.props.trigger==="click"?Zt={onClick:a0(_.handleItemMouseEnter,w.props.onClick)}:T!=="axis"&&(Zt={onMouseLeave:a0(_.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:a0(_.handleItemMouseEnter,w.props.onMouseEnter)});var ee=E.cloneElement(w,G(G({},I.props),Zt));function xe(re){return typeof N.dataKey=="function"?N.dataKey(re.payload):null}if(pt)if(j>=0){var Ee,q;if(N.dataKey&&!N.allowDuplicatedCategory){var Ze=typeof N.dataKey=="function"?xe:"payload.".concat(N.dataKey.toString());Ee=u_(F,Ze,L),q=z&&ae&&u_(ae,Ze,L)}else Ee=F==null?void 0:F[j],q=z&&ae&&ae[j];if(Vt||rt){var ke=w.props.activeIndex!==void 0?w.props.activeIndex:j;return[E.cloneElement(w,G(G(G({},I.props),Zt),{},{activeIndex:ke})),null,null]}if(!Xe(Ee))return[ee].concat(jd(_.renderActivePoints({item:I,activePoint:Ee,basePoint:q,childIndex:j,isRange:z})))}else{var vt,$t=(vt=_.getItemByXY(_.state.activeCoordinate))!==null&&vt!==void 0?vt:{graphicalItem:ee},en=$t.graphicalItem,Vn=en.item,$=Vn===void 0?w:Vn,B=en.childIndex,W=G(G(G({},I.props),Zt),{},{activeIndex:B});return[E.cloneElement($,W),null,null]}return z?[ee,null,null]:[ee,null]}),me(Ie(_),"renderCustomized",function(w,A,C){return E.cloneElement(w,G(G({key:"recharts-customized-".concat(C)},_.props),_.state))}),me(Ie(_),"renderMap",{CartesianGrid:{handler:_.renderGrid,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:_.renderReferenceElement},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:_.renderXAxis},YAxis:{handler:_.renderYAxis},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:Wg("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=UQ(_.triggeredAfterMouseMove,(S=v.throttleDelay)!==null&&S!==void 0?S:1e3/60),_.state={},_}return Qqe(b,[{key:"componentDidMount",value:function(){var x,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(x,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=To(this.props.children,Uu);if(x&&typeof x.props.shared=="boolean"){var S=x.props.shared?"axis":"item";return l.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var S=this.container,_=S.getBoundingClientRect(),w=C4e(_),A={chartX:Math.round(x.pageX-w.left),chartY:Math.round(x.pageY-w.top)},C=_.width/S.offsetWidth||1,I=this.inRange(A.chartX,A.chartY,C);if(!I)return null;var T=this.state,P=T.xAxisMap,O=T.yAxisMap,N=this.getTooltipEventType();if(N!=="axis"&&P&&O){var j=Gs(P).scale,L=Gs(O).scale,U=j&&j.invert?j.invert(A.chartX):null,V=L&&L.invert?L.invert(A.chartY):null;return G(G({},A),{},{xValue:U,yValue:V})}var R=IV(this.state,this.props.data,this.props.layout,I);return R?G(G({},A),R):null}},{key:"inRange",value:function(x,S){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,A=x/_,C=S/_;if(w==="horizontal"||w==="vertical"){var I=this.state.offset,T=A>=I.left&&A<=I.left+I.width&&C>=I.top&&C<=I.top+I.height;return T?{x:A,y:C}:null}var P=this.state,O=P.angleAxisMap,N=P.radiusAxisMap;if(O&&N){var j=Gs(O);return TU({x:A,y:C},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,S=this.getTooltipEventType(),_=To(x,Uu),w={};_&&S==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var A=f_(this.props,this.handleOuterEvent);return G(G({},A),w)}},{key:"addListener",value:function(){aC.on(lC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aC.removeListener(lC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,S,_){for(var w=this.state.formattedGraphicalItems,A=0,C=w.length;A<C;A++){var I=w[A];if(I.item===x||I.props.key===x.key||S===gs(I.item.type)&&_===I.childIndex)return I}return null}},{key:"renderAxis",value:function(x,S,_,w){var A=this.props,C=A.width,I=A.height;return k.createElement(Yp,zu({},x,{className:ct("recharts-".concat(x.axisType," ").concat(x.axisType),x.className),key:S.key||"".concat(_,"-").concat(w),viewBox:{x:0,y:0,width:C,height:I},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var x=this.clipPathId,S=this.state.offset,_=S.left,w=S.top,A=S.height,C=S.width;return k.createElement("defs",null,k.createElement("clipPath",{id:x},k.createElement("rect",{x:_,y:w,height:A,width:C})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=AV(_,2),A=w[0],C=w[1];return G(G({},S),{},me({},A,C.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(S,_){var w=AV(_,2),A=w[0],C=w[1];return G(G({},S),{},me({},A,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var S=this.state,_=S.formattedGraphicalItems,w=S.activeItem;if(_&&_.length)for(var A=0,C=_.length;A<C;A++){var I=_[A],T=I.props,P=I.item,O=gs(P.type);if(O==="Bar"){var N=(T.data||[]).find(function(V){return x8e(x,V)});if(N)return{graphicalItem:I,payload:N}}else if(O==="RadialBar"){var j=(T.data||[]).find(function(V){return TU(x,V)});if(j)return{graphicalItem:I,payload:j}}else if(wS(I,w)||SS(I,w)||Ay(I,w)){var L=Sze({graphicalItem:I,activeTooltipItem:w,itemData:P.props.data}),U=P.props.activeIndex===void 0?L:P.props.activeIndex;return{graphicalItem:G(G({},I),{},{childIndex:U}),payload:Ay(I,w)?P.props.data[L]:I.props.data[L]}}}return null}},{key:"render",value:function(){var x=this;if(!Q3(this))return null;var S=this.props,_=S.children,w=S.className,A=S.width,C=S.height,I=S.style,T=S.compact,P=S.title,O=S.desc,N=CV(S,zqe),j=qe(N);if(T)return k.createElement(YP,zu({},j,{width:A,height:C,title:P,desc:O}),this.renderClipPath(),J3(_,this.renderMap));if(this.props.accessibilityLayer){var L,U;j.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,j.role=(U=this.props.role)!==null&&U!==void 0?U:"img",j.onKeyDown=function(R){x.accessibilityManager.keyboardEvent(R)},j.onFocus=function(){x.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return k.createElement("div",zu({className:ct("recharts-wrapper",w),style:G({position:"relative",cursor:"default",width:A,height:C},I)},V,{ref:function(F){x.container=F},role:"region"}),k.createElement(YP,zu({},j,{width:A,height:C,title:P,desc:O,style:sHe}),this.renderClipPath(),J3(_,this.renderMap)),this.renderLegend(),this.renderTooltip())}}]),b}(E.Component),me(r,"displayName",n),me(r,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),me(r,"getDerivedStateFromProps",function(y,g){var b=y.dataKey,v=y.data,x=y.children,S=y.width,_=y.height,w=y.layout,A=y.stackOffset,C=y.margin,I=g.dataStartIndex,T=g.dataEndIndex;if(g.updateId===void 0){var P=NV(y);return G(G(G({},P),{},{updateId:0},m(G(G({props:y},P),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(b!==g.prevDataKey||v!==g.prevData||S!==g.prevWidth||_!==g.prevHeight||w!==g.prevLayout||A!==g.prevStackOffset||!pf(C,g.prevMargin)){var O=NV(y),N={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},j=G(G({},IV(g,v,w)),{},{updateId:g.updateId+1}),L=G(G(G({},O),N),j);return G(G(G({},L),m(G({props:y},L),g)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:_,prevLayout:w,prevStackOffset:A,prevMargin:C,prevChildren:x})}if(!kY(x,g.prevChildren)){var U,V,R,F,z=To(x,Pd),ae=z&&(U=(V=z.props)===null||V===void 0?void 0:V.startIndex)!==null&&U!==void 0?U:I,te=z&&(R=(F=z.props)===null||F===void 0?void 0:F.endIndex)!==null&&R!==void 0?R:T,be=ae!==I||te!==T,at=!Xe(v),rt=at&&!be?g.updateId:g.updateId+1;return G(G({updateId:rt},m(G(G({props:y},g),{},{updateId:rt,dataStartIndex:ae,dataEndIndex:te}),g)),{},{prevChildren:x,dataStartIndex:ae,dataEndIndex:te})}return null}),me(r,"renderActiveDot",function(y,g){var b;return E.isValidElement(y)?b=E.cloneElement(y,g):Me(y)?b=y(g):b=k.createElement(i$,g),k.createElement(Jt,{className:"recharts-active-dot",key:g.key},b)}),r},yJ=mHe({chartName:"LineChart",GraphicalChild:On,axisComponents:[{axisType:"xAxis",AxisComp:Jg},{axisType:"yAxis",AxisComp:Zg}],formatAxisMap:H9e});function yHe({teams:t}){const e=E.useMemo(()=>{const r=t[0].matchCount,n=Array(r+1).fill(void 0).map(()=>({}));for(const i of t){n[0][i.team._id]=0;for(let o=0;o<r;o++)n[o+1][i.team._id]=i.pointHistories[o]??i.pointHistories.at(-1)}return n},[t]);return console.log(e),f.jsx(VQ,{width:"100%",height:"100%",children:f.jsxs(yJ,{data:e,children:[f.jsx(CS,{strokeDasharray:"3 3"}),f.jsx(Jg,{tick:{fill:"white"},dataKey:"name"}),f.jsx(Zg,{tick:{fill:"white"},width:80,allowDecimals:!1,tickCount:5}),t.map(r=>f.jsx(On,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:r.team._id},r.team._id)),t.map(r=>f.jsx(On,{type:"linear",stroke:r.team.color,strokeWidth:8,isAnimationActive:!1,name:r.team.name,dataKey:r.team._id},r.team._id))]})})}const lu="b6908027-9179-485a-8bce-822c42114371",Kh=(t,e,r,n,i,o)=>t.map(s=>({player:No(e[s.teamId],{...s,team:e[s.teamId]}),value:r(s.player.statistics),tieBreakValue:n(s.player.statistics)})).sort((s,a)=>s.value===a.value?(s.tieBreakValue-a.tieBreakValue)*(o==="asc"?1:-1):(s.value-a.value)*(i==="asc"?1:-1)).slice(0,6),gHe=({value:t})=>typeof t>"u"?f.jsx(f.Fragment,{}):t>0?f.jsxs("span",{className:"text-red-500",children:[f.jsx("i",{className:"bi bi-caret-down-fill"})," ",f.jsx("span",{className:"-m-2",children:t})]}):t<0?f.jsxs("span",{className:"text-green-400",children:[f.jsx("i",{className:"bi bi-caret-up-fill"})," ",f.jsx("span",{className:"-m-2",children:Math.abs(t)})]}):f.jsxs("span",{children:[f.jsx("i",{className:"bi bi-dash"})," ",f.jsx("span",{className:"-m-2",children:"0"})]}),vHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?f.jsxs("div",{className:"absolute inset-0 flex flex-col twr-team-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[f.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6 twr-team-ranking-row",children:[f.jsx("p",{className:"flex-1 text-center",children:"排名"}),f.jsx("p",{className:"flex-[5]",children:"隊伍"}),f.jsx("p",{className:"flex-1 text-center",children:"積分"}),f.jsx("p",{className:"flex-1 text-center",children:"與前名差距"}),f.jsx("p",{className:"flex-1 text-center",children:"半莊數"})]}),t.teams.map((n,i)=>f.jsxs("div",{className:"relative flex-1 flex items-center gap-6 overflow-hidden twr-team-ranking-row",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[f.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-48 opacity-10 -z-10"}),f.jsxs("p",{className:"flex-1 text-center space-x-2",children:[f.jsx("span",{children:nd(n.ranking)}),f.jsx(gHe,{value:(n.rankingHistories.at(-1)??0)-(n.rankingHistories.at(-3)??0)})]}),f.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),f.jsx("p",{className:"flex-1 text-center",children:us(n.point)}),f.jsx("p",{className:"flex-1 text-center",children:i>0?(t.teams[i-1].point-n.point).toFixed(1):"-"}),f.jsxs("p",{className:"flex-1 text-center",children:[n.matchCount,f.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id))]}):t.type==="chart"?f.jsxs("div",{className:"absolute inset-0 flex twr-chart gap-[1em] items-stretch","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-[3] twr-chart-chart",children:f.jsx(yHe,{teams:t.teams})}),f.jsx("div",{className:"flex-1 flex flex-col twr-team-ranking","data-active":e===0,children:t.teams.map((n,i)=>f.jsxs("div",{className:"relative flex-1 flex items-center justify-between overflow-hidden twr-team-ranking-row px-2",style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`},children:[f.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-5 -z-10"}),f.jsx("div",{children:f.jsx("p",{children:n.team.name})}),f.jsx("div",{children:us(n.point)})]},n._id))})]}):t.type==="players"?f.jsxs("div",{className:"absolute inset-0 flex twr-player-ranking gap-[1em] items-stretch twr-player-ranking","data-active":e===0,style:{opacity:e>=0&&e<1?1:0},children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-y-[.5em]",children:[f.jsx("h4",{className:"text-[2em] font-semibold text-center leading-[1em] twr-player-ranking-row",children:"MVP"}),f.jsx("p",{className:"text-center twr-player-ranking-row",children:"積分最高選手"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestPointPlayers.map(({player:n,value:i,tieBreakValue:o},s)=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center twr-player-ranking-row",style:{background:`linear-gradient(to right, ${n.color}C0, transparent 105%)`,animationDelay:`${s*.05}s`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-25 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em]",children:[f.jsx("div",{className:"w-[2.2em]",children:nd(s+1)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:n.playerNickname}),f.jsx("p",{className:"text-[.75em] leading-[1em]",children:n.playerName})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em] font-numeric",children:i.toFixed(1)}),f.jsxs("p",{className:"text-[.75em] leading-[1em] opacity-80",children:["(半莊數: ",o,")"]})]})]})]},n.playerId))})]}),f.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-[1em] twr-player-ranking-row",children:[f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"和了率"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPPlayers.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"平均打點"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestRonPurePointPlayers.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"銃和率"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.lowestChuckPPlayers.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(2)})})]})]},n.playerId))})]}),f.jsxs("div",{className:"space-y-[.5em]",children:[f.jsx("p",{className:"text-center",children:"最高得點"}),f.jsx("div",{className:"flex-1 flex flex-col",children:t.highestScoreMax.map(({player:n,value:i})=>f.jsxs("div",{className:"relative overflow-hidden flex-1 flex flex-col items-stretch justify-center",style:{background:`${n.color}20`},children:[f.jsx("img",{src:n.teamLogoImageUrl+"?w=320&h=320",alt:n.teamName,className:"absolute left-[3em] opacity-5 -z-10"}),f.jsxs("div",{className:"flex items-center justify-between px-[.5em] gap-x-[.5em] py-[.25em]",children:[f.jsx("div",{className:"flex-1",children:f.jsx("p",{className:"leading-[1.2em]",children:n.playerNickname})}),f.jsx("div",{className:"text-right",children:f.jsx("p",{className:"leading-[1.2em]",children:i.toFixed(0)})})]})]},n.playerId))})]})]})]}):f.jsx(f.Fragment,{}),gJ=({params:{week:t}})=>{const e=E.useMemo(()=>parseInt(t)??1,[t]),[r,n]=E.useMemo(()=>{const y=new Date("2024-01-09");y.setDate(y.getDate()+(e-1)*7);const g=`${y.getDate()}/${y.getMonth()+1}`;y.setDate(y.getDate()+2);const b=`${y.getDate()}/${y.getMonth()+1}`;return[g,b]},[e]),{data:i}=qa({queryKey:["tournament",lu],queryFn:()=>AO(lu).then(y=>({...y,teams:y.teams.sort((g,b)=>b.point-g.point)})),enabled:!!lu}),{data:o}=qa({queryKey:["tournament",lu,"players"],queryFn:()=>iye(lu),enabled:!!lu}),s=E.useMemo(()=>i?i.teams.reduce((y,{team:g})=>(y[g._id]=g,y),{}):{},[i]),[a,l]=E.useState(0),[c,u]=E.useState(0),[d,h]=E.useState(!1),p=E.useMemo(()=>{if(!i||!o)return[{type:"empty",_id:"empty",subslide:0}];const y=o.filter(g=>g.player.statistics.matchCount>0);return[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:i.teams,subslide:1},{type:"chart",_id:"chart",teams:i.teams,subslide:1},{type:"players",_id:"players",highestPointPlayers:Kh(y,s,g=>g.point,g=>g.matchCount,"desc","asc"),highestRonPPlayers:Kh(y,s,g=>g.ronCount/g.roundCount,g=>g.roundCount,"desc","desc"),highestRonPurePointPlayers:Kh(y,s,g=>g.ronPureScoreAvg,g=>g.roundCount,"desc","desc"),lowestChuckPPlayers:Kh(y,s,g=>g.chuckCount/g.roundCount,g=>g.roundCount,"asc","desc"),highestScoreMax:Kh(y,s,g=>g.scoreMax,g=>g.roundCount,"desc","desc"),subslide:1}]},[o,s,i]),m=E.useCallback(()=>{if(d)return;const y=p[a];if(!y){l(1);return}y.type==="empty"?l(g=>g+1):c>=y.subslide-1?(l(g=>g+.5),h(!0),setTimeout(()=>{l(g=>Math.ceil(g)),u(0),h(!1)},1200)):(u(g=>g+.5),h(!0),setTimeout(()=>{u(g=>Math.ceil(g)),h(!1)},1200))},[d,a,p,c]);return i?f.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:m,children:f.jsxs("div",{className:"absolute inset-0 tournament-weekly-report text-white text-[36px] flex py-[1em] px-[1em] gap-x-[1em]",children:[f.jsxs("div",{className:"twr-title flex flex-col justify-between items-center",children:[f.jsx("div",{children:f.jsx("img",{src:i.logoUrl+"?w=280&h=280&auto=format",alt:i.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),f.jsxs("p",{style:{fontSize:"3em",writingMode:"vertical-rl",textOrientation:"upright"},children:["第",f.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:t}),"週結算"]}),f.jsxs("p",{style:{fontSize:"1.2em",writingMode:"vertical-rl",textOrientation:"upright"},children:[f.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:r}),"~",f.jsx("span",{style:{writingMode:"initial",textOrientation:"initial"},children:n})]})]}),f.jsx("div",{className:"flex-1 relative",children:p.map((y,g)=>f.jsx(vHe,{slide:y,status:a-g,subslide:c},y._id))})]})}):f.jsx(f.Fragment,{})},bHe=Math.ceil((new Date().getTime()-17049888e5)/1e3/60/60/24/7).toString(),OV=()=>f.jsx(gJ,{params:{week:bHe}});function xHe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(bY,{params:r})}function _He({players:t,rounds:e}){return f.jsx(VQ,{width:"100%",height:"100%",children:f.jsxs(yJ,{data:e,children:[f.jsx(CS,{strokeDasharray:"3 3"}),f.jsx(Jg,{tick:{fill:"white"},dataKey:"name"}),f.jsx(Zg,{tick:{fill:"white"},width:120,allowDecimals:!1,tickCount:5}),f.jsx(On,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerEast"}),f.jsx(On,{type:"linear",stroke:t.playerEast.color,strokeWidth:8,isAnimationActive:!1,name:t.playerEast.name,dataKey:"playerEast"}),f.jsx(On,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerSouth"}),f.jsx(On,{type:"linear",stroke:t.playerSouth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerSouth.name,dataKey:"playerSouth"}),f.jsx(On,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerWest"}),f.jsx(On,{type:"linear",stroke:t.playerWest.color,strokeWidth:8,isAnimationActive:!1,name:t.playerWest.name,dataKey:"playerWest"}),f.jsx(On,{type:"linear",stroke:"#FFF",strokeWidth:10,isAnimationActive:!1,dataKey:"playerNorth"}),f.jsx(On,{type:"linear",stroke:t.playerNorth.color,strokeWidth:8,isAnimationActive:!1,name:t.playerNorth.name,dataKey:"playerNorth"})]})})}const wHe=({slide:t,status:e,subslide:r})=>t.type==="teams"?f.jsxs("div",{className:"absolute px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"flex-[2] grid grid-cols-4 items-center",children:["playerEast","playerSouth","playerWest","playerNorth"].map((n,i)=>f.jsxs("div",{className:Ar("relative h-full overflow-hidden",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s",filter:t.teams[n].ranking!=="1"?"grayscale(1)":"grayscale(0)"},children:[f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to bottom, transparent, ${t.teams[n].color})`,opacity:.5}}),f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),f.jsxs("div",{className:Ar("absolute inset-0",{"mi-teams-team-out":e>=0&&r>0}),children:[f.jsx("img",{src:t.teams[n].teamLogoImageUrl+"?w=800&h=800&auto=format",className:"aspect-square w-full",alt:""}),f.jsx("h3",{className:"text-[1.5em] font-semibold text-center",children:t.teams[n].teamName}),f.jsx("h3",{className:"text-[1em] h-[2em] font-semibold text-center",children:t.teams[n].teamSecondaryName}),f.jsxs("h3",{className:"text-[1.5em] font-semibold text-center flex justify-between px-[.5em]",children:[f.jsx("span",{children:nd(t.teams[n].ranking)}),f.jsx("span",{children:us(t.teams[n].point)})]})]})]},n))})]}):t.type==="players"?f.jsxs("div",{className:"absolute px-24 pb-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex-[3] flex flex-col items-stretch",children:[f.jsxs("div",{className:Ar("flex gap-x-[1em] pl-[1em] mb-[.5em] items-end",{"mi-teams-in":e===0,"mi-teams-out":e>0}),children:[f.jsxs("div",{className:"flex-[5] space-x-[1.5em] text-[1.1em]",children:[f.jsxs("span",{children:[f.jsx("span",{className:"text-[1.5em]",children:t.roundCount})," 總局數"]}),f.jsxs("span",{className:"opacity-80",children:["（"," ",f.jsx("span",{className:"text-[1.5em]",children:t.exhaustedRoundCount})," ","流局數 ）"]})]}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"分數"}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"立直次數"}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"和了次數"}),f.jsx("div",{className:"flex-1 text-right text-[.9em] font-semibold",children:"放銃次數"})]}),t.teamPlayers.map((n,i)=>f.jsxs("div",{className:Ar("relative overflow-hidden flex-1",{"mi-teams-in":e===0,"mi-teams-out":e>0}),style:{animationDelay:e===0?i*.25+"s":"0s"},children:[f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`linear-gradient(to left, transparent, ${n.color})`,opacity:.5}},n.teamName),f.jsx("div",{className:"absolute inset-0 -z-10",style:{background:`url(${n.teamLogoImageUrl+"?w=800&h=800&auto=format"})`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",opacity:.05}}),f.jsxs("div",{className:Ar("absolute inset-0 flex gap-x-[1em] items-center pl-[1em]",{"mi-teams-team-out":e>=0&&r>0}),children:[f.jsxs("div",{className:"text-left flex-[5]",children:[f.jsxs("h3",{className:"text-[1.5em] font-semibold",children:[n.playerName," (",n.playerNickname,")"]}),f.jsx("h3",{className:"text-[.8em] font-semibold",children:n.teamName})]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:Tv(n.result.score)}),f.jsx("p",{children:us(n.result.point)})]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("span",{className:"text-[1.5em]",children:Tv(n.result.riichiCount)}),"回"]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("span",{className:"text-[1.5em]",children:Tv(n.result.ronCount)}),"回"]}),f.jsxs("div",{className:"flex-1 text-right",children:[f.jsx("span",{className:"text-[1.5em]",children:Tv(n.result.chuckCount)}),"回"]})]})]},n.teamName))]})]}):t.type==="chart"?f.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex-[3] flex items-stretch gap-x-[1em]",children:[f.jsx("div",{className:Ar("flex-[3]",{"mi-chart-chart-in":e===0,"mi-chart-chart-out":e>0}),children:f.jsx(_He,{rounds:t.rounds,players:t.players})}),f.jsx("div",{className:"flex-1 flex flex-col pb-[1em]",children:[0,1,2,3].map(n=>f.jsxs("div",{className:Ar("relative overflow-hidden flex-1 pl-[.5em] flex flex-col justify-center",{"mi-chart-player-in":e===0,"mi-chart-player-out":e>0}),style:{background:`linear-gradient(to left, transparent, ${t.teamPlayers[n].color}C0)`,animationDelay:e===0?n*.25+"s":"0s"},children:[f.jsx("img",{src:t.teamPlayers[n].teamLogoImageUrl+"?w=320&h=320",alt:t.teamPlayers[n].teamId,className:"absolute left-0 opacity-10 -z-10"}),f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].playerNickname}),f.jsx("p",{className:"text-[.75em]",children:t.teamPlayers[n].teamName})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[1.5em] leading-[1em]",children:t.teamPlayers[n].result.score}),f.jsx("p",{className:"text-[.75em]",children:us(t.teamPlayers[n].result.point)})]})]})]}))})]})]}):t.type==="ranking"?f.jsxs("div",{className:"absolute py-16 px-24 inset-0 flex flex-col justify-center items-stretch",style:{opacity:e>=0&&e<1?1:0},children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:Ar("flex-[5] flex flex-col",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),children:[f.jsxs("div",{className:"flex-1 flex items-center text-[0.75em] gap-6",children:[f.jsx("p",{className:"flex-1 text-center",children:"排名"}),f.jsx("p",{className:"flex-[5]",children:"隊伍"}),f.jsx("p",{className:"flex-1 text-right",children:"積分"}),f.jsx("p",{className:"flex-1 text-right",children:"與前名差距"}),f.jsx("p",{className:"flex-1 text-right",children:"半莊數"})]}),t.teams.map((n,i)=>{var o,s,a,l;return f.jsxs("div",{className:Ar("relative flex-1 flex items-center gap-6 overflow-hidden",{"mi-ranking-ranking-in":e===0,"mi-ranking-ranking-out":e>0}),style:{background:`linear-gradient(to right, ${n.team.color}C0, transparent 105%)`,animationDelay:`${i*.05}s`,opacity:n.newResult?1:.3},children:[f.jsx("img",{src:n.team.squareLogoImage+"?w=320&h=320",alt:n.team._id,className:"absolute left-0 opacity-25 -z-10"}),f.jsxs("div",{className:"absolute left-[.5em]",children:[n.ranking>i+1&&f.jsx("span",{children:f.jsx("i",{className:"bi bi-caret-up-fill text-green-500"})}),n.ranking<i+1&&f.jsx("span",{children:f.jsx("i",{className:"bi bi-caret-down-fill text-red-500"})})]}),f.jsx("p",{className:"flex-1 text-center space-x-1",children:f.jsx("span",{children:nd(i+1)})}),f.jsxs("p",{className:"flex-[5]",children:[n.team.name," ",n.team.secondaryName]}),f.jsx("p",{className:Ar("flex-1 text-right",{"text-green-500":n.newResult&&n.newResult.point>n.point,"text-red-500":n.newResult&&n.newResult.point<n.point}),children:us(((o=n.newResult)==null?void 0:o.point)||n.point)}),f.jsx("p",{className:"flex-1 text-right",children:i>0?((((s=t.teams[i-1].newResult)==null?void 0:s.point)||t.teams[i-1].point)-(((a=n.newResult)==null?void 0:a.point)||n.point)).toFixed(1):"-"}),f.jsxs("p",{className:"flex-1 text-right",children:[((l=n.newResult)==null?void 0:l.matchCount)||n.matchCount,f.jsx("span",{className:"text-[0.75em]",children:"/60"})]})]},n._id)})]})]}):f.jsx(f.Fragment,{}),vJ=({params:{matchId:t}})=>{const{match:e,matchRounds:r}=Jo(t),{data:n}=aj(t),{data:i}=qa({queryKey:["tournament",n==null?void 0:n.tournament._id],queryFn:()=>AO(n==null?void 0:n.tournament._id).then(p=>({...p,teams:p.teams.sort((m,y)=>y.point-m.point)})),enabled:!!(n!=null&&n.tournament._id)}),o=E.useMemo(()=>{var S,_,w,A,C,I,T,P,O,N,j,L,U,V;if(!e||!r||!n||!i)return[{type:"empty",_id:"empty",subslide:0}];const p=RG(Object.values(r)),m=[{type:"empty",_id:"empty",subslide:0},{type:"teams",_id:"teams",teams:{playerEast:{...n.playerEast,point:p.result.playerEast.point,ranking:p.result.playerEast.ranking},playerSouth:{...n.playerSouth,point:p.result.playerSouth.point,ranking:p.result.playerSouth.ranking},playerWest:{...n.playerWest,point:p.result.playerWest.point,ranking:p.result.playerWest.ranking},playerNorth:{...n.playerNorth,point:p.result.playerNorth.point,ranking:p.result.playerNorth.ranking}},subslide:1}],y={playerEast:{score:((S=p.result.playerEast)==null?void 0:S.score)??25e3,point:((_=p.result.playerEast)==null?void 0:_.point)??0,ranking:((w=p.result.playerEast)==null?void 0:w.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerSouth:{score:((A=p.result.playerSouth)==null?void 0:A.score)??25e3,point:((C=p.result.playerSouth)==null?void 0:C.point)??0,ranking:((I=p.result.playerSouth)==null?void 0:I.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerWest:{score:((T=p.result.playerWest)==null?void 0:T.score)??25e3,point:((P=p.result.playerWest)==null?void 0:P.point)??0,ranking:((O=p.result.playerWest)==null?void 0:O.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]},playerNorth:{score:((N=p.result.playerNorth)==null?void 0:N.score)??25e3,point:((j=p.result.playerNorth)==null?void 0:j.point)??0,ranking:((L=p.result.playerNorth)==null?void 0:L.ranking)??"1",ronCount:0,riichiCount:0,chuckCount:0,scores:[25e3]}};for(const R of p.rounds)y.playerEast.scores.push(R.playerEast.afterScore),y.playerSouth.scores.push(R.playerSouth.afterScore),y.playerWest.scores.push(R.playerWest.afterScore),y.playerNorth.scores.push(R.playerNorth.afterScore),R.playerEast.status==="isRiichied"&&(y.playerEast.riichiCount+=1),R.playerSouth.status==="isRiichied"&&(y.playerSouth.riichiCount+=1),R.playerWest.status==="isRiichied"&&(y.playerWest.riichiCount+=1),R.playerNorth.status==="isRiichied"&&(y.playerNorth.riichiCount+=1),(R.type==="ron"||R.type==="tsumo")&&(R.playerEast.type==="win"&&(y.playerEast.ronCount+=1),R.playerSouth.type==="win"&&(y.playerSouth.ronCount+=1),R.playerWest.type==="win"&&(y.playerWest.ronCount+=1),R.playerNorth.type==="win"&&(y.playerNorth.ronCount+=1)),R.type==="ron"&&(R.playerEast.type==="lose"&&(y.playerEast.chuckCount+=1),R.playerSouth.type==="lose"&&(y.playerSouth.chuckCount+=1),R.playerWest.type==="lose"&&(y.playerWest.chuckCount+=1),R.playerNorth.type==="lose"&&(y.playerNorth.chuckCount+=1));const g=[{...n.playerEast,result:y.playerEast},{...n.playerSouth,result:y.playerSouth},{...n.playerWest,result:y.playerWest},{...n.playerNorth,result:y.playerNorth}].sort((R,F)=>F.result.score-R.result.score);m.push({type:"players",_id:"players",teamPlayers:g,roundCount:((U=p.rounds)==null?void 0:U.length)??0,exhaustedRoundCount:((V=p.rounds)==null?void 0:V.filter(R=>R.type==="exhausted").length)??0,subslide:1});const b=p.rounds.findIndex(R=>R.code.startsWith("5."));m.push({type:"chart",_id:"chart",rounds:[{name:"",playerEast:25e3,playerSouth:25e3,playerWest:25e3,playerNorth:25e3},...p.rounds.map((R,F)=>({name:F===0?"東":F===b?"南":"",playerEast:R.playerEast.afterScore,playerSouth:R.playerSouth.afterScore,playerWest:R.playerWest.afterScore,playerNorth:R.playerNorth.afterScore}))],players:{playerEast:{name:n.playerEast.playerNickname,color:n.playerEast.color},playerSouth:{name:n.playerSouth.playerNickname,color:n.playerSouth.color},playerWest:{name:n.playerWest.playerNickname,color:n.playerWest.color},playerNorth:{name:n.playerNorth.playerNickname,color:n.playerNorth.color}},teamPlayers:g,subslide:1});const v=["playerEast","playerSouth","playerWest","playerNorth"],x=[...i.teams].map(R=>{for(const F of v)if(R.team._id===n[F].teamId)return{...R,newResult:{point:R.point+p.result[F].point+p.result[F].penalty,matchCount:R.matchCount+1}};return R});return m.push({_id:"ranking",type:"ranking",teams:x.sort((R,F)=>{var z,ae;return(((z=F.newResult)==null?void 0:z.point)||F.point)-(((ae=R.newResult)==null?void 0:ae.point)||R.point)}),subslide:1}),m},[e,n,r,i]),[s,a]=E.useState(0),[l,c]=E.useState(0),[u,d]=E.useState(!1),h=E.useCallback(()=>{if(u)return;const p=o[s];if(!p){a(1);return}p.type==="empty"?a(m=>m+1):l>=p.subslide-1?(a(m=>m+.5),d(!0),setTimeout(()=>{a(m=>Math.ceil(m)),c(0),d(!1)},1200)):(c(m=>m+.5),d(!0),setTimeout(()=>{c(m=>Math.ceil(m)),d(!1)},1200))},[u,s,o,l]);return!e||!r||!n||!i?f.jsx(f.Fragment,{}):f.jsxs("div",{className:"match-introduction fixed inset-0 text-white text-[36px]",style:{background:"linear-gradient(to bottom, rgb(30, 34, 59), rgb(16, 18, 33))"},onClick:h,children:[f.jsx("div",{className:"absolute py-16 px-24 inset-0",children:f.jsxs("div",{className:"flex items-end gap-x-[0.25em] mi-title-in",children:[f.jsx("div",{children:f.jsx("img",{src:n.tournament.logoUrl+"?w=280&h=280&auto=format",alt:n.tournament.name,style:{width:"3.5em",height:"3.5em",marginTop:"0.15em"}})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-[1.25em] leading-[1em]",children:n.tournament.name}),f.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:n.nameAlt})]}),f.jsx("div",{children:f.jsx("h1",{className:"text-[2em] leading-[1.2em] font-semibold",children:"對局結果"})})]})}),o.map((p,m)=>f.jsx(wHe,{slide:p,status:s-m,subslide:l},p._id))]})};function SHe({params:{obsRoomId:t}}){const{data:e}=Zr(`obs/${t}`),r=E.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return!r||!r.matchId?f.jsx(f.Fragment,{children:"讀取中…"}):f.jsx(vJ,{params:r})}const EHe=new Vhe({defaultOptions:{queries:{retry:2,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,staleTime:1/0}}});uC.createRoot(document.getElementById("root")).render(f.jsx(k.StrictMode,{children:f.jsx(Hhe,{client:EHe,children:f.jsx(Che,{children:f.jsx(Iye,{children:f.jsxs(Ite,{children:[f.jsx(st,{path:"/",component:uye}),f.jsx(st,{path:"/create-match",component:_Te}),f.jsx(st,{path:"/match/:matchId",component:Sye}),f.jsx(st,{path:"/match/:matchId/obs",component:jG}),f.jsx(st,{path:"/match/:matchId/overlay",component:xY}),f.jsx(st,{path:"/match/:matchId/control",component:_H}),f.jsx(st,{path:"/match/:matchId/export",component:yY}),f.jsx(st,{path:"/match/:matchId/forecast",component:gY}),f.jsx(st,{path:"/match/:matchId/introduction",component:bY}),f.jsx(st,{path:"/match/:matchId/summary",component:vJ}),f.jsx(st,{path:"/match/:matchId/nameplates",component:NTe}),f.jsx(st,{path:"/match/:matchId/stat",component:mY}),f.jsx(st,{path:"/obs/:obsRoomId",component:ETe}),f.jsx(st,{path:"/obs/:obsRoomId/overlay",component:FTe}),f.jsx(st,{path:"/obs/:obsRoomId/control",component:ITe}),f.jsx(st,{path:"/obs/:obsRoomId/export",component:LTe}),f.jsx(st,{path:"/obs/:obsRoomId/forecast",component:jTe}),f.jsx(st,{path:"/obs/:obsRoomId/introduction",component:xHe}),f.jsx(st,{path:"/obs/:obsRoomId/summary",component:SHe}),f.jsx(st,{path:"/obs/:obsRoomId/weekly-summary",component:OV}),f.jsx(st,{path:"/obs/:obsRoomId/end",component:$Te}),f.jsx(st,{path:"/obs/:obsRoomId/score",component:ATe}),f.jsx(st,{path:"/obs/:obsRoomId/chart",component:TTe}),f.jsx(st,{path:"/obs/:obsRoomId/carousel",component:PTe}),f.jsx(st,{path:"/obs/:obsRoomId/stat",component:kTe}),f.jsx(st,{path:"/players",component:yTe}),f.jsx(st,{path:"/teams",component:STe}),f.jsx(st,{path:"/matches",component:CTe}),f.jsx(st,{path:"/weekly-summary/",component:OV}),f.jsx(st,{path:"/weekly-summary/:week",component:gJ})]})})})})}));Ote();export{kl as c,ot as g};
