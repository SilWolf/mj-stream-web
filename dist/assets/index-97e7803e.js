function EC(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(n,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var g0={exports:{}},nc={},v0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),bC=Symbol.for("react.portal"),AC=Symbol.for("react.fragment"),IC=Symbol.for("react.strict_mode"),PC=Symbol.for("react.profiler"),NC=Symbol.for("react.provider"),kC=Symbol.for("react.context"),TC=Symbol.for("react.forward_ref"),RC=Symbol.for("react.suspense"),jC=Symbol.for("react.memo"),OC=Symbol.for("react.lazy"),cm=Symbol.iterator;function $C(t){return t===null||typeof t!="object"?null:(t=cm&&t[cm]||t["@@iterator"],typeof t=="function"?t:null)}var _0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x0=Object.assign,S0={};function Wi(t,e,r){this.props=t,this.context=e,this.refs=S0,this.updater=r||_0}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w0(){}w0.prototype=Wi.prototype;function oh(t,e,r){this.props=t,this.context=e,this.refs=S0,this.updater=r||_0}var ih=oh.prototype=new w0;ih.constructor=oh;x0(ih,Wi.prototype);ih.isPureReactComponent=!0;var fm=Array.isArray,E0=Object.prototype.hasOwnProperty,sh={current:null},C0={key:!0,ref:!0,__self:!0,__source:!0};function b0(t,e,r){var n,o={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)E0.call(e,n)&&!C0.hasOwnProperty(n)&&(o[n]=e[n]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)o[n]===void 0&&(o[n]=a[n]);return{$$typeof:pa,type:t,key:i,ref:s,props:o,_owner:sh.current}}function DC(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ah(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function FC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var dm=/\/+/g;function Qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FC(""+t.key):e.toString(36)}function hl(t,e,r,n,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case pa:case bC:s=!0}}if(s)return s=t,o=o(s),t=n===""?"."+Qc(s,0):n,fm(o)?(r="",t!=null&&(r=t.replace(dm,"$&/")+"/"),hl(o,e,r,"",function(c){return c})):o!=null&&(ah(o)&&(o=DC(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(dm,"$&/")+"/")+t)),e.push(o)),1;if(s=0,n=n===""?".":n+":",fm(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+Qc(i,a);s+=hl(i,e,r,l,o)}else if(l=$C(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+Qc(i,a++),s+=hl(i,e,r,l,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Va(t,e,r){if(t==null)return t;var n=[],o=0;return hl(t,n,"","",function(i){return e.call(r,i,o++)}),n}function MC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},yl={transition:null},LC={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:yl,ReactCurrentOwner:sh};te.Children={map:Va,forEach:function(t,e,r){Va(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Va(t,function(){e++}),e},toArray:function(t){return Va(t,function(e){return e})||[]},only:function(t){if(!ah(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Wi;te.Fragment=AC;te.Profiler=PC;te.PureComponent=oh;te.StrictMode=IC;te.Suspense=RC;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LC;te.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=x0({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=sh.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)E0.call(e,l)&&!C0.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:pa,type:t.type,key:o,ref:i,props:n,_owner:s}};te.createContext=function(t){return t={$$typeof:kC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NC,_context:t},t.Consumer=t};te.createElement=b0;te.createFactory=function(t){var e=b0.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:TC,render:t}};te.isValidElement=ah;te.lazy=function(t){return{$$typeof:OC,_payload:{_status:-1,_result:t},_init:MC}};te.memo=function(t,e){return{$$typeof:jC,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=yl.transition;yl.transition={};try{t()}finally{yl.transition=e}};te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};te.useCallback=function(t,e){return ht.current.useCallback(t,e)};te.useContext=function(t){return ht.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};te.useEffect=function(t,e){return ht.current.useEffect(t,e)};te.useId=function(){return ht.current.useId()};te.useImperativeHandle=function(t,e,r){return ht.current.useImperativeHandle(t,e,r)};te.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ht.current.useMemo(t,e)};te.useReducer=function(t,e,r){return ht.current.useReducer(t,e,r)};te.useRef=function(t){return ht.current.useRef(t)};te.useState=function(t){return ht.current.useState(t)};te.useSyncExternalStore=function(t,e,r){return ht.current.useSyncExternalStore(t,e,r)};te.useTransition=function(){return ht.current.useTransition()};te.version="18.2.0";v0.exports=te;var S=v0.exports;const _e=m0(S),BC=EC({__proto__:null,default:_e},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=S,WC=Symbol.for("react.element"),zC=Symbol.for("react.fragment"),VC=Object.prototype.hasOwnProperty,GC=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HC={key:!0,ref:!0,__self:!0,__source:!0};function A0(t,e,r){var n,o={},i=null,s=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)VC.call(e,n)&&!HC.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:WC,type:t,key:i,ref:s,props:o,_owner:GC.current}}nc.Fragment=zC;nc.jsx=A0;nc.jsxs=A0;g0.exports=nc;var u=g0.exports,_d={},I0={exports:{}},Pt={},P0={exports:{}},N0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,G){var Q=O.length;O.push(G);e:for(;0<Q;){var de=Q-1>>>1,re=O[de];if(0<o(re,G))O[de]=G,O[Q]=re,Q=de;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var G=O[0],Q=O.pop();if(Q!==G){O[0]=Q;e:for(var de=0,re=O.length,kt=re>>>1;de<kt;){var Wt=2*(de+1)-1,Br=O[Wt],zt=Wt+1,sr=O[zt];if(0>o(Br,Q))zt<re&&0>o(sr,Br)?(O[de]=sr,O[zt]=Q,de=zt):(O[de]=Br,O[Wt]=Q,de=Wt);else if(zt<re&&0>o(sr,Q))O[de]=sr,O[zt]=Q,de=zt;else break e}}return G}function o(O,G){var Q=O.sortIndex-G.sortIndex;return Q!==0?Q:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],p=1,d=null,f=3,h=!1,m=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var G=r(c);G!==null;){if(G.callback===null)n(c);else if(G.startTime<=O)n(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=r(c)}}function E(O){if(_=!1,v(O),!m)if(r(l)!==null)m=!0,Re(w);else{var G=r(c);G!==null&&nt(E,G.startTime-O)}}function w(O,G){m=!1,_&&(_=!1,g(P),P=-1),h=!0;var Q=f;try{for(v(G),d=r(l);d!==null&&(!(d.expirationTime>G)||O&&!fe());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var re=de(d.expirationTime<=G);G=t.unstable_now(),typeof re=="function"?d.callback=re:d===r(l)&&n(l),v(G)}else n(l);d=r(l)}if(d!==null)var kt=!0;else{var Wt=r(c);Wt!==null&&nt(E,Wt.startTime-G),kt=!1}return kt}finally{d=null,f=Q,h=!1}}var C=!1,T=null,P=-1,U=5,B=-1;function fe(){return!(t.unstable_now()-B<U)}function z(){if(T!==null){var O=t.unstable_now();B=O;var G=!0;try{G=T(!0,O)}finally{G?W():(C=!1,T=null)}}else C=!1}var W;if(typeof y=="function")W=function(){y(z)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Oe=le.port2;le.port1.onmessage=z,W=function(){Oe.postMessage(null)}}else W=function(){I(z,0)};function Re(O){T=O,C||(C=!0,W())}function nt(O,G){P=I(function(){O(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Re(w))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var Q=f;f=G;try{return O()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=f;f=O;try{return G()}finally{f=Q}},t.unstable_scheduleCallback=function(O,G,Q){var de=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,O={id:p++,callback:G,priorityLevel:O,startTime:Q,expirationTime:re,sortIndex:-1},Q>de?(O.sortIndex=Q,e(c,O),r(l)===null&&O===r(c)&&(_?(g(P),P=-1):_=!0,nt(E,Q-de))):(O.sortIndex=re,e(l,O),m||h||(m=!0,Re(w))),O},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(O){var G=f;return function(){var Q=f;f=G;try{return O.apply(this,arguments)}finally{f=Q}}}})(N0);P0.exports=N0;var QC=P0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=S,It=QC;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T0=new Set,Ls={};function co(t,e){vi(t,e),vi(t+"Capture",e)}function vi(t,e){for(Ls[t]=e,t=0;t<e.length;t++)T0.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xd=Object.prototype.hasOwnProperty,YC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pm={},hm={};function KC(t){return xd.call(hm,t)?!0:xd.call(pm,t)?!1:YC.test(t)?hm[t]=!0:(pm[t]=!0,!1)}function qC(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JC(t,e,r,n){if(e===null||typeof e>"u"||qC(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,r,n,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lh,uh);tt[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lh,uh);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lh,uh);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ch(t,e,r,n){var o=tt.hasOwnProperty(e)?tt[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JC(e,r,o,n)&&(r=null),n||o===null?KC(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Fr=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ga=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),Sd=Symbol.for("react.profiler"),R0=Symbol.for("react.provider"),j0=Symbol.for("react.context"),dh=Symbol.for("react.forward_ref"),wd=Symbol.for("react.suspense"),Ed=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),O0=Symbol.for("react.offscreen"),ym=Symbol.iterator;function Zi(t){return t===null||typeof t!="object"?null:(t=ym&&t[ym]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Yc;function gs(t){if(Yc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Yc=e&&e[1]||""}return`
`+Yc+t}var Kc=!1;function qc(t,e){if(!t||Kc)return"";Kc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),i=n.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Kc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?gs(t):""}function XC(t){switch(t.tag){case 5:return gs(t.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return t=qc(t.type,!1),t;case 11:return t=qc(t.type.render,!1),t;case 1:return t=qc(t.type,!0),t;default:return""}}function Cd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Fo:return"Portal";case Sd:return"Profiler";case fh:return"StrictMode";case wd:return"Suspense";case Ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j0:return(t.displayName||"Context")+".Consumer";case R0:return(t._context.displayName||"Context")+".Provider";case dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Cd(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Cd(t(e))}catch{}}return null}function ZC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cd(e);case 8:return e===fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eb(t){var e=$0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ha(t){t._valueTracker||(t._valueTracker=eb(t))}function D0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=$0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bd(t,e){var r=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function mm(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=mn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function F0(t,e){e=e.checked,e!=null&&ch(t,"checked",e,!1)}function Ad(t,e){F0(t,e);var r=mn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,r):e.hasOwnProperty("defaultValue")&&Id(t,e.type,mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gm(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Id(t,e,r){(e!=="number"||Ml(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var vs=Array.isArray;function Zo(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+mn(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Pd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vm(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(N(92));if(vs(r)){if(1<r.length)throw Error(N(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:mn(r)}}function M0(t,e){var r=mn(e.value),n=mn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function _m(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function L0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?L0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qa,B0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qa=Qa||document.createElement("div"),Qa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ws={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(ws).forEach(function(t){tb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ws[e]=ws[t]})});function U0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ws.hasOwnProperty(t)&&ws[t]?(""+e).trim():e+"px"}function W0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=U0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var rb=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kd(t,e){if(e){if(rb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Td(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rd=null;function hh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jd=null,ei=null,ti=null;function xm(t){if(t=ma(t)){if(typeof jd!="function")throw Error(N(280));var e=t.stateNode;e&&(e=lc(e),jd(t.stateNode,t.type,e))}}function z0(t){ei?ti?ti.push(t):ti=[t]:ei=t}function V0(){if(ei){var t=ei,e=ti;if(ti=ei=null,xm(t),e)for(t=0;t<e.length;t++)xm(e[t])}}function G0(t,e){return t(e)}function H0(){}var Jc=!1;function Q0(t,e,r){if(Jc)return t(e,r);Jc=!0;try{return G0(t,e,r)}finally{Jc=!1,(ei!==null||ti!==null)&&(H0(),V0())}}function Us(t,e){var r=t.stateNode;if(r===null)return null;var n=lc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(N(231,e,typeof r));return r}var Od=!1;if(kr)try{var es={};Object.defineProperty(es,"passive",{get:function(){Od=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{Od=!1}function nb(t,e,r,n,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(p){this.onError(p)}}var Es=!1,Ll=null,Bl=!1,$d=null,ob={onError:function(t){Es=!0,Ll=t}};function ib(t,e,r,n,o,i,s,a,l){Es=!1,Ll=null,nb.apply(ob,arguments)}function sb(t,e,r,n,o,i,s,a,l){if(ib.apply(this,arguments),Es){if(Es){var c=Ll;Es=!1,Ll=null}else throw Error(N(198));Bl||(Bl=!0,$d=c)}}function fo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Y0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sm(t){if(fo(t)!==t)throw Error(N(188))}function ab(t){var e=t.alternate;if(!e){if(e=fo(t),e===null)throw Error(N(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Sm(o),t;if(i===n)return Sm(o),e;i=i.sibling}throw Error(N(188))}if(r.return!==n.return)r=o,n=i;else{for(var s=!1,a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s)throw Error(N(189))}}if(r.alternate!==n)throw Error(N(190))}if(r.tag!==3)throw Error(N(188));return r.stateNode.current===r?t:e}function K0(t){return t=ab(t),t!==null?q0(t):null}function q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q0(t);if(e!==null)return e;t=t.sibling}return null}var J0=It.unstable_scheduleCallback,wm=It.unstable_cancelCallback,lb=It.unstable_shouldYield,ub=It.unstable_requestPaint,je=It.unstable_now,cb=It.unstable_getCurrentPriorityLevel,yh=It.unstable_ImmediatePriority,X0=It.unstable_UserBlockingPriority,Ul=It.unstable_NormalPriority,fb=It.unstable_LowPriority,Z0=It.unstable_IdlePriority,oc=null,hr=null;function db(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(oc,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:yb,pb=Math.log,hb=Math.LN2;function yb(t){return t>>>=0,t===0?32:31-(pb(t)/hb|0)|0}var Ya=64,Ka=4194304;function _s(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,i=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~o;a!==0?n=_s(a):(i&=s,i!==0&&(n=_s(i)))}else s=r&~o,s!==0?n=_s(s):i!==0&&(n=_s(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&o)&&(o=n&-n,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Zt(e),o=1<<r,n|=t[r],e&=~o;return n}function mb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gb(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Zt(i),a=1<<s,l=o[s];l===-1?(!(a&r)||a&n)&&(o[s]=mb(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ex(){var t=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),t}function Xc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ha(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=r}function vb(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Zt(r),i=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~i}}function mh(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Zt(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var ue=0;function tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rx,gh,nx,ox,ix,Fd=!1,qa=[],rn=null,nn=null,on=null,Ws=new Map,zs=new Map,Yr=[],_b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Em(t,e){switch(t){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Ws.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function ts(t,e,r,n,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},e!==null&&(e=ma(e),e!==null&&gh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function xb(t,e,r,n,o){switch(e){case"focusin":return rn=ts(rn,t,e,r,n,o),!0;case"dragenter":return nn=ts(nn,t,e,r,n,o),!0;case"mouseover":return on=ts(on,t,e,r,n,o),!0;case"pointerover":var i=o.pointerId;return Ws.set(i,ts(Ws.get(i)||null,t,e,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,zs.set(i,ts(zs.get(i)||null,t,e,r,n,o)),!0}return!1}function sx(t){var e=jn(t.target);if(e!==null){var r=fo(e);if(r!==null){if(e=r.tag,e===13){if(e=Y0(r),e!==null){t.blockedOn=e,ix(t.priority,function(){nx(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Rd=n,r.target.dispatchEvent(n),Rd=null}else return e=ma(r),e!==null&&gh(e),t.blockedOn=r,!1;e.shift()}return!0}function Cm(t,e,r){ml(t)&&r.delete(e)}function Sb(){Fd=!1,rn!==null&&ml(rn)&&(rn=null),nn!==null&&ml(nn)&&(nn=null),on!==null&&ml(on)&&(on=null),Ws.forEach(Cm),zs.forEach(Cm)}function rs(t,e){t.blockedOn===e&&(t.blockedOn=null,Fd||(Fd=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,Sb)))}function Vs(t){function e(o){return rs(o,t)}if(0<qa.length){rs(qa[0],t);for(var r=1;r<qa.length;r++){var n=qa[r];n.blockedOn===t&&(n.blockedOn=null)}}for(rn!==null&&rs(rn,t),nn!==null&&rs(nn,t),on!==null&&rs(on,t),Ws.forEach(e),zs.forEach(e),r=0;r<Yr.length;r++)n=Yr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Yr.length&&(r=Yr[0],r.blockedOn===null);)sx(r),r.blockedOn===null&&Yr.shift()}var ri=Fr.ReactCurrentBatchConfig,zl=!0;function wb(t,e,r,n){var o=ue,i=ri.transition;ri.transition=null;try{ue=1,vh(t,e,r,n)}finally{ue=o,ri.transition=i}}function Eb(t,e,r,n){var o=ue,i=ri.transition;ri.transition=null;try{ue=4,vh(t,e,r,n)}finally{ue=o,ri.transition=i}}function vh(t,e,r,n){if(zl){var o=Md(t,e,r,n);if(o===null)uf(t,e,n,Vl,r),Em(t,n);else if(xb(o,t,e,r,n))n.stopPropagation();else if(Em(t,n),e&4&&-1<_b.indexOf(t)){for(;o!==null;){var i=ma(o);if(i!==null&&rx(i),i=Md(t,e,r,n),i===null&&uf(t,e,n,Vl,r),i===o)break;o=i}o!==null&&n.stopPropagation()}else uf(t,e,n,null,r)}}var Vl=null;function Md(t,e,r,n){if(Vl=null,t=hh(n),t=jn(t),t!==null)if(e=fo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Y0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vl=t,null}function ax(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cb()){case yh:return 1;case X0:return 4;case Ul:case fb:return 16;case Z0:return 536870912;default:return 16}default:return 16}}var qr=null,_h=null,gl=null;function lx(){if(gl)return gl;var t,e=_h,r=e.length,n,o="value"in qr?qr.value:qr.textContent,i=o.length;for(t=0;t<r&&e[t]===o[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===o[i-n];n++);return gl=o.slice(t,1<n?1-n:void 0)}function vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ja(){return!0}function bm(){return!1}function Nt(t){function e(r,n,o,i,s){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ja:bm,this.isPropagationStopped=bm,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),e}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=Nt(zi),ya=Pe({},zi,{view:0,detail:0}),Cb=Nt(ya),Zc,ef,ns,ic=Pe({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(Zc=t.screenX-ns.screenX,ef=t.screenY-ns.screenY):ef=Zc=0,ns=t),Zc)},movementY:function(t){return"movementY"in t?t.movementY:ef}}),Am=Nt(ic),bb=Pe({},ic,{dataTransfer:0}),Ab=Nt(bb),Ib=Pe({},ya,{relatedTarget:0}),tf=Nt(Ib),Pb=Pe({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Nb=Nt(Pb),kb=Pe({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tb=Nt(kb),Rb=Pe({},zi,{data:0}),Im=Nt(Rb),jb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ob={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Db(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$b[t])?!!e[t]:!1}function Sh(){return Db}var Fb=Pe({},ya,{key:function(t){if(t.key){var e=jb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ob[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mb=Nt(Fb),Lb=Pe({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pm=Nt(Lb),Bb=Pe({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),Ub=Nt(Bb),Wb=Pe({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zb=Nt(Wb),Vb=Pe({},ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gb=Nt(Vb),Hb=[9,13,27,32],wh=kr&&"CompositionEvent"in window,Cs=null;kr&&"documentMode"in document&&(Cs=document.documentMode);var Qb=kr&&"TextEvent"in window&&!Cs,ux=kr&&(!wh||Cs&&8<Cs&&11>=Cs),Nm=String.fromCharCode(32),km=!1;function cx(t,e){switch(t){case"keyup":return Hb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function Yb(t,e){switch(t){case"compositionend":return fx(e);case"keypress":return e.which!==32?null:(km=!0,Nm);case"textInput":return t=e.data,t===Nm&&km?null:t;default:return null}}function Kb(t,e){if(Lo)return t==="compositionend"||!wh&&cx(t,e)?(t=lx(),gl=_h=qr=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ux&&e.locale!=="ko"?null:e.data;default:return null}}var qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qb[t.type]:e==="textarea"}function dx(t,e,r,n){z0(n),e=Gl(e,"onChange"),0<e.length&&(r=new xh("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var bs=null,Gs=null;function Jb(t){Ex(t,0)}function sc(t){var e=Wo(t);if(D0(e))return t}function Xb(t,e){if(t==="change")return e}var px=!1;if(kr){var rf;if(kr){var nf="oninput"in document;if(!nf){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),nf=typeof Rm.oninput=="function"}rf=nf}else rf=!1;px=rf&&(!document.documentMode||9<document.documentMode)}function jm(){bs&&(bs.detachEvent("onpropertychange",hx),Gs=bs=null)}function hx(t){if(t.propertyName==="value"&&sc(Gs)){var e=[];dx(e,Gs,t,hh(t)),Q0(Jb,e)}}function Zb(t,e,r){t==="focusin"?(jm(),bs=e,Gs=r,bs.attachEvent("onpropertychange",hx)):t==="focusout"&&jm()}function eA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(Gs)}function tA(t,e){if(t==="click")return sc(e)}function rA(t,e){if(t==="input"||t==="change")return sc(e)}function nA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:nA;function Hs(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!xd.call(e,o)||!or(t[o],e[o]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $m(t,e){var r=Om(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Om(r)}}function yx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mx(){for(var t=window,e=Ml();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ml(t.document)}return e}function Eh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oA(t){var e=mx(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&yx(r.ownerDocument.documentElement,r)){if(n!==null&&Eh(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=n.end===void 0?i:Math.min(n.end,o),!t.extend&&i>n&&(o=n,n=i,i=o),o=$m(r,i);var s=$m(r,n);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iA=kr&&"documentMode"in document&&11>=document.documentMode,Bo=null,Ld=null,As=null,Bd=!1;function Dm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bd||Bo==null||Bo!==Ml(n)||(n=Bo,"selectionStart"in n&&Eh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),As&&Hs(As,n)||(As=n,n=Gl(Ld,"onSelect"),0<n.length&&(e=new xh("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Bo)))}function Xa(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Uo={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionend:Xa("Transition","TransitionEnd")},of={},gx={};kr&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function ac(t){if(of[t])return of[t];if(!Uo[t])return t;var e=Uo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in gx)return of[t]=e[r];return t}var vx=ac("animationend"),_x=ac("animationiteration"),xx=ac("animationstart"),Sx=ac("transitionend"),wx=new Map,Fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(t,e){wx.set(t,e),co(e,[t])}for(var sf=0;sf<Fm.length;sf++){var af=Fm[sf],sA=af.toLowerCase(),aA=af[0].toUpperCase()+af.slice(1);wn(sA,"on"+aA)}wn(vx,"onAnimationEnd");wn(_x,"onAnimationIteration");wn(xx,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(Sx,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lA=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function Mm(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,sb(n,e,void 0,t),t.currentTarget=null}function Ex(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Mm(o,a,c),i=l}else for(s=0;s<n.length;s++){if(a=n[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Mm(o,a,c),i=l}}}if(Bl)throw t=$d,Bl=!1,$d=null,t}function Se(t,e){var r=e[Gd];r===void 0&&(r=e[Gd]=new Set);var n=t+"__bubble";r.has(n)||(Cx(e,t,2,!1),r.add(n))}function lf(t,e,r){var n=0;e&&(n|=4),Cx(r,t,n,e)}var Za="_reactListening"+Math.random().toString(36).slice(2);function Qs(t){if(!t[Za]){t[Za]=!0,T0.forEach(function(r){r!=="selectionchange"&&(lA.has(r)||lf(r,!1,t),lf(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Za]||(e[Za]=!0,lf("selectionchange",!1,e))}}function Cx(t,e,r,n){switch(ax(e)){case 1:var o=wb;break;case 4:o=Eb;break;default:o=vh}r=o.bind(null,e,r,t),o=void 0,!Od||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function uf(t,e,r,n,o){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=jn(a),s===null)return;if(l=s.tag,l===5||l===6){n=i=s;continue e}a=a.parentNode}}n=n.return}Q0(function(){var c=i,p=hh(r),d=[];e:{var f=wx.get(t);if(f!==void 0){var h=xh,m=t;switch(t){case"keypress":if(vl(r)===0)break e;case"keydown":case"keyup":h=Mb;break;case"focusin":m="focus",h=tf;break;case"focusout":m="blur",h=tf;break;case"beforeblur":case"afterblur":h=tf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Ub;break;case vx:case _x:case xx:h=Nb;break;case Sx:h=zb;break;case"scroll":h=Cb;break;case"wheel":h=Gb;break;case"copy":case"cut":case"paste":h=Tb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Pm}var _=(e&4)!==0,I=!_&&t==="scroll",g=_?f!==null?f+"Capture":null:f;_=[];for(var y=c,v;y!==null;){v=y;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,g!==null&&(E=Us(y,g),E!=null&&_.push(Ys(y,E,v)))),I)break;y=y.return}0<_.length&&(f=new h(f,m,null,r,p),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&r!==Rd&&(m=r.relatedTarget||r.fromElement)&&(jn(m)||m[Tr]))break e;if((h||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=c,m=m?jn(m):null,m!==null&&(I=fo(m),m!==I||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(_=Am,E="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=Pm,E="onPointerLeave",g="onPointerEnter",y="pointer"),I=h==null?f:Wo(h),v=m==null?f:Wo(m),f=new _(E,y+"leave",h,r,p),f.target=I,f.relatedTarget=v,E=null,jn(p)===c&&(_=new _(g,y+"enter",m,r,p),_.target=v,_.relatedTarget=I,E=_),I=E,h&&m)t:{for(_=h,g=m,y=0,v=_;v;v=go(v))y++;for(v=0,E=g;E;E=go(E))v++;for(;0<y-v;)_=go(_),y--;for(;0<v-y;)g=go(g),v--;for(;y--;){if(_===g||g!==null&&_===g.alternate)break t;_=go(_),g=go(g)}_=null}else _=null;h!==null&&Lm(d,f,h,_,!1),m!==null&&I!==null&&Lm(d,I,m,_,!0)}}e:{if(f=c?Wo(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=Xb;else if(Tm(f))if(px)w=rA;else{w=eA;var C=Zb}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=tA);if(w&&(w=w(t,c))){dx(d,w,r,p);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Id(f,"number",f.value)}switch(C=c?Wo(c):window,t){case"focusin":(Tm(C)||C.contentEditable==="true")&&(Bo=C,Ld=c,As=null);break;case"focusout":As=Ld=Bo=null;break;case"mousedown":Bd=!0;break;case"contextmenu":case"mouseup":case"dragend":Bd=!1,Dm(d,r,p);break;case"selectionchange":if(iA)break;case"keydown":case"keyup":Dm(d,r,p)}var T;if(wh)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Lo?cx(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(ux&&r.locale!=="ko"&&(Lo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Lo&&(T=lx()):(qr=p,_h="value"in qr?qr.value:qr.textContent,Lo=!0)),C=Gl(c,P),0<C.length&&(P=new Im(P,t,null,r,p),d.push({event:P,listeners:C}),T?P.data=T:(T=fx(r),T!==null&&(P.data=T)))),(T=Qb?Yb(t,r):Kb(t,r))&&(c=Gl(c,"onBeforeInput"),0<c.length&&(p=new Im("onBeforeInput","beforeinput",null,r,p),d.push({event:p,listeners:c}),p.data=T))}Ex(d,e)})}function Ys(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gl(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Us(t,r),i!=null&&n.unshift(Ys(t,i,o)),i=Us(t,e),i!=null&&n.push(Ys(t,i,o))),t=t.return}return n}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lm(t,e,r,n,o){for(var i=e._reactName,s=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,o?(l=Us(r,i),l!=null&&s.unshift(Ys(r,l,a))):o||(l=Us(r,i),l!=null&&s.push(Ys(r,l,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var uA=/\r\n?/g,cA=/\u0000|\uFFFD/g;function Bm(t){return(typeof t=="string"?t:""+t).replace(uA,`
`).replace(cA,"")}function el(t,e,r){if(e=Bm(e),Bm(t)!==e&&r)throw Error(N(425))}function Hl(){}var Ud=null,Wd=null;function zd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vd=typeof setTimeout=="function"?setTimeout:void 0,fA=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,dA=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(t){return Um.resolve(null).then(t).catch(pA)}:Vd;function pA(t){setTimeout(function(){throw t})}function cf(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),Vs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Vs(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Vi=Math.random().toString(36).slice(2),cr="__reactFiber$"+Vi,Ks="__reactProps$"+Vi,Tr="__reactContainer$"+Vi,Gd="__reactEvents$"+Vi,hA="__reactListeners$"+Vi,yA="__reactHandles$"+Vi;function jn(t){var e=t[cr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Tr]||r[cr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Wm(t);t!==null;){if(r=t[cr])return r;t=Wm(t)}return e}t=r,r=t.parentNode}return null}function ma(t){return t=t[cr]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function lc(t){return t[Ks]||null}var Hd=[],zo=-1;function En(t){return{current:t}}function we(t){0>zo||(t.current=Hd[zo],Hd[zo]=null,zo--)}function xe(t,e){zo++,Hd[zo]=t.current,t.current=e}var gn={},at=En(gn),xt=En(!1),eo=gn;function _i(t,e){var r=t.type.contextTypes;if(!r)return gn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function St(t){return t=t.childContextTypes,t!=null}function Ql(){we(xt),we(at)}function zm(t,e,r){if(at.current!==gn)throw Error(N(168));xe(at,e),xe(xt,r)}function bx(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(N(108,ZC(t)||"Unknown",o));return Pe({},r,n)}function Yl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gn,eo=at.current,xe(at,t),xe(xt,xt.current),!0}function Vm(t,e,r){var n=t.stateNode;if(!n)throw Error(N(169));r?(t=bx(t,e,eo),n.__reactInternalMemoizedMergedChildContext=t,we(xt),we(at),xe(at,t)):we(xt),xe(xt,r)}var wr=null,uc=!1,ff=!1;function Ax(t){wr===null?wr=[t]:wr.push(t)}function mA(t){uc=!0,Ax(t)}function Cn(){if(!ff&&wr!==null){ff=!0;var t=0,e=ue;try{var r=wr;for(ue=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}wr=null,uc=!1}catch(o){throw wr!==null&&(wr=wr.slice(t+1)),J0(yh,Cn),o}finally{ue=e,ff=!1}}return null}var Vo=[],Go=0,Kl=null,ql=0,Ot=[],$t=0,to=null,Er=1,Cr="";function Pn(t,e){Vo[Go++]=ql,Vo[Go++]=Kl,Kl=t,ql=e}function Ix(t,e,r){Ot[$t++]=Er,Ot[$t++]=Cr,Ot[$t++]=to,to=t;var n=Er;t=Cr;var o=32-Zt(n)-1;n&=~(1<<o),r+=1;var i=32-Zt(e)+o;if(30<i){var s=o-o%5;i=(n&(1<<s)-1).toString(32),n>>=s,o-=s,Er=1<<32-Zt(e)+o|r<<o|n,Cr=i+t}else Er=1<<i|r<<o|n,Cr=t}function Ch(t){t.return!==null&&(Pn(t,1),Ix(t,1,0))}function bh(t){for(;t===Kl;)Kl=Vo[--Go],Vo[Go]=null,ql=Vo[--Go],Vo[Go]=null;for(;t===to;)to=Ot[--$t],Ot[$t]=null,Cr=Ot[--$t],Ot[$t]=null,Er=Ot[--$t],Ot[$t]=null}var At=null,bt=null,Ce=!1,Kt=null;function Px(t,e){var r=Dt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Gm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,bt=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=to!==null?{id:Er,overflow:Cr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Dt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,At=t,bt=null,!0):!1;default:return!1}}function Qd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yd(t){if(Ce){var e=bt;if(e){var r=e;if(!Gm(t,e)){if(Qd(t))throw Error(N(418));e=sn(r.nextSibling);var n=At;e&&Gm(t,e)?Px(n,r):(t.flags=t.flags&-4097|2,Ce=!1,At=t)}}else{if(Qd(t))throw Error(N(418));t.flags=t.flags&-4097|2,Ce=!1,At=t}}}function Hm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function tl(t){if(t!==At)return!1;if(!Ce)return Hm(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zd(t.type,t.memoizedProps)),e&&(e=bt)){if(Qd(t))throw Nx(),Error(N(418));for(;e;)Px(t,e),e=sn(e.nextSibling)}if(Hm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){bt=sn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}bt=null}}else bt=At?sn(t.stateNode.nextSibling):null;return!0}function Nx(){for(var t=bt;t;)t=sn(t.nextSibling)}function xi(){bt=At=null,Ce=!1}function Ah(t){Kt===null?Kt=[t]:Kt.push(t)}var gA=Fr.ReactCurrentBatchConfig;function Ht(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Jl=En(null),Xl=null,Ho=null,Ih=null;function Ph(){Ih=Ho=Xl=null}function Nh(t){var e=Jl.current;we(Jl),t._currentValue=e}function Kd(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ni(t,e){Xl=t,Ih=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Ih!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(Xl===null)throw Error(N(308));Ho=t,Xl.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var On=null;function kh(t){On===null?On=[t]:On.push(t)}function kx(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,kh(e)):(r.next=o.next,o.next=r),e.interleaved=r,Rr(t,n)}function Rr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zr=!1;function Th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function an(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,se&2){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,Rr(t,r)}return o=n.interleaved,o===null?(e.next=e,kh(n)):(e.next=o.next,o.next=e),n.interleaved=e,Rr(t,r)}function _l(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,mh(t,r)}}function Qm(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?o=i=e:i=i.next=e}else o=i=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Zl(t,e,r,n){var o=t.updateQueue;zr=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?i=c:s.next=c,s=l;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==s&&(a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,p=c=l=null,a=i;do{var f=a.lane,h=a.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,_=a;switch(f=e,h=r,_.tag){case 1:if(m=_.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=_.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=Pe({},d,f);break e;case 2:zr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(c=p=h,l=d):p=p.next=h,s|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(1);if(p===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=p,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);no|=s,t.lanes=s,t.memoizedState=d}}function Ym(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(N(191,o));o.call(n)}}}var Rx=new k0.Component().refs;function qd(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Pe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cc={isMounted:function(t){return(t=t._reactInternals)?fo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=dt(),o=un(t),i=Ir(n,o);i.payload=e,r!=null&&(i.callback=r),e=an(t,i,o),e!==null&&(er(e,t,o,n),_l(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=dt(),o=un(t),i=Ir(n,o);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=an(t,i,o),e!==null&&(er(e,t,o,n),_l(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=dt(),n=un(t),o=Ir(r,n);o.tag=2,e!=null&&(o.callback=e),e=an(t,o,n),e!==null&&(er(e,t,n,r),_l(e,t,n))}};function Km(t,e,r,n,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!Hs(r,n)||!Hs(o,i):!0}function jx(t,e,r){var n=!1,o=gn,i=e.contextType;return typeof i=="object"&&i!==null?i=Lt(i):(o=St(e)?eo:at.current,n=e.contextTypes,i=(n=n!=null)?_i(t,o):gn),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function qm(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cc.enqueueReplaceState(e,e.state,null)}function Jd(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs=Rx,Th(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Lt(i):(i=St(e)?eo:at.current,o.context=_i(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qd(t,e,i,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&cc.enqueueReplaceState(o,o.state,null),Zl(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function os(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(N(309));var n=r.stateNode}if(!n)throw Error(N(147,t));var o=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;a===Rx&&(a=o.refs={}),s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(N(284));if(!r._owner)throw Error(N(290,t))}return t}function rl(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jm(t){var e=t._init;return e(t._payload)}function Ox(t){function e(g,y){if(t){var v=g.deletions;v===null?(g.deletions=[y],g.flags|=16):v.push(y)}}function r(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function o(g,y){return g=cn(g,y),g.index=0,g.sibling=null,g}function i(g,y,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<y?(g.flags|=2,y):v):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,v,E){return y===null||y.tag!==6?(y=vf(v,g.mode,E),y.return=g,y):(y=o(y,v),y.return=g,y)}function l(g,y,v,E){var w=v.type;return w===Mo?p(g,y,v.props.children,E,v.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Wr&&Jm(w)===y.type)?(E=o(y,v.props),E.ref=os(g,y,v),E.return=g,E):(E=bl(v.type,v.key,v.props,null,g.mode,E),E.ref=os(g,y,v),E.return=g,E)}function c(g,y,v,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=_f(v,g.mode,E),y.return=g,y):(y=o(y,v.children||[]),y.return=g,y)}function p(g,y,v,E,w){return y===null||y.tag!==7?(y=Bn(v,g.mode,E,w),y.return=g,y):(y=o(y,v),y.return=g,y)}function d(g,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vf(""+y,g.mode,v),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ga:return v=bl(y.type,y.key,y.props,null,g.mode,v),v.ref=os(g,null,y),v.return=g,v;case Fo:return y=_f(y,g.mode,v),y.return=g,y;case Wr:var E=y._init;return d(g,E(y._payload),v)}if(vs(y)||Zi(y))return y=Bn(y,g.mode,v,null),y.return=g,y;rl(g,y)}return null}function f(g,y,v,E){var w=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(g,y,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ga:return v.key===w?l(g,y,v,E):null;case Fo:return v.key===w?c(g,y,v,E):null;case Wr:return w=v._init,f(g,y,w(v._payload),E)}if(vs(v)||Zi(v))return w!==null?null:p(g,y,v,E,null);rl(g,v)}return null}function h(g,y,v,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(v)||null,a(y,g,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ga:return g=g.get(E.key===null?v:E.key)||null,l(y,g,E,w);case Fo:return g=g.get(E.key===null?v:E.key)||null,c(y,g,E,w);case Wr:var C=E._init;return h(g,y,v,C(E._payload),w)}if(vs(E)||Zi(E))return g=g.get(v)||null,p(y,g,E,w,null);rl(y,E)}return null}function m(g,y,v,E){for(var w=null,C=null,T=y,P=y=0,U=null;T!==null&&P<v.length;P++){T.index>P?(U=T,T=null):U=T.sibling;var B=f(g,T,v[P],E);if(B===null){T===null&&(T=U);break}t&&T&&B.alternate===null&&e(g,T),y=i(B,y,P),C===null?w=B:C.sibling=B,C=B,T=U}if(P===v.length)return r(g,T),Ce&&Pn(g,P),w;if(T===null){for(;P<v.length;P++)T=d(g,v[P],E),T!==null&&(y=i(T,y,P),C===null?w=T:C.sibling=T,C=T);return Ce&&Pn(g,P),w}for(T=n(g,T);P<v.length;P++)U=h(T,g,P,v[P],E),U!==null&&(t&&U.alternate!==null&&T.delete(U.key===null?P:U.key),y=i(U,y,P),C===null?w=U:C.sibling=U,C=U);return t&&T.forEach(function(fe){return e(g,fe)}),Ce&&Pn(g,P),w}function _(g,y,v,E){var w=Zi(v);if(typeof w!="function")throw Error(N(150));if(v=w.call(v),v==null)throw Error(N(151));for(var C=w=null,T=y,P=y=0,U=null,B=v.next();T!==null&&!B.done;P++,B=v.next()){T.index>P?(U=T,T=null):U=T.sibling;var fe=f(g,T,B.value,E);if(fe===null){T===null&&(T=U);break}t&&T&&fe.alternate===null&&e(g,T),y=i(fe,y,P),C===null?w=fe:C.sibling=fe,C=fe,T=U}if(B.done)return r(g,T),Ce&&Pn(g,P),w;if(T===null){for(;!B.done;P++,B=v.next())B=d(g,B.value,E),B!==null&&(y=i(B,y,P),C===null?w=B:C.sibling=B,C=B);return Ce&&Pn(g,P),w}for(T=n(g,T);!B.done;P++,B=v.next())B=h(T,g,P,B.value,E),B!==null&&(t&&B.alternate!==null&&T.delete(B.key===null?P:B.key),y=i(B,y,P),C===null?w=B:C.sibling=B,C=B);return t&&T.forEach(function(z){return e(g,z)}),Ce&&Pn(g,P),w}function I(g,y,v,E){if(typeof v=="object"&&v!==null&&v.type===Mo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ga:e:{for(var w=v.key,C=y;C!==null;){if(C.key===w){if(w=v.type,w===Mo){if(C.tag===7){r(g,C.sibling),y=o(C,v.props.children),y.return=g,g=y;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Wr&&Jm(w)===C.type){r(g,C.sibling),y=o(C,v.props),y.ref=os(g,C,v),y.return=g,g=y;break e}r(g,C);break}else e(g,C);C=C.sibling}v.type===Mo?(y=Bn(v.props.children,g.mode,E,v.key),y.return=g,g=y):(E=bl(v.type,v.key,v.props,null,g.mode,E),E.ref=os(g,y,v),E.return=g,g=E)}return s(g);case Fo:e:{for(C=v.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(g,y.sibling),y=o(y,v.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else e(g,y);y=y.sibling}y=_f(v,g.mode,E),y.return=g,g=y}return s(g);case Wr:return C=v._init,I(g,y,C(v._payload),E)}if(vs(v))return m(g,y,v,E);if(Zi(v))return _(g,y,v,E);rl(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(g,y.sibling),y=o(y,v),y.return=g,g=y):(r(g,y),y=vf(v,g.mode,E),y.return=g,g=y),s(g)):r(g,y)}return I}var Si=Ox(!0),$x=Ox(!1),ga={},yr=En(ga),qs=En(ga),Js=En(ga);function $n(t){if(t===ga)throw Error(N(174));return t}function Rh(t,e){switch(xe(Js,e),xe(qs,t),xe(yr,ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nd(e,t)}we(yr),xe(yr,e)}function wi(){we(yr),we(qs),we(Js)}function Dx(t){$n(Js.current);var e=$n(yr.current),r=Nd(e,t.type);e!==r&&(xe(qs,t),xe(yr,r))}function jh(t){qs.current===t&&(we(yr),we(qs))}var be=En(0);function eu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var df=[];function Oh(){for(var t=0;t<df.length;t++)df[t]._workInProgressVersionPrimary=null;df.length=0}var xl=Fr.ReactCurrentDispatcher,pf=Fr.ReactCurrentBatchConfig,ro=0,Ie=null,Me=null,Ye=null,tu=!1,Is=!1,Xs=0,vA=0;function ot(){throw Error(N(321))}function $h(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!or(t[r],e[r]))return!1;return!0}function Dh(t,e,r,n,o,i){if(ro=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xl.current=t===null||t.memoizedState===null?wA:EA,t=r(n,o),Is){i=0;do{if(Is=!1,Xs=0,25<=i)throw Error(N(301));i+=1,Ye=Me=null,e.updateQueue=null,xl.current=CA,t=r(n,o)}while(Is)}if(xl.current=ru,e=Me!==null&&Me.next!==null,ro=0,Ye=Me=Ie=null,tu=!1,e)throw Error(N(300));return t}function Fh(){var t=Xs!==0;return Xs=0,t}function lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ie.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Bt(){if(Me===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Ye===null?Ie.memoizedState:Ye.next;if(e!==null)Ye=e,Me=t;else{if(t===null)throw Error(N(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Ye===null?Ie.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Zs(t,e){return typeof e=="function"?e(t):e}function hf(t){var e=Bt(),r=e.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=t;var n=Me,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}n.baseQueue=o=i,r.pending=null}if(o!==null){i=o.next,n=n.baseState;var a=s=null,l=null,c=i;do{var p=c.lane;if((ro&p)===p)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=n):l=l.next=d,Ie.lanes|=p,no|=p}c=c.next}while(c!==null&&c!==i);l===null?s=n:l.next=a,or(n,e.memoizedState)||(vt=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do i=o.lane,Ie.lanes|=i,no|=i,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yf(t){var e=Bt(),r=e.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,i=e.memoizedState;if(o!==null){r.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);or(i,e.memoizedState)||(vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Fx(){}function Mx(t,e){var r=Ie,n=Bt(),o=e(),i=!or(n.memoizedState,o);if(i&&(n.memoizedState=o,vt=!0),n=n.queue,Mh(Ux.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(r.flags|=2048,ea(9,Bx.bind(null,r,n,o,e),void 0,null),qe===null)throw Error(N(349));ro&30||Lx(r,e,o)}return o}function Lx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Bx(t,e,r,n){e.value=r,e.getSnapshot=n,Wx(e)&&zx(t)}function Ux(t,e,r){return r(function(){Wx(e)&&zx(t)})}function Wx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!or(t,r)}catch{return!0}}function zx(t){var e=Rr(t,1);e!==null&&er(e,t,1,-1)}function Xm(t){var e=lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:t},e.queue=t,t=t.dispatch=SA.bind(null,Ie,t),[e.memoizedState,t]}function ea(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Vx(){return Bt().memoizedState}function Sl(t,e,r,n){var o=lr();Ie.flags|=t,o.memoizedState=ea(1|e,r,void 0,n===void 0?null:n)}function fc(t,e,r,n){var o=Bt();n=n===void 0?null:n;var i=void 0;if(Me!==null){var s=Me.memoizedState;if(i=s.destroy,n!==null&&$h(n,s.deps)){o.memoizedState=ea(e,r,i,n);return}}Ie.flags|=t,o.memoizedState=ea(1|e,r,i,n)}function Zm(t,e){return Sl(8390656,8,t,e)}function Mh(t,e){return fc(2048,8,t,e)}function Gx(t,e){return fc(4,2,t,e)}function Hx(t,e){return fc(4,4,t,e)}function Qx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yx(t,e,r){return r=r!=null?r.concat([t]):null,fc(4,4,Qx.bind(null,e,t),r)}function Lh(){}function Kx(t,e){var r=Bt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$h(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function qx(t,e){var r=Bt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&$h(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Jx(t,e,r){return ro&21?(or(r,e)||(r=ex(),Ie.lanes|=r,no|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=r)}function _A(t,e){var r=ue;ue=r!==0&&4>r?r:4,t(!0);var n=pf.transition;pf.transition={};try{t(!1),e()}finally{ue=r,pf.transition=n}}function Xx(){return Bt().memoizedState}function xA(t,e,r){var n=un(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Zx(t))eS(e,r);else if(r=kx(t,e,r,n),r!==null){var o=dt();er(r,t,n,o),tS(r,e,n)}}function SA(t,e,r){var n=un(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Zx(t))eS(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,r);if(o.hasEagerState=!0,o.eagerState=a,or(a,s)){var l=e.interleaved;l===null?(o.next=o,kh(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}r=kx(t,e,o,n),r!==null&&(o=dt(),er(r,t,n,o),tS(r,e,n))}}function Zx(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function eS(t,e){Is=tu=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function tS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,mh(t,r)}}var ru={readContext:Lt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},wA={readContext:Lt,useCallback:function(t,e){return lr().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:Zm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sl(4194308,4,Qx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sl(4,2,t,e)},useMemo:function(t,e){var r=lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=lr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=xA.bind(null,Ie,t),[n.memoizedState,t]},useRef:function(t){var e=lr();return t={current:t},e.memoizedState=t},useState:Xm,useDebugValue:Lh,useDeferredValue:function(t){return lr().memoizedState=t},useTransition:function(){var t=Xm(!1),e=t[0];return t=_A.bind(null,t[1]),lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ie,o=lr();if(Ce){if(r===void 0)throw Error(N(407));r=r()}else{if(r=e(),qe===null)throw Error(N(349));ro&30||Lx(n,e,r)}o.memoizedState=r;var i={value:r,getSnapshot:e};return o.queue=i,Zm(Ux.bind(null,n,i,t),[t]),n.flags|=2048,ea(9,Bx.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=lr(),e=qe.identifierPrefix;if(Ce){var r=Cr,n=Er;r=(n&~(1<<32-Zt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Xs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=vA++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EA={readContext:Lt,useCallback:Kx,useContext:Lt,useEffect:Mh,useImperativeHandle:Yx,useInsertionEffect:Gx,useLayoutEffect:Hx,useMemo:qx,useReducer:hf,useRef:Vx,useState:function(){return hf(Zs)},useDebugValue:Lh,useDeferredValue:function(t){var e=Bt();return Jx(e,Me.memoizedState,t)},useTransition:function(){var t=hf(Zs)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Mx,useId:Xx,unstable_isNewReconciler:!1},CA={readContext:Lt,useCallback:Kx,useContext:Lt,useEffect:Mh,useImperativeHandle:Yx,useInsertionEffect:Gx,useLayoutEffect:Hx,useMemo:qx,useReducer:yf,useRef:Vx,useState:function(){return yf(Zs)},useDebugValue:Lh,useDeferredValue:function(t){var e=Bt();return Me===null?e.memoizedState=t:Jx(e,Me.memoizedState,t)},useTransition:function(){var t=yf(Zs)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Mx,useId:Xx,unstable_isNewReconciler:!1};function Ei(t,e){try{var r="",n=e;do r+=XC(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function mf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Xd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var bA=typeof WeakMap=="function"?WeakMap:Map;function rS(t,e,r){r=Ir(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ou||(ou=!0,lp=n),Xd(t,e)},r}function nS(t,e,r){r=Ir(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){Xd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Xd(t,e),typeof n!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function eg(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new bA;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=LA.bind(null,t,e,r),e.then(t,t))}function tg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rg(t,e,r,n,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ir(-1,1),e.tag=2,an(r,e,1))),r.lanes|=1),t)}var AA=Fr.ReactCurrentOwner,vt=!1;function ut(t,e,r,n){e.child=t===null?$x(e,null,r,n):Si(e,t.child,r,n)}function ng(t,e,r,n,o){r=r.render;var i=e.ref;return ni(e,o),n=Dh(t,e,r,n,i,o),r=Fh(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,jr(t,e,o)):(Ce&&r&&Ch(e),e.flags|=1,ut(t,e,n,o),e.child)}function og(t,e,r,n,o){if(t===null){var i=r.type;return typeof i=="function"&&!Qh(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,oS(t,e,i,n,o)):(t=bl(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:Hs,r(s,n)&&t.ref===e.ref)return jr(t,e,o)}return e.flags|=1,t=cn(i,n),t.ref=e.ref,t.return=e,e.child=t}function oS(t,e,r,n,o){if(t!==null){var i=t.memoizedProps;if(Hs(i,n)&&t.ref===e.ref)if(vt=!1,e.pendingProps=n=i,(t.lanes&o)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,jr(t,e,o)}return Zd(t,e,r,n,o)}function iS(t,e,r){var n=e.pendingProps,o=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Yo,Et),Et|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Yo,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,xe(Yo,Et),Et|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,xe(Yo,Et),Et|=n;return ut(t,e,o,r),e.child}function sS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Zd(t,e,r,n,o){var i=St(r)?eo:at.current;return i=_i(e,i),ni(e,o),r=Dh(t,e,r,n,i,o),n=Fh(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,jr(t,e,o)):(Ce&&n&&Ch(e),e.flags|=1,ut(t,e,r,o),e.child)}function ig(t,e,r,n,o){if(St(r)){var i=!0;Yl(e)}else i=!1;if(ni(e,o),e.stateNode===null)wl(t,e),jx(e,r,n),Jd(e,r,n,o),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=Lt(c):(c=St(r)?eo:at.current,c=_i(e,c));var p=r.getDerivedStateFromProps,d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||l!==c)&&qm(e,s,n,c),zr=!1;var f=e.memoizedState;s.state=f,Zl(e,n,s,o),l=e.memoizedState,a!==n||f!==l||xt.current||zr?(typeof p=="function"&&(qd(e,r,p,n),l=e.memoizedState),(a=zr||Km(e,r,a,n,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,Tx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ht(e.type,a),s.props=c,d=e.pendingProps,f=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Lt(l):(l=St(r)?eo:at.current,l=_i(e,l));var h=r.getDerivedStateFromProps;(p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qm(e,s,n,l),zr=!1,f=e.memoizedState,s.state=f,Zl(e,n,s,o);var m=e.memoizedState;a!==d||f!==m||xt.current||zr?(typeof h=="function"&&(qd(e,r,h,n),m=e.memoizedState),(c=zr||Km(e,r,c,n,f,m,l)||!1)?(p||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return ep(t,e,r,n,i,o)}function ep(t,e,r,n,o,i){sS(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return o&&Vm(e,r,!1),jr(t,e,i);n=e.stateNode,AA.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=Si(e,t.child,null,i),e.child=Si(e,null,a,i)):ut(t,e,a,i),e.memoizedState=n.state,o&&Vm(e,r,!0),e.child}function aS(t){var e=t.stateNode;e.pendingContext?zm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zm(t,e.context,!1),Rh(t,e.containerInfo)}function sg(t,e,r,n,o){return xi(),Ah(o),e.flags|=256,ut(t,e,r,n),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function rp(t){return{baseLanes:t,cachePool:null,transitions:null}}function lS(t,e,r){var n=e.pendingProps,o=be.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),xe(be,o&1),t===null)return Yd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=hc(s,n,0,null),t=Bn(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rp(r),e.memoizedState=tp,t):Bh(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return IA(t,e,s,n,a,o,r);if(i){i=n.fallback,s=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=cn(o,l),n.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=cn(a,i):(i=Bn(i,s,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=t.child.memoizedState,s=s===null?rp(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~r,e.memoizedState=tp,n}return i=t.child,t=i.sibling,n=cn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Bh(t,e){return e=hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nl(t,e,r,n){return n!==null&&Ah(n),Si(e,t.child,null,r),t=Bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IA(t,e,r,n,o,i,s){if(r)return e.flags&256?(e.flags&=-257,n=mf(Error(N(422))),nl(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,o=e.mode,n=hc({mode:"visible",children:n.children},o,0,null),i=Bn(i,o,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Si(e,t.child,null,s),e.child.memoizedState=rp(s),e.memoizedState=tp,i);if(!(e.mode&1))return nl(t,e,s,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(N(419)),n=mf(i,n,void 0),nl(t,e,s,n)}if(a=(s&t.childLanes)!==0,vt||a){if(n=qe,n!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Rr(t,o),er(n,t,o,-1))}return Hh(),n=mf(Error(N(421))),nl(t,e,s,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=BA.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,bt=sn(o.nextSibling),At=e,Ce=!0,Kt=null,t!==null&&(Ot[$t++]=Er,Ot[$t++]=Cr,Ot[$t++]=to,Er=t.id,Cr=t.overflow,to=e),e=Bh(e,n.children),e.flags|=4096,e)}function ag(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Kd(t.return,e,r)}function gf(t,e,r,n,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function uS(t,e,r){var n=e.pendingProps,o=n.revealOrder,i=n.tail;if(ut(t,e,n.children,r),n=be.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ag(t,r,e);else if(t.tag===19)ag(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(xe(be,n),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&eu(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),gf(e,!1,o,r,i);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&eu(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}gf(e,!0,r,null,i);break;case"together":gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,r=cn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=cn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function PA(t,e,r){switch(e.tag){case 3:aS(e),xi();break;case 5:Dx(e);break;case 1:St(e.type)&&Yl(e);break;case 4:Rh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;xe(Jl,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(xe(be,be.current&1),e.flags|=128,null):r&e.child.childLanes?lS(t,e,r):(xe(be,be.current&1),t=jr(t,e,r),t!==null?t.sibling:null);xe(be,be.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return uS(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),xe(be,be.current),n)break;return null;case 22:case 23:return e.lanes=0,iS(t,e,r)}return jr(t,e,r)}var cS,np,fS,dS;cS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};np=function(){};fS=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,$n(yr.current);var i=null;switch(r){case"input":o=bd(t,o),n=bd(t,n),i=[];break;case"select":o=Pe({},o,{value:void 0}),n=Pe({},n,{value:void 0}),i=[];break;case"textarea":o=Pd(t,o),n=Pd(t,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Hl)}kd(r,n);var s;r=null;for(c in o)if(!n.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ls.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=o!=null?o[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Se("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};dS=function(t,e,r,n){r!==n&&(e.flags|=4)};function is(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function NA(t,e,r){var n=e.pendingProps;switch(bh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return St(e.type)&&Ql(),it(e),null;case 3:return n=e.stateNode,wi(),we(xt),we(at),Oh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(tl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(fp(Kt),Kt=null))),np(t,e),it(e),null;case 5:jh(e);var o=$n(Js.current);if(r=e.type,t!==null&&e.stateNode!=null)fS(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(N(166));return it(e),null}if(t=$n(yr.current),tl(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[cr]=e,n[Ks]=i,t=(e.mode&1)!==0,r){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(o=0;o<xs.length;o++)Se(xs[o],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":mm(n,i),Se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Se("invalid",n);break;case"textarea":vm(n,i),Se("invalid",n)}kd(r,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&el(n.textContent,a,t),o=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&el(n.textContent,a,t),o=["children",""+a]):Ls.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Se("scroll",n)}switch(r){case"input":Ha(n),gm(n,i,!0);break;case"textarea":Ha(n),_m(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Hl)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[cr]=e,t[Ks]=n,cS(t,e,!1,!1),e.stateNode=t;e:{switch(s=Td(r,n),r){case"dialog":Se("cancel",t),Se("close",t),o=n;break;case"iframe":case"object":case"embed":Se("load",t),o=n;break;case"video":case"audio":for(o=0;o<xs.length;o++)Se(xs[o],t);o=n;break;case"source":Se("error",t),o=n;break;case"img":case"image":case"link":Se("error",t),Se("load",t),o=n;break;case"details":Se("toggle",t),o=n;break;case"input":mm(t,n),o=bd(t,n),Se("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=Pe({},n,{value:void 0}),Se("invalid",t);break;case"textarea":vm(t,n),o=Pd(t,n),Se("invalid",t);break;default:o=n}kd(r,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?W0(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&B0(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Bs(t,l):typeof l=="number"&&Bs(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ls.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Se("scroll",t):l!=null&&ch(t,i,l,s))}switch(r){case"input":Ha(t),gm(t,n,!1);break;case"textarea":Ha(t),_m(t);break;case"option":n.value!=null&&t.setAttribute("value",""+mn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Zo(t,!!n.multiple,i,!1):n.defaultValue!=null&&Zo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Hl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)dS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(N(166));if(r=$n(Js.current),$n(yr.current),tl(e)){if(n=e.stateNode,r=e.memoizedProps,n[cr]=e,(i=n.nodeValue!==r)&&(t=At,t!==null))switch(t.tag){case 3:el(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&el(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[cr]=e,e.stateNode=n}return it(e),null;case 13:if(we(be),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&bt!==null&&e.mode&1&&!(e.flags&128))Nx(),xi(),e.flags|=98560,i=!1;else if(i=tl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(N(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[cr]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Kt!==null&&(fp(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Ue===0&&(Ue=3):Hh())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return wi(),np(t,e),t===null&&Qs(e.stateNode.containerInfo),it(e),null;case 10:return Nh(e.type._context),it(e),null;case 17:return St(e.type)&&Ql(),it(e),null;case 19:if(we(be),i=e.memoizedState,i===null)return it(e),null;if(n=(e.flags&128)!==0,s=i.rendering,s===null)if(n)is(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=eu(t),s!==null){for(e.flags|=128,is(i,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return xe(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Ci&&(e.flags|=128,n=!0,is(i,!1),e.lanes=4194304)}else{if(!n)if(t=eu(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),is(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ce)return it(e),null}else 2*je()-i.renderingStartTime>Ci&&r!==1073741824&&(e.flags|=128,n=!0,is(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(r=i.last,r!==null?r.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,r=be.current,xe(be,n?r&1|2:r&1),e):(it(e),null);case 22:case 23:return Gh(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Et&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function kA(t,e){switch(bh(e),e.tag){case 1:return St(e.type)&&Ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wi(),we(xt),we(at),Oh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(we(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(be),null;case 4:return wi(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var ol=!1,st=!1,TA=typeof WeakSet=="function"?WeakSet:Set,F=null;function Qo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ne(t,e,n)}else r.current=null}function op(t,e,r){try{r()}catch(n){Ne(t,e,n)}}var lg=!1;function RA(t,e){if(Ud=zl,t=mx(),Eh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,a=-1,l=-1,c=0,p=0,d=t,f=null;t:for(;;){for(var h;d!==r||o!==0&&d.nodeType!==3||(a=s+o),d!==i||n!==0&&d.nodeType!==3||(l=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===r&&++c===o&&(a=s),f===i&&++p===n&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wd={focusedElem:t,selectionRange:r},zl=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var _=m.memoizedProps,I=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ht(e.type,_),I);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(E){Ne(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return m=lg,lg=!1,m}function Ps(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&op(e,r,i)}o=o.next}while(o!==n)}}function dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ip(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function pS(t){var e=t.alternate;e!==null&&(t.alternate=null,pS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[Ks],delete e[Gd],delete e[hA],delete e[yA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hS(t){return t.tag===5||t.tag===3||t.tag===4}function ug(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Hl));else if(n!==4&&(t=t.child,t!==null))for(sp(t,e,r),t=t.sibling;t!==null;)sp(t,e,r),t=t.sibling}function ap(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ap(t,e,r),t=t.sibling;t!==null;)ap(t,e,r),t=t.sibling}var Xe=null,Yt=!1;function Ur(t,e,r){for(r=r.child;r!==null;)yS(t,e,r),r=r.sibling}function yS(t,e,r){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(oc,r)}catch{}switch(r.tag){case 5:st||Qo(r,e);case 6:var n=Xe,o=Yt;Xe=null,Ur(t,e,r),Xe=n,Yt=o,Xe!==null&&(Yt?(t=Xe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Xe.removeChild(r.stateNode));break;case 18:Xe!==null&&(Yt?(t=Xe,r=r.stateNode,t.nodeType===8?cf(t.parentNode,r):t.nodeType===1&&cf(t,r),Vs(t)):cf(Xe,r.stateNode));break;case 4:n=Xe,o=Yt,Xe=r.stateNode.containerInfo,Yt=!0,Ur(t,e,r),Xe=n,Yt=o;break;case 0:case 11:case 14:case 15:if(!st&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&op(r,e,s),o=o.next}while(o!==n)}Ur(t,e,r);break;case 1:if(!st&&(Qo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ne(r,e,a)}Ur(t,e,r);break;case 21:Ur(t,e,r);break;case 22:r.mode&1?(st=(n=st)||r.memoizedState!==null,Ur(t,e,r),st=n):Ur(t,e,r);break;default:Ur(t,e,r)}}function cg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new TA),e.forEach(function(n){var o=UA.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function Vt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,Yt=!1;break e;case 3:Xe=a.stateNode.containerInfo,Yt=!0;break e;case 4:Xe=a.stateNode.containerInfo,Yt=!0;break e}a=a.return}if(Xe===null)throw Error(N(160));yS(i,s,o),Xe=null,Yt=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Ne(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mS(e,t),e=e.sibling}function mS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(e,t),ar(t),n&4){try{Ps(3,t,t.return),dc(3,t)}catch(_){Ne(t,t.return,_)}try{Ps(5,t,t.return)}catch(_){Ne(t,t.return,_)}}break;case 1:Vt(e,t),ar(t),n&512&&r!==null&&Qo(r,r.return);break;case 5:if(Vt(e,t),ar(t),n&512&&r!==null&&Qo(r,r.return),t.flags&32){var o=t.stateNode;try{Bs(o,"")}catch(_){Ne(t,t.return,_)}}if(n&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&F0(o,i),Td(a,s);var c=Td(a,i);for(s=0;s<l.length;s+=2){var p=l[s],d=l[s+1];p==="style"?W0(o,d):p==="dangerouslySetInnerHTML"?B0(o,d):p==="children"?Bs(o,d):ch(o,p,d,c)}switch(a){case"input":Ad(o,i);break;case"textarea":M0(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Zo(o,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zo(o,!!i.multiple,i.defaultValue,!0):Zo(o,!!i.multiple,i.multiple?[]:"",!1))}o[Ks]=i}catch(_){Ne(t,t.return,_)}}break;case 6:if(Vt(e,t),ar(t),n&4){if(t.stateNode===null)throw Error(N(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(_){Ne(t,t.return,_)}}break;case 3:if(Vt(e,t),ar(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vs(e.containerInfo)}catch(_){Ne(t,t.return,_)}break;case 4:Vt(e,t),ar(t);break;case 13:Vt(e,t),ar(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(zh=je())),n&4&&cg(t);break;case 22:if(p=r!==null&&r.memoizedState!==null,t.mode&1?(st=(c=st)||p,Vt(e,t),st=c):Vt(e,t),ar(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(F=t,p=t.child;p!==null;){for(d=F=p;F!==null;){switch(f=F,h=f.child,f.tag){case 0:case 11:case 14:case 15:Ps(4,f,f.return);break;case 1:Qo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(_){Ne(n,r,_)}}break;case 5:Qo(f,f.return);break;case 22:if(f.memoizedState!==null){dg(d);continue}}h!==null?(h.return=f,F=h):dg(d)}p=p.sibling}e:for(p=null,d=t;;){if(d.tag===5){if(p===null){p=d;try{o=d.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=U0("display",s))}catch(_){Ne(t,t.return,_)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){Ne(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vt(e,t),ar(t),n&4&&cg(t);break;case 21:break;default:Vt(e,t),ar(t)}}function ar(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(hS(r)){var n=r;break e}r=r.return}throw Error(N(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(Bs(o,""),n.flags&=-33);var i=ug(t);ap(t,i,o);break;case 3:case 4:var s=n.stateNode.containerInfo,a=ug(t);sp(t,a,s);break;default:throw Error(N(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jA(t,e,r){F=t,gS(t)}function gS(t,e,r){for(var n=(t.mode&1)!==0;F!==null;){var o=F,i=o.child;if(o.tag===22&&n){var s=o.memoizedState!==null||ol;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||st;a=ol;var c=st;if(ol=s,(st=l)&&!c)for(F=o;F!==null;)s=F,l=s.child,s.tag===22&&s.memoizedState!==null?pg(o):l!==null?(l.return=s,F=l):pg(o);for(;i!==null;)F=i,gS(i),i=i.sibling;F=o,ol=a,st=c}fg(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,F=i):fg(t)}}function fg(t){for(;F!==null;){var e=F;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||dc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!st)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:Ht(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ym(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ym(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Vs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}st||e.flags&512&&ip(e)}catch(f){Ne(e,e.return,f)}}if(e===t){F=null;break}if(r=e.sibling,r!==null){r.return=e.return,F=r;break}F=e.return}}function dg(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var r=e.sibling;if(r!==null){r.return=e.return,F=r;break}F=e.return}}function pg(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{dc(4,e)}catch(l){Ne(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(l){Ne(e,o,l)}}var i=e.return;try{ip(e)}catch(l){Ne(e,i,l)}break;case 5:var s=e.return;try{ip(e)}catch(l){Ne(e,s,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var OA=Math.ceil,nu=Fr.ReactCurrentDispatcher,Uh=Fr.ReactCurrentOwner,Mt=Fr.ReactCurrentBatchConfig,se=0,qe=null,De=null,et=0,Et=0,Yo=En(0),Ue=0,ta=null,no=0,pc=0,Wh=0,Ns=null,mt=null,zh=0,Ci=1/0,Sr=null,ou=!1,lp=null,ln=null,il=!1,Jr=null,iu=0,ks=0,up=null,El=-1,Cl=0;function dt(){return se&6?je():El!==-1?El:El=je()}function un(t){return t.mode&1?se&2&&et!==0?et&-et:gA.transition!==null?(Cl===0&&(Cl=ex()),Cl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:ax(t.type)),t):1}function er(t,e,r,n){if(50<ks)throw ks=0,up=null,Error(N(185));ha(t,r,n),(!(se&2)||t!==qe)&&(t===qe&&(!(se&2)&&(pc|=r),Ue===4&&Kr(t,et)),wt(t,n),r===1&&se===0&&!(e.mode&1)&&(Ci=je()+500,uc&&Cn()))}function wt(t,e){var r=t.callbackNode;gb(t,e);var n=Wl(t,t===qe?et:0);if(n===0)r!==null&&wm(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&wm(r),e===1)t.tag===0?mA(hg.bind(null,t)):Ax(hg.bind(null,t)),dA(function(){!(se&6)&&Cn()}),r=null;else{switch(tx(n)){case 1:r=yh;break;case 4:r=X0;break;case 16:r=Ul;break;case 536870912:r=Z0;break;default:r=Ul}r=bS(r,vS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function vS(t,e){if(El=-1,Cl=0,se&6)throw Error(N(327));var r=t.callbackNode;if(oi()&&t.callbackNode!==r)return null;var n=Wl(t,t===qe?et:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=su(t,n);else{e=n;var o=se;se|=2;var i=xS();(qe!==t||et!==e)&&(Sr=null,Ci=je()+500,Ln(t,e));do try{FA();break}catch(a){_S(t,a)}while(1);Ph(),nu.current=i,se=o,De!==null?e=0:(qe=null,et=0,e=Ue)}if(e!==0){if(e===2&&(o=Dd(t),o!==0&&(n=o,e=cp(t,o))),e===1)throw r=ta,Ln(t,0),Kr(t,n),wt(t,je()),r;if(e===6)Kr(t,n);else{if(o=t.current.alternate,!(n&30)&&!$A(o)&&(e=su(t,n),e===2&&(i=Dd(t),i!==0&&(n=i,e=cp(t,i))),e===1))throw r=ta,Ln(t,0),Kr(t,n),wt(t,je()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(N(345));case 2:Nn(t,mt,Sr);break;case 3:if(Kr(t,n),(n&130023424)===n&&(e=zh+500-je(),10<e)){if(Wl(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){dt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Vd(Nn.bind(null,t,mt,Sr),e);break}Nn(t,mt,Sr);break;case 4:if(Kr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var s=31-Zt(n);i=1<<s,s=e[s],s>o&&(o=s),n&=~i}if(n=o,n=je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*OA(n/1960))-n,10<n){t.timeoutHandle=Vd(Nn.bind(null,t,mt,Sr),n);break}Nn(t,mt,Sr);break;case 5:Nn(t,mt,Sr);break;default:throw Error(N(329))}}}return wt(t,je()),t.callbackNode===r?vS.bind(null,t):null}function cp(t,e){var r=Ns;return t.current.memoizedState.isDehydrated&&(Ln(t,e).flags|=256),t=su(t,e),t!==2&&(e=mt,mt=r,e!==null&&fp(e)),t}function fp(t){mt===null?mt=t:mt.push.apply(mt,t)}function $A(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!or(i(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~Wh,e&=~pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Zt(e),n=1<<r;t[r]=-1,e&=~n}}function hg(t){if(se&6)throw Error(N(327));oi();var e=Wl(t,0);if(!(e&1))return wt(t,je()),null;var r=su(t,e);if(t.tag!==0&&r===2){var n=Dd(t);n!==0&&(e=n,r=cp(t,n))}if(r===1)throw r=ta,Ln(t,0),Kr(t,e),wt(t,je()),r;if(r===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nn(t,mt,Sr),wt(t,je()),null}function Vh(t,e){var r=se;se|=1;try{return t(e)}finally{se=r,se===0&&(Ci=je()+500,uc&&Cn())}}function oo(t){Jr!==null&&Jr.tag===0&&!(se&6)&&oi();var e=se;se|=1;var r=Mt.transition,n=ue;try{if(Mt.transition=null,ue=1,t)return t()}finally{ue=n,Mt.transition=r,se=e,!(se&6)&&Cn()}}function Gh(){Et=Yo.current,we(Yo)}function Ln(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,fA(r)),De!==null)for(r=De.return;r!==null;){var n=r;switch(bh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ql();break;case 3:wi(),we(xt),we(at),Oh();break;case 5:jh(n);break;case 4:wi();break;case 13:we(be);break;case 19:we(be);break;case 10:Nh(n.type._context);break;case 22:case 23:Gh()}r=r.return}if(qe=t,De=t=cn(t.current,null),et=Et=e,Ue=0,ta=null,Wh=pc=no=0,mt=Ns=null,On!==null){for(e=0;e<On.length;e++)if(r=On[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=o,n.next=s}r.pending=n}On=null}return t}function _S(t,e){do{var r=De;try{if(Ph(),xl.current=ru,tu){for(var n=Ie.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}tu=!1}if(ro=0,Ye=Me=Ie=null,Is=!1,Xs=0,Uh.current=null,r===null||r.return===null){Ue=1,ta=e,De=null;break}e:{var i=t,s=r.return,a=r,l=e;if(e=et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,p=a,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var h=tg(s);if(h!==null){h.flags&=-257,rg(h,s,a,i,e),h.mode&1&&eg(i,c,e),e=h,l=c;var m=e.updateQueue;if(m===null){var _=new Set;_.add(l),e.updateQueue=_}else m.add(l);break e}else{if(!(e&1)){eg(i,c,e),Hh();break e}l=Error(N(426))}}else if(Ce&&a.mode&1){var I=tg(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),rg(I,s,a,i,e),Ah(Ei(l,a));break e}}i=l=Ei(l,a),Ue!==4&&(Ue=2),Ns===null?Ns=[i]:Ns.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=rS(i,l,e);Qm(i,g);break e;case 1:a=l;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ln===null||!ln.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=nS(i,a,e);Qm(i,E);break e}}i=i.return}while(i!==null)}wS(r)}catch(w){e=w,De===r&&r!==null&&(De=r=r.return);continue}break}while(1)}function xS(){var t=nu.current;return nu.current=ru,t===null?ru:t}function Hh(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),qe===null||!(no&268435455)&&!(pc&268435455)||Kr(qe,et)}function su(t,e){var r=se;se|=2;var n=xS();(qe!==t||et!==e)&&(Sr=null,Ln(t,e));do try{DA();break}catch(o){_S(t,o)}while(1);if(Ph(),se=r,nu.current=n,De!==null)throw Error(N(261));return qe=null,et=0,Ue}function DA(){for(;De!==null;)SS(De)}function FA(){for(;De!==null&&!lb();)SS(De)}function SS(t){var e=CS(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?wS(t):De=e,Uh.current=null}function wS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=kA(r,e),r!==null){r.flags&=32767,De=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,De=null;return}}else if(r=NA(r,e,Et),r!==null){De=r;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Ue===0&&(Ue=5)}function Nn(t,e,r){var n=ue,o=Mt.transition;try{Mt.transition=null,ue=1,MA(t,e,r,n)}finally{Mt.transition=o,ue=n}return null}function MA(t,e,r,n){do oi();while(Jr!==null);if(se&6)throw Error(N(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(vb(t,i),t===qe&&(De=qe=null,et=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||il||(il=!0,bS(Ul,function(){return oi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Mt.transition,Mt.transition=null;var s=ue;ue=1;var a=se;se|=4,Uh.current=null,RA(t,r),mS(r,t),oA(Wd),zl=!!Ud,Wd=Ud=null,t.current=r,jA(r),ub(),se=a,ue=s,Mt.transition=i}else t.current=r;if(il&&(il=!1,Jr=t,iu=o),i=t.pendingLanes,i===0&&(ln=null),db(r.stateNode),wt(t,je()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(ou)throw ou=!1,t=lp,lp=null,t;return iu&1&&t.tag!==0&&oi(),i=t.pendingLanes,i&1?t===up?ks++:(ks=0,up=t):ks=0,Cn(),null}function oi(){if(Jr!==null){var t=tx(iu),e=Mt.transition,r=ue;try{if(Mt.transition=null,ue=16>t?16:t,Jr===null)var n=!1;else{if(t=Jr,Jr=null,iu=0,se&6)throw Error(N(331));var o=se;for(se|=4,F=t.current;F!==null;){var i=F,s=i.child;if(F.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(F=c;F!==null;){var p=F;switch(p.tag){case 0:case 11:case 15:Ps(8,p,i)}var d=p.child;if(d!==null)d.return=p,F=d;else for(;F!==null;){p=F;var f=p.sibling,h=p.return;if(pS(p),p===c){F=null;break}if(f!==null){f.return=h,F=f;break}F=h}}}var m=i.alternate;if(m!==null){var _=m.child;if(_!==null){m.child=null;do{var I=_.sibling;_.sibling=null,_=I}while(_!==null)}}F=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,F=s;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ps(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,F=g;break e}F=i.return}}var y=t.current;for(F=y;F!==null;){s=F;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,F=v;else e:for(s=y;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dc(9,a)}}catch(w){Ne(a,a.return,w)}if(a===s){F=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,F=E;break e}F=a.return}}if(se=o,Cn(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(oc,t)}catch{}n=!0}return n}finally{ue=r,Mt.transition=e}}return!1}function yg(t,e,r){e=Ei(r,e),e=rS(t,e,1),t=an(t,e,1),e=dt(),t!==null&&(ha(t,1,e),wt(t,e))}function Ne(t,e,r){if(t.tag===3)yg(t,t,r);else for(;e!==null;){if(e.tag===3){yg(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ln===null||!ln.has(n))){t=Ei(r,t),t=nS(e,t,1),e=an(e,t,1),t=dt(),e!==null&&(ha(e,1,t),wt(e,t));break}}e=e.return}}function LA(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&r,qe===t&&(et&r)===r&&(Ue===4||Ue===3&&(et&130023424)===et&&500>je()-zh?Ln(t,0):Wh|=r),wt(t,e)}function ES(t,e){e===0&&(t.mode&1?(e=Ka,Ka<<=1,!(Ka&130023424)&&(Ka=4194304)):e=1);var r=dt();t=Rr(t,e),t!==null&&(ha(t,e,r),wt(t,r))}function BA(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ES(t,r)}function UA(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(e),ES(t,r)}var CS;CS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)vt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return vt=!1,PA(t,e,r);vt=!!(t.flags&131072)}else vt=!1,Ce&&e.flags&1048576&&Ix(e,ql,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;wl(t,e),t=e.pendingProps;var o=_i(e,at.current);ni(e,r),o=Dh(null,e,n,t,o,r);var i=Fh();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(n)?(i=!0,Yl(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Th(e),o.updater=cc,e.stateNode=o,o._reactInternals=e,Jd(e,n,t,r),e=ep(null,e,n,!0,i,r)):(e.tag=0,Ce&&i&&Ch(e),ut(null,e,o,r),e=e.child),e;case 16:n=e.elementType;e:{switch(wl(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=zA(n),t=Ht(n,t),o){case 0:e=Zd(null,e,n,t,r);break e;case 1:e=ig(null,e,n,t,r);break e;case 11:e=ng(null,e,n,t,r);break e;case 14:e=og(null,e,n,Ht(n.type,t),r);break e}throw Error(N(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Ht(n,o),Zd(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Ht(n,o),ig(t,e,n,o,r);case 3:e:{if(aS(e),t===null)throw Error(N(387));n=e.pendingProps,i=e.memoizedState,o=i.element,Tx(t,e),Zl(e,n,null,r);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=Ei(Error(N(423)),e),e=sg(t,e,n,r,o);break e}else if(n!==o){o=Ei(Error(N(424)),e),e=sg(t,e,n,r,o);break e}else for(bt=sn(e.stateNode.containerInfo.firstChild),At=e,Ce=!0,Kt=null,r=$x(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xi(),n===o){e=jr(t,e,r);break e}ut(t,e,n,r)}e=e.child}return e;case 5:return Dx(e),t===null&&Yd(e),n=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,zd(n,o)?s=null:i!==null&&zd(n,i)&&(e.flags|=32),sS(t,e),ut(t,e,s,r),e.child;case 6:return t===null&&Yd(e),null;case 13:return lS(t,e,r);case 4:return Rh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Si(e,null,n,r):ut(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Ht(n,o),ng(t,e,n,o,r);case 7:return ut(t,e,e.pendingProps,r),e.child;case 8:return ut(t,e,e.pendingProps.children,r),e.child;case 12:return ut(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,xe(Jl,n._currentValue),n._currentValue=s,i!==null)if(or(i.value,s)){if(i.children===o.children&&!xt.current){e=jr(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Ir(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?l.next=l:(l.next=p.next,p.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Kd(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(N(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),Kd(s,r,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ut(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,ni(e,r),o=Lt(o),n=n(o),e.flags|=1,ut(t,e,n,r),e.child;case 14:return n=e.type,o=Ht(n,e.pendingProps),o=Ht(n.type,o),og(t,e,n,o,r);case 15:return oS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Ht(n,o),wl(t,e),e.tag=1,St(n)?(t=!0,Yl(e)):t=!1,ni(e,r),jx(e,n,o),Jd(e,n,o,r),ep(null,e,n,!0,t,r);case 19:return uS(t,e,r);case 22:return iS(t,e,r)}throw Error(N(156,e.tag))};function bS(t,e){return J0(t,e)}function WA(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,r,n){return new WA(t,e,r,n)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zA(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dh)return 11;if(t===ph)return 14}return 2}function cn(t,e){var r=t.alternate;return r===null?(r=Dt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function bl(t,e,r,n,o,i){var s=2;if(n=t,typeof t=="function")Qh(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Mo:return Bn(r.children,o,i,e);case fh:s=8,o|=8;break;case Sd:return t=Dt(12,r,e,o|2),t.elementType=Sd,t.lanes=i,t;case wd:return t=Dt(13,r,e,o),t.elementType=wd,t.lanes=i,t;case Ed:return t=Dt(19,r,e,o),t.elementType=Ed,t.lanes=i,t;case O0:return hc(r,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R0:s=10;break e;case j0:s=9;break e;case dh:s=11;break e;case ph:s=14;break e;case Wr:s=16,n=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=Dt(s,r,e,o),e.elementType=t,e.type=n,e.lanes=i,e}function Bn(t,e,r,n){return t=Dt(7,t,n,e),t.lanes=r,t}function hc(t,e,r,n){return t=Dt(22,t,n,e),t.elementType=O0,t.lanes=r,t.stateNode={isHidden:!1},t}function vf(t,e,r){return t=Dt(6,t,null,e),t.lanes=r,t}function _f(t,e,r){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VA(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xc(0),this.expirationTimes=Xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Yh(t,e,r,n,o,i,s,a,l){return t=new VA(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(i),t}function GA(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function AS(t){if(!t)return gn;t=t._reactInternals;e:{if(fo(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var r=t.type;if(St(r))return bx(t,r,e)}return e}function IS(t,e,r,n,o,i,s,a,l){return t=Yh(r,n,!0,t,o,i,s,a,l),t.context=AS(null),r=t.current,n=dt(),o=un(r),i=Ir(n,o),i.callback=e??null,an(r,i,o),t.current.lanes=o,ha(t,o,n),wt(t,n),t}function yc(t,e,r,n){var o=e.current,i=dt(),s=un(o);return r=AS(r),e.context===null?e.context=r:e.pendingContext=r,e=Ir(i,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=an(o,e,s),t!==null&&(er(t,o,s,i),_l(t,o,s)),s}function au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Kh(t,e){mg(t,e),(t=t.alternate)&&mg(t,e)}function HA(){return null}var PS=typeof reportError=="function"?reportError:function(t){console.error(t)};function qh(t){this._internalRoot=t}mc.prototype.render=qh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));yc(t,e,null,null)};mc.prototype.unmount=qh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){yc(null,t,null,null)}),e[Tr]=null}};function mc(t){this._internalRoot=t}mc.prototype.unstable_scheduleHydration=function(t){if(t){var e=ox();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Yr.length&&e!==0&&e<Yr[r].priority;r++);Yr.splice(r,0,t),r===0&&sx(t)}};function Jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gg(){}function QA(t,e,r,n,o){if(o){if(typeof n=="function"){var i=n;n=function(){var c=au(s);i.call(c)}}var s=IS(e,n,t,0,null,!1,!1,"",gg);return t._reactRootContainer=s,t[Tr]=s.current,Qs(t.nodeType===8?t.parentNode:t),oo(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var a=n;n=function(){var c=au(l);a.call(c)}}var l=Yh(t,0,!1,null,null,!1,!1,"",gg);return t._reactRootContainer=l,t[Tr]=l.current,Qs(t.nodeType===8?t.parentNode:t),oo(function(){yc(e,l,r,n)}),l}function vc(t,e,r,n,o){var i=r._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=au(s);a.call(l)}}yc(e,s,t,o)}else s=QA(r,e,t,o,n);return au(s)}rx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=_s(e.pendingLanes);r!==0&&(mh(e,r|1),wt(e,je()),!(se&6)&&(Ci=je()+500,Cn()))}break;case 13:oo(function(){var n=Rr(t,1);if(n!==null){var o=dt();er(n,t,1,o)}}),Kh(t,1)}};gh=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var r=dt();er(e,t,134217728,r)}Kh(t,134217728)}};nx=function(t){if(t.tag===13){var e=un(t),r=Rr(t,e);if(r!==null){var n=dt();er(r,t,e,n)}Kh(t,e)}};ox=function(){return ue};ix=function(t,e){var r=ue;try{return ue=t,e()}finally{ue=r}};jd=function(t,e,r){switch(e){case"input":if(Ad(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=lc(n);if(!o)throw Error(N(90));D0(n),Ad(n,o)}}}break;case"textarea":M0(t,r);break;case"select":e=r.value,e!=null&&Zo(t,!!r.multiple,e,!1)}};G0=Vh;H0=oo;var YA={usingClientEntryPoint:!1,Events:[ma,Wo,lc,z0,V0,Vh]},ss={findFiberByHostInstance:jn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},KA={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K0(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||HA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{oc=sl.inject(KA),hr=sl}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YA;Pt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jh(e))throw Error(N(200));return GA(t,e,null,r)};Pt.createRoot=function(t,e){if(!Jh(t))throw Error(N(299));var r=!1,n="",o=PS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Yh(t,1,!1,null,null,r,!1,n,o),t[Tr]=e.current,Qs(t.nodeType===8?t.parentNode:t),new qh(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=K0(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return oo(t)};Pt.hydrate=function(t,e,r){if(!gc(e))throw Error(N(200));return vc(null,t,e,!0,r)};Pt.hydrateRoot=function(t,e,r){if(!Jh(t))throw Error(N(405));var n=r!=null&&r.hydratedSources||null,o=!1,i="",s=PS;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=IS(e,null,t,1,r??null,o,!1,i,s),t[Tr]=e.current,Qs(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new mc(e)};Pt.render=function(t,e,r){if(!gc(e))throw Error(N(200));return vc(null,t,e,!1,r)};Pt.unmountComponentAtNode=function(t){if(!gc(t))throw Error(N(40));return t._reactRootContainer?(oo(function(){vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};Pt.unstable_batchedUpdates=Vh;Pt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!gc(r))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return vc(t,e,r,!1,n)};Pt.version="18.2.0-next-9e3b772b8-20220608";function NS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NS)}catch(t){console.error(t)}}NS(),I0.exports=Pt;var qA=I0.exports,vg=qA;_d.createRoot=vg.createRoot,_d.hydrateRoot=vg.hydrateRoot;var kS={exports:{}},TS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=S;function JA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XA=typeof Object.is=="function"?Object.is:JA,ZA=bi.useState,eI=bi.useEffect,tI=bi.useLayoutEffect,rI=bi.useDebugValue;function nI(t,e){var r=e(),n=ZA({inst:{value:r,getSnapshot:e}}),o=n[0].inst,i=n[1];return tI(function(){o.value=r,o.getSnapshot=e,xf(o)&&i({inst:o})},[t,r,e]),eI(function(){return xf(o)&&i({inst:o}),t(function(){xf(o)&&i({inst:o})})},[t]),rI(r),r}function xf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!XA(t,r)}catch{return!0}}function oI(t,e){return e()}var iI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oI:nI;TS.useSyncExternalStore=bi.useSyncExternalStore!==void 0?bi.useSyncExternalStore:iI;kS.exports=TS;var sI=kS.exports;const{useEffect:aI,useLayoutEffect:lI,useRef:uI,useInsertionEffect:cI}=BC,fI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dI=fI?lI:aI,pI=cI||dI,RS=t=>{const e=uI([t,(...r)=>e[0](...r)]).current;return pI(()=>{e[0]=t}),e[1]},hI=(t="",e=location.pathname)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",yI=(t,e="")=>t[0]==="~"?t.slice(1):e+t,mI="popstate",Xh="pushState",Zh="replaceState",gI="hashchange",_g=[mI,Xh,Zh,gI],vI=t=>{for(const e of _g)addEventListener(e,t);return()=>{for(const e of _g)removeEventListener(e,t)}},_I=(t,e)=>sI.useSyncExternalStore(vI,t,e),xg=()=>location.pathname,xI=({ssrPath:t}={})=>_I(xg,t?()=>t:xg),SI=(t,{replace:e=!1}={})=>history[e?Zh:Xh](null,"",t),wI=(t={})=>[hI(t.base,xI(t)),RS((e,r)=>SI(yI(e,t.base),r))];if(typeof history<"u")for(const t of[Xh,Zh]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}function EI(t=bI){let e={};const r=n=>e[n]||(e[n]=t(n));return(n,o)=>{const{regexp:i,keys:s}=r(n||""),a=i.exec(o);return a?[!0,s.reduce((c,p,d)=>(c[p.name]=a[d+1],c),{})]:[!1,null]}}const Sg=t=>t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),CI=(t,e,r)=>{let n=t?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return e&&r&&(n="(?:\\/"+n+")"),n+(e?"?":"")},bI=t=>{const e=/:([A-Za-z0-9_]+)([?+*]?)/g;let r=null,n=0,o=[],i="";for(;(r=e.exec(t))!==null;){const[s,a,l]=r,c=l==="+"||l==="*",p=l==="?"||l==="*",d=p&&t[r.index-1]==="/"?1:0,f=t.substring(n,r.index-d);o.push({name:a}),n=e.lastIndex,i+=Sg(f)+CI(c,p,d)}return i+=Sg(t.substring(n)),{keys:o,regexp:new RegExp("^"+i+"(?:\\/)?$","i")}},AI={hook:wI,matcher:EI(),base:""},II=S.createContext(AI),_c=()=>S.useContext(II),xc=t=>t.hook(t),PI=()=>xc(_c()),NI=t=>{const e=_c(),[r]=xc(e);return e.matcher(t,r)},kI=S.createContext({params:{}}),wg=(t,e)=>S.createElement(kI.Provider,{value:{params:t},children:e}),Rt=({path:t,match:e,component:r,children:n})=>{const o=NI(t),[i,s]=e||o;return i?r?wg(s,S.createElement(r,{params:s})):wg(s,typeof n=="function"?n(s):n):null};S.forwardRef((t,e)=>{const r=_c(),[,n]=xc(r),{to:o,href:i=o,children:s,onClick:a}=t,l=RS(d=>{d.ctrlKey||d.metaKey||d.altKey||d.shiftKey||d.button!==0||(a&&a(d),d.defaultPrevented||(d.preventDefault(),n(o||i,t)))}),c={href:i[0]==="~"?i.slice(1):r.base+i,onClick:l,to:null,ref:e},p=S.isValidElement(s)?s:S.createElement("a",t);return S.cloneElement(p,c)});const dp=t=>Array.isArray(t)?[].concat(...t.map(e=>e&&e.type===S.Fragment?dp(e.props.children):dp(e))):[t],TI=({children:t,location:e})=>{const r=_c(),n=r.matcher,[o]=xc(r);for(const i of dp(t)){let s=0;if(S.isValidElement(i)&&(s=i.props.path?n(i.props.path,e||o):[!0,{}])[0])return S.cloneElement(i,{match:s})}return null};const RI="modulepreload",jI=function(t){return"/"+t},Eg={},OI=function(e,r,n){if(!r||r.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=jI(i),i in Eg)return;Eg[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let p=o.length-1;p>=0;p--){const d=o[p];if(d.href===i&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":RI,s||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),s)return new Promise((p,d)=>{c.addEventListener("load",p),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},$I=t=>{t&&t instanceof Function&&OI(()=>import("./web-vitals-9f4c2f45.js"),[]).then(({getCLS:e,getFID:r,getFCP:n,getLCP:o,getTTFB:i})=>{e(t),r(t),n(t),o(t),i(t)})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=function(t,e){if(!t)throw Gi(e)},Gi=function(t){return new Error("Firebase Database ("+jS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):(o&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128)}return e},DI=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const o=t[r++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[r++];e[n++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=t[r++],s=t[r++],a=t[r++],l=((o&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return e.join("")},ey={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<t.length;o+=3){const i=t[o],s=o+1<t.length,a=s?t[o+1]:0,l=o+2<t.length,c=l?t[o+2]:0,p=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,s||(f=64)),n.push(r[p],r[d],r[f],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<t.length;){const i=r[t.charAt(o++)],a=o<t.length?r[t.charAt(o)]:0;++o;const c=o<t.length?r[t.charAt(o)]:64;++o;const d=o<t.length?r[t.charAt(o)]:64;if(++o,i==null||a==null||c==null||d==null)throw new FI;const f=i<<2|a>>4;if(n.push(f),c!==64){const h=a<<4&240|c>>2;if(n.push(h),d!==64){const m=c<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $S=function(t){const e=OS(t);return ey.encodeByteArray(e,!0)},lu=function(t){return $S(t).replace(/\./g,"")},pp=function(t){try{return ey.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){return DS(void 0,t)}function DS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!LI(r)||(t[r]=DS(t[r],e[r]));return t}function LI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=()=>BI().__FIREBASE_DEFAULTS__,WI=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pp(t[1]);return e&&JSON.parse(e)},FS=()=>{try{return UI()||WI()||zI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VI=t=>{var e,r;return(r=(e=FS())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},GI=t=>{const e=VI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},MS=()=>{var t;return(t=FS())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",o=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[lu(JSON.stringify(r)),lu(JSON.stringify(s)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(QI())}function YI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){return jS.NODE_ADMIN===!0}function KI(){try{return typeof indexedDB=="object"}catch{return!1}}function qI(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var i;e(((i=o.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="FirebaseError";class _a extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=JI,Object.setPrototypeOf(this,_a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,US.prototype.create)}}class US{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?XI(i,n):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new _a(o,a,n)}}function XI(t,e){return t.replace(ZI,(r,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const ZI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){return JSON.parse(t)}function Be(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=function(t){let e={},r={},n={},o="";try{const i=t.split(".");e=ra(pp(i[0])||""),r=ra(pp(i[1])||""),o=i[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:o}},eP=function(t){const e=WS(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},tP=function(t){const e=WS(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ai(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Cg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uu(t,e,r){const n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=e.call(r,t[o],o,t));return n}function hp(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const o of r){if(!n.includes(o))return!1;const i=t[o],s=e[o];if(bg(i)&&bg(s)){if(!hp(i,s))return!1}else if(i!==s)return!1}for(const o of n)if(!r.includes(o))return!1;return!0}function bg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let d=0;d<16;d++)n[d]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let d=16;d<80;d++){const f=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(f<<1|f>>>31)&4294967295}let o=this.chain_[0],i=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,p;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(s^a),p=1518500249):(c=i^s^a,p=1859775393):d<60?(c=i&s|a&(i|s),p=2400959708):(c=i^s^a,p=3395469782);const f=(o<<5|o>>>27)+c+l+p+n[d]&4294967295;l=a,a=s,s=(i<<30|i>>>2)&4294967295,i=o,o=f}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let o=0;const i=this.buf_;let s=this.inbuf_;for(;o<r;){if(s===0)for(;o<=n;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<r;)if(i[s]=e.charCodeAt(o),++s,++o,s===this.blockSize){this.compress_(i),s=0;break}}else for(;o<r;)if(i[s]=e[o],++s,++o,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let o=0;o<5;o++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[o]>>i&255,++n;return e}}function xa(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);if(o>=55296&&o<=56319){const i=o-55296;n++,k(n<t.length,"Surrogate pair missing trail surrogate.");const s=t.charCodeAt(n)-56320;o=65536+(i<<10)+s}o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):o<65536?(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128)}return e},Sc=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return t&&t._delegate?t._delegate:t}class na{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new va;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:r});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(o)return null;throw i}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aP(e))try{this.getOrInitializeService({instanceIdentifier:kn})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:o});n.resolve(i)}catch{}}}}clearInstance(e=kn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kn){return this.instances.has(e)}getOptions(e=kn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);n===a&&s.resolve(o)}return o}onInit(e,r){var n;const o=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(o))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(o,i);const s=this.instances.get(o);return s&&e(s,o),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const o of n)try{o(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:sP(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=kn){return this.component?this.component.multipleInstances?e:kn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sP(t){return t===kn?void 0:t}function aP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new iP(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const uP={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},cP=ge.INFO,fP={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},dP=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),o=fP[e];if(o)console[o](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zS{constructor(e){this.name=e,this._logLevel=cP,this._logHandler=dP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const pP=(t,e)=>e.some(r=>t instanceof r);let Ag,Ig;function hP(){return Ag||(Ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yP(){return Ig||(Ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VS=new WeakMap,yp=new WeakMap,GS=new WeakMap,Sf=new WeakMap,ty=new WeakMap;function mP(t){const e=new Promise((r,n)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(fn(t.result)),o()},s=()=>{n(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&VS.set(r,t)}).catch(()=>{}),ty.set(e,t),e}function gP(t){if(yp.has(t))return;const e=new Promise((r,n)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),o()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});yp.set(t,e)}let mp={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GS.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vP(t){mp=t(mp)}function _P(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(wf(this),e,...r);return GS.set(n,e.sort?e.sort():[e]),fn(n)}:yP().includes(t)?function(...e){return t.apply(wf(this),e),fn(VS.get(this))}:function(...e){return fn(t.apply(wf(this),e))}}function xP(t){return typeof t=="function"?_P(t):(t instanceof IDBTransaction&&gP(t),pP(t,hP())?new Proxy(t,mp):t)}function fn(t){if(t instanceof IDBRequest)return mP(t);if(Sf.has(t))return Sf.get(t);const e=xP(t);return e!==t&&(Sf.set(t,e),ty.set(e,t)),e}const wf=t=>ty.get(t);function SP(t,e,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=fn(s);return n&&s.addEventListener("upgradeneeded",l=>{n(fn(s.result),l.oldVersion,l.newVersion,fn(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const wP=["get","getKey","getAll","getAllKeys","count"],EP=["put","add","delete","clear"],Ef=new Map;function Pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ef.get(e))return Ef.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,o=EP.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||wP.includes(r)))return;const i=async function(s,...a){const l=this.transaction(s,o?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),o&&l.done]))[0]};return Ef.set(e,i),i}vP(t=>({...t,get:(e,r,n)=>Pg(e,r)||t.get(e,r,n),has:(e,r)=>!!Pg(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(bP(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function bP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gp="@firebase/app",Ng="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new zS("@firebase/app"),AP="@firebase/app-compat",IP="@firebase/analytics-compat",PP="@firebase/analytics",NP="@firebase/app-check-compat",kP="@firebase/app-check",TP="@firebase/auth",RP="@firebase/auth-compat",jP="@firebase/database",OP="@firebase/database-compat",$P="@firebase/functions",DP="@firebase/functions-compat",FP="@firebase/installations",MP="@firebase/installations-compat",LP="@firebase/messaging",BP="@firebase/messaging-compat",UP="@firebase/performance",WP="@firebase/performance-compat",zP="@firebase/remote-config",VP="@firebase/remote-config-compat",GP="@firebase/storage",HP="@firebase/storage-compat",QP="@firebase/firestore",YP="@firebase/firestore-compat",KP="firebase",qP="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="[DEFAULT]",JP={[gp]:"fire-core",[AP]:"fire-core-compat",[PP]:"fire-analytics",[IP]:"fire-analytics-compat",[kP]:"fire-app-check",[NP]:"fire-app-check-compat",[TP]:"fire-auth",[RP]:"fire-auth-compat",[jP]:"fire-rtdb",[OP]:"fire-rtdb-compat",[$P]:"fire-fn",[DP]:"fire-fn-compat",[FP]:"fire-iid",[MP]:"fire-iid-compat",[LP]:"fire-fcm",[BP]:"fire-fcm-compat",[UP]:"fire-perf",[WP]:"fire-perf-compat",[zP]:"fire-rc",[VP]:"fire-rc-compat",[GP]:"fire-gcs",[HP]:"fire-gcs-compat",[QP]:"fire-fst",[YP]:"fire-fst-compat","fire-js":"fire-js",[KP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Map,_p=new Map;function XP(t,e){try{t.container.addComponent(e)}catch(r){io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function fu(t){const e=t.name;if(_p.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,t);for(const r of cu.values())XP(r,t);return!0}function ZP(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},dn=new US("app","Firebase",eN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=qP;function HS(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:vp,automaticDataCollectionEnabled:!1},e),o=n.name;if(typeof o!="string"||!o)throw dn.create("bad-app-name",{appName:String(o)});if(r||(r=MS()),!r)throw dn.create("no-options");const i=cu.get(o);if(i){if(hp(r,i.options)&&hp(n,i.config))return i;throw dn.create("duplicate-app",{appName:o})}const s=new lP(o);for(const l of _p.values())s.addComponent(l);const a=new tN(r,n,s);return cu.set(o,a),a}function nN(t=vp){const e=cu.get(t);if(!e&&t===vp&&MS())return HS();if(!e)throw dn.create("no-app",{appName:t});return e}function ii(t,e,r){var n;let o=(n=JP[t])!==null&&n!==void 0?n:t;r&&(o+=`-${r}`);const i=o.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${o}" with version "${e}":`];i&&a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(a.join(" "));return}fu(new na(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebase-heartbeat-database",iN=1,oa="firebase-heartbeat-store";let Cf=null;function QS(){return Cf||(Cf=SP(oN,iN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(oa)}}}).catch(t=>{throw dn.create("idb-open",{originalErrorMessage:t.message})})),Cf}async function sN(t){try{return await(await QS()).transaction(oa).objectStore(oa).get(YS(t))}catch(e){if(e instanceof _a)io.warn(e.message);else{const r=dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(r.message)}}}async function kg(t,e){try{const n=(await QS()).transaction(oa,"readwrite");await n.objectStore(oa).put(e,YS(t)),await n.done}catch(r){if(r instanceof _a)io.warn(r.message);else{const n=dn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});io.warn(n.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=1024,lN=30*24*60*60*1e3;class uN{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new fN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Tg();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(o=>o.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const i=new Date(o.date).valueOf();return Date.now()-i<=lN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Tg(),{heartbeatsToSend:r,unsentEntries:n}=cN(this._heartbeatsCache.heartbeats),o=lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Tg(){return new Date().toISOString().substring(0,10)}function cN(t,e=aN){const r=[];let n=t.slice();for(const o of t){const i=r.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),Rg(r)>e){i.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),Rg(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class fN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KI()?qI().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await sN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const o=await this.read();return kg(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const o=await this.read();return kg(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Rg(t){return lu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){fu(new na("platform-logger",e=>new CP(e),"PRIVATE")),fu(new na("heartbeat",e=>new uN(e),"PRIVATE")),ii(gp,Ng,t),ii(gp,Ng,"esm2017"),ii("fire-js","")}dN("");var pN="firebase",hN="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(pN,hN,"app");const jg="@firebase/database",Og="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS="";function yN(t){KS=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:ra(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return mr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mN(e)}}catch{}return new gN},Dn=qS("localStorage"),xp=qS("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new zS("@firebase/database"),vN=function(){let t=1;return function(){return t++}}(),JS=function(t){const e=oP(t),r=new nP;r.update(e);const n=r.digest();return ey.encodeByteArray(n)},Sa=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Sa.apply(null,n):typeof n=="object"?e+=Be(n):e+=n,e+=" "}return e};let Un=null,$g=!0;const _N=function(t,e){k(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(si.logLevel=ge.VERBOSE,Un=si.log.bind(si),e&&xp.set("logging_enabled",!0)):typeof t=="function"?Un=t:(Un=null,xp.remove("logging_enabled"))},Ze=function(...t){if($g===!0&&($g=!1,Un===null&&xp.get("logging_enabled")===!0&&_N(!0)),Un){const e=Sa.apply(null,t);Un(e)}},wa=function(t){return function(...e){Ze(t,...e)}},Sp=function(...t){const e="FIREBASE INTERNAL ERROR: "+Sa(...t);si.error(e)},Or=function(...t){const e=`FIREBASE FATAL ERROR: ${Sa(...t)}`;throw si.error(e),new Error(e)},pt=function(...t){const e="FIREBASE WARNING: "+Sa(...t);si.warn(e)},xN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ry=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},SN=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},so="[MIN_NAME]",vn="[MAX_NAME]",po=function(t,e){if(t===e)return 0;if(t===so||e===vn)return-1;if(e===so||t===vn)return 1;{const r=Dg(t),n=Dg(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},wN=function(t,e){return t===e?0:t<e?-1:1},as=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Be(e))},ny=function(t){if(typeof t!="object"||t===null)return Be(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=Be(e[n]),r+=":",r+=ny(t[e[n]]);return r+="}",r},XS=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let o=0;o<r;o+=e)o+e>r?n.push(t.substring(o,r)):n.push(t.substring(o,o+e));return n};function rt(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const ZS=function(t){k(!ry(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let o,i,s,a,l;t===0?(i=0,s=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),i=a+n,s=Math.round(t*Math.pow(2,r-a)-Math.pow(2,r))):(i=0,s=Math.round(t/Math.pow(2,1-n-r))));const c=[];for(l=r;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(o?1:0),c.reverse();const p=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(p.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},EN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function bN(t,e){let r="Unknown Error";t==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?r="Client doesn't have permission to access the desired data.":t==="unavailable"&&(r="The service is unavailable");const n=new Error(t+" at "+e._path.toString()+": "+r);return n.code=t.toUpperCase(),n}const AN=new RegExp("^-?(0*)\\d{1,10}$"),IN=-2147483648,PN=2147483647,Dg=function(t){if(AN.test(t)){const e=Number(t);if(e>=IN&&e<=PN)return e}return null},Hi=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw pt("Exception was thrown by user callback.",r),e},Math.floor(0))}},NN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ts=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){pt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(Ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pt(e)}}class ai{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ai.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="5",e1="v",t1="s",r1="r",n1="f",o1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,i1="ls",s1="p",wp="ac",a1="websocket",l1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,r,n,o,i=!1,s="",a=!1,l=!1){this.secure=r,this.namespace=n,this.webSocketOnly=o,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Dn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function RN(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function c1(t,e,r){k(typeof e=="string","typeof type must == string"),k(typeof r=="object","typeof params must == object");let n;if(e===a1)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===l1)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);RN(t)&&(r.ns=t.namespace);const o=[];return rt(r,(i,s)=>{o.push(i+"="+s)}),n+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.counters_={}}incrementCounter(e,r=1){mr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return MI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf={},Af={};function iy(t){const e=t.toString();return bf[e]||(bf[e]=new jN),bf[e]}function ON(t,e){const r=t.toString();return Af[r]||(Af[r]=e()),Af[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<n.length;++o)n[o]&&Hi(()=>{this.onMessage_(n[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="start",DN="close",FN="pLPCommand",MN="pRTLPCB",f1="id",d1="pw",p1="ser",LN="cb",BN="seg",UN="ts",WN="d",zN="dframe",h1=1870,y1=30,VN=h1-y1,GN=25e3,HN=3e4;class Ko{constructor(e,r,n,o,i,s,a){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=o,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wa(e),this.stats_=iy(r),this.urlFn=l=>(this.appCheckToken&&(l[wp]=this.appCheckToken),c1(r,l1,l))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new $N(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HN)),SN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sy((...i)=>{const[s,a,l,c,p]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Fg)this.id=a,this.password=l;else if(s===DN)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...i)=>{const[s,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const n={};n[Fg]="t",n[p1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[LN]=this.scriptTagHolder.uniqueCallbackIdentifier),n[e1]=oy,this.transportSessionId&&(n[t1]=this.transportSessionId),this.lastSessionId&&(n[i1]=this.lastSessionId),this.applicationId&&(n[s1]=this.applicationId),this.appCheckToken&&(n[wp]=this.appCheckToken),typeof location<"u"&&location.hostname&&o1.test(location.hostname)&&(n[r1]=n1);const o=this.urlFn(n);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ko.forceAllow_=!0}static forceDisallow(){Ko.forceDisallow_=!0}static isAvailable(){return Ko.forceAllow_?!0:!Ko.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!EN()&&!CN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=Be(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=$S(r),o=XS(n,VN);for(let i=0;i<o.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[i]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[zN]="t",n[f1]=e,n[d1]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=Be(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class sy{constructor(e,r,n,o){this.onDisconnect=n,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=vN(),window[FN+this.uniqueCallbackIdentifier]=e,window[MN+this.uniqueCallbackIdentifier]=r,this.myIFrame=sy.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ze("frame writing exception"),a.stack&&Ze(a.stack),Ze(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ze("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[f1]=this.myID,e[d1]=this.myPW,e[p1]=this.currentSerial;let r=this.urlFn(e),n="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+y1+n.length<=h1;){const s=this.pendingSegs.shift();n=n+"&"+BN+o+"="+s.seg+"&"+UN+o+"="+s.ts+"&"+WN+o+"="+s.d,o++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},o=setTimeout(n,Math.floor(GN)),i=()=>{clearTimeout(o),n()};this.addTag(e,i)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const o=n.readyState;(!o||o==="loaded"||o==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Ze("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=16384,YN=45e3;let du=null;typeof MozWebSocket<"u"?du=MozWebSocket:typeof WebSocket<"u"&&(du=WebSocket);class qt{constructor(e,r,n,o,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=o,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wa(this.connId),this.stats_=iy(r),this.connURL=qt.connectionURL_(r,s,a,o,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,o,i){const s={};return s[e1]=oy,typeof location<"u"&&location.hostname&&o1.test(location.hostname)&&(s[r1]=n1),r&&(s[t1]=r),n&&(s[i1]=n),o&&(s[wp]=o),i&&(s[s1]=i),c1(e,a1,s)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dn.set("previous_websocket_failure",!0);try{let n;BS(),this.mySock=new du(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const o=n.message||n.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const o=n.message||n.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){qt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&du!==null&&!qt.forceDisallow_}static previouslyFailed(){return Dn.isInMemoryStorage||Dn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Dn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=ra(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(k(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=Be(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=XS(r,QN);n.length>1&&this.sendString_(String(n.length));for(let o=0;o<n.length;o++)this.sendString_(n[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(YN))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}qt.responsesRequiredToBeHealthy=2;qt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ko,qt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=qt&&qt.isAvailable();let n=r&&!qt.previouslyFailed();if(e.webSocketOnly&&(r||pt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[qt];else{const o=this.transports_=[];for(const i of ia.ALL_TRANSPORTS)i&&i.isAvailable()&&o.push(i);ia.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ia.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=6e4,qN=5e3,JN=10*1024,XN=100*1024,If="t",Mg="d",ZN="s",Lg="r",ek="e",Bg="o",Ug="a",Wg="n",zg="p",tk="h";class rk{constructor(e,r,n,o,i,s,a,l,c,p){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=o,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wa("c:"+this.id+":"),this.transportManager_=new ia(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ts(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>XN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(If in e){const r=e[If];r===Ug?this.upgradeIfSecondaryHealthy_():r===Lg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Bg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=as("t",e),n=as("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ug,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=as("t",e),n=as("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=as(If,e);if(Mg in e){const n=e[Mg];if(r===tk){const o=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(r===Wg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===ZN?this.onConnectionShutdown_(n):r===Lg?this.onReset_(n):r===ek?Sp("Server Error: "+n):r===Bg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Sp("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),oy!==n&&pt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Ts(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ts(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{put(e,r,n,o){}merge(e,r,n,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let o=0;o<n.length;o++)n[o].callback.apply(n[o].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const o=this.getInitialEvent(e);o&&r.apply(n,o)}off(e,r,n){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let i=0;i<o.length;i++)if(o[i].callback===r&&(!n||n===o[i].context)){o.splice(i,1);return}}validateEventType_(e){k(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends g1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!LS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pu}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=32,Gg=768;class ce{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[n]=this.pieces_[o],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}}function ae(){return new ce("")}function Y(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _n(t){return t.pieces_.length-t.pieceNum_}function ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ce(t.pieces_,e)}function ay(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function nk(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function sa(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function v1(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new ce(e,0)}function Te(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof ce)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let o=0;o<n.length;o++)n[o].length>0&&r.push(n[o])}return new ce(r,0)}function K(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){const r=Y(t),n=Y(e);if(r===null)return e;if(r===n)return ft(ve(t),ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ok(t,e){const r=sa(t,0),n=sa(e,0);for(let o=0;o<r.length&&o<n.length;o++){const i=po(r[o],n[o]);if(i!==0)return i}return r.length===n.length?0:r.length<n.length?-1:1}function ly(t,e){if(_n(t)!==_n(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function Ft(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(_n(t)>_n(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class ik{constructor(e,r){this.errorPrefix_=r,this.parts_=sa(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Sc(this.parts_[n]);_1(this)}}function sk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Sc(e),_1(t)}function ak(t){const e=t.parts_.pop();t.byteLength_-=Sc(e),t.parts_.length>0&&(t.byteLength_-=1)}function _1(t){if(t.byteLength_>Gg)throw new Error(t.errorPrefix_+"has a key path longer than "+Gg+" bytes ("+t.byteLength_+").");if(t.parts_.length>Vg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Vg+") or object contains a cycle "+Tn(t))}function Tn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends g1{constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new uy}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=1e3,lk=60*5*1e3,Hg=30*1e3,uk=1.3,ck=3e4,fk="server_kill",Qg=3;class Pr extends m1{constructor(e,r,n,o,i,s,a,l){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=o,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Pr.nextPersistentConnectionId_++,this.log_=wa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ls,this.maxReconnectDelay_=lk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!BS())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&pu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const o=++this.requestNumber_,i={r:o,a:e,b:r};this.log_(Be(i)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[o]=n)}get(e){this.initConnection_();const r=new va,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:s=>{const a=s.d;s.s==="ok"?r.resolve(a):r.reject(a)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),r.promise}listen(e,r,n,o){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:o,hashFn:r,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+n+" for "+o);const i={p:n},s="q";e.tag&&(i.q=r._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(s,i,a=>{const l=a.d,c=a.s;Pr.warnOnListenWarnings_(l,r),(this.listens.get(n)&&this.listens.get(n).get(o))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(n,o),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&mr(e,"w")){const n=Ai(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',i=r._path.toString();pt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=eP(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,o=>{const i=o.s,s=o.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+o),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,o)&&this.connected_&&this.sendUnlisten_(n,o,e._queryObject,r)}sendUnlisten_(e,r,n,o){this.log_("Unlisten on "+e+" for "+r);const i={p:e},s="n";o&&(i.q=n,i.t=o),this.sendRequest(s,i)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,o){const i={p:r,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,s=>{o&&setTimeout(()=>{o(s.s,s.d)},Math.floor(0))})}put(e,r,n,o){this.putInternal("p",e,r,n,o)}merge(e,r,n,o){this.putInternal("m",e,r,n,o)}putInternal(e,r,n,o,i){this.initConnection_();const s={p:r,d:n};i!==void 0&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:o}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,i=>{this.log_(r+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(i.s,i.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const i=n.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Be(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):Sp("Unrecognized action received from server: "+Be(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ls,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ls,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ck&&(this.reconnectDelay_=ls),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*uk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Pr.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(d){k(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);s?Ze("getToken() completed but was canceled"):(Ze("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new rk(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,h=>{pt(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(fk)},i))}catch(d){this.log_("Failed to get token: "+d),s||(this.repoInfo_.nodeAdmin&&pt(d),l())}}}interrupt(e){Ze("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ze("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Cg(this.interruptReasons_)&&(this.reconnectDelay_=ls,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(i=>ny(i)).join("$"):n="default";const o=this.removeListen_(e,n);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){const n=new ce(e).toString();let o;if(this.listens.has(n)){const i=this.listens.get(n);o=i.get(r),i.delete(r),i.size===0&&this.listens.delete(n)}else o=void 0;return o}onAuthRevoked_(e,r){Ze("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Qg&&(this.reconnectDelay_=Hg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Ze("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Qg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+KS.replace(/\./g,"-")]=1,LS()?e["framework.cordova"]=1:YI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=pu.getInstance().currentlyOnline();return Cg(this.interruptReasons_)&&e}}Pr.nextPersistentConnectionId_=0;Pr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new q(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new q(so,e),o=new q(so,r);return this.compare(n,o)!==0}minPost(){return q.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al;class x1 extends wc{static get __EMPTY_NODE(){return al}static set __EMPTY_NODE(e){al=e}compare(e,r){return po(e.name,r.name)}isDefinedOn(e){throw Gi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return q.MIN}maxPost(){return new q(vn,al)}makePost(e,r){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new q(e,al)}toString(){return".key"}}const Wn=new x1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,r,n,o,i=null){this.isReverse_=o,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=r?n(e.key,r):1,o&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ke{constructor(e,r,n,o,i){this.key=e,this.value=r,this.color=n??Ke.RED,this.left=o??_t.EMPTY_NODE,this.right=i??_t.EMPTY_NODE}copy(e,r,n,o,i){return new Ke(e??this.key,r??this.value,n??this.color,o??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let o=this;const i=n(e,o.key);return i<0?o=o.copy(null,null,null,o.left.insert(e,r,n),null):i===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,r,n)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return _t.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,o;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return _t.EMPTY_NODE;o=n.right.min_(),n=n.copy(o.key,o.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ke.RED=!0;Ke.BLACK=!1;class dk{copy(e,r,n,o,i){return this}insert(e,r,n){return new Ke(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _t{constructor(e,r=_t.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new _t(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Ke.BLACK,null,null))}remove(e){return new _t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ke.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,o=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return o?o.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(o=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ll(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new ll(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new ll(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new ll(this.root_,null,this.comparator_,!0,e)}}_t.EMPTY_NODE=new dk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t,e){return po(t.name,e.name)}function cy(t,e){return po(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep;function hk(t){Ep=t}const S1=function(t){return typeof t=="number"?"number:"+ZS(t):"string:"+t},w1=function(t){if(t.isLeafNode()){const e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mr(e,".sv"),"Priority must be a string or number.")}else k(t===Ep||t.isEmpty(),"priority of unexpected type.");k(t===Ep||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg;class Qe{constructor(e,r=Qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),w1(this.priorityNode_)}static set __childrenNodeConstructor(e){Yg=e}static get __childrenNodeConstructor(){return Yg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return K(e)?this:Y(e)===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=Y(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(k(n!==".priority"||_n(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+S1(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=ZS(this.value_):e+=this.value_,this.lazyHash_=JS(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qe.__childrenNodeConstructor?-1:(k(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,o=Qe.VALUE_TYPE_ORDER.indexOf(r),i=Qe.VALUE_TYPE_ORDER.indexOf(n);return k(o>=0,"Unknown leaf type: "+r),k(i>=0,"Unknown leaf type: "+n),o===i?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E1,C1;function yk(t){E1=t}function mk(t){C1=t}class gk extends wc{compare(e,r){const n=e.node.getPriority(),o=r.node.getPriority(),i=n.compareTo(o);return i===0?po(e.name,r.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return q.MIN}maxPost(){return new q(vn,new Qe("[PRIORITY-POST]",C1))}makePost(e,r){const n=E1(e);return new q(r,new Qe("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ae=new gk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=Math.log(2);class _k{constructor(e){const r=i=>parseInt(Math.log(i)/vk,10),n=i=>parseInt(Array(i+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const o=n(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hu=function(t,e,r,n){t.sort(e);const o=function(l,c){const p=c-l;let d,f;if(p===0)return null;if(p===1)return d=t[l],f=r?r(d):d,new Ke(f,d.node,Ke.BLACK,null,null);{const h=parseInt(p/2,10)+l,m=o(l,h),_=o(h+1,c);return d=t[h],f=r?r(d):d,new Ke(f,d.node,Ke.BLACK,m,_)}},i=function(l){let c=null,p=null,d=t.length;const f=function(m,_){const I=d-m,g=d;d-=m;const y=o(I+1,g),v=t[I],E=r?r(v):v;h(new Ke(E,v.node,_,null,y))},h=function(m){c?(c.left=m,c=m):(p=m,c=m)};for(let m=0;m<l.count;++m){const _=l.nextBitIsOne(),I=Math.pow(2,l.count-(m+1));_?f(I,Ke.BLACK):(f(I,Ke.BLACK),f(I,Ke.RED))}return p},s=new _k(t.length),a=i(s);return new _t(n||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf;const vo={};class br{constructor(e,r){this.indexes_=e,this.indexSet_=r}static get Default(){return k(vo&&Ae,"ChildrenNode.ts has not been loaded"),Pf=Pf||new br({".priority":vo},{".priority":Ae}),Pf}get(e){const r=Ai(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof _t?r:null}hasIndex(e){return mr(this.indexSet_,e.toString())}addIndex(e,r){k(e!==Wn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let o=!1;const i=r.getIterator(q.Wrap);let s=i.getNext();for(;s;)o=o||e.isDefinedOn(s.node),n.push(s),s=i.getNext();let a;o?a=hu(n,e.getCompare()):a=vo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const p=Object.assign({},this.indexes_);return p[l]=a,new br(p,c)}addToIndexes(e,r){const n=uu(this.indexes_,(o,i)=>{const s=Ai(this.indexSet_,i);if(k(s,"Missing index implementation for "+i),o===vo)if(s.isDefinedOn(e.node)){const a=[],l=r.getIterator(q.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),hu(a,s.getCompare())}else return vo;else{const a=r.get(e.name);let l=o;return a&&(l=l.remove(new q(e.name,a))),l.insert(e,e.node)}});return new br(n,this.indexSet_)}removeFromIndexes(e,r){const n=uu(this.indexes_,o=>{if(o===vo)return o;{const i=r.get(e.name);return i?o.remove(new q(e.name,i)):o}});return new br(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us;class H{constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&w1(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return us||(us=new H(new _t(cy),null,br.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||us}updatePriority(e){return this.children_.isEmpty()?this:new H(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?us:r}}getChild(e){const r=Y(e);return r===null?this:this.getImmediateChild(r).getChild(ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(k(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new q(e,r);let o,i;r.isEmpty()?(o=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(o=this.children_.insert(e,r),i=this.indexMap_.addToIndexes(n,this.children_));const s=o.isEmpty()?us:this.priorityNode_;return new H(o,s,i)}}updateChild(e,r){const n=Y(e);if(n===null)return r;{k(Y(e)!==".priority"||_n(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(n).updateChild(ve(e),r);return this.updateImmediateChild(n,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,o=0,i=!0;if(this.forEachChild(Ae,(s,a)=>{r[s]=a.val(e),n++,i&&H.INTEGER_REGEXP_.test(s)?o=Math.max(o,Number(s)):i=!1}),!e&&i&&o<2*n){const s=[];for(const a in r)s[a]=r[a];return s}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+S1(this.getPriority().val())+":"),this.forEachChild(Ae,(r,n)=>{const o=n.hash();o!==""&&(e+=":"+r+":"+o)}),this.lazyHash_=e===""?"":JS(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const o=this.resolveIndex_(n);if(o){const i=o.getPredecessorKey(new q(e,r));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new q(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new q(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,q.Wrap);let i=o.peek();for(;i!=null&&r.compare(i,e)<0;)o.getNext(),i=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,q.Wrap);let i=o.peek();for(;i!=null&&r.compare(i,e)>0;)o.getNext(),i=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ea?-1:0}withIndex(e){if(e===Wn||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new H(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Wn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(Ae),o=r.getIterator(Ae);let i=n.getNext(),s=o.getNext();for(;i&&s;){if(i.name!==s.name||!i.node.equals(s.node))return!1;i=n.getNext(),s=o.getNext()}return i===null&&s===null}else return!1;else return!1}}resolveIndex_(e){return e===Wn?null:this.indexMap_.get(e.toString())}}H.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xk extends H{constructor(){super(new _t(cy),H.EMPTY_NODE,br.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return H.EMPTY_NODE}isEmpty(){return!1}}const Ea=new xk;Object.defineProperties(q,{MIN:{value:new q(so,H.EMPTY_NODE)},MAX:{value:new q(vn,Ea)}});x1.__EMPTY_NODE=H.EMPTY_NODE;Qe.__childrenNodeConstructor=H;hk(Ea);mk(Ea);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=!0;function Le(t,e=null){if(t===null)return H.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Qe(r,Le(e))}if(!(t instanceof Array)&&Sk){const r=[];let n=!1;if(rt(t,(s,a)=>{if(s.substring(0,1)!=="."){const l=Le(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),r.push(new q(s,l)))}}),r.length===0)return H.EMPTY_NODE;const i=hu(r,pk,s=>s.name,cy);if(n){const s=hu(r,Ae.getCompare());return new H(i,Le(e),new br({".priority":s},{".priority":Ae}))}else return new H(i,Le(e),br.Default)}else{let r=H.EMPTY_NODE;return rt(t,(n,o)=>{if(mr(t,n)&&n.substring(0,1)!=="."){const i=Le(o);(i.isLeafNode()||!i.isEmpty())&&(r=r.updateImmediateChild(n,i))}}),r.updatePriority(Le(e))}}yk(Le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends wc{constructor(e){super(),this.indexPath_=e,k(!K(e)&&Y(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),o=this.extractChild(r.node),i=n.compareTo(o);return i===0?po(e.name,r.name):i}makePost(e,r){const n=Le(e),o=H.EMPTY_NODE.updateChild(this.indexPath_,n);return new q(r,o)}maxPost(){const e=H.EMPTY_NODE.updateChild(this.indexPath_,Ea);return new q(vn,e)}toString(){return sa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk extends wc{compare(e,r){const n=e.node.compareTo(r.node);return n===0?po(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return q.MIN}maxPost(){return q.MAX}makePost(e,r){const n=Le(e);return new q(r,n)}toString(){return".value"}}const b1=new wk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t){return{type:"value",snapshotNode:t}}function Ii(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function aa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function la(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function Ek(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.index_=e}updateChild(e,r,n,o,i,s){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(r);return a.getChild(o).equals(n.getChild(o))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(r)?s.trackChildChange(aa(r,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ii(r,n)):s.trackChildChange(la(r,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(e,r,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Ae,(o,i)=>{r.hasChild(o)||n.trackChildChange(aa(o,i))}),r.isLeafNode()||r.forEachChild(Ae,(o,i)=>{if(e.hasChild(o)){const s=e.getImmediateChild(o);s.equals(i)||n.trackChildChange(la(o,i,s))}else n.trackChildChange(Ii(o,i))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?H.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.indexedFilter_=new dy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ua.getStartPost_(e),this.endPost_=ua.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&n}updateChild(e,r,n,o,i,s){return this.matches(new q(r,n))||(n=H.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,n,o,i,s)}updateFullNode(e,r,n){r.isLeafNode()&&(r=H.EMPTY_NODE);let o=r.withIndex(this.index_);o=o.updatePriority(H.EMPTY_NODE);const i=this;return r.forEachChild(Ae,(s,a)=>{i.matches(new q(s,a))||(o=o.updateImmediateChild(s,H.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new ua(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,n,o,i,s){return this.rangedFilter_.matches(new q(r,n))||(n=H.EMPTY_NODE),e.getImmediateChild(r).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,n,o,i,s):this.fullLimitUpdateChild_(e,r,n,i,s)}updateFullNode(e,r,n){let o;if(r.isLeafNode()||r.isEmpty())o=H.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){o=H.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;i.hasNext()&&s<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))o=o.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{o=r.withIndex(this.index_),o=o.updatePriority(H.EMPTY_NODE);let i;this.reverse_?i=o.getReverseIterator(this.index_):i=o.getIterator(this.index_);let s=0;for(;i.hasNext();){const a=i.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:o=o.updateImmediateChild(a.name,H.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,n)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,n,o,i){let s;if(this.reverse_){const d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();const a=e;k(a.numChildren()===this.limit_,"");const l=new q(r,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),p=this.rangedFilter_.matches(l);if(a.hasChild(r)){const d=a.getImmediateChild(r);let f=o.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===r||a.hasChild(f.name));)f=o.getChildAfterChild(this.index_,f,this.reverse_);const h=f==null?1:s(f,l);if(p&&!n.isEmpty()&&h>=0)return i!=null&&i.trackChildChange(la(r,n,d)),a.updateImmediateChild(r,n);{i!=null&&i.trackChildChange(aa(r,d));const _=a.updateImmediateChild(r,H.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Ii(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return n.isEmpty()?e:p&&s(c,l)>=0?(i!=null&&(i.trackChildChange(aa(c.name,c.node)),i.trackChildChange(Ii(r,n))),a.updateImmediateChild(r,n).updateImmediateChild(c.name,H.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:so}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const e=new py;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bk(t){return t.loadsAllData()?new dy(t.getIndex()):t.hasLimit()?new Ck(t):new ua(t)}function Ak(t,e){const r=t.copy();return r.limitSet_=!0,r.limit_=e,r.viewFrom_="r",r}function Ik(t,e,r){const n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,r!=null?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function Pk(t,e,r){const n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,r!==void 0?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function Nk(t,e){const r=t.copy();return r.index_=e,r}function Kg(t){const e={};if(t.isDefault())return e;let r;if(t.index_===Ae?r="$priority":t.index_===b1?r="$value":t.index_===Wn?r="$key":(k(t.index_ instanceof fy,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=Be(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=Be(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Be(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Be(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Be(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function qg(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==Ae&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends m1{constructor(e,r,n,o){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=o,this.log_=wa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,r,n,o){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=yu.getListenId_(e,n),a={};this.listens_[s]=a;const l=Kg(e._queryParams);this.restRequest_(i+".json",l,(c,p)=>{let d=p;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,n),Ai(this.listens_,s)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",o(f,null)}})}unlisten(e,r){const n=yu.getListenId_(e,r);delete this.listens_[n]}get(e){const r=Kg(e._queryParams),n=e._path.toString(),o=new va;return this.restRequest_(n+".json",r,(i,s)=>{let a=s;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(n,a,!1,null),o.resolve(a)):o.reject(new Error(a))}),o.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,i])=>{o&&o.accessToken&&(r.auth=o.accessToken),i&&i.token&&(r.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rP(r);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ra(a.responseText)}catch{pt("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&pt("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.rootNode_=H.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){return{value:null,children:new Map}}function I1(t,e,r){if(K(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=Y(e);t.children.has(n)||t.children.set(n,mu());const o=t.children.get(n);e=ve(e),I1(o,e,r)}}function Cp(t,e,r){t.value!==null?r(e,t.value):Tk(t,(n,o)=>{const i=new ce(e.toString()+"/"+n);Cp(o,i,r)})}function Tk(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&rt(this.last_,(n,o)=>{r[n]=r[n]-o}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=10*1e3,jk=30*1e3,Ok=5*60*1e3;class $k{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Rk(e);const n=Jg+(jk-Jg)*Math.random();Ts(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;rt(e,(o,i)=>{i>0&&mr(this.statsToReport_,o)&&(r[o]=i,n=!0)}),n&&this.server_.reportStats(r),Ts(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ok))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Xt||(Xt={}));function hy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function my(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=Xt.ACK_USER_WRITE,this.source=hy()}operationForChild(e){if(K(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new ce(e));return new gu(ae(),r,this.revert)}}else return k(Y(this.path)===e,"operationForChild called for unrelated child."),new gu(ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,r){this.source=e,this.path=r,this.type=Xt.LISTEN_COMPLETE}operationForChild(e){return K(this.path)?new ca(this.source,ae()):new ca(this.source,ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=Xt.OVERWRITE}operationForChild(e){return K(this.path)?new ao(this.source,ae(),this.snap.getImmediateChild(e)):new ao(this.source,ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=Xt.MERGE}operationForChild(e){if(K(this.path)){const r=this.children.subtree(new ce(e));return r.isEmpty()?null:r.value?new ao(this.source,ae(),r.value):new Pi(this.source,ae(),r)}else return k(Y(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pi(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(K(e))return this.isFullyInitialized()&&!this.filtered_;const r=Y(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Fk(t,e,r,n){const o=[],i=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&i.push(Ek(s.childName,s.snapshotNode))}),cs(t,o,"child_removed",e,n,r),cs(t,o,"child_added",e,n,r),cs(t,o,"child_moved",i,n,r),cs(t,o,"child_changed",e,n,r),cs(t,o,"value",e,n,r),o}function cs(t,e,r,n,o,i){const s=n.filter(a=>a.type===r);s.sort((a,l)=>Lk(t,a,l)),s.forEach(a=>{const l=Mk(t,a,i);o.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Mk(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Lk(t,e,r){if(e.childName==null||r.childName==null)throw Gi("Should only compare child_ events.");const n=new q(e.childName,e.snapshotNode),o=new q(r.childName,r.snapshotNode);return t.index_.compare(n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e){return{eventCache:t,serverCache:e}}function Rs(t,e,r,n){return Ec(new xn(e,r,n),t.serverCache)}function P1(t,e,r,n){return Ec(t.eventCache,new xn(e,r,n))}function vu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function lo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf;const Bk=()=>(Nf||(Nf=new _t(wN)),Nf);class me{constructor(e,r=Bk()){this.value=e,this.children=r}static fromObject(e){let r=new me(null);return rt(e,(n,o)=>{r=r.set(new ce(n),o)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:ae(),value:this.value};if(K(e))return null;{const n=Y(e),o=this.children.get(n);if(o!==null){const i=o.findRootMostMatchingPathAndValue(ve(e),r);return i!=null?{path:Te(new ce(n),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(K(e))return this;{const r=Y(e),n=this.children.get(r);return n!==null?n.subtree(ve(e)):new me(null)}}set(e,r){if(K(e))return new me(r,this.children);{const n=Y(e),i=(this.children.get(n)||new me(null)).set(ve(e),r),s=this.children.insert(n,i);return new me(this.value,s)}}remove(e){if(K(e))return this.children.isEmpty()?new me(null):new me(null,this.children);{const r=Y(e),n=this.children.get(r);if(n){const o=n.remove(ve(e));let i;return o.isEmpty()?i=this.children.remove(r):i=this.children.insert(r,o),this.value===null&&i.isEmpty()?new me(null):new me(this.value,i)}else return this}}get(e){if(K(e))return this.value;{const r=Y(e),n=this.children.get(r);return n?n.get(ve(e)):null}}setTree(e,r){if(K(e))return r;{const n=Y(e),i=(this.children.get(n)||new me(null)).setTree(ve(e),r);let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),new me(this.value,s)}}fold(e){return this.fold_(ae(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((o,i)=>{n[o]=i.fold_(Te(e,o),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,ae(),r)}findOnPath_(e,r,n){const o=this.value?n(r,this.value):!1;if(o)return o;if(K(e))return null;{const i=Y(e),s=this.children.get(i);return s?s.findOnPath_(ve(e),Te(r,i),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,ae(),r)}foreachOnPath_(e,r,n){if(K(e))return this;{this.value&&n(r,this.value);const o=Y(e),i=this.children.get(o);return i?i.foreachOnPath_(ve(e),Te(r,o),n):new me(null)}}foreach(e){this.foreach_(ae(),e)}foreach_(e,r){this.children.inorderTraversal((n,o)=>{o.foreach_(Te(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.writeTree_=e}static empty(){return new tr(new me(null))}}function js(t,e,r){if(K(e))return new tr(new me(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const o=n.path;let i=n.value;const s=ft(o,e);return i=i.updateChild(s,r),new tr(t.writeTree_.set(o,i))}else{const o=new me(r),i=t.writeTree_.setTree(e,o);return new tr(i)}}}function bp(t,e,r){let n=t;return rt(r,(o,i)=>{n=js(n,Te(e,o),i)}),n}function Xg(t,e){if(K(e))return tr.empty();{const r=t.writeTree_.setTree(e,new me(null));return new tr(r)}}function Ap(t,e){return ho(t,e)!=null}function ho(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(ft(r.path,e)):null}function Zg(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ae,(n,o)=>{e.push(new q(n,o))}):t.writeTree_.children.inorderTraversal((n,o)=>{o.value!=null&&e.push(new q(n,o.value))}),e}function pn(t,e){if(K(e))return t;{const r=ho(t,e);return r!=null?new tr(new me(r)):new tr(t.writeTree_.subtree(e))}}function Ip(t){return t.writeTree_.isEmpty()}function Ni(t,e){return N1(ae(),t.writeTree_,e)}function N1(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((o,i)=>{o===".priority"?(k(i.value!==null,"Priority writes must always be leaf nodes"),n=i.value):r=N1(Te(t,o),i,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Te(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e){return j1(e,t)}function Uk(t,e,r,n,o){k(n>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:o}),o&&(t.visibleWrites=js(t.visibleWrites,e,r)),t.lastWriteId=n}function Wk(t,e,r,n){k(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:r,writeId:n,visible:!0}),t.visibleWrites=bp(t.visibleWrites,e,r),t.lastWriteId=n}function zk(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function Vk(t,e){const r=t.allWrites.findIndex(a=>a.writeId===e);k(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let o=n.visible,i=!1,s=t.allWrites.length-1;for(;o&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=r&&Gk(a,n.path)?o=!1:Ft(n.path,a.path)&&(i=!0)),s--}if(o){if(i)return Hk(t),!0;if(n.snap)t.visibleWrites=Xg(t.visibleWrites,n.path);else{const a=n.children;rt(a,l=>{t.visibleWrites=Xg(t.visibleWrites,Te(n.path,l))})}return!0}else return!1}function Gk(t,e){if(t.snap)return Ft(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&Ft(Te(t.path,r),e))return!0;return!1}function Hk(t){t.visibleWrites=k1(t.allWrites,Qk,ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Qk(t){return t.visible}function k1(t,e,r){let n=tr.empty();for(let o=0;o<t.length;++o){const i=t[o];if(e(i)){const s=i.path;let a;if(i.snap)Ft(r,s)?(a=ft(r,s),n=js(n,a,i.snap)):Ft(s,r)&&(a=ft(s,r),n=js(n,ae(),i.snap.getChild(a)));else if(i.children){if(Ft(r,s))a=ft(r,s),n=bp(n,a,i.children);else if(Ft(s,r))if(a=ft(s,r),K(a))n=bp(n,ae(),i.children);else{const l=Ai(i.children,Y(a));if(l){const c=l.getChild(ve(a));n=js(n,ae(),c)}}}else throw Gi("WriteRecord should have .snap or .children")}}return n}function T1(t,e,r,n,o){if(!n&&!o){const i=ho(t.visibleWrites,e);if(i!=null)return i;{const s=pn(t.visibleWrites,e);if(Ip(s))return r;if(r==null&&!Ap(s,ae()))return null;{const a=r||H.EMPTY_NODE;return Ni(s,a)}}}else{const i=pn(t.visibleWrites,e);if(!o&&Ip(i))return r;if(!o&&r==null&&!Ap(i,ae()))return null;{const s=function(c){return(c.visible||o)&&(!n||!~n.indexOf(c.writeId))&&(Ft(c.path,e)||Ft(e,c.path))},a=k1(t.allWrites,s,e),l=r||H.EMPTY_NODE;return Ni(a,l)}}}function Yk(t,e,r){let n=H.EMPTY_NODE;const o=ho(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Ae,(i,s)=>{n=n.updateImmediateChild(i,s)}),n;if(r){const i=pn(t.visibleWrites,e);return r.forEachChild(Ae,(s,a)=>{const l=Ni(pn(i,new ce(s)),a);n=n.updateImmediateChild(s,l)}),Zg(i).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{const i=pn(t.visibleWrites,e);return Zg(i).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function Kk(t,e,r,n,o){k(n||o,"Either existingEventSnap or existingServerSnap must exist");const i=Te(e,r);if(Ap(t.visibleWrites,i))return null;{const s=pn(t.visibleWrites,i);return Ip(s)?o.getChild(r):Ni(s,o.getChild(r))}}function qk(t,e,r,n){const o=Te(e,r),i=ho(t.visibleWrites,o);if(i!=null)return i;if(n.isCompleteForChild(r)){const s=pn(t.visibleWrites,o);return Ni(s,n.getNode().getImmediateChild(r))}else return null}function Jk(t,e){return ho(t.visibleWrites,e)}function Xk(t,e,r,n,o,i,s){let a;const l=pn(t.visibleWrites,e),c=ho(l,ae());if(c!=null)a=c;else if(r!=null)a=Ni(l,r);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){const p=[],d=s.getCompare(),f=i?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s);let h=f.getNext();for(;h&&p.length<o;)d(h,n)!==0&&p.push(h),h=f.getNext();return p}else return[]}function Zk(){return{visibleWrites:tr.empty(),allWrites:[],lastWriteId:-1}}function _u(t,e,r,n){return T1(t.writeTree,t.treePath,e,r,n)}function gy(t,e){return Yk(t.writeTree,t.treePath,e)}function ev(t,e,r,n){return Kk(t.writeTree,t.treePath,e,r,n)}function xu(t,e){return Jk(t.writeTree,Te(t.treePath,e))}function eT(t,e,r,n,o,i){return Xk(t.writeTree,t.treePath,e,r,n,o,i)}function vy(t,e,r){return qk(t.writeTree,t.treePath,e,r)}function R1(t,e){return j1(Te(t.treePath,e),t.writeTree)}function j1(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;k(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),k(n!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(n);if(o){const i=o.type;if(r==="child_added"&&i==="child_removed")this.changeMap.set(n,la(n,e.snapshotNode,o.snapshotNode));else if(r==="child_removed"&&i==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&i==="child_changed")this.changeMap.set(n,aa(n,o.oldSnap));else if(r==="child_changed"&&i==="child_added")this.changeMap.set(n,Ii(n,e.snapshotNode));else if(r==="child_changed"&&i==="child_changed")this.changeMap.set(n,la(n,e.snapshotNode,o.oldSnap));else throw Gi("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const O1=new rT;class _y{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vy(this.writes_,e,n)}}getChildAfterChild(e,r,n){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:lo(this.viewCache_),i=eT(this.writes_,o,r,1,n,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t){return{filter:t}}function oT(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function iT(t,e,r,n,o){const i=new tT;let s,a;if(r.type===Xt.OVERWRITE){const c=r;c.source.fromUser?s=Pp(t,e,c.path,c.snap,n,o,i):(k(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!K(c.path),s=Su(t,e,c.path,c.snap,n,o,a,i))}else if(r.type===Xt.MERGE){const c=r;c.source.fromUser?s=aT(t,e,c.path,c.children,n,o,i):(k(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=Np(t,e,c.path,c.children,n,o,a,i))}else if(r.type===Xt.ACK_USER_WRITE){const c=r;c.revert?s=cT(t,e,c.path,n,o,i):s=lT(t,e,c.path,c.affectedTree,n,o,i)}else if(r.type===Xt.LISTEN_COMPLETE)s=uT(t,e,r.path,n,i);else throw Gi("Unknown operation type: "+r.type);const l=i.getChanges();return sT(e,s,l),{viewCache:s,changes:l}}function sT(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const o=n.getNode().isLeafNode()||n.getNode().isEmpty(),i=vu(t);(r.length>0||!t.eventCache.isFullyInitialized()||o&&!n.getNode().equals(i)||!n.getNode().getPriority().equals(i.getPriority()))&&r.push(A1(vu(e)))}}function $1(t,e,r,n,o,i){const s=e.eventCache;if(xu(n,r)!=null)return e;{let a,l;if(K(r))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=lo(e),p=c instanceof H?c:H.EMPTY_NODE,d=gy(n,p);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=_u(n,lo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=Y(r);if(c===".priority"){k(_n(r)===1,"Can't have a priority with additional path components");const p=s.getNode();l=e.serverCache.getNode();const d=ev(n,r,p,l);d!=null?a=t.filter.updatePriority(p,d):a=s.getNode()}else{const p=ve(r);let d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const f=ev(n,r,s.getNode(),l);f!=null?d=s.getNode().getImmediateChild(c).updateChild(p,f):d=s.getNode().getImmediateChild(c)}else d=vy(n,c,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),c,d,p,o,i):a=s.getNode()}}return Rs(e,a,s.isFullyInitialized()||K(r),t.filter.filtersNodes())}}function Su(t,e,r,n,o,i,s,a){const l=e.serverCache;let c;const p=s?t.filter:t.filter.getIndexedFilter();if(K(r))c=p.updateFullNode(l.getNode(),n,null);else if(p.filtersNodes()&&!l.isFiltered()){const h=l.getNode().updateChild(r,n);c=p.updateFullNode(l.getNode(),h,null)}else{const h=Y(r);if(!l.isCompleteForPath(r)&&_n(r)>1)return e;const m=ve(r),I=l.getNode().getImmediateChild(h).updateChild(m,n);h===".priority"?c=p.updatePriority(l.getNode(),I):c=p.updateChild(l.getNode(),h,I,m,O1,null)}const d=P1(e,c,l.isFullyInitialized()||K(r),p.filtersNodes()),f=new _y(o,d,i);return $1(t,d,r,o,f,a)}function Pp(t,e,r,n,o,i,s){const a=e.eventCache;let l,c;const p=new _y(o,e,i);if(K(r))c=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=Rs(e,c,!0,t.filter.filtersNodes());else{const d=Y(r);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),n),l=Rs(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=ve(r),h=a.getNode().getImmediateChild(d);let m;if(K(f))m=n;else{const _=p.getCompleteChild(d);_!=null?ay(f)===".priority"&&_.getChild(v1(f)).isEmpty()?m=_:m=_.updateChild(f,n):m=H.EMPTY_NODE}if(h.equals(m))l=e;else{const _=t.filter.updateChild(a.getNode(),d,m,f,p,s);l=Rs(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function tv(t,e){return t.eventCache.isCompleteForChild(e)}function aT(t,e,r,n,o,i,s){let a=e;return n.foreach((l,c)=>{const p=Te(r,l);tv(e,Y(p))&&(a=Pp(t,a,p,c,o,i,s))}),n.foreach((l,c)=>{const p=Te(r,l);tv(e,Y(p))||(a=Pp(t,a,p,c,o,i,s))}),a}function rv(t,e,r){return r.foreach((n,o)=>{e=e.updateChild(n,o)}),e}function Np(t,e,r,n,o,i,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;K(r)?c=n:c=new me(null).setTree(r,n);const p=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(p.hasChild(d)){const h=e.serverCache.getNode().getImmediateChild(d),m=rv(t,h,f);l=Su(t,l,new ce(d),m,o,i,s,a)}}),c.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!p.hasChild(d)&&!h){const m=e.serverCache.getNode().getImmediateChild(d),_=rv(t,m,f);l=Su(t,l,new ce(d),_,o,i,s,a)}}),l}function lT(t,e,r,n,o,i,s){if(xu(o,r)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(K(r)&&l.isFullyInitialized()||l.isCompleteForPath(r))return Su(t,e,r,l.getNode().getChild(r),o,i,a,s);if(K(r)){let c=new me(null);return l.getNode().forEachChild(Wn,(p,d)=>{c=c.set(new ce(p),d)}),Np(t,e,r,c,o,i,a,s)}else return e}else{let c=new me(null);return n.foreach((p,d)=>{const f=Te(r,p);l.isCompleteForPath(f)&&(c=c.set(p,l.getNode().getChild(f)))}),Np(t,e,r,c,o,i,a,s)}}function uT(t,e,r,n,o){const i=e.serverCache,s=P1(e,i.getNode(),i.isFullyInitialized()||K(r),i.isFiltered());return $1(t,s,r,n,O1,o)}function cT(t,e,r,n,o,i){let s;if(xu(n,r)!=null)return e;{const a=new _y(n,e,o),l=e.eventCache.getNode();let c;if(K(r)||Y(r)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=_u(n,lo(e));else{const d=e.serverCache.getNode();k(d instanceof H,"serverChildren would be complete if leaf node"),p=gy(n,d)}p=p,c=t.filter.updateFullNode(l,p,i)}else{const p=Y(r);let d=vy(n,p,e.serverCache);d==null&&e.serverCache.isCompleteForChild(p)&&(d=l.getImmediateChild(p)),d!=null?c=t.filter.updateChild(l,p,d,ve(r),a,i):e.eventCache.getNode().hasChild(p)?c=t.filter.updateChild(l,p,H.EMPTY_NODE,ve(r),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=_u(n,lo(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,i)))}return s=e.serverCache.isFullyInitialized()||xu(n,ae())!=null,Rs(e,c,s,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,o=new dy(n.getIndex()),i=bk(n);this.processor_=nT(i);const s=r.serverCache,a=r.eventCache,l=o.updateFullNode(H.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(H.EMPTY_NODE,a.getNode(),null),p=new xn(l,s.isFullyInitialized(),o.filtersNodes()),d=new xn(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ec(d,p),this.eventGenerator_=new Dk(this.query_)}get query(){return this.query_}}function dT(t){return t.viewCache_.serverCache.getNode()}function pT(t){return vu(t.viewCache_)}function hT(t,e){const r=lo(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!K(e)&&!r.getImmediateChild(Y(e)).isEmpty())?r.getChild(e):null}function nv(t){return t.eventRegistrations_.length===0}function yT(t,e){t.eventRegistrations_.push(e)}function ov(t,e,r){const n=[];if(r){k(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(i=>{const s=i.createCancelEvent(r,o);s&&n.push(s)})}if(e){let o=[];for(let i=0;i<t.eventRegistrations_.length;++i){const s=t.eventRegistrations_[i];if(!s.matches(e))o.push(s);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return n}function iv(t,e,r,n){e.type===Xt.MERGE&&e.source.queryId!==null&&(k(lo(t.viewCache_),"We should always have a full cache before handling merges"),k(vu(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,i=iT(t.processor_,o,e,r,n);return oT(t.processor_,i.viewCache),k(i.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,D1(t,i.changes,i.viewCache.eventCache.getNode(),null)}function mT(t,e){const r=t.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ae,(i,s)=>{n.push(Ii(i,s))}),r.isFullyInitialized()&&n.push(A1(r.getNode())),D1(t,n,r.getNode(),e)}function D1(t,e,r,n){const o=n?[n]:t.eventRegistrations_;return Fk(t.eventGenerator_,e,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu;class F1{constructor(){this.views=new Map}}function gT(t){k(!wu,"__referenceConstructor has already been defined"),wu=t}function vT(){return k(wu,"Reference.ts has not been loaded"),wu}function _T(t){return t.views.size===0}function xy(t,e,r,n){const o=e.source.queryId;if(o!==null){const i=t.views.get(o);return k(i!=null,"SyncTree gave us an op for an invalid query."),iv(i,e,r,n)}else{let i=[];for(const s of t.views.values())i=i.concat(iv(s,e,r,n));return i}}function M1(t,e,r,n,o){const i=e._queryIdentifier,s=t.views.get(i);if(!s){let a=_u(r,o?n:null),l=!1;a?l=!0:n instanceof H?(a=gy(r,n),l=!1):(a=H.EMPTY_NODE,l=!1);const c=Ec(new xn(a,l,!1),new xn(n,o,!1));return new fT(e,c)}return s}function xT(t,e,r,n,o,i){const s=M1(t,e,n,o,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),yT(s,r),mT(s,r)}function ST(t,e,r,n){const o=e._queryIdentifier,i=[];let s=[];const a=Sn(t);if(o==="default")for(const[l,c]of t.views.entries())s=s.concat(ov(c,r,n)),nv(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(o);l&&(s=s.concat(ov(l,r,n)),nv(l)&&(t.views.delete(o),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Sn(t)&&i.push(new(vT())(e._repo,e._path)),{removed:i,events:s}}function L1(t){const e=[];for(const r of t.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function hn(t,e){let r=null;for(const n of t.views.values())r=r||hT(n,e);return r}function B1(t,e){if(e._queryParams.loadsAllData())return bc(t);{const n=e._queryIdentifier;return t.views.get(n)}}function U1(t,e){return B1(t,e)!=null}function Sn(t){return bc(t)!=null}function bc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu;function wT(t){k(!Eu,"__referenceConstructor has already been defined"),Eu=t}function ET(){return k(Eu,"Reference.ts has not been loaded"),Eu}let CT=1;class sv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new me(null),this.pendingWriteTree_=Zk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function W1(t,e,r,n,o){return Uk(t.pendingWriteTree_,e,r,n,o),o?Qi(t,new ao(hy(),e,r)):[]}function bT(t,e,r,n){Wk(t.pendingWriteTree_,e,r,n);const o=me.fromObject(r);return Qi(t,new Pi(hy(),e,o))}function Xr(t,e,r=!1){const n=zk(t.pendingWriteTree_,e);if(Vk(t.pendingWriteTree_,e)){let i=new me(null);return n.snap!=null?i=i.set(ae(),!0):rt(n.children,s=>{i=i.set(new ce(s),!0)}),Qi(t,new gu(n.path,i,r))}else return[]}function Ca(t,e,r){return Qi(t,new ao(yy(),e,r))}function AT(t,e,r){const n=me.fromObject(r);return Qi(t,new Pi(yy(),e,n))}function IT(t,e){return Qi(t,new ca(yy(),e))}function PT(t,e,r){const n=wy(t,r);if(n){const o=Ey(n),i=o.path,s=o.queryId,a=ft(i,e),l=new ca(my(s),a);return Cy(t,i,l)}else return[]}function Cu(t,e,r,n,o=!1){const i=e._path,s=t.syncPointTree_.get(i);let a=[];if(s&&(e._queryIdentifier==="default"||U1(s,e))){const l=ST(s,e,r,n);_T(s)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!o){const p=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,h)=>Sn(h));if(p&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const h=TT(f);for(let m=0;m<h.length;++m){const _=h[m],I=_.query,g=H1(t,_);t.listenProvider_.startListening(Os(I),fa(t,I),g.hashFn,g.onComplete)}}}!d&&c.length>0&&!n&&(p?t.listenProvider_.stopListening(Os(e),null):c.forEach(f=>{const h=t.queryToTagMap.get(Ac(f));t.listenProvider_.stopListening(Os(f),h)}))}RT(t,c)}return a}function z1(t,e,r,n){const o=wy(t,n);if(o!=null){const i=Ey(o),s=i.path,a=i.queryId,l=ft(s,e),c=new ao(my(a),l,r);return Cy(t,s,c)}else return[]}function NT(t,e,r,n){const o=wy(t,n);if(o){const i=Ey(o),s=i.path,a=i.queryId,l=ft(s,e),c=me.fromObject(r),p=new Pi(my(a),l,c);return Cy(t,s,p)}else return[]}function kp(t,e,r,n=!1){const o=e._path;let i=null,s=!1;t.syncPointTree_.foreachOnPath(o,(f,h)=>{const m=ft(f,o);i=i||hn(h,m),s=s||Sn(h)});let a=t.syncPointTree_.get(o);a?(s=s||Sn(a),i=i||hn(a,ae())):(a=new F1,t.syncPointTree_=t.syncPointTree_.set(o,a));let l;i!=null?l=!0:(l=!1,i=H.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((h,m)=>{const _=hn(m,ae());_&&(i=i.updateImmediateChild(h,_))}));const c=U1(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Ac(e);k(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=jT();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}const p=Cc(t.pendingWriteTree_,o);let d=xT(a,e,r,p,i,l);if(!c&&!s&&!n){const f=B1(a,e);d=d.concat(OT(t,e,f))}return d}function Sy(t,e,r){const o=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(s,a)=>{const l=ft(s,e),c=hn(a,l);if(c)return c});return T1(o,e,i,r,!0)}function kT(t,e){const r=e._path;let n=null;t.syncPointTree_.foreachOnPath(r,(c,p)=>{const d=ft(c,r);n=n||hn(p,d)});let o=t.syncPointTree_.get(r);o?n=n||hn(o,ae()):(o=new F1,t.syncPointTree_=t.syncPointTree_.set(r,o));const i=n!=null,s=i?new xn(n,!0,!1):null,a=Cc(t.pendingWriteTree_,e._path),l=M1(o,e,a,i?s.getNode():H.EMPTY_NODE,i);return pT(l)}function Qi(t,e){return V1(e,t.syncPointTree_,null,Cc(t.pendingWriteTree_,ae()))}function V1(t,e,r,n){if(K(t.path))return G1(t,e,r,n);{const o=e.get(ae());r==null&&o!=null&&(r=hn(o,ae()));let i=[];const s=Y(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const c=r?r.getImmediateChild(s):null,p=R1(n,s);i=i.concat(V1(a,l,c,p))}return o&&(i=i.concat(xy(o,t,n,r))),i}}function G1(t,e,r,n){const o=e.get(ae());r==null&&o!=null&&(r=hn(o,ae()));let i=[];return e.children.inorderTraversal((s,a)=>{const l=r?r.getImmediateChild(s):null,c=R1(n,s),p=t.operationForChild(s);p&&(i=i.concat(G1(p,a,l,c)))}),o&&(i=i.concat(xy(o,t,n,r))),i}function H1(t,e){const r=e.query,n=fa(t,r);return{hashFn:()=>(dT(e)||H.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return n?PT(t,r._path,n):IT(t,r._path);{const i=bN(o,r);return Cu(t,r,null,i)}}}}function fa(t,e){const r=Ac(e);return t.queryToTagMap.get(r)}function Ac(t){return t._path.toString()+"$"+t._queryIdentifier}function wy(t,e){return t.tagToQueryMap.get(e)}function Ey(t){const e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ce(t.substr(0,e))}}function Cy(t,e,r){const n=t.syncPointTree_.get(e);k(n,"Missing sync point for query tag that we're tracking");const o=Cc(t.pendingWriteTree_,e);return xy(n,r,o,null)}function TT(t){return t.fold((e,r,n)=>{if(r&&Sn(r))return[bc(r)];{let o=[];return r&&(o=L1(r)),rt(n,(i,s)=>{o=o.concat(s)}),o}})}function Os(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ET())(t._repo,t._path):t}function RT(t,e){for(let r=0;r<e.length;++r){const n=e[r];if(!n._queryParams.loadsAllData()){const o=Ac(n),i=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(i)}}}function jT(){return CT++}function OT(t,e,r){const n=e._path,o=fa(t,e),i=H1(t,r),s=t.listenProvider_.startListening(Os(e),o,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(n);if(o)k(!Sn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,p,d)=>{if(!K(c)&&p&&Sn(p))return[bc(p).query];{let f=[];return p&&(f=f.concat(L1(p).map(h=>h.query))),rt(d,(h,m)=>{f=f.concat(m)}),f}});for(let c=0;c<l.length;++c){const p=l[c];t.listenProvider_.stopListening(Os(p),fa(t,p))}}return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new by(r)}node(){return this.node_}}class Ay{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Te(this.path_,e);return new Ay(this.syncTree_,r)}node(){return Sy(this.syncTree_,this.path_)}}const $T=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},av=function(t,e,r){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DT(t[".sv"],e,r);if(typeof t[".sv"]=="object")return FT(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DT=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:k(!1,"Unexpected server value: "+t)}},FT=function(t,e,r){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&k(!1,"Unexpected increment value: "+n);const o=e.node();if(k(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return n;const s=o.getValue();return typeof s!="number"?n:s+n},Q1=function(t,e,r,n){return Iy(e,new Ay(r,t),n)},Y1=function(t,e,r){return Iy(t,new by(e),r)};function Iy(t,e,r){const n=t.getPriority().val(),o=av(n,e.getImmediateChild(".priority"),r);let i;if(t.isLeafNode()){const s=t,a=av(s.getValue(),e,r);return a!==s.getValue()||o!==s.getPriority().val()?new Qe(a,Le(o)):t}else{const s=t;return i=s,o!==s.getPriority().val()&&(i=i.updatePriority(new Qe(o))),s.forEachChild(Ae,(a,l)=>{const c=Iy(l,e.getImmediateChild(a),r);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function Ny(t,e){let r=e instanceof ce?e:new ce(e),n=t,o=Y(r);for(;o!==null;){const i=Ai(n.node.children,o)||{children:{},childCount:0};n=new Py(o,n,i),r=ve(r),o=Y(r)}return n}function Yi(t){return t.node.value}function K1(t,e){t.node.value=e,Tp(t)}function q1(t){return t.node.childCount>0}function MT(t){return Yi(t)===void 0&&!q1(t)}function Ic(t,e){rt(t.node.children,(r,n)=>{e(new Py(r,t,n))})}function J1(t,e,r,n){r&&!n&&e(t),Ic(t,o=>{J1(o,e,!0,n)}),r&&n&&e(t)}function LT(t,e,r){let n=r?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function ba(t){return new ce(t.parent===null?t.name:ba(t.parent)+"/"+t.name)}function Tp(t){t.parent!==null&&BT(t.parent,t.name,t)}function BT(t,e,r){const n=MT(r),o=mr(t.node.children,e);n&&o?(delete t.node.children[e],t.node.childCount--,Tp(t)):!n&&!o&&(t.node.children[e]=r.node,t.node.childCount++,Tp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=/[\[\].#$\/\u0000-\u001F\u007F]/,WT=/[\[\].#$\u0000-\u001F\u007F]/,kf=10*1024*1024,Pc=function(t){return typeof t=="string"&&t.length!==0&&!UT.test(t)},X1=function(t){return typeof t=="string"&&t.length!==0&&!WT.test(t)},zT=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),X1(t)},Rp=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ry(t)||t&&typeof t=="object"&&mr(t,".sv")},Aa=function(t,e,r,n){n&&e===void 0||Nc(xa(t,"value"),e,r)},Nc=function(t,e,r){const n=r instanceof ce?new ik(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+Tn(n));if(typeof e=="function")throw new Error(t+"contains a function "+Tn(n)+" with contents = "+e.toString());if(ry(e))throw new Error(t+"contains "+e.toString()+" "+Tn(n));if(typeof e=="string"&&e.length>kf/3&&Sc(e)>kf)throw new Error(t+"contains a string greater than "+kf+" utf8 bytes "+Tn(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,i=!1;if(rt(e,(s,a)=>{if(s===".value")o=!0;else if(s!==".priority"&&s!==".sv"&&(i=!0,!Pc(s)))throw new Error(t+" contains an invalid key ("+s+") "+Tn(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sk(n,s),Nc(t,a,n),ak(n)}),o&&i)throw new Error(t+' contains ".value" child '+Tn(n)+" in addition to actual children.")}},VT=function(t,e){let r,n;for(r=0;r<e.length;r++){n=e[r];const i=sa(n);for(let s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!Pc(i[s]))throw new Error(t+"contains an invalid key ("+i[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(ok);let o=null;for(r=0;r<e.length;r++){if(n=e[r],o!==null&&Ft(o,n))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+n.toString());o=n}},GT=function(t,e,r,n){if(n&&e===void 0)return;const o=xa(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const i=[];rt(e,(s,a)=>{const l=new ce(s);if(Nc(o,a,Te(r,l)),ay(l)===".priority"&&!Rp(a))throw new Error(o+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(l)}),VT(o,i)},HT=function(t,e,r,n){if(!(n&&r===void 0)&&!Pc(r))throw new Error(xa(t,e)+'was an invalid key = "'+r+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ky=function(t,e,r,n){if(!(n&&r===void 0)&&!X1(r))throw new Error(xa(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},QT=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),ky(t,e,r,n)},Z1=function(t,e){if(Y(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},YT=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Pc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!zT(r))throw new Error(xa(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kc(t,e){let r=null;for(let n=0;n<e.length;n++){const o=e[n],i=o.getPath();r!==null&&!ly(i,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:i}),r.events.push(o)}r&&t.eventLists_.push(r)}function ew(t,e,r){kc(t,r),tw(t,n=>ly(n,e))}function Ut(t,e,r){kc(t,r),tw(t,n=>Ft(n,e)||Ft(e,n))}function tw(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const o=t.eventLists_[n];if(o){const i=o.path;e(i)?(qT(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function qT(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();Un&&Ze("event: "+r.toString()),Hi(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="repo_interrupt",XT=25;class ZT{constructor(e,r,n,o){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mu(),this.transactionQueueTree_=new Py,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function eR(t,e,r){if(t.stats_=iy(t.repoInfo_),t.forceRestClient_||NN())t.server_=new yu(t.repoInfo_,(n,o,i,s)=>{lv(t,n,o,i,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>uv(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Pr(t.repoInfo_,e,(n,o,i,s)=>{lv(t,n,o,i,s)},n=>{uv(t,n)},n=>{tR(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=ON(t.repoInfo_,()=>new $k(t.stats_,t.server_)),t.infoData_=new kk,t.infoSyncTree_=new sv({startListening:(n,o,i,s)=>{let a=[];const l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=Ca(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Ty(t,"connected",!1),t.serverSyncTree_=new sv({startListening:(n,o,i,s)=>(t.server_.listen(n,i,o,(a,l)=>{const c=s(a,l);Ut(t.eventQueue_,n._path,c)}),[]),stopListening:(n,o)=>{t.server_.unlisten(n,o)}})}function rw(t){const r=t.infoData_.getNode(new ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Tc(t){return $T({timestamp:rw(t)})}function lv(t,e,r,n,o){t.dataUpdateCount++;const i=new ce(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let s=[];if(o)if(n){const l=uu(r,c=>Le(c));s=NT(t.serverSyncTree_,i,l,o)}else{const l=Le(r);s=z1(t.serverSyncTree_,i,l,o)}else if(n){const l=uu(r,c=>Le(c));s=AT(t.serverSyncTree_,i,l)}else{const l=Le(r);s=Ca(t.serverSyncTree_,i,l)}let a=i;s.length>0&&(a=ki(t,i)),Ut(t.eventQueue_,a,s)}function uv(t,e){Ty(t,"connected",e),e===!1&&iR(t)}function tR(t,e){rt(e,(r,n)=>{Ty(t,r,n)})}function Ty(t,e,r){const n=new ce("/.info/"+e),o=Le(r);t.infoData_.updateSnapshot(n,o);const i=Ca(t.infoSyncTree_,n,o);Ut(t.eventQueue_,n,i)}function Ry(t){return t.nextWriteId_++}function rR(t,e,r){const n=kT(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(o=>{const i=Le(o).withIndex(e._queryParams.getIndex());kp(t.serverSyncTree_,e,r,!0);let s;if(e._queryParams.loadsAllData())s=Ca(t.serverSyncTree_,e._path,i);else{const a=fa(t.serverSyncTree_,e);s=z1(t.serverSyncTree_,e._path,i,a)}return Ut(t.eventQueue_,e._path,s),Cu(t.serverSyncTree_,e,r,null,!0),i},o=>(Ia(t,"get for query "+Be(e)+" failed: "+o),Promise.reject(new Error(o))))}function nR(t,e,r,n,o){Ia(t,"set",{path:e.toString(),value:r,priority:n});const i=Tc(t),s=Le(r,n),a=Sy(t.serverSyncTree_,e),l=Y1(s,a,i),c=Ry(t),p=W1(t.serverSyncTree_,e,l,c,!0);kc(t.eventQueue_,p),t.server_.put(e.toString(),s.val(!0),(f,h)=>{const m=f==="ok";m||pt("set at "+e+" failed: "+f);const _=Xr(t.serverSyncTree_,c,!m);Ut(t.eventQueue_,e,_),jp(t,o,f,h)});const d=Oy(t,e);ki(t,d),Ut(t.eventQueue_,d,[])}function oR(t,e,r,n){Ia(t,"update",{path:e.toString(),value:r});let o=!0;const i=Tc(t),s={};if(rt(r,(a,l)=>{o=!1,s[a]=Q1(Te(e,a),Le(l),t.serverSyncTree_,i)}),o)Ze("update() called with empty data.  Don't do anything."),jp(t,n,"ok",void 0);else{const a=Ry(t),l=bT(t.serverSyncTree_,e,s,a);kc(t.eventQueue_,l),t.server_.merge(e.toString(),r,(c,p)=>{const d=c==="ok";d||pt("update at "+e+" failed: "+c);const f=Xr(t.serverSyncTree_,a,!d),h=f.length>0?ki(t,e):e;Ut(t.eventQueue_,h,f),jp(t,n,c,p)}),rt(r,c=>{const p=Oy(t,Te(e,c));ki(t,p)}),Ut(t.eventQueue_,e,[])}}function iR(t){Ia(t,"onDisconnectEvents");const e=Tc(t),r=mu();Cp(t.onDisconnect_,ae(),(o,i)=>{const s=Q1(o,i,t.serverSyncTree_,e);I1(r,o,s)});let n=[];Cp(r,ae(),(o,i)=>{n=n.concat(Ca(t.serverSyncTree_,o,i));const s=Oy(t,o);ki(t,s)}),t.onDisconnect_=mu(),Ut(t.eventQueue_,ae(),n)}function sR(t,e,r){let n;Y(e._path)===".info"?n=kp(t.infoSyncTree_,e,r):n=kp(t.serverSyncTree_,e,r),ew(t.eventQueue_,e._path,n)}function cv(t,e,r){let n;Y(e._path)===".info"?n=Cu(t.infoSyncTree_,e,r):n=Cu(t.serverSyncTree_,e,r),ew(t.eventQueue_,e._path,n)}function aR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(JT)}function Ia(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ze(r,...e)}function jp(t,e,r,n){e&&Hi(()=>{if(r==="ok")e(null);else{const o=(r||"error").toUpperCase();let i=o;n&&(i+=": "+n);const s=new Error(i);s.code=o,e(s)}})}function nw(t,e,r){return Sy(t.serverSyncTree_,e,r)||H.EMPTY_NODE}function jy(t,e=t.transactionQueueTree_){if(e||Rc(t,e),Yi(e)){const r=iw(t,e);k(r.length>0,"Sending zero length transaction queue"),r.every(o=>o.status===0)&&lR(t,ba(e),r)}else q1(e)&&Ic(e,r=>{jy(t,r)})}function lR(t,e,r){const n=r.map(c=>c.currentWriteId),o=nw(t,e,n);let i=o;const s=o.hash();for(let c=0;c<r.length;c++){const p=r[c];k(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const d=ft(e,p.path);i=i.updateChild(d,p.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Ia(t,"transaction put response",{path:l.toString(),status:c});let p=[];if(c==="ok"){const d=[];for(let f=0;f<r.length;f++)r[f].status=2,p=p.concat(Xr(t.serverSyncTree_,r[f].currentWriteId)),r[f].onComplete&&d.push(()=>r[f].onComplete(null,!0,r[f].currentOutputSnapshotResolved)),r[f].unwatcher();Rc(t,Ny(t.transactionQueueTree_,e)),jy(t,t.transactionQueueTree_),Ut(t.eventQueue_,e,p);for(let f=0;f<d.length;f++)Hi(d[f])}else{if(c==="datastale")for(let d=0;d<r.length;d++)r[d].status===3?r[d].status=4:r[d].status=0;else{pt("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<r.length;d++)r[d].status=4,r[d].abortReason=c}ki(t,e)}},s)}function ki(t,e){const r=ow(t,e),n=ba(r),o=iw(t,r);return uR(t,o,n),n}function uR(t,e,r){if(e.length===0)return;const n=[];let o=[];const s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=ft(r,l.path);let p=!1,d;if(k(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)p=!0,d=l.abortReason,o=o.concat(Xr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=XT)p=!0,d="maxretry",o=o.concat(Xr(t.serverSyncTree_,l.currentWriteId,!0));else{const f=nw(t,l.path,s);l.currentInputSnapshot=f;const h=e[a].update(f.val());if(h!==void 0){Nc("transaction failed: Data returned ",h,l.path);let m=Le(h);typeof h=="object"&&h!=null&&mr(h,".priority")||(m=m.updatePriority(f.getPriority()));const I=l.currentWriteId,g=Tc(t),y=Y1(m,f,g);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=y,l.currentWriteId=Ry(t),s.splice(s.indexOf(I),1),o=o.concat(W1(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),o=o.concat(Xr(t.serverSyncTree_,I,!0))}else p=!0,d="nodata",o=o.concat(Xr(t.serverSyncTree_,l.currentWriteId,!0))}Ut(t.eventQueue_,r,o),o=[],p&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(d),!1,null))))}Rc(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Hi(n[a]);jy(t,t.transactionQueueTree_)}function ow(t,e){let r,n=t.transactionQueueTree_;for(r=Y(e);r!==null&&Yi(n)===void 0;)n=Ny(n,r),e=ve(e),r=Y(e);return n}function iw(t,e){const r=[];return sw(t,e,r),r.sort((n,o)=>n.order-o.order),r}function sw(t,e,r){const n=Yi(e);if(n)for(let o=0;o<n.length;o++)r.push(n[o]);Ic(e,o=>{sw(t,o,r)})}function Rc(t,e){const r=Yi(e);if(r){let n=0;for(let o=0;o<r.length;o++)r[o].status!==2&&(r[n]=r[o],n++);r.length=n,K1(e,r.length>0?r:void 0)}Ic(e,n=>{Rc(t,n)})}function Oy(t,e){const r=ba(ow(t,e)),n=Ny(t.transactionQueueTree_,e);return LT(n,o=>{Tf(t,o)}),Tf(t,n),J1(n,o=>{Tf(t,o)}),r}function Tf(t,e){const r=Yi(e);if(r){const n=[];let o=[],i=-1;for(let s=0;s<r.length;s++)r[s].status===3||(r[s].status===1?(k(i===s-1,"All SENT items should be at beginning of queue."),i=s,r[s].status=3,r[s].abortReason="set"):(k(r[s].status===0,"Unexpected transaction status in abort"),r[s].unwatcher(),o=o.concat(Xr(t.serverSyncTree_,r[s].currentWriteId,!0)),r[s].onComplete&&n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))));i===-1?K1(e,void 0):r.length=i+1,Ut(t.eventQueue_,ba(e),o);for(let s=0;s<n.length;s++)Hi(n[s])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let o=r[n];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function fR(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):pt(`Invalid query segment '${r}' in query '${t}'`)}return e}const fv=function(t,e){const r=dR(t),n=r.namespace;r.domain==="firebase.com"&&Or(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&Or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||xN();const o=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new u1(r.host,r.secure,n,o,e,"",n!==r.subdomain),path:new ce(r.pathString)}},dR=function(t){let e="",r="",n="",o="",i="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let p=t.indexOf("/");p===-1&&(p=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(p,d)),p<d&&(o=cR(t.substring(p,d)));const f=fR(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const h=e.slice(0,c);if(h.toLowerCase()==="localhost")r="localhost";else if(h.split(".").length<=2)r=h;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),r=e.substring(m+1),i=n}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:r,subdomain:n,secure:s,scheme:a,pathString:o,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pR=function(){let t=0;const e=[];return function(r){const n=r===t;t=r;let o;const i=new Array(8);for(o=7;o>=0;o--)i[o]=dv.charAt(r%64),r=Math.floor(r/64);k(r===0,"Cannot push at time == 0");let s=i.join("");if(n){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)s+=dv.charAt(e[o]);return k(s.length===20,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,r,n,o){this.eventType=e,this.eventRegistration=r,this.snapshot=n,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Be(this.snapshot.exportVal())}}class lw{constructor(e,r,n){this.eventRegistration=e,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,r,n,o){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=o}get key(){return K(this._path)?null:ay(this._path)}get ref(){return new gr(this._repo,this._path)}get _queryIdentifier(){const e=qg(this._queryParams),r=ny(e);return r==="{}"?"default":r}get _queryObject(){return qg(this._queryParams)}isEqual(e){if(e=bn(e),!(e instanceof yo))return!1;const r=this._repo===e._repo,n=ly(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return r&&n&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+nk(this._path)}}function hR(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function $y(t){let e=null,r=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===Wn){const n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==so)throw new Error(n);if(typeof e!="string")throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==vn)throw new Error(n);if(typeof r!="string")throw new Error(o)}}else if(t.getIndex()===Ae){if(e!=null&&!Rp(e)||r!=null&&!Rp(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(k(t.getIndex()instanceof fy||t.getIndex()===b1,"unknown index type."),e!=null&&typeof e=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cw(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gr extends yo{constructor(e,r){super(e,r,new py,!1)}get parent(){const e=v1(this._path);return e===null?null:new gr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ti{constructor(e,r,n){this._node=e,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new ce(e),n=Ri(this.ref,e);return new Ti(this._node.getChild(r),n,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,o)=>e(new Ti(o,Ri(this.ref,n),Ae)))}hasChild(e){const r=new ce(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ss(t,e){return t=bn(t),t._checkNotDeleted("ref"),e!==void 0?Ri(t._root,e):t._root}function Ri(t,e){return t=bn(t),Y(t._path)===null?QT("child","path",e,!1):ky("child","path",e,!1),new gr(t._repo,Te(t._path,e))}function fw(t,e){t=bn(t),Z1("push",t._path),Aa("push",e,t._path,!0);const r=rw(t._repo),n=pR(r),o=Ri(t,n),i=Ri(t,n);let s;return e!=null?s=Dy(i,e).then(()=>i):s=Promise.resolve(i),o.then=s.then.bind(s),o.catch=s.then.bind(s,void 0),o}function Dy(t,e){t=bn(t),Z1("set",t._path),Aa("set",e,t._path,!1);const r=new va;return nR(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}function dw(t,e){GT("update",e,t._path,!1);const r=new va;return oR(t._repo,t._path,e,r.wrapCallback(()=>{})),r.promise}function pw(t){t=bn(t);const e=new uw(()=>{}),r=new jc(e);return rR(t._repo,t,r).then(n=>new Ti(n,new gr(t._repo,t._path),t._queryParams.getIndex()))}class jc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const n=r._queryParams.getIndex();return new aw("value",this,new Ti(e.snapshotNode,new gr(r._repo,r._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new lw(this,e,r):null}matches(e){return e instanceof jc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Fy{constructor(e,r){this.eventType=e,this.callbackContext=r}respondsTo(e){let r=e==="children_added"?"child_added":e;return r=r==="children_removed"?"child_removed":r,this.eventType===r}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new lw(this,e,r):null}createEvent(e,r){k(e.childName!=null,"Child events should have a childName.");const n=Ri(new gr(r._repo,r._path),e.childName),o=r._queryParams.getIndex();return new aw(e.type,this,new Ti(e.snapshotNode,n,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Fy?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function yR(t,e,r,n,o){let i;if(typeof n=="object"&&(i=void 0,o=n),typeof n=="function"&&(i=n),o&&o.onlyOnce){const l=r,c=(p,d)=>{cv(t._repo,t,a),l(p,d)};c.userCallback=r.userCallback,c.context=r.context,r=c}const s=new uw(r,i||void 0),a=e==="value"?new jc(s):new Fy(e,s);return sR(t._repo,t,a),()=>cv(t._repo,t,a)}function mR(t,e,r,n){return yR(t,"value",e,r,n)}class Pa{}class gR extends Pa{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){Aa("endAt",this._value,e._path,!0);const r=Pk(e._queryParams,this._value,this._key);if(cw(r),$y(r),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(e._repo,e._path,r,e._orderByCalled)}}class vR extends Pa{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){Aa("startAt",this._value,e._path,!0);const r=Ik(e._queryParams,this._value,this._key);if(cw(r),$y(r),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yo(e._repo,e._path,r,e._orderByCalled)}}class _R extends Pa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(e._repo,e._path,Ak(e._queryParams,this._limit),e._orderByCalled)}}function xR(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new _R(t)}class SR extends Pa{constructor(e){super(),this._path=e}_apply(e){hR(e,"orderByChild");const r=new ce(this._path);if(K(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new fy(r),o=Nk(e._queryParams,n);return $y(o),new yo(e._repo,e._path,o,!0)}}function wR(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ky("orderByChild","path",t,!1),new SR(t)}class ER extends Pa{constructor(e,r){super(),this._value=e,this._key=r}_apply(e){if(Aa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new gR(this._value,this._key)._apply(new vR(this._value,this._key)._apply(e))}}function CR(t,e){return HT("equalTo","key",e,!0),new ER(t,e)}function bR(t,...e){let r=bn(t);for(const n of e)r=n._apply(r);return r}gT(gr);wT(gr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="FIREBASE_DATABASE_EMULATOR_HOST",Op={};let IR=!1;function PR(t,e,r,n){t.repoInfo_=new u1(`${e}:${r}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function NR(t,e,r,n,o){let i=n||t.options.databaseURL;i===void 0&&(t.options.projectId||Or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ze("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=fv(i,o),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[AR]),c?(l=!0,i=`http://${c}?ns=${a.namespace}`,s=fv(i,o),a=s.repoInfo):l=!s.repoInfo.secure;const p=o&&l?new ai(ai.OWNER):new TN(t.name,t.options,e);YT("Invalid Firebase Database URL",s),K(s.path)||Or("Database URL must point to the root of a Firebase Database (not including a child path).");const d=TR(a,t,p,new kN(t.name,r));return new RR(d,t)}function kR(t,e){const r=Op[e];(!r||r[t.key]!==t)&&Or(`Database ${e}(${t.repoInfo_}) has already been deleted.`),aR(t),delete r[t.key]}function TR(t,e,r,n){let o=Op[e.name];o||(o={},Op[e.name]=o);let i=o[t.toURLString()];return i&&Or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ZT(t,IR,r,n),o[t.toURLString()]=i,i}class RR{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(eR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gr(this._repo,ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(kR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Or("Cannot call "+e+" on a deleted database.")}}function jR(t=nN(),e){const r=ZP(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=GI("database");n&&hw(r,...n)}return r}function hw(t,e,r,n={}){t=bn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Or("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let i;if(o.repoInfo_.nodeAdmin)n.mockUserToken&&Or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new ai(ai.OWNER);else if(n.mockUserToken){const s=typeof n.mockUserToken=="string"?n.mockUserToken:HI(n.mockUserToken,t.app.options.projectId);i=new ai(s)}PR(o,e,r,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){yN(rN),fu(new na("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return NR(n,o,i,r)},"PUBLIC").setMultipleInstances(!0)),ii(jg,Og,t),ii(jg,Og,"esm2017")}Pr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Pr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};OR();var pv=Object.prototype.toString,yw=function(e){var r=pv.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&pv.call(e.callee)==="[object Function]"),n},Rf,hv;function $R(){if(hv)return Rf;hv=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=yw,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(f){var h=f.constructor;return h&&h.prototype===f},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!c["$"+f]&&e.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{l(window[f])}catch{return!0}}catch{return!0}return!1}(),d=function(f){if(typeof window>"u"||!p)return l(f);try{return l(f)}catch{return!1}};t=function(h){var m=h!==null&&typeof h=="object",_=r.call(h)==="[object Function]",I=n(h),g=m&&r.call(h)==="[object String]",y=[];if(!m&&!_&&!I)throw new TypeError("Object.keys called on a non-object");var v=s&&_;if(g&&h.length>0&&!e.call(h,0))for(var E=0;E<h.length;++E)y.push(String(E));if(I&&h.length>0)for(var w=0;w<h.length;++w)y.push(String(w));else for(var C in h)!(v&&C==="prototype")&&e.call(h,C)&&y.push(String(C));if(i)for(var T=d(h),P=0;P<a.length;++P)!(T&&a[P]==="constructor")&&e.call(h,a[P])&&y.push(a[P]);return y}}return Rf=t,Rf}var DR=Array.prototype.slice,FR=yw,yv=Object.keys,Al=yv?function(e){return yv(e)}:$R(),mv=Object.keys;Al.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return FR(n)?mv(DR.call(n)):mv(n)})}else Object.keys=Al;return Object.keys||Al};var Na=Al,Oc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[r]=o;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},gv=typeof Symbol<"u"&&Symbol,MR=Oc,Mr=function(){return typeof gv!="function"||typeof Symbol!="function"||typeof gv("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:MR()},LR="Function.prototype.bind called on incompatible ",jf=Array.prototype.slice,BR=Object.prototype.toString,UR="[object Function]",WR=function(e){var r=this;if(typeof r!="function"||BR.call(r)!==UR)throw new TypeError(LR+r);for(var n=jf.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(jf.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(jf.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},zR=WR,My=Function.prototype.bind||zR,VR=My,$c=VR.call(Function.call,Object.prototype.hasOwnProperty),ne,ji=SyntaxError,mw=Function,li=TypeError,Of=function(t){try{return mw('"use strict"; return ('+t+").constructor;")()}catch{}},zn=Object.getOwnPropertyDescriptor;if(zn)try{zn({},"")}catch{zn=null}var $f=function(){throw new li},GR=zn?function(){try{return arguments.callee,$f}catch{try{return zn(arguments,"callee").get}catch{return $f}}}():$f,_o=Mr(),Vr=Object.getPrototypeOf||function(t){return t.__proto__},No={},HR=typeof Uint8Array>"u"?ne:Vr(Uint8Array),ui={"%AggregateError%":typeof AggregateError>"u"?ne:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ne:ArrayBuffer,"%ArrayIteratorPrototype%":_o?Vr([][Symbol.iterator]()):ne,"%AsyncFromSyncIteratorPrototype%":ne,"%AsyncFunction%":No,"%AsyncGenerator%":No,"%AsyncGeneratorFunction%":No,"%AsyncIteratorPrototype%":No,"%Atomics%":typeof Atomics>"u"?ne:Atomics,"%BigInt%":typeof BigInt>"u"?ne:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ne:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ne:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ne:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ne:FinalizationRegistry,"%Function%":mw,"%GeneratorFunction%":No,"%Int8Array%":typeof Int8Array>"u"?ne:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ne:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ne:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_o?Vr(Vr([][Symbol.iterator]())):ne,"%JSON%":typeof JSON=="object"?JSON:ne,"%Map%":typeof Map>"u"?ne:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_o?ne:Vr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ne:Promise,"%Proxy%":typeof Proxy>"u"?ne:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ne:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ne:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_o?ne:Vr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ne:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_o?Vr(""[Symbol.iterator]()):ne,"%Symbol%":_o?Symbol:ne,"%SyntaxError%":ji,"%ThrowTypeError%":GR,"%TypedArray%":HR,"%TypeError%":li,"%Uint8Array%":typeof Uint8Array>"u"?ne:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ne:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ne:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ne:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ne:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ne:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ne:WeakSet},QR=function t(e){var r;if(e==="%AsyncFunction%")r=Of("async function () {}");else if(e==="%GeneratorFunction%")r=Of("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Of("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=Vr(o.prototype))}return ui[e]=r,r},vv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ka=My,bu=$c,YR=ka.call(Function.call,Array.prototype.concat),KR=ka.call(Function.apply,Array.prototype.splice),_v=ka.call(Function.call,String.prototype.replace),Au=ka.call(Function.call,String.prototype.slice),qR=ka.call(Function.call,RegExp.prototype.exec),JR=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,XR=/\\(\\)?/g,ZR=function(e){var r=Au(e,0,1),n=Au(e,-1);if(r==="%"&&n!=="%")throw new ji("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ji("invalid intrinsic syntax, expected opening `%`");var o=[];return _v(e,JR,function(i,s,a,l){o[o.length]=a?_v(l,XR,"$1"):s||i}),o},ej=function(e,r){var n=e,o;if(bu(vv,n)&&(o=vv[n],n="%"+o[0]+"%"),bu(ui,n)){var i=ui[n];if(i===No&&(i=QR(n)),typeof i>"u"&&!r)throw new li("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new ji("intrinsic "+e+" does not exist!")},Lr=function(e,r){if(typeof e!="string"||e.length===0)throw new li("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new li('"allowMissing" argument must be a boolean');if(qR(/^%?[^%]*%?$/,e)===null)throw new ji("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ZR(e),o=n.length>0?n[0]:"",i=ej("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],KR(n,YR([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Au(f,0,1),m=Au(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new ji("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",bu(ui,s))a=ui[s];else if(a!=null){if(!(f in a)){if(!r)throw new li("base intrinsic for "+e+" exists, but the property is not available.");return}if(zn&&p+1>=n.length){var _=zn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=bu(a,f),a=a[f];d&&!l&&(ui[s]=a)}}return a},tj=Lr,$p=tj("%Object.defineProperty%",!0),Dp=function(){if($p)try{return $p({},"a",{value:1}),!0}catch{return!1}return!1};Dp.hasArrayLengthDefineBug=function(){if(!Dp())return null;try{return $p([],"length",{value:1}).length!==1}catch{return!0}};var Ki=Dp,rj=Na,nj=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",oj=Object.prototype.toString,ij=Array.prototype.concat,gw=Object.defineProperty,sj=function(t){return typeof t=="function"&&oj.call(t)==="[object Function]"},aj=Ki(),vw=gw&&aj,lj=function(t,e,r,n){e in t&&(!sj(n)||!n())||(vw?gw(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},_w=function(t,e){var r=arguments.length>2?arguments[2]:{},n=rj(e);nj&&(n=ij.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)lj(t,n[o],e[n[o]],r[n[o]])};_w.supportsDescriptors=!!vw;var xw=_w,Sw={exports:{}};(function(t){var e=My,r=Lr,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var f=i(e,o,arguments);if(s&&a){var h=s(f,"length");h.configurable&&a(f,"length",{value:1+l(0,d.length-(arguments.length-1))})}return f};var c=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(Sw);var Dc=Sw.exports,ww=Lr,Ew=Dc,uj=Ew(ww("String.prototype.indexOf")),ir=function(e,r){var n=ww(e,!!r);return typeof n=="function"&&uj(e,".prototype.")>-1?Ew(n):n},cj=Na,Cw=Oc(),bw=ir,xv=Object,fj=bw("Array.prototype.push"),Sv=bw("Object.prototype.propertyIsEnumerable"),dj=Cw?Object.getOwnPropertySymbols:null,Aw=function(e,r){if(e==null)throw new TypeError("target must be an object");var n=xv(e);if(arguments.length===1)return n;for(var o=1;o<arguments.length;++o){var i=xv(arguments[o]),s=cj(i),a=Cw&&(Object.getOwnPropertySymbols||dj);if(a)for(var l=a(i),c=0;c<l.length;++c){var p=l[c];Sv(i,p)&&fj(s,p)}for(var d=0;d<s.length;++d){var f=s[d];if(Sv(i,f)){var h=i[f];n[f]=h}}}return n},Df=Aw,pj=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var s in o)i+=s;return t!==i},hj=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},Iw=function(){return!Object.assign||pj()||hj()?Df:Object.assign},yj=xw,mj=Iw,gj=function(){var e=mj();return yj(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},vj=xw,_j=Dc,xj=Aw,Pw=Iw,Sj=gj,wj=_j.apply(Pw()),Nw=function(e,r){return wj(Object,arguments)};vj(Nw,{getPolyfill:Pw,implementation:xj,shim:Sj});var Ej=Nw,wv={foo:{}},Cj=Object,Fc=function(){return{__proto__:wv}.foo===wv.foo&&!({__proto__:null}instanceof Cj)},bj="Function.prototype.bind called on incompatible ",Aj=Object.prototype.toString,Ij=Math.max,Pj="[object Function]",Ev=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},Nj=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},kj=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Tj=function(e){var r=this;if(typeof r!="function"||Aj.apply(r)!==Pj)throw new TypeError(bj+r);for(var n=Nj(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,Ev(n,arguments));return Object(p)===p?p:this}return r.apply(e,Ev(n,arguments))},s=Ij(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+kj(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},Rj=Tj,kw=Function.prototype.bind||Rj,jj="Function.prototype.bind called on incompatible ",Oj=Object.prototype.toString,$j=Math.max,Dj="[object Function]",Cv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},Fj=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},Mj=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},Lj=function(e){var r=this;if(typeof r!="function"||Oj.apply(r)!==Dj)throw new TypeError(jj+r);for(var n=Fj(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,Cv(n,arguments));return Object(p)===p?p:this}return r.apply(e,Cv(n,arguments))},s=$j(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+Mj(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},Bj=Lj,Uj=Function.prototype.bind||Bj,Wj=Function.prototype.call,zj=Object.prototype.hasOwnProperty,Vj=Uj,Mc=Vj.call(Wj,zj),J,Oi=SyntaxError,Tw=Function,ci=TypeError,Ff=function(t){try{return Tw('"use strict"; return ('+t+").constructor;")()}catch{}},Vn=Object.getOwnPropertyDescriptor;if(Vn)try{Vn({},"")}catch{Vn=null}var Mf=function(){throw new ci},Gj=Vn?function(){try{return arguments.callee,Mf}catch{try{return Vn(arguments,"callee").get}catch{return Mf}}}():Mf,xo=Mr(),Hj=Fc(),ze=Object.getPrototypeOf||(Hj?function(t){return t.__proto__}:null),ko={},Qj=typeof Uint8Array>"u"||!ze?J:ze(Uint8Array),Gn={"%AggregateError%":typeof AggregateError>"u"?J:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?J:ArrayBuffer,"%ArrayIteratorPrototype%":xo&&ze?ze([][Symbol.iterator]()):J,"%AsyncFromSyncIteratorPrototype%":J,"%AsyncFunction%":ko,"%AsyncGenerator%":ko,"%AsyncGeneratorFunction%":ko,"%AsyncIteratorPrototype%":ko,"%Atomics%":typeof Atomics>"u"?J:Atomics,"%BigInt%":typeof BigInt>"u"?J:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?J:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?J:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?J:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?J:Float32Array,"%Float64Array%":typeof Float64Array>"u"?J:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?J:FinalizationRegistry,"%Function%":Tw,"%GeneratorFunction%":ko,"%Int8Array%":typeof Int8Array>"u"?J:Int8Array,"%Int16Array%":typeof Int16Array>"u"?J:Int16Array,"%Int32Array%":typeof Int32Array>"u"?J:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xo&&ze?ze(ze([][Symbol.iterator]())):J,"%JSON%":typeof JSON=="object"?JSON:J,"%Map%":typeof Map>"u"?J:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xo||!ze?J:ze(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?J:Promise,"%Proxy%":typeof Proxy>"u"?J:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?J:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?J:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xo||!ze?J:ze(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?J:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xo&&ze?ze(""[Symbol.iterator]()):J,"%Symbol%":xo?Symbol:J,"%SyntaxError%":Oi,"%ThrowTypeError%":Gj,"%TypedArray%":Qj,"%TypeError%":ci,"%Uint8Array%":typeof Uint8Array>"u"?J:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?J:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?J:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?J:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?J:WeakMap,"%WeakRef%":typeof WeakRef>"u"?J:WeakRef,"%WeakSet%":typeof WeakSet>"u"?J:WeakSet};if(ze)try{null.error}catch(t){var Yj=ze(ze(t));Gn["%Error.prototype%"]=Yj}var Kj=function t(e){var r;if(e==="%AsyncFunction%")r=Ff("async function () {}");else if(e==="%GeneratorFunction%")r=Ff("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ff("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&ze&&(r=ze(o.prototype))}return Gn[e]=r,r},bv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ta=kw,Iu=Mc,qj=Ta.call(Function.call,Array.prototype.concat),Jj=Ta.call(Function.apply,Array.prototype.splice),Av=Ta.call(Function.call,String.prototype.replace),Pu=Ta.call(Function.call,String.prototype.slice),Xj=Ta.call(Function.call,RegExp.prototype.exec),Zj=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,e2=/\\(\\)?/g,t2=function(e){var r=Pu(e,0,1),n=Pu(e,-1);if(r==="%"&&n!=="%")throw new Oi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Oi("invalid intrinsic syntax, expected opening `%`");var o=[];return Av(e,Zj,function(i,s,a,l){o[o.length]=a?Av(l,e2,"$1"):s||i}),o},r2=function(e,r){var n=e,o;if(Iu(bv,n)&&(o=bv[n],n="%"+o[0]+"%"),Iu(Gn,n)){var i=Gn[n];if(i===ko&&(i=Kj(n)),typeof i>"u"&&!r)throw new ci("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Oi("intrinsic "+e+" does not exist!")},Lc=function(e,r){if(typeof e!="string"||e.length===0)throw new ci("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ci('"allowMissing" argument must be a boolean');if(Xj(/^%?[^%]*%?$/,e)===null)throw new Oi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=t2(e),o=n.length>0?n[0]:"",i=r2("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],Jj(n,qj([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Pu(f,0,1),m=Pu(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Oi("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Iu(Gn,s))a=Gn[s];else if(a!=null){if(!(f in a)){if(!r)throw new ci("base intrinsic for "+e+" exists, but the property is not available.");return}if(Vn&&p+1>=n.length){var _=Vn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=Iu(a,f),a=a[f];d&&!l&&(Gn[s]=a)}}return a},Rw={exports:{}},n2="Function.prototype.bind called on incompatible ",o2=Object.prototype.toString,i2=Math.max,s2="[object Function]",Iv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},a2=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},l2=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},u2=function(e){var r=this;if(typeof r!="function"||o2.apply(r)!==s2)throw new TypeError(n2+r);for(var n=a2(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,Iv(n,arguments));return Object(p)===p?p:this}return r.apply(e,Iv(n,arguments))},s=i2(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+l2(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},c2=u2,f2=Function.prototype.bind||c2,X,$i=SyntaxError,jw=Function,fi=TypeError,Lf=function(t){try{return jw('"use strict"; return ('+t+").constructor;")()}catch{}},Hn=Object.getOwnPropertyDescriptor;if(Hn)try{Hn({},"")}catch{Hn=null}var Bf=function(){throw new fi},d2=Hn?function(){try{return arguments.callee,Bf}catch{try{return Hn(arguments,"callee").get}catch{return Bf}}}():Bf,So=Mr(),p2=Fc(),Ve=Object.getPrototypeOf||(p2?function(t){return t.__proto__}:null),To={},h2=typeof Uint8Array>"u"||!Ve?X:Ve(Uint8Array),Qn={"%AggregateError%":typeof AggregateError>"u"?X:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?X:ArrayBuffer,"%ArrayIteratorPrototype%":So&&Ve?Ve([][Symbol.iterator]()):X,"%AsyncFromSyncIteratorPrototype%":X,"%AsyncFunction%":To,"%AsyncGenerator%":To,"%AsyncGeneratorFunction%":To,"%AsyncIteratorPrototype%":To,"%Atomics%":typeof Atomics>"u"?X:Atomics,"%BigInt%":typeof BigInt>"u"?X:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?X:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?X:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?X:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?X:Float32Array,"%Float64Array%":typeof Float64Array>"u"?X:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?X:FinalizationRegistry,"%Function%":jw,"%GeneratorFunction%":To,"%Int8Array%":typeof Int8Array>"u"?X:Int8Array,"%Int16Array%":typeof Int16Array>"u"?X:Int16Array,"%Int32Array%":typeof Int32Array>"u"?X:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":So&&Ve?Ve(Ve([][Symbol.iterator]())):X,"%JSON%":typeof JSON=="object"?JSON:X,"%Map%":typeof Map>"u"?X:Map,"%MapIteratorPrototype%":typeof Map>"u"||!So||!Ve?X:Ve(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?X:Promise,"%Proxy%":typeof Proxy>"u"?X:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?X:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?X:Set,"%SetIteratorPrototype%":typeof Set>"u"||!So||!Ve?X:Ve(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?X:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":So&&Ve?Ve(""[Symbol.iterator]()):X,"%Symbol%":So?Symbol:X,"%SyntaxError%":$i,"%ThrowTypeError%":d2,"%TypedArray%":h2,"%TypeError%":fi,"%Uint8Array%":typeof Uint8Array>"u"?X:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?X:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?X:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?X:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?X:WeakMap,"%WeakRef%":typeof WeakRef>"u"?X:WeakRef,"%WeakSet%":typeof WeakSet>"u"?X:WeakSet};if(Ve)try{null.error}catch(t){var y2=Ve(Ve(t));Qn["%Error.prototype%"]=y2}var m2=function t(e){var r;if(e==="%AsyncFunction%")r=Lf("async function () {}");else if(e==="%GeneratorFunction%")r=Lf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Lf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&Ve&&(r=Ve(o.prototype))}return Qn[e]=r,r},Pv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ra=f2,Nu=Mc,g2=Ra.call(Function.call,Array.prototype.concat),v2=Ra.call(Function.apply,Array.prototype.splice),Nv=Ra.call(Function.call,String.prototype.replace),ku=Ra.call(Function.call,String.prototype.slice),_2=Ra.call(Function.call,RegExp.prototype.exec),x2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S2=/\\(\\)?/g,w2=function(e){var r=ku(e,0,1),n=ku(e,-1);if(r==="%"&&n!=="%")throw new $i("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new $i("invalid intrinsic syntax, expected opening `%`");var o=[];return Nv(e,x2,function(i,s,a,l){o[o.length]=a?Nv(l,S2,"$1"):s||i}),o},E2=function(e,r){var n=e,o;if(Nu(Pv,n)&&(o=Pv[n],n="%"+o[0]+"%"),Nu(Qn,n)){var i=Qn[n];if(i===To&&(i=m2(n)),typeof i>"u"&&!r)throw new fi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new $i("intrinsic "+e+" does not exist!")},C2=function(e,r){if(typeof e!="string"||e.length===0)throw new fi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new fi('"allowMissing" argument must be a boolean');if(_2(/^%?[^%]*%?$/,e)===null)throw new $i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=w2(e),o=n.length>0?n[0]:"",i=E2("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],v2(n,g2([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=ku(f,0,1),m=ku(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new $i("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Nu(Qn,s))a=Qn[s];else if(a!=null){if(!(f in a)){if(!r)throw new fi("base intrinsic for "+e+" exists, but the property is not available.");return}if(Hn&&p+1>=n.length){var _=Hn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=Nu(a,f),a=a[f];d&&!l&&(Qn[s]=a)}}return a},b2="Function.prototype.bind called on incompatible ",A2=Object.prototype.toString,I2=Math.max,P2="[object Function]",kv=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},N2=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},k2=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},T2=function(e){var r=this;if(typeof r!="function"||A2.apply(r)!==P2)throw new TypeError(b2+r);for(var n=N2(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,kv(n,arguments));return Object(p)===p?p:this}return r.apply(e,kv(n,arguments))},s=I2(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+k2(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},R2=T2,j2=Function.prototype.bind||R2,Z,Di=SyntaxError,Ow=Function,di=TypeError,Uf=function(t){try{return Ow('"use strict"; return ('+t+").constructor;")()}catch{}},Yn=Object.getOwnPropertyDescriptor;if(Yn)try{Yn({},"")}catch{Yn=null}var Wf=function(){throw new di},O2=Yn?function(){try{return arguments.callee,Wf}catch{try{return Yn(arguments,"callee").get}catch{return Wf}}}():Wf,wo=Mr(),$2=Fc(),Ge=Object.getPrototypeOf||($2?function(t){return t.__proto__}:null),Ro={},D2=typeof Uint8Array>"u"||!Ge?Z:Ge(Uint8Array),Kn={"%AggregateError%":typeof AggregateError>"u"?Z:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Z:ArrayBuffer,"%ArrayIteratorPrototype%":wo&&Ge?Ge([][Symbol.iterator]()):Z,"%AsyncFromSyncIteratorPrototype%":Z,"%AsyncFunction%":Ro,"%AsyncGenerator%":Ro,"%AsyncGeneratorFunction%":Ro,"%AsyncIteratorPrototype%":Ro,"%Atomics%":typeof Atomics>"u"?Z:Atomics,"%BigInt%":typeof BigInt>"u"?Z:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Z:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Z:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Z:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Z:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Z:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Z:FinalizationRegistry,"%Function%":Ow,"%GeneratorFunction%":Ro,"%Int8Array%":typeof Int8Array>"u"?Z:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Z:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Z:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":wo&&Ge?Ge(Ge([][Symbol.iterator]())):Z,"%JSON%":typeof JSON=="object"?JSON:Z,"%Map%":typeof Map>"u"?Z:Map,"%MapIteratorPrototype%":typeof Map>"u"||!wo||!Ge?Z:Ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Z:Promise,"%Proxy%":typeof Proxy>"u"?Z:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Z:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Z:Set,"%SetIteratorPrototype%":typeof Set>"u"||!wo||!Ge?Z:Ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Z:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":wo&&Ge?Ge(""[Symbol.iterator]()):Z,"%Symbol%":wo?Symbol:Z,"%SyntaxError%":Di,"%ThrowTypeError%":O2,"%TypedArray%":D2,"%TypeError%":di,"%Uint8Array%":typeof Uint8Array>"u"?Z:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Z:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Z:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Z:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Z:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Z:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Z:WeakSet};if(Ge)try{null.error}catch(t){var F2=Ge(Ge(t));Kn["%Error.prototype%"]=F2}var M2=function t(e){var r;if(e==="%AsyncFunction%")r=Uf("async function () {}");else if(e==="%GeneratorFunction%")r=Uf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Uf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&Ge&&(r=Ge(o.prototype))}return Kn[e]=r,r},Tv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ja=j2,Tu=Mc,L2=ja.call(Function.call,Array.prototype.concat),B2=ja.call(Function.apply,Array.prototype.splice),Rv=ja.call(Function.call,String.prototype.replace),Ru=ja.call(Function.call,String.prototype.slice),U2=ja.call(Function.call,RegExp.prototype.exec),W2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z2=/\\(\\)?/g,V2=function(e){var r=Ru(e,0,1),n=Ru(e,-1);if(r==="%"&&n!=="%")throw new Di("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Di("invalid intrinsic syntax, expected opening `%`");var o=[];return Rv(e,W2,function(i,s,a,l){o[o.length]=a?Rv(l,z2,"$1"):s||i}),o},G2=function(e,r){var n=e,o;if(Tu(Tv,n)&&(o=Tv[n],n="%"+o[0]+"%"),Tu(Kn,n)){var i=Kn[n];if(i===Ro&&(i=M2(n)),typeof i>"u"&&!r)throw new di("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Di("intrinsic "+e+" does not exist!")},H2=function(e,r){if(typeof e!="string"||e.length===0)throw new di("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new di('"allowMissing" argument must be a boolean');if(U2(/^%?[^%]*%?$/,e)===null)throw new Di("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=V2(e),o=n.length>0?n[0]:"",i=G2("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],B2(n,L2([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Ru(f,0,1),m=Ru(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Di("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Tu(Kn,s))a=Kn[s];else if(a!=null){if(!(f in a)){if(!r)throw new di("base intrinsic for "+e+" exists, but the property is not available.");return}if(Yn&&p+1>=n.length){var _=Yn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=Tu(a,f),a=a[f];d&&!l&&(Kn[s]=a)}}return a},Q2=Lr,Il=Q2("%Object.getOwnPropertyDescriptor%",!0);if(Il)try{Il([],"length")}catch{Il=null}var Bc=Il,Y2=Ki(),Ly=H2,$s=Y2&&Ly("%Object.defineProperty%",!0);if($s)try{$s({},"a",{value:1})}catch{$s=!1}var K2=Ly("%SyntaxError%"),Eo=Ly("%TypeError%"),jv=Bc,By=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Eo("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Eo("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Eo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Eo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Eo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Eo("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!jv&&jv(e,r);if($s)$s(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:o===null&&l?l.enumerable:!o,value:n,writable:i===null&&l?l.writable:!i});else if(a||!o&&!i&&!s)e[r]=n;else throw new K2("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$w=C2,Ov=By,q2=Ki(),$v=Bc,Dv=$w("%TypeError%"),J2=$w("%Math.floor%"),Dw=function(e,r){if(typeof e!="function")throw new Dv("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||J2(r)!==r)throw new Dv("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],o=!0,i=!0;if("length"in e&&$v){var s=$v(e,"length");s&&!s.configurable&&(o=!1),s&&!s.writable&&(i=!1)}return(o||i||!n)&&(q2?Ov(e,"length",r,!0,!0):Ov(e,"length",r)),e};(function(t){var e=kw,r=Lc,n=Dw,o=r("%TypeError%"),i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,i),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(f){if(typeof f!="function")throw new o("a function is required");var h=a(e,s,arguments);return n(h,1+c(0,f.length-(arguments.length-1)),!0)};var p=function(){return a(e,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p})(Rw);var X2=Rw.exports,Fw=Lc,Mw=X2,Z2=Mw(Fw("String.prototype.indexOf")),eO=function(e,r){var n=Fw(e,!!r);return typeof n=="function"&&Z2(e,".prototype.")>-1?Mw(n):n},tO=Na,rO=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",nO=Object.prototype.toString,oO=Array.prototype.concat,Fv=By,iO=function(t){return typeof t=="function"&&nO.call(t)==="[object Function]"},Lw=Ki(),sO=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!iO(n)||!n())return}Lw?Fv(t,e,r,!0):Fv(t,e,r)},Bw=function(t,e){var r=arguments.length>2?arguments[2]:{},n=tO(e);rO&&(n=oO.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)sO(t,n[o],e[n[o]],r[n[o]])};Bw.supportsDescriptors=!!Lw;var Uy=Bw,Uw={exports:{}},aO="Function.prototype.bind called on incompatible ",zf=Array.prototype.slice,lO=Object.prototype.toString,uO="[object Function]",cO=function(e){var r=this;if(typeof r!="function"||lO.call(r)!==uO)throw new TypeError(aO+r);for(var n=zf.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(zf.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(zf.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},fO=cO,Ww=Function.prototype.bind||fO,oe,Fi=SyntaxError,zw=Function,pi=TypeError,Vf=function(t){try{return zw('"use strict"; return ('+t+").constructor;")()}catch{}},qn=Object.getOwnPropertyDescriptor;if(qn)try{qn({},"")}catch{qn=null}var Gf=function(){throw new pi},dO=qn?function(){try{return arguments.callee,Gf}catch{try{return qn(arguments,"callee").get}catch{return Gf}}}():Gf,Co=Mr(),Gr=Object.getPrototypeOf||function(t){return t.__proto__},jo={},pO=typeof Uint8Array>"u"?oe:Gr(Uint8Array),hi={"%AggregateError%":typeof AggregateError>"u"?oe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?oe:ArrayBuffer,"%ArrayIteratorPrototype%":Co?Gr([][Symbol.iterator]()):oe,"%AsyncFromSyncIteratorPrototype%":oe,"%AsyncFunction%":jo,"%AsyncGenerator%":jo,"%AsyncGeneratorFunction%":jo,"%AsyncIteratorPrototype%":jo,"%Atomics%":typeof Atomics>"u"?oe:Atomics,"%BigInt%":typeof BigInt>"u"?oe:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?oe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?oe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?oe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?oe:FinalizationRegistry,"%Function%":zw,"%GeneratorFunction%":jo,"%Int8Array%":typeof Int8Array>"u"?oe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?oe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?oe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Co?Gr(Gr([][Symbol.iterator]())):oe,"%JSON%":typeof JSON=="object"?JSON:oe,"%Map%":typeof Map>"u"?oe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Co?oe:Gr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?oe:Promise,"%Proxy%":typeof Proxy>"u"?oe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?oe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?oe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Co?oe:Gr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?oe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Co?Gr(""[Symbol.iterator]()):oe,"%Symbol%":Co?Symbol:oe,"%SyntaxError%":Fi,"%ThrowTypeError%":dO,"%TypedArray%":pO,"%TypeError%":pi,"%Uint8Array%":typeof Uint8Array>"u"?oe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?oe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?oe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?oe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?oe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?oe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?oe:WeakSet},hO=function t(e){var r;if(e==="%AsyncFunction%")r=Vf("async function () {}");else if(e==="%GeneratorFunction%")r=Vf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Vf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=Gr(o.prototype))}return hi[e]=r,r},Mv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Oa=Ww,ju=$c,yO=Oa.call(Function.call,Array.prototype.concat),mO=Oa.call(Function.apply,Array.prototype.splice),Lv=Oa.call(Function.call,String.prototype.replace),Ou=Oa.call(Function.call,String.prototype.slice),gO=Oa.call(Function.call,RegExp.prototype.exec),vO=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_O=/\\(\\)?/g,xO=function(e){var r=Ou(e,0,1),n=Ou(e,-1);if(r==="%"&&n!=="%")throw new Fi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Fi("invalid intrinsic syntax, expected opening `%`");var o=[];return Lv(e,vO,function(i,s,a,l){o[o.length]=a?Lv(l,_O,"$1"):s||i}),o},SO=function(e,r){var n=e,o;if(ju(Mv,n)&&(o=Mv[n],n="%"+o[0]+"%"),ju(hi,n)){var i=hi[n];if(i===jo&&(i=hO(n)),typeof i>"u"&&!r)throw new pi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Fi("intrinsic "+e+" does not exist!")},wO=function(e,r){if(typeof e!="string"||e.length===0)throw new pi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new pi('"allowMissing" argument must be a boolean');if(gO(/^%?[^%]*%?$/,e)===null)throw new Fi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=xO(e),o=n.length>0?n[0]:"",i=SO("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],mO(n,yO([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Ou(f,0,1),m=Ou(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Fi("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",ju(hi,s))a=hi[s];else if(a!=null){if(!(f in a)){if(!r)throw new pi("base intrinsic for "+e+" exists, but the property is not available.");return}if(qn&&p+1>=n.length){var _=qn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=ju(a,f),a=a[f];d&&!l&&(hi[s]=a)}}return a};(function(t){var e=Ww,r=wO,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var f=i(e,o,arguments);if(s&&a){var h=s(f,"length");h.configurable&&a(f,"length",{value:1+l(0,d.length-(arguments.length-1))})}return f};var c=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(Uw);var EO=Uw.exports,da=function(){return typeof(function(){}).name=="string"},Ds=Object.getOwnPropertyDescriptor;if(Ds)try{Ds([],"length")}catch{Ds=null}da.functionsHaveConfigurableNames=function(){if(!da()||!Ds)return!1;var e=Ds(function(){},"name");return!!e&&!!e.configurable};var CO=Function.prototype.bind;da.boundFunctionsHaveNames=function(){return da()&&typeof CO=="function"&&(function(){}).bind().name!==""};var bO=da,Bv=By,AO=Ki(),IO=bO.functionsHaveConfigurableNames(),PO=TypeError,NO=function(e,r){if(typeof e!="function")throw new PO("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||IO)&&(AO?Bv(e,"name",r,!0,!0):Bv(e,"name",r)),e},kO=NO,TO=Object,RO=TypeError,Vw=kO(function(){if(this!=null&&this!==TO(this))throw new RO("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),jO=Vw,OO=Uy.supportsDescriptors,$O=Object.getOwnPropertyDescriptor,Gw=function(){if(OO&&/a/mig.flags==="gim"){var e=$O(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return jO},DO=Uy.supportsDescriptors,FO=Gw,MO=Object.getOwnPropertyDescriptor,LO=Object.defineProperty,BO=TypeError,Uv=Object.getPrototypeOf,UO=/a/,WO=function(){if(!DO||!Uv)throw new BO("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=FO(),r=Uv(UO),n=MO(r,"flags");return(!n||n.get!==e)&&LO(r,"flags",{configurable:!0,enumerable:!1,get:e}),e},zO=Uy,VO=EO,GO=Vw,Hw=Gw,HO=WO,Qw=VO(Hw());zO(Qw,{getPolyfill:Hw,implementation:GO,shim:HO});var QO=Qw,Pl={exports:{}},YO=Oc,An=function(){return YO()&&!!Symbol.toStringTag},KO=An(),qO=ir,Fp=qO("Object.prototype.toString"),Uc=function(e){return KO&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Fp(e)==="[object Arguments]"},Yw=function(e){return Uc(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Fp(e)!=="[object Array]"&&Fp(e.callee)==="[object Function]"},JO=function(){return Uc(arguments)}();Uc.isLegacyArguments=Yw;var Kw=JO?Uc:Yw;const XO={},ZO=Object.freeze(Object.defineProperty({__proto__:null,default:XO},Symbol.toStringTag,{value:"Module"})),e$=CC(ZO);var Wy=typeof Map=="function"&&Map.prototype,Hf=Object.getOwnPropertyDescriptor&&Wy?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,$u=Wy&&Hf&&typeof Hf.get=="function"?Hf.get:null,t$=Wy&&Map.prototype.forEach,zy=typeof Set=="function"&&Set.prototype,Qf=Object.getOwnPropertyDescriptor&&zy?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Du=zy&&Qf&&typeof Qf.get=="function"?Qf.get:null,r$=zy&&Set.prototype.forEach,n$=typeof WeakMap=="function"&&WeakMap.prototype,Fs=n$?WeakMap.prototype.has:null,o$=typeof WeakSet=="function"&&WeakSet.prototype,Ms=o$?WeakSet.prototype.has:null,i$=typeof WeakRef=="function"&&WeakRef.prototype,Wv=i$?WeakRef.prototype.deref:null,s$=Boolean.prototype.valueOf,a$=Object.prototype.toString,l$=Function.prototype.toString,u$=String.prototype.match,Vy=String.prototype.slice,Zr=String.prototype.replace,c$=String.prototype.toUpperCase,zv=String.prototype.toLowerCase,qw=RegExp.prototype.test,Vv=Array.prototype.concat,ur=Array.prototype.join,f$=Array.prototype.slice,Gv=Math.floor,Mp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Yf=Object.getOwnPropertySymbols,Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",lt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Mi||"symbol")?Symbol.toStringTag:null,Jw=Object.prototype.propertyIsEnumerable,Hv=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Qv(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||qw.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Gv(-t):Gv(t);if(n!==t){var o=String(n),i=Vy.call(e,o.length+1);return Zr.call(o,r,"$&_")+"."+Zr.call(Zr.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Zr.call(e,r,"$&_")}var Bp=e$,Yv=Bp.custom,Kv=Zw(Yv)?Yv:null,d$=function t(e,r,n,o){var i=r||{};if(Hr(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Hr(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Hr(i,"customInspect")?i.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Hr(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Hr(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return tE(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Qv(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?Qv(e,c):c}var p=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=p&&p>0&&typeof e=="object")return Up(e)?"[Array]":"[Object]";var d=k$(i,n);if(typeof o>"u")o=[];else if(eE(o,e)>=0)return"[Circular]";function f(W,le,Oe){if(le&&(o=f$.call(o),o.push(le)),Oe){var Re={depth:i.depth};return Hr(i,"quoteStyle")&&(Re.quoteStyle=i.quoteStyle),t(W,Re,n+1,o)}return t(W,i,n+1,o)}if(typeof e=="function"&&!qv(e)){var h=S$(e),m=ul(e,f);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(m.length>0?" { "+ur.call(m,", ")+" }":"")}if(Zw(e)){var _=Mi?Zr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Lp.call(e);return typeof e=="object"&&!Mi?fs(_):_}if(I$(e)){for(var I="<"+zv.call(String(e.nodeName)),g=e.attributes||[],y=0;y<g.length;y++)I+=" "+g[y].name+"="+Xw(p$(g[y].value),"double",i);return I+=">",e.childNodes&&e.childNodes.length&&(I+="..."),I+="</"+zv.call(String(e.nodeName))+">",I}if(Up(e)){if(e.length===0)return"[]";var v=ul(e,f);return d&&!N$(v)?"["+Wp(v,d)+"]":"[ "+ur.call(v,", ")+" ]"}if(y$(e)){var E=ul(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!Jw.call(e,"cause")?"{ ["+String(e)+"] "+ur.call(Vv.call("[cause]: "+f(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ur.call(E,", ")+" }"}if(typeof e=="object"&&s){if(Kv&&typeof e[Kv]=="function"&&Bp)return Bp(e,{depth:p-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(w$(e)){var w=[];return t$.call(e,function(W,le){w.push(f(le,e,!0)+" => "+f(W,e))}),Jv("Map",$u.call(e),w,d)}if(b$(e)){var C=[];return r$.call(e,function(W){C.push(f(W,e))}),Jv("Set",Du.call(e),C,d)}if(E$(e))return Kf("WeakMap");if(A$(e))return Kf("WeakSet");if(C$(e))return Kf("WeakRef");if(g$(e))return fs(f(Number(e)));if(_$(e))return fs(f(Mp.call(e)));if(v$(e))return fs(s$.call(e));if(m$(e))return fs(f(String(e)));if(!h$(e)&&!qv(e)){var T=ul(e,f),P=Hv?Hv(e)===Object.prototype:e instanceof Object||e.constructor===Object,U=e instanceof Object?"":"null prototype",B=!P&&lt&&Object(e)===e&&lt in e?Vy.call(In(e),8,-1):U?"Object":"",fe=P||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",z=fe+(B||U?"["+ur.call(Vv.call([],B||[],U||[]),": ")+"] ":"");return T.length===0?z+"{}":d?z+"{"+Wp(T,d)+"}":z+"{ "+ur.call(T,", ")+" }"}return String(e)};function Xw(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function p$(t){return Zr.call(String(t),/"/g,"&quot;")}function Up(t){return In(t)==="[object Array]"&&(!lt||!(typeof t=="object"&&lt in t))}function h$(t){return In(t)==="[object Date]"&&(!lt||!(typeof t=="object"&&lt in t))}function qv(t){return In(t)==="[object RegExp]"&&(!lt||!(typeof t=="object"&&lt in t))}function y$(t){return In(t)==="[object Error]"&&(!lt||!(typeof t=="object"&&lt in t))}function m$(t){return In(t)==="[object String]"&&(!lt||!(typeof t=="object"&&lt in t))}function g$(t){return In(t)==="[object Number]"&&(!lt||!(typeof t=="object"&&lt in t))}function v$(t){return In(t)==="[object Boolean]"&&(!lt||!(typeof t=="object"&&lt in t))}function Zw(t){if(Mi)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Lp)return!1;try{return Lp.call(t),!0}catch{}return!1}function _$(t){if(!t||typeof t!="object"||!Mp)return!1;try{return Mp.call(t),!0}catch{}return!1}var x$=Object.prototype.hasOwnProperty||function(t){return t in this};function Hr(t,e){return x$.call(t,e)}function In(t){return a$.call(t)}function S$(t){if(t.name)return t.name;var e=u$.call(l$.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function eE(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function w$(t){if(!$u||!t||typeof t!="object")return!1;try{$u.call(t);try{Du.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function E$(t){if(!Fs||!t||typeof t!="object")return!1;try{Fs.call(t,Fs);try{Ms.call(t,Ms)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function C$(t){if(!Wv||!t||typeof t!="object")return!1;try{return Wv.call(t),!0}catch{}return!1}function b$(t){if(!Du||!t||typeof t!="object")return!1;try{Du.call(t);try{$u.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function A$(t){if(!Ms||!t||typeof t!="object")return!1;try{Ms.call(t,Ms);try{Fs.call(t,Fs)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function I$(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function tE(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return tE(Vy.call(t,0,e.maxStringLength),e)+n}var o=Zr.call(Zr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,P$);return Xw(o,"single",e)}function P$(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+c$.call(e.toString(16))}function fs(t){return"Object("+t+")"}function Kf(t){return t+" { ? }"}function Jv(t,e,r,n){var o=n?Wp(r,n):ur.call(r,", ");return t+" ("+e+") {"+o+"}"}function N$(t){for(var e=0;e<t.length;e++)if(eE(t[e],`
`)>=0)return!1;return!0}function k$(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=ur.call(Array(t.indent+1)," ");else return null;return{base:r,prev:ur.call(Array(e+1),r)}}function Wp(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+ur.call(t,","+r)+`
`+e.prev}function ul(t,e){var r=Up(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Hr(t,o)?e(t[o],t):""}var i=typeof Yf=="function"?Yf(t):[],s;if(Mi){s={};for(var a=0;a<i.length;a++)s["$"+i[a]]=i[a]}for(var l in t)Hr(t,l)&&(r&&String(Number(l))===l&&l<t.length||Mi&&s["$"+l]instanceof Symbol||(qw.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof Yf=="function")for(var c=0;c<i.length;c++)Jw.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}var Gy=Lr,qi=ir,T$=d$,R$=Gy("%TypeError%"),cl=Gy("%WeakMap%",!0),fl=Gy("%Map%",!0),j$=qi("WeakMap.prototype.get",!0),O$=qi("WeakMap.prototype.set",!0),$$=qi("WeakMap.prototype.has",!0),D$=qi("Map.prototype.get",!0),F$=qi("Map.prototype.set",!0),M$=qi("Map.prototype.has",!0),Hy=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},L$=function(t,e){var r=Hy(t,e);return r&&r.value},B$=function(t,e,r){var n=Hy(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},U$=function(t,e){return!!Hy(t,e)},rE=function(){var e,r,n,o={assert:function(i){if(!o.has(i))throw new R$("Side channel does not contain "+T$(i))},get:function(i){if(cl&&i&&(typeof i=="object"||typeof i=="function")){if(e)return j$(e,i)}else if(fl){if(r)return D$(r,i)}else if(n)return L$(n,i)},has:function(i){if(cl&&i&&(typeof i=="object"||typeof i=="function")){if(e)return $$(e,i)}else if(fl){if(r)return M$(r,i)}else if(n)return U$(n,i);return!1},set:function(i,s){cl&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new cl),O$(e,i,s)):fl?(r||(r=new fl),F$(r,i,s)):(n||(n={key:{},next:null}),B$(n,i,s))}};return o},W$=Lr,z$=$c,ds=rE(),_r=W$("%TypeError%"),Qy={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new _r("`O` is not an object");if(typeof e!="string")throw new _r("`slot` must be a string");if(ds.assert(t),!Qy.has(t,e))throw new _r("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new _r("`O` is not an object");if(typeof e!="string")throw new _r("`slot` must be a string");var r=ds.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new _r("`O` is not an object");if(typeof e!="string")throw new _r("`slot` must be a string");var r=ds.get(t);return!!r&&z$(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new _r("`O` is not an object");if(typeof e!="string")throw new _r("`slot` must be a string");var n=ds.get(t);n||(n={},ds.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(Qy);var V$=Qy,ps=V$,G$=SyntaxError,Xv=typeof StopIteration=="object"?StopIteration:null,H$=function(e){if(!Xv)throw new G$("this environment lacks StopIteration");ps.set(e,"[[Done]]",!1);var r={next:function(){var o=ps.get(this,"[[Iterator]]"),i=ps.get(o,"[[Done]]");try{return{done:i,value:i?void 0:o.next()}}catch(s){if(ps.set(o,"[[Done]]",!0),s!==Xv)throw s;return{done:!0,value:void 0}}}};return ps.set(r,"[[Iterator]]",e),r},Q$={}.toString,nE=Array.isArray||function(t){return Q$.call(t)=="[object Array]"},Y$=String.prototype.valueOf,K$=function(e){try{return Y$.call(e),!0}catch{return!1}},q$=Object.prototype.toString,J$="[object String]",X$=An(),oE=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:X$?K$(e):q$.call(e)===J$},Yy=typeof Map=="function"&&Map.prototype?Map:null,Z$=typeof Set=="function"&&Set.prototype?Set:null,Fu;Yy||(Fu=function(e){return!1});var iE=Yy?Map.prototype.has:null,Zv=Z$?Set.prototype.has:null;!Fu&&!iE&&(Fu=function(e){return!1});var sE=Fu||function(e){if(!e||typeof e!="object")return!1;try{if(iE.call(e),Zv)try{Zv.call(e)}catch{return!0}return e instanceof Yy}catch{}return!1},eD=typeof Map=="function"&&Map.prototype?Map:null,Ky=typeof Set=="function"&&Set.prototype?Set:null,Mu;Ky||(Mu=function(e){return!1});var e_=eD?Map.prototype.has:null,aE=Ky?Set.prototype.has:null;!Mu&&!aE&&(Mu=function(e){return!1});var lE=Mu||function(e){if(!e||typeof e!="object")return!1;try{if(aE.call(e),e_)try{e_.call(e)}catch{return!0}return e instanceof Ky}catch{}return!1},t_=Kw,r_=H$;if(Mr()||Oc()){var qf=Symbol.iterator;Pl.exports=function(e){if(e!=null&&typeof e[qf]<"u")return e[qf]();if(t_(e))return Array.prototype[qf].call(e)}}else{var tD=nE,rD=oE,n_=Lr,nD=n_("%Map%",!0),oD=n_("%Set%",!0),Gt=ir,o_=Gt("Array.prototype.push"),i_=Gt("String.prototype.charCodeAt"),iD=Gt("String.prototype.slice"),sD=function(e,r){var n=e.length;if(r+1>=n)return r+1;var o=i_(e,r);if(o<55296||o>56319)return r+1;var i=i_(e,r+1);return i<56320||i>57343?r+1:r+2},Jf=function(e){var r=0;return{next:function(){var o=r>=e.length,i;return o||(i=e[r],r+=1),{done:o,value:i}}}},s_=function(e,r){if(tD(e)||t_(e))return Jf(e);if(rD(e)){var n=0;return{next:function(){var i=sD(e,n),s=iD(e,n,i);return n=i,{done:i>e.length,value:s}}}}if(r&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!nD&&!oD)Pl.exports=function(e){if(e!=null)return s_(e,!0)};else{var aD=sE,lD=lE,a_=Gt("Map.prototype.forEach",!0),l_=Gt("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var u_=Gt("Map.prototype.iterator",!0),c_=Gt("Set.prototype.iterator",!0);var f_=Gt("Map.prototype.@@iterator",!0)||Gt("Map.prototype._es6-shim iterator_",!0),d_=Gt("Set.prototype.@@iterator",!0)||Gt("Set.prototype._es6-shim iterator_",!0),uD=function(e){if(aD(e)){if(u_)return r_(u_(e));if(f_)return f_(e);if(a_){var r=[];return a_(e,function(o,i){o_(r,[i,o])}),Jf(r)}}if(lD(e)){if(c_)return r_(c_(e));if(d_)return d_(e);if(l_){var n=[];return l_(e,function(o){o_(n,o)}),Jf(n)}}};Pl.exports=function(e){return uD(e)||s_(e)}}}var cD=Pl.exports,fD=Na,dD=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",pD=Object.prototype.toString,hD=Array.prototype.concat,uE=Object.defineProperty,yD=function(t){return typeof t=="function"&&pD.call(t)==="[object Function]"},mD=Ki(),cE=uE&&mD,gD=function(t,e,r,n){e in t&&(!yD(n)||!n())||(cE?uE(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},fE=function(t,e){var r=arguments.length>2?arguments[2]:{},n=fD(e);dD&&(n=hD.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)gD(t,n[o],e[n[o]],r[n[o]])};fE.supportsDescriptors=!!cE;var dE=fE,p_=function(t){return t!==t},pE=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||p_(e)&&p_(r))},vD=pE,hE=function(){return typeof Object.is=="function"?Object.is:vD},_D=hE,xD=dE,SD=function(){var e=_D();return xD(Object,{is:e},{is:function(){return Object.is!==e}}),e},wD=dE,ED=Dc,CD=pE,yE=hE,bD=SD,mE=ED(yE(),Object);wD(mE,{getPolyfill:yE,implementation:CD,shim:bD});var AD=mE,gE={exports:{}},ID="Function.prototype.bind called on incompatible ",Xf=Array.prototype.slice,PD=Object.prototype.toString,ND="[object Function]",kD=function(e){var r=this;if(typeof r!="function"||PD.call(r)!==ND)throw new TypeError(ID+r);for(var n=Xf.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(Xf.call(arguments)));return Object(p)===p?p:this}else return r.apply(e,n.concat(Xf.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],l=0;l<s;l++)a.push("$"+l);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},TD=kD,vE=Function.prototype.bind||TD,ie,Li=SyntaxError,_E=Function,yi=TypeError,Zf=function(t){try{return _E('"use strict"; return ('+t+").constructor;")()}catch{}},Jn=Object.getOwnPropertyDescriptor;if(Jn)try{Jn({},"")}catch{Jn=null}var ed=function(){throw new yi},RD=Jn?function(){try{return arguments.callee,ed}catch{try{return Jn(arguments,"callee").get}catch{return ed}}}():ed,bo=Mr(),Qr=Object.getPrototypeOf||function(t){return t.__proto__},Oo={},jD=typeof Uint8Array>"u"?ie:Qr(Uint8Array),mi={"%AggregateError%":typeof AggregateError>"u"?ie:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ie:ArrayBuffer,"%ArrayIteratorPrototype%":bo?Qr([][Symbol.iterator]()):ie,"%AsyncFromSyncIteratorPrototype%":ie,"%AsyncFunction%":Oo,"%AsyncGenerator%":Oo,"%AsyncGeneratorFunction%":Oo,"%AsyncIteratorPrototype%":Oo,"%Atomics%":typeof Atomics>"u"?ie:Atomics,"%BigInt%":typeof BigInt>"u"?ie:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ie:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ie:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ie:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ie:FinalizationRegistry,"%Function%":_E,"%GeneratorFunction%":Oo,"%Int8Array%":typeof Int8Array>"u"?ie:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ie:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ie:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bo?Qr(Qr([][Symbol.iterator]())):ie,"%JSON%":typeof JSON=="object"?JSON:ie,"%Map%":typeof Map>"u"?ie:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bo?ie:Qr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ie:Promise,"%Proxy%":typeof Proxy>"u"?ie:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ie:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ie:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bo?ie:Qr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ie:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bo?Qr(""[Symbol.iterator]()):ie,"%Symbol%":bo?Symbol:ie,"%SyntaxError%":Li,"%ThrowTypeError%":RD,"%TypedArray%":jD,"%TypeError%":yi,"%Uint8Array%":typeof Uint8Array>"u"?ie:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ie:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ie:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ie:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ie:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ie:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ie:WeakSet},OD=function t(e){var r;if(e==="%AsyncFunction%")r=Zf("async function () {}");else if(e==="%GeneratorFunction%")r=Zf("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Zf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(r=Qr(o.prototype))}return mi[e]=r,r},h_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$a=vE,Lu=$c,$D=$a.call(Function.call,Array.prototype.concat),DD=$a.call(Function.apply,Array.prototype.splice),y_=$a.call(Function.call,String.prototype.replace),Bu=$a.call(Function.call,String.prototype.slice),FD=$a.call(Function.call,RegExp.prototype.exec),MD=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,LD=/\\(\\)?/g,BD=function(e){var r=Bu(e,0,1),n=Bu(e,-1);if(r==="%"&&n!=="%")throw new Li("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Li("invalid intrinsic syntax, expected opening `%`");var o=[];return y_(e,MD,function(i,s,a,l){o[o.length]=a?y_(l,LD,"$1"):s||i}),o},UD=function(e,r){var n=e,o;if(Lu(h_,n)&&(o=h_[n],n="%"+o[0]+"%"),Lu(mi,n)){var i=mi[n];if(i===Oo&&(i=OD(n)),typeof i>"u"&&!r)throw new yi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Li("intrinsic "+e+" does not exist!")},xE=function(e,r){if(typeof e!="string"||e.length===0)throw new yi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new yi('"allowMissing" argument must be a boolean');if(FD(/^%?[^%]*%?$/,e)===null)throw new Li("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=BD(e),o=n.length>0?n[0]:"",i=UD("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],DD(n,$D([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Bu(f,0,1),m=Bu(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Li("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",Lu(mi,s))a=mi[s];else if(a!=null){if(!(f in a)){if(!r)throw new yi("base intrinsic for "+e+" exists, but the property is not available.");return}if(Jn&&p+1>=n.length){var _=Jn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=Lu(a,f),a=a[f];d&&!l&&(mi[s]=a)}}return a};(function(t){var e=vE,r=xE,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(d){var f=i(e,o,arguments);if(s&&a){var h=s(f,"length");h.configurable&&a(f,"length",{value:1+l(0,d.length-(arguments.length-1))})}return f};var c=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:c}):t.exports.apply=c})(gE);var SE=gE.exports,wE=xE,EE=SE,WD=EE(wE("String.prototype.indexOf")),zD=function(e,r){var n=wE(e,!!r);return typeof n=="function"&&WD(e,".prototype.")>-1?EE(n):n},CE=Function.prototype.toString,qo=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,zp,Nl;if(typeof qo=="function"&&typeof Object.defineProperty=="function")try{zp=Object.defineProperty({},"length",{get:function(){throw Nl}}),Nl={},qo(function(){throw 42},null,zp)}catch(t){t!==Nl&&(qo=null)}else qo=null;var VD=/^\s*class\b/,Vp=function(e){try{var r=CE.call(e);return VD.test(r)}catch{return!1}},td=function(e){try{return Vp(e)?!1:(CE.call(e),!0)}catch{return!1}},kl=Object.prototype.toString,GD="[object Object]",HD="[object Function]",QD="[object GeneratorFunction]",YD="[object HTMLAllCollection]",KD="[object HTML document.all class]",qD="[object HTMLCollection]",JD=typeof Symbol=="function"&&!!Symbol.toStringTag,XD=!(0 in[,]),Gp=function(){return!1};if(typeof document=="object"){var ZD=document.all;kl.call(ZD)===kl.call(document.all)&&(Gp=function(e){if((XD||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=kl.call(e);return(r===YD||r===KD||r===qD||r===GD)&&e("")==null}catch{}return!1})}var eF=qo?function(e){if(Gp(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{qo(e,null,zp)}catch(r){if(r!==Nl)return!1}return!Vp(e)&&td(e)}:function(e){if(Gp(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(JD)return td(e);if(Vp(e))return!1;var r=kl.call(e);return r!==HD&&r!==QD&&!/^\[object HTML/.test(r)?!1:td(e)},tF=eF,rF=Object.prototype.toString,bE=Object.prototype.hasOwnProperty,nF=function(e,r,n){for(var o=0,i=e.length;o<i;o++)bE.call(e,o)&&(n==null?r(e[o],o,e):r.call(n,e[o],o,e))},oF=function(e,r,n){for(var o=0,i=e.length;o<i;o++)n==null?r(e.charAt(o),o,e):r.call(n,e.charAt(o),o,e)},iF=function(e,r,n){for(var o in e)bE.call(e,o)&&(n==null?r(e[o],o,e):r.call(n,e[o],o,e))},sF=function(e,r,n){if(!tF(r))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),rF.call(e)==="[object Array]"?nF(e,r,o):typeof e=="string"?oF(e,r,o):iF(e,r,o)},AE=sF,rd=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],aF=typeof globalThis>"u"?nh:globalThis,IE=function(){for(var e=[],r=0;r<rd.length;r++)typeof aF[rd[r]]=="function"&&(e[e.length]=rd[r]);return e},PE=AE,lF=IE,qy=ir,uF=qy("Object.prototype.toString"),NE=An(),Tl=Bc,cF=typeof globalThis>"u"?nh:globalThis,kE=lF(),fF=qy("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},dF=qy("String.prototype.slice"),TE={},nd=Object.getPrototypeOf;NE&&Tl&&nd&&PE(kE,function(t){var e=new cF[t];if(Symbol.toStringTag in e){var r=nd(e),n=Tl(r,Symbol.toStringTag);if(!n){var o=nd(r);n=Tl(o,Symbol.toStringTag)}TE[t]=n.get}});var pF=function(e){var r=!1;return PE(TE,function(n,o){if(!r)try{r=n.call(e)===o}catch{}}),r},RE=function(e){if(!e||typeof e!="object")return!1;if(!NE||!(Symbol.toStringTag in e)){var r=dF(uF(e),8,-1);return fF(kE,r)>-1}return Tl?pF(e):!1},hF=SE,yF=zD,jE=Lc,mF=RE,m_=jE("ArrayBuffer",!0),g_=jE("Float32Array",!0),Rl=yF("ArrayBuffer.prototype.byteLength",!0),v_=m_&&!Rl&&new m_().slice,__=v_&&hF(v_),gF=Rl||__?function(e){if(!e||typeof e!="object")return!1;try{return Rl?Rl(e):__(e,0),!0}catch{return!1}}:g_?function(e){try{return new g_(e).buffer===e&&!mF(e)}catch(r){return typeof e=="object"&&r.name==="RangeError"}}:function(e){return!1},vF=Date.prototype.getDay,_F=function(e){try{return vF.call(e),!0}catch{return!1}},xF=Object.prototype.toString,SF="[object Date]",wF=An(),EF=function(e){return typeof e!="object"||e===null?!1:wF?_F(e):xF.call(e)===SF},Hp=ir,OE=An(),$E,DE,Qp,Yp;if(OE){$E=Hp("Object.prototype.hasOwnProperty"),DE=Hp("RegExp.prototype.exec"),Qp={};var od=function(){throw Qp};Yp={toString:od,valueOf:od},typeof Symbol.toPrimitive=="symbol"&&(Yp[Symbol.toPrimitive]=od)}var CF=Hp("Object.prototype.toString"),bF=Object.getOwnPropertyDescriptor,AF="[object RegExp]",IF=OE?function(e){if(!e||typeof e!="object")return!1;var r=bF(e,"lastIndex"),n=r&&$E(r,"value");if(!n)return!1;try{DE(e,Yp)}catch(o){return o===Qp}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:CF(e)===AF},PF=ir,x_=PF("SharedArrayBuffer.prototype.byteLength",!0),NF=x_?function(e){if(!e||typeof e!="object")return!1;try{return x_(e),!0}catch{return!1}}:function(e){return!1},kF=Number.prototype.toString,TF=function(e){try{return kF.call(e),!0}catch{return!1}},RF=Object.prototype.toString,jF="[object Number]",OF=An(),$F=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:OF?TF(e):RF.call(e)===jF},FE=ir,DF=FE("Boolean.prototype.toString"),FF=FE("Object.prototype.toString"),MF=function(e){try{return DF(e),!0}catch{return!1}},LF="[object Boolean]",BF=An(),UF=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:BF&&Symbol.toStringTag in e?MF(e):FF(e)===LF},Kp={exports:{}},WF=Object.prototype.toString,zF=Mr();if(zF){var VF=Symbol.prototype.toString,GF=/^Symbol\(.*\)$/,HF=function(e){return typeof e.valueOf()!="symbol"?!1:GF.test(VF.call(e))};Kp.exports=function(e){if(typeof e=="symbol")return!0;if(WF.call(e)!=="[object Symbol]")return!1;try{return HF(e)}catch{return!1}}}else Kp.exports=function(e){return!1};var QF=Kp.exports,qp={exports:{}},S_=typeof BigInt<"u"&&BigInt,YF=function(){return typeof S_=="function"&&typeof BigInt=="function"&&typeof S_(42)=="bigint"&&typeof BigInt(42)=="bigint"},KF=YF();if(KF){var qF=BigInt.prototype.valueOf,JF=function(e){try{return qF.call(e),!0}catch{}return!1};qp.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:JF(e)}}else qp.exports=function(e){return!1};var XF=qp.exports,ZF=oE,e3=$F,t3=UF,r3=QF,n3=XF,o3=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(ZF(e))return"String";if(e3(e))return"Number";if(t3(e))return"Boolean";if(r3(e))return"Symbol";if(n3(e))return"BigInt"},Uu=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,w_=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Wu;Uu||(Wu=function(e){return!1});var Jp=Uu?Uu.prototype.has:null,id=w_?w_.prototype.has:null;!Wu&&!Jp&&(Wu=function(e){return!1});var i3=Wu||function(e){if(!e||typeof e!="object")return!1;try{if(Jp.call(e,Jp),id)try{id.call(e,id)}catch{return!0}return e instanceof Uu}catch{}return!1},Xp={exports:{}},s3=Lr,ME=ir,a3=s3("%WeakSet%",!0),sd=ME("WeakSet.prototype.has",!0);if(sd){var ad=ME("WeakMap.prototype.has",!0);Xp.exports=function(e){if(!e||typeof e!="object")return!1;try{if(sd(e,sd),ad)try{ad(e,ad)}catch{return!0}return e instanceof a3}catch{}return!1}}else Xp.exports=function(e){return!1};var l3=Xp.exports,u3=sE,c3=lE,f3=i3,d3=l3,p3=function(e){if(e&&typeof e=="object"){if(u3(e))return"Map";if(c3(e))return"Set";if(f3(e))return"WeakMap";if(d3(e))return"WeakSet"}return!1},LE={exports:{}},h3="Function.prototype.bind called on incompatible ",y3=Object.prototype.toString,m3=Math.max,g3="[object Function]",E_=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},v3=function(e,r){for(var n=[],o=r||0,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},_3=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},x3=function(e){var r=this;if(typeof r!="function"||y3.apply(r)!==g3)throw new TypeError(h3+r);for(var n=v3(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,E_(n,arguments));return Object(p)===p?p:this}return r.apply(e,E_(n,arguments))},s=m3(0,r.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(o=Function("binder","return function ("+_3(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},S3=x3,BE=Function.prototype.bind||S3,ee,Bi=SyntaxError,UE=Function,gi=TypeError,ld=function(t){try{return UE('"use strict"; return ('+t+").constructor;")()}catch{}},Xn=Object.getOwnPropertyDescriptor;if(Xn)try{Xn({},"")}catch{Xn=null}var ud=function(){throw new gi},w3=Xn?function(){try{return arguments.callee,ud}catch{try{return Xn(arguments,"callee").get}catch{return ud}}}():ud,Ao=Mr(),E3=Fc(),He=Object.getPrototypeOf||(E3?function(t){return t.__proto__}:null),$o={},C3=typeof Uint8Array>"u"||!He?ee:He(Uint8Array),Zn={"%AggregateError%":typeof AggregateError>"u"?ee:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ee:ArrayBuffer,"%ArrayIteratorPrototype%":Ao&&He?He([][Symbol.iterator]()):ee,"%AsyncFromSyncIteratorPrototype%":ee,"%AsyncFunction%":$o,"%AsyncGenerator%":$o,"%AsyncGeneratorFunction%":$o,"%AsyncIteratorPrototype%":$o,"%Atomics%":typeof Atomics>"u"?ee:Atomics,"%BigInt%":typeof BigInt>"u"?ee:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ee:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ee:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ee:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ee:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ee:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ee:FinalizationRegistry,"%Function%":UE,"%GeneratorFunction%":$o,"%Int8Array%":typeof Int8Array>"u"?ee:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ee:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ee:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ao&&He?He(He([][Symbol.iterator]())):ee,"%JSON%":typeof JSON=="object"?JSON:ee,"%Map%":typeof Map>"u"?ee:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ao||!He?ee:He(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ee:Promise,"%Proxy%":typeof Proxy>"u"?ee:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ee:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ee:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ao||!He?ee:He(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ee:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ao&&He?He(""[Symbol.iterator]()):ee,"%Symbol%":Ao?Symbol:ee,"%SyntaxError%":Bi,"%ThrowTypeError%":w3,"%TypedArray%":C3,"%TypeError%":gi,"%Uint8Array%":typeof Uint8Array>"u"?ee:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ee:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ee:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ee:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ee:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ee:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ee:WeakSet};if(He)try{null.error}catch(t){var b3=He(He(t));Zn["%Error.prototype%"]=b3}var A3=function t(e){var r;if(e==="%AsyncFunction%")r=ld("async function () {}");else if(e==="%GeneratorFunction%")r=ld("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=ld("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&He&&(r=He(o.prototype))}return Zn[e]=r,r},C_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Da=BE,zu=Mc,I3=Da.call(Function.call,Array.prototype.concat),P3=Da.call(Function.apply,Array.prototype.splice),b_=Da.call(Function.call,String.prototype.replace),Vu=Da.call(Function.call,String.prototype.slice),N3=Da.call(Function.call,RegExp.prototype.exec),k3=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T3=/\\(\\)?/g,R3=function(e){var r=Vu(e,0,1),n=Vu(e,-1);if(r==="%"&&n!=="%")throw new Bi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Bi("invalid intrinsic syntax, expected opening `%`");var o=[];return b_(e,k3,function(i,s,a,l){o[o.length]=a?b_(l,T3,"$1"):s||i}),o},j3=function(e,r){var n=e,o;if(zu(C_,n)&&(o=C_[n],n="%"+o[0]+"%"),zu(Zn,n)){var i=Zn[n];if(i===$o&&(i=A3(n)),typeof i>"u"&&!r)throw new gi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Bi("intrinsic "+e+" does not exist!")},WE=function(e,r){if(typeof e!="string"||e.length===0)throw new gi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new gi('"allowMissing" argument must be a boolean');if(N3(/^%?[^%]*%?$/,e)===null)throw new Bi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=R3(e),o=n.length>0?n[0]:"",i=j3("%"+o+"%",r),s=i.name,a=i.value,l=!1,c=i.alias;c&&(o=c[0],P3(n,I3([0,1],c)));for(var p=1,d=!0;p<n.length;p+=1){var f=n[p],h=Vu(f,0,1),m=Vu(f,-1);if((h==='"'||h==="'"||h==="`"||m==='"'||m==="'"||m==="`")&&h!==m)throw new Bi("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),o+="."+f,s="%"+o+"%",zu(Zn,s))a=Zn[s];else if(a!=null){if(!(f in a)){if(!r)throw new gi("base intrinsic for "+e+" exists, but the property is not available.");return}if(Xn&&p+1>=n.length){var _=Xn(a,f);d=!!_,d&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[f]}else d=zu(a,f),a=a[f];d&&!l&&(Zn[s]=a)}}return a};(function(t){var e=BE,r=WE,n=Dw,o=r("%TypeError%"),i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,i),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(f){if(typeof f!="function")throw new o("a function is required");var h=a(e,s,arguments);return n(h,1+c(0,f.length-(arguments.length-1)),!0)};var p=function(){return a(e,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p})(LE);var zE=LE.exports,VE=WE,GE=zE,O3=GE(VE("String.prototype.indexOf")),$3=function(e,r){var n=VE(e,!!r);return typeof n=="function"&&O3(e,".prototype.")>-1?GE(n):n},Gu=AE,D3=IE,A_=zE,Jy=$3,jl=Bc,F3=Jy("Object.prototype.toString"),HE=An(),I_=typeof globalThis>"u"?nh:globalThis,Zp=D3(),Xy=Jy("String.prototype.slice"),cd=Object.getPrototypeOf,M3=Jy("Array.prototype.indexOf",!0)||function(e,r){for(var n=0;n<e.length;n+=1)if(e[n]===r)return n;return-1},Hu={__proto__:null};HE&&jl&&cd?Gu(Zp,function(t){var e=new I_[t];if(Symbol.toStringTag in e){var r=cd(e),n=jl(r,Symbol.toStringTag);if(!n){var o=cd(r);n=jl(o,Symbol.toStringTag)}Hu["$"+t]=A_(n.get)}}):Gu(Zp,function(t){var e=new I_[t],r=e.slice||e.set;r&&(Hu["$"+t]=A_(r))});var L3=function(e){var r=!1;return Gu(Hu,function(n,o){if(!r)try{"$"+n(e)===o&&(r=Xy(o,1))}catch{}}),r},B3=function(e){var r=!1;return Gu(Hu,function(n,o){if(!r)try{n(e),r=Xy(o,1)}catch{}}),r},U3=function(e){if(!e||typeof e!="object")return!1;if(!HE){var r=Xy(F3(e),8,-1);return M3(Zp,r)>-1?r:r!=="Object"?!1:B3(e)}return jl?L3(e):null},fd,P_;function W3(){if(P_)return fd;P_=1;var t=Dc,e=ir,r=Lr,n=RE,o=r("ArrayBuffer",!0),i=r("Float32Array",!0),s=e("ArrayBuffer.prototype.byteLength",!0),a=o&&!s&&new o().slice,l=a&&t(a);return fd=s||l?function(p){if(!p||typeof p!="object")return!1;try{return s?s(p):l(p,0),!0}catch{return!1}}:i?function(p){try{return new i(p).buffer===p&&!n(p)}catch{return!1}}:function(p){return!1},fd}var z3=ir,N_=z3("ArrayBuffer.prototype.byteLength",!0),V3=W3(),G3=function(e){return V3(e)?N_?N_(e):e.byteLength:NaN},QE=Ej,vr=eO,k_=QO,H3=Lc,Ui=cD,Q3=rE,T_=AD,R_=Kw,j_=nE,O_=gF,$_=EF,D_=IF,F_=NF,M_=Na,L_=o3,B_=p3,U_=U3,W_=G3,z_=vr("SharedArrayBuffer.prototype.byteLength",!0),V_=vr("Date.prototype.getTime"),dd=Object.getPrototypeOf,G_=vr("Object.prototype.toString"),Qu=H3("%Set%",!0),eh=vr("Map.prototype.has",!0),Yu=vr("Map.prototype.get",!0),H_=vr("Map.prototype.size",!0),Ku=vr("Set.prototype.add",!0),YE=vr("Set.prototype.delete",!0),qu=vr("Set.prototype.has",!0),Ol=vr("Set.prototype.size",!0);function Q_(t,e,r,n){for(var o=Ui(t),i;(i=o.next())&&!i.done;)if(rr(e,i.value,r,n))return YE(t,i.value),!0;return!1}function KE(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function Y3(t,e,r,n,o,i){var s=KE(r);if(s!=null)return s;var a=Yu(e,s),l=QE({},o,{strict:!1});return typeof a>"u"&&!eh(e,s)||!rr(n,a,l,i)?!1:!eh(t,s)&&rr(n,a,l,i)}function K3(t,e,r){var n=KE(r);return n??(qu(e,n)&&!qu(t,n))}function Y_(t,e,r,n,o,i){for(var s=Ui(t),a,l;(a=s.next())&&!a.done;)if(l=a.value,rr(r,l,o,i)&&rr(n,Yu(e,l),o,i))return YE(t,l),!0;return!1}function rr(t,e,r,n){var o=r||{};if(o.strict?T_(t,e):t===e)return!0;var i=L_(t),s=L_(e);if(i!==s)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return o.strict?T_(t,e):t==e;var a=n.has(t),l=n.has(e),c;if(a&&l){if(n.get(t)===n.get(e))return!0}else c={};return a||n.set(t,c),l||n.set(e,c),X3(t,e,o,n)}function K_(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function q3(t,e,r,n){if(Ol(t)!==Ol(e))return!1;for(var o=Ui(t),i=Ui(e),s,a,l;(s=o.next())&&!s.done;)if(s.value&&typeof s.value=="object")l||(l=new Qu),Ku(l,s.value);else if(!qu(e,s.value)){if(r.strict||!K3(t,e,s.value))return!1;l||(l=new Qu),Ku(l,s.value)}if(l){for(;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!Q_(l,a.value,r.strict,n))return!1}else if(!r.strict&&!qu(t,a.value)&&!Q_(l,a.value,r.strict,n))return!1;return Ol(l)===0}return!0}function J3(t,e,r,n){if(H_(t)!==H_(e))return!1;for(var o=Ui(t),i=Ui(e),s,a,l,c,p,d;(s=o.next())&&!s.done;)if(c=s.value[0],p=s.value[1],c&&typeof c=="object")l||(l=new Qu),Ku(l,c);else if(d=Yu(e,c),typeof d>"u"&&!eh(e,c)||!rr(p,d,r,n)){if(r.strict||!Y3(t,e,c,p,r,n))return!1;l||(l=new Qu),Ku(l,c)}if(l){for(;(a=i.next())&&!a.done;)if(c=a.value[0],d=a.value[1],c&&typeof c=="object"){if(!Y_(l,t,c,d,r,n))return!1}else if(!r.strict&&(!t.has(c)||!rr(Yu(t,c),d,r,n))&&!Y_(l,t,c,d,QE({},r,{strict:!1}),n))return!1;return Ol(l)===0}return!0}function X3(t,e,r,n){var o,i;if(typeof t!=typeof e||t==null||e==null||G_(t)!==G_(e)||R_(t)!==R_(e))return!1;var s=j_(t),a=j_(e);if(s!==a)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c||(l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var p=D_(t),d=D_(e);if(p!==d||(p||d)&&(t.source!==e.source||k_(t)!==k_(e)))return!1;var f=$_(t),h=$_(e);if(f!==h||(f||h)&&V_(t)!==V_(e)||r.strict&&dd&&dd(t)!==dd(e))return!1;var m=U_(t),_=U_(e);if(m!==_)return!1;if(m||_){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var I=K_(t),g=K_(e);if(I!==g)return!1;if(I||g){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var y=O_(t),v=O_(e);if(y!==v)return!1;if(y||v)return W_(t)!==W_(e)?!1:typeof Uint8Array=="function"&&rr(new Uint8Array(t),new Uint8Array(e),r,n);var E=F_(t),w=F_(e);if(E!==w)return!1;if(E||w)return z_(t)!==z_(e)?!1:typeof Uint8Array=="function"&&rr(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var C=M_(t),T=M_(e);if(C.length!==T.length)return!1;for(C.sort(),T.sort(),o=C.length-1;o>=0;o--)if(C[o]!=T[o])return!1;for(o=C.length-1;o>=0;o--)if(i=C[o],!rr(t[i],e[i],r,n))return!1;var P=B_(t),U=B_(e);return P!==U?!1:P==="Set"||U==="Set"?q3(t,e,r,n):P==="Map"?J3(t,e,r,n):!0}var Z3=function(e,r,n){return rr(e,r,n,Q3())};const eM=m0(Z3),tM=(t,e)=>eM(t,e),rM={apiKey:"AIzaSyCa4jaiAOgH5H8B6hSo4DU49WnkpGPeavA",authDomain:"hkmjbs-streaming.firebaseapp.com",databaseURL:"https://hkmjbs-streaming-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hkmjbs-streaming",storageBucket:"hkmjbs-streaming.appspot.com",messagingSenderId:"537815456325",appId:"1:537815456325:web:c387796326f9db2726a12c"},nM=HS(rM),Do=jR(nM);window.location.hostname==="localhost"&&hw(Do,"localhost",9e3);const qE={database:Do,get:t=>{const e=Ss(Do,t);return pw(e).then(r=>{if(r.exists())return r.val()}).catch(r=>{throw console.error(r),r})},set:(t,e)=>{const r=Ss(Do,t);return Dy(r,e).catch(n=>{throw console.error(n),n})},update:(t,e)=>{const r=Ss(Do,t);return dw(r,e).catch(n=>{throw console.error(n),n})},push:(t,e)=>{const r=Ss(Do,t);return fw(r,e).catch(n=>{throw console.error(n),n})}},Zy=S.createContext(qE);function oM({children:t}){return u.jsx(Zy.Provider,{value:qE,children:t})}const iM=()=>S.useContext(Zy),$r=(t,e)=>{const{database:r}=S.useContext(Zy),n=S.useMemo(()=>Ss(r,t),[r,t]),[o,i]=S.useState(),[s,a]=S.useState(e),l=S.useCallback(f=>Dy(n,f),[n]),c=S.useCallback(f=>dw(n,f),[n]),p=S.useCallback(f=>fw(n,f),[n]);return S.useEffect(()=>{tM(e,s)||a(e)},[s,e]),S.useEffect(()=>{const f=[];s!=null&&s.order&&s.order.byChild&&f.push(wR(s.order.byChild)),s!=null&&s.filter&&(typeof s.filter.equalTo<"u"&&f.push(CR(s.filter.equalTo)),typeof s.filter.limitToLast<"u"&&f.push(xR(s.filter.limitToLast)));const h=f.length>0?bR(n,...f):n;s!=null&&s.onlyOnce?pw(h).then(m=>{m.exists()&&i(m.val())}):mR(h,m=>{i(m.val())},s??{})},[s,n]),{data:S.useMemo(()=>o,[o]),set:l,update:c,push:p}};function JE(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=JE(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function sM(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=JE(t))&&(n&&(n+=" "),n+=e);return n}const q_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,J_=sM,em=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return J_(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(c=>{const p=r==null?void 0:r[c],d=i==null?void 0:i[c];if(p===null)return null;const f=q_(p)||q_(d);return o[c][f]}),a=r&&Object.entries(r).reduce((c,p)=>{let[d,f]=p;return f===void 0||(c[d]=f),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,p)=>{let{class:d,className:f,...h}=p;return Object.entries(h).every(m=>{let[_,I]=m;return Array.isArray(I)?I.includes({...i,...a}[_]):{...i,...a}[_]===I})?[...c,d,f]:c},[]);return J_(t,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},aM=em(["font-semibold"],{variants:{variant:{contained:["border","rounded"],text:[],icon:["hover:enabled:bg-opacity-50 leading-4"]},color:{primary:[],secondary:[],success:[],danger:[],inverted:[]},size:{small:["text-sm"],medium:["text-base"],large:["text-md"],xlarge:["text-2xl"]},disabled:{true:["cursor-not-allowed opacity-30"]},loading:{true:["cursor-wait opacity-30"]}},compoundVariants:[{variant:"contained",size:"small",className:"py-1 px-2"},{variant:"contained",size:"medium",className:"py-2 px-4"},{variant:"contained",size:"large",className:"py-2 px-4"},{variant:"contained",size:"xlarge",className:"py-4 px-4"},{color:"primary",variant:"contained",className:"bg-teal-800 text-white border-transparent hover:enabled:bg-teal-700"},{color:"secondary",variant:"contained",className:"bg-white text-gray-800 border-gray-400 hover:enabled:bg-gray-100"},{color:"success",variant:"contained",className:"bg-green-100 text-green-500 border-green-400 hover:enabled:bg-green-200"},{color:"danger",variant:"contained",className:"bg-red-100 text-red-500 border-red-400 hover:enabled:bg-red-200"},{color:"primary",variant:"text",className:"text-teal-800 hover:enabled:text-teal-700"},{color:"secondary",variant:"text",className:"text-gray-800 hover:enabled:text-gray-700"},{color:"success",variant:"text",className:"text-green-800 hover:enabled:text-green-700"},{color:"danger",variant:"text",className:"text-red-800 hover:enabled:text-red-700"},{color:"inverted",variant:"text",className:"text-gray-100 hover:enabled:text-gray-0"},{color:"primary",variant:"icon",className:"text-teal-800 hover:enabled:text-teal-700 hover:enabled:bg-teal-100"},{color:"secondary",variant:"icon",className:"text-gray-800 hover:enabled:text-gray-700 hover:enabled:bg-gray-100"},{color:"success",variant:"icon",className:"text-green-800 hover:enabled:text-green-700 hover:enabled:bg-green-100"},{color:"danger",variant:"icon",className:"text-red-800 hover:enabled:text-red-700 hover:enabled:bg-red-100"},{color:"primary",size:"medium",className:"uppercase"}],defaultVariants:{color:"primary",size:"medium",variant:"contained"}});function pe({color:t,size:e,variant:r,className:n,type:o="button",loading:i,...s}){const a=S.useMemo(()=>aM({color:t,size:e,variant:r,disabled:s.disabled,loading:i,className:n}),[t,e,r,s.disabled,i,n]);return u.jsx("button",{type:o,className:a,disabled:s.disabled||i,...s})}function lM(){return u.jsx("div",{className:"container mx-auto max-w-screen-sm ",children:u.jsxs("div",{className:"h-screen flex flex-col py-16 gap-y-12",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("h1",{className:"text-5xl text-center",children:"日麻比賽直播系統 (牌藝攻防)"})}),u.jsx("div",{className:"text-center",children:u.jsx("img",{src:"/images/master-logo.jpeg",className:"w-48 mx-auto",alt:"HKMSCA"})}),u.jsxs("div",{className:"shrink-0 space-y-4",children:[u.jsx("div",{children:u.jsx("a",{href:"/create-match",children:u.jsx(pe,{className:"w-full",size:"xlarge",children:"開新對局"})})}),u.jsx("div",{children:u.jsx("div",{className:"text-center",children:u.jsx("a",{href:"/obs/1",target:"_blank",children:u.jsx(pe,{color:"secondary",size:"large",children:"直播頁面"})})})}),u.jsx("div",{className:"flex gap-x-4"})]})]})})}const uM=t=>{const e={};for(let r=0;r<t.length;r+=1)e[r.toString()]=t[r];return e},X_=t=>{if(t.length!==0)return t[t.length-1]},Ji=t=>{const{data:e,update:r}=$r(`/matches/${t}`),{data:n,update:o,push:i}=$r("matchRounds",{order:{byChild:"matchId"},filter:{equalTo:t}}),s=S.useMemo(()=>X_(Object.values(n??{}))??void 0,[n]),a=S.useMemo(()=>Object.values((s==null?void 0:s.doras)??{}),[s]),l=S.useCallback(h=>{const m=X_(Object.keys(n??{}));m&&o({[m]:{...s,...h}})},[s,n,o]),c=S.useCallback(h=>{l({doras:uM(h)})},[l]),p=S.useCallback(h=>{r({name:h})},[r]),d=S.useCallback(h=>{r({activeResultDetail:h})},[r]),f=S.useCallback(h=>{o({[h]:{...n==null?void 0:n[h],hasBroadcasted:!0}})},[n,o]);return{match:e,matchRounds:n,matchCurrentRound:s,matchCurrentRoundDoras:a,setMatchName:p,setMatchActiveResultDetail:d,setMatchRoundHasBroadcastedToTrue:f,setCurrentRoundDoras:c,updateCurrentMatchRound:l,pushMatchRound:i}};var nr=(t=>(t[t.Unknown=0]="Unknown",t[t.Exhausted=-1]="Exhausted",t[t.Ron=1]="Ron",t[t.SelfDrawn=2]="SelfDrawn",t[t.Hotfix=-2]="Hotfix",t))(nr||{}),Fe=(t=>(t[t.Unknown=0]="Unknown",t[t.NextRound=1]="NextRound",t[t.Extended=2]="Extended",t[t.NextRoundAndExtended=3]="NextRoundAndExtended",t[t.Hotfix=-2]="Hotfix",t[t.End=-1]="End",t))(Fe||{}),gt=(t=>(t[t.Win=1]="Win",t[t.Lose=-1]="Lose",t[t.None=0]="None",t))(gt||{}),en=(t=>(t[t.East=0]="East",t[t.South=1]="South",t[t.West=2]="West",t[t.North=3]="North",t))(en||{});let cM=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const fM=(t=12)=>cM(t),dM=()=>{const t=new Date;return`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`},pM=t=>`https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=${t}`,hM=t=>{let e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);e=Math.round(e*1.5),r=Math.round(r*1.5),n=Math.round(n*1.5),e=e<255?e:255,r=r<255?r:255,n=n<255?n:255,e=Math.round(e),r=Math.round(r),n=Math.round(n);const o=e.toString(16).length===1?`0${e.toString(16)}`:e.toString(16),i=r.toString(16).length===1?`0${r.toString(16)}`:r.toString(16),s=n.toString(16).length===1?`0${n.toString(16)}`:n.toString(16);return`#${o}${i}${s}`},pd=(t,e)=>{switch((t+e-1)%4){case 0:return"東";case 1:return"南";case 2:return"西";case 3:return"北"}return"東"},hd=[en.East,en.South,en.West,en.North],Z_=["0","1","2","3"],yM=t=>parseInt(t,10),Wc=(t,e)=>hd[(4+yM(t)-(e-1)%hd.length)%hd.length],zc=(t,e)=>Wc(t,e)===en.East,Io={"1h20f":{ne:200,e:400,ner:1e3,er:1500},"1h25f":{ne:200,e:400,ner:1e3,er:1500},"1h30f":{ne:300,e:500,ner:1e3,er:1500},"1h40f":{ne:400,e:700,ner:1300,er:2e3},"1h50f":{ne:400,e:800,ner:1600,er:2400},"1h60f":{ne:500,e:1e3,ner:2e3,er:2900},"1h70f":{ne:600,e:1200,ner:2300,er:3400},"1h80f":{ne:700,e:1300,ner:2600,er:3900},"1h90f":{ne:800,e:1500,ner:2900,er:4400},"1h100f":{ne:800,e:1600,ner:3200,er:4800},"1h110f":{ne:900,e:1800,ner:3600,er:5300},"2h20f":{ne:400,e:700,ner:1500,er:2100},"2h25f":{ne:400,e:800,ner:1600,er:2400},"2h30f":{ne:500,e:1e3,ner:2e3,er:2900},"2h40f":{ne:700,e:1300,ner:2600,er:3900},"2h50f":{ne:800,e:1600,ner:3200,er:4800},"2h60f":{ne:1e3,e:2e3,ner:3900,er:5800},"2h70f":{ne:1200,e:2300,ner:4500,er:6800},"2h80f":{ne:1300,e:2600,ner:5200,er:7700},"2h90f":{ne:1500,e:2900,ner:5800,er:8700},"2h100f":{ne:1600,e:3200,ner:6400,er:9600},"2h110f":{ne:1800,e:3600,ner:7100,er:10600},"3h20f":{ne:700,e:1300,ner:2600,er:3900},"3h25f":{ne:800,e:1600,ner:3200,er:4800},"3h30f":{ne:1e3,e:2e3,ner:3900,er:5800},"3h40f":{ne:1300,e:2600,ner:5200,er:7700},"3h50f":{ne:1600,e:3200,ner:6400,er:9600},"3h60f":{ne:2e3,e:3900,ner:7700,er:11600},"4h20f":{ne:1300,e:2600,ner:5200,er:7700},"4h25f":{ne:1600,e:3200,ner:6400,er:9600},"4h30f":{ne:2e3,e:3900,ner:7700,er:11600},"5h":{ne:2e3,e:4e3,ner:8e3,er:12e3},"6h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"7h":{ne:3e3,e:6e3,ner:12e3,er:18e3},"8h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"9h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"10h":{ne:4e3,e:8e3,ner:16e3,er:24e3},"11h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"12h":{ne:6e3,e:12e3,ner:24e3,er:36e3},"13h":{ne:8e3,e:16e3,ner:32e3,er:48e3}},mM=(t,e,r)=>{let n;const o=parseInt(t,10);if(Number.isNaN(o))throw new Error(`han "${t}" is NaN`);const i=parseInt(e,10);if(Number.isNaN(i))throw new Error(`fu "${e}" is NaN`);return o>=13?n=Io["13h"]:o>=5?n=Io[`${o}h`]:o>=4&&i>=(r!=null&&r.roundUp?30:40)||o>=3&&i>=(r!=null&&r.roundUp?60:70)?n=Io["5h"]:n=Io[`${o}h${i}f`],n||Io["1h30f"]},gM=(t,e,r,n,o)=>{const i=mM(t,e,o);return r?n?{win:i.er,target:i.er}:{win:i.e*3,all:i.e}:n?{win:i.ner,target:i.ner}:{win:i.e+2*i.ne,east:i.e,others:i.ne}},vM=t=>t.all||t.east?nr.SelfDrawn:t.target?nr.Ron:nr.Unknown,e0=t=>Z_[(t-1)%Z_.length],_M=t=>({0:{beforeScore:t[0].afterScore,afterScore:t[0].afterScore,isRevealed:!1,isRiichi:!1,type:gt.None,scoreChanges:[],prevScoreChanges:t[0].scoreChanges??[]},1:{beforeScore:t[1].afterScore,afterScore:t[1].afterScore,isRevealed:!1,isRiichi:!1,type:gt.None,scoreChanges:[],prevScoreChanges:t[1].scoreChanges??[]},2:{beforeScore:t[2].afterScore,afterScore:t[2].afterScore,isRevealed:!1,isRiichi:!1,type:gt.None,scoreChanges:[],prevScoreChanges:t[2].scoreChanges??[]},3:{beforeScore:t[3].afterScore,afterScore:t[3].afterScore,isRevealed:!1,isRiichi:!1,type:gt.None,scoreChanges:[],prevScoreChanges:t[3].scoreChanges??[]}}),t0=t=>_M({0:t[0],1:t[1],2:t[2],3:t[3]}),xM=()=>`${dM()}-${fM(6)}`,th=(t,e,r)=>`${t}-${e}.${r}`,SM={1:"東 1 局",2:"東 2 局",3:"東 3 局",4:"東 4 局",5:"南 1 局",6:"南 2 局",7:"南 3 局",8:"南 4 局",9:"西 1 局",10:"西 2 局",11:"西 3 局",12:"西 4 局",13:"北 1 局",14:"北 2 局",15:"北 3 局",16:"北 4 局"},XE=(t,e,r=8)=>{try{const n=SM[Math.min(t,r)];if(!n)throw new Error(`Unable to parse round=${t} in MJMatchCounterSpan`);return e&&e!==0?`${n}${e}本場`:n}catch(n){return console.error(n),`${t}.${e??0}`}};function Ct({signed:t,className:e,positiveClassName:r,negativeClassName:n,value:o,animated:i,hideZero:s,title:a}){const[l,c]=S.useState(o),p=S.useRef(null),d=S.useCallback(m=>m===0?s?"":m.toLocaleString("en-US"):m>0?`${t?"+":""}${Math.floor(m).toLocaleString("en-US")}`:Math.floor(m).toLocaleString("en-US"),[s,t]),f=S.useMemo(()=>d(l),[d,l]),h=S.useMemo(()=>o>0?`${e??""} ${r??""}`:o<0?`${e??""} ${n??""}`:e,[e,n,r,o]);return S.useEffect(()=>{if(l!==o)if(i){for(let I=16;I<1e3;I+=16)setTimeout(()=>{p.current&&(p.current.innerText=Math.floor(l-(l-o)*(I/1e3)).toLocaleString("en-US"))},I);setTimeout(()=>{c(o)},1e3+16)}else c(o)},[i,l,o]),S.useEffect(()=>{p.current&&(p.current.innerText=f)},[f]),u.jsx("span",{title:a,ref:p,className:h})}function wM(t){return u.jsx("div",{...t,children:u.jsx("div",{className:"relative w-full h-full bg-[#d1b571] overflow-hidden",children:u.jsx("div",{className:"origin-bottom w-[200%] h-[100%] bg-[#d1291d] animate-[riichi_8s_ease-in-out_infinite]"})})})}const r0={"1m":"bg-[left_0%_top_0%]","2m":"bg-[left_10%_top_0%]","3m":"bg-[left_20%_top_0%]","4m":"bg-[left_30%_top_0%]","5m":"bg-[left_40%_top_0%]","6m":"bg-[left_50%_top_0%]","7m":"bg-[left_60%_top_0%]","8m":"bg-[left_70%_top_0%]","9m":"bg-[left_80%_top_0%]","0m":"bg-[left_30%_top_80%]","1p":"bg-[left_0%_top_20%]","2p":"bg-[left_10%_top_20%]","3p":"bg-[left_20%_top_20%]","4p":"bg-[left_30%_top_20%]","5p":"bg-[left_40%_top_20%]","6p":"bg-[left_50%_top_20%]","7p":"bg-[left_60%_top_20%]","8p":"bg-[left_70%_top_20%]","9p":"bg-[left_80%_top_20%]","0p":"bg-[left_40%_top_80%]","1s":"bg-[left_0%_top_40%]","2s":"bg-[left_10%_top_40%]","3s":"bg-[left_20%_top_40%]","4s":"bg-[left_30%_top_40%]","5s":"bg-[left_40%_top_40%]","6s":"bg-[left_50%_top_40%]","7s":"bg-[left_60%_top_40%]","8s":"bg-[left_70%_top_40%]","9s":"bg-[left_80%_top_40%]","0s":"bg-[left_50%_top_80%]","1z":"bg-[left_0%_top_60%]","2z":"bg-[left_10%_top_60%]","3z":"bg-[left_20%_top_60%]","4z":"bg-[left_30%_top_60%]","5z":"bg-[left_40%_top_60%]","6z":"bg-[left_50%_top_60%]","7z":"bg-[left_60%_top_60%]",default:"bg-[left_70%_top_60%]"};function Fa({className:t,children:e,...r}){const n=S.useMemo(()=>r0[e==null?void 0:e.toString()]??r0.default,[e]);return u.jsx("div",{className:`mahjong-tile ${n} ${t}`,...r})}function uo({player:t,playerIndex:e,score:r,scoreChanges:n=[],isEast:o,isRiichi:i,waitingTiles:s,onClickWaitingTiles:a,className:l,...c}){const[p,d]=S.useState(r),[f,h]=S.useState(void 0),m=S.useMemo(()=>hM(t.color),[t.color]),_=S.useMemo(()=>!!f,[f]);return S.useEffect(()=>{r!==p&&(h(n),setTimeout(()=>{d(r)},2550),setTimeout(()=>{h(void 0)},3e3))},[r,n,p]),u.jsxs("div",{className:"min-w-[5.35em] mx-auto [&_.hide-if-changing]:transition-opacity [&_.hide-if-changing]:data-[score-changing='1']:opacity-0","data-score-changing":_?"1":"0",children:[u.jsxs("div",{className:"flex items-end gap-x-[0.1em]",children:[u.jsx("div",{className:"shrink-0 w-[1.75em] h-full relative -bottom-[0.075em] -left-[0.075em] z-10",children:u.jsx("div",{className:"w-full aspect-[90/125] p-[0.075em]",children:u.jsxs("div",{className:"w-full h-full bg-white rounded-[0.08em]",style:{background:`linear-gradient(180deg, ${t.color}, ${m})`},children:[i&&u.jsx(wM,{className:"absolute -z-10 w-full h-full top-0 left-0 rounded-[0.08em] overflow-hidden"}),t.propicSrc&&u.jsx("img",{className:"w-full h-full rounded-[0.08em]",src:t.propicSrc,alt:t.name})]})})}),u.jsxs("div",{className:"flex-1 flex flex-col gap-y-[0.075em] items-start justify-end",children:[u.jsxs("div",{className:"bg-black bg-opacity-60 rounded text-[0.5em] flex gap-x-[0.2em] p-[0.1em] pr-[0.2em] opacity-0 transition-opacity data-[has-waiting-tiles='1']:opacity-100 hide-if-changing cursor-pointer","data-has-waiting-tiles":s&&s.length>0||a?"1":"0",onClick:a,"data-player-index":e,children:[u.jsx("div",{className:"flex-1 leading-none min-h-[1.19em] flex flex-wrap gap-[0.15em]",children:s==null?void 0:s.map(I=>u.jsx(Fa,{className:"inline-block align-bottom w-[0.85em] animate-[fadeIn_1s_ease-in-out]",children:I},I))}),u.jsx("div",{className:"bg-[#DDDDDD] w-px"}),u.jsxs("div",{className:"text-[#DDDDDD] text-[0.35em] leading-[1.2em] flex items-center",children:["待",u.jsx("br",{}),"牌"]})]}),u.jsxs("div",{className:`relative w-full text-left bg-white px-[0.1em] py-[0.1em] pt-[0.08em] ${l}`,...c,style:{background:`linear-gradient(260deg, transparent, transparent 22px, ${m} 23px, ${t.color} 100%`},children:[u.jsxs("div",{className:"flex flex-col justify-center h-[0.6em] gap-y-[0.075em]",children:[u.jsx("div",{className:"text-[0.24em] ml-[0.1em] leading-none text-white hide-if-changing",children:t.title||"　"}),u.jsx("div",{className:"text-[0.24em] ml-[0.1em] leading-none text-white hide-if-changing",children:t.name})]}),f&&u.jsx("div",{className:"absolute bottom-[2.25em] pr-[0.125em] left-0 text-[0.70em] leading-none animate-[drop_3s_ease-in-out] font-numeric",children:f.map(I=>u.jsx("div",{children:u.jsx(Ct,{signed:!0,value:I,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}))}),u.jsx("div",{className:"text-[0.70em] flex-1 leading-none text-white font-numeric mt-[0.05em]",children:u.jsx(Ct,{animated:!0,value:p})})]})]})]}),u.jsx("div",{className:`mt-[0.2em] h-[0.075em] rounded-full ${o&&"bg-red-500"}`})]})}function Nr({roundCount:t,extendedRoundCount:e,max:r=16,...n}){const o=S.useMemo(()=>XE(t,e??0,r),[t,r,e]);return u.jsx("span",{...n,children:o})}Nr.defaultProps={extendedRoundCount:0};function Jo({player:t,onClickEdit:e,children:r,...n}){const o=S.useCallback(()=>{e==null||e(t)},[e,t]);return u.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[u.jsx("div",{className:"shrink-0",children:u.jsx("div",{className:"w-14 h-14 bg-center bg-contain bg-no-repeat rounded",style:{backgroundImage:`url(${t.propicSrc||"/images/portrait-placeholder.jpeg"})`}})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{children:t.title??"(無頭銜)"}),u.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})]}),e&&u.jsx("div",{className:"shrink-0",children:u.jsx(pe,{variant:"icon",color:"inverted",type:"button",onClick:o,children:u.jsx("span",{className:"material-symbols-outlined",children:"edit"})})})]})}function dl({value:t}){return u.jsx(Ct,{value:t,positiveClassName:"text-green-600",negativeClassName:"text-red-600",signed:!0,hideZero:!0})}function Vc({players:t,matchRounds:e,...r}){const n=S.useMemo(()=>Object.entries(e??{}),[e]);return u.jsxs("table",{...r,children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-400 [&>th]:p-2",children:[u.jsx("th",{children:"局數"}),u.jsx("th",{className:"w-min-[120px]",children:u.jsx(Jo,{player:t[0]})}),u.jsx("th",{className:"w-min-[120px]",children:u.jsx(Jo,{player:t[1]})}),u.jsx("th",{className:"w-min-[120px]",children:u.jsx(Jo,{player:t[2]})}),u.jsx("th",{className:"w-min-[120px]",children:u.jsx(Jo,{player:t[3]})})]})}),u.jsxs("tbody",{children:[n[0]&&u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center"}),u.jsx("td",{className:"text-center",children:u.jsx(Ct,{value:n[0][1].playerResults[0].beforeScore})}),u.jsxs("td",{className:"text-center",children:[u.jsx(Ct,{value:n[0][1].playerResults[1].beforeScore}),n[0][1].playerResults[1].detail&&u.jsx("span",{children:"(i)"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Ct,{value:n[0][1].playerResults[2].beforeScore}),n[0][1].playerResults[2].detail&&u.jsx("span",{children:"(i)"})]}),u.jsxs("td",{className:"text-center",children:[u.jsx(Ct,{value:n[0][1].playerResults[3].beforeScore}),n[0][1].playerResults[3].detail&&u.jsx("span",{children:"(i)"})]})]}),n.map(([o,i])=>i.resultType===nr.Hotfix?u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center",children:"手動調整"}),u.jsx("td",{className:"text-center",children:i.playerResults[0].afterScore}),u.jsx("td",{className:"text-center",children:i.playerResults[1].afterScore}),u.jsx("td",{className:"text-center",children:i.playerResults[2].afterScore}),u.jsx("td",{className:"text-center",children:i.playerResults[3].afterScore})]},o):u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center",children:u.jsx(Nr,{roundCount:i.roundCount,extendedRoundCount:i.extendedRoundCount,max:8})}),u.jsx("td",{className:"text-center",children:u.jsx(dl,{value:i.playerResults[0].afterScore-i.playerResults[0].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(dl,{value:i.playerResults[1].afterScore-i.playerResults[1].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(dl,{value:i.playerResults[2].afterScore-i.playerResults[2].beforeScore})}),u.jsx("td",{className:"text-center",children:u.jsx(dl,{value:i.playerResults[3].afterScore-i.playerResults[3].beforeScore})})]},o)),n[n.length-1]&&u.jsxs("tr",{className:"even:bg-gray-200 [&>td]:p-2",children:[u.jsx("td",{className:"text-center"}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Ct,{value:n[n.length-1][1].playerResults[0].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Ct,{value:n[n.length-1][1].playerResults[1].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Ct,{value:n[n.length-1][1].playerResults[2].afterScore})}),u.jsx("td",{className:"text-center font-bold text-lg",children:u.jsx(Ct,{value:n[n.length-1][1].playerResults[3].afterScore})})]})]})]})}function EM({params:{matchId:t}}){const{match:e,matchRounds:r,matchCurrentRound:n,matchCurrentRoundDoras:o}=Ji(t);return!e||!n?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[u.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[u.jsxs("div",{className:"shrink-0 rounded-[1rem] bg-black bg-opacity-50 p-2 flex items-stretch gap-x-4",children:[u.jsx("div",{className:"text-[2.5rem] leading-none border-[.25rem] rounded-[.75rem] pb-[0.3em] pt-[0.2em] px-4 border-current flex items-center justify-center",children:u.jsx(Nr,{roundCount:n.roundCount,max:8})}),u.jsxs("div",{className:"flex flex-col justify-around",children:[u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-4"})}),u.jsx("div",{children:n.extendedRoundCount??0})]}),u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-4"})}),u.jsx("div",{children:n.cumulatedThousands??0})]})]}),u.jsx("div",{className:"flex items-center gap-x-2",children:o.map((i,s)=>u.jsx(Fa,{className:"w-9 cursor-pointer","data-index":s,children:i},i))})]}),u.jsx("div",{className:"flex-1"})]}),u.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(i=>u.jsx("div",{className:"flex gap-x-2 items-center",children:u.jsx("div",{className:"flex-1 text-[2.5rem]",children:u.jsx(uo,{player:e.players[i],score:n.playerResults[i].beforeScore,scoreChanges:n.playerResults[i].prevScoreChanges,isEast:zc(i,n.roundCount),isRiichi:n.playerResults[i].isRiichi})})}))}),u.jsx(Vc,{players:e.players,matchRounds:r,className:"w-full table-auto"})]})})}function n0({className:t,children:e,...r}){return u.jsx("div",{className:`w-screen h-screen mx-auto py-8 ${t} overflow-hidden text-[4.8rem]`,style:{background:"linear-gradient(transparent, transparent 73%, rgba(0, 0, 0, 0.25))"},...r,children:e})}const o0=`body { 
  background-color: rgba(0, 0, 0, 0); 
  color: rgba(0, 0, 0, 0); 
  margin: 0px auto; 
  overflow: hidden; 
}

.body-hidden {
  display: none;
}`;function CM({matchId:t}){const e=S.useMemo(()=>`${window.location.origin}/match/${t}/control`,[t]),r=S.useCallback(()=>{window.navigator.clipboard.writeText(o0)},[]);return u.jsxs("div",{className:"flex items-center justify-center gap-x-8",children:[u.jsxs("div",{children:[u.jsx("p",{children:"1. 打開OBS"}),u.jsxs("p",{children:["2. 來源 ","->"," + ","->"," 瀏覽器，然後照下面設定"]}),u.jsxs("p",{children:["- 網址 = 此頁的網址 ",u.jsx("strong",{children:window.location.href}),u.jsx("br",{}),"- 寬度 = 1920, 高度 = 1080",u.jsx("br",{})," - 自訂CSS ="," ",u.jsxs("div",{className:"relative bg-gray-700 text-white p-4 rounded",children:[u.jsx("pre",{children:o0}),u.jsx("div",{className:"absolute top-2 right-2",children:u.jsx("button",{type:"button",onClick:r,children:u.jsx("span",{className:"material-symbols-outlined",children:"content_copy"})})})]})]})]}),u.jsxs("div",{children:[u.jsx("p",{children:'3. 在管理後台點擊右上角的 "開始OBS" '}),u.jsx("p",{children:"4. 確定"})]}),u.jsx("div",{className:"shrink-0",children:u.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:"text-center underline",children:[u.jsx("img",{className:"block w-32 h-32",src:pM(e),alt:""}),u.jsx("p",{children:"管理後台"})]})})]})}function bM({han:t,fu:e,...r}){const n=S.useMemo(()=>{if(t>=13)return"役滿";if(t>=11)return"三倍滿";if(t>=8)return"倍滿";if(t>=6)return"跳滿";if(t>=5)return"滿貫";if(t>=4&&typeof e<"u"&&e>=40)return"滿貫";if(t>=3&&typeof e<"u"&&e>=70)return"滿貫";if(typeof e<"u")return},[t,e]);return n?u.jsx("div",{...r,children:n}):u.jsxs("div",{...r,children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:t}),u.jsx("span",{children:"飜"})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:e}),u.jsx("span",{children:"符"})]})]})}function ZE({params:{matchId:t}}){const{match:e,matchCurrentRound:r,matchCurrentRoundDoras:n}=Ji(t),o=S.useMemo(()=>!e||!r?[]:["0","1","2","3"].map(i=>({...e.players[i],color:e.players[i].color,currentStatus:{...r.playerResults[i],isEast:zc(i,r.roundCount)}})),[e,r]);return!e||!r?u.jsx(n0,{children:u.jsx("div",{className:"text-current",children:"對局讀取失敗。"})}):u.jsxs(n0,{children:[u.jsxs("div",{className:"flex flex-row items-stretch gap-x-4 text-white",children:[u.jsxs("div",{className:"p-2 pl-10 pr-10 flex items-center gap-x-8 transition-[width]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[u.jsxs("div",{className:"text-[0.5em]",children:[u.jsx("div",{className:"text-[0.5em]",children:e.name}),u.jsxs("div",{className:"flex gap-x-8 items-center",children:[u.jsx("div",{className:"min-w-[3.5em]",children:u.jsx(Nr,{roundCount:r.roundCount,max:8})}),u.jsxs("div",{className:"flex flex-col justify-around gap-2",children:[u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2.5"})}),u.jsx("div",{className:"text-[0.4em] leading-none",children:r.extendedRoundCount??0})]}),u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2.5"})}),u.jsx("div",{className:"text-[0.4em] leading-none",children:r.cumulatedThousands??0})]})]})]})]}),u.jsx("div",{className:"flex items-center gap-x-2",children:n.map(i=>u.jsx(Fa,{className:"w-14 animate-[fadeIn_0.5s_ease-in-out]",children:i},i))})]}),u.jsx("div",{className:"flex-1"})]}),u.jsx("div",{className:"flex items-center justify-center mt-20",children:u.jsx("div",{className:"body-hidden mx-20 text-[16px]",children:u.jsx(CM,{matchId:t})})}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 items-end gap-x-8 text-white transition-opacity animate-[fadeInFromBottom_1s_ease-in-out]",style:{opacity:e.activeResultDetail?0:"inherit"},children:o.map(i=>u.jsx("div",{className:"w-[5.35em]",children:u.jsx(uo,{player:i,score:i.currentStatus.afterScore,scoreChanges:i.currentStatus.scoreChanges,isEast:i.currentStatus.isEast,isRiichi:i.currentStatus.isRiichi,waitingTiles:i.currentStatus.waitingTiles})},i.name))}),e.activeResultDetail&&u.jsxs("div",{className:"fixed bottom-0 left-0 right-0 px-10 pb-6 grid grid-cols-4 gap-x-8 text-white transition-opacity animate-[fadeInFromBottom_1s_ease-in-out]",children:[u.jsx("div",{className:"w-[5.35em]",children:u.jsx(uo,{player:e.players[e.activeResultDetail.winnerPlayerIndex],score:r.playerResults[e.activeResultDetail.winnerPlayerIndex].afterScore})}),u.jsxs("div",{className:"col-span-3 bg-black bg-opacity-50 py-6 px-8 text-[0.5em] flex items-stretch gap-x-4",children:[u.jsx("div",{className:`flex-1 flex flex-wrap gap-x-[0.75em] ${e.activeResultDetail.isYakuman?"self-center justify-center":""}`,children:e.activeResultDetail.yakusInText.map(i=>u.jsx("span",{children:i},i))}),u.jsx("div",{className:"shrink-0 w-px bg-neutral-200"}),u.jsx("div",{className:"shrink-0 min-w-[3em] self-center text-green-400 text-[1.4em] text-center",children:u.jsx(bM,{han:Math.min(e.activeResultDetail.isYakuman?13:12,e.activeResultDetail.han),fu:e.activeResultDetail.fu})})]})]})]})}function Dr({open:t,title:e,children:r,onClose:n,hideCloseButton:o}){const i=S.useRef(null);S.useEffect(()=>{if(i!=null&&i.current&&t){i.current.showModal();const{current:a}=i;return()=>{a.close()}}},[t]);const s=S.useCallback(()=>{n==null||n()},[n]);return u.jsx("dialog",{ref:i,onClose:s,children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex mb-4",children:[u.jsx("div",{className:"flex-1 items-center font-bold text-lg",children:e}),!o&&u.jsx("div",{className:"shrink-0",children:u.jsx("button",{type:"button",className:"absolute top-4 right-4",onClick:s,children:u.jsx("span",{className:"material-symbols-outlined",children:"close"})})})]}),r]})})}function AM({title:t,children:e,okButtonText:r="確認",cancelButtonText:n="取消",onClickOk:o,onClickCancel:i,...s}){const[a,l]=S.useState(!1),c=S.useCallback(()=>{o&&(l(!0),o().finally(()=>{l(!1)}))},[o]);return u.jsxs(Dr,{title:t,...s,children:[u.jsx("div",{className:"mb-4",children:e}),u.jsxs("div",{className:"flex gap-x-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(pe,{type:"button",color:"secondary",className:"w-full",onClick:i,disabled:a,children:n})}),u.jsx("div",{className:"flex-1",children:u.jsx(pe,{type:"button",color:"danger",className:"w-full",onClick:c,disabled:a,children:a?u.jsx("span",{className:"material-symbols-outlined animate-spin leading-none",children:"horizontal_rule"}):r})})]})]})}const IM={isShowConfirmDialog:!1,setIsShowConfirmDialog:()=>{},confirmDialogOptions:{title:"警告"},setConfirmDialogOptions:()=>{}},eC=S.createContext(IM);function PM({children:t}){const[e,r]=S.useState(!1),[n,o]=S.useState({title:"警告"}),i=S.useMemo(()=>({isShowConfirmDialog:e,setIsShowConfirmDialog:r,confirmDialogOptions:n,setConfirmDialogOptions:o}),[n,e]),s=S.useCallback(()=>{r(!1)},[]);return u.jsxs(eC.Provider,{value:i,children:[t,u.jsx(AM,{open:e,okButtonText:n.okButtonText,cancelButtonText:n.cancelButtonText,onClickOk:n.onClickOk,onClickCancel:n.onClickCancel,onClose:s,...n,hideCloseButton:!0,children:n.content})]})}const NM=()=>{const t=S.useContext(eC);return{showConfirmDialog:S.useCallback(r=>{const n=async()=>(r.onClickOk??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)}),o=async()=>(r.onClickCancel??(async()=>Promise.resolve()))().then(()=>{t.setIsShowConfirmDialog(!1)});t.setConfirmDialogOptions({...r,onClickOk:n,onClickCancel:o}),t.setIsShowConfirmDialog(!0)},[t])}};function i0({className:t,onChange:e,onChangeValue:r,...n}){const o=S.useMemo(()=>`bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ${t}`,[t]),i=S.useCallback(s=>{e==null||e(s),r==null||r(s.currentTarget.value)},[e,r]);return u.jsx("select",{className:o,onChange:i,...n})}function kM({score:t,...e}){const r=S.useMemo(()=>t?t.target?t.target:t.all?`${t.all} ALL`:`${t.others},${t.east}`:"(錯誤)",[t]);return u.jsx("div",{...e,children:r})}var Ju=function(){return Ju=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ju.apply(this,arguments)};function TM(){var t=S.useRef(!1),e=S.useCallback(function(){return t.current},[]);return S.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),e}function RM(t,e,r){e===void 0&&(e=[]),r===void 0&&(r={loading:!1});var n=S.useRef(0),o=TM(),i=S.useState(r),s=i[0],a=i[1],l=S.useCallback(function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];var d=++n.current;return s.loading||a(function(f){return Ju(Ju({},f),{loading:!0})}),t.apply(void 0,c).then(function(f){return o()&&d===n.current&&a({value:f,loading:!1}),f},function(f){return o()&&d===n.current&&a({error:f,loading:!1}),f})},e);return[s,l]}var jM=function(t,e){return typeof e=="boolean"?e:!t},OM=function(t){return S.useReducer(jM,t)};const yn=OM;function tC({onChange:t,onChangeChecked:e,className:r,...n}){const o=S.useCallback(i=>{t==null||t(i),e==null||e(i.currentTarget.checked)},[t,e]);return u.jsx("input",{className:"mt-[0.3rem] mr-2 h-3.5 w-8 appearance-none rounded-[0.4375rem] bg-neutral-300 dark:bg-neutral-600 before:pointer-events-none before:absolute before:h-3.5 before:w-3.5 before:rounded-full before:bg-transparent before:content-[''] after:absolute after:z-[2] after:-mt-[0.1875rem] after:h-5 after:w-5 after:rounded-full after:border-none after:bg-neutral-100 dark:after:bg-neutral-400 after:shadow-[0_0px_3px_0_rgb(0_0_0_/_7%),_0_2px_2px_0_rgb(0_0_0_/_4%)] after:transition-[background-color_0.2s,transform_0.2s] after:content-[''] checked:bg-blue-600 dark:checked:bg-blue-600 checked:after:absolute checked:after:z-[2] checked:after:-mt-[3px] checked:after:ml-[1.0625rem] checked:after:h-5 checked:after:w-5 checked:after:rounded-full checked:after:border-none checked:after:bg-blue-600 dark:checked:after:bg-blue-600 checked:after:shadow-[0_3px_1px_-2px_rgba(0,0,0,0.2),_0_2px_2px_0_rgba(0,0,0,0.14),_0_1px_5px_0_rgba(0,0,0,0.12)] checked:after:transition-[background-color_0.2s,transform_0.2s] checked:after:content-[''] hover:cursor-pointer focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[3px_-1px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-5 focus:after:w-5 focus:after:rounded-full focus:after:content-[''] checked:focus:border-blue-600 checked:focus:bg-blue-600 checked:focus:before:ml-[1.0625rem] checked:focus:before:scale-100 checked:focus:before:shadow-[3px_-1px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s]",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",onChange:o,...n})}function rh({han:t,fu:e,raw:r,...n}){const o=S.useMemo(()=>r?typeof e<"u"&&t<=4?`${t}飜${e}符`:`${t}飜`:t>=13?"役滿":t>=11?"三倍滿":t>=8?"倍滿":t>=6?"跳滿":t>=5||t>=4&&typeof e<"u"&&e>=40||t>=3&&typeof e<"u"&&e>=30?"滿貫":typeof e<"u"?`${t}飜${e}符`:`${t}飜`,[t,e,r]);return u.jsx("div",{...n,children:o})}const Rn=[{id:"riichi",label:"立直",han:1,hanIfOpened:0},{id:"ippatsu",label:"一發",han:1,hanIfOpened:0},{id:"menzenchin-tsumohou",label:"門前清自摸和",han:1,hanIfOpened:0},{id:"pinfu",label:"平和",han:1,hanIfOpened:0},{id:"iipeikou",label:"一盃口",han:1,hanIfOpened:0},{id:"haitei-raoyue",label:"海底撈月",han:1,hanIfOpened:1},{id:"houtei-raoyui",label:"河底撈魚",han:1,hanIfOpened:1},{id:"rinshan-kaihou",label:"嶺上開花",han:1,hanIfOpened:1},{id:"chankan",label:"搶槓",han:1,hanIfOpened:1},{id:"tanyao",label:"斷么九",han:1,hanIfOpened:1},{id:"yakuhai-match-kazehai",label:"場風",han:1,hanIfOpened:1},{id:"yakuhai-self-kazehai",label:"自風",han:1,hanIfOpened:1},{id:"yakuhai-double-kazehai",label:"雙風",han:2,hanIfOpened:2,hidden:!0},{id:"yakuhai-chun",label:"中",han:1,hanIfOpened:1},{id:"yakuhai-haku",label:"白",han:1,hanIfOpened:1},{id:"yakuhai-hatsu",label:"發",han:1,hanIfOpened:1},{id:"double-riichi",label:"雙立直",han:2,hanIfOpened:0},{id:"chantaiyao",label:"全帶么九",han:2,hanIfOpened:1},{id:"sanshoku-doujun",label:"三色同順",han:2,hanIfOpened:1},{id:"ittsu",label:"一氣通貫",han:2,hanIfOpened:1},{id:"toitoi",label:"對對和",han:2,hanIfOpened:2},{id:"sanankou",label:"三暗刻",han:2,hanIfOpened:2},{id:"sanshku-doukou",label:"三色同刻",han:2,hanIfOpened:2},{id:"sankantsu",label:"三槓子",han:2,hanIfOpened:2},{id:"chiitoitsu",label:"七對子",han:2,hanIfOpened:0,overrideFu:25},{id:"honroutou",label:"混老頭",han:2,hanIfOpened:2},{id:"shousangen",label:"小三元",han:2,hanIfOpened:2},{id:"honitsu",label:"混一色",han:3,hanIfOpened:2},{id:"junchan-taiyao",label:"純全帶么",han:3,hanIfOpened:2},{id:"ryanpeikou",label:"二盃口",han:3,hanIfOpened:0},{id:"chinitsu",label:"清一色",han:6,hanIfOpened:5},{id:"kazoe-yakuman",label:"累計役滿",han:13,hanIfOpened:13},{id:"kokushi-musou",label:"國士無雙",han:13,hanIfOpened:0},{id:"suuankou",label:"四暗刻",han:13,hanIfOpened:0},{id:"daisangen",label:"大三元",han:13,hanIfOpened:13},{id:"shousuushii",label:"小四喜",han:13,hanIfOpened:13},{id:"daisuushii",label:"大四喜",han:13,hanIfOpened:13},{id:"tsuuiisou",label:"字一色",han:13,hanIfOpened:13},{id:"chinroutou",label:"清老頭",han:13,hanIfOpened:13},{id:"ryuuiisou",label:"綠一色",han:13,hanIfOpened:13},{id:"chuuren-poutou",label:"九連寶燈",han:13,hanIfOpened:0},{id:"suukantsu",label:"四槓子",han:13,hanIfOpened:13},{id:"tenhou",label:"天和",han:13,hanIfOpened:0},{id:"chiihou",label:"地和",han:13,hanIfOpened:0}],hs={1:Rn.filter(({han:t,hidden:e})=>t===1&&!e),2:Rn.filter(({han:t,hidden:e})=>t===2&&!e),3:Rn.filter(({han:t,hidden:e})=>t===3&&!e),6:Rn.filter(({han:t,hidden:e})=>t===6&&!e),13:Rn.filter(({han:t,hidden:e})=>t===13&&!e)},ys=({yaku:t,active:e,isOpened:r,disabled:n,onClick:o})=>u.jsx("button",{"data-id":t.id,"data-han":r?t.hanIfOpened:t.han,"data-active":e?"1":"0",disabled:n,className:"text-center px-3 rounded-full border border-neutral-200 text-neutral-400 cursor-pointer hover:opacity-80 data-[han='0']:cursor-not-allowed disabled:opacity-30 disabled:hover:opacity-30 data-[active='1']:enabled:border-teal-500 data-[active='1']:enabled:text-teal-600 data-[active='1']:enabled:bg-teal-100",onClick:o,children:t.label},t.id),$M=({round:t,activePlayerIndex:e,isEast:r,isRon:n,onChange:o})=>{const[i,s]=S.useState({}),[a,l]=yn(!1),[c,p]=yn(!1),[d,f]=S.useState("0"),[h,m]=S.useState("0"),[_,I]=S.useState("0"),[g,y]=S.useState("30"),v=S.useCallback(C=>{const T=C.currentTarget.getAttribute("data-id");!T||!Rn.find(({id:U})=>U===T)||s(U=>({...U,[T]:!U[T]}))},[]),E=S.useCallback(()=>{s({}),l(!1),f("0"),m("0"),I("0"),y("30")},[]),w=S.useMemo(()=>{let C=0,T=parseInt(g),P=!1;const U=[],B={...i};B["yakuhai-match-kazehai"]&&B["yakuhai-self-kazehai"]&&(B["yakuhai-double-kazehai"]=!0,B["yakuhai-match-kazehai"]=!1,B["yakuhai-self-kazehai"]=!1);const fe=Rn.filter(({id:z})=>!!B[z]);for(const z of fe){const W=a?z.hanIfOpened:z.han;W!==0&&(c&&W<13||!c&&W>=13||(C+=W,typeof z.overrideFu<"u"&&(T=z.overrideFu,P=!0),z.id==="yakuhai-match-kazehai"?U.push(pd(Math.floor((t-1)/4)+1,0)):z.id==="yakuhai-self-kazehai"?U.push(pd(t,parseInt(e))):z.id==="yakuhai-double-kazehai"?U.push(`雙${pd(t,parseInt(e))}`):U.push(z.label)))}return d!=="0"&&(C+=parseInt(d),U.push(`寶牌${d}`)),h!=="0"&&(C+=parseInt(h),U.push(`赤寶牌${h}`)),_!=="0"&&(C+=parseInt(_),U.push(`裡寶牌${_}`)),{yakusInText:U,han:C,fu:T,isFuOverrided:P,isYakuman:c}},[a,t,e,i,d,h,_,g,c]);return S.useEffect(()=>{o&&o(w)},[w,o,r,n]),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("div",{children:[u.jsx(tC,{checked:a,onChangeChecked:l})," ","有副露？"]}),u.jsxs("div",{className:"space-x-4",children:[u.jsx("button",{className:"text-sm text-teal-700 underline",onClick:p,children:c?"一般役":"役滿役"}),u.jsx("button",{className:"text-sm text-teal-700 underline",onClick:E,children:"重置"})]})]}),!c&&u.jsxs("div",{children:[u.jsx("table",{children:u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("th",{className:"bg-neutral-100 px-1 border-neutral-100 border-t border-b",children:"1番"}),u.jsx("td",{className:"py-1 pl-2 border-neutral-100 border-t border-b",colSpan:3,children:u.jsx("div",{className:"flex flex-wrap gap-1",children:hs[1].map(C=>u.jsx(ys,{yaku:C,isOpened:a,active:i[C.id],disabled:a&&C.hanIfOpened===0,onClick:v,children:C.label},C.id))})})]}),u.jsxs("tr",{children:[u.jsx("th",{className:"bg-neutral-100 px-1 border-neutral-100 border-t border-b",children:"2番"}),u.jsx("td",{className:"py-1 pl-2 border-neutral-100 border-t border-b",colSpan:3,children:u.jsx("div",{className:"flex flex-wrap gap-1",children:hs[2].map(C=>u.jsx(ys,{yaku:C,isOpened:a,active:i[C.id],disabled:a&&C.hanIfOpened===0,onClick:v,children:C.label},C.id))})})]}),u.jsxs("tr",{children:[u.jsx("th",{className:"bg-neutral-100 px-1 border-neutral-100 border-t border-b",children:"3番"}),u.jsx("td",{className:"py-1 pl-2 border-neutral-100 border-t border-b w-1/2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:hs[3].map(C=>u.jsx(ys,{yaku:C,isOpened:a,active:i[C.id],disabled:a&&C.hanIfOpened===0,onClick:v,children:C.label},C.id))})}),u.jsx("th",{className:"bg-neutral-100 px-1 border-neutral-100 border-t border-b",children:"6番"}),u.jsx("td",{className:"py-1 pl-2 border-neutral-100 border-t border-b w-1/2",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:hs[6].map(C=>u.jsx(ys,{yaku:C,isOpened:a,active:i[C.id],disabled:a&&C.hanIfOpened===0,onClick:v,children:C.label},C.id))})})]})]})}),u.jsx("table",{className:"w-full mt-2",children:u.jsxs("tbody",{children:[u.jsx("th",{className:"w-16 bg-neutral-200 px-1 border-neutral-100 border-t border-b",children:"寶牌"}),u.jsx("td",{className:"w-auto pr-4",children:u.jsxs("select",{className:"w-full py-2 border border-neutral-100",value:d,onChange:C=>f(C.currentTarget.value),children:[u.jsx("option",{children:"0"}),u.jsx("option",{children:"1"}),u.jsx("option",{children:"2"}),u.jsx("option",{children:"3"}),u.jsx("option",{children:"4"}),u.jsx("option",{children:"5"}),u.jsx("option",{children:"6"}),u.jsx("option",{children:"7"}),u.jsx("option",{children:"8"}),u.jsx("option",{children:"9"}),u.jsx("option",{children:"10"}),u.jsx("option",{children:"11"}),u.jsx("option",{children:"12"}),u.jsx("option",{children:"13"}),u.jsx("option",{children:"14"}),u.jsx("option",{children:"15"}),u.jsx("option",{children:"16"}),u.jsx("option",{children:"17"}),u.jsx("option",{children:"18"})]})}),u.jsx("th",{className:"w-16 bg-neutral-200 px-1 border-neutral-100 border-t border-b",children:"赤寶牌"}),u.jsx("td",{className:"w-auto pr-4",children:u.jsxs("select",{className:"w-full py-2 border border-neutral-100",value:h,onChange:C=>m(C.currentTarget.value),children:[u.jsx("option",{children:"0"}),u.jsx("option",{children:"1"}),u.jsx("option",{children:"2"}),u.jsx("option",{children:"3"}),u.jsx("option",{children:"4"}),u.jsx("option",{children:"5"}),u.jsx("option",{children:"6"}),u.jsx("option",{children:"7"}),u.jsx("option",{children:"8"}),u.jsx("option",{children:"9"}),u.jsx("option",{children:"10"}),u.jsx("option",{children:"11"}),u.jsx("option",{children:"12"}),u.jsx("option",{children:"13"}),u.jsx("option",{children:"14"}),u.jsx("option",{children:"15"}),u.jsx("option",{children:"16"}),u.jsx("option",{children:"17"}),u.jsx("option",{children:"18"})]})}),u.jsx("th",{className:"w-16 bg-neutral-200 px-1 border-neutral-100 border-t border-b",children:"裡寶牌"}),u.jsx("td",{className:"w-auto pr-4",children:u.jsxs("select",{className:"w-full py-2 border border-neutral-100",value:_,onChange:C=>I(C.currentTarget.value),children:[u.jsx("option",{children:"0"}),u.jsx("option",{children:"1"}),u.jsx("option",{children:"2"}),u.jsx("option",{children:"3"}),u.jsx("option",{children:"4"}),u.jsx("option",{children:"5"}),u.jsx("option",{children:"6"}),u.jsx("option",{children:"7"}),u.jsx("option",{children:"8"}),u.jsx("option",{children:"9"}),u.jsx("option",{children:"10"}),u.jsx("option",{children:"11"}),u.jsx("option",{children:"12"}),u.jsx("option",{children:"13"}),u.jsx("option",{children:"14"}),u.jsx("option",{children:"15"}),u.jsx("option",{children:"16"}),u.jsx("option",{children:"17"}),u.jsx("option",{children:"18"})]})}),u.jsx("th",{className:"w-16 bg-neutral-200 px-1 border-neutral-100 border-t border-b",children:"符數"}),u.jsx("td",{className:"w-auto pr-4",children:u.jsxs("select",{className:"w-full py-2 border border-neutral-100",value:w.isFuOverrided?w.fu:g,onChange:C=>y(C.currentTarget.value),disabled:w.isFuOverrided,children:[u.jsx("option",{value:"20",children:"20符"}),u.jsx("option",{value:"25",children:"25符"}),u.jsx("option",{value:"30",children:"30符"}),u.jsx("option",{value:"40",children:"40符"}),u.jsx("option",{value:"50",children:"50符"}),u.jsx("option",{value:"60",children:"60符"}),u.jsx("option",{value:"70",children:"70符"}),u.jsx("option",{value:"80",children:"80符"}),u.jsx("option",{value:"90",children:"90符"}),u.jsx("option",{value:"100",children:"100符"}),u.jsx("option",{value:"110",children:"110符"})]})})]})})]}),c&&u.jsx("div",{children:u.jsx("table",{children:u.jsx("tbody",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"bg-neutral-100 px-1 border-neutral-100 border-t border-b",children:"役滿"}),u.jsx("td",{className:"py-1 pl-2 border-neutral-100 border-t border-b",colSpan:3,children:u.jsx("div",{className:"flex flex-wrap gap-1",children:hs[13].map(C=>u.jsx(ys,{yaku:C,isOpened:a,active:i[C.id],disabled:a&&C.hanIfOpened===0,onClick:v,children:C.label},C.id))})})]})})})}),u.jsx("table",{className:"w-full mt-2 bg-teal-100",children:u.jsxs("tbody",{children:[u.jsx("th",{className:"w-16 bg-teal-400 py-2 px-1",children:"結算"}),u.jsx("td",{className:"flex flex-wrap gap-2 p-2",children:w.yakusInText.map(C=>u.jsx("span",{children:C},C))}),u.jsxs("td",{className:"w-32 bg-teal-400 text-center",children:[u.jsx(rh,{han:Math.min(c?13:12,w.han),fu:w.fu}),u.jsx(rh,{className:"text-xs text-neutral-600",han:w.han,fu:w.fu,raw:!0})]})]})})]})};function DM({match:t,currentMatchRound:e,initialActivePlayerIndex:r="0",initialTargetPlayerIndex:n="-1",onSubmit:o,...i}){const[s,a]=S.useState(),[l,c]=S.useState({win:1e3,target:1e3}),p=S.useMemo(()=>Object.keys(t.players).map(w=>({index:w.toString(),name:t.players[w].name,position:Wc(w,e.roundCount)})),[t.players,e.roundCount]),[d,f]=S.useState(r),h=S.useMemo(()=>typeof d<"u"?p==null?void 0:p.find(({index:E})=>E===d):void 0,[d,p]),[m,_]=S.useState(n),I=S.useCallback(E=>{const w=gM(Math.min(E.han,E.isYakuman?13:12),E.fu,(h==null?void 0:h.position)===en.East,m!=="-1",{roundUp:!0});e.extendedRoundCount>0&&(w.win+=e.extendedRoundCount*300,w.target&&(w.target+=e.extendedRoundCount*300),w.all&&(w.all+=e.extendedRoundCount*100),w.east&&(w.east+=e.extendedRoundCount*100),w.others&&(w.others+=e.extendedRoundCount*100)),e.cumulatedThousands>0&&(w.win+=e.cumulatedThousands*1e3),a(E),c(w)},[e.cumulatedThousands,e.extendedRoundCount,h==null?void 0:h.position,m]),g=S.useMemo(()=>u.jsxs("div",{children:[u.jsx(Nr,{roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount,max:8}),u.jsx("span",{children:" 和了"})]}),[e.roundCount,e.extendedRoundCount]),y=S.useMemo(()=>{const E=Object.keys(e.playerResults),w={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].scoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].scoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].scoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].scoreChanges??[]}};if(d===m)return w;let C=0;for(let T=0;T<E.length;T+=1){const P=E[T];P===d?(w[P].afterScore+=l.win,w[P].type=gt.Win,w[P].scoreChanges=[l.win]):l.target&&P===m?(w[P].afterScore-=l.target,w[P].type=gt.Lose,w[P].scoreChanges=[-l.target]):l.all?(w[P].afterScore-=l.all,w[P].type=gt.Lose,w[P].scoreChanges=[-l.all]):l.east&&l.others&&(zc(P,e.roundCount)?(w[P].afterScore-=l.east,w[P].type=gt.Lose,w[P].scoreChanges=[-l.east]):(w[P].afterScore-=l.others,w[P].type=gt.Lose,w[P].scoreChanges=[-l.others])),P!==d&&w[P].isRiichi&&(w[P].afterScore-=1e3,w[P].scoreChanges.unshift(-1e3),C+=1e3)}return d&&C>0&&(w[d].afterScore+=C,w[d].scoreChanges.unshift(C)),w[d].detail=s,w},[d,l.all,l.east,l.others,l.target,l.win,e,m,s]),v=S.useCallback(()=>{if(!o||!s)return;const E={...e,resultType:vM(l),playerResults:y,cumulatedThousands:0,resultDetail:{winnerPlayerIndex:d,...s}};o(E)},[l,e,o,y,s]);return S.useEffect(()=>{i.open&&f(r)},[i.open,r]),u.jsx(Dr,{title:g,...i,children:u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex gap-x-4 items-center",children:[u.jsx("div",{className:"flex-1",children:u.jsx(i0,{value:d,onChangeValue:f,children:p.map(({index:E,name:w})=>u.jsx("option",{value:E,children:w},E))})}),u.jsx("div",{className:"text-xs text-gray-500",children:"和了"}),u.jsx("div",{className:"flex-1",children:u.jsxs(i0,{value:m,onChangeValue:_,children:[u.jsx("option",{value:"-1",children:"自摸"}),p.map(({index:E,name:w})=>u.jsx("option",{value:E,children:w},E))]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-bold",children:"役種"}),u.jsxs("div",{children:[u.jsx($M,{round:e.roundCount,activePlayerIndex:r,isEast:(h==null?void 0:h.position)===en.East,isRon:m!=="-1",onChange:I}),u.jsx("div",{className:"text-3xl font-bold text-center bg-teal-400 py-2",children:u.jsx(kM,{score:l})})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-bold",children:"分數變動"}),u.jsx("table",{className:"w-full",children:u.jsx("tbody",{children:Object.keys(t.players).map(E=>u.jsxs("tr",{children:[u.jsx("th",{className:"text-white py-1",style:{background:t.players[E].color},children:t.players[E].name}),u.jsx("td",{className:"px-2",children:y[E].beforeScore}),u.jsx("td",{children:u.jsx(Ct,{signed:!0,value:y[E].afterScore-y[E].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),u.jsx("td",{className:"text-right",children:y[E].afterScore})]},E))})})]}),u.jsx("div",{className:"space-y-2",children:u.jsx(pe,{onClick:v,className:"w-full",disabled:!s||s.yakusInText.length<=0,children:"提交並播出分數變動動畫"})})]})})}const FM=[["1m","2m","3m","4m","5m","6m","7m","8m","9m","0m"],["1p","2p","3p","4p","5p","6p","7p","8p","9p","0p"],["1s","2s","3s","4s","5s","6s","7s","8s","9s","0s"],["1z","2z","3z","4z","5z","6z","7z"]],s0={m:0,p:1,s:2,z:3},MM=(t,e)=>{const[r,n]=[t[0],t[1]],[o,i]=[e[0],e[1]];return n!==i?s0[n]-s0[i]:parseInt(r,10)-parseInt(o,10)};function a0({onSubmit:t,onRemove:e,canRemove:r,hideRedTiles:n,multiple:o,defaultValue:i}){const[s,a]=S.useState([]),l=S.useCallback(d=>{var h;const f=(h=d.currentTarget)==null?void 0:h.getAttribute("data-key");f&&a(o?m=>{const _=m.indexOf(f);if(_===-1)return[...m,f].sort(MM);const I=[...m];return I.splice(_,1),I}:[f])},[o]),c=S.useCallback(()=>{s&&t&&(t==null||t(s),a([]))},[t,s]),p=S.useCallback(()=>{r&&(e==null||e(),a([]))},[r,e]);return S.useEffect(()=>{a(i??[])},[i]),u.jsxs("div",{children:[u.jsx("div",{className:`mb-4 grid ${n?"grid-cols-9":"grid-cols-10"} gap-1 lg:gap-x-2 lg:gap-y-4 items-center text-center`,children:FM.map(d=>d.map(f=>(!f.startsWith("0")||!n)&&u.jsx("button",{type:"button",onClick:l,"data-key":f,className:`${s.indexOf(f)!==-1?"bg-blue-400":"bg-black bg-opacity-20"} rounded p-1 lg:p-2`,children:u.jsx(Fa,{children:f})})))}),u.jsxs("div",{className:"flex gap-x-4",children:[r&&u.jsx("div",{className:"flex-1",children:u.jsx(pe,{className:"w-full",type:"button",color:"secondary",onClick:p,children:"移除"})}),u.jsx("div",{className:"flex-1",children:u.jsx(pe,{className:"w-full",type:"button",color:"primary",onClick:c,disabled:s.length===0,children:"確定"})})]})]})}function LM({match:t,currentMatchRound:e,onSubmit:r,...n}){const o=S.useMemo(()=>Object.keys(t.players).map(f=>({index:f.toString(),name:t.players[f].name,position:Wc(f,e.roundCount)})),[t.players,e.roundCount]),[i,s]=S.useState({0:!1,1:!1,2:!1,3:!1}),a=S.useCallback(d=>{var m,_;const f=(m=d.currentTarget)==null?void 0:m.checked,h=(_=d.currentTarget)==null?void 0:_.getAttribute("data-player-index");typeof f>"u"||!h||s(I=>({...I,[h]:f}))},[]),l=S.useMemo(()=>u.jsxs("div",{children:[u.jsx(Nr,{roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount,max:8}),u.jsx("span",{children:" 流局"})]}),[e.roundCount,e.extendedRoundCount]),c=S.useMemo(()=>{const d=Object.keys(e.playerResults),f={0:{...e.playerResults[0],beforeScore:e.playerResults[0].beforeScore,afterScore:e.playerResults[0].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[0].prevScoreChanges??[]},1:{...e.playerResults[1],beforeScore:e.playerResults[1].beforeScore,afterScore:e.playerResults[1].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[1].prevScoreChanges??[]},2:{...e.playerResults[2],beforeScore:e.playerResults[2].beforeScore,afterScore:e.playerResults[2].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[2].prevScoreChanges??[]},3:{...e.playerResults[3],beforeScore:e.playerResults[3].beforeScore,afterScore:e.playerResults[3].beforeScore,type:0,scoreChanges:[],prevScoreChanges:e.playerResults[3].prevScoreChanges??[]}};let h=0,m=0;const _=Object.values(i).filter(I=>!!I).length;_===1?(h=3e3,m=1e3):_===2?(h=1500,m=1500):_===3&&(h=1e3,m=3e3);for(let I=0;I<d.length;I+=1){const g=d[I];h&&m&&(i[g]?(f[g].afterScore+=h,f[g].type=gt.Win,f[g].scoreChanges=[h]):(f[g].afterScore-=m,f[g].type=gt.Lose,f[g].scoreChanges=[-m])),f[g].isRiichi&&(f[g].afterScore-=1e3,f[g].scoreChanges.unshift(-1e3))}return f},[e.playerResults,i]),p=S.useCallback(()=>{if(!r)return;const d={...e,resultType:nr.Exhausted,playerResults:c,cumulatedThousands:e.cumulatedThousands+Object.values(c).filter(({isRiichi:f})=>!!f).length};r(d)},[e,r,c]);return S.useEffect(()=>{n.open&&s({0:!1,1:!1,2:!1,3:!1})},[n.open]),u.jsx(Dr,{title:l,...n,children:u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-right text-xs text-gray-500",children:"聽牌？"}),o.map(d=>u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-1",children:d.name}),u.jsx("div",{className:"shrink-0",children:u.jsx(tC,{checked:i[d.index],onChange:a,"data-player-index":d.index})})]},d.index))]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h5",{className:"font-bold",children:"分數變動"}),u.jsx("table",{className:"text-sm w-full",children:u.jsx("tbody",{children:Object.keys(t.players).map(d=>u.jsxs("tr",{children:[u.jsx("th",{children:t.players[d].name}),u.jsx("td",{children:c[d].beforeScore}),u.jsx("td",{children:u.jsx(Ct,{signed:!0,value:c[d].afterScore-c[d].beforeScore,positiveClassName:"text-green-400",negativeClassName:"text-red-400"})}),u.jsx("td",{className:"text-right",children:c[d].afterScore})]},d))})})]}),u.jsx("div",{className:"space-y-2",children:u.jsx(pe,{onClick:p,className:"w-full",children:"提交並播出分數變動動畫"})})]})})}var Ma=t=>t.type==="checkbox",Xo=t=>t instanceof Date,ct=t=>t==null;const rC=t=>typeof t=="object";var We=t=>!ct(t)&&!Array.isArray(t)&&rC(t)&&!Xo(t),nC=t=>We(t)&&t.target?Ma(t.target)?t.target.checked:t.target.value:t,BM=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,oC=(t,e)=>t.has(BM(e)),UM=t=>{const e=t.constructor&&t.constructor.prototype;return We(e)&&e.hasOwnProperty("isPrototypeOf")},tm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Qt(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(tm&&(t instanceof Blob||t instanceof FileList))&&(r||We(t)))if(e=r?[]:{},!r&&!UM(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=Qt(t[n]));else return t;return e}var La=t=>Array.isArray(t)?t.filter(Boolean):[],ke=t=>t===void 0,D=(t,e,r)=>{if(!e||!We(t))return r;const n=La(e.split(/[,[\].]+?/)).reduce((o,i)=>ct(o)?o:o[i],t);return ke(n)||n===t?ke(t[e])?r:t[e]:n},fr=t=>typeof t=="boolean";const Xu={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Jt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},WM=_e.createContext(null),rm=()=>_e.useContext(WM);var iC=(t,e,r,n=!0)=>{const o={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(o,i,{get:()=>{const s=i;return e._proxyFormState[s]!==Jt.all&&(e._proxyFormState[s]=!n||Jt.all),r&&(r[s]=!0),t[s]}});return o},jt=t=>We(t)&&!Object.keys(t).length,sC=(t,e,r,n)=>{r(t);const{name:o,...i}=t;return jt(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(s=>e[s]===(!n||Jt.all))},$l=t=>Array.isArray(t)?t:[t],aC=(t,e,r)=>!t||!e||t===e||$l(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function nm(t){const e=_e.useRef(t);e.current=t,_e.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function zM(t){const e=rm(),{control:r=e.control,disabled:n,name:o,exact:i}=t||{},[s,a]=_e.useState(r._formState),l=_e.useRef(!0),c=_e.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=_e.useRef(o);return p.current=o,nm({disabled:n,next:d=>l.current&&aC(p.current,d.name,i)&&sC(d,c.current,r._updateFormState)&&a({...r._formState,...d}),subject:r._subjects.state}),_e.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),iC(s,r,c.current,!1)}var dr=t=>typeof t=="string",lC=(t,e,r,n,o)=>dr(t)?(n&&e.watch.add(t),D(r,t,o)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),D(r,i))):(n&&(e.watchAll=!0),r);function uC(t){const e=rm(),{control:r=e.control,name:n,defaultValue:o,disabled:i,exact:s}=t||{},a=_e.useRef(n);a.current=n,nm({disabled:i,subject:r._subjects.values,next:p=>{aC(a.current,p.name,s)&&c(Qt(lC(a.current,r._names,p.values||r._formValues,!1,o)))}});const[l,c]=_e.useState(r._getWatch(n,o));return _e.useEffect(()=>r._removeUnmounted()),l}var om=t=>/^\w*$/.test(t),cC=t=>La(t.replace(/["|']|\]/g,"").split(/\.|\[/));function ye(t,e,r){let n=-1;const o=om(e)?[e]:cC(e),i=o.length,s=i-1;for(;++n<i;){const a=o[n];let l=r;if(n!==s){const c=t[a];l=We(c)||Array.isArray(c)?c:isNaN(+o[n+1])?{}:[]}t[a]=l,t=t[a]}return t}function VM(t){const e=rm(),{name:r,disabled:n,control:o=e.control,shouldUnregister:i}=t,s=oC(o._names.array,r),a=uC({control:o,name:r,defaultValue:D(o._formValues,r,D(o._defaultValues,r,t.defaultValue)),exact:!0}),l=zM({control:o,name:r}),c=_e.useRef(o.register(r,{...t.rules,value:a}));return c.current=o.register(r,t.rules),_e.useEffect(()=>{const p=o._options.shouldUnregister||i,d=(f,h)=>{const m=D(o._fields,f);m&&(m._f.mount=h)};if(d(r,!0),p){const f=Qt(D(o._options.defaultValues,r));ye(o._defaultValues,r,f),ke(D(o._formValues,r))&&ye(o._formValues,r,f)}return()=>{(s?p&&!o._state.action:p)?o.unregister(r):d(r,!1)}},[r,o,s,i]),_e.useEffect(()=>{D(o._fields,r)&&o._updateDisabledField({disabled:n,fields:o._fields,name:r,value:D(o._fields,r)._f.value})},[n,r,o]),{field:{name:r,value:a,...fr(n)||fr(l.disabled)?{disabled:l.disabled||n}:{},onChange:_e.useCallback(p=>c.current.onChange({target:{value:nC(p),name:r},type:Xu.CHANGE}),[r]),onBlur:_e.useCallback(()=>c.current.onBlur({target:{value:D(o._formValues,r),name:r},type:Xu.BLUR}),[r,o]),ref:p=>{const d=D(o._fields,r);d&&p&&(d._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:f=>p.setCustomValidity(f),reportValidity:()=>p.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!D(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!D(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!D(l.touchedFields,r)},error:{enumerable:!0,get:()=>D(l.errors,r)}})}}const pr=t=>t.render(VM(t));var GM=(t,e,r,n,o)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:o||!0}}:{},l0=t=>({isOnSubmit:!t||t===Jt.onSubmit,isOnBlur:t===Jt.onBlur,isOnChange:t===Jt.onChange,isOnAll:t===Jt.all,isOnTouch:t===Jt.onTouched}),u0=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Dl=(t,e,r,n)=>{for(const o of r||Object.keys(t)){const i=D(t,o);if(i){const{_f:s,...a}=i;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],o)&&!n)break;if(s.ref&&e(s.ref,s.name)&&!n)break}else We(a)&&Dl(a,e)}}};var HM=(t,e,r)=>{const n=La(D(t,r));return ye(n,"root",e[r]),ye(t,r,n),t},im=t=>t.type==="file",tn=t=>typeof t=="function",Zu=t=>{if(!tm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Fl=t=>dr(t),sm=t=>t.type==="radio",ec=t=>t instanceof RegExp;const c0={value:!1,isValid:!1},f0={value:!0,isValid:!0};var fC=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ke(t[0].attributes.value)?ke(t[0].value)||t[0].value===""?f0:{value:t[0].value,isValid:!0}:f0:c0}return c0};const d0={isValid:!1,value:null};var dC=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,d0):d0;function p0(t,e,r="validate"){if(Fl(t)||Array.isArray(t)&&t.every(Fl)||fr(t)&&!t)return{type:r,message:Fl(t)?t:"",ref:e}}var Po=t=>We(t)&&!ec(t)?t:{value:t,message:""},h0=async(t,e,r,n,o)=>{const{ref:i,refs:s,required:a,maxLength:l,minLength:c,min:p,max:d,pattern:f,validate:h,name:m,valueAsNumber:_,mount:I,disabled:g}=t._f,y=D(e,m);if(!I||g)return{};const v=s?s[0]:i,E=z=>{n&&v.reportValidity&&(v.setCustomValidity(fr(z)?"":z||""),v.reportValidity())},w={},C=sm(i),T=Ma(i),P=C||T,U=(_||im(i))&&ke(i.value)&&ke(y)||Zu(i)&&i.value===""||y===""||Array.isArray(y)&&!y.length,B=GM.bind(null,m,r,w),fe=(z,W,le,Oe=xr.maxLength,Re=xr.minLength)=>{const nt=z?W:le;w[m]={type:z?Oe:Re,message:nt,ref:i,...B(z?Oe:Re,nt)}};if(o?!Array.isArray(y)||!y.length:a&&(!P&&(U||ct(y))||fr(y)&&!y||T&&!fC(s).isValid||C&&!dC(s).isValid)){const{value:z,message:W}=Fl(a)?{value:!!a,message:a}:Po(a);if(z&&(w[m]={type:xr.required,message:W,ref:v,...B(xr.required,W)},!r))return E(W),w}if(!U&&(!ct(p)||!ct(d))){let z,W;const le=Po(d),Oe=Po(p);if(!ct(y)&&!isNaN(y)){const Re=i.valueAsNumber||y&&+y;ct(le.value)||(z=Re>le.value),ct(Oe.value)||(W=Re<Oe.value)}else{const Re=i.valueAsDate||new Date(y),nt=Q=>new Date(new Date().toDateString()+" "+Q),O=i.type=="time",G=i.type=="week";dr(le.value)&&y&&(z=O?nt(y)>nt(le.value):G?y>le.value:Re>new Date(le.value)),dr(Oe.value)&&y&&(W=O?nt(y)<nt(Oe.value):G?y<Oe.value:Re<new Date(Oe.value))}if((z||W)&&(fe(!!z,le.message,Oe.message,xr.max,xr.min),!r))return E(w[m].message),w}if((l||c)&&!U&&(dr(y)||o&&Array.isArray(y))){const z=Po(l),W=Po(c),le=!ct(z.value)&&y.length>+z.value,Oe=!ct(W.value)&&y.length<+W.value;if((le||Oe)&&(fe(le,z.message,W.message),!r))return E(w[m].message),w}if(f&&!U&&dr(y)){const{value:z,message:W}=Po(f);if(ec(z)&&!y.match(z)&&(w[m]={type:xr.pattern,message:W,ref:i,...B(xr.pattern,W)},!r))return E(W),w}if(h){if(tn(h)){const z=await h(y,e),W=p0(z,v);if(W&&(w[m]={...W,...B(xr.validate,W.message)},!r))return E(W.message),w}else if(We(h)){let z={};for(const W in h){if(!jt(z)&&!r)break;const le=p0(await h[W](y,e),v,W);le&&(z={...le,...B(W,le.message)},E(le.message),r&&(w[m]=z))}if(!jt(z)&&(w[m]={ref:v,...z},!r))return w}}return E(!0),w};function QM(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=ke(t)?n++:t[e[n++]];return t}function YM(t){for(const e in t)if(t.hasOwnProperty(e)&&!ke(t[e]))return!1;return!0}function Je(t,e){const r=Array.isArray(e)?e:om(e)?[e]:cC(e),n=r.length===1?t:QM(t,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(We(n)&&jt(n)||Array.isArray(n)&&YM(n))&&Je(t,r.slice(0,-1)),t}function yd(){let t=[];return{get observers(){return t},next:o=>{for(const i of t)i.next&&i.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(i=>i!==o)}}),unsubscribe:()=>{t=[]}}}var tc=t=>ct(t)||!rC(t);function Fn(t,e){if(tc(t)||tc(e))return t===e;if(Xo(t)&&Xo(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const o of r){const i=t[o];if(!n.includes(o))return!1;if(o!=="ref"){const s=e[o];if(Xo(i)&&Xo(s)||We(i)&&We(s)||Array.isArray(i)&&Array.isArray(s)?!Fn(i,s):i!==s)return!1}}return!0}var pC=t=>t.type==="select-multiple",KM=t=>sm(t)||Ma(t),md=t=>Zu(t)&&t.isConnected,hC=t=>{for(const e in t)if(tn(t[e]))return!0;return!1};function rc(t,e={}){const r=Array.isArray(t);if(We(t)||r)for(const n in t)Array.isArray(t[n])||We(t[n])&&!hC(t[n])?(e[n]=Array.isArray(t[n])?[]:{},rc(t[n],e[n])):ct(t[n])||(e[n]=!0);return e}function yC(t,e,r){const n=Array.isArray(t);if(We(t)||n)for(const o in t)Array.isArray(t[o])||We(t[o])&&!hC(t[o])?ke(e)||tc(r[o])?r[o]=Array.isArray(t[o])?rc(t[o],[]):{...rc(t[o])}:yC(t[o],ct(e)?{}:e[o],r[o]):r[o]=!Fn(t[o],e[o]);return r}var gd=(t,e)=>yC(t,e,rc(e)),mC=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ke(t)?t:e?t===""?NaN:t&&+t:r&&dr(t)?new Date(t):n?n(t):t;function vd(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return im(e)?e.files:sm(e)?dC(t.refs).value:pC(e)?[...e.selectedOptions].map(({value:r})=>r):Ma(e)?fC(t.refs).value:mC(ke(e.value)?t.ref.value:e.value,t)}var qM=(t,e,r,n)=>{const o={};for(const i of t){const s=D(e,i);s&&ye(o,i,s._f)}return{criteriaMode:r,names:[...t],fields:o,shouldUseNativeValidation:n}},ms=t=>ke(t)?t:ec(t)?t.source:We(t)?ec(t.value)?t.value.source:t.value:t,JM=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function y0(t,e,r){const n=D(t,r);if(n||om(r))return{error:n,name:r};const o=r.split(".");for(;o.length;){const i=o.join("."),s=D(e,i),a=D(t,i);if(s&&!Array.isArray(s)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};o.pop()}return{name:r}}var XM=(t,e,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(e||t):(r?n.isOnBlur:o.isOnBlur)?!t:(r?n.isOnChange:o.isOnChange)?t:!0,ZM=(t,e)=>!La(D(t,e)).length&&Je(t,e);const eL={mode:Jt.onSubmit,reValidateMode:Jt.onChange,shouldFocusError:!0};function tL(t={},e){let r={...eL,...t},n={submitCount:0,isDirty:!1,isLoading:tn(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},o={},i=We(r.defaultValues)||We(r.values)?Qt(r.defaultValues||r.values)||{}:{},s=r.shouldUnregister?{}:Qt(i),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,p=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:yd(),array:yd(),state:yd()},h=t.resetOptions&&t.resetOptions.keepDirtyValues,m=l0(r.mode),_=l0(r.reValidateMode),I=r.criteriaMode===Jt.all,g=x=>b=>{clearTimeout(p),p=setTimeout(x,b)},y=async x=>{if(d.isValid||x){const b=r.resolver?jt((await U()).errors):await fe(o,!0);b!==n.isValid&&f.state.next({isValid:b})}},v=x=>d.isValidating&&f.state.next({isValidating:x}),E=(x,b=[],A,M,$=!0,R=!0)=>{if(M&&A){if(a.action=!0,R&&Array.isArray(D(o,x))){const V=A(D(o,x),M.argA,M.argB);$&&ye(o,x,V)}if(R&&Array.isArray(D(n.errors,x))){const V=A(D(n.errors,x),M.argA,M.argB);$&&ye(n.errors,x,V),ZM(n.errors,x)}if(d.touchedFields&&R&&Array.isArray(D(n.touchedFields,x))){const V=A(D(n.touchedFields,x),M.argA,M.argB);$&&ye(n.touchedFields,x,V)}d.dirtyFields&&(n.dirtyFields=gd(i,s)),f.state.next({name:x,isDirty:W(x,b),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ye(s,x,b)},w=(x,b)=>{ye(n.errors,x,b),f.state.next({errors:n.errors})},C=(x,b,A,M)=>{const $=D(o,x);if($){const R=D(s,x,ke(A)?D(i,x):A);ke(R)||M&&M.defaultChecked||b?ye(s,x,b?R:vd($._f)):Re(x,R),a.mount&&y()}},T=(x,b,A,M,$)=>{let R=!1,V=!1;const he={name:x};if(!A||M){d.isDirty&&(V=n.isDirty,n.isDirty=he.isDirty=W(),R=V!==he.isDirty);const $e=Fn(D(i,x),b);V=D(n.dirtyFields,x),$e?Je(n.dirtyFields,x):ye(n.dirtyFields,x,!0),he.dirtyFields=n.dirtyFields,R=R||d.dirtyFields&&V!==!$e}if(A){const $e=D(n.touchedFields,x);$e||(ye(n.touchedFields,x,A),he.touchedFields=n.touchedFields,R=R||d.touchedFields&&$e!==A)}return R&&$&&f.state.next(he),R?he:{}},P=(x,b,A,M)=>{const $=D(n.errors,x),R=d.isValid&&fr(b)&&n.isValid!==b;if(t.delayError&&A?(c=g(()=>w(x,A)),c(t.delayError)):(clearTimeout(p),c=null,A?ye(n.errors,x,A):Je(n.errors,x)),(A?!Fn($,A):$)||!jt(M)||R){const V={...M,...R&&fr(b)?{isValid:b}:{},errors:n.errors,name:x};n={...n,...V},f.state.next(V)}v(!1)},U=async x=>r.resolver(s,r.context,qM(x||l.mount,o,r.criteriaMode,r.shouldUseNativeValidation)),B=async x=>{const{errors:b}=await U(x);if(x)for(const A of x){const M=D(b,A);M?ye(n.errors,A,M):Je(n.errors,A)}else n.errors=b;return b},fe=async(x,b,A={valid:!0})=>{for(const M in x){const $=x[M];if($){const{_f:R,...V}=$;if(R){const he=l.array.has(R.name),$e=await h0($,s,I,r.shouldUseNativeValidation&&!b,he);if($e[R.name]&&(A.valid=!1,b))break;!b&&(D($e,R.name)?he?HM(n.errors,$e,R.name):ye(n.errors,R.name,$e[R.name]):Je(n.errors,R.name))}V&&await fe(V,b,A)}}return A.valid},z=()=>{for(const x of l.unMount){const b=D(o,x);b&&(b._f.refs?b._f.refs.every(A=>!md(A)):!md(b._f.ref))&&sr(x)}l.unMount=new Set},W=(x,b)=>(x&&b&&ye(s,x,b),!Fn(re(),i)),le=(x,b,A)=>lC(x,l,{...a.mount?s:ke(b)?i:dr(x)?{[x]:b}:b},A,b),Oe=x=>La(D(a.mount?s:i,x,t.shouldUnregister?D(i,x,[]):[])),Re=(x,b,A={})=>{const M=D(o,x);let $=b;if(M){const R=M._f;R&&(!R.disabled&&ye(s,x,mC(b,R)),$=Zu(R.ref)&&ct(b)?"":b,pC(R.ref)?[...R.ref.options].forEach(V=>V.selected=$.includes(V.value)):R.refs?Ma(R.ref)?R.refs.length>1?R.refs.forEach(V=>(!V.defaultChecked||!V.disabled)&&(V.checked=Array.isArray($)?!!$.find(he=>he===V.value):$===V.value)):R.refs[0]&&(R.refs[0].checked=!!$):R.refs.forEach(V=>V.checked=V.value===$):im(R.ref)?R.ref.value="":(R.ref.value=$,R.ref.type||f.values.next({name:x,values:{...s}})))}(A.shouldDirty||A.shouldTouch)&&T(x,$,A.shouldTouch,A.shouldDirty,!0),A.shouldValidate&&de(x)},nt=(x,b,A)=>{for(const M in b){const $=b[M],R=`${x}.${M}`,V=D(o,R);(l.array.has(x)||!tc($)||V&&!V._f)&&!Xo($)?nt(R,$,A):Re(R,$,A)}},O=(x,b,A={})=>{const M=D(o,x),$=l.array.has(x),R=Qt(b);ye(s,x,R),$?(f.array.next({name:x,values:{...s}}),(d.isDirty||d.dirtyFields)&&A.shouldDirty&&f.state.next({name:x,dirtyFields:gd(i,s),isDirty:W(x,R)})):M&&!M._f&&!ct(R)?nt(x,R,A):Re(x,R,A),u0(x,l)&&f.state.next({...n}),f.values.next({name:x,values:{...s}}),!a.mount&&e()},G=async x=>{const b=x.target;let A=b.name,M=!0;const $=D(o,A),R=()=>b.type?vd($._f):nC(x),V=he=>{M=Number.isNaN(he)||he===D(s,A,he)};if($){let he,$e;const za=R(),mo=x.type===Xu.BLUR||x.type===Xu.FOCUS_OUT,xC=!JM($._f)&&!r.resolver&&!D(n.errors,A)&&!$._f.deps||XM(mo,D(n.touchedFields,A),n.isSubmitted,_,m),Gc=u0(A,l,mo);ye(s,A,za),mo?($._f.onBlur&&$._f.onBlur(x),c&&c(0)):$._f.onChange&&$._f.onChange(x);const Hc=T(A,za,mo,!1),SC=!jt(Hc)||Gc;if(!mo&&f.values.next({name:A,type:x.type,values:{...s}}),xC)return d.isValid&&y(),SC&&f.state.next({name:A,...Gc?{}:Hc});if(!mo&&Gc&&f.state.next({...n}),v(!0),r.resolver){const{errors:lm}=await U([A]);if(V(za),M){const wC=y0(n.errors,o,A),um=y0(lm,o,wC.name||A);he=um.error,A=um.name,$e=jt(lm)}}else he=(await h0($,s,I,r.shouldUseNativeValidation))[A],V(za),M&&(he?$e=!1:d.isValid&&($e=await fe(o,!0)));M&&($._f.deps&&de($._f.deps),P(A,$e,he,Hc))}},Q=(x,b)=>{if(D(n.errors,b)&&x.focus)return x.focus(),1},de=async(x,b={})=>{let A,M;const $=$l(x);if(v(!0),r.resolver){const R=await B(ke(x)?x:$);A=jt(R),M=x?!$.some(V=>D(R,V)):A}else x?(M=(await Promise.all($.map(async R=>{const V=D(o,R);return await fe(V&&V._f?{[R]:V}:V)}))).every(Boolean),!(!M&&!n.isValid)&&y()):M=A=await fe(o);return f.state.next({...!dr(x)||d.isValid&&A!==n.isValid?{}:{name:x},...r.resolver||!x?{isValid:A}:{},errors:n.errors,isValidating:!1}),b.shouldFocus&&!M&&Dl(o,Q,x?$:l.mount),M},re=x=>{const b={...i,...a.mount?s:{}};return ke(x)?b:dr(x)?D(b,x):x.map(A=>D(b,A))},kt=(x,b)=>({invalid:!!D((b||n).errors,x),isDirty:!!D((b||n).dirtyFields,x),isTouched:!!D((b||n).touchedFields,x),error:D((b||n).errors,x)}),Wt=x=>{x&&$l(x).forEach(b=>Je(n.errors,b)),f.state.next({errors:x?n.errors:{}})},Br=(x,b,A)=>{const M=(D(o,x,{_f:{}})._f||{}).ref;ye(n.errors,x,{...b,ref:M}),f.state.next({name:x,errors:n.errors,isValid:!1}),A&&A.shouldFocus&&M&&M.focus&&M.focus()},zt=(x,b)=>tn(x)?f.values.subscribe({next:A=>x(le(void 0,b),A)}):le(x,b,!0),sr=(x,b={})=>{for(const A of x?$l(x):l.mount)l.mount.delete(A),l.array.delete(A),b.keepValue||(Je(o,A),Je(s,A)),!b.keepError&&Je(n.errors,A),!b.keepDirty&&Je(n.dirtyFields,A),!b.keepTouched&&Je(n.touchedFields,A),!r.shouldUnregister&&!b.keepDefaultValue&&Je(i,A);f.values.next({values:{...s}}),f.state.next({...n,...b.keepDirty?{isDirty:W()}:{}}),!b.keepIsValid&&y()},Ba=({disabled:x,name:b,field:A,fields:M,value:$})=>{if(fr(x)){const R=x?void 0:ke($)?vd(A?A._f:D(M,b)._f):$;ye(s,b,R),T(b,R,!1,!1,!0)}},Xi=(x,b={})=>{let A=D(o,x);const M=fr(b.disabled);return ye(o,x,{...A||{},_f:{...A&&A._f?A._f:{ref:{name:x}},name:x,mount:!0,...b}}),l.mount.add(x),A?Ba({field:A,disabled:b.disabled,name:x}):C(x,!0,b.value),{...M?{disabled:b.disabled}:{},...r.progressive?{required:!!b.required,min:ms(b.min),max:ms(b.max),minLength:ms(b.minLength),maxLength:ms(b.maxLength),pattern:ms(b.pattern)}:{},name:x,onChange:G,onBlur:G,ref:$=>{if($){Xi(x,b),A=D(o,x);const R=ke($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,V=KM(R),he=A._f.refs||[];if(V?he.find($e=>$e===R):R===A._f.ref)return;ye(o,x,{_f:{...A._f,...V?{refs:[...he.filter(md),R,...Array.isArray(D(i,x))?[{}]:[]],ref:{type:R.type,name:x}}:{ref:R}}}),C(x,!1,void 0,R)}else A=D(o,x,{}),A._f&&(A._f.mount=!1),(r.shouldUnregister||b.shouldUnregister)&&!(oC(l.array,x)&&a.action)&&l.unMount.add(x)}}},Ua=()=>r.shouldFocusError&&Dl(o,Q,l.mount),j=x=>{fr(x)&&(f.state.next({disabled:x}),Dl(o,b=>{b.disabled=x},0,!1))},L=(x,b)=>async A=>{A&&(A.preventDefault&&A.preventDefault(),A.persist&&A.persist());let M=Qt(s);if(f.state.next({isSubmitting:!0}),r.resolver){const{errors:$,values:R}=await U();n.errors=$,M=R}else await fe(o);Je(n.errors,"root"),jt(n.errors)?(f.state.next({errors:{}}),await x(M,A)):(b&&await b({...n.errors},A),Ua(),setTimeout(Ua)),f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jt(n.errors),submitCount:n.submitCount+1,errors:n.errors})},Ee=(x,b={})=>{D(o,x)&&(ke(b.defaultValue)?O(x,D(i,x)):(O(x,b.defaultValue),ye(i,x,b.defaultValue)),b.keepTouched||Je(n.touchedFields,x),b.keepDirty||(Je(n.dirtyFields,x),n.isDirty=b.defaultValue?W(x,D(i,x)):W()),b.keepError||(Je(n.errors,x),d.isValid&&y()),f.state.next({...n}))},Tt=(x,b={})=>{const A=x?Qt(x):i,M=Qt(A),$=x&&!jt(x)?M:i;if(b.keepDefaultValues||(i=A),!b.keepValues){if(b.keepDirtyValues||h)for(const R of l.mount)D(n.dirtyFields,R)?ye($,R,D(s,R)):O(R,D($,R));else{if(tm&&ke(x))for(const R of l.mount){const V=D(o,R);if(V&&V._f){const he=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(Zu(he)){const $e=he.closest("form");if($e){$e.reset();break}}}}o={}}s=t.shouldUnregister?b.keepDefaultValues?Qt(i):{}:Qt($),f.array.next({values:{...$}}),f.values.next({values:{...$}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!b.keepIsValid,a.watch=!!t.shouldUnregister,f.state.next({submitCount:b.keepSubmitCount?n.submitCount:0,isDirty:b.keepDirty?n.isDirty:!!(b.keepDefaultValues&&!Fn(x,i)),isSubmitted:b.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:b.keepDirtyValues?n.dirtyFields:b.keepDefaultValues&&x?gd(i,x):{},touchedFields:b.keepTouched?n.touchedFields:{},errors:b.keepErrors?n.errors:{},isSubmitSuccessful:b.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Wa=(x,b)=>Tt(tn(x)?x(s):x,b);return{control:{register:Xi,unregister:sr,getFieldState:kt,handleSubmit:L,setError:Br,_executeSchema:U,_getWatch:le,_getDirty:W,_updateValid:y,_removeUnmounted:z,_updateFieldArray:E,_updateDisabledField:Ba,_getFieldArray:Oe,_reset:Tt,_resetDefaultValues:()=>tn(r.defaultValues)&&r.defaultValues().then(x=>{Wa(x,r.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:x=>{n={...n,...x}},_disableForm:j,_subjects:f,_proxyFormState:d,get _fields(){return o},get _formValues(){return s},get _state(){return a},set _state(x){a=x},get _defaultValues(){return i},get _names(){return l},set _names(x){l=x},get _formState(){return n},set _formState(x){n=x},get _options(){return r},set _options(x){r={...r,...x}}},trigger:de,register:Xi,handleSubmit:L,watch:zt,setValue:O,getValues:re,reset:Wa,resetField:Ee,clearErrors:Wt,unregister:sr,setError:Br,setFocus:(x,b={})=>{const A=D(o,x),M=A&&A._f;if(M){const $=M.refs?M.refs[0]:M.ref;$.focus&&($.focus(),b.shouldSelect&&$.select())}},getFieldState:kt}}function am(t={}){const e=_e.useRef(),r=_e.useRef(),[n,o]=_e.useState({isDirty:!1,isValidating:!1,isLoading:tn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:tn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...tL(t,()=>o(s=>({...s}))),formState:n});const i=e.current.control;return i._options=t,nm({subject:i._subjects.state,next:s=>{sC(s,i._proxyFormState,i._updateFormState,!0)&&o({...i._formState})}}),_e.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),_e.useEffect(()=>{if(i._proxyFormState.isDirty){const s=i._getDirty();s!==n.isDirty&&i._subjects.state.next({isDirty:s})}},[i,n.isDirty]),_e.useEffect(()=>{t.values&&!Fn(t.values,r.current)?(i._reset(t.values,i._options.resetOptions),r.current=t.values):i._resetDefaultValues()},[t.values,i]),_e.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=iC(n,i),e.current}const rL=em(["block w-full rounded-md border-0 p-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"]);function Ar({className:t,...e}){const r=S.useMemo(()=>rL({className:t}),[t]);return u.jsx("input",{className:r,...e})}function nL({match:t,currentMatchRound:e,onSubmit:r,...n}){const{reset:o,handleSubmit:i,control:s}=am({defaultValues:{player_0:0,player_1:0,player_2:0,player_3:0,cumulatedThousands:0,roundCount:0,extendedRoundCount:0}}),a=S.useMemo(()=>Object.keys(t.players).map(p=>({...t.players[p],index:p.toString(),position:Wc(p,e.roundCount)})),[t.players,e.roundCount]),l=S.useMemo(()=>i(c=>{if(!r)return;const p={...e,resultType:nr.Hotfix,playerResults:{0:{...e.playerResults[0],afterScore:parseInt(c.player_0,10)},1:{...e.playerResults[1],afterScore:parseInt(c.player_1,10)},2:{...e.playerResults[2],afterScore:parseInt(c.player_2,10)},3:{...e.playerResults[3],afterScore:parseInt(c.player_3,10)}},cumulatedThousands:parseInt(c.cumulatedThousands,10),roundCount:parseInt(c.roundCount,10),extendedRoundCount:parseInt(c.extendedRoundCount,10)};r(p)}),[e,i,r]);return S.useEffect(()=>{n.open&&o({player_0:e.playerResults[0].beforeScore,player_1:e.playerResults[1].beforeScore,player_2:e.playerResults[2].beforeScore,player_3:e.playerResults[3].beforeScore,cumulatedThousands:e.cumulatedThousands,roundCount:e.roundCount,extendedRoundCount:e.extendedRoundCount})},[e.cumulatedThousands,e.extendedRoundCount,e.playerResults,e.roundCount,n.open,o]),u.jsx(Dr,{title:"手動調整分數",...n,children:u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"space-y-2",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"w-1/2",children:"玩家"}),u.jsx("th",{className:"w-1/4",children:"現在分數"}),u.jsx("th",{className:"w-1/4",children:"新的分數"})]})}),u.jsxs("tbody",{children:[a.map(c=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(Jo,{player:c})}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.playerResults[c.index].beforeScore}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(pr,{name:`player_${c.index}`,control:s,rules:{required:!0},render:({field:p})=>u.jsx(Ar,{className:"text-center",type:"number",...p})})})]},c.index)),u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"供托"}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.cumulatedThousands}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(pr,{name:"cumulatedThousands",control:s,rules:{required:!0},render:({field:c})=>u.jsx(Ar,{className:"text-center",type:"number",...c})})})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"局數(東1局=1, 東2局=2, ...)"}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.roundCount}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(pr,{name:"roundCount",control:s,rules:{required:!0},render:({field:c})=>u.jsx(Ar,{className:"text-center",type:"number",...c})})})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:"本場數"}),u.jsx("td",{className:"text-center px-2 border border-gray-200 align-middle",children:e.extendedRoundCount}),u.jsx("td",{className:"px-2 border border-gray-200 align-middle",children:u.jsx(pr,{name:"extendedRoundCount",control:s,rules:{required:!0},render:({field:c})=>u.jsx(Ar,{className:"text-center",type:"number",...c})})})]})]})]})}),u.jsx("div",{className:"space-y-2",children:u.jsx(pe,{onClick:l,className:"w-full",children:"提交並更新直播畫面"})})]})})}function oL({params:{matchId:t}}){const{data:e,set:r}=$r("obs/1"),{match:n,matchRounds:o,matchCurrentRound:i,matchCurrentRoundDoras:s,updateCurrentMatchRound:a,pushMatchRound:l,setCurrentRoundDoras:c,setMatchName:p,setMatchActiveResultDetail:d,setMatchRoundHasBroadcastedToTrue:f}=Ji(t),h=S.useMemo(()=>Object.entries(o??{}).filter(([j,L])=>!!L.resultDetail).map(([j,L])=>({id:j,...L})).reverse()??[],[o]),[m,_]=S.useState(void 0),[I,g]=yn(!1),[y,v]=S.useState({initialActivePlayerIndex:"0"}),E=NM(),[w,C]=yn(!1),[T,P]=yn(!1);S.useCallback(j=>{const L=j.currentTarget.getAttribute("data-player-index");!L||!(n!=null&&n.players[L])||a({playerResults:{...i==null?void 0:i.playerResults,[L]:{...i==null?void 0:i.playerResults[L],isRevealed:!(i!=null&&i.playerResults[L].isRevealed)}}})},[n==null?void 0:n.players,i==null?void 0:i.playerResults,a]);const U=S.useCallback(j=>{const L=j.currentTarget.getAttribute("data-player-index");if(!L)return;const Ee=n==null?void 0:n.players[L];if(!Ee)return;const Tt=!(i!=null&&i.playerResults[L].isRiichi);E.showConfirmDialog({title:Tt?"確定要立直嗎？":"取消立直？",content:Tt?`一旦點擊確定，就會播出立直動畫，請確定立直的是 ${Ee.name}！`:`你是否想取消 ${Ee.name} 的立直？`,onClickOk:async()=>(a({playerResults:{...i==null?void 0:i.playerResults,[L]:{...i==null?void 0:i.playerResults[L],isRiichi:!(i!=null&&i.playerResults[L].isRiichi)}}}),new Promise(Wa=>{setTimeout(Wa,Tt?3e3:10)}))})},[E,n==null?void 0:n.players,i==null?void 0:i.playerResults,a]),B=S.useCallback(j=>{var Ee;const L=parseInt((Ee=j.currentTarget)==null?void 0:Ee.getAttribute("data-index"),10);typeof L<"u"&&!Number.isNaN(L)&&_(L)},[]),fe=S.useCallback(j=>{if(typeof m<"u"){const L=j[0];if(!L)return;const Ee=[...s];m===-1?Ee.push(L):Ee[m]=L,c(Ee),_(void 0)}},[m,s,c]),z=S.useCallback(()=>{if(typeof m<"u"){const j=[...s];m>-1&&(j.splice(m,1),c(j),_(void 0))}},[m,s,c]),W=S.useCallback(()=>{_(void 0)},[]),le=S.useCallback(j=>{const L=j==null?void 0:j.currentTarget.getAttribute("data-player-index");L&&(v({initialActivePlayerIndex:L}),g())},[g]),Oe=S.useCallback(()=>{C(!0)},[C]),Re=S.useCallback(()=>{P(!0)},[P]),nt=S.useCallback(j=>{try{const L=e0(j.roundCount),Ee=j.playerResults[L].type===gt.Win,Tt=!Ee&&j.roundCount>=8;Tt&&alert("對局結束。"),a({...j,nextRoundType:Tt?Fe.End:Ee?Fe.Extended:Fe.NextRound}),g(!1)}catch(L){console.error(L)}},[g,a]),O=S.useCallback(j=>{try{const L=e0(j.roundCount),Ee=j.playerResults[L].type!==gt.Win,Tt=Ee&&j.roundCount>=8;Tt&&alert("對局結束。"),a({...j,nextRoundType:Tt?Fe.End:Ee?Fe.NextRoundAndExtended:Fe.Extended}),C(!1)}catch(L){console.error(L)}},[C,a]),G=S.useCallback(j=>{try{a({playerResults:j.playerResults,resultType:nr.Hotfix});const L={matchId:t,code:th(t,j.roundCount,j.extendedRoundCount),roundCount:j.roundCount,extendedRoundCount:j.extendedRoundCount,cumulatedThousands:j.cumulatedThousands,resultType:nr.Unknown,nextRoundType:Fe.Unknown,playerResults:t0(j.playerResults),doras:{}};l(L),P(!1)}catch(L){console.error(L)}},[t,l,P,a]),Q=S.useCallback(()=>{if(!i)return;const j=i.nextRoundType===Fe.NextRound||i.nextRoundType===Fe.NextRoundAndExtended?i.roundCount+1:i.roundCount,L=i.nextRoundType===Fe.Extended||i.nextRoundType===Fe.NextRoundAndExtended?i.extendedRoundCount+1:0,Ee={matchId:t,code:th(t,j,L),roundCount:j,extendedRoundCount:L,cumulatedThousands:i.cumulatedThousands,resultType:nr.Unknown,nextRoundType:Fe.Unknown,playerResults:t0(i.playerResults),doras:{}};l(Ee),_(-1)},[i,t,l]),de=S.useCallback(()=>{r({matchId:t})},[t,r]),[re,kt]=S.useState(null),Wt=S.useCallback(j=>{const L=j.currentTarget.getAttribute("data-player-index");typeof L>"u"||!(i!=null&&i.playerResults[L])||kt({index:L,tiles:(i==null?void 0:i.playerResults[L].waitingTiles)??[]})},[i==null?void 0:i.playerResults]),Br=S.useCallback(()=>{kt(null)},[]),zt=S.useCallback(j=>{re&&(a({playerResults:{...i==null?void 0:i.playerResults,[re.index]:{...i==null?void 0:i.playerResults[re.index],waitingTiles:j}}}),kt(null))},[re,i==null?void 0:i.playerResults,a]),sr=S.useCallback(()=>{re&&(a({playerResults:{...i==null?void 0:i.playerResults,[re.index]:{...i==null?void 0:i.playerResults[re.index],waitingTiles:[]}}}),kt(null))},[re,i==null?void 0:i.playerResults,a]),Ba=S.useCallback(j=>{if(j.preventDefault(),!n)return;const L=prompt("對局名稱",n.name);L&&p(L)},[n,p]),Xi=S.useCallback(j=>{if(!o)return;const L=j.currentTarget.getAttribute("data-match-round-id");if(!L)return;const Ee=o[L].resultDetail;Ee&&(d(Ee),f(L),setTimeout(()=>{d(null)},2e4))},[o]),Ua=S.useCallback(()=>{d(null)},[]);return!n||!i?u.jsx("div",{children:"對局讀取失敗。"}):u.jsxs("div",{children:[u.jsxs("div",{className:"container mx-auto my-8 px-8 space-y-6",children:[u.jsxs("div",{className:"flex flex-row items-center gap-x-4 text-white",children:[u.jsxs("div",{className:"p-2 pl-4 pr-10 flex items-center gap-x-8 transition-[width] text-[4rem]",style:{background:"linear-gradient(280deg, transparent, transparent 22px, #00000080 23px, #00000080 100%)"},children:[u.jsxs("div",{className:"text-[0.5em]",children:[u.jsxs("div",{className:"text-[0.5em]",children:[n.name," ",u.jsx("button",{type:"button",onClick:Ba,children:u.jsx("span",{className:"material-symbols-outlined text-sm underline decoration-dotted",children:"edit"})})]}),u.jsxs("div",{className:"flex gap-x-8 items-center",children:[u.jsx("div",{children:u.jsx(Nr,{roundCount:i.roundCount,max:8})}),u.jsxs("div",{className:"flex flex-col justify-around",children:[u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-hundred.png",alt:"hundred",className:"h-2"})}),u.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:i.extendedRoundCount??0})]}),u.jsxs("div",{className:"flex-1 flex flex-row items-center gap-x-3",children:[u.jsx("div",{className:"flex-1",children:u.jsx("img",{src:"/images/score-thousand.png",alt:"thousand",className:"h-2"})}),u.jsx("div",{className:"text-[0.4em] pb-1.5 leading-none",children:i.cumulatedThousands??0})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-x-2",children:[s.map((j,L)=>u.jsx("button",{"data-index":L,onClick:B,className:"hover:opacity-80",children:u.jsx(Fa,{className:"w-12 animate-[fadeIn_0.5s_ease-in-out]",children:j},j)})),u.jsx(pe,{type:"button",color:"secondary",className:`${s.length===0&&"animate-bounce"}`,"data-index":"-1",onClick:B,children:"+懸賞"})]})]}),u.jsx("div",{className:"flex-1"}),u.jsx("div",{className:"shrink-0",children:(e==null?void 0:e.matchId)!==t&&u.jsx(pe,{color:"success",type:"button",className:"animate-pulse",onClick:de,children:"開始OBS"})})]}),u.jsxs("div",{className:"text-right space-x-4",children:[n.activeResultDetail&&u.jsxs(pe,{color:"secondary",type:"button",onClick:Ua,children:["結束播放中的和牌詳情",u.jsx("br",{}),u.jsx("span",{className:"text-xs",children:"(或最多20秒後自動結束)"})]}),i.nextRoundType!==Fe.Unknown&&i.nextRoundType!==Fe.End&&u.jsxs(pe,{color:"success",type:"button",className:"animate-pulse",onClick:Q,children:["進入",u.jsx(Nr,{roundCount:i.nextRoundType===Fe.NextRound||i.nextRoundType===Fe.NextRoundAndExtended?i.roundCount+1:i.roundCount,extendedRoundCount:i.nextRoundType===Fe.Extended||i.nextRoundType===Fe.NextRoundAndExtended?i.extendedRoundCount+1:0})]}),u.jsx(pe,{color:"secondary",type:"button",onClick:Oe,children:"流局"})]}),u.jsx("div",{className:"space-y-4",children:["0","1","2","3"].map(j=>u.jsxs("div",{className:"flex gap-x-2 items-center",children:[u.jsx("div",{className:"flex-1 text-[2.5rem]",children:u.jsx(uo,{player:n.players[j],playerIndex:j,score:i.playerResults[j].afterScore,scoreChanges:i.playerResults[j].scoreChanges,isEast:zc(j,i.roundCount),isRiichi:i.playerResults[j].isRiichi,waitingTiles:i.playerResults[j].waitingTiles,onClickWaitingTiles:Wt})}),u.jsx("div",{children:u.jsx("button",{type:"button",className:`${i.playerResults[j].isRiichi?"bg-orange-600 text-white":"bg-white text-orange-600 opacity-30"} h-16 w-16 border-2 border-orange-600  rounded-full text-lg`,onClick:U,"data-player-index":j,children:i.playerResults[j].isRiichi?"已立直":"立直?"})}),u.jsx("div",{className:"pl-6",children:u.jsx(pe,{color:"danger",type:"button",onClick:le,"data-player-index":j,children:"和了"})})]}))}),u.jsx("h4",{className:"text-3xl",children:"和牌記錄"}),u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"局數"}),u.jsx("th",{children:"玩家"}),u.jsx("th",{children:"分數＆細節"}),u.jsx("th",{className:"text-right px-2",children:"操作"})]})}),u.jsx("tbody",{children:h.map(j=>u.jsxs("tr",{className:"odd:bg-neutral-200",children:[u.jsx("td",{className:"text-center py-1",children:u.jsx(Nr,{roundCount:j.roundCount,extendedRoundCount:j.extendedRoundCount})}),u.jsx("td",{className:"text-center py-1",style:{background:n.players[j.resultDetail.winnerPlayerIndex].color},children:n.players[j.resultDetail.winnerPlayerIndex].name}),u.jsxs("td",{className:"text-center py-1",children:[u.jsx("p",{children:j.resultDetail.yakusInText.join(" ")}),u.jsx("p",{children:u.jsx(rh,{han:Math.min(j.resultDetail.isYakuman?13:12,j.resultDetail.han),fu:j.resultDetail.fu})})]}),u.jsx("td",{className:"text-right py-1 px-2",children:u.jsx(pe,{color:j.hasBroadcasted?"secondary":"success",type:"button",className:j.hasBroadcasted?"opacity-50":"animate-pulse",onClick:Xi,"data-match-round-id":j.id,children:j.hasBroadcasted?"已播放過":"播放和牌詳情"})})]},j.id))})]}),u.jsx("h4",{className:"text-3xl",children:"分數"}),u.jsx(Vc,{players:n.players,matchRounds:o??{},className:"w-full table-auto"}),u.jsx("div",{children:u.jsx(pe,{color:"secondary",type:"button",onClick:Re,children:"手動調整分數"})})]}),u.jsx(Dr,{open:typeof m<"u",title:"選擇懸賞",onClose:W,children:u.jsx(a0,{hideRedTiles:!0,onSubmit:fe,onRemove:z,canRemove:typeof m<"u"&&m>0,defaultValue:typeof m<"u"?[s[m]]:void 0})}),u.jsx(Dr,{open:!!re,title:"選擇待牌",onClose:Br,children:u.jsx(a0,{hideRedTiles:!0,onSubmit:zt,onRemove:sr,defaultValue:re==null?void 0:re.tiles,multiple:!0,canRemove:!0})}),u.jsx(DM,{match:n,currentMatchRound:i,open:I,onSubmit:nt,onClose:()=>g(!1),...y}),u.jsx(LM,{match:n,currentMatchRound:i,open:w,onSubmit:O,onClose:()=>C(!1),...y}),u.jsx(nL,{match:n,currentMatchRound:i,open:T,onSubmit:G,onClose:()=>P(!1),...y})]})}function Mn({children:t,label:e,...r}){return u.jsx("div",{...r,children:u.jsxs("label",{children:[u.jsx("div",{className:"text-sm text-gray-800 mb-1",children:e}),u.jsx("div",{children:t})]})})}const iL=em(["block w-full rounded-md border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"]);function gC({className:t,...e}){const r=S.useMemo(()=>iL({className:t}),[t]);return u.jsx("input",{type:"color",className:r,...e})}const pl={title:"",name:"新的玩家",color:"#FF0000",propicSrc:""};function vC({defaultValue:t,onSubmit:e}){const[r,n]=S.useState(pl),{reset:o,getValues:i,control:s,handleSubmit:a}=am({defaultValues:pl}),[{loading:l},c]=RM(e,[e]),p=S.useMemo(()=>a(f=>{c(f)}),[c,a]),d=S.useCallback(()=>{n(i())},[i]);return S.useEffect(()=>{o(t??pl),n(t??pl)},[t,o]),u.jsxs("form",{onSubmit:p,onBlur:d,className:"space-y-6",children:[u.jsx(Mn,{label:"顏色（務必選能看清楚白字的深色）",children:u.jsx(pr,{name:"color",control:s,render:({field:f})=>u.jsx(gC,{...f}),disabled:l})}),u.jsx(Mn,{label:"稱號",children:u.jsx(pr,{name:"title",control:s,render:({field:f})=>u.jsx(Ar,{type:"text",...f,placeholder:"例：天鳳鳳位、雀魂x段",disabled:l})})}),u.jsx(Mn,{className:"mb-6",label:"名字",children:u.jsx(pr,{name:"name",control:s,rules:{required:!0},render:({field:f})=>u.jsx(Ar,{...f}),disabled:l})}),u.jsxs(Mn,{className:"mb-6",label:"圖片URL (https://...)",children:[u.jsx(pr,{name:"propicSrc",control:s,render:({field:f})=>u.jsx(Ar,{type:"url",placeholder:"https://",...f,disabled:l})}),u.jsx("p",{className:"text-sm",children:"建議大小 360px * 500px (18:25)、使用去背的 .png"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"mb-2",children:"預覽"}),u.jsx("div",{className:"text-[4rem] p-4 bg-gray-800 text-white",children:u.jsx(uo,{player:r,score:25e3,waitingTiles:["5m","6m","7m"],isRiichi:!0,isEast:!0})})]}),u.jsx("div",{children:u.jsx(pe,{type:"submit",loading:l,children:"儲存"})})]})}function sL(){const[t,e]=S.useState(),r=S.useMemo(()=>[],[]),[n,o]=yn(!1),i=S.useCallback(()=>o(!1),[o]),s=S.useCallback(()=>{e(void 0),o(!0)},[o]),a=S.useCallback(c=>{e(c),o(!0)},[o]),l=S.useCallback(()=>Promise.resolve(),[]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{children:u.jsx("h1",{className:"text-4xl",children:"玩家"})}),u.jsx("div",{children:u.jsx(pe,{onClick:s,children:"新增"})})]}),u.jsx("div",{className:"space-y-2",children:r.map(c=>u.jsx(Jo,{player:c,onClickEdit:a}))})]}),u.jsx(Dr,{title:"新增／修改玩家",open:n,onClose:i,children:u.jsx("div",{className:"container space-y-6",children:u.jsx(vC,{onSubmit:l,defaultValue:t})})})]})}const aL={0:"東",1:"南",2:"西",3:"北"};function lL({playerIndex:t,...e}){return u.jsx("span",{...e,children:aL[t]})}const uL={0:{title:"",name:"玩家A",color:"#6700cf"},1:{title:"",name:"玩家B",color:"#00b5de"},2:{title:"",name:"玩家C",color:"#e3277b"},3:{title:"",name:"玩家D",color:"#03ada5"}},cL=`${new Date().toISOString().substring(0,10)} 對局`;function fL(){const t=iM(),[,e]=PI(),[r,n]=S.useState(uL),[o,i]=S.useState(),[s,a]=S.useState(cL),[l,c]=yn(!1),p=S.useCallback(_=>{const I=_.currentTarget.getAttribute("data-player-index");if(!I)return;const g=r[I];i({index:I,player:g}),c(!0)},[r,c]),d=S.useCallback(async _=>{o&&(n(I=>({...I,[o.index]:{...I[o.index],..._}})),c(!1))},[o,c]),f=S.useCallback(()=>{c(!1)},[c]),h=S.useCallback(_=>{const I=_.currentTarget;if(!I)return;const g=I.getAttribute("data-player-index");if(!g)return;const y=g==="0"?"1":g==="1"?"2":"3";n(v=>({...v,[g]:v[y],[y]:v[g]}))},[]),m=S.useCallback(async()=>{const _={code:xM(),name:s,remark:"",createdAt:new Date().toISOString(),createdBy:"Dicky",updatedAt:new Date().toISOString(),updatedBy:"Dicky",setting:{template:"mleague"},players:r},g={matchId:(await t.push("matches",_)).key,code:th(_.code,1,0),roundCount:1,extendedRoundCount:0,cumulatedThousands:0,resultType:0,nextRoundType:0,playerResults:{0:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]},1:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]},2:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]},3:{beforeScore:25e3,afterScore:25e3,type:0,scoreChanges:[],prevScoreChanges:[]}},doras:[]};await t.push("matchRounds",g),e(`/match/${g.matchId}/obs`)},[t,s,r,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"container mx-auto max-w-screen-sm",children:u.jsxs("div",{className:"min-h-screen flex flex-col py-16 gap-y-4",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"space-y-12",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx("h1",{className:"text-4xl",children:"對局"}),u.jsx(Mn,{label:"對局名稱",children:u.jsx(Ar,{name:"name",value:s,onChange:_=>a(_.currentTarget.value)})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h1",{className:"text-4xl",children:"玩家"}),u.jsx("div",{className:"space-y-2",children:["0","1","2","3"].map(_=>u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("div",{className:"h-14 w-14 border-4 rounded border-black text-[2.5rem] flex items-center justify-center",children:u.jsx(lL,{playerIndex:_})})}),u.jsx("div",{className:"flex-1 text-[2.5em]",children:u.jsx(uo,{player:r[_],score:25e3})}),u.jsx("div",{className:"shrink-0 space-x-2",children:u.jsx(pe,{type:"button","data-player-index":_,onClick:p,disabled:!r[_],children:"修改"})})]},_),_!=="3"&&u.jsx("div",{className:"text-center",children:u.jsx(pe,{variant:"icon",color:"secondary",type:"button","data-player-index":_,onClick:h,children:u.jsx("span",{className:"material-symbols-outlined",children:"swap_vert"})})})]}))})]})]})}),u.jsx("div",{className:"shrink-0 space-y-4",children:u.jsx(pe,{size:"xlarge",className:"w-full",onClick:m,type:"submit",children:"開始對局"})})]})}),u.jsx(Dr,{title:"修改玩家",open:l,onClose:f,children:u.jsx("div",{className:"container space-y-6",children:u.jsx(vC,{onSubmit:d,defaultValue:o==null?void 0:o.player})})})]})}function dL({team:t,onClickEdit:e,children:r,...n}){const o=S.useCallback(()=>{e==null||e(t)},[e,t]);return u.jsxs("div",{className:"flex-1 flex items-center gap-x-2 rounded p-2 text-white",style:{background:t.color??"#115e59"},...n,children:[u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"text-2xl",children:t.name??"(無名稱)"})}),e&&u.jsx("div",{className:"shrink-0",children:u.jsx(pe,{variant:"icon",color:"inverted",type:"button",onClick:o,children:u.jsx("span",{className:"material-symbols-outlined",children:"edit"})})})]})}function pL(){const{data:t,update:e,push:r}=$r("teams"),n=S.useMemo(()=>Object.entries(t??{}).reverse().map(([g,y])=>({...y,_id:g})),[t]),[o,i]=yn(!1),{register:s,reset:a,handleSubmit:l,control:c}=am({defaultValues:{_id:void 0,name:"新的隊伍",color:"#000000"}}),p=uC({control:c}),d=S.useMemo(()=>({name:"隊員名字",title:p.name??"",color:p.color??"#000000"}),[p.color,p.name]),f=S.useRef(null),h=S.useCallback(()=>i(!1),[i]),m=S.useCallback(()=>{a({_id:"",name:"新的隊伍",color:"#000000"}),i(!0)},[a,i]),_=S.useCallback(g=>{a({...g}),i(!0)},[a,i]),I=S.useMemo(()=>l(g=>{g._id?e({[g._id]:g}):r(g),i(!1)}),[l,r,i,e]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{children:u.jsx("h1",{className:"text-4xl",children:"隊伍"})}),u.jsx("div",{children:u.jsx(pe,{onClick:m,children:"新增"})})]}),u.jsx("div",{className:"space-y-2",children:n.map(g=>u.jsx(dL,{team:g,onClickEdit:_},g._id))})]}),u.jsx(Dr,{title:"新增／修改隊伍",open:o,onClose:h,children:u.jsx("div",{className:"container",children:u.jsxs("form",{ref:f,onSubmit:I,children:[u.jsx("input",{type:"hidden",...s("_id")}),u.jsxs("div",{children:[u.jsx(Mn,{className:"mb-6",label:"名字",children:u.jsx(pr,{name:"name",control:c,rules:{required:!0},render:({field:g})=>u.jsx(Ar,{...g})})}),u.jsx(Mn,{className:"mb-6",label:"顏色（務必選能看清楚白字的深色）",children:u.jsx(pr,{name:"color",control:c,rules:{required:!0},render:({field:g})=>u.jsx(gC,{...g})})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"mb-2",children:"預覽"}),u.jsx("div",{className:"text-[4rem] px-4 pt-6 pb-1 bg-gray-800 text-white relative",children:u.jsx(uo,{player:d,score:25e3})})]}),u.jsxs("div",{className:"flex gap-x-2",children:[u.jsx("div",{className:"flex-1",children:u.jsx(pe,{className:"w-full",color:"secondary",type:"button",onClick:h,children:"取消"})}),u.jsx("div",{className:"flex-1",children:u.jsx(pe,{className:"w-full",type:"submit",children:"儲存"})})]})]})})})]})}function hL({params:{obsRoomId:t}}){const{data:e}=$r(`obs/${t}`),r=S.useMemo(()=>({matchId:e==null?void 0:e.matchId}),[e==null?void 0:e.matchId]);return console.log(e),!r||!r.matchId?u.jsx(u.Fragment,{children:"讀取中…"}):u.jsx(ZE,{params:r})}function yL({params:{obsRoomId:t}}){const{data:e}=$r(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:o}=Ji((e==null?void 0:e.matchId)??"");return!r||!o?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:u.jsx(Vc,{players:r.players,matchRounds:n,className:"w-full table-auto"})})})}function mL(){const{data:t}=$r("matches"),e=S.useMemo(()=>Object.entries(t??{}).reverse().map(([r,n])=>({...n,_id:r})),[t]);return u.jsxs("div",{className:"container mx-auto max-w-screen-sm space-y-4 py-16",children:[u.jsx("div",{className:"shrink-0",children:u.jsx("a",{href:"/",className:"underline",children:"< 回上一頁"})}),u.jsx("div",{className:"flex justify-between items-center",children:u.jsx("div",{children:u.jsx("h1",{className:"text-4xl",children:"玩家"})})}),u.jsx("div",{className:"space-y-2",children:e.map(()=>"123")})]})}function _C({players:t,matchRounds:e}){return S.useMemo(()=>{const r=Object.values(e??{}),n=r[r.length-1];return[...r.map(o=>({name:o.resultType===nr.Hotfix?"分數調整":XE(o.roundCount,o.extendedRoundCount,8),p0:o.playerResults[0].beforeScore,p1:o.playerResults[1].beforeScore,p2:o.playerResults[2].beforeScore,p3:o.playerResults[3].beforeScore})),{name:"完結",p0:n.playerResults[0].afterScore,p1:n.playerResults[1].afterScore,p2:n.playerResults[2].afterScore,p3:n.playerResults[3].afterScore}]},[e]),u.jsx("div",{className:"bg-white"})}function gL({params:{obsRoomId:t}}){const{data:e}=$r(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:o}=Ji((e==null?void 0:e.matchId)??"");return!r||!o?u.jsx("div",{children:"對局讀取失敗。"}):u.jsx("div",{children:u.jsx("div",{className:"container mx-auto my-8 px-8 space-y-6",children:u.jsx(_C,{players:r.players,matchRounds:n})})})}function vL({params:{obsRoomId:t}}){const{data:e}=$r(`obs/${t}`),{match:r,matchRounds:n,matchCurrentRound:o}=Ji((e==null?void 0:e.matchId)??""),[i,s]=S.useState(0);return S.useEffect(()=>{const l=setInterval(()=>{s(c=>1-c)},8e3);return()=>{clearInterval(l)}},[]),!r||!o?u.jsx("div",{children:"對局讀取失敗。"}):u.jsxs("div",{children:[u.jsx("div",{className:i===0?"block":"hidden",children:u.jsx(Vc,{players:r.players,matchRounds:n,className:"w-full table-auto"})}),u.jsx("div",{className:i===1?"block":"hidden",children:u.jsx(_C,{players:r.players,matchRounds:n})})]})}_d.createRoot(document.getElementById("root")).render(u.jsx(_e.StrictMode,{children:u.jsx(oM,{children:u.jsx(PM,{children:u.jsxs(TI,{children:[u.jsx(Rt,{path:"/",component:lM}),u.jsx(Rt,{path:"/create-match",component:fL}),u.jsx(Rt,{path:"/match/:matchId",component:EM}),u.jsx(Rt,{path:"/match/:matchId/obs",component:ZE}),u.jsx(Rt,{path:"/match/:matchId/control",component:oL}),u.jsx(Rt,{path:"/obs/:obsRoomId",component:hL}),u.jsx(Rt,{path:"/obs/:obsRoomId/score",component:yL}),u.jsx(Rt,{path:"/obs/:obsRoomId/chart",component:gL}),u.jsx(Rt,{path:"/obs/:obsRoomId/carousel",component:vL}),u.jsx(Rt,{path:"/players",component:sL}),u.jsx(Rt,{path:"/teams",component:pL}),u.jsx(Rt,{path:"/matches",component:mL})]})})})}));$I();
