import{q as f,s as t,c as s,r as c}from"./useCurrentTournament-Dp40AeN5.js";import{v as u}from"./index-0LaFy2cp.js";const i=f.fragmentForType().project(a=>({_id:t(),name:t().nullable(),nickname:t().nullable(),designation:t().nullable(),introduction:t().nullable(),portraitImage:a.field("portraitImage.asset").field("_ref",t().nullable().transform(l=>s(l,{mode:"cover",width:720,height:1e3})))})),n=f.fragmentForType().project(a=>({_id:t(),name:t().nullable(),secondaryName:t().nullable(),thirdName:t().nullable(),preferredName:t().nullable(),squareLogoImage:a.field("squareLogoImage.asset").field("_ref",t().nullable().transform(l=>s(l,{width:1e3,height:1e3}))),color:a.field("color.hex",t().nullable()),introduction:t().nullable()})),g=async a=>{const l=f.star.filterByType("match").filterRaw(`tournament._ref == "${a}"`).order("startAt asc").slice(0,10).project(r=>({_id:t(),name:t().nullable(),playerEast:r.field("playerEast").deref().project(i),playerSouth:r.field("playerSouth").deref().project(i),playerWest:r.field("playerWest").deref().project(i),playerNorth:r.field("playerNorth").deref().project(i),playerEastTeam:r.field("playerEastTeam").deref().project(n),playerSouthTeam:r.field("playerSouthTeam").deref().project(n),playerWestTeam:r.field("playerWestTeam").deref().project(n),playerNorthTeam:r.field("playerNorthTeam").deref().project(n),_createdAt:!0,_updatedAt:!0}));return c(l).then(r=>{const d=(e,o)=>({id:(e==null?void 0:e._id)??"",teamId:(o==null?void 0:o._id)??"",color:{primary:(o==null?void 0:o.color)??"#FFFF00",secondary:u((o==null?void 0:o.color)??"#FFFF00")},name:{official:{primary:(e==null?void 0:e.name)??"",secondary:(e==null?void 0:e.designation)??"",third:(e==null?void 0:e.nickname)??""},display:{primary:(e==null?void 0:e.name)??"",secondary:(o==null?void 0:o.preferredName)??"",third:(e==null?void 0:e.nickname)??""}},image:{portrait:{default:{url:(e==null?void 0:e.portraitImage)??""}},logo:{default:{url:(o==null?void 0:o.squareLogoImage)??""}}}});return r.map(e=>({schemaVersion:"2",code:e._id,data:{name:e.name??"",players:[d(e.playerEast,e.playerEastTeam),d(e.playerSouth,e.playerSouthTeam),d(e.playerWest,e.playerWestTeam),d(e.playerNorth,e.playerNorthTeam)],rulesetRef:"hkleague-4p"},metadata:{createdAt:e._createdAt,updatedAt:e._updatedAt}}))})},h=async a=>{const l=f.star.filterByType("match").filterRaw(`_id == "${a}"`).order("startAt asc").slice(0,1).project(r=>({_id:t(),name:t().nullable(),playerEast:r.field("playerEast").deref().project(i),playerSouth:r.field("playerSouth").deref().project(i),playerWest:r.field("playerWest").deref().project(i),playerNorth:r.field("playerNorth").deref().project(i),playerEastTeam:r.field("playerEastTeam").deref().project(n),playerSouthTeam:r.field("playerSouthTeam").deref().project(n),playerWestTeam:r.field("playerWestTeam").deref().project(n),playerNorthTeam:r.field("playerNorthTeam").deref().project(n),_createdAt:!0,_updatedAt:!0}));return c(l).then(r=>{if(r.length===0)throw new Error("找不到賽事");const d=(e,o)=>({id:(e==null?void 0:e._id)??"",teamId:(o==null?void 0:o._id)??"",color:{primary:(o==null?void 0:o.color)??"#FFFF00",secondary:u((o==null?void 0:o.color)??"#FFFF00")},name:{official:{primary:(e==null?void 0:e.name)??"",secondary:(e==null?void 0:e.designation)??"",third:(e==null?void 0:e.nickname)??""},display:{primary:(e==null?void 0:e.name)??"",secondary:(o==null?void 0:o.preferredName)??"",third:(e==null?void 0:e.nickname)??""}},image:{portrait:{default:{url:(e==null?void 0:e.portraitImage)??""}},logo:{default:{url:(o==null?void 0:o.squareLogoImage)??""}}}});return{schemaVersion:"2",code:r[0]._id,data:{name:r[0].name??"",players:[d(r[0].playerEast,r[0].playerEastTeam),d(r[0].playerSouth,r[0].playerSouthTeam),d(r[0].playerWest,r[0].playerWestTeam),d(r[0].playerNorth,r[0].playerNorthTeam)],rulesetRef:"hkleague-4p"},metadata:{createdAt:r[0]._createdAt,updatedAt:r[0]._updatedAt}}})};export{g as a,h as b};
